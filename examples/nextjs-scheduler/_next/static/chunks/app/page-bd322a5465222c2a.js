(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2698:function(e,t,n){Promise.resolve().then(n.bind(n,8222))},8222:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Editor}});var a=n(7573),r=n(2068),o=n.n(r),c=n(7653);let s=["Alice","Bob","Carol","Chuck","Dave","Erin","Frank","Grace","Ivan","Justin","Matilda","Oscar","Steve","Victor","Zoe"];function parseDate(e){let[t,n,a]=e.toLocaleDateString("en").split("/");return t=Number(t)>9?t:"0"+t,n=Number(n)>9?n:"0"+n,a=a.slice(2),"".concat(n,"-").concat(t,"-").concat(a)}var i=n(1083),l=n.n(i);n(9928);var u=n(9839);function Scheduler(e){let{content:t,actions:n}=e,[r,s]=(0,c.useState)(new Date),[i,l]=(0,c.useState)("Enter text here!"),d=r?parseDate(new Date(r.toString())):"",eventHandler=e=>{let a=!1;switch(e){case"PUSH":a=!1,t.forEach(e=>{if(e.date===d)return a=!a,0}),a?n.updateContent(d,i):n.addContent(d,i),l("Enter text here!");break;case"DELETE":n.deleteContent(d)}};return(0,a.jsx)("article",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(u.ZP,{onChange:s,value:r,locale:"en-EN",showNeighboringMonth:!1,formatDay:(e,t)=>t.toLocaleString("en",{day:"numeric"}),tileClassName:e=>{let{date:n}=e;return t.find(e=>e.date===parseDate(n))?"highlight":""}}),(0,a.jsxs)("p",{children:["selected day : ",d]}),(0,a.jsx)("div",{className:o().memo,children:t.map((e,t)=>{if(e.date===d)return(0,a.jsx)("p",{children:e.text},t)})}),(0,a.jsxs)("div",{className:o().inputForm_editor,children:[(0,a.jsx)("h3",{children:"input form"}),(0,a.jsx)("textarea",{className:o().textArea,value:i,onChange:e=>l(e.target.value)})]}),(0,a.jsx)("button",{className:"button",onClick:()=>eventHandler("PUSH"),children:"push"}),(0,a.jsx)("button",{className:"button",onClick:()=>eventHandler("DELETE"),children:"pop"})]})})}let d=[{date:parseDate(new Date).replace(/^\d{2}/,"01"),text:"payday"},{date:parseDate(new Date).replace(/^\d{2}/,"17"),text:"Garry's birthday"}],p="next.js-Scheduler-".concat(parseDate(new Date));function Editor(){let[e,t]=(0,c.useState)([]),[n,r]=(0,c.useState)(d),[u]=(0,c.useState)(()=>new(l()).Document(p));return(0,c.useEffect)(()=>{let e=new(l()).Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});u.subscribe("presence",e=>{e.type!==i.DocEventType.PresenceChanged&&t(function(e){let t=[];for(let{presence:n}of e)t.push(n.userName);return t}(u.getPresences()))}),async function(t,n){await e.activate(),await e.attach(t,{initialPresence:{userName:function(){let e=Math.floor(Math.random()*s.length);return s[e]}()}}),t.update(e=>{e.content||(e.content=d)},"create default content if not exists"),t.subscribe(()=>{n(t.getRoot().content)}),n(t.getRoot().content)}(u,e=>r(e))},[]),(0,a.jsxs)("main",{className:o().main,children:[(0,a.jsxs)("p",{children:["peers : [",e.map((e,t)=>(0,a.jsxs)("span",{children:[" ",e,", "]},t))," ","]"]}),(0,a.jsx)(Scheduler,{content:n,actions:{addContent(e,t){u.update(n=>{n.content.push({date:e,text:t})})},deleteContent(e){u.update(t=>{let n;for(let a of t.content)if(a.date===e){n=a;break}n&&t.content.deleteByID(n.getID())})},updateContent(e,t){u.update(n=>{let a;for(let t of n.content)if(t.date===e){a=t;break}a&&(a.text=t)})}}})]})}},9928:function(){},2068:function(e){e.exports={main:"page_main__s_E_L",textArea:"page_textArea__sVKfA",memo:"page_memo__V0Ipn",inputForm_editor:"page_inputForm_editor__Tk7dD"}}},function(e){e.O(0,[476,399,293,858,744],function(){return e(e.s=2698)}),_N_E=e.O()}]);