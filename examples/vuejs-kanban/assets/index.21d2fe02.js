(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))h(m);new MutationObserver(m=>{for(const y of m)if(y.type==="childList")for(const b of y.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&h(b)}).observe(document,{childList:!0,subtree:!0});function f(m){const y={};return m.integrity&&(y.integrity=m.integrity),m.referrerpolicy&&(y.referrerPolicy=m.referrerpolicy),m.crossorigin==="use-credentials"?y.credentials="include":m.crossorigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function h(m){if(m.ep)return;m.ep=!0;const y=f(m);fetch(m.href,y)}})();function Yi(n,a){const f=Object.create(null),h=n.split(",");for(let m=0;m<h.length;m++)f[h[m]]=!0;return a?m=>!!f[m.toLowerCase()]:m=>!!f[m]}const ft={},Zr=[],Ln=()=>{},cu=()=>!1,uu=/^on[^a-z]/,ii=n=>uu.test(n),Wi=n=>n.startsWith("onUpdate:"),Ut=Object.assign,zi=(n,a)=>{const f=n.indexOf(a);f>-1&&n.splice(f,1)},lu=Object.prototype.hasOwnProperty,Xe=(n,a)=>lu.call(n,a),_e=Array.isArray,Qr=n=>oi(n)==="[object Map]",wa=n=>oi(n)==="[object Set]",Je=n=>typeof n=="function",Dt=n=>typeof n=="string",Gi=n=>typeof n=="symbol",Tt=n=>n!==null&&typeof n=="object",ba=n=>Tt(n)&&Je(n.then)&&Je(n.catch),Ea=Object.prototype.toString,oi=n=>Ea.call(n),fu=n=>oi(n).slice(8,-1),Na=n=>oi(n)==="[object Object]",Hi=n=>Dt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Gs=Yi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ai=n=>{const a=Object.create(null);return f=>a[f]||(a[f]=n(f))},du=/-(\w)/g,ns=ai(n=>n.replace(du,(a,f)=>f?f.toUpperCase():"")),hu=/\B([A-Z])/g,Lr=ai(n=>n.replace(hu,"-$1").toLowerCase()),Ia=ai(n=>n.charAt(0).toUpperCase()+n.slice(1)),Si=ai(n=>n?`on${Ia(n)}`:""),ei=(n,a)=>!Object.is(n,a),Hs=(n,a)=>{for(let f=0;f<n.length;f++)n[f](a)},ti=(n,a,f)=>{Object.defineProperty(n,a,{configurable:!0,enumerable:!1,value:f})},Ci=n=>{const a=parseFloat(n);return isNaN(a)?n:a};let Jo;const xi=()=>Jo||(Jo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xi(n){if(_e(n)){const a={};for(let f=0;f<n.length;f++){const h=n[f],m=Dt(h)?yu(h):Xi(h);if(m)for(const y in m)a[y]=m[y]}return a}else{if(Dt(n))return n;if(Tt(n))return n}}const mu=/;(?![^(]*\))/g,gu=/:([^]+)/,pu=/\/\*[^]*?\*\//g;function yu(n){const a={};return n.replace(pu,"").split(mu).forEach(f=>{if(f){const h=f.split(gu);h.length>1&&(a[h[0].trim()]=h[1].trim())}}),a}function Zi(n){let a="";if(Dt(n))a=n;else if(_e(n))for(let f=0;f<n.length;f++){const h=Zi(n[f]);h&&(a+=h+" ")}else if(Tt(n))for(const f in n)n[f]&&(a+=f+" ");return a.trim()}const Tu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vu=Yi(Tu);function Sa(n){return!!n||n===""}const Uo=n=>Dt(n)?n:n==null?"":_e(n)||Tt(n)&&(n.toString===Ea||!Je(n.toString))?JSON.stringify(n,Aa,2):String(n),Aa=(n,a)=>a&&a.__v_isRef?Aa(n,a.value):Qr(a)?{[`Map(${a.size})`]:[...a.entries()].reduce((f,[h,m])=>(f[`${h} =>`]=m,f),{})}:wa(a)?{[`Set(${a.size})`]:[...a.values()]}:Tt(a)&&!_e(a)&&!Na(a)?String(a):a;let Dn;class wu{constructor(a=!1){this.detached=a,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Dn,!a&&Dn&&(this.index=(Dn.scopes||(Dn.scopes=[])).push(this)-1)}get active(){return this._active}run(a){if(this._active){const f=Dn;try{return Dn=this,a()}finally{Dn=f}}}on(){Dn=this}off(){Dn=this.parent}stop(a){if(this._active){let f,h;for(f=0,h=this.effects.length;f<h;f++)this.effects[f].stop();for(f=0,h=this.cleanups.length;f<h;f++)this.cleanups[f]();if(this.scopes)for(f=0,h=this.scopes.length;f<h;f++)this.scopes[f].stop(!0);if(!this.detached&&this.parent&&!a){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.parent=void 0,this._active=!1}}}function bu(n,a=Dn){a&&a.active&&a.effects.push(n)}function Eu(){return Dn}const Qi=n=>{const a=new Set(n);return a.w=0,a.n=0,a},ka=n=>(n.w&gr)>0,Oa=n=>(n.n&gr)>0,Nu=({deps:n})=>{if(n.length)for(let a=0;a<n.length;a++)n[a].w|=gr},Iu=n=>{const{deps:a}=n;if(a.length){let f=0;for(let h=0;h<a.length;h++){const m=a[h];ka(m)&&!Oa(m)?m.delete(n):a[f++]=m,m.w&=~gr,m.n&=~gr}a.length=f}},Ri=new WeakMap;let Ts=0,gr=1;const Li=30;let Cn;const Cr=Symbol(""),Bi=Symbol("");class eo{constructor(a,f=null,h){this.fn=a,this.scheduler=f,this.active=!0,this.deps=[],this.parent=void 0,bu(this,h)}run(){if(!this.active)return this.fn();let a=Cn,f=hr;for(;a;){if(a===this)return;a=a.parent}try{return this.parent=Cn,Cn=this,hr=!0,gr=1<<++Ts,Ts<=Li?Nu(this):$o(this),this.fn()}finally{Ts<=Li&&Iu(this),gr=1<<--Ts,Cn=this.parent,hr=f,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Cn===this?this.deferStop=!0:this.active&&($o(this),this.onStop&&this.onStop(),this.active=!1)}}function $o(n){const{deps:a}=n;if(a.length){for(let f=0;f<a.length;f++)a[f].delete(n);a.length=0}}let hr=!0;const Pa=[];function is(){Pa.push(hr),hr=!1}function os(){const n=Pa.pop();hr=n===void 0?!0:n}function fn(n,a,f){if(hr&&Cn){let h=Ri.get(n);h||Ri.set(n,h=new Map);let m=h.get(f);m||h.set(f,m=Qi()),_a(m)}}function _a(n,a){let f=!1;Ts<=Li?Oa(n)||(n.n|=gr,f=!ka(n)):f=!n.has(Cn),f&&(n.add(Cn),Cn.deps.push(n))}function er(n,a,f,h,m,y){const b=Ri.get(n);if(!b)return;let v=[];if(a==="clear")v=[...b.values()];else if(f==="length"&&_e(n)){const g=Number(h);b.forEach((d,S)=>{(S==="length"||S>=g)&&v.push(d)})}else switch(f!==void 0&&v.push(b.get(f)),a){case"add":_e(n)?Hi(f)&&v.push(b.get("length")):(v.push(b.get(Cr)),Qr(n)&&v.push(b.get(Bi)));break;case"delete":_e(n)||(v.push(b.get(Cr)),Qr(n)&&v.push(b.get(Bi)));break;case"set":Qr(n)&&v.push(b.get(Cr));break}if(v.length===1)v[0]&&Mi(v[0]);else{const g=[];for(const d of v)d&&g.push(...d);Mi(Qi(g))}}function Mi(n,a){const f=_e(n)?n:[...n];for(const h of f)h.computed&&jo(h);for(const h of f)h.computed||jo(h)}function jo(n,a){(n!==Cn||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const Su=Yi("__proto__,__v_isRef,__isVue"),Da=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Gi)),Au=to(),ku=to(!1,!0),Ou=to(!0),Vo=Pu();function Pu(){const n={};return["includes","indexOf","lastIndexOf"].forEach(a=>{n[a]=function(...f){const h=et(this);for(let y=0,b=this.length;y<b;y++)fn(h,"get",y+"");const m=h[a](...f);return m===-1||m===!1?h[a](...f.map(et)):m}}),["push","pop","shift","unshift","splice"].forEach(a=>{n[a]=function(...f){is();const h=et(this)[a].apply(this,f);return os(),h}}),n}function _u(n){const a=et(this);return fn(a,"has",n),a.hasOwnProperty(n)}function to(n=!1,a=!1){return function(h,m,y){if(m==="__v_isReactive")return!n;if(m==="__v_isReadonly")return n;if(m==="__v_isShallow")return a;if(m==="__v_raw"&&y===(n?a?Yu:Ba:a?La:Ra).get(h))return h;const b=_e(h);if(!n){if(b&&Xe(Vo,m))return Reflect.get(Vo,m,y);if(m==="hasOwnProperty")return _u}const v=Reflect.get(h,m,y);return(Gi(m)?Da.has(m):Su(m))||(n||fn(h,"get",m),a)?v:rn(v)?b&&Hi(m)?v:v.value:Tt(v)?n?Ma(v):so(v):v}}const Du=Ca(),Cu=Ca(!0);function Ca(n=!1){return function(f,h,m,y){let b=f[h];if(Es(b)&&rn(b)&&!rn(m))return!1;if(!n&&(!Fi(m)&&!Es(m)&&(b=et(b),m=et(m)),!_e(f)&&rn(b)&&!rn(m)))return b.value=m,!0;const v=_e(f)&&Hi(h)?Number(h)<f.length:Xe(f,h),g=Reflect.set(f,h,m,y);return f===et(y)&&(v?ei(m,b)&&er(f,"set",h,m):er(f,"add",h,m)),g}}function xu(n,a){const f=Xe(n,a);n[a];const h=Reflect.deleteProperty(n,a);return h&&f&&er(n,"delete",a,void 0),h}function Ru(n,a){const f=Reflect.has(n,a);return(!Gi(a)||!Da.has(a))&&fn(n,"has",a),f}function Lu(n){return fn(n,"iterate",_e(n)?"length":Cr),Reflect.ownKeys(n)}const xa={get:Au,set:Du,deleteProperty:xu,has:Ru,ownKeys:Lu},Bu={get:Ou,set(n,a){return!0},deleteProperty(n,a){return!0}},Mu=Ut({},xa,{get:ku,set:Cu}),no=n=>n,ci=n=>Reflect.getPrototypeOf(n);function js(n,a,f=!1,h=!1){n=n.__v_raw;const m=et(n),y=et(a);f||(a!==y&&fn(m,"get",a),fn(m,"get",y));const{has:b}=ci(m),v=h?no:f?ao:oo;if(b.call(m,a))return v(n.get(a));if(b.call(m,y))return v(n.get(y));n!==m&&n.get(a)}function Vs(n,a=!1){const f=this.__v_raw,h=et(f),m=et(n);return a||(n!==m&&fn(h,"has",n),fn(h,"has",m)),n===m?f.has(n):f.has(n)||f.has(m)}function Ks(n,a=!1){return n=n.__v_raw,!a&&fn(et(n),"iterate",Cr),Reflect.get(n,"size",n)}function Ko(n){n=et(n);const a=et(this);return ci(a).has.call(a,n)||(a.add(n),er(a,"add",n,n)),this}function qo(n,a){a=et(a);const f=et(this),{has:h,get:m}=ci(f);let y=h.call(f,n);y||(n=et(n),y=h.call(f,n));const b=m.call(f,n);return f.set(n,a),y?ei(a,b)&&er(f,"set",n,a):er(f,"add",n,a),this}function Yo(n){const a=et(this),{has:f,get:h}=ci(a);let m=f.call(a,n);m||(n=et(n),m=f.call(a,n)),h&&h.call(a,n);const y=a.delete(n);return m&&er(a,"delete",n,void 0),y}function Wo(){const n=et(this),a=n.size!==0,f=n.clear();return a&&er(n,"clear",void 0,void 0),f}function qs(n,a){return function(h,m){const y=this,b=y.__v_raw,v=et(b),g=a?no:n?ao:oo;return!n&&fn(v,"iterate",Cr),b.forEach((d,S)=>h.call(m,g(d),g(S),y))}}function Ys(n,a,f){return function(...h){const m=this.__v_raw,y=et(m),b=Qr(y),v=n==="entries"||n===Symbol.iterator&&b,g=n==="keys"&&b,d=m[n](...h),S=f?no:a?ao:oo;return!a&&fn(y,"iterate",g?Bi:Cr),{next(){const{value:T,done:R}=d.next();return R?{value:T,done:R}:{value:v?[S(T[0]),S(T[1])]:S(T),done:R}},[Symbol.iterator](){return this}}}}function lr(n){return function(...a){return n==="delete"?!1:this}}function Fu(){const n={get(y){return js(this,y)},get size(){return Ks(this)},has:Vs,add:Ko,set:qo,delete:Yo,clear:Wo,forEach:qs(!1,!1)},a={get(y){return js(this,y,!1,!0)},get size(){return Ks(this)},has:Vs,add:Ko,set:qo,delete:Yo,clear:Wo,forEach:qs(!1,!0)},f={get(y){return js(this,y,!0)},get size(){return Ks(this,!0)},has(y){return Vs.call(this,y,!0)},add:lr("add"),set:lr("set"),delete:lr("delete"),clear:lr("clear"),forEach:qs(!0,!1)},h={get(y){return js(this,y,!0,!0)},get size(){return Ks(this,!0)},has(y){return Vs.call(this,y,!0)},add:lr("add"),set:lr("set"),delete:lr("delete"),clear:lr("clear"),forEach:qs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{n[y]=Ys(y,!1,!1),f[y]=Ys(y,!0,!1),a[y]=Ys(y,!1,!0),h[y]=Ys(y,!0,!0)}),[n,f,a,h]}const[Ju,Uu,$u,ju]=Fu();function ro(n,a){const f=a?n?ju:$u:n?Uu:Ju;return(h,m,y)=>m==="__v_isReactive"?!n:m==="__v_isReadonly"?n:m==="__v_raw"?h:Reflect.get(Xe(f,m)&&m in h?f:h,m,y)}const Vu={get:ro(!1,!1)},Ku={get:ro(!1,!0)},qu={get:ro(!0,!1)},Ra=new WeakMap,La=new WeakMap,Ba=new WeakMap,Yu=new WeakMap;function Wu(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zu(n){return n.__v_skip||!Object.isExtensible(n)?0:Wu(fu(n))}function so(n){return Es(n)?n:io(n,!1,xa,Vu,Ra)}function Gu(n){return io(n,!1,Mu,Ku,La)}function Ma(n){return io(n,!0,Bu,qu,Ba)}function io(n,a,f,h,m){if(!Tt(n)||n.__v_raw&&!(a&&n.__v_isReactive))return n;const y=m.get(n);if(y)return y;const b=zu(n);if(b===0)return n;const v=new Proxy(n,b===2?h:f);return m.set(n,v),v}function es(n){return Es(n)?es(n.__v_raw):!!(n&&n.__v_isReactive)}function Es(n){return!!(n&&n.__v_isReadonly)}function Fi(n){return!!(n&&n.__v_isShallow)}function Fa(n){return es(n)||Es(n)}function et(n){const a=n&&n.__v_raw;return a?et(a):n}function Ja(n){return ti(n,"__v_skip",!0),n}const oo=n=>Tt(n)?so(n):n,ao=n=>Tt(n)?Ma(n):n;function Hu(n){hr&&Cn&&(n=et(n),_a(n.dep||(n.dep=Qi())))}function Xu(n,a){n=et(n);const f=n.dep;f&&Mi(f)}function rn(n){return!!(n&&n.__v_isRef===!0)}function Zu(n){return rn(n)?n.value:n}const Qu={get:(n,a,f)=>Zu(Reflect.get(n,a,f)),set:(n,a,f,h)=>{const m=n[a];return rn(m)&&!rn(f)?(m.value=f,!0):Reflect.set(n,a,f,h)}};function Ua(n){return es(n)?n:new Proxy(n,Qu)}class el{constructor(a,f,h,m){this._setter=f,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new eo(a,()=>{this._dirty||(this._dirty=!0,Xu(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!m,this.__v_isReadonly=h}get value(){const a=et(this);return Hu(a),(a._dirty||!a._cacheable)&&(a._dirty=!1,a._value=a.effect.run()),a._value}set value(a){this._setter(a)}}function tl(n,a,f=!1){let h,m;const y=Je(n);return y?(h=n,m=Ln):(h=n.get,m=n.set),new el(h,m,y||!m,f)}function mr(n,a,f,h){let m;try{m=h?n(...h):n()}catch(y){ui(y,a,f)}return m}function Bn(n,a,f,h){if(Je(n)){const y=mr(n,a,f,h);return y&&ba(y)&&y.catch(b=>{ui(b,a,f)}),y}const m=[];for(let y=0;y<n.length;y++)m.push(Bn(n[y],a,f,h));return m}function ui(n,a,f,h=!0){const m=a?a.vnode:null;if(a){let y=a.parent;const b=a.proxy,v=f;for(;y;){const d=y.ec;if(d){for(let S=0;S<d.length;S++)if(d[S](n,b,v)===!1)return}y=y.parent}const g=a.appContext.config.errorHandler;if(g){mr(g,null,10,[n,b,v]);return}}nl(n,f,m,h)}function nl(n,a,f,h=!0){console.error(n)}let Ns=!1,Ji=!1;const Kt=[];let Yn=0;const ts=[];let Qn=null,Pr=0;const $a=Promise.resolve();let co=null;function rl(n){const a=co||$a;return n?a.then(this?n.bind(this):n):a}function sl(n){let a=Yn+1,f=Kt.length;for(;a<f;){const h=a+f>>>1;Is(Kt[h])<n?a=h+1:f=h}return a}function uo(n){(!Kt.length||!Kt.includes(n,Ns&&n.allowRecurse?Yn+1:Yn))&&(n.id==null?Kt.push(n):Kt.splice(sl(n.id),0,n),ja())}function ja(){!Ns&&!Ji&&(Ji=!0,co=$a.then(Ka))}function il(n){const a=Kt.indexOf(n);a>Yn&&Kt.splice(a,1)}function ol(n){_e(n)?ts.push(...n):(!Qn||!Qn.includes(n,n.allowRecurse?Pr+1:Pr))&&ts.push(n),ja()}function zo(n,a=Ns?Yn+1:0){for(;a<Kt.length;a++){const f=Kt[a];f&&f.pre&&(Kt.splice(a,1),a--,f())}}function Va(n){if(ts.length){const a=[...new Set(ts)];if(ts.length=0,Qn){Qn.push(...a);return}for(Qn=a,Qn.sort((f,h)=>Is(f)-Is(h)),Pr=0;Pr<Qn.length;Pr++)Qn[Pr]();Qn=null,Pr=0}}const Is=n=>n.id==null?1/0:n.id,al=(n,a)=>{const f=Is(n)-Is(a);if(f===0){if(n.pre&&!a.pre)return-1;if(a.pre&&!n.pre)return 1}return f};function Ka(n){Ji=!1,Ns=!0,Kt.sort(al);const a=Ln;try{for(Yn=0;Yn<Kt.length;Yn++){const f=Kt[Yn];f&&f.active!==!1&&mr(f,null,14)}}finally{Yn=0,Kt.length=0,Va(),Ns=!1,co=null,(Kt.length||ts.length)&&Ka()}}function cl(n,a,...f){if(n.isUnmounted)return;const h=n.vnode.props||ft;let m=f;const y=a.startsWith("update:"),b=y&&a.slice(7);if(b&&b in h){const S=`${b==="modelValue"?"model":b}Modifiers`,{number:T,trim:R}=h[S]||ft;R&&(m=f.map(P=>Dt(P)?P.trim():P)),T&&(m=f.map(Ci))}let v,g=h[v=Si(a)]||h[v=Si(ns(a))];!g&&y&&(g=h[v=Si(Lr(a))]),g&&Bn(g,n,6,m);const d=h[v+"Once"];if(d){if(!n.emitted)n.emitted={};else if(n.emitted[v])return;n.emitted[v]=!0,Bn(d,n,6,m)}}function qa(n,a,f=!1){const h=a.emitsCache,m=h.get(n);if(m!==void 0)return m;const y=n.emits;let b={},v=!1;if(!Je(n)){const g=d=>{const S=qa(d,a,!0);S&&(v=!0,Ut(b,S))};!f&&a.mixins.length&&a.mixins.forEach(g),n.extends&&g(n.extends),n.mixins&&n.mixins.forEach(g)}return!y&&!v?(Tt(n)&&h.set(n,null),null):(_e(y)?y.forEach(g=>b[g]=null):Ut(b,y),Tt(n)&&h.set(n,b),b)}function li(n,a){return!n||!ii(a)?!1:(a=a.slice(2).replace(/Once$/,""),Xe(n,a[0].toLowerCase()+a.slice(1))||Xe(n,Lr(a))||Xe(n,a))}let xn=null,Ya=null;function ni(n){const a=xn;return xn=n,Ya=n&&n.type.__scopeId||null,a}function ul(n,a=xn,f){if(!a||n._n)return n;const h=(...m)=>{h._d&&oa(-1);const y=ni(a);let b;try{b=n(...m)}finally{ni(y),h._d&&oa(1)}return b};return h._n=!0,h._c=!0,h._d=!0,h}function Ai(n){const{type:a,vnode:f,proxy:h,withProxy:m,props:y,propsOptions:[b],slots:v,attrs:g,emit:d,render:S,renderCache:T,data:R,setupState:P,ctx:Y,inheritAttrs:M}=n;let k,O;const J=ni(n);try{if(f.shapeFlag&4){const q=m||h;k=qn(S.call(q,q,T,y,P,R,Y)),O=g}else{const q=a;k=qn(q.length>1?q(y,{attrs:g,slots:v,emit:d}):q(y,null)),O=a.props?g:ll(g)}}catch(q){bs.length=0,ui(q,n,1),k=xr(Ss)}let L=k;if(O&&M!==!1){const q=Object.keys(O),{shapeFlag:B}=L;q.length&&B&7&&(b&&q.some(Wi)&&(O=fl(O,b)),L=rs(L,O))}return f.dirs&&(L=rs(L),L.dirs=L.dirs?L.dirs.concat(f.dirs):f.dirs),f.transition&&(L.transition=f.transition),k=L,ni(J),k}const ll=n=>{let a;for(const f in n)(f==="class"||f==="style"||ii(f))&&((a||(a={}))[f]=n[f]);return a},fl=(n,a)=>{const f={};for(const h in n)(!Wi(h)||!(h.slice(9)in a))&&(f[h]=n[h]);return f};function dl(n,a,f){const{props:h,children:m,component:y}=n,{props:b,children:v,patchFlag:g}=a,d=y.emitsOptions;if(a.dirs||a.transition)return!0;if(f&&g>=0){if(g&1024)return!0;if(g&16)return h?Go(h,b,d):!!b;if(g&8){const S=a.dynamicProps;for(let T=0;T<S.length;T++){const R=S[T];if(b[R]!==h[R]&&!li(d,R))return!0}}}else return(m||v)&&(!v||!v.$stable)?!0:h===b?!1:h?b?Go(h,b,d):!0:!!b;return!1}function Go(n,a,f){const h=Object.keys(a);if(h.length!==Object.keys(n).length)return!0;for(let m=0;m<h.length;m++){const y=h[m];if(a[y]!==n[y]&&!li(f,y))return!0}return!1}function hl({vnode:n,parent:a},f){for(;a&&a.subTree===n;)(n=a.vnode).el=f,a=a.parent}const ml=n=>n.__isSuspense;function gl(n,a){a&&a.pendingBranch?_e(n)?a.effects.push(...n):a.effects.push(n):ol(n)}const Ws={};function ki(n,a,f){return Wa(n,a,f)}function Wa(n,a,{immediate:f,deep:h,flush:m,onTrack:y,onTrigger:b}=ft){var v;const g=Eu()===((v=qt)==null?void 0:v.scope)?qt:null;let d,S=!1,T=!1;if(rn(n)?(d=()=>n.value,S=Fi(n)):es(n)?(d=()=>n,h=!0):_e(n)?(T=!0,S=n.some(q=>es(q)||Fi(q)),d=()=>n.map(q=>{if(rn(q))return q.value;if(es(q))return Dr(q);if(Je(q))return mr(q,g,2)})):Je(n)?a?d=()=>mr(n,g,2):d=()=>{if(!(g&&g.isUnmounted))return R&&R(),Bn(n,g,3,[P])}:d=Ln,a&&h){const q=d;d=()=>Dr(q())}let R,P=q=>{R=J.onStop=()=>{mr(q,g,4)}},Y;if(ks)if(P=Ln,a?f&&Bn(a,g,3,[d(),T?[]:void 0,P]):d(),m==="sync"){const q=ff();Y=q.__watcherHandles||(q.__watcherHandles=[])}else return Ln;let M=T?new Array(n.length).fill(Ws):Ws;const k=()=>{if(!!J.active)if(a){const q=J.run();(h||S||(T?q.some((B,w)=>ei(B,M[w])):ei(q,M)))&&(R&&R(),Bn(a,g,3,[q,M===Ws?void 0:T&&M[0]===Ws?[]:M,P]),M=q)}else J.run()};k.allowRecurse=!!a;let O;m==="sync"?O=k:m==="post"?O=()=>ln(k,g&&g.suspense):(k.pre=!0,g&&(k.id=g.uid),O=()=>uo(k));const J=new eo(d,O);a?f?k():M=J.run():m==="post"?ln(J.run.bind(J),g&&g.suspense):J.run();const L=()=>{J.stop(),g&&g.scope&&zi(g.scope.effects,J)};return Y&&Y.push(L),L}function pl(n,a,f){const h=this.proxy,m=Dt(n)?n.includes(".")?za(h,n):()=>h[n]:n.bind(h,h);let y;Je(a)?y=a:(y=a.handler,f=a);const b=qt;ss(this);const v=Wa(m,y.bind(h),f);return b?ss(b):Rr(),v}function za(n,a){const f=a.split(".");return()=>{let h=n;for(let m=0;m<f.length&&h;m++)h=h[f[m]];return h}}function Dr(n,a){if(!Tt(n)||n.__v_skip||(a=a||new Set,a.has(n)))return n;if(a.add(n),rn(n))Dr(n.value,a);else if(_e(n))for(let f=0;f<n.length;f++)Dr(n[f],a);else if(wa(n)||Qr(n))n.forEach(f=>{Dr(f,a)});else if(Na(n))for(const f in n)Dr(n[f],a);return n}function Ho(n,a){const f=xn;if(f===null)return n;const h=mi(f)||f.proxy,m=n.dirs||(n.dirs=[]);for(let y=0;y<a.length;y++){let[b,v,g,d=ft]=a[y];b&&(Je(b)&&(b={mounted:b,updated:b}),b.deep&&Dr(v),m.push({dir:b,instance:h,value:v,oldValue:void 0,arg:g,modifiers:d}))}return n}function kr(n,a,f,h){const m=n.dirs,y=a&&a.dirs;for(let b=0;b<m.length;b++){const v=m[b];y&&(v.oldValue=y[b].value);let g=v.dir[h];g&&(is(),Bn(g,f,8,[n.el,v,n,a]),os())}}const Xs=n=>!!n.type.__asyncLoader,Ga=n=>n.type.__isKeepAlive;function yl(n,a){Ha(n,"a",a)}function Tl(n,a){Ha(n,"da",a)}function Ha(n,a,f=qt){const h=n.__wdc||(n.__wdc=()=>{let m=f;for(;m;){if(m.isDeactivated)return;m=m.parent}return n()});if(fi(a,h,f),f){let m=f.parent;for(;m&&m.parent;)Ga(m.parent.vnode)&&vl(h,a,f,m),m=m.parent}}function vl(n,a,f,h){const m=fi(a,n,h,!0);Xa(()=>{zi(h[a],m)},f)}function fi(n,a,f=qt,h=!1){if(f){const m=f[n]||(f[n]=[]),y=a.__weh||(a.__weh=(...b)=>{if(f.isUnmounted)return;is(),ss(f);const v=Bn(a,f,n,b);return Rr(),os(),v});return h?m.unshift(y):m.push(y),y}}const tr=n=>(a,f=qt)=>(!ks||n==="sp")&&fi(n,(...h)=>a(...h),f),wl=tr("bm"),bl=tr("m"),El=tr("bu"),Nl=tr("u"),Il=tr("bum"),Xa=tr("um"),Sl=tr("sp"),Al=tr("rtg"),kl=tr("rtc");function Ol(n,a=qt){fi("ec",n,a)}const Pl=Symbol.for("v-ndc");function Xo(n,a,f,h){let m;const y=f&&f[h];if(_e(n)||Dt(n)){m=new Array(n.length);for(let b=0,v=n.length;b<v;b++)m[b]=a(n[b],b,void 0,y&&y[b])}else if(typeof n=="number"){m=new Array(n);for(let b=0;b<n;b++)m[b]=a(b+1,b,void 0,y&&y[b])}else if(Tt(n))if(n[Symbol.iterator])m=Array.from(n,(b,v)=>a(b,v,void 0,y&&y[v]));else{const b=Object.keys(n);m=new Array(b.length);for(let v=0,g=b.length;v<g;v++){const d=b[v];m[v]=a(n[d],d,v,y&&y[v])}}else m=[];return f&&(f[h]=m),m}const Ui=n=>n?cc(n)?mi(n)||n.proxy:Ui(n.parent):null,ws=Ut(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ui(n.parent),$root:n=>Ui(n.root),$emit:n=>n.emit,$options:n=>lo(n),$forceUpdate:n=>n.f||(n.f=()=>uo(n.update)),$nextTick:n=>n.n||(n.n=rl.bind(n.proxy)),$watch:n=>pl.bind(n)}),Oi=(n,a)=>n!==ft&&!n.__isScriptSetup&&Xe(n,a),_l={get({_:n},a){const{ctx:f,setupState:h,data:m,props:y,accessCache:b,type:v,appContext:g}=n;let d;if(a[0]!=="$"){const P=b[a];if(P!==void 0)switch(P){case 1:return h[a];case 2:return m[a];case 4:return f[a];case 3:return y[a]}else{if(Oi(h,a))return b[a]=1,h[a];if(m!==ft&&Xe(m,a))return b[a]=2,m[a];if((d=n.propsOptions[0])&&Xe(d,a))return b[a]=3,y[a];if(f!==ft&&Xe(f,a))return b[a]=4,f[a];$i&&(b[a]=0)}}const S=ws[a];let T,R;if(S)return a==="$attrs"&&fn(n,"get",a),S(n);if((T=v.__cssModules)&&(T=T[a]))return T;if(f!==ft&&Xe(f,a))return b[a]=4,f[a];if(R=g.config.globalProperties,Xe(R,a))return R[a]},set({_:n},a,f){const{data:h,setupState:m,ctx:y}=n;return Oi(m,a)?(m[a]=f,!0):h!==ft&&Xe(h,a)?(h[a]=f,!0):Xe(n.props,a)||a[0]==="$"&&a.slice(1)in n?!1:(y[a]=f,!0)},has({_:{data:n,setupState:a,accessCache:f,ctx:h,appContext:m,propsOptions:y}},b){let v;return!!f[b]||n!==ft&&Xe(n,b)||Oi(a,b)||(v=y[0])&&Xe(v,b)||Xe(h,b)||Xe(ws,b)||Xe(m.config.globalProperties,b)},defineProperty(n,a,f){return f.get!=null?n._.accessCache[a]=0:Xe(f,"value")&&this.set(n,a,f.value,null),Reflect.defineProperty(n,a,f)}};function Zo(n){return _e(n)?n.reduce((a,f)=>(a[f]=null,a),{}):n}let $i=!0;function Dl(n){const a=lo(n),f=n.proxy,h=n.ctx;$i=!1,a.beforeCreate&&Qo(a.beforeCreate,n,"bc");const{data:m,computed:y,methods:b,watch:v,provide:g,inject:d,created:S,beforeMount:T,mounted:R,beforeUpdate:P,updated:Y,activated:M,deactivated:k,beforeDestroy:O,beforeUnmount:J,destroyed:L,unmounted:q,render:B,renderTracked:w,renderTriggered:ee,errorCaptured:W,serverPrefetch:C,expose:z,inheritAttrs:re,components:ce,directives:j,filters:se}=a;if(d&&Cl(d,h,null),b)for(const G in b){const le=b[G];Je(le)&&(h[G]=le.bind(f))}if(m){const G=m.call(f,f);Tt(G)&&(n.data=so(G))}if($i=!0,y)for(const G in y){const le=y[G],Le=Je(le)?le.bind(f,f):Je(le.get)?le.get.bind(f,f):Ln,ue=!Je(le)&&Je(le.set)?le.set.bind(f):Ln,De=uf({get:Le,set:ue});Object.defineProperty(h,G,{enumerable:!0,configurable:!0,get:()=>De.value,set:pe=>De.value=pe})}if(v)for(const G in v)Za(v[G],h,f,G);if(g){const G=Je(g)?g.call(f):g;Reflect.ownKeys(G).forEach(le=>{Fl(le,G[le])})}S&&Qo(S,n,"c");function te(G,le){_e(le)?le.forEach(Le=>G(Le.bind(f))):le&&G(le.bind(f))}if(te(wl,T),te(bl,R),te(El,P),te(Nl,Y),te(yl,M),te(Tl,k),te(Ol,W),te(kl,w),te(Al,ee),te(Il,J),te(Xa,q),te(Sl,C),_e(z))if(z.length){const G=n.exposed||(n.exposed={});z.forEach(le=>{Object.defineProperty(G,le,{get:()=>f[le],set:Le=>f[le]=Le})})}else n.exposed||(n.exposed={});B&&n.render===Ln&&(n.render=B),re!=null&&(n.inheritAttrs=re),ce&&(n.components=ce),j&&(n.directives=j)}function Cl(n,a,f=Ln){_e(n)&&(n=ji(n));for(const h in n){const m=n[h];let y;Tt(m)?"default"in m?y=Zs(m.from||h,m.default,!0):y=Zs(m.from||h):y=Zs(m),rn(y)?Object.defineProperty(a,h,{enumerable:!0,configurable:!0,get:()=>y.value,set:b=>y.value=b}):a[h]=y}}function Qo(n,a,f){Bn(_e(n)?n.map(h=>h.bind(a.proxy)):n.bind(a.proxy),a,f)}function Za(n,a,f,h){const m=h.includes(".")?za(f,h):()=>f[h];if(Dt(n)){const y=a[n];Je(y)&&ki(m,y)}else if(Je(n))ki(m,n.bind(f));else if(Tt(n))if(_e(n))n.forEach(y=>Za(y,a,f,h));else{const y=Je(n.handler)?n.handler.bind(f):a[n.handler];Je(y)&&ki(m,y,n)}}function lo(n){const a=n.type,{mixins:f,extends:h}=a,{mixins:m,optionsCache:y,config:{optionMergeStrategies:b}}=n.appContext,v=y.get(a);let g;return v?g=v:!m.length&&!f&&!h?g=a:(g={},m.length&&m.forEach(d=>ri(g,d,b,!0)),ri(g,a,b)),Tt(a)&&y.set(a,g),g}function ri(n,a,f,h=!1){const{mixins:m,extends:y}=a;y&&ri(n,y,f,!0),m&&m.forEach(b=>ri(n,b,f,!0));for(const b in a)if(!(h&&b==="expose")){const v=xl[b]||f&&f[b];n[b]=v?v(n[b],a[b]):a[b]}return n}const xl={data:ea,props:ta,emits:ta,methods:vs,computed:vs,beforeCreate:tn,created:tn,beforeMount:tn,mounted:tn,beforeUpdate:tn,updated:tn,beforeDestroy:tn,beforeUnmount:tn,destroyed:tn,unmounted:tn,activated:tn,deactivated:tn,errorCaptured:tn,serverPrefetch:tn,components:vs,directives:vs,watch:Ll,provide:ea,inject:Rl};function ea(n,a){return a?n?function(){return Ut(Je(n)?n.call(this,this):n,Je(a)?a.call(this,this):a)}:a:n}function Rl(n,a){return vs(ji(n),ji(a))}function ji(n){if(_e(n)){const a={};for(let f=0;f<n.length;f++)a[n[f]]=n[f];return a}return n}function tn(n,a){return n?[...new Set([].concat(n,a))]:a}function vs(n,a){return n?Ut(Object.create(null),n,a):a}function ta(n,a){return n?_e(n)&&_e(a)?[...new Set([...n,...a])]:Ut(Object.create(null),Zo(n),Zo(a!=null?a:{})):a}function Ll(n,a){if(!n)return a;if(!a)return n;const f=Ut(Object.create(null),n);for(const h in a)f[h]=tn(n[h],a[h]);return f}function Qa(){return{app:null,config:{isNativeTag:cu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bl=0;function Ml(n,a){return function(h,m=null){Je(h)||(h=Ut({},h)),m!=null&&!Tt(m)&&(m=null);const y=Qa(),b=new Set;let v=!1;const g=y.app={_uid:Bl++,_component:h,_props:m,_container:null,_context:y,_instance:null,version:df,get config(){return y.config},set config(d){},use(d,...S){return b.has(d)||(d&&Je(d.install)?(b.add(d),d.install(g,...S)):Je(d)&&(b.add(d),d(g,...S))),g},mixin(d){return y.mixins.includes(d)||y.mixins.push(d),g},component(d,S){return S?(y.components[d]=S,g):y.components[d]},directive(d,S){return S?(y.directives[d]=S,g):y.directives[d]},mount(d,S,T){if(!v){const R=xr(h,m);return R.appContext=y,S&&a?a(R,d):n(R,d,T),v=!0,g._container=d,d.__vue_app__=g,mi(R.component)||R.component.proxy}},unmount(){v&&(n(null,g._container),delete g._container.__vue_app__)},provide(d,S){return y.provides[d]=S,g},runWithContext(d){si=g;try{return d()}finally{si=null}}};return g}}let si=null;function Fl(n,a){if(qt){let f=qt.provides;const h=qt.parent&&qt.parent.provides;h===f&&(f=qt.provides=Object.create(h)),f[n]=a}}function Zs(n,a,f=!1){const h=qt||xn;if(h||si){const m=h?h.parent==null?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides:si._context.provides;if(m&&n in m)return m[n];if(arguments.length>1)return f&&Je(a)?a.call(h&&h.proxy):a}}function Jl(n,a,f,h=!1){const m={},y={};ti(y,hi,1),n.propsDefaults=Object.create(null),ec(n,a,m,y);for(const b in n.propsOptions[0])b in m||(m[b]=void 0);f?n.props=h?m:Gu(m):n.type.props?n.props=m:n.props=y,n.attrs=y}function Ul(n,a,f,h){const{props:m,attrs:y,vnode:{patchFlag:b}}=n,v=et(m),[g]=n.propsOptions;let d=!1;if((h||b>0)&&!(b&16)){if(b&8){const S=n.vnode.dynamicProps;for(let T=0;T<S.length;T++){let R=S[T];if(li(n.emitsOptions,R))continue;const P=a[R];if(g)if(Xe(y,R))P!==y[R]&&(y[R]=P,d=!0);else{const Y=ns(R);m[Y]=Vi(g,v,Y,P,n,!1)}else P!==y[R]&&(y[R]=P,d=!0)}}}else{ec(n,a,m,y)&&(d=!0);let S;for(const T in v)(!a||!Xe(a,T)&&((S=Lr(T))===T||!Xe(a,S)))&&(g?f&&(f[T]!==void 0||f[S]!==void 0)&&(m[T]=Vi(g,v,T,void 0,n,!0)):delete m[T]);if(y!==v)for(const T in y)(!a||!Xe(a,T)&&!0)&&(delete y[T],d=!0)}d&&er(n,"set","$attrs")}function ec(n,a,f,h){const[m,y]=n.propsOptions;let b=!1,v;if(a)for(let g in a){if(Gs(g))continue;const d=a[g];let S;m&&Xe(m,S=ns(g))?!y||!y.includes(S)?f[S]=d:(v||(v={}))[S]=d:li(n.emitsOptions,g)||(!(g in h)||d!==h[g])&&(h[g]=d,b=!0)}if(y){const g=et(f),d=v||ft;for(let S=0;S<y.length;S++){const T=y[S];f[T]=Vi(m,g,T,d[T],n,!Xe(d,T))}}return b}function Vi(n,a,f,h,m,y){const b=n[f];if(b!=null){const v=Xe(b,"default");if(v&&h===void 0){const g=b.default;if(b.type!==Function&&!b.skipFactory&&Je(g)){const{propsDefaults:d}=m;f in d?h=d[f]:(ss(m),h=d[f]=g.call(null,a),Rr())}else h=g}b[0]&&(y&&!v?h=!1:b[1]&&(h===""||h===Lr(f))&&(h=!0))}return h}function tc(n,a,f=!1){const h=a.propsCache,m=h.get(n);if(m)return m;const y=n.props,b={},v=[];let g=!1;if(!Je(n)){const S=T=>{g=!0;const[R,P]=tc(T,a,!0);Ut(b,R),P&&v.push(...P)};!f&&a.mixins.length&&a.mixins.forEach(S),n.extends&&S(n.extends),n.mixins&&n.mixins.forEach(S)}if(!y&&!g)return Tt(n)&&h.set(n,Zr),Zr;if(_e(y))for(let S=0;S<y.length;S++){const T=ns(y[S]);na(T)&&(b[T]=ft)}else if(y)for(const S in y){const T=ns(S);if(na(T)){const R=y[S],P=b[T]=_e(R)||Je(R)?{type:R}:Ut({},R);if(P){const Y=ia(Boolean,P.type),M=ia(String,P.type);P[0]=Y>-1,P[1]=M<0||Y<M,(Y>-1||Xe(P,"default"))&&v.push(T)}}}const d=[b,v];return Tt(n)&&h.set(n,d),d}function na(n){return n[0]!=="$"}function ra(n){const a=n&&n.toString().match(/^\s*(function|class) (\w+)/);return a?a[2]:n===null?"null":""}function sa(n,a){return ra(n)===ra(a)}function ia(n,a){return _e(a)?a.findIndex(f=>sa(f,n)):Je(a)&&sa(a,n)?0:-1}const nc=n=>n[0]==="_"||n==="$stable",fo=n=>_e(n)?n.map(qn):[qn(n)],$l=(n,a,f)=>{if(a._n)return a;const h=ul((...m)=>fo(a(...m)),f);return h._c=!1,h},rc=(n,a,f)=>{const h=n._ctx;for(const m in n){if(nc(m))continue;const y=n[m];if(Je(y))a[m]=$l(m,y,h);else if(y!=null){const b=fo(y);a[m]=()=>b}}},sc=(n,a)=>{const f=fo(a);n.slots.default=()=>f},jl=(n,a)=>{if(n.vnode.shapeFlag&32){const f=a._;f?(n.slots=et(a),ti(a,"_",f)):rc(a,n.slots={})}else n.slots={},a&&sc(n,a);ti(n.slots,hi,1)},Vl=(n,a,f)=>{const{vnode:h,slots:m}=n;let y=!0,b=ft;if(h.shapeFlag&32){const v=a._;v?f&&v===1?y=!1:(Ut(m,a),!f&&v===1&&delete m._):(y=!a.$stable,rc(a,m)),b=a}else a&&(sc(n,a),b={default:1});if(y)for(const v in m)!nc(v)&&!(v in b)&&delete m[v]};function Ki(n,a,f,h,m=!1){if(_e(n)){n.forEach((R,P)=>Ki(R,a&&(_e(a)?a[P]:a),f,h,m));return}if(Xs(h)&&!m)return;const y=h.shapeFlag&4?mi(h.component)||h.component.proxy:h.el,b=m?null:y,{i:v,r:g}=n,d=a&&a.r,S=v.refs===ft?v.refs={}:v.refs,T=v.setupState;if(d!=null&&d!==g&&(Dt(d)?(S[d]=null,Xe(T,d)&&(T[d]=null)):rn(d)&&(d.value=null)),Je(g))mr(g,v,12,[b,S]);else{const R=Dt(g),P=rn(g);if(R||P){const Y=()=>{if(n.f){const M=R?Xe(T,g)?T[g]:S[g]:g.value;m?_e(M)&&zi(M,y):_e(M)?M.includes(y)||M.push(y):R?(S[g]=[y],Xe(T,g)&&(T[g]=S[g])):(g.value=[y],n.k&&(S[n.k]=g.value))}else R?(S[g]=b,Xe(T,g)&&(T[g]=b)):P&&(g.value=b,n.k&&(S[n.k]=b))};b?(Y.id=-1,ln(Y,f)):Y()}}}const ln=gl;function Kl(n){return ql(n)}function ql(n,a){const f=xi();f.__VUE__=!0;const{insert:h,remove:m,patchProp:y,createElement:b,createText:v,createComment:g,setText:d,setElementText:S,parentNode:T,nextSibling:R,setScopeId:P=Ln,insertStaticContent:Y}=n,M=(I,_,K,H=null,X=null,ae=null,ge=!1,ie=null,$=!!_.dynamicChildren)=>{if(I===_)return;I&&!ys(I,_)&&(H=it(I),pe(I,X,ae,!0),I=null),_.patchFlag===-2&&($=!1,_.dynamicChildren=null);const{type:oe,ref:we,shapeFlag:ve}=_;switch(oe){case di:k(I,_,K,H);break;case Ss:O(I,_,K,H);break;case Pi:I==null&&J(_,K,H,ge);break;case On:ce(I,_,K,H,X,ae,ge,ie,$);break;default:ve&1?B(I,_,K,H,X,ae,ge,ie,$):ve&6?j(I,_,K,H,X,ae,ge,ie,$):(ve&64||ve&128)&&oe.process(I,_,K,H,X,ae,ge,ie,$,gt)}we!=null&&X&&Ki(we,I&&I.ref,ae,_||I,!_)},k=(I,_,K,H)=>{if(I==null)h(_.el=v(_.children),K,H);else{const X=_.el=I.el;_.children!==I.children&&d(X,_.children)}},O=(I,_,K,H)=>{I==null?h(_.el=g(_.children||""),K,H):_.el=I.el},J=(I,_,K,H)=>{[I.el,I.anchor]=Y(I.children,_,K,H,I.el,I.anchor)},L=({el:I,anchor:_},K,H)=>{let X;for(;I&&I!==_;)X=R(I),h(I,K,H),I=X;h(_,K,H)},q=({el:I,anchor:_})=>{let K;for(;I&&I!==_;)K=R(I),m(I),I=K;m(_)},B=(I,_,K,H,X,ae,ge,ie,$)=>{ge=ge||_.type==="svg",I==null?w(_,K,H,X,ae,ge,ie,$):C(I,_,X,ae,ge,ie,$)},w=(I,_,K,H,X,ae,ge,ie)=>{let $,oe;const{type:we,props:ve,shapeFlag:be,transition:Se,dirs:Pe}=I;if($=I.el=b(I.type,ae,ve&&ve.is,ve),be&8?S($,I.children):be&16&&W(I.children,$,null,H,X,ae&&we!=="foreignObject",ge,ie),Pe&&kr(I,null,H,"created"),ee($,I,I.scopeId,ge,H),ve){for(const Ce in ve)Ce!=="value"&&!Gs(Ce)&&y($,Ce,null,ve[Ce],ae,I.children,H,X,Ke);"value"in ve&&y($,"value",null,ve.value),(oe=ve.onVnodeBeforeMount)&&Kn(oe,H,I)}Pe&&kr(I,null,H,"beforeMount");const Ye=(!X||X&&!X.pendingBranch)&&Se&&!Se.persisted;Ye&&Se.beforeEnter($),h($,_,K),((oe=ve&&ve.onVnodeMounted)||Ye||Pe)&&ln(()=>{oe&&Kn(oe,H,I),Ye&&Se.enter($),Pe&&kr(I,null,H,"mounted")},X)},ee=(I,_,K,H,X)=>{if(K&&P(I,K),H)for(let ae=0;ae<H.length;ae++)P(I,H[ae]);if(X){let ae=X.subTree;if(_===ae){const ge=X.vnode;ee(I,ge,ge.scopeId,ge.slotScopeIds,X.parent)}}},W=(I,_,K,H,X,ae,ge,ie,$=0)=>{for(let oe=$;oe<I.length;oe++){const we=I[oe]=ie?dr(I[oe]):qn(I[oe]);M(null,we,_,K,H,X,ae,ge,ie)}},C=(I,_,K,H,X,ae,ge)=>{const ie=_.el=I.el;let{patchFlag:$,dynamicChildren:oe,dirs:we}=_;$|=I.patchFlag&16;const ve=I.props||ft,be=_.props||ft;let Se;K&&Or(K,!1),(Se=be.onVnodeBeforeUpdate)&&Kn(Se,K,_,I),we&&kr(_,I,K,"beforeUpdate"),K&&Or(K,!0);const Pe=X&&_.type!=="foreignObject";if(oe?z(I.dynamicChildren,oe,ie,K,H,Pe,ae):ge||le(I,_,ie,null,K,H,Pe,ae,!1),$>0){if($&16)re(ie,_,ve,be,K,H,X);else if($&2&&ve.class!==be.class&&y(ie,"class",null,be.class,X),$&4&&y(ie,"style",ve.style,be.style,X),$&8){const Ye=_.dynamicProps;for(let Ce=0;Ce<Ye.length;Ce++){const He=Ye[Ce],Ze=ve[He],kt=be[He];(kt!==Ze||He==="value")&&y(ie,He,Ze,kt,X,I.children,K,H,Ke)}}$&1&&I.children!==_.children&&S(ie,_.children)}else!ge&&oe==null&&re(ie,_,ve,be,K,H,X);((Se=be.onVnodeUpdated)||we)&&ln(()=>{Se&&Kn(Se,K,_,I),we&&kr(_,I,K,"updated")},H)},z=(I,_,K,H,X,ae,ge)=>{for(let ie=0;ie<_.length;ie++){const $=I[ie],oe=_[ie],we=$.el&&($.type===On||!ys($,oe)||$.shapeFlag&70)?T($.el):K;M($,oe,we,null,H,X,ae,ge,!0)}},re=(I,_,K,H,X,ae,ge)=>{if(K!==H){if(K!==ft)for(const ie in K)!Gs(ie)&&!(ie in H)&&y(I,ie,K[ie],null,ge,_.children,X,ae,Ke);for(const ie in H){if(Gs(ie))continue;const $=H[ie],oe=K[ie];$!==oe&&ie!=="value"&&y(I,ie,oe,$,ge,_.children,X,ae,Ke)}"value"in H&&y(I,"value",K.value,H.value)}},ce=(I,_,K,H,X,ae,ge,ie,$)=>{const oe=_.el=I?I.el:v(""),we=_.anchor=I?I.anchor:v("");let{patchFlag:ve,dynamicChildren:be,slotScopeIds:Se}=_;Se&&(ie=ie?ie.concat(Se):Se),I==null?(h(oe,K,H),h(we,K,H),W(_.children,K,we,X,ae,ge,ie,$)):ve>0&&ve&64&&be&&I.dynamicChildren?(z(I.dynamicChildren,be,K,X,ae,ge,ie),(_.key!=null||X&&_===X.subTree)&&ic(I,_,!0)):le(I,_,K,we,X,ae,ge,ie,$)},j=(I,_,K,H,X,ae,ge,ie,$)=>{_.slotScopeIds=ie,I==null?_.shapeFlag&512?X.ctx.activate(_,K,H,ge,$):se(_,K,H,X,ae,ge,$):fe(I,_,$)},se=(I,_,K,H,X,ae,ge)=>{const ie=I.component=nf(I,H,X);if(Ga(I)&&(ie.ctx.renderer=gt),rf(ie),ie.asyncDep){if(X&&X.registerDep(ie,te),!I.el){const $=ie.subTree=xr(Ss);O(null,$,_,K)}return}te(ie,I,_,K,X,ae,ge)},fe=(I,_,K)=>{const H=_.component=I.component;if(dl(I,_,K))if(H.asyncDep&&!H.asyncResolved){G(H,_,K);return}else H.next=_,il(H.update),H.update();else _.el=I.el,H.vnode=_},te=(I,_,K,H,X,ae,ge)=>{const ie=()=>{if(I.isMounted){let{next:we,bu:ve,u:be,parent:Se,vnode:Pe}=I,Ye=we,Ce;Or(I,!1),we?(we.el=Pe.el,G(I,we,ge)):we=Pe,ve&&Hs(ve),(Ce=we.props&&we.props.onVnodeBeforeUpdate)&&Kn(Ce,Se,we,Pe),Or(I,!0);const He=Ai(I),Ze=I.subTree;I.subTree=He,M(Ze,He,T(Ze.el),it(Ze),I,X,ae),we.el=He.el,Ye===null&&hl(I,He.el),be&&ln(be,X),(Ce=we.props&&we.props.onVnodeUpdated)&&ln(()=>Kn(Ce,Se,we,Pe),X)}else{let we;const{el:ve,props:be}=_,{bm:Se,m:Pe,parent:Ye}=I,Ce=Xs(_);if(Or(I,!1),Se&&Hs(Se),!Ce&&(we=be&&be.onVnodeBeforeMount)&&Kn(we,Ye,_),Or(I,!0),ve&&dt){const He=()=>{I.subTree=Ai(I),dt(ve,I.subTree,I,X,null)};Ce?_.type.__asyncLoader().then(()=>!I.isUnmounted&&He()):He()}else{const He=I.subTree=Ai(I);M(null,He,K,H,I,X,ae),_.el=He.el}if(Pe&&ln(Pe,X),!Ce&&(we=be&&be.onVnodeMounted)){const He=_;ln(()=>Kn(we,Ye,He),X)}(_.shapeFlag&256||Ye&&Xs(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&I.a&&ln(I.a,X),I.isMounted=!0,_=K=H=null}},$=I.effect=new eo(ie,()=>uo(oe),I.scope),oe=I.update=()=>$.run();oe.id=I.uid,Or(I,!0),oe()},G=(I,_,K)=>{_.component=I;const H=I.vnode.props;I.vnode=_,I.next=null,Ul(I,_.props,H,K),Vl(I,_.children,K),is(),zo(),os()},le=(I,_,K,H,X,ae,ge,ie,$=!1)=>{const oe=I&&I.children,we=I?I.shapeFlag:0,ve=_.children,{patchFlag:be,shapeFlag:Se}=_;if(be>0){if(be&128){ue(oe,ve,K,H,X,ae,ge,ie,$);return}else if(be&256){Le(oe,ve,K,H,X,ae,ge,ie,$);return}}Se&8?(we&16&&Ke(oe,X,ae),ve!==oe&&S(K,ve)):we&16?Se&16?ue(oe,ve,K,H,X,ae,ge,ie,$):Ke(oe,X,ae,!0):(we&8&&S(K,""),Se&16&&W(ve,K,H,X,ae,ge,ie,$))},Le=(I,_,K,H,X,ae,ge,ie,$)=>{I=I||Zr,_=_||Zr;const oe=I.length,we=_.length,ve=Math.min(oe,we);let be;for(be=0;be<ve;be++){const Se=_[be]=$?dr(_[be]):qn(_[be]);M(I[be],Se,K,null,X,ae,ge,ie,$)}oe>we?Ke(I,X,ae,!0,!1,ve):W(_,K,H,X,ae,ge,ie,$,ve)},ue=(I,_,K,H,X,ae,ge,ie,$)=>{let oe=0;const we=_.length;let ve=I.length-1,be=we-1;for(;oe<=ve&&oe<=be;){const Se=I[oe],Pe=_[oe]=$?dr(_[oe]):qn(_[oe]);if(ys(Se,Pe))M(Se,Pe,K,null,X,ae,ge,ie,$);else break;oe++}for(;oe<=ve&&oe<=be;){const Se=I[ve],Pe=_[be]=$?dr(_[be]):qn(_[be]);if(ys(Se,Pe))M(Se,Pe,K,null,X,ae,ge,ie,$);else break;ve--,be--}if(oe>ve){if(oe<=be){const Se=be+1,Pe=Se<we?_[Se].el:H;for(;oe<=be;)M(null,_[oe]=$?dr(_[oe]):qn(_[oe]),K,Pe,X,ae,ge,ie,$),oe++}}else if(oe>be)for(;oe<=ve;)pe(I[oe],X,ae,!0),oe++;else{const Se=oe,Pe=oe,Ye=new Map;for(oe=Pe;oe<=be;oe++){const qe=_[oe]=$?dr(_[oe]):qn(_[oe]);qe.key!=null&&Ye.set(qe.key,oe)}let Ce,He=0;const Ze=be-Pe+1;let kt=!1,Yt=0;const Ct=new Array(Ze);for(oe=0;oe<Ze;oe++)Ct[oe]=0;for(oe=Se;oe<=ve;oe++){const qe=I[oe];if(He>=Ze){pe(qe,X,ae,!0);continue}let ct;if(qe.key!=null)ct=Ye.get(qe.key);else for(Ce=Pe;Ce<=be;Ce++)if(Ct[Ce-Pe]===0&&ys(qe,_[Ce])){ct=Ce;break}ct===void 0?pe(qe,X,ae,!0):(Ct[ct-Pe]=oe+1,ct>=Yt?Yt=ct:kt=!0,M(qe,_[ct],K,null,X,ae,ge,ie,$),He++)}const Wt=kt?Yl(Ct):Zr;for(Ce=Wt.length-1,oe=Ze-1;oe>=0;oe--){const qe=Pe+oe,ct=_[qe],tt=qe+1<we?_[qe+1].el:H;Ct[oe]===0?M(null,ct,K,tt,X,ae,ge,ie,$):kt&&(Ce<0||oe!==Wt[Ce]?De(ct,K,tt,2):Ce--)}}},De=(I,_,K,H,X=null)=>{const{el:ae,type:ge,transition:ie,children:$,shapeFlag:oe}=I;if(oe&6){De(I.component.subTree,_,K,H);return}if(oe&128){I.suspense.move(_,K,H);return}if(oe&64){ge.move(I,_,K,gt);return}if(ge===On){h(ae,_,K);for(let ve=0;ve<$.length;ve++)De($[ve],_,K,H);h(I.anchor,_,K);return}if(ge===Pi){L(I,_,K);return}if(H!==2&&oe&1&&ie)if(H===0)ie.beforeEnter(ae),h(ae,_,K),ln(()=>ie.enter(ae),X);else{const{leave:ve,delayLeave:be,afterLeave:Se}=ie,Pe=()=>h(ae,_,K),Ye=()=>{ve(ae,()=>{Pe(),Se&&Se()})};be?be(ae,Pe,Ye):Ye()}else h(ae,_,K)},pe=(I,_,K,H=!1,X=!1)=>{const{type:ae,props:ge,ref:ie,children:$,dynamicChildren:oe,shapeFlag:we,patchFlag:ve,dirs:be}=I;if(ie!=null&&Ki(ie,null,K,I,!0),we&256){_.ctx.deactivate(I);return}const Se=we&1&&be,Pe=!Xs(I);let Ye;if(Pe&&(Ye=ge&&ge.onVnodeBeforeUnmount)&&Kn(Ye,_,I),we&6)Ue(I.component,K,H);else{if(we&128){I.suspense.unmount(K,H);return}Se&&kr(I,null,_,"beforeUnmount"),we&64?I.type.remove(I,_,K,X,gt,H):oe&&(ae!==On||ve>0&&ve&64)?Ke(oe,_,K,!1,!0):(ae===On&&ve&384||!X&&we&16)&&Ke($,_,K),H&&ke(I)}(Pe&&(Ye=ge&&ge.onVnodeUnmounted)||Se)&&ln(()=>{Ye&&Kn(Ye,_,I),Se&&kr(I,null,_,"unmounted")},K)},ke=I=>{const{type:_,el:K,anchor:H,transition:X}=I;if(_===On){Ge(K,H);return}if(_===Pi){q(I);return}const ae=()=>{m(K),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(I.shapeFlag&1&&X&&!X.persisted){const{leave:ge,delayLeave:ie}=X,$=()=>ge(K,ae);ie?ie(I.el,ae,$):$()}else ae()},Ge=(I,_)=>{let K;for(;I!==_;)K=R(I),m(I),I=K;m(_)},Ue=(I,_,K)=>{const{bum:H,scope:X,update:ae,subTree:ge,um:ie}=I;H&&Hs(H),X.stop(),ae&&(ae.active=!1,pe(ge,I,_,K)),ie&&ln(ie,_),ln(()=>{I.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},Ke=(I,_,K,H=!1,X=!1,ae=0)=>{for(let ge=ae;ge<I.length;ge++)pe(I[ge],_,K,H,X)},it=I=>I.shapeFlag&6?it(I.component.subTree):I.shapeFlag&128?I.suspense.next():R(I.anchor||I.el),nt=(I,_,K)=>{I==null?_._vnode&&pe(_._vnode,null,null,!0):M(_._vnode||null,I,_,null,null,null,K),zo(),Va(),_._vnode=I},gt={p:M,um:pe,m:De,r:ke,mt:se,mc:W,pc:le,pbc:z,n:it,o:n};let St,dt;return a&&([St,dt]=a(gt)),{render:nt,hydrate:St,createApp:Ml(nt,St)}}function Or({effect:n,update:a},f){n.allowRecurse=a.allowRecurse=f}function ic(n,a,f=!1){const h=n.children,m=a.children;if(_e(h)&&_e(m))for(let y=0;y<h.length;y++){const b=h[y];let v=m[y];v.shapeFlag&1&&!v.dynamicChildren&&((v.patchFlag<=0||v.patchFlag===32)&&(v=m[y]=dr(m[y]),v.el=b.el),f||ic(b,v)),v.type===di&&(v.el=b.el)}}function Yl(n){const a=n.slice(),f=[0];let h,m,y,b,v;const g=n.length;for(h=0;h<g;h++){const d=n[h];if(d!==0){if(m=f[f.length-1],n[m]<d){a[h]=m,f.push(h);continue}for(y=0,b=f.length-1;y<b;)v=y+b>>1,n[f[v]]<d?y=v+1:b=v;d<n[f[y]]&&(y>0&&(a[h]=f[y-1]),f[y]=h)}}for(y=f.length,b=f[y-1];y-- >0;)f[y]=b,b=a[b];return f}const Wl=n=>n.__isTeleport,On=Symbol.for("v-fgt"),di=Symbol.for("v-txt"),Ss=Symbol.for("v-cmt"),Pi=Symbol.for("v-stc"),bs=[];let Rn=null;function Hn(n=!1){bs.push(Rn=n?null:[])}function zl(){bs.pop(),Rn=bs[bs.length-1]||null}let As=1;function oa(n){As+=n}function Gl(n){return n.dynamicChildren=As>0?Rn||Zr:null,zl(),As>0&&Rn&&Rn.push(n),n}function Xn(n,a,f,h,m,y){return Gl(nn(n,a,f,h,m,y,!0))}function Hl(n){return n?n.__v_isVNode===!0:!1}function ys(n,a){return n.type===a.type&&n.key===a.key}const hi="__vInternal",oc=({key:n})=>n!=null?n:null,Qs=({ref:n,ref_key:a,ref_for:f})=>(typeof n=="number"&&(n=""+n),n!=null?Dt(n)||rn(n)||Je(n)?{i:xn,r:n,k:a,f:!!f}:n:null);function nn(n,a=null,f=null,h=0,m=null,y=n===On?0:1,b=!1,v=!1){const g={__v_isVNode:!0,__v_skip:!0,type:n,props:a,key:a&&oc(a),ref:a&&Qs(a),scopeId:Ya,slotScopeIds:null,children:f,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:h,dynamicProps:m,dynamicChildren:null,appContext:null,ctx:xn};return v?(ho(g,f),y&128&&n.normalize(g)):f&&(g.shapeFlag|=Dt(f)?8:16),As>0&&!b&&Rn&&(g.patchFlag>0||y&6)&&g.patchFlag!==32&&Rn.push(g),g}const xr=Xl;function Xl(n,a=null,f=null,h=0,m=null,y=!1){if((!n||n===Pl)&&(n=Ss),Hl(n)){const v=rs(n,a,!0);return f&&ho(v,f),As>0&&!y&&Rn&&(v.shapeFlag&6?Rn[Rn.indexOf(n)]=v:Rn.push(v)),v.patchFlag|=-2,v}if(cf(n)&&(n=n.__vccOpts),a){a=Zl(a);let{class:v,style:g}=a;v&&!Dt(v)&&(a.class=Zi(v)),Tt(g)&&(Fa(g)&&!_e(g)&&(g=Ut({},g)),a.style=Xi(g))}const b=Dt(n)?1:ml(n)?128:Wl(n)?64:Tt(n)?4:Je(n)?2:0;return nn(n,a,f,h,m,b,y,!0)}function Zl(n){return n?Fa(n)||hi in n?Ut({},n):n:null}function rs(n,a,f=!1){const{props:h,ref:m,patchFlag:y,children:b}=n,v=a?Ql(h||{},a):h;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:v,key:v&&oc(v),ref:a&&a.ref?f&&m?_e(m)?m.concat(Qs(a)):[m,Qs(a)]:Qs(a):m,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:b,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:a&&n.type!==On?y===-1?16:y|16:y,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&rs(n.ssContent),ssFallback:n.ssFallback&&rs(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function ac(n=" ",a=0){return xr(di,null,n,a)}function qn(n){return n==null||typeof n=="boolean"?xr(Ss):_e(n)?xr(On,null,n.slice()):typeof n=="object"?dr(n):xr(di,null,String(n))}function dr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:rs(n)}function ho(n,a){let f=0;const{shapeFlag:h}=n;if(a==null)a=null;else if(_e(a))f=16;else if(typeof a=="object")if(h&65){const m=a.default;m&&(m._c&&(m._d=!1),ho(n,m()),m._c&&(m._d=!0));return}else{f=32;const m=a._;!m&&!(hi in a)?a._ctx=xn:m===3&&xn&&(xn.slots._===1?a._=1:(a._=2,n.patchFlag|=1024))}else Je(a)?(a={default:a,_ctx:xn},f=32):(a=String(a),h&64?(f=16,a=[ac(a)]):f=8);n.children=a,n.shapeFlag|=f}function Ql(...n){const a={};for(let f=0;f<n.length;f++){const h=n[f];for(const m in h)if(m==="class")a.class!==h.class&&(a.class=Zi([a.class,h.class]));else if(m==="style")a.style=Xi([a.style,h.style]);else if(ii(m)){const y=a[m],b=h[m];b&&y!==b&&!(_e(y)&&y.includes(b))&&(a[m]=y?[].concat(y,b):b)}else m!==""&&(a[m]=h[m])}return a}function Kn(n,a,f,h=null){Bn(n,a,7,[f,h])}const ef=Qa();let tf=0;function nf(n,a,f){const h=n.type,m=(a?a.appContext:n.appContext)||ef,y={uid:tf++,vnode:n,type:h,parent:a,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,scope:new wu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tc(h,m),emitsOptions:qa(h,m),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:h.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:f,suspenseId:f?f.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=a?a.root:y,y.emit=cl.bind(null,y),n.ce&&n.ce(y),y}let qt=null,mo,Hr,aa="__VUE_INSTANCE_SETTERS__";(Hr=xi()[aa])||(Hr=xi()[aa]=[]),Hr.push(n=>qt=n),mo=n=>{Hr.length>1?Hr.forEach(a=>a(n)):Hr[0](n)};const ss=n=>{mo(n),n.scope.on()},Rr=()=>{qt&&qt.scope.off(),mo(null)};function cc(n){return n.vnode.shapeFlag&4}let ks=!1;function rf(n,a=!1){ks=a;const{props:f,children:h}=n.vnode,m=cc(n);Jl(n,f,m,a),jl(n,h);const y=m?sf(n,a):void 0;return ks=!1,y}function sf(n,a){const f=n.type;n.accessCache=Object.create(null),n.proxy=Ja(new Proxy(n.ctx,_l));const{setup:h}=f;if(h){const m=n.setupContext=h.length>1?af(n):null;ss(n),is();const y=mr(h,n,0,[n.props,m]);if(os(),Rr(),ba(y)){if(y.then(Rr,Rr),a)return y.then(b=>{ca(n,b,a)}).catch(b=>{ui(b,n,0)});n.asyncDep=y}else ca(n,y,a)}else uc(n,a)}function ca(n,a,f){Je(a)?n.type.__ssrInlineRender?n.ssrRender=a:n.render=a:Tt(a)&&(n.setupState=Ua(a)),uc(n,f)}let ua;function uc(n,a,f){const h=n.type;if(!n.render){if(!a&&ua&&!h.render){const m=h.template||lo(n).template;if(m){const{isCustomElement:y,compilerOptions:b}=n.appContext.config,{delimiters:v,compilerOptions:g}=h,d=Ut(Ut({isCustomElement:y,delimiters:v},b),g);h.render=ua(m,d)}}n.render=h.render||Ln}ss(n),is(),Dl(n),os(),Rr()}function of(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(a,f){return fn(n,"get","$attrs"),a[f]}}))}function af(n){const a=f=>{n.exposed=f||{}};return{get attrs(){return of(n)},slots:n.slots,emit:n.emit,expose:a}}function mi(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Ua(Ja(n.exposed)),{get(a,f){if(f in a)return a[f];if(f in ws)return ws[f](n)},has(a,f){return f in a||f in ws}}))}function cf(n){return Je(n)&&"__vccOpts"in n}const uf=(n,a)=>tl(n,a,ks),lf=Symbol.for("v-scx"),ff=()=>Zs(lf),df="3.3.4",hf="http://www.w3.org/2000/svg",_r=typeof document<"u"?document:null,la=_r&&_r.createElement("template"),mf={insert:(n,a,f)=>{a.insertBefore(n,f||null)},remove:n=>{const a=n.parentNode;a&&a.removeChild(n)},createElement:(n,a,f,h)=>{const m=a?_r.createElementNS(hf,n):_r.createElement(n,f?{is:f}:void 0);return n==="select"&&h&&h.multiple!=null&&m.setAttribute("multiple",h.multiple),m},createText:n=>_r.createTextNode(n),createComment:n=>_r.createComment(n),setText:(n,a)=>{n.nodeValue=a},setElementText:(n,a)=>{n.textContent=a},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>_r.querySelector(n),setScopeId(n,a){n.setAttribute(a,"")},insertStaticContent(n,a,f,h,m,y){const b=f?f.previousSibling:a.lastChild;if(m&&(m===y||m.nextSibling))for(;a.insertBefore(m.cloneNode(!0),f),!(m===y||!(m=m.nextSibling)););else{la.innerHTML=h?`<svg>${n}</svg>`:n;const v=la.content;if(h){const g=v.firstChild;for(;g.firstChild;)v.appendChild(g.firstChild);v.removeChild(g)}a.insertBefore(v,f)}return[b?b.nextSibling:a.firstChild,f?f.previousSibling:a.lastChild]}};function gf(n,a,f){const h=n._vtc;h&&(a=(a?[a,...h]:[...h]).join(" ")),a==null?n.removeAttribute("class"):f?n.setAttribute("class",a):n.className=a}function pf(n,a,f){const h=n.style,m=Dt(f);if(f&&!m){if(a&&!Dt(a))for(const y in a)f[y]==null&&qi(h,y,"");for(const y in f)qi(h,y,f[y])}else{const y=h.display;m?a!==f&&(h.cssText=f):a&&n.removeAttribute("style"),"_vod"in n&&(h.display=y)}}const fa=/\s*!important$/;function qi(n,a,f){if(_e(f))f.forEach(h=>qi(n,a,h));else if(f==null&&(f=""),a.startsWith("--"))n.setProperty(a,f);else{const h=yf(n,a);fa.test(f)?n.setProperty(Lr(h),f.replace(fa,""),"important"):n[h]=f}}const da=["Webkit","Moz","ms"],_i={};function yf(n,a){const f=_i[a];if(f)return f;let h=ns(a);if(h!=="filter"&&h in n)return _i[a]=h;h=Ia(h);for(let m=0;m<da.length;m++){const y=da[m]+h;if(y in n)return _i[a]=y}return a}const ha="http://www.w3.org/1999/xlink";function Tf(n,a,f,h,m){if(h&&a.startsWith("xlink:"))f==null?n.removeAttributeNS(ha,a.slice(6,a.length)):n.setAttributeNS(ha,a,f);else{const y=vu(a);f==null||y&&!Sa(f)?n.removeAttribute(a):n.setAttribute(a,y?"":f)}}function vf(n,a,f,h,m,y,b){if(a==="innerHTML"||a==="textContent"){h&&b(h,m,y),n[a]=f==null?"":f;return}const v=n.tagName;if(a==="value"&&v!=="PROGRESS"&&!v.includes("-")){n._value=f;const d=v==="OPTION"?n.getAttribute("value"):n.value,S=f==null?"":f;d!==S&&(n.value=S),f==null&&n.removeAttribute(a);return}let g=!1;if(f===""||f==null){const d=typeof n[a];d==="boolean"?f=Sa(f):f==null&&d==="string"?(f="",g=!0):d==="number"&&(f=0,g=!0)}try{n[a]=f}catch{}g&&n.removeAttribute(a)}function Xr(n,a,f,h){n.addEventListener(a,f,h)}function wf(n,a,f,h){n.removeEventListener(a,f,h)}function bf(n,a,f,h,m=null){const y=n._vei||(n._vei={}),b=y[a];if(h&&b)b.value=h;else{const[v,g]=Ef(a);if(h){const d=y[a]=Sf(h,m);Xr(n,v,d,g)}else b&&(wf(n,v,b,g),y[a]=void 0)}}const ma=/(?:Once|Passive|Capture)$/;function Ef(n){let a;if(ma.test(n)){a={};let h;for(;h=n.match(ma);)n=n.slice(0,n.length-h[0].length),a[h[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Lr(n.slice(2)),a]}let Di=0;const Nf=Promise.resolve(),If=()=>Di||(Nf.then(()=>Di=0),Di=Date.now());function Sf(n,a){const f=h=>{if(!h._vts)h._vts=Date.now();else if(h._vts<=f.attached)return;Bn(Af(h,f.value),a,5,[h])};return f.value=n,f.attached=If(),f}function Af(n,a){if(_e(a)){const f=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{f.call(n),n._stopped=!0},a.map(h=>m=>!m._stopped&&h&&h(m))}else return a}const ga=/^on[a-z]/,kf=(n,a,f,h,m=!1,y,b,v,g)=>{a==="class"?gf(n,h,m):a==="style"?pf(n,f,h):ii(a)?Wi(a)||bf(n,a,f,h,b):(a[0]==="."?(a=a.slice(1),!0):a[0]==="^"?(a=a.slice(1),!1):Of(n,a,h,m))?vf(n,a,h,y,b,v,g):(a==="true-value"?n._trueValue=h:a==="false-value"&&(n._falseValue=h),Tf(n,a,h,m))};function Of(n,a,f,h){return h?!!(a==="innerHTML"||a==="textContent"||a in n&&ga.test(a)&&Je(f)):a==="spellcheck"||a==="draggable"||a==="translate"||a==="form"||a==="list"&&n.tagName==="INPUT"||a==="type"&&n.tagName==="TEXTAREA"||ga.test(a)&&Dt(f)?!1:a in n}const pa=n=>{const a=n.props["onUpdate:modelValue"]||!1;return _e(a)?f=>Hs(a,f):a};function Pf(n){n.target.composing=!0}function ya(n){const a=n.target;a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}const Ta={created(n,{modifiers:{lazy:a,trim:f,number:h}},m){n._assign=pa(m);const y=h||m.props&&m.props.type==="number";Xr(n,a?"change":"input",b=>{if(b.target.composing)return;let v=n.value;f&&(v=v.trim()),y&&(v=Ci(v)),n._assign(v)}),f&&Xr(n,"change",()=>{n.value=n.value.trim()}),a||(Xr(n,"compositionstart",Pf),Xr(n,"compositionend",ya),Xr(n,"change",ya))},mounted(n,{value:a}){n.value=a==null?"":a},beforeUpdate(n,{value:a,modifiers:{lazy:f,trim:h,number:m}},y){if(n._assign=pa(y),n.composing||document.activeElement===n&&n.type!=="range"&&(f||h&&n.value.trim()===a||(m||n.type==="number")&&Ci(n.value)===a))return;const b=a==null?"":a;n.value!==b&&(n.value=b)}},_f={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zs=(n,a)=>f=>{if(!("key"in f))return;const h=Lr(f.key);if(a.some(m=>m===h||_f[m]===h))return n(f)},Df=Ut({patchProp:kf},mf);let va;function Cf(){return va||(va=Kl(Df))}const xf=(...n)=>{const a=Cf().createApp(...n),{mount:f}=a;return a.mount=h=>{const m=Rf(h);if(!m)return;const y=a._component;!Je(y)&&!y.render&&!y.template&&(y.template=m.innerHTML),m.innerHTML="";const b=f(m,!1,m instanceof SVGElement);return m instanceof Element&&(m.removeAttribute("v-cloak"),m.setAttribute("data-v-app","")),b},a};function Rf(n){return Dt(n)?document.querySelector(n):n}var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lc={exports:{}};/*!
 * 
 * yorkie-js-sdk for building collaborative editing applications.
 *  - Version: v0.4.12
 *  - Date: 2024-01-05T11:06Z
 *  - Homepage: https://yorkie.dev
 *
 * Copyright 2020 The Yorkie Authors. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(n,a){(function(h,m){n.exports=m()})(Lf,()=>(()=>{var f={646:(b,v,g)=>{Object.defineProperty(v,"__esModule",{value:!0});const{proto3:d,StringValue:S,Timestamp:T}=g(532),R=d.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),P=d.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),Y=d.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:se},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:ae}}]),M=d.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ge},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:k,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:$},{no:6,name:"is_removed",kind:"scalar",T:8}]),k=d.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:O},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:J,repeated:!0},{no:4,name:"presence_change",kind:"message",T:H}]),O=d.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),J=d.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:L,oneof:"body"},{no:2,name:"add",kind:"message",T:q,oneof:"body"},{no:3,name:"move",kind:"message",T:B,oneof:"body"},{no:4,name:"remove",kind:"message",T:w,oneof:"body"},{no:5,name:"edit",kind:"message",T:ee,oneof:"body"},{no:6,name:"select",kind:"message",T:W,oneof:"body"},{no:7,name:"style",kind:"message",T:C,oneof:"body"},{no:8,name:"increase",kind:"message",T:z,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:re,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:ce,oneof:"body"}]),L=d.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:j},{no:4,name:"executed_at",kind:"message",T:$}],{localName:"Operation_Set"}),q=d.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"prev_created_at",kind:"message",T:$},{no:3,name:"value",kind:"message",T:j},{no:4,name:"executed_at",kind:"message",T:$}],{localName:"Operation_Add"}),B=d.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"prev_created_at",kind:"message",T:$},{no:3,name:"created_at",kind:"message",T:$},{no:4,name:"executed_at",kind:"message",T:$}],{localName:"Operation_Move"}),w=d.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"executed_at",kind:"message",T:$}],{localName:"Operation_Remove"}),ee=d.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"from",kind:"message",T:ie},{no:3,name:"to",kind:"message",T:ie},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:$}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:$},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),W=d.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"from",kind:"message",T:ie},{no:3,name:"to",kind:"message",T:ie},{no:4,name:"executed_at",kind:"message",T:$}],{localName:"Operation_Select"}),C=d.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"from",kind:"message",T:ie},{no:3,name:"to",kind:"message",T:ie},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:$},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:$}}],{localName:"Operation_Style"}),z=d.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"value",kind:"message",T:j},{no:3,name:"executed_at",kind:"message",T:$}],{localName:"Operation_Increase"}),re=d.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"from",kind:"message",T:gt},{no:3,name:"to",kind:"message",T:gt},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:$}},{no:5,name:"contents",kind:"message",T:it,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:$}],{localName:"Operation_TreeEdit"}),ce=d.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:$},{no:2,name:"from",kind:"message",T:gt},{no:3,name:"to",kind:"message",T:gt},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:$}],{localName:"Operation_TreeStyle"}),j=d.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:$},{no:2,name:"moved_at",kind:"message",T:$},{no:3,name:"removed_at",kind:"message",T:$},{no:4,name:"type",kind:"enum",T:d.getEnumType(R)},{no:5,name:"value",kind:"scalar",T:12}]),se=d.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:fe,oneof:"body"},{no:2,name:"json_array",kind:"message",T:te,oneof:"body"},{no:3,name:"primitive",kind:"message",T:G,oneof:"body"},{no:5,name:"text",kind:"message",T:le,oneof:"body"},{no:6,name:"counter",kind:"message",T:Le,oneof:"body"},{no:7,name:"tree",kind:"message",T:ue,oneof:"body"}]),fe=d.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:De,repeated:!0},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"moved_at",kind:"message",T:$},{no:4,name:"removed_at",kind:"message",T:$}],{localName:"JSONElement_JSONObject"}),te=d.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:pe,repeated:!0},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"moved_at",kind:"message",T:$},{no:4,name:"removed_at",kind:"message",T:$}],{localName:"JSONElement_JSONArray"}),G=d.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:d.getEnumType(R)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:$},{no:4,name:"moved_at",kind:"message",T:$},{no:5,name:"removed_at",kind:"message",T:$}],{localName:"JSONElement_Primitive"}),le=d.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:Ge,repeated:!0},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"moved_at",kind:"message",T:$},{no:4,name:"removed_at",kind:"message",T:$}],{localName:"JSONElement_Text"}),Le=d.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:d.getEnumType(R)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:$},{no:4,name:"moved_at",kind:"message",T:$},{no:5,name:"removed_at",kind:"message",T:$}],{localName:"JSONElement_Counter"}),ue=d.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:Ke,repeated:!0},{no:2,name:"created_at",kind:"message",T:$},{no:3,name:"moved_at",kind:"message",T:$},{no:4,name:"removed_at",kind:"message",T:$}],{localName:"JSONElement_Tree"}),De=d.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:se}]),pe=d.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:pe},{no:2,name:"element",kind:"message",T:se}]),ke=d.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:$}]),Ge=d.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:Ue},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:$},{no:4,name:"ins_prev_id",kind:"message",T:Ue},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ke}}]),Ue=d.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:$},{no:2,name:"offset",kind:"scalar",T:5}]),Ke=d.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:nt},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:$},{no:5,name:"ins_prev_id",kind:"message",T:nt},{no:6,name:"ins_next_id",kind:"message",T:nt},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ke}}]),it=d.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:Ke,repeated:!0}]),nt=d.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:$},{no:2,name:"offset",kind:"scalar",T:5}]),gt=d.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:nt},{no:2,name:"left_sibling_id",kind:"message",T:nt}]),St=d.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T}]),dt=d.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T},{no:9,name:"updated_at",kind:"message",T}]),I=d.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:S},{no:2,name:"auth_webhook_url",kind:"message",T:S},{no:3,name:"auth_webhook_methods",kind:"message",T:_},{no:4,name:"client_deactivate_threshold",kind:"message",T:S}]),_=d.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"}),K=d.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T},{no:5,name:"accessed_at",kind:"message",T},{no:6,name:"updated_at",kind:"message",T}]),H=d.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:d.getEnumType(X)},{no:2,name:"presence",kind:"message",T:ae}]),X=d.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),ae=d.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),ge=d.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),ie=d.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:$},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),$=d.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),oe=d.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),we=d.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:d.getEnumType(P)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:oe}]);v.ValueType=R,v.DocEventType=P,v.Snapshot=Y,v.ChangePack=M,v.Change=k,v.ChangeID=O,v.Operation=J,v.Operation_Set=L,v.Operation_Add=q,v.Operation_Move=B,v.Operation_Remove=w,v.Operation_Edit=ee,v.Operation_Select=W,v.Operation_Style=C,v.Operation_Increase=z,v.Operation_TreeEdit=re,v.Operation_TreeStyle=ce,v.JSONElementSimple=j,v.JSONElement=se,v.JSONElement_JSONObject=fe,v.JSONElement_JSONArray=te,v.JSONElement_Primitive=G,v.JSONElement_Text=le,v.JSONElement_Counter=Le,v.JSONElement_Tree=ue,v.RHTNode=De,v.RGANode=pe,v.NodeAttr=ke,v.TextNode=Ge,v.TextNodeID=Ue,v.TreeNode=Ke,v.TreeNodes=it,v.TreeNodeID=nt,v.TreePos=gt,v.User=St,v.Project=dt,v.UpdatableProjectFields=I,v.UpdatableProjectFields_AuthWebhookMethods=_,v.DocumentSummary=K,v.PresenceChange=H,v.PresenceChange_ChangeType=X,v.Presence=ae,v.Checkpoint=ge,v.TextNodePos=ie,v.TimeTicket=$,v.DocEventBody=oe,v.DocEvent=we},295:(b,v,g)=>{const{ActivateClientRequest:d,ActivateClientResponse:S,AttachDocumentRequest:T,AttachDocumentResponse:R,BroadcastRequest:P,BroadcastResponse:Y,DeactivateClientRequest:M,DeactivateClientResponse:k,DetachDocumentRequest:O,DetachDocumentResponse:J,PushPullChangesRequest:L,PushPullChangesResponse:q,RemoveDocumentRequest:B,RemoveDocumentResponse:w,WatchDocumentRequest:ee,WatchDocumentResponse:W}=g(176),{MethodKind:C}=g(532),z={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:d,O:S,kind:C.Unary},deactivateClient:{name:"DeactivateClient",I:M,O:k,kind:C.Unary},attachDocument:{name:"AttachDocument",I:T,O:R,kind:C.Unary},detachDocument:{name:"DetachDocument",I:O,O:J,kind:C.Unary},removeDocument:{name:"RemoveDocument",I:B,O:w,kind:C.Unary},pushPullChanges:{name:"PushPullChanges",I:L,O:q,kind:C.Unary},watchDocument:{name:"WatchDocument",I:ee,O:W,kind:C.ServerStreaming},broadcast:{name:"Broadcast",I:P,O:Y,kind:C.Unary}}};v.V=z},176:(b,v,g)=>{Object.defineProperty(v,"__esModule",{value:!0});const{proto3:d}=g(532),{ChangePack:S,DocEvent:T}=g(646),R=d.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),P=d.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Y=d.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),M=d.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),k=d.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:S}]),O=d.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:S}]),J=d.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:S},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),L=d.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:S}]),q=d.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),B=d.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:w,oneof:"body"},{no:2,name:"event",kind:"message",T,oneof:"body"}]),w=d.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),ee=d.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:S}]),W=d.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:S}]),C=d.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:S},{no:4,name:"push_only",kind:"scalar",T:8}]),z=d.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:S}]),re=d.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),ce=d.makeMessageType("yorkie.v1.BroadcastResponse",[]);v.ActivateClientRequest=R,v.ActivateClientResponse=P,v.DeactivateClientRequest=Y,v.DeactivateClientResponse=M,v.AttachDocumentRequest=k,v.AttachDocumentResponse=O,v.DetachDocumentRequest=J,v.DetachDocumentResponse=L,v.WatchDocumentRequest=q,v.WatchDocumentResponse=B,v.WatchDocumentResponse_Initialization=w,v.RemoveDocumentRequest=ee,v.RemoveDocumentResponse=W,v.PushPullChangesRequest=C,v.PushPullChangesResponse=z,v.BroadcastRequest=re,v.BroadcastResponse=ce},79:(b,v,g)=>{g.d(v,{Lt:()=>P,TD:()=>R,oP:()=>Y});var d=g(818),S=g(120),T=g(210),R;(function(M){M[M.Varint=0]="Varint",M[M.Bit64=1]="Bit64",M[M.LengthDelimited=2]="LengthDelimited",M[M.StartGroup=3]="StartGroup",M[M.EndGroup=4]="EndGroup",M[M.Bit32=5]="Bit32"})(R||(R={}));class P{constructor(k){this.stack=[],this.textEncoder=k!=null?k:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let k=0;for(let L=0;L<this.chunks.length;L++)k+=this.chunks[L].length;let O=new Uint8Array(k),J=0;for(let L=0;L<this.chunks.length;L++)O.set(this.chunks[L],J),J+=this.chunks[L].length;return this.chunks=[],O}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let k=this.finish(),O=this.stack.pop();if(!O)throw new Error("invalid state, fork stack empty");return this.chunks=O.chunks,this.buf=O.buf,this.uint32(k.byteLength),this.raw(k)}tag(k,O){return this.uint32((k<<3|O)>>>0)}raw(k){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(k),this}uint32(k){for((0,S.fp)(k);k>127;)this.buf.push(k&127|128),k=k>>>7;return this.buf.push(k),this}int32(k){return(0,S.ug)(k),(0,d.fC)(k,this.buf),this}bool(k){return this.buf.push(k?1:0),this}bytes(k){return this.uint32(k.byteLength),this.raw(k)}string(k){let O=this.textEncoder.encode(k);return this.uint32(O.byteLength),this.raw(O)}float(k){(0,S.E_)(k);let O=new Uint8Array(4);return new DataView(O.buffer).setFloat32(0,k,!0),this.raw(O)}double(k){let O=new Uint8Array(8);return new DataView(O.buffer).setFloat64(0,k,!0),this.raw(O)}fixed32(k){(0,S.fp)(k);let O=new Uint8Array(4);return new DataView(O.buffer).setUint32(0,k,!0),this.raw(O)}sfixed32(k){(0,S.ug)(k);let O=new Uint8Array(4);return new DataView(O.buffer).setInt32(0,k,!0),this.raw(O)}sint32(k){return(0,S.ug)(k),k=(k<<1^k>>31)>>>0,(0,d.fC)(k,this.buf),this}sfixed64(k){let O=new Uint8Array(8),J=new DataView(O.buffer),L=T.q.enc(k);return J.setInt32(0,L.lo,!0),J.setInt32(4,L.hi,!0),this.raw(O)}fixed64(k){let O=new Uint8Array(8),J=new DataView(O.buffer),L=T.q.uEnc(k);return J.setInt32(0,L.lo,!0),J.setInt32(4,L.hi,!0),this.raw(O)}int64(k){let O=T.q.enc(k);return(0,d._y)(O.lo,O.hi,this.buf),this}sint64(k){let O=T.q.enc(k),J=O.hi>>31,L=O.lo<<1^J,q=(O.hi<<1|O.lo>>>31)^J;return(0,d._y)(L,q,this.buf),this}uint64(k){let O=T.q.uEnc(k);return(0,d._y)(O.lo,O.hi,this.buf),this}}class Y{constructor(k,O){this.varint64=d.sg,this.uint32=d.jI,this.buf=k,this.len=k.length,this.pos=0,this.view=new DataView(k.buffer,k.byteOffset,k.byteLength),this.textDecoder=O!=null?O:new TextDecoder}tag(){let k=this.uint32(),O=k>>>3,J=k&7;if(O<=0||J<0||J>5)throw new Error("illegal tag: field no "+O+" wire type "+J);return[O,J]}skip(k){let O=this.pos;switch(k){case R.Varint:for(;this.buf[this.pos++]&128;);break;case R.Bit64:this.pos+=4;case R.Bit32:this.pos+=4;break;case R.LengthDelimited:let J=this.uint32();this.pos+=J;break;case R.StartGroup:let L;for(;(L=this.tag()[1])!==R.EndGroup;)this.skip(L);break;default:throw new Error("cant skip wire type "+k)}return this.assertBounds(),this.buf.subarray(O,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let k=this.uint32();return k>>>1^-(k&1)}int64(){return T.q.dec(...this.varint64())}uint64(){return T.q.uDec(...this.varint64())}sint64(){let[k,O]=this.varint64(),J=-(k&1);return k=(k>>>1|(O&1)<<31)^J,O=O>>>1^J,T.q.dec(k,O)}bool(){let[k,O]=this.varint64();return k!==0||O!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return T.q.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return T.q.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let k=this.uint32(),O=this.pos;return this.pos+=k,this.assertBounds(),this.buf.subarray(O,O+k)}string(){return this.textDecoder.decode(this.bytes())}}},465:(b,v,g)=>{g.d(v,{p:()=>S,w:()=>d});var d;(function(T){T[T.DOUBLE=1]="DOUBLE",T[T.FLOAT=2]="FLOAT",T[T.INT64=3]="INT64",T[T.UINT64=4]="UINT64",T[T.INT32=5]="INT32",T[T.FIXED64=6]="FIXED64",T[T.FIXED32=7]="FIXED32",T[T.BOOL=8]="BOOL",T[T.STRING=9]="STRING",T[T.BYTES=12]="BYTES",T[T.UINT32=13]="UINT32",T[T.SFIXED32=15]="SFIXED32",T[T.SFIXED64=16]="SFIXED64",T[T.SINT32=17]="SINT32",T[T.SINT64=18]="SINT64"})(d||(d={}));var S;(function(T){T[T.BIGINT=0]="BIGINT",T[T.STRING=1]="STRING"})(S||(S={}))},733:(b,v,g)=>{g.d(v,{I:()=>T});var d=g(561),S=g(850);class T extends d.v{constructor(P){super(),this.typeUrl="",this.value=new Uint8Array(0),S.w.util.initPartial(P,this)}toJson(P){var Y;if(this.typeUrl==="")return{};const M=this.typeUrlToName(this.typeUrl),k=(Y=P==null?void 0:P.typeRegistry)===null||Y===void 0?void 0:Y.findMessage(M);if(!k)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let J=k.fromBinary(this.value).toJson(P);return(M.startsWith("google.protobuf.")||J===null||Array.isArray(J)||typeof J!="object")&&(J={value:J}),J["@type"]=this.typeUrl,J}fromJson(P,Y){var M;if(P===null||Array.isArray(P)||typeof P!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${P===null?"null":Array.isArray(P)?"array":typeof P}`);if(Object.keys(P).length==0)return this;const k=P["@type"];if(typeof k!="string"||k=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const O=this.typeUrlToName(k),J=(M=Y==null?void 0:Y.typeRegistry)===null||M===void 0?void 0:M.findMessage(O);if(!J)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${k} is not in the type registry`);let L;if(O.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(P,"value"))L=J.fromJson(P.value,Y);else{const q=Object.assign({},P);delete q["@type"],L=J.fromJson(q,Y)}return this.packFrom(L),this}packFrom(P){this.value=P.toBinary(),this.typeUrl=this.typeNameToUrl(P.getType().typeName)}unpackTo(P){return this.is(P.getType())?(P.fromBinary(this.value),!0):!1}unpack(P){if(this.typeUrl==="")return;const Y=P.findMessage(this.typeUrlToName(this.typeUrl));if(!!Y)return Y.fromBinary(this.value)}is(P){if(this.typeUrl==="")return!1;const Y=this.typeUrlToName(this.typeUrl);let M="";return typeof P=="string"?M=P:M=P.typeName,Y===M}typeNameToUrl(P){return`type.googleapis.com/${P}`}typeUrlToName(P){if(!P.length)throw new Error(`invalid type url: ${P}`);const Y=P.lastIndexOf("/"),M=Y>=0?P.substring(Y+1):P;if(!M.length)throw new Error(`invalid type url: ${P}`);return M}static pack(P){const Y=new T;return Y.packFrom(P),Y}static fromBinary(P,Y){return new T().fromBinary(P,Y)}static fromJson(P,Y){return new T().fromJson(P,Y)}static fromJsonString(P,Y){return new T().fromJsonString(P,Y)}static equals(P,Y){return S.w.util.equals(T,P,Y)}}T.runtime=S.w,T.typeName="google.protobuf.Any",T.fields=S.w.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])},818:(b,v,g)=>{g.d(v,{Ak:()=>P,CZ:()=>R,Fd:()=>Y,_y:()=>S,fC:()=>L,jI:()=>q,sg:()=>d});function d(){let B=0,w=0;for(let W=0;W<28;W+=7){let C=this.buf[this.pos++];if(B|=(C&127)<<W,(C&128)==0)return this.assertBounds(),[B,w]}let ee=this.buf[this.pos++];if(B|=(ee&15)<<28,w=(ee&112)>>4,(ee&128)==0)return this.assertBounds(),[B,w];for(let W=3;W<=31;W+=7){let C=this.buf[this.pos++];if(w|=(C&127)<<W,(C&128)==0)return this.assertBounds(),[B,w]}throw new Error("invalid varint")}function S(B,w,ee){for(let z=0;z<28;z=z+7){const re=B>>>z,ce=!(re>>>7==0&&w==0),j=(ce?re|128:re)&255;if(ee.push(j),!ce)return}const W=B>>>28&15|(w&7)<<4,C=w>>3!=0;if(ee.push((C?W|128:W)&255),!!C){for(let z=3;z<31;z=z+7){const re=w>>>z,ce=re>>>7!=0,j=(ce?re|128:re)&255;if(ee.push(j),!ce)return}ee.push(w>>>31&1)}}const T=4294967296;function R(B){const w=B[0]==="-";w&&(B=B.slice(1));const ee=1e6;let W=0,C=0;function z(re,ce){const j=Number(B.slice(re,ce));C*=ee,W=W*ee+j,W>=T&&(C=C+(W/T|0),W=W%T)}return z(-24,-18),z(-18,-12),z(-12,-6),z(-6),w?O(W,C):k(W,C)}function P(B,w){let ee=k(B,w);const W=ee.hi&2147483648;W&&(ee=O(ee.lo,ee.hi));const C=Y(ee.lo,ee.hi);return W?"-"+C:C}function Y(B,w){if({lo:B,hi:w}=M(B,w),w<=2097151)return String(T*w+B);const ee=B&16777215,W=(B>>>24|w<<8)&16777215,C=w>>16&65535;let z=ee+W*6777216+C*6710656,re=W+C*8147497,ce=C*2;const j=1e7;return z>=j&&(re+=Math.floor(z/j),z%=j),re>=j&&(ce+=Math.floor(re/j),re%=j),ce.toString()+J(re)+J(z)}function M(B,w){return{lo:B>>>0,hi:w>>>0}}function k(B,w){return{lo:B|0,hi:w|0}}function O(B,w){return w=~w,B?B=~B+1:w+=1,k(B,w)}const J=B=>{const w=String(B);return"0000000".slice(w.length)+w};function L(B,w){if(B>=0){for(;B>127;)w.push(B&127|128),B=B>>>7;w.push(B)}else{for(let ee=0;ee<9;ee++)w.push(B&127|128),B=B>>7;w.push(1)}}function q(){let B=this.buf[this.pos++],w=B&127;if((B&128)==0)return this.assertBounds(),w;if(B=this.buf[this.pos++],w|=(B&127)<<7,(B&128)==0)return this.assertBounds(),w;if(B=this.buf[this.pos++],w|=(B&127)<<14,(B&128)==0)return this.assertBounds(),w;if(B=this.buf[this.pos++],w|=(B&127)<<21,(B&128)==0)return this.assertBounds(),w;B=this.buf[this.pos++],w|=(B&15)<<28;for(let ee=5;(B&128)!==0&&ee<10;ee++)B=this.buf[this.pos++];if((B&128)!=0)throw new Error("invalid varint");return this.assertBounds(),w>>>0}},532:(b,v,g)=>{g.r(v),g.d(v,{Any:()=>Ur.I,Api:()=>vn,BinaryReader:()=>re.oP,BinaryWriter:()=>re.Lt,BoolValue:()=>Ht,BytesValue:()=>Ee,CodeGeneratorRequest:()=>Qt,CodeGeneratorResponse:()=>Nt,CodeGeneratorResponse_Feature:()=>$n,CodeGeneratorResponse_File:()=>Vt,DescriptorProto:()=>Ue,DescriptorProto_ExtensionRange:()=>Ke,DescriptorProto_ReservedRange:()=>it,DoubleValue:()=>Gt,Duration:()=>ot,Edition:()=>pe,Empty:()=>Sn,Enum:()=>ze,EnumDescriptorProto:()=>H,EnumDescriptorProto_EnumReservedRange:()=>X,EnumOptions:()=>Ze,EnumValue:()=>Tn,EnumValueDescriptorProto:()=>ae,EnumValueOptions:()=>kt,ExtensionRangeOptions:()=>nt,ExtensionRangeOptions_Declaration:()=>St,ExtensionRangeOptions_VerificationState:()=>gt,FeatureSet:()=>tt,FeatureSetDefaults:()=>ne,FeatureSetDefaults_FeatureSetEditionDefault:()=>pt,FeatureSet_EnumType:()=>pr,FeatureSet_FieldPresence:()=>nr,FeatureSet_JsonFormat:()=>vr,FeatureSet_MessageEncoding:()=>Tr,FeatureSet_RepeatedFieldEncoding:()=>zt,FeatureSet_Utf8Validation:()=>yr,Field:()=>en,FieldDescriptorProto:()=>dt,FieldDescriptorProto_Label:()=>_,FieldDescriptorProto_Type:()=>I,FieldMask:()=>An,FieldOptions:()=>ve,FieldOptions_CType:()=>be,FieldOptions_EditionDefault:()=>Ce,FieldOptions_JSType:()=>Se,FieldOptions_OptionRetention:()=>Pe,FieldOptions_OptionTargetType:()=>Ye,Field_Cardinality:()=>or,Field_Kind:()=>ir,FileDescriptorProto:()=>Ge,FileDescriptorSet:()=>ke,FileOptions:()=>$,FileOptions_OptimizeMode:()=>oe,FloatValue:()=>jt,GeneratedCodeInfo:()=>dn,GeneratedCodeInfo_Annotation:()=>hn,GeneratedCodeInfo_Annotation_Semantic:()=>rr,Int32Value:()=>ut,Int64Value:()=>xt,ListValue:()=>Ft,LongType:()=>T.p,Message:()=>ue.v,MessageOptions:()=>we,Method:()=>un,MethodDescriptorProto:()=>ie,MethodIdempotency:()=>De.w,MethodKind:()=>De.t,MethodOptions:()=>Ct,MethodOptions_IdempotencyLevel:()=>Wt,Mixin:()=>wn,NullValue:()=>Mt,OneofDescriptorProto:()=>K,OneofOptions:()=>He,Option:()=>_t,ScalarType:()=>T.w,ServiceDescriptorProto:()=>ge,ServiceOptions:()=>Yt,SourceCodeInfo:()=>je,SourceCodeInfo_Location:()=>rt,SourceContext:()=>an,StringValue:()=>Rt,Struct:()=>$t,Syntax:()=>cn,Timestamp:()=>on,Type:()=>Pt,UInt32Value:()=>mt,UInt64Value:()=>st,UninterpretedOption:()=>qe,UninterpretedOption_NamePart:()=>ct,Value:()=>ht,Version:()=>Zt,WireType:()=>re.TD,codegenInfo:()=>Le,createDescriptorSet:()=>cs,createRegistry:()=>_s,createRegistryFromDescriptors:()=>br,proto2:()=>w,proto3:()=>d.w,protoBase64:()=>z.W,protoDelimited:()=>fe,protoDouble:()=>W,protoInt64:()=>C.q,toPlainMessage:()=>jr});var d=g(850),S=g(493),T=g(465),R=g(744);function P(){return Object.assign(Object.assign({},(0,R.gY)()),{writeMessage(u,s,c){const N=u.getType();let A;try{for(A of N.fields.byNumber()){let x,F=A.repeated,Z=A.localName;if(A.oneof){const V=u[A.oneof.localName];if(V.case!==Z)continue;x=V.value}else if(x=u[Z],x===void 0&&!A.oneof&&!A.opt)throw new Error(`cannot encode field ${N.typeName}.${A.name} to binary: required field not set`);switch(A.kind){case"scalar":case"enum":let V=A.kind=="enum"?T.w.INT32:A.T;if(F)if(A.packed)(0,R.Jj)(s,V,A.no,x);else for(const he of x)(0,R.NN)(s,V,A.no,he,!0);else x!==void 0&&(0,R.NN)(s,V,A.no,x,!0);break;case"message":if(F)for(const he of x)(0,R.oQ)(s,c,A,he);else(0,R.oQ)(s,c,A,x);break;case"map":for(const[he,ye]of Object.entries(x))(0,R.gQ)(s,c,A,he,ye);break}}}catch(x){let F=A?`cannot encode field ${N.typeName}.${A==null?void 0:A.name} to binary`:`cannot encode message ${N.typeName} to binary`,Z=x instanceof Error?x.message:String(x);throw new Error(F+(Z.length>0?`: ${Z}`:""))}return c.writeUnknownFields&&this.writeUnknownFields(u,s),s}})}var Y=g(433),M=g(501),k=g(215),O=g(504),J=g(432),L=g(120),q=g(814);function B(){return(0,q.b)((u,s)=>function(N,A,x){if(N.kind=="map"){const F={};switch(N.V.kind){case"scalar":for(const[V,he]of Object.entries(A)){const ye=s(N.V.T,he,!0);(0,L.hu)(ye!==void 0),F[V.toString()]=ye}break;case"message":for(const[V,he]of Object.entries(A))F[V.toString()]=he.toJson(x);break;case"enum":const Z=N.V.T;for(const[V,he]of Object.entries(A)){(0,L.hu)(he===void 0||typeof he=="number");const ye=u(Z,he,!0,x.enumAsInteger);(0,L.hu)(ye!==void 0),F[V.toString()]=ye}break}return x.emitDefaultValues||Object.keys(F).length>0?F:void 0}else if(N.repeated){const F=[];switch(N.kind){case"scalar":for(let Z=0;Z<A.length;Z++)F.push(s(N.T,A[Z],!0));break;case"enum":for(let Z=0;Z<A.length;Z++)F.push(u(N.T,A[Z],!0,x.enumAsInteger));break;case"message":for(let Z=0;Z<A.length;Z++)F.push(A[Z].toJson(x));break}return x.emitDefaultValues||F.length>0?F:void 0}else{if(A===void 0){if(!N.oneof&&!N.opt)throw"required field not set";return}switch(N.kind){case"scalar":return s(N.T,A,!0);case"enum":return u(N.T,A,!0,x.enumAsInteger);case"message":return(0,J.E)(N.T,A).toJson(x)}}})}const w=(0,S.F)("proto2",B(),P(),Object.assign(Object.assign({},(0,Y.f)()),{newFieldList(u){return new M.i(u,ee)},initFields(u){for(const s of u.getType().fields.byMember()){const c=s.localName,N=u;if(s.repeated){N[c]=[];continue}switch(s.kind){case"oneof":N[c]={case:void 0};break;case"map":N[c]={};break}}}}));function ee(u){var s,c,N,A,x;const F=[];let Z;for(const V of typeof u=="function"?u():u){const he=V;if(he.localName=(0,O.Rz)(V.name,V.oneof!==void 0),he.jsonName=(s=V.jsonName)!==null&&s!==void 0?s:(0,O.x1)(V.name),he.repeated=(c=V.repeated)!==null&&c!==void 0?c:!1,V.kind=="scalar"&&(he.L=(N=V.L)!==null&&N!==void 0?N:T.p.BIGINT),V.oneof!==void 0){const ye=typeof V.oneof=="string"?V.oneof:V.oneof.name;(!Z||Z.name!=ye)&&(Z=new k.o(ye)),he.oneof=Z,Z.addField(he)}V.kind=="message"&&(he.delimited=(A=V.delimited)!==null&&A!==void 0?A:!1),he.packed=(x=V.packed)!==null&&x!==void 0?x:!1,F.push(he)}return F}const W={NaN:Number.NaN,POSITIVE_INFINITY:Number.POSITIVE_INFINITY,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY};var C=g(210),z=g(236),re=g(79),ce=function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=u[Symbol.asyncIterator],c;return s?s.call(u):(u=typeof __values=="function"?__values(u):u[Symbol.iterator](),c={},N("next"),N("throw"),N("return"),c[Symbol.asyncIterator]=function(){return this},c);function N(x){c[x]=u[x]&&function(F){return new Promise(function(Z,V){F=u[x](F),A(Z,V,F.done,F.value)})}}function A(x,F,Z,V){Promise.resolve(V).then(function(he){x({value:he,done:Z})},F)}},j=function(u){return this instanceof j?(this.v=u,this):new j(u)},se=function(u,s,c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=c.apply(u,s||[]),A,x=[];return A={},Z("next"),Z("throw"),Z("return",F),A[Symbol.asyncIterator]=function(){return this},A;function F(xe){return function(Lt){return Promise.resolve(Lt).then(xe,Oe)}}function Z(xe,Lt){N[xe]&&(A[xe]=function(bn){return new Promise(function(pi,Nr){x.push([xe,bn,pi,Nr])>1||V(xe,bn)})},Lt&&(A[xe]=Lt(A[xe])))}function V(xe,Lt){try{he(N[xe](Lt))}catch(bn){at(x[0][3],bn)}}function he(xe){xe.value instanceof j?Promise.resolve(xe.value.v).then(ye,Oe):at(x[0][2],xe)}function ye(xe){V("next",xe)}function Oe(xe){V("throw",xe)}function at(xe,Lt){xe(Lt),x.shift(),x.length&&V(x[0][0],x[0][1])}};const fe={enc(u,s){const c=(0,R.gY)().makeWriteOptions(s);return c.writerFactory().bytes(u.toBinary(c)).finish()},dec(u,s,c){const N=(0,R.gY)().makeReadOptions(c);return u.fromBinary(N.readerFactory(s).bytes(),N)},decStream(u,s){return se(this,arguments,function*(){var N,A,x,F;function Z(at,xe){const Lt=new Uint8Array(at.byteLength+xe.byteLength);return Lt.set(at),Lt.set(xe,at.length),Lt}let V=new Uint8Array(0);try{for(var he=!0,ye=ce(s),Oe;Oe=yield j(ye.next()),N=Oe.done,!N;he=!0)for(F=Oe.value,he=!1,V=Z(V,F);;){const xe=fe.peekSize(V);if(xe.eof||xe.offset+xe.size>V.byteLength)break;yield yield j(fe.dec(u,V)),V=V.subarray(xe.offset+xe.size)}}catch(at){A={error:at}}finally{try{!he&&!N&&(x=ye.return)&&(yield j(x.call(ye)))}finally{if(A)throw A.error}}if(V.byteLength>0)throw new Error("incomplete data")})},peekSize(u){const s={eof:!0,size:null,offset:null};for(let c=0;c<10;c++){if(c>u.byteLength)return s;if((u[c]&128)==0){const N=new re.oP(u);let A;try{A=N.uint32()}catch(x){if(x instanceof RangeError)return s;throw x}return{eof:!1,size:A,offset:N.pos}}}throw new Error("invalid varint")}};var te=g(781);function G(u){switch(u.typeName){case"google.protobuf.Any":{const s=u.fields.find(N=>N.number==1&&N.fieldKind=="scalar"&&N.scalar===T.w.STRING),c=u.fields.find(N=>N.number==2&&N.fieldKind=="scalar"&&N.scalar===T.w.BYTES);if(s&&c)return{typeName:u.typeName,typeUrl:s,value:c};break}case"google.protobuf.Timestamp":{const s=u.fields.find(N=>N.number==1&&N.fieldKind=="scalar"&&N.scalar===T.w.INT64),c=u.fields.find(N=>N.number==2&&N.fieldKind=="scalar"&&N.scalar===T.w.INT32);if(s&&c)return{typeName:u.typeName,seconds:s,nanos:c};break}case"google.protobuf.Duration":{const s=u.fields.find(N=>N.number==1&&N.fieldKind=="scalar"&&N.scalar===T.w.INT64),c=u.fields.find(N=>N.number==2&&N.fieldKind=="scalar"&&N.scalar===T.w.INT32);if(s&&c)return{typeName:u.typeName,seconds:s,nanos:c};break}case"google.protobuf.Struct":{const s=u.fields.find(c=>c.number==1&&!c.repeated);if((s==null?void 0:s.fieldKind)!=="map"||s.mapValue.kind!=="message"||s.mapValue.message.typeName!=="google.protobuf.Value")break;return{typeName:u.typeName,fields:s}}case"google.protobuf.Value":{const s=u.oneofs.find(V=>V.name==="kind"),c=u.fields.find(V=>V.number==1&&V.oneof===s);if((c==null?void 0:c.fieldKind)!=="enum"||c.enum.typeName!=="google.protobuf.NullValue")return;const N=u.fields.find(V=>V.number==2&&V.fieldKind=="scalar"&&V.scalar===T.w.DOUBLE&&V.oneof===s),A=u.fields.find(V=>V.number==3&&V.fieldKind=="scalar"&&V.scalar===T.w.STRING&&V.oneof===s),x=u.fields.find(V=>V.number==4&&V.fieldKind=="scalar"&&V.scalar===T.w.BOOL&&V.oneof===s),F=u.fields.find(V=>V.number==5&&V.oneof===s);if((F==null?void 0:F.fieldKind)!=="message"||F.message.typeName!=="google.protobuf.Struct")return;const Z=u.fields.find(V=>V.number==6&&V.oneof===s);if((Z==null?void 0:Z.fieldKind)!=="message"||Z.message.typeName!=="google.protobuf.ListValue")return;if(s&&N&&A&&x)return{typeName:u.typeName,kind:s,nullValue:c,numberValue:N,stringValue:A,boolValue:x,structValue:F,listValue:Z};break}case"google.protobuf.ListValue":{const s=u.fields.find(c=>c.number==1&&c.repeated);if((s==null?void 0:s.fieldKind)!="message"||s.message.typeName!=="google.protobuf.Value")break;return{typeName:u.typeName,values:s}}case"google.protobuf.FieldMask":{const s=u.fields.find(c=>c.number==1&&c.fieldKind=="scalar"&&c.scalar===T.w.STRING&&c.repeated);if(s)return{typeName:u.typeName,paths:s};break}case"google.protobuf.DoubleValue":case"google.protobuf.FloatValue":case"google.protobuf.Int64Value":case"google.protobuf.UInt64Value":case"google.protobuf.Int32Value":case"google.protobuf.UInt32Value":case"google.protobuf.BoolValue":case"google.protobuf.StringValue":case"google.protobuf.BytesValue":{const s=u.fields.find(c=>c.number==1&&c.name=="value");if(!s||s.fieldKind!=="scalar")break;return{typeName:u.typeName,value:s}}}}const le="@bufbuild/protobuf",Le={packageName:"@bufbuild/protobuf",localName:O.r1,reifyWkt:G,getUnwrappedFieldType:J.w,scalarDefaultValue:te.kY,safeIdentifier:O.GD,safeObjectProperty:O.ll,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:le},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:le},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:le},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:le},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:le},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:le},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:le},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:le},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:le},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:le},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:le},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:le},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:le},protoDouble:{typeOnly:!1,privateImportPath:"./proto-double.js",publicImportPath:le},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:le},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:le},LongType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:le},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:le},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:le},IMessageTypeRegistry:{typeOnly:!0,privateImportPath:"./type-registry.js",publicImportPath:le}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]};var ue=g(561),De=g(328),pe;(function(u){u[u.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",u[u.EDITION_PROTO2=998]="EDITION_PROTO2",u[u.EDITION_PROTO3=999]="EDITION_PROTO3",u[u.EDITION_2023=1e3]="EDITION_2023",u[u.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",u[u.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",u[u.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",u[u.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",u[u.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY"})(pe||(pe={})),w.util.setEnumType(pe,"google.protobuf.Edition",[{no:0,name:"EDITION_UNKNOWN"},{no:998,name:"EDITION_PROTO2"},{no:999,name:"EDITION_PROTO3"},{no:1e3,name:"EDITION_2023"},{no:1,name:"EDITION_1_TEST_ONLY"},{no:2,name:"EDITION_2_TEST_ONLY"},{no:99997,name:"EDITION_99997_TEST_ONLY"},{no:99998,name:"EDITION_99998_TEST_ONLY"},{no:99999,name:"EDITION_99999_TEST_ONLY"}]);class ke extends ue.v{constructor(s){super(),this.file=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new ke().fromBinary(s,c)}static fromJson(s,c){return new ke().fromJson(s,c)}static fromJsonString(s,c){return new ke().fromJsonString(s,c)}static equals(s,c){return w.util.equals(ke,s,c)}}ke.runtime=w,ke.typeName="google.protobuf.FileDescriptorSet",ke.fields=w.util.newFieldList(()=>[{no:1,name:"file",kind:"message",T:Ge,repeated:!0}]);class Ge extends ue.v{constructor(s){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new Ge().fromBinary(s,c)}static fromJson(s,c){return new Ge().fromJson(s,c)}static fromJsonString(s,c){return new Ge().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Ge,s,c)}}Ge.runtime=w,Ge.typeName="google.protobuf.FileDescriptorProto",Ge.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:Ue,repeated:!0},{no:5,name:"enum_type",kind:"message",T:H,repeated:!0},{no:6,name:"service",kind:"message",T:ge,repeated:!0},{no:7,name:"extension",kind:"message",T:dt,repeated:!0},{no:8,name:"options",kind:"message",T:$,opt:!0},{no:9,name:"source_code_info",kind:"message",T:je,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0},{no:14,name:"edition",kind:"enum",T:w.getEnumType(pe),opt:!0}]);class Ue extends ue.v{constructor(s){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new Ue().fromBinary(s,c)}static fromJson(s,c){return new Ue().fromJson(s,c)}static fromJsonString(s,c){return new Ue().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Ue,s,c)}}Ue.runtime=w,Ue.typeName="google.protobuf.DescriptorProto",Ue.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:dt,repeated:!0},{no:6,name:"extension",kind:"message",T:dt,repeated:!0},{no:3,name:"nested_type",kind:"message",T:Ue,repeated:!0},{no:4,name:"enum_type",kind:"message",T:H,repeated:!0},{no:5,name:"extension_range",kind:"message",T:Ke,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:K,repeated:!0},{no:7,name:"options",kind:"message",T:we,opt:!0},{no:9,name:"reserved_range",kind:"message",T:it,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class Ke extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new Ke().fromBinary(s,c)}static fromJson(s,c){return new Ke().fromJson(s,c)}static fromJsonString(s,c){return new Ke().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Ke,s,c)}}Ke.runtime=w,Ke.typeName="google.protobuf.DescriptorProto.ExtensionRange",Ke.fields=w.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:nt,opt:!0}]);class it extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new it().fromBinary(s,c)}static fromJson(s,c){return new it().fromJson(s,c)}static fromJsonString(s,c){return new it().fromJsonString(s,c)}static equals(s,c){return w.util.equals(it,s,c)}}it.runtime=w,it.typeName="google.protobuf.DescriptorProto.ReservedRange",it.fields=w.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class nt extends ue.v{constructor(s){super(),this.uninterpretedOption=[],this.declaration=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new nt().fromBinary(s,c)}static fromJson(s,c){return new nt().fromJson(s,c)}static fromJsonString(s,c){return new nt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(nt,s,c)}}nt.runtime=w,nt.typeName="google.protobuf.ExtensionRangeOptions",nt.fields=w.util.newFieldList(()=>[{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0},{no:2,name:"declaration",kind:"message",T:St,repeated:!0},{no:50,name:"features",kind:"message",T:tt,opt:!0},{no:3,name:"verification",kind:"enum",T:w.getEnumType(gt),opt:!0,default:gt.UNVERIFIED}]);var gt;(function(u){u[u.DECLARATION=0]="DECLARATION",u[u.UNVERIFIED=1]="UNVERIFIED"})(gt||(gt={})),w.util.setEnumType(gt,"google.protobuf.ExtensionRangeOptions.VerificationState",[{no:0,name:"DECLARATION"},{no:1,name:"UNVERIFIED"}]);class St extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new St().fromBinary(s,c)}static fromJson(s,c){return new St().fromJson(s,c)}static fromJsonString(s,c){return new St().fromJsonString(s,c)}static equals(s,c){return w.util.equals(St,s,c)}}St.runtime=w,St.typeName="google.protobuf.ExtensionRangeOptions.Declaration",St.fields=w.util.newFieldList(()=>[{no:1,name:"number",kind:"scalar",T:5,opt:!0},{no:2,name:"full_name",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"scalar",T:9,opt:!0},{no:5,name:"reserved",kind:"scalar",T:8,opt:!0},{no:6,name:"repeated",kind:"scalar",T:8,opt:!0}]);class dt extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new dt().fromBinary(s,c)}static fromJson(s,c){return new dt().fromJson(s,c)}static fromJsonString(s,c){return new dt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(dt,s,c)}}dt.runtime=w,dt.typeName="google.protobuf.FieldDescriptorProto",dt.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:w.getEnumType(_),opt:!0},{no:5,name:"type",kind:"enum",T:w.getEnumType(I),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:ve,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}]);var I;(function(u){u[u.DOUBLE=1]="DOUBLE",u[u.FLOAT=2]="FLOAT",u[u.INT64=3]="INT64",u[u.UINT64=4]="UINT64",u[u.INT32=5]="INT32",u[u.FIXED64=6]="FIXED64",u[u.FIXED32=7]="FIXED32",u[u.BOOL=8]="BOOL",u[u.STRING=9]="STRING",u[u.GROUP=10]="GROUP",u[u.MESSAGE=11]="MESSAGE",u[u.BYTES=12]="BYTES",u[u.UINT32=13]="UINT32",u[u.ENUM=14]="ENUM",u[u.SFIXED32=15]="SFIXED32",u[u.SFIXED64=16]="SFIXED64",u[u.SINT32=17]="SINT32",u[u.SINT64=18]="SINT64"})(I||(I={})),w.util.setEnumType(I,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var _;(function(u){u[u.OPTIONAL=1]="OPTIONAL",u[u.REPEATED=3]="REPEATED",u[u.REQUIRED=2]="REQUIRED"})(_||(_={})),w.util.setEnumType(_,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:3,name:"LABEL_REPEATED"},{no:2,name:"LABEL_REQUIRED"}]);class K extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new K().fromBinary(s,c)}static fromJson(s,c){return new K().fromJson(s,c)}static fromJsonString(s,c){return new K().fromJsonString(s,c)}static equals(s,c){return w.util.equals(K,s,c)}}K.runtime=w,K.typeName="google.protobuf.OneofDescriptorProto",K.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:He,opt:!0}]);class H extends ue.v{constructor(s){super(),this.value=[],this.reservedRange=[],this.reservedName=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new H().fromBinary(s,c)}static fromJson(s,c){return new H().fromJson(s,c)}static fromJsonString(s,c){return new H().fromJsonString(s,c)}static equals(s,c){return w.util.equals(H,s,c)}}H.runtime=w,H.typeName="google.protobuf.EnumDescriptorProto",H.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:ae,repeated:!0},{no:3,name:"options",kind:"message",T:Ze,opt:!0},{no:4,name:"reserved_range",kind:"message",T:X,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class X extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new X().fromBinary(s,c)}static fromJson(s,c){return new X().fromJson(s,c)}static fromJsonString(s,c){return new X().fromJsonString(s,c)}static equals(s,c){return w.util.equals(X,s,c)}}X.runtime=w,X.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",X.fields=w.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class ae extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new ae().fromBinary(s,c)}static fromJson(s,c){return new ae().fromJson(s,c)}static fromJsonString(s,c){return new ae().fromJsonString(s,c)}static equals(s,c){return w.util.equals(ae,s,c)}}ae.runtime=w,ae.typeName="google.protobuf.EnumValueDescriptorProto",ae.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:kt,opt:!0}]);class ge extends ue.v{constructor(s){super(),this.method=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new ge().fromBinary(s,c)}static fromJson(s,c){return new ge().fromJson(s,c)}static fromJsonString(s,c){return new ge().fromJsonString(s,c)}static equals(s,c){return w.util.equals(ge,s,c)}}ge.runtime=w,ge.typeName="google.protobuf.ServiceDescriptorProto",ge.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:ie,repeated:!0},{no:3,name:"options",kind:"message",T:Yt,opt:!0}]);class ie extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new ie().fromBinary(s,c)}static fromJson(s,c){return new ie().fromJson(s,c)}static fromJsonString(s,c){return new ie().fromJsonString(s,c)}static equals(s,c){return w.util.equals(ie,s,c)}}ie.runtime=w,ie.typeName="google.protobuf.MethodDescriptorProto",ie.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:Ct,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]);class $ extends ue.v{constructor(s){super(),this.uninterpretedOption=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new $().fromBinary(s,c)}static fromJson(s,c){return new $().fromJson(s,c)}static fromJsonString(s,c){return new $().fromJsonString(s,c)}static equals(s,c){return w.util.equals($,s,c)}}$.runtime=w,$.typeName="google.protobuf.FileOptions",$.fields=w.util.newFieldList(()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:w.getEnumType(oe),opt:!0,default:oe.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:50,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);var oe;(function(u){u[u.SPEED=1]="SPEED",u[u.CODE_SIZE=2]="CODE_SIZE",u[u.LITE_RUNTIME=3]="LITE_RUNTIME"})(oe||(oe={})),w.util.setEnumType(oe,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class we extends ue.v{constructor(s){super(),this.uninterpretedOption=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new we().fromBinary(s,c)}static fromJson(s,c){return new we().fromJson(s,c)}static fromJsonString(s,c){return new we().fromJsonString(s,c)}static equals(s,c){return w.util.equals(we,s,c)}}we.runtime=w,we.typeName="google.protobuf.MessageOptions",we.fields=w.util.newFieldList(()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:11,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:12,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class ve extends ue.v{constructor(s){super(),this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new ve().fromBinary(s,c)}static fromJson(s,c){return new ve().fromJson(s,c)}static fromJsonString(s,c){return new ve().fromJsonString(s,c)}static equals(s,c){return w.util.equals(ve,s,c)}}ve.runtime=w,ve.typeName="google.protobuf.FieldOptions",ve.fields=w.util.newFieldList(()=>[{no:1,name:"ctype",kind:"enum",T:w.getEnumType(be),opt:!0,default:be.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:w.getEnumType(Se),opt:!0,default:Se.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:16,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"retention",kind:"enum",T:w.getEnumType(Pe),opt:!0},{no:19,name:"targets",kind:"enum",T:w.getEnumType(Ye),repeated:!0},{no:20,name:"edition_defaults",kind:"message",T:Ce,repeated:!0},{no:21,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);var be;(function(u){u[u.STRING=0]="STRING",u[u.CORD=1]="CORD",u[u.STRING_PIECE=2]="STRING_PIECE"})(be||(be={})),w.util.setEnumType(be,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]);var Se;(function(u){u[u.JS_NORMAL=0]="JS_NORMAL",u[u.JS_STRING=1]="JS_STRING",u[u.JS_NUMBER=2]="JS_NUMBER"})(Se||(Se={})),w.util.setEnumType(Se,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]);var Pe;(function(u){u[u.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",u[u.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",u[u.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(Pe||(Pe={})),w.util.setEnumType(Pe,"google.protobuf.FieldOptions.OptionRetention",[{no:0,name:"RETENTION_UNKNOWN"},{no:1,name:"RETENTION_RUNTIME"},{no:2,name:"RETENTION_SOURCE"}]);var Ye;(function(u){u[u.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",u[u.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",u[u.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",u[u.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",u[u.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",u[u.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",u[u.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",u[u.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",u[u.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",u[u.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(Ye||(Ye={})),w.util.setEnumType(Ye,"google.protobuf.FieldOptions.OptionTargetType",[{no:0,name:"TARGET_TYPE_UNKNOWN"},{no:1,name:"TARGET_TYPE_FILE"},{no:2,name:"TARGET_TYPE_EXTENSION_RANGE"},{no:3,name:"TARGET_TYPE_MESSAGE"},{no:4,name:"TARGET_TYPE_FIELD"},{no:5,name:"TARGET_TYPE_ONEOF"},{no:6,name:"TARGET_TYPE_ENUM"},{no:7,name:"TARGET_TYPE_ENUM_ENTRY"},{no:8,name:"TARGET_TYPE_SERVICE"},{no:9,name:"TARGET_TYPE_METHOD"}]);class Ce extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new Ce().fromBinary(s,c)}static fromJson(s,c){return new Ce().fromJson(s,c)}static fromJsonString(s,c){return new Ce().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Ce,s,c)}}Ce.runtime=w,Ce.typeName="google.protobuf.FieldOptions.EditionDefault",Ce.fields=w.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:w.getEnumType(pe),opt:!0},{no:2,name:"value",kind:"scalar",T:9,opt:!0}]);class He extends ue.v{constructor(s){super(),this.uninterpretedOption=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new He().fromBinary(s,c)}static fromJson(s,c){return new He().fromJson(s,c)}static fromJsonString(s,c){return new He().fromJsonString(s,c)}static equals(s,c){return w.util.equals(He,s,c)}}He.runtime=w,He.typeName="google.protobuf.OneofOptions",He.fields=w.util.newFieldList(()=>[{no:1,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class Ze extends ue.v{constructor(s){super(),this.uninterpretedOption=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new Ze().fromBinary(s,c)}static fromJson(s,c){return new Ze().fromJson(s,c)}static fromJsonString(s,c){return new Ze().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Ze,s,c)}}Ze.runtime=w,Ze.typeName="google.protobuf.EnumOptions",Ze.fields=w.util.newFieldList(()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:7,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class kt extends ue.v{constructor(s){super(),this.uninterpretedOption=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new kt().fromBinary(s,c)}static fromJson(s,c){return new kt().fromJson(s,c)}static fromJsonString(s,c){return new kt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(kt,s,c)}}kt.runtime=w,kt.typeName="google.protobuf.EnumValueOptions",kt.fields=w.util.newFieldList(()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"features",kind:"message",T:tt,opt:!0},{no:3,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class Yt extends ue.v{constructor(s){super(),this.uninterpretedOption=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new Yt().fromBinary(s,c)}static fromJson(s,c){return new Yt().fromJson(s,c)}static fromJsonString(s,c){return new Yt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Yt,s,c)}}Yt.runtime=w,Yt.typeName="google.protobuf.ServiceOptions",Yt.fields=w.util.newFieldList(()=>[{no:34,name:"features",kind:"message",T:tt,opt:!0},{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class Ct extends ue.v{constructor(s){super(),this.uninterpretedOption=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new Ct().fromBinary(s,c)}static fromJson(s,c){return new Ct().fromJson(s,c)}static fromJsonString(s,c){return new Ct().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Ct,s,c)}}Ct.runtime=w,Ct.typeName="google.protobuf.MethodOptions",Ct.fields=w.util.newFieldList(()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:w.getEnumType(Wt),opt:!0,default:Wt.IDEMPOTENCY_UNKNOWN},{no:35,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);var Wt;(function(u){u[u.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",u[u.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",u[u.IDEMPOTENT=2]="IDEMPOTENT"})(Wt||(Wt={})),w.util.setEnumType(Wt,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class qe extends ue.v{constructor(s){super(),this.name=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new qe().fromBinary(s,c)}static fromJson(s,c){return new qe().fromJson(s,c)}static fromJsonString(s,c){return new qe().fromJsonString(s,c)}static equals(s,c){return w.util.equals(qe,s,c)}}qe.runtime=w,qe.typeName="google.protobuf.UninterpretedOption",qe.fields=w.util.newFieldList(()=>[{no:2,name:"name",kind:"message",T:ct,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]);class ct extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new ct().fromBinary(s,c)}static fromJson(s,c){return new ct().fromJson(s,c)}static fromJsonString(s,c){return new ct().fromJsonString(s,c)}static equals(s,c){return w.util.equals(ct,s,c)}}ct.runtime=w,ct.typeName="google.protobuf.UninterpretedOption.NamePart",ct.fields=w.util.newFieldList(()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]);class tt extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new tt().fromBinary(s,c)}static fromJson(s,c){return new tt().fromJson(s,c)}static fromJsonString(s,c){return new tt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(tt,s,c)}}tt.runtime=w,tt.typeName="google.protobuf.FeatureSet",tt.fields=w.util.newFieldList(()=>[{no:1,name:"field_presence",kind:"enum",T:w.getEnumType(nr),opt:!0},{no:2,name:"enum_type",kind:"enum",T:w.getEnumType(pr),opt:!0},{no:3,name:"repeated_field_encoding",kind:"enum",T:w.getEnumType(zt),opt:!0},{no:4,name:"utf8_validation",kind:"enum",T:w.getEnumType(yr),opt:!0},{no:5,name:"message_encoding",kind:"enum",T:w.getEnumType(Tr),opt:!0},{no:6,name:"json_format",kind:"enum",T:w.getEnumType(vr),opt:!0}]);var nr;(function(u){u[u.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",u[u.EXPLICIT=1]="EXPLICIT",u[u.IMPLICIT=2]="IMPLICIT",u[u.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(nr||(nr={})),w.util.setEnumType(nr,"google.protobuf.FeatureSet.FieldPresence",[{no:0,name:"FIELD_PRESENCE_UNKNOWN"},{no:1,name:"EXPLICIT"},{no:2,name:"IMPLICIT"},{no:3,name:"LEGACY_REQUIRED"}]);var pr;(function(u){u[u.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",u[u.OPEN=1]="OPEN",u[u.CLOSED=2]="CLOSED"})(pr||(pr={})),w.util.setEnumType(pr,"google.protobuf.FeatureSet.EnumType",[{no:0,name:"ENUM_TYPE_UNKNOWN"},{no:1,name:"OPEN"},{no:2,name:"CLOSED"}]);var zt;(function(u){u[u.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",u[u.PACKED=1]="PACKED",u[u.EXPANDED=2]="EXPANDED"})(zt||(zt={})),w.util.setEnumType(zt,"google.protobuf.FeatureSet.RepeatedFieldEncoding",[{no:0,name:"REPEATED_FIELD_ENCODING_UNKNOWN"},{no:1,name:"PACKED"},{no:2,name:"EXPANDED"}]);var yr;(function(u){u[u.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",u[u.NONE=1]="NONE",u[u.VERIFY=2]="VERIFY"})(yr||(yr={})),w.util.setEnumType(yr,"google.protobuf.FeatureSet.Utf8Validation",[{no:0,name:"UTF8_VALIDATION_UNKNOWN"},{no:1,name:"NONE"},{no:2,name:"VERIFY"}]);var Tr;(function(u){u[u.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",u[u.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",u[u.DELIMITED=2]="DELIMITED"})(Tr||(Tr={})),w.util.setEnumType(Tr,"google.protobuf.FeatureSet.MessageEncoding",[{no:0,name:"MESSAGE_ENCODING_UNKNOWN"},{no:1,name:"LENGTH_PREFIXED"},{no:2,name:"DELIMITED"}]);var vr;(function(u){u[u.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",u[u.ALLOW=1]="ALLOW",u[u.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(vr||(vr={})),w.util.setEnumType(vr,"google.protobuf.FeatureSet.JsonFormat",[{no:0,name:"JSON_FORMAT_UNKNOWN"},{no:1,name:"ALLOW"},{no:2,name:"LEGACY_BEST_EFFORT"}]);class ne extends ue.v{constructor(s){super(),this.defaults=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new ne().fromBinary(s,c)}static fromJson(s,c){return new ne().fromJson(s,c)}static fromJsonString(s,c){return new ne().fromJsonString(s,c)}static equals(s,c){return w.util.equals(ne,s,c)}}ne.runtime=w,ne.typeName="google.protobuf.FeatureSetDefaults",ne.fields=w.util.newFieldList(()=>[{no:1,name:"defaults",kind:"message",T:pt,repeated:!0},{no:4,name:"minimum_edition",kind:"enum",T:w.getEnumType(pe),opt:!0},{no:5,name:"maximum_edition",kind:"enum",T:w.getEnumType(pe),opt:!0}]);class pt extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new pt().fromBinary(s,c)}static fromJson(s,c){return new pt().fromJson(s,c)}static fromJsonString(s,c){return new pt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(pt,s,c)}}pt.runtime=w,pt.typeName="google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault",pt.fields=w.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:w.getEnumType(pe),opt:!0},{no:2,name:"features",kind:"message",T:tt,opt:!0}]);class je extends ue.v{constructor(s){super(),this.location=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new je().fromBinary(s,c)}static fromJson(s,c){return new je().fromJson(s,c)}static fromJsonString(s,c){return new je().fromJsonString(s,c)}static equals(s,c){return w.util.equals(je,s,c)}}je.runtime=w,je.typeName="google.protobuf.SourceCodeInfo",je.fields=w.util.newFieldList(()=>[{no:1,name:"location",kind:"message",T:rt,repeated:!0}]);class rt extends ue.v{constructor(s){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new rt().fromBinary(s,c)}static fromJson(s,c){return new rt().fromJson(s,c)}static fromJsonString(s,c){return new rt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(rt,s,c)}}rt.runtime=w,rt.typeName="google.protobuf.SourceCodeInfo.Location",rt.fields=w.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]);class dn extends ue.v{constructor(s){super(),this.annotation=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new dn().fromBinary(s,c)}static fromJson(s,c){return new dn().fromJson(s,c)}static fromJsonString(s,c){return new dn().fromJsonString(s,c)}static equals(s,c){return w.util.equals(dn,s,c)}}dn.runtime=w,dn.typeName="google.protobuf.GeneratedCodeInfo",dn.fields=w.util.newFieldList(()=>[{no:1,name:"annotation",kind:"message",T:hn,repeated:!0}]);class hn extends ue.v{constructor(s){super(),this.path=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new hn().fromBinary(s,c)}static fromJson(s,c){return new hn().fromJson(s,c)}static fromJsonString(s,c){return new hn().fromJsonString(s,c)}static equals(s,c){return w.util.equals(hn,s,c)}}hn.runtime=w,hn.typeName="google.protobuf.GeneratedCodeInfo.Annotation",hn.fields=w.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0},{no:5,name:"semantic",kind:"enum",T:w.getEnumType(rr),opt:!0}]);var rr;(function(u){u[u.NONE=0]="NONE",u[u.SET=1]="SET",u[u.ALIAS=2]="ALIAS"})(rr||(rr={})),w.util.setEnumType(rr,"google.protobuf.GeneratedCodeInfo.Annotation.Semantic",[{no:0,name:"NONE"},{no:1,name:"SET"},{no:2,name:"ALIAS"}]);function Wn(u,s){const c=u.values.find(N=>N.name===s);return(0,L.hu)(c,`cannot parse ${u.name} default value: ${s}`),c.number}function sn(u,s){switch(u){case T.w.STRING:return s;case T.w.BYTES:{const c=We(s);if(c===!1)throw new Error(`cannot parse ${T.w[u]} default value: ${s}`);return c}case T.w.INT64:case T.w.SFIXED64:case T.w.SINT64:return C.q.parse(s);case T.w.UINT64:case T.w.FIXED64:return C.q.uParse(s);case T.w.DOUBLE:case T.w.FLOAT:switch(s){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(s)}case T.w.BOOL:return s==="true";case T.w.INT32:case T.w.UINT32:case T.w.SINT32:case T.w.FIXED32:case T.w.SFIXED32:return parseInt(s,10)}}function We(u){const s=[],c={tail:u,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(N){if(this.tail.length>=N){const A=this.tail.substring(0,N);return this.tail=this.tail.substring(N),A}return!1}};for(;c.next();)switch(c.c){case"\\":if(c.next())switch(c.c){case"\\":s.push(c.c.charCodeAt(0));break;case"b":s.push(8);break;case"f":s.push(12);break;case"n":s.push(10);break;case"r":s.push(13);break;case"t":s.push(9);break;case"v":s.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const N=c.c,A=c.take(2);if(A===!1)return!1;const x=parseInt(N+A,8);if(isNaN(x))return!1;s.push(x);break}case"x":{const N=c.c,A=c.take(2);if(A===!1)return!1;const x=parseInt(N+A,16);if(isNaN(x))return!1;s.push(x);break}case"u":{const N=c.c,A=c.take(4);if(A===!1)return!1;const x=parseInt(N+A,16);if(isNaN(x))return!1;const F=new Uint8Array(4);new DataView(F.buffer).setInt32(0,x,!0),s.push(F[0],F[1],F[2],F[3]);break}case"U":{const N=c.c,A=c.take(8);if(A===!1)return!1;const x=C.q.uEnc(N+A),F=new Uint8Array(8),Z=new DataView(F.buffer);Z.setInt32(0,x.lo,!0),Z.setInt32(4,x.hi,!0),s.push(F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7]);break}}break;default:s.push(c.c.charCodeAt(0))}return new Uint8Array(s)}const Br=ne.fromBinary(z.W.dec("ChESDAgBEAIYAiABKAEwAhjmBwoREgwIAhABGAEgAigBMAEY5wcKERIMCAEQARgBIAIoATABGOgHIOYHKOgH"));function as(u){const s=u.minimumEdition,c=u.maximumEdition;if(s===void 0||c===void 0||u.defaults.some(A=>A.edition===void 0))throw new Error("Invalid FeatureSetDefaults");const N=new Map;return(A,...x)=>{var F,Z;let V=N.get(A);if(V===void 0){if(A<s)throw new Error(`Edition ${pe[A]} is earlier than the minimum supported edition ${pe[s]}`);if(c<A)throw new Error(`Edition ${pe[A]} is later than the maximum supported edition ${pe[c]}`);let ye;for(const Oe of u.defaults){const at=(F=Oe.edition)!==null&&F!==void 0?F:0;at>A||ye!==void 0&&ye.e>at||(ye={e:at,f:(Z=Oe.features)!==null&&Z!==void 0?Z:new tt})}if(ye===void 0)throw new Error(`No valid default found for edition ${pe[A]}`);V=ye.f.toBinary(),N.set(A,V)}const he=tt.fromBinary(V);for(const ye of x)ye!==void 0&&he.fromBinary(ye.toBinary());if(!mn(he))throw new Error(`Invalid FeatureSet for edition ${pe[A]}`);return he}}function mn(u){for(const s of tt.fields.list()){const c=u[s.localName];if(c===void 0||s.kind=="enum"&&c===0)return!1}return!0}function cs(u,s){var c;const N={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map,resolveFeatures:as((c=s==null?void 0:s.featureSetDefaults)!==null&&c!==void 0?c:Br)},x=(u instanceof ke?u.file:u instanceof Uint8Array?ke.fromBinary(u).file:u).map(F=>gi(F,N));return Object.assign({files:x},N)}function gi(u,s){var c,N;(0,L.hu)(u.name,"invalid FileDescriptorProto: missing name");const A=Object.assign(Object.assign({kind:"file",proto:u,deprecated:(N=(c=u.options)===null||c===void 0?void 0:c.deprecated)!==null&&N!==void 0?N:!1},Os(u.syntax,u.edition)),{name:u.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return Bt(this.proto.sourceCodeInfo,[Et.FileDescriptorProto_Syntax])},getPackageComments(){return Bt(this.proto.sourceCodeInfo,[Et.FileDescriptorProto_Package])},getFeatures(){var x;return s.resolveFeatures(this.edition,(x=this.proto.options)===null||x===void 0?void 0:x.features)}});s.mapEntries.clear();for(const x of u.enumType)us(x,A,void 0,s);for(const x of u.messageType)ls(x,A,void 0,s);for(const x of u.service)gn(x,A,s);Mn(A,s);for(const x of s.mapEntries.values())Mr(x,s);for(const x of A.messages)Mr(x,s),Mn(x,s);return s.mapEntries.clear(),A}function Mn(u,s){switch(u.kind){case"file":for(const c of u.proto.extension){const N=Fr(c,u,void 0,s);u.extensions.push(N),s.extensions.set(N.typeName,N)}break;case"message":for(const c of u.proto.extension){const N=Fr(c,u.file,u,s);u.nestedExtensions.push(N),s.extensions.set(N.typeName,N)}for(const c of u.nestedMessages)Mn(c,s);break}}function Mr(u,s){const c=u.proto.oneofDecl.map(A=>sr(A,u,s)),N=new Set;for(const A of u.proto.field){const x=Ot(A,c),F=fs(A,u.file,u,x,s);u.fields.push(F),x===void 0?u.members.push(F):(x.fields.push(F),N.has(x)||(N.add(x),u.members.push(x)))}for(const A of c.filter(x=>N.has(x)))u.oneofs.push(A);for(const A of u.nestedMessages)Mr(A,s)}function us(u,s,c,N){var A,x,F;(0,L.hu)(u.name,"invalid EnumDescriptorProto: missing name");const Z={kind:"enum",proto:u,deprecated:(x=(A=u.options)===null||A===void 0?void 0:A.deprecated)!==null&&x!==void 0?x:!1,file:s,parent:c,name:u.name,typeName:wr(u,c,s),values:[],sharedPrefix:(0,O.Sm)(u.name,u.value.map(V=>{var he;return(he=V.name)!==null&&he!==void 0?he:""})),toString(){return`enum ${this.typeName}`},getComments(){const V=this.parent?[...this.parent.getComments().sourcePath,Et.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[Et.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,V)},getFeatures(){var V,he,ye;const Oe=(he=(V=this.parent)===null||V===void 0?void 0:V.getFeatures())!==null&&he!==void 0?he:this.file.getFeatures();return N.resolveFeatures(this.file.edition,Oe,(ye=this.proto.options)===null||ye===void 0?void 0:ye.features)}};N.enums.set(Z.typeName,Z),u.value.forEach(V=>{var he,ye;(0,L.hu)(V.name,"invalid EnumValueDescriptorProto: missing name"),(0,L.hu)(V.number!==void 0,"invalid EnumValueDescriptorProto: missing number"),Z.values.push({kind:"enum_value",proto:V,deprecated:(ye=(he=V.options)===null||he===void 0?void 0:he.deprecated)!==null&&ye!==void 0?ye:!1,parent:Z,name:V.name,number:V.number,toString(){return`enum value ${Z.typeName}.${this.name}`},declarationString(){var Oe;let at=`${this.name} = ${this.number}`;return((Oe=this.proto.options)===null||Oe===void 0?void 0:Oe.deprecated)===!0&&(at+=" [deprecated = true]"),at},getComments(){const Oe=[...this.parent.getComments().sourcePath,Et.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,Oe)},getFeatures(){var Oe;return N.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(Oe=this.proto.options)===null||Oe===void 0?void 0:Oe.features)}})}),((F=c==null?void 0:c.nestedEnums)!==null&&F!==void 0?F:s.enums).push(Z)}function ls(u,s,c,N){var A,x,F,Z;(0,L.hu)(u.name,"invalid DescriptorProto: missing name");const V={kind:"message",proto:u,deprecated:(x=(A=u.options)===null||A===void 0?void 0:A.deprecated)!==null&&x!==void 0?x:!1,file:s,parent:c,name:u.name,typeName:wr(u,c,s),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const he=this.parent?[...this.parent.getComments().sourcePath,Et.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[Et.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,he)},getFeatures(){var he,ye,Oe;const at=(ye=(he=this.parent)===null||he===void 0?void 0:he.getFeatures())!==null&&ye!==void 0?ye:this.file.getFeatures();return N.resolveFeatures(this.file.edition,at,(Oe=this.proto.options)===null||Oe===void 0?void 0:Oe.features)}};((F=u.options)===null||F===void 0?void 0:F.mapEntry)===!0?N.mapEntries.set(V.typeName,V):(((Z=c==null?void 0:c.nestedMessages)!==null&&Z!==void 0?Z:s.messages).push(V),N.messages.set(V.typeName,V));for(const he of u.enumType)us(he,s,V,N);for(const he of u.nestedType)ls(he,s,V,N)}function gn(u,s,c){var N,A;(0,L.hu)(u.name,"invalid ServiceDescriptorProto: missing name");const x={kind:"service",proto:u,deprecated:(A=(N=u.options)===null||N===void 0?void 0:N.deprecated)!==null&&A!==void 0?A:!1,file:s,name:u.name,typeName:wr(u,void 0,s),methods:[],toString(){return`service ${this.typeName}`},getComments(){const F=[Et.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,F)},getFeatures(){var F;return c.resolveFeatures(this.file.edition,this.file.getFeatures(),(F=this.proto.options)===null||F===void 0?void 0:F.features)}};s.services.push(x),c.services.set(x.typeName,x);for(const F of u.method)x.methods.push(Pn(F,x,c))}function Pn(u,s,c){var N,A,x;(0,L.hu)(u.name,"invalid MethodDescriptorProto: missing name"),(0,L.hu)(u.inputType,"invalid MethodDescriptorProto: missing input_type"),(0,L.hu)(u.outputType,"invalid MethodDescriptorProto: missing output_type");let F;u.clientStreaming===!0&&u.serverStreaming===!0?F=De.t.BiDiStreaming:u.clientStreaming===!0?F=De.t.ClientStreaming:u.serverStreaming===!0?F=De.t.ServerStreaming:F=De.t.Unary;let Z;switch((N=u.options)===null||N===void 0?void 0:N.idempotencyLevel){case Wt.IDEMPOTENT:Z=De.w.Idempotent;break;case Wt.NO_SIDE_EFFECTS:Z=De.w.NoSideEffects;break;case Wt.IDEMPOTENCY_UNKNOWN:case void 0:Z=void 0;break}const V=c.messages.get(bt(u.inputType)),he=c.messages.get(bt(u.outputType));(0,L.hu)(V,`invalid MethodDescriptorProto: input_type ${u.inputType} not found`),(0,L.hu)(he,`invalid MethodDescriptorProto: output_type ${u.inputType} not found`);const ye=u.name;return{kind:"rpc",proto:u,deprecated:(x=(A=u.options)===null||A===void 0?void 0:A.deprecated)!==null&&x!==void 0?x:!1,parent:s,name:ye,methodKind:F,input:V,output:he,idempotency:Z,toString(){return`rpc ${s.typeName}.${ye}`},getComments(){const Oe=[...this.parent.getComments().sourcePath,Et.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return Bt(s.file.proto.sourceCodeInfo,Oe)},getFeatures(){var Oe;return c.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(Oe=this.proto.options)===null||Oe===void 0?void 0:Oe.features)}}}function sr(u,s,c){return(0,L.hu)(u.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:u,deprecated:!1,parent:s,fields:[],name:u.name,toString(){return`oneof ${s.typeName}.${this.name}`},getComments(){const N=[...this.parent.getComments().sourcePath,Et.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return Bt(s.file.proto.sourceCodeInfo,N)},getFeatures(){var N;return c.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(N=this.proto.options)===null||N===void 0?void 0:N.features)}}}function fs(u,s,c,N,A){var x,F,Z;(0,L.hu)(u.name,"invalid FieldDescriptorProto: missing name"),(0,L.hu)(u.number,"invalid FieldDescriptorProto: missing number"),(0,L.hu)(u.type,"invalid FieldDescriptorProto: missing type");const V={proto:u,deprecated:(F=(x=u.options)===null||x===void 0?void 0:x.deprecated)!==null&&F!==void 0?F:!1,name:u.name,number:u.number,parent:c,oneof:N,optional:Re(u,s.syntax),packedByDefault:Me(s,u,A.resolveFeatures),packed:In(s,c,u,A.resolveFeatures),jsonName:u.jsonName===(0,O.x1)(u.name)?void 0:u.jsonName,scalar:void 0,longType:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,declarationString:pn,toString(){return`field ${this.parent.typeName}.${this.name}`},getComments(){const ye=[...this.parent.getComments().sourcePath,Et.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,ye)},getFeatures(){var ye;return A.resolveFeatures(s.edition,this.parent.getFeatures(),(ye=this.proto.options)===null||ye===void 0?void 0:ye.features)}},he=u.label===_.REPEATED;switch(u.type){case I.MESSAGE:case I.GROUP:{(0,L.hu)(u.typeName,"invalid FieldDescriptorProto: missing type_name");const ye=A.mapEntries.get(bt(u.typeName));if(ye!==void 0)return(0,L.hu)(he,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},V),{kind:"field",fieldKind:"map",repeated:!1}),de(ye));const Oe=A.messages.get(bt(u.typeName));return(0,L.hu)(Oe!==void 0,`invalid FieldDescriptorProto: type_name ${u.typeName} not found`),Object.assign(Object.assign({},V),{kind:"field",fieldKind:"message",repeated:he,message:Oe})}case I.ENUM:{(0,L.hu)(u.typeName,"invalid FieldDescriptorProto: missing type_name");const ye=A.enums.get(bt(u.typeName));return(0,L.hu)(ye!==void 0,`invalid FieldDescriptorProto: type_name ${u.typeName} not found`),Object.assign(Object.assign({},V),{kind:"field",fieldKind:"enum",getDefaultValue:Jr,repeated:he,enum:ye})}default:{const ye=Ps[u.type];return(0,L.hu)(ye,`invalid FieldDescriptorProto: unknown type ${u.type}`),Object.assign(Object.assign({},V),{kind:"field",fieldKind:"scalar",getDefaultValue:Jr,repeated:he,scalar:ye,longType:((Z=u.options)===null||Z===void 0?void 0:Z.jstype)==Se.JS_STRING?T.p.STRING:T.p.BIGINT})}}}function Fr(u,s,c,N){(0,L.hu)(u.extendee,"invalid FieldDescriptorProto: missing extendee");const A=fs(u,s,null,void 0,N),x=N.messages.get(bt(u.extendee));return(0,L.hu)(x,`invalid FieldDescriptorProto: extendee ${u.extendee} not found`),Object.assign(Object.assign({},A),{kind:"extension",typeName:wr(u,c,s),parent:c,file:s,extendee:x,toString(){return`extension ${this.typeName}`},getComments(){const F=this.parent?[...this.parent.getComments().sourcePath,Et.DescriptorProto_Extension,this.parent.proto.extension.indexOf(u)]:[Et.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(u)];return Bt(s.proto.sourceCodeInfo,F)},getFeatures(){var F,Z;return N.resolveFeatures(this.file.edition,((F=this.parent)!==null&&F!==void 0?F:this.file).getFeatures(),(Z=this.proto.options)===null||Z===void 0?void 0:Z.features)}})}function Os(u,s){let c,N;switch(u){case void 0:case"proto2":N="proto2",c=pe.EDITION_PROTO2;break;case"proto3":N="proto3",c=pe.EDITION_PROTO3;break;case"editions":switch(N="editions",s){case void 0:case pe.EDITION_1_TEST_ONLY:case pe.EDITION_2_TEST_ONLY:case pe.EDITION_99997_TEST_ONLY:case pe.EDITION_99998_TEST_ONLY:case pe.EDITION_99999_TEST_ONLY:case pe.EDITION_UNKNOWN:c=pe.EDITION_UNKNOWN;break;default:c=s;break}break;default:throw new Error(`invalid FileDescriptorProto: unsupported syntax: ${u}`)}if(u==="editions"&&s===pe.EDITION_UNKNOWN)throw new Error(`invalid FileDescriptorProto: syntax ${u} cannot have edition ${String(s)}`);return{syntax:N,edition:c}}function wr(u,s,c){(0,L.hu)(u.name,`invalid ${u.getType().typeName}: missing name`);let N;return s?N=`${s.typeName}.${u.name}`:c.proto.package!==void 0?N=`${c.proto.package}.${u.name}`:N=`${u.name}`,N}function bt(u){return u.startsWith(".")?u.substring(1):u}function de(u){var s,c;(0,L.hu)((s=u.proto.options)===null||s===void 0?void 0:s.mapEntry,`invalid DescriptorProto: expected ${u.toString()} to be a map entry`),(0,L.hu)(u.fields.length===2,`invalid DescriptorProto: map entry ${u.toString()} has ${u.fields.length} fields`);const N=u.fields.find(F=>F.proto.number===1);(0,L.hu)(N,`invalid DescriptorProto: map entry ${u.toString()} is missing key field`);const A=N.scalar;(0,L.hu)(A!==void 0&&A!==T.w.BYTES&&A!==T.w.FLOAT&&A!==T.w.DOUBLE,`invalid DescriptorProto: map entry ${u.toString()} has unexpected key type ${(c=N.proto.type)!==null&&c!==void 0?c:-1}`);const x=u.fields.find(F=>F.proto.number===2);switch((0,L.hu)(x,`invalid DescriptorProto: map entry ${u.toString()} is missing value field`),x.fieldKind){case"scalar":return{mapKey:A,mapValue:Object.assign(Object.assign({},x),{kind:"scalar"})};case"message":return{mapKey:A,mapValue:Object.assign(Object.assign({},x),{kind:"message"})};case"enum":return{mapKey:A,mapValue:Object.assign(Object.assign({},x),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}function Ot(u,s){var c;const N=u.oneofIndex;if(N===void 0)return;let A;return u.proto3Optional!==!0&&(A=s[N],(0,L.hu)(A,`invalid FieldDescriptorProto: oneof #${N} for field #${(c=u.number)!==null&&c!==void 0?c:-1} not found`)),A}function Re(u,s){switch(s){case"proto2":return u.oneofIndex===void 0&&u.label===_.OPTIONAL;case"proto3":return u.proto3Optional===!0;case"editions":return!1}}function Me(u,s,c){const{repeatedFieldEncoding:N}=c(u.edition);if(N!=zt.PACKED)return!1;switch(s.type){case I.STRING:case I.BYTES:case I.GROUP:case I.MESSAGE:return!1;default:return!0}}function In(u,s,c,N){var A,x,F,Z,V,he;switch(c.type){case I.STRING:case I.BYTES:case I.GROUP:case I.MESSAGE:return!1;default:switch(u.edition){case pe.EDITION_PROTO2:return(x=(A=c.options)===null||A===void 0?void 0:A.packed)!==null&&x!==void 0?x:!1;case pe.EDITION_PROTO3:return(Z=(F=c.options)===null||F===void 0?void 0:F.packed)!==null&&Z!==void 0?Z:!0;default:{const{repeatedFieldEncoding:ye}=N(u.edition,(V=s==null?void 0:s.getFeatures())!==null&&V!==void 0?V:u.getFeatures(),(he=c.options)===null||he===void 0?void 0:he.features);return ye==zt.PACKED}}}}const Ps={[I.DOUBLE]:T.w.DOUBLE,[I.FLOAT]:T.w.FLOAT,[I.INT64]:T.w.INT64,[I.UINT64]:T.w.UINT64,[I.INT32]:T.w.INT32,[I.FIXED64]:T.w.FIXED64,[I.FIXED32]:T.w.FIXED32,[I.BOOL]:T.w.BOOL,[I.STRING]:T.w.STRING,[I.GROUP]:void 0,[I.MESSAGE]:void 0,[I.BYTES]:T.w.BYTES,[I.UINT32]:T.w.UINT32,[I.ENUM]:void 0,[I.SFIXED32]:T.w.SFIXED32,[I.SFIXED64]:T.w.SFIXED64,[I.SINT32]:T.w.SINT32,[I.SINT64]:T.w.SINT64};function Bt(u,s){if(!u)return{leadingDetached:[],sourcePath:s};for(const c of u.location)if(c.path.length===s.length&&!c.path.some((N,A)=>s[A]!==N))return{leadingDetached:c.leadingDetachedComments,leading:c.leadingComments,trailing:c.trailingComments,sourcePath:s};return{leadingDetached:[],sourcePath:s}}var Et;(function(u){u[u.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",u[u.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",u[u.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",u[u.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",u[u.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",u[u.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",u[u.DescriptorProto_Field=2]="DescriptorProto_Field",u[u.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",u[u.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",u[u.DescriptorProto_Extension=6]="DescriptorProto_Extension",u[u.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",u[u.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",u[u.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"})(Et||(Et={}));function pn(){var u,s,c;const N=[];this.repeated&&N.push("repeated"),this.optional&&N.push("optional"),(this.kind==="extension"?this.file:this.parent.file).syntax=="proto2"&&this.proto.label===_.REQUIRED&&N.push("required");let x;switch(this.fieldKind){case"scalar":x=T.w[this.scalar].toLowerCase();break;case"enum":x=this.enum.typeName;break;case"message":x=this.message.typeName;break;case"map":{const V=T.w[this.mapKey].toLowerCase();let he;switch(this.mapValue.kind){case"scalar":he=T.w[this.mapValue.scalar].toLowerCase();break;case"enum":he=this.mapValue.enum.typeName;break;case"message":he=this.mapValue.message.typeName;break}x=`map<${V}, ${he}>`;break}}N.push(`${x} ${this.name} = ${this.number}`);const F=[];((u=this.proto.options)===null||u===void 0?void 0:u.packed)!==void 0&&F.push(`packed = ${this.proto.options.packed.toString()}`);let Z=this.proto.defaultValue;return Z!==void 0&&((this.proto.type==I.BYTES||this.proto.type==I.STRING)&&(Z='"'+Z.replace('"','\\"')+'"'),F.push(`default = ${Z}`)),this.jsonName!==void 0&&F.push(`json_name = "${this.jsonName}"`),((s=this.proto.options)===null||s===void 0?void 0:s.jstype)!==void 0&&F.push(`jstype = ${Se[this.proto.options.jstype]}`),((c=this.proto.options)===null||c===void 0?void 0:c.deprecated)===!0&&F.push("deprecated = true"),F.length>0&&N.push("["+F.join(", ")+"]"),N.join(" ")}function Jr(){const u=this.proto.defaultValue;if(u!==void 0)switch(this.fieldKind){case"enum":return Wn(this.enum,u);case"scalar":return sn(this.scalar,u);default:return}}function _s(...u){const s={},c={},N={},A={add(x){if("fields"in x){if(!this.findMessage(x.typeName)){s[x.typeName]=x;for(const F of x.fields.list())F.kind=="message"?this.add(F.T):F.kind=="map"&&F.V.kind=="message"?this.add(F.V.T):F.kind=="enum"&&this.add(F.T)}}else if("methods"in x){if(!this.findService(x.typeName)){N[x.typeName]=x;for(const F of Object.values(x.methods))this.add(F.I),this.add(F.O)}}else c[x.typeName]=x},findMessage(x){return s[x]},findEnum(x){return c[x]},findService(x){return N[x]}};for(const x of u)A.add(x);return A}class on extends ue.v{constructor(s){super(),this.seconds=C.q.zero,this.nanos=0,d.w.util.initPartial(s,this)}fromJson(s,c){if(typeof s!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${d.w.json.debug(s)}`);const N=s.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!N)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const A=Date.parse(N[1]+"-"+N[2]+"-"+N[3]+"T"+N[4]+":"+N[5]+":"+N[6]+(N[8]?N[8]:"Z"));if(Number.isNaN(A))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(A<Date.parse("0001-01-01T00:00:00Z")||A>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=C.q.parse(A/1e3),this.nanos=0,N[7]&&(this.nanos=parseInt("1"+N[7]+"0".repeat(9-N[7].length))-1e9),this}toJson(s){const c=Number(this.seconds)*1e3;if(c<Date.parse("0001-01-01T00:00:00Z")||c>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let N="Z";if(this.nanos>0){const A=(this.nanos+1e9).toString().substring(1);A.substring(3)==="000000"?N="."+A.substring(0,3)+"Z":A.substring(6)==="000"?N="."+A.substring(0,6)+"Z":N="."+A+"Z"}return new Date(c).toISOString().replace(".000Z",N)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return on.fromDate(new Date)}static fromDate(s){const c=s.getTime();return new on({seconds:C.q.parse(Math.floor(c/1e3)),nanos:c%1e3*1e6})}static fromBinary(s,c){return new on().fromBinary(s,c)}static fromJson(s,c){return new on().fromJson(s,c)}static fromJsonString(s,c){return new on().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(on,s,c)}}on.runtime=d.w,on.typeName="google.protobuf.Timestamp",on.fields=d.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ot extends ue.v{constructor(s){super(),this.seconds=C.q.zero,this.nanos=0,d.w.util.initPartial(s,this)}fromJson(s,c){if(typeof s!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${d.w.json.debug(s)}`);const N=s.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(N===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${d.w.json.debug(s)}`);const A=Number(N[1]);if(A>315576e6||A<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${d.w.json.debug(s)}`);if(this.seconds=C.q.parse(A),typeof N[2]=="string"){const x=N[2]+"0".repeat(9-N[2].length);this.nanos=parseInt(x),(A<0||Object.is(A,-0))&&(this.nanos=-this.nanos)}return this}toJson(s){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let c=this.seconds.toString();if(this.nanos!==0){let N=Math.abs(this.nanos).toString();N="0".repeat(9-N.length)+N,N.substring(3)==="000000"?N=N.substring(0,3):N.substring(6)==="000"&&(N=N.substring(0,6)),c+="."+N,this.nanos<0&&Number(this.seconds)==0&&(c="-"+c)}return c+"s"}static fromBinary(s,c){return new ot().fromBinary(s,c)}static fromJson(s,c){return new ot().fromJson(s,c)}static fromJsonString(s,c){return new ot().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(ot,s,c)}}ot.runtime=d.w,ot.typeName="google.protobuf.Duration",ot.fields=d.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var Ur=g(733);class Sn extends ue.v{constructor(s){super(),d.w.util.initPartial(s,this)}static fromBinary(s,c){return new Sn().fromBinary(s,c)}static fromJson(s,c){return new Sn().fromJson(s,c)}static fromJsonString(s,c){return new Sn().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(Sn,s,c)}}Sn.runtime=d.w,Sn.typeName="google.protobuf.Empty",Sn.fields=d.w.util.newFieldList(()=>[]);class An extends ue.v{constructor(s){super(),this.paths=[],d.w.util.initPartial(s,this)}toJson(s){function c(N){let A=!1;const x=[];for(let F=0;F<N.length;F++){let Z=N.charAt(F);switch(Z){case"_":A=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":x.push(Z),A=!1;break;default:A&&(A=!1,Z=Z.toUpperCase()),x.push(Z);break}}return x.join("")}return this.paths.map(N=>{if(N.match(/_[0-9]?_/g)||N.match(/[A-Z]/g))throw new Error('cannot encode google.protobuf.FieldMask to JSON: lowerCamelCase of path name "'+N+'" is irreversible');return c(N)}).join(",")}fromJson(s,c){if(typeof s!="string")throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+d.w.json.debug(s));if(s==="")return this;function N(A){if(A.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const x=A.replace(/[A-Z]/g,F=>"_"+F.toLowerCase());return x[0]==="_"?x.substring(1):x}return this.paths=s.split(",").map(N),this}static fromBinary(s,c){return new An().fromBinary(s,c)}static fromJson(s,c){return new An().fromJson(s,c)}static fromJsonString(s,c){return new An().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(An,s,c)}}An.runtime=d.w,An.typeName="google.protobuf.FieldMask",An.fields=d.w.util.newFieldList(()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}]);var Mt;(function(u){u[u.NULL_VALUE=0]="NULL_VALUE"})(Mt||(Mt={})),d.w.util.setEnumType(Mt,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class $t extends ue.v{constructor(s){super(),this.fields={},d.w.util.initPartial(s,this)}toJson(s){const c={};for(const[N,A]of Object.entries(this.fields))c[N]=A.toJson(s);return c}fromJson(s,c){if(typeof s!="object"||s==null||Array.isArray(s))throw new Error("cannot decode google.protobuf.Struct from JSON "+d.w.json.debug(s));for(const[N,A]of Object.entries(s))this.fields[N]=ht.fromJson(A);return this}static fromBinary(s,c){return new $t().fromBinary(s,c)}static fromJson(s,c){return new $t().fromJson(s,c)}static fromJsonString(s,c){return new $t().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals($t,s,c)}}$t.runtime=d.w,$t.typeName="google.protobuf.Struct",$t.fields=d.w.util.newFieldList(()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:ht}}]);class ht extends ue.v{constructor(s){super(),this.kind={case:void 0},d.w.util.initPartial(s,this)}toJson(s){switch(this.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(this.kind.value))throw new Error("google.protobuf.Value cannot be NaN or Infinity");return this.kind.value;case"boolValue":return this.kind.value;case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},s),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(s,c){switch(typeof s){case"number":this.kind={case:"numberValue",value:s};break;case"string":this.kind={case:"stringValue",value:s};break;case"boolean":this.kind={case:"boolValue",value:s};break;case"object":s===null?this.kind={case:"nullValue",value:Mt.NULL_VALUE}:Array.isArray(s)?this.kind={case:"listValue",value:Ft.fromJson(s)}:this.kind={case:"structValue",value:$t.fromJson(s)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+d.w.json.debug(s))}return this}static fromBinary(s,c){return new ht().fromBinary(s,c)}static fromJson(s,c){return new ht().fromJson(s,c)}static fromJsonString(s,c){return new ht().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(ht,s,c)}}ht.runtime=d.w,ht.typeName="google.protobuf.Value",ht.fields=d.w.util.newFieldList(()=>[{no:1,name:"null_value",kind:"enum",T:d.w.getEnumType(Mt),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:$t,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:Ft,oneof:"kind"}]);class Ft extends ue.v{constructor(s){super(),this.values=[],d.w.util.initPartial(s,this)}toJson(s){return this.values.map(c=>c.toJson())}fromJson(s,c){if(!Array.isArray(s))throw new Error("cannot decode google.protobuf.ListValue from JSON "+d.w.json.debug(s));for(let N of s)this.values.push(ht.fromJson(N));return this}static fromBinary(s,c){return new Ft().fromBinary(s,c)}static fromJson(s,c){return new Ft().fromJson(s,c)}static fromJsonString(s,c){return new Ft().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(Ft,s,c)}}Ft.runtime=d.w,Ft.typeName="google.protobuf.ListValue",Ft.fields=d.w.util.newFieldList(()=>[{no:1,name:"values",kind:"message",T:ht,repeated:!0}]);var Fn=g(609);class Gt extends ue.v{constructor(s){super(),this.value=0,d.w.util.initPartial(s,this)}toJson(s){return d.w.json.writeScalar(T.w.DOUBLE,this.value,!0)}fromJson(s,c){try{this.value=d.w.json.readScalar(T.w.DOUBLE,s)}catch(N){let A='cannot decode message google.protobuf.DoubleValue from JSON"';throw N instanceof Error&&N.message.length>0&&(A+=`: ${N.message}`),new Error(A)}return this}static fromBinary(s,c){return new Gt().fromBinary(s,c)}static fromJson(s,c){return new Gt().fromJson(s,c)}static fromJsonString(s,c){return new Gt().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(Gt,s,c)}}Gt.runtime=d.w,Gt.typeName="google.protobuf.DoubleValue",Gt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Gt.fieldWrapper={wrapField(u){return new Gt({value:u})},unwrapField(u){return u.value}};class jt extends ue.v{constructor(s){super(),this.value=0,d.w.util.initPartial(s,this)}toJson(s){return d.w.json.writeScalar(T.w.FLOAT,this.value,!0)}fromJson(s,c){try{this.value=d.w.json.readScalar(T.w.FLOAT,s)}catch(N){let A='cannot decode message google.protobuf.FloatValue from JSON"';throw N instanceof Error&&N.message.length>0&&(A+=`: ${N.message}`),new Error(A)}return this}static fromBinary(s,c){return new jt().fromBinary(s,c)}static fromJson(s,c){return new jt().fromJson(s,c)}static fromJsonString(s,c){return new jt().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(jt,s,c)}}jt.runtime=d.w,jt.typeName="google.protobuf.FloatValue",jt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),jt.fieldWrapper={wrapField(u){return new jt({value:u})},unwrapField(u){return u.value}};class xt extends ue.v{constructor(s){super(),this.value=C.q.zero,d.w.util.initPartial(s,this)}toJson(s){return d.w.json.writeScalar(T.w.INT64,this.value,!0)}fromJson(s,c){try{this.value=d.w.json.readScalar(T.w.INT64,s)}catch(N){let A='cannot decode message google.protobuf.Int64Value from JSON"';throw N instanceof Error&&N.message.length>0&&(A+=`: ${N.message}`),new Error(A)}return this}static fromBinary(s,c){return new xt().fromBinary(s,c)}static fromJson(s,c){return new xt().fromJson(s,c)}static fromJsonString(s,c){return new xt().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(xt,s,c)}}xt.runtime=d.w,xt.typeName="google.protobuf.Int64Value",xt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),xt.fieldWrapper={wrapField(u){return new xt({value:u})},unwrapField(u){return u.value}};class st extends ue.v{constructor(s){super(),this.value=C.q.zero,d.w.util.initPartial(s,this)}toJson(s){return d.w.json.writeScalar(T.w.UINT64,this.value,!0)}fromJson(s,c){try{this.value=d.w.json.readScalar(T.w.UINT64,s)}catch(N){let A='cannot decode message google.protobuf.UInt64Value from JSON"';throw N instanceof Error&&N.message.length>0&&(A+=`: ${N.message}`),new Error(A)}return this}static fromBinary(s,c){return new st().fromBinary(s,c)}static fromJson(s,c){return new st().fromJson(s,c)}static fromJsonString(s,c){return new st().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(st,s,c)}}st.runtime=d.w,st.typeName="google.protobuf.UInt64Value",st.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),st.fieldWrapper={wrapField(u){return new st({value:u})},unwrapField(u){return u.value}};class ut extends ue.v{constructor(s){super(),this.value=0,d.w.util.initPartial(s,this)}toJson(s){return d.w.json.writeScalar(T.w.INT32,this.value,!0)}fromJson(s,c){try{this.value=d.w.json.readScalar(T.w.INT32,s)}catch(N){let A='cannot decode message google.protobuf.Int32Value from JSON"';throw N instanceof Error&&N.message.length>0&&(A+=`: ${N.message}`),new Error(A)}return this}static fromBinary(s,c){return new ut().fromBinary(s,c)}static fromJson(s,c){return new ut().fromJson(s,c)}static fromJsonString(s,c){return new ut().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(ut,s,c)}}ut.runtime=d.w,ut.typeName="google.protobuf.Int32Value",ut.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),ut.fieldWrapper={wrapField(u){return new ut({value:u})},unwrapField(u){return u.value}};class mt extends ue.v{constructor(s){super(),this.value=0,d.w.util.initPartial(s,this)}toJson(s){return d.w.json.writeScalar(T.w.UINT32,this.value,!0)}fromJson(s,c){try{this.value=d.w.json.readScalar(T.w.UINT32,s)}catch(N){let A='cannot decode message google.protobuf.UInt32Value from JSON"';throw N instanceof Error&&N.message.length>0&&(A+=`: ${N.message}`),new Error(A)}return this}static fromBinary(s,c){return new mt().fromBinary(s,c)}static fromJson(s,c){return new mt().fromJson(s,c)}static fromJsonString(s,c){return new mt().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(mt,s,c)}}mt.runtime=d.w,mt.typeName="google.protobuf.UInt32Value",mt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),mt.fieldWrapper={wrapField(u){return new mt({value:u})},unwrapField(u){return u.value}};class Ht extends ue.v{constructor(s){super(),this.value=!1,d.w.util.initPartial(s,this)}toJson(s){return d.w.json.writeScalar(T.w.BOOL,this.value,!0)}fromJson(s,c){try{this.value=d.w.json.readScalar(T.w.BOOL,s)}catch(N){let A='cannot decode message google.protobuf.BoolValue from JSON"';throw N instanceof Error&&N.message.length>0&&(A+=`: ${N.message}`),new Error(A)}return this}static fromBinary(s,c){return new Ht().fromBinary(s,c)}static fromJson(s,c){return new Ht().fromJson(s,c)}static fromJsonString(s,c){return new Ht().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(Ht,s,c)}}Ht.runtime=d.w,Ht.typeName="google.protobuf.BoolValue",Ht.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),Ht.fieldWrapper={wrapField(u){return new Ht({value:u})},unwrapField(u){return u.value}};class Rt extends ue.v{constructor(s){super(),this.value="",d.w.util.initPartial(s,this)}toJson(s){return d.w.json.writeScalar(T.w.STRING,this.value,!0)}fromJson(s,c){try{this.value=d.w.json.readScalar(T.w.STRING,s)}catch(N){let A='cannot decode message google.protobuf.StringValue from JSON"';throw N instanceof Error&&N.message.length>0&&(A+=`: ${N.message}`),new Error(A)}return this}static fromBinary(s,c){return new Rt().fromBinary(s,c)}static fromJson(s,c){return new Rt().fromJson(s,c)}static fromJsonString(s,c){return new Rt().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(Rt,s,c)}}Rt.runtime=d.w,Rt.typeName="google.protobuf.StringValue",Rt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),Rt.fieldWrapper={wrapField(u){return new Rt({value:u})},unwrapField(u){return u.value}};class Ee extends ue.v{constructor(s){super(),this.value=new Uint8Array(0),d.w.util.initPartial(s,this)}toJson(s){return d.w.json.writeScalar(T.w.BYTES,this.value,!0)}fromJson(s,c){try{this.value=d.w.json.readScalar(T.w.BYTES,s)}catch(N){let A='cannot decode message google.protobuf.BytesValue from JSON"';throw N instanceof Error&&N.message.length>0&&(A+=`: ${N.message}`),new Error(A)}return this}static fromBinary(s,c){return new Ee().fromBinary(s,c)}static fromJson(s,c){return new Ee().fromJson(s,c)}static fromJsonString(s,c){return new Ee().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(Ee,s,c)}}Ee.runtime=d.w,Ee.typeName="google.protobuf.BytesValue",Ee.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),Ee.fieldWrapper={wrapField(u){return new Ee({value:u})},unwrapField(u){return u.value}};const lt=[Ur.I,ot,Sn,An,$t,ht,Ft,on,ot,Gt,jt,xt,ut,mt,st,Ht,Rt,Ee],$r=[(0,Fn.V3)(Mt)];function br(u,s=!0){const c=u instanceof Uint8Array||u instanceof ke?cs(u):u,N={},A={},x={};if(s){for(const F of lt)A[F.typeName]=F;for(const F of $r)N[F.typeName]=F}return{findEnum(F){const Z=N[F];if(Z)return Z;const V=c.enums.get(F);if(!V)return;const ye=(V.file.syntax=="proto3"?d.w:w).makeEnumType(F,V.values.map(Oe=>({no:Oe.number,name:Oe.name,localName:(0,O.r1)(Oe)})),{});return N[F]=ye,ye},findMessage(F){const Z=A[F];if(Z)return Z;const V=c.messages.get(F);if(!V)return;const he=V.file.syntax=="proto3"?d.w:w,ye=[],Oe=he.makeMessageType(F,()=>ye,{localName:(0,O.r1)(V)});A[F]=Oe;for(const at of V.fields){const xe=Xt(at,this);ye.push(xe)}return Oe},findService(F){const Z=x[F];if(Z)return Z;const V=c.services.get(F);if(!V)return;const he={};for(const ye of V.methods){const Oe=this.findMessage(ye.input.typeName),at=this.findMessage(ye.output.typeName);(0,L.hu)(Oe,`message "${ye.input.typeName}" for ${ye.toString()} not found`),(0,L.hu)(at,`output message "${ye.output.typeName}" for ${ye.toString()} not found`),he[(0,O.r1)(ye)]={name:ye.name,I:Oe,O:at,kind:ye.methodKind,idempotency:ye.idempotency}}return x[F]={typeName:V.typeName,methods:he}}}}function Xt(u,s){switch(u.fieldKind){case"map":return Jn(u,s);case"message":return Er(u,s);case"enum":{const c=Un(u,s);return c.default=u.getDefaultValue(),c}case"scalar":{const c=zn(u);return c.default=u.getDefaultValue(),c}}}function Jn(u,s){const c={kind:"map",no:u.number,name:u.name,jsonName:u.jsonName,K:u.mapKey};if(u.mapValue.message){const N=s.findMessage(u.mapValue.message.typeName);return(0,L.hu)(N,`message "${u.mapValue.message.typeName}" for ${u.toString()} not found`),Object.assign(Object.assign({},c),{V:{kind:"message",T:N}})}if(u.mapValue.enum){const N=s.findEnum(u.mapValue.enum.typeName);return(0,L.hu)(N,`enum "${u.mapValue.enum.typeName}" for ${u.toString()} not found`),Object.assign(Object.assign({},c),{V:{kind:"enum",T:N}})}return Object.assign(Object.assign({},c),{V:{kind:"scalar",T:u.mapValue.scalar}})}function zn(u){const s=u.longType==T.p.STRING?{L:T.p.STRING}:{},c=Object.assign({kind:"scalar",no:u.number,name:u.name,jsonName:u.jsonName,T:u.scalar},s);return u.repeated?Object.assign(Object.assign({},c),{repeated:!0,packed:u.packed,oneof:void 0,T:u.scalar}):u.oneof?Object.assign(Object.assign({},c),{oneof:u.oneof.name}):u.optional?Object.assign(Object.assign({},c),{opt:!0}):c}function Er(u,s){const c=s.findMessage(u.message.typeName);(0,L.hu)(c,`message "${u.message.typeName}" for ${u.toString()} not found`);const N={kind:"message",no:u.number,name:u.name,jsonName:u.jsonName,T:c,delimited:u.proto.type==I.GROUP};return u.repeated?Object.assign(Object.assign({},N),{repeated:!0,packed:u.packed,oneof:void 0}):u.oneof?Object.assign(Object.assign({},N),{oneof:u.oneof.name}):u.optional?Object.assign(Object.assign({},N),{opt:!0}):N}function Un(u,s){const c=s.findEnum(u.enum.typeName);(0,L.hu)(c,`enum "${u.enum.typeName}" for ${u.toString()} not found`);const N={kind:"enum",no:u.number,name:u.name,jsonName:u.jsonName,T:c};return u.repeated?Object.assign(Object.assign({},N),{repeated:!0,packed:u.packed,oneof:void 0}):u.oneof?Object.assign(Object.assign({},N),{oneof:u.oneof.name}):u.optional?Object.assign(Object.assign({},N),{opt:!0}):N}function jr(u){if(!(u instanceof ue.v))return u;const s=u.getType(),c={};for(const N of s.fields.byMember()){const A=u[N.localName];let x;if(N.repeated)x=A.map(F=>yn(F));else if(N.kind=="map"){x={};for(const[F,Z]of Object.entries(A))x[F]=yn(Z)}else N.kind=="oneof"?x=N.findField(A.case)?{case:A.case,value:yn(A.value)}:{case:void 0}:x=yn(A);c[N.localName]=x}return c}function yn(u){if(u===void 0)return u;if(u instanceof ue.v)return jr(u);if(u instanceof Uint8Array){const s=new Uint8Array(u.byteLength);return s.set(u),s}return u}class Zt extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new Zt().fromBinary(s,c)}static fromJson(s,c){return new Zt().fromJson(s,c)}static fromJsonString(s,c){return new Zt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Zt,s,c)}}Zt.runtime=w,Zt.typeName="google.protobuf.compiler.Version",Zt.fields=w.util.newFieldList(()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]);class Qt extends ue.v{constructor(s){super(),this.fileToGenerate=[],this.protoFile=[],this.sourceFileDescriptors=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new Qt().fromBinary(s,c)}static fromJson(s,c){return new Qt().fromJson(s,c)}static fromJsonString(s,c){return new Qt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Qt,s,c)}}Qt.runtime=w,Qt.typeName="google.protobuf.compiler.CodeGeneratorRequest",Qt.fields=w.util.newFieldList(()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:Ge,repeated:!0},{no:17,name:"source_file_descriptors",kind:"message",T:Ge,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:Zt,opt:!0}]);class Nt extends ue.v{constructor(s){super(),this.file=[],w.util.initPartial(s,this)}static fromBinary(s,c){return new Nt().fromBinary(s,c)}static fromJson(s,c){return new Nt().fromJson(s,c)}static fromJsonString(s,c){return new Nt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Nt,s,c)}}Nt.runtime=w,Nt.typeName="google.protobuf.compiler.CodeGeneratorResponse",Nt.fields=w.util.newFieldList(()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:Vt,repeated:!0}]);var $n;(function(u){u[u.NONE=0]="NONE",u[u.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL",u[u.SUPPORTS_EDITIONS=2]="SUPPORTS_EDITIONS"})($n||($n={})),w.util.setEnumType($n,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"},{no:2,name:"FEATURE_SUPPORTS_EDITIONS"}]);class Vt extends ue.v{constructor(s){super(),w.util.initPartial(s,this)}static fromBinary(s,c){return new Vt().fromBinary(s,c)}static fromJson(s,c){return new Vt().fromJson(s,c)}static fromJsonString(s,c){return new Vt().fromJsonString(s,c)}static equals(s,c){return w.util.equals(Vt,s,c)}}Vt.runtime=w,Vt.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",Vt.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:dn,opt:!0}]);class an extends ue.v{constructor(s){super(),this.fileName="",d.w.util.initPartial(s,this)}static fromBinary(s,c){return new an().fromBinary(s,c)}static fromJson(s,c){return new an().fromJson(s,c)}static fromJsonString(s,c){return new an().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(an,s,c)}}an.runtime=d.w,an.typeName="google.protobuf.SourceContext",an.fields=d.w.util.newFieldList(()=>[{no:1,name:"file_name",kind:"scalar",T:9}]);var cn;(function(u){u[u.PROTO2=0]="PROTO2",u[u.PROTO3=1]="PROTO3",u[u.EDITIONS=2]="EDITIONS"})(cn||(cn={})),d.w.util.setEnumType(cn,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"},{no:2,name:"SYNTAX_EDITIONS"}]);class Pt extends ue.v{constructor(s){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=cn.PROTO2,this.edition="",d.w.util.initPartial(s,this)}static fromBinary(s,c){return new Pt().fromBinary(s,c)}static fromJson(s,c){return new Pt().fromJson(s,c)}static fromJsonString(s,c){return new Pt().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(Pt,s,c)}}Pt.runtime=d.w,Pt.typeName="google.protobuf.Type",Pt.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:en,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:_t,repeated:!0},{no:5,name:"source_context",kind:"message",T:an},{no:6,name:"syntax",kind:"enum",T:d.w.getEnumType(cn)},{no:7,name:"edition",kind:"scalar",T:9}]);class en extends ue.v{constructor(s){super(),this.kind=ir.TYPE_UNKNOWN,this.cardinality=or.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",d.w.util.initPartial(s,this)}static fromBinary(s,c){return new en().fromBinary(s,c)}static fromJson(s,c){return new en().fromJson(s,c)}static fromJsonString(s,c){return new en().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(en,s,c)}}en.runtime=d.w,en.typeName="google.protobuf.Field",en.fields=d.w.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:d.w.getEnumType(ir)},{no:2,name:"cardinality",kind:"enum",T:d.w.getEnumType(or)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:_t,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}]);var ir;(function(u){u[u.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",u[u.TYPE_DOUBLE=1]="TYPE_DOUBLE",u[u.TYPE_FLOAT=2]="TYPE_FLOAT",u[u.TYPE_INT64=3]="TYPE_INT64",u[u.TYPE_UINT64=4]="TYPE_UINT64",u[u.TYPE_INT32=5]="TYPE_INT32",u[u.TYPE_FIXED64=6]="TYPE_FIXED64",u[u.TYPE_FIXED32=7]="TYPE_FIXED32",u[u.TYPE_BOOL=8]="TYPE_BOOL",u[u.TYPE_STRING=9]="TYPE_STRING",u[u.TYPE_GROUP=10]="TYPE_GROUP",u[u.TYPE_MESSAGE=11]="TYPE_MESSAGE",u[u.TYPE_BYTES=12]="TYPE_BYTES",u[u.TYPE_UINT32=13]="TYPE_UINT32",u[u.TYPE_ENUM=14]="TYPE_ENUM",u[u.TYPE_SFIXED32=15]="TYPE_SFIXED32",u[u.TYPE_SFIXED64=16]="TYPE_SFIXED64",u[u.TYPE_SINT32=17]="TYPE_SINT32",u[u.TYPE_SINT64=18]="TYPE_SINT64"})(ir||(ir={})),d.w.util.setEnumType(ir,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var or;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.OPTIONAL=1]="OPTIONAL",u[u.REQUIRED=2]="REQUIRED",u[u.REPEATED=3]="REPEATED"})(or||(or={})),d.w.util.setEnumType(or,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class ze extends ue.v{constructor(s){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=cn.PROTO2,this.edition="",d.w.util.initPartial(s,this)}static fromBinary(s,c){return new ze().fromBinary(s,c)}static fromJson(s,c){return new ze().fromJson(s,c)}static fromJsonString(s,c){return new ze().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(ze,s,c)}}ze.runtime=d.w,ze.typeName="google.protobuf.Enum",ze.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:Tn,repeated:!0},{no:3,name:"options",kind:"message",T:_t,repeated:!0},{no:4,name:"source_context",kind:"message",T:an},{no:5,name:"syntax",kind:"enum",T:d.w.getEnumType(cn)},{no:6,name:"edition",kind:"scalar",T:9}]);class Tn extends ue.v{constructor(s){super(),this.name="",this.number=0,this.options=[],d.w.util.initPartial(s,this)}static fromBinary(s,c){return new Tn().fromBinary(s,c)}static fromJson(s,c){return new Tn().fromJson(s,c)}static fromJsonString(s,c){return new Tn().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(Tn,s,c)}}Tn.runtime=d.w,Tn.typeName="google.protobuf.EnumValue",Tn.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:_t,repeated:!0}]);class _t extends ue.v{constructor(s){super(),this.name="",d.w.util.initPartial(s,this)}static fromBinary(s,c){return new _t().fromBinary(s,c)}static fromJson(s,c){return new _t().fromJson(s,c)}static fromJsonString(s,c){return new _t().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(_t,s,c)}}_t.runtime=d.w,_t.typeName="google.protobuf.Option",_t.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:Ur.I}]);class vn extends ue.v{constructor(s){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=cn.PROTO2,d.w.util.initPartial(s,this)}static fromBinary(s,c){return new vn().fromBinary(s,c)}static fromJson(s,c){return new vn().fromJson(s,c)}static fromJsonString(s,c){return new vn().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(vn,s,c)}}vn.runtime=d.w,vn.typeName="google.protobuf.Api",vn.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:un,repeated:!0},{no:3,name:"options",kind:"message",T:_t,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:an},{no:6,name:"mixins",kind:"message",T:wn,repeated:!0},{no:7,name:"syntax",kind:"enum",T:d.w.getEnumType(cn)}]);class un extends ue.v{constructor(s){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=cn.PROTO2,d.w.util.initPartial(s,this)}static fromBinary(s,c){return new un().fromBinary(s,c)}static fromJson(s,c){return new un().fromJson(s,c)}static fromJsonString(s,c){return new un().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(un,s,c)}}un.runtime=d.w,un.typeName="google.protobuf.Method",un.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:_t,repeated:!0},{no:7,name:"syntax",kind:"enum",T:d.w.getEnumType(cn)}]);class wn extends ue.v{constructor(s){super(),this.name="",this.root="",d.w.util.initPartial(s,this)}static fromBinary(s,c){return new wn().fromBinary(s,c)}static fromJson(s,c){return new wn().fromJson(s,c)}static fromJsonString(s,c){return new wn().fromJsonString(s,c)}static equals(s,c){return d.w.util.equals(wn,s,c)}}wn.runtime=d.w,wn.typeName="google.protobuf.Mixin",wn.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}])},561:(b,v,g)=>{g.d(v,{v:()=>d});class d{equals(T){return this.getType().runtime.util.equals(this.getType(),this,T)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(T,R){const P=this.getType(),Y=P.runtime.bin,M=Y.makeReadOptions(R);return Y.readMessage(this,M.readerFactory(T),T.byteLength,M),this}fromJson(T,R){const P=this.getType(),Y=P.runtime.json,M=Y.makeReadOptions(R);return Y.readMessage(P,T,M,this),this}fromJsonString(T,R){let P;try{P=JSON.parse(T)}catch(Y){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${Y instanceof Error?Y.message:String(Y)}`)}return this.fromJson(P,R)}toBinary(T){const R=this.getType(),P=R.runtime.bin,Y=P.makeWriteOptions(T),M=Y.writerFactory();return P.writeMessage(this,M,Y),M.finish()}toJson(T){const R=this.getType(),P=R.runtime.json,Y=P.makeWriteOptions(T);return P.writeMessage(this,Y)}toJsonString(T){var R;const P=this.toJson(T);return JSON.stringify(P,null,(R=T==null?void 0:T.prettySpaces)!==null&&R!==void 0?R:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}},120:(b,v,g)=>{g.d(v,{E_:()=>O,fp:()=>k,hu:()=>d,ug:()=>M});function d(J,L){if(!J)throw new Error(L)}const S=34028234663852886e22,T=-34028234663852886e22,R=4294967295,P=2147483647,Y=-2147483648;function M(J){if(typeof J!="number")throw new Error("invalid int 32: "+typeof J);if(!Number.isInteger(J)||J>P||J<Y)throw new Error("invalid int 32: "+J)}function k(J){if(typeof J!="number")throw new Error("invalid uint 32: "+typeof J);if(!Number.isInteger(J)||J>R||J<0)throw new Error("invalid uint 32: "+J)}function O(J){if(typeof J!="number")throw new Error("invalid float 32: "+typeof J);if(!!Number.isFinite(J)&&(J>S||J<T))throw new Error("invalid float 32: "+J)}},744:(b,v,g)=>{g.d(v,{Jj:()=>ce,NN:()=>re,gQ:()=>C,gY:()=>q,oQ:()=>z});var d=g(79),S=g(561),T=g(465),R=g(432),P=g(781),Y=g(120);const M=Symbol("@bufbuild/protobuf/unknown-fields"),k={readUnknownFields:!0,readerFactory:j=>new d.oP(j)},O={writeUnknownFields:!0,writerFactory:()=>new d.Lt};function J(j){return j?Object.assign(Object.assign({},k),j):k}function L(j){return j?Object.assign(Object.assign({},O),j):O}function q(){return{makeReadOptions:J,makeWriteOptions:L,listUnknownFields(j){var se;return(se=j[M])!==null&&se!==void 0?se:[]},discardUnknownFields(j){delete j[M]},writeUnknownFields(j,se){const te=j[M];if(te)for(const G of te)se.tag(G.no,G.wireType).raw(G.data)},onUnknownField(j,se,fe,te){const G=j;Array.isArray(G[M])||(G[M]=[]),G[M].push({no:se,wireType:fe,data:te})},readMessage(j,se,fe,te,G){const le=j.getType(),Le=G?se.len:se.pos+fe;let ue,De;for(;se.pos<Le&&([ue,De]=se.tag(),De!=d.TD.EndGroup);){const pe=le.fields.find(ue);if(!pe){const Ke=se.skip(De);te.readUnknownFields&&this.onUnknownField(j,ue,De,Ke);continue}let ke=j,Ge=pe.repeated,Ue=pe.localName;switch(pe.oneof&&(ke=ke[pe.oneof.localName],ke.case!=Ue&&delete ke.value,ke.case=Ue,Ue="value"),pe.kind){case"scalar":case"enum":const Ke=pe.kind=="enum"?T.w.INT32:pe.T;let it=W;if(pe.kind=="scalar"&&pe.L>0&&(it=ee),Ge){let dt=ke[Ue];if(De==d.TD.LengthDelimited&&Ke!=T.w.STRING&&Ke!=T.w.BYTES){let I=se.uint32()+se.pos;for(;se.pos<I;)dt.push(it(se,Ke))}else dt.push(it(se,Ke))}else ke[Ue]=it(se,Ke);break;case"message":const nt=pe.T;Ge?ke[Ue].push(B(se,new nt,te,pe)):ke[Ue]instanceof S.v?B(se,ke[Ue],te,pe):(ke[Ue]=B(se,new nt,te,pe),nt.fieldWrapper&&!pe.oneof&&!pe.repeated&&(ke[Ue]=nt.fieldWrapper.unwrapField(ke[Ue])));break;case"map":let[gt,St]=w(pe,se,te);ke[Ue][gt]=St;break}}if(G&&(De!=d.TD.EndGroup||ue!==fe))throw new Error("invalid end group tag")}}}function B(j,se,fe,te){const G=se.getType().runtime.bin,le=te==null?void 0:te.delimited;return G.readMessage(se,j,le?te==null?void 0:te.no:j.uint32(),fe,le),se}function w(j,se,fe){const te=se.uint32(),G=se.pos+te;let le,Le;for(;se.pos<G;){let[ue]=se.tag();switch(ue){case 1:le=W(se,j.K);break;case 2:switch(j.V.kind){case"scalar":Le=W(se,j.V.T);break;case"enum":Le=se.int32();break;case"message":Le=B(se,new j.V.T,fe,void 0);break}break}}if(le===void 0){let ue=(0,P.kY)(j.K,T.p.BIGINT);le=j.K==T.w.BOOL?ue.toString():ue}if(typeof le!="string"&&typeof le!="number"&&(le=le.toString()),Le===void 0)switch(j.V.kind){case"scalar":Le=(0,P.kY)(j.V.T,T.p.BIGINT);break;case"enum":Le=0;break;case"message":Le=new j.V.T;break}return[le,Le]}function ee(j,se){const fe=W(j,se);return typeof fe=="bigint"?fe.toString():fe}function W(j,se){switch(se){case T.w.STRING:return j.string();case T.w.BOOL:return j.bool();case T.w.DOUBLE:return j.double();case T.w.FLOAT:return j.float();case T.w.INT32:return j.int32();case T.w.INT64:return j.int64();case T.w.UINT64:return j.uint64();case T.w.FIXED64:return j.fixed64();case T.w.BYTES:return j.bytes();case T.w.FIXED32:return j.fixed32();case T.w.SFIXED32:return j.sfixed32();case T.w.SFIXED64:return j.sfixed64();case T.w.SINT64:return j.sint64();case T.w.UINT32:return j.uint32();case T.w.SINT32:return j.sint32()}}function C(j,se,fe,te,G){j.tag(fe.no,d.TD.LengthDelimited),j.fork();let le=te;switch(fe.K){case T.w.INT32:case T.w.FIXED32:case T.w.UINT32:case T.w.SFIXED32:case T.w.SINT32:le=Number.parseInt(te);break;case T.w.BOOL:(0,Y.hu)(te=="true"||te=="false"),le=te=="true";break}switch(re(j,fe.K,1,le,!0),fe.V.kind){case"scalar":re(j,fe.V.T,2,G,!0);break;case"enum":re(j,T.w.INT32,2,G,!0);break;case"message":j.tag(2,d.TD.LengthDelimited).bytes(G.toBinary(se));break}j.join()}function z(j,se,fe,te){if(te!==void 0){const G=(0,R.E)(fe.T,te);fe!=null&&fe.delimited?j.tag(fe.no,d.TD.StartGroup).raw(G.toBinary(se)).tag(fe.no,d.TD.EndGroup):j.tag(fe.no,d.TD.LengthDelimited).bytes(G.toBinary(se))}}function re(j,se,fe,te,G){let[le,Le,ue]=(0,P.T1)(se,te);(!ue||G)&&j.tag(fe,le)[Le](te)}function ce(j,se,fe,te){if(!te.length)return;j.tag(fe,d.TD.LengthDelimited).fork();let[,G]=(0,P.T1)(se);for(let le=0;le<te.length;le++)j[G](te[le]);j.join()}},609:(b,v,g)=>{g.d(v,{V3:()=>T,be:()=>P,ut:()=>Y,zg:()=>R});var d=g(120);const S=Symbol("@bufbuild/protobuf/enum-type");function T(k){const O=k[S];return(0,d.hu)(O,"missing enum type on enum object"),O}function R(k,O,J,L){k[S]=P(O,J.map(q=>({no:q.no,name:q.name,localName:k[q.no]})))}function P(k,O,J){const L=Object.create(null),q=Object.create(null),B=[];for(const w of O){const ee=M(w);B.push(ee),L[w.name]=ee,q[w.no]=ee}return{typeName:k,values:B,findName(w){return L[w]},findNumber(w){return q[w]}}}function Y(k,O,J){const L={};for(const q of O){const B=M(q);L[B.localName]=B.no,L[B.no]=B.localName}return R(L,k,O),L}function M(k){return"localName"in k?k:Object.assign(Object.assign({},k),{localName:k.name})}},501:(b,v,g)=>{g.d(v,{i:()=>d});class d{constructor(T,R){this._fields=T,this._normalizer=R}findJsonName(T){if(!this.jsonNames){const R={};for(const P of this.list())R[P.jsonName]=R[P.name]=P;this.jsonNames=R}return this.jsonNames[T]}find(T){if(!this.numbers){const R={};for(const P of this.list())R[P.no]=P;this.numbers=R}return this.numbers[T]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((T,R)=>T.no-R.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const T=this.members;let R;for(const P of this.list())P.oneof?P.oneof!==R&&(R=P.oneof,T.push(R)):T.push(P)}return this.members}}},432:(b,v,g)=>{g.d(v,{E:()=>T,w:()=>R});var d=g(561),S=g(465);function T(Y,M){return M instanceof d.v||!Y.fieldWrapper?M:Y.fieldWrapper.wrapField(M)}function R(Y){if(Y.fieldKind==="message"&&!Y.repeated&&Y.oneof==null)return P[Y.message.typeName]}const P={"google.protobuf.DoubleValue":S.w.DOUBLE,"google.protobuf.FloatValue":S.w.FLOAT,"google.protobuf.Int64Value":S.w.INT64,"google.protobuf.UInt64Value":S.w.UINT64,"google.protobuf.Int32Value":S.w.INT32,"google.protobuf.UInt32Value":S.w.UINT32,"google.protobuf.BoolValue":S.w.BOOL,"google.protobuf.StringValue":S.w.STRING,"google.protobuf.BytesValue":S.w.BYTES}},215:(b,v,g)=>{g.d(v,{o:()=>T});var d=g(504),S=g(120);class T{constructor(P){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=P,this.localName=(0,d.uA)(P)}addField(P){(0,S.hu)(P.oneof===this,`field ${P.name} not one of ${this.name}`),this.fields.push(P)}findField(P){if(!this._lookup){this._lookup=Object.create(null);for(let Y=0;Y<this.fields.length;Y++)this._lookup[this.fields[Y].localName]=this.fields[Y]}return this._lookup[P]}}},814:(b,v,g)=>{g.d(v,{b:()=>J});var d=g(561),S=g(465),T=g(120),R=g(210),P=g(236);const Y={ignoreUnknownFields:!1},M={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function k(W){return W?Object.assign(Object.assign({},Y),W):Y}function O(W){return W?Object.assign(Object.assign({},M),W):M}function J(W){const C=W(w,ee);return{makeReadOptions:k,makeWriteOptions:O,readMessage(z,re,ce,j){if(re==null||Array.isArray(re)||typeof re!="object")throw new Error(`cannot decode message ${z.typeName} from JSON: ${this.debug(re)}`);j=j!=null?j:new z;const se={};for(const[fe,te]of Object.entries(re)){const G=z.fields.findJsonName(fe);if(!G){if(!ce.ignoreUnknownFields)throw new Error(`cannot decode message ${z.typeName} from JSON: key "${fe}" is unknown`);continue}let le=G.localName,Le=j;if(G.oneof){if(te===null&&G.kind=="scalar")continue;const ue=se[G.oneof.localName];if(ue)throw new Error(`cannot decode message ${z.typeName} from JSON: multiple keys for oneof "${G.oneof.name}" present: "${ue}", "${fe}"`);se[G.oneof.localName]=fe,Le=Le[G.oneof.localName]={case:le},le="value"}if(G.repeated){if(te===null)continue;if(!Array.isArray(te))throw new Error(`cannot decode field ${z.typeName}.${G.name} from JSON: ${this.debug(te)}`);const ue=Le[le];for(const De of te){if(De===null)throw new Error(`cannot decode field ${z.typeName}.${G.name} from JSON: ${this.debug(De)}`);let pe;switch(G.kind){case"message":pe=G.T.fromJson(De,ce);break;case"enum":if(pe=B(G.T,De,ce.ignoreUnknownFields),pe===void 0)continue;break;case"scalar":try{pe=q(G.T,De,G.L)}catch(ke){let Ge=`cannot decode field ${z.typeName}.${G.name} from JSON: ${this.debug(De)}`;throw ke instanceof Error&&ke.message.length>0&&(Ge+=`: ${ke.message}`),new Error(Ge)}break}ue.push(pe)}}else if(G.kind=="map"){if(te===null)continue;if(Array.isArray(te)||typeof te!="object")throw new Error(`cannot decode field ${z.typeName}.${G.name} from JSON: ${this.debug(te)}`);const ue=Le[le];for(const[De,pe]of Object.entries(te)){if(pe===null)throw new Error(`cannot decode field ${z.typeName}.${G.name} from JSON: map value null`);let ke;switch(G.V.kind){case"message":ke=G.V.T.fromJson(pe,ce);break;case"enum":if(ke=B(G.V.T,pe,ce.ignoreUnknownFields),ke===void 0)continue;break;case"scalar":try{ke=q(G.V.T,pe,S.p.BIGINT)}catch(Ge){let Ue=`cannot decode map value for field ${z.typeName}.${G.name} from JSON: ${this.debug(te)}`;throw Ge instanceof Error&&Ge.message.length>0&&(Ue+=`: ${Ge.message}`),new Error(Ue)}break}try{ue[q(G.K,G.K==S.w.BOOL?De=="true"?!0:De=="false"?!1:De:De,S.p.BIGINT).toString()]=ke}catch(Ge){let Ue=`cannot decode map key for field ${z.typeName}.${G.name} from JSON: ${this.debug(te)}`;throw Ge instanceof Error&&Ge.message.length>0&&(Ue+=`: ${Ge.message}`),new Error(Ue)}}}else switch(G.kind){case"message":const ue=G.T;if(te===null&&ue.typeName!="google.protobuf.Value"){if(G.oneof)throw new Error(`cannot decode field ${z.typeName}.${G.name} from JSON: null is invalid for oneof field "${fe}"`);continue}Le[le]instanceof d.v?Le[le].fromJson(te,ce):(Le[le]=ue.fromJson(te,ce),ue.fieldWrapper&&!G.oneof&&(Le[le]=ue.fieldWrapper.unwrapField(Le[le])));break;case"enum":const De=B(G.T,te,ce.ignoreUnknownFields);De!==void 0&&(Le[le]=De);break;case"scalar":try{Le[le]=q(G.T,te,G.L)}catch(pe){let ke=`cannot decode field ${z.typeName}.${G.name} from JSON: ${this.debug(te)}`;throw pe instanceof Error&&pe.message.length>0&&(ke+=`: ${pe.message}`),new Error(ke)}break}}return j},writeMessage(z,re){const ce=z.getType(),j={};let se;try{for(const fe of ce.fields.byMember()){let te;if(fe.kind=="oneof"){const G=z[fe.localName];if(G.value===void 0)continue;if(se=fe.findField(G.case),!se)throw"oneof case not found: "+G.case;te=C(se,G.value,re)}else se=fe,te=C(se,z[se.localName],re);te!==void 0&&(j[re.useProtoFieldName?se.name:se.jsonName]=te)}}catch(fe){const te=se?`cannot encode field ${ce.typeName}.${se.name} to JSON`:`cannot encode message ${ce.typeName} to JSON`,G=fe instanceof Error?fe.message:String(fe);throw new Error(te+(G.length>0?`: ${G}`:""))}return j},readScalar:q,writeScalar:ee,debug:L}}function L(W){if(W===null)return"null";switch(typeof W){case"object":return Array.isArray(W)?"array":"object";case"string":return W.length>100?"string":`"${W.split('"').join('\\"')}"`;default:return String(W)}}function q(W,C,z){switch(W){case S.w.DOUBLE:case S.w.FLOAT:if(C===null)return 0;if(C==="NaN")return Number.NaN;if(C==="Infinity")return Number.POSITIVE_INFINITY;if(C==="-Infinity")return Number.NEGATIVE_INFINITY;if(C===""||typeof C=="string"&&C.trim().length!==C.length||typeof C!="string"&&typeof C!="number")break;const re=Number(C);if(Number.isNaN(re)||!Number.isFinite(re))break;return W==S.w.FLOAT&&(0,T.E_)(re),re;case S.w.INT32:case S.w.FIXED32:case S.w.SFIXED32:case S.w.SINT32:case S.w.UINT32:if(C===null)return 0;let ce;if(typeof C=="number"?ce=C:typeof C=="string"&&C.length>0&&C.trim().length===C.length&&(ce=Number(C)),ce===void 0)break;return W==S.w.UINT32?(0,T.fp)(ce):(0,T.ug)(ce),ce;case S.w.INT64:case S.w.SFIXED64:case S.w.SINT64:if(C===null)return R.q.zero;if(typeof C!="number"&&typeof C!="string")break;const j=R.q.parse(C);return z?j.toString():j;case S.w.FIXED64:case S.w.UINT64:if(C===null)return R.q.zero;if(typeof C!="number"&&typeof C!="string")break;const se=R.q.uParse(C);return z?se.toString():se;case S.w.BOOL:if(C===null)return!1;if(typeof C!="boolean")break;return C;case S.w.STRING:if(C===null)return"";if(typeof C!="string")break;try{encodeURIComponent(C)}catch{throw new Error("invalid UTF8")}return C;case S.w.BYTES:if(C===null||C==="")return new Uint8Array(0);if(typeof C!="string")break;return P.W.dec(C)}throw new Error}function B(W,C,z){if(C===null)return 0;switch(typeof C){case"number":if(Number.isInteger(C))return C;break;case"string":const re=W.findName(C);if(re||z)return re==null?void 0:re.no;break}throw new Error(`cannot decode enum ${W.typeName} from JSON: ${L(C)}`)}function w(W,C,z,re){var ce;if(C===void 0)return C;if(C===0&&!z)return;if(re)return C;if(W.typeName=="google.protobuf.NullValue")return null;const j=W.findNumber(C);return(ce=j==null?void 0:j.name)!==null&&ce!==void 0?ce:C}function ee(W,C,z){if(C!==void 0)switch(W){case S.w.INT32:case S.w.SFIXED32:case S.w.SINT32:case S.w.FIXED32:case S.w.UINT32:return(0,T.hu)(typeof C=="number"),C!=0||z?C:void 0;case S.w.FLOAT:case S.w.DOUBLE:return(0,T.hu)(typeof C=="number"),Number.isNaN(C)?"NaN":C===Number.POSITIVE_INFINITY?"Infinity":C===Number.NEGATIVE_INFINITY?"-Infinity":C!==0||z?C:void 0;case S.w.STRING:return(0,T.hu)(typeof C=="string"),C.length>0||z?C:void 0;case S.w.BOOL:return(0,T.hu)(typeof C=="boolean"),C||z?C:void 0;case S.w.UINT64:case S.w.FIXED64:case S.w.INT64:case S.w.SFIXED64:case S.w.SINT64:return(0,T.hu)(typeof C=="bigint"||typeof C=="string"||typeof C=="number"),z||C!=0?C.toString(10):void 0;case S.w.BYTES:return(0,T.hu)(C instanceof Uint8Array),z||C.byteLength>0?P.W.enc(C):void 0}}},504:(b,v,g)=>{g.d(v,{GD:()=>w,Rz:()=>S,Sm:()=>P,ll:()=>B,r1:()=>d,uA:()=>T,x1:()=>R});function d(ee){switch(ee.kind){case"field":return S(ee.name,ee.oneof!==void 0);case"oneof":return T(ee.name);case"enum":case"message":case"service":{const W=ee.file.proto.package,C=W===void 0?0:W.length+1,z=ee.typeName.substring(C).replace(/\./g,"_");return B(w(z))}case"enum_value":{const W=ee.parent.sharedPrefix;if(W===void 0)return ee.name;const C=ee.name.substring(W.length);return B(C)}case"rpc":{let W=ee.name;return W.length==0?W:(W=W[0].toLowerCase()+W.substring(1),B(W))}}}function S(ee,W){const C=M(ee);return W?C:B(q(C))}function T(ee){return S(ee,!1)}const R=M;function P(ee,W){const C=Y(ee)+"_";for(const z of W){if(!z.toLowerCase().startsWith(C))return;const re=z.substring(C.length);if(re.length==0||/^\d/.test(re))return}return C}function Y(ee){return(ee.substring(0,1)+ee.substring(1).replace(/[A-Z]/g,W=>"_"+W)).toLowerCase()}function M(ee){let W=!1;const C=[];for(let z=0;z<ee.length;z++){let re=ee.charAt(z);switch(re){case"_":W=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":C.push(re),W=!1;break;default:W&&(W=!1,re=re.toUpperCase()),C.push(re);break}}return C.join("")}const k=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]),O=new Set(["constructor","toString","toJSON","valueOf"]),J=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),L=ee=>`${ee}$`,q=ee=>J.has(ee)?L(ee):ee,B=ee=>O.has(ee)?L(ee):ee,w=ee=>k.has(ee)?L(ee):ee},493:(b,v,g)=>{g.d(v,{F:()=>R});var d=g(609),S=g(561);function T(P,Y,M,k){var O;const J=(O=k==null?void 0:k.localName)!==null&&O!==void 0?O:Y.substring(Y.lastIndexOf(".")+1),L={[J]:function(q){P.util.initFields(this),P.util.initPartial(q,this)}}[J];return Object.setPrototypeOf(L.prototype,new S.v),Object.assign(L,{runtime:P,typeName:Y,fields:P.util.newFieldList(M),fromBinary(q,B){return new L().fromBinary(q,B)},fromJson(q,B){return new L().fromJson(q,B)},fromJsonString(q,B){return new L().fromJsonString(q,B)},equals(q,B){return P.util.equals(L,q,B)}}),L}function R(P,Y,M,k){return{syntax:P,json:Y,bin:M,util:k,makeMessageType(O,J,L){return T(this,O,J,L)},makeEnum:d.ut,makeEnumType:d.be,getEnumType:d.V3}}},781:(b,v,g)=>{g.d(v,{AA:()=>R,T1:()=>Y,kY:()=>P});var d=g(465),S=g(79),T=g(210);function R(M,k,O){if(k===O)return!0;if(M==d.w.BYTES){if(!(k instanceof Uint8Array)||!(O instanceof Uint8Array)||k.length!==O.length)return!1;for(let J=0;J<k.length;J++)if(k[J]!==O[J])return!1;return!0}switch(M){case d.w.UINT64:case d.w.FIXED64:case d.w.INT64:case d.w.SFIXED64:case d.w.SINT64:return k==O}return!1}function P(M,k){switch(M){case d.w.BOOL:return!1;case d.w.UINT64:case d.w.FIXED64:case d.w.INT64:case d.w.SFIXED64:case d.w.SINT64:return k==0?T.q.zero:"0";case d.w.DOUBLE:case d.w.FLOAT:return 0;case d.w.BYTES:return new Uint8Array(0);case d.w.STRING:return"";default:return 0}}function Y(M,k){const O=k===void 0;let J=S.TD.Varint,L=k===0;switch(M){case d.w.STRING:L=O||!k.length,J=S.TD.LengthDelimited;break;case d.w.BOOL:L=k===!1;break;case d.w.DOUBLE:J=S.TD.Bit64;break;case d.w.FLOAT:J=S.TD.Bit32;break;case d.w.INT64:L=O||k==0;break;case d.w.UINT64:L=O||k==0;break;case d.w.FIXED64:L=O||k==0,J=S.TD.Bit64;break;case d.w.BYTES:L=O||!k.byteLength,J=S.TD.LengthDelimited;break;case d.w.FIXED32:J=S.TD.Bit32;break;case d.w.SFIXED32:J=S.TD.Bit32;break;case d.w.SFIXED64:L=O||k==0,J=S.TD.Bit64;break;case d.w.SINT64:L=O||k==0;break}const q=d.w[M].toLowerCase();return[J,q,O||L]}},433:(b,v,g)=>{g.d(v,{f:()=>P});var d=g(609),S=g(561),T=g(465),R=g(781);function P(){return{setEnumType:d.zg,initPartial(k,O){if(k===void 0)return;const J=O.getType();for(const L of J.fields.byMember()){const q=L.localName,B=O,w=k;if(w[q]!==void 0)switch(L.kind){case"oneof":const ee=w[q].case;if(ee===void 0)continue;const W=L.findField(ee);let C=w[q].value;W&&W.kind=="message"&&!(C instanceof W.T)?C=new W.T(C):W&&W.kind==="scalar"&&W.T===T.w.BYTES&&(C=M(C)),B[q]={case:ee,value:C};break;case"scalar":case"enum":let z=w[q];L.T===T.w.BYTES&&(z=L.repeated?z.map(M):M(z)),B[q]=z;break;case"map":switch(L.V.kind){case"scalar":case"enum":if(L.V.T===T.w.BYTES)for(const[j,se]of Object.entries(w[q]))B[q][j]=M(se);else Object.assign(B[q],w[q]);break;case"message":const ce=L.V.T;for(const j of Object.keys(w[q])){let se=w[q][j];ce.fieldWrapper||(se=new ce(se)),B[q][j]=se}break}break;case"message":const re=L.T;if(L.repeated)B[q]=w[q].map(ce=>ce instanceof re?ce:new re(ce));else if(w[q]!==void 0){const ce=w[q];re.fieldWrapper?re.typeName==="google.protobuf.BytesValue"?B[q]=M(ce):B[q]=ce:B[q]=ce instanceof re?ce:new re(ce)}break}}},equals(k,O,J){return O===J?!0:!O||!J?!1:k.fields.byMember().every(L=>{const q=O[L.localName],B=J[L.localName];if(L.repeated){if(q.length!==B.length)return!1;switch(L.kind){case"message":return q.every((w,ee)=>L.T.equals(w,B[ee]));case"scalar":return q.every((w,ee)=>(0,R.AA)(L.T,w,B[ee]));case"enum":return q.every((w,ee)=>(0,R.AA)(T.w.INT32,w,B[ee]))}throw new Error(`repeated cannot contain ${L.kind}`)}switch(L.kind){case"message":return L.T.equals(q,B);case"enum":return(0,R.AA)(T.w.INT32,q,B);case"scalar":return(0,R.AA)(L.T,q,B);case"oneof":if(q.case!==B.case)return!1;const w=L.findField(q.case);if(w===void 0)return!0;switch(w.kind){case"message":return w.T.equals(q.value,B.value);case"enum":return(0,R.AA)(T.w.INT32,q.value,B.value);case"scalar":return(0,R.AA)(w.T,q.value,B.value)}throw new Error(`oneof cannot contain ${w.kind}`);case"map":const ee=Object.keys(q).concat(Object.keys(B));switch(L.V.kind){case"message":const W=L.V.T;return ee.every(z=>W.equals(q[z],B[z]));case"enum":return ee.every(z=>(0,R.AA)(T.w.INT32,q[z],B[z]));case"scalar":const C=L.V.T;return ee.every(z=>(0,R.AA)(C,q[z],B[z]))}break}})},clone(k){const O=k.getType(),J=new O,L=J;for(const q of O.fields.byMember()){const B=k[q.localName];let w;if(q.repeated)w=B.map(Y);else if(q.kind=="map"){w=L[q.localName];for(const[ee,W]of Object.entries(B))w[ee]=Y(W)}else q.kind=="oneof"?w=q.findField(B.case)?{case:B.case,value:Y(B.value)}:{case:void 0}:w=Y(B);L[q.localName]=w}return J}}}function Y(k){if(k===void 0)return k;if(k instanceof S.v)return k.clone();if(k instanceof Uint8Array){const O=new Uint8Array(k.byteLength);return O.set(k),O}return k}function M(k){return k instanceof Uint8Array?k:new Uint8Array(k)}},236:(b,v,g)=>{g.d(v,{W:()=>T});let d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),S=[];for(let R=0;R<d.length;R++)S[d[R].charCodeAt(0)]=R;S["-".charCodeAt(0)]=d.indexOf("+"),S["_".charCodeAt(0)]=d.indexOf("/");const T={dec(R){let P=R.length*3/4;R[R.length-2]=="="?P-=2:R[R.length-1]=="="&&(P-=1);let Y=new Uint8Array(P),M=0,k=0,O,J=0;for(let L=0;L<R.length;L++){if(O=S[R.charCodeAt(L)],O===void 0)switch(R[L]){case"=":k=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(k){case 0:J=O,k=1;break;case 1:Y[M++]=J<<2|(O&48)>>4,J=O,k=2;break;case 2:Y[M++]=(J&15)<<4|(O&60)>>2,J=O,k=3;break;case 3:Y[M++]=(J&3)<<6|O,k=0;break}}if(k==1)throw Error("invalid base64 string.");return Y.subarray(0,M)},enc(R){let P="",Y=0,M,k=0;for(let O=0;O<R.length;O++)switch(M=R[O],Y){case 0:P+=d[M>>2],k=(M&3)<<4,Y=1;break;case 1:P+=d[k|M>>4],k=(M&15)<<2,Y=2;break;case 2:P+=d[k|M>>6],P+=d[M&63],Y=0;break}return Y&&(P+=d[k],P+="=",Y==1&&(P+="=")),P}}},210:(b,v,g)=>{g.d(v,{q:()=>R});var d=g(120),S=g(818);function T(){const P=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof P.getBigInt64=="function"&&typeof P.getBigUint64=="function"&&typeof P.setBigInt64=="function"&&typeof P.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const O=BigInt("-9223372036854775808"),J=BigInt("9223372036854775807"),L=BigInt("0"),q=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(B){const w=typeof B=="bigint"?B:BigInt(B);if(w>J||w<O)throw new Error(`int64 invalid: ${B}`);return w},uParse(B){const w=typeof B=="bigint"?B:BigInt(B);if(w>q||w<L)throw new Error(`uint64 invalid: ${B}`);return w},enc(B){return P.setBigInt64(0,this.parse(B),!0),{lo:P.getInt32(0,!0),hi:P.getInt32(4,!0)}},uEnc(B){return P.setBigInt64(0,this.uParse(B),!0),{lo:P.getInt32(0,!0),hi:P.getInt32(4,!0)}},dec(B,w){return P.setInt32(0,B,!0),P.setInt32(4,w,!0),P.getBigInt64(0,!0)},uDec(B,w){return P.setInt32(0,B,!0),P.setInt32(4,w,!0),P.getBigUint64(0,!0)}}}const M=O=>(0,d.hu)(/^-?[0-9]+$/.test(O),`int64 invalid: ${O}`),k=O=>(0,d.hu)(/^[0-9]+$/.test(O),`uint64 invalid: ${O}`);return{zero:"0",supported:!1,parse(O){return typeof O!="string"&&(O=O.toString()),M(O),O},uParse(O){return typeof O!="string"&&(O=O.toString()),k(O),O},enc(O){return typeof O!="string"&&(O=O.toString()),M(O),(0,S.CZ)(O)},uEnc(O){return typeof O!="string"&&(O=O.toString()),k(O),(0,S.CZ)(O)},dec(O,J){return(0,S.Ak)(O,J)},uDec(O,J){return(0,S.Fd)(O,J)}}}const R=T()},850:(b,v,g)=>{g.d(v,{w:()=>w});var d=g(493),S=g(465),T=g(744);function R(){return Object.assign(Object.assign({},(0,T.gY)()),{writeMessage(W,C,z){const re=W.getType();for(const ce of re.fields.byNumber()){let j,se=ce.repeated,fe=ce.localName;if(ce.oneof){const te=W[ce.oneof.localName];if(te.case!==fe)continue;j=te.value}else j=W[fe];switch(ce.kind){case"scalar":case"enum":let te=ce.kind=="enum"?S.w.INT32:ce.T;if(se)if(ce.packed)(0,T.Jj)(C,te,ce.no,j);else for(const G of j)(0,T.NN)(C,te,ce.no,G,!0);else j!==void 0&&(0,T.NN)(C,te,ce.no,j,!!ce.oneof||ce.opt);break;case"message":if(se)for(const G of j)(0,T.oQ)(C,z,ce,G);else(0,T.oQ)(C,z,ce,j);break;case"map":for(const[G,le]of Object.entries(j))(0,T.gQ)(C,z,ce,G,le);break}}return z.writeUnknownFields&&this.writeUnknownFields(W,C),C}})}var P=g(432),Y=g(120),M=g(814);function k(){return(0,M.b)((W,C)=>function(re,ce,j){if(re.kind=="map"){const se={};switch(re.V.kind){case"scalar":for(const[te,G]of Object.entries(ce)){const le=C(re.V.T,G,!0);(0,Y.hu)(le!==void 0),se[te.toString()]=le}break;case"message":for(const[te,G]of Object.entries(ce))se[te.toString()]=G.toJson(j);break;case"enum":const fe=re.V.T;for(const[te,G]of Object.entries(ce)){(0,Y.hu)(G===void 0||typeof G=="number");const le=W(fe,G,!0,j.enumAsInteger);(0,Y.hu)(le!==void 0),se[te.toString()]=le}break}return j.emitDefaultValues||Object.keys(se).length>0?se:void 0}else if(re.repeated){const se=[];switch(re.kind){case"scalar":for(let fe=0;fe<ce.length;fe++)se.push(C(re.T,ce[fe],!0));break;case"enum":for(let fe=0;fe<ce.length;fe++)se.push(W(re.T,ce[fe],!0,j.enumAsInteger));break;case"message":for(let fe=0;fe<ce.length;fe++)se.push((0,P.E)(re.T,ce[fe]).toJson(j));break}return j.emitDefaultValues||se.length>0?se:void 0}else switch(re.kind){case"scalar":return C(re.T,ce,!!re.oneof||re.opt||j.emitDefaultValues);case"enum":return W(re.T,ce,!!re.oneof||re.opt||j.emitDefaultValues,j.enumAsInteger);case"message":return ce!==void 0?(0,P.E)(re.T,ce).toJson(j):void 0}})}var O=g(433),J=g(501),L=g(781),q=g(215),B=g(504);const w=(0,d.F)("proto3",k(),R(),Object.assign(Object.assign({},(0,O.f)()),{newFieldList(W){return new J.i(W,ee)},initFields(W){for(const C of W.getType().fields.byMember()){if(C.opt)continue;const z=C.localName,re=W;if(C.repeated){re[z]=[];continue}switch(C.kind){case"oneof":re[z]={case:void 0};break;case"enum":re[z]=0;break;case"map":re[z]={};break;case"scalar":re[z]=(0,L.kY)(C.T,C.L);break}}}}));function ee(W){var C,z,re,ce;const j=[];let se;for(const fe of typeof W=="function"?W():W){const te=fe;if(te.localName=(0,B.Rz)(fe.name,fe.oneof!==void 0),te.jsonName=(C=fe.jsonName)!==null&&C!==void 0?C:(0,B.x1)(fe.name),te.repeated=(z=fe.repeated)!==null&&z!==void 0?z:!1,fe.kind=="scalar"&&(te.L=(re=fe.L)!==null&&re!==void 0?re:S.p.BIGINT),fe.oneof!==void 0){const G=typeof fe.oneof=="string"?fe.oneof:fe.oneof.name;(!se||se.name!=G)&&(se=new q.o(G)),te.oneof=se,se.addField(te)}fe.kind=="message"&&(te.delimited=!1),te.packed=(ce=fe.packed)!==null&&ce!==void 0?ce:fe.kind=="enum"||fe.kind=="scalar"&&fe.T!=S.w.BYTES&&fe.T!=S.w.STRING,j.push(te)}return j}},328:(b,v,g)=>{g.d(v,{t:()=>d,w:()=>S});var d;(function(T){T[T.Unary=0]="Unary",T[T.ServerStreaming=1]="ServerStreaming",T[T.ClientStreaming=2]="ClientStreaming",T[T.BiDiStreaming=3]="BiDiStreaming"})(d||(d={}));var S;(function(T){T[T.NoSideEffects=1]="NoSideEffects",T[T.Idempotent=2]="Idempotent"})(S||(S={}))}},h={};function m(b){var v=h[b];if(v!==void 0)return v.exports;var g=h[b]={exports:{}};return f[b](g,g.exports,m),g.exports}m.d=(b,v)=>{for(var g in v)m.o(v,g)&&!m.o(b,g)&&Object.defineProperty(b,g,{enumerable:!0,get:v[g]})},m.o=(b,v)=>Object.prototype.hasOwnProperty.call(b,v),m.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var y={};return(()=>{m.r(y),m.d(y,{Change:()=>Nr,Client:()=>Mo,ClientEventType:()=>Nn,ClientStatus:()=>ur,Counter:()=>Fs,DocEventType:()=>$e,Document:()=>Lo,DocumentSyncResultType:()=>zr,Primitive:()=>lt,StreamConnectionStatus:()=>Sr,SyncMode:()=>Gn,Text:()=>Ms,TimeTicket:()=>ot,Tree:()=>Js,converter:()=>Vn,default:()=>iu});var b;(function(i){i[i.Trivial=0]="Trivial",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"})(b||(b={}));let v=b.Info;const g={trivial:(...i)=>{v>b.Trivial||typeof console<"u"&&console.log("YORKIE T:",...i)},debug:(...i)=>{v>b.Debug||typeof console<"u"&&console.log("YORKIE D:",...i)},info:(...i)=>{v>b.Info||typeof console<"u"&&console.log("YORKIE I:",...i)},warn:(...i)=>{v>b.Warn||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...i):console.log("YORKIE W:",...i))},error:(...i)=>{v>b.Error||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...i):console.log("YORKIE E:",...i))},fatal:(i,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${i}`)},isEnabled:i=>v<=i};function d(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)})}const S=()=>{};class T{constructor(e){this.finalized=!1,this.observers=[];try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;e||g.fatal("missing observer"),this.finalized&&g.fatal("observable is finalized due to previous error"),typeof e=="object"?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=S),o.error===void 0&&(o.error=S),o.complete===void 0&&(o.complete=S);const l=d(),p=this.unsubscribeOne.bind(this,l);if(this.observers.push({subscriptionID:l,observer:o}),this.finalized)try{this.finalError?o.error(this.finalError):o.complete()}catch(E){g.warn(E)}return p}unsubscribeOne(e){var t;this.observers=(t=this.observers)===null||t===void 0?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){g.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function R(i){const e=new T(i);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}var P=m(328);function Y(i,e){const t={};for(const[r,o]of Object.entries(i.methods)){const l=e(Object.assign(Object.assign({},o),{localName:r,service:i}));l!=null&&(t[r]=l)}return t}var M;(function(i){i[i.Canceled=1]="Canceled",i[i.Unknown=2]="Unknown",i[i.InvalidArgument=3]="InvalidArgument",i[i.DeadlineExceeded=4]="DeadlineExceeded",i[i.NotFound=5]="NotFound",i[i.AlreadyExists=6]="AlreadyExists",i[i.PermissionDenied=7]="PermissionDenied",i[i.ResourceExhausted=8]="ResourceExhausted",i[i.FailedPrecondition=9]="FailedPrecondition",i[i.Aborted=10]="Aborted",i[i.OutOfRange=11]="OutOfRange",i[i.Unimplemented=12]="Unimplemented",i[i.Internal=13]="Internal",i[i.Unavailable=14]="Unavailable",i[i.DataLoss=15]="DataLoss",i[i.Unauthenticated=16]="Unauthenticated"})(M||(M={}));var k=m(561);function O(i){const e=M[i];return typeof e!="string"?i.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class J extends Error{constructor(e,t=M.Unknown,r,o,l){super(L(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r!=null?r:{}),this.details=o!=null?o:[],this.cause=l}static from(e,t=M.Unknown){return e instanceof J?e:e instanceof Error?e.name=="AbortError"?new J(e.message,M.Canceled):new J(e.message,t,void 0,void 0,e):new J(String(e),t,void 0,void 0,e)}findDetails(e){const t="typeName"in e?{findMessage:o=>o===e.typeName?e:void 0}:e,r=[];for(const o of this.details){if(o instanceof k.v){t.findMessage(o.getType().typeName)&&r.push(o);continue}const l=t.findMessage(o.type);if(l)try{r.push(l.fromBinary(o.value))}catch{}}return r}}function L(i,e){return i.length?`[${O(e)}] ${i}`:`[${O(e)}]`}var q=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=i[l]&&function(p){return new Promise(function(E,D){p=i[l](p),o(E,D,p.done,p.value)})}}function o(l,p,E,D){Promise.resolve(D).then(function(U){l({value:U,done:E})},p)}},B=function(i){return this instanceof B?(this.v=i,this):new B(i)},w=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),o,l=[];return o={},p("next"),p("throw"),p("return"),o[Symbol.asyncIterator]=function(){return this},o;function p(Q){r[Q]&&(o[Q]=function(Ne){return new Promise(function(Be,Fe){l.push([Q,Ne,Be,Fe])>1||E(Q,Ne)})})}function E(Q,Ne){try{D(r[Q](Ne))}catch(Be){Te(l[0][3],Be)}}function D(Q){Q.value instanceof B?Promise.resolve(Q.value.v).then(U,me):Te(l[0][2],Q)}function U(Q){E("next",Q)}function me(Q){E("throw",Q)}function Te(Q,Ne){Q(Ne),l.shift(),l.length&&E(l[0][0],l[0][1])}},ee=function(i){var e,t;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,l){e[o]=i[o]?function(p){return(t=!t)?{value:B(i[o](p)),done:!1}:l?l(p):p}:l}};function W(i){return w(this,arguments,function*(){yield B(yield*ee(q(i)))})}var C=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=i[l]&&function(p){return new Promise(function(E,D){p=i[l](p),o(E,D,p.done,p.value)})}}function o(l,p,E,D){Promise.resolve(D).then(function(U){l({value:U,done:E})},p)}},z=function(i){return this instanceof z?(this.v=i,this):new z(i)},re=function(i){var e,t;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,l){e[o]=i[o]?function(p){return(t=!t)?{value:z(i[o](p)),done:!1}:l?l(p):p}:l}},ce=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),o,l=[];return o={},p("next"),p("throw"),p("return"),o[Symbol.asyncIterator]=function(){return this},o;function p(Q){r[Q]&&(o[Q]=function(Ne){return new Promise(function(Be,Fe){l.push([Q,Ne,Be,Fe])>1||E(Q,Ne)})})}function E(Q,Ne){try{D(r[Q](Ne))}catch(Be){Te(l[0][3],Be)}}function D(Q){Q.value instanceof z?Promise.resolve(Q.value.v).then(U,me):Te(l[0][2],Q)}function U(Q){E("next",Q)}function me(Q){E("throw",Q)}function Te(Q,Ne){Q(Ne),l.shift(),l.length&&E(l[0][0],l[0][1])}};function j(i,e){return Y(i,t=>{switch(t.kind){case P.t.Unary:return se(e,i,t);case P.t.ServerStreaming:return fe(e,i,t);case P.t.ClientStreaming:return te(e,i,t);case P.t.BiDiStreaming:return G(e,i,t);default:return null}})}function se(i,e,t){return async function(r,o){var l,p;const E=await i.unary(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,r,o==null?void 0:o.contextValues);return(l=o==null?void 0:o.onHeader)===null||l===void 0||l.call(o,E.header),(p=o==null?void 0:o.onTrailer)===null||p===void 0||p.call(o,E.trailer),E.message}}function fe(i,e,t){return function(r,o){return le(i.stream(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,W([r]),o==null?void 0:o.contextValues),o)}}function te(i,e,t){return async function(r,o){var l,p,E,D,U,me;const Te=await i.stream(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,r,o==null?void 0:o.contextValues);(U=o==null?void 0:o.onHeader)===null||U===void 0||U.call(o,Te.header);let Q;try{for(var Ne=!0,Be=C(Te.message),Fe;Fe=await Be.next(),l=Fe.done,!l;Ne=!0)D=Fe.value,Ne=!1,Q=D}catch(Qe){p={error:Qe}}finally{try{!Ne&&!l&&(E=Be.return)&&await E.call(Be)}finally{if(p)throw p.error}}if(!Q)throw new J("protocol error: missing response message",M.Internal);return(me=o==null?void 0:o.onTrailer)===null||me===void 0||me.call(o,Te.trailer),Q}}function G(i,e,t){return function(r,o){return le(i.stream(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,r,o==null?void 0:o.contextValues),o)}}function le(i,e){const t=function(){var r,o;return ce(this,arguments,function*(){const l=yield z(i);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,l.header),yield z(yield*re(C(l.message))),(o=e==null?void 0:e.onTrailer)===null||o===void 0||o.call(e,l.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function Le(){return{get(i){return i.id in this?this[i.id]:i.defaultValue},set(i,e){return this[i.id]=e,this},delete(i){return delete this[i.id],this}}}function ue(i){var e;const t=Object.assign({},i);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function De(i,e,t,r){const o=e?pe(i.I,r):ke(i.I,t);return{parse:(e?pe(i.O,r):ke(i.O,t)).parse,serialize:o.serialize}}function pe(i,e){return{parse(t){try{return i.fromBinary(t,e)}catch(r){const o=r instanceof Error?r.message:String(r);throw new J(`parse binary: ${o}`,M.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(r){const o=r instanceof Error?r.message:String(r);throw new J(`serialize binary: ${o}`,M.Internal)}}}}function ke(i,e){var t,r;const o=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,l=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,p=ue(e);return{parse(E){try{const D=l.decode(E);return i.fromJsonString(D,p)}catch(D){throw J.from(D,M.InvalidArgument)}},serialize(E){try{const D=E.toJsonString(p);return o.encode(D)}catch(D){throw J.from(D,M.Internal)}}}}function Ge(...i){const e=new AbortController,t=i.filter(o=>o!==void 0).concat(e.signal);for(const o of t){if(o.aborted){r.apply(o);break}o.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(Ke(this));for(const o of t)o.removeEventListener("abort",r)}return e}function Ue(i){const e=new AbortController,t=()=>{e.abort(new J("the operation timed out",M.DeadlineExceeded))};let r;return i!==void 0&&(i<=0?t():r=setTimeout(t,i)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function Ke(i){if(!i.aborted)return;if(i.reason!==void 0)return i.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function it(i,e){return e instanceof k.v?e:new i(e)}function nt(i,e){function t(r){return r.done===!0?r:{done:r.done,value:it(i,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),o={next:()=>r.next().then(t)};return r.throw!==void 0&&(o.throw=l=>r.throw(l).then(t)),r.return!==void 0&&(o.return=l=>r.return(l).then(t)),o}}}function gt(i){const e=I(i.next,i.interceptors),[t,r,o]=dt(i),l=Object.assign(Object.assign({},i.req),{message:it(i.req.method.I,i.req.message),signal:t});return e(l).then(p=>(o(),p),r)}function St(i){const e=I(i.next,i.interceptors),[t,r,o]=dt(i),l=Object.assign(Object.assign({},i.req),{message:nt(i.req.method.I,i.req.message),signal:t});let p=!1;return t.addEventListener("abort",function(){var E,D;const U=i.req.message[Symbol.asyncIterator]();p||(E=U.throw)===null||E===void 0||E.call(U,this.reason).catch(()=>{}),(D=U.return)===null||D===void 0||D.call(U).catch(()=>{})}),e(l).then(E=>Object.assign(Object.assign({},E),{message:{[Symbol.asyncIterator](){const D=E.message[Symbol.asyncIterator]();return{next(){return D.next().then(U=>(U.done==!0&&(p=!0,o()),U),r)}}}}}),r)}function dt(i){const{signal:e,cleanup:t}=Ue(i.timeoutMs),r=Ge(i.signal,e);return[r.signal,function(l){const p=J.from(e.aborted?Ke(e):l);return r.abort(p),t(),Promise.reject(p)},function(){t(),r.abort()}]}function I(i,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,o)=>o(r),i))!==null&&t!==void 0?t:i}function _(i,e,t){const r=typeof e=="string"?e:e.typeName,o=typeof t=="string"?t:t.name;return i.toString().replace(/\/?$/,`/${r}/${o}`)}function K(i){let e,t=new Uint8Array(0);function r(o){const l=new Uint8Array(t.length+o.length);l.set(t),l.set(o,t.length),t=l}return new ReadableStream({start(){e=i.getReader()},async pull(o){let l;for(;;){if(l===void 0&&t.byteLength>=5){let D=0;for(let U=1;U<5;U++)D=(D<<8)+t[U];l={flags:t[0],length:D}}if(l!==void 0&&t.byteLength>=l.length+5)break;const E=await e.read();if(E.done)break;r(E.value)}if(l===void 0){if(t.byteLength==0){o.close();return}o.error(new J("premature end of stream",M.DataLoss));return}const p=t.subarray(5,5+l.length);t=t.subarray(5+l.length),o.enqueue({flags:l.flags,data:p})}})}function H(i,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,i),r.setUint32(1,e.length),t}const X="Content-Type",ae="Grpc-Timeout",ge="Grpc-Status",ie="Grpc-Message",$="Grpc-Status-Details-Bin",oe="User-Agent",we="X-User-Agent",ve="X-Grpc-Web",be="application/grpc-web+proto",Se="application/grpc-web+json";function Pe(i,e,t,r){const o=new Headers(t!=null?t:{});return o.set(X,i?be:Se),o.set(ve,"1"),o.set(we,"connect-es/1.2.0"),r&&o.set(oe,"connect-es/1.2.0"),e!==void 0&&o.set(ae,`${e}m`),o}function Ye(i){switch(i){case 400:return M.Internal;case 401:return M.Unauthenticated;case 403:return M.PermissionDenied;case 404:return M.Unimplemented;case 429:return M.Unavailable;case 502:return M.Unavailable;case 503:return M.Unavailable;case 504:return M.Unavailable;default:return M.Unknown}}var Ce=m(850),He=m(733);class Ze extends k.v{constructor(e){super(),this.code=0,this.message="",this.details=[],Ce.w.util.initPartial(e,this)}static fromBinary(e,t){return new Ze().fromBinary(e,t)}static fromJson(e,t){return new Ze().fromJson(e,t)}static fromJsonString(e,t){return new Ze().fromJsonString(e,t)}static equals(e,t){return Ce.w.util.equals(Ze,e,t)}}Ze.runtime=Ce.w,Ze.typeName="google.rpc.Status",Ze.fields=Ce.w.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:He.I,repeated:!0}]);var kt=m(236);function Yt(i,e,t){try{const r=kt.W.dec(i);return e?e.fromBinary(r,t):r}catch(r){throw J.from(r,M.DataLoss)}}const Ct="0";function Wt(i){var e;const t=i.get($);if(t!=null){const o=Yt(t,Ze);if(o.code==0)return;const l=new J(o.message,o.code,i);return l.details=o.details.map(p=>({type:p.typeUrl.substring(p.typeUrl.lastIndexOf("/")+1),value:p.value})),l}const r=i.get(ge);if(r!=null){if(r===Ct)return;const o=parseInt(r,10);return o in M?new J(decodeURIComponent((e=i.get(ie))!==null&&e!==void 0?e:""),o,i):new J(`invalid grpc-status: ${r}`,M.Internal,i)}}function qe(i,e){var t;if(i>=200&&i<300){const r=Wt(e);if(r)throw r;return{foundStatus:e.has(ge)}}throw new J(decodeURIComponent((t=e.get(ie))!==null&&t!==void 0?t:`HTTP ${i}`),Ye(i),e)}const ct=128;function tt(i){const e=new Headers,t=new TextDecoder().decode(i).split(`\r
`);for(const r of t){if(r==="")continue;const o=r.indexOf(":");if(o>0){const l=r.substring(0,o).trim(),p=r.substring(o+1).trim();e.append(l,p)}}return e}function nr(i,e){const t=Wt(i);if(t)throw e.forEach((r,o)=>{t.metadata.append(o,r)}),t}function pr(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}var zt=function(i){return this instanceof zt?(this.v=i,this):new zt(i)},yr=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),o,l=[];return o={},p("next"),p("throw"),p("return"),o[Symbol.asyncIterator]=function(){return this},o;function p(Q){r[Q]&&(o[Q]=function(Ne){return new Promise(function(Be,Fe){l.push([Q,Ne,Be,Fe])>1||E(Q,Ne)})})}function E(Q,Ne){try{D(r[Q](Ne))}catch(Be){Te(l[0][3],Be)}}function D(Q){Q.value instanceof zt?Promise.resolve(Q.value.v).then(U,me):Te(l[0][2],Q)}function U(Q){E("next",Q)}function me(Q){E("throw",Q)}function Te(Q,Ne){Q(Ne),l.shift(),l.length&&E(l[0][0],l[0][1])}};function Tr(i){var e;pr();const t=(e=i.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,o,l,p,E,D,U){var me;const{serialize:Te,parse:Q}=De(o,t,i.jsonOptions,i.binaryOptions);return p=p===void 0?i.defaultTimeoutMs:p<=0?void 0:p,await gt({interceptors:i.interceptors,signal:l,timeoutMs:p,req:{stream:!1,service:r,method:o,url:_(i.baseUrl,r,o),init:{method:"POST",credentials:(me=i.credentials)!==null&&me!==void 0?me:"same-origin",redirect:"error",mode:"cors"},header:Pe(t,p,E,!1),contextValues:U!=null?U:Le(),message:D},next:async Ne=>{var Be;const Qe=await((Be=i.fetch)!==null&&Be!==void 0?Be:globalThis.fetch)(Ne.url,Object.assign(Object.assign({},Ne.init),{headers:Ne.header,signal:Ne.signal,body:H(0,Te(Ne.message))}));if(qe(Qe.status,Qe.headers),!Qe.body)throw"missing response body";const Jt=K(Qe.body).getReader();let Ve,wt;for(;;){const yt=await Jt.read();if(yt.done)break;const{flags:At,data:Ar}=yt.value;if(At===ct){if(Ve!==void 0)throw"extra trailer";Ve=tt(Ar);continue}if(wt!==void 0)throw"extra message";wt=Q(Ar)}if(Ve===void 0)throw"missing trailer";if(nr(Ve,Qe.headers),wt===void 0)throw"missing message";return{stream:!1,header:Qe.headers,message:wt,trailer:Ve}}})},async stream(r,o,l,p,E,D,U){var me;const{serialize:Te,parse:Q}=De(o,t,i.jsonOptions,i.binaryOptions);function Ne(Fe,Qe,Jt,Ve){return yr(this,arguments,function*(){const yt=K(Fe).getReader();if(Qe){if(!(yield zt(yt.read())).done)throw"extra data for trailers-only";return yield zt(void 0)}let At=!1;for(;;){const Ar=yield zt(yt.read());if(Ar.done)break;const{flags:Gr,data:ps}=Ar.value;if((Gr&ct)===ct){if(At)throw"extra trailer";At=!0;const Fo=tt(ps);nr(Fo,Ve),Fo.forEach((ou,au)=>Jt.set(au,ou));continue}if(At)throw"extra message";yield yield zt(Q(ps))}if(!At)throw"missing trailer"})}async function Be(Fe){if(o.kind!=P.t.ServerStreaming)throw"The fetch API does not support streaming request bodies";const Qe=await Fe[Symbol.asyncIterator]().next();if(Qe.done==!0)throw"missing request message";return H(0,Te(Qe.value))}return p=p===void 0?i.defaultTimeoutMs:p<=0?void 0:p,St({interceptors:i.interceptors,signal:l,timeoutMs:p,req:{stream:!0,service:r,method:o,url:_(i.baseUrl,r,o),init:{method:"POST",credentials:(me=i.credentials)!==null&&me!==void 0?me:"same-origin",redirect:"error",mode:"cors"},header:Pe(t,p,E,!1),contextValues:U!=null?U:Le(),message:D},next:async Fe=>{var Qe;const Ve=await((Qe=i.fetch)!==null&&Qe!==void 0?Qe:globalThis.fetch)(Fe.url,Object.assign(Object.assign({},Fe.init),{headers:Fe.header,signal:Fe.signal,body:await Be(Fe.message)})),{foundStatus:wt}=qe(Ve.status,Ve.headers);if(!Ve.body)throw"missing response body";const yt=new Headers;return Object.assign(Object.assign({},Fe),{header:Ve.headers,trailer:yt,message:Ne(Ve.body,wt,yt,Ve.headers)})}})}}}var vr=m(295),ne=m(646);/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var pt=null;try{pt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function je(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}je.prototype.__isLong__,Object.defineProperty(je.prototype,"__isLong__",{value:!0});function rt(i){return(i&&i.__isLong__)===!0}function dn(i){var e=Math.clz32(i&-i);return i?31-e:e}je.isLong=rt;var hn={},rr={};function Wn(i,e){var t,r,o;return e?(i>>>=0,(o=0<=i&&i<256)&&(r=rr[i],r)?r:(t=We(i,0,!0),o&&(rr[i]=t),t)):(i|=0,(o=-128<=i&&i<128)&&(r=hn[i],r)?r:(t=We(i,i<0?-1:0,!1),o&&(hn[i]=t),t))}je.fromInt=Wn;function sn(i,e){if(isNaN(i))return e?Pn:gn;if(e){if(i<0)return Pn;if(i>=Mr)return wr}else{if(i<=-us)return bt;if(i+1>=us)return Os}return i<0?sn(-i,e).neg():We(i%Mn|0,i/Mn|0,e)}je.fromNumber=sn;function We(i,e,t){return new je(i,e,t)}je.fromBits=We;var Br=Math.pow;function as(i,e,t){if(i.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return e?Pn:gn;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=i.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return as(i.substring(1),e,t).neg();for(var o=sn(Br(t,8)),l=gn,p=0;p<i.length;p+=8){var E=Math.min(8,i.length-p),D=parseInt(i.substring(p,p+E),t);if(E<8){var U=sn(Br(t,E));l=l.mul(U).add(sn(D))}else l=l.mul(o),l=l.add(sn(D))}return l.unsigned=e,l}je.fromString=as;function mn(i,e){return typeof i=="number"?sn(i,e):typeof i=="string"?as(i,e):We(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}je.fromValue=mn;var cs=1<<16,gi=1<<24,Mn=cs*cs,Mr=Mn*Mn,us=Mr/2,ls=Wn(gi),gn=Wn(0);je.ZERO=gn;var Pn=Wn(0,!0);je.UZERO=Pn;var sr=Wn(1);je.ONE=sr;var fs=Wn(1,!0);je.UONE=fs;var Fr=Wn(-1);je.NEG_ONE=Fr;var Os=We(-1,2147483647,!1);je.MAX_VALUE=Os;var wr=We(-1,-1,!0);je.MAX_UNSIGNED_VALUE=wr;var bt=We(0,-2147483648,!1);je.MIN_VALUE=bt;var de=je.prototype;de.toInt=function(){return this.unsigned?this.low>>>0:this.low},de.toNumber=function(){return this.unsigned?(this.high>>>0)*Mn+(this.low>>>0):this.high*Mn+(this.low>>>0)},de.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(bt)){var t=sn(e),r=this.div(t),o=r.mul(t).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var l=sn(Br(e,6),this.unsigned),p=this,E="";;){var D=p.div(l),U=p.sub(D.mul(l)).toInt()>>>0,me=U.toString(e);if(p=D,p.isZero())return me+E;for(;me.length<6;)me="0"+me;E=""+me+E}},de.getHighBits=function(){return this.high},de.getHighBitsUnsigned=function(){return this.high>>>0},de.getLowBits=function(){return this.low},de.getLowBitsUnsigned=function(){return this.low>>>0},de.getNumBitsAbs=function(){if(this.isNegative())return this.eq(bt)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},de.isZero=function(){return this.high===0&&this.low===0},de.eqz=de.isZero,de.isNegative=function(){return!this.unsigned&&this.high<0},de.isPositive=function(){return this.unsigned||this.high>=0},de.isOdd=function(){return(this.low&1)===1},de.isEven=function(){return(this.low&1)===0},de.equals=function(e){return rt(e)||(e=mn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},de.eq=de.equals,de.notEquals=function(e){return!this.eq(e)},de.neq=de.notEquals,de.ne=de.notEquals,de.lessThan=function(e){return this.comp(e)<0},de.lt=de.lessThan,de.lessThanOrEqual=function(e){return this.comp(e)<=0},de.lte=de.lessThanOrEqual,de.le=de.lessThanOrEqual,de.greaterThan=function(e){return this.comp(e)>0},de.gt=de.greaterThan,de.greaterThanOrEqual=function(e){return this.comp(e)>=0},de.gte=de.greaterThanOrEqual,de.ge=de.greaterThanOrEqual,de.compare=function(e){if(rt(e)||(e=mn(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},de.comp=de.compare,de.negate=function(){return!this.unsigned&&this.eq(bt)?bt:this.not().add(sr)},de.neg=de.negate,de.add=function(e){rt(e)||(e=mn(e));var t=this.high>>>16,r=this.high&65535,o=this.low>>>16,l=this.low&65535,p=e.high>>>16,E=e.high&65535,D=e.low>>>16,U=e.low&65535,me=0,Te=0,Q=0,Ne=0;return Ne+=l+U,Q+=Ne>>>16,Ne&=65535,Q+=o+D,Te+=Q>>>16,Q&=65535,Te+=r+E,me+=Te>>>16,Te&=65535,me+=t+p,me&=65535,We(Q<<16|Ne,me<<16|Te,this.unsigned)},de.subtract=function(e){return rt(e)||(e=mn(e)),this.add(e.neg())},de.sub=de.subtract,de.multiply=function(e){if(this.isZero())return this;if(rt(e)||(e=mn(e)),pt){var t=pt.mul(this.low,this.high,e.low,e.high);return We(t,pt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Pn:gn;if(this.eq(bt))return e.isOdd()?bt:gn;if(e.eq(bt))return this.isOdd()?bt:gn;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(ls)&&e.lt(ls))return sn(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,l=this.low>>>16,p=this.low&65535,E=e.high>>>16,D=e.high&65535,U=e.low>>>16,me=e.low&65535,Te=0,Q=0,Ne=0,Be=0;return Be+=p*me,Ne+=Be>>>16,Be&=65535,Ne+=l*me,Q+=Ne>>>16,Ne&=65535,Ne+=p*U,Q+=Ne>>>16,Ne&=65535,Q+=o*me,Te+=Q>>>16,Q&=65535,Q+=l*U,Te+=Q>>>16,Q&=65535,Q+=p*D,Te+=Q>>>16,Q&=65535,Te+=r*me+o*U+l*D+p*E,Te&=65535,We(Ne<<16|Be,Te<<16|Q,this.unsigned)},de.mul=de.multiply,de.divide=function(e){if(rt(e)||(e=mn(e)),e.isZero())throw Error("division by zero");if(pt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?pt.div_u:pt.div_s)(this.low,this.high,e.low,e.high);return We(t,pt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Pn:gn;var r,o,l;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Pn;if(e.gt(this.shru(1)))return fs;l=Pn}else{if(this.eq(bt)){if(e.eq(sr)||e.eq(Fr))return bt;if(e.eq(bt))return sr;var p=this.shr(1);return r=p.div(e).shl(1),r.eq(gn)?e.isNegative()?sr:Fr:(o=this.sub(e.mul(r)),l=r.add(o.div(e)),l)}else if(e.eq(bt))return this.unsigned?Pn:gn;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();l=gn}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var E=Math.ceil(Math.log(r)/Math.LN2),D=E<=48?1:Br(2,E-48),U=sn(r),me=U.mul(e);me.isNegative()||me.gt(o);)r-=D,U=sn(r,this.unsigned),me=U.mul(e);U.isZero()&&(U=sr),l=l.add(U),o=o.sub(me)}return l},de.div=de.divide,de.modulo=function(e){if(rt(e)||(e=mn(e)),pt){var t=(this.unsigned?pt.rem_u:pt.rem_s)(this.low,this.high,e.low,e.high);return We(t,pt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},de.mod=de.modulo,de.rem=de.modulo,de.not=function(){return We(~this.low,~this.high,this.unsigned)},de.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},de.clz=de.countLeadingZeros,de.countTrailingZeros=function(){return this.low?dn(this.low):dn(this.high)+32},de.ctz=de.countTrailingZeros,de.and=function(e){return rt(e)||(e=mn(e)),We(this.low&e.low,this.high&e.high,this.unsigned)},de.or=function(e){return rt(e)||(e=mn(e)),We(this.low|e.low,this.high|e.high,this.unsigned)},de.xor=function(e){return rt(e)||(e=mn(e)),We(this.low^e.low,this.high^e.high,this.unsigned)},de.shiftLeft=function(e){return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?We(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):We(0,this.low<<e-32,this.unsigned)},de.shl=de.shiftLeft,de.shiftRight=function(e){return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?We(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):We(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},de.shr=de.shiftRight,de.shiftRightUnsigned=function(e){return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?We(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?We(this.high,0,this.unsigned):We(this.high>>>e-32,0,this.unsigned)},de.shru=de.shiftRightUnsigned,de.shr_u=de.shiftRightUnsigned,de.rotateLeft=function(e){var t;return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?We(this.high,this.low,this.unsigned):e<32?(t=32-e,We(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,We(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},de.rotl=de.rotateLeft,de.rotateRight=function(e){var t;return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?We(this.high,this.low,this.unsigned):e<32?(t=32-e,We(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,We(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},de.rotr=de.rotateRight,de.toSigned=function(){return this.unsigned?We(this.low,this.high,!1):this},de.toUnsigned=function(){return this.unsigned?this:We(this.low,this.high,!0)},de.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},de.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},de.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},je.fromBytes=function(e,t,r){return r?je.fromBytesLE(e,t):je.fromBytesBE(e,t)},je.fromBytesLE=function(e,t){return new je(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},je.fromBytesBE=function(e,t){return new je(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const Ot=je;var Re;(function(i){i.Ok="ok",i.ClientNotActive="client-not-active",i.Unimplemented="unimplemented",i.Unsupported="unsupported",i.DocumentNotAttached="document-not-attached",i.DocumentNotDetached="document-not-detached",i.DocumentRemoved="document-removed",i.InvalidObjectKey="invalid-object-key",i.InvalidArgument="invalid-argument"})(Re||(Re={}));class Me extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="YorkieError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function In(i){if(i instanceof Map){const e=Array.from(i);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(i))}const Ps=i=>i?Object.entries(i).length===0:!0,Bt=i=>{const e={};for(const[t,r]of Object.entries(i))e[t]=JSON.stringify(r);return e},Et=i=>{const e={};for(const[t,r]of Object.entries(i))e[t]=JSON.parse(r);return e};var pn;(function(i){i.Put="put",i.Clear="clear"})(pn||(pn={}));class Jr{constructor(e,t){this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:pn.Put,presence:In(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:pn.Clear})}}const _s="000000000000000000000000",on="FFFFFFFFFFFFFFFFFFFFFFFF";class ot{constructor(e,t,r){this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new ot(e,t,r)}static fromStruct(e){return ot.of(Ot.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return this.actorID?`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`:`${this.lamport.toString()}:nil:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return this.actorID?`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`:`${this.lamport.toString()}:nil:${this.delimiter}`}setActor(e){return new ot(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Ur=0,Sn=4294967295,An=Ot.MAX_VALUE,Mt=new ot(Ot.fromNumber(0),Ur,_s),$t=new ot(An,Sn,on);function ht(i){return i.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Ft{constructor(e){this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Fn extends Ft{constructor(e){super(e)}}class Gt extends Ft{}class jt{constructor(e,t){this.strKey=e,this.value=t}static of(e,t){return new jt(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class xt{constructor(){this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new xt}set(e,t,r){let o;const l=this.nodeMapByKey.get(e);l!=null&&!l.isRemoved()&&l.remove(r)&&(o=l.getValue());const p=jt.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),p),(l==null||r.after(l.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,p),t.setMovedAt(r)),o}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||g.fatal(`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){g.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&!!r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class st extends Fn{constructor(e,t){super(e),this.memberNodes=t}static create(e,t){if(!t)return new st(e,xt.create());const r=xt.create();for(const[o,l]of Object.entries(t))r.set(o,l.deepcopy(),l.getCreatedAt());return new st(e,r)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,r){return this.memberNodes.set(e,t,r)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,r]of this)e.push(`"${ht(t)}":${r.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,r]of this){const{id:o,value:l,type:p}=r.toJSForTest();e[t]={key:t,id:o,value:l,type:p}}return{id:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[o]of this)t.push(o);const r=[];for(const o of t.sort()){const l=(e=this.memberNodes.get(o))===null||e===void 0?void 0:e.getValue();r.push(`"${ht(o)}":${l.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=st.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const r=t.getValue();if(e(r,this))return;r instanceof Fn&&r.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var ut;(function(i){i.Local="local",i.Remote="remote",i.UndoRedo="undoredo"})(ut||(ut={}));class mt{constructor(e,t){this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Ht{constructor(e){this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Rt{constructor(e){this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&g.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,r=e,o;for(;r;)(!o||o===r.getRight())&&(t+=r.getLength()+(r.hasLeft()?r.getLeftWeight():0)),o=r,r=r.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Rt(e.getLeft());t.root&&t.root.setParent();const r=new Rt(e.getRight());if(r.root&&r.root.setParent(),t.root){const o=t.getRightmost();t.splayNode(o),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Ee;(function(i){i[i.Null=0]="Null",i[i.Boolean=1]="Boolean",i[i.Integer=2]="Integer",i[i.Long=3]="Long",i[i.Double=4]="Double",i[i.String=5]="String",i[i.Bytes=6]="Bytes",i[i.Date=7]="Date"})(Ee||(Ee={}));class lt extends Ft{constructor(e,t){super(t),this.valueType=lt.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new lt(e,t)}static valueFromBytes(e,t){switch(e){case Ee.Null:return null;case Ee.Boolean:return!!t[0];case Ee.Integer:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case Ee.Double:{const r=new DataView(t.buffer);return t.forEach(function(o,l){r.setUint8(l,o)}),r.getFloat64(0,!0)}case Ee.String:return new TextDecoder("utf-8").decode(t);case Ee.Long:return Ot.fromBytesLE(Array.from(t));case Ee.Bytes:return t;case Ee.Date:return new Date(Ot.fromBytesLE(Array.from(t),!0).toNumber());default:throw new Me(Re.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===Ee.String?`"${ht(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=lt.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return Ee.Null;case"boolean":return Ee.Boolean;case"number":return this.isInteger(e)?Ee.Integer:Ee.Double;case"string":return Ee.String;case"object":if(e===null)return Ee.Null;if(e instanceof Ot)return Ee.Long;if(e instanceof Uint8Array)return Ee.Bytes;if(e instanceof Date)return Ee.Date}}static isSupport(e){return lt.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===Ee.Integer||e===Ee.Long||e===Ee.Double}getValue(){return this.value}toBytes(){switch(this.valueType){case Ee.Null:return new Uint8Array;case Ee.Boolean:return this.value?new Uint8Array([1]):new Uint8Array([0]);case Ee.Integer:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case Ee.Double:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case Ee.String:return new TextEncoder().encode(this.value);case Ee.Long:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case Ee.Bytes:return this.value;case Ee.Date:{const e=this.value,t=Ot.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new Me(Re.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class $r extends Ht{constructor(e){super(e),this.value=e}static createAfter(e,t){const r=new $r(t),o=e.next;return e.next=r,r.prev=e,r.next=o,o&&(o.prev=r),r}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class br{constructor(){const e=lt.of(0,Mt);e.setRemovedAt(Mt),this.dummyHead=new $r(e),this.last=this.dummyHead,this.nodeMapByIndex=new Rt,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new br}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());for(r||g.fatal(`cant find the given node: ${e.toIDString()}`);r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const o=this.findNextBeforeExecutedAt(e,r),l=$r.createAfter(o,t);o===this.last&&(this.last=l),this.nodeMapByIndex.insertAfter(o,l),this.nodeMapByCreatedAt.set(l.getCreatedAt().toIDString(),l)}moveAfter(e,t,r){const o=this.nodeMapByCreatedAt.get(e.toIDString());o||g.fatal(`cant find the given node: ${e.toIDString()}`);const l=this.nodeMapByCreatedAt.get(t.toIDString());l||g.fatal(`cant find the given node: ${t.toIDString()}`),o!==l&&(!l.getValue().getMovedAt()||r.after(l.getValue().getMovedAt()))&&(this.release(l),this.insertAfter(o.getCreatedAt(),l.getValue(),r),l.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||g.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let o=t;if(e===0&&t===this.dummyHead||r>0)do o&&(o=o.getNext());while(o&&o.isRemoved());return o}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),o=r.isRemoved();return r.remove(t)&&!o&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(!!r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class Xt extends Fn{constructor(e,t){super(e),this.elements=t}static create(e,t){if(!t)return new Xt(e,br.create());const r=br.create();for(const o of t)r.insertAfter(r.getLastCreatedAt(),o.deepcopy());return new Xt(e,r)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,r){this.elements.moveAfter(e,t,r)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const r=t.getValue();if(e(r,this))return;r instanceof Fn&&r.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{id:r,value:o,type:l}=this.get(t).toJSForTest();e[t]={key:String(t),id:r,value:o,type:l}}return{id:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=Xt.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class Jn extends mt{constructor(e,t,r){super(e,r),this.createdAt=t}static create(e,t,r){return new Jn(e,t,r)}execute(e,t){var r;const o=e.findByCreatedAt(this.getParentCreatedAt());if(o||g.fatal(`fail to find ${this.getParentCreatedAt()}`),o instanceof Fn||g.fatal(`only object and array can execute remove: ${o}`),t===ut.UndoRedo){let U=o.getByID(this.createdAt);for(;U;){if(U.getRemovedAt())return;U=(r=e.findElementPairByCreatedAt(U.getCreatedAt()))===null||r===void 0?void 0:r.parent}}const l=o.subPathOf(this.createdAt),p=this.toReverseOperation(o),E=o.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(E),{opInfos:o instanceof Xt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(l)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:l}],reverseOp:p}}toReverseOperation(e){if(e instanceof st){const t=e.subPathOf(this.createdAt);if(t!==void 0){const r=e.get(t);if(r!==void 0)return zn.create(t,r.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class zn extends mt{constructor(e,t,r,o){super(r,o),this.key=e,this.value=t}static create(e,t,r,o){return new zn(e,t,r,o)}execute(e,t){var r;const o=e.findByCreatedAt(this.getParentCreatedAt());if(o||g.fatal(`fail to find ${this.getParentCreatedAt()}`),o instanceof st||g.fatal("fail to execute, only object can execute set"),t===ut.UndoRedo){let U=o;for(;U;){if(U.getRemovedAt())return;U=(r=e.findElementPairByCreatedAt(U.getCreatedAt()))===null||r===void 0?void 0:r.parent}}const l=o.get(this.key),p=this.toReverseOperation(l),E=this.value.deepcopy(),D=o.set(this.key,E,this.getExecutedAt());return t===ut.UndoRedo&&e.findByCreatedAt(E.getCreatedAt())&&e.deregisterElement(E),e.registerElement(E,o),D&&e.registerRemovedElement(D),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:p}}toReverseOperation(e){let t=Jn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=zn.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Er extends mt{constructor(e,t,r,o){super(e,o),this.prevCreatedAt=t,this.value=r}static create(e,t,r,o){return new Er(e,t,r,o)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Xt||g.fatal("fail to execute, only array can execute add");const r=t,o=this.value.deepcopy();return r.insertAfter(this.prevCreatedAt,o),e.registerElement(o,r),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(r.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Un extends mt{constructor(e,t,r,o){super(e,o),this.prevCreatedAt=t,this.createdAt=r}static create(e,t,r,o){return new Un(e,t,r,o)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Xt||g.fatal("fail to execute, only array can execute move");const r=t,o=Number(r.subPathOf(this.createdAt));r.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const l=Number(r.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:l,previousIndex:o}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class jr{constructor(e,t,r){this.key=e,this.value=t,this.updatedAt=r}static of(e,t,r){return new jr(e,t,r)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}}class yn{constructor(){this.nodeMapByKey=new Map}static create(){return new yn}set(e,t,r){const o=this.nodeMapByKey.get(e);if(o===void 0||r.after(o.getUpdatedAt())){const l=jr.of(e,t,r);this.nodeMapByKey.set(e,l)}}has(e){return this.nodeMapByKey.has(e)}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new yn;for(const[,t]of this.nodeMapByKey)e.set(t.getKey(),t.getValue(),t.getUpdatedAt());return e}toJSON(){const e=[];for(const[t,r]of this.nodeMapByKey)e.push(`"${ht(t)}":"${ht(r.getValue())}"`);return`{${e.join(",")}}`}toXML(){return this.size()?` ${[...this.nodeMapByKey].map(([e,t])=>`${e}="${JSON.parse(t.getValue())}"`).join(" ")}`:""}size(){return this.nodeMapByKey.size}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)e[t]=r.getValue();return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}var Zt;(function(i){i.Content="content",i.Style="style"})(Zt||(Zt={}));class Qt{constructor(e){this.attributes=yn.create(),this.content=e}static create(e){return new Qt(e)}get length(){return this.content.length}substring(e,t){const r=new Qt(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=ht(this.content),t=this.attributes.toObject(),r=[];for(const[o,l]of Object.entries(t)){const p=JSON.parse(l),E=typeof p=="string"?`"${ht(o)}":"${ht(p)}"`:`"${ht(o)}":${String(p)}`;r.push(E)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}}class Nt extends Gt{constructor(e,t){super(t),this.rgaTreeSplit=e}static create(e,t){return new Nt(e,t)}edit(e,t,r,o,l){const p=t?Qt.create(t):void 0;if(p&&o)for(const[Te,Q]of Object.entries(o))p.setAttr(Te,Q,r);const[E,D,U]=this.rgaTreeSplit.edit(e,r,p,l),me=U.map(Te=>({...Te,value:Te.value?{attributes:Et(Te.value.getAttributes()),content:Te.value.getContent()}:{attributes:void 0,content:""},type:Zt.Content}));return[D,me,[E,E]]}setStyle(e,t,r,o){const[,l]=this.rgaTreeSplit.findNodeWithSplit(e[1],r),[,p]=this.rgaTreeSplit.findNodeWithSplit(e[0],r),E=[],D=this.rgaTreeSplit.findBetween(p,l),U=new Map,me=[];for(const Te of D){const Q=Te.getCreatedAt().getActorID(),Ne=o!=null&&o.size?o.has(Q)?o.get(Q):Mt:$t;if(Te.canStyle(r,Ne)){const Be=U.get(Q),Fe=Te.getCreatedAt();(!Be||Fe.after(Be))&&U.set(Q,Fe),me.push(Te)}}for(const Te of me){if(Te.isRemoved())continue;const[Q,Ne]=this.rgaTreeSplit.findIndexesFromRange(Te.createPosRange());E.push({type:Zt.Style,actor:r.getActorID(),from:Q,to:Ne,value:{attributes:Et(t)}});for(const[Be,Fe]of Object.entries(t))Te.getValue().setAttr(Be,Fe,r)}return[U,E]}indexRangeToPosRange(e,t){const r=this.rgaTreeSplit.indexToPos(e);return e===t?[r,r]:[r,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const r=t.getValue();e.push({attributes:Et(r.getAttributes()),content:r.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}getRemovedNodesLen(){return this.rgaTreeSplit.getRemovedNodesLen()}purgeRemovedNodesBefore(e){return this.rgaTreeSplit.purgeRemovedNodesBefore(e)}deepcopy(){const e=new Nt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}}class $n extends mt{constructor(e,t,r,o,l,p,E){super(e,E),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=o,this.content=l,this.attributes=p}static create(e,t,r,o,l,p,E){return new $n(e,t,r,o,l,p,E)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Nt||g.fatal("fail to execute, only Text can execute edit");const r=t,[,o]=r.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(r),{opInfos:o.map(({from:l,to:p,value:E})=>({type:"edit",from:l,to:p,value:E,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.content;return`${e}.EDIT(${t},${r},${o})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Vt extends mt{constructor(e,t,r,o,l,p){super(e,p),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=o,this.attributes=l}static create(e,t,r,o,l,p){return new Vt(e,t,r,o,l,p)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Nt||g.fatal("fail to execute, only Text can execute edit");const r=t,[,o]=r.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);return{opInfos:o.map(({from:l,to:p,value:E})=>({type:"style",from:l,to:p,value:E,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.attributes;return`${e}.STYL(${t},${r},${JSON.stringify(o)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const an=2,cn="root",Pt="text";function en(i,e){let t=0;const r=i.children;for(let o=0;o<e;o++){const l=r[o];!l||l.isRemoved||(t+=l.paddedSize)}return t}class ir{constructor(e,t=[]){if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e;)e.size+=this.paddedSize*t,e=e.parent}get isText(){return this.type===Pt}get paddedSize(){return this.size+(this.isText?0:an)}isAncestorOf(e){return or(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),o=this.value.slice(e);if(!o.length)return;this.value=r;const l=this.cloneText(e+t);return l.value=o,this.parent.insertAfterInternal(l,this),l}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.some(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this,t.isRemoved||t.updateAncestorsSize()}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const o=this.children.slice(0,e),l=this.children.slice(e);this._children=o,r._children=l,this.size=this._children.reduce((p,E)=>p+E.paddedSize,0),r.size=r._children.reduce((p,E)=>p+E.paddedSize,0);for(const p of r._children)p.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(o=>!o.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function or(i,e){if(i===e)return!1;for(;e.parent;){if(e.parent===i)return!0;e=e.parent}return!1}var ze;(function(i){i.Start="Start",i.End="End",i.Text="Text"})(ze||(ze={}));function Tn(i,e,t,r){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>i.size)throw new Error(`from is out of range: ${e} > ${i.size}`);if(t>i.size)throw new Error(`to is out of range: ${t} > ${i.size}`);if(e===t)return;let o=0;for(const l of i.children){if(e-l.paddedSize<o&&o<t){const p=l.isText?e-o:e-o-1,E=l.isText?t-o:t-o-1,D=!l.isText&&p<0,U=!l.isText&&E>l.size;(l.isText||D)&&r([l,l.isText?ze.Text:ze.Start],U),Tn(l,Math.max(0,p),Math.min(E,l.size),r),U&&r([l,ze.End],U)}o+=l.paddedSize}}function _t(i,e,t=0){for(const r of i.children)_t(r,e,t+1);e(i,t)}function vn(i,e,t=0){for(const r of i._children)vn(r,e,t+1);e(i,t)}function un(i,e,t=!0){if(e>i.size)throw new Error(`index is out of range: ${e} > ${i.size}`);if(i.isText)return{node:i,offset:e};let r=0,o=0;for(const l of i.children){if(t&&l.isText&&l.size>=e-o)return un(l,e-o,t);if(e===o)return{node:i,offset:r};if(!t&&l.paddedSize===e-o)return{node:i,offset:r+1};if(l.paddedSize>e-o)return un(l,e-o-1,t);o+=l.paddedSize,r+=1}return{node:i,offset:r}}function wn(i){return i.isText||i.children.length===0?i:wn(i.children[0])}function u(i,e){if(i.size<e)throw new Error("unacceptable path");for(let t=0;t<i.children.length;t++){const r=i.children[t];if(r.size<e)e-=r.size;else{i=r;break}}return{node:i,offset:e}}class s{constructor(e){this.root=e}tokensBetween(e,t,r){Tn(this.root,e,t,r)}traverse(e){_t(this.root,e,0)}traverseAll(e){vn(this.root,e,0)}findTreePos(e,t=!0){return un(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const o=r.parent.findOffset(r);if(o===-1)throw new Error("invalid treePos");const l=en(r.parent,o);r=r.parent,t.push(l+e.offset)}else t.push(e.offset);for(;r.parent;){const o=r.parent.findOffset(r);if(o===-1)throw new Error("invalid treePos");t.push(o),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const o=e[r];if(t=t.children[o],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return u(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const o=t.nextSibling;return o||t.parent}return t}return t.children.length===r?t:wn(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let o=0,l=1;if(t.isText){o+=r;const p=t.parent,E=p.findOffset(t);if(E===-1)throw new Error("invalid pos");o+=en(p,E),t=t.parent}else o+=en(t,r);for(;t!=null&&t.parent;){const p=t.parent,E=p.findOffset(t);if(E===-1)throw new Error("invalid pos");o+=en(p,E),l++,t=t.parent}return o+l-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const c=(i,e)=>i===e?0:i<e?-1:1;class N{constructor(e,t,r){this.key=e,this.value=t,this.isRed=r}}class A{constructor(e){this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class x{constructor(e){this.comparator=typeof e<"u"?e:c,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new A(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let o=t.parent,l=t;for(;o&&l===o.left;)l=o,o=o.parent;return o}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new N(e,t,!0);const o=this.comparator(e,r.key);return o<0?r.left=this.putInternal(e,t,r.left):o>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}var F;(function(i){i.Content="content",i.Style="style"})(F||(F={}));class Z{constructor(e,t){this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Z(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,o;return r.isText?(r.parent.children[0]===r&&t===0?o=r.parent:o=r,r=r.parent):t===0?o=r:o=r.children[t-1],Z.of(r.id,V.of(o.getCreatedAt(),o.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Z.of(V.of(ot.fromStruct(e.parentID.createdAt),e.parentID.offset),V.of(ot.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodes(e){const t=this.getParentID(),r=this.getLeftSiblingID(),o=e.findFloorNode(t);let l=e.findFloorNode(r);if(!o||!l)throw new Error(`cannot find node at ${this}`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===l.id.getOffset()&&l.insPrevID&&(l=e.findFloorNode(l.insPrevID)),[o,l]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class V{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new V(e,t)}static fromStruct(e){return V.of(ot.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}class he extends ir{constructor(e,t,r,o,l){super(t),this._value="",this.id=e,this.removedAt=l,o&&(this.attrs=o),typeof r=="string"?this.value=r:Array.isArray(r)&&(this._children=r)}static create(e,t,r,o){return new he(e,t,r,o)}deepcopy(){var e;const t=new he(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)===null||e===void 0?void 0:e.deepcopy(),t._children=this._children.map(r=>{const o=r.deepcopy();return o.parent=t,o}),t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&(this.parent.removedAt?this.parent.size-=this.paddedSize:this.updateAncestorsSize())}cloneText(e){return new he(V.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new he(V.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,r){const o=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,r);if(o){if(o.insPrevID=this.id,this.insNextID){const l=e.findFloorNode(this.insNextID);l.insPrevID=o.id,o.insNextID=this.insNextID}this.insNextID=o.id,e.registerNode(o)}return o}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}}function ye(i){var e;if(i.isText){const t=i;return{type:t.type,value:t.value}}return{type:i.type,children:i.children.map(ye),attributes:i.attrs?Et((e=i.attrs)===null||e===void 0?void 0:e.toObject()):void 0}}function Oe(i){var e;return i.isText?i.value:`<${i.type}${((e=i.attrs)===null||e===void 0?void 0:e.toXML())||""}>${i.children.map(t=>Oe(t)).join("")}</${i.type}>`}function at(i){if(i.isText){const e=i;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:i.type,children:i.children.map(at),size:i.size,isRemoved:i.isRemoved}}class xe extends Gt{constructor(e,t){super(t),this.indexTree=new s(e),this.nodeMapByID=new x(V.createComparator()),this.removedNodeMap=new Map,this.indexTree.traverse(r=>{this.nodeMapByID.put(r.id,r)})}static create(e,t){return new xe(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[r,o]=e.toTreeNodes(this);let l=o;const p=r===l,E=l.parent&&!p?l.parent:r;l.isText&&l.split(this,e.getLeftSiblingID().getOffset()-l.id.getOffset());const D=E.allChildren,U=p?0:D.indexOf(l)+1;for(let me=U;me<D.length;me++){const Te=D[me];if(!Te.id.getCreatedAt().after(t))break;l=Te}return[E,l]}style(e,t,r){const[o,l]=this.findNodesAndSplitText(e[0],r),[p,E]=this.findNodesAndSplitText(e[1],r),D=[];return D.push({type:F.Style,from:this.toIndex(o,l),to:this.toIndex(p,E),fromPath:this.toPath(o,l),toPath:this.toPath(p,E),actor:r.getActorID(),value:t?Et(t):void 0}),this.traverseInPosRange(o,l,p,E,([U])=>{if(!U.isRemoved&&!U.isText&&t){U.attrs||(U.attrs=new yn);for(const[me,Te]of Object.entries(t))U.attrs.set(me,Te,r)}}),D}edit(e,t,r,o,l,p){const[E,D]=this.findNodesAndSplitText(e[0],o),[U,me]=this.findNodesAndSplitText(e[1],o),Te=this.toIndex(E,D),Q=this.toPath(E,D),Ne=[],Be=[],Fe=[],Qe=new Map;this.traverseInPosRange(E,D,U,me,([Ve,wt],yt)=>{if(wt===ze.Start&&!yt)for(const Gr of Ve.children)Fe.push(Gr);const At=Ve.getCreatedAt().getActorID(),Ar=p?p.has(At)?p.get(At):Mt:$t;if(Ve.canDelete(o,Ar)||Ne.includes(Ve.parent)){const Gr=Qe.get(At),ps=Ve.getCreatedAt();(!Gr||ps.after(Gr))&&Qe.set(At,ps),(wt===ze.Text||wt===ze.Start)&&Ne.push(Ve),Be.push([Ve,wt])}});const Jt=this.makeDeletionChanges(Be,o);for(const Ve of Ne)Ve.remove(o),Ve.isRemoved&&this.removedNodeMap.set(Ve.id.toIDString(),Ve);for(const Ve of Fe)Ve.removedAt||E.append(Ve);if(r>0){let Ve=0,wt=E,yt=D;for(;Ve<r;)wt.split(this,wt.findOffset(yt)+1,l),yt=wt,wt=wt.parent,Ve++;Jt.push({type:F.Content,from:Te,to:Te,fromPath:Q,toPath:Q,actor:o.getActorID()})}if(t!=null&&t.length){const Ve=[];let wt=D;for(const yt of t)wt===E?E.insertAt(yt,0):E.insertAfter(yt,wt),wt=yt,vn(yt,At=>{E.isRemoved&&(At.remove(o),this.removedNodeMap.set(At.id.toIDString(),At)),this.nodeMapByID.put(At.id,At)}),yt.isRemoved||Ve.push(yt);if(Ve.length){const yt=Ve.map(At=>ye(At));Jt.length&&Jt[Jt.length-1].from===Te?Jt[Jt.length-1].value=yt:Jt.push({type:F.Content,from:Te,to:Te,fromPath:Q,toPath:Q,actor:o.getActorID(),value:yt})}}return[Jt,Qe]}editT(e,t,r,o,l){const p=this.findPos(e[0]),E=this.findPos(e[1]);this.edit([p,E],t,r,o,l)}move(e,t,r){throw new Error(`not implemented: ${e}, ${t}, ${r}`)}purgeRemovedNodesBefore(e){var t;const r=new Set;let o=0;for(const[,l]of this.removedNodeMap)l.removedAt&&e.compare(l.removedAt)>=0&&(r.add(l),o++);for(const l of r)(t=l.parent)===null||t===void 0||t.removeChild(l),this.nodeMapByID.remove(l.id),this.purge(l),this.removedNodeMap.delete(l.id.toIDString());return o}purge(e){const t=e.insPrevID,r=e.insNextID;if(t){const o=this.findFloorNode(t);o.insNextID=r}if(r){const o=this.findFloorNode(r);o.insPrevID=t}e.insPrevID=void 0,e.insNextID=void 0}findPos(e,t=!0){const r=this.indexTree.findTreePos(e,t);return Z.fromTreePos(r)}getRemovedNodesLen(){return this.removedNodeMap.size}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getIndexTree(){return this.indexTree}toXML(){return Oe(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}getRootTreeNode(){return ye(this.indexTree.getRoot())}toTestTreeNode(){return at(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new xe(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.treePosToPath(r):[]}toIndex(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.indexOf(r):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,r]=e,o=this.findPos(t);return t===r?[o.toStruct(),o.toStruct()]:[o.toStruct(),this.findPos(r).toStruct()]}posRangeToPathRange(e,t){const[r,o]=this.findNodesAndSplitText(e[0],t),[l,p]=this.findNodesAndSplitText(e[1],t);return[this.toPath(r,o),this.toPath(l,p)]}posRangeToIndexRange(e,t){const[r,o]=this.findNodesAndSplitText(e[0],t),[l,p]=this.findNodesAndSplitText(e[1],t);return[this.toIndex(r,o),this.toIndex(l,p)]}traverseInPosRange(e,t,r,o,l){const p=this.toIndex(e,t),E=this.toIndex(r,o);return this.indexTree.tokensBetween(p,E,l)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let o;for(;e.isRemoved;)o=e,e=o.parent;const l=e.findOffset(o);return{node:e,offset:l}}if(e===t)return{node:e,offset:0};let r=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};r++}return{node:e,offset:r}}makeDeletionChanges(e,t){const r=[],o=[];let l=null,p=null;for(let E=0;E<e.length;E++){const D=e[E],U=e[E+1];l||(l=D),p=D;const me=this.findRightToken(D);(!me||!U||me[0]!==U[0]||me[1]!==U[1])&&(o.push([l,p]),l=null,p=null)}for(const E of o){const[D,U]=E,[me,Te]=this.findLeftToken(D),[Q,Ne]=U,Be=Te===ze.Start?me:me.parent,Fe=Ne===ze.Start?Q:Q.parent,Qe=this.toIndex(Be,me),Jt=this.toIndex(Fe,Q);Qe<Jt&&(r.length>0&&Qe===r[r.length-1].to?(r[r.length-1].to=Jt,r[r.length-1].toPath=this.toPath(Fe,Q)):r.push({type:F.Content,from:Qe,to:Jt,fromPath:this.toPath(Be,me),toPath:this.toPath(Fe,Q),actor:t.getActorID()}))}return r}findRightToken([e,t]){if(t===ze.Start){const E=e.allChildren;return E.length>0?[E[0],E[0].isText?ze.Text:ze.Start]:[e,ze.End]}const r=e.parent,o=r.allChildren,l=o.indexOf(e);if(r&&l===o.length-1)return[r,ze.End];const p=o[l+1];return[p,p.isText?ze.Text:ze.Start]}findLeftToken([e,t]){if(t===ze.End){const E=e.allChildren;if(E.length>0){const D=E[E.length-1];return[D,D.isText?ze.Text:ze.End]}return[e,ze.Start]}const r=e.parent,o=r.allChildren,l=o.indexOf(e);if(r&&l===0)return[r,ze.Start];const p=o[l-1];return[p,p.isText?ze.Text:ze.End]}}class Lt extends mt{constructor(e,t,r,o,l,p,E){super(e,E),this.fromPos=t,this.toPos=r,this.contents=o,this.splitLevel=l,this.maxCreatedAtMapByActor=p}static create(e,t,r,o,l,p,E){return new Lt(e,t,r,o,l,p,E)}execute(e){var t;const r=e.findByCreatedAt(this.getParentCreatedAt());r||g.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof xe||g.fatal("fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),l=r,[p]=l.edit([this.fromPos,this.toPos],(t=this.contents)===null||t===void 0?void 0:t.map(E=>E.deepcopy()),this.splitLevel,o,(()=>{let E=o.getDelimiter();return this.contents!==void 0&&(E+=this.contents.length),()=>ot.of(o.getLamport(),++E,o.getActorID())})(),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(l),{opInfos:p.map(({from:E,to:D,value:U,splitLevel:me,fromPath:Te,toPath:Q})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:E,to:D,value:U,splitLevel:me,fromPath:Te,toPath:Q}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`,o=this.contents;return`${e}.EDIT(${t},${r},${o==null?void 0:o.join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class bn{constructor(e,t,r){this.clientSeq=e,this.lamport=t,this.actor=r}static of(e,t,r){return new bn(e,t,r)}next(){return new bn(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new bn(this.clientSeq,e,this.actor):new bn(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return ot.of(this.lamport,e,this.actor)}setActor(e){return new bn(this.clientSeq,this.lamport,e)}getClientSeq(){return this.clientSeq}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return this.actor?`${this.lamport.toString()}:${this.actor.substring(22,24)}:${this.clientSeq}`:`${this.lamport.toString()}:nil:${this.clientSeq}`}}const pi=new bn(0,Ot.fromInt(0,!0),_s);class Nr{constructor({id:e,operations:t,presenceChange:r,message:o}){this.id=e,this.operations=t||[],this.presenceChange=r,this.message=o}static create({id:e,operations:t,presenceChange:r,message:o}){return new Nr({id:e,operations:t,presenceChange:r,message:o})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const o=[],l=[];for(const p of this.operations){const E=p.execute(e,r);if(!E)continue;const{opInfos:D,reverseOp:U}=E;o.push(...D),U&&l.unshift(U)}return this.presenceChange&&(this.presenceChange.type===pn.Put?t.set(this.id.getActorID(),In(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:o,reverseOps:l}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}}class Ds{constructor(e,t,r,o,l,p){this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=o,this.snapshot=l,this.minSyncedTicket=p}static create(e,t,r,o,l,p){return new Ds(e,t,r,o,l,p)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Vr{constructor(e,t){this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Vr(e,t)}increaseClientSeq(e){return e===0?this:new Vr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return Vr.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const dc=new Vr(Ot.fromInt(0,!0),0);class jn{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new jn(e,t)}static fromStruct(e){return jn.of(ot.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new jn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const hc=jn.of(Mt,0);class _n{constructor(e,t){this.id=e,this.relativeOffset=t}static of(e,t){return new _n(e,t)}static fromStruct(e){const t=jn.fromStruct(e.id);return _n.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return jn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class ar extends Ht{constructor(e,t,r){super(t),this.id=e,this.removedAt=r}static create(e,t){return new ar(e,t)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new ar(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[_n.of(this.id,0),_n.of(this.id,this.getLength())]}deepcopy(){return new ar(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}}class Kr{constructor(){this.head=ar.create(hc),this.treeByIndex=new Rt,this.treeByID=new x(ar.createComparator()),this.removedNodeMap=new Map,this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Kr}edit(e,t,r,o){const[l,p]=this.findNodeWithSplit(e[1],t),[E,D]=this.findNodeWithSplit(e[0],t),U=this.findBetween(D,p),[me,Te,Q]=this.deleteNodes(U,t,o),Ne=p?p.getID():l.getID();let Be=_n.of(Ne,0);if(r){const Fe=this.posToIndex(E.createPosRange()[1],!0),Qe=this.insertAfter(E,ar.create(jn.of(t,0),r));me.length&&me[me.length-1].from===Fe?me[me.length-1].value=r:me.push({actor:t.getActorID(),from:Fe,to:Fe,value:r}),Be=_n.of(Qe.getID(),Qe.getContentLength())}for(const[Fe,Qe]of Q)this.removedNodeMap.set(Fe,Qe);return[Be,Te,me]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),o=t;return _n.of(o.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),o=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);o||g.fatal(`the node of the given id should be found: ${r.toTestString()}`);const l=this.treeByIndex.indexOf(o),p=o.isRemoved()?0:r.getOffset()-o.getID().getOffset();return l+p}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Kr;let t=this.head.getNext(),r=e.head,o;for(;t;){if(o=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const l=e.findNode(t.getInsPrevID());o.setInsPrev(l)}r=o,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let o=this.findFloorNodePreferToLeft(r);const l=r.getOffset()-o.getID().getOffset();for(this.splitNode(o,l);o.hasNext()&&o.getNext().getCreatedAt().after(t);)o=o.getNext();return[o,o.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||g.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let o=e;for(;o&&o!==t;)r.push(o),o=o.getNext();return r}splitNode(e,t){if(t>e.getContentLength()&&g.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const o=e.getInsNext();return o&&o.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r){if(!e.length)return[[],new Map,new Map];const[o,l]=this.filterNodes(e,t,r),p=new Map,E=new Map,D=this.makeChanges(l,t);for(const U of o){const me=U.getCreatedAt().getActorID();(!p.has(me)||U.getID().getCreatedAt().after(p.get(me)))&&p.set(me,U.getID().getCreatedAt()),E.set(U.getID().toIDString(),U),U.remove(t)}return this.deleteIndexNodes(l),[D,p,E]}filterNodes(e,t,r){const o=!!r,l=[],p=[],[E,D]=this.findEdgesOfCandidates(e);p.push(E);for(const U of e){const me=U.getCreatedAt().getActorID(),Te=o?r.has(me)?r.get(me):Mt:$t;U.canDelete(t,Te)?l.push(U):p.push(U)}return p.push(D),[l,p]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let o,l;for(let p=0;p<e.length-1;p++){const E=e[p],D=e[p+1];E.getNext()!=D&&([o]=this.findIndexesFromRange(E.getNext().createPosRange()),D?[,l]=this.findIndexesFromRange(D.getPrev().createPosRange()):l=this.treeByIndex.length,o<l&&r.push({actor:t.getActorID(),from:o,to:l}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],o=e[t+1];r.getNext()!=o&&this.treeByIndex.deleteRange(r,o)}}getRemovedNodesLen(){return this.removedNodeMap.size}purgeRemovedNodesBefore(e){let t=0;for(const[,r]of this.removedNodeMap)r.getRemovedAt()&&e.compare(r.getRemovedAt())>=0&&(this.treeByIndex.delete(r),this.purge(r),this.treeByID.remove(r.getID()),this.removedNodeMap.delete(r.getID().toIDString()),t++);return t}purge(e){const t=e.getPrev(),r=e.getNext(),o=e.getInsPrev(),l=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),o&&o.setInsNext(l),l&&l.setInsPrev(o),e.setInsPrev(void 0),e.setInsNext(void 0)}}const go=i=>i<0?Math.ceil(i):Math.floor(i);var It;(function(i){i[i.IntegerCnt=0]="IntegerCnt",i[i.LongCnt=1]="LongCnt"})(It||(It={}));class En extends Ft{constructor(e,t,r){switch(super(r),this.valueType=e,e){case It.IntegerCnt:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=Ot.fromNumber(t).toInt():this.value=go(t):this.value=t.toInt();break;case It.LongCnt:typeof t=="number"?this.value=Ot.fromNumber(t):this.value=t;break;default:throw new Me(Re.Unimplemented,`unimplemented type: ${e}`)}}static create(e,t,r){return new En(e,t,r)}static valueFromBytes(e,t){switch(e){case It.IntegerCnt:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case It.LongCnt:return Ot.fromBytesLE(Array.from(t));default:throw new Me(Re.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=En.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ot?It.LongCnt:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?It.LongCnt:It.IntegerCnt;default:return}}static isSupport(e){return!!En.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===It.IntegerCnt||e===It.LongCnt}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case It.IntegerCnt:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case It.LongCnt:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new Me(Re.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(r){if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`)}return t(this),t(e),this.valueType===It.LongCnt?this.value=this.value.add(e.getValue()):e.getType()===Ee.Long?this.value=this.value+e.getValue().toInt():this.value=Ot.fromNumber(this.value+go(e.getValue())).toInt(),this}}class qr extends mt{constructor(e,t,r){super(e,r),this.value=t}static create(e,t,r){return new qr(e,t,r)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof En||g.fatal("fail to execute, only Counter can execute increase");const r=t,o=this.value.deepcopy();return r.increase(o),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:o.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),r=e.getType()===Ee.Long?e.getValue().multiply(-1):e.getValue()*-1;return qr.create(this.getParentCreatedAt(),lt.of(r,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Yr extends mt{constructor(e,t,r,o,l){super(e,l),this.fromPos=t,this.toPos=r,this.attributes=o}static create(e,t,r,o,l){return new Yr(e,t,r,o,l)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof xe||g.fatal("fail to execute, only Tree can execute edit");const r={};return[...this.attributes].forEach(([p,E])=>r[p]=E),{opInfos:t.style([this.fromPos,this.toPos],r,this.getExecutedAt()).map(({from:p,to:E,value:D,fromPath:U})=>({type:"tree-style",from:p,to:E,value:D,fromPath:U,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${r},${Object.entries(this.attributes||{}).map(([o,l])=>`${o}:"${l}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}function mc(i){const e=new ne.Presence,t=e.data;for(const[r,o]of Object.entries(i))t[r]=JSON.stringify(o);return e}function gc(i){if(i.type===pn.Put)return new ne.PresenceChange({type:ne.PresenceChange_ChangeType.PUT,presence:mc(i.presence)});if(i.type===pn.Clear)return new ne.PresenceChange({type:ne.PresenceChange_ChangeType.CLEAR});throw new Me(Re.Unimplemented,"unimplemented type")}function pc(i){return new ne.Checkpoint({serverSeq:i.getServerSeqAsString(),clientSeq:i.getClientSeq()})}function yc(i){return new ne.ChangeID({clientSeq:i.getClientSeq(),lamport:i.getLamportAsString(),actorId:Ni(i.getActorID())})}function Ie(i){if(!!i)return new ne.TimeTicket({lamport:i.getLamportAsString(),delimiter:i.getDelimiter(),actorId:Ni(i.getActorID())})}function po(i){switch(i){case Ee.Null:return ne.ValueType.NULL;case Ee.Boolean:return ne.ValueType.BOOLEAN;case Ee.Integer:return ne.ValueType.INTEGER;case Ee.Long:return ne.ValueType.LONG;case Ee.Double:return ne.ValueType.DOUBLE;case Ee.String:return ne.ValueType.STRING;case Ee.Bytes:return ne.ValueType.BYTES;case Ee.Date:return ne.ValueType.DATE;default:throw new Me(Re.Unsupported,`unsupported type: ${i}`)}}function yo(i){switch(i){case It.IntegerCnt:return ne.ValueType.INTEGER_CNT;case It.LongCnt:return ne.ValueType.LONG_CNT;default:throw new Me(Re.Unsupported,`unsupported type: ${i}`)}}function yi(i){if(i instanceof st)return new ne.JSONElementSimple({type:ne.ValueType.JSON_OBJECT,createdAt:Ie(i.getCreatedAt()),value:Po(i)});if(i instanceof Xt)return new ne.JSONElementSimple({type:ne.ValueType.JSON_ARRAY,createdAt:Ie(i.getCreatedAt()),value:Yc(i)});if(i instanceof Nt)return new ne.JSONElementSimple({type:ne.ValueType.TEXT,createdAt:Ie(i.getCreatedAt())});if(i instanceof lt)return new ne.JSONElementSimple({type:po(i.getType()),createdAt:Ie(i.getCreatedAt()),value:i.toBytes()});if(i instanceof En)return new ne.JSONElementSimple({type:yo(i.getType()),createdAt:Ie(i.getCreatedAt()),value:i.toBytes()});if(i instanceof xe)return new ne.JSONElementSimple({type:ne.ValueType.TREE,createdAt:Ie(i.getCreatedAt()),value:zc(i)});throw new Me(Re.Unimplemented,"unimplemented element")}function Tc(i){return new ne.TextNodeID({createdAt:Ie(i.getCreatedAt()),offset:i.getOffset()})}function Cs(i){return new ne.TextNodePos({createdAt:Ie(i.getID().getCreatedAt()),offset:i.getID().getOffset(),relativeOffset:i.getRelativeOffset()})}function xs(i){return new ne.TreePos({parentId:ds(i.getParentID()),leftSiblingId:ds(i.getLeftSiblingID())})}function ds(i){return new ne.TreeNodeID({createdAt:Ie(i.getCreatedAt()),offset:i.getOffset()})}function vc(i){const e=new ne.Operation;if(i instanceof zn){const t=i,r=new ne.Operation_Set;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.key=t.getKey(),r.value=yi(t.getValue()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(i instanceof Er){const t=i,r=new ne.Operation_Add;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.prevCreatedAt=Ie(t.getPrevCreatedAt()),r.value=yi(t.getValue()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(i instanceof Un){const t=i,r=new ne.Operation_Move;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.prevCreatedAt=Ie(t.getPrevCreatedAt()),r.createdAt=Ie(t.getCreatedAt()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(i instanceof Jn){const t=i,r=new ne.Operation_Remove;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.createdAt=Ie(t.getCreatedAt()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(i instanceof $n){const t=i,r=new ne.Operation_Edit;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.from=Cs(t.getFromPos()),r.to=Cs(t.getToPos());const o=r.createdAtMapByActor;for(const[p,E]of t.getMaxCreatedAtMapByActor())o[p]=Ie(E);r.content=t.getContent();const l=r.attributes;for(const[p,E]of t.getAttributes())l[p]=E;r.executedAt=Ie(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(i instanceof Vt){const t=i,r=new ne.Operation_Style;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.from=Cs(t.getFromPos()),r.to=Cs(t.getToPos());const o=r.createdAtMapByActor;for(const[p,E]of t.getMaxCreatedAtMapByActor())o[p]=Ie(E);const l=r.attributes;for(const[p,E]of t.getAttributes())l[p]=E;r.executedAt=Ie(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(i instanceof qr){const t=i,r=new ne.Operation_Increase;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.value=yi(t.getValue()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(i instanceof Lt){const t=i,r=new ne.Operation_TreeEdit,o=r.createdAtMapByActor;for(const[l,p]of t.getMaxCreatedAtMapByActor())o[l]=Ie(p);r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.from=xs(t.getFromPos()),r.to=xs(t.getToPos()),r.contents=Ac(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=Ie(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(i instanceof Yr){const t=i,r=new ne.Operation_TreeStyle;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.from=xs(t.getFromPos()),r.to=xs(t.getToPos());const o=r.attributes;for(const[l,p]of t.getAttributes())o[l]=p;r.executedAt=Ie(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new Me(Re.Unimplemented,"unimplemented operation");return e}function wc(i){const e=[];for(const t of i)e.push(vc(t));return e}function bc(i){const e=new ne.Change({id:yc(i.getID()),message:i.getMessage()});return i.hasOperations()&&(e.operations=wc(i.getOperations())),i.hasPresenceChange()&&(e.presenceChange=gc(i.getPresenceChange())),e}function Ec(i){const e=[];for(const t of i)e.push(bc(t));return e}function Nc(i){const e=[];for(const t of i)e.push(new ne.RHTNode({key:t.getStrKey(),element:Ti(t.getValue())}));return e}function Ic(i){const e=[];for(const t of i)e.push(new ne.RGANode({element:Ti(t.getValue())}));return e}function Sc(i){const e=[];for(const t of i){const r=new ne.TextNode;r.id=Tc(t.getID()),r.value=t.getValue().getContent(),r.removedAt=Ie(t.getRemovedAt());const o=r.attributes,l=t.getValue().getAttrs();for(const p of l){const E=new ne.NodeAttr;E.value=p.getValue(),E.updatedAt=Ie(p.getUpdatedAt()),o[p.getKey()]=E}e.push(r)}return e}function Ac(i){const e=[];if(!i||!i.length)return e;for(const t of i)e.push(new ne.TreeNodes({content:To(t)}));return e}function To(i){if(!i)return[];const e=[];return _t(i,(t,r)=>{const o=new ne.TreeNode({id:ds(t.id),type:t.type,removedAt:Ie(t.removedAt),depth:r});if(t.isText&&(o.value=t.value),t.insPrevID&&(o.insPrevId=ds(t.insPrevID)),t.insNextID&&(o.insNextId=ds(t.insNextID)),t.attrs)for(const l of t.attrs)o.attributes[l.getKey()]=new ne.NodeAttr({value:l.getValue(),updatedAt:Ie(l.getUpdatedAt())});e.push(o)}),e}function kc(i){const e=new ne.JSONElement;return e.body.case="jsonObject",e.body.value=new ne.JSONElement_JSONObject({nodes:Nc(i.getRHT()),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function vo(i){const e=new ne.JSONElement;return e.body.case="jsonArray",e.body.value=new ne.JSONElement_JSONArray({nodes:Ic(i.getElements()),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function Oc(i){const e=new ne.JSONElement;return e.body.case="primitive",e.body.value=new ne.JSONElement_Primitive({type:po(i.getType()),value:i.toBytes(),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function Pc(i){const e=new ne.JSONElement;return e.body.case="text",e.body.value=new ne.JSONElement_Text({nodes:Sc(i.getRGATreeSplit()),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function _c(i){const e=new ne.JSONElement;return e.body.case="counter",e.body.value=new ne.JSONElement_Counter({type:yo(i.getType()),value:i.toBytes(),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function wo(i){const e=new ne.JSONElement;return e.body.case="tree",e.body.value=new ne.JSONElement_Tree({nodes:To(i.getRoot()),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function Ti(i){if(i instanceof st)return kc(i);if(i instanceof Xt)return vo(i);if(i instanceof lt)return Oc(i);if(i instanceof Nt)return Pc(i);if(i instanceof En)return _c(i);if(i instanceof xe)return wo(i);throw new Me(Re.Unimplemented,"unimplemented element")}function Dc(i){return new ne.ChangePack({documentKey:i.getDocumentKey(),checkpoint:pc(i.getCheckpoint()),isRemoved:i.getIsRemoved(),changes:Ec(i.getChanges()),snapshot:i.getSnapshot(),minSyncedTicket:Ie(i.getMinSyncedTicket())})}function Cc(i){return bn.of(i.clientSeq,Ot.fromString(i.lamport,!0),Ei(i.actorId))}function Ae(i){if(!!i)return ot.of(Ot.fromString(i.lamport,!0),i.delimiter,Ei(i.actorId))}function vi(i){const e={};return Object.entries(i.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function xc(i){const e=i.type;if(e===ne.PresenceChange_ChangeType.PUT){const t=vi(i.presence);return{type:pn.Put,presence:t}}if(e===ne.PresenceChange_ChangeType.CLEAR)return{type:pn.Clear};throw new Me(Re.Unsupported,`unsupported type: ${e}`)}function Rc(i){const e=new Map;return Object.entries(i).forEach(([t,r])=>{e.set(t,vi(r))}),e}function bo(i){switch(i){case ne.ValueType.NULL:return Ee.Null;case ne.ValueType.BOOLEAN:return Ee.Boolean;case ne.ValueType.INTEGER:return Ee.Integer;case ne.ValueType.LONG:return Ee.Long;case ne.ValueType.DOUBLE:return Ee.Double;case ne.ValueType.STRING:return Ee.String;case ne.ValueType.BYTES:return Ee.Bytes;case ne.ValueType.DATE:return Ee.Date}throw new Me(Re.Unimplemented,`unimplemented value type: ${i}`)}function Rs(i){switch(i){case ne.ValueType.INTEGER_CNT:return It.IntegerCnt;case ne.ValueType.LONG_CNT:return It.LongCnt}throw new Me(Re.Unimplemented,`unimplemented value type: ${i}`)}function wi(i){switch(i.type){case ne.ValueType.JSON_OBJECT:return i.value?Oo(i.value):st.create(Ae(i.createdAt));case ne.ValueType.JSON_ARRAY:return i.value?qc(i.value):Xt.create(Ae(i.createdAt));case ne.ValueType.TEXT:return Nt.create(Kr.create(),Ae(i.createdAt));case ne.ValueType.TREE:return Wc(i.value);case ne.ValueType.NULL:case ne.ValueType.BOOLEAN:case ne.ValueType.INTEGER:case ne.ValueType.LONG:case ne.ValueType.DOUBLE:case ne.ValueType.STRING:case ne.ValueType.BYTES:case ne.ValueType.DATE:return lt.of(lt.valueFromBytes(bo(i.type),i.value),Ae(i.createdAt));case ne.ValueType.INTEGER_CNT:case ne.ValueType.LONG_CNT:return En.create(Rs(i.type),En.valueFromBytes(Rs(i.type),i.value),Ae(i.createdAt))}}function Ls(i){return _n.of(jn.of(Ae(i.createdAt),i.offset),i.relativeOffset)}function Eo(i){return jn.of(Ae(i.createdAt),i.offset)}function Lc(i){const e=Qt.create(i.value);Object.entries(i.attributes).forEach(([r,o])=>{e.setAttr(r,o.value,Ae(o.updatedAt))});const t=ar.create(Eo(i.id),e);return t.remove(Ae(i.removedAt)),t}function Bs(i){return Z.of(hs(i.parentId),hs(i.leftSiblingId))}function hs(i){return V.of(Ae(i.createdAt),i.offset)}function Bc(i){if(!i.length)return;const e=[];return i.forEach(t=>{const r=No(t.content);e.push(r)}),e}function No(i){if(i.length===0)return;const e=[];for(const r of i)e.push(Mc(r));const t=e[e.length-1];for(let r=e.length-2;r>=0;r--){let o;for(let l=r+1;l<e.length;l++)if(i[r].depth-1===i[l].depth){o=e[l];break}o.prepend(e[r])}return xe.create(t,Mt).getRoot()}function Mc(i){const e=hs(i.id),t=he.create(e,i.type);if(t.isText)t.value=i.value;else{const r=yn.create();Object.entries(i.attributes).forEach(([o,l])=>{r.set(o,l.value,Ae(l.updatedAt))}),t.attrs=r}return i.insPrevId&&(t.insPrevID=hs(i.insPrevId)),i.insPrevId&&(t.insNextID=hs(i.insNextId)),t.removedAt=Ae(i.removedAt),t}function Fc(i){const e=[];for(const t of i){let r;if(t.body.case==="set"){const o=t.body.value;r=zn.create(o.key,wi(o.value),Ae(o.parentCreatedAt),Ae(o.executedAt))}else if(t.body.case==="add"){const o=t.body.value;r=Er.create(Ae(o.parentCreatedAt),Ae(o.prevCreatedAt),wi(o.value),Ae(o.executedAt))}else if(t.body.case==="move"){const o=t.body.value;r=Un.create(Ae(o.parentCreatedAt),Ae(o.prevCreatedAt),Ae(o.createdAt),Ae(o.executedAt))}else if(t.body.case==="remove"){const o=t.body.value;r=Jn.create(Ae(o.parentCreatedAt),Ae(o.createdAt),Ae(o.executedAt))}else if(t.body.case==="edit"){const o=t.body.value,l=new Map;Object.entries(o.createdAtMapByActor).forEach(([E,D])=>{l.set(E,Ae(D))});const p=new Map;Object.entries(o.attributes).forEach(([E,D])=>{p.set(E,D)}),r=$n.create(Ae(o.parentCreatedAt),Ls(o.from),Ls(o.to),l,o.content,p,Ae(o.executedAt))}else if(t.body.case==="style"){const o=t.body.value,l=new Map;Object.entries(o.createdAtMapByActor).forEach(([E,D])=>{l.set(E,Ae(D))});const p=new Map;Object.entries(o.attributes).forEach(([E,D])=>{p.set(E,D)}),r=Vt.create(Ae(o.parentCreatedAt),Ls(o.from),Ls(o.to),l,p,Ae(o.executedAt))}else{if(t.body.case==="select")continue;if(t.body.case==="increase"){const o=t.body.value;r=qr.create(Ae(o.parentCreatedAt),wi(o.value),Ae(o.executedAt))}else if(t.body.case==="treeEdit"){const o=t.body.value,l=new Map;Object.entries(o.createdAtMapByActor).forEach(([p,E])=>{l.set(p,Ae(E))}),r=Lt.create(Ae(o.parentCreatedAt),Bs(o.from),Bs(o.to),Bc(o.contents),o.splitLevel,l,Ae(o.executedAt))}else if(t.body.case==="treeStyle"){const o=t.body.value,l=new Map;Object.entries(o.attributes).forEach(([p,E])=>{l.set(p,E)}),r=Yr.create(Ae(o.parentCreatedAt),Bs(o.from),Bs(o.to),l,Ae(o.executedAt))}else throw new Me(Re.Unimplemented,"unimplemented operation")}e.push(r)}return e}function Io(i){const e=[];for(const t of i)e.push(Nr.create({id:Cc(t.id),operations:Fc(t.operations),presenceChange:t.presenceChange?xc(t.presenceChange):void 0,message:t.message}));return e}function Jc(i){return Vr.of(Ot.fromString(i.serverSeq,!0),i.clientSeq)}function Uc(i){return Ds.create(i.documentKey,Jc(i.checkpoint),i.isRemoved,Io(i.changes),i.snapshot,Ae(i.minSyncedTicket))}function So(i){const e=new xt;for(const r of i.nodes){const o=bi(r.element);e.set(r.key,o,o.getPositionedAt())}const t=new st(Ae(i.createdAt),e);return t.setMovedAt(Ae(i.movedAt)),t.setRemovedAt(Ae(i.removedAt)),t}function Ao(i){const e=new br;for(const r of i.nodes)e.insert(bi(r.element));const t=new Xt(Ae(i.createdAt),e);return t.setMovedAt(Ae(i.movedAt)),t.setRemovedAt(Ae(i.removedAt)),t}function $c(i){const e=lt.of(lt.valueFromBytes(bo(i.type),i.value),Ae(i.createdAt));return e.setMovedAt(Ae(i.movedAt)),e.setRemovedAt(Ae(i.removedAt)),e}function jc(i){const e=new Kr;let t=e.getHead();for(const o of i.nodes){const l=e.insertAfter(t,Lc(o));o.insPrevId&&l.setInsPrev(e.findNode(Eo(o.insPrevId))),t=l}const r=new Nt(e,Ae(i.createdAt));return r.setMovedAt(Ae(i.movedAt)),r.setRemovedAt(Ae(i.removedAt)),r}function Vc(i){const e=En.create(Rs(i.type),En.valueFromBytes(Rs(i.type),i.value),Ae(i.createdAt));return e.setMovedAt(Ae(i.movedAt)),e.setRemovedAt(Ae(i.removedAt)),e}function ko(i){const e=No(i.nodes);return xe.create(e,Ae(i.createdAt))}function bi(i){if(i.body.case==="jsonObject")return So(i.body.value);if(i.body.case==="jsonArray")return Ao(i.body.value);if(i.body.case==="primitive")return $c(i.body.value);if(i.body.case==="text")return jc(i.body.value);if(i.body.case==="counter")return Vc(i.body.value);if(i.body.case==="tree")return ko(i.body.value);throw new Me(Re.Unimplemented,"unimplemented element")}function Kc(i){if(!i)return{root:st.create(Mt),presences:new Map};const e=ne.Snapshot.fromBinary(i);return{root:bi(e.root),presences:Rc(e.presences)}}function Oo(i){if(!i)throw new Error("bytes is empty");const e=ne.JSONElement.fromBinary(i);return So(e.body.value)}function Po(i){return Ti(i).toBinary()}function qc(i){if(!i)throw new Error("bytes is empty");const e=ne.JSONElement.fromBinary(i);return Ao(e.body.value)}function Yc(i){return vo(i).toBinary()}function Wc(i){if(!i)throw new Error("bytes is empty");const e=ne.JSONElement.fromBinary(i);return ko(e.body.value)}function zc(i){return wo(i).toBinary()}function Gc(i){return i?Array.from(i).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Ei(i){return Gc(i)}function Hc(i){return new Uint8Array(i.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Ni(i){return Hc(i)}const Vn={fromPresence:vi,toChangePack:Dc,fromChangePack:Uc,fromChanges:Io,objectToBytes:Po,bytesToObject:Oo,bytesToSnapshot:Kc,toHexString:Ei,toUint8Array:Ni};class Xc{constructor(e,t,r,o){this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.isRealtimeSync=o,this.syncMode=Gn.PushPull,this.remoteChangeEventReceived=!1}changeRealtimeSync(e){return this.isRealtimeSync===e?!1:e?(this.isRealtimeSync=!0,!0):(this.cancelWatchStream(),this.isRealtimeSync=!1,!0)}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.isRealtimeSync&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}class Wr{constructor(e,t,r,o){this.id=e,this.delimiter=Ur,this.root=t,this.operations=[],this.previousPresence=In(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=o}static create(e,t,r,o){return new Wr(e,t,r,o)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerElementHasRemovedNodes(e){this.root.registerElementHasRemovedNodes(e)}getChange(){return Nr.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class ms{constructor(e){this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.removedElementSetByCreatedAt=new Set,this.elementHasRemovedNodesSetByCreatedAt=new Set,this.opsForTest=[],this.registerElement(e,void 0)}static create(){return new ms(st.create(Mt))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const o=t.element.getCreatedAt(),l=t.parent.subPathOf(o);l===void 0&&g.fatal(`cant find the given element: ${o.toIDString()}`),r.unshift(l),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof Fn&&e.getDescendants((r,o)=>(this.registerElement(r,o),!1))}deregisterElement(e){let t=0;const r=o=>{const l=o.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(l),this.removedElementSetByCreatedAt.delete(l),t++};return r(e),e instanceof Fn&&e.getDescendants(o=>(r(o),!1)),t}registerRemovedElement(e){this.removedElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerElementHasRemovedNodes(e){this.elementHasRemovedNodesSetByCreatedAt.add(e.getCreatedAt().toIDString())}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getRemovedElementSetSize(){return this.removedElementSetByCreatedAt.size}getObject(){return this.rootObject}getGarbageLen(){let e=0;const t=new Set;for(const r of this.removedElementSetByCreatedAt){t.add(r);const o=this.elementPairMapByCreatedAt.get(r);o.element instanceof Fn&&o.element.getDescendants(l=>(t.add(l.getCreatedAt().toIDString()),!1))}e+=t.size;for(const r of this.elementHasRemovedNodesSetByCreatedAt){const l=this.elementPairMapByCreatedAt.get(r).element;e+=l.getRemovedNodesLen()}return e}deepcopy(){return new ms(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.removedElementSetByCreatedAt){const o=this.elementPairMapByCreatedAt.get(r);o.element.getRemovedAt()&&e.compare(o.element.getRemovedAt())>=0&&(o.parent.purge(o.element),t+=this.deregisterElement(o.element))}for(const r of this.elementHasRemovedNodesSetByCreatedAt){const l=this.elementPairMapByCreatedAt.get(r).element,p=l.purgeRemovedNodesBefore(e);p>0&&this.elementHasRemovedNodesSetByCreatedAt.delete(l.getCreatedAt().toIDString()),t+=p}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function _o(i,e){const t=new gs(i);return new Proxy(e,t.getHandlers())}class gs{constructor(e){this.context=e,this.handlers={set:(t,r,o)=>(g.isEnabled(b.Trivial)&&g.trivial(`obj[${r}]=${JSON.stringify(o)}`),gs.setInternal(e,t,r,o),!0),get:(t,r)=>(g.isEnabled(b.Trivial)&&g.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():Ir(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(g.isEnabled(b.Trivial)&&g.trivial(`obj[${r}]`),gs.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,o){if(r.includes("."))throw new Me(Re.InvalidObjectKey,"key must not contain the '.'.");const l=e.issueTimeTicket(),p=Us(e,o,l),E=t.set(r,p,l);e.registerElement(p,t),E&&e.registerRemovedElement(E),e.push(zn.create(r,p.deepcopy(),t.getCreatedAt(),l))}static buildObjectMembers(e,t){const r={};for(const[o,l]of Object.entries(t)){if(o.includes("."))throw new Me(Re.InvalidObjectKey,"key must not contain the '.'.");const p=e.issueTimeTicket(),E=Us(e,l,p);r[o]=E}return r}static deleteInternal(e,t,r){const o=e.issueTimeTicket(),l=t.deleteByKey(r,o);!l||(e.push(Jn.create(t.getCreatedAt(),l.getCreatedAt(),o)),e.registerRemovedElement(l))}getHandlers(){return this.handlers}}function Zc(i,e){const t=new vt(i,e);return new Proxy(e,t.getHandlers())}function Qc(i){return typeof i=="string"||i instanceof String?!isNaN(i):!1}function eu(i){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(i)}class vt{constructor(e,t){this.context=e,this.array=t,this.handlers={get:(r,o,l)=>o==="getID"?()=>r.getCreatedAt():o==="getElementByID"?p=>{const E=r.getByID(p);if(!(!E||E.isRemoved()))return cr(e,E)}:o==="getElementByIndex"?p=>{const E=r.get(p);return cr(e,E)}:o==="getLast"?()=>cr(e,r.getLast()):o==="deleteByID"?p=>{const E=vt.deleteInternalByID(e,r,p);return cr(e,E)}:o==="insertAfter"?(p,E)=>{const D=vt.insertAfterInternal(e,r,p,E);return cr(e,D)}:o==="insertBefore"?(p,E)=>{const D=vt.insertBeforeInternal(e,r,p,E);return cr(e,D)}:o==="moveBefore"?(p,E)=>{vt.moveBeforeInternal(e,r,p,E)}:o==="moveAfter"?(p,E)=>{vt.moveAfterInternal(e,r,p,E)}:o==="moveFront"?p=>{vt.moveFrontInternal(e,r,p)}:o==="moveLast"?p=>{vt.moveLastInternal(e,r,p)}:Qc(o)?Ir(e,r.get(Number(o))):o==="push"?p=>vt.pushInternal(e,r,p):o==="splice"?(p,E,...D)=>vt.splice(e,r,p,E,...D):o==="length"?r.length:typeof o=="symbol"&&o===Symbol.iterator?vt.iteratorInternal.bind(this,e,r):o==="includes"?(p,E)=>vt.includes(e,r,p,E):o==="indexOf"?(p,E)=>vt.indexOf(e,r,p,E):o==="lastIndexOf"?(p,E)=>vt.lastIndexOf(e,r,p,E):o==="toTestString"?()=>vt.toTestString(r):typeof o=="string"&&eu(o)?(...p)=>{const E=Array.from(r).map(D=>Ir(e,D));return Array.prototype[o].apply(E,p)}:Reflect.get(r,o,l),deleteProperty:(r,o)=>(g.isEnabled(b.Trivial)&&g.trivial(`array[${o}]`),vt.deleteInternalByIndex(e,r,Number.parseInt(o)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield cr(e,r)}static buildArrayElements(e,t){const r=[];for(const o of t){const l=e.issueTimeTicket(),p=Us(e,o,l);r.push(p)}return r}static pushInternal(e,t,r){return vt.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,o){const l=e.issueTimeTicket(),p=t.getPrevCreatedAt(r);t.moveAfter(p,o,l),e.push(Un.create(t.getCreatedAt(),p,o,l))}static moveAfterInternal(e,t,r,o){const l=e.issueTimeTicket();t.moveAfter(r,o,l),e.push(Un.create(t.getCreatedAt(),r,o,l))}static moveFrontInternal(e,t,r){const o=e.issueTimeTicket(),l=t.getHead();t.moveAfter(l.getCreatedAt(),r,o),e.push(Un.create(t.getCreatedAt(),l.getCreatedAt(),r,o))}static moveLastInternal(e,t,r){const o=e.issueTimeTicket(),l=t.getLastCreatedAt();t.moveAfter(l,r,o),e.push(Un.create(t.getCreatedAt(),l,r,o))}static insertAfterInternal(e,t,r,o){const l=e.issueTimeTicket(),p=Us(e,o,l);return t.insertAfter(r,p),e.registerElement(p,t),e.push(Er.create(t.getCreatedAt(),r,p.deepcopy(),l)),p}static insertBeforeInternal(e,t,r,o){return vt.insertAfterInternal(e,t,t.getPrevCreatedAt(r),o)}static deleteInternalByIndex(e,t,r){const o=e.issueTimeTicket(),l=t.deleteByIndex(r,o);if(!!l)return e.push(Jn.create(t.getCreatedAt(),l.getCreatedAt(),o)),e.registerRemovedElement(l),l}static deleteInternalByID(e,t,r){const o=e.issueTimeTicket(),l=t.delete(r,o);return e.push(Jn.create(t.getCreatedAt(),l.getCreatedAt(),o)),e.registerRemovedElement(l),l}static splice(e,t,r,o,...l){const p=t.length,E=r>=0?Math.min(r,p):Math.max(p+r,0),D=o===void 0?p:o<0?E:Math.min(E+o,p),U=[];for(let me=E;me<D;me++){const Te=vt.deleteInternalByIndex(e,t,E);if(Te){const Q=Te.deepcopy();Q.setRemovedAt(),U.push(Ir(e,Q))}}if(l){let me=E===0?t.getHead().getID():t.get(E-1).getID();for(const Te of l)me=vt.insertAfterInternal(e,t,me,Te).getID()}return U}static includes(e,t,r,o){var l;const p=t.length,E=o===void 0?0:o<0?Math.max(o+p,0):o;if(E>=p)return!1;if(lt.isSupport(r))return Array.from(t).map(U=>Ir(e,U)).includes(r,E);for(let D=E;D<p;D++)if(((l=t.get(D))===null||l===void 0?void 0:l.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,o){var l;const p=t.length,E=o===void 0?0:o<0?Math.max(o+p,0):o;if(E>=p)return-1;if(lt.isSupport(r))return Array.from(t).map(U=>Ir(e,U)).indexOf(r,E);for(let D=E;D<p;D++)if(((l=t.get(D))===null||l===void 0?void 0:l.getID())===r.getID())return D;return-1}static lastIndexOf(e,t,r,o){var l;const p=t.length,E=o===void 0||o>=p?p-1:o<0?o+p:o;if(E<0)return-1;if(lt.isSupport(r))return Array.from(t).map(U=>Ir(e,U)).lastIndexOf(r,E);for(let D=E;D>0;D--)if(((l=t.get(D))===null||l===void 0?void 0:l.getID())===r.getID())return D;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Ms{constructor(e,t){this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,o){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}if(e>t){g.fatal("from should be less than or equal to to");return}const l=this.text.indexRangeToPosRange(e,t);g.isEnabled(b.Debug)&&g.debug(`EDIT: f:${e}->${l[0].toTestString()}, t:${t}->${l[1].toTestString()} c:${r}`);const p=o?Bt(o):void 0,E=this.context.issueTimeTicket(),[D,,U]=this.text.edit(l,r,E,p);return this.context.push(new $n(this.text.getCreatedAt(),l[0],l[1],D,r,p?new Map(Object.entries(p)):new Map,E)),l[0].equals(l[1])||this.context.registerElementHasRemovedNodes(this.text),this.text.findIndexesFromRange(U)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)return g.fatal("it is not initialized yet"),!1;if(e>t)return g.fatal("from should be less than or equal to to"),!1;const o=this.text.indexRangeToPosRange(e,t);g.isEnabled(b.Debug)&&g.debug(`STYL: f:${e}->${o[0].toTestString()}, t:${t}->${o[1].toTestString()} a:${JSON.stringify(r)}`);const l=Bt(r),p=this.context.issueTimeTicket(),[E]=this.text.setStyle(o,l,p);return this.context.push(new Vt(this.text.getCreatedAt(),o[0],o[1],E,new Map(Object.entries(l)),p)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([_n.fromStruct(e[0]),_n.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(g.fatal("it is not initialized yet"),""):this.text.toString()}createRangeForTest(e,t){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class Fs{constructor(e,t){this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){g.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),r=lt.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(qr.create(this.counter.getCreatedAt(),r,t)),this}}function Ii(i,e,t){const{type:r}=i,o=t.issueTimeTicket();if(r===Pt){Do(i);const{value:l}=i,p=he.create(V.of(o,0),r,l);e.append(p)}else{const{children:l=[]}=i;let{attributes:p}=i,E;if(typeof p=="object"&&!Ps(p)){p=Bt(p),E=new yn;for(const[U,me]of Object.entries(p))E.set(U,me,o)}const D=he.create(V.of(o,0),r,void 0,E);e.append(D);for(const U of l)Ii(U,D,t)}}function tu(i,e){const{type:t}=e,r=i.issueTimeTicket();let o;if(e.type===Pt){const{value:l}=e;o=he.create(V.of(r,0),t,l)}else if(e){const{children:l=[]}=e;let{attributes:p}=e,E;if(typeof p=="object"&&!Ps(p)){p=Bt(p),E=new yn;for(const[D,U]of Object.entries(p))E.set(D,U,r)}o=he.create(V.of(i.issueTimeTicket(),0),t,void 0,E);for(const D of l)Ii(D,o,i)}return o}function Do(i){if(!i.value.length)throw new Error("text node cannot have empty value");return!0}function Co(i){if(!i.length)return!0;if(i[0].type===Pt)for(const t of i){const{type:r}=t;if(r!==Pt)throw new Error("element node and text node cannot be passed together");Do(t)}else for(const t of i){const{type:r}=t;if(r===Pt)throw new Error("element node and text node cannot be passed together")}return!0}class Js{constructor(e){this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return he.create(V.of(e.issueTimeTicket(),0),cn);const t=he.create(V.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Ii(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[r,o]=this.tree.pathToPosRange(e),l=this.context.issueTimeTicket(),p=t?Bt(t):void 0;this.tree.style([r,o],p,l),this.context.push(Yr.create(this.tree.getCreatedAt(),r,o,p?new Map(Object.entries(p)):new Map,l))}style(e,t,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),l=this.tree.findPos(t),p=this.context.issueTimeTicket(),E=r?Bt(r):void 0;this.tree.style([o,l],E,p),this.context.push(Yr.create(this.tree.getCreatedAt(),o,l,E?new Map(Object.entries(E)):new Map,p))}editInternal(e,t,r,o=0){var l;if(r.length!==0&&r[0]&&(Co(r),r[0].type!==Pt))for(const U of r){const{children:me=[]}=U;Co(me)}const p=this.context.getLastTimeTicket();let E=new Array;if(((l=r[0])===null||l===void 0?void 0:l.type)===Pt){let U="";for(const me of r){const{value:Te}=me;U+=Te}E.push(he.create(V.of(this.context.issueTimeTicket(),0),Pt,U))}else E=r.map(U=>U&&tu(this.context,U)).filter(U=>U);const[,D]=this.tree.edit([e,t],E.length?E.map(U=>U==null?void 0:U.deepcopy()):void 0,o,p,()=>this.context.issueTimeTicket());return this.context.push(Lt.create(this.tree.getCreatedAt(),e,t,E.length?E:void 0,o,D,p)),e.equals(t)||this.context.registerElementHasRemovedNodes(this.tree),!0}editByPath(e,t,r,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const l=this.tree.pathToPos(e),p=this.tree.pathToPos(t);return this.editInternal(l,p,r?[r]:[],o)}editBulkByPath(e,t,r,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const l=this.tree.pathToPos(e),p=this.tree.pathToPos(t);return this.editInternal(l,p,r,o)}edit(e,t,r,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const l=this.tree.findPos(e),p=this.tree.findPos(t);return this.editInternal(l,p,r?[r]:[],o)}editBulk(e,t,r,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const l=this.tree.findPos(e),p=this.tree.findPos(t);return this.editInternal(l,p,r,o)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){g.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){g.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){g.fatal("it is not initialized yet");return}const t=[Z.fromStruct(e[0]),Z.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t,this.context.getLastTimeTicket())}posRangeToPathRange(e){if(!this.context||!this.tree){g.fatal("it is not initialized yet");return}const t=[Z.fromStruct(e[0]),Z.fromStruct(e[1])];return this.tree.posRangeToPathRange(t,this.context.getLastTimeTicket())}}function xo(i,e){return _o(i,e)}function cr(i,e){if(e){if(e instanceof lt)return e;if(e instanceof st)return _o(i,e);if(e instanceof Xt)return Zc(i,e);if(e instanceof Nt)return new Ms(i,e);if(e instanceof En){const t=new Fs(It.IntegerCnt,0);return t.initialize(i,e),t}else if(e instanceof xe){const t=new Js;return t.initialize(i,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Ir(i,e){const t=cr(i,e);return t instanceof lt?t.getValue():t}function Us(i,e,t){let r;if(lt.isSupport(e))r=lt.of(e,t);else if(Array.isArray(e))r=Xt.create(t,vt.buildArrayElements(i,e));else if(typeof e=="object")e instanceof Ms?(r=Nt.create(Kr.create(),t),e.initialize(i,r)):e instanceof Fs?(r=En.create(e.getValueType(),e.getValue(),t),e.initialize(i,r)):e instanceof Js?(r=xe.create(e.buildRoot(i),t),e.initialize(i,r)):r=st.create(t,gs.buildObjectMembers(i,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const Ro=50;class nu{constructor(){this.undoStack=[],this.redoStack=[]}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Ro&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Ro&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}var kn;(function(i){i.Detached="detached",i.Attached="attached",i.Removed="removed"})(kn||(kn={}));var $e;(function(i){i.Snapshot="snapshot",i.LocalChange="local-change",i.RemoteChange="remote-change",i.Initialized="initialized",i.Watched="watched",i.Unwatched="unwatched",i.PresenceChanged="presence-changed"})($e||($e={}));class Lo{constructor(e,t){this.opts=t||{},this.key=e,this.status=kn.Detached,this.root=ms.create(),this.changeID=pi,this.checkpoint=dc,this.localChanges=[],this.eventStream=R(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new nu,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)}}update(e,t){if(this.getStatus()===kn.Removed)throw new Me(Re.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),o=Wr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},t);try{const l=xo(o,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(l,new Jr(o,this.clone.presences.get(r)))}catch(l){throw this.clone=void 0,g.error(l),l}finally{this.isUpdating=!1}if(o.hasChange()){g.isEnabled(b.Trivial)&&g.trivial(`trying to update a local change: ${this.toJSON()}`);const l=o.getChange(),{opInfos:p,reverseOps:E}=l.execute(this.root,this.presences,ut.Local),D=o.getReversePresence();D&&E.push({type:"presence",value:D}),this.localChanges.push(l),E.length>0&&this.internalHistory.pushUndo(E),p.length>0&&this.internalHistory.clearRedo(),this.changeID=l.getID(),p.length>0&&this.publish({type:$e.LocalChange,value:{message:l.getMessage()||"",operations:p,actor:r}}),l.hasPresenceChange()&&this.publish({type:$e.PresenceChanged,value:{clientID:r,presence:this.getPresence(r)}}),g.isEnabled(b.Trivial)&&g.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,o){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const E=t;return this.eventStream.subscribe(D=>{D.type!==$e.Initialized&&D.type!==$e.Watched&&D.type!==$e.Unwatched&&D.type!==$e.PresenceChanged||E(D)},r,o)}if(e==="my-presence"){const E=t;return this.eventStream.subscribe(D=>{D.type!==$e.Initialized&&D.type!==$e.Watched&&D.type!==$e.Unwatched&&D.type!==$e.PresenceChanged||D.type!==$e.Initialized&&D.value.clientID!==this.changeID.getActorID()||E(D)},r,o)}if(e==="others"){const E=t;return this.eventStream.subscribe(D=>{D.type!==$e.Watched&&D.type!==$e.Unwatched&&D.type!==$e.PresenceChanged||D.value.clientID!==this.changeID.getActorID()&&E(D)},r,o)}const l=e,p=t;return this.eventStream.subscribe(E=>{if(E.type===$e.Initialized||E.type===$e.Watched||E.type===$e.Unwatched||E.type===$e.PresenceChanged)return;if(E.type===$e.Snapshot){l==="$"&&p(E);return}const{message:D,operations:U,actor:me}=E.value,Te=[];for(const Q of U)this.isSameElementOrChildOf(Q.path,l)&&Te.push(Q);Te.length&&p({type:E.type,value:{message:D,operations:Te,actor:me}})},r,o)}if(typeof e=="function"){const l=e,p=t,E=r;return this.eventStream.subscribe(D=>{D.type===$e.Initialized||D.type===$e.Watched||D.type===$e.Unwatched||D.type===$e.PresenceChanged||l(D)},p,E)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((l,p)=>l===r[p])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges());this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.setStatus(kn.Removed),g.isEnabled(b.Trivial)&&g.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:In(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Ds.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}getKey(){return this.key}setStatus(e){this.status=e}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Wr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return xo(e,this.clone.root.getObject())}getOpsForTest(){return this.root.opsForTest}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}applySnapshot(e,t){const{root:r,presences:o}=Vn.bytesToSnapshot(t);this.root=new ms(r),this.presences=o,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish({type:$e.Snapshot,value:t})}applyChanges(e){g.isEnabled(b.Debug)&&g.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getRemovedElementSetSize()}`),g.isEnabled(b.Trivial)&&g.trivial(e.map(t=>`${t.getID().toTestString()}	${t.toTestString()}`).join(`
`)),this.ensureClone();for(const t of e){t.execute(this.clone.root,this.clone.presences,ut.Remote);let r;const o=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(o)){const p=t.getPresenceChange();switch(p.type){case pn.Put:r={type:this.presences.has(o)?$e.PresenceChanged:$e.Watched,value:{clientID:o,presence:p.presence}};break;case pn.Clear:r={type:$e.Unwatched,value:{clientID:o,presence:this.getPresence(o)}},this.removeOnlineClient(o);break}}const{opInfos:l}=t.execute(this.root,this.presences,ut.Remote);l.length>0&&this.publish({type:$e.RemoteChange,value:{actor:o,message:t.getMessage()||"",operations:l}}),r&&this.publish(r),this.changeID=this.changeID.syncLamport(t.getID().getLamport())}g.isEnabled(b.Debug)&&g.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getRemovedElementSetSize()}`)}getValueByPath(e){if(!e.startsWith("$"))throw new Me(Re.InvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const o of t)if(r=r[o],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!==kn.Attached)return{};const e=this.presences.get(this.changeID.getActorID());return In(e)}getPresence(e){if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?In(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?In(t):void 0}getPresences(){const e=[];for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:In(this.presences.get(t))});return e}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=Wr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const D of e){if(!(D instanceof mt)){new Jr(t,In(this.clone.presences.get(this.changeID.getActorID()))).set(D.value,{addToHistory:!0});continue}const U=t.issueTimeTicket();D.setExecutedAt(U),t.push(D)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,ut.UndoRedo);const{opInfos:o,reverseOps:l}=r.execute(this.root,this.presences,ut.UndoRedo),p=t.getReversePresence();if(p&&l.push({type:"presence",value:p}),l.length>0&&this.internalHistory.pushRedo(l),!r.hasPresenceChange()&&o.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const E=this.changeID.getActorID();o.length>0&&this.publish({type:$e.LocalChange,value:{message:r.getMessage()||"",operations:o,actor:E}}),r.hasPresenceChange()&&this.publish({type:$e.PresenceChanged,value:{clientID:E,presence:this.getPresence(E)}})}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=Wr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const D of e){if(!(D instanceof mt)){new Jr(t,In(this.clone.presences.get(this.changeID.getActorID()))).set(D.value,{addToHistory:!0});continue}const U=t.issueTimeTicket();D.setExecutedAt(U),t.push(D)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,ut.UndoRedo);const{opInfos:o,reverseOps:l}=r.execute(this.root,this.presences,ut.UndoRedo),p=t.getReversePresence();if(p&&l.push({type:"presence",value:p}),l.length>0&&this.internalHistory.pushUndo(l),!r.hasPresenceChange()&&o.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const E=this.changeID.getActorID();o.length>0&&this.publish({type:$e.LocalChange,value:{message:r.getMessage()||"",operations:o,actor:E}}),r.hasPresenceChange()&&this.publish({type:$e.PresenceChanged,value:{clientID:E,presence:this.getPresence(E)}})}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function ru(i,e){return t=>async r=>(i&&r.header.set("x-api-key",i),e&&r.header.set("authorization",e),await t(r))}const Bo=JSON.parse('{"u2":"yorkie-js-sdk","i8":"0.4.12"}');function su(){return i=>async e=>(e.header.set("x-yorkie-user-agent",Bo.u2+"/"+Bo.i8),await i(e))}var Gn;(function(i){i.PushPull="pushpull",i.PushOnly="pushonly"})(Gn||(Gn={}));var ur;(function(i){i.Deactivated="deactivated",i.Activated="activated"})(ur||(ur={}));var Sr;(function(i){i.Connected="connected",i.Disconnected="disconnected"})(Sr||(Sr={}));var zr;(function(i){i.Synced="synced",i.SyncFailed="sync-failed"})(zr||(zr={}));var Nn;(function(i){i.StatusChanged="status-changed",i.DocumentChanged="document-changed",i.StreamConnectionStatusChanged="stream-connection-status-changed",i.DocumentSynced="document-synced"})(Nn||(Nn={}));const $s={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class Mo{constructor(e,t){t=t||$s,this.key=t.key?t.key:d(),this.status=ur.Deactivated,this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.syncLoopDuration=t.syncLoopDuration||$s.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||$s.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||$s.retrySyncLoopDelay,this.rpcClient=j(vr.V,Tr({baseUrl:e,interceptors:[ru(t.apiKey,t.token),su()]})),this.eventStream=R(r=>{this.eventStreamObserver=r})}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status=ur.Activated,this.runSyncLoop(),this.eventStreamObserver.next({type:Nn.StatusChanged,value:this.status}),g.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw g.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){if(this.status===ur.Deactivated)return Promise.resolve();for(const[e]of this.attachmentMap)this.detachInternal(e);return this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.status=ur.Deactivated,this.eventStreamObserver.next({type:Nn.StatusChanged,value:this.status}),g.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw g.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,t={}){var r;if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==kn.Detached)throw new Me(Re.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((l,p)=>p.set(t.initialPresence||{}));const o=(r=t.isRealtimeSync)!==null&&r!==void 0?r:!0;return this.rpcClient.attachDocument({clientId:this.id,changePack:Vn.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async l=>{const p=Vn.fromChangePack(l.changePack);return e.applyChangePack(p),e.getStatus()===kn.Removed||(e.setStatus(kn.Attached),this.attachmentMap.set(e.getKey(),new Xc(this.reconnectStreamDelay,e,l.documentId,o)),o&&await this.runWatchLoop(e.getKey()),g.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(l=>{throw g.error(`[AD] c:"${this.getKey()}" err :`,l),l})}detach(e,t={}){var r;if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const o=this.attachmentMap.get(e.getKey());if(!o)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((l,p)=>p.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:o.docID,changePack:Vn.toChangePack(e.createChangePack()),removeIfNotAttached:(r=t.removeIfNotAttached)!==null&&r!==void 0?r:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(l=>{const p=Vn.fromChangePack(l.changePack);return e.applyChangePack(p),e.getStatus()!==kn.Removed&&e.setStatus(kn.Detached),this.detachInternal(e.getKey()),g.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(l=>{throw g.error(`[DD] c:"${this.getKey()}" err :`,l),l})}pause(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);return this.changeRealtimeSync(e,!1)}resume(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);return this.changeRealtimeSync(e,!0)}pauseRemoteChanges(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);t.changeSyncMode(Gn.PushOnly)}resumeRemoteChanges(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);t.changeSyncMode(Gn.PushPull),t.remoteChangeEventReceived=!0}async changeRealtimeSync(e,t){const r=this.attachmentMap.get(e.getKey());if(!r)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);return r.changeRealtimeSync(t)?t?(r.remoteChangeEventReceived=!0,await this.runWatchLoop(e.getKey()),e):(this.eventStreamObserver.next({type:Nn.StreamConnectionStatusChanged,value:Sr.Disconnected}),g.debug(`[WD] c:"${this.getKey()}" unwatches`),e):e}sync(e,t=Gn.PushPull){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const r=[];if(e){const o=this.attachmentMap.get(e.getKey());if(!o)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);r.push(this.syncInternal(o,t))}else this.attachmentMap.forEach(o=>{r.push(this.syncInternal(o,o.syncMode))});return Promise.all(r).catch(o=>{throw this.eventStreamObserver.next({type:Nn.DocumentSynced,value:zr.SyncFailed}),o})}remove(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=Vn.toChangePack(e.createChangePack());return r.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(o=>{const l=Vn.fromChangePack(o.changePack);e.applyChangePack(l),this.detachInternal(e.getKey()),g.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(o=>{throw g.error(`[RD] c:"${this.getKey()}" err :`,o),o})}subscribe(e,t,r){return this.eventStream.subscribe(e,t,r)}getID(){return this.id}getKey(){return this.key}isActive(){return this.status===ur.Activated}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){g.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(r=>{g.error(`[SL] c:"${this.getKey()}" sync failed:`,r),this.eventStreamObserver.next({type:Nn.DocumentSynced,value:zr.SyncFailed}),setTimeout(e,this.retrySyncLoopDelay)})};g.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new Me(Re.DocumentNotAttached,`${e} is not attached`);return t.runWatchLoop(r=>{if(!this.isActive())return Promise.reject(new Me(Re.ClientNotActive,`${this.key} is not active`));const o=new AbortController,l=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:o.signal});return this.eventStreamObserver.next({type:Nn.StreamConnectionStatusChanged,value:Sr.Connected}),g.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((p,E)=>{(async()=>{try{for await(const U of l)this.handleWatchDocumentsResponse(t,U),U.body.case==="initialization"&&p([l,o])}catch(U){this.eventStreamObserver.next({type:Nn.StreamConnectionStatusChanged,value:Sr.Disconnected}),g.debug(`[WD] c:"${this.getKey()}" unwatches`),r(),E(U)}})()})})}handleWatchDocumentsResponse(e,t){const r=e.doc.getKey();if(t.body.case==="initialization"){const o=t.body.value.clientIds,l=new Set;for(const p of o)l.add(p);e.doc.setOnlineClients(l),e.doc.publish({type:$e.Initialized,value:e.doc.getPresences()});return}else if(t.body.case==="event"){const o=t.body.value,l=o.type,p=o.publisher;switch(l){case ne.DocEventType.DOCUMENT_CHANGED:e.remoteChangeEventReceived=!0,this.eventStreamObserver.next({type:Nn.DocumentChanged,value:[r]});break;case ne.DocEventType.DOCUMENT_WATCHED:e.doc.addOnlineClient(p),e.doc.hasPresence(p)&&e.doc.publish({type:$e.Watched,value:{clientID:p,presence:e.doc.getPresence(p)}});break;case ne.DocEventType.DOCUMENT_UNWATCHED:{const E=e.doc.getPresence(p);e.doc.removeOnlineClient(p),E&&e.doc.publish({type:$e.Unwatched,value:{clientID:p,presence:E}});break}}}}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),g.debug(`[WD] c:"${this.getKey()}" unwatches`),this.eventStreamObserver.next({type:Nn.StreamConnectionStatusChanged,value:Sr.Disconnected}),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:r,docID:o}=e,l=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:o,changePack:Vn.toChangePack(l),pushOnly:t===Gn.PushOnly},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(p=>{const E=Vn.fromChangePack(p.changePack);if(E.hasChanges()&&t===Gn.PushOnly)return r;r.applyChangePack(E),this.eventStreamObserver.next({type:Nn.DocumentSynced,value:zr.Synced}),r.getStatus()===kn.Removed&&this.detachInternal(r.getKey());const D=r.getKey(),U=E.getChangeSize();return g.info(`[PP] c:"${this.getKey()}" sync d:"${D}", push:${l.getChangeSize()} pull:${U} cp:${E.getCheckpoint().toTestString()}`),r}).catch(p=>{throw g.error(`[PP] c:"${this.getKey()}" err :`,p),p})}}const iu={Client:Mo,Document:Lo,Primitive:lt,Text:Ms,Counter:Fs,Tree:Js,IntType:It.IntegerCnt,LongType:It.LongCnt}})(),y})())})(lc);const fc=Bf(lc.exports),Mf=(n,a)=>{const f=n.__vccOpts||n;for(const[h,m]of a)f[h]=m;return f},Ff=[{title:"Todo",cards:[{title:"Pruning document"},{title:"Clean up codes"}]},{title:"Doing",cards:[{title:"Array operations"}]},{title:"Done",cards:[{title:"Create a sample page"},{title:"Launch demo site"}]}],fr=new fc.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"}),Zn=new fc.Document(`vuejs-kanban-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`),Jf={data(){return{lists:[],title:"",opened:null}},created(){this.fetchDoc()},beforeUnmount(){this.disconnect()},watch:{opened(n){this.$nextTick(function(){n===0?this.$refs.addListForm.querySelector("input").focus():n&&this.$refs.addCardForm[n-1].querySelector("input").focus(),this.title=""})}},methods:{async fetchDoc(){await fr.activate(),await fr.attach(Zn),Zn.update(n=>{n.lists||(n.lists=Ff)},"create default list if not exists"),Zn.subscribe(n=>{this.lists=Zn.getRoot().lists}),await fr.sync(),this.lists=Zn.getRoot().lists},async disconnect(){await fr.deactivate()},isOpened(n){return this.opened===n},openForm(n){this.opened=n},closeForm(){this.opened=null},addCard(n){this.title!==""&&Zn.update(a=>{a.lists.getElementByID(n.getID()).cards.push({title:this.title}),this.title=""},`add new card by ${fr.getID()}`)},deleteCard(n,a){Zn.update(f=>{f.lists.getElementByID(n.getID()).cards.deleteByID(a.getID())},`delete a card by ${fr.getID()}`)},addList(){this.title!==""&&Zn.update(n=>{n.lists.push({title:this.title,cards:[]}),this.title=""},`add new list by ${fr.getID()}`)},deleteList(n){Zn.update(a=>{a.lists.deleteByID(n.getID())},`delete a list by ${fr.getID()}`)}}},Uf={class:"list"},$f=["onClick"],jf={class:"title"},Vf={class:"card"},Kf=["onClick"],qf={key:0,class:"add-form"},Yf=["onKeyup"],Wf={class:"buttons"},zf=["onClick"],Gf=["onClick"],Hf={class:"add-list",ref:"addListForm"},Xf={key:0,class:"add-form"},Zf={class:"buttons"};function Qf(n,a,f,h,m,y){return Hn(),Xn(On,null,[(Hn(!0),Xn(On,null,Xo(m.lists,(b,v)=>(Hn(),Xn("div",Uf,[nn("span",{class:"delete",onClick:g=>y.deleteList(b)},"\u274C",8,$f),nn("div",jf,Uo(b.title),1),(Hn(!0),Xn(On,null,Xo(b.cards,g=>(Hn(),Xn("div",Vf,[nn("span",{class:"delete",onClick:d=>y.deleteCard(b,g)},"\u274C",8,Kf),ac(" "+Uo(g.title),1)]))),256)),nn("div",{class:"add-card",ref_for:!0,ref:"addCardForm"},[y.isOpened(v+1)?(Hn(),Xn("div",qf,[Ho(nn("input",{type:"text",placeholder:"Enter card title","onUpdate:modelValue":a[0]||(a[0]=g=>m.title=g),onKeyup:[zs(g=>y.addCard(b),["enter"]),a[1]||(a[1]=zs(g=>y.closeForm(),["esc"]))]},null,40,Yf),[[Ta,m.title]]),nn("div",Wf,[nn("input",{type:"button",value:"Add",onClick:g=>y.addCard(b)},null,8,zf),nn("input",{type:"button",value:"Close",class:"pull-right",onClick:a[2]||(a[2]=g=>y.closeForm())})])])):(Hn(),Xn("div",{key:1,class:"add-card-opener",onClick:g=>y.openForm(v+1)},"Add another card",8,Gf))],512)]))),256)),nn("div",Hf,[y.isOpened(0)?(Hn(),Xn("div",Xf,[Ho(nn("input",{type:"text",placeholder:"Enter list title","onUpdate:modelValue":a[3]||(a[3]=b=>m.title=b),onKeyup:[a[4]||(a[4]=zs(b=>y.addList(),["enter"])),a[5]||(a[5]=zs(b=>y.closeForm(),["esc"]))]},null,544),[[Ta,m.title]]),nn("div",Zf,[nn("input",{type:"button",value:"Add",onClick:a[6]||(a[6]=b=>y.addList())}),nn("input",{type:"button",value:"Close",class:"pull-right",onClick:a[7]||(a[7]=b=>y.closeForm())})])])):(Hn(),Xn("div",{key:1,class:"add-list-opener",onClick:a[8]||(a[8]=b=>y.openForm(0))},"Add another list"))],512)],64)}const ed=Mf(Jf,[["render",Qf]]);xf(ed).mount("#app");
