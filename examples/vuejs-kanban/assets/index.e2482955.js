(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))h(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const E of p.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&h(E)}).observe(document,{childList:!0,subtree:!0});function f(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerpolicy&&(p.referrerPolicy=m.referrerpolicy),m.crossorigin==="use-credentials"?p.credentials="include":m.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function h(m){if(m.ep)return;m.ep=!0;const p=f(m);fetch(m.href,p)}})();function Hi(r,a){const f=Object.create(null),h=r.split(",");for(let m=0;m<h.length;m++)f[h[m]]=!0;return a?m=>!!f[m.toLowerCase()]:m=>!!f[m]}const lt={},ns=[],Jn=()=>{},wu=()=>!1,bu=/^on[^a-z]/,li=r=>bu.test(r),Xi=r=>r.startsWith("onUpdate:"),$t=Object.assign,Zi=(r,a)=>{const f=r.indexOf(a);f>-1&&r.splice(f,1)},Eu=Object.prototype.hasOwnProperty,Qe=(r,a)=>Eu.call(r,a),_e=Array.isArray,rs=r=>fi(r)==="[object Map]",xa=r=>fi(r)==="[object Set]",Ue=r=>typeof r=="function",xt=r=>typeof r=="string",Qi=r=>typeof r=="symbol",vt=r=>r!==null&&typeof r=="object",Ra=r=>vt(r)&&Ue(r.then)&&Ue(r.catch),La=Object.prototype.toString,fi=r=>La.call(r),Iu=r=>fi(r).slice(8,-1),Ba=r=>fi(r)==="[object Object]",eo=r=>xt(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,ei=Hi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),di=r=>{const a=Object.create(null);return f=>a[f]||(a[f]=r(f))},Nu=/-(\w)/g,os=di(r=>r.replace(Nu,(a,f)=>f?f.toUpperCase():"")),Su=/\B([A-Z])/g,Ur=di(r=>r.replace(Su,"-$1").toLowerCase()),Ma=di(r=>r.charAt(0).toUpperCase()+r.slice(1)),Pi=di(r=>r?`on${Ma(r)}`:""),ii=(r,a)=>!Object.is(r,a),ti=(r,a)=>{for(let f=0;f<r.length;f++)r[f](a)},oi=(r,a,f)=>{Object.defineProperty(r,a,{configurable:!0,enumerable:!1,value:f})},Bi=r=>{const a=parseFloat(r);return isNaN(a)?r:a};let Zo;const Mi=()=>Zo||(Zo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function to(r){if(_e(r)){const a={};for(let f=0;f<r.length;f++){const h=r[f],m=xt(h)?Pu(h):to(h);if(m)for(const p in m)a[p]=m[p]}return a}else{if(xt(r))return r;if(vt(r))return r}}const Au=/;(?![^(]*\))/g,ku=/:([^]+)/,Ou=/\/\*[^]*?\*\//g;function Pu(r){const a={};return r.replace(Ou,"").split(Au).forEach(f=>{if(f){const h=f.split(ku);h.length>1&&(a[h[0].trim()]=h[1].trim())}}),a}function no(r){let a="";if(xt(r))a=r;else if(_e(r))for(let f=0;f<r.length;f++){const h=no(r[f]);h&&(a+=h+" ")}else if(vt(r))for(const f in r)r[f]&&(a+=f+" ");return a.trim()}const Du="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_u=Hi(Du);function Fa(r){return!!r||r===""}const Qo=r=>xt(r)?r:r==null?"":_e(r)||vt(r)&&(r.toString===La||!Ue(r.toString))?JSON.stringify(r,Ja,2):String(r),Ja=(r,a)=>a&&a.__v_isRef?Ja(r,a.value):rs(a)?{[`Map(${a.size})`]:[...a.entries()].reduce((f,[h,m])=>(f[`${h} =>`]=m,f),{})}:xa(a)?{[`Set(${a.size})`]:[...a.values()]}:vt(a)&&!_e(a)&&!Ba(a)?String(a):a;let Ln;class Cu{constructor(a=!1){this.detached=a,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ln,!a&&Ln&&(this.index=(Ln.scopes||(Ln.scopes=[])).push(this)-1)}get active(){return this._active}run(a){if(this._active){const f=Ln;try{return Ln=this,a()}finally{Ln=f}}}on(){Ln=this}off(){Ln=this.parent}stop(a){if(this._active){let f,h;for(f=0,h=this.effects.length;f<h;f++)this.effects[f].stop();for(f=0,h=this.cleanups.length;f<h;f++)this.cleanups[f]();if(this.scopes)for(f=0,h=this.scopes.length;f<h;f++)this.scopes[f].stop(!0);if(!this.detached&&this.parent&&!a){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.parent=void 0,this._active=!1}}}function xu(r,a=Ln){a&&a.active&&a.effects.push(r)}function Ru(){return Ln}const ro=r=>{const a=new Set(r);return a.w=0,a.n=0,a},Ua=r=>(r.w&Ir)>0,$a=r=>(r.n&Ir)>0,Lu=({deps:r})=>{if(r.length)for(let a=0;a<r.length;a++)r[a].w|=Ir},Bu=r=>{const{deps:a}=r;if(a.length){let f=0;for(let h=0;h<a.length;h++){const m=a[h];Ua(m)&&!$a(m)?m.delete(r):a[f++]=m,m.w&=~Ir,m.n&=~Ir}a.length=f}},Fi=new WeakMap;let ws=0,Ir=1;const Ji=30;let Bn;const Mr=Symbol(""),Ui=Symbol("");class so{constructor(a,f=null,h){this.fn=a,this.scheduler=f,this.active=!0,this.deps=[],this.parent=void 0,xu(this,h)}run(){if(!this.active)return this.fn();let a=Bn,f=br;for(;a;){if(a===this)return;a=a.parent}try{return this.parent=Bn,Bn=this,br=!0,Ir=1<<++ws,ws<=Ji?Lu(this):ea(this),this.fn()}finally{ws<=Ji&&Bu(this),Ir=1<<--ws,Bn=this.parent,br=f,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Bn===this?this.deferStop=!0:this.active&&(ea(this),this.onStop&&this.onStop(),this.active=!1)}}function ea(r){const{deps:a}=r;if(a.length){for(let f=0;f<a.length;f++)a[f].delete(r);a.length=0}}let br=!0;const ja=[];function us(){ja.push(br),br=!1}function ls(){const r=ja.pop();br=r===void 0?!0:r}function mn(r,a,f){if(br&&Bn){let h=Fi.get(r);h||Fi.set(r,h=new Map);let m=h.get(f);m||h.set(f,m=ro()),Va(m)}}function Va(r,a){let f=!1;ws<=Ji?$a(r)||(r.n|=Ir,f=!Ua(r)):f=!r.has(Bn),f&&(r.add(Bn),Bn.deps.push(r))}function cr(r,a,f,h,m,p){const E=Fi.get(r);if(!E)return;let T=[];if(a==="clear")T=[...E.values()];else if(f==="length"&&_e(r)){const b=Number(h);E.forEach((d,v)=>{(v==="length"||v>=b)&&T.push(d)})}else switch(f!==void 0&&T.push(E.get(f)),a){case"add":_e(r)?eo(f)&&T.push(E.get("length")):(T.push(E.get(Mr)),rs(r)&&T.push(E.get(Ui)));break;case"delete":_e(r)||(T.push(E.get(Mr)),rs(r)&&T.push(E.get(Ui)));break;case"set":rs(r)&&T.push(E.get(Mr));break}if(T.length===1)T[0]&&$i(T[0]);else{const b=[];for(const d of T)d&&b.push(...d);$i(ro(b))}}function $i(r,a){const f=_e(r)?r:[...r];for(const h of f)h.computed&&ta(h);for(const h of f)h.computed||ta(h)}function ta(r,a){(r!==Bn||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const Mu=Hi("__proto__,__v_isRef,__isVue"),Ka=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Qi)),Fu=io(),Ju=io(!1,!0),Uu=io(!0),na=$u();function $u(){const r={};return["includes","indexOf","lastIndexOf"].forEach(a=>{r[a]=function(...f){const h=et(this);for(let p=0,E=this.length;p<E;p++)mn(h,"get",p+"");const m=h[a](...f);return m===-1||m===!1?h[a](...f.map(et)):m}}),["push","pop","shift","unshift","splice"].forEach(a=>{r[a]=function(...f){us();const h=et(this)[a].apply(this,f);return ls(),h}}),r}function ju(r){const a=et(this);return mn(a,"has",r),a.hasOwnProperty(r)}function io(r=!1,a=!1){return function(h,m,p){if(m==="__v_isReactive")return!r;if(m==="__v_isReadonly")return r;if(m==="__v_isShallow")return a;if(m==="__v_raw"&&p===(r?a?sl:Ga:a?za:Wa).get(h))return h;const E=_e(h);if(!r){if(E&&Qe(na,m))return Reflect.get(na,m,p);if(m==="hasOwnProperty")return ju}const T=Reflect.get(h,m,p);return(Qi(m)?Ka.has(m):Mu(m))||(r||mn(h,"get",m),a)?T:sn(T)?E&&eo(m)?T:T.value:vt(T)?r?Ha(T):co(T):T}}const Vu=qa(),Ku=qa(!0);function qa(r=!1){return function(f,h,m,p){let E=f[h];if(Ns(E)&&sn(E)&&!sn(m))return!1;if(!r&&(!ji(m)&&!Ns(m)&&(E=et(E),m=et(m)),!_e(f)&&sn(E)&&!sn(m)))return E.value=m,!0;const T=_e(f)&&eo(h)?Number(h)<f.length:Qe(f,h),b=Reflect.set(f,h,m,p);return f===et(p)&&(T?ii(m,E)&&cr(f,"set",h,m):cr(f,"add",h,m)),b}}function qu(r,a){const f=Qe(r,a);r[a];const h=Reflect.deleteProperty(r,a);return h&&f&&cr(r,"delete",a,void 0),h}function Yu(r,a){const f=Reflect.has(r,a);return(!Qi(a)||!Ka.has(a))&&mn(r,"has",a),f}function Wu(r){return mn(r,"iterate",_e(r)?"length":Mr),Reflect.ownKeys(r)}const Ya={get:Fu,set:Vu,deleteProperty:qu,has:Yu,ownKeys:Wu},zu={get:Uu,set(r,a){return!0},deleteProperty(r,a){return!0}},Gu=$t({},Ya,{get:Ju,set:Ku}),oo=r=>r,hi=r=>Reflect.getPrototypeOf(r);function Ws(r,a,f=!1,h=!1){r=r.__v_raw;const m=et(r),p=et(a);f||(a!==p&&mn(m,"get",a),mn(m,"get",p));const{has:E}=hi(m),T=h?oo:f?fo:lo;if(E.call(m,a))return T(r.get(a));if(E.call(m,p))return T(r.get(p));r!==m&&r.get(a)}function zs(r,a=!1){const f=this.__v_raw,h=et(f),m=et(r);return a||(r!==m&&mn(h,"has",r),mn(h,"has",m)),r===m?f.has(r):f.has(r)||f.has(m)}function Gs(r,a=!1){return r=r.__v_raw,!a&&mn(et(r),"iterate",Mr),Reflect.get(r,"size",r)}function ra(r){r=et(r);const a=et(this);return hi(a).has.call(a,r)||(a.add(r),cr(a,"add",r,r)),this}function sa(r,a){a=et(a);const f=et(this),{has:h,get:m}=hi(f);let p=h.call(f,r);p||(r=et(r),p=h.call(f,r));const E=m.call(f,r);return f.set(r,a),p?ii(a,E)&&cr(f,"set",r,a):cr(f,"add",r,a),this}function ia(r){const a=et(this),{has:f,get:h}=hi(a);let m=f.call(a,r);m||(r=et(r),m=f.call(a,r)),h&&h.call(a,r);const p=a.delete(r);return m&&cr(a,"delete",r,void 0),p}function oa(){const r=et(this),a=r.size!==0,f=r.clear();return a&&cr(r,"clear",void 0,void 0),f}function Hs(r,a){return function(h,m){const p=this,E=p.__v_raw,T=et(E),b=a?oo:r?fo:lo;return!r&&mn(T,"iterate",Mr),E.forEach((d,v)=>h.call(m,b(d),b(v),p))}}function Xs(r,a,f){return function(...h){const m=this.__v_raw,p=et(m),E=rs(p),T=r==="entries"||r===Symbol.iterator&&E,b=r==="keys"&&E,d=m[r](...h),v=f?oo:a?fo:lo;return!a&&mn(p,"iterate",b?Ui:Mr),{next(){const{value:y,done:L}=d.next();return L?{value:y,done:L}:{value:T?[v(y[0]),v(y[1])]:v(y),done:L}},[Symbol.iterator](){return this}}}}function Tr(r){return function(...a){return r==="delete"?!1:this}}function Hu(){const r={get(p){return Ws(this,p)},get size(){return Gs(this)},has:zs,add:ra,set:sa,delete:ia,clear:oa,forEach:Hs(!1,!1)},a={get(p){return Ws(this,p,!1,!0)},get size(){return Gs(this)},has:zs,add:ra,set:sa,delete:ia,clear:oa,forEach:Hs(!1,!0)},f={get(p){return Ws(this,p,!0)},get size(){return Gs(this,!0)},has(p){return zs.call(this,p,!0)},add:Tr("add"),set:Tr("set"),delete:Tr("delete"),clear:Tr("clear"),forEach:Hs(!0,!1)},h={get(p){return Ws(this,p,!0,!0)},get size(){return Gs(this,!0)},has(p){return zs.call(this,p,!0)},add:Tr("add"),set:Tr("set"),delete:Tr("delete"),clear:Tr("clear"),forEach:Hs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(p=>{r[p]=Xs(p,!1,!1),f[p]=Xs(p,!0,!1),a[p]=Xs(p,!1,!0),h[p]=Xs(p,!0,!0)}),[r,f,a,h]}const[Xu,Zu,Qu,el]=Hu();function ao(r,a){const f=a?r?el:Qu:r?Zu:Xu;return(h,m,p)=>m==="__v_isReactive"?!r:m==="__v_isReadonly"?r:m==="__v_raw"?h:Reflect.get(Qe(f,m)&&m in h?f:h,m,p)}const tl={get:ao(!1,!1)},nl={get:ao(!1,!0)},rl={get:ao(!0,!1)},Wa=new WeakMap,za=new WeakMap,Ga=new WeakMap,sl=new WeakMap;function il(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ol(r){return r.__v_skip||!Object.isExtensible(r)?0:il(Iu(r))}function co(r){return Ns(r)?r:uo(r,!1,Ya,tl,Wa)}function al(r){return uo(r,!1,Gu,nl,za)}function Ha(r){return uo(r,!0,zu,rl,Ga)}function uo(r,a,f,h,m){if(!vt(r)||r.__v_raw&&!(a&&r.__v_isReactive))return r;const p=m.get(r);if(p)return p;const E=ol(r);if(E===0)return r;const T=new Proxy(r,E===2?h:f);return m.set(r,T),T}function ss(r){return Ns(r)?ss(r.__v_raw):!!(r&&r.__v_isReactive)}function Ns(r){return!!(r&&r.__v_isReadonly)}function ji(r){return!!(r&&r.__v_isShallow)}function Xa(r){return ss(r)||Ns(r)}function et(r){const a=r&&r.__v_raw;return a?et(a):r}function Za(r){return oi(r,"__v_skip",!0),r}const lo=r=>vt(r)?co(r):r,fo=r=>vt(r)?Ha(r):r;function cl(r){br&&Bn&&(r=et(r),Va(r.dep||(r.dep=ro())))}function ul(r,a){r=et(r);const f=r.dep;f&&$i(f)}function sn(r){return!!(r&&r.__v_isRef===!0)}function ll(r){return sn(r)?r.value:r}const fl={get:(r,a,f)=>ll(Reflect.get(r,a,f)),set:(r,a,f,h)=>{const m=r[a];return sn(m)&&!sn(f)?(m.value=f,!0):Reflect.set(r,a,f,h)}};function Qa(r){return ss(r)?r:new Proxy(r,fl)}class dl{constructor(a,f,h,m){this._setter=f,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new so(a,()=>{this._dirty||(this._dirty=!0,ul(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!m,this.__v_isReadonly=h}get value(){const a=et(this);return cl(a),(a._dirty||!a._cacheable)&&(a._dirty=!1,a._value=a.effect.run()),a._value}set value(a){this._setter(a)}}function hl(r,a,f=!1){let h,m;const p=Ue(r);return p?(h=r,m=Jn):(h=r.get,m=r.set),new dl(h,m,p||!m,f)}function Er(r,a,f,h){let m;try{m=h?r(...h):r()}catch(p){mi(p,a,f)}return m}function Un(r,a,f,h){if(Ue(r)){const p=Er(r,a,f,h);return p&&Ra(p)&&p.catch(E=>{mi(E,a,f)}),p}const m=[];for(let p=0;p<r.length;p++)m.push(Un(r[p],a,f,h));return m}function mi(r,a,f,h=!0){const m=a?a.vnode:null;if(a){let p=a.parent;const E=a.proxy,T=f;for(;p;){const d=p.ec;if(d){for(let v=0;v<d.length;v++)if(d[v](r,E,T)===!1)return}p=p.parent}const b=a.appContext.config.errorHandler;if(b){Er(b,null,10,[r,E,T]);return}}ml(r,f,m,h)}function ml(r,a,f,h=!0){console.error(r)}let Ss=!1,Vi=!1;const Ht=[];let zn=0;const is=[];let ar=null,Rr=0;const ec=Promise.resolve();let ho=null;function gl(r){const a=ho||ec;return r?a.then(this?r.bind(this):r):a}function pl(r){let a=zn+1,f=Ht.length;for(;a<f;){const h=a+f>>>1;As(Ht[h])<r?a=h+1:f=h}return a}function mo(r){(!Ht.length||!Ht.includes(r,Ss&&r.allowRecurse?zn+1:zn))&&(r.id==null?Ht.push(r):Ht.splice(pl(r.id),0,r),tc())}function tc(){!Ss&&!Vi&&(Vi=!0,ho=ec.then(rc))}function yl(r){const a=Ht.indexOf(r);a>zn&&Ht.splice(a,1)}function Tl(r){_e(r)?is.push(...r):(!ar||!ar.includes(r,r.allowRecurse?Rr+1:Rr))&&is.push(r),tc()}function aa(r,a=Ss?zn+1:0){for(;a<Ht.length;a++){const f=Ht[a];f&&f.pre&&(Ht.splice(a,1),a--,f())}}function nc(r){if(is.length){const a=[...new Set(is)];if(is.length=0,ar){ar.push(...a);return}for(ar=a,ar.sort((f,h)=>As(f)-As(h)),Rr=0;Rr<ar.length;Rr++)ar[Rr]();ar=null,Rr=0}}const As=r=>r.id==null?1/0:r.id,vl=(r,a)=>{const f=As(r)-As(a);if(f===0){if(r.pre&&!a.pre)return-1;if(a.pre&&!r.pre)return 1}return f};function rc(r){Vi=!1,Ss=!0,Ht.sort(vl);const a=Jn;try{for(zn=0;zn<Ht.length;zn++){const f=Ht[zn];f&&f.active!==!1&&Er(f,null,14)}}finally{zn=0,Ht.length=0,nc(),Ss=!1,ho=null,(Ht.length||is.length)&&rc()}}function wl(r,a,...f){if(r.isUnmounted)return;const h=r.vnode.props||lt;let m=f;const p=a.startsWith("update:"),E=p&&a.slice(7);if(E&&E in h){const v=`${E==="modelValue"?"model":E}Modifiers`,{number:y,trim:L}=h[v]||lt;L&&(m=f.map(P=>xt(P)?P.trim():P)),y&&(m=f.map(Bi))}let T,b=h[T=Pi(a)]||h[T=Pi(os(a))];!b&&p&&(b=h[T=Pi(Ur(a))]),b&&Un(b,r,6,m);const d=h[T+"Once"];if(d){if(!r.emitted)r.emitted={};else if(r.emitted[T])return;r.emitted[T]=!0,Un(d,r,6,m)}}function sc(r,a,f=!1){const h=a.emitsCache,m=h.get(r);if(m!==void 0)return m;const p=r.emits;let E={},T=!1;if(!Ue(r)){const b=d=>{const v=sc(d,a,!0);v&&(T=!0,$t(E,v))};!f&&a.mixins.length&&a.mixins.forEach(b),r.extends&&b(r.extends),r.mixins&&r.mixins.forEach(b)}return!p&&!T?(vt(r)&&h.set(r,null),null):(_e(p)?p.forEach(b=>E[b]=null):$t(E,p),vt(r)&&h.set(r,E),E)}function gi(r,a){return!r||!li(a)?!1:(a=a.slice(2).replace(/Once$/,""),Qe(r,a[0].toLowerCase()+a.slice(1))||Qe(r,Ur(a))||Qe(r,a))}let Mn=null,ic=null;function ai(r){const a=Mn;return Mn=r,ic=r&&r.type.__scopeId||null,a}function bl(r,a=Mn,f){if(!a||r._n)return r;const h=(...m)=>{h._d&&va(-1);const p=ai(a);let E;try{E=r(...m)}finally{ai(p),h._d&&va(1)}return E};return h._n=!0,h._c=!0,h._d=!0,h}function Di(r){const{type:a,vnode:f,proxy:h,withProxy:m,props:p,propsOptions:[E],slots:T,attrs:b,emit:d,render:v,renderCache:y,data:L,setupState:P,ctx:Y,inheritAttrs:j}=r;let O,A;const V=ai(r);try{if(f.shapeFlag&4){const J=m||h;O=Wn(v.call(J,J,y,p,P,L,Y)),A=b}else{const J=a;O=Wn(J.length>1?J(p,{attrs:b,slots:T,emit:d}):J(p,null)),A=a.props?b:El(b)}}catch(J){Is.length=0,mi(J,r,1),O=Fr(ks)}let B=O;if(A&&j!==!1){const J=Object.keys(A),{shapeFlag:M}=B;J.length&&M&7&&(E&&J.some(Xi)&&(A=Il(A,E)),B=as(B,A))}return f.dirs&&(B=as(B),B.dirs=B.dirs?B.dirs.concat(f.dirs):f.dirs),f.transition&&(B.transition=f.transition),O=B,ai(V),O}const El=r=>{let a;for(const f in r)(f==="class"||f==="style"||li(f))&&((a||(a={}))[f]=r[f]);return a},Il=(r,a)=>{const f={};for(const h in r)(!Xi(h)||!(h.slice(9)in a))&&(f[h]=r[h]);return f};function Nl(r,a,f){const{props:h,children:m,component:p}=r,{props:E,children:T,patchFlag:b}=a,d=p.emitsOptions;if(a.dirs||a.transition)return!0;if(f&&b>=0){if(b&1024)return!0;if(b&16)return h?ca(h,E,d):!!E;if(b&8){const v=a.dynamicProps;for(let y=0;y<v.length;y++){const L=v[y];if(E[L]!==h[L]&&!gi(d,L))return!0}}}else return(m||T)&&(!T||!T.$stable)?!0:h===E?!1:h?E?ca(h,E,d):!0:!!E;return!1}function ca(r,a,f){const h=Object.keys(a);if(h.length!==Object.keys(r).length)return!0;for(let m=0;m<h.length;m++){const p=h[m];if(a[p]!==r[p]&&!gi(f,p))return!0}return!1}function Sl({vnode:r,parent:a},f){for(;a&&a.subTree===r;)(r=a.vnode).el=f,a=a.parent}const Al=r=>r.__isSuspense;function kl(r,a){a&&a.pendingBranch?_e(r)?a.effects.push(...r):a.effects.push(r):Tl(r)}const Zs={};function _i(r,a,f){return oc(r,a,f)}function oc(r,a,{immediate:f,deep:h,flush:m,onTrack:p,onTrigger:E}=lt){var T;const b=Ru()===((T=Xt)==null?void 0:T.scope)?Xt:null;let d,v=!1,y=!1;if(sn(r)?(d=()=>r.value,v=ji(r)):ss(r)?(d=()=>r,h=!0):_e(r)?(y=!0,v=r.some(J=>ss(J)||ji(J)),d=()=>r.map(J=>{if(sn(J))return J.value;if(ss(J))return Br(J);if(Ue(J))return Er(J,b,2)})):Ue(r)?a?d=()=>Er(r,b,2):d=()=>{if(!(b&&b.isUnmounted))return L&&L(),Un(r,b,3,[P])}:d=Jn,a&&h){const J=d;d=()=>Br(J())}let L,P=J=>{L=V.onStop=()=>{Er(J,b,4)}},Y;if(Ps)if(P=Jn,a?f&&Un(a,b,3,[d(),y?[]:void 0,P]):d(),m==="sync"){const J=If();Y=J.__watcherHandles||(J.__watcherHandles=[])}else return Jn;let j=y?new Array(r.length).fill(Zs):Zs;const O=()=>{if(!!V.active)if(a){const J=V.run();(h||v||(y?J.some((M,w)=>ii(M,j[w])):ii(J,j)))&&(L&&L(),Un(a,b,3,[J,j===Zs?void 0:y&&j[0]===Zs?[]:j,P]),j=J)}else V.run()};O.allowRecurse=!!a;let A;m==="sync"?A=O:m==="post"?A=()=>hn(O,b&&b.suspense):(O.pre=!0,b&&(O.id=b.uid),A=()=>mo(O));const V=new so(d,A);a?f?O():j=V.run():m==="post"?hn(V.run.bind(V),b&&b.suspense):V.run();const B=()=>{V.stop(),b&&b.scope&&Zi(b.scope.effects,V)};return Y&&Y.push(B),B}function Ol(r,a,f){const h=this.proxy,m=xt(r)?r.includes(".")?ac(h,r):()=>h[r]:r.bind(h,h);let p;Ue(a)?p=a:(p=a.handler,f=a);const E=Xt;cs(this);const T=oc(m,p.bind(h),f);return E?cs(E):Jr(),T}function ac(r,a){const f=a.split(".");return()=>{let h=r;for(let m=0;m<f.length&&h;m++)h=h[f[m]];return h}}function Br(r,a){if(!vt(r)||r.__v_skip||(a=a||new Set,a.has(r)))return r;if(a.add(r),sn(r))Br(r.value,a);else if(_e(r))for(let f=0;f<r.length;f++)Br(r[f],a);else if(xa(r)||rs(r))r.forEach(f=>{Br(f,a)});else if(Ba(r))for(const f in r)Br(r[f],a);return r}function ua(r,a){const f=Mn;if(f===null)return r;const h=vi(f)||f.proxy,m=r.dirs||(r.dirs=[]);for(let p=0;p<a.length;p++){let[E,T,b,d=lt]=a[p];E&&(Ue(E)&&(E={mounted:E,updated:E}),E.deep&&Br(T),m.push({dir:E,instance:h,value:T,oldValue:void 0,arg:b,modifiers:d}))}return r}function Cr(r,a,f,h){const m=r.dirs,p=a&&a.dirs;for(let E=0;E<m.length;E++){const T=m[E];p&&(T.oldValue=p[E].value);let b=T.dir[h];b&&(us(),Un(b,f,8,[r.el,T,r,a]),ls())}}const ni=r=>!!r.type.__asyncLoader,cc=r=>r.type.__isKeepAlive;function Pl(r,a){uc(r,"a",a)}function Dl(r,a){uc(r,"da",a)}function uc(r,a,f=Xt){const h=r.__wdc||(r.__wdc=()=>{let m=f;for(;m;){if(m.isDeactivated)return;m=m.parent}return r()});if(pi(a,h,f),f){let m=f.parent;for(;m&&m.parent;)cc(m.parent.vnode)&&_l(h,a,f,m),m=m.parent}}function _l(r,a,f,h){const m=pi(a,r,h,!0);lc(()=>{Zi(h[a],m)},f)}function pi(r,a,f=Xt,h=!1){if(f){const m=f[r]||(f[r]=[]),p=a.__weh||(a.__weh=(...E)=>{if(f.isUnmounted)return;us(),cs(f);const T=Un(a,f,r,E);return Jr(),ls(),T});return h?m.unshift(p):m.push(p),p}}const ur=r=>(a,f=Xt)=>(!Ps||r==="sp")&&pi(r,(...h)=>a(...h),f),Cl=ur("bm"),xl=ur("m"),Rl=ur("bu"),Ll=ur("u"),Bl=ur("bum"),lc=ur("um"),Ml=ur("sp"),Fl=ur("rtg"),Jl=ur("rtc");function Ul(r,a=Xt){pi("ec",r,a)}const $l=Symbol.for("v-ndc");function la(r,a,f,h){let m;const p=f&&f[h];if(_e(r)||xt(r)){m=new Array(r.length);for(let E=0,T=r.length;E<T;E++)m[E]=a(r[E],E,void 0,p&&p[E])}else if(typeof r=="number"){m=new Array(r);for(let E=0;E<r;E++)m[E]=a(E+1,E,void 0,p&&p[E])}else if(vt(r))if(r[Symbol.iterator])m=Array.from(r,(E,T)=>a(E,T,void 0,p&&p[T]));else{const E=Object.keys(r);m=new Array(E.length);for(let T=0,b=E.length;T<b;T++){const d=E[T];m[T]=a(r[d],d,T,p&&p[T])}}else m=[];return f&&(f[h]=m),m}const Ki=r=>r?bc(r)?vi(r)||r.proxy:Ki(r.parent):null,Es=$t(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Ki(r.parent),$root:r=>Ki(r.root),$emit:r=>r.emit,$options:r=>go(r),$forceUpdate:r=>r.f||(r.f=()=>mo(r.update)),$nextTick:r=>r.n||(r.n=gl.bind(r.proxy)),$watch:r=>Ol.bind(r)}),Ci=(r,a)=>r!==lt&&!r.__isScriptSetup&&Qe(r,a),jl={get({_:r},a){const{ctx:f,setupState:h,data:m,props:p,accessCache:E,type:T,appContext:b}=r;let d;if(a[0]!=="$"){const P=E[a];if(P!==void 0)switch(P){case 1:return h[a];case 2:return m[a];case 4:return f[a];case 3:return p[a]}else{if(Ci(h,a))return E[a]=1,h[a];if(m!==lt&&Qe(m,a))return E[a]=2,m[a];if((d=r.propsOptions[0])&&Qe(d,a))return E[a]=3,p[a];if(f!==lt&&Qe(f,a))return E[a]=4,f[a];qi&&(E[a]=0)}}const v=Es[a];let y,L;if(v)return a==="$attrs"&&mn(r,"get",a),v(r);if((y=T.__cssModules)&&(y=y[a]))return y;if(f!==lt&&Qe(f,a))return E[a]=4,f[a];if(L=b.config.globalProperties,Qe(L,a))return L[a]},set({_:r},a,f){const{data:h,setupState:m,ctx:p}=r;return Ci(m,a)?(m[a]=f,!0):h!==lt&&Qe(h,a)?(h[a]=f,!0):Qe(r.props,a)||a[0]==="$"&&a.slice(1)in r?!1:(p[a]=f,!0)},has({_:{data:r,setupState:a,accessCache:f,ctx:h,appContext:m,propsOptions:p}},E){let T;return!!f[E]||r!==lt&&Qe(r,E)||Ci(a,E)||(T=p[0])&&Qe(T,E)||Qe(h,E)||Qe(Es,E)||Qe(m.config.globalProperties,E)},defineProperty(r,a,f){return f.get!=null?r._.accessCache[a]=0:Qe(f,"value")&&this.set(r,a,f.value,null),Reflect.defineProperty(r,a,f)}};function fa(r){return _e(r)?r.reduce((a,f)=>(a[f]=null,a),{}):r}let qi=!0;function Vl(r){const a=go(r),f=r.proxy,h=r.ctx;qi=!1,a.beforeCreate&&da(a.beforeCreate,r,"bc");const{data:m,computed:p,methods:E,watch:T,provide:b,inject:d,created:v,beforeMount:y,mounted:L,beforeUpdate:P,updated:Y,activated:j,deactivated:O,beforeDestroy:A,beforeUnmount:V,destroyed:B,unmounted:J,render:M,renderTracked:w,renderTriggered:Z,errorCaptured:W,serverPrefetch:C,expose:X,inheritAttrs:ne,components:ae,directives:$,filters:ie}=a;if(d&&Kl(d,h,null),E)for(const z in E){const fe=E[z];Ue(fe)&&(h[z]=fe.bind(f))}if(m){const z=m.call(f,f);vt(z)&&(r.data=co(z))}if(qi=!0,p)for(const z in p){const fe=p[z],Me=Ue(fe)?fe.bind(f,f):Ue(fe.get)?fe.get.bind(f,f):Jn,le=!Ue(fe)&&Ue(fe.set)?fe.set.bind(f):Jn,Ce=bf({get:Me,set:le});Object.defineProperty(h,z,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:Te=>Ce.value=Te})}if(T)for(const z in T)fc(T[z],h,f,z);if(b){const z=Ue(b)?b.call(f):b;Reflect.ownKeys(z).forEach(fe=>{Hl(fe,z[fe])})}v&&da(v,r,"c");function re(z,fe){_e(fe)?fe.forEach(Me=>z(Me.bind(f))):fe&&z(fe.bind(f))}if(re(Cl,y),re(xl,L),re(Rl,P),re(Ll,Y),re(Pl,j),re(Dl,O),re(Ul,W),re(Jl,w),re(Fl,Z),re(Bl,V),re(lc,J),re(Ml,C),_e(X))if(X.length){const z=r.exposed||(r.exposed={});X.forEach(fe=>{Object.defineProperty(z,fe,{get:()=>f[fe],set:Me=>f[fe]=Me})})}else r.exposed||(r.exposed={});M&&r.render===Jn&&(r.render=M),ne!=null&&(r.inheritAttrs=ne),ae&&(r.components=ae),$&&(r.directives=$)}function Kl(r,a,f=Jn){_e(r)&&(r=Yi(r));for(const h in r){const m=r[h];let p;vt(m)?"default"in m?p=ri(m.from||h,m.default,!0):p=ri(m.from||h):p=ri(m),sn(p)?Object.defineProperty(a,h,{enumerable:!0,configurable:!0,get:()=>p.value,set:E=>p.value=E}):a[h]=p}}function da(r,a,f){Un(_e(r)?r.map(h=>h.bind(a.proxy)):r.bind(a.proxy),a,f)}function fc(r,a,f,h){const m=h.includes(".")?ac(f,h):()=>f[h];if(xt(r)){const p=a[r];Ue(p)&&_i(m,p)}else if(Ue(r))_i(m,r.bind(f));else if(vt(r))if(_e(r))r.forEach(p=>fc(p,a,f,h));else{const p=Ue(r.handler)?r.handler.bind(f):a[r.handler];Ue(p)&&_i(m,p,r)}}function go(r){const a=r.type,{mixins:f,extends:h}=a,{mixins:m,optionsCache:p,config:{optionMergeStrategies:E}}=r.appContext,T=p.get(a);let b;return T?b=T:!m.length&&!f&&!h?b=a:(b={},m.length&&m.forEach(d=>ci(b,d,E,!0)),ci(b,a,E)),vt(a)&&p.set(a,b),b}function ci(r,a,f,h=!1){const{mixins:m,extends:p}=a;p&&ci(r,p,f,!0),m&&m.forEach(E=>ci(r,E,f,!0));for(const E in a)if(!(h&&E==="expose")){const T=ql[E]||f&&f[E];r[E]=T?T(r[E],a[E]):a[E]}return r}const ql={data:ha,props:ma,emits:ma,methods:bs,computed:bs,beforeCreate:nn,created:nn,beforeMount:nn,mounted:nn,beforeUpdate:nn,updated:nn,beforeDestroy:nn,beforeUnmount:nn,destroyed:nn,unmounted:nn,activated:nn,deactivated:nn,errorCaptured:nn,serverPrefetch:nn,components:bs,directives:bs,watch:Wl,provide:ha,inject:Yl};function ha(r,a){return a?r?function(){return $t(Ue(r)?r.call(this,this):r,Ue(a)?a.call(this,this):a)}:a:r}function Yl(r,a){return bs(Yi(r),Yi(a))}function Yi(r){if(_e(r)){const a={};for(let f=0;f<r.length;f++)a[r[f]]=r[f];return a}return r}function nn(r,a){return r?[...new Set([].concat(r,a))]:a}function bs(r,a){return r?$t(Object.create(null),r,a):a}function ma(r,a){return r?_e(r)&&_e(a)?[...new Set([...r,...a])]:$t(Object.create(null),fa(r),fa(a!=null?a:{})):a}function Wl(r,a){if(!r)return a;if(!a)return r;const f=$t(Object.create(null),r);for(const h in a)f[h]=nn(r[h],a[h]);return f}function dc(){return{app:null,config:{isNativeTag:wu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zl=0;function Gl(r,a){return function(h,m=null){Ue(h)||(h=$t({},h)),m!=null&&!vt(m)&&(m=null);const p=dc(),E=new Set;let T=!1;const b=p.app={_uid:zl++,_component:h,_props:m,_container:null,_context:p,_instance:null,version:Nf,get config(){return p.config},set config(d){},use(d,...v){return E.has(d)||(d&&Ue(d.install)?(E.add(d),d.install(b,...v)):Ue(d)&&(E.add(d),d(b,...v))),b},mixin(d){return p.mixins.includes(d)||p.mixins.push(d),b},component(d,v){return v?(p.components[d]=v,b):p.components[d]},directive(d,v){return v?(p.directives[d]=v,b):p.directives[d]},mount(d,v,y){if(!T){const L=Fr(h,m);return L.appContext=p,v&&a?a(L,d):r(L,d,y),T=!0,b._container=d,d.__vue_app__=b,vi(L.component)||L.component.proxy}},unmount(){T&&(r(null,b._container),delete b._container.__vue_app__)},provide(d,v){return p.provides[d]=v,b},runWithContext(d){ui=b;try{return d()}finally{ui=null}}};return b}}let ui=null;function Hl(r,a){if(Xt){let f=Xt.provides;const h=Xt.parent&&Xt.parent.provides;h===f&&(f=Xt.provides=Object.create(h)),f[r]=a}}function ri(r,a,f=!1){const h=Xt||Mn;if(h||ui){const m=h?h.parent==null?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides:ui._context.provides;if(m&&r in m)return m[r];if(arguments.length>1)return f&&Ue(a)?a.call(h&&h.proxy):a}}function Xl(r,a,f,h=!1){const m={},p={};oi(p,Ti,1),r.propsDefaults=Object.create(null),hc(r,a,m,p);for(const E in r.propsOptions[0])E in m||(m[E]=void 0);f?r.props=h?m:al(m):r.type.props?r.props=m:r.props=p,r.attrs=p}function Zl(r,a,f,h){const{props:m,attrs:p,vnode:{patchFlag:E}}=r,T=et(m),[b]=r.propsOptions;let d=!1;if((h||E>0)&&!(E&16)){if(E&8){const v=r.vnode.dynamicProps;for(let y=0;y<v.length;y++){let L=v[y];if(gi(r.emitsOptions,L))continue;const P=a[L];if(b)if(Qe(p,L))P!==p[L]&&(p[L]=P,d=!0);else{const Y=os(L);m[Y]=Wi(b,T,Y,P,r,!1)}else P!==p[L]&&(p[L]=P,d=!0)}}}else{hc(r,a,m,p)&&(d=!0);let v;for(const y in T)(!a||!Qe(a,y)&&((v=Ur(y))===y||!Qe(a,v)))&&(b?f&&(f[y]!==void 0||f[v]!==void 0)&&(m[y]=Wi(b,T,y,void 0,r,!0)):delete m[y]);if(p!==T)for(const y in p)(!a||!Qe(a,y)&&!0)&&(delete p[y],d=!0)}d&&cr(r,"set","$attrs")}function hc(r,a,f,h){const[m,p]=r.propsOptions;let E=!1,T;if(a)for(let b in a){if(ei(b))continue;const d=a[b];let v;m&&Qe(m,v=os(b))?!p||!p.includes(v)?f[v]=d:(T||(T={}))[v]=d:gi(r.emitsOptions,b)||(!(b in h)||d!==h[b])&&(h[b]=d,E=!0)}if(p){const b=et(f),d=T||lt;for(let v=0;v<p.length;v++){const y=p[v];f[y]=Wi(m,b,y,d[y],r,!Qe(d,y))}}return E}function Wi(r,a,f,h,m,p){const E=r[f];if(E!=null){const T=Qe(E,"default");if(T&&h===void 0){const b=E.default;if(E.type!==Function&&!E.skipFactory&&Ue(b)){const{propsDefaults:d}=m;f in d?h=d[f]:(cs(m),h=d[f]=b.call(null,a),Jr())}else h=b}E[0]&&(p&&!T?h=!1:E[1]&&(h===""||h===Ur(f))&&(h=!0))}return h}function mc(r,a,f=!1){const h=a.propsCache,m=h.get(r);if(m)return m;const p=r.props,E={},T=[];let b=!1;if(!Ue(r)){const v=y=>{b=!0;const[L,P]=mc(y,a,!0);$t(E,L),P&&T.push(...P)};!f&&a.mixins.length&&a.mixins.forEach(v),r.extends&&v(r.extends),r.mixins&&r.mixins.forEach(v)}if(!p&&!b)return vt(r)&&h.set(r,ns),ns;if(_e(p))for(let v=0;v<p.length;v++){const y=os(p[v]);ga(y)&&(E[y]=lt)}else if(p)for(const v in p){const y=os(v);if(ga(y)){const L=p[v],P=E[y]=_e(L)||Ue(L)?{type:L}:$t({},L);if(P){const Y=Ta(Boolean,P.type),j=Ta(String,P.type);P[0]=Y>-1,P[1]=j<0||Y<j,(Y>-1||Qe(P,"default"))&&T.push(y)}}}const d=[E,T];return vt(r)&&h.set(r,d),d}function ga(r){return r[0]!=="$"}function pa(r){const a=r&&r.toString().match(/^\s*(function|class) (\w+)/);return a?a[2]:r===null?"null":""}function ya(r,a){return pa(r)===pa(a)}function Ta(r,a){return _e(a)?a.findIndex(f=>ya(f,r)):Ue(a)&&ya(a,r)?0:-1}const gc=r=>r[0]==="_"||r==="$stable",po=r=>_e(r)?r.map(Wn):[Wn(r)],Ql=(r,a,f)=>{if(a._n)return a;const h=bl((...m)=>po(a(...m)),f);return h._c=!1,h},pc=(r,a,f)=>{const h=r._ctx;for(const m in r){if(gc(m))continue;const p=r[m];if(Ue(p))a[m]=Ql(m,p,h);else if(p!=null){const E=po(p);a[m]=()=>E}}},yc=(r,a)=>{const f=po(a);r.slots.default=()=>f},ef=(r,a)=>{if(r.vnode.shapeFlag&32){const f=a._;f?(r.slots=et(a),oi(a,"_",f)):pc(a,r.slots={})}else r.slots={},a&&yc(r,a);oi(r.slots,Ti,1)},tf=(r,a,f)=>{const{vnode:h,slots:m}=r;let p=!0,E=lt;if(h.shapeFlag&32){const T=a._;T?f&&T===1?p=!1:($t(m,a),!f&&T===1&&delete m._):(p=!a.$stable,pc(a,m)),E=a}else a&&(yc(r,a),E={default:1});if(p)for(const T in m)!gc(T)&&!(T in E)&&delete m[T]};function zi(r,a,f,h,m=!1){if(_e(r)){r.forEach((L,P)=>zi(L,a&&(_e(a)?a[P]:a),f,h,m));return}if(ni(h)&&!m)return;const p=h.shapeFlag&4?vi(h.component)||h.component.proxy:h.el,E=m?null:p,{i:T,r:b}=r,d=a&&a.r,v=T.refs===lt?T.refs={}:T.refs,y=T.setupState;if(d!=null&&d!==b&&(xt(d)?(v[d]=null,Qe(y,d)&&(y[d]=null)):sn(d)&&(d.value=null)),Ue(b))Er(b,T,12,[E,v]);else{const L=xt(b),P=sn(b);if(L||P){const Y=()=>{if(r.f){const j=L?Qe(y,b)?y[b]:v[b]:b.value;m?_e(j)&&Zi(j,p):_e(j)?j.includes(p)||j.push(p):L?(v[b]=[p],Qe(y,b)&&(y[b]=v[b])):(b.value=[p],r.k&&(v[r.k]=b.value))}else L?(v[b]=E,Qe(y,b)&&(y[b]=E)):P&&(b.value=E,r.k&&(v[r.k]=E))};E?(Y.id=-1,hn(Y,f)):Y()}}}const hn=kl;function nf(r){return rf(r)}function rf(r,a){const f=Mi();f.__VUE__=!0;const{insert:h,remove:m,patchProp:p,createElement:E,createText:T,createComment:b,setText:d,setElementText:v,parentNode:y,nextSibling:L,setScopeId:P=Jn,insertStaticContent:Y}=r,j=(S,D,K,G=null,H=null,ue=null,pe=!1,oe=null,U=!!D.dynamicChildren)=>{if(S===D)return;S&&!vs(S,D)&&(G=ct(S),Te(S,H,ue,!0),S=null),D.patchFlag===-2&&(U=!1,D.dynamicChildren=null);const{type:se,ref:we,shapeFlag:ve}=D;switch(se){case yi:O(S,D,K,G);break;case ks:A(S,D,K,G);break;case xi:S==null&&V(D,K,G,pe);break;case Dn:ae(S,D,K,G,H,ue,pe,oe,U);break;default:ve&1?M(S,D,K,G,H,ue,pe,oe,U):ve&6?$(S,D,K,G,H,ue,pe,oe,U):(ve&64||ve&128)&&se.process(S,D,K,G,H,ue,pe,oe,U,ft)}we!=null&&H&&zi(we,S&&S.ref,ue,D||S,!D)},O=(S,D,K,G)=>{if(S==null)h(D.el=T(D.children),K,G);else{const H=D.el=S.el;D.children!==S.children&&d(H,D.children)}},A=(S,D,K,G)=>{S==null?h(D.el=b(D.children||""),K,G):D.el=S.el},V=(S,D,K,G)=>{[S.el,S.anchor]=Y(S.children,D,K,G,S.el,S.anchor)},B=({el:S,anchor:D},K,G)=>{let H;for(;S&&S!==D;)H=L(S),h(S,K,G),S=H;h(D,K,G)},J=({el:S,anchor:D})=>{let K;for(;S&&S!==D;)K=L(S),m(S),S=K;m(D)},M=(S,D,K,G,H,ue,pe,oe,U)=>{pe=pe||D.type==="svg",S==null?w(D,K,G,H,ue,pe,oe,U):C(S,D,H,ue,pe,oe,U)},w=(S,D,K,G,H,ue,pe,oe)=>{let U,se;const{type:we,props:ve,shapeFlag:be,transition:Ae,dirs:xe}=S;if(U=S.el=E(S.type,ue,ve&&ve.is,ve),be&8?v(U,S.children):be&16&&W(S.children,U,null,G,H,ue&&we!=="foreignObject",pe,oe),xe&&Cr(S,null,G,"created"),Z(U,S,S.scopeId,pe,G),ve){for(const Re in ve)Re!=="value"&&!ei(Re)&&p(U,Re,null,ve[Re],ue,S.children,G,H,We);"value"in ve&&p(U,"value",null,ve.value),(se=ve.onVnodeBeforeMount)&&Yn(se,G,S)}xe&&Cr(S,null,G,"beforeMount");const ze=(!H||H&&!H.pendingBranch)&&Ae&&!Ae.persisted;ze&&Ae.beforeEnter(U),h(U,D,K),((se=ve&&ve.onVnodeMounted)||ze||xe)&&hn(()=>{se&&Yn(se,G,S),ze&&Ae.enter(U),xe&&Cr(S,null,G,"mounted")},H)},Z=(S,D,K,G,H)=>{if(K&&P(S,K),G)for(let ue=0;ue<G.length;ue++)P(S,G[ue]);if(H){let ue=H.subTree;if(D===ue){const pe=H.vnode;Z(S,pe,pe.scopeId,pe.slotScopeIds,H.parent)}}},W=(S,D,K,G,H,ue,pe,oe,U=0)=>{for(let se=U;se<S.length;se++){const we=S[se]=oe?wr(S[se]):Wn(S[se]);j(null,we,D,K,G,H,ue,pe,oe)}},C=(S,D,K,G,H,ue,pe)=>{const oe=D.el=S.el;let{patchFlag:U,dynamicChildren:se,dirs:we}=D;U|=S.patchFlag&16;const ve=S.props||lt,be=D.props||lt;let Ae;K&&xr(K,!1),(Ae=be.onVnodeBeforeUpdate)&&Yn(Ae,K,D,S),we&&Cr(D,S,K,"beforeUpdate"),K&&xr(K,!0);const xe=H&&D.type!=="foreignObject";if(se?X(S.dynamicChildren,se,oe,K,G,xe,ue):pe||fe(S,D,oe,null,K,G,xe,ue,!1),U>0){if(U&16)ne(oe,D,ve,be,K,G,H);else if(U&2&&ve.class!==be.class&&p(oe,"class",null,be.class,H),U&4&&p(oe,"style",ve.style,be.style,H),U&8){const ze=D.dynamicProps;for(let Re=0;Re<ze.length;Re++){const Ze=ze[Re],rt=ve[Ze],Dt=be[Ze];(Dt!==rt||Ze==="value")&&p(oe,Ze,rt,Dt,H,S.children,K,G,We)}}U&1&&S.children!==D.children&&v(oe,D.children)}else!pe&&se==null&&ne(oe,D,ve,be,K,G,H);((Ae=be.onVnodeUpdated)||we)&&hn(()=>{Ae&&Yn(Ae,K,D,S),we&&Cr(D,S,K,"updated")},G)},X=(S,D,K,G,H,ue,pe)=>{for(let oe=0;oe<D.length;oe++){const U=S[oe],se=D[oe],we=U.el&&(U.type===Dn||!vs(U,se)||U.shapeFlag&70)?y(U.el):K;j(U,se,we,null,G,H,ue,pe,!0)}},ne=(S,D,K,G,H,ue,pe)=>{if(K!==G){if(K!==lt)for(const oe in K)!ei(oe)&&!(oe in G)&&p(S,oe,K[oe],null,pe,D.children,H,ue,We);for(const oe in G){if(ei(oe))continue;const U=G[oe],se=K[oe];U!==se&&oe!=="value"&&p(S,oe,se,U,pe,D.children,H,ue,We)}"value"in G&&p(S,"value",K.value,G.value)}},ae=(S,D,K,G,H,ue,pe,oe,U)=>{const se=D.el=S?S.el:T(""),we=D.anchor=S?S.anchor:T("");let{patchFlag:ve,dynamicChildren:be,slotScopeIds:Ae}=D;Ae&&(oe=oe?oe.concat(Ae):Ae),S==null?(h(se,K,G),h(we,K,G),W(D.children,K,we,H,ue,pe,oe,U)):ve>0&&ve&64&&be&&S.dynamicChildren?(X(S.dynamicChildren,be,K,H,ue,pe,oe),(D.key!=null||H&&D===H.subTree)&&Tc(S,D,!0)):fe(S,D,K,we,H,ue,pe,oe,U)},$=(S,D,K,G,H,ue,pe,oe,U)=>{D.slotScopeIds=oe,S==null?D.shapeFlag&512?H.ctx.activate(D,K,G,pe,U):ie(D,K,G,H,ue,pe,U):de(S,D,U)},ie=(S,D,K,G,H,ue,pe)=>{const oe=S.component=gf(S,G,H);if(cc(S)&&(oe.ctx.renderer=ft),pf(oe),oe.asyncDep){if(H&&H.registerDep(oe,re),!S.el){const U=oe.subTree=Fr(ks);A(null,U,D,K)}return}re(oe,S,D,K,H,ue,pe)},de=(S,D,K)=>{const G=D.component=S.component;if(Nl(S,D,K))if(G.asyncDep&&!G.asyncResolved){z(G,D,K);return}else G.next=D,yl(G.update),G.update();else D.el=S.el,G.vnode=D},re=(S,D,K,G,H,ue,pe)=>{const oe=()=>{if(S.isMounted){let{next:we,bu:ve,u:be,parent:Ae,vnode:xe}=S,ze=we,Re;xr(S,!1),we?(we.el=xe.el,z(S,we,pe)):we=xe,ve&&ti(ve),(Re=we.props&&we.props.onVnodeBeforeUpdate)&&Yn(Re,Ae,we,xe),xr(S,!0);const Ze=Di(S),rt=S.subTree;S.subTree=Ze,j(rt,Ze,y(rt.el),ct(rt),S,H,ue),we.el=Ze.el,ze===null&&Sl(S,Ze.el),be&&hn(be,H),(Re=we.props&&we.props.onVnodeUpdated)&&hn(()=>Yn(Re,Ae,we,xe),H)}else{let we;const{el:ve,props:be}=D,{bm:Ae,m:xe,parent:ze}=S,Re=ni(D);if(xr(S,!1),Ae&&ti(Ae),!Re&&(we=be&&be.onVnodeBeforeMount)&&Yn(we,ze,D),xr(S,!0),ve&&gt){const Ze=()=>{S.subTree=Di(S),gt(ve,S.subTree,S,H,null)};Re?D.type.__asyncLoader().then(()=>!S.isUnmounted&&Ze()):Ze()}else{const Ze=S.subTree=Di(S);j(null,Ze,K,G,S,H,ue),D.el=Ze.el}if(xe&&hn(xe,H),!Re&&(we=be&&be.onVnodeMounted)){const Ze=D;hn(()=>Yn(we,ze,Ze),H)}(D.shapeFlag&256||ze&&ni(ze.vnode)&&ze.vnode.shapeFlag&256)&&S.a&&hn(S.a,H),S.isMounted=!0,D=K=G=null}},U=S.effect=new so(oe,()=>mo(se),S.scope),se=S.update=()=>U.run();se.id=S.uid,xr(S,!0),se()},z=(S,D,K)=>{D.component=S;const G=S.vnode.props;S.vnode=D,S.next=null,Zl(S,D.props,G,K),tf(S,D.children,K),us(),aa(),ls()},fe=(S,D,K,G,H,ue,pe,oe,U=!1)=>{const se=S&&S.children,we=S?S.shapeFlag:0,ve=D.children,{patchFlag:be,shapeFlag:Ae}=D;if(be>0){if(be&128){le(se,ve,K,G,H,ue,pe,oe,U);return}else if(be&256){Me(se,ve,K,G,H,ue,pe,oe,U);return}}Ae&8?(we&16&&We(se,H,ue),ve!==se&&v(K,ve)):we&16?Ae&16?le(se,ve,K,G,H,ue,pe,oe,U):We(se,H,ue,!0):(we&8&&v(K,""),Ae&16&&W(ve,K,G,H,ue,pe,oe,U))},Me=(S,D,K,G,H,ue,pe,oe,U)=>{S=S||ns,D=D||ns;const se=S.length,we=D.length,ve=Math.min(se,we);let be;for(be=0;be<ve;be++){const Ae=D[be]=U?wr(D[be]):Wn(D[be]);j(S[be],Ae,K,null,H,ue,pe,oe,U)}se>we?We(S,H,ue,!0,!1,ve):W(D,K,G,H,ue,pe,oe,U,ve)},le=(S,D,K,G,H,ue,pe,oe,U)=>{let se=0;const we=D.length;let ve=S.length-1,be=we-1;for(;se<=ve&&se<=be;){const Ae=S[se],xe=D[se]=U?wr(D[se]):Wn(D[se]);if(vs(Ae,xe))j(Ae,xe,K,null,H,ue,pe,oe,U);else break;se++}for(;se<=ve&&se<=be;){const Ae=S[ve],xe=D[be]=U?wr(D[be]):Wn(D[be]);if(vs(Ae,xe))j(Ae,xe,K,null,H,ue,pe,oe,U);else break;ve--,be--}if(se>ve){if(se<=be){const Ae=be+1,xe=Ae<we?D[Ae].el:G;for(;se<=be;)j(null,D[se]=U?wr(D[se]):Wn(D[se]),K,xe,H,ue,pe,oe,U),se++}}else if(se>be)for(;se<=ve;)Te(S[se],H,ue,!0),se++;else{const Ae=se,xe=se,ze=new Map;for(se=xe;se<=be;se++){const Ge=D[se]=U?wr(D[se]):Wn(D[se]);Ge.key!=null&&ze.set(Ge.key,se)}let Re,Ze=0;const rt=be-xe+1;let Dt=!1,pt=0;const Rt=new Array(rt);for(se=0;se<rt;se++)Rt[se]=0;for(se=Ae;se<=ve;se++){const Ge=S[se];if(Ze>=rt){Te(Ge,H,ue,!0);continue}let dt;if(Ge.key!=null)dt=ze.get(Ge.key);else for(Re=xe;Re<=be;Re++)if(Rt[Re-xe]===0&&vs(Ge,D[Re])){dt=Re;break}dt===void 0?Te(Ge,H,ue,!0):(Rt[dt-xe]=se+1,dt>=pt?pt=dt:Dt=!0,j(Ge,D[dt],K,null,H,ue,pe,oe,U),Ze++)}const on=Dt?sf(Rt):ns;for(Re=on.length-1,se=rt-1;se>=0;se--){const Ge=xe+se,dt=D[Ge],nt=Ge+1<we?D[Ge+1].el:G;Rt[se]===0?j(null,dt,K,nt,H,ue,pe,oe,U):Dt&&(Re<0||se!==on[Re]?Ce(dt,K,nt,2):Re--)}}},Ce=(S,D,K,G,H=null)=>{const{el:ue,type:pe,transition:oe,children:U,shapeFlag:se}=S;if(se&6){Ce(S.component.subTree,D,K,G);return}if(se&128){S.suspense.move(D,K,G);return}if(se&64){pe.move(S,D,K,ft);return}if(pe===Dn){h(ue,D,K);for(let ve=0;ve<U.length;ve++)Ce(U[ve],D,K,G);h(S.anchor,D,K);return}if(pe===xi){B(S,D,K);return}if(G!==2&&se&1&&oe)if(G===0)oe.beforeEnter(ue),h(ue,D,K),hn(()=>oe.enter(ue),H);else{const{leave:ve,delayLeave:be,afterLeave:Ae}=oe,xe=()=>h(ue,D,K),ze=()=>{ve(ue,()=>{xe(),Ae&&Ae()})};be?be(ue,xe,ze):ze()}else h(ue,D,K)},Te=(S,D,K,G=!1,H=!1)=>{const{type:ue,props:pe,ref:oe,children:U,dynamicChildren:se,shapeFlag:we,patchFlag:ve,dirs:be}=S;if(oe!=null&&zi(oe,null,K,S,!0),we&256){D.ctx.deactivate(S);return}const Ae=we&1&&be,xe=!ni(S);let ze;if(xe&&(ze=pe&&pe.onVnodeBeforeUnmount)&&Yn(ze,D,S),we&6)Fe(S.component,K,G);else{if(we&128){S.suspense.unmount(K,G);return}Ae&&Cr(S,null,D,"beforeUnmount"),we&64?S.type.remove(S,D,K,H,ft,G):se&&(ue!==Dn||ve>0&&ve&64)?We(se,D,K,!1,!0):(ue===Dn&&ve&384||!H&&we&16)&&We(U,D,K),G&&Oe(S)}(xe&&(ze=pe&&pe.onVnodeUnmounted)||Ae)&&hn(()=>{ze&&Yn(ze,D,S),Ae&&Cr(S,null,D,"unmounted")},K)},Oe=S=>{const{type:D,el:K,anchor:G,transition:H}=S;if(D===Dn){Ye(K,G);return}if(D===xi){J(S);return}const ue=()=>{m(K),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(S.shapeFlag&1&&H&&!H.persisted){const{leave:pe,delayLeave:oe}=H,U=()=>pe(K,ue);oe?oe(S.el,ue,U):U()}else ue()},Ye=(S,D)=>{let K;for(;S!==D;)K=L(S),m(S),S=K;m(D)},Fe=(S,D,K)=>{const{bum:G,scope:H,update:ue,subTree:pe,um:oe}=S;G&&ti(G),H.stop(),ue&&(ue.active=!1,Te(pe,S,D,K)),oe&&hn(oe,D),hn(()=>{S.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},We=(S,D,K,G=!1,H=!1,ue=0)=>{for(let pe=ue;pe<S.length;pe++)Te(S[pe],D,K,G,H)},ct=S=>S.shapeFlag&6?ct(S.component.subTree):S.shapeFlag&128?S.suspense.next():L(S.anchor||S.el),tt=(S,D,K)=>{S==null?D._vnode&&Te(D._vnode,null,null,!0):j(D._vnode||null,S,D,null,null,null,K),aa(),nc(),D._vnode=S},ft={p:j,um:Te,m:Ce,r:Oe,mt:ie,mc:W,pc:fe,pbc:X,n:ct,o:r};let kt,gt;return a&&([kt,gt]=a(ft)),{render:tt,hydrate:kt,createApp:Gl(tt,kt)}}function xr({effect:r,update:a},f){r.allowRecurse=a.allowRecurse=f}function Tc(r,a,f=!1){const h=r.children,m=a.children;if(_e(h)&&_e(m))for(let p=0;p<h.length;p++){const E=h[p];let T=m[p];T.shapeFlag&1&&!T.dynamicChildren&&((T.patchFlag<=0||T.patchFlag===32)&&(T=m[p]=wr(m[p]),T.el=E.el),f||Tc(E,T)),T.type===yi&&(T.el=E.el)}}function sf(r){const a=r.slice(),f=[0];let h,m,p,E,T;const b=r.length;for(h=0;h<b;h++){const d=r[h];if(d!==0){if(m=f[f.length-1],r[m]<d){a[h]=m,f.push(h);continue}for(p=0,E=f.length-1;p<E;)T=p+E>>1,r[f[T]]<d?p=T+1:E=T;d<r[f[p]]&&(p>0&&(a[h]=f[p-1]),f[p]=h)}}for(p=f.length,E=f[p-1];p-- >0;)f[p]=E,E=a[E];return f}const of=r=>r.__isTeleport,Dn=Symbol.for("v-fgt"),yi=Symbol.for("v-txt"),ks=Symbol.for("v-cmt"),xi=Symbol.for("v-stc"),Is=[];let Fn=null;function sr(r=!1){Is.push(Fn=r?null:[])}function af(){Is.pop(),Fn=Is[Is.length-1]||null}let Os=1;function va(r){Os+=r}function cf(r){return r.dynamicChildren=Os>0?Fn||ns:null,af(),Os>0&&Fn&&Fn.push(r),r}function ir(r,a,f,h,m,p){return cf(rn(r,a,f,h,m,p,!0))}function uf(r){return r?r.__v_isVNode===!0:!1}function vs(r,a){return r.type===a.type&&r.key===a.key}const Ti="__vInternal",vc=({key:r})=>r!=null?r:null,si=({ref:r,ref_key:a,ref_for:f})=>(typeof r=="number"&&(r=""+r),r!=null?xt(r)||sn(r)||Ue(r)?{i:Mn,r,k:a,f:!!f}:r:null);function rn(r,a=null,f=null,h=0,m=null,p=r===Dn?0:1,E=!1,T=!1){const b={__v_isVNode:!0,__v_skip:!0,type:r,props:a,key:a&&vc(a),ref:a&&si(a),scopeId:ic,slotScopeIds:null,children:f,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:h,dynamicProps:m,dynamicChildren:null,appContext:null,ctx:Mn};return T?(yo(b,f),p&128&&r.normalize(b)):f&&(b.shapeFlag|=xt(f)?8:16),Os>0&&!E&&Fn&&(b.patchFlag>0||p&6)&&b.patchFlag!==32&&Fn.push(b),b}const Fr=lf;function lf(r,a=null,f=null,h=0,m=null,p=!1){if((!r||r===$l)&&(r=ks),uf(r)){const T=as(r,a,!0);return f&&yo(T,f),Os>0&&!p&&Fn&&(T.shapeFlag&6?Fn[Fn.indexOf(r)]=T:Fn.push(T)),T.patchFlag|=-2,T}if(wf(r)&&(r=r.__vccOpts),a){a=ff(a);let{class:T,style:b}=a;T&&!xt(T)&&(a.class=no(T)),vt(b)&&(Xa(b)&&!_e(b)&&(b=$t({},b)),a.style=to(b))}const E=xt(r)?1:Al(r)?128:of(r)?64:vt(r)?4:Ue(r)?2:0;return rn(r,a,f,h,m,E,p,!0)}function ff(r){return r?Xa(r)||Ti in r?$t({},r):r:null}function as(r,a,f=!1){const{props:h,ref:m,patchFlag:p,children:E}=r,T=a?df(h||{},a):h;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:T,key:T&&vc(T),ref:a&&a.ref?f&&m?_e(m)?m.concat(si(a)):[m,si(a)]:si(a):m,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:E,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:a&&r.type!==Dn?p===-1?16:p|16:p,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&as(r.ssContent),ssFallback:r.ssFallback&&as(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function wc(r=" ",a=0){return Fr(yi,null,r,a)}function Wn(r){return r==null||typeof r=="boolean"?Fr(ks):_e(r)?Fr(Dn,null,r.slice()):typeof r=="object"?wr(r):Fr(yi,null,String(r))}function wr(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:as(r)}function yo(r,a){let f=0;const{shapeFlag:h}=r;if(a==null)a=null;else if(_e(a))f=16;else if(typeof a=="object")if(h&65){const m=a.default;m&&(m._c&&(m._d=!1),yo(r,m()),m._c&&(m._d=!0));return}else{f=32;const m=a._;!m&&!(Ti in a)?a._ctx=Mn:m===3&&Mn&&(Mn.slots._===1?a._=1:(a._=2,r.patchFlag|=1024))}else Ue(a)?(a={default:a,_ctx:Mn},f=32):(a=String(a),h&64?(f=16,a=[wc(a)]):f=8);r.children=a,r.shapeFlag|=f}function df(...r){const a={};for(let f=0;f<r.length;f++){const h=r[f];for(const m in h)if(m==="class")a.class!==h.class&&(a.class=no([a.class,h.class]));else if(m==="style")a.style=to([a.style,h.style]);else if(li(m)){const p=a[m],E=h[m];E&&p!==E&&!(_e(p)&&p.includes(E))&&(a[m]=p?[].concat(p,E):E)}else m!==""&&(a[m]=h[m])}return a}function Yn(r,a,f,h=null){Un(r,a,7,[f,h])}const hf=dc();let mf=0;function gf(r,a,f){const h=r.type,m=(a?a.appContext:r.appContext)||hf,p={uid:mf++,vnode:r,type:h,parent:a,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,scope:new Cu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mc(h,m),emitsOptions:sc(h,m),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:h.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:f,suspenseId:f?f.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=a?a.root:p,p.emit=wl.bind(null,p),r.ce&&r.ce(p),p}let Xt=null,To,es,wa="__VUE_INSTANCE_SETTERS__";(es=Mi()[wa])||(es=Mi()[wa]=[]),es.push(r=>Xt=r),To=r=>{es.length>1?es.forEach(a=>a(r)):es[0](r)};const cs=r=>{To(r),r.scope.on()},Jr=()=>{Xt&&Xt.scope.off(),To(null)};function bc(r){return r.vnode.shapeFlag&4}let Ps=!1;function pf(r,a=!1){Ps=a;const{props:f,children:h}=r.vnode,m=bc(r);Xl(r,f,m,a),ef(r,h);const p=m?yf(r,a):void 0;return Ps=!1,p}function yf(r,a){const f=r.type;r.accessCache=Object.create(null),r.proxy=Za(new Proxy(r.ctx,jl));const{setup:h}=f;if(h){const m=r.setupContext=h.length>1?vf(r):null;cs(r),us();const p=Er(h,r,0,[r.props,m]);if(ls(),Jr(),Ra(p)){if(p.then(Jr,Jr),a)return p.then(E=>{ba(r,E,a)}).catch(E=>{mi(E,r,0)});r.asyncDep=p}else ba(r,p,a)}else Ec(r,a)}function ba(r,a,f){Ue(a)?r.type.__ssrInlineRender?r.ssrRender=a:r.render=a:vt(a)&&(r.setupState=Qa(a)),Ec(r,f)}let Ea;function Ec(r,a,f){const h=r.type;if(!r.render){if(!a&&Ea&&!h.render){const m=h.template||go(r).template;if(m){const{isCustomElement:p,compilerOptions:E}=r.appContext.config,{delimiters:T,compilerOptions:b}=h,d=$t($t({isCustomElement:p,delimiters:T},E),b);h.render=Ea(m,d)}}r.render=h.render||Jn}cs(r),us(),Vl(r),ls(),Jr()}function Tf(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(a,f){return mn(r,"get","$attrs"),a[f]}}))}function vf(r){const a=f=>{r.exposed=f||{}};return{get attrs(){return Tf(r)},slots:r.slots,emit:r.emit,expose:a}}function vi(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(Qa(Za(r.exposed)),{get(a,f){if(f in a)return a[f];if(f in Es)return Es[f](r)},has(a,f){return f in a||f in Es}}))}function wf(r){return Ue(r)&&"__vccOpts"in r}const bf=(r,a)=>hl(r,a,Ps),Ef=Symbol.for("v-scx"),If=()=>ri(Ef),Nf="3.3.4",Sf="http://www.w3.org/2000/svg",Lr=typeof document<"u"?document:null,Ia=Lr&&Lr.createElement("template"),Af={insert:(r,a,f)=>{a.insertBefore(r,f||null)},remove:r=>{const a=r.parentNode;a&&a.removeChild(r)},createElement:(r,a,f,h)=>{const m=a?Lr.createElementNS(Sf,r):Lr.createElement(r,f?{is:f}:void 0);return r==="select"&&h&&h.multiple!=null&&m.setAttribute("multiple",h.multiple),m},createText:r=>Lr.createTextNode(r),createComment:r=>Lr.createComment(r),setText:(r,a)=>{r.nodeValue=a},setElementText:(r,a)=>{r.textContent=a},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Lr.querySelector(r),setScopeId(r,a){r.setAttribute(a,"")},insertStaticContent(r,a,f,h,m,p){const E=f?f.previousSibling:a.lastChild;if(m&&(m===p||m.nextSibling))for(;a.insertBefore(m.cloneNode(!0),f),!(m===p||!(m=m.nextSibling)););else{Ia.innerHTML=h?`<svg>${r}</svg>`:r;const T=Ia.content;if(h){const b=T.firstChild;for(;b.firstChild;)T.appendChild(b.firstChild);T.removeChild(b)}a.insertBefore(T,f)}return[E?E.nextSibling:a.firstChild,f?f.previousSibling:a.lastChild]}};function kf(r,a,f){const h=r._vtc;h&&(a=(a?[a,...h]:[...h]).join(" ")),a==null?r.removeAttribute("class"):f?r.setAttribute("class",a):r.className=a}function Of(r,a,f){const h=r.style,m=xt(f);if(f&&!m){if(a&&!xt(a))for(const p in a)f[p]==null&&Gi(h,p,"");for(const p in f)Gi(h,p,f[p])}else{const p=h.display;m?a!==f&&(h.cssText=f):a&&r.removeAttribute("style"),"_vod"in r&&(h.display=p)}}const Na=/\s*!important$/;function Gi(r,a,f){if(_e(f))f.forEach(h=>Gi(r,a,h));else if(f==null&&(f=""),a.startsWith("--"))r.setProperty(a,f);else{const h=Pf(r,a);Na.test(f)?r.setProperty(Ur(h),f.replace(Na,""),"important"):r[h]=f}}const Sa=["Webkit","Moz","ms"],Ri={};function Pf(r,a){const f=Ri[a];if(f)return f;let h=os(a);if(h!=="filter"&&h in r)return Ri[a]=h;h=Ma(h);for(let m=0;m<Sa.length;m++){const p=Sa[m]+h;if(p in r)return Ri[a]=p}return a}const Aa="http://www.w3.org/1999/xlink";function Df(r,a,f,h,m){if(h&&a.startsWith("xlink:"))f==null?r.removeAttributeNS(Aa,a.slice(6,a.length)):r.setAttributeNS(Aa,a,f);else{const p=_u(a);f==null||p&&!Fa(f)?r.removeAttribute(a):r.setAttribute(a,p?"":f)}}function _f(r,a,f,h,m,p,E){if(a==="innerHTML"||a==="textContent"){h&&E(h,m,p),r[a]=f==null?"":f;return}const T=r.tagName;if(a==="value"&&T!=="PROGRESS"&&!T.includes("-")){r._value=f;const d=T==="OPTION"?r.getAttribute("value"):r.value,v=f==null?"":f;d!==v&&(r.value=v),f==null&&r.removeAttribute(a);return}let b=!1;if(f===""||f==null){const d=typeof r[a];d==="boolean"?f=Fa(f):f==null&&d==="string"?(f="",b=!0):d==="number"&&(f=0,b=!0)}try{r[a]=f}catch{}b&&r.removeAttribute(a)}function ts(r,a,f,h){r.addEventListener(a,f,h)}function Cf(r,a,f,h){r.removeEventListener(a,f,h)}function xf(r,a,f,h,m=null){const p=r._vei||(r._vei={}),E=p[a];if(h&&E)E.value=h;else{const[T,b]=Rf(a);if(h){const d=p[a]=Mf(h,m);ts(r,T,d,b)}else E&&(Cf(r,T,E,b),p[a]=void 0)}}const ka=/(?:Once|Passive|Capture)$/;function Rf(r){let a;if(ka.test(r)){a={};let h;for(;h=r.match(ka);)r=r.slice(0,r.length-h[0].length),a[h[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):Ur(r.slice(2)),a]}let Li=0;const Lf=Promise.resolve(),Bf=()=>Li||(Lf.then(()=>Li=0),Li=Date.now());function Mf(r,a){const f=h=>{if(!h._vts)h._vts=Date.now();else if(h._vts<=f.attached)return;Un(Ff(h,f.value),a,5,[h])};return f.value=r,f.attached=Bf(),f}function Ff(r,a){if(_e(a)){const f=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{f.call(r),r._stopped=!0},a.map(h=>m=>!m._stopped&&h&&h(m))}else return a}const Oa=/^on[a-z]/,Jf=(r,a,f,h,m=!1,p,E,T,b)=>{a==="class"?kf(r,h,m):a==="style"?Of(r,f,h):li(a)?Xi(a)||xf(r,a,f,h,E):(a[0]==="."?(a=a.slice(1),!0):a[0]==="^"?(a=a.slice(1),!1):Uf(r,a,h,m))?_f(r,a,h,p,E,T,b):(a==="true-value"?r._trueValue=h:a==="false-value"&&(r._falseValue=h),Df(r,a,h,m))};function Uf(r,a,f,h){return h?!!(a==="innerHTML"||a==="textContent"||a in r&&Oa.test(a)&&Ue(f)):a==="spellcheck"||a==="draggable"||a==="translate"||a==="form"||a==="list"&&r.tagName==="INPUT"||a==="type"&&r.tagName==="TEXTAREA"||Oa.test(a)&&xt(f)?!1:a in r}const Pa=r=>{const a=r.props["onUpdate:modelValue"]||!1;return _e(a)?f=>ti(a,f):a};function $f(r){r.target.composing=!0}function Da(r){const a=r.target;a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}const _a={created(r,{modifiers:{lazy:a,trim:f,number:h}},m){r._assign=Pa(m);const p=h||m.props&&m.props.type==="number";ts(r,a?"change":"input",E=>{if(E.target.composing)return;let T=r.value;f&&(T=T.trim()),p&&(T=Bi(T)),r._assign(T)}),f&&ts(r,"change",()=>{r.value=r.value.trim()}),a||(ts(r,"compositionstart",$f),ts(r,"compositionend",Da),ts(r,"change",Da))},mounted(r,{value:a}){r.value=a==null?"":a},beforeUpdate(r,{value:a,modifiers:{lazy:f,trim:h,number:m}},p){if(r._assign=Pa(p),r.composing||document.activeElement===r&&r.type!=="range"&&(f||h&&r.value.trim()===a||(m||r.type==="number")&&Bi(r.value)===a))return;const E=a==null?"":a;r.value!==E&&(r.value=E)}},jf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qs=(r,a)=>f=>{if(!("key"in f))return;const h=Ur(f.key);if(a.some(m=>m===h||jf[m]===h))return r(f)},Vf=$t({patchProp:Jf},Af);let Ca;function Kf(){return Ca||(Ca=nf(Vf))}const qf=(...r)=>{const a=Kf().createApp(...r),{mount:f}=a;return a.mount=h=>{const m=Yf(h);if(!m)return;const p=a._component;!Ue(p)&&!p.render&&!p.template&&(p.template=m.innerHTML),m.innerHTML="";const E=f(m,!1,m instanceof SVGElement);return m instanceof Element&&(m.removeAttribute("v-cloak"),m.setAttribute("data-v-app","")),E},a};function Yf(r){return xt(r)?document.querySelector(r):r}var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ic={exports:{}};/*!
 * 
 * yorkie-js-sdk for building collaborative editing applications.
 *  - Version: v0.4.18
 *  - Date: 2024-04-23T11:39Z
 *  - Homepage: https://yorkie.dev
 *
 * Copyright 2020 The Yorkie Authors. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(r,a){(function(h,m){r.exports=m()})(Wf,()=>(()=>{var f={646:(E,T,b)=>{Object.defineProperty(T,"__esModule",{value:!0});const{proto3:d,StringValue:v,Timestamp:y}=b(532),L=d.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),P=d.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),Y=d.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:ie},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:ue}}]),j=d.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:pe},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:O,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:U},{no:6,name:"is_removed",kind:"scalar",T:8}]),O=d.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:A},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:V,repeated:!0},{no:4,name:"presence_change",kind:"message",T:G}]),A=d.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),V=d.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:B,oneof:"body"},{no:2,name:"add",kind:"message",T:J,oneof:"body"},{no:3,name:"move",kind:"message",T:M,oneof:"body"},{no:4,name:"remove",kind:"message",T:w,oneof:"body"},{no:5,name:"edit",kind:"message",T:Z,oneof:"body"},{no:6,name:"select",kind:"message",T:W,oneof:"body"},{no:7,name:"style",kind:"message",T:C,oneof:"body"},{no:8,name:"increase",kind:"message",T:X,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:ne,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:ae,oneof:"body"}]),B=d.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:$},{no:4,name:"executed_at",kind:"message",T:U}],{localName:"Operation_Set"}),J=d.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"prev_created_at",kind:"message",T:U},{no:3,name:"value",kind:"message",T:$},{no:4,name:"executed_at",kind:"message",T:U}],{localName:"Operation_Add"}),M=d.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"prev_created_at",kind:"message",T:U},{no:3,name:"created_at",kind:"message",T:U},{no:4,name:"executed_at",kind:"message",T:U}],{localName:"Operation_Move"}),w=d.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"created_at",kind:"message",T:U},{no:3,name:"executed_at",kind:"message",T:U}],{localName:"Operation_Remove"}),Z=d.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"from",kind:"message",T:oe},{no:3,name:"to",kind:"message",T:oe},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:U}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:U},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),W=d.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"from",kind:"message",T:oe},{no:3,name:"to",kind:"message",T:oe},{no:4,name:"executed_at",kind:"message",T:U}],{localName:"Operation_Select"}),C=d.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"from",kind:"message",T:oe},{no:3,name:"to",kind:"message",T:oe},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:U},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:U}}],{localName:"Operation_Style"}),X=d.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"value",kind:"message",T:$},{no:3,name:"executed_at",kind:"message",T:U}],{localName:"Operation_Increase"}),ne=d.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"from",kind:"message",T:ft},{no:3,name:"to",kind:"message",T:ft},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:U}},{no:5,name:"contents",kind:"message",T:ct,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:U}],{localName:"Operation_TreeEdit"}),ae=d.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:U},{no:2,name:"from",kind:"message",T:ft},{no:3,name:"to",kind:"message",T:ft},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:U},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0}],{localName:"Operation_TreeStyle"}),$=d.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:U},{no:2,name:"moved_at",kind:"message",T:U},{no:3,name:"removed_at",kind:"message",T:U},{no:4,name:"type",kind:"enum",T:d.getEnumType(L)},{no:5,name:"value",kind:"scalar",T:12}]),ie=d.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:de,oneof:"body"},{no:2,name:"json_array",kind:"message",T:re,oneof:"body"},{no:3,name:"primitive",kind:"message",T:z,oneof:"body"},{no:5,name:"text",kind:"message",T:fe,oneof:"body"},{no:6,name:"counter",kind:"message",T:Me,oneof:"body"},{no:7,name:"tree",kind:"message",T:le,oneof:"body"}]),de=d.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:Ce,repeated:!0},{no:2,name:"created_at",kind:"message",T:U},{no:3,name:"moved_at",kind:"message",T:U},{no:4,name:"removed_at",kind:"message",T:U}],{localName:"JSONElement_JSONObject"}),re=d.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:Te,repeated:!0},{no:2,name:"created_at",kind:"message",T:U},{no:3,name:"moved_at",kind:"message",T:U},{no:4,name:"removed_at",kind:"message",T:U}],{localName:"JSONElement_JSONArray"}),z=d.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:d.getEnumType(L)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:U},{no:4,name:"moved_at",kind:"message",T:U},{no:5,name:"removed_at",kind:"message",T:U}],{localName:"JSONElement_Primitive"}),fe=d.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:Ye,repeated:!0},{no:2,name:"created_at",kind:"message",T:U},{no:3,name:"moved_at",kind:"message",T:U},{no:4,name:"removed_at",kind:"message",T:U}],{localName:"JSONElement_Text"}),Me=d.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:d.getEnumType(L)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:U},{no:4,name:"moved_at",kind:"message",T:U},{no:5,name:"removed_at",kind:"message",T:U}],{localName:"JSONElement_Counter"}),le=d.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:We,repeated:!0},{no:2,name:"created_at",kind:"message",T:U},{no:3,name:"moved_at",kind:"message",T:U},{no:4,name:"removed_at",kind:"message",T:U}],{localName:"JSONElement_Tree"}),Ce=d.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:ie}]),Te=d.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:Te},{no:2,name:"element",kind:"message",T:ie}]),Oe=d.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:U}]),Ye=d.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:Fe},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:U},{no:4,name:"ins_prev_id",kind:"message",T:Fe},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Oe}}]),Fe=d.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:U},{no:2,name:"offset",kind:"scalar",T:5}]),We=d.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:tt},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:U},{no:5,name:"ins_prev_id",kind:"message",T:tt},{no:6,name:"ins_next_id",kind:"message",T:tt},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Oe}}]),ct=d.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:We,repeated:!0}]),tt=d.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:U},{no:2,name:"offset",kind:"scalar",T:5}]),ft=d.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:tt},{no:2,name:"left_sibling_id",kind:"message",T:tt}]),kt=d.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:y}]),gt=d.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:y},{no:9,name:"updated_at",kind:"message",T:y}]),S=d.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:v},{no:2,name:"auth_webhook_url",kind:"message",T:v},{no:3,name:"auth_webhook_methods",kind:"message",T:D},{no:4,name:"client_deactivate_threshold",kind:"message",T:v}]),D=d.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"}),K=d.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:y},{no:5,name:"accessed_at",kind:"message",T:y},{no:6,name:"updated_at",kind:"message",T:y}]),G=d.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:d.getEnumType(H)},{no:2,name:"presence",kind:"message",T:ue}]),H=d.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),ue=d.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),pe=d.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),oe=d.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:U},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),U=d.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),se=d.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),we=d.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:d.getEnumType(P)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:se}]);T.ValueType=L,T.DocEventType=P,T.Snapshot=Y,T.ChangePack=j,T.Change=O,T.ChangeID=A,T.Operation=V,T.Operation_Set=B,T.Operation_Add=J,T.Operation_Move=M,T.Operation_Remove=w,T.Operation_Edit=Z,T.Operation_Select=W,T.Operation_Style=C,T.Operation_Increase=X,T.Operation_TreeEdit=ne,T.Operation_TreeStyle=ae,T.JSONElementSimple=$,T.JSONElement=ie,T.JSONElement_JSONObject=de,T.JSONElement_JSONArray=re,T.JSONElement_Primitive=z,T.JSONElement_Text=fe,T.JSONElement_Counter=Me,T.JSONElement_Tree=le,T.RHTNode=Ce,T.RGANode=Te,T.NodeAttr=Oe,T.TextNode=Ye,T.TextNodeID=Fe,T.TreeNode=We,T.TreeNodes=ct,T.TreeNodeID=tt,T.TreePos=ft,T.User=kt,T.Project=gt,T.UpdatableProjectFields=S,T.UpdatableProjectFields_AuthWebhookMethods=D,T.DocumentSummary=K,T.PresenceChange=G,T.PresenceChange_ChangeType=H,T.Presence=ue,T.Checkpoint=pe,T.TextNodePos=oe,T.TimeTicket=U,T.DocEventBody=se,T.DocEvent=we},295:(E,T,b)=>{const{ActivateClientRequest:d,ActivateClientResponse:v,AttachDocumentRequest:y,AttachDocumentResponse:L,BroadcastRequest:P,BroadcastResponse:Y,DeactivateClientRequest:j,DeactivateClientResponse:O,DetachDocumentRequest:A,DetachDocumentResponse:V,PushPullChangesRequest:B,PushPullChangesResponse:J,RemoveDocumentRequest:M,RemoveDocumentResponse:w,WatchDocumentRequest:Z,WatchDocumentResponse:W}=b(176),{MethodKind:C}=b(532),X={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:d,O:v,kind:C.Unary},deactivateClient:{name:"DeactivateClient",I:j,O,kind:C.Unary},attachDocument:{name:"AttachDocument",I:y,O:L,kind:C.Unary},detachDocument:{name:"DetachDocument",I:A,O:V,kind:C.Unary},removeDocument:{name:"RemoveDocument",I:M,O:w,kind:C.Unary},pushPullChanges:{name:"PushPullChanges",I:B,O:J,kind:C.Unary},watchDocument:{name:"WatchDocument",I:Z,O:W,kind:C.ServerStreaming},broadcast:{name:"Broadcast",I:P,O:Y,kind:C.Unary}}};T.V=X},176:(E,T,b)=>{Object.defineProperty(T,"__esModule",{value:!0});const{proto3:d}=b(532),{ChangePack:v,DocEvent:y}=b(646),L=d.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),P=d.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Y=d.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),j=d.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),O=d.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:v}]),A=d.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:v}]),V=d.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:v},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),B=d.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:v}]),J=d.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),M=d.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:w,oneof:"body"},{no:2,name:"event",kind:"message",T:y,oneof:"body"}]),w=d.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),Z=d.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:v}]),W=d.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:v}]),C=d.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:v},{no:4,name:"push_only",kind:"scalar",T:8}]),X=d.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:v}]),ne=d.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),ae=d.makeMessageType("yorkie.v1.BroadcastResponse",[]);T.ActivateClientRequest=L,T.ActivateClientResponse=P,T.DeactivateClientRequest=Y,T.DeactivateClientResponse=j,T.AttachDocumentRequest=O,T.AttachDocumentResponse=A,T.DetachDocumentRequest=V,T.DetachDocumentResponse=B,T.WatchDocumentRequest=J,T.WatchDocumentResponse=M,T.WatchDocumentResponse_Initialization=w,T.RemoveDocumentRequest=Z,T.RemoveDocumentResponse=W,T.PushPullChangesRequest=C,T.PushPullChangesResponse=X,T.BroadcastRequest=ne,T.BroadcastResponse=ae},79:(E,T,b)=>{b.d(T,{Lt:()=>P,TD:()=>L,oP:()=>Y});var d=b(818),v=b(120),y=b(210),L;(function(j){j[j.Varint=0]="Varint",j[j.Bit64=1]="Bit64",j[j.LengthDelimited=2]="LengthDelimited",j[j.StartGroup=3]="StartGroup",j[j.EndGroup=4]="EndGroup",j[j.Bit32=5]="Bit32"})(L||(L={}));class P{constructor(O){this.stack=[],this.textEncoder=O!=null?O:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let O=0;for(let B=0;B<this.chunks.length;B++)O+=this.chunks[B].length;let A=new Uint8Array(O),V=0;for(let B=0;B<this.chunks.length;B++)A.set(this.chunks[B],V),V+=this.chunks[B].length;return this.chunks=[],A}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let O=this.finish(),A=this.stack.pop();if(!A)throw new Error("invalid state, fork stack empty");return this.chunks=A.chunks,this.buf=A.buf,this.uint32(O.byteLength),this.raw(O)}tag(O,A){return this.uint32((O<<3|A)>>>0)}raw(O){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(O),this}uint32(O){for((0,v.fp)(O);O>127;)this.buf.push(O&127|128),O=O>>>7;return this.buf.push(O),this}int32(O){return(0,v.ug)(O),(0,d.fC)(O,this.buf),this}bool(O){return this.buf.push(O?1:0),this}bytes(O){return this.uint32(O.byteLength),this.raw(O)}string(O){let A=this.textEncoder.encode(O);return this.uint32(A.byteLength),this.raw(A)}float(O){(0,v.E_)(O);let A=new Uint8Array(4);return new DataView(A.buffer).setFloat32(0,O,!0),this.raw(A)}double(O){let A=new Uint8Array(8);return new DataView(A.buffer).setFloat64(0,O,!0),this.raw(A)}fixed32(O){(0,v.fp)(O);let A=new Uint8Array(4);return new DataView(A.buffer).setUint32(0,O,!0),this.raw(A)}sfixed32(O){(0,v.ug)(O);let A=new Uint8Array(4);return new DataView(A.buffer).setInt32(0,O,!0),this.raw(A)}sint32(O){return(0,v.ug)(O),O=(O<<1^O>>31)>>>0,(0,d.fC)(O,this.buf),this}sfixed64(O){let A=new Uint8Array(8),V=new DataView(A.buffer),B=y.q.enc(O);return V.setInt32(0,B.lo,!0),V.setInt32(4,B.hi,!0),this.raw(A)}fixed64(O){let A=new Uint8Array(8),V=new DataView(A.buffer),B=y.q.uEnc(O);return V.setInt32(0,B.lo,!0),V.setInt32(4,B.hi,!0),this.raw(A)}int64(O){let A=y.q.enc(O);return(0,d._y)(A.lo,A.hi,this.buf),this}sint64(O){let A=y.q.enc(O),V=A.hi>>31,B=A.lo<<1^V,J=(A.hi<<1|A.lo>>>31)^V;return(0,d._y)(B,J,this.buf),this}uint64(O){let A=y.q.uEnc(O);return(0,d._y)(A.lo,A.hi,this.buf),this}}class Y{constructor(O,A){this.varint64=d.sg,this.uint32=d.jI,this.buf=O,this.len=O.length,this.pos=0,this.view=new DataView(O.buffer,O.byteOffset,O.byteLength),this.textDecoder=A!=null?A:new TextDecoder}tag(){let O=this.uint32(),A=O>>>3,V=O&7;if(A<=0||V<0||V>5)throw new Error("illegal tag: field no "+A+" wire type "+V);return[A,V]}skip(O){let A=this.pos;switch(O){case L.Varint:for(;this.buf[this.pos++]&128;);break;case L.Bit64:this.pos+=4;case L.Bit32:this.pos+=4;break;case L.LengthDelimited:let V=this.uint32();this.pos+=V;break;case L.StartGroup:let B;for(;(B=this.tag()[1])!==L.EndGroup;)this.skip(B);break;default:throw new Error("cant skip wire type "+O)}return this.assertBounds(),this.buf.subarray(A,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let O=this.uint32();return O>>>1^-(O&1)}int64(){return y.q.dec(...this.varint64())}uint64(){return y.q.uDec(...this.varint64())}sint64(){let[O,A]=this.varint64(),V=-(O&1);return O=(O>>>1|(A&1)<<31)^V,A=A>>>1^V,y.q.dec(O,A)}bool(){let[O,A]=this.varint64();return O!==0||A!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return y.q.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return y.q.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let O=this.uint32(),A=this.pos;return this.pos+=O,this.assertBounds(),this.buf.subarray(A,A+O)}string(){return this.textDecoder.decode(this.bytes())}}},465:(E,T,b)=>{b.d(T,{p:()=>v,w:()=>d});var d;(function(y){y[y.DOUBLE=1]="DOUBLE",y[y.FLOAT=2]="FLOAT",y[y.INT64=3]="INT64",y[y.UINT64=4]="UINT64",y[y.INT32=5]="INT32",y[y.FIXED64=6]="FIXED64",y[y.FIXED32=7]="FIXED32",y[y.BOOL=8]="BOOL",y[y.STRING=9]="STRING",y[y.BYTES=12]="BYTES",y[y.UINT32=13]="UINT32",y[y.SFIXED32=15]="SFIXED32",y[y.SFIXED64=16]="SFIXED64",y[y.SINT32=17]="SINT32",y[y.SINT64=18]="SINT64"})(d||(d={}));var v;(function(y){y[y.BIGINT=0]="BIGINT",y[y.STRING=1]="STRING"})(v||(v={}))},733:(E,T,b)=>{b.d(T,{I:()=>y});var d=b(561),v=b(850);class y extends d.v{constructor(P){super(),this.typeUrl="",this.value=new Uint8Array(0),v.w.util.initPartial(P,this)}toJson(P){var Y;if(this.typeUrl==="")return{};const j=this.typeUrlToName(this.typeUrl),O=(Y=P==null?void 0:P.typeRegistry)===null||Y===void 0?void 0:Y.findMessage(j);if(!O)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let V=O.fromBinary(this.value).toJson(P);return(j.startsWith("google.protobuf.")||V===null||Array.isArray(V)||typeof V!="object")&&(V={value:V}),V["@type"]=this.typeUrl,V}fromJson(P,Y){var j;if(P===null||Array.isArray(P)||typeof P!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${P===null?"null":Array.isArray(P)?"array":typeof P}`);if(Object.keys(P).length==0)return this;const O=P["@type"];if(typeof O!="string"||O=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const A=this.typeUrlToName(O),V=(j=Y==null?void 0:Y.typeRegistry)===null||j===void 0?void 0:j.findMessage(A);if(!V)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${O} is not in the type registry`);let B;if(A.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(P,"value"))B=V.fromJson(P.value,Y);else{const J=Object.assign({},P);delete J["@type"],B=V.fromJson(J,Y)}return this.packFrom(B),this}packFrom(P){this.value=P.toBinary(),this.typeUrl=this.typeNameToUrl(P.getType().typeName)}unpackTo(P){return this.is(P.getType())?(P.fromBinary(this.value),!0):!1}unpack(P){if(this.typeUrl==="")return;const Y=P.findMessage(this.typeUrlToName(this.typeUrl));if(!!Y)return Y.fromBinary(this.value)}is(P){if(this.typeUrl==="")return!1;const Y=this.typeUrlToName(this.typeUrl);let j="";return typeof P=="string"?j=P:j=P.typeName,Y===j}typeNameToUrl(P){return`type.googleapis.com/${P}`}typeUrlToName(P){if(!P.length)throw new Error(`invalid type url: ${P}`);const Y=P.lastIndexOf("/"),j=Y>=0?P.substring(Y+1):P;if(!j.length)throw new Error(`invalid type url: ${P}`);return j}static pack(P){const Y=new y;return Y.packFrom(P),Y}static fromBinary(P,Y){return new y().fromBinary(P,Y)}static fromJson(P,Y){return new y().fromJson(P,Y)}static fromJsonString(P,Y){return new y().fromJsonString(P,Y)}static equals(P,Y){return v.w.util.equals(y,P,Y)}}y.runtime=v.w,y.typeName="google.protobuf.Any",y.fields=v.w.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])},818:(E,T,b)=>{b.d(T,{Ak:()=>P,CZ:()=>L,Fd:()=>Y,_y:()=>v,fC:()=>B,jI:()=>J,sg:()=>d});function d(){let M=0,w=0;for(let W=0;W<28;W+=7){let C=this.buf[this.pos++];if(M|=(C&127)<<W,(C&128)==0)return this.assertBounds(),[M,w]}let Z=this.buf[this.pos++];if(M|=(Z&15)<<28,w=(Z&112)>>4,(Z&128)==0)return this.assertBounds(),[M,w];for(let W=3;W<=31;W+=7){let C=this.buf[this.pos++];if(w|=(C&127)<<W,(C&128)==0)return this.assertBounds(),[M,w]}throw new Error("invalid varint")}function v(M,w,Z){for(let X=0;X<28;X=X+7){const ne=M>>>X,ae=!(ne>>>7==0&&w==0),$=(ae?ne|128:ne)&255;if(Z.push($),!ae)return}const W=M>>>28&15|(w&7)<<4,C=w>>3!=0;if(Z.push((C?W|128:W)&255),!!C){for(let X=3;X<31;X=X+7){const ne=w>>>X,ae=ne>>>7!=0,$=(ae?ne|128:ne)&255;if(Z.push($),!ae)return}Z.push(w>>>31&1)}}const y=4294967296;function L(M){const w=M[0]==="-";w&&(M=M.slice(1));const Z=1e6;let W=0,C=0;function X(ne,ae){const $=Number(M.slice(ne,ae));C*=Z,W=W*Z+$,W>=y&&(C=C+(W/y|0),W=W%y)}return X(-24,-18),X(-18,-12),X(-12,-6),X(-6),w?A(W,C):O(W,C)}function P(M,w){let Z=O(M,w);const W=Z.hi&2147483648;W&&(Z=A(Z.lo,Z.hi));const C=Y(Z.lo,Z.hi);return W?"-"+C:C}function Y(M,w){if({lo:M,hi:w}=j(M,w),w<=2097151)return String(y*w+M);const Z=M&16777215,W=(M>>>24|w<<8)&16777215,C=w>>16&65535;let X=Z+W*6777216+C*6710656,ne=W+C*8147497,ae=C*2;const $=1e7;return X>=$&&(ne+=Math.floor(X/$),X%=$),ne>=$&&(ae+=Math.floor(ne/$),ne%=$),ae.toString()+V(ne)+V(X)}function j(M,w){return{lo:M>>>0,hi:w>>>0}}function O(M,w){return{lo:M|0,hi:w|0}}function A(M,w){return w=~w,M?M=~M+1:w+=1,O(M,w)}const V=M=>{const w=String(M);return"0000000".slice(w.length)+w};function B(M,w){if(M>=0){for(;M>127;)w.push(M&127|128),M=M>>>7;w.push(M)}else{for(let Z=0;Z<9;Z++)w.push(M&127|128),M=M>>7;w.push(1)}}function J(){let M=this.buf[this.pos++],w=M&127;if((M&128)==0)return this.assertBounds(),w;if(M=this.buf[this.pos++],w|=(M&127)<<7,(M&128)==0)return this.assertBounds(),w;if(M=this.buf[this.pos++],w|=(M&127)<<14,(M&128)==0)return this.assertBounds(),w;if(M=this.buf[this.pos++],w|=(M&127)<<21,(M&128)==0)return this.assertBounds(),w;M=this.buf[this.pos++],w|=(M&15)<<28;for(let Z=5;(M&128)!==0&&Z<10;Z++)M=this.buf[this.pos++];if((M&128)!=0)throw new Error("invalid varint");return this.assertBounds(),w>>>0}},532:(E,T,b)=>{b.r(T),b.d(T,{Any:()=>hs.I,Api:()=>On,BinaryReader:()=>ne.oP,BinaryWriter:()=>ne.Lt,BoolValue:()=>Je,BytesValue:()=>Qt,CodeGeneratorRequest:()=>_t,CodeGeneratorResponse:()=>ln,CodeGeneratorResponse_Feature:()=>Vn,CodeGeneratorResponse_File:()=>wt,DescriptorProto:()=>Fe,DescriptorProto_ExtensionRange:()=>We,DescriptorProto_ReservedRange:()=>ct,DoubleValue:()=>Jt,Duration:()=>Kt,Edition:()=>Te,Empty:()=>at,Enum:()=>xn,EnumDescriptorProto:()=>G,EnumDescriptorProto_EnumReservedRange:()=>H,EnumOptions:()=>rt,EnumValue:()=>kn,EnumValueDescriptorProto:()=>ue,EnumValueOptions:()=>Dt,ExtensionRangeOptions:()=>tt,ExtensionRangeOptions_Declaration:()=>kt,ExtensionRangeOptions_VerificationState:()=>ft,FeatureSet:()=>nt,FeatureSetDefaults:()=>En,FeatureSetDefaults_FeatureSetEditionDefault:()=>In,FeatureSet_EnumType:()=>lr,FeatureSet_FieldPresence:()=>Gn,FeatureSet_JsonFormat:()=>Sr,FeatureSet_MessageEncoding:()=>gn,FeatureSet_RepeatedFieldEncoding:()=>$n,FeatureSet_Utf8Validation:()=>Nr,Field:()=>Sn,FieldDescriptorProto:()=>gt,FieldDescriptorProto_Label:()=>D,FieldDescriptorProto_Type:()=>S,FieldMask:()=>cn,FieldOptions:()=>ve,FieldOptions_CType:()=>be,FieldOptions_EditionDefault:()=>Re,FieldOptions_JSType:()=>Ae,FieldOptions_OptionRetention:()=>xe,FieldOptions_OptionTargetType:()=>ze,Field_Cardinality:()=>An,Field_Kind:()=>Wt,FileDescriptorProto:()=>Ye,FileDescriptorSet:()=>Oe,FileOptions:()=>U,FileOptions_OptimizeMode:()=>se,FloatValue:()=>St,GeneratedCodeInfo:()=>$e,GeneratedCodeInfo_Annotation:()=>st,GeneratedCodeInfo_Annotation_Semantic:()=>fr,Int32Value:()=>Bt,Int64Value:()=>Zt,ListValue:()=>qt,LongType:()=>y.p,Message:()=>le.v,MessageOptions:()=>we,Method:()=>fn,MethodDescriptorProto:()=>oe,MethodIdempotency:()=>Ce.w,MethodKind:()=>Ce.t,MethodOptions:()=>Rt,MethodOptions_IdempotencyLevel:()=>on,Mixin:()=>dn,NullValue:()=>tr,OneofDescriptorProto:()=>K,OneofOptions:()=>Ze,Option:()=>Be,ScalarType:()=>y.w,ServiceDescriptorProto:()=>pe,ServiceOptions:()=>pt,SourceCodeInfo:()=>Q,SourceCodeInfo_Location:()=>yt,SourceContext:()=>Mt,StringValue:()=>mt,Struct:()=>un,Syntax:()=>Ft,Timestamp:()=>Vt,Type:()=>Cn,UInt32Value:()=>it,UInt64Value:()=>Yt,UninterpretedOption:()=>Ge,UninterpretedOption_NamePart:()=>dt,Value:()=>ht,Version:()=>Ut,WireType:()=>ne.TD,codegenInfo:()=>Me,createDescriptorSet:()=>jr,createRegistry:()=>Tn,createRegistryFromDescriptors:()=>ut,proto2:()=>w,proto3:()=>d.w,protoBase64:()=>X.W,protoDelimited:()=>de,protoDouble:()=>W,protoInt64:()=>C.q,toPlainMessage:()=>mr});var d=b(850),v=b(493),y=b(465),L=b(744);function P(){return Object.assign(Object.assign({},(0,L.gY)()),{writeMessage(u,i,c){const N=u.getType();let k;try{for(k of N.fields.byNumber()){let R,F=k.repeated,ce=k.localName;if(k.oneof){const q=u[k.oneof.localName];if(q.case!==ce)continue;R=q.value}else if(R=u[ce],R===void 0&&!k.oneof&&!k.opt)throw new Error(`cannot encode field ${N.typeName}.${k.name} to binary: required field not set`);switch(k.kind){case"scalar":case"enum":let q=k.kind=="enum"?y.w.INT32:k.T;if(F)if(k.packed)(0,L.Jj)(i,q,k.no,R);else for(const me of R)(0,L.NN)(i,q,k.no,me,!0);else R!==void 0&&(0,L.NN)(i,q,k.no,R,!0);break;case"message":if(F)for(const me of R)(0,L.oQ)(i,c,k,me);else(0,L.oQ)(i,c,k,R);break;case"map":for(const[me,ge]of Object.entries(R))(0,L.gQ)(i,c,k,me,ge);break}}}catch(R){let F=k?`cannot encode field ${N.typeName}.${k==null?void 0:k.name} to binary`:`cannot encode message ${N.typeName} to binary`,ce=R instanceof Error?R.message:String(R);throw new Error(F+(ce.length>0?`: ${ce}`:""))}return c.writeUnknownFields&&this.writeUnknownFields(u,i),i}})}var Y=b(433),j=b(501),O=b(215),A=b(504),V=b(432),B=b(120),J=b(814);function M(){return(0,J.b)((u,i)=>function(N,k,R){if(N.kind=="map"){const F={};switch(N.V.kind){case"scalar":for(const[q,me]of Object.entries(k)){const ge=i(N.V.T,me,!0);(0,B.hu)(ge!==void 0),F[q.toString()]=ge}break;case"message":for(const[q,me]of Object.entries(k))F[q.toString()]=me.toJson(R);break;case"enum":const ce=N.V.T;for(const[q,me]of Object.entries(k)){(0,B.hu)(me===void 0||typeof me=="number");const ge=u(ce,me,!0,R.enumAsInteger);(0,B.hu)(ge!==void 0),F[q.toString()]=ge}break}return R.emitDefaultValues||Object.keys(F).length>0?F:void 0}else if(N.repeated){const F=[];switch(N.kind){case"scalar":for(let ce=0;ce<k.length;ce++)F.push(i(N.T,k[ce],!0));break;case"enum":for(let ce=0;ce<k.length;ce++)F.push(u(N.T,k[ce],!0,R.enumAsInteger));break;case"message":for(let ce=0;ce<k.length;ce++)F.push(k[ce].toJson(R));break}return R.emitDefaultValues||F.length>0?F:void 0}else{if(k===void 0){if(!N.oneof&&!N.opt)throw"required field not set";return}switch(N.kind){case"scalar":return i(N.T,k,!0);case"enum":return u(N.T,k,!0,R.enumAsInteger);case"message":return(0,V.E)(N.T,k).toJson(R)}}})}const w=(0,v.F)("proto2",M(),P(),Object.assign(Object.assign({},(0,Y.f)()),{newFieldList(u){return new j.i(u,Z)},initFields(u){for(const i of u.getType().fields.byMember()){const c=i.localName,N=u;if(i.repeated){N[c]=[];continue}switch(i.kind){case"oneof":N[c]={case:void 0};break;case"map":N[c]={};break}}}}));function Z(u){var i,c,N,k,R;const F=[];let ce;for(const q of typeof u=="function"?u():u){const me=q;if(me.localName=(0,A.Rz)(q.name,q.oneof!==void 0),me.jsonName=(i=q.jsonName)!==null&&i!==void 0?i:(0,A.x1)(q.name),me.repeated=(c=q.repeated)!==null&&c!==void 0?c:!1,q.kind=="scalar"&&(me.L=(N=q.L)!==null&&N!==void 0?N:y.p.BIGINT),q.oneof!==void 0){const ge=typeof q.oneof=="string"?q.oneof:q.oneof.name;(!ce||ce.name!=ge)&&(ce=new O.o(ge)),me.oneof=ce,ce.addField(me)}q.kind=="message"&&(me.delimited=(k=q.delimited)!==null&&k!==void 0?k:!1),me.packed=(R=q.packed)!==null&&R!==void 0?R:!1,F.push(me)}return F}const W={NaN:Number.NaN,POSITIVE_INFINITY:Number.POSITIVE_INFINITY,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY};var C=b(210),X=b(236),ne=b(79),ae=function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=u[Symbol.asyncIterator],c;return i?i.call(u):(u=typeof __values=="function"?__values(u):u[Symbol.iterator](),c={},N("next"),N("throw"),N("return"),c[Symbol.asyncIterator]=function(){return this},c);function N(R){c[R]=u[R]&&function(F){return new Promise(function(ce,q){F=u[R](F),k(ce,q,F.done,F.value)})}}function k(R,F,ce,q){Promise.resolve(q).then(function(me){R({value:me,done:ce})},F)}},$=function(u){return this instanceof $?(this.v=u,this):new $(u)},ie=function(u,i,c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=c.apply(u,i||[]),k,R=[];return k={},ce("next"),ce("throw"),ce("return",F),k[Symbol.asyncIterator]=function(){return this},k;function F(qe){return function(tn){return Promise.resolve(tn).then(qe,Ie)}}function ce(qe,tn){N[qe]&&(k[qe]=function(zt){return new Promise(function(Or,Kn){R.push([qe,zt,Or,Kn])>1||q(qe,zt)})},tn&&(k[qe]=tn(k[qe])))}function q(qe,tn){try{me(N[qe](tn))}catch(zt){ot(R[0][3],zt)}}function me(qe){qe.value instanceof $?Promise.resolve(qe.value.v).then(ge,Ie):ot(R[0][2],qe)}function ge(qe){q("next",qe)}function Ie(qe){q("throw",qe)}function ot(qe,tn){qe(tn),R.shift(),R.length&&q(R[0][0],R[0][1])}};const de={enc(u,i){const c=(0,L.gY)().makeWriteOptions(i);return c.writerFactory().bytes(u.toBinary(c)).finish()},dec(u,i,c){const N=(0,L.gY)().makeReadOptions(c);return u.fromBinary(N.readerFactory(i).bytes(),N)},decStream(u,i){return ie(this,arguments,function*(){var N,k,R,F;function ce(ot,qe){const tn=new Uint8Array(ot.byteLength+qe.byteLength);return tn.set(ot),tn.set(qe,ot.length),tn}let q=new Uint8Array(0);try{for(var me=!0,ge=ae(i),Ie;Ie=yield $(ge.next()),N=Ie.done,!N;me=!0)for(F=Ie.value,me=!1,q=ce(q,F);;){const qe=de.peekSize(q);if(qe.eof||qe.offset+qe.size>q.byteLength)break;yield yield $(de.dec(u,q)),q=q.subarray(qe.offset+qe.size)}}catch(ot){k={error:ot}}finally{try{!me&&!N&&(R=ge.return)&&(yield $(R.call(ge)))}finally{if(k)throw k.error}}if(q.byteLength>0)throw new Error("incomplete data")})},peekSize(u){const i={eof:!0,size:null,offset:null};for(let c=0;c<10;c++){if(c>u.byteLength)return i;if((u[c]&128)==0){const N=new ne.oP(u);let k;try{k=N.uint32()}catch(R){if(R instanceof RangeError)return i;throw R}return{eof:!1,size:k,offset:N.pos}}}throw new Error("invalid varint")}};var re=b(781);function z(u){switch(u.typeName){case"google.protobuf.Any":{const i=u.fields.find(N=>N.number==1&&N.fieldKind=="scalar"&&N.scalar===y.w.STRING),c=u.fields.find(N=>N.number==2&&N.fieldKind=="scalar"&&N.scalar===y.w.BYTES);if(i&&c)return{typeName:u.typeName,typeUrl:i,value:c};break}case"google.protobuf.Timestamp":{const i=u.fields.find(N=>N.number==1&&N.fieldKind=="scalar"&&N.scalar===y.w.INT64),c=u.fields.find(N=>N.number==2&&N.fieldKind=="scalar"&&N.scalar===y.w.INT32);if(i&&c)return{typeName:u.typeName,seconds:i,nanos:c};break}case"google.protobuf.Duration":{const i=u.fields.find(N=>N.number==1&&N.fieldKind=="scalar"&&N.scalar===y.w.INT64),c=u.fields.find(N=>N.number==2&&N.fieldKind=="scalar"&&N.scalar===y.w.INT32);if(i&&c)return{typeName:u.typeName,seconds:i,nanos:c};break}case"google.protobuf.Struct":{const i=u.fields.find(c=>c.number==1&&!c.repeated);if((i==null?void 0:i.fieldKind)!=="map"||i.mapValue.kind!=="message"||i.mapValue.message.typeName!=="google.protobuf.Value")break;return{typeName:u.typeName,fields:i}}case"google.protobuf.Value":{const i=u.oneofs.find(q=>q.name==="kind"),c=u.fields.find(q=>q.number==1&&q.oneof===i);if((c==null?void 0:c.fieldKind)!=="enum"||c.enum.typeName!=="google.protobuf.NullValue")return;const N=u.fields.find(q=>q.number==2&&q.fieldKind=="scalar"&&q.scalar===y.w.DOUBLE&&q.oneof===i),k=u.fields.find(q=>q.number==3&&q.fieldKind=="scalar"&&q.scalar===y.w.STRING&&q.oneof===i),R=u.fields.find(q=>q.number==4&&q.fieldKind=="scalar"&&q.scalar===y.w.BOOL&&q.oneof===i),F=u.fields.find(q=>q.number==5&&q.oneof===i);if((F==null?void 0:F.fieldKind)!=="message"||F.message.typeName!=="google.protobuf.Struct")return;const ce=u.fields.find(q=>q.number==6&&q.oneof===i);if((ce==null?void 0:ce.fieldKind)!=="message"||ce.message.typeName!=="google.protobuf.ListValue")return;if(i&&N&&k&&R)return{typeName:u.typeName,kind:i,nullValue:c,numberValue:N,stringValue:k,boolValue:R,structValue:F,listValue:ce};break}case"google.protobuf.ListValue":{const i=u.fields.find(c=>c.number==1&&c.repeated);if((i==null?void 0:i.fieldKind)!="message"||i.message.typeName!=="google.protobuf.Value")break;return{typeName:u.typeName,values:i}}case"google.protobuf.FieldMask":{const i=u.fields.find(c=>c.number==1&&c.fieldKind=="scalar"&&c.scalar===y.w.STRING&&c.repeated);if(i)return{typeName:u.typeName,paths:i};break}case"google.protobuf.DoubleValue":case"google.protobuf.FloatValue":case"google.protobuf.Int64Value":case"google.protobuf.UInt64Value":case"google.protobuf.Int32Value":case"google.protobuf.UInt32Value":case"google.protobuf.BoolValue":case"google.protobuf.StringValue":case"google.protobuf.BytesValue":{const i=u.fields.find(c=>c.number==1&&c.name=="value");if(!i||i.fieldKind!=="scalar")break;return{typeName:u.typeName,value:i}}}}const fe="@bufbuild/protobuf",Me={packageName:"@bufbuild/protobuf",localName:A.r1,reifyWkt:z,getUnwrappedFieldType:V.w,scalarDefaultValue:re.kY,safeIdentifier:A.GD,safeObjectProperty:A.ll,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:fe},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:fe},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:fe},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:fe},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:fe},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:fe},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:fe},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:fe},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:fe},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},protoDouble:{typeOnly:!1,privateImportPath:"./proto-double.js",publicImportPath:fe},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:fe},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:fe},LongType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:fe},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:fe},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:fe},IMessageTypeRegistry:{typeOnly:!0,privateImportPath:"./type-registry.js",publicImportPath:fe}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]};var le=b(561),Ce=b(328),Te;(function(u){u[u.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",u[u.EDITION_PROTO2=998]="EDITION_PROTO2",u[u.EDITION_PROTO3=999]="EDITION_PROTO3",u[u.EDITION_2023=1e3]="EDITION_2023",u[u.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",u[u.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",u[u.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",u[u.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",u[u.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY"})(Te||(Te={})),w.util.setEnumType(Te,"google.protobuf.Edition",[{no:0,name:"EDITION_UNKNOWN"},{no:998,name:"EDITION_PROTO2"},{no:999,name:"EDITION_PROTO3"},{no:1e3,name:"EDITION_2023"},{no:1,name:"EDITION_1_TEST_ONLY"},{no:2,name:"EDITION_2_TEST_ONLY"},{no:99997,name:"EDITION_99997_TEST_ONLY"},{no:99998,name:"EDITION_99998_TEST_ONLY"},{no:99999,name:"EDITION_99999_TEST_ONLY"}]);class Oe extends le.v{constructor(i){super(),this.file=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new Oe().fromBinary(i,c)}static fromJson(i,c){return new Oe().fromJson(i,c)}static fromJsonString(i,c){return new Oe().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Oe,i,c)}}Oe.runtime=w,Oe.typeName="google.protobuf.FileDescriptorSet",Oe.fields=w.util.newFieldList(()=>[{no:1,name:"file",kind:"message",T:Ye,repeated:!0}]);class Ye extends le.v{constructor(i){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new Ye().fromBinary(i,c)}static fromJson(i,c){return new Ye().fromJson(i,c)}static fromJsonString(i,c){return new Ye().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Ye,i,c)}}Ye.runtime=w,Ye.typeName="google.protobuf.FileDescriptorProto",Ye.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:Fe,repeated:!0},{no:5,name:"enum_type",kind:"message",T:G,repeated:!0},{no:6,name:"service",kind:"message",T:pe,repeated:!0},{no:7,name:"extension",kind:"message",T:gt,repeated:!0},{no:8,name:"options",kind:"message",T:U,opt:!0},{no:9,name:"source_code_info",kind:"message",T:Q,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0},{no:14,name:"edition",kind:"enum",T:w.getEnumType(Te),opt:!0}]);class Fe extends le.v{constructor(i){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new Fe().fromBinary(i,c)}static fromJson(i,c){return new Fe().fromJson(i,c)}static fromJsonString(i,c){return new Fe().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Fe,i,c)}}Fe.runtime=w,Fe.typeName="google.protobuf.DescriptorProto",Fe.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:gt,repeated:!0},{no:6,name:"extension",kind:"message",T:gt,repeated:!0},{no:3,name:"nested_type",kind:"message",T:Fe,repeated:!0},{no:4,name:"enum_type",kind:"message",T:G,repeated:!0},{no:5,name:"extension_range",kind:"message",T:We,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:K,repeated:!0},{no:7,name:"options",kind:"message",T:we,opt:!0},{no:9,name:"reserved_range",kind:"message",T:ct,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class We extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new We().fromBinary(i,c)}static fromJson(i,c){return new We().fromJson(i,c)}static fromJsonString(i,c){return new We().fromJsonString(i,c)}static equals(i,c){return w.util.equals(We,i,c)}}We.runtime=w,We.typeName="google.protobuf.DescriptorProto.ExtensionRange",We.fields=w.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:tt,opt:!0}]);class ct extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new ct().fromBinary(i,c)}static fromJson(i,c){return new ct().fromJson(i,c)}static fromJsonString(i,c){return new ct().fromJsonString(i,c)}static equals(i,c){return w.util.equals(ct,i,c)}}ct.runtime=w,ct.typeName="google.protobuf.DescriptorProto.ReservedRange",ct.fields=w.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class tt extends le.v{constructor(i){super(),this.uninterpretedOption=[],this.declaration=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new tt().fromBinary(i,c)}static fromJson(i,c){return new tt().fromJson(i,c)}static fromJsonString(i,c){return new tt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(tt,i,c)}}tt.runtime=w,tt.typeName="google.protobuf.ExtensionRangeOptions",tt.fields=w.util.newFieldList(()=>[{no:999,name:"uninterpreted_option",kind:"message",T:Ge,repeated:!0},{no:2,name:"declaration",kind:"message",T:kt,repeated:!0},{no:50,name:"features",kind:"message",T:nt,opt:!0},{no:3,name:"verification",kind:"enum",T:w.getEnumType(ft),opt:!0,default:ft.UNVERIFIED}]);var ft;(function(u){u[u.DECLARATION=0]="DECLARATION",u[u.UNVERIFIED=1]="UNVERIFIED"})(ft||(ft={})),w.util.setEnumType(ft,"google.protobuf.ExtensionRangeOptions.VerificationState",[{no:0,name:"DECLARATION"},{no:1,name:"UNVERIFIED"}]);class kt extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new kt().fromBinary(i,c)}static fromJson(i,c){return new kt().fromJson(i,c)}static fromJsonString(i,c){return new kt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(kt,i,c)}}kt.runtime=w,kt.typeName="google.protobuf.ExtensionRangeOptions.Declaration",kt.fields=w.util.newFieldList(()=>[{no:1,name:"number",kind:"scalar",T:5,opt:!0},{no:2,name:"full_name",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"scalar",T:9,opt:!0},{no:5,name:"reserved",kind:"scalar",T:8,opt:!0},{no:6,name:"repeated",kind:"scalar",T:8,opt:!0}]);class gt extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new gt().fromBinary(i,c)}static fromJson(i,c){return new gt().fromJson(i,c)}static fromJsonString(i,c){return new gt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(gt,i,c)}}gt.runtime=w,gt.typeName="google.protobuf.FieldDescriptorProto",gt.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:w.getEnumType(D),opt:!0},{no:5,name:"type",kind:"enum",T:w.getEnumType(S),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:ve,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}]);var S;(function(u){u[u.DOUBLE=1]="DOUBLE",u[u.FLOAT=2]="FLOAT",u[u.INT64=3]="INT64",u[u.UINT64=4]="UINT64",u[u.INT32=5]="INT32",u[u.FIXED64=6]="FIXED64",u[u.FIXED32=7]="FIXED32",u[u.BOOL=8]="BOOL",u[u.STRING=9]="STRING",u[u.GROUP=10]="GROUP",u[u.MESSAGE=11]="MESSAGE",u[u.BYTES=12]="BYTES",u[u.UINT32=13]="UINT32",u[u.ENUM=14]="ENUM",u[u.SFIXED32=15]="SFIXED32",u[u.SFIXED64=16]="SFIXED64",u[u.SINT32=17]="SINT32",u[u.SINT64=18]="SINT64"})(S||(S={})),w.util.setEnumType(S,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var D;(function(u){u[u.OPTIONAL=1]="OPTIONAL",u[u.REPEATED=3]="REPEATED",u[u.REQUIRED=2]="REQUIRED"})(D||(D={})),w.util.setEnumType(D,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:3,name:"LABEL_REPEATED"},{no:2,name:"LABEL_REQUIRED"}]);class K extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new K().fromBinary(i,c)}static fromJson(i,c){return new K().fromJson(i,c)}static fromJsonString(i,c){return new K().fromJsonString(i,c)}static equals(i,c){return w.util.equals(K,i,c)}}K.runtime=w,K.typeName="google.protobuf.OneofDescriptorProto",K.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:Ze,opt:!0}]);class G extends le.v{constructor(i){super(),this.value=[],this.reservedRange=[],this.reservedName=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new G().fromBinary(i,c)}static fromJson(i,c){return new G().fromJson(i,c)}static fromJsonString(i,c){return new G().fromJsonString(i,c)}static equals(i,c){return w.util.equals(G,i,c)}}G.runtime=w,G.typeName="google.protobuf.EnumDescriptorProto",G.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:ue,repeated:!0},{no:3,name:"options",kind:"message",T:rt,opt:!0},{no:4,name:"reserved_range",kind:"message",T:H,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class H extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new H().fromBinary(i,c)}static fromJson(i,c){return new H().fromJson(i,c)}static fromJsonString(i,c){return new H().fromJsonString(i,c)}static equals(i,c){return w.util.equals(H,i,c)}}H.runtime=w,H.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",H.fields=w.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class ue extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new ue().fromBinary(i,c)}static fromJson(i,c){return new ue().fromJson(i,c)}static fromJsonString(i,c){return new ue().fromJsonString(i,c)}static equals(i,c){return w.util.equals(ue,i,c)}}ue.runtime=w,ue.typeName="google.protobuf.EnumValueDescriptorProto",ue.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:Dt,opt:!0}]);class pe extends le.v{constructor(i){super(),this.method=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new pe().fromBinary(i,c)}static fromJson(i,c){return new pe().fromJson(i,c)}static fromJsonString(i,c){return new pe().fromJsonString(i,c)}static equals(i,c){return w.util.equals(pe,i,c)}}pe.runtime=w,pe.typeName="google.protobuf.ServiceDescriptorProto",pe.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:oe,repeated:!0},{no:3,name:"options",kind:"message",T:pt,opt:!0}]);class oe extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new oe().fromBinary(i,c)}static fromJson(i,c){return new oe().fromJson(i,c)}static fromJsonString(i,c){return new oe().fromJsonString(i,c)}static equals(i,c){return w.util.equals(oe,i,c)}}oe.runtime=w,oe.typeName="google.protobuf.MethodDescriptorProto",oe.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:Rt,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]);class U extends le.v{constructor(i){super(),this.uninterpretedOption=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new U().fromBinary(i,c)}static fromJson(i,c){return new U().fromJson(i,c)}static fromJsonString(i,c){return new U().fromJsonString(i,c)}static equals(i,c){return w.util.equals(U,i,c)}}U.runtime=w,U.typeName="google.protobuf.FileOptions",U.fields=w.util.newFieldList(()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:w.getEnumType(se),opt:!0,default:se.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:50,name:"features",kind:"message",T:nt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ge,repeated:!0}]);var se;(function(u){u[u.SPEED=1]="SPEED",u[u.CODE_SIZE=2]="CODE_SIZE",u[u.LITE_RUNTIME=3]="LITE_RUNTIME"})(se||(se={})),w.util.setEnumType(se,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class we extends le.v{constructor(i){super(),this.uninterpretedOption=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new we().fromBinary(i,c)}static fromJson(i,c){return new we().fromJson(i,c)}static fromJsonString(i,c){return new we().fromJsonString(i,c)}static equals(i,c){return w.util.equals(we,i,c)}}we.runtime=w,we.typeName="google.protobuf.MessageOptions",we.fields=w.util.newFieldList(()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:11,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:12,name:"features",kind:"message",T:nt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ge,repeated:!0}]);class ve extends le.v{constructor(i){super(),this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new ve().fromBinary(i,c)}static fromJson(i,c){return new ve().fromJson(i,c)}static fromJsonString(i,c){return new ve().fromJsonString(i,c)}static equals(i,c){return w.util.equals(ve,i,c)}}ve.runtime=w,ve.typeName="google.protobuf.FieldOptions",ve.fields=w.util.newFieldList(()=>[{no:1,name:"ctype",kind:"enum",T:w.getEnumType(be),opt:!0,default:be.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:w.getEnumType(Ae),opt:!0,default:Ae.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:16,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"retention",kind:"enum",T:w.getEnumType(xe),opt:!0},{no:19,name:"targets",kind:"enum",T:w.getEnumType(ze),repeated:!0},{no:20,name:"edition_defaults",kind:"message",T:Re,repeated:!0},{no:21,name:"features",kind:"message",T:nt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ge,repeated:!0}]);var be;(function(u){u[u.STRING=0]="STRING",u[u.CORD=1]="CORD",u[u.STRING_PIECE=2]="STRING_PIECE"})(be||(be={})),w.util.setEnumType(be,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]);var Ae;(function(u){u[u.JS_NORMAL=0]="JS_NORMAL",u[u.JS_STRING=1]="JS_STRING",u[u.JS_NUMBER=2]="JS_NUMBER"})(Ae||(Ae={})),w.util.setEnumType(Ae,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]);var xe;(function(u){u[u.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",u[u.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",u[u.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(xe||(xe={})),w.util.setEnumType(xe,"google.protobuf.FieldOptions.OptionRetention",[{no:0,name:"RETENTION_UNKNOWN"},{no:1,name:"RETENTION_RUNTIME"},{no:2,name:"RETENTION_SOURCE"}]);var ze;(function(u){u[u.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",u[u.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",u[u.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",u[u.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",u[u.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",u[u.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",u[u.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",u[u.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",u[u.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",u[u.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(ze||(ze={})),w.util.setEnumType(ze,"google.protobuf.FieldOptions.OptionTargetType",[{no:0,name:"TARGET_TYPE_UNKNOWN"},{no:1,name:"TARGET_TYPE_FILE"},{no:2,name:"TARGET_TYPE_EXTENSION_RANGE"},{no:3,name:"TARGET_TYPE_MESSAGE"},{no:4,name:"TARGET_TYPE_FIELD"},{no:5,name:"TARGET_TYPE_ONEOF"},{no:6,name:"TARGET_TYPE_ENUM"},{no:7,name:"TARGET_TYPE_ENUM_ENTRY"},{no:8,name:"TARGET_TYPE_SERVICE"},{no:9,name:"TARGET_TYPE_METHOD"}]);class Re extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new Re().fromBinary(i,c)}static fromJson(i,c){return new Re().fromJson(i,c)}static fromJsonString(i,c){return new Re().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Re,i,c)}}Re.runtime=w,Re.typeName="google.protobuf.FieldOptions.EditionDefault",Re.fields=w.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:w.getEnumType(Te),opt:!0},{no:2,name:"value",kind:"scalar",T:9,opt:!0}]);class Ze extends le.v{constructor(i){super(),this.uninterpretedOption=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new Ze().fromBinary(i,c)}static fromJson(i,c){return new Ze().fromJson(i,c)}static fromJsonString(i,c){return new Ze().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Ze,i,c)}}Ze.runtime=w,Ze.typeName="google.protobuf.OneofOptions",Ze.fields=w.util.newFieldList(()=>[{no:1,name:"features",kind:"message",T:nt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ge,repeated:!0}]);class rt extends le.v{constructor(i){super(),this.uninterpretedOption=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new rt().fromBinary(i,c)}static fromJson(i,c){return new rt().fromJson(i,c)}static fromJsonString(i,c){return new rt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(rt,i,c)}}rt.runtime=w,rt.typeName="google.protobuf.EnumOptions",rt.fields=w.util.newFieldList(()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:7,name:"features",kind:"message",T:nt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ge,repeated:!0}]);class Dt extends le.v{constructor(i){super(),this.uninterpretedOption=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new Dt().fromBinary(i,c)}static fromJson(i,c){return new Dt().fromJson(i,c)}static fromJsonString(i,c){return new Dt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Dt,i,c)}}Dt.runtime=w,Dt.typeName="google.protobuf.EnumValueOptions",Dt.fields=w.util.newFieldList(()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"features",kind:"message",T:nt,opt:!0},{no:3,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Ge,repeated:!0}]);class pt extends le.v{constructor(i){super(),this.uninterpretedOption=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new pt().fromBinary(i,c)}static fromJson(i,c){return new pt().fromJson(i,c)}static fromJsonString(i,c){return new pt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(pt,i,c)}}pt.runtime=w,pt.typeName="google.protobuf.ServiceOptions",pt.fields=w.util.newFieldList(()=>[{no:34,name:"features",kind:"message",T:nt,opt:!0},{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Ge,repeated:!0}]);class Rt extends le.v{constructor(i){super(),this.uninterpretedOption=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new Rt().fromBinary(i,c)}static fromJson(i,c){return new Rt().fromJson(i,c)}static fromJsonString(i,c){return new Rt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Rt,i,c)}}Rt.runtime=w,Rt.typeName="google.protobuf.MethodOptions",Rt.fields=w.util.newFieldList(()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:w.getEnumType(on),opt:!0,default:on.IDEMPOTENCY_UNKNOWN},{no:35,name:"features",kind:"message",T:nt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ge,repeated:!0}]);var on;(function(u){u[u.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",u[u.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",u[u.IDEMPOTENT=2]="IDEMPOTENT"})(on||(on={})),w.util.setEnumType(on,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class Ge extends le.v{constructor(i){super(),this.name=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new Ge().fromBinary(i,c)}static fromJson(i,c){return new Ge().fromJson(i,c)}static fromJsonString(i,c){return new Ge().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Ge,i,c)}}Ge.runtime=w,Ge.typeName="google.protobuf.UninterpretedOption",Ge.fields=w.util.newFieldList(()=>[{no:2,name:"name",kind:"message",T:dt,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]);class dt extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new dt().fromBinary(i,c)}static fromJson(i,c){return new dt().fromJson(i,c)}static fromJsonString(i,c){return new dt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(dt,i,c)}}dt.runtime=w,dt.typeName="google.protobuf.UninterpretedOption.NamePart",dt.fields=w.util.newFieldList(()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]);class nt extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new nt().fromBinary(i,c)}static fromJson(i,c){return new nt().fromJson(i,c)}static fromJsonString(i,c){return new nt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(nt,i,c)}}nt.runtime=w,nt.typeName="google.protobuf.FeatureSet",nt.fields=w.util.newFieldList(()=>[{no:1,name:"field_presence",kind:"enum",T:w.getEnumType(Gn),opt:!0},{no:2,name:"enum_type",kind:"enum",T:w.getEnumType(lr),opt:!0},{no:3,name:"repeated_field_encoding",kind:"enum",T:w.getEnumType($n),opt:!0},{no:4,name:"utf8_validation",kind:"enum",T:w.getEnumType(Nr),opt:!0},{no:5,name:"message_encoding",kind:"enum",T:w.getEnumType(gn),opt:!0},{no:6,name:"json_format",kind:"enum",T:w.getEnumType(Sr),opt:!0}]);var Gn;(function(u){u[u.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",u[u.EXPLICIT=1]="EXPLICIT",u[u.IMPLICIT=2]="IMPLICIT",u[u.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(Gn||(Gn={})),w.util.setEnumType(Gn,"google.protobuf.FeatureSet.FieldPresence",[{no:0,name:"FIELD_PRESENCE_UNKNOWN"},{no:1,name:"EXPLICIT"},{no:2,name:"IMPLICIT"},{no:3,name:"LEGACY_REQUIRED"}]);var lr;(function(u){u[u.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",u[u.OPEN=1]="OPEN",u[u.CLOSED=2]="CLOSED"})(lr||(lr={})),w.util.setEnumType(lr,"google.protobuf.FeatureSet.EnumType",[{no:0,name:"ENUM_TYPE_UNKNOWN"},{no:1,name:"OPEN"},{no:2,name:"CLOSED"}]);var $n;(function(u){u[u.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",u[u.PACKED=1]="PACKED",u[u.EXPANDED=2]="EXPANDED"})($n||($n={})),w.util.setEnumType($n,"google.protobuf.FeatureSet.RepeatedFieldEncoding",[{no:0,name:"REPEATED_FIELD_ENCODING_UNKNOWN"},{no:1,name:"PACKED"},{no:2,name:"EXPANDED"}]);var Nr;(function(u){u[u.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",u[u.NONE=1]="NONE",u[u.VERIFY=2]="VERIFY"})(Nr||(Nr={})),w.util.setEnumType(Nr,"google.protobuf.FeatureSet.Utf8Validation",[{no:0,name:"UTF8_VALIDATION_UNKNOWN"},{no:1,name:"NONE"},{no:2,name:"VERIFY"}]);var gn;(function(u){u[u.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",u[u.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",u[u.DELIMITED=2]="DELIMITED"})(gn||(gn={})),w.util.setEnumType(gn,"google.protobuf.FeatureSet.MessageEncoding",[{no:0,name:"MESSAGE_ENCODING_UNKNOWN"},{no:1,name:"LENGTH_PREFIXED"},{no:2,name:"DELIMITED"}]);var Sr;(function(u){u[u.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",u[u.ALLOW=1]="ALLOW",u[u.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(Sr||(Sr={})),w.util.setEnumType(Sr,"google.protobuf.FeatureSet.JsonFormat",[{no:0,name:"JSON_FORMAT_UNKNOWN"},{no:1,name:"ALLOW"},{no:2,name:"LEGACY_BEST_EFFORT"}]);class En extends le.v{constructor(i){super(),this.defaults=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new En().fromBinary(i,c)}static fromJson(i,c){return new En().fromJson(i,c)}static fromJsonString(i,c){return new En().fromJsonString(i,c)}static equals(i,c){return w.util.equals(En,i,c)}}En.runtime=w,En.typeName="google.protobuf.FeatureSetDefaults",En.fields=w.util.newFieldList(()=>[{no:1,name:"defaults",kind:"message",T:In,repeated:!0},{no:4,name:"minimum_edition",kind:"enum",T:w.getEnumType(Te),opt:!0},{no:5,name:"maximum_edition",kind:"enum",T:w.getEnumType(Te),opt:!0}]);class In extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new In().fromBinary(i,c)}static fromJson(i,c){return new In().fromJson(i,c)}static fromJsonString(i,c){return new In().fromJsonString(i,c)}static equals(i,c){return w.util.equals(In,i,c)}}In.runtime=w,In.typeName="google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault",In.fields=w.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:w.getEnumType(Te),opt:!0},{no:2,name:"features",kind:"message",T:nt,opt:!0}]);class Q extends le.v{constructor(i){super(),this.location=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new Q().fromBinary(i,c)}static fromJson(i,c){return new Q().fromJson(i,c)}static fromJsonString(i,c){return new Q().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Q,i,c)}}Q.runtime=w,Q.typeName="google.protobuf.SourceCodeInfo",Q.fields=w.util.newFieldList(()=>[{no:1,name:"location",kind:"message",T:yt,repeated:!0}]);class yt extends le.v{constructor(i){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new yt().fromBinary(i,c)}static fromJson(i,c){return new yt().fromJson(i,c)}static fromJsonString(i,c){return new yt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(yt,i,c)}}yt.runtime=w,yt.typeName="google.protobuf.SourceCodeInfo.Location",yt.fields=w.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]);class $e extends le.v{constructor(i){super(),this.annotation=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new $e().fromBinary(i,c)}static fromJson(i,c){return new $e().fromJson(i,c)}static fromJsonString(i,c){return new $e().fromJsonString(i,c)}static equals(i,c){return w.util.equals($e,i,c)}}$e.runtime=w,$e.typeName="google.protobuf.GeneratedCodeInfo",$e.fields=w.util.newFieldList(()=>[{no:1,name:"annotation",kind:"message",T:st,repeated:!0}]);class st extends le.v{constructor(i){super(),this.path=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new st().fromBinary(i,c)}static fromJson(i,c){return new st().fromJson(i,c)}static fromJsonString(i,c){return new st().fromJsonString(i,c)}static equals(i,c){return w.util.equals(st,i,c)}}st.runtime=w,st.typeName="google.protobuf.GeneratedCodeInfo.Annotation",st.fields=w.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0},{no:5,name:"semantic",kind:"enum",T:w.getEnumType(fr),opt:!0}]);var fr;(function(u){u[u.NONE=0]="NONE",u[u.SET=1]="SET",u[u.ALIAS=2]="ALIAS"})(fr||(fr={})),w.util.setEnumType(fr,"google.protobuf.GeneratedCodeInfo.Annotation.Semantic",[{no:0,name:"NONE"},{no:1,name:"SET"},{no:2,name:"ALIAS"}]);function Ds(u,i){const c=u.values.find(N=>N.name===i);return(0,B.hu)(c,`cannot parse ${u.name} default value: ${i}`),c.number}function _s(u,i){switch(u){case y.w.STRING:return i;case y.w.BYTES:{const c=Hn(i);if(c===!1)throw new Error(`cannot parse ${y.w[u]} default value: ${i}`);return c}case y.w.INT64:case y.w.SFIXED64:case y.w.SINT64:return C.q.parse(i);case y.w.UINT64:case y.w.FIXED64:return C.q.uParse(i);case y.w.DOUBLE:case y.w.FLOAT:switch(i){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(i)}case y.w.BOOL:return i==="true";case y.w.INT32:case y.w.UINT32:case y.w.SINT32:case y.w.FIXED32:case y.w.SFIXED32:return parseInt(i,10)}}function Hn(u){const i=[],c={tail:u,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(N){if(this.tail.length>=N){const k=this.tail.substring(0,N);return this.tail=this.tail.substring(N),k}return!1}};for(;c.next();)switch(c.c){case"\\":if(c.next())switch(c.c){case"\\":i.push(c.c.charCodeAt(0));break;case"b":i.push(8);break;case"f":i.push(12);break;case"n":i.push(10);break;case"r":i.push(13);break;case"t":i.push(9);break;case"v":i.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const N=c.c,k=c.take(2);if(k===!1)return!1;const R=parseInt(N+k,8);if(isNaN(R))return!1;i.push(R);break}case"x":{const N=c.c,k=c.take(2);if(k===!1)return!1;const R=parseInt(N+k,16);if(isNaN(R))return!1;i.push(R);break}case"u":{const N=c.c,k=c.take(4);if(k===!1)return!1;const R=parseInt(N+k,16);if(isNaN(R))return!1;const F=new Uint8Array(4);new DataView(F.buffer).setInt32(0,R,!0),i.push(F[0],F[1],F[2],F[3]);break}case"U":{const N=c.c,k=c.take(8);if(k===!1)return!1;const R=C.q.uEnc(N+k),F=new Uint8Array(8),ce=new DataView(F.buffer);ce.setInt32(0,R.lo,!0),ce.setInt32(4,R.hi,!0),i.push(F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7]);break}}break;default:i.push(c.c.charCodeAt(0))}return new Uint8Array(i)}const an=En.fromBinary(X.W.dec("ChESDAgBEAIYAiABKAEwAhjmBwoREgwIAhABGAEgAigBMAEY5wcKERIMCAEQARgBIAIoATABGOgHIOYHKOgH"));function He(u){const i=u.minimumEdition,c=u.maximumEdition;if(i===void 0||c===void 0||u.defaults.some(k=>k.edition===void 0))throw new Error("Invalid FeatureSetDefaults");const N=new Map;return(k,...R)=>{var F,ce;let q=N.get(k);if(q===void 0){if(k<i)throw new Error(`Edition ${Te[k]} is earlier than the minimum supported edition ${Te[i]}`);if(c<k)throw new Error(`Edition ${Te[k]} is later than the maximum supported edition ${Te[c]}`);let ge;for(const Ie of u.defaults){const ot=(F=Ie.edition)!==null&&F!==void 0?F:0;ot>k||ge!==void 0&&ge.e>ot||(ge={e:ot,f:(ce=Ie.features)!==null&&ce!==void 0?ce:new nt})}if(ge===void 0)throw new Error(`No valid default found for edition ${Te[k]}`);q=ge.f.toBinary(),N.set(k,q)}const me=nt.fromBinary(q);for(const ge of R)ge!==void 0&&me.fromBinary(ge.toBinary());if(!$r(me))throw new Error(`Invalid FeatureSet for edition ${Te[k]}`);return me}}function $r(u){for(const i of nt.fields.list()){const c=u[i.localName];if(c===void 0||i.kind=="enum"&&c===0)return!1}return!0}function jr(u,i){var c;const N={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map,resolveFeatures:He((c=i==null?void 0:i.featureSetDefaults)!==null&&c!==void 0?c:an)},R=(u instanceof Oe?u.file:u instanceof Uint8Array?Oe.fromBinary(u).file:u).map(F=>pn(F,N));return Object.assign({files:R},N)}function pn(u,i){var c,N;(0,B.hu)(u.name,"invalid FileDescriptorProto: missing name");const k=Object.assign(Object.assign({kind:"file",proto:u,deprecated:(N=(c=u.options)===null||c===void 0?void 0:c.deprecated)!==null&&N!==void 0?N:!1},Rs(u.syntax,u.edition)),{name:u.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return Nt(this.proto.sourceCodeInfo,[Lt.FileDescriptorProto_Syntax])},getPackageComments(){return Nt(this.proto.sourceCodeInfo,[Lt.FileDescriptorProto_Package])},getFeatures(){var R;return i.resolveFeatures(this.edition,(R=this.proto.options)===null||R===void 0?void 0:R.features)}});i.mapEntries.clear();for(const R of u.enumType)Xn(R,k,void 0,i);for(const R of u.messageType)ds(R,k,void 0,i);for(const R of u.service)Cs(R,k,i);Vr(k,i);for(const R of i.mapEntries.values())fs(R,i);for(const R of k.messages)fs(R,i),Vr(R,i);return i.mapEntries.clear(),k}function Vr(u,i){switch(u.kind){case"file":for(const c of u.proto.extension){const N=Zn(c,u,void 0,i);u.extensions.push(N),i.extensions.set(N.typeName,N)}break;case"message":for(const c of u.proto.extension){const N=Zn(c,u.file,u,i);u.nestedExtensions.push(N),i.extensions.set(N.typeName,N)}for(const c of u.nestedMessages)Vr(c,i);break}}function fs(u,i){const c=u.proto.oneofDecl.map(k=>yn(k,u,i)),N=new Set;for(const k of u.proto.field){const R=jt(k,c),F=Nn(k,u.file,u,R,i);u.fields.push(F),R===void 0?u.members.push(F):(R.fields.push(F),N.has(R)||(N.add(R),u.members.push(R)))}for(const k of c.filter(R=>N.has(R)))u.oneofs.push(k);for(const k of u.nestedMessages)fs(k,i)}function Xn(u,i,c,N){var k,R,F;(0,B.hu)(u.name,"invalid EnumDescriptorProto: missing name");const ce={kind:"enum",proto:u,deprecated:(R=(k=u.options)===null||k===void 0?void 0:k.deprecated)!==null&&R!==void 0?R:!1,file:i,parent:c,name:u.name,typeName:dr(u,c,i),values:[],sharedPrefix:(0,A.Sm)(u.name,u.value.map(q=>{var me;return(me=q.name)!==null&&me!==void 0?me:""})),toString(){return`enum ${this.typeName}`},getComments(){const q=this.parent?[...this.parent.getComments().sourcePath,Lt.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[Lt.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return Nt(i.proto.sourceCodeInfo,q)},getFeatures(){var q,me,ge;const Ie=(me=(q=this.parent)===null||q===void 0?void 0:q.getFeatures())!==null&&me!==void 0?me:this.file.getFeatures();return N.resolveFeatures(this.file.edition,Ie,(ge=this.proto.options)===null||ge===void 0?void 0:ge.features)}};N.enums.set(ce.typeName,ce),u.value.forEach(q=>{var me,ge;(0,B.hu)(q.name,"invalid EnumValueDescriptorProto: missing name"),(0,B.hu)(q.number!==void 0,"invalid EnumValueDescriptorProto: missing number"),ce.values.push({kind:"enum_value",proto:q,deprecated:(ge=(me=q.options)===null||me===void 0?void 0:me.deprecated)!==null&&ge!==void 0?ge:!1,parent:ce,name:q.name,number:q.number,toString(){return`enum value ${ce.typeName}.${this.name}`},declarationString(){var Ie;let ot=`${this.name} = ${this.number}`;return((Ie=this.proto.options)===null||Ie===void 0?void 0:Ie.deprecated)===!0&&(ot+=" [deprecated = true]"),ot},getComments(){const Ie=[...this.parent.getComments().sourcePath,Lt.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return Nt(i.proto.sourceCodeInfo,Ie)},getFeatures(){var Ie;return N.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(Ie=this.proto.options)===null||Ie===void 0?void 0:Ie.features)}})}),((F=c==null?void 0:c.nestedEnums)!==null&&F!==void 0?F:i.enums).push(ce)}function ds(u,i,c,N){var k,R,F,ce;(0,B.hu)(u.name,"invalid DescriptorProto: missing name");const q={kind:"message",proto:u,deprecated:(R=(k=u.options)===null||k===void 0?void 0:k.deprecated)!==null&&R!==void 0?R:!1,file:i,parent:c,name:u.name,typeName:dr(u,c,i),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const me=this.parent?[...this.parent.getComments().sourcePath,Lt.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[Lt.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return Nt(i.proto.sourceCodeInfo,me)},getFeatures(){var me,ge,Ie;const ot=(ge=(me=this.parent)===null||me===void 0?void 0:me.getFeatures())!==null&&ge!==void 0?ge:this.file.getFeatures();return N.resolveFeatures(this.file.edition,ot,(Ie=this.proto.options)===null||Ie===void 0?void 0:Ie.features)}};((F=u.options)===null||F===void 0?void 0:F.mapEntry)===!0?N.mapEntries.set(q.typeName,q):(((ce=c==null?void 0:c.nestedMessages)!==null&&ce!==void 0?ce:i.messages).push(q),N.messages.set(q.typeName,q));for(const me of u.enumType)Xn(me,i,q,N);for(const me of u.nestedType)ds(me,i,q,N)}function Cs(u,i,c){var N,k;(0,B.hu)(u.name,"invalid ServiceDescriptorProto: missing name");const R={kind:"service",proto:u,deprecated:(k=(N=u.options)===null||N===void 0?void 0:N.deprecated)!==null&&k!==void 0?k:!1,file:i,name:u.name,typeName:dr(u,void 0,i),methods:[],toString(){return`service ${this.typeName}`},getComments(){const F=[Lt.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return Nt(i.proto.sourceCodeInfo,F)},getFeatures(){var F;return c.resolveFeatures(this.file.edition,this.file.getFeatures(),(F=this.proto.options)===null||F===void 0?void 0:F.features)}};i.services.push(R),c.services.set(R.typeName,R);for(const F of u.method)R.methods.push(xs(F,R,c))}function xs(u,i,c){var N,k,R;(0,B.hu)(u.name,"invalid MethodDescriptorProto: missing name"),(0,B.hu)(u.inputType,"invalid MethodDescriptorProto: missing input_type"),(0,B.hu)(u.outputType,"invalid MethodDescriptorProto: missing output_type");let F;u.clientStreaming===!0&&u.serverStreaming===!0?F=Ce.t.BiDiStreaming:u.clientStreaming===!0?F=Ce.t.ClientStreaming:u.serverStreaming===!0?F=Ce.t.ServerStreaming:F=Ce.t.Unary;let ce;switch((N=u.options)===null||N===void 0?void 0:N.idempotencyLevel){case on.IDEMPOTENT:ce=Ce.w.Idempotent;break;case on.NO_SIDE_EFFECTS:ce=Ce.w.NoSideEffects;break;case on.IDEMPOTENCY_UNKNOWN:case void 0:ce=void 0;break}const q=c.messages.get(Qn(u.inputType)),me=c.messages.get(Qn(u.outputType));(0,B.hu)(q,`invalid MethodDescriptorProto: input_type ${u.inputType} not found`),(0,B.hu)(me,`invalid MethodDescriptorProto: output_type ${u.inputType} not found`);const ge=u.name;return{kind:"rpc",proto:u,deprecated:(R=(k=u.options)===null||k===void 0?void 0:k.deprecated)!==null&&R!==void 0?R:!1,parent:i,name:ge,methodKind:F,input:q,output:me,idempotency:ce,toString(){return`rpc ${i.typeName}.${ge}`},getComments(){const Ie=[...this.parent.getComments().sourcePath,Lt.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return Nt(i.file.proto.sourceCodeInfo,Ie)},getFeatures(){var Ie;return c.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(Ie=this.proto.options)===null||Ie===void 0?void 0:Ie.features)}}}function yn(u,i,c){return(0,B.hu)(u.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:u,deprecated:!1,parent:i,fields:[],name:u.name,toString(){return`oneof ${i.typeName}.${this.name}`},getComments(){const N=[...this.parent.getComments().sourcePath,Lt.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return Nt(i.file.proto.sourceCodeInfo,N)},getFeatures(){var N;return c.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(N=this.proto.options)===null||N===void 0?void 0:N.features)}}}function Nn(u,i,c,N,k){var R,F,ce;(0,B.hu)(u.name,"invalid FieldDescriptorProto: missing name"),(0,B.hu)(u.number,"invalid FieldDescriptorProto: missing number"),(0,B.hu)(u.type,"invalid FieldDescriptorProto: missing type");const q={proto:u,deprecated:(F=(R=u.options)===null||R===void 0?void 0:R.deprecated)!==null&&F!==void 0?F:!1,name:u.name,number:u.number,parent:c,oneof:N,optional:he(u,i.syntax),packedByDefault:It(i,u,k.resolveFeatures),packed:Ke(i,c,u,k.resolveFeatures),jsonName:u.jsonName===(0,A.x1)(u.name)?void 0:u.jsonName,scalar:void 0,longType:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,declarationString:hr,toString(){return`field ${this.parent.typeName}.${this.name}`},getComments(){const ge=[...this.parent.getComments().sourcePath,Lt.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return Nt(i.proto.sourceCodeInfo,ge)},getFeatures(){var ge;return k.resolveFeatures(i.edition,this.parent.getFeatures(),(ge=this.proto.options)===null||ge===void 0?void 0:ge.features)}},me=u.label===D.REPEATED;switch(u.type){case S.MESSAGE:case S.GROUP:{(0,B.hu)(u.typeName,"invalid FieldDescriptorProto: missing type_name");const ge=k.mapEntries.get(Qn(u.typeName));if(ge!==void 0)return(0,B.hu)(me,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},q),{kind:"field",fieldKind:"map",repeated:!1}),Ls(ge));const Ie=k.messages.get(Qn(u.typeName));return(0,B.hu)(Ie!==void 0,`invalid FieldDescriptorProto: type_name ${u.typeName} not found`),Object.assign(Object.assign({},q),{kind:"field",fieldKind:"message",repeated:me,message:Ie})}case S.ENUM:{(0,B.hu)(u.typeName,"invalid FieldDescriptorProto: missing type_name");const ge=k.enums.get(Qn(u.typeName));return(0,B.hu)(ge!==void 0,`invalid FieldDescriptorProto: type_name ${u.typeName} not found`),Object.assign(Object.assign({},q),{kind:"field",fieldKind:"enum",getDefaultValue:er,repeated:me,enum:ge})}default:{const ge=Xe[u.type];return(0,B.hu)(ge,`invalid FieldDescriptorProto: unknown type ${u.type}`),Object.assign(Object.assign({},q),{kind:"field",fieldKind:"scalar",getDefaultValue:er,repeated:me,scalar:ge,longType:((ce=u.options)===null||ce===void 0?void 0:ce.jstype)==Ae.JS_STRING?y.p.STRING:y.p.BIGINT})}}}function Zn(u,i,c,N){(0,B.hu)(u.extendee,"invalid FieldDescriptorProto: missing extendee");const k=Nn(u,i,null,void 0,N),R=N.messages.get(Qn(u.extendee));return(0,B.hu)(R,`invalid FieldDescriptorProto: extendee ${u.extendee} not found`),Object.assign(Object.assign({},k),{kind:"extension",typeName:dr(u,c,i),parent:c,file:i,extendee:R,toString(){return`extension ${this.typeName}`},getComments(){const F=this.parent?[...this.parent.getComments().sourcePath,Lt.DescriptorProto_Extension,this.parent.proto.extension.indexOf(u)]:[Lt.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(u)];return Nt(i.proto.sourceCodeInfo,F)},getFeatures(){var F,ce;return N.resolveFeatures(this.file.edition,((F=this.parent)!==null&&F!==void 0?F:this.file).getFeatures(),(ce=this.proto.options)===null||ce===void 0?void 0:ce.features)}})}function Rs(u,i){let c,N;switch(u){case void 0:case"proto2":N="proto2",c=Te.EDITION_PROTO2;break;case"proto3":N="proto3",c=Te.EDITION_PROTO3;break;case"editions":switch(N="editions",i){case void 0:case Te.EDITION_1_TEST_ONLY:case Te.EDITION_2_TEST_ONLY:case Te.EDITION_99997_TEST_ONLY:case Te.EDITION_99998_TEST_ONLY:case Te.EDITION_99999_TEST_ONLY:case Te.EDITION_UNKNOWN:c=Te.EDITION_UNKNOWN;break;default:c=i;break}break;default:throw new Error(`invalid FileDescriptorProto: unsupported syntax: ${u}`)}if(u==="editions"&&i===Te.EDITION_UNKNOWN)throw new Error(`invalid FileDescriptorProto: syntax ${u} cannot have edition ${String(i)}`);return{syntax:N,edition:c}}function dr(u,i,c){(0,B.hu)(u.name,`invalid ${u.getType().typeName}: missing name`);let N;return i?N=`${i.typeName}.${u.name}`:c.proto.package!==void 0?N=`${c.proto.package}.${u.name}`:N=`${u.name}`,N}function Qn(u){return u.startsWith(".")?u.substring(1):u}function Ls(u){var i,c;(0,B.hu)((i=u.proto.options)===null||i===void 0?void 0:i.mapEntry,`invalid DescriptorProto: expected ${u.toString()} to be a map entry`),(0,B.hu)(u.fields.length===2,`invalid DescriptorProto: map entry ${u.toString()} has ${u.fields.length} fields`);const N=u.fields.find(F=>F.proto.number===1);(0,B.hu)(N,`invalid DescriptorProto: map entry ${u.toString()} is missing key field`);const k=N.scalar;(0,B.hu)(k!==void 0&&k!==y.w.BYTES&&k!==y.w.FLOAT&&k!==y.w.DOUBLE,`invalid DescriptorProto: map entry ${u.toString()} has unexpected key type ${(c=N.proto.type)!==null&&c!==void 0?c:-1}`);const R=u.fields.find(F=>F.proto.number===2);switch((0,B.hu)(R,`invalid DescriptorProto: map entry ${u.toString()} is missing value field`),R.fieldKind){case"scalar":return{mapKey:k,mapValue:Object.assign(Object.assign({},R),{kind:"scalar"})};case"message":return{mapKey:k,mapValue:Object.assign(Object.assign({},R),{kind:"message"})};case"enum":return{mapKey:k,mapValue:Object.assign(Object.assign({},R),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}function jt(u,i){var c;const N=u.oneofIndex;if(N===void 0)return;let k;return u.proto3Optional!==!0&&(k=i[N],(0,B.hu)(k,`invalid FieldDescriptorProto: oneof #${N} for field #${(c=u.number)!==null&&c!==void 0?c:-1} not found`)),k}function he(u,i){switch(i){case"proto2":return u.oneofIndex===void 0&&u.label===D.OPTIONAL;case"proto3":return u.proto3Optional===!0;case"editions":return!1}}function It(u,i,c){const{repeatedFieldEncoding:N}=c(u.edition);if(N!=$n.PACKED)return!1;switch(i.type){case S.STRING:case S.BYTES:case S.GROUP:case S.MESSAGE:return!1;default:return!0}}function Ke(u,i,c,N){var k,R,F,ce,q,me;switch(c.type){case S.STRING:case S.BYTES:case S.GROUP:case S.MESSAGE:return!1;default:switch(u.edition){case Te.EDITION_PROTO2:return(R=(k=c.options)===null||k===void 0?void 0:k.packed)!==null&&R!==void 0?R:!1;case Te.EDITION_PROTO3:return(ce=(F=c.options)===null||F===void 0?void 0:F.packed)!==null&&ce!==void 0?ce:!0;default:{const{repeatedFieldEncoding:ge}=N(u.edition,(q=i==null?void 0:i.getFeatures())!==null&&q!==void 0?q:u.getFeatures(),(me=c.options)===null||me===void 0?void 0:me.features);return ge==$n.PACKED}}}}const Xe={[S.DOUBLE]:y.w.DOUBLE,[S.FLOAT]:y.w.FLOAT,[S.INT64]:y.w.INT64,[S.UINT64]:y.w.UINT64,[S.INT32]:y.w.INT32,[S.FIXED64]:y.w.FIXED64,[S.FIXED32]:y.w.FIXED32,[S.BOOL]:y.w.BOOL,[S.STRING]:y.w.STRING,[S.GROUP]:void 0,[S.MESSAGE]:void 0,[S.BYTES]:y.w.BYTES,[S.UINT32]:y.w.UINT32,[S.ENUM]:void 0,[S.SFIXED32]:y.w.SFIXED32,[S.SFIXED64]:y.w.SFIXED64,[S.SINT32]:y.w.SINT32,[S.SINT64]:y.w.SINT64};function Nt(u,i){if(!u)return{leadingDetached:[],sourcePath:i};for(const c of u.location)if(c.path.length===i.length&&!c.path.some((N,k)=>i[k]!==N))return{leadingDetached:c.leadingDetachedComments,leading:c.leadingComments,trailing:c.trailingComments,sourcePath:i};return{leadingDetached:[],sourcePath:i}}var Lt;(function(u){u[u.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",u[u.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",u[u.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",u[u.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",u[u.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",u[u.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",u[u.DescriptorProto_Field=2]="DescriptorProto_Field",u[u.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",u[u.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",u[u.DescriptorProto_Extension=6]="DescriptorProto_Extension",u[u.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",u[u.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",u[u.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"})(Lt||(Lt={}));function hr(){var u,i,c;const N=[];this.repeated&&N.push("repeated"),this.optional&&N.push("optional"),(this.kind==="extension"?this.file:this.parent.file).syntax=="proto2"&&this.proto.label===D.REQUIRED&&N.push("required");let R;switch(this.fieldKind){case"scalar":R=y.w[this.scalar].toLowerCase();break;case"enum":R=this.enum.typeName;break;case"message":R=this.message.typeName;break;case"map":{const q=y.w[this.mapKey].toLowerCase();let me;switch(this.mapValue.kind){case"scalar":me=y.w[this.mapValue.scalar].toLowerCase();break;case"enum":me=this.mapValue.enum.typeName;break;case"message":me=this.mapValue.message.typeName;break}R=`map<${q}, ${me}>`;break}}N.push(`${R} ${this.name} = ${this.number}`);const F=[];((u=this.proto.options)===null||u===void 0?void 0:u.packed)!==void 0&&F.push(`packed = ${this.proto.options.packed.toString()}`);let ce=this.proto.defaultValue;return ce!==void 0&&((this.proto.type==S.BYTES||this.proto.type==S.STRING)&&(ce='"'+ce.replace('"','\\"')+'"'),F.push(`default = ${ce}`)),this.jsonName!==void 0&&F.push(`json_name = "${this.jsonName}"`),((i=this.proto.options)===null||i===void 0?void 0:i.jstype)!==void 0&&F.push(`jstype = ${Ae[this.proto.options.jstype]}`),((c=this.proto.options)===null||c===void 0?void 0:c.deprecated)===!0&&F.push("deprecated = true"),F.length>0&&N.push("["+F.join(", ")+"]"),N.join(" ")}function er(){const u=this.proto.defaultValue;if(u!==void 0)switch(this.fieldKind){case"enum":return Ds(this.enum,u);case"scalar":return _s(this.scalar,u);default:return}}function Tn(...u){const i={},c={},N={},k={add(R){if("fields"in R){if(!this.findMessage(R.typeName)){i[R.typeName]=R;for(const F of R.fields.list())F.kind=="message"?this.add(F.T):F.kind=="map"&&F.V.kind=="message"?this.add(F.V.T):F.kind=="enum"&&this.add(F.T)}}else if("methods"in R){if(!this.findService(R.typeName)){N[R.typeName]=R;for(const F of Object.values(R.methods))this.add(F.I),this.add(F.O)}}else c[R.typeName]=R},findMessage(R){return i[R]},findEnum(R){return c[R]},findService(R){return N[R]}};for(const R of u)k.add(R);return k}class Vt extends le.v{constructor(i){super(),this.seconds=C.q.zero,this.nanos=0,d.w.util.initPartial(i,this)}fromJson(i,c){if(typeof i!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${d.w.json.debug(i)}`);const N=i.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!N)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const k=Date.parse(N[1]+"-"+N[2]+"-"+N[3]+"T"+N[4]+":"+N[5]+":"+N[6]+(N[8]?N[8]:"Z"));if(Number.isNaN(k))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(k<Date.parse("0001-01-01T00:00:00Z")||k>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=C.q.parse(k/1e3),this.nanos=0,N[7]&&(this.nanos=parseInt("1"+N[7]+"0".repeat(9-N[7].length))-1e9),this}toJson(i){const c=Number(this.seconds)*1e3;if(c<Date.parse("0001-01-01T00:00:00Z")||c>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let N="Z";if(this.nanos>0){const k=(this.nanos+1e9).toString().substring(1);k.substring(3)==="000000"?N="."+k.substring(0,3)+"Z":k.substring(6)==="000"?N="."+k.substring(0,6)+"Z":N="."+k+"Z"}return new Date(c).toISOString().replace(".000Z",N)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Vt.fromDate(new Date)}static fromDate(i){const c=i.getTime();return new Vt({seconds:C.q.parse(Math.floor(c/1e3)),nanos:c%1e3*1e6})}static fromBinary(i,c){return new Vt().fromBinary(i,c)}static fromJson(i,c){return new Vt().fromJson(i,c)}static fromJsonString(i,c){return new Vt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Vt,i,c)}}Vt.runtime=d.w,Vt.typeName="google.protobuf.Timestamp",Vt.fields=d.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Kt extends le.v{constructor(i){super(),this.seconds=C.q.zero,this.nanos=0,d.w.util.initPartial(i,this)}fromJson(i,c){if(typeof i!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${d.w.json.debug(i)}`);const N=i.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(N===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${d.w.json.debug(i)}`);const k=Number(N[1]);if(k>315576e6||k<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${d.w.json.debug(i)}`);if(this.seconds=C.q.parse(k),typeof N[2]=="string"){const R=N[2]+"0".repeat(9-N[2].length);this.nanos=parseInt(R),(k<0||Object.is(k,-0))&&(this.nanos=-this.nanos)}return this}toJson(i){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let c=this.seconds.toString();if(this.nanos!==0){let N=Math.abs(this.nanos).toString();N="0".repeat(9-N.length)+N,N.substring(3)==="000000"?N=N.substring(0,3):N.substring(6)==="000"&&(N=N.substring(0,6)),c+="."+N,this.nanos<0&&Number(this.seconds)==0&&(c="-"+c)}return c+"s"}static fromBinary(i,c){return new Kt().fromBinary(i,c)}static fromJson(i,c){return new Kt().fromJson(i,c)}static fromJsonString(i,c){return new Kt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Kt,i,c)}}Kt.runtime=d.w,Kt.typeName="google.protobuf.Duration",Kt.fields=d.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var hs=b(733);class at extends le.v{constructor(i){super(),d.w.util.initPartial(i,this)}static fromBinary(i,c){return new at().fromBinary(i,c)}static fromJson(i,c){return new at().fromJson(i,c)}static fromJsonString(i,c){return new at().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(at,i,c)}}at.runtime=d.w,at.typeName="google.protobuf.Empty",at.fields=d.w.util.newFieldList(()=>[]);class cn extends le.v{constructor(i){super(),this.paths=[],d.w.util.initPartial(i,this)}toJson(i){function c(N){let k=!1;const R=[];for(let F=0;F<N.length;F++){let ce=N.charAt(F);switch(ce){case"_":k=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":R.push(ce),k=!1;break;default:k&&(k=!1,ce=ce.toUpperCase()),R.push(ce);break}}return R.join("")}return this.paths.map(N=>{if(N.match(/_[0-9]?_/g)||N.match(/[A-Z]/g))throw new Error('cannot encode google.protobuf.FieldMask to JSON: lowerCamelCase of path name "'+N+'" is irreversible');return c(N)}).join(",")}fromJson(i,c){if(typeof i!="string")throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+d.w.json.debug(i));if(i==="")return this;function N(k){if(k.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const R=k.replace(/[A-Z]/g,F=>"_"+F.toLowerCase());return R[0]==="_"?R.substring(1):R}return this.paths=i.split(",").map(N),this}static fromBinary(i,c){return new cn().fromBinary(i,c)}static fromJson(i,c){return new cn().fromJson(i,c)}static fromJsonString(i,c){return new cn().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(cn,i,c)}}cn.runtime=d.w,cn.typeName="google.protobuf.FieldMask",cn.fields=d.w.util.newFieldList(()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}]);var tr;(function(u){u[u.NULL_VALUE=0]="NULL_VALUE"})(tr||(tr={})),d.w.util.setEnumType(tr,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class un extends le.v{constructor(i){super(),this.fields={},d.w.util.initPartial(i,this)}toJson(i){const c={};for(const[N,k]of Object.entries(this.fields))c[N]=k.toJson(i);return c}fromJson(i,c){if(typeof i!="object"||i==null||Array.isArray(i))throw new Error("cannot decode google.protobuf.Struct from JSON "+d.w.json.debug(i));for(const[N,k]of Object.entries(i))this.fields[N]=ht.fromJson(k);return this}static fromBinary(i,c){return new un().fromBinary(i,c)}static fromJson(i,c){return new un().fromJson(i,c)}static fromJsonString(i,c){return new un().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(un,i,c)}}un.runtime=d.w,un.typeName="google.protobuf.Struct",un.fields=d.w.util.newFieldList(()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:ht}}]);class ht extends le.v{constructor(i){super(),this.kind={case:void 0},d.w.util.initPartial(i,this)}toJson(i){switch(this.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(this.kind.value))throw new Error("google.protobuf.Value cannot be NaN or Infinity");return this.kind.value;case"boolValue":return this.kind.value;case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},i),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(i,c){switch(typeof i){case"number":this.kind={case:"numberValue",value:i};break;case"string":this.kind={case:"stringValue",value:i};break;case"boolean":this.kind={case:"boolValue",value:i};break;case"object":i===null?this.kind={case:"nullValue",value:tr.NULL_VALUE}:Array.isArray(i)?this.kind={case:"listValue",value:qt.fromJson(i)}:this.kind={case:"structValue",value:un.fromJson(i)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+d.w.json.debug(i))}return this}static fromBinary(i,c){return new ht().fromBinary(i,c)}static fromJson(i,c){return new ht().fromJson(i,c)}static fromJsonString(i,c){return new ht().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(ht,i,c)}}ht.runtime=d.w,ht.typeName="google.protobuf.Value",ht.fields=d.w.util.newFieldList(()=>[{no:1,name:"null_value",kind:"enum",T:d.w.getEnumType(tr),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:un,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:qt,oneof:"kind"}]);class qt extends le.v{constructor(i){super(),this.values=[],d.w.util.initPartial(i,this)}toJson(i){return this.values.map(c=>c.toJson())}fromJson(i,c){if(!Array.isArray(i))throw new Error("cannot decode google.protobuf.ListValue from JSON "+d.w.json.debug(i));for(let N of i)this.values.push(ht.fromJson(N));return this}static fromBinary(i,c){return new qt().fromBinary(i,c)}static fromJson(i,c){return new qt().fromJson(i,c)}static fromJsonString(i,c){return new qt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(qt,i,c)}}qt.runtime=d.w,qt.typeName="google.protobuf.ListValue",qt.fields=d.w.util.newFieldList(()=>[{no:1,name:"values",kind:"message",T:ht,repeated:!0}]);var _n=b(609);class Jt extends le.v{constructor(i){super(),this.value=0,d.w.util.initPartial(i,this)}toJson(i){return d.w.json.writeScalar(y.w.DOUBLE,this.value,!0)}fromJson(i,c){try{this.value=d.w.json.readScalar(y.w.DOUBLE,i)}catch(N){let k='cannot decode message google.protobuf.DoubleValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(i,c){return new Jt().fromBinary(i,c)}static fromJson(i,c){return new Jt().fromJson(i,c)}static fromJsonString(i,c){return new Jt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Jt,i,c)}}Jt.runtime=d.w,Jt.typeName="google.protobuf.DoubleValue",Jt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Jt.fieldWrapper={wrapField(u){return new Jt({value:u})},unwrapField(u){return u.value}};class St extends le.v{constructor(i){super(),this.value=0,d.w.util.initPartial(i,this)}toJson(i){return d.w.json.writeScalar(y.w.FLOAT,this.value,!0)}fromJson(i,c){try{this.value=d.w.json.readScalar(y.w.FLOAT,i)}catch(N){let k='cannot decode message google.protobuf.FloatValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(i,c){return new St().fromBinary(i,c)}static fromJson(i,c){return new St().fromJson(i,c)}static fromJsonString(i,c){return new St().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(St,i,c)}}St.runtime=d.w,St.typeName="google.protobuf.FloatValue",St.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),St.fieldWrapper={wrapField(u){return new St({value:u})},unwrapField(u){return u.value}};class Zt extends le.v{constructor(i){super(),this.value=C.q.zero,d.w.util.initPartial(i,this)}toJson(i){return d.w.json.writeScalar(y.w.INT64,this.value,!0)}fromJson(i,c){try{this.value=d.w.json.readScalar(y.w.INT64,i)}catch(N){let k='cannot decode message google.protobuf.Int64Value from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(i,c){return new Zt().fromBinary(i,c)}static fromJson(i,c){return new Zt().fromJson(i,c)}static fromJsonString(i,c){return new Zt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Zt,i,c)}}Zt.runtime=d.w,Zt.typeName="google.protobuf.Int64Value",Zt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),Zt.fieldWrapper={wrapField(u){return new Zt({value:u})},unwrapField(u){return u.value}};class Yt extends le.v{constructor(i){super(),this.value=C.q.zero,d.w.util.initPartial(i,this)}toJson(i){return d.w.json.writeScalar(y.w.UINT64,this.value,!0)}fromJson(i,c){try{this.value=d.w.json.readScalar(y.w.UINT64,i)}catch(N){let k='cannot decode message google.protobuf.UInt64Value from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(i,c){return new Yt().fromBinary(i,c)}static fromJson(i,c){return new Yt().fromJson(i,c)}static fromJsonString(i,c){return new Yt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Yt,i,c)}}Yt.runtime=d.w,Yt.typeName="google.protobuf.UInt64Value",Yt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),Yt.fieldWrapper={wrapField(u){return new Yt({value:u})},unwrapField(u){return u.value}};class Bt extends le.v{constructor(i){super(),this.value=0,d.w.util.initPartial(i,this)}toJson(i){return d.w.json.writeScalar(y.w.INT32,this.value,!0)}fromJson(i,c){try{this.value=d.w.json.readScalar(y.w.INT32,i)}catch(N){let k='cannot decode message google.protobuf.Int32Value from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(i,c){return new Bt().fromBinary(i,c)}static fromJson(i,c){return new Bt().fromJson(i,c)}static fromJsonString(i,c){return new Bt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Bt,i,c)}}Bt.runtime=d.w,Bt.typeName="google.protobuf.Int32Value",Bt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),Bt.fieldWrapper={wrapField(u){return new Bt({value:u})},unwrapField(u){return u.value}};class it extends le.v{constructor(i){super(),this.value=0,d.w.util.initPartial(i,this)}toJson(i){return d.w.json.writeScalar(y.w.UINT32,this.value,!0)}fromJson(i,c){try{this.value=d.w.json.readScalar(y.w.UINT32,i)}catch(N){let k='cannot decode message google.protobuf.UInt32Value from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(i,c){return new it().fromBinary(i,c)}static fromJson(i,c){return new it().fromJson(i,c)}static fromJsonString(i,c){return new it().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(it,i,c)}}it.runtime=d.w,it.typeName="google.protobuf.UInt32Value",it.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),it.fieldWrapper={wrapField(u){return new it({value:u})},unwrapField(u){return u.value}};class Je extends le.v{constructor(i){super(),this.value=!1,d.w.util.initPartial(i,this)}toJson(i){return d.w.json.writeScalar(y.w.BOOL,this.value,!0)}fromJson(i,c){try{this.value=d.w.json.readScalar(y.w.BOOL,i)}catch(N){let k='cannot decode message google.protobuf.BoolValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(i,c){return new Je().fromBinary(i,c)}static fromJson(i,c){return new Je().fromJson(i,c)}static fromJsonString(i,c){return new Je().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Je,i,c)}}Je.runtime=d.w,Je.typeName="google.protobuf.BoolValue",Je.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),Je.fieldWrapper={wrapField(u){return new Je({value:u})},unwrapField(u){return u.value}};class mt extends le.v{constructor(i){super(),this.value="",d.w.util.initPartial(i,this)}toJson(i){return d.w.json.writeScalar(y.w.STRING,this.value,!0)}fromJson(i,c){try{this.value=d.w.json.readScalar(y.w.STRING,i)}catch(N){let k='cannot decode message google.protobuf.StringValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(i,c){return new mt().fromBinary(i,c)}static fromJson(i,c){return new mt().fromJson(i,c)}static fromJsonString(i,c){return new mt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(mt,i,c)}}mt.runtime=d.w,mt.typeName="google.protobuf.StringValue",mt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),mt.fieldWrapper={wrapField(u){return new mt({value:u})},unwrapField(u){return u.value}};class Qt extends le.v{constructor(i){super(),this.value=new Uint8Array(0),d.w.util.initPartial(i,this)}toJson(i){return d.w.json.writeScalar(y.w.BYTES,this.value,!0)}fromJson(i,c){try{this.value=d.w.json.readScalar(y.w.BYTES,i)}catch(N){let k='cannot decode message google.protobuf.BytesValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(i,c){return new Qt().fromBinary(i,c)}static fromJson(i,c){return new Qt().fromJson(i,c)}static fromJsonString(i,c){return new Qt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Qt,i,c)}}Qt.runtime=d.w,Qt.typeName="google.protobuf.BytesValue",Qt.fields=d.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),Qt.fieldWrapper={wrapField(u){return new Qt({value:u})},unwrapField(u){return u.value}};const Ar=[hs.I,Kt,at,cn,un,ht,qt,Vt,Kt,Jt,St,Zt,Bt,it,Yt,Je,mt,Qt],ke=[(0,_n.V3)(tr)];function ut(u,i=!0){const c=u instanceof Uint8Array||u instanceof Oe?jr(u):u,N={},k={},R={};if(i){for(const F of Ar)k[F.typeName]=F;for(const F of ke)N[F.typeName]=F}return{findEnum(F){const ce=N[F];if(ce)return ce;const q=c.enums.get(F);if(!q)return;const ge=(q.file.syntax=="proto3"?d.w:w).makeEnumType(F,q.values.map(Ie=>({no:Ie.number,name:Ie.name,localName:(0,A.r1)(Ie)})),{});return N[F]=ge,ge},findMessage(F){const ce=k[F];if(ce)return ce;const q=c.messages.get(F);if(!q)return;const me=q.file.syntax=="proto3"?d.w:w,ge=[],Ie=me.makeMessageType(F,()=>ge,{localName:(0,A.r1)(q)});k[F]=Ie;for(const ot of q.fields){const qe=Kr(ot,this);ge.push(qe)}return Ie},findService(F){const ce=R[F];if(ce)return ce;const q=c.services.get(F);if(!q)return;const me={};for(const ge of q.methods){const Ie=this.findMessage(ge.input.typeName),ot=this.findMessage(ge.output.typeName);(0,B.hu)(Ie,`message "${ge.input.typeName}" for ${ge.toString()} not found`),(0,B.hu)(ot,`output message "${ge.output.typeName}" for ${ge.toString()} not found`),me[(0,A.r1)(ge)]={name:ge.name,I:Ie,O:ot,kind:ge.methodKind,idempotency:ge.idempotency}}return R[F]={typeName:q.typeName,methods:me}}}}function Kr(u,i){switch(u.fieldKind){case"map":return kr(u,i);case"message":return jn(u,i);case"enum":{const c=nr(u,i);return c.default=u.getDefaultValue(),c}case"scalar":{const c=en(u);return c.default=u.getDefaultValue(),c}}}function kr(u,i){const c={kind:"map",no:u.number,name:u.name,jsonName:u.jsonName,K:u.mapKey};if(u.mapValue.message){const N=i.findMessage(u.mapValue.message.typeName);return(0,B.hu)(N,`message "${u.mapValue.message.typeName}" for ${u.toString()} not found`),Object.assign(Object.assign({},c),{V:{kind:"message",T:N}})}if(u.mapValue.enum){const N=i.findEnum(u.mapValue.enum.typeName);return(0,B.hu)(N,`enum "${u.mapValue.enum.typeName}" for ${u.toString()} not found`),Object.assign(Object.assign({},c),{V:{kind:"enum",T:N}})}return Object.assign(Object.assign({},c),{V:{kind:"scalar",T:u.mapValue.scalar}})}function en(u){const i=u.longType==y.p.STRING?{L:y.p.STRING}:{},c=Object.assign({kind:"scalar",no:u.number,name:u.name,jsonName:u.jsonName,T:u.scalar},i);return u.repeated?Object.assign(Object.assign({},c),{repeated:!0,packed:u.packed,oneof:void 0,T:u.scalar}):u.oneof?Object.assign(Object.assign({},c),{oneof:u.oneof.name}):u.optional?Object.assign(Object.assign({},c),{opt:!0}):c}function jn(u,i){const c=i.findMessage(u.message.typeName);(0,B.hu)(c,`message "${u.message.typeName}" for ${u.toString()} not found`);const N={kind:"message",no:u.number,name:u.name,jsonName:u.jsonName,T:c,delimited:u.proto.type==S.GROUP};return u.repeated?Object.assign(Object.assign({},N),{repeated:!0,packed:u.packed,oneof:void 0}):u.oneof?Object.assign(Object.assign({},N),{oneof:u.oneof.name}):u.optional?Object.assign(Object.assign({},N),{opt:!0}):N}function nr(u,i){const c=i.findEnum(u.enum.typeName);(0,B.hu)(c,`enum "${u.enum.typeName}" for ${u.toString()} not found`);const N={kind:"enum",no:u.number,name:u.name,jsonName:u.jsonName,T:c};return u.repeated?Object.assign(Object.assign({},N),{repeated:!0,packed:u.packed,oneof:void 0}):u.oneof?Object.assign(Object.assign({},N),{oneof:u.oneof.name}):u.optional?Object.assign(Object.assign({},N),{opt:!0}):N}function mr(u){if(!(u instanceof le.v))return u;const i=u.getType(),c={};for(const N of i.fields.byMember()){const k=u[N.localName];let R;if(N.repeated)R=k.map(F=>vn(F));else if(N.kind=="map"){R={};for(const[F,ce]of Object.entries(k))R[F]=vn(ce)}else N.kind=="oneof"?R=N.findField(k.case)?{case:k.case,value:vn(k.value)}:{case:void 0}:R=vn(k);c[N.localName]=R}return c}function vn(u){if(u===void 0)return u;if(u instanceof le.v)return mr(u);if(u instanceof Uint8Array){const i=new Uint8Array(u.byteLength);return i.set(u),i}return u}class Ut extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new Ut().fromBinary(i,c)}static fromJson(i,c){return new Ut().fromJson(i,c)}static fromJsonString(i,c){return new Ut().fromJsonString(i,c)}static equals(i,c){return w.util.equals(Ut,i,c)}}Ut.runtime=w,Ut.typeName="google.protobuf.compiler.Version",Ut.fields=w.util.newFieldList(()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]);class _t extends le.v{constructor(i){super(),this.fileToGenerate=[],this.protoFile=[],this.sourceFileDescriptors=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new _t().fromBinary(i,c)}static fromJson(i,c){return new _t().fromJson(i,c)}static fromJsonString(i,c){return new _t().fromJsonString(i,c)}static equals(i,c){return w.util.equals(_t,i,c)}}_t.runtime=w,_t.typeName="google.protobuf.compiler.CodeGeneratorRequest",_t.fields=w.util.newFieldList(()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:Ye,repeated:!0},{no:17,name:"source_file_descriptors",kind:"message",T:Ye,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:Ut,opt:!0}]);class ln extends le.v{constructor(i){super(),this.file=[],w.util.initPartial(i,this)}static fromBinary(i,c){return new ln().fromBinary(i,c)}static fromJson(i,c){return new ln().fromJson(i,c)}static fromJsonString(i,c){return new ln().fromJsonString(i,c)}static equals(i,c){return w.util.equals(ln,i,c)}}ln.runtime=w,ln.typeName="google.protobuf.compiler.CodeGeneratorResponse",ln.fields=w.util.newFieldList(()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:wt,repeated:!0}]);var Vn;(function(u){u[u.NONE=0]="NONE",u[u.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL",u[u.SUPPORTS_EDITIONS=2]="SUPPORTS_EDITIONS"})(Vn||(Vn={})),w.util.setEnumType(Vn,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"},{no:2,name:"FEATURE_SUPPORTS_EDITIONS"}]);class wt extends le.v{constructor(i){super(),w.util.initPartial(i,this)}static fromBinary(i,c){return new wt().fromBinary(i,c)}static fromJson(i,c){return new wt().fromJson(i,c)}static fromJsonString(i,c){return new wt().fromJsonString(i,c)}static equals(i,c){return w.util.equals(wt,i,c)}}wt.runtime=w,wt.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",wt.fields=w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:$e,opt:!0}]);class Mt extends le.v{constructor(i){super(),this.fileName="",d.w.util.initPartial(i,this)}static fromBinary(i,c){return new Mt().fromBinary(i,c)}static fromJson(i,c){return new Mt().fromJson(i,c)}static fromJsonString(i,c){return new Mt().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Mt,i,c)}}Mt.runtime=d.w,Mt.typeName="google.protobuf.SourceContext",Mt.fields=d.w.util.newFieldList(()=>[{no:1,name:"file_name",kind:"scalar",T:9}]);var Ft;(function(u){u[u.PROTO2=0]="PROTO2",u[u.PROTO3=1]="PROTO3",u[u.EDITIONS=2]="EDITIONS"})(Ft||(Ft={})),d.w.util.setEnumType(Ft,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"},{no:2,name:"SYNTAX_EDITIONS"}]);class Cn extends le.v{constructor(i){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=Ft.PROTO2,this.edition="",d.w.util.initPartial(i,this)}static fromBinary(i,c){return new Cn().fromBinary(i,c)}static fromJson(i,c){return new Cn().fromJson(i,c)}static fromJsonString(i,c){return new Cn().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Cn,i,c)}}Cn.runtime=d.w,Cn.typeName="google.protobuf.Type",Cn.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:Sn,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:Be,repeated:!0},{no:5,name:"source_context",kind:"message",T:Mt},{no:6,name:"syntax",kind:"enum",T:d.w.getEnumType(Ft)},{no:7,name:"edition",kind:"scalar",T:9}]);class Sn extends le.v{constructor(i){super(),this.kind=Wt.TYPE_UNKNOWN,this.cardinality=An.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",d.w.util.initPartial(i,this)}static fromBinary(i,c){return new Sn().fromBinary(i,c)}static fromJson(i,c){return new Sn().fromJson(i,c)}static fromJsonString(i,c){return new Sn().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Sn,i,c)}}Sn.runtime=d.w,Sn.typeName="google.protobuf.Field",Sn.fields=d.w.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:d.w.getEnumType(Wt)},{no:2,name:"cardinality",kind:"enum",T:d.w.getEnumType(An)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:Be,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}]);var Wt;(function(u){u[u.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",u[u.TYPE_DOUBLE=1]="TYPE_DOUBLE",u[u.TYPE_FLOAT=2]="TYPE_FLOAT",u[u.TYPE_INT64=3]="TYPE_INT64",u[u.TYPE_UINT64=4]="TYPE_UINT64",u[u.TYPE_INT32=5]="TYPE_INT32",u[u.TYPE_FIXED64=6]="TYPE_FIXED64",u[u.TYPE_FIXED32=7]="TYPE_FIXED32",u[u.TYPE_BOOL=8]="TYPE_BOOL",u[u.TYPE_STRING=9]="TYPE_STRING",u[u.TYPE_GROUP=10]="TYPE_GROUP",u[u.TYPE_MESSAGE=11]="TYPE_MESSAGE",u[u.TYPE_BYTES=12]="TYPE_BYTES",u[u.TYPE_UINT32=13]="TYPE_UINT32",u[u.TYPE_ENUM=14]="TYPE_ENUM",u[u.TYPE_SFIXED32=15]="TYPE_SFIXED32",u[u.TYPE_SFIXED64=16]="TYPE_SFIXED64",u[u.TYPE_SINT32=17]="TYPE_SINT32",u[u.TYPE_SINT64=18]="TYPE_SINT64"})(Wt||(Wt={})),d.w.util.setEnumType(Wt,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var An;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.OPTIONAL=1]="OPTIONAL",u[u.REQUIRED=2]="REQUIRED",u[u.REPEATED=3]="REPEATED"})(An||(An={})),d.w.util.setEnumType(An,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class xn extends le.v{constructor(i){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=Ft.PROTO2,this.edition="",d.w.util.initPartial(i,this)}static fromBinary(i,c){return new xn().fromBinary(i,c)}static fromJson(i,c){return new xn().fromJson(i,c)}static fromJsonString(i,c){return new xn().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(xn,i,c)}}xn.runtime=d.w,xn.typeName="google.protobuf.Enum",xn.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:kn,repeated:!0},{no:3,name:"options",kind:"message",T:Be,repeated:!0},{no:4,name:"source_context",kind:"message",T:Mt},{no:5,name:"syntax",kind:"enum",T:d.w.getEnumType(Ft)},{no:6,name:"edition",kind:"scalar",T:9}]);class kn extends le.v{constructor(i){super(),this.name="",this.number=0,this.options=[],d.w.util.initPartial(i,this)}static fromBinary(i,c){return new kn().fromBinary(i,c)}static fromJson(i,c){return new kn().fromJson(i,c)}static fromJsonString(i,c){return new kn().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(kn,i,c)}}kn.runtime=d.w,kn.typeName="google.protobuf.EnumValue",kn.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:Be,repeated:!0}]);class Be extends le.v{constructor(i){super(),this.name="",d.w.util.initPartial(i,this)}static fromBinary(i,c){return new Be().fromBinary(i,c)}static fromJson(i,c){return new Be().fromJson(i,c)}static fromJsonString(i,c){return new Be().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(Be,i,c)}}Be.runtime=d.w,Be.typeName="google.protobuf.Option",Be.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:hs.I}]);class On extends le.v{constructor(i){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=Ft.PROTO2,d.w.util.initPartial(i,this)}static fromBinary(i,c){return new On().fromBinary(i,c)}static fromJson(i,c){return new On().fromJson(i,c)}static fromJsonString(i,c){return new On().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(On,i,c)}}On.runtime=d.w,On.typeName="google.protobuf.Api",On.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:fn,repeated:!0},{no:3,name:"options",kind:"message",T:Be,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:Mt},{no:6,name:"mixins",kind:"message",T:dn,repeated:!0},{no:7,name:"syntax",kind:"enum",T:d.w.getEnumType(Ft)}]);class fn extends le.v{constructor(i){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=Ft.PROTO2,d.w.util.initPartial(i,this)}static fromBinary(i,c){return new fn().fromBinary(i,c)}static fromJson(i,c){return new fn().fromJson(i,c)}static fromJsonString(i,c){return new fn().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(fn,i,c)}}fn.runtime=d.w,fn.typeName="google.protobuf.Method",fn.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:Be,repeated:!0},{no:7,name:"syntax",kind:"enum",T:d.w.getEnumType(Ft)}]);class dn extends le.v{constructor(i){super(),this.name="",this.root="",d.w.util.initPartial(i,this)}static fromBinary(i,c){return new dn().fromBinary(i,c)}static fromJson(i,c){return new dn().fromJson(i,c)}static fromJsonString(i,c){return new dn().fromJsonString(i,c)}static equals(i,c){return d.w.util.equals(dn,i,c)}}dn.runtime=d.w,dn.typeName="google.protobuf.Mixin",dn.fields=d.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}])},561:(E,T,b)=>{b.d(T,{v:()=>d});class d{equals(y){return this.getType().runtime.util.equals(this.getType(),this,y)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(y,L){const P=this.getType(),Y=P.runtime.bin,j=Y.makeReadOptions(L);return Y.readMessage(this,j.readerFactory(y),y.byteLength,j),this}fromJson(y,L){const P=this.getType(),Y=P.runtime.json,j=Y.makeReadOptions(L);return Y.readMessage(P,y,j,this),this}fromJsonString(y,L){let P;try{P=JSON.parse(y)}catch(Y){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${Y instanceof Error?Y.message:String(Y)}`)}return this.fromJson(P,L)}toBinary(y){const L=this.getType(),P=L.runtime.bin,Y=P.makeWriteOptions(y),j=Y.writerFactory();return P.writeMessage(this,j,Y),j.finish()}toJson(y){const L=this.getType(),P=L.runtime.json,Y=P.makeWriteOptions(y);return P.writeMessage(this,Y)}toJsonString(y){var L;const P=this.toJson(y);return JSON.stringify(P,null,(L=y==null?void 0:y.prettySpaces)!==null&&L!==void 0?L:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}},120:(E,T,b)=>{b.d(T,{E_:()=>A,fp:()=>O,hu:()=>d,ug:()=>j});function d(V,B){if(!V)throw new Error(B)}const v=34028234663852886e22,y=-34028234663852886e22,L=4294967295,P=2147483647,Y=-2147483648;function j(V){if(typeof V!="number")throw new Error("invalid int 32: "+typeof V);if(!Number.isInteger(V)||V>P||V<Y)throw new Error("invalid int 32: "+V)}function O(V){if(typeof V!="number")throw new Error("invalid uint 32: "+typeof V);if(!Number.isInteger(V)||V>L||V<0)throw new Error("invalid uint 32: "+V)}function A(V){if(typeof V!="number")throw new Error("invalid float 32: "+typeof V);if(!!Number.isFinite(V)&&(V>v||V<y))throw new Error("invalid float 32: "+V)}},744:(E,T,b)=>{b.d(T,{Jj:()=>ae,NN:()=>ne,gQ:()=>C,gY:()=>J,oQ:()=>X});var d=b(79),v=b(561),y=b(465),L=b(432),P=b(781),Y=b(120);const j=Symbol("@bufbuild/protobuf/unknown-fields"),O={readUnknownFields:!0,readerFactory:$=>new d.oP($)},A={writeUnknownFields:!0,writerFactory:()=>new d.Lt};function V($){return $?Object.assign(Object.assign({},O),$):O}function B($){return $?Object.assign(Object.assign({},A),$):A}function J(){return{makeReadOptions:V,makeWriteOptions:B,listUnknownFields($){var ie;return(ie=$[j])!==null&&ie!==void 0?ie:[]},discardUnknownFields($){delete $[j]},writeUnknownFields($,ie){const re=$[j];if(re)for(const z of re)ie.tag(z.no,z.wireType).raw(z.data)},onUnknownField($,ie,de,re){const z=$;Array.isArray(z[j])||(z[j]=[]),z[j].push({no:ie,wireType:de,data:re})},readMessage($,ie,de,re,z){const fe=$.getType(),Me=z?ie.len:ie.pos+de;let le,Ce;for(;ie.pos<Me&&([le,Ce]=ie.tag(),Ce!=d.TD.EndGroup);){const Te=fe.fields.find(le);if(!Te){const We=ie.skip(Ce);re.readUnknownFields&&this.onUnknownField($,le,Ce,We);continue}let Oe=$,Ye=Te.repeated,Fe=Te.localName;switch(Te.oneof&&(Oe=Oe[Te.oneof.localName],Oe.case!=Fe&&delete Oe.value,Oe.case=Fe,Fe="value"),Te.kind){case"scalar":case"enum":const We=Te.kind=="enum"?y.w.INT32:Te.T;let ct=W;if(Te.kind=="scalar"&&Te.L>0&&(ct=Z),Ye){let gt=Oe[Fe];if(Ce==d.TD.LengthDelimited&&We!=y.w.STRING&&We!=y.w.BYTES){let S=ie.uint32()+ie.pos;for(;ie.pos<S;)gt.push(ct(ie,We))}else gt.push(ct(ie,We))}else Oe[Fe]=ct(ie,We);break;case"message":const tt=Te.T;Ye?Oe[Fe].push(M(ie,new tt,re,Te)):Oe[Fe]instanceof v.v?M(ie,Oe[Fe],re,Te):(Oe[Fe]=M(ie,new tt,re,Te),tt.fieldWrapper&&!Te.oneof&&!Te.repeated&&(Oe[Fe]=tt.fieldWrapper.unwrapField(Oe[Fe])));break;case"map":let[ft,kt]=w(Te,ie,re);Oe[Fe][ft]=kt;break}}if(z&&(Ce!=d.TD.EndGroup||le!==de))throw new Error("invalid end group tag")}}}function M($,ie,de,re){const z=ie.getType().runtime.bin,fe=re==null?void 0:re.delimited;return z.readMessage(ie,$,fe?re==null?void 0:re.no:$.uint32(),de,fe),ie}function w($,ie,de){const re=ie.uint32(),z=ie.pos+re;let fe,Me;for(;ie.pos<z;){let[le]=ie.tag();switch(le){case 1:fe=W(ie,$.K);break;case 2:switch($.V.kind){case"scalar":Me=W(ie,$.V.T);break;case"enum":Me=ie.int32();break;case"message":Me=M(ie,new $.V.T,de,void 0);break}break}}if(fe===void 0){let le=(0,P.kY)($.K,y.p.BIGINT);fe=$.K==y.w.BOOL?le.toString():le}if(typeof fe!="string"&&typeof fe!="number"&&(fe=fe.toString()),Me===void 0)switch($.V.kind){case"scalar":Me=(0,P.kY)($.V.T,y.p.BIGINT);break;case"enum":Me=0;break;case"message":Me=new $.V.T;break}return[fe,Me]}function Z($,ie){const de=W($,ie);return typeof de=="bigint"?de.toString():de}function W($,ie){switch(ie){case y.w.STRING:return $.string();case y.w.BOOL:return $.bool();case y.w.DOUBLE:return $.double();case y.w.FLOAT:return $.float();case y.w.INT32:return $.int32();case y.w.INT64:return $.int64();case y.w.UINT64:return $.uint64();case y.w.FIXED64:return $.fixed64();case y.w.BYTES:return $.bytes();case y.w.FIXED32:return $.fixed32();case y.w.SFIXED32:return $.sfixed32();case y.w.SFIXED64:return $.sfixed64();case y.w.SINT64:return $.sint64();case y.w.UINT32:return $.uint32();case y.w.SINT32:return $.sint32()}}function C($,ie,de,re,z){$.tag(de.no,d.TD.LengthDelimited),$.fork();let fe=re;switch(de.K){case y.w.INT32:case y.w.FIXED32:case y.w.UINT32:case y.w.SFIXED32:case y.w.SINT32:fe=Number.parseInt(re);break;case y.w.BOOL:(0,Y.hu)(re=="true"||re=="false"),fe=re=="true";break}switch(ne($,de.K,1,fe,!0),de.V.kind){case"scalar":ne($,de.V.T,2,z,!0);break;case"enum":ne($,y.w.INT32,2,z,!0);break;case"message":$.tag(2,d.TD.LengthDelimited).bytes(z.toBinary(ie));break}$.join()}function X($,ie,de,re){if(re!==void 0){const z=(0,L.E)(de.T,re);de!=null&&de.delimited?$.tag(de.no,d.TD.StartGroup).raw(z.toBinary(ie)).tag(de.no,d.TD.EndGroup):$.tag(de.no,d.TD.LengthDelimited).bytes(z.toBinary(ie))}}function ne($,ie,de,re,z){let[fe,Me,le]=(0,P.T1)(ie,re);(!le||z)&&$.tag(de,fe)[Me](re)}function ae($,ie,de,re){if(!re.length)return;$.tag(de,d.TD.LengthDelimited).fork();let[,z]=(0,P.T1)(ie);for(let fe=0;fe<re.length;fe++)$[z](re[fe]);$.join()}},609:(E,T,b)=>{b.d(T,{V3:()=>y,be:()=>P,ut:()=>Y,zg:()=>L});var d=b(120);const v=Symbol("@bufbuild/protobuf/enum-type");function y(O){const A=O[v];return(0,d.hu)(A,"missing enum type on enum object"),A}function L(O,A,V,B){O[v]=P(A,V.map(J=>({no:J.no,name:J.name,localName:O[J.no]})))}function P(O,A,V){const B=Object.create(null),J=Object.create(null),M=[];for(const w of A){const Z=j(w);M.push(Z),B[w.name]=Z,J[w.no]=Z}return{typeName:O,values:M,findName(w){return B[w]},findNumber(w){return J[w]}}}function Y(O,A,V){const B={};for(const J of A){const M=j(J);B[M.localName]=M.no,B[M.no]=M.localName}return L(B,O,A),B}function j(O){return"localName"in O?O:Object.assign(Object.assign({},O),{localName:O.name})}},501:(E,T,b)=>{b.d(T,{i:()=>d});class d{constructor(y,L){this._fields=y,this._normalizer=L}findJsonName(y){if(!this.jsonNames){const L={};for(const P of this.list())L[P.jsonName]=L[P.name]=P;this.jsonNames=L}return this.jsonNames[y]}find(y){if(!this.numbers){const L={};for(const P of this.list())L[P.no]=P;this.numbers=L}return this.numbers[y]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((y,L)=>y.no-L.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const y=this.members;let L;for(const P of this.list())P.oneof?P.oneof!==L&&(L=P.oneof,y.push(L)):y.push(P)}return this.members}}},432:(E,T,b)=>{b.d(T,{E:()=>y,w:()=>L});var d=b(561),v=b(465);function y(Y,j){return j instanceof d.v||!Y.fieldWrapper?j:Y.fieldWrapper.wrapField(j)}function L(Y){if(Y.fieldKind==="message"&&!Y.repeated&&Y.oneof==null)return P[Y.message.typeName]}const P={"google.protobuf.DoubleValue":v.w.DOUBLE,"google.protobuf.FloatValue":v.w.FLOAT,"google.protobuf.Int64Value":v.w.INT64,"google.protobuf.UInt64Value":v.w.UINT64,"google.protobuf.Int32Value":v.w.INT32,"google.protobuf.UInt32Value":v.w.UINT32,"google.protobuf.BoolValue":v.w.BOOL,"google.protobuf.StringValue":v.w.STRING,"google.protobuf.BytesValue":v.w.BYTES}},215:(E,T,b)=>{b.d(T,{o:()=>y});var d=b(504),v=b(120);class y{constructor(P){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=P,this.localName=(0,d.uA)(P)}addField(P){(0,v.hu)(P.oneof===this,`field ${P.name} not one of ${this.name}`),this.fields.push(P)}findField(P){if(!this._lookup){this._lookup=Object.create(null);for(let Y=0;Y<this.fields.length;Y++)this._lookup[this.fields[Y].localName]=this.fields[Y]}return this._lookup[P]}}},814:(E,T,b)=>{b.d(T,{b:()=>V});var d=b(561),v=b(465),y=b(120),L=b(210),P=b(236);const Y={ignoreUnknownFields:!1},j={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function O(W){return W?Object.assign(Object.assign({},Y),W):Y}function A(W){return W?Object.assign(Object.assign({},j),W):j}function V(W){const C=W(w,Z);return{makeReadOptions:O,makeWriteOptions:A,readMessage(X,ne,ae,$){if(ne==null||Array.isArray(ne)||typeof ne!="object")throw new Error(`cannot decode message ${X.typeName} from JSON: ${this.debug(ne)}`);$=$!=null?$:new X;const ie={};for(const[de,re]of Object.entries(ne)){const z=X.fields.findJsonName(de);if(!z){if(!ae.ignoreUnknownFields)throw new Error(`cannot decode message ${X.typeName} from JSON: key "${de}" is unknown`);continue}let fe=z.localName,Me=$;if(z.oneof){if(re===null&&z.kind=="scalar")continue;const le=ie[z.oneof.localName];if(le)throw new Error(`cannot decode message ${X.typeName} from JSON: multiple keys for oneof "${z.oneof.name}" present: "${le}", "${de}"`);ie[z.oneof.localName]=de,Me=Me[z.oneof.localName]={case:fe},fe="value"}if(z.repeated){if(re===null)continue;if(!Array.isArray(re))throw new Error(`cannot decode field ${X.typeName}.${z.name} from JSON: ${this.debug(re)}`);const le=Me[fe];for(const Ce of re){if(Ce===null)throw new Error(`cannot decode field ${X.typeName}.${z.name} from JSON: ${this.debug(Ce)}`);let Te;switch(z.kind){case"message":Te=z.T.fromJson(Ce,ae);break;case"enum":if(Te=M(z.T,Ce,ae.ignoreUnknownFields),Te===void 0)continue;break;case"scalar":try{Te=J(z.T,Ce,z.L)}catch(Oe){let Ye=`cannot decode field ${X.typeName}.${z.name} from JSON: ${this.debug(Ce)}`;throw Oe instanceof Error&&Oe.message.length>0&&(Ye+=`: ${Oe.message}`),new Error(Ye)}break}le.push(Te)}}else if(z.kind=="map"){if(re===null)continue;if(Array.isArray(re)||typeof re!="object")throw new Error(`cannot decode field ${X.typeName}.${z.name} from JSON: ${this.debug(re)}`);const le=Me[fe];for(const[Ce,Te]of Object.entries(re)){if(Te===null)throw new Error(`cannot decode field ${X.typeName}.${z.name} from JSON: map value null`);let Oe;switch(z.V.kind){case"message":Oe=z.V.T.fromJson(Te,ae);break;case"enum":if(Oe=M(z.V.T,Te,ae.ignoreUnknownFields),Oe===void 0)continue;break;case"scalar":try{Oe=J(z.V.T,Te,v.p.BIGINT)}catch(Ye){let Fe=`cannot decode map value for field ${X.typeName}.${z.name} from JSON: ${this.debug(re)}`;throw Ye instanceof Error&&Ye.message.length>0&&(Fe+=`: ${Ye.message}`),new Error(Fe)}break}try{le[J(z.K,z.K==v.w.BOOL?Ce=="true"?!0:Ce=="false"?!1:Ce:Ce,v.p.BIGINT).toString()]=Oe}catch(Ye){let Fe=`cannot decode map key for field ${X.typeName}.${z.name} from JSON: ${this.debug(re)}`;throw Ye instanceof Error&&Ye.message.length>0&&(Fe+=`: ${Ye.message}`),new Error(Fe)}}}else switch(z.kind){case"message":const le=z.T;if(re===null&&le.typeName!="google.protobuf.Value"){if(z.oneof)throw new Error(`cannot decode field ${X.typeName}.${z.name} from JSON: null is invalid for oneof field "${de}"`);continue}Me[fe]instanceof d.v?Me[fe].fromJson(re,ae):(Me[fe]=le.fromJson(re,ae),le.fieldWrapper&&!z.oneof&&(Me[fe]=le.fieldWrapper.unwrapField(Me[fe])));break;case"enum":const Ce=M(z.T,re,ae.ignoreUnknownFields);Ce!==void 0&&(Me[fe]=Ce);break;case"scalar":try{Me[fe]=J(z.T,re,z.L)}catch(Te){let Oe=`cannot decode field ${X.typeName}.${z.name} from JSON: ${this.debug(re)}`;throw Te instanceof Error&&Te.message.length>0&&(Oe+=`: ${Te.message}`),new Error(Oe)}break}}return $},writeMessage(X,ne){const ae=X.getType(),$={};let ie;try{for(const de of ae.fields.byMember()){let re;if(de.kind=="oneof"){const z=X[de.localName];if(z.value===void 0)continue;if(ie=de.findField(z.case),!ie)throw"oneof case not found: "+z.case;re=C(ie,z.value,ne)}else ie=de,re=C(ie,X[ie.localName],ne);re!==void 0&&($[ne.useProtoFieldName?ie.name:ie.jsonName]=re)}}catch(de){const re=ie?`cannot encode field ${ae.typeName}.${ie.name} to JSON`:`cannot encode message ${ae.typeName} to JSON`,z=de instanceof Error?de.message:String(de);throw new Error(re+(z.length>0?`: ${z}`:""))}return $},readScalar:J,writeScalar:Z,debug:B}}function B(W){if(W===null)return"null";switch(typeof W){case"object":return Array.isArray(W)?"array":"object";case"string":return W.length>100?"string":`"${W.split('"').join('\\"')}"`;default:return String(W)}}function J(W,C,X){switch(W){case v.w.DOUBLE:case v.w.FLOAT:if(C===null)return 0;if(C==="NaN")return Number.NaN;if(C==="Infinity")return Number.POSITIVE_INFINITY;if(C==="-Infinity")return Number.NEGATIVE_INFINITY;if(C===""||typeof C=="string"&&C.trim().length!==C.length||typeof C!="string"&&typeof C!="number")break;const ne=Number(C);if(Number.isNaN(ne)||!Number.isFinite(ne))break;return W==v.w.FLOAT&&(0,y.E_)(ne),ne;case v.w.INT32:case v.w.FIXED32:case v.w.SFIXED32:case v.w.SINT32:case v.w.UINT32:if(C===null)return 0;let ae;if(typeof C=="number"?ae=C:typeof C=="string"&&C.length>0&&C.trim().length===C.length&&(ae=Number(C)),ae===void 0)break;return W==v.w.UINT32?(0,y.fp)(ae):(0,y.ug)(ae),ae;case v.w.INT64:case v.w.SFIXED64:case v.w.SINT64:if(C===null)return L.q.zero;if(typeof C!="number"&&typeof C!="string")break;const $=L.q.parse(C);return X?$.toString():$;case v.w.FIXED64:case v.w.UINT64:if(C===null)return L.q.zero;if(typeof C!="number"&&typeof C!="string")break;const ie=L.q.uParse(C);return X?ie.toString():ie;case v.w.BOOL:if(C===null)return!1;if(typeof C!="boolean")break;return C;case v.w.STRING:if(C===null)return"";if(typeof C!="string")break;try{encodeURIComponent(C)}catch{throw new Error("invalid UTF8")}return C;case v.w.BYTES:if(C===null||C==="")return new Uint8Array(0);if(typeof C!="string")break;return P.W.dec(C)}throw new Error}function M(W,C,X){if(C===null)return 0;switch(typeof C){case"number":if(Number.isInteger(C))return C;break;case"string":const ne=W.findName(C);if(ne||X)return ne==null?void 0:ne.no;break}throw new Error(`cannot decode enum ${W.typeName} from JSON: ${B(C)}`)}function w(W,C,X,ne){var ae;if(C===void 0)return C;if(C===0&&!X)return;if(ne)return C;if(W.typeName=="google.protobuf.NullValue")return null;const $=W.findNumber(C);return(ae=$==null?void 0:$.name)!==null&&ae!==void 0?ae:C}function Z(W,C,X){if(C!==void 0)switch(W){case v.w.INT32:case v.w.SFIXED32:case v.w.SINT32:case v.w.FIXED32:case v.w.UINT32:return(0,y.hu)(typeof C=="number"),C!=0||X?C:void 0;case v.w.FLOAT:case v.w.DOUBLE:return(0,y.hu)(typeof C=="number"),Number.isNaN(C)?"NaN":C===Number.POSITIVE_INFINITY?"Infinity":C===Number.NEGATIVE_INFINITY?"-Infinity":C!==0||X?C:void 0;case v.w.STRING:return(0,y.hu)(typeof C=="string"),C.length>0||X?C:void 0;case v.w.BOOL:return(0,y.hu)(typeof C=="boolean"),C||X?C:void 0;case v.w.UINT64:case v.w.FIXED64:case v.w.INT64:case v.w.SFIXED64:case v.w.SINT64:return(0,y.hu)(typeof C=="bigint"||typeof C=="string"||typeof C=="number"),X||C!=0?C.toString(10):void 0;case v.w.BYTES:return(0,y.hu)(C instanceof Uint8Array),X||C.byteLength>0?P.W.enc(C):void 0}}},504:(E,T,b)=>{b.d(T,{GD:()=>w,Rz:()=>v,Sm:()=>P,ll:()=>M,r1:()=>d,uA:()=>y,x1:()=>L});function d(Z){switch(Z.kind){case"field":return v(Z.name,Z.oneof!==void 0);case"oneof":return y(Z.name);case"enum":case"message":case"service":{const W=Z.file.proto.package,C=W===void 0?0:W.length+1,X=Z.typeName.substring(C).replace(/\./g,"_");return M(w(X))}case"enum_value":{const W=Z.parent.sharedPrefix;if(W===void 0)return Z.name;const C=Z.name.substring(W.length);return M(C)}case"rpc":{let W=Z.name;return W.length==0?W:(W=W[0].toLowerCase()+W.substring(1),M(W))}}}function v(Z,W){const C=j(Z);return W?C:M(J(C))}function y(Z){return v(Z,!1)}const L=j;function P(Z,W){const C=Y(Z)+"_";for(const X of W){if(!X.toLowerCase().startsWith(C))return;const ne=X.substring(C.length);if(ne.length==0||/^\d/.test(ne))return}return C}function Y(Z){return(Z.substring(0,1)+Z.substring(1).replace(/[A-Z]/g,W=>"_"+W)).toLowerCase()}function j(Z){let W=!1;const C=[];for(let X=0;X<Z.length;X++){let ne=Z.charAt(X);switch(ne){case"_":W=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":C.push(ne),W=!1;break;default:W&&(W=!1,ne=ne.toUpperCase()),C.push(ne);break}}return C.join("")}const O=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]),A=new Set(["constructor","toString","toJSON","valueOf"]),V=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),B=Z=>`${Z}$`,J=Z=>V.has(Z)?B(Z):Z,M=Z=>A.has(Z)?B(Z):Z,w=Z=>O.has(Z)?B(Z):Z},493:(E,T,b)=>{b.d(T,{F:()=>L});var d=b(609),v=b(561);function y(P,Y,j,O){var A;const V=(A=O==null?void 0:O.localName)!==null&&A!==void 0?A:Y.substring(Y.lastIndexOf(".")+1),B={[V]:function(J){P.util.initFields(this),P.util.initPartial(J,this)}}[V];return Object.setPrototypeOf(B.prototype,new v.v),Object.assign(B,{runtime:P,typeName:Y,fields:P.util.newFieldList(j),fromBinary(J,M){return new B().fromBinary(J,M)},fromJson(J,M){return new B().fromJson(J,M)},fromJsonString(J,M){return new B().fromJsonString(J,M)},equals(J,M){return P.util.equals(B,J,M)}}),B}function L(P,Y,j,O){return{syntax:P,json:Y,bin:j,util:O,makeMessageType(A,V,B){return y(this,A,V,B)},makeEnum:d.ut,makeEnumType:d.be,getEnumType:d.V3}}},781:(E,T,b)=>{b.d(T,{AA:()=>L,T1:()=>Y,kY:()=>P});var d=b(465),v=b(79),y=b(210);function L(j,O,A){if(O===A)return!0;if(j==d.w.BYTES){if(!(O instanceof Uint8Array)||!(A instanceof Uint8Array)||O.length!==A.length)return!1;for(let V=0;V<O.length;V++)if(O[V]!==A[V])return!1;return!0}switch(j){case d.w.UINT64:case d.w.FIXED64:case d.w.INT64:case d.w.SFIXED64:case d.w.SINT64:return O==A}return!1}function P(j,O){switch(j){case d.w.BOOL:return!1;case d.w.UINT64:case d.w.FIXED64:case d.w.INT64:case d.w.SFIXED64:case d.w.SINT64:return O==0?y.q.zero:"0";case d.w.DOUBLE:case d.w.FLOAT:return 0;case d.w.BYTES:return new Uint8Array(0);case d.w.STRING:return"";default:return 0}}function Y(j,O){const A=O===void 0;let V=v.TD.Varint,B=O===0;switch(j){case d.w.STRING:B=A||!O.length,V=v.TD.LengthDelimited;break;case d.w.BOOL:B=O===!1;break;case d.w.DOUBLE:V=v.TD.Bit64;break;case d.w.FLOAT:V=v.TD.Bit32;break;case d.w.INT64:B=A||O==0;break;case d.w.UINT64:B=A||O==0;break;case d.w.FIXED64:B=A||O==0,V=v.TD.Bit64;break;case d.w.BYTES:B=A||!O.byteLength,V=v.TD.LengthDelimited;break;case d.w.FIXED32:V=v.TD.Bit32;break;case d.w.SFIXED32:V=v.TD.Bit32;break;case d.w.SFIXED64:B=A||O==0,V=v.TD.Bit64;break;case d.w.SINT64:B=A||O==0;break}const J=d.w[j].toLowerCase();return[V,J,A||B]}},433:(E,T,b)=>{b.d(T,{f:()=>P});var d=b(609),v=b(561),y=b(465),L=b(781);function P(){return{setEnumType:d.zg,initPartial(O,A){if(O===void 0)return;const V=A.getType();for(const B of V.fields.byMember()){const J=B.localName,M=A,w=O;if(w[J]!==void 0)switch(B.kind){case"oneof":const Z=w[J].case;if(Z===void 0)continue;const W=B.findField(Z);let C=w[J].value;W&&W.kind=="message"&&!(C instanceof W.T)?C=new W.T(C):W&&W.kind==="scalar"&&W.T===y.w.BYTES&&(C=j(C)),M[J]={case:Z,value:C};break;case"scalar":case"enum":let X=w[J];B.T===y.w.BYTES&&(X=B.repeated?X.map(j):j(X)),M[J]=X;break;case"map":switch(B.V.kind){case"scalar":case"enum":if(B.V.T===y.w.BYTES)for(const[$,ie]of Object.entries(w[J]))M[J][$]=j(ie);else Object.assign(M[J],w[J]);break;case"message":const ae=B.V.T;for(const $ of Object.keys(w[J])){let ie=w[J][$];ae.fieldWrapper||(ie=new ae(ie)),M[J][$]=ie}break}break;case"message":const ne=B.T;if(B.repeated)M[J]=w[J].map(ae=>ae instanceof ne?ae:new ne(ae));else if(w[J]!==void 0){const ae=w[J];ne.fieldWrapper?ne.typeName==="google.protobuf.BytesValue"?M[J]=j(ae):M[J]=ae:M[J]=ae instanceof ne?ae:new ne(ae)}break}}},equals(O,A,V){return A===V?!0:!A||!V?!1:O.fields.byMember().every(B=>{const J=A[B.localName],M=V[B.localName];if(B.repeated){if(J.length!==M.length)return!1;switch(B.kind){case"message":return J.every((w,Z)=>B.T.equals(w,M[Z]));case"scalar":return J.every((w,Z)=>(0,L.AA)(B.T,w,M[Z]));case"enum":return J.every((w,Z)=>(0,L.AA)(y.w.INT32,w,M[Z]))}throw new Error(`repeated cannot contain ${B.kind}`)}switch(B.kind){case"message":return B.T.equals(J,M);case"enum":return(0,L.AA)(y.w.INT32,J,M);case"scalar":return(0,L.AA)(B.T,J,M);case"oneof":if(J.case!==M.case)return!1;const w=B.findField(J.case);if(w===void 0)return!0;switch(w.kind){case"message":return w.T.equals(J.value,M.value);case"enum":return(0,L.AA)(y.w.INT32,J.value,M.value);case"scalar":return(0,L.AA)(w.T,J.value,M.value)}throw new Error(`oneof cannot contain ${w.kind}`);case"map":const Z=Object.keys(J).concat(Object.keys(M));switch(B.V.kind){case"message":const W=B.V.T;return Z.every(X=>W.equals(J[X],M[X]));case"enum":return Z.every(X=>(0,L.AA)(y.w.INT32,J[X],M[X]));case"scalar":const C=B.V.T;return Z.every(X=>(0,L.AA)(C,J[X],M[X]))}break}})},clone(O){const A=O.getType(),V=new A,B=V;for(const J of A.fields.byMember()){const M=O[J.localName];let w;if(J.repeated)w=M.map(Y);else if(J.kind=="map"){w=B[J.localName];for(const[Z,W]of Object.entries(M))w[Z]=Y(W)}else J.kind=="oneof"?w=J.findField(M.case)?{case:M.case,value:Y(M.value)}:{case:void 0}:w=Y(M);B[J.localName]=w}return V}}}function Y(O){if(O===void 0)return O;if(O instanceof v.v)return O.clone();if(O instanceof Uint8Array){const A=new Uint8Array(O.byteLength);return A.set(O),A}return O}function j(O){return O instanceof Uint8Array?O:new Uint8Array(O)}},236:(E,T,b)=>{b.d(T,{W:()=>y});let d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),v=[];for(let L=0;L<d.length;L++)v[d[L].charCodeAt(0)]=L;v["-".charCodeAt(0)]=d.indexOf("+"),v["_".charCodeAt(0)]=d.indexOf("/");const y={dec(L){let P=L.length*3/4;L[L.length-2]=="="?P-=2:L[L.length-1]=="="&&(P-=1);let Y=new Uint8Array(P),j=0,O=0,A,V=0;for(let B=0;B<L.length;B++){if(A=v[L.charCodeAt(B)],A===void 0)switch(L[B]){case"=":O=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(O){case 0:V=A,O=1;break;case 1:Y[j++]=V<<2|(A&48)>>4,V=A,O=2;break;case 2:Y[j++]=(V&15)<<4|(A&60)>>2,V=A,O=3;break;case 3:Y[j++]=(V&3)<<6|A,O=0;break}}if(O==1)throw Error("invalid base64 string.");return Y.subarray(0,j)},enc(L){let P="",Y=0,j,O=0;for(let A=0;A<L.length;A++)switch(j=L[A],Y){case 0:P+=d[j>>2],O=(j&3)<<4,Y=1;break;case 1:P+=d[O|j>>4],O=(j&15)<<2,Y=2;break;case 2:P+=d[O|j>>6],P+=d[j&63],Y=0;break}return Y&&(P+=d[O],P+="=",Y==1&&(P+="=")),P}}},210:(E,T,b)=>{b.d(T,{q:()=>L});var d=b(120),v=b(818);function y(){const P=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof P.getBigInt64=="function"&&typeof P.getBigUint64=="function"&&typeof P.setBigInt64=="function"&&typeof P.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const A=BigInt("-9223372036854775808"),V=BigInt("9223372036854775807"),B=BigInt("0"),J=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(M){const w=typeof M=="bigint"?M:BigInt(M);if(w>V||w<A)throw new Error(`int64 invalid: ${M}`);return w},uParse(M){const w=typeof M=="bigint"?M:BigInt(M);if(w>J||w<B)throw new Error(`uint64 invalid: ${M}`);return w},enc(M){return P.setBigInt64(0,this.parse(M),!0),{lo:P.getInt32(0,!0),hi:P.getInt32(4,!0)}},uEnc(M){return P.setBigInt64(0,this.uParse(M),!0),{lo:P.getInt32(0,!0),hi:P.getInt32(4,!0)}},dec(M,w){return P.setInt32(0,M,!0),P.setInt32(4,w,!0),P.getBigInt64(0,!0)},uDec(M,w){return P.setInt32(0,M,!0),P.setInt32(4,w,!0),P.getBigUint64(0,!0)}}}const j=A=>(0,d.hu)(/^-?[0-9]+$/.test(A),`int64 invalid: ${A}`),O=A=>(0,d.hu)(/^[0-9]+$/.test(A),`uint64 invalid: ${A}`);return{zero:"0",supported:!1,parse(A){return typeof A!="string"&&(A=A.toString()),j(A),A},uParse(A){return typeof A!="string"&&(A=A.toString()),O(A),A},enc(A){return typeof A!="string"&&(A=A.toString()),j(A),(0,v.CZ)(A)},uEnc(A){return typeof A!="string"&&(A=A.toString()),O(A),(0,v.CZ)(A)},dec(A,V){return(0,v.Ak)(A,V)},uDec(A,V){return(0,v.Fd)(A,V)}}}const L=y()},850:(E,T,b)=>{b.d(T,{w:()=>w});var d=b(493),v=b(465),y=b(744);function L(){return Object.assign(Object.assign({},(0,y.gY)()),{writeMessage(W,C,X){const ne=W.getType();for(const ae of ne.fields.byNumber()){let $,ie=ae.repeated,de=ae.localName;if(ae.oneof){const re=W[ae.oneof.localName];if(re.case!==de)continue;$=re.value}else $=W[de];switch(ae.kind){case"scalar":case"enum":let re=ae.kind=="enum"?v.w.INT32:ae.T;if(ie)if(ae.packed)(0,y.Jj)(C,re,ae.no,$);else for(const z of $)(0,y.NN)(C,re,ae.no,z,!0);else $!==void 0&&(0,y.NN)(C,re,ae.no,$,!!ae.oneof||ae.opt);break;case"message":if(ie)for(const z of $)(0,y.oQ)(C,X,ae,z);else(0,y.oQ)(C,X,ae,$);break;case"map":for(const[z,fe]of Object.entries($))(0,y.gQ)(C,X,ae,z,fe);break}}return X.writeUnknownFields&&this.writeUnknownFields(W,C),C}})}var P=b(432),Y=b(120),j=b(814);function O(){return(0,j.b)((W,C)=>function(ne,ae,$){if(ne.kind=="map"){const ie={};switch(ne.V.kind){case"scalar":for(const[re,z]of Object.entries(ae)){const fe=C(ne.V.T,z,!0);(0,Y.hu)(fe!==void 0),ie[re.toString()]=fe}break;case"message":for(const[re,z]of Object.entries(ae))ie[re.toString()]=z.toJson($);break;case"enum":const de=ne.V.T;for(const[re,z]of Object.entries(ae)){(0,Y.hu)(z===void 0||typeof z=="number");const fe=W(de,z,!0,$.enumAsInteger);(0,Y.hu)(fe!==void 0),ie[re.toString()]=fe}break}return $.emitDefaultValues||Object.keys(ie).length>0?ie:void 0}else if(ne.repeated){const ie=[];switch(ne.kind){case"scalar":for(let de=0;de<ae.length;de++)ie.push(C(ne.T,ae[de],!0));break;case"enum":for(let de=0;de<ae.length;de++)ie.push(W(ne.T,ae[de],!0,$.enumAsInteger));break;case"message":for(let de=0;de<ae.length;de++)ie.push((0,P.E)(ne.T,ae[de]).toJson($));break}return $.emitDefaultValues||ie.length>0?ie:void 0}else switch(ne.kind){case"scalar":return C(ne.T,ae,!!ne.oneof||ne.opt||$.emitDefaultValues);case"enum":return W(ne.T,ae,!!ne.oneof||ne.opt||$.emitDefaultValues,$.enumAsInteger);case"message":return ae!==void 0?(0,P.E)(ne.T,ae).toJson($):void 0}})}var A=b(433),V=b(501),B=b(781),J=b(215),M=b(504);const w=(0,d.F)("proto3",O(),L(),Object.assign(Object.assign({},(0,A.f)()),{newFieldList(W){return new V.i(W,Z)},initFields(W){for(const C of W.getType().fields.byMember()){if(C.opt)continue;const X=C.localName,ne=W;if(C.repeated){ne[X]=[];continue}switch(C.kind){case"oneof":ne[X]={case:void 0};break;case"enum":ne[X]=0;break;case"map":ne[X]={};break;case"scalar":ne[X]=(0,B.kY)(C.T,C.L);break}}}}));function Z(W){var C,X,ne,ae;const $=[];let ie;for(const de of typeof W=="function"?W():W){const re=de;if(re.localName=(0,M.Rz)(de.name,de.oneof!==void 0),re.jsonName=(C=de.jsonName)!==null&&C!==void 0?C:(0,M.x1)(de.name),re.repeated=(X=de.repeated)!==null&&X!==void 0?X:!1,de.kind=="scalar"&&(re.L=(ne=de.L)!==null&&ne!==void 0?ne:v.p.BIGINT),de.oneof!==void 0){const z=typeof de.oneof=="string"?de.oneof:de.oneof.name;(!ie||ie.name!=z)&&(ie=new J.o(z)),re.oneof=ie,ie.addField(re)}de.kind=="message"&&(re.delimited=!1),re.packed=(ae=de.packed)!==null&&ae!==void 0?ae:de.kind=="enum"||de.kind=="scalar"&&de.T!=v.w.BYTES&&de.T!=v.w.STRING,$.push(re)}return $}},328:(E,T,b)=>{b.d(T,{t:()=>d,w:()=>v});var d;(function(y){y[y.Unary=0]="Unary",y[y.ServerStreaming=1]="ServerStreaming",y[y.ClientStreaming=2]="ClientStreaming",y[y.BiDiStreaming=3]="BiDiStreaming"})(d||(d={}));var v;(function(y){y[y.NoSideEffects=1]="NoSideEffects",y[y.Idempotent=2]="Idempotent"})(v||(v={}))}},h={};function m(E){var T=h[E];if(T!==void 0)return T.exports;var b=h[E]={exports:{}};return f[E](b,b.exports,m),b.exports}m.d=(E,T)=>{for(var b in T)m.o(T,b)&&!m.o(E,b)&&Object.defineProperty(E,b,{enumerable:!0,get:T[b]})},m.o=(E,T)=>Object.prototype.hasOwnProperty.call(E,T),m.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var p={};return(()=>{m.r(p),m.d(p,{Change:()=>Pr,Client:()=>Ho,ClientEventType:()=>Pn,ClientStatus:()=>yr,Counter:()=>js,Devtools:()=>E,DocEventType:()=>Pe,Document:()=>zo,DocumentSyncResultType:()=>Zr,EventSourceDevPanel:()=>qo,EventSourceSDK:()=>Yo,Primitive:()=>ut,StreamConnectionStatus:()=>Xr,SyncMode:()=>bn,Text:()=>$s,TimeTicket:()=>at,Tree:()=>Vs,converter:()=>Ot,default:()=>yu,setLogLevel:()=>d});var E={};m.r(E);var T;(function(s){s[s.Trivial=0]="Trivial",s[s.Debug=1]="Debug",s[s.Info=2]="Info",s[s.Warn=3]="Warn",s[s.Error=4]="Error",s[s.Fatal=5]="Fatal"})(T||(T={}));let b=T.Info;function d(s){b=s}const v={trivial:(...s)=>{b>T.Trivial||typeof console<"u"&&console.log("YORKIE T:",...s)},debug:(...s)=>{b>T.Debug||typeof console<"u"&&console.log("YORKIE D:",...s)},info:(...s)=>{b>T.Info||typeof console<"u"&&console.log("YORKIE I:",...s)},warn:(...s)=>{b>T.Warn||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...s):console.log("YORKIE W:",...s))},error:(...s)=>{b>T.Error||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...s):console.log("YORKIE E:",...s))},fatal:(s,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${s}`)},isEnabled:s=>b<=s};function y(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,s=>{const e=Math.random()*16|0;return(s==="x"?e:e&3|8).toString(16)})}const L=()=>{};class P{constructor(e){this.finalized=!1,this.observers=[];try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let o;e||v.fatal("missing observer"),this.finalized&&v.fatal("observable is finalized due to previous error"),typeof e=="object"?o=e:o={next:e,error:t,complete:n},o.next===void 0&&(o.next=L),o.error===void 0&&(o.error=L),o.complete===void 0&&(o.complete=L);const l=y(),g=this.unsubscribeOne.bind(this,l);if(this.observers.push({subscriptionID:l,observer:o}),this.finalized)try{this.finalError?o.error(this.finalError):o.complete()}catch(I){v.warn(I)}return g}unsubscribeOne(e){var t;this.observers=(t=this.observers)===null||t===void 0?void 0:t.filter(n=>n.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(n){v.error(n)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function Y(s){const e=new P(s);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}var j=m(328);function O(s,e){const t={};for(const[n,o]of Object.entries(s.methods)){const l=e(Object.assign(Object.assign({},o),{localName:n,service:s}));l!=null&&(t[n]=l)}return t}var A;(function(s){s[s.Canceled=1]="Canceled",s[s.Unknown=2]="Unknown",s[s.InvalidArgument=3]="InvalidArgument",s[s.DeadlineExceeded=4]="DeadlineExceeded",s[s.NotFound=5]="NotFound",s[s.AlreadyExists=6]="AlreadyExists",s[s.PermissionDenied=7]="PermissionDenied",s[s.ResourceExhausted=8]="ResourceExhausted",s[s.FailedPrecondition=9]="FailedPrecondition",s[s.Aborted=10]="Aborted",s[s.OutOfRange=11]="OutOfRange",s[s.Unimplemented=12]="Unimplemented",s[s.Internal=13]="Internal",s[s.Unavailable=14]="Unavailable",s[s.DataLoss=15]="DataLoss",s[s.Unauthenticated=16]="Unauthenticated"})(A||(A={}));var V=m(561);function B(s){const e=A[s];return typeof e!="string"?s.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class J extends Error{constructor(e,t=A.Unknown,n,o,l){super(M(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(n!=null?n:{}),this.details=o!=null?o:[],this.cause=l}static from(e,t=A.Unknown){return e instanceof J?e:e instanceof Error?e.name=="AbortError"?new J(e.message,A.Canceled):new J(e.message,t,void 0,void 0,e):new J(String(e),t,void 0,void 0,e)}findDetails(e){const t="typeName"in e?{findMessage:o=>o===e.typeName?e:void 0}:e,n=[];for(const o of this.details){if(o instanceof V.v){t.findMessage(o.getType().typeName)&&n.push(o);continue}const l=t.findMessage(o.type);if(l)try{n.push(l.fromBinary(o.value))}catch{}}return n}}function M(s,e){return s.length?`[${B(e)}] ${s}`:`[${B(e)}]`}var w=function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(l){t[l]=s[l]&&function(g){return new Promise(function(I,x){g=s[l](g),o(I,x,g.done,g.value)})}}function o(l,g,I,x){Promise.resolve(x).then(function(_){l({value:_,done:I})},g)}},Z=function(s){return this instanceof Z?(this.v=s,this):new Z(s)},W=function(s,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(s,e||[]),o,l=[];return o={},g("next"),g("throw"),g("return"),o[Symbol.asyncIterator]=function(){return this},o;function g(te){n[te]&&(o[te]=function(Ee){return new Promise(function(De,Le){l.push([te,Ee,De,Le])>1||I(te,Ee)})})}function I(te,Ee){try{x(n[te](Ee))}catch(De){ye(l[0][3],De)}}function x(te){te.value instanceof Z?Promise.resolve(te.value.v).then(_,ee):ye(l[0][2],te)}function _(te){I("next",te)}function ee(te){I("throw",te)}function ye(te,Ee){te(Ee),l.shift(),l.length&&I(l[0][0],l[0][1])}},C=function(s){var e,t;return e={},n("next"),n("throw",function(o){throw o}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(o,l){e[o]=s[o]?function(g){return(t=!t)?{value:Z(s[o](g)),done:!1}:l?l(g):g}:l}};function X(s){return W(this,arguments,function*(){yield Z(yield*C(w(s)))})}var ne=function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(l){t[l]=s[l]&&function(g){return new Promise(function(I,x){g=s[l](g),o(I,x,g.done,g.value)})}}function o(l,g,I,x){Promise.resolve(x).then(function(_){l({value:_,done:I})},g)}},ae=function(s){return this instanceof ae?(this.v=s,this):new ae(s)},$=function(s){var e,t;return e={},n("next"),n("throw",function(o){throw o}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(o,l){e[o]=s[o]?function(g){return(t=!t)?{value:ae(s[o](g)),done:!1}:l?l(g):g}:l}},ie=function(s,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(s,e||[]),o,l=[];return o={},g("next"),g("throw"),g("return"),o[Symbol.asyncIterator]=function(){return this},o;function g(te){n[te]&&(o[te]=function(Ee){return new Promise(function(De,Le){l.push([te,Ee,De,Le])>1||I(te,Ee)})})}function I(te,Ee){try{x(n[te](Ee))}catch(De){ye(l[0][3],De)}}function x(te){te.value instanceof ae?Promise.resolve(te.value.v).then(_,ee):ye(l[0][2],te)}function _(te){I("next",te)}function ee(te){I("throw",te)}function ye(te,Ee){te(Ee),l.shift(),l.length&&I(l[0][0],l[0][1])}};function de(s,e){return O(s,t=>{switch(t.kind){case j.t.Unary:return re(e,s,t);case j.t.ServerStreaming:return z(e,s,t);case j.t.ClientStreaming:return fe(e,s,t);case j.t.BiDiStreaming:return Me(e,s,t);default:return null}})}function re(s,e,t){return async function(n,o){var l,g;const I=await s.unary(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,n,o==null?void 0:o.contextValues);return(l=o==null?void 0:o.onHeader)===null||l===void 0||l.call(o,I.header),(g=o==null?void 0:o.onTrailer)===null||g===void 0||g.call(o,I.trailer),I.message}}function z(s,e,t){return function(n,o){return le(s.stream(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,X([n]),o==null?void 0:o.contextValues),o)}}function fe(s,e,t){return async function(n,o){var l,g,I,x,_,ee;const ye=await s.stream(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,n,o==null?void 0:o.contextValues);(_=o==null?void 0:o.onHeader)===null||_===void 0||_.call(o,ye.header);let te;try{for(var Ee=!0,De=ne(ye.message),Le;Le=await De.next(),l=Le.done,!l;Ee=!0)x=Le.value,Ee=!1,te=x}catch(je){g={error:je}}finally{try{!Ee&&!l&&(I=De.return)&&await I.call(De)}finally{if(g)throw g.error}}if(!te)throw new J("protocol error: missing response message",A.Internal);return(ee=o==null?void 0:o.onTrailer)===null||ee===void 0||ee.call(o,ye.trailer),te}}function Me(s,e,t){return function(n,o){return le(s.stream(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,n,o==null?void 0:o.contextValues),o)}}function le(s,e){const t=function(){var n,o;return ie(this,arguments,function*(){const l=yield ae(s);(n=e==null?void 0:e.onHeader)===null||n===void 0||n.call(e,l.header),yield ae(yield*$(ne(l.message))),(o=e==null?void 0:e.onTrailer)===null||o===void 0||o.call(e,l.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function Ce(){return{get(s){return s.id in this?this[s.id]:s.defaultValue},set(s,e){return this[s.id]=e,this},delete(s){return delete this[s.id],this}}}function Te(s){var e;const t=Object.assign({},s);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function Oe(s,e,t,n){const o=e?Ye(s.I,n):Fe(s.I,t);return{parse:(e?Ye(s.O,n):Fe(s.O,t)).parse,serialize:o.serialize}}function Ye(s,e){return{parse(t){try{return s.fromBinary(t,e)}catch(n){const o=n instanceof Error?n.message:String(n);throw new J(`parse binary: ${o}`,A.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(n){const o=n instanceof Error?n.message:String(n);throw new J(`serialize binary: ${o}`,A.Internal)}}}}function Fe(s,e){var t,n;const o=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,l=(n=e==null?void 0:e.textDecoder)!==null&&n!==void 0?n:new TextDecoder,g=Te(e);return{parse(I){try{const x=l.decode(I);return s.fromJsonString(x,g)}catch(x){throw J.from(x,A.InvalidArgument)}},serialize(I){try{const x=I.toJsonString(g);return o.encode(x)}catch(x){throw J.from(x,A.Internal)}}}}function We(...s){const e=new AbortController,t=s.filter(o=>o!==void 0).concat(e.signal);for(const o of t){if(o.aborted){n.apply(o);break}o.addEventListener("abort",n)}function n(){e.signal.aborted||e.abort(tt(this));for(const o of t)o.removeEventListener("abort",n)}return e}function ct(s){const e=new AbortController,t=()=>{e.abort(new J("the operation timed out",A.DeadlineExceeded))};let n;return s!==void 0&&(s<=0?t():n=setTimeout(t,s)),{signal:e.signal,cleanup:()=>clearTimeout(n)}}function tt(s){if(!s.aborted)return;if(s.reason!==void 0)return s.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function ft(s,e){return e instanceof V.v?e:new s(e)}function kt(s,e){function t(n){return n.done===!0?n:{done:n.done,value:ft(s,n.value)}}return{[Symbol.asyncIterator](){const n=e[Symbol.asyncIterator](),o={next:()=>n.next().then(t)};return n.throw!==void 0&&(o.throw=l=>n.throw(l).then(t)),n.return!==void 0&&(o.return=l=>n.return(l).then(t)),o}}}function gt(s){const e=K(s.next,s.interceptors),[t,n,o]=D(s),l=Object.assign(Object.assign({},s.req),{message:ft(s.req.method.I,s.req.message),signal:t});return e(l).then(g=>(o(),g),n)}function S(s){const e=K(s.next,s.interceptors),[t,n,o]=D(s),l=Object.assign(Object.assign({},s.req),{message:kt(s.req.method.I,s.req.message),signal:t});let g=!1;return t.addEventListener("abort",function(){var I,x;const _=s.req.message[Symbol.asyncIterator]();g||(I=_.throw)===null||I===void 0||I.call(_,this.reason).catch(()=>{}),(x=_.return)===null||x===void 0||x.call(_).catch(()=>{})}),e(l).then(I=>Object.assign(Object.assign({},I),{message:{[Symbol.asyncIterator](){const x=I.message[Symbol.asyncIterator]();return{next(){return x.next().then(_=>(_.done==!0&&(g=!0,o()),_),n)}}}}}),n)}function D(s){const{signal:e,cleanup:t}=ct(s.timeoutMs),n=We(s.signal,e);return[n.signal,function(l){const g=J.from(e.aborted?tt(e):l);return n.abort(g),t(),Promise.reject(g)},function(){t(),n.abort()}]}function K(s,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((n,o)=>o(n),s))!==null&&t!==void 0?t:s}function G(s,e,t){const n=typeof e=="string"?e:e.typeName,o=typeof t=="string"?t:t.name;return s.toString().replace(/\/?$/,`/${n}/${o}`)}function H(s){let e,t=new Uint8Array(0);function n(o){const l=new Uint8Array(t.length+o.length);l.set(t),l.set(o,t.length),t=l}return new ReadableStream({start(){e=s.getReader()},async pull(o){let l;for(;;){if(l===void 0&&t.byteLength>=5){let x=0;for(let _=1;_<5;_++)x=(x<<8)+t[_];l={flags:t[0],length:x}}if(l!==void 0&&t.byteLength>=l.length+5)break;const I=await e.read();if(I.done)break;n(I.value)}if(l===void 0){if(t.byteLength==0){o.close();return}o.error(new J("premature end of stream",A.DataLoss));return}const g=t.subarray(5,5+l.length);t=t.subarray(5+l.length),o.enqueue({flags:l.flags,data:g})}})}function ue(s,e){const t=new Uint8Array(e.length+5);t.set(e,5);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setUint8(0,s),n.setUint32(1,e.length),t}const pe="Content-Type",oe="Grpc-Timeout",U="Grpc-Status",se="Grpc-Message",we="Grpc-Status-Details-Bin",ve="User-Agent",be="X-User-Agent",Ae="X-Grpc-Web",xe="application/grpc-web+proto",ze="application/grpc-web+json";function Re(s,e,t,n){const o=new Headers(t!=null?t:{});return o.set(pe,s?xe:ze),o.set(Ae,"1"),o.set(be,"connect-es/1.2.0"),n&&o.set(ve,"connect-es/1.2.0"),e!==void 0&&o.set(oe,`${e}m`),o}function Ze(s){switch(s){case 400:return A.Internal;case 401:return A.Unauthenticated;case 403:return A.PermissionDenied;case 404:return A.Unimplemented;case 429:return A.Unavailable;case 502:return A.Unavailable;case 503:return A.Unavailable;case 504:return A.Unavailable;default:return A.Unknown}}var rt=m(850),Dt=m(733);class pt extends V.v{constructor(e){super(),this.code=0,this.message="",this.details=[],rt.w.util.initPartial(e,this)}static fromBinary(e,t){return new pt().fromBinary(e,t)}static fromJson(e,t){return new pt().fromJson(e,t)}static fromJsonString(e,t){return new pt().fromJsonString(e,t)}static equals(e,t){return rt.w.util.equals(pt,e,t)}}pt.runtime=rt.w,pt.typeName="google.rpc.Status",pt.fields=rt.w.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Dt.I,repeated:!0}]);var Rt=m(236);function on(s,e,t){try{const n=Rt.W.dec(s);return e?e.fromBinary(n,t):n}catch(n){throw J.from(n,A.DataLoss)}}const Ge="0";function dt(s){var e;const t=s.get(we);if(t!=null){const o=on(t,pt);if(o.code==0)return;const l=new J(o.message,o.code,s);return l.details=o.details.map(g=>({type:g.typeUrl.substring(g.typeUrl.lastIndexOf("/")+1),value:g.value})),l}const n=s.get(U);if(n!=null){if(n===Ge)return;const o=parseInt(n,10);return o in A?new J(decodeURIComponent((e=s.get(se))!==null&&e!==void 0?e:""),o,s):new J(`invalid grpc-status: ${n}`,A.Internal,s)}}function nt(s,e){var t;if(s>=200&&s<300){const n=dt(e);if(n)throw n;return{foundStatus:e.has(U)}}throw new J(decodeURIComponent((t=e.get(se))!==null&&t!==void 0?t:`HTTP ${s}`),Ze(s),e)}const Gn=128;function lr(s){const e=new Headers,t=new TextDecoder().decode(s).split(`\r
`);for(const n of t){if(n==="")continue;const o=n.indexOf(":");if(o>0){const l=n.substring(0,o).trim(),g=n.substring(o+1).trim();e.append(l,g)}}return e}function $n(s,e){const t=dt(s);if(t)throw e.forEach((n,o)=>{t.metadata.append(o,n)}),t}function Nr(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}var gn=function(s){return this instanceof gn?(this.v=s,this):new gn(s)},Sr=function(s,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(s,e||[]),o,l=[];return o={},g("next"),g("throw"),g("return"),o[Symbol.asyncIterator]=function(){return this},o;function g(te){n[te]&&(o[te]=function(Ee){return new Promise(function(De,Le){l.push([te,Ee,De,Le])>1||I(te,Ee)})})}function I(te,Ee){try{x(n[te](Ee))}catch(De){ye(l[0][3],De)}}function x(te){te.value instanceof gn?Promise.resolve(te.value.v).then(_,ee):ye(l[0][2],te)}function _(te){I("next",te)}function ee(te){I("throw",te)}function ye(te,Ee){te(Ee),l.shift(),l.length&&I(l[0][0],l[0][1])}};function En(s){var e;Nr();const t=(e=s.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(n,o,l,g,I,x,_){var ee;const{serialize:ye,parse:te}=Oe(o,t,s.jsonOptions,s.binaryOptions);return g=g===void 0?s.defaultTimeoutMs:g<=0?void 0:g,await gt({interceptors:s.interceptors,signal:l,timeoutMs:g,req:{stream:!1,service:n,method:o,url:G(s.baseUrl,n,o),init:{method:"POST",credentials:(ee=s.credentials)!==null&&ee!==void 0?ee:"same-origin",redirect:"error",mode:"cors"},header:Re(t,g,I,!1),contextValues:_!=null?_:Ce(),message:x},next:async Ee=>{var De;const je=await((De=s.fetch)!==null&&De!==void 0?De:globalThis.fetch)(Ee.url,Object.assign(Object.assign({},Ee.init),{headers:Ee.header,signal:Ee.signal,body:ue(0,ye(Ee.message))}));if(nt(je.status,je.headers),!je.body)throw"missing response body";const Ct=H(je.body).getReader();let Ve,Et;for(;;){const Tt=await Ct.read();if(Tt.done)break;const{flags:Pt,data:_r}=Tt.value;if(Pt===Gn){if(Ve!==void 0)throw"extra trailer";Ve=lr(_r);continue}if(Et!==void 0)throw"extra message";Et=te(_r)}if(Ve===void 0)throw"missing trailer";if($n(Ve,je.headers),Et===void 0)throw"missing message";return{stream:!1,header:je.headers,message:Et,trailer:Ve}}})},async stream(n,o,l,g,I,x,_){var ee;const{serialize:ye,parse:te}=Oe(o,t,s.jsonOptions,s.binaryOptions);function Ee(Le,je,Ct,Ve){return Sr(this,arguments,function*(){const Tt=H(Le).getReader();if(je){if(!(yield gn(Tt.read())).done)throw"extra data for trailers-only";return yield gn(void 0)}let Pt=!1;for(;;){const _r=yield gn(Tt.read());if(_r.done)break;const{flags:Qr,data:Ts}=_r.value;if((Qr&Gn)===Gn){if(Pt)throw"extra trailer";Pt=!0;const Xo=lr(Ts);$n(Xo,Ve),Xo.forEach((Tu,vu)=>Ct.set(vu,Tu));continue}if(Pt)throw"extra message";yield yield gn(te(Ts))}if(!Pt)throw"missing trailer"})}async function De(Le){if(o.kind!=j.t.ServerStreaming)throw"The fetch API does not support streaming request bodies";const je=await Le[Symbol.asyncIterator]().next();if(je.done==!0)throw"missing request message";return ue(0,ye(je.value))}return g=g===void 0?s.defaultTimeoutMs:g<=0?void 0:g,S({interceptors:s.interceptors,signal:l,timeoutMs:g,req:{stream:!0,service:n,method:o,url:G(s.baseUrl,n,o),init:{method:"POST",credentials:(ee=s.credentials)!==null&&ee!==void 0?ee:"same-origin",redirect:"error",mode:"cors"},header:Re(t,g,I,!1),contextValues:_!=null?_:Ce(),message:x},next:async Le=>{var je;const Ve=await((je=s.fetch)!==null&&je!==void 0?je:globalThis.fetch)(Le.url,Object.assign(Object.assign({},Le.init),{headers:Le.header,signal:Le.signal,body:await De(Le.message)})),{foundStatus:Et}=nt(Ve.status,Ve.headers);if(!Ve.body)throw"missing response body";const Tt=new Headers;return Object.assign(Object.assign({},Le),{header:Ve.headers,trailer:Tt,message:Ee(Ve.body,Et,Tt,Ve.headers)})}})}}}var In=m(295),Q=m(646);/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var yt=null;try{yt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function $e(s,e,t){this.low=s|0,this.high=e|0,this.unsigned=!!t}$e.prototype.__isLong__,Object.defineProperty($e.prototype,"__isLong__",{value:!0});function st(s){return(s&&s.__isLong__)===!0}function fr(s){var e=Math.clz32(s&-s);return s?31-e:e}$e.isLong=st;var Ds={},_s={};function Hn(s,e){var t,n,o;return e?(s>>>=0,(o=0<=s&&s<256)&&(n=_s[s],n)?n:(t=He(s,0,!0),o&&(_s[s]=t),t)):(s|=0,(o=-128<=s&&s<128)&&(n=Ds[s],n)?n:(t=He(s,s<0?-1:0,!1),o&&(Ds[s]=t),t))}$e.fromInt=Hn;function an(s,e){if(isNaN(s))return e?Nn:yn;if(e){if(s<0)return Nn;if(s>=ds)return Ls}else{if(s<=-Cs)return jt;if(s+1>=Cs)return Qn}return s<0?an(-s,e).neg():He(s%Xn|0,s/Xn|0,e)}$e.fromNumber=an;function He(s,e,t){return new $e(s,e,t)}$e.fromBits=He;var $r=Math.pow;function jr(s,e,t){if(s.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,s==="NaN"||s==="Infinity"||s==="+Infinity"||s==="-Infinity")return e?Nn:yn;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=s.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return jr(s.substring(1),e,t).neg();for(var o=an($r(t,8)),l=yn,g=0;g<s.length;g+=8){var I=Math.min(8,s.length-g),x=parseInt(s.substring(g,g+I),t);if(I<8){var _=an($r(t,I));l=l.mul(_).add(an(x))}else l=l.mul(o),l=l.add(an(x))}return l.unsigned=e,l}$e.fromString=jr;function pn(s,e){return typeof s=="number"?an(s,e):typeof s=="string"?jr(s,e):He(s.low,s.high,typeof e=="boolean"?e:s.unsigned)}$e.fromValue=pn;var Vr=1<<16,fs=1<<24,Xn=Vr*Vr,ds=Xn*Xn,Cs=ds/2,xs=Hn(fs),yn=Hn(0);$e.ZERO=yn;var Nn=Hn(0,!0);$e.UZERO=Nn;var Zn=Hn(1);$e.ONE=Zn;var Rs=Hn(1,!0);$e.UONE=Rs;var dr=Hn(-1);$e.NEG_ONE=dr;var Qn=He(-1,2147483647,!1);$e.MAX_VALUE=Qn;var Ls=He(-1,-1,!0);$e.MAX_UNSIGNED_VALUE=Ls;var jt=He(0,-2147483648,!1);$e.MIN_VALUE=jt;var he=$e.prototype;he.toInt=function(){return this.unsigned?this.low>>>0:this.low},he.toNumber=function(){return this.unsigned?(this.high>>>0)*Xn+(this.low>>>0):this.high*Xn+(this.low>>>0)},he.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(jt)){var t=an(e),n=this.div(t),o=n.mul(t).sub(this);return n.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var l=an($r(e,6),this.unsigned),g=this,I="";;){var x=g.div(l),_=g.sub(x.mul(l)).toInt()>>>0,ee=_.toString(e);if(g=x,g.isZero())return ee+I;for(;ee.length<6;)ee="0"+ee;I=""+ee+I}},he.getHighBits=function(){return this.high},he.getHighBitsUnsigned=function(){return this.high>>>0},he.getLowBits=function(){return this.low},he.getLowBitsUnsigned=function(){return this.low>>>0},he.getNumBitsAbs=function(){if(this.isNegative())return this.eq(jt)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},he.isZero=function(){return this.high===0&&this.low===0},he.eqz=he.isZero,he.isNegative=function(){return!this.unsigned&&this.high<0},he.isPositive=function(){return this.unsigned||this.high>=0},he.isOdd=function(){return(this.low&1)===1},he.isEven=function(){return(this.low&1)===0},he.equals=function(e){return st(e)||(e=pn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},he.eq=he.equals,he.notEquals=function(e){return!this.eq(e)},he.neq=he.notEquals,he.ne=he.notEquals,he.lessThan=function(e){return this.comp(e)<0},he.lt=he.lessThan,he.lessThanOrEqual=function(e){return this.comp(e)<=0},he.lte=he.lessThanOrEqual,he.le=he.lessThanOrEqual,he.greaterThan=function(e){return this.comp(e)>0},he.gt=he.greaterThan,he.greaterThanOrEqual=function(e){return this.comp(e)>=0},he.gte=he.greaterThanOrEqual,he.ge=he.greaterThanOrEqual,he.compare=function(e){if(st(e)||(e=pn(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},he.comp=he.compare,he.negate=function(){return!this.unsigned&&this.eq(jt)?jt:this.not().add(Zn)},he.neg=he.negate,he.add=function(e){st(e)||(e=pn(e));var t=this.high>>>16,n=this.high&65535,o=this.low>>>16,l=this.low&65535,g=e.high>>>16,I=e.high&65535,x=e.low>>>16,_=e.low&65535,ee=0,ye=0,te=0,Ee=0;return Ee+=l+_,te+=Ee>>>16,Ee&=65535,te+=o+x,ye+=te>>>16,te&=65535,ye+=n+I,ee+=ye>>>16,ye&=65535,ee+=t+g,ee&=65535,He(te<<16|Ee,ee<<16|ye,this.unsigned)},he.subtract=function(e){return st(e)||(e=pn(e)),this.add(e.neg())},he.sub=he.subtract,he.multiply=function(e){if(this.isZero())return this;if(st(e)||(e=pn(e)),yt){var t=yt.mul(this.low,this.high,e.low,e.high);return He(t,yt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Nn:yn;if(this.eq(jt))return e.isOdd()?jt:yn;if(e.eq(jt))return this.isOdd()?jt:yn;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(xs)&&e.lt(xs))return an(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=this.high&65535,l=this.low>>>16,g=this.low&65535,I=e.high>>>16,x=e.high&65535,_=e.low>>>16,ee=e.low&65535,ye=0,te=0,Ee=0,De=0;return De+=g*ee,Ee+=De>>>16,De&=65535,Ee+=l*ee,te+=Ee>>>16,Ee&=65535,Ee+=g*_,te+=Ee>>>16,Ee&=65535,te+=o*ee,ye+=te>>>16,te&=65535,te+=l*_,ye+=te>>>16,te&=65535,te+=g*x,ye+=te>>>16,te&=65535,ye+=n*ee+o*_+l*x+g*I,ye&=65535,He(Ee<<16|De,ye<<16|te,this.unsigned)},he.mul=he.multiply,he.divide=function(e){if(st(e)||(e=pn(e)),e.isZero())throw Error("division by zero");if(yt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?yt.div_u:yt.div_s)(this.low,this.high,e.low,e.high);return He(t,yt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Nn:yn;var n,o,l;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Nn;if(e.gt(this.shru(1)))return Rs;l=Nn}else{if(this.eq(jt)){if(e.eq(Zn)||e.eq(dr))return jt;if(e.eq(jt))return Zn;var g=this.shr(1);return n=g.div(e).shl(1),n.eq(yn)?e.isNegative()?Zn:dr:(o=this.sub(e.mul(n)),l=n.add(o.div(e)),l)}else if(e.eq(jt))return this.unsigned?Nn:yn;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();l=yn}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var I=Math.ceil(Math.log(n)/Math.LN2),x=I<=48?1:$r(2,I-48),_=an(n),ee=_.mul(e);ee.isNegative()||ee.gt(o);)n-=x,_=an(n,this.unsigned),ee=_.mul(e);_.isZero()&&(_=Zn),l=l.add(_),o=o.sub(ee)}return l},he.div=he.divide,he.modulo=function(e){if(st(e)||(e=pn(e)),yt){var t=(this.unsigned?yt.rem_u:yt.rem_s)(this.low,this.high,e.low,e.high);return He(t,yt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},he.mod=he.modulo,he.rem=he.modulo,he.not=function(){return He(~this.low,~this.high,this.unsigned)},he.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},he.clz=he.countLeadingZeros,he.countTrailingZeros=function(){return this.low?fr(this.low):fr(this.high)+32},he.ctz=he.countTrailingZeros,he.and=function(e){return st(e)||(e=pn(e)),He(this.low&e.low,this.high&e.high,this.unsigned)},he.or=function(e){return st(e)||(e=pn(e)),He(this.low|e.low,this.high|e.high,this.unsigned)},he.xor=function(e){return st(e)||(e=pn(e)),He(this.low^e.low,this.high^e.high,this.unsigned)},he.shiftLeft=function(e){return st(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?He(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):He(0,this.low<<e-32,this.unsigned)},he.shl=he.shiftLeft,he.shiftRight=function(e){return st(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?He(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):He(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},he.shr=he.shiftRight,he.shiftRightUnsigned=function(e){return st(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?He(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?He(this.high,0,this.unsigned):He(this.high>>>e-32,0,this.unsigned)},he.shru=he.shiftRightUnsigned,he.shr_u=he.shiftRightUnsigned,he.rotateLeft=function(e){var t;return st(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?He(this.high,this.low,this.unsigned):e<32?(t=32-e,He(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,He(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},he.rotl=he.rotateLeft,he.rotateRight=function(e){var t;return st(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?He(this.high,this.low,this.unsigned):e<32?(t=32-e,He(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,He(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},he.rotr=he.rotateRight,he.toSigned=function(){return this.unsigned?He(this.low,this.high,!1):this},he.toUnsigned=function(){return this.unsigned?this:He(this.low,this.high,!0)},he.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},he.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},he.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},$e.fromBytes=function(e,t,n){return n?$e.fromBytesLE(e,t):$e.fromBytesBE(e,t)},$e.fromBytesLE=function(e,t){return new $e(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},$e.fromBytesBE=function(e,t){return new $e(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const It=$e;var Ke;(function(s){s.Ok="ok",s.ClientNotActive="client-not-active",s.Unimplemented="unimplemented",s.Unsupported="unsupported",s.DocumentNotAttached="document-not-attached",s.DocumentNotDetached="document-not-detached",s.DocumentRemoved="document-removed",s.InvalidObjectKey="invalid-object-key",s.InvalidArgument="invalid-argument"})(Ke||(Ke={}));class Xe extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="YorkieError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function Nt(s){if(s instanceof Map){const e=Array.from(s);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(s))}const Lt=s=>s?Object.entries(s).length===0:!0,hr=s=>{const e={};for(const[t,n]of Object.entries(s))e[t]=JSON.stringify(n);return e},er=s=>{const e={};for(const[t,n]of Object.entries(s))e[t]=JSON.parse(n);return e};var Tn;(function(s){s.Put="put",s.Clear="clear"})(Tn||(Tn={}));class Vt{constructor(e,t){this.context=e,this.presence=t}set(e,t){for(const n of Object.keys(e))this.presence[n]=e[n];this.context.setPresenceChange({type:Tn.Put,presence:Nt(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:Tn.Clear})}}const Kt="000000000000000000000000",hs="FFFFFFFFFFFFFFFFFFFFFFFF";class at{constructor(e,t,n){this.lamport=e,this.delimiter=t,this.actorID=n}static of(e,t,n){return new at(e,t,n)}static fromStruct(e){return at.of(It.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new at(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const cn=0,tr=4294967295,un=It.MAX_VALUE,ht=new at(It.fromNumber(0),cn,Kt);new at(It.fromNumber(1),cn+1,Kt);const qt=new at(un,tr,hs);function _n(s){return s.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Jt{constructor(e){this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class St extends Jt{constructor(e){super(e)}}class Zt extends Jt{}class Yt{constructor(e,t){this.strKey=e,this.value=t}static of(e,t){return new Yt(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class Bt{constructor(){this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Bt}set(e,t,n){let o;const l=this.nodeMapByKey.get(e);l!=null&&!l.isRemoved()&&l.remove(n)&&(o=l.getValue());const g=Yt.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),g),(l==null||n.after(l.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,g),t.setMovedAt(n)),o}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||v.fatal(`fail to find ${e.toIDString()}`);const n=this.nodeMapByCreatedAt.get(e.toIDString());return n.remove(t),n.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){v.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const n=this.nodeMapByKey.get(t.getStrKey());t===n&&this.nodeMapByKey.delete(n.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const n=this.nodeMapByKey.get(e);if(n!=null&&!!n.remove(t))return n.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class it extends St{constructor(e,t){super(e),this.memberNodes=t}static create(e,t){if(!t)return new it(e,Bt.create());const n=Bt.create();for(const[o,l]of Object.entries(t))n.set(o,l.deepcopy(),l.getCreatedAt());return new it(e,n)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,n){return this.memberNodes.set(e,t,n)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,n]of this)e.push(`"${_n(t)}":${n.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,n]of this){const{createdAt:o,value:l,type:g}=n.toJSForTest();e[t]={key:t,createdAt:o,value:l,type:g}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[o]of this)t.push(o);const n=[];for(const o of t.sort()){const l=(e=this.memberNodes.get(o))===null||e===void 0?void 0:e.getValue();n.push(`"${_n(o)}":${l.toSortedJSON()}`)}return`{${n.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=it.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const n=t.getValue();if(e(n,this))return;n instanceof St&&n.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var Je;(function(s){s.Local="local",s.Remote="remote",s.UndoRedo="undoredo"})(Je||(Je={}));class mt{constructor(e,t){this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Qt{constructor(e){this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Ar{constructor(e){this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&v.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,n=e,o;for(;n;)(!o||o===n.getRight())&&(t+=n.getLength()+(n.hasLeft()?n.getLeftWeight():0)),o=n,n=n.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Ar(e.getLeft());t.root&&t.root.setParent();const n=new Ar(e.getRight());if(n.root&&n.root.setParent(),t.root){const o=t.getRightmost();t.splayNode(o),t.root.setRight(n.root),n.root&&n.root.setParent(t.root),this.root=t.root}else this.root=n.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const n of t)n.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var ke;(function(s){s[s.Null=0]="Null",s[s.Boolean=1]="Boolean",s[s.Integer=2]="Integer",s[s.Long=3]="Long",s[s.Double=4]="Double",s[s.String=5]="String",s[s.Bytes=6]="Bytes",s[s.Date=7]="Date"})(ke||(ke={}));class ut extends Jt{constructor(e,t){super(t),this.valueType=ut.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new ut(e,t)}static valueFromBytes(e,t){switch(e){case ke.Null:return null;case ke.Boolean:return!!t[0];case ke.Integer:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case ke.Double:{const n=new DataView(t.buffer);return t.forEach(function(o,l){n.setUint8(l,o)}),n.getFloat64(0,!0)}case ke.String:return new TextDecoder("utf-8").decode(t);case ke.Long:return It.fromBytesLE(Array.from(t));case ke.Bytes:return t;case ke.Date:return new Date(It.fromBytesLE(Array.from(t),!0).toNumber());default:throw new Xe(Ke.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===ke.String?`"${_n(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=ut.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return ke.Null;case"boolean":return ke.Boolean;case"number":return this.isInteger(e)?ke.Integer:ke.Double;case"string":return ke.String;case"object":if(e===null)return ke.Null;if(e instanceof It)return ke.Long;if(e instanceof Uint8Array)return ke.Bytes;if(e instanceof Date)return ke.Date}}static isSupport(e){return ut.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===ke.Integer||e===ke.Long||e===ke.Double}getValue(){return this.value}toBytes(){switch(this.valueType){case ke.Null:return new Uint8Array;case ke.Boolean:return this.value?new Uint8Array([1]):new Uint8Array([0]);case ke.Integer:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case ke.Double:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case ke.String:return new TextEncoder().encode(this.value);case ke.Long:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case ke.Bytes:return this.value;case ke.Date:{const e=this.value,t=It.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new Xe(Ke.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class Kr extends Qt{constructor(e){super(e),this.value=e}static createAfter(e,t){const n=new Kr(t),o=e.next;return e.next=n,n.prev=e,n.next=o,o&&(o.prev=n),n}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class kr{constructor(){const e=ut.of(0,ht);e.setRemovedAt(ht),this.dummyHead=new Kr(e),this.last=this.dummyHead,this.nodeMapByIndex=new Ar,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new kr}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let n=this.nodeMapByCreatedAt.get(e.toIDString());for(n||v.fatal(`cant find the given node: ${e.toIDString()}`);n.getNext()&&n.getNext().getPositionedAt().after(t);)n=n.getNext();return n}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,n=t.getCreatedAt()){const o=this.findNextBeforeExecutedAt(e,n),l=Kr.createAfter(o,t);o===this.last&&(this.last=l),this.nodeMapByIndex.insertAfter(o,l),this.nodeMapByCreatedAt.set(l.getCreatedAt().toIDString(),l)}moveAfter(e,t,n){const o=this.nodeMapByCreatedAt.get(e.toIDString());o||v.fatal(`cant find the given node: ${e.toIDString()}`);const l=this.nodeMapByCreatedAt.get(t.toIDString());l||v.fatal(`cant find the given node: ${t.toIDString()}`),o!==l&&(!l.getValue().getMovedAt()||n.after(l.getValue().getMovedAt()))&&(this.release(l),this.insertAfter(o.getCreatedAt(),l.getValue(),n),l.getValue().setMovedAt(n))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||v.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,n]=this.nodeMapByIndex.find(e);let o=t;if(e===0&&t===this.dummyHead||n>0)do o&&(o=o.getNext());while(o&&o.isRemoved());return o}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const n=this.nodeMapByCreatedAt.get(e.toIDString()),o=n.isRemoved();return n.remove(t)&&!o&&this.nodeMapByIndex.splayNode(n),n.getValue()}deleteByIndex(e,t){const n=this.getByIndex(e);if(!!n)return n.remove(t)&&this.nodeMapByIndex.splayNode(n),n.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const n=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${n}}`):e.push(`[${n}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class en extends St{constructor(e,t){super(e),this.elements=t}static create(e,t){if(!t)return new en(e,kr.create());const n=kr.create();for(const o of t)n.insertAfter(n.getLastCreatedAt(),o.deepcopy());return new en(e,n)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,n){this.elements.moveAfter(e,t,n)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const n=t.getValue();if(e(n,this))return;n instanceof St&&n.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{createdAt:n,value:o,type:l}=this.get(t).toJSForTest();e[t]={key:String(t),createdAt:n,value:o,type:l}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=en.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class jn extends mt{constructor(e,t,n){super(e,n),this.createdAt=t}static create(e,t,n){return new jn(e,t,n)}execute(e,t){var n;const o=e.findByCreatedAt(this.getParentCreatedAt());if(o||v.fatal(`fail to find ${this.getParentCreatedAt()}`),o instanceof St||v.fatal(`only object and array can execute remove: ${o}`),t===Je.UndoRedo){let _=o.getByID(this.createdAt);for(;_;){if(_.getRemovedAt())return;_=(n=e.findElementPairByCreatedAt(_.getCreatedAt()))===null||n===void 0?void 0:n.parent}}const l=o.subPathOf(this.createdAt),g=this.toReverseOperation(o),I=o.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(I),{opInfos:o instanceof en?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(l)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:l}],reverseOp:g}}toReverseOperation(e){if(e instanceof it){const t=e.subPathOf(this.createdAt);if(t!==void 0){const n=e.get(t);if(n!==void 0)return nr.create(t,n.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class nr extends mt{constructor(e,t,n,o){super(n,o),this.key=e,this.value=t}static create(e,t,n,o){return new nr(e,t,n,o)}execute(e,t){var n;const o=e.findByCreatedAt(this.getParentCreatedAt());if(o||v.fatal(`fail to find ${this.getParentCreatedAt()}`),o instanceof it||v.fatal("fail to execute, only object can execute set"),t===Je.UndoRedo){let _=o;for(;_;){if(_.getRemovedAt())return;_=(n=e.findElementPairByCreatedAt(_.getCreatedAt()))===null||n===void 0?void 0:n.parent}}const l=o.get(this.key),g=this.toReverseOperation(l),I=this.value.deepcopy(),x=o.set(this.key,I,this.getExecutedAt());return t===Je.UndoRedo&&e.findByCreatedAt(I.getCreatedAt())&&e.deregisterElement(I),e.registerElement(I,o),x&&e.registerRemovedElement(x),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:g}}toReverseOperation(e){let t=jn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=nr.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class mr extends mt{constructor(e,t,n,o){super(e,o),this.prevCreatedAt=t,this.value=n}static create(e,t,n,o){return new mr(e,t,n,o)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof en||v.fatal("fail to execute, only array can execute add");const n=t,o=this.value.deepcopy();return n.insertAfter(this.prevCreatedAt,o),e.registerElement(o,n),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(n.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class vn extends mt{constructor(e,t,n,o){super(e,o),this.prevCreatedAt=t,this.createdAt=n}static create(e,t,n,o){return new vn(e,t,n,o)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof en||v.fatal("fail to execute, only array can execute move");const n=t,o=Number(n.subPathOf(this.createdAt));n.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const l=Number(n.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:l,previousIndex:o}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Ut{constructor(e,t,n,o){this.key=e,this.value=t,this.updatedAt=n,this._isRemoved=o}static of(e,t,n,o){return new Ut(e,t,n,o)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}}class _t{constructor(){this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new _t}set(e,t,n){const o=this.nodeMapByKey.get(e);if(o===void 0||n.after(o.getUpdatedAt())){o!==void 0&&!o.isRemoved()&&(this.numberOfRemovedElement-=1);const l=Ut.of(e,t,n,!1);this.nodeMapByKey.set(e,l)}}remove(e,t){const n=this.nodeMapByKey.get(e);if(n===void 0||t.after(n.getUpdatedAt())){if(n===void 0){this.numberOfRemovedElement+=1;const g=Ut.of(e,"",t,!0);return this.nodeMapByKey.set(e,g),""}const o=n.isRemoved();o||(this.numberOfRemovedElement+=1);const l=Ut.of(e,n.getValue(),t,!0);return this.nodeMapByKey.set(e,l),o?"":n.getValue()}return""}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new _t;for(const[,t]of this.nodeMapByKey)e.set(t.getKey(),t.getValue(),t.getUpdatedAt());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,n]of this.nodeMapByKey)n.isRemoved()||e.push(`"${_n(t)}":"${_n(n.getValue())}"`);return`{${e.join(",")}}`}toXML(){return this.size()?` ${[...this.nodeMapByKey].filter(([,t])=>t instanceof Ut&&!t.isRemoved()).sort((t,n)=>t[0].localeCompare(n[0])).map(([t,n])=>`${t}="${JSON.parse(n.getValue())}"`).join(" ")}`:""}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,n]of this.nodeMapByKey)n.isRemoved()||(e[t]=n.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}var ln;(function(s){s.Content="content",s.Style="style"})(ln||(ln={}));class Vn{constructor(e){this.attributes=_t.create(),this.content=e}static create(e){return new Vn(e)}get length(){return this.content.length}substring(e,t){const n=new Vn(this.content.substring(e,t));return n.attributes=this.attributes.deepcopy(),n}setAttr(e,t,n){this.attributes.set(e,t,n)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=_n(this.content),t=this.attributes.toObject(),n=[];for(const[o,l]of Object.entries(t)){const g=JSON.parse(l),I=typeof g=="string"?`"${_n(o)}":"${_n(g)}"`:`"${_n(o)}":${String(g)}`;n.push(I)}return n.sort(),n.length===0?`{"val":"${e}"}`:`{"attrs":{${n.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}}class wt extends Zt{constructor(e,t){super(t),this.rgaTreeSplit=e}static create(e,t){return new wt(e,t)}edit(e,t,n,o,l){const g=t?Vn.create(t):void 0;if(g&&o)for(const[ye,te]of Object.entries(o))g.setAttr(ye,te,n);const[I,x,_]=this.rgaTreeSplit.edit(e,n,g,l),ee=_.map(ye=>({...ye,value:ye.value?{attributes:er(ye.value.getAttributes()),content:ye.value.getContent()}:{attributes:void 0,content:""},type:ln.Content}));return[x,ee,[I,I]]}setStyle(e,t,n,o){const[,l]=this.rgaTreeSplit.findNodeWithSplit(e[1],n),[,g]=this.rgaTreeSplit.findNodeWithSplit(e[0],n),I=[],x=this.rgaTreeSplit.findBetween(g,l),_=new Map,ee=[];for(const ye of x){const te=ye.getCreatedAt().getActorID(),Ee=o!=null&&o.size?o.has(te)?o.get(te):ht:qt;if(ye.canStyle(n,Ee)){const De=_.get(te),Le=ye.getCreatedAt();(!De||Le.after(De))&&_.set(te,Le),ee.push(ye)}}for(const ye of ee){if(ye.isRemoved())continue;const[te,Ee]=this.rgaTreeSplit.findIndexesFromRange(ye.createPosRange());I.push({type:ln.Style,actor:n.getActorID(),from:te,to:Ee,value:{attributes:er(t)}});for(const[De,Le]of Object.entries(t))ye.getValue().setAttr(De,Le,n)}return[_,I]}indexRangeToPosRange(e,t){const n=this.rgaTreeSplit.indexToPos(e);return e===t?[n,n]:[n,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const n=t.getValue();e.push({attributes:er(n.getAttributes()),content:n.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}getRemovedNodesLen(){return this.rgaTreeSplit.getRemovedNodesLen()}purgeRemovedNodesBefore(e){return this.rgaTreeSplit.purgeRemovedNodesBefore(e)}deepcopy(){const e=new wt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}}class Mt extends mt{constructor(e,t,n,o,l,g,I){super(e,I),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=o,this.content=l,this.attributes=g}static create(e,t,n,o,l,g,I){return new Mt(e,t,n,o,l,g,I)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof wt||v.fatal("fail to execute, only Text can execute edit");const n=t,[,o]=n.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(n),{opInfos:o.map(({from:l,to:g,value:I})=>({type:"edit",from:l,to:g,value:I,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),o=this.content;return`${e}.EDIT(${t},${n},${o})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Ft extends mt{constructor(e,t,n,o,l,g){super(e,g),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=o,this.attributes=l}static create(e,t,n,o,l,g){return new Ft(e,t,n,o,l,g)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof wt||v.fatal("fail to execute, only Text can execute edit");const n=t,[,o]=n.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);return{opInfos:o.map(({from:l,to:g,value:I})=>({type:"style",from:l,to:g,value:I,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),o=this.attributes;return`${e}.STYL(${t},${n},${JSON.stringify(o)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const Cn=2,Sn="root",Wt="text";function An(s,e){let t=0;const n=s.children;for(let o=0;o<e;o++){const l=n[o];!l||l.isRemoved||(t+=l.paddedSize)}return t}class xn{constructor(e,t=[]){if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e;)e.size+=this.paddedSize*t,e=e.parent}get isText(){return this.type===Wt}get paddedSize(){return this.size+(this.isText?0:Cn)}isAncestorOf(e){return kn(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const n=this.value.slice(0,e),o=this.value.slice(e);if(!o.length)return;this.value=n;const l=this.cloneText(e+t);return l.value=o,this.parent.insertAfterInternal(l,this),l}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this,t.isRemoved||t.updateAncestorsSize()}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const n=this.cloneElement(t);this.parent.insertAfterInternal(n,this),n.updateAncestorsSize();const o=this.children.slice(0,e),l=this.children.slice(e);this._children=o,n._children=l,this.size=this._children.reduce((g,I)=>g+I.paddedSize,0),n.size=n._children.reduce((g,I)=>g+I.paddedSize,0);for(const g of n._children)g.parent=n;return n}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(o=>!o.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const n=this._children.indexOf(t);if(n!==-1)return n;t=t.parent}return-1}}function kn(s,e){if(s===e)return!1;for(;e.parent;){if(e.parent===s)return!0;e=e.parent}return!1}var Be;(function(s){s.Start="Start",s.End="End",s.Text="Text"})(Be||(Be={}));function On(s,e,t,n){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>s.size)throw new Error(`from is out of range: ${e} > ${s.size}`);if(t>s.size)throw new Error(`to is out of range: ${t} > ${s.size}`);if(e===t)return;let o=0;for(const l of s.children){if(e-l.paddedSize<o&&o<t){const g=l.isText?e-o:e-o-1,I=l.isText?t-o:t-o-1,x=!l.isText&&g<0,_=!l.isText&&I>l.size;(l.isText||x)&&n([l,l.isText?Be.Text:Be.Start],_),On(l,Math.max(0,g),Math.min(I,l.size),n),_&&n([l,Be.End],_)}o+=l.paddedSize}}function fn(s,e,t=0){for(const n of s.children)fn(n,e,t+1);e(s,t)}function dn(s,e,t=0){for(const n of s._children)dn(n,e,t+1);e(s,t)}function u(s,e,t=!0){if(e>s.size)throw new Error(`index is out of range: ${e} > ${s.size}`);if(s.isText)return{node:s,offset:e};let n=0,o=0;for(const l of s.children){if(t&&l.isText&&l.size>=e-o)return u(l,e-o,t);if(e===o)return{node:s,offset:n};if(!t&&l.paddedSize===e-o)return{node:s,offset:n+1};if(l.paddedSize>e-o)return u(l,e-o-1,t);o+=l.paddedSize,n+=1}return{node:s,offset:n}}function i(s){return s.isText||s.children.length===0?s:i(s.children[0])}function c(s,e){if(s.size<e)throw new Error("unacceptable path");for(let t=0;t<s.children.length;t++){const n=s.children[t];if(n.size<e)e-=n.size;else{s=n;break}}return{node:s,offset:e}}class N{constructor(e){this.root=e}tokensBetween(e,t,n){On(this.root,e,t,n)}traverse(e){fn(this.root,e,0)}traverseAll(e){dn(this.root,e,0)}findTreePos(e,t=!0){return u(this.root,e,t)}treePosToPath(e){const t=[];let n=e.node;if(n.isText){const o=n.parent.findOffset(n);if(o===-1)throw new Error("invalid treePos");const l=An(n.parent,o);t.push(l+e.offset),n=n.parent}else if(n.hasTextChild()){const o=An(n,e.offset);t.push(o)}else t.push(e.offset);for(;n.parent;){const o=n.parent.findOffset(n);if(o===-1)throw new Error("invalid treePos");t.push(o),n=n.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let n=0;n<e.length-1;n++){const o=e[n];if(t=t.children[o],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return c(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:n}=e;if(t.isText){if(t.size===n){const o=t.nextSibling;return o||t.parent}return t}return t.children.length===n?t:i(t.children[n])}indexOf(e){let{node:t}=e;const{offset:n}=e;let o=0,l=1;if(t.isText){o+=n;const g=t.parent,I=g.findOffset(t);if(I===-1)throw new Error("invalid pos");o+=An(g,I),t=t.parent}else o+=An(t,n);for(;t!=null&&t.parent;){const g=t.parent,I=g.findOffset(t);if(I===-1)throw new Error("invalid pos");o+=An(g,I),l++,t=t.parent}return o+l-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const k=(s,e)=>s===e?0:s<e?-1:1;class R{constructor(e,t,n){this.key=e,this.value=t,this.isRed=n}}class F{constructor(e){this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class ce{constructor(e){this.comparator=typeof e<"u"?e:k,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new F(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const n=this.comparator(e,t.key);if(n>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(n<0)if(t.left)t.left.parent=t,t=t.left;else{let o=t.parent,l=t;for(;o&&l===o.left;)l=o,o=o.parent;return o}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const n=this.comparator(e,t.key);if(n===0)return t;n<0?t=t.left:n>0&&(t=t.right)}}putInternal(e,t,n){if(!n)return this.counter+=1,new R(e,t,!0);const o=this.comparator(e,n.key);return o<0?n.left=this.putInternal(e,t,n.left):o>0?n.right=this.putInternal(e,t,n.right):n.value=t,this.isRed(n.right)&&!this.isRed(n.left)&&(n=this.rotateLeft(n)),this.isRed(n.left)&&this.isRed(n.left.left)&&(n=this.rotateRight(n)),this.isRed(n.left)&&this.isRed(n.right)&&this.flipColors(n),n}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const n=this.min(e.right);e.value=n.value,e.key=n.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}var q;(function(s){s.Content="content",s.Style="style",s.RemoveStyle="removeStyle"})(q||(q={}));class me{constructor(e,t){this.parentID=e,this.leftSiblingID=t}static of(e,t){return new me(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:n}=e,o;return n.isText?(n.parent.children[0]===n&&t===0?o=n.parent:o=n,n=n.parent):t===0?o=n:o=n.children[t-1],me.of(n.id,ge.of(o.getCreatedAt(),o.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return me.of(ge.of(at.fromStruct(e.parentID.createdAt),e.parentID.offset),ge.of(at.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodes(e){const t=this.getParentID(),n=this.getLeftSiblingID(),o=e.findFloorNode(t);let l=e.findFloorNode(n);if(!o||!l)throw new Error(`cannot find node at ${this}`);return!n.equals(t)&&n.getOffset()>0&&n.getOffset()===l.id.getOffset()&&l.insPrevID&&(l=e.findFloorNode(l.insPrevID)),[o,l]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class ge{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new ge(e,t)}static fromStruct(e){return ge.of(at.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Ie extends xn{constructor(e,t,n,o,l){super(t),this._value="",this.id=e,this.removedAt=l,o&&(this.attrs=o),typeof n=="string"?this.value=n:Array.isArray(n)&&(this._children=n)}static create(e,t,n,o){return new Ie(e,t,n,o)}deepcopy(){var e;const t=new Ie(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)===null||e===void 0?void 0:e.deepcopy(),t._children=this._children.map(n=>{const o=n.deepcopy();return o.parent=t,o}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&(this.parent.removedAt?this.parent.size-=this.paddedSize:this.updateAncestorsSize())}cloneText(e){return new Ie(ge.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new Ie(ge.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,n){const o=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,n);if(o){if(o.insPrevID=this.id,this.insNextID){const l=e.findFloorNode(this.insNextID);l.insPrevID=o.id,o.insNextID=this.insNextID}this.insNextID=o.id,e.registerNode(o)}return o}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}}function ot(s){var e;if(s.isText){const t=s;return{type:t.type,value:t.value}}return{type:s.type,children:s.children.map(ot),attributes:s.attrs?er((e=s.attrs)===null||e===void 0?void 0:e.toObject()):void 0}}function qe(s){var e;return s.isText?s.value:`<${s.type}${((e=s.attrs)===null||e===void 0?void 0:e.toXML())||""}>${s.children.map(t=>qe(t)).join("")}</${s.type}>`}function tn(s){if(s.isText){const e=s;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:s.type,children:s.children.map(tn),size:s.size,isRemoved:s.isRemoved}}class zt extends Zt{constructor(e,t){super(t),this.indexTree=new N(e),this.nodeMapByID=new ce(ge.createComparator()),this.removedNodeMap=new Map,this.indexTree.traverse(n=>{this.nodeMapByID.put(n.id,n)})}static create(e,t){return new zt(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[n,o]=e.toTreeNodes(this);let l=o;const g=n===l,I=l.parent&&!g?l.parent:n;if(l.isText&&l.split(this,e.getLeftSiblingID().getOffset()-l.id.getOffset()),t){const x=I.allChildren,_=g?0:x.indexOf(l)+1;for(let ee=_;ee<x.length;ee++){const ye=x[ee];if(!ye.id.getCreatedAt().after(t))break;l=ye}}return[I,l]}style(e,t,n){const[o,l]=this.findNodesAndSplitText(e[0],n),[g,I]=this.findNodesAndSplitText(e[1],n),x=[],_=t?er(t):void 0;return this.traverseInPosRange(o,l,g,I,([ee])=>{if(!ee.isRemoved&&!ee.isText&&t){ee.attrs||(ee.attrs=new _t);for(const[ye,te]of Object.entries(t))ee.attrs.set(ye,te,n);x.push({type:q.Style,from:this.toIndex(o,l),to:this.toIndex(g,I),fromPath:this.toPath(o,l),toPath:this.toPath(g,I),actor:n.getActorID(),value:_})}}),x}removeStyle(e,t,n){const[o,l]=this.findNodesAndSplitText(e[0],n),[g,I]=this.findNodesAndSplitText(e[1],n),x=[],_=t||void 0;return this.traverseInPosRange(o,l,g,I,([ee])=>{if(!ee.isRemoved&&!ee.isText&&t){ee.attrs||(ee.attrs=new _t);for(const ye of t)ee.attrs.remove(ye,n);x.push({type:q.RemoveStyle,from:this.toIndex(o,l),to:this.toIndex(g,I),fromPath:this.toPath(o,l),toPath:this.toPath(g,I),actor:n.getActorID(),value:_})}}),x}edit(e,t,n,o,l,g){const[I,x]=this.findNodesAndSplitText(e[0],o),[_,ee]=this.findNodesAndSplitText(e[1],o),ye=this.toIndex(I,x),te=this.toPath(I,x),Ee=[],De=[],Le=[],je=new Map;this.traverseInPosRange(I,x,_,ee,([Ve,Et],Tt)=>{if(Et===Be.Start&&!Tt)for(const Qr of Ve.children)Le.push(Qr);const Pt=Ve.getCreatedAt().getActorID(),_r=g?g.has(Pt)?g.get(Pt):ht:qt;if(Ve.canDelete(o,_r)||Ee.includes(Ve.parent)){const Qr=je.get(Pt),Ts=Ve.getCreatedAt();(!Qr||Ts.after(Qr))&&je.set(Pt,Ts),(Et===Be.Text||Et===Be.Start)&&Ee.push(Ve),De.push([Ve,Et])}});const Ct=this.makeDeletionChanges(De,o);for(const Ve of Ee)Ve.remove(o),Ve.isRemoved&&this.removedNodeMap.set(Ve.id.toIDString(),Ve);for(const Ve of Le)Ve.removedAt||I.append(Ve);if(n>0){let Ve=0,Et=I,Tt=x;for(;Ve<n;)Et.split(this,Et.findOffset(Tt)+1,l),Tt=Et,Et=Et.parent,Ve++;Ct.push({type:q.Content,from:ye,to:ye,fromPath:te,toPath:te,actor:o.getActorID()})}if(t!=null&&t.length){const Ve=[];let Et=x;for(const Tt of t)Et===I?I.insertAt(Tt,0):I.insertAfter(Tt,Et),Et=Tt,dn(Tt,Pt=>{I.isRemoved&&(Pt.remove(o),this.removedNodeMap.set(Pt.id.toIDString(),Pt)),this.nodeMapByID.put(Pt.id,Pt)}),Tt.isRemoved||Ve.push(Tt);if(Ve.length){const Tt=Ve.map(Pt=>ot(Pt));Ct.length&&Ct[Ct.length-1].from===ye?Ct[Ct.length-1].value=Tt:Ct.push({type:q.Content,from:ye,to:ye,fromPath:te,toPath:te,actor:o.getActorID(),value:Tt})}}return[Ct,je]}editT(e,t,n,o,l){const g=this.findPos(e[0]),I=this.findPos(e[1]);this.edit([g,I],t,n,o,l)}move(e,t,n){throw new Error(`not implemented: ${e}, ${t}, ${n}`)}purgeRemovedNodesBefore(e){var t;const n=new Set;let o=0;for(const[,l]of this.removedNodeMap)l.removedAt&&e.compare(l.removedAt)>=0&&(n.add(l),o++);for(const l of n)(t=l.parent)===null||t===void 0||t.removeChild(l),this.nodeMapByID.remove(l.id),this.purge(l),this.removedNodeMap.delete(l.id.toIDString());return o}purge(e){const t=e.insPrevID,n=e.insNextID;if(t){const o=this.findFloorNode(t);o.insNextID=n}if(n){const o=this.findFloorNode(n);o.insPrevID=t}e.insPrevID=void 0,e.insNextID=void 0}findPos(e,t=!0){const n=this.indexTree.findTreePos(e,t);return me.fromTreePos(n)}getRemovedNodesLen(){return this.removedNodeMap.size}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getIndexTree(){return this.indexTree}toXML(){return qe(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),t=(n,o=void 0,l=void 0,g=0)=>{var I,x,_,ee;let ye,te,Ee;const De=n.isText?{node:n,offset:0}:o&&l?this.toTreePos(o,l):null;De&&(ye=this.indexTree.indexOf(De),te=this.indexTree.treePosToPath(De),Ee=me.fromTreePos(De).toStruct());const Le={type:n.type,parent:o==null?void 0:o.id.toTestString(),size:n.size,id:n.id.toTestString(),removedAt:(I=n.removedAt)===null||I===void 0?void 0:I.toTestString(),insPrev:(x=n.insPrevID)===null||x===void 0?void 0:x.toTestString(),insNext:(_=n.insNextID)===null||_===void 0?void 0:_.toTestString(),value:n.isText?n.value:void 0,isRemoved:n.isRemoved,children:[],depth:g,attributes:n.attrs?er((ee=n.attrs)===null||ee===void 0?void 0:ee.toObject()):void 0,index:ye,path:te,pos:Ee};for(let je=0;je<n.children.length;je++){const Ct=je===0?n:n.children[je-1];Le.children.push(t(n.children[je],n,Ct,g+1))}return Le};return t(e)}getRootTreeNode(){return ot(this.indexTree.getRoot())}toTestTreeNode(){return tn(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new zt(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.treePosToPath(n):[]}toIndex(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.indexOf(n):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,n]=e,o=this.findPos(t);return t===n?[o.toStruct(),o.toStruct()]:[o.toStruct(),this.findPos(n).toStruct()]}posRangeToPathRange(e){const[t,n]=this.findNodesAndSplitText(e[0]),[o,l]=this.findNodesAndSplitText(e[1]);return[this.toPath(t,n),this.toPath(o,l)]}posRangeToIndexRange(e){const[t,n]=this.findNodesAndSplitText(e[0]),[o,l]=this.findNodesAndSplitText(e[1]);return[this.toIndex(t,n),this.toIndex(o,l)]}traverseInPosRange(e,t,n,o,l){const g=this.toIndex(e,t),I=this.toIndex(n,o);return this.indexTree.tokensBetween(g,I,l)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let o;for(;e.isRemoved;)o=e,e=o.parent;const l=e.findOffset(o);return{node:e,offset:l}}if(e===t)return{node:e,offset:0};let n=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};n++}return{node:e,offset:n}}makeDeletionChanges(e,t){const n=[],o=[];let l=null,g=null;for(let I=0;I<e.length;I++){const x=e[I],_=e[I+1];l||(l=x),g=x;const ee=this.findRightToken(x);(!ee||!_||ee[0]!==_[0]||ee[1]!==_[1])&&(o.push([l,g]),l=null,g=null)}for(const I of o){const[x,_]=I,[ee,ye]=this.findLeftToken(x),[te,Ee]=_,De=ye===Be.Start?ee:ee.parent,Le=Ee===Be.Start?te:te.parent,je=this.toIndex(De,ee),Ct=this.toIndex(Le,te);je<Ct&&(n.length>0&&je===n[n.length-1].to?(n[n.length-1].to=Ct,n[n.length-1].toPath=this.toPath(Le,te)):n.push({type:q.Content,from:je,to:Ct,fromPath:this.toPath(De,ee),toPath:this.toPath(Le,te),actor:t.getActorID()}))}return n.reverse()}findRightToken([e,t]){if(t===Be.Start){const I=e.allChildren;return I.length>0?[I[0],I[0].isText?Be.Text:Be.Start]:[e,Be.End]}const n=e.parent,o=n.allChildren,l=o.indexOf(e);if(n&&l===o.length-1)return[n,Be.End];const g=o[l+1];return[g,g.isText?Be.Text:Be.Start]}findLeftToken([e,t]){if(t===Be.End){const I=e.allChildren;if(I.length>0){const x=I[I.length-1];return[x,x.isText?Be.Text:Be.End]}return[e,Be.Start]}const n=e.parent,o=n.allChildren,l=o.indexOf(e);if(n&&l===0)return[n,Be.Start];const g=o[l-1];return[g,g.isText?Be.Text:Be.End]}}class Or extends mt{constructor(e,t,n,o,l,g,I){super(e,I),this.fromPos=t,this.toPos=n,this.contents=o,this.splitLevel=l,this.maxCreatedAtMapByActor=g}static create(e,t,n,o,l,g,I){return new Or(e,t,n,o,l,g,I)}execute(e){var t;const n=e.findByCreatedAt(this.getParentCreatedAt());n||v.fatal(`fail to find ${this.getParentCreatedAt()}`),n instanceof zt||v.fatal("fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),l=n,[g]=l.edit([this.fromPos,this.toPos],(t=this.contents)===null||t===void 0?void 0:t.map(I=>I.deepcopy()),this.splitLevel,o,(()=>{let I=o.getDelimiter();return this.contents!==void 0&&(I+=this.contents.length),()=>at.of(o.getLamport(),++I,o.getActorID())})(),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(l),{opInfos:g.map(({from:I,to:x,value:_,splitLevel:ee,fromPath:ye,toPath:te})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:I,to:x,value:_,splitLevel:ee,fromPath:ye,toPath:te}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,o=this.contents||[];return`${e}.EDIT(${t},${n},${o.map(l=>qe(l)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Kn{constructor(e,t,n){this.clientSeq=e,this.lamport=t,this.actor=n}static of(e,t,n){return new Kn(e,t,n)}next(){return new Kn(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new Kn(this.clientSeq,e,this.actor):new Kn(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return at.of(this.lamport,e,this.actor)}setActor(e){return new Kn(this.clientSeq,this.lamport,e)}getClientSeq(){return this.clientSeq}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Sc=new Kn(0,It.fromInt(0,!0),Kt);class Pr{constructor({id:e,operations:t,presenceChange:n,message:o}){this.id=e,this.operations=t||[],this.presenceChange=n,this.message=o}static create({id:e,operations:t,presenceChange:n,message:o}){return new Pr({id:e,operations:t,presenceChange:n,message:o})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,n){const o=[],l=[];for(const g of this.operations){const I=g.execute(e,n);if(!I)continue;const{opInfos:x,reverseOp:_}=I;o.push(...x),_&&l.unshift(_)}return this.presenceChange&&(this.presenceChange.type===Tn.Put?t.set(this.id.getActorID(),Nt(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:o,reverseOps:l}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:Ot.bytesToHex(Ot.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>Ot.bytesToHex(Ot.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:n,presenceChange:o,message:l}=e;return Pr.create({id:Ot.bytesToChangeID(Ot.hexToBytes(t)),operations:n==null?void 0:n.map(g=>Ot.bytesToOperation(Ot.hexToBytes(g))),presenceChange:o,message:l})}}class Bs{constructor(e,t,n,o,l,g){this.documentKey=e,this.checkpoint=t,this.isRemoved=n,this.changes=o,this.snapshot=l,this.minSyncedTicket=g}static create(e,t,n,o,l,g){return new Bs(e,t,n,o,l,g)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class qr{constructor(e,t){this.serverSeq=e,this.clientSeq=t}static of(e,t){return new qr(e,t)}increaseClientSeq(e){return e===0?this:new qr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,n=Math.max(this.clientSeq,e.clientSeq);return qr.of(t,n)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Ac=new qr(It.fromInt(0,!0),0);class qn{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new qn(e,t)}static fromStruct(e){return qn.of(at.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new qn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const kc=qn.of(ht,0);class Rn{constructor(e,t){this.id=e,this.relativeOffset=t}static of(e,t){return new Rn(e,t)}static fromStruct(e){const t=qn.fromStruct(e.id);return Rn.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return qn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class gr extends Qt{constructor(e,t,n){super(t),this.id=e,this.removedAt=n}static create(e,t){return new gr(e,t)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new gr(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Rn.of(this.id,0),Rn.of(this.id,this.getLength())]}deepcopy(){return new gr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}}class Yr{constructor(){this.head=gr.create(kc),this.treeByIndex=new Ar,this.treeByID=new ce(gr.createComparator()),this.removedNodeMap=new Map,this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Yr}edit(e,t,n,o){const[l,g]=this.findNodeWithSplit(e[1],t),[I,x]=this.findNodeWithSplit(e[0],t),_=this.findBetween(x,g),[ee,ye,te]=this.deleteNodes(_,t,o),Ee=g?g.getID():l.getID();let De=Rn.of(Ee,0);if(n){const Le=this.posToIndex(I.createPosRange()[1],!0),je=this.insertAfter(I,gr.create(qn.of(t,0),n));ee.length&&ee[ee.length-1].from===Le?ee[ee.length-1].value=n:ee.push({actor:t.getActorID(),from:Le,to:Le,value:n}),De=Rn.of(je.getID(),je.getContentLength())}for(const[Le,je]of te)this.removedNodeMap.set(Le,je);return[De,ye,ee]}indexToPos(e){const[t,n]=this.treeByIndex.find(e),o=t;return Rn.of(o.getID(),n)}findIndexesFromRange(e){const[t,n]=e;return[this.posToIndex(t,!1),this.posToIndex(n,!0)]}posToIndex(e,t){const n=e.getAbsoluteID(),o=t?this.findFloorNodePreferToLeft(n):this.findFloorNode(n);o||v.fatal(`the node of the given id should be found: ${n.toTestString()}`);const l=this.treeByIndex.indexOf(o),g=o.isRemoved()?0:n.getOffset()-o.getID().getOffset();return l+g}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Yr;let t=this.head.getNext(),n=e.head,o;for(;t;){if(o=e.insertAfter(n,t.deepcopy()),t.hasInsPrev()){const l=e.findNode(t.getInsPrevID());o.setInsPrev(l)}n=o,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const n=e.getNext();return t.setPrev(e),n&&n.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const n=e.getAbsoluteID();let o=this.findFloorNodePreferToLeft(n);const l=n.getOffset()-o.getID().getOffset();for(this.splitNode(o,l);o.hasNext()&&o.getNext().getCreatedAt().after(t);)o=o.getNext();return[o,o.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||v.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const n=[];let o=e;for(;o&&o!==t;)n.push(o),o=o.getNext();return n}splitNode(e,t){if(t>e.getContentLength()&&v.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const n=e.split(t);this.treeByIndex.updateWeight(n),this.insertAfter(e,n);const o=e.getInsNext();return o&&o.setInsPrev(n),n.setInsPrev(e),n}deleteNodes(e,t,n){if(!e.length)return[[],new Map,new Map];const[o,l]=this.filterNodes(e,t,n),g=new Map,I=new Map,x=this.makeChanges(l,t);for(const _ of o){const ee=_.getCreatedAt().getActorID();(!g.has(ee)||_.getID().getCreatedAt().after(g.get(ee)))&&g.set(ee,_.getID().getCreatedAt()),I.set(_.getID().toIDString(),_),_.remove(t)}return this.deleteIndexNodes(l),[x,g,I]}filterNodes(e,t,n){const o=!!n,l=[],g=[],[I,x]=this.findEdgesOfCandidates(e);g.push(I);for(const _ of e){const ee=_.getCreatedAt().getActorID(),ye=o?n.has(ee)?n.get(ee):ht:qt;_.canDelete(t,ye)?l.push(_):g.push(_)}return g.push(x),[l,g]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const n=[];let o,l;for(let g=0;g<e.length-1;g++){const I=e[g],x=e[g+1];I.getNext()!=x&&([o]=this.findIndexesFromRange(I.getNext().createPosRange()),x?[,l]=this.findIndexesFromRange(x.getPrev().createPosRange()):l=this.treeByIndex.length,o<l&&n.push({actor:t.getActorID(),from:o,to:l}))}return n.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const n=e[t],o=e[t+1];n.getNext()!=o&&this.treeByIndex.deleteRange(n,o)}}getRemovedNodesLen(){return this.removedNodeMap.size}purgeRemovedNodesBefore(e){let t=0;for(const[,n]of this.removedNodeMap)n.getRemovedAt()&&e.compare(n.getRemovedAt())>=0&&(this.treeByIndex.delete(n),this.purge(n),this.treeByID.remove(n.getID()),this.removedNodeMap.delete(n.getID().toIDString()),t++);return t}purge(e){const t=e.getPrev(),n=e.getNext(),o=e.getInsPrev(),l=e.getInsNext();t&&t.setNext(n),n&&n.setPrev(t),e.setPrev(void 0),e.setNext(void 0),o&&o.setInsNext(l),l&&l.setInsPrev(o),e.setInsPrev(void 0),e.setInsNext(void 0)}}const vo=s=>s<0?Math.ceil(s):Math.floor(s);var At;(function(s){s[s.IntegerCnt=0]="IntegerCnt",s[s.LongCnt=1]="LongCnt"})(At||(At={}));class wn extends Jt{constructor(e,t,n){switch(super(n),this.valueType=e,e){case At.IntegerCnt:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=It.fromNumber(t).toInt():this.value=vo(t):this.value=t.toInt();break;case At.LongCnt:typeof t=="number"?this.value=It.fromNumber(t):this.value=t;break;default:throw new Xe(Ke.Unimplemented,`unimplemented type: ${e}`)}}static create(e,t,n){return new wn(e,t,n)}static valueFromBytes(e,t){switch(e){case At.IntegerCnt:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case At.LongCnt:return It.fromBytesLE(Array.from(t));default:throw new Xe(Ke.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=wn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof It?At.LongCnt:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?At.LongCnt:At.IntegerCnt;default:return}}static isSupport(e){return!!wn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===At.IntegerCnt||e===At.LongCnt}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case At.IntegerCnt:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case At.LongCnt:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new Xe(Ke.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(n){if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`)}return t(this),t(e),this.valueType===At.LongCnt?this.value=this.value.add(e.getValue()):e.getType()===ke.Long?this.value=this.value+e.getValue().toInt():this.value=It.fromNumber(this.value+vo(e.getValue())).toInt(),this}}class Wr extends mt{constructor(e,t,n){super(e,n),this.value=t}static create(e,t,n){return new Wr(e,t,n)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof wn||v.fatal("fail to execute, only Counter can execute increase");const n=t,o=this.value.deepcopy();return n.increase(o),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:o.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),n=e.getType()===ke.Long?e.getValue().multiply(-1):e.getValue()*-1;return Wr.create(this.getParentCreatedAt(),ut.of(n,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class rr extends mt{constructor(e,t,n,o,l,g){super(e,g),this.fromPos=t,this.toPos=n,this.attributes=o,this.attributesToRemove=l}static create(e,t,n,o,l){return new rr(e,t,n,o,new Array,l)}static createTreeRemoveStyleOperation(e,t,n,o,l){return new rr(e,t,n,new Map,o,l)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof zt||v.fatal("fail to execute, only Tree can execute edit");const n=t;let o;if(this.attributes.size){const l={};[...this.attributes].forEach(([g,I])=>l[g]=I),o=n.style([this.fromPos,this.toPos],l,this.getExecutedAt())}else{const l=this.attributesToRemove;o=n.removeStyle([this.fromPos,this.toPos],l,this.getExecutedAt())}return{opInfos:o.map(({from:l,to:g,value:I,fromPath:x})=>({type:"tree-style",from:l,to:g,value:I,fromPath:x,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${n},${Object.entries(this.attributes||{}).map(([o,l])=>`${o}:"${l}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}function Oc(s){const e=new Q.Presence,t=e.data;for(const[n,o]of Object.entries(s))t[n]=JSON.stringify(o);return e}function Pc(s){if(s.type===Tn.Put)return new Q.PresenceChange({type:Q.PresenceChange_ChangeType.PUT,presence:Oc(s.presence)});if(s.type===Tn.Clear)return new Q.PresenceChange({type:Q.PresenceChange_ChangeType.CLEAR});throw new Xe(Ke.Unimplemented,"unimplemented type")}function Dc(s){return new Q.Checkpoint({serverSeq:s.getServerSeqAsString(),clientSeq:s.getClientSeq()})}function wo(s){return new Q.ChangeID({clientSeq:s.getClientSeq(),lamport:s.getLamportAsString(),actorId:Ai(s.getActorID())})}function Ne(s){if(!!s)return new Q.TimeTicket({lamport:s.getLamportAsString(),delimiter:s.getDelimiter(),actorId:Ai(s.getActorID())})}function bo(s){switch(s){case ke.Null:return Q.ValueType.NULL;case ke.Boolean:return Q.ValueType.BOOLEAN;case ke.Integer:return Q.ValueType.INTEGER;case ke.Long:return Q.ValueType.LONG;case ke.Double:return Q.ValueType.DOUBLE;case ke.String:return Q.ValueType.STRING;case ke.Bytes:return Q.ValueType.BYTES;case ke.Date:return Q.ValueType.DATE;default:throw new Xe(Ke.Unsupported,`unsupported type: ${s}`)}}function Eo(s){switch(s){case At.IntegerCnt:return Q.ValueType.INTEGER_CNT;case At.LongCnt:return Q.ValueType.LONG_CNT;default:throw new Xe(Ke.Unsupported,`unsupported type: ${s}`)}}function wi(s){if(s instanceof it)return new Q.JSONElementSimple({type:Q.ValueType.JSON_OBJECT,createdAt:Ne(s.getCreatedAt()),value:Mo(s)});if(s instanceof en)return new Q.JSONElementSimple({type:Q.ValueType.JSON_ARRAY,createdAt:Ne(s.getCreatedAt()),value:ru(s)});if(s instanceof wt)return new Q.JSONElementSimple({type:Q.ValueType.TEXT,createdAt:Ne(s.getCreatedAt())});if(s instanceof ut)return new Q.JSONElementSimple({type:bo(s.getType()),createdAt:Ne(s.getCreatedAt()),value:s.toBytes()});if(s instanceof wn)return new Q.JSONElementSimple({type:Eo(s.getType()),createdAt:Ne(s.getCreatedAt()),value:s.toBytes()});if(s instanceof zt)return new Q.JSONElementSimple({type:Q.ValueType.TREE,createdAt:Ne(s.getCreatedAt()),value:iu(s)});throw new Xe(Ke.Unimplemented,"unimplemented element")}function _c(s){return new Q.TextNodeID({createdAt:Ne(s.getCreatedAt()),offset:s.getOffset()})}function Ms(s){return new Q.TextNodePos({createdAt:Ne(s.getID().getCreatedAt()),offset:s.getID().getOffset(),relativeOffset:s.getRelativeOffset()})}function Fs(s){return new Q.TreePos({parentId:ms(s.getParentID()),leftSiblingId:ms(s.getLeftSiblingID())})}function ms(s){return new Q.TreeNodeID({createdAt:Ne(s.getCreatedAt()),offset:s.getOffset()})}function Io(s){const e=new Q.Operation;if(s instanceof nr){const t=s,n=new Q.Operation_Set;n.parentCreatedAt=Ne(t.getParentCreatedAt()),n.key=t.getKey(),n.value=wi(t.getValue()),n.executedAt=Ne(t.getExecutedAt()),e.body.case="set",e.body.value=n}else if(s instanceof mr){const t=s,n=new Q.Operation_Add;n.parentCreatedAt=Ne(t.getParentCreatedAt()),n.prevCreatedAt=Ne(t.getPrevCreatedAt()),n.value=wi(t.getValue()),n.executedAt=Ne(t.getExecutedAt()),e.body.case="add",e.body.value=n}else if(s instanceof vn){const t=s,n=new Q.Operation_Move;n.parentCreatedAt=Ne(t.getParentCreatedAt()),n.prevCreatedAt=Ne(t.getPrevCreatedAt()),n.createdAt=Ne(t.getCreatedAt()),n.executedAt=Ne(t.getExecutedAt()),e.body.case="move",e.body.value=n}else if(s instanceof jn){const t=s,n=new Q.Operation_Remove;n.parentCreatedAt=Ne(t.getParentCreatedAt()),n.createdAt=Ne(t.getCreatedAt()),n.executedAt=Ne(t.getExecutedAt()),e.body.case="remove",e.body.value=n}else if(s instanceof Mt){const t=s,n=new Q.Operation_Edit;n.parentCreatedAt=Ne(t.getParentCreatedAt()),n.from=Ms(t.getFromPos()),n.to=Ms(t.getToPos());const o=n.createdAtMapByActor;for(const[g,I]of t.getMaxCreatedAtMapByActor())o[g]=Ne(I);n.content=t.getContent();const l=n.attributes;for(const[g,I]of t.getAttributes())l[g]=I;n.executedAt=Ne(t.getExecutedAt()),e.body.case="edit",e.body.value=n}else if(s instanceof Ft){const t=s,n=new Q.Operation_Style;n.parentCreatedAt=Ne(t.getParentCreatedAt()),n.from=Ms(t.getFromPos()),n.to=Ms(t.getToPos());const o=n.createdAtMapByActor;for(const[g,I]of t.getMaxCreatedAtMapByActor())o[g]=Ne(I);const l=n.attributes;for(const[g,I]of t.getAttributes())l[g]=I;n.executedAt=Ne(t.getExecutedAt()),e.body.case="style",e.body.value=n}else if(s instanceof Wr){const t=s,n=new Q.Operation_Increase;n.parentCreatedAt=Ne(t.getParentCreatedAt()),n.value=wi(t.getValue()),n.executedAt=Ne(t.getExecutedAt()),e.body.case="increase",e.body.value=n}else if(s instanceof Or){const t=s,n=new Q.Operation_TreeEdit,o=n.createdAtMapByActor;for(const[l,g]of t.getMaxCreatedAtMapByActor())o[l]=Ne(g);n.parentCreatedAt=Ne(t.getParentCreatedAt()),n.from=Fs(t.getFromPos()),n.to=Fs(t.getToPos()),n.contents=Fc(t.getContents()),n.splitLevel=t.getSplitLevel(),n.executedAt=Ne(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=n}else if(s instanceof rr){const t=s,n=new Q.Operation_TreeStyle;n.parentCreatedAt=Ne(t.getParentCreatedAt()),n.from=Fs(t.getFromPos()),n.to=Fs(t.getToPos());const o=t.getAttributesToRemove();if(o.length>0)n.attributesToRemove=o;else{const l=n.attributes;for(const[g,I]of t.getAttributes())l[g]=I}n.executedAt=Ne(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=n}else throw new Xe(Ke.Unimplemented,"unimplemented operation");return e}function Cc(s){const e=[];for(const t of s)e.push(Io(t));return e}function xc(s){const e=new Q.Change({id:wo(s.getID()),message:s.getMessage()});return s.hasOperations()&&(e.operations=Cc(s.getOperations())),s.hasPresenceChange()&&(e.presenceChange=Pc(s.getPresenceChange())),e}function Rc(s){const e=[];for(const t of s)e.push(xc(t));return e}function Lc(s){const e=[];for(const t of s)e.push(new Q.RHTNode({key:t.getStrKey(),element:bi(t.getValue())}));return e}function Bc(s){const e=[];for(const t of s)e.push(new Q.RGANode({element:bi(t.getValue())}));return e}function Mc(s){const e=[];for(const t of s){const n=new Q.TextNode;n.id=_c(t.getID()),n.value=t.getValue().getContent(),n.removedAt=Ne(t.getRemovedAt());const o=n.attributes,l=t.getValue().getAttrs();for(const g of l){const I=new Q.NodeAttr;I.value=g.getValue(),I.updatedAt=Ne(g.getUpdatedAt()),o[g.getKey()]=I}e.push(n)}return e}function Fc(s){const e=[];if(!s||!s.length)return e;for(const t of s)e.push(new Q.TreeNodes({content:No(t)}));return e}function No(s){if(!s)return[];const e=[];return fn(s,(t,n)=>{const o=new Q.TreeNode({id:ms(t.id),type:t.type,removedAt:Ne(t.removedAt),depth:n});if(t.isText&&(o.value=t.value),t.insPrevID&&(o.insPrevId=ms(t.insPrevID)),t.insNextID&&(o.insNextId=ms(t.insNextID)),t.attrs)for(const l of t.attrs)o.attributes[l.getKey()]=new Q.NodeAttr({value:l.getValue(),updatedAt:Ne(l.getUpdatedAt())});e.push(o)}),e}function Jc(s){const e=new Q.JSONElement;return e.body.case="jsonObject",e.body.value=new Q.JSONElement_JSONObject({nodes:Lc(s.getRHT()),createdAt:Ne(s.getCreatedAt()),movedAt:Ne(s.getMovedAt()),removedAt:Ne(s.getRemovedAt())}),e}function So(s){const e=new Q.JSONElement;return e.body.case="jsonArray",e.body.value=new Q.JSONElement_JSONArray({nodes:Bc(s.getElements()),createdAt:Ne(s.getCreatedAt()),movedAt:Ne(s.getMovedAt()),removedAt:Ne(s.getRemovedAt())}),e}function Uc(s){const e=new Q.JSONElement;return e.body.case="primitive",e.body.value=new Q.JSONElement_Primitive({type:bo(s.getType()),value:s.toBytes(),createdAt:Ne(s.getCreatedAt()),movedAt:Ne(s.getMovedAt()),removedAt:Ne(s.getRemovedAt())}),e}function $c(s){const e=new Q.JSONElement;return e.body.case="text",e.body.value=new Q.JSONElement_Text({nodes:Mc(s.getRGATreeSplit()),createdAt:Ne(s.getCreatedAt()),movedAt:Ne(s.getMovedAt()),removedAt:Ne(s.getRemovedAt())}),e}function jc(s){const e=new Q.JSONElement;return e.body.case="counter",e.body.value=new Q.JSONElement_Counter({type:Eo(s.getType()),value:s.toBytes(),createdAt:Ne(s.getCreatedAt()),movedAt:Ne(s.getMovedAt()),removedAt:Ne(s.getRemovedAt())}),e}function Ao(s){const e=new Q.JSONElement;return e.body.case="tree",e.body.value=new Q.JSONElement_Tree({nodes:No(s.getRoot()),createdAt:Ne(s.getCreatedAt()),movedAt:Ne(s.getMovedAt()),removedAt:Ne(s.getRemovedAt())}),e}function bi(s){if(s instanceof it)return Jc(s);if(s instanceof en)return So(s);if(s instanceof ut)return Uc(s);if(s instanceof wt)return $c(s);if(s instanceof wn)return jc(s);if(s instanceof zt)return Ao(s);throw new Xe(Ke.Unimplemented,"unimplemented element")}function Vc(s){return new Q.ChangePack({documentKey:s.getDocumentKey(),checkpoint:Dc(s.getCheckpoint()),isRemoved:s.getIsRemoved(),changes:Rc(s.getChanges()),snapshot:s.getSnapshot(),minSyncedTicket:Ne(s.getMinSyncedTicket())})}function ko(s){return Kn.of(s.clientSeq,It.fromString(s.lamport,!0),Si(s.actorId))}function Se(s){if(!!s)return at.of(It.fromString(s.lamport,!0),s.delimiter,Si(s.actorId))}function Ei(s){const e={};return Object.entries(s.data).forEach(([t,n])=>{e[t]=JSON.parse(n)}),e}function Kc(s){const e=s.type;if(e===Q.PresenceChange_ChangeType.PUT){const t=Ei(s.presence);return{type:Tn.Put,presence:t}}if(e===Q.PresenceChange_ChangeType.CLEAR)return{type:Tn.Clear};throw new Xe(Ke.Unsupported,`unsupported type: ${e}`)}function qc(s){const e=new Map;return Object.entries(s).forEach(([t,n])=>{e.set(t,Ei(n))}),e}function Oo(s){switch(s){case Q.ValueType.NULL:return ke.Null;case Q.ValueType.BOOLEAN:return ke.Boolean;case Q.ValueType.INTEGER:return ke.Integer;case Q.ValueType.LONG:return ke.Long;case Q.ValueType.DOUBLE:return ke.Double;case Q.ValueType.STRING:return ke.String;case Q.ValueType.BYTES:return ke.Bytes;case Q.ValueType.DATE:return ke.Date}throw new Xe(Ke.Unimplemented,`unimplemented value type: ${s}`)}function Js(s){switch(s){case Q.ValueType.INTEGER_CNT:return At.IntegerCnt;case Q.ValueType.LONG_CNT:return At.LongCnt}throw new Xe(Ke.Unimplemented,`unimplemented value type: ${s}`)}function Ii(s){switch(s.type){case Q.ValueType.JSON_OBJECT:return s.value?Bo(s.value):it.create(Se(s.createdAt));case Q.ValueType.JSON_ARRAY:return s.value?nu(s.value):en.create(Se(s.createdAt));case Q.ValueType.TEXT:return wt.create(Yr.create(),Se(s.createdAt));case Q.ValueType.TREE:return su(s.value);case Q.ValueType.NULL:case Q.ValueType.BOOLEAN:case Q.ValueType.INTEGER:case Q.ValueType.LONG:case Q.ValueType.DOUBLE:case Q.ValueType.STRING:case Q.ValueType.BYTES:case Q.ValueType.DATE:return ut.of(ut.valueFromBytes(Oo(s.type),s.value),Se(s.createdAt));case Q.ValueType.INTEGER_CNT:case Q.ValueType.LONG_CNT:return wn.create(Js(s.type),wn.valueFromBytes(Js(s.type),s.value),Se(s.createdAt))}}function Us(s){return Rn.of(qn.of(Se(s.createdAt),s.offset),s.relativeOffset)}function Po(s){return qn.of(Se(s.createdAt),s.offset)}function Yc(s){const e=Vn.create(s.value);Object.entries(s.attributes).forEach(([n,o])=>{e.setAttr(n,o.value,Se(o.updatedAt))});const t=gr.create(Po(s.id),e);return t.remove(Se(s.removedAt)),t}function zr(s){return me.of(gs(s.parentId),gs(s.leftSiblingId))}function gs(s){return ge.of(Se(s.createdAt),s.offset)}function Wc(s){if(!s.length)return;const e=[];return s.forEach(t=>{const n=Do(t.content);e.push(n)}),e}function Do(s){if(s.length===0)return;const e=[];for(const n of s)e.push(zc(n));const t=e[e.length-1];for(let n=e.length-2;n>=0;n--){let o;for(let l=n+1;l<e.length;l++)if(s[n].depth-1===s[l].depth){o=e[l];break}o.prepend(e[n])}return zt.create(t,ht).getRoot()}function zc(s){const e=gs(s.id),t=Ie.create(e,s.type);if(t.isText)t.value=s.value;else{const n=_t.create();Object.entries(s.attributes).forEach(([o,l])=>{n.set(o,l.value,Se(l.updatedAt))}),t.attrs=n}return s.insPrevId&&(t.insPrevID=gs(s.insPrevId)),s.insNextId&&(t.insNextID=gs(s.insNextId)),t.removedAt=Se(s.removedAt),t}function _o(s){if(s.body.case==="set"){const e=s.body.value;return nr.create(e.key,Ii(e.value),Se(e.parentCreatedAt),Se(e.executedAt))}else if(s.body.case==="add"){const e=s.body.value;return mr.create(Se(e.parentCreatedAt),Se(e.prevCreatedAt),Ii(e.value),Se(e.executedAt))}else if(s.body.case==="move"){const e=s.body.value;return vn.create(Se(e.parentCreatedAt),Se(e.prevCreatedAt),Se(e.createdAt),Se(e.executedAt))}else if(s.body.case==="remove"){const e=s.body.value;return jn.create(Se(e.parentCreatedAt),Se(e.createdAt),Se(e.executedAt))}else if(s.body.case==="edit"){const e=s.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([o,l])=>{t.set(o,Se(l))});const n=new Map;return Object.entries(e.attributes).forEach(([o,l])=>{n.set(o,l)}),Mt.create(Se(e.parentCreatedAt),Us(e.from),Us(e.to),t,e.content,n,Se(e.executedAt))}else if(s.body.case==="style"){const e=s.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([o,l])=>{t.set(o,Se(l))});const n=new Map;return Object.entries(e.attributes).forEach(([o,l])=>{n.set(o,l)}),Ft.create(Se(e.parentCreatedAt),Us(e.from),Us(e.to),t,n,Se(e.executedAt))}else{if(s.body.case==="select")return;if(s.body.case==="increase"){const e=s.body.value;return Wr.create(Se(e.parentCreatedAt),Ii(e.value),Se(e.executedAt))}else if(s.body.case==="treeEdit"){const e=s.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([n,o])=>{t.set(n,Se(o))}),Or.create(Se(e.parentCreatedAt),zr(e.from),zr(e.to),Wc(e.contents),e.splitLevel,t,Se(e.executedAt))}else if(s.body.case==="treeStyle"){const e=s.body.value,t=new Map,n=e.attributesToRemove;return n.length>0?rr.createTreeRemoveStyleOperation(Se(e.parentCreatedAt),zr(e.from),zr(e.to),n,Se(e.executedAt)):(Object.entries(e.attributes).forEach(([o,l])=>{t.set(o,l)}),rr.create(Se(e.parentCreatedAt),zr(e.from),zr(e.to),t,Se(e.executedAt)))}else throw new Xe(Ke.Unimplemented,"unimplemented operation")}}function Gc(s){const e=[];for(const t of s){const n=_o(t);n&&e.push(n)}return e}function Co(s){const e=[];for(const t of s)e.push(Pr.create({id:ko(t.id),operations:Gc(t.operations),presenceChange:t.presenceChange?Kc(t.presenceChange):void 0,message:t.message}));return e}function Hc(s){return qr.of(It.fromString(s.serverSeq,!0),s.clientSeq)}function Xc(s){return Bs.create(s.documentKey,Hc(s.checkpoint),s.isRemoved,Co(s.changes),s.snapshot,Se(s.minSyncedTicket))}function xo(s){const e=new Bt;for(const n of s.nodes){const o=Ni(n.element);e.set(n.key,o,o.getPositionedAt())}const t=new it(Se(s.createdAt),e);return t.setMovedAt(Se(s.movedAt)),t.setRemovedAt(Se(s.removedAt)),t}function Ro(s){const e=new kr;for(const n of s.nodes)e.insert(Ni(n.element));const t=new en(Se(s.createdAt),e);return t.setMovedAt(Se(s.movedAt)),t.setRemovedAt(Se(s.removedAt)),t}function Zc(s){const e=ut.of(ut.valueFromBytes(Oo(s.type),s.value),Se(s.createdAt));return e.setMovedAt(Se(s.movedAt)),e.setRemovedAt(Se(s.removedAt)),e}function Qc(s){const e=new Yr;let t=e.getHead();for(const o of s.nodes){const l=e.insertAfter(t,Yc(o));o.insPrevId&&l.setInsPrev(e.findNode(Po(o.insPrevId))),t=l}const n=new wt(e,Se(s.createdAt));return n.setMovedAt(Se(s.movedAt)),n.setRemovedAt(Se(s.removedAt)),n}function eu(s){const e=wn.create(Js(s.type),wn.valueFromBytes(Js(s.type),s.value),Se(s.createdAt));return e.setMovedAt(Se(s.movedAt)),e.setRemovedAt(Se(s.removedAt)),e}function Lo(s){const e=Do(s.nodes);return zt.create(e,Se(s.createdAt))}function Ni(s){if(s.body.case==="jsonObject")return xo(s.body.value);if(s.body.case==="jsonArray")return Ro(s.body.value);if(s.body.case==="primitive")return Zc(s.body.value);if(s.body.case==="text")return Qc(s.body.value);if(s.body.case==="counter")return eu(s.body.value);if(s.body.case==="tree")return Lo(s.body.value);throw new Xe(Ke.Unimplemented,"unimplemented element")}function tu(s){if(!s)return{root:it.create(ht),presences:new Map};const e=Q.Snapshot.fromBinary(s);return{root:Ni(e.root),presences:qc(e.presences)}}function Bo(s){if(!s)throw new Error("bytes is empty");const e=Q.JSONElement.fromBinary(s);return xo(e.body.value)}function Mo(s){return bi(s).toBinary()}function nu(s){if(!s)throw new Error("bytes is empty");const e=Q.JSONElement.fromBinary(s);return Ro(e.body.value)}function ru(s){return So(s).toBinary()}function su(s){if(!s)throw new Error("bytes is empty");const e=Q.JSONElement.fromBinary(s);return Lo(e.body.value)}function iu(s){return Ao(s).toBinary()}function Fo(s){return s?Array.from(s).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Si(s){return Fo(s)}function Jo(s){return new Uint8Array(s.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Ai(s){return Jo(s)}function ou(s){const e=Q.ChangeID.fromBinary(s);return ko(e)}function au(s){const e=Q.Operation.fromBinary(s);return _o(e)}const Ot={fromPresence:Ei,toChangePack:Vc,fromChangePack:Xc,fromChanges:Co,objectToBytes:Mo,bytesToObject:Bo,bytesToSnapshot:tu,bytesToHex:Fo,hexToBytes:Jo,toHexString:Si,toUint8Array:Ai,toOperation:Io,toChangeID:wo,PbChangeID:Q.ChangeID,bytesToChangeID:ou,bytesToOperation:au};class cu{constructor(e,t,n,o){this.reconnectStreamDelay=e,this.doc=t,this.docID=n,this.syncMode=o,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===bn.RealtimeSyncOff?!1:this.syncMode!==bn.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}class Gr{constructor(e,t,n,o){this.id=e,this.delimiter=cn,this.root=t,this.operations=[],this.previousPresence=Nt(n),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=o}static create(e,t,n,o){return new Gr(e,t,n,o)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerElementHasRemovedNodes(e){this.root.registerElementHasRemovedNodes(e)}getChange(){return Pr.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const n of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(n):this.reversePresenceKeys.delete(n)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class ps{constructor(e){this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.removedElementSetByCreatedAt=new Set,this.elementHasRemovedNodesSetByCreatedAt=new Set,this.registerElement(e,void 0)}static create(){return new ps(it.create(ht))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const n=[];for(;t.parent;){const o=t.element.getCreatedAt(),l=t.parent.subPathOf(o);l===void 0&&v.fatal(`cant find the given element: ${o.toIDString()}`),n.unshift(l),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return n.unshift("$"),n}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof St&&e.getDescendants((n,o)=>(this.registerElement(n,o),!1))}deregisterElement(e){let t=0;const n=o=>{const l=o.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(l),this.removedElementSetByCreatedAt.delete(l),t++};return n(e),e instanceof St&&e.getDescendants(o=>(n(o),!1)),t}registerRemovedElement(e){this.removedElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerElementHasRemovedNodes(e){this.elementHasRemovedNodesSetByCreatedAt.add(e.getCreatedAt().toIDString())}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getRemovedElementSetSize(){return this.removedElementSetByCreatedAt.size}getObject(){return this.rootObject}getGarbageLen(){let e=0;const t=new Set;for(const n of this.removedElementSetByCreatedAt){t.add(n);const o=this.elementPairMapByCreatedAt.get(n);o.element instanceof St&&o.element.getDescendants(l=>(t.add(l.getCreatedAt().toIDString()),!1))}e+=t.size;for(const n of this.elementHasRemovedNodesSetByCreatedAt){const l=this.elementPairMapByCreatedAt.get(n).element;e+=l.getRemovedNodesLen()}return e}deepcopy(){return new ps(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const n of this.removedElementSetByCreatedAt){const o=this.elementPairMapByCreatedAt.get(n);o.element.getRemovedAt()&&e.compare(o.element.getRemovedAt())>=0&&(o.parent.purge(o.element),t+=this.deregisterElement(o.element))}for(const n of this.elementHasRemovedNodesSetByCreatedAt){const l=this.elementPairMapByCreatedAt.get(n).element,g=l.purgeRemovedNodesBefore(e);g>0&&this.elementHasRemovedNodesSetByCreatedAt.delete(l.getCreatedAt().toIDString()),t+=g}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function Uo(s,e){const t=new ys(s);return new Proxy(e,t.getHandlers())}class ys{constructor(e){this.context=e,this.handlers={set:(t,n,o)=>(v.isEnabled(T.Trivial)&&v.trivial(`obj[${n}]=${JSON.stringify(o)}`),ys.setInternal(e,t,n,o),!0),get:(t,n)=>(v.isEnabled(T.Trivial)&&v.trivial(`obj[${n}]`),n==="getID"?()=>t.getCreatedAt():n==="toJSON"||n==="toString"?()=>t.toJSON():n==="toJS"?()=>t.toJS():n==="toJSForTest"?()=>t.toJSForTest():Dr(e,t.get(n))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,n)=>(v.isEnabled(T.Trivial)&&v.trivial(`obj[${n}]`),ys.deleteInternal(e,t,n),!0)}}static setInternal(e,t,n,o){if(n.includes("."))throw new Xe(Ke.InvalidObjectKey,"key must not contain the '.'.");const l=e.issueTimeTicket(),g=Ks(e,o,l),I=t.set(n,g,l);e.registerElement(g,t),I&&e.registerRemovedElement(I),e.push(nr.create(n,g.deepcopy(),t.getCreatedAt(),l))}static buildObjectMembers(e,t){const n={};for(const[o,l]of Object.entries(t)){if(o.includes("."))throw new Xe(Ke.InvalidObjectKey,"key must not contain the '.'.");const g=e.issueTimeTicket(),I=Ks(e,l,g);n[o]=I}return n}static deleteInternal(e,t,n){const o=e.issueTimeTicket(),l=t.deleteByKey(n,o);!l||(e.push(jn.create(t.getCreatedAt(),l.getCreatedAt(),o)),e.registerRemovedElement(l))}getHandlers(){return this.handlers}}function uu(s,e){const t=new bt(s,e);return new Proxy(e,t.getHandlers())}function lu(s){return typeof s=="string"||s instanceof String?!isNaN(s):!1}function fu(s){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(s)}class bt{constructor(e,t){this.context=e,this.array=t,this.handlers={get:(n,o,l)=>o==="getID"?()=>n.getCreatedAt():o==="getElementByID"?g=>{const I=n.getByID(g);if(!(!I||I.isRemoved()))return pr(e,I)}:o==="getElementByIndex"?g=>{const I=n.get(g);return pr(e,I)}:o==="getLast"?()=>pr(e,n.getLast()):o==="deleteByID"?g=>{const I=bt.deleteInternalByID(e,n,g);return pr(e,I)}:o==="insertAfter"?(g,I)=>{const x=bt.insertAfterInternal(e,n,g,I);return pr(e,x)}:o==="insertBefore"?(g,I)=>{const x=bt.insertBeforeInternal(e,n,g,I);return pr(e,x)}:o==="moveBefore"?(g,I)=>{bt.moveBeforeInternal(e,n,g,I)}:o==="moveAfter"?(g,I)=>{bt.moveAfterInternal(e,n,g,I)}:o==="moveFront"?g=>{bt.moveFrontInternal(e,n,g)}:o==="moveLast"?g=>{bt.moveLastInternal(e,n,g)}:lu(o)?Dr(e,n.get(Number(o))):o==="push"?g=>bt.pushInternal(e,n,g):o==="splice"?(g,I,...x)=>bt.splice(e,n,g,I,...x):o==="length"?n.length:typeof o=="symbol"&&o===Symbol.iterator?bt.iteratorInternal.bind(this,e,n):o==="includes"?(g,I)=>bt.includes(e,n,g,I):o==="indexOf"?(g,I)=>bt.indexOf(e,n,g,I):o==="lastIndexOf"?(g,I)=>bt.lastIndexOf(e,n,g,I):o==="toJSForTest"?()=>n.toJSForTest():o==="toTestString"?()=>bt.toTestString(n):typeof o=="string"&&fu(o)?(...g)=>{const I=Array.from(n).map(x=>Dr(e,x));return Array.prototype[o].apply(I,g)}:Reflect.get(n,o,l),deleteProperty:(n,o)=>(v.isEnabled(T.Trivial)&&v.trivial(`array[${o}]`),bt.deleteInternalByIndex(e,n,Number.parseInt(o)),!0)}}static*iteratorInternal(e,t){for(const n of t)yield pr(e,n)}static buildArrayElements(e,t){const n=[];for(const o of t){const l=e.issueTimeTicket(),g=Ks(e,o,l);n.push(g)}return n}static pushInternal(e,t,n){return bt.insertAfterInternal(e,t,t.getLastCreatedAt(),n),t.length}static moveBeforeInternal(e,t,n,o){const l=e.issueTimeTicket(),g=t.getPrevCreatedAt(n);t.moveAfter(g,o,l),e.push(vn.create(t.getCreatedAt(),g,o,l))}static moveAfterInternal(e,t,n,o){const l=e.issueTimeTicket();t.moveAfter(n,o,l),e.push(vn.create(t.getCreatedAt(),n,o,l))}static moveFrontInternal(e,t,n){const o=e.issueTimeTicket(),l=t.getHead();t.moveAfter(l.getCreatedAt(),n,o),e.push(vn.create(t.getCreatedAt(),l.getCreatedAt(),n,o))}static moveLastInternal(e,t,n){const o=e.issueTimeTicket(),l=t.getLastCreatedAt();t.moveAfter(l,n,o),e.push(vn.create(t.getCreatedAt(),l,n,o))}static insertAfterInternal(e,t,n,o){const l=e.issueTimeTicket(),g=Ks(e,o,l);return t.insertAfter(n,g),e.registerElement(g,t),e.push(mr.create(t.getCreatedAt(),n,g.deepcopy(),l)),g}static insertBeforeInternal(e,t,n,o){return bt.insertAfterInternal(e,t,t.getPrevCreatedAt(n),o)}static deleteInternalByIndex(e,t,n){const o=e.issueTimeTicket(),l=t.deleteByIndex(n,o);if(!!l)return e.push(jn.create(t.getCreatedAt(),l.getCreatedAt(),o)),e.registerRemovedElement(l),l}static deleteInternalByID(e,t,n){const o=e.issueTimeTicket(),l=t.delete(n,o);return e.push(jn.create(t.getCreatedAt(),l.getCreatedAt(),o)),e.registerRemovedElement(l),l}static splice(e,t,n,o,...l){const g=t.length,I=n>=0?Math.min(n,g):Math.max(g+n,0),x=o===void 0?g:o<0?I:Math.min(I+o,g),_=[];for(let ee=I;ee<x;ee++){const ye=bt.deleteInternalByIndex(e,t,I);if(ye){const te=ye.deepcopy();te.setRemovedAt(),_.push(Dr(e,te))}}if(l){let ee=I===0?t.getHead().getID():t.get(I-1).getID();for(const ye of l)ee=bt.insertAfterInternal(e,t,ee,ye).getID()}return _}static includes(e,t,n,o){var l;const g=t.length,I=o===void 0?0:o<0?Math.max(o+g,0):o;if(I>=g)return!1;if(ut.isSupport(n))return Array.from(t).map(_=>Dr(e,_)).includes(n,I);for(let x=I;x<g;x++)if(((l=t.get(x))===null||l===void 0?void 0:l.getID())===n.getID())return!0;return!1}static indexOf(e,t,n,o){var l;const g=t.length,I=o===void 0?0:o<0?Math.max(o+g,0):o;if(I>=g)return-1;if(ut.isSupport(n))return Array.from(t).map(_=>Dr(e,_)).indexOf(n,I);for(let x=I;x<g;x++)if(((l=t.get(x))===null||l===void 0?void 0:l.getID())===n.getID())return x;return-1}static lastIndexOf(e,t,n,o){var l;const g=t.length,I=o===void 0||o>=g?g-1:o<0?o+g:o;if(I<0)return-1;if(ut.isSupport(n))return Array.from(t).map(_=>Dr(e,_)).lastIndexOf(n,I);for(let x=I;x>0;x--)if(((l=t.get(x))===null||l===void 0?void 0:l.getID())===n.getID())return x;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class $s{constructor(e,t){this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,n,o){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}if(e>t){v.fatal("from should be less than or equal to to");return}const l=this.text.indexRangeToPosRange(e,t);v.isEnabled(T.Debug)&&v.debug(`EDIT: f:${e}->${l[0].toTestString()}, t:${t}->${l[1].toTestString()} c:${n}`);const g=o?hr(o):void 0,I=this.context.issueTimeTicket(),[x,,_]=this.text.edit(l,n,I,g);return this.context.push(new Mt(this.text.getCreatedAt(),l[0],l[1],x,n,g?new Map(Object.entries(g)):new Map,I)),l[0].equals(l[1])||this.context.registerElementHasRemovedNodes(this.text),this.text.findIndexesFromRange(_)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,n){if(!this.context||!this.text)return v.fatal("it is not initialized yet"),!1;if(e>t)return v.fatal("from should be less than or equal to to"),!1;const o=this.text.indexRangeToPosRange(e,t);v.isEnabled(T.Debug)&&v.debug(`STYL: f:${e}->${o[0].toTestString()}, t:${t}->${o[1].toTestString()} a:${JSON.stringify(n)}`);const l=hr(n),g=this.context.issueTimeTicket(),[I]=this.text.setStyle(o,l,g);return this.context.push(new Ft(this.text.getCreatedAt(),o[0],o[1],I,new Map(Object.entries(l)),g)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([Rn.fromStruct(e[0]),Rn.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(v.fatal("it is not initialized yet"),""):this.text.toString()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class js{constructor(e,t){this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){v.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),n=ut.of(e,t);if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`);return this.counter.increase(n),this.context.push(Wr.create(this.counter.getCreatedAt(),n,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function ki(s,e,t){const{type:n}=s,o=t.issueTimeTicket();if(n===Wt){$o(s);const{value:l}=s,g=Ie.create(ge.of(o,0),n,l);e.append(g)}else{const{children:l=[]}=s;let{attributes:g}=s,I;if(typeof g=="object"&&!Lt(g)){g=hr(g),I=new _t;for(const[_,ee]of Object.entries(g))I.set(_,ee,o)}const x=Ie.create(ge.of(o,0),n,void 0,I);e.append(x);for(const _ of l)ki(_,x,t)}}function du(s,e){const{type:t}=e,n=s.issueTimeTicket();let o;if(e.type===Wt){const{value:l}=e;o=Ie.create(ge.of(n,0),t,l)}else if(e){const{children:l=[]}=e;let{attributes:g}=e,I;if(typeof g=="object"&&!Lt(g)){g=hr(g),I=new _t;for(const[x,_]of Object.entries(g))I.set(x,_,n)}o=Ie.create(ge.of(s.issueTimeTicket(),0),t,void 0,I);for(const x of l)ki(x,o,s)}return o}function $o(s){if(!s.value.length)throw new Error("text node cannot have empty value");return!0}function jo(s){if(!s.length)return!0;if(s[0].type===Wt)for(const t of s){const{type:n}=t;if(n!==Wt)throw new Error("element node and text node cannot be passed together");$o(t)}else for(const t of s){const{type:n}=t;if(n===Wt)throw new Error("element node and text node cannot be passed together")}return!0}class Vs{constructor(e){this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Ie.create(ge.of(e.issueTimeTicket(),0),Sn);const t=Ie.create(ge.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const n of this.initialRoot.children)ki(n,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[n,o]=this.tree.pathToPosRange(e),l=this.context.issueTimeTicket(),g=t?hr(t):void 0;this.tree.style([n,o],g,l),this.context.push(rr.create(this.tree.getCreatedAt(),n,o,g?new Map(Object.entries(g)):new Map,l))}style(e,t,n){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),l=this.tree.findPos(t),g=this.context.issueTimeTicket(),I=n?hr(n):void 0;this.tree.style([o,l],I,g),this.context.push(rr.create(this.tree.getCreatedAt(),o,l,I?new Map(Object.entries(I)):new Map,g))}removeStyle(e,t,n){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),l=this.tree.findPos(t),g=this.context.issueTimeTicket();this.tree.removeStyle([o,l],n,g),this.context.push(rr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),o,l,n,g))}editInternal(e,t,n,o=0){var l;if(n.length!==0&&n[0]&&(jo(n),n[0].type!==Wt))for(const _ of n){const{children:ee=[]}=_;jo(ee)}const g=this.context.getLastTimeTicket();let I=new Array;if(((l=n[0])===null||l===void 0?void 0:l.type)===Wt){let _="";for(const ee of n){const{value:ye}=ee;_+=ye}I.push(Ie.create(ge.of(this.context.issueTimeTicket(),0),Wt,_))}else I=n.map(_=>_&&du(this.context,_)).filter(_=>_);const[,x]=this.tree.edit([e,t],I.length?I.map(_=>_==null?void 0:_.deepcopy()):void 0,o,g,()=>this.context.issueTimeTicket());return this.context.push(Or.create(this.tree.getCreatedAt(),e,t,I.length?I:void 0,o,x,g)),e.equals(t)||this.context.registerElementHasRemovedNodes(this.tree),!0}editByPath(e,t,n,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const l=this.tree.pathToPos(e),g=this.tree.pathToPos(t);return this.editInternal(l,g,n?[n]:[],o)}editBulkByPath(e,t,n,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const l=this.tree.pathToPos(e),g=this.tree.pathToPos(t);return this.editInternal(l,g,n,o)}edit(e,t,n,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const l=this.tree.findPos(e),g=this.tree.findPos(t);return this.editInternal(l,g,n?[n]:[],o)}editBulk(e,t,n,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const l=this.tree.findPos(e),g=this.tree.findPos(t);return this.editInternal(l,g,n,o)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){v.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],n=this.tree.indexRangeToPosRange(t);return[n[0].toStruct(),n[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){v.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){v.fatal("it is not initialized yet");return}const t=[me.fromStruct(e[0]),me.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree){v.fatal("it is not initialized yet");return}const t=[me.fromStruct(e[0]),me.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function Vo(s,e){return Uo(s,e)}function pr(s,e){if(e){if(e instanceof ut)return e;if(e instanceof it)return Uo(s,e);if(e instanceof en)return uu(s,e);if(e instanceof wt)return new $s(s,e);if(e instanceof wn){const t=new js(At.IntegerCnt,0);return t.initialize(s,e),t}else if(e instanceof zt){const t=new Vs;return t.initialize(s,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Dr(s,e){const t=pr(s,e);return t instanceof ut?t.getValue():t}function Ks(s,e,t){let n;if(ut.isSupport(e))n=ut.of(e,t);else if(Array.isArray(e))n=en.create(t,bt.buildArrayElements(s,e));else if(typeof e=="object")e instanceof $s?(n=wt.create(Yr.create(),t),e.initialize(s,n)):e instanceof js?(n=wn.create(e.getValueType(),e.getValue(),t),e.initialize(s,n)):e instanceof Vs?(n=zt.create(e.buildRoot(s),t),e.initialize(s,n)):n=it.create(t,ys.buildObjectMembers(s,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return n}const Ko=50;class hu{constructor(){this.undoStack=[],this.redoStack=[]}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Ko&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Ko&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const qo="yorkie-devtools-panel",Yo="yorkie-devtools-sdk";let Hr="disconnected";const Wo=new Map,Oi=new Map;function qs(s,e){!((e==null?void 0:e.force)||Hr!=="disconnected")||window.postMessage({source:Yo,...s},"*")}function mu(s){if(!s.isEnableDevtools()||Wo.has(s.getKey()))return;Oi.set(s.getKey(),[]);const e=s.subscribe("all",t=>{Oi.get(s.getKey()).push(t),Hr==="synced"&&qs({msg:"doc::sync::partial",docKey:s.getKey(),event:t})});Wo.set(s.getKey(),[e]),qs({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var n;if(((n=t.data)===null||n===void 0?void 0:n.source)!==qo)return;switch(t.data.msg){case"devtools::connect":if(Hr!=="disconnected")break;Hr="connected",qs({msg:"doc::available",docKey:s.getKey()}),v.info(`[YD] Devtools connected. Doc: ${s.getKey()}`);break;case"devtools::disconnect":Hr="disconnected",v.info(`[YD] Devtools disconnected. Doc: ${s.getKey()}`);break;case"devtools::subscribe":Hr="synced",qs({msg:"doc::sync::full",docKey:s.getKey(),events:Oi.get(s.getKey())}),v.info(`[YD] Devtools subscribed. Doc: ${s.getKey()}`);break}})}var Gt;(function(s){s.Detached="detached",s.Attached="attached",s.Removed="removed"})(Gt||(Gt={}));var Pe;(function(s){s.StatusChanged="status-changed",s.Snapshot="snapshot",s.LocalChange="local-change",s.RemoteChange="remote-change",s.Initialized="initialized",s.Watched="watched",s.Unwatched="unwatched",s.PresenceChanged="presence-changed"})(Pe||(Pe={}));class zo{constructor(e,t){this.opts=t||{},this.key=e,this.status=Gt.Detached,this.root=ps.create(),this.changeID=Sc,this.checkpoint=Ac,this.localChanges=[],this.eventStream=Y(n=>{this.eventStreamObserver=n}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new hu,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},mu(this)}update(e,t){if(this.getStatus()===Gt.Removed)throw new Xe(Ke.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const n=this.changeID.getActorID(),o=Gr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(n)||{},t);try{const l=Vo(o,this.clone.root.getObject());this.presences.has(n)||this.clone.presences.set(n,{}),this.isUpdating=!0,e(l,new Vt(o,this.clone.presences.get(n)))}catch(l){throw this.clone=void 0,v.error(l),l}finally{this.isUpdating=!1}if(o.hasChange()){v.isEnabled(T.Trivial)&&v.trivial(`trying to update a local change: ${this.toJSON()}`);const l=o.getChange(),{opInfos:g,reverseOps:I}=l.execute(this.root,this.presences,Je.Local),x=o.getReversePresence();x&&I.push({type:"presence",value:x}),this.localChanges.push(l),I.length>0&&this.internalHistory.pushUndo(I),g.length>0&&this.internalHistory.clearRedo(),this.changeID=l.getID();const _=[];g.length>0&&_.push({type:Pe.LocalChange,source:Je.Local,value:{message:l.getMessage()||"",operations:g,actor:n},rawChange:this.isEnableDevtools()?l.toStruct():void 0}),l.hasPresenceChange()&&_.push({type:Pe.PresenceChanged,source:Je.Local,value:{clientID:n,presence:this.getPresence(n)}}),this.publish(_),v.isEnabled(T.Trivial)&&v.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,n,o){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const I=t;return this.eventStream.subscribe(x=>{for(const _ of x)_.type!==Pe.Initialized&&_.type!==Pe.Watched&&_.type!==Pe.Unwatched&&_.type!==Pe.PresenceChanged||I(_)},n,o)}if(e==="my-presence"){const I=t;return this.eventStream.subscribe(x=>{for(const _ of x)_.type!==Pe.Initialized&&_.type!==Pe.Watched&&_.type!==Pe.Unwatched&&_.type!==Pe.PresenceChanged||_.type!==Pe.Initialized&&_.value.clientID!==this.changeID.getActorID()||I(_)},n,o)}if(e==="others"){const I=t;return this.eventStream.subscribe(x=>{for(const _ of x)_.type!==Pe.Watched&&_.type!==Pe.Unwatched&&_.type!==Pe.PresenceChanged||_.value.clientID!==this.changeID.getActorID()&&I(_)},n,o)}if(e==="all"){const I=t;return this.eventStream.subscribe(I,n,o)}const l=e,g=t;return this.eventStream.subscribe(I=>{for(const x of I){if(x.type!==Pe.Snapshot&&x.type!==Pe.LocalChange&&x.type!==Pe.RemoteChange)continue;if(x.type===Pe.Snapshot){l==="$"&&g(x);continue}const _=[];for(const ee of x.value.operations)this.isSameElementOrChildOf(ee.path,l)&&_.push(ee);_.length&&g({...x,value:{...x.value,operations:_}})}},n,o)}if(typeof e=="function"){const l=e,g=t,I=n;return this.eventStream.subscribe(x=>{for(const _ of x)_.type!==Pe.Snapshot&&_.type!==Pe.LocalChange&&_.type!==Pe.RemoteChange||l(_)},g,I)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const n=e.split(".");return t.split(".").every((l,g)=>l===n[g])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),Je.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus(Gt.Removed),v.isEnabled(T.Trivial)&&v.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Nt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Bs.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Gr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Vo(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t){const{root:n,presences:o}=Ot.bytesToSnapshot(t);this.root=new ps(n),this.presences=o,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:Pe.Snapshot,source:Je.Remote,value:{snapshot:this.isEnableDevtools()?Ot.bytesToHex(t):void 0,serverSeq:e.toString()}}])}applyChanges(e,t){v.isEnabled(T.Debug)&&v.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getRemovedElementSetSize()}`),v.isEnabled(T.Trivial)&&v.trivial(e.map(n=>`${n.getID().toTestString()}	${n.toTestString()}`).join(`
`));for(const n of e)this.applyChange(n,t);v.isEnabled(T.Debug)&&v.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getRemovedElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const n=[],o=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(o)){const g=e.getPresenceChange();switch(g.type){case Tn.Put:n.push(this.presences.has(o)?{type:Pe.PresenceChanged,source:t,value:{clientID:o,presence:g.presence}}:{type:Pe.Watched,source:Je.Remote,value:{clientID:o,presence:g.presence}});break;case Tn.Clear:n.push({type:Pe.Unwatched,source:Je.Remote,value:{clientID:o,presence:this.getPresence(o)}}),this.removeOnlineClient(o);break}}const{opInfos:l}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),l.length>0){const g=this.isEnableDevtools()?e.toStruct():void 0;n.push(t===Je.Remote?{type:Pe.RemoteChange,source:t,value:{actor:o,message:e.getMessage()||"",operations:l},rawChange:g}:{type:Pe.LocalChange,source:t,value:{actor:o,message:e.getMessage()||"",operations:l},rawChange:g})}n.length>0&&this.publish(n)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,n=new Set;for(const o of t)n.add(o);this.setOnlineClients(n),this.publish([{type:Pe.Initialized,source:Je.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:n}=e.body.value,o=[];if(t===Q.DocEventType.DOCUMENT_WATCHED)this.addOnlineClient(n),this.hasPresence(n)&&o.push({type:Pe.Watched,source:Je.Remote,value:{clientID:n,presence:this.getPresence(n)}});else if(t===Q.DocEventType.DOCUMENT_UNWATCHED){const l=this.getPresence(n);this.removeOnlineClient(n),l&&o.push({type:Pe.Unwatched,source:Je.Remote,value:{clientID:n,presence:l}})}o.length>0&&this.publish(o)}}applyStatus(e){this.status=e,e===Gt.Detached&&this.setActor(Kt),this.publish([{source:e===Gt.Removed?Je.Remote:Je.Local,type:Pe.StatusChanged,value:e===Gt.Attached?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type===Pe.StatusChanged){this.applyStatus(e.value.status),e.value.status===Gt.Attached&&this.setActor(e.value.actorID);return}if(e.type===Pe.Snapshot){const{snapshot:t,serverSeq:n}=e.value;if(!t)return;this.applySnapshot(It.fromString(n),Ot.hexToBytes(t));return}if(e.type===Pe.LocalChange||e.type===Pe.RemoteChange){if(!e.rawChange)return;const t=Pr.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type===Pe.Initialized){const t=new Set;for(const{clientID:n,presence:o}of e.value)t.add(n),this.presences.set(n,o);this.setOnlineClients(t);return}if(e.type===Pe.Watched){const{clientID:t,presence:n}=e.value;this.addOnlineClient(t),this.presences.set(t,n);return}if(e.type===Pe.Unwatched){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type===Pe.PresenceChanged){const{clientID:t,presence:n}=e.value;this.presences.set(t,n)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new Xe(Ke.InvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let n=this.getRoot();for(const o of t)if(n=n[o],n===void 0)return;return n}setOnlineClients(e){this.onlineClients=e}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!==Gt.Attached)return{};const e=this.presences.get(this.changeID.getActorID());return e?Nt(e):{}}getPresence(e){if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Nt(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Nt(t):void 0}getPresences(){const e=[];for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Nt(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,n)=>t.clientID>n.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=Gr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const _ of e){if(!(_ instanceof mt)){new Vt(t,Nt(this.clone.presences.get(this.changeID.getActorID()))).set(_.value,{addToHistory:!0});continue}const ee=t.issueTimeTicket();_.setExecutedAt(ee),t.push(_)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,Je.UndoRedo);const{opInfos:o,reverseOps:l}=n.execute(this.root,this.presences,Je.UndoRedo),g=t.getReversePresence();if(g&&l.push({type:"presence",value:g}),l.length>0&&this.internalHistory.pushRedo(l),!n.hasPresenceChange()&&o.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const I=this.changeID.getActorID(),x=[];o.length>0&&x.push({type:Pe.LocalChange,source:Je.UndoRedo,value:{message:n.getMessage()||"",operations:o,actor:I},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&x.push({type:Pe.PresenceChanged,source:Je.UndoRedo,value:{clientID:I,presence:this.getPresence(I)}}),this.publish(x)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=Gr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const _ of e){if(!(_ instanceof mt)){new Vt(t,Nt(this.clone.presences.get(this.changeID.getActorID()))).set(_.value,{addToHistory:!0});continue}const ee=t.issueTimeTicket();_.setExecutedAt(ee),t.push(_)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,Je.UndoRedo);const{opInfos:o,reverseOps:l}=n.execute(this.root,this.presences,Je.UndoRedo),g=t.getReversePresence();if(g&&l.push({type:"presence",value:g}),l.length>0&&this.internalHistory.pushUndo(l),!n.hasPresenceChange()&&o.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const I=this.changeID.getActorID(),x=[];o.length>0&&x.push({type:Pe.LocalChange,source:Je.UndoRedo,value:{message:n.getMessage()||"",operations:o,actor:I},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&x.push({type:Pe.PresenceChanged,source:Je.UndoRedo,value:{clientID:I,presence:this.getPresence(I)}}),this.publish(x)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function gu(s,e){return t=>async n=>(s&&n.header.set("x-api-key",s),e&&n.header.set("authorization",e),await t(n))}const Go=JSON.parse('{"u2":"yorkie-js-sdk","i8":"0.4.18"}');function pu(){return s=>async e=>(e.header.set("x-yorkie-user-agent",Go.u2+"/"+Go.i8),await s(e))}var bn;(function(s){s.Manual="manual",s.Realtime="realtime",s.RealtimePushOnly="realtime-pushonly",s.RealtimeSyncOff="realtime-syncoff"})(bn||(bn={}));var yr;(function(s){s.Deactivated="deactivated",s.Activated="activated"})(yr||(yr={}));var Xr;(function(s){s.Connected="connected",s.Disconnected="disconnected"})(Xr||(Xr={}));var Zr;(function(s){s.Synced="synced",s.SyncFailed="sync-failed"})(Zr||(Zr={}));var Pn;(function(s){s.StatusChanged="status-changed",s.DocumentChanged="document-changed",s.StreamConnectionStatusChanged="stream-connection-status-changed",s.DocumentSynced="document-synced"})(Pn||(Pn={}));const Ys={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class Ho{constructor(e,t){t=t||Ys,this.key=t.key?t.key:y(),this.status=yr.Deactivated,this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.syncLoopDuration=t.syncLoopDuration||Ys.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||Ys.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||Ys.retrySyncLoopDelay,this.rpcClient=de(In.V,En({baseUrl:e,interceptors:[gu(t.apiKey,t.token),pu()]})),this.eventStream=Y(n=>{this.eventStreamObserver=n})}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status=yr.Activated,this.runSyncLoop(),this.eventStreamObserver.next({type:Pn.StatusChanged,value:this.status}),v.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw v.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){if(this.status===yr.Deactivated)return Promise.resolve();for(const[e]of this.attachmentMap)this.detachInternal(e);return this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.status=yr.Deactivated,this.eventStreamObserver.next({type:Pn.StatusChanged,value:this.status}),v.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw v.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,t={}){var n;if(!this.isActive())throw new Xe(Ke.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==Gt.Detached)throw new Xe(Ke.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((l,g)=>g.set(t.initialPresence||{}));const o=(n=t.syncMode)!==null&&n!==void 0?n:bn.Realtime;return this.rpcClient.attachDocument({clientId:this.id,changePack:Ot.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async l=>{const g=Ot.fromChangePack(l.changePack);return e.applyChangePack(g),e.getStatus()===Gt.Removed||(e.applyStatus(Gt.Attached),this.attachmentMap.set(e.getKey(),new cu(this.reconnectStreamDelay,e,l.documentId,o)),o!==bn.Manual&&await this.runWatchLoop(e.getKey()),v.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(l=>{throw v.error(`[AD] c:"${this.getKey()}" err :`,l),l})}detach(e,t={}){var n;if(!this.isActive())throw new Xe(Ke.ClientNotActive,`${this.key} is not active`);const o=this.attachmentMap.get(e.getKey());if(!o)throw new Xe(Ke.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((l,g)=>g.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:o.docID,changePack:Ot.toChangePack(e.createChangePack()),removeIfNotAttached:(n=t.removeIfNotAttached)!==null&&n!==void 0?n:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(l=>{const g=Ot.fromChangePack(l.changePack);return e.applyChangePack(g),e.getStatus()!==Gt.Removed&&e.applyStatus(Gt.Detached),this.detachInternal(e.getKey()),v.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(l=>{throw v.error(`[DD] c:"${this.getKey()}" err :`,l),l})}async changeSyncMode(e,t){if(!this.isActive())throw new Xe(Ke.ClientNotActive,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new Xe(Ke.DocumentNotAttached,`${e.getKey()} is not attached`);const o=n.syncMode;return o===t?e:(n.changeSyncMode(t),t===bn.Manual?(n.cancelWatchStream(),e):(t===bn.Realtime&&(n.remoteChangeEventReceived=!0),o===bn.Manual&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new Xe(Ke.ClientNotActive,`${this.key} is not active`);const t=[];if(e){const n=this.attachmentMap.get(e.getKey());if(!n)throw new Xe(Ke.DocumentNotAttached,`${e.getKey()} is not attached`);t.push(this.syncInternal(n,bn.Realtime))}else this.attachmentMap.forEach(n=>{t.push(this.syncInternal(n,n.syncMode))});return Promise.all(t).catch(n=>{throw this.eventStreamObserver.next({type:Pn.DocumentSynced,value:Zr.SyncFailed}),n})}remove(e){if(!this.isActive())throw new Xe(Ke.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Xe(Ke.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const n=Ot.toChangePack(e.createChangePack());return n.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:n},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(o=>{const l=Ot.fromChangePack(o.changePack);e.applyChangePack(l),this.detachInternal(e.getKey()),v.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(o=>{throw v.error(`[RD] c:"${this.getKey()}" err :`,o),o})}subscribe(e,t,n){return this.eventStream.subscribe(e,t,n)}getID(){return this.id}getKey(){return this.key}isActive(){return this.status===yr.Activated}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){v.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const t=[];for(const[,n]of this.attachmentMap)n.needRealtimeSync()&&(n.remoteChangeEventReceived=!1,t.push(this.syncInternal(n,n.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(n=>{v.error(`[SL] c:"${this.getKey()}" sync failed:`,n),this.eventStreamObserver.next({type:Pn.DocumentSynced,value:Zr.SyncFailed}),setTimeout(e,this.retrySyncLoopDelay)})};v.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new Xe(Ke.DocumentNotAttached,`${e} is not attached`);return t.runWatchLoop(n=>{if(!this.isActive())return Promise.reject(new Xe(Ke.ClientNotActive,`${this.key} is not active`));const o=new AbortController,l=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:o.signal});return this.eventStreamObserver.next({type:Pn.StreamConnectionStatusChanged,value:Xr.Connected}),v.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((g,I)=>{(async()=>{try{for await(const _ of l)this.handleWatchDocumentsResponse(t,_),_.body.case==="initialization"&&g([l,o])}catch(_){this.eventStreamObserver.next({type:Pn.StreamConnectionStatusChanged,value:Xr.Disconnected}),v.debug(`[WD] c:"${this.getKey()}" unwatches`),n(),I(_)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Q.DocEventType.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0,this.eventStreamObserver.next({type:Pn.DocumentChanged,value:[e.doc.getKey()]});return}e.doc.applyWatchStream(t)}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),v.debug(`[WD] c:"${this.getKey()}" unwatches`),this.eventStreamObserver.next({type:Pn.StreamConnectionStatusChanged,value:Xr.Disconnected}),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:n,docID:o}=e,l=n.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:o,changePack:Ot.toChangePack(l),pushOnly:t===bn.RealtimePushOnly},{headers:{"x-shard-key":`${this.apiKey}/${n.getKey()}`}}).then(g=>{const I=Ot.fromChangePack(g.changePack);if(I.hasChanges()&&e.syncMode===bn.RealtimePushOnly)return n;n.applyChangePack(I),this.eventStreamObserver.next({type:Pn.DocumentSynced,value:Zr.Synced}),n.getStatus()===Gt.Removed&&this.detachInternal(n.getKey());const x=n.getKey(),_=I.getChangeSize();return v.info(`[PP] c:"${this.getKey()}" sync d:"${x}", push:${l.getChangeSize()} pull:${_} cp:${I.getCheckpoint().toTestString()}`),n}).catch(g=>{throw v.error(`[PP] c:"${this.getKey()}" err :`,g),g})}}const yu={Client:Ho,Document:zo,Primitive:ut,Text:$s,Counter:js,Tree:Vs,IntType:At.IntegerCnt,LongType:At.LongCnt}})(),p})())})(Ic);const Nc=zf(Ic.exports),Gf=(r,a)=>{const f=r.__vccOpts||r;for(const[h,m]of a)f[h]=m;return f},Hf=[{title:"Todo",cards:[{title:"Pruning document"},{title:"Clean up codes"}]},{title:"Doing",cards:[{title:"Array operations"}]},{title:"Done",cards:[{title:"Create a sample page"},{title:"Launch demo site"}]}],vr=new Nc.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"}),or=new Nc.Document(`vuejs-kanban-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`),Xf={data(){return{lists:[],title:"",opened:null}},created(){this.fetchDoc()},beforeUnmount(){this.disconnect()},watch:{opened(r){this.$nextTick(function(){r===0?this.$refs.addListForm.querySelector("input").focus():r&&this.$refs.addCardForm[r-1].querySelector("input").focus(),this.title=""})}},methods:{async fetchDoc(){await vr.activate(),await vr.attach(or),or.update(r=>{r.lists||(r.lists=Hf)},"create default list if not exists"),or.subscribe(r=>{this.lists=or.getRoot().lists}),await vr.sync(),this.lists=or.getRoot().lists},async disconnect(){await vr.deactivate()},isOpened(r){return this.opened===r},openForm(r){this.opened=r},closeForm(){this.opened=null},addCard(r){this.title!==""&&or.update(a=>{a.lists.getElementByID(r.getID()).cards.push({title:this.title}),this.title=""},`add new card by ${vr.getID()}`)},deleteCard(r,a){or.update(f=>{f.lists.getElementByID(r.getID()).cards.deleteByID(a.getID())},`delete a card by ${vr.getID()}`)},addList(){this.title!==""&&or.update(r=>{r.lists.push({title:this.title,cards:[]}),this.title=""},`add new list by ${vr.getID()}`)},deleteList(r){or.update(a=>{a.lists.deleteByID(r.getID())},`delete a list by ${vr.getID()}`)}}},Zf={class:"list"},Qf=["onClick"],ed={class:"title"},td={class:"card"},nd=["onClick"],rd={key:0,class:"add-form"},sd=["onKeyup"],id={class:"buttons"},od=["onClick"],ad=["onClick"],cd={class:"add-list",ref:"addListForm"},ud={key:0,class:"add-form"},ld={class:"buttons"};function fd(r,a,f,h,m,p){return sr(),ir(Dn,null,[(sr(!0),ir(Dn,null,la(m.lists,(E,T)=>(sr(),ir("div",Zf,[rn("span",{class:"delete",onClick:b=>p.deleteList(E)},"\u274C",8,Qf),rn("div",ed,Qo(E.title),1),(sr(!0),ir(Dn,null,la(E.cards,b=>(sr(),ir("div",td,[rn("span",{class:"delete",onClick:d=>p.deleteCard(E,b)},"\u274C",8,nd),wc(" "+Qo(b.title),1)]))),256)),rn("div",{class:"add-card",ref_for:!0,ref:"addCardForm"},[p.isOpened(T+1)?(sr(),ir("div",rd,[ua(rn("input",{type:"text",placeholder:"Enter card title","onUpdate:modelValue":a[0]||(a[0]=b=>m.title=b),onKeyup:[Qs(b=>p.addCard(E),["enter"]),a[1]||(a[1]=Qs(b=>p.closeForm(),["esc"]))]},null,40,sd),[[_a,m.title]]),rn("div",id,[rn("input",{type:"button",value:"Add",onClick:b=>p.addCard(E)},null,8,od),rn("input",{type:"button",value:"Close",class:"pull-right",onClick:a[2]||(a[2]=b=>p.closeForm())})])])):(sr(),ir("div",{key:1,class:"add-card-opener",onClick:b=>p.openForm(T+1)},"Add another card",8,ad))],512)]))),256)),rn("div",cd,[p.isOpened(0)?(sr(),ir("div",ud,[ua(rn("input",{type:"text",placeholder:"Enter list title","onUpdate:modelValue":a[3]||(a[3]=E=>m.title=E),onKeyup:[a[4]||(a[4]=Qs(E=>p.addList(),["enter"])),a[5]||(a[5]=Qs(E=>p.closeForm(),["esc"]))]},null,544),[[_a,m.title]]),rn("div",ld,[rn("input",{type:"button",value:"Add",onClick:a[6]||(a[6]=E=>p.addList())}),rn("input",{type:"button",value:"Close",class:"pull-right",onClick:a[7]||(a[7]=E=>p.closeForm())})])])):(sr(),ir("div",{key:1,class:"add-list-opener",onClick:a[8]||(a[8]=E=>p.openForm(0))},"Add another list"))],512)],64)}const dd=Gf(Xf,[["render",fd]]);qf(dd).mount("#app");
