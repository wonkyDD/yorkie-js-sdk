(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const y of m)if(y.type==="childList")for(const w of y.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&d(w)}).observe(document,{childList:!0,subtree:!0});function l(m){const y={};return m.integrity&&(y.integrity=m.integrity),m.referrerpolicy&&(y.referrerPolicy=m.referrerpolicy),m.crossorigin==="use-credentials"?y.credentials="include":m.crossorigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function d(m){if(m.ep)return;m.ep=!0;const y=l(m);fetch(m.href,y)}})();function zi(n,a){const l=Object.create(null),d=n.split(",");for(let m=0;m<d.length;m++)l[d[m]]=!0;return a?m=>!!l[m.toLowerCase()]:m=>!!l[m]}function Gi(n){if(xe(n)){const a={};for(let l=0;l<n.length;l++){const d=n[l],m=Dt(d)?mc(d):Gi(d);if(m)for(const y in m)a[y]=m[y]}return a}else{if(Dt(n))return n;if(Tt(n))return n}}const fc=/;(?![^(]*\))/g,dc=/:([^]+)/,hc=/\/\*.*?\*\//gs;function mc(n){const a={};return n.replace(hc,"").split(fc).forEach(l=>{if(l){const d=l.split(dc);d.length>1&&(a[d[0].trim()]=d[1].trim())}}),a}function Hi(n){let a="";if(Dt(n))a=n;else if(xe(n))for(let l=0;l<n.length;l++){const d=Hi(n[l]);d&&(a+=d+" ")}else if(Tt(n))for(const l in n)n[l]&&(a+=l+" ");return a.trim()}const gc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pc=zi(gc);function va(n){return!!n||n===""}const Uo=n=>Dt(n)?n:n==null?"":xe(n)||Tt(n)&&(n.toString===Na||!Je(n.toString))?JSON.stringify(n,wa,2):String(n),wa=(n,a)=>a&&a.__v_isRef?wa(n,a.value):rs(a)?{[`Map(${a.size})`]:[...a.entries()].reduce((l,[d,m])=>(l[`${d} =>`]=m,l),{})}:ba(a)?{[`Set(${a.size})`]:[...a.values()]}:Tt(a)&&!xe(a)&&!Ia(a)?String(a):a,ft={},ns=[],Bn=()=>{},yc=()=>!1,Tc=/^on[^a-z]/,ii=n=>Tc.test(n),Xi=n=>n.startsWith("onUpdate:"),qt=Object.assign,Zi=(n,a)=>{const l=n.indexOf(a);l>-1&&n.splice(l,1)},vc=Object.prototype.hasOwnProperty,Xe=(n,a)=>vc.call(n,a),xe=Array.isArray,rs=n=>oi(n)==="[object Map]",ba=n=>oi(n)==="[object Set]",Je=n=>typeof n=="function",Dt=n=>typeof n=="string",Qi=n=>typeof n=="symbol",Tt=n=>n!==null&&typeof n=="object",Ea=n=>Tt(n)&&Je(n.then)&&Je(n.catch),Na=Object.prototype.toString,oi=n=>Na.call(n),wc=n=>oi(n).slice(8,-1),Ia=n=>oi(n)==="[object Object]",eo=n=>Dt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Gs=zi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ai=n=>{const a=Object.create(null);return l=>a[l]||(a[l]=n(l))},bc=/-(\w)/g,os=ai(n=>n.replace(bc,(a,l)=>l?l.toUpperCase():"")),Ec=/\B([A-Z])/g,Ur=ai(n=>n.replace(Ec,"-$1").toLowerCase()),Sa=ai(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ai=ai(n=>n?`on${Sa(n)}`:""),ei=(n,a)=>!Object.is(n,a),Hs=(n,a)=>{for(let l=0;l<n.length;l++)n[l](a)},ti=(n,a,l)=>{Object.defineProperty(n,a,{configurable:!0,enumerable:!1,value:l})},ni=n=>{const a=parseFloat(n);return isNaN(a)?n:a};let $o;const Nc=()=>$o||($o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let qn;class Ic{constructor(a=!1){this.detached=a,this.active=!0,this.effects=[],this.cleanups=[],this.parent=qn,!a&&qn&&(this.index=(qn.scopes||(qn.scopes=[])).push(this)-1)}run(a){if(this.active){const l=qn;try{return qn=this,a()}finally{qn=l}}}on(){qn=this}off(){qn=this.parent}stop(a){if(this.active){let l,d;for(l=0,d=this.effects.length;l<d;l++)this.effects[l].stop();for(l=0,d=this.cleanups.length;l<d;l++)this.cleanups[l]();if(this.scopes)for(l=0,d=this.scopes.length;l<d;l++)this.scopes[l].stop(!0);if(!this.detached&&this.parent&&!a){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.parent=void 0,this.active=!1}}}function Sc(n,a=qn){a&&a.active&&a.effects.push(n)}const to=n=>{const a=new Set(n);return a.w=0,a.n=0,a},Aa=n=>(n.w&yr)>0,ka=n=>(n.n&yr)>0,Ac=({deps:n})=>{if(n.length)for(let a=0;a<n.length;a++)n[a].w|=yr},kc=n=>{const{deps:a}=n;if(a.length){let l=0;for(let d=0;d<a.length;d++){const m=a[d];Aa(m)&&!ka(m)?m.delete(n):a[l++]=m,m.w&=~yr,m.n&=~yr}a.length=l}},Ri=new WeakMap;let ws=0,yr=1;const Li=30;let Rn;const Mr=Symbol(""),Bi=Symbol("");class no{constructor(a,l=null,d){this.fn=a,this.scheduler=l,this.active=!0,this.deps=[],this.parent=void 0,Sc(this,d)}run(){if(!this.active)return this.fn();let a=Rn,l=gr;for(;a;){if(a===this)return;a=a.parent}try{return this.parent=Rn,Rn=this,gr=!0,yr=1<<++ws,ws<=Li?Ac(this):jo(this),this.fn()}finally{ws<=Li&&kc(this),yr=1<<--ws,Rn=this.parent,gr=l,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Rn===this?this.deferStop=!0:this.active&&(jo(this),this.onStop&&this.onStop(),this.active=!1)}}function jo(n){const{deps:a}=n;if(a.length){for(let l=0;l<a.length;l++)a[l].delete(n);a.length=0}}let gr=!0;const Oa=[];function us(){Oa.push(gr),gr=!1}function cs(){const n=Oa.pop();gr=n===void 0?!0:n}function In(n,a,l){if(gr&&Rn){let d=Ri.get(n);d||Ri.set(n,d=new Map);let m=d.get(l);m||d.set(l,m=to()),Pa(m)}}function Pa(n,a){let l=!1;ws<=Li?ka(n)||(n.n|=yr,l=!Aa(n)):l=!n.has(Rn),l&&(n.add(Rn),Rn.deps.push(n))}function nr(n,a,l,d,m,y){const w=Ri.get(n);if(!w)return;let T=[];if(a==="clear")T=[...w.values()];else if(l==="length"&&xe(n)){const g=ni(d);w.forEach((h,S)=>{(S==="length"||S>=g)&&T.push(h)})}else switch(l!==void 0&&T.push(w.get(l)),a){case"add":xe(n)?eo(l)&&T.push(w.get("length")):(T.push(w.get(Mr)),rs(n)&&T.push(w.get(Bi)));break;case"delete":xe(n)||(T.push(w.get(Mr)),rs(n)&&T.push(w.get(Bi)));break;case"set":rs(n)&&T.push(w.get(Mr));break}if(T.length===1)T[0]&&Mi(T[0]);else{const g=[];for(const h of T)h&&g.push(...h);Mi(to(g))}}function Mi(n,a){const l=xe(n)?n:[...n];for(const d of l)d.computed&&Vo(d);for(const d of l)d.computed||Vo(d)}function Vo(n,a){(n!==Rn||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const Oc=zi("__proto__,__v_isRef,__isVue"),_a=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Qi)),Pc=ro(),_c=ro(!1,!0),Dc=ro(!0),Ko=Cc();function Cc(){const n={};return["includes","indexOf","lastIndexOf"].forEach(a=>{n[a]=function(...l){const d=et(this);for(let y=0,w=this.length;y<w;y++)In(d,"get",y+"");const m=d[a](...l);return m===-1||m===!1?d[a](...l.map(et)):m}}),["push","pop","shift","unshift","splice"].forEach(a=>{n[a]=function(...l){us();const d=et(this)[a].apply(this,l);return cs(),d}}),n}function ro(n=!1,a=!1){return function(d,m,y){if(m==="__v_isReactive")return!n;if(m==="__v_isReadonly")return n;if(m==="__v_isShallow")return a;if(m==="__v_raw"&&y===(n?a?zc:La:a?Ra:xa).get(d))return d;const w=xe(d);if(!n&&w&&Xe(Ko,m))return Reflect.get(Ko,m,y);const T=Reflect.get(d,m,y);return(Qi(m)?_a.has(m):Oc(m))||(n||In(d,"get",m),a)?T:rn(T)?w&&eo(m)?T:T.value:Tt(T)?n?Ba(T):oo(T):T}}const xc=Da(),Rc=Da(!0);function Da(n=!1){return function(l,d,m,y){let w=l[d];if(Ns(w)&&rn(w)&&!rn(m))return!1;if(!n&&(!Fi(m)&&!Ns(m)&&(w=et(w),m=et(m)),!xe(l)&&rn(w)&&!rn(m)))return w.value=m,!0;const T=xe(l)&&eo(d)?Number(d)<l.length:Xe(l,d),g=Reflect.set(l,d,m,y);return l===et(y)&&(T?ei(m,w)&&nr(l,"set",d,m):nr(l,"add",d,m)),g}}function Lc(n,a){const l=Xe(n,a);n[a];const d=Reflect.deleteProperty(n,a);return d&&l&&nr(n,"delete",a,void 0),d}function Bc(n,a){const l=Reflect.has(n,a);return(!Qi(a)||!_a.has(a))&&In(n,"has",a),l}function Mc(n){return In(n,"iterate",xe(n)?"length":Mr),Reflect.ownKeys(n)}const Ca={get:Pc,set:xc,deleteProperty:Lc,has:Bc,ownKeys:Mc},Fc={get:Dc,set(n,a){return!0},deleteProperty(n,a){return!0}},Jc=qt({},Ca,{get:_c,set:Rc}),so=n=>n,ui=n=>Reflect.getPrototypeOf(n);function js(n,a,l=!1,d=!1){n=n.__v_raw;const m=et(n),y=et(a);l||(a!==y&&In(m,"get",a),In(m,"get",y));const{has:w}=ui(m),T=d?so:l?co:uo;if(w.call(m,a))return T(n.get(a));if(w.call(m,y))return T(n.get(y));n!==m&&n.get(a)}function Vs(n,a=!1){const l=this.__v_raw,d=et(l),m=et(n);return a||(n!==m&&In(d,"has",n),In(d,"has",m)),n===m?l.has(n):l.has(n)||l.has(m)}function Ks(n,a=!1){return n=n.__v_raw,!a&&In(et(n),"iterate",Mr),Reflect.get(n,"size",n)}function qo(n){n=et(n);const a=et(this);return ui(a).has.call(a,n)||(a.add(n),nr(a,"add",n,n)),this}function Yo(n,a){a=et(a);const l=et(this),{has:d,get:m}=ui(l);let y=d.call(l,n);y||(n=et(n),y=d.call(l,n));const w=m.call(l,n);return l.set(n,a),y?ei(a,w)&&nr(l,"set",n,a):nr(l,"add",n,a),this}function Wo(n){const a=et(this),{has:l,get:d}=ui(a);let m=l.call(a,n);m||(n=et(n),m=l.call(a,n)),d&&d.call(a,n);const y=a.delete(n);return m&&nr(a,"delete",n,void 0),y}function zo(){const n=et(this),a=n.size!==0,l=n.clear();return a&&nr(n,"clear",void 0,void 0),l}function qs(n,a){return function(d,m){const y=this,w=y.__v_raw,T=et(w),g=a?so:n?co:uo;return!n&&In(T,"iterate",Mr),w.forEach((h,S)=>d.call(m,g(h),g(S),y))}}function Ys(n,a,l){return function(...d){const m=this.__v_raw,y=et(m),w=rs(y),T=n==="entries"||n===Symbol.iterator&&w,g=n==="keys"&&w,h=m[n](...d),S=l?so:a?co:uo;return!a&&In(y,"iterate",g?Bi:Mr),{next(){const{value:v,done:R}=h.next();return R?{value:v,done:R}:{value:T?[S(v[0]),S(v[1])]:S(v),done:R}},[Symbol.iterator](){return this}}}}function dr(n){return function(...a){return n==="delete"?!1:this}}function Uc(){const n={get(y){return js(this,y)},get size(){return Ks(this)},has:Vs,add:qo,set:Yo,delete:Wo,clear:zo,forEach:qs(!1,!1)},a={get(y){return js(this,y,!1,!0)},get size(){return Ks(this)},has:Vs,add:qo,set:Yo,delete:Wo,clear:zo,forEach:qs(!1,!0)},l={get(y){return js(this,y,!0)},get size(){return Ks(this,!0)},has(y){return Vs.call(this,y,!0)},add:dr("add"),set:dr("set"),delete:dr("delete"),clear:dr("clear"),forEach:qs(!0,!1)},d={get(y){return js(this,y,!0,!0)},get size(){return Ks(this,!0)},has(y){return Vs.call(this,y,!0)},add:dr("add"),set:dr("set"),delete:dr("delete"),clear:dr("clear"),forEach:qs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{n[y]=Ys(y,!1,!1),l[y]=Ys(y,!0,!1),a[y]=Ys(y,!1,!0),d[y]=Ys(y,!0,!0)}),[n,l,a,d]}const[$c,jc,Vc,Kc]=Uc();function io(n,a){const l=a?n?Kc:Vc:n?jc:$c;return(d,m,y)=>m==="__v_isReactive"?!n:m==="__v_isReadonly"?n:m==="__v_raw"?d:Reflect.get(Xe(l,m)&&m in d?l:d,m,y)}const qc={get:io(!1,!1)},Yc={get:io(!1,!0)},Wc={get:io(!0,!1)},xa=new WeakMap,Ra=new WeakMap,La=new WeakMap,zc=new WeakMap;function Gc(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hc(n){return n.__v_skip||!Object.isExtensible(n)?0:Gc(wc(n))}function oo(n){return Ns(n)?n:ao(n,!1,Ca,qc,xa)}function Xc(n){return ao(n,!1,Jc,Yc,Ra)}function Ba(n){return ao(n,!0,Fc,Wc,La)}function ao(n,a,l,d,m){if(!Tt(n)||n.__v_raw&&!(a&&n.__v_isReactive))return n;const y=m.get(n);if(y)return y;const w=Hc(n);if(w===0)return n;const T=new Proxy(n,w===2?d:l);return m.set(n,T),T}function ss(n){return Ns(n)?ss(n.__v_raw):!!(n&&n.__v_isReactive)}function Ns(n){return!!(n&&n.__v_isReadonly)}function Fi(n){return!!(n&&n.__v_isShallow)}function Ma(n){return ss(n)||Ns(n)}function et(n){const a=n&&n.__v_raw;return a?et(a):n}function Fa(n){return ti(n,"__v_skip",!0),n}const uo=n=>Tt(n)?oo(n):n,co=n=>Tt(n)?Ba(n):n;function Zc(n){gr&&Rn&&(n=et(n),Pa(n.dep||(n.dep=to())))}function Qc(n,a){n=et(n),n.dep&&Mi(n.dep)}function rn(n){return!!(n&&n.__v_isRef===!0)}function el(n){return rn(n)?n.value:n}const tl={get:(n,a,l)=>el(Reflect.get(n,a,l)),set:(n,a,l,d)=>{const m=n[a];return rn(m)&&!rn(l)?(m.value=l,!0):Reflect.set(n,a,l,d)}};function Ja(n){return ss(n)?n:new Proxy(n,tl)}var Ua;class nl{constructor(a,l,d,m){this._setter=l,this.dep=void 0,this.__v_isRef=!0,this[Ua]=!1,this._dirty=!0,this.effect=new no(a,()=>{this._dirty||(this._dirty=!0,Qc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!m,this.__v_isReadonly=d}get value(){const a=et(this);return Zc(a),(a._dirty||!a._cacheable)&&(a._dirty=!1,a._value=a.effect.run()),a._value}set value(a){this._setter(a)}}Ua="__v_isReadonly";function rl(n,a,l=!1){let d,m;const y=Je(n);return y?(d=n,m=Bn):(d=n.get,m=n.set),new nl(d,m,y||!m,l)}function pr(n,a,l,d){let m;try{m=d?n(...d):n()}catch(y){ci(y,a,l)}return m}function Dn(n,a,l,d){if(Je(n)){const y=pr(n,a,l,d);return y&&Ea(y)&&y.catch(w=>{ci(w,a,l)}),y}const m=[];for(let y=0;y<n.length;y++)m.push(Dn(n[y],a,l,d));return m}function ci(n,a,l,d=!0){const m=a?a.vnode:null;if(a){let y=a.parent;const w=a.proxy,T=l;for(;y;){const h=y.ec;if(h){for(let S=0;S<h.length;S++)if(h[S](n,w,T)===!1)return}y=y.parent}const g=a.appContext.config.errorHandler;if(g){pr(g,null,10,[n,w,T]);return}}sl(n,l,m,d)}function sl(n,a,l,d=!0){console.error(n)}let Is=!1,Ji=!1;const Kt=[];let Wn=0;const is=[];let er=null,xr=0;const $a=Promise.resolve();let lo=null;function il(n){const a=lo||$a;return n?a.then(this?n.bind(this):n):a}function ol(n){let a=Wn+1,l=Kt.length;for(;a<l;){const d=a+l>>>1;Ss(Kt[d])<n?a=d+1:l=d}return a}function fo(n){(!Kt.length||!Kt.includes(n,Is&&n.allowRecurse?Wn+1:Wn))&&(n.id==null?Kt.push(n):Kt.splice(ol(n.id),0,n),ja())}function ja(){!Is&&!Ji&&(Ji=!0,lo=$a.then(Ka))}function al(n){const a=Kt.indexOf(n);a>Wn&&Kt.splice(a,1)}function ul(n){xe(n)?is.push(...n):(!er||!er.includes(n,n.allowRecurse?xr+1:xr))&&is.push(n),ja()}function Go(n,a=Is?Wn+1:0){for(;a<Kt.length;a++){const l=Kt[a];l&&l.pre&&(Kt.splice(a,1),a--,l())}}function Va(n){if(is.length){const a=[...new Set(is)];if(is.length=0,er){er.push(...a);return}for(er=a,er.sort((l,d)=>Ss(l)-Ss(d)),xr=0;xr<er.length;xr++)er[xr]();er=null,xr=0}}const Ss=n=>n.id==null?1/0:n.id,cl=(n,a)=>{const l=Ss(n)-Ss(a);if(l===0){if(n.pre&&!a.pre)return-1;if(a.pre&&!n.pre)return 1}return l};function Ka(n){Ji=!1,Is=!0,Kt.sort(cl);const a=Bn;try{for(Wn=0;Wn<Kt.length;Wn++){const l=Kt[Wn];l&&l.active!==!1&&pr(l,null,14)}}finally{Wn=0,Kt.length=0,Va(),Is=!1,lo=null,(Kt.length||is.length)&&Ka()}}function ll(n,a,...l){if(n.isUnmounted)return;const d=n.vnode.props||ft;let m=l;const y=a.startsWith("update:"),w=y&&a.slice(7);if(w&&w in d){const S=`${w==="modelValue"?"model":w}Modifiers`,{number:v,trim:R}=d[S]||ft;R&&(m=l.map(P=>Dt(P)?P.trim():P)),v&&(m=l.map(ni))}let T,g=d[T=Ai(a)]||d[T=Ai(os(a))];!g&&y&&(g=d[T=Ai(Ur(a))]),g&&Dn(g,n,6,m);const h=d[T+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[T])return;n.emitted[T]=!0,Dn(h,n,6,m)}}function qa(n,a,l=!1){const d=a.emitsCache,m=d.get(n);if(m!==void 0)return m;const y=n.emits;let w={},T=!1;if(!Je(n)){const g=h=>{const S=qa(h,a,!0);S&&(T=!0,qt(w,S))};!l&&a.mixins.length&&a.mixins.forEach(g),n.extends&&g(n.extends),n.mixins&&n.mixins.forEach(g)}return!y&&!T?(Tt(n)&&d.set(n,null),null):(xe(y)?y.forEach(g=>w[g]=null):qt(w,y),Tt(n)&&d.set(n,w),w)}function li(n,a){return!n||!ii(a)?!1:(a=a.slice(2).replace(/Once$/,""),Xe(n,a[0].toLowerCase()+a.slice(1))||Xe(n,Ur(a))||Xe(n,a))}let _n=null,Ya=null;function ri(n){const a=_n;return _n=n,Ya=n&&n.type.__scopeId||null,a}function fl(n,a=_n,l){if(!a||n._n)return n;const d=(...m)=>{d._d&&oa(-1);const y=ri(a);let w;try{w=n(...m)}finally{ri(y),d._d&&oa(1)}return w};return d._n=!0,d._c=!0,d._d=!0,d}function ki(n){const{type:a,vnode:l,proxy:d,withProxy:m,props:y,propsOptions:[w],slots:T,attrs:g,emit:h,render:S,renderCache:v,data:R,setupState:P,ctx:q,inheritAttrs:L}=n;let O,A;const U=ri(n);try{if(l.shapeFlag&4){const z=m||d;O=Yn(S.call(z,z,v,y,P,R,q)),A=g}else{const z=a;O=Yn(z.length>1?z(y,{attrs:g,slots:T,emit:h}):z(y,null)),A=a.props?g:dl(g)}}catch(z){Es.length=0,ci(z,n,1),O=Fr(tr)}let C=O;if(A&&L!==!1){const z=Object.keys(A),{shapeFlag:B}=C;z.length&&B&7&&(w&&z.some(Xi)&&(A=hl(A,w)),C=Tr(C,A))}return l.dirs&&(C=Tr(C),C.dirs=C.dirs?C.dirs.concat(l.dirs):l.dirs),l.transition&&(C.transition=l.transition),O=C,ri(U),O}const dl=n=>{let a;for(const l in n)(l==="class"||l==="style"||ii(l))&&((a||(a={}))[l]=n[l]);return a},hl=(n,a)=>{const l={};for(const d in n)(!Xi(d)||!(d.slice(9)in a))&&(l[d]=n[d]);return l};function ml(n,a,l){const{props:d,children:m,component:y}=n,{props:w,children:T,patchFlag:g}=a,h=y.emitsOptions;if(a.dirs||a.transition)return!0;if(l&&g>=0){if(g&1024)return!0;if(g&16)return d?Ho(d,w,h):!!w;if(g&8){const S=a.dynamicProps;for(let v=0;v<S.length;v++){const R=S[v];if(w[R]!==d[R]&&!li(h,R))return!0}}}else return(m||T)&&(!T||!T.$stable)?!0:d===w?!1:d?w?Ho(d,w,h):!0:!!w;return!1}function Ho(n,a,l){const d=Object.keys(a);if(d.length!==Object.keys(n).length)return!0;for(let m=0;m<d.length;m++){const y=d[m];if(a[y]!==n[y]&&!li(l,y))return!0}return!1}function gl({vnode:n,parent:a},l){for(;a&&a.subTree===n;)(n=a.vnode).el=l,a=a.parent}const pl=n=>n.__isSuspense;function yl(n,a){a&&a.pendingBranch?xe(n)?a.effects.push(...n):a.effects.push(n):ul(n)}function Tl(n,a){if(Ut){let l=Ut.provides;const d=Ut.parent&&Ut.parent.provides;d===l&&(l=Ut.provides=Object.create(d)),l[n]=a}}function Xs(n,a,l=!1){const d=Ut||_n;if(d){const m=d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides;if(m&&n in m)return m[n];if(arguments.length>1)return l&&Je(a)?a.call(d.proxy):a}}const Ws={};function Oi(n,a,l){return Wa(n,a,l)}function Wa(n,a,{immediate:l,deep:d,flush:m,onTrack:y,onTrigger:w}=ft){const T=Ut;let g,h=!1,S=!1;if(rn(n)?(g=()=>n.value,h=Fi(n)):ss(n)?(g=()=>n,d=!0):xe(n)?(S=!0,h=n.some(C=>ss(C)||Fi(C)),g=()=>n.map(C=>{if(rn(C))return C.value;if(ss(C))return Br(C);if(Je(C))return pr(C,T,2)})):Je(n)?a?g=()=>pr(n,T,2):g=()=>{if(!(T&&T.isUnmounted))return v&&v(),Dn(n,T,3,[R])}:g=Bn,a&&d){const C=g;g=()=>Br(C())}let v,R=C=>{v=A.onStop=()=>{pr(C,T,4)}},P;if(ks)if(R=Bn,a?l&&Dn(a,T,3,[g(),S?[]:void 0,R]):g(),m==="sync"){const C=gf();P=C.__watcherHandles||(C.__watcherHandles=[])}else return Bn;let q=S?new Array(n.length).fill(Ws):Ws;const L=()=>{if(!!A.active)if(a){const C=A.run();(d||h||(S?C.some((z,B)=>ei(z,q[B])):ei(C,q)))&&(v&&v(),Dn(a,T,3,[C,q===Ws?void 0:S&&q[0]===Ws?[]:q,R]),q=C)}else A.run()};L.allowRecurse=!!a;let O;m==="sync"?O=L:m==="post"?O=()=>ln(L,T&&T.suspense):(L.pre=!0,T&&(L.id=T.uid),O=()=>fo(L));const A=new no(g,O);a?l?L():q=A.run():m==="post"?ln(A.run.bind(A),T&&T.suspense):A.run();const U=()=>{A.stop(),T&&T.scope&&Zi(T.scope.effects,A)};return P&&P.push(U),U}function vl(n,a,l){const d=this.proxy,m=Dt(n)?n.includes(".")?za(d,n):()=>d[n]:n.bind(d,d);let y;Je(a)?y=a:(y=a.handler,l=a);const w=Ut;as(this);const T=Wa(m,y.bind(d),l);return w?as(w):Jr(),T}function za(n,a){const l=a.split(".");return()=>{let d=n;for(let m=0;m<l.length&&d;m++)d=d[l[m]];return d}}function Br(n,a){if(!Tt(n)||n.__v_skip||(a=a||new Set,a.has(n)))return n;if(a.add(n),rn(n))Br(n.value,a);else if(xe(n))for(let l=0;l<n.length;l++)Br(n[l],a);else if(ba(n)||rs(n))n.forEach(l=>{Br(l,a)});else if(Ia(n))for(const l in n)Br(n[l],a);return n}function wl(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Za(()=>{n.isMounted=!0}),Qa(()=>{n.isUnmounting=!0}),n}const Pn=[Function,Array],bl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Pn,onEnter:Pn,onAfterEnter:Pn,onEnterCancelled:Pn,onBeforeLeave:Pn,onLeave:Pn,onAfterLeave:Pn,onLeaveCancelled:Pn,onBeforeAppear:Pn,onAppear:Pn,onAfterAppear:Pn,onAppearCancelled:Pn},setup(n,{slots:a}){const l=af(),d=wl();let m;return()=>{const y=a.default&&Ha(a.default(),!0);if(!y||!y.length)return;let w=y[0];if(y.length>1){for(const L of y)if(L.type!==tr){w=L;break}}const T=et(n),{mode:g}=T;if(d.isLeaving)return Pi(w);const h=Xo(w);if(!h)return Pi(w);const S=Ui(h,T,d,l);$i(h,S);const v=l.subTree,R=v&&Xo(v);let P=!1;const{getTransitionKey:q}=h.type;if(q){const L=q();m===void 0?m=L:L!==m&&(m=L,P=!0)}if(R&&R.type!==tr&&(!Rr(h,R)||P)){const L=Ui(R,T,d,l);if($i(R,L),g==="out-in")return d.isLeaving=!0,L.afterLeave=()=>{d.isLeaving=!1,l.update.active!==!1&&l.update()},Pi(w);g==="in-out"&&h.type!==tr&&(L.delayLeave=(O,A,U)=>{const C=Ga(d,R);C[String(R.key)]=R,O._leaveCb=()=>{A(),O._leaveCb=void 0,delete S.delayedLeave},S.delayedLeave=U})}return w}}},El=bl;function Ga(n,a){const{leavingVNodes:l}=n;let d=l.get(a.type);return d||(d=Object.create(null),l.set(a.type,d)),d}function Ui(n,a,l,d){const{appear:m,mode:y,persisted:w=!1,onBeforeEnter:T,onEnter:g,onAfterEnter:h,onEnterCancelled:S,onBeforeLeave:v,onLeave:R,onAfterLeave:P,onLeaveCancelled:q,onBeforeAppear:L,onAppear:O,onAfterAppear:A,onAppearCancelled:U}=a,C=String(n.key),z=Ga(l,n),B=(J,_)=>{J&&Dn(J,d,9,_)},b=(J,_)=>{const W=_[1];B(J,_),xe(J)?J.every(Z=>Z.length<=1)&&W():J.length<=1&&W()},Q={mode:y,persisted:w,beforeEnter(J){let _=T;if(!l.isMounted)if(m)_=L||T;else return;J._leaveCb&&J._leaveCb(!0);const W=z[C];W&&Rr(n,W)&&W.el._leaveCb&&W.el._leaveCb(),B(_,[J])},enter(J){let _=g,W=h,Z=S;if(!l.isMounted)if(m)_=O||g,W=A||h,Z=U||S;else return;let ae=!1;const j=J._enterCb=te=>{ae||(ae=!0,te?B(Z,[J]):B(W,[J]),Q.delayedLeave&&Q.delayedLeave(),J._enterCb=void 0)};_?b(_,[J,j]):j()},leave(J,_){const W=String(n.key);if(J._enterCb&&J._enterCb(!0),l.isUnmounting)return _();B(v,[J]);let Z=!1;const ae=J._leaveCb=j=>{Z||(Z=!0,_(),j?B(q,[J]):B(P,[J]),J._leaveCb=void 0,z[W]===n&&delete z[W])};z[W]=n,R?b(R,[J,ae]):ae()},clone(J){return Ui(J,a,l,d)}};return Q}function Pi(n){if(fi(n))return n=Tr(n),n.children=null,n}function Xo(n){return fi(n)?n.children?n.children[0]:void 0:n}function $i(n,a){n.shapeFlag&6&&n.component?$i(n.component.subTree,a):n.shapeFlag&128?(n.ssContent.transition=a.clone(n.ssContent),n.ssFallback.transition=a.clone(n.ssFallback)):n.transition=a}function Ha(n,a=!1,l){let d=[],m=0;for(let y=0;y<n.length;y++){let w=n[y];const T=l==null?w.key:String(l)+String(w.key!=null?w.key:y);w.type===Nn?(w.patchFlag&128&&m++,d=d.concat(Ha(w.children,a,T))):(a||w.type!==tr)&&d.push(T!=null?Tr(w,{key:T}):w)}if(m>1)for(let y=0;y<d.length;y++)d[y].patchFlag=-2;return d}const Zs=n=>!!n.type.__asyncLoader,fi=n=>n.type.__isKeepAlive;function Nl(n,a){Xa(n,"a",a)}function Il(n,a){Xa(n,"da",a)}function Xa(n,a,l=Ut){const d=n.__wdc||(n.__wdc=()=>{let m=l;for(;m;){if(m.isDeactivated)return;m=m.parent}return n()});if(di(a,d,l),l){let m=l.parent;for(;m&&m.parent;)fi(m.parent.vnode)&&Sl(d,a,l,m),m=m.parent}}function Sl(n,a,l,d){const m=di(a,n,d,!0);eu(()=>{Zi(d[a],m)},l)}function di(n,a,l=Ut,d=!1){if(l){const m=l[n]||(l[n]=[]),y=a.__weh||(a.__weh=(...w)=>{if(l.isUnmounted)return;us(),as(l);const T=Dn(a,l,n,w);return Jr(),cs(),T});return d?m.unshift(y):m.push(y),y}}const rr=n=>(a,l=Ut)=>(!ks||n==="sp")&&di(n,(...d)=>a(...d),l),Al=rr("bm"),Za=rr("m"),kl=rr("bu"),Ol=rr("u"),Qa=rr("bum"),eu=rr("um"),Pl=rr("sp"),_l=rr("rtg"),Dl=rr("rtc");function Cl(n,a=Ut){di("ec",n,a)}function Zo(n,a){const l=_n;if(l===null)return n;const d=gi(l)||l.proxy,m=n.dirs||(n.dirs=[]);for(let y=0;y<a.length;y++){let[w,T,g,h=ft]=a[y];w&&(Je(w)&&(w={mounted:w,updated:w}),w.deep&&Br(T),m.push({dir:w,instance:d,value:T,oldValue:void 0,arg:g,modifiers:h}))}return n}function _r(n,a,l,d){const m=n.dirs,y=a&&a.dirs;for(let w=0;w<m.length;w++){const T=m[w];y&&(T.oldValue=y[w].value);let g=T.dir[d];g&&(us(),Dn(g,l,8,[n.el,T,n,a]),cs())}}const xl=Symbol();function Qo(n,a,l,d){let m;const y=l&&l[d];if(xe(n)||Dt(n)){m=new Array(n.length);for(let w=0,T=n.length;w<T;w++)m[w]=a(n[w],w,void 0,y&&y[w])}else if(typeof n=="number"){m=new Array(n);for(let w=0;w<n;w++)m[w]=a(w+1,w,void 0,y&&y[w])}else if(Tt(n))if(n[Symbol.iterator])m=Array.from(n,(w,T)=>a(w,T,void 0,y&&y[T]));else{const w=Object.keys(n);m=new Array(w.length);for(let T=0,g=w.length;T<g;T++){const h=w[T];m[T]=a(n[h],h,T,y&&y[T])}}else m=[];return l&&(l[d]=m),m}const ji=n=>n?fu(n)?gi(n)||n.proxy:ji(n.parent):null,bs=qt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>ji(n.parent),$root:n=>ji(n.root),$emit:n=>n.emit,$options:n=>ho(n),$forceUpdate:n=>n.f||(n.f=()=>fo(n.update)),$nextTick:n=>n.n||(n.n=il.bind(n.proxy)),$watch:n=>vl.bind(n)}),_i=(n,a)=>n!==ft&&!n.__isScriptSetup&&Xe(n,a),Rl={get({_:n},a){const{ctx:l,setupState:d,data:m,props:y,accessCache:w,type:T,appContext:g}=n;let h;if(a[0]!=="$"){const P=w[a];if(P!==void 0)switch(P){case 1:return d[a];case 2:return m[a];case 4:return l[a];case 3:return y[a]}else{if(_i(d,a))return w[a]=1,d[a];if(m!==ft&&Xe(m,a))return w[a]=2,m[a];if((h=n.propsOptions[0])&&Xe(h,a))return w[a]=3,y[a];if(l!==ft&&Xe(l,a))return w[a]=4,l[a];Vi&&(w[a]=0)}}const S=bs[a];let v,R;if(S)return a==="$attrs"&&In(n,"get",a),S(n);if((v=T.__cssModules)&&(v=v[a]))return v;if(l!==ft&&Xe(l,a))return w[a]=4,l[a];if(R=g.config.globalProperties,Xe(R,a))return R[a]},set({_:n},a,l){const{data:d,setupState:m,ctx:y}=n;return _i(m,a)?(m[a]=l,!0):d!==ft&&Xe(d,a)?(d[a]=l,!0):Xe(n.props,a)||a[0]==="$"&&a.slice(1)in n?!1:(y[a]=l,!0)},has({_:{data:n,setupState:a,accessCache:l,ctx:d,appContext:m,propsOptions:y}},w){let T;return!!l[w]||n!==ft&&Xe(n,w)||_i(a,w)||(T=y[0])&&Xe(T,w)||Xe(d,w)||Xe(bs,w)||Xe(m.config.globalProperties,w)},defineProperty(n,a,l){return l.get!=null?n._.accessCache[a]=0:Xe(l,"value")&&this.set(n,a,l.value,null),Reflect.defineProperty(n,a,l)}};let Vi=!0;function Ll(n){const a=ho(n),l=n.proxy,d=n.ctx;Vi=!1,a.beforeCreate&&ea(a.beforeCreate,n,"bc");const{data:m,computed:y,methods:w,watch:T,provide:g,inject:h,created:S,beforeMount:v,mounted:R,beforeUpdate:P,updated:q,activated:L,deactivated:O,beforeDestroy:A,beforeUnmount:U,destroyed:C,unmounted:z,render:B,renderTracked:b,renderTriggered:Q,errorCaptured:J,serverPrefetch:_,expose:W,inheritAttrs:Z,components:ae,directives:j,filters:te}=a;if(h&&Bl(h,d,null,n.appContext.config.unwrapInjectedRef),w)for(const G in w){const le=w[G];Je(le)&&(d[G]=le.bind(l))}if(m){const G=m.call(l,l);Tt(G)&&(n.data=oo(G))}if(Vi=!0,y)for(const G in y){const le=y[G],Le=Je(le)?le.bind(l,l):Je(le.get)?le.get.bind(l,l):Bn,ce=!Je(le)&&Je(le.set)?le.set.bind(l):Bn,_e=hf({get:Le,set:ce});Object.defineProperty(d,G,{enumerable:!0,configurable:!0,get:()=>_e.value,set:pe=>_e.value=pe})}if(T)for(const G in T)tu(T[G],d,l,G);if(g){const G=Je(g)?g.call(l):g;Reflect.ownKeys(G).forEach(le=>{Tl(le,G[le])})}S&&ea(S,n,"c");function re(G,le){xe(le)?le.forEach(Le=>G(Le.bind(l))):le&&G(le.bind(l))}if(re(Al,v),re(Za,R),re(kl,P),re(Ol,q),re(Nl,L),re(Il,O),re(Cl,J),re(Dl,b),re(_l,Q),re(Qa,U),re(eu,z),re(Pl,_),xe(W))if(W.length){const G=n.exposed||(n.exposed={});W.forEach(le=>{Object.defineProperty(G,le,{get:()=>l[le],set:Le=>l[le]=Le})})}else n.exposed||(n.exposed={});B&&n.render===Bn&&(n.render=B),Z!=null&&(n.inheritAttrs=Z),ae&&(n.components=ae),j&&(n.directives=j)}function Bl(n,a,l=Bn,d=!1){xe(n)&&(n=Ki(n));for(const m in n){const y=n[m];let w;Tt(y)?"default"in y?w=Xs(y.from||m,y.default,!0):w=Xs(y.from||m):w=Xs(y),rn(w)&&d?Object.defineProperty(a,m,{enumerable:!0,configurable:!0,get:()=>w.value,set:T=>w.value=T}):a[m]=w}}function ea(n,a,l){Dn(xe(n)?n.map(d=>d.bind(a.proxy)):n.bind(a.proxy),a,l)}function tu(n,a,l,d){const m=d.includes(".")?za(l,d):()=>l[d];if(Dt(n)){const y=a[n];Je(y)&&Oi(m,y)}else if(Je(n))Oi(m,n.bind(l));else if(Tt(n))if(xe(n))n.forEach(y=>tu(y,a,l,d));else{const y=Je(n.handler)?n.handler.bind(l):a[n.handler];Je(y)&&Oi(m,y,n)}}function ho(n){const a=n.type,{mixins:l,extends:d}=a,{mixins:m,optionsCache:y,config:{optionMergeStrategies:w}}=n.appContext,T=y.get(a);let g;return T?g=T:!m.length&&!l&&!d?g=a:(g={},m.length&&m.forEach(h=>si(g,h,w,!0)),si(g,a,w)),Tt(a)&&y.set(a,g),g}function si(n,a,l,d=!1){const{mixins:m,extends:y}=a;y&&si(n,y,l,!0),m&&m.forEach(w=>si(n,w,l,!0));for(const w in a)if(!(d&&w==="expose")){const T=Ml[w]||l&&l[w];n[w]=T?T(n[w],a[w]):a[w]}return n}const Ml={data:ta,props:Cr,emits:Cr,methods:Cr,computed:Cr,beforeCreate:tn,created:tn,beforeMount:tn,mounted:tn,beforeUpdate:tn,updated:tn,beforeDestroy:tn,beforeUnmount:tn,destroyed:tn,unmounted:tn,activated:tn,deactivated:tn,errorCaptured:tn,serverPrefetch:tn,components:Cr,directives:Cr,watch:Jl,provide:ta,inject:Fl};function ta(n,a){return a?n?function(){return qt(Je(n)?n.call(this,this):n,Je(a)?a.call(this,this):a)}:a:n}function Fl(n,a){return Cr(Ki(n),Ki(a))}function Ki(n){if(xe(n)){const a={};for(let l=0;l<n.length;l++)a[n[l]]=n[l];return a}return n}function tn(n,a){return n?[...new Set([].concat(n,a))]:a}function Cr(n,a){return n?qt(qt(Object.create(null),n),a):a}function Jl(n,a){if(!n)return a;if(!a)return n;const l=qt(Object.create(null),n);for(const d in a)l[d]=tn(n[d],a[d]);return l}function Ul(n,a,l,d=!1){const m={},y={};ti(y,mi,1),n.propsDefaults=Object.create(null),nu(n,a,m,y);for(const w in n.propsOptions[0])w in m||(m[w]=void 0);l?n.props=d?m:Xc(m):n.type.props?n.props=m:n.props=y,n.attrs=y}function $l(n,a,l,d){const{props:m,attrs:y,vnode:{patchFlag:w}}=n,T=et(m),[g]=n.propsOptions;let h=!1;if((d||w>0)&&!(w&16)){if(w&8){const S=n.vnode.dynamicProps;for(let v=0;v<S.length;v++){let R=S[v];if(li(n.emitsOptions,R))continue;const P=a[R];if(g)if(Xe(y,R))P!==y[R]&&(y[R]=P,h=!0);else{const q=os(R);m[q]=qi(g,T,q,P,n,!1)}else P!==y[R]&&(y[R]=P,h=!0)}}}else{nu(n,a,m,y)&&(h=!0);let S;for(const v in T)(!a||!Xe(a,v)&&((S=Ur(v))===v||!Xe(a,S)))&&(g?l&&(l[v]!==void 0||l[S]!==void 0)&&(m[v]=qi(g,T,v,void 0,n,!0)):delete m[v]);if(y!==T)for(const v in y)(!a||!Xe(a,v)&&!0)&&(delete y[v],h=!0)}h&&nr(n,"set","$attrs")}function nu(n,a,l,d){const[m,y]=n.propsOptions;let w=!1,T;if(a)for(let g in a){if(Gs(g))continue;const h=a[g];let S;m&&Xe(m,S=os(g))?!y||!y.includes(S)?l[S]=h:(T||(T={}))[S]=h:li(n.emitsOptions,g)||(!(g in d)||h!==d[g])&&(d[g]=h,w=!0)}if(y){const g=et(l),h=T||ft;for(let S=0;S<y.length;S++){const v=y[S];l[v]=qi(m,g,v,h[v],n,!Xe(h,v))}}return w}function qi(n,a,l,d,m,y){const w=n[l];if(w!=null){const T=Xe(w,"default");if(T&&d===void 0){const g=w.default;if(w.type!==Function&&Je(g)){const{propsDefaults:h}=m;l in h?d=h[l]:(as(m),d=h[l]=g.call(null,a),Jr())}else d=g}w[0]&&(y&&!T?d=!1:w[1]&&(d===""||d===Ur(l))&&(d=!0))}return d}function ru(n,a,l=!1){const d=a.propsCache,m=d.get(n);if(m)return m;const y=n.props,w={},T=[];let g=!1;if(!Je(n)){const S=v=>{g=!0;const[R,P]=ru(v,a,!0);qt(w,R),P&&T.push(...P)};!l&&a.mixins.length&&a.mixins.forEach(S),n.extends&&S(n.extends),n.mixins&&n.mixins.forEach(S)}if(!y&&!g)return Tt(n)&&d.set(n,ns),ns;if(xe(y))for(let S=0;S<y.length;S++){const v=os(y[S]);na(v)&&(w[v]=ft)}else if(y)for(const S in y){const v=os(S);if(na(v)){const R=y[S],P=w[v]=xe(R)||Je(R)?{type:R}:Object.assign({},R);if(P){const q=ia(Boolean,P.type),L=ia(String,P.type);P[0]=q>-1,P[1]=L<0||q<L,(q>-1||Xe(P,"default"))&&T.push(v)}}}const h=[w,T];return Tt(n)&&d.set(n,h),h}function na(n){return n[0]!=="$"}function ra(n){const a=n&&n.toString().match(/^\s*function (\w+)/);return a?a[1]:n===null?"null":""}function sa(n,a){return ra(n)===ra(a)}function ia(n,a){return xe(a)?a.findIndex(l=>sa(l,n)):Je(a)&&sa(a,n)?0:-1}const su=n=>n[0]==="_"||n==="$stable",mo=n=>xe(n)?n.map(Yn):[Yn(n)],jl=(n,a,l)=>{if(a._n)return a;const d=fl((...m)=>mo(a(...m)),l);return d._c=!1,d},iu=(n,a,l)=>{const d=n._ctx;for(const m in n){if(su(m))continue;const y=n[m];if(Je(y))a[m]=jl(m,y,d);else if(y!=null){const w=mo(y);a[m]=()=>w}}},ou=(n,a)=>{const l=mo(a);n.slots.default=()=>l},Vl=(n,a)=>{if(n.vnode.shapeFlag&32){const l=a._;l?(n.slots=et(a),ti(a,"_",l)):iu(a,n.slots={})}else n.slots={},a&&ou(n,a);ti(n.slots,mi,1)},Kl=(n,a,l)=>{const{vnode:d,slots:m}=n;let y=!0,w=ft;if(d.shapeFlag&32){const T=a._;T?l&&T===1?y=!1:(qt(m,a),!l&&T===1&&delete m._):(y=!a.$stable,iu(a,m)),w=a}else a&&(ou(n,a),w={default:1});if(y)for(const T in m)!su(T)&&!(T in w)&&delete m[T]};function au(){return{app:null,config:{isNativeTag:yc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ql=0;function Yl(n,a){return function(d,m=null){Je(d)||(d=Object.assign({},d)),m!=null&&!Tt(m)&&(m=null);const y=au(),w=new Set;let T=!1;const g=y.app={_uid:ql++,_component:d,_props:m,_container:null,_context:y,_instance:null,version:pf,get config(){return y.config},set config(h){},use(h,...S){return w.has(h)||(h&&Je(h.install)?(w.add(h),h.install(g,...S)):Je(h)&&(w.add(h),h(g,...S))),g},mixin(h){return y.mixins.includes(h)||y.mixins.push(h),g},component(h,S){return S?(y.components[h]=S,g):y.components[h]},directive(h,S){return S?(y.directives[h]=S,g):y.directives[h]},mount(h,S,v){if(!T){const R=Fr(d,m);return R.appContext=y,S&&a?a(R,h):n(R,h,v),T=!0,g._container=h,h.__vue_app__=g,gi(R.component)||R.component.proxy}},unmount(){T&&(n(null,g._container),delete g._container.__vue_app__)},provide(h,S){return y.provides[h]=S,g}};return g}}function Yi(n,a,l,d,m=!1){if(xe(n)){n.forEach((R,P)=>Yi(R,a&&(xe(a)?a[P]:a),l,d,m));return}if(Zs(d)&&!m)return;const y=d.shapeFlag&4?gi(d.component)||d.component.proxy:d.el,w=m?null:y,{i:T,r:g}=n,h=a&&a.r,S=T.refs===ft?T.refs={}:T.refs,v=T.setupState;if(h!=null&&h!==g&&(Dt(h)?(S[h]=null,Xe(v,h)&&(v[h]=null)):rn(h)&&(h.value=null)),Je(g))pr(g,T,12,[w,S]);else{const R=Dt(g),P=rn(g);if(R||P){const q=()=>{if(n.f){const L=R?Xe(v,g)?v[g]:S[g]:g.value;m?xe(L)&&Zi(L,y):xe(L)?L.includes(y)||L.push(y):R?(S[g]=[y],Xe(v,g)&&(v[g]=S[g])):(g.value=[y],n.k&&(S[n.k]=g.value))}else R?(S[g]=w,Xe(v,g)&&(v[g]=w)):P&&(g.value=w,n.k&&(S[n.k]=w))};w?(q.id=-1,ln(q,l)):q()}}}const ln=yl;function Wl(n){return zl(n)}function zl(n,a){const l=Nc();l.__VUE__=!0;const{insert:d,remove:m,patchProp:y,createElement:w,createText:T,createComment:g,setText:h,setElementText:S,parentNode:v,nextSibling:R,setScopeId:P=Bn,insertStaticContent:q}=n,L=(I,D,Y,H=null,X=null,ue=null,ge=!1,ie=null,V=!!D.dynamicChildren)=>{if(I===D)return;I&&!Rr(I,D)&&(H=it(I),pe(I,X,ue,!0),I=null),D.patchFlag===-2&&(V=!1,D.dynamicChildren=null);const{type:oe,ref:we,shapeFlag:ve}=D;switch(oe){case hi:O(I,D,Y,H);break;case tr:A(I,D,Y,H);break;case Di:I==null&&U(D,Y,H,ge);break;case Nn:ae(I,D,Y,H,X,ue,ge,ie,V);break;default:ve&1?B(I,D,Y,H,X,ue,ge,ie,V):ve&6?j(I,D,Y,H,X,ue,ge,ie,V):(ve&64||ve&128)&&oe.process(I,D,Y,H,X,ue,ge,ie,V,gt)}we!=null&&X&&Yi(we,I&&I.ref,ue,D||I,!D)},O=(I,D,Y,H)=>{if(I==null)d(D.el=T(D.children),Y,H);else{const X=D.el=I.el;D.children!==I.children&&h(X,D.children)}},A=(I,D,Y,H)=>{I==null?d(D.el=g(D.children||""),Y,H):D.el=I.el},U=(I,D,Y,H)=>{[I.el,I.anchor]=q(I.children,D,Y,H,I.el,I.anchor)},C=({el:I,anchor:D},Y,H)=>{let X;for(;I&&I!==D;)X=R(I),d(I,Y,H),I=X;d(D,Y,H)},z=({el:I,anchor:D})=>{let Y;for(;I&&I!==D;)Y=R(I),m(I),I=Y;m(D)},B=(I,D,Y,H,X,ue,ge,ie,V)=>{ge=ge||D.type==="svg",I==null?b(D,Y,H,X,ue,ge,ie,V):_(I,D,X,ue,ge,ie,V)},b=(I,D,Y,H,X,ue,ge,ie)=>{let V,oe;const{type:we,props:ve,shapeFlag:be,transition:Se,dirs:Pe}=I;if(V=I.el=w(I.type,ue,ve&&ve.is,ve),be&8?S(V,I.children):be&16&&J(I.children,V,null,H,X,ue&&we!=="foreignObject",ge,ie),Pe&&_r(I,null,H,"created"),ve){for(const De in ve)De!=="value"&&!Gs(De)&&y(V,De,null,ve[De],ue,I.children,H,X,Ke);"value"in ve&&y(V,"value",null,ve.value),(oe=ve.onVnodeBeforeMount)&&Kn(oe,H,I)}Q(V,I,I.scopeId,ge,H),Pe&&_r(I,null,H,"beforeMount");const Ye=(!X||X&&!X.pendingBranch)&&Se&&!Se.persisted;Ye&&Se.beforeEnter(V),d(V,D,Y),((oe=ve&&ve.onVnodeMounted)||Ye||Pe)&&ln(()=>{oe&&Kn(oe,H,I),Ye&&Se.enter(V),Pe&&_r(I,null,H,"mounted")},X)},Q=(I,D,Y,H,X)=>{if(Y&&P(I,Y),H)for(let ue=0;ue<H.length;ue++)P(I,H[ue]);if(X){let ue=X.subTree;if(D===ue){const ge=X.vnode;Q(I,ge,ge.scopeId,ge.slotScopeIds,X.parent)}}},J=(I,D,Y,H,X,ue,ge,ie,V=0)=>{for(let oe=V;oe<I.length;oe++){const we=I[oe]=ie?mr(I[oe]):Yn(I[oe]);L(null,we,D,Y,H,X,ue,ge,ie)}},_=(I,D,Y,H,X,ue,ge)=>{const ie=D.el=I.el;let{patchFlag:V,dynamicChildren:oe,dirs:we}=D;V|=I.patchFlag&16;const ve=I.props||ft,be=D.props||ft;let Se;Y&&Dr(Y,!1),(Se=be.onVnodeBeforeUpdate)&&Kn(Se,Y,D,I),we&&_r(D,I,Y,"beforeUpdate"),Y&&Dr(Y,!0);const Pe=X&&D.type!=="foreignObject";if(oe?W(I.dynamicChildren,oe,ie,Y,H,Pe,ue):ge||le(I,D,ie,null,Y,H,Pe,ue,!1),V>0){if(V&16)Z(ie,D,ve,be,Y,H,X);else if(V&2&&ve.class!==be.class&&y(ie,"class",null,be.class,X),V&4&&y(ie,"style",ve.style,be.style,X),V&8){const Ye=D.dynamicProps;for(let De=0;De<Ye.length;De++){const He=Ye[De],Ze=ve[He],kt=be[He];(kt!==Ze||He==="value")&&y(ie,He,Ze,kt,X,I.children,Y,H,Ke)}}V&1&&I.children!==D.children&&S(ie,D.children)}else!ge&&oe==null&&Z(ie,D,ve,be,Y,H,X);((Se=be.onVnodeUpdated)||we)&&ln(()=>{Se&&Kn(Se,Y,D,I),we&&_r(D,I,Y,"updated")},H)},W=(I,D,Y,H,X,ue,ge)=>{for(let ie=0;ie<D.length;ie++){const V=I[ie],oe=D[ie],we=V.el&&(V.type===Nn||!Rr(V,oe)||V.shapeFlag&70)?v(V.el):Y;L(V,oe,we,null,H,X,ue,ge,!0)}},Z=(I,D,Y,H,X,ue,ge)=>{if(Y!==H){if(Y!==ft)for(const ie in Y)!Gs(ie)&&!(ie in H)&&y(I,ie,Y[ie],null,ge,D.children,X,ue,Ke);for(const ie in H){if(Gs(ie))continue;const V=H[ie],oe=Y[ie];V!==oe&&ie!=="value"&&y(I,ie,oe,V,ge,D.children,X,ue,Ke)}"value"in H&&y(I,"value",Y.value,H.value)}},ae=(I,D,Y,H,X,ue,ge,ie,V)=>{const oe=D.el=I?I.el:T(""),we=D.anchor=I?I.anchor:T("");let{patchFlag:ve,dynamicChildren:be,slotScopeIds:Se}=D;Se&&(ie=ie?ie.concat(Se):Se),I==null?(d(oe,Y,H),d(we,Y,H),J(D.children,Y,we,X,ue,ge,ie,V)):ve>0&&ve&64&&be&&I.dynamicChildren?(W(I.dynamicChildren,be,Y,X,ue,ge,ie),(D.key!=null||X&&D===X.subTree)&&uu(I,D,!0)):le(I,D,Y,we,X,ue,ge,ie,V)},j=(I,D,Y,H,X,ue,ge,ie,V)=>{D.slotScopeIds=ie,I==null?D.shapeFlag&512?X.ctx.activate(D,Y,H,ge,V):te(D,Y,H,X,ue,ge,V):fe(I,D,V)},te=(I,D,Y,H,X,ue,ge)=>{const ie=I.component=of(I,H,X);if(fi(I)&&(ie.ctx.renderer=gt),uf(ie),ie.asyncDep){if(X&&X.registerDep(ie,re),!I.el){const V=ie.subTree=Fr(tr);A(null,V,D,Y)}return}re(ie,I,D,Y,X,ue,ge)},fe=(I,D,Y)=>{const H=D.component=I.component;if(ml(I,D,Y))if(H.asyncDep&&!H.asyncResolved){G(H,D,Y);return}else H.next=D,al(H.update),H.update();else D.el=I.el,H.vnode=D},re=(I,D,Y,H,X,ue,ge)=>{const ie=()=>{if(I.isMounted){let{next:we,bu:ve,u:be,parent:Se,vnode:Pe}=I,Ye=we,De;Dr(I,!1),we?(we.el=Pe.el,G(I,we,ge)):we=Pe,ve&&Hs(ve),(De=we.props&&we.props.onVnodeBeforeUpdate)&&Kn(De,Se,we,Pe),Dr(I,!0);const He=ki(I),Ze=I.subTree;I.subTree=He,L(Ze,He,v(Ze.el),it(Ze),I,X,ue),we.el=He.el,Ye===null&&gl(I,He.el),be&&ln(be,X),(De=we.props&&we.props.onVnodeUpdated)&&ln(()=>Kn(De,Se,we,Pe),X)}else{let we;const{el:ve,props:be}=D,{bm:Se,m:Pe,parent:Ye}=I,De=Zs(D);if(Dr(I,!1),Se&&Hs(Se),!De&&(we=be&&be.onVnodeBeforeMount)&&Kn(we,Ye,D),Dr(I,!0),ve&&dt){const He=()=>{I.subTree=ki(I),dt(ve,I.subTree,I,X,null)};De?D.type.__asyncLoader().then(()=>!I.isUnmounted&&He()):He()}else{const He=I.subTree=ki(I);L(null,He,Y,H,I,X,ue),D.el=He.el}if(Pe&&ln(Pe,X),!De&&(we=be&&be.onVnodeMounted)){const He=D;ln(()=>Kn(we,Ye,He),X)}(D.shapeFlag&256||Ye&&Zs(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&I.a&&ln(I.a,X),I.isMounted=!0,D=Y=H=null}},V=I.effect=new no(ie,()=>fo(oe),I.scope),oe=I.update=()=>V.run();oe.id=I.uid,Dr(I,!0),oe()},G=(I,D,Y)=>{D.component=I;const H=I.vnode.props;I.vnode=D,I.next=null,$l(I,D.props,H,Y),Kl(I,D.children,Y),us(),Go(),cs()},le=(I,D,Y,H,X,ue,ge,ie,V=!1)=>{const oe=I&&I.children,we=I?I.shapeFlag:0,ve=D.children,{patchFlag:be,shapeFlag:Se}=D;if(be>0){if(be&128){ce(oe,ve,Y,H,X,ue,ge,ie,V);return}else if(be&256){Le(oe,ve,Y,H,X,ue,ge,ie,V);return}}Se&8?(we&16&&Ke(oe,X,ue),ve!==oe&&S(Y,ve)):we&16?Se&16?ce(oe,ve,Y,H,X,ue,ge,ie,V):Ke(oe,X,ue,!0):(we&8&&S(Y,""),Se&16&&J(ve,Y,H,X,ue,ge,ie,V))},Le=(I,D,Y,H,X,ue,ge,ie,V)=>{I=I||ns,D=D||ns;const oe=I.length,we=D.length,ve=Math.min(oe,we);let be;for(be=0;be<ve;be++){const Se=D[be]=V?mr(D[be]):Yn(D[be]);L(I[be],Se,Y,null,X,ue,ge,ie,V)}oe>we?Ke(I,X,ue,!0,!1,ve):J(D,Y,H,X,ue,ge,ie,V,ve)},ce=(I,D,Y,H,X,ue,ge,ie,V)=>{let oe=0;const we=D.length;let ve=I.length-1,be=we-1;for(;oe<=ve&&oe<=be;){const Se=I[oe],Pe=D[oe]=V?mr(D[oe]):Yn(D[oe]);if(Rr(Se,Pe))L(Se,Pe,Y,null,X,ue,ge,ie,V);else break;oe++}for(;oe<=ve&&oe<=be;){const Se=I[ve],Pe=D[be]=V?mr(D[be]):Yn(D[be]);if(Rr(Se,Pe))L(Se,Pe,Y,null,X,ue,ge,ie,V);else break;ve--,be--}if(oe>ve){if(oe<=be){const Se=be+1,Pe=Se<we?D[Se].el:H;for(;oe<=be;)L(null,D[oe]=V?mr(D[oe]):Yn(D[oe]),Y,Pe,X,ue,ge,ie,V),oe++}}else if(oe>be)for(;oe<=ve;)pe(I[oe],X,ue,!0),oe++;else{const Se=oe,Pe=oe,Ye=new Map;for(oe=Pe;oe<=be;oe++){const qe=D[oe]=V?mr(D[oe]):Yn(D[oe]);qe.key!=null&&Ye.set(qe.key,oe)}let De,He=0;const Ze=be-Pe+1;let kt=!1,Yt=0;const Ct=new Array(Ze);for(oe=0;oe<Ze;oe++)Ct[oe]=0;for(oe=Se;oe<=ve;oe++){const qe=I[oe];if(He>=Ze){pe(qe,X,ue,!0);continue}let ut;if(qe.key!=null)ut=Ye.get(qe.key);else for(De=Pe;De<=be;De++)if(Ct[De-Pe]===0&&Rr(qe,D[De])){ut=De;break}ut===void 0?pe(qe,X,ue,!0):(Ct[ut-Pe]=oe+1,ut>=Yt?Yt=ut:kt=!0,L(qe,D[ut],Y,null,X,ue,ge,ie,V),He++)}const Wt=kt?Gl(Ct):ns;for(De=Wt.length-1,oe=Ze-1;oe>=0;oe--){const qe=Pe+oe,ut=D[qe],tt=qe+1<we?D[qe+1].el:H;Ct[oe]===0?L(null,ut,Y,tt,X,ue,ge,ie,V):kt&&(De<0||oe!==Wt[De]?_e(ut,Y,tt,2):De--)}}},_e=(I,D,Y,H,X=null)=>{const{el:ue,type:ge,transition:ie,children:V,shapeFlag:oe}=I;if(oe&6){_e(I.component.subTree,D,Y,H);return}if(oe&128){I.suspense.move(D,Y,H);return}if(oe&64){ge.move(I,D,Y,gt);return}if(ge===Nn){d(ue,D,Y);for(let ve=0;ve<V.length;ve++)_e(V[ve],D,Y,H);d(I.anchor,D,Y);return}if(ge===Di){C(I,D,Y);return}if(H!==2&&oe&1&&ie)if(H===0)ie.beforeEnter(ue),d(ue,D,Y),ln(()=>ie.enter(ue),X);else{const{leave:ve,delayLeave:be,afterLeave:Se}=ie,Pe=()=>d(ue,D,Y),Ye=()=>{ve(ue,()=>{Pe(),Se&&Se()})};be?be(ue,Pe,Ye):Ye()}else d(ue,D,Y)},pe=(I,D,Y,H=!1,X=!1)=>{const{type:ue,props:ge,ref:ie,children:V,dynamicChildren:oe,shapeFlag:we,patchFlag:ve,dirs:be}=I;if(ie!=null&&Yi(ie,null,Y,I,!0),we&256){D.ctx.deactivate(I);return}const Se=we&1&&be,Pe=!Zs(I);let Ye;if(Pe&&(Ye=ge&&ge.onVnodeBeforeUnmount)&&Kn(Ye,D,I),we&6)Ue(I.component,Y,H);else{if(we&128){I.suspense.unmount(Y,H);return}Se&&_r(I,null,D,"beforeUnmount"),we&64?I.type.remove(I,D,Y,X,gt,H):oe&&(ue!==Nn||ve>0&&ve&64)?Ke(oe,D,Y,!1,!0):(ue===Nn&&ve&384||!X&&we&16)&&Ke(V,D,Y),H&&ke(I)}(Pe&&(Ye=ge&&ge.onVnodeUnmounted)||Se)&&ln(()=>{Ye&&Kn(Ye,D,I),Se&&_r(I,null,D,"unmounted")},Y)},ke=I=>{const{type:D,el:Y,anchor:H,transition:X}=I;if(D===Nn){Ge(Y,H);return}if(D===Di){z(I);return}const ue=()=>{m(Y),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(I.shapeFlag&1&&X&&!X.persisted){const{leave:ge,delayLeave:ie}=X,V=()=>ge(Y,ue);ie?ie(I.el,ue,V):V()}else ue()},Ge=(I,D)=>{let Y;for(;I!==D;)Y=R(I),m(I),I=Y;m(D)},Ue=(I,D,Y)=>{const{bum:H,scope:X,update:ue,subTree:ge,um:ie}=I;H&&Hs(H),X.stop(),ue&&(ue.active=!1,pe(ge,I,D,Y)),ie&&ln(ie,D),ln(()=>{I.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},Ke=(I,D,Y,H=!1,X=!1,ue=0)=>{for(let ge=ue;ge<I.length;ge++)pe(I[ge],D,Y,H,X)},it=I=>I.shapeFlag&6?it(I.component.subTree):I.shapeFlag&128?I.suspense.next():R(I.anchor||I.el),nt=(I,D,Y)=>{I==null?D._vnode&&pe(D._vnode,null,null,!0):L(D._vnode||null,I,D,null,null,null,Y),Go(),Va(),D._vnode=I},gt={p:L,um:pe,m:_e,r:ke,mt:te,mc:J,pc:le,pbc:W,n:it,o:n};let St,dt;return a&&([St,dt]=a(gt)),{render:nt,hydrate:St,createApp:Yl(nt,St)}}function Dr({effect:n,update:a},l){n.allowRecurse=a.allowRecurse=l}function uu(n,a,l=!1){const d=n.children,m=a.children;if(xe(d)&&xe(m))for(let y=0;y<d.length;y++){const w=d[y];let T=m[y];T.shapeFlag&1&&!T.dynamicChildren&&((T.patchFlag<=0||T.patchFlag===32)&&(T=m[y]=mr(m[y]),T.el=w.el),l||uu(w,T)),T.type===hi&&(T.el=w.el)}}function Gl(n){const a=n.slice(),l=[0];let d,m,y,w,T;const g=n.length;for(d=0;d<g;d++){const h=n[d];if(h!==0){if(m=l[l.length-1],n[m]<h){a[d]=m,l.push(d);continue}for(y=0,w=l.length-1;y<w;)T=y+w>>1,n[l[T]]<h?y=T+1:w=T;h<n[l[y]]&&(y>0&&(a[d]=l[y-1]),l[y]=d)}}for(y=l.length,w=l[y-1];y-- >0;)l[y]=w,w=a[w];return l}const Hl=n=>n.__isTeleport,Nn=Symbol(void 0),hi=Symbol(void 0),tr=Symbol(void 0),Di=Symbol(void 0),Es=[];let Ln=null;function Xn(n=!1){Es.push(Ln=n?null:[])}function Xl(){Es.pop(),Ln=Es[Es.length-1]||null}let As=1;function oa(n){As+=n}function Zl(n){return n.dynamicChildren=As>0?Ln||ns:null,Xl(),As>0&&Ln&&Ln.push(n),n}function Zn(n,a,l,d,m,y){return Zl(nn(n,a,l,d,m,y,!0))}function Ql(n){return n?n.__v_isVNode===!0:!1}function Rr(n,a){return n.type===a.type&&n.key===a.key}const mi="__vInternal",cu=({key:n})=>n!=null?n:null,Qs=({ref:n,ref_key:a,ref_for:l})=>n!=null?Dt(n)||rn(n)||Je(n)?{i:_n,r:n,k:a,f:!!l}:n:null;function nn(n,a=null,l=null,d=0,m=null,y=n===Nn?0:1,w=!1,T=!1){const g={__v_isVNode:!0,__v_skip:!0,type:n,props:a,key:a&&cu(a),ref:a&&Qs(a),scopeId:Ya,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:d,dynamicProps:m,dynamicChildren:null,appContext:null,ctx:_n};return T?(go(g,l),y&128&&n.normalize(g)):l&&(g.shapeFlag|=Dt(l)?8:16),As>0&&!w&&Ln&&(g.patchFlag>0||y&6)&&g.patchFlag!==32&&Ln.push(g),g}const Fr=ef;function ef(n,a=null,l=null,d=0,m=null,y=!1){if((!n||n===xl)&&(n=tr),Ql(n)){const T=Tr(n,a,!0);return l&&go(T,l),As>0&&!y&&Ln&&(T.shapeFlag&6?Ln[Ln.indexOf(n)]=T:Ln.push(T)),T.patchFlag|=-2,T}if(df(n)&&(n=n.__vccOpts),a){a=tf(a);let{class:T,style:g}=a;T&&!Dt(T)&&(a.class=Hi(T)),Tt(g)&&(Ma(g)&&!xe(g)&&(g=qt({},g)),a.style=Gi(g))}const w=Dt(n)?1:pl(n)?128:Hl(n)?64:Tt(n)?4:Je(n)?2:0;return nn(n,a,l,d,m,w,y,!0)}function tf(n){return n?Ma(n)||mi in n?qt({},n):n:null}function Tr(n,a,l=!1){const{props:d,ref:m,patchFlag:y,children:w}=n,T=a?nf(d||{},a):d;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:T,key:T&&cu(T),ref:a&&a.ref?l&&m?xe(m)?m.concat(Qs(a)):[m,Qs(a)]:Qs(a):m,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:w,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:a&&n.type!==Nn?y===-1?16:y|16:y,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Tr(n.ssContent),ssFallback:n.ssFallback&&Tr(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx}}function lu(n=" ",a=0){return Fr(hi,null,n,a)}function Yn(n){return n==null||typeof n=="boolean"?Fr(tr):xe(n)?Fr(Nn,null,n.slice()):typeof n=="object"?mr(n):Fr(hi,null,String(n))}function mr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Tr(n)}function go(n,a){let l=0;const{shapeFlag:d}=n;if(a==null)a=null;else if(xe(a))l=16;else if(typeof a=="object")if(d&65){const m=a.default;m&&(m._c&&(m._d=!1),go(n,m()),m._c&&(m._d=!0));return}else{l=32;const m=a._;!m&&!(mi in a)?a._ctx=_n:m===3&&_n&&(_n.slots._===1?a._=1:(a._=2,n.patchFlag|=1024))}else Je(a)?(a={default:a,_ctx:_n},l=32):(a=String(a),d&64?(l=16,a=[lu(a)]):l=8);n.children=a,n.shapeFlag|=l}function nf(...n){const a={};for(let l=0;l<n.length;l++){const d=n[l];for(const m in d)if(m==="class")a.class!==d.class&&(a.class=Hi([a.class,d.class]));else if(m==="style")a.style=Gi([a.style,d.style]);else if(ii(m)){const y=a[m],w=d[m];w&&y!==w&&!(xe(y)&&y.includes(w))&&(a[m]=y?[].concat(y,w):w)}else m!==""&&(a[m]=d[m])}return a}function Kn(n,a,l,d=null){Dn(n,a,7,[l,d])}const rf=au();let sf=0;function of(n,a,l){const d=n.type,m=(a?a.appContext:n.appContext)||rf,y={uid:sf++,vnode:n,type:d,parent:a,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ic(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ru(d,m),emitsOptions:qa(d,m),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:d.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=a?a.root:y,y.emit=ll.bind(null,y),n.ce&&n.ce(y),y}let Ut=null;const af=()=>Ut||_n,as=n=>{Ut=n,n.scope.on()},Jr=()=>{Ut&&Ut.scope.off(),Ut=null};function fu(n){return n.vnode.shapeFlag&4}let ks=!1;function uf(n,a=!1){ks=a;const{props:l,children:d}=n.vnode,m=fu(n);Ul(n,l,m,a),Vl(n,d);const y=m?cf(n,a):void 0;return ks=!1,y}function cf(n,a){const l=n.type;n.accessCache=Object.create(null),n.proxy=Fa(new Proxy(n.ctx,Rl));const{setup:d}=l;if(d){const m=n.setupContext=d.length>1?ff(n):null;as(n),us();const y=pr(d,n,0,[n.props,m]);if(cs(),Jr(),Ea(y)){if(y.then(Jr,Jr),a)return y.then(w=>{aa(n,w,a)}).catch(w=>{ci(w,n,0)});n.asyncDep=y}else aa(n,y,a)}else du(n,a)}function aa(n,a,l){Je(a)?n.type.__ssrInlineRender?n.ssrRender=a:n.render=a:Tt(a)&&(n.setupState=Ja(a)),du(n,l)}let ua;function du(n,a,l){const d=n.type;if(!n.render){if(!a&&ua&&!d.render){const m=d.template||ho(n).template;if(m){const{isCustomElement:y,compilerOptions:w}=n.appContext.config,{delimiters:T,compilerOptions:g}=d,h=qt(qt({isCustomElement:y,delimiters:T},w),g);d.render=ua(m,h)}}n.render=d.render||Bn}as(n),us(),Ll(n),cs(),Jr()}function lf(n){return new Proxy(n.attrs,{get(a,l){return In(n,"get","$attrs"),a[l]}})}function ff(n){const a=d=>{n.exposed=d||{}};let l;return{get attrs(){return l||(l=lf(n))},slots:n.slots,emit:n.emit,expose:a}}function gi(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Ja(Fa(n.exposed)),{get(a,l){if(l in a)return a[l];if(l in bs)return bs[l](n)},has(a,l){return l in a||l in bs}}))}function df(n){return Je(n)&&"__vccOpts"in n}const hf=(n,a)=>rl(n,a,ks),mf=Symbol(""),gf=()=>Xs(mf),pf="3.2.45",yf="http://www.w3.org/2000/svg",Lr=typeof document<"u"?document:null,ca=Lr&&Lr.createElement("template"),Tf={insert:(n,a,l)=>{a.insertBefore(n,l||null)},remove:n=>{const a=n.parentNode;a&&a.removeChild(n)},createElement:(n,a,l,d)=>{const m=a?Lr.createElementNS(yf,n):Lr.createElement(n,l?{is:l}:void 0);return n==="select"&&d&&d.multiple!=null&&m.setAttribute("multiple",d.multiple),m},createText:n=>Lr.createTextNode(n),createComment:n=>Lr.createComment(n),setText:(n,a)=>{n.nodeValue=a},setElementText:(n,a)=>{n.textContent=a},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Lr.querySelector(n),setScopeId(n,a){n.setAttribute(a,"")},insertStaticContent(n,a,l,d,m,y){const w=l?l.previousSibling:a.lastChild;if(m&&(m===y||m.nextSibling))for(;a.insertBefore(m.cloneNode(!0),l),!(m===y||!(m=m.nextSibling)););else{ca.innerHTML=d?`<svg>${n}</svg>`:n;const T=ca.content;if(d){const g=T.firstChild;for(;g.firstChild;)T.appendChild(g.firstChild);T.removeChild(g)}a.insertBefore(T,l)}return[w?w.nextSibling:a.firstChild,l?l.previousSibling:a.lastChild]}};function vf(n,a,l){const d=n._vtc;d&&(a=(a?[a,...d]:[...d]).join(" ")),a==null?n.removeAttribute("class"):l?n.setAttribute("class",a):n.className=a}function wf(n,a,l){const d=n.style,m=Dt(l);if(l&&!m){for(const y in l)Wi(d,y,l[y]);if(a&&!Dt(a))for(const y in a)l[y]==null&&Wi(d,y,"")}else{const y=d.display;m?a!==l&&(d.cssText=l):a&&n.removeAttribute("style"),"_vod"in n&&(d.display=y)}}const la=/\s*!important$/;function Wi(n,a,l){if(xe(l))l.forEach(d=>Wi(n,a,d));else if(l==null&&(l=""),a.startsWith("--"))n.setProperty(a,l);else{const d=bf(n,a);la.test(l)?n.setProperty(Ur(d),l.replace(la,""),"important"):n[d]=l}}const fa=["Webkit","Moz","ms"],Ci={};function bf(n,a){const l=Ci[a];if(l)return l;let d=os(a);if(d!=="filter"&&d in n)return Ci[a]=d;d=Sa(d);for(let m=0;m<fa.length;m++){const y=fa[m]+d;if(y in n)return Ci[a]=y}return a}const da="http://www.w3.org/1999/xlink";function Ef(n,a,l,d,m){if(d&&a.startsWith("xlink:"))l==null?n.removeAttributeNS(da,a.slice(6,a.length)):n.setAttributeNS(da,a,l);else{const y=pc(a);l==null||y&&!va(l)?n.removeAttribute(a):n.setAttribute(a,y?"":l)}}function Nf(n,a,l,d,m,y,w){if(a==="innerHTML"||a==="textContent"){d&&w(d,m,y),n[a]=l==null?"":l;return}if(a==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=l;const g=l==null?"":l;(n.value!==g||n.tagName==="OPTION")&&(n.value=g),l==null&&n.removeAttribute(a);return}let T=!1;if(l===""||l==null){const g=typeof n[a];g==="boolean"?l=va(l):l==null&&g==="string"?(l="",T=!0):g==="number"&&(l=0,T=!0)}try{n[a]=l}catch{}T&&n.removeAttribute(a)}function ts(n,a,l,d){n.addEventListener(a,l,d)}function If(n,a,l,d){n.removeEventListener(a,l,d)}function Sf(n,a,l,d,m=null){const y=n._vei||(n._vei={}),w=y[a];if(d&&w)w.value=d;else{const[T,g]=Af(a);if(d){const h=y[a]=Pf(d,m);ts(n,T,h,g)}else w&&(If(n,T,w,g),y[a]=void 0)}}const ha=/(?:Once|Passive|Capture)$/;function Af(n){let a;if(ha.test(n)){a={};let d;for(;d=n.match(ha);)n=n.slice(0,n.length-d[0].length),a[d[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Ur(n.slice(2)),a]}let xi=0;const kf=Promise.resolve(),Of=()=>xi||(kf.then(()=>xi=0),xi=Date.now());function Pf(n,a){const l=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=l.attached)return;Dn(_f(d,l.value),a,5,[d])};return l.value=n,l.attached=Of(),l}function _f(n,a){if(xe(a)){const l=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{l.call(n),n._stopped=!0},a.map(d=>m=>!m._stopped&&d&&d(m))}else return a}const ma=/^on[a-z]/,Df=(n,a,l,d,m=!1,y,w,T,g)=>{a==="class"?vf(n,d,m):a==="style"?wf(n,l,d):ii(a)?Xi(a)||Sf(n,a,l,d,w):(a[0]==="."?(a=a.slice(1),!0):a[0]==="^"?(a=a.slice(1),!1):Cf(n,a,d,m))?Nf(n,a,d,y,w,T,g):(a==="true-value"?n._trueValue=d:a==="false-value"&&(n._falseValue=d),Ef(n,a,d,m))};function Cf(n,a,l,d){return d?!!(a==="innerHTML"||a==="textContent"||a in n&&ma.test(a)&&Je(l)):a==="spellcheck"||a==="draggable"||a==="translate"||a==="form"||a==="list"&&n.tagName==="INPUT"||a==="type"&&n.tagName==="TEXTAREA"||ma.test(a)&&Dt(l)?!1:a in n}const xf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};El.props;const ga=n=>{const a=n.props["onUpdate:modelValue"]||!1;return xe(a)?l=>Hs(a,l):a};function Rf(n){n.target.composing=!0}function pa(n){const a=n.target;a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}const ya={created(n,{modifiers:{lazy:a,trim:l,number:d}},m){n._assign=ga(m);const y=d||m.props&&m.props.type==="number";ts(n,a?"change":"input",w=>{if(w.target.composing)return;let T=n.value;l&&(T=T.trim()),y&&(T=ni(T)),n._assign(T)}),l&&ts(n,"change",()=>{n.value=n.value.trim()}),a||(ts(n,"compositionstart",Rf),ts(n,"compositionend",pa),ts(n,"change",pa))},mounted(n,{value:a}){n.value=a==null?"":a},beforeUpdate(n,{value:a,modifiers:{lazy:l,trim:d,number:m}},y){if(n._assign=ga(y),n.composing||document.activeElement===n&&n.type!=="range"&&(l||d&&n.value.trim()===a||(m||n.type==="number")&&ni(n.value)===a))return;const w=a==null?"":a;n.value!==w&&(n.value=w)}},Lf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zs=(n,a)=>l=>{if(!("key"in l))return;const d=Ur(l.key);if(a.some(m=>m===d||Lf[m]===d))return n(l)},Bf=qt({patchProp:Df},Tf);let Ta;function Mf(){return Ta||(Ta=Wl(Bf))}const Ff=(...n)=>{const a=Mf().createApp(...n),{mount:l}=a;return a.mount=d=>{const m=Jf(d);if(!m)return;const y=a._component;!Je(y)&&!y.render&&!y.template&&(y.template=m.innerHTML),m.innerHTML="";const w=l(m,!1,m instanceof SVGElement);return m instanceof Element&&(m.removeAttribute("v-cloak"),m.setAttribute("data-v-app","")),w},a};function Jf(n){return Dt(n)?document.querySelector(n):n}var Uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $f(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hu={exports:{}};/*!
 * 
 * yorkie-js-sdk for building collaborative editing applications.
 *  - Version: v0.4.12
 *  - Date: 2024-01-05T11:06Z
 *  - Homepage: https://yorkie.dev
 *
 * Copyright 2020 The Yorkie Authors. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(n,a){(function(d,m){n.exports=m()})(Uf,()=>(()=>{var l={646:(w,T,g)=>{Object.defineProperty(T,"__esModule",{value:!0});const{proto3:h,StringValue:S,Timestamp:v}=g(532),R=h.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),P=h.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),q=h.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:te},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:ue}}]),L=h.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:ge},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:O,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:V},{no:6,name:"is_removed",kind:"scalar",T:8}]),O=h.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:A},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:U,repeated:!0},{no:4,name:"presence_change",kind:"message",T:H}]),A=h.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),U=h.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:C,oneof:"body"},{no:2,name:"add",kind:"message",T:z,oneof:"body"},{no:3,name:"move",kind:"message",T:B,oneof:"body"},{no:4,name:"remove",kind:"message",T:b,oneof:"body"},{no:5,name:"edit",kind:"message",T:Q,oneof:"body"},{no:6,name:"select",kind:"message",T:J,oneof:"body"},{no:7,name:"style",kind:"message",T:_,oneof:"body"},{no:8,name:"increase",kind:"message",T:W,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Z,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:ae,oneof:"body"}]),C=h.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:j},{no:4,name:"executed_at",kind:"message",T:V}],{localName:"Operation_Set"}),z=h.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"prev_created_at",kind:"message",T:V},{no:3,name:"value",kind:"message",T:j},{no:4,name:"executed_at",kind:"message",T:V}],{localName:"Operation_Add"}),B=h.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"prev_created_at",kind:"message",T:V},{no:3,name:"created_at",kind:"message",T:V},{no:4,name:"executed_at",kind:"message",T:V}],{localName:"Operation_Move"}),b=h.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"created_at",kind:"message",T:V},{no:3,name:"executed_at",kind:"message",T:V}],{localName:"Operation_Remove"}),Q=h.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"from",kind:"message",T:ie},{no:3,name:"to",kind:"message",T:ie},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:V}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:V},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),J=h.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"from",kind:"message",T:ie},{no:3,name:"to",kind:"message",T:ie},{no:4,name:"executed_at",kind:"message",T:V}],{localName:"Operation_Select"}),_=h.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"from",kind:"message",T:ie},{no:3,name:"to",kind:"message",T:ie},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:V},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:V}}],{localName:"Operation_Style"}),W=h.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"value",kind:"message",T:j},{no:3,name:"executed_at",kind:"message",T:V}],{localName:"Operation_Increase"}),Z=h.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"from",kind:"message",T:gt},{no:3,name:"to",kind:"message",T:gt},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:V}},{no:5,name:"contents",kind:"message",T:it,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:V}],{localName:"Operation_TreeEdit"}),ae=h.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:V},{no:2,name:"from",kind:"message",T:gt},{no:3,name:"to",kind:"message",T:gt},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:V}],{localName:"Operation_TreeStyle"}),j=h.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:V},{no:2,name:"moved_at",kind:"message",T:V},{no:3,name:"removed_at",kind:"message",T:V},{no:4,name:"type",kind:"enum",T:h.getEnumType(R)},{no:5,name:"value",kind:"scalar",T:12}]),te=h.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:fe,oneof:"body"},{no:2,name:"json_array",kind:"message",T:re,oneof:"body"},{no:3,name:"primitive",kind:"message",T:G,oneof:"body"},{no:5,name:"text",kind:"message",T:le,oneof:"body"},{no:6,name:"counter",kind:"message",T:Le,oneof:"body"},{no:7,name:"tree",kind:"message",T:ce,oneof:"body"}]),fe=h.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:_e,repeated:!0},{no:2,name:"created_at",kind:"message",T:V},{no:3,name:"moved_at",kind:"message",T:V},{no:4,name:"removed_at",kind:"message",T:V}],{localName:"JSONElement_JSONObject"}),re=h.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:pe,repeated:!0},{no:2,name:"created_at",kind:"message",T:V},{no:3,name:"moved_at",kind:"message",T:V},{no:4,name:"removed_at",kind:"message",T:V}],{localName:"JSONElement_JSONArray"}),G=h.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:h.getEnumType(R)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:V},{no:4,name:"moved_at",kind:"message",T:V},{no:5,name:"removed_at",kind:"message",T:V}],{localName:"JSONElement_Primitive"}),le=h.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:Ge,repeated:!0},{no:2,name:"created_at",kind:"message",T:V},{no:3,name:"moved_at",kind:"message",T:V},{no:4,name:"removed_at",kind:"message",T:V}],{localName:"JSONElement_Text"}),Le=h.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:h.getEnumType(R)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:V},{no:4,name:"moved_at",kind:"message",T:V},{no:5,name:"removed_at",kind:"message",T:V}],{localName:"JSONElement_Counter"}),ce=h.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:Ke,repeated:!0},{no:2,name:"created_at",kind:"message",T:V},{no:3,name:"moved_at",kind:"message",T:V},{no:4,name:"removed_at",kind:"message",T:V}],{localName:"JSONElement_Tree"}),_e=h.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:te}]),pe=h.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:pe},{no:2,name:"element",kind:"message",T:te}]),ke=h.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:V}]),Ge=h.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:Ue},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:V},{no:4,name:"ins_prev_id",kind:"message",T:Ue},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ke}}]),Ue=h.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:V},{no:2,name:"offset",kind:"scalar",T:5}]),Ke=h.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:nt},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:V},{no:5,name:"ins_prev_id",kind:"message",T:nt},{no:6,name:"ins_next_id",kind:"message",T:nt},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:ke}}]),it=h.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:Ke,repeated:!0}]),nt=h.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:V},{no:2,name:"offset",kind:"scalar",T:5}]),gt=h.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:nt},{no:2,name:"left_sibling_id",kind:"message",T:nt}]),St=h.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:v}]),dt=h.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:v},{no:9,name:"updated_at",kind:"message",T:v}]),I=h.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:S},{no:2,name:"auth_webhook_url",kind:"message",T:S},{no:3,name:"auth_webhook_methods",kind:"message",T:D},{no:4,name:"client_deactivate_threshold",kind:"message",T:S}]),D=h.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"}),Y=h.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:v},{no:5,name:"accessed_at",kind:"message",T:v},{no:6,name:"updated_at",kind:"message",T:v}]),H=h.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:h.getEnumType(X)},{no:2,name:"presence",kind:"message",T:ue}]),X=h.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),ue=h.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),ge=h.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),ie=h.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:V},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),V=h.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),oe=h.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),we=h.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:h.getEnumType(P)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:oe}]);T.ValueType=R,T.DocEventType=P,T.Snapshot=q,T.ChangePack=L,T.Change=O,T.ChangeID=A,T.Operation=U,T.Operation_Set=C,T.Operation_Add=z,T.Operation_Move=B,T.Operation_Remove=b,T.Operation_Edit=Q,T.Operation_Select=J,T.Operation_Style=_,T.Operation_Increase=W,T.Operation_TreeEdit=Z,T.Operation_TreeStyle=ae,T.JSONElementSimple=j,T.JSONElement=te,T.JSONElement_JSONObject=fe,T.JSONElement_JSONArray=re,T.JSONElement_Primitive=G,T.JSONElement_Text=le,T.JSONElement_Counter=Le,T.JSONElement_Tree=ce,T.RHTNode=_e,T.RGANode=pe,T.NodeAttr=ke,T.TextNode=Ge,T.TextNodeID=Ue,T.TreeNode=Ke,T.TreeNodes=it,T.TreeNodeID=nt,T.TreePos=gt,T.User=St,T.Project=dt,T.UpdatableProjectFields=I,T.UpdatableProjectFields_AuthWebhookMethods=D,T.DocumentSummary=Y,T.PresenceChange=H,T.PresenceChange_ChangeType=X,T.Presence=ue,T.Checkpoint=ge,T.TextNodePos=ie,T.TimeTicket=V,T.DocEventBody=oe,T.DocEvent=we},295:(w,T,g)=>{const{ActivateClientRequest:h,ActivateClientResponse:S,AttachDocumentRequest:v,AttachDocumentResponse:R,BroadcastRequest:P,BroadcastResponse:q,DeactivateClientRequest:L,DeactivateClientResponse:O,DetachDocumentRequest:A,DetachDocumentResponse:U,PushPullChangesRequest:C,PushPullChangesResponse:z,RemoveDocumentRequest:B,RemoveDocumentResponse:b,WatchDocumentRequest:Q,WatchDocumentResponse:J}=g(176),{MethodKind:_}=g(532),W={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:h,O:S,kind:_.Unary},deactivateClient:{name:"DeactivateClient",I:L,O,kind:_.Unary},attachDocument:{name:"AttachDocument",I:v,O:R,kind:_.Unary},detachDocument:{name:"DetachDocument",I:A,O:U,kind:_.Unary},removeDocument:{name:"RemoveDocument",I:B,O:b,kind:_.Unary},pushPullChanges:{name:"PushPullChanges",I:C,O:z,kind:_.Unary},watchDocument:{name:"WatchDocument",I:Q,O:J,kind:_.ServerStreaming},broadcast:{name:"Broadcast",I:P,O:q,kind:_.Unary}}};T.V=W},176:(w,T,g)=>{Object.defineProperty(T,"__esModule",{value:!0});const{proto3:h}=g(532),{ChangePack:S,DocEvent:v}=g(646),R=h.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),P=h.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),q=h.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),L=h.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),O=h.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:S}]),A=h.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:S}]),U=h.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:S},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),C=h.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:S}]),z=h.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),B=h.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:b,oneof:"body"},{no:2,name:"event",kind:"message",T:v,oneof:"body"}]),b=h.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),Q=h.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:S}]),J=h.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:S}]),_=h.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:S},{no:4,name:"push_only",kind:"scalar",T:8}]),W=h.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:S}]),Z=h.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),ae=h.makeMessageType("yorkie.v1.BroadcastResponse",[]);T.ActivateClientRequest=R,T.ActivateClientResponse=P,T.DeactivateClientRequest=q,T.DeactivateClientResponse=L,T.AttachDocumentRequest=O,T.AttachDocumentResponse=A,T.DetachDocumentRequest=U,T.DetachDocumentResponse=C,T.WatchDocumentRequest=z,T.WatchDocumentResponse=B,T.WatchDocumentResponse_Initialization=b,T.RemoveDocumentRequest=Q,T.RemoveDocumentResponse=J,T.PushPullChangesRequest=_,T.PushPullChangesResponse=W,T.BroadcastRequest=Z,T.BroadcastResponse=ae},79:(w,T,g)=>{g.d(T,{Lt:()=>P,TD:()=>R,oP:()=>q});var h=g(818),S=g(120),v=g(210),R;(function(L){L[L.Varint=0]="Varint",L[L.Bit64=1]="Bit64",L[L.LengthDelimited=2]="LengthDelimited",L[L.StartGroup=3]="StartGroup",L[L.EndGroup=4]="EndGroup",L[L.Bit32=5]="Bit32"})(R||(R={}));class P{constructor(O){this.stack=[],this.textEncoder=O!=null?O:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let O=0;for(let C=0;C<this.chunks.length;C++)O+=this.chunks[C].length;let A=new Uint8Array(O),U=0;for(let C=0;C<this.chunks.length;C++)A.set(this.chunks[C],U),U+=this.chunks[C].length;return this.chunks=[],A}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let O=this.finish(),A=this.stack.pop();if(!A)throw new Error("invalid state, fork stack empty");return this.chunks=A.chunks,this.buf=A.buf,this.uint32(O.byteLength),this.raw(O)}tag(O,A){return this.uint32((O<<3|A)>>>0)}raw(O){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(O),this}uint32(O){for((0,S.fp)(O);O>127;)this.buf.push(O&127|128),O=O>>>7;return this.buf.push(O),this}int32(O){return(0,S.ug)(O),(0,h.fC)(O,this.buf),this}bool(O){return this.buf.push(O?1:0),this}bytes(O){return this.uint32(O.byteLength),this.raw(O)}string(O){let A=this.textEncoder.encode(O);return this.uint32(A.byteLength),this.raw(A)}float(O){(0,S.E_)(O);let A=new Uint8Array(4);return new DataView(A.buffer).setFloat32(0,O,!0),this.raw(A)}double(O){let A=new Uint8Array(8);return new DataView(A.buffer).setFloat64(0,O,!0),this.raw(A)}fixed32(O){(0,S.fp)(O);let A=new Uint8Array(4);return new DataView(A.buffer).setUint32(0,O,!0),this.raw(A)}sfixed32(O){(0,S.ug)(O);let A=new Uint8Array(4);return new DataView(A.buffer).setInt32(0,O,!0),this.raw(A)}sint32(O){return(0,S.ug)(O),O=(O<<1^O>>31)>>>0,(0,h.fC)(O,this.buf),this}sfixed64(O){let A=new Uint8Array(8),U=new DataView(A.buffer),C=v.q.enc(O);return U.setInt32(0,C.lo,!0),U.setInt32(4,C.hi,!0),this.raw(A)}fixed64(O){let A=new Uint8Array(8),U=new DataView(A.buffer),C=v.q.uEnc(O);return U.setInt32(0,C.lo,!0),U.setInt32(4,C.hi,!0),this.raw(A)}int64(O){let A=v.q.enc(O);return(0,h._y)(A.lo,A.hi,this.buf),this}sint64(O){let A=v.q.enc(O),U=A.hi>>31,C=A.lo<<1^U,z=(A.hi<<1|A.lo>>>31)^U;return(0,h._y)(C,z,this.buf),this}uint64(O){let A=v.q.uEnc(O);return(0,h._y)(A.lo,A.hi,this.buf),this}}class q{constructor(O,A){this.varint64=h.sg,this.uint32=h.jI,this.buf=O,this.len=O.length,this.pos=0,this.view=new DataView(O.buffer,O.byteOffset,O.byteLength),this.textDecoder=A!=null?A:new TextDecoder}tag(){let O=this.uint32(),A=O>>>3,U=O&7;if(A<=0||U<0||U>5)throw new Error("illegal tag: field no "+A+" wire type "+U);return[A,U]}skip(O){let A=this.pos;switch(O){case R.Varint:for(;this.buf[this.pos++]&128;);break;case R.Bit64:this.pos+=4;case R.Bit32:this.pos+=4;break;case R.LengthDelimited:let U=this.uint32();this.pos+=U;break;case R.StartGroup:let C;for(;(C=this.tag()[1])!==R.EndGroup;)this.skip(C);break;default:throw new Error("cant skip wire type "+O)}return this.assertBounds(),this.buf.subarray(A,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let O=this.uint32();return O>>>1^-(O&1)}int64(){return v.q.dec(...this.varint64())}uint64(){return v.q.uDec(...this.varint64())}sint64(){let[O,A]=this.varint64(),U=-(O&1);return O=(O>>>1|(A&1)<<31)^U,A=A>>>1^U,v.q.dec(O,A)}bool(){let[O,A]=this.varint64();return O!==0||A!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return v.q.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return v.q.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let O=this.uint32(),A=this.pos;return this.pos+=O,this.assertBounds(),this.buf.subarray(A,A+O)}string(){return this.textDecoder.decode(this.bytes())}}},465:(w,T,g)=>{g.d(T,{p:()=>S,w:()=>h});var h;(function(v){v[v.DOUBLE=1]="DOUBLE",v[v.FLOAT=2]="FLOAT",v[v.INT64=3]="INT64",v[v.UINT64=4]="UINT64",v[v.INT32=5]="INT32",v[v.FIXED64=6]="FIXED64",v[v.FIXED32=7]="FIXED32",v[v.BOOL=8]="BOOL",v[v.STRING=9]="STRING",v[v.BYTES=12]="BYTES",v[v.UINT32=13]="UINT32",v[v.SFIXED32=15]="SFIXED32",v[v.SFIXED64=16]="SFIXED64",v[v.SINT32=17]="SINT32",v[v.SINT64=18]="SINT64"})(h||(h={}));var S;(function(v){v[v.BIGINT=0]="BIGINT",v[v.STRING=1]="STRING"})(S||(S={}))},733:(w,T,g)=>{g.d(T,{I:()=>v});var h=g(561),S=g(850);class v extends h.v{constructor(P){super(),this.typeUrl="",this.value=new Uint8Array(0),S.w.util.initPartial(P,this)}toJson(P){var q;if(this.typeUrl==="")return{};const L=this.typeUrlToName(this.typeUrl),O=(q=P==null?void 0:P.typeRegistry)===null||q===void 0?void 0:q.findMessage(L);if(!O)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let U=O.fromBinary(this.value).toJson(P);return(L.startsWith("google.protobuf.")||U===null||Array.isArray(U)||typeof U!="object")&&(U={value:U}),U["@type"]=this.typeUrl,U}fromJson(P,q){var L;if(P===null||Array.isArray(P)||typeof P!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${P===null?"null":Array.isArray(P)?"array":typeof P}`);if(Object.keys(P).length==0)return this;const O=P["@type"];if(typeof O!="string"||O=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const A=this.typeUrlToName(O),U=(L=q==null?void 0:q.typeRegistry)===null||L===void 0?void 0:L.findMessage(A);if(!U)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${O} is not in the type registry`);let C;if(A.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(P,"value"))C=U.fromJson(P.value,q);else{const z=Object.assign({},P);delete z["@type"],C=U.fromJson(z,q)}return this.packFrom(C),this}packFrom(P){this.value=P.toBinary(),this.typeUrl=this.typeNameToUrl(P.getType().typeName)}unpackTo(P){return this.is(P.getType())?(P.fromBinary(this.value),!0):!1}unpack(P){if(this.typeUrl==="")return;const q=P.findMessage(this.typeUrlToName(this.typeUrl));if(!!q)return q.fromBinary(this.value)}is(P){if(this.typeUrl==="")return!1;const q=this.typeUrlToName(this.typeUrl);let L="";return typeof P=="string"?L=P:L=P.typeName,q===L}typeNameToUrl(P){return`type.googleapis.com/${P}`}typeUrlToName(P){if(!P.length)throw new Error(`invalid type url: ${P}`);const q=P.lastIndexOf("/"),L=q>=0?P.substring(q+1):P;if(!L.length)throw new Error(`invalid type url: ${P}`);return L}static pack(P){const q=new v;return q.packFrom(P),q}static fromBinary(P,q){return new v().fromBinary(P,q)}static fromJson(P,q){return new v().fromJson(P,q)}static fromJsonString(P,q){return new v().fromJsonString(P,q)}static equals(P,q){return S.w.util.equals(v,P,q)}}v.runtime=S.w,v.typeName="google.protobuf.Any",v.fields=S.w.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])},818:(w,T,g)=>{g.d(T,{Ak:()=>P,CZ:()=>R,Fd:()=>q,_y:()=>S,fC:()=>C,jI:()=>z,sg:()=>h});function h(){let B=0,b=0;for(let J=0;J<28;J+=7){let _=this.buf[this.pos++];if(B|=(_&127)<<J,(_&128)==0)return this.assertBounds(),[B,b]}let Q=this.buf[this.pos++];if(B|=(Q&15)<<28,b=(Q&112)>>4,(Q&128)==0)return this.assertBounds(),[B,b];for(let J=3;J<=31;J+=7){let _=this.buf[this.pos++];if(b|=(_&127)<<J,(_&128)==0)return this.assertBounds(),[B,b]}throw new Error("invalid varint")}function S(B,b,Q){for(let W=0;W<28;W=W+7){const Z=B>>>W,ae=!(Z>>>7==0&&b==0),j=(ae?Z|128:Z)&255;if(Q.push(j),!ae)return}const J=B>>>28&15|(b&7)<<4,_=b>>3!=0;if(Q.push((_?J|128:J)&255),!!_){for(let W=3;W<31;W=W+7){const Z=b>>>W,ae=Z>>>7!=0,j=(ae?Z|128:Z)&255;if(Q.push(j),!ae)return}Q.push(b>>>31&1)}}const v=4294967296;function R(B){const b=B[0]==="-";b&&(B=B.slice(1));const Q=1e6;let J=0,_=0;function W(Z,ae){const j=Number(B.slice(Z,ae));_*=Q,J=J*Q+j,J>=v&&(_=_+(J/v|0),J=J%v)}return W(-24,-18),W(-18,-12),W(-12,-6),W(-6),b?A(J,_):O(J,_)}function P(B,b){let Q=O(B,b);const J=Q.hi&2147483648;J&&(Q=A(Q.lo,Q.hi));const _=q(Q.lo,Q.hi);return J?"-"+_:_}function q(B,b){if({lo:B,hi:b}=L(B,b),b<=2097151)return String(v*b+B);const Q=B&16777215,J=(B>>>24|b<<8)&16777215,_=b>>16&65535;let W=Q+J*6777216+_*6710656,Z=J+_*8147497,ae=_*2;const j=1e7;return W>=j&&(Z+=Math.floor(W/j),W%=j),Z>=j&&(ae+=Math.floor(Z/j),Z%=j),ae.toString()+U(Z)+U(W)}function L(B,b){return{lo:B>>>0,hi:b>>>0}}function O(B,b){return{lo:B|0,hi:b|0}}function A(B,b){return b=~b,B?B=~B+1:b+=1,O(B,b)}const U=B=>{const b=String(B);return"0000000".slice(b.length)+b};function C(B,b){if(B>=0){for(;B>127;)b.push(B&127|128),B=B>>>7;b.push(B)}else{for(let Q=0;Q<9;Q++)b.push(B&127|128),B=B>>7;b.push(1)}}function z(){let B=this.buf[this.pos++],b=B&127;if((B&128)==0)return this.assertBounds(),b;if(B=this.buf[this.pos++],b|=(B&127)<<7,(B&128)==0)return this.assertBounds(),b;if(B=this.buf[this.pos++],b|=(B&127)<<14,(B&128)==0)return this.assertBounds(),b;if(B=this.buf[this.pos++],b|=(B&127)<<21,(B&128)==0)return this.assertBounds(),b;B=this.buf[this.pos++],b|=(B&15)<<28;for(let Q=5;(B&128)!==0&&Q<10;Q++)B=this.buf[this.pos++];if((B&128)!=0)throw new Error("invalid varint");return this.assertBounds(),b>>>0}},532:(w,T,g)=>{g.r(T),g.d(T,{Any:()=>qr.I,Api:()=>Tn,BinaryReader:()=>Z.oP,BinaryWriter:()=>Z.Lt,BoolValue:()=>Ht,BytesValue:()=>Ee,CodeGeneratorRequest:()=>Qt,CodeGeneratorResponse:()=>Nt,CodeGeneratorResponse_Feature:()=>$n,CodeGeneratorResponse_File:()=>Vt,DescriptorProto:()=>Ue,DescriptorProto_ExtensionRange:()=>Ke,DescriptorProto_ReservedRange:()=>it,DoubleValue:()=>Gt,Duration:()=>ot,Edition:()=>pe,Empty:()=>An,Enum:()=>ze,EnumDescriptorProto:()=>H,EnumDescriptorProto_EnumReservedRange:()=>X,EnumOptions:()=>Ze,EnumValue:()=>yn,EnumValueDescriptorProto:()=>ue,EnumValueOptions:()=>kt,ExtensionRangeOptions:()=>nt,ExtensionRangeOptions_Declaration:()=>St,ExtensionRangeOptions_VerificationState:()=>gt,FeatureSet:()=>tt,FeatureSetDefaults:()=>se,FeatureSetDefaults_FeatureSetEditionDefault:()=>pt,FeatureSet_EnumType:()=>vr,FeatureSet_FieldPresence:()=>sr,FeatureSet_JsonFormat:()=>Er,FeatureSet_MessageEncoding:()=>br,FeatureSet_RepeatedFieldEncoding:()=>zt,FeatureSet_Utf8Validation:()=>wr,Field:()=>en,FieldDescriptorProto:()=>dt,FieldDescriptorProto_Label:()=>D,FieldDescriptorProto_Type:()=>I,FieldMask:()=>kn,FieldOptions:()=>ve,FieldOptions_CType:()=>be,FieldOptions_EditionDefault:()=>De,FieldOptions_JSType:()=>Se,FieldOptions_OptionRetention:()=>Pe,FieldOptions_OptionTargetType:()=>Ye,Field_Cardinality:()=>ur,Field_Kind:()=>ar,FileDescriptorProto:()=>Ge,FileDescriptorSet:()=>ke,FileOptions:()=>V,FileOptions_OptimizeMode:()=>oe,FloatValue:()=>jt,GeneratedCodeInfo:()=>fn,GeneratedCodeInfo_Annotation:()=>dn,GeneratedCodeInfo_Annotation_Semantic:()=>ir,Int32Value:()=>ct,Int64Value:()=>xt,ListValue:()=>Ft,LongType:()=>v.p,Message:()=>ce.v,MessageOptions:()=>we,Method:()=>cn,MethodDescriptorProto:()=>ie,MethodIdempotency:()=>_e.w,MethodKind:()=>_e.t,MethodOptions:()=>Ct,MethodOptions_IdempotencyLevel:()=>Wt,Mixin:()=>vn,NullValue:()=>Mt,OneofDescriptorProto:()=>Y,OneofOptions:()=>He,Option:()=>_t,ScalarType:()=>v.w,ServiceDescriptorProto:()=>ge,ServiceOptions:()=>Yt,SourceCodeInfo:()=>je,SourceCodeInfo_Location:()=>rt,SourceContext:()=>an,StringValue:()=>Rt,Struct:()=>$t,Syntax:()=>un,Timestamp:()=>on,Type:()=>Pt,UInt32Value:()=>mt,UInt64Value:()=>st,UninterpretedOption:()=>qe,UninterpretedOption_NamePart:()=>ut,Value:()=>ht,Version:()=>Zt,WireType:()=>Z.TD,codegenInfo:()=>Le,createDescriptorSet:()=>fs,createRegistry:()=>_s,createRegistryFromDescriptors:()=>Ir,proto2:()=>b,proto3:()=>h.w,protoBase64:()=>W.W,protoDelimited:()=>fe,protoDouble:()=>J,protoInt64:()=>_.q,toPlainMessage:()=>Wr});var h=g(850),S=g(493),v=g(465),R=g(744);function P(){return Object.assign(Object.assign({},(0,R.gY)()),{writeMessage(c,s,u){const N=c.getType();let k;try{for(k of N.fields.byNumber()){let M,F=k.repeated,ee=k.localName;if(k.oneof){const K=c[k.oneof.localName];if(K.case!==ee)continue;M=K.value}else if(M=c[ee],M===void 0&&!k.oneof&&!k.opt)throw new Error(`cannot encode field ${N.typeName}.${k.name} to binary: required field not set`);switch(k.kind){case"scalar":case"enum":let K=k.kind=="enum"?v.w.INT32:k.T;if(F)if(k.packed)(0,R.Jj)(s,K,k.no,M);else for(const he of M)(0,R.NN)(s,K,k.no,he,!0);else M!==void 0&&(0,R.NN)(s,K,k.no,M,!0);break;case"message":if(F)for(const he of M)(0,R.oQ)(s,u,k,he);else(0,R.oQ)(s,u,k,M);break;case"map":for(const[he,ye]of Object.entries(M))(0,R.gQ)(s,u,k,he,ye);break}}}catch(M){let F=k?`cannot encode field ${N.typeName}.${k==null?void 0:k.name} to binary`:`cannot encode message ${N.typeName} to binary`,ee=M instanceof Error?M.message:String(M);throw new Error(F+(ee.length>0?`: ${ee}`:""))}return u.writeUnknownFields&&this.writeUnknownFields(c,s),s}})}var q=g(433),L=g(501),O=g(215),A=g(504),U=g(432),C=g(120),z=g(814);function B(){return(0,z.b)((c,s)=>function(N,k,M){if(N.kind=="map"){const F={};switch(N.V.kind){case"scalar":for(const[K,he]of Object.entries(k)){const ye=s(N.V.T,he,!0);(0,C.hu)(ye!==void 0),F[K.toString()]=ye}break;case"message":for(const[K,he]of Object.entries(k))F[K.toString()]=he.toJson(M);break;case"enum":const ee=N.V.T;for(const[K,he]of Object.entries(k)){(0,C.hu)(he===void 0||typeof he=="number");const ye=c(ee,he,!0,M.enumAsInteger);(0,C.hu)(ye!==void 0),F[K.toString()]=ye}break}return M.emitDefaultValues||Object.keys(F).length>0?F:void 0}else if(N.repeated){const F=[];switch(N.kind){case"scalar":for(let ee=0;ee<k.length;ee++)F.push(s(N.T,k[ee],!0));break;case"enum":for(let ee=0;ee<k.length;ee++)F.push(c(N.T,k[ee],!0,M.enumAsInteger));break;case"message":for(let ee=0;ee<k.length;ee++)F.push(k[ee].toJson(M));break}return M.emitDefaultValues||F.length>0?F:void 0}else{if(k===void 0){if(!N.oneof&&!N.opt)throw"required field not set";return}switch(N.kind){case"scalar":return s(N.T,k,!0);case"enum":return c(N.T,k,!0,M.enumAsInteger);case"message":return(0,U.E)(N.T,k).toJson(M)}}})}const b=(0,S.F)("proto2",B(),P(),Object.assign(Object.assign({},(0,q.f)()),{newFieldList(c){return new L.i(c,Q)},initFields(c){for(const s of c.getType().fields.byMember()){const u=s.localName,N=c;if(s.repeated){N[u]=[];continue}switch(s.kind){case"oneof":N[u]={case:void 0};break;case"map":N[u]={};break}}}}));function Q(c){var s,u,N,k,M;const F=[];let ee;for(const K of typeof c=="function"?c():c){const he=K;if(he.localName=(0,A.Rz)(K.name,K.oneof!==void 0),he.jsonName=(s=K.jsonName)!==null&&s!==void 0?s:(0,A.x1)(K.name),he.repeated=(u=K.repeated)!==null&&u!==void 0?u:!1,K.kind=="scalar"&&(he.L=(N=K.L)!==null&&N!==void 0?N:v.p.BIGINT),K.oneof!==void 0){const ye=typeof K.oneof=="string"?K.oneof:K.oneof.name;(!ee||ee.name!=ye)&&(ee=new O.o(ye)),he.oneof=ee,ee.addField(he)}K.kind=="message"&&(he.delimited=(k=K.delimited)!==null&&k!==void 0?k:!1),he.packed=(M=K.packed)!==null&&M!==void 0?M:!1,F.push(he)}return F}const J={NaN:Number.NaN,POSITIVE_INFINITY:Number.POSITIVE_INFINITY,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY};var _=g(210),W=g(236),Z=g(79),ae=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=c[Symbol.asyncIterator],u;return s?s.call(c):(c=typeof __values=="function"?__values(c):c[Symbol.iterator](),u={},N("next"),N("throw"),N("return"),u[Symbol.asyncIterator]=function(){return this},u);function N(M){u[M]=c[M]&&function(F){return new Promise(function(ee,K){F=c[M](F),k(ee,K,F.done,F.value)})}}function k(M,F,ee,K){Promise.resolve(K).then(function(he){M({value:he,done:ee})},F)}},j=function(c){return this instanceof j?(this.v=c,this):new j(c)},te=function(c,s,u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=u.apply(c,s||[]),k,M=[];return k={},ee("next"),ee("throw"),ee("return",F),k[Symbol.asyncIterator]=function(){return this},k;function F(Ce){return function(Lt){return Promise.resolve(Lt).then(Ce,Oe)}}function ee(Ce,Lt){N[Ce]&&(k[Ce]=function(wn){return new Promise(function(yi,Ar){M.push([Ce,wn,yi,Ar])>1||K(Ce,wn)})},Lt&&(k[Ce]=Lt(k[Ce])))}function K(Ce,Lt){try{he(N[Ce](Lt))}catch(wn){at(M[0][3],wn)}}function he(Ce){Ce.value instanceof j?Promise.resolve(Ce.value.v).then(ye,Oe):at(M[0][2],Ce)}function ye(Ce){K("next",Ce)}function Oe(Ce){K("throw",Ce)}function at(Ce,Lt){Ce(Lt),M.shift(),M.length&&K(M[0][0],M[0][1])}};const fe={enc(c,s){const u=(0,R.gY)().makeWriteOptions(s);return u.writerFactory().bytes(c.toBinary(u)).finish()},dec(c,s,u){const N=(0,R.gY)().makeReadOptions(u);return c.fromBinary(N.readerFactory(s).bytes(),N)},decStream(c,s){return te(this,arguments,function*(){var N,k,M,F;function ee(at,Ce){const Lt=new Uint8Array(at.byteLength+Ce.byteLength);return Lt.set(at),Lt.set(Ce,at.length),Lt}let K=new Uint8Array(0);try{for(var he=!0,ye=ae(s),Oe;Oe=yield j(ye.next()),N=Oe.done,!N;he=!0)for(F=Oe.value,he=!1,K=ee(K,F);;){const Ce=fe.peekSize(K);if(Ce.eof||Ce.offset+Ce.size>K.byteLength)break;yield yield j(fe.dec(c,K)),K=K.subarray(Ce.offset+Ce.size)}}catch(at){k={error:at}}finally{try{!he&&!N&&(M=ye.return)&&(yield j(M.call(ye)))}finally{if(k)throw k.error}}if(K.byteLength>0)throw new Error("incomplete data")})},peekSize(c){const s={eof:!0,size:null,offset:null};for(let u=0;u<10;u++){if(u>c.byteLength)return s;if((c[u]&128)==0){const N=new Z.oP(c);let k;try{k=N.uint32()}catch(M){if(M instanceof RangeError)return s;throw M}return{eof:!1,size:k,offset:N.pos}}}throw new Error("invalid varint")}};var re=g(781);function G(c){switch(c.typeName){case"google.protobuf.Any":{const s=c.fields.find(N=>N.number==1&&N.fieldKind=="scalar"&&N.scalar===v.w.STRING),u=c.fields.find(N=>N.number==2&&N.fieldKind=="scalar"&&N.scalar===v.w.BYTES);if(s&&u)return{typeName:c.typeName,typeUrl:s,value:u};break}case"google.protobuf.Timestamp":{const s=c.fields.find(N=>N.number==1&&N.fieldKind=="scalar"&&N.scalar===v.w.INT64),u=c.fields.find(N=>N.number==2&&N.fieldKind=="scalar"&&N.scalar===v.w.INT32);if(s&&u)return{typeName:c.typeName,seconds:s,nanos:u};break}case"google.protobuf.Duration":{const s=c.fields.find(N=>N.number==1&&N.fieldKind=="scalar"&&N.scalar===v.w.INT64),u=c.fields.find(N=>N.number==2&&N.fieldKind=="scalar"&&N.scalar===v.w.INT32);if(s&&u)return{typeName:c.typeName,seconds:s,nanos:u};break}case"google.protobuf.Struct":{const s=c.fields.find(u=>u.number==1&&!u.repeated);if((s==null?void 0:s.fieldKind)!=="map"||s.mapValue.kind!=="message"||s.mapValue.message.typeName!=="google.protobuf.Value")break;return{typeName:c.typeName,fields:s}}case"google.protobuf.Value":{const s=c.oneofs.find(K=>K.name==="kind"),u=c.fields.find(K=>K.number==1&&K.oneof===s);if((u==null?void 0:u.fieldKind)!=="enum"||u.enum.typeName!=="google.protobuf.NullValue")return;const N=c.fields.find(K=>K.number==2&&K.fieldKind=="scalar"&&K.scalar===v.w.DOUBLE&&K.oneof===s),k=c.fields.find(K=>K.number==3&&K.fieldKind=="scalar"&&K.scalar===v.w.STRING&&K.oneof===s),M=c.fields.find(K=>K.number==4&&K.fieldKind=="scalar"&&K.scalar===v.w.BOOL&&K.oneof===s),F=c.fields.find(K=>K.number==5&&K.oneof===s);if((F==null?void 0:F.fieldKind)!=="message"||F.message.typeName!=="google.protobuf.Struct")return;const ee=c.fields.find(K=>K.number==6&&K.oneof===s);if((ee==null?void 0:ee.fieldKind)!=="message"||ee.message.typeName!=="google.protobuf.ListValue")return;if(s&&N&&k&&M)return{typeName:c.typeName,kind:s,nullValue:u,numberValue:N,stringValue:k,boolValue:M,structValue:F,listValue:ee};break}case"google.protobuf.ListValue":{const s=c.fields.find(u=>u.number==1&&u.repeated);if((s==null?void 0:s.fieldKind)!="message"||s.message.typeName!=="google.protobuf.Value")break;return{typeName:c.typeName,values:s}}case"google.protobuf.FieldMask":{const s=c.fields.find(u=>u.number==1&&u.fieldKind=="scalar"&&u.scalar===v.w.STRING&&u.repeated);if(s)return{typeName:c.typeName,paths:s};break}case"google.protobuf.DoubleValue":case"google.protobuf.FloatValue":case"google.protobuf.Int64Value":case"google.protobuf.UInt64Value":case"google.protobuf.Int32Value":case"google.protobuf.UInt32Value":case"google.protobuf.BoolValue":case"google.protobuf.StringValue":case"google.protobuf.BytesValue":{const s=c.fields.find(u=>u.number==1&&u.name=="value");if(!s||s.fieldKind!=="scalar")break;return{typeName:c.typeName,value:s}}}}const le="@bufbuild/protobuf",Le={packageName:"@bufbuild/protobuf",localName:A.r1,reifyWkt:G,getUnwrappedFieldType:U.w,scalarDefaultValue:re.kY,safeIdentifier:A.GD,safeObjectProperty:A.ll,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:le},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:le},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:le},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:le},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:le},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:le},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:le},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:le},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:le},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:le},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:le},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:le},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:le},protoDouble:{typeOnly:!1,privateImportPath:"./proto-double.js",publicImportPath:le},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:le},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:le},LongType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:le},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:le},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:le},IMessageTypeRegistry:{typeOnly:!0,privateImportPath:"./type-registry.js",publicImportPath:le}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]};var ce=g(561),_e=g(328),pe;(function(c){c[c.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",c[c.EDITION_PROTO2=998]="EDITION_PROTO2",c[c.EDITION_PROTO3=999]="EDITION_PROTO3",c[c.EDITION_2023=1e3]="EDITION_2023",c[c.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",c[c.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",c[c.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",c[c.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",c[c.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY"})(pe||(pe={})),b.util.setEnumType(pe,"google.protobuf.Edition",[{no:0,name:"EDITION_UNKNOWN"},{no:998,name:"EDITION_PROTO2"},{no:999,name:"EDITION_PROTO3"},{no:1e3,name:"EDITION_2023"},{no:1,name:"EDITION_1_TEST_ONLY"},{no:2,name:"EDITION_2_TEST_ONLY"},{no:99997,name:"EDITION_99997_TEST_ONLY"},{no:99998,name:"EDITION_99998_TEST_ONLY"},{no:99999,name:"EDITION_99999_TEST_ONLY"}]);class ke extends ce.v{constructor(s){super(),this.file=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new ke().fromBinary(s,u)}static fromJson(s,u){return new ke().fromJson(s,u)}static fromJsonString(s,u){return new ke().fromJsonString(s,u)}static equals(s,u){return b.util.equals(ke,s,u)}}ke.runtime=b,ke.typeName="google.protobuf.FileDescriptorSet",ke.fields=b.util.newFieldList(()=>[{no:1,name:"file",kind:"message",T:Ge,repeated:!0}]);class Ge extends ce.v{constructor(s){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new Ge().fromBinary(s,u)}static fromJson(s,u){return new Ge().fromJson(s,u)}static fromJsonString(s,u){return new Ge().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Ge,s,u)}}Ge.runtime=b,Ge.typeName="google.protobuf.FileDescriptorProto",Ge.fields=b.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:Ue,repeated:!0},{no:5,name:"enum_type",kind:"message",T:H,repeated:!0},{no:6,name:"service",kind:"message",T:ge,repeated:!0},{no:7,name:"extension",kind:"message",T:dt,repeated:!0},{no:8,name:"options",kind:"message",T:V,opt:!0},{no:9,name:"source_code_info",kind:"message",T:je,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0},{no:14,name:"edition",kind:"enum",T:b.getEnumType(pe),opt:!0}]);class Ue extends ce.v{constructor(s){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new Ue().fromBinary(s,u)}static fromJson(s,u){return new Ue().fromJson(s,u)}static fromJsonString(s,u){return new Ue().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Ue,s,u)}}Ue.runtime=b,Ue.typeName="google.protobuf.DescriptorProto",Ue.fields=b.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:dt,repeated:!0},{no:6,name:"extension",kind:"message",T:dt,repeated:!0},{no:3,name:"nested_type",kind:"message",T:Ue,repeated:!0},{no:4,name:"enum_type",kind:"message",T:H,repeated:!0},{no:5,name:"extension_range",kind:"message",T:Ke,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:Y,repeated:!0},{no:7,name:"options",kind:"message",T:we,opt:!0},{no:9,name:"reserved_range",kind:"message",T:it,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class Ke extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new Ke().fromBinary(s,u)}static fromJson(s,u){return new Ke().fromJson(s,u)}static fromJsonString(s,u){return new Ke().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Ke,s,u)}}Ke.runtime=b,Ke.typeName="google.protobuf.DescriptorProto.ExtensionRange",Ke.fields=b.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:nt,opt:!0}]);class it extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new it().fromBinary(s,u)}static fromJson(s,u){return new it().fromJson(s,u)}static fromJsonString(s,u){return new it().fromJsonString(s,u)}static equals(s,u){return b.util.equals(it,s,u)}}it.runtime=b,it.typeName="google.protobuf.DescriptorProto.ReservedRange",it.fields=b.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class nt extends ce.v{constructor(s){super(),this.uninterpretedOption=[],this.declaration=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new nt().fromBinary(s,u)}static fromJson(s,u){return new nt().fromJson(s,u)}static fromJsonString(s,u){return new nt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(nt,s,u)}}nt.runtime=b,nt.typeName="google.protobuf.ExtensionRangeOptions",nt.fields=b.util.newFieldList(()=>[{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0},{no:2,name:"declaration",kind:"message",T:St,repeated:!0},{no:50,name:"features",kind:"message",T:tt,opt:!0},{no:3,name:"verification",kind:"enum",T:b.getEnumType(gt),opt:!0,default:gt.UNVERIFIED}]);var gt;(function(c){c[c.DECLARATION=0]="DECLARATION",c[c.UNVERIFIED=1]="UNVERIFIED"})(gt||(gt={})),b.util.setEnumType(gt,"google.protobuf.ExtensionRangeOptions.VerificationState",[{no:0,name:"DECLARATION"},{no:1,name:"UNVERIFIED"}]);class St extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new St().fromBinary(s,u)}static fromJson(s,u){return new St().fromJson(s,u)}static fromJsonString(s,u){return new St().fromJsonString(s,u)}static equals(s,u){return b.util.equals(St,s,u)}}St.runtime=b,St.typeName="google.protobuf.ExtensionRangeOptions.Declaration",St.fields=b.util.newFieldList(()=>[{no:1,name:"number",kind:"scalar",T:5,opt:!0},{no:2,name:"full_name",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"scalar",T:9,opt:!0},{no:5,name:"reserved",kind:"scalar",T:8,opt:!0},{no:6,name:"repeated",kind:"scalar",T:8,opt:!0}]);class dt extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new dt().fromBinary(s,u)}static fromJson(s,u){return new dt().fromJson(s,u)}static fromJsonString(s,u){return new dt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(dt,s,u)}}dt.runtime=b,dt.typeName="google.protobuf.FieldDescriptorProto",dt.fields=b.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:b.getEnumType(D),opt:!0},{no:5,name:"type",kind:"enum",T:b.getEnumType(I),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:ve,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}]);var I;(function(c){c[c.DOUBLE=1]="DOUBLE",c[c.FLOAT=2]="FLOAT",c[c.INT64=3]="INT64",c[c.UINT64=4]="UINT64",c[c.INT32=5]="INT32",c[c.FIXED64=6]="FIXED64",c[c.FIXED32=7]="FIXED32",c[c.BOOL=8]="BOOL",c[c.STRING=9]="STRING",c[c.GROUP=10]="GROUP",c[c.MESSAGE=11]="MESSAGE",c[c.BYTES=12]="BYTES",c[c.UINT32=13]="UINT32",c[c.ENUM=14]="ENUM",c[c.SFIXED32=15]="SFIXED32",c[c.SFIXED64=16]="SFIXED64",c[c.SINT32=17]="SINT32",c[c.SINT64=18]="SINT64"})(I||(I={})),b.util.setEnumType(I,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var D;(function(c){c[c.OPTIONAL=1]="OPTIONAL",c[c.REPEATED=3]="REPEATED",c[c.REQUIRED=2]="REQUIRED"})(D||(D={})),b.util.setEnumType(D,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:3,name:"LABEL_REPEATED"},{no:2,name:"LABEL_REQUIRED"}]);class Y extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new Y().fromBinary(s,u)}static fromJson(s,u){return new Y().fromJson(s,u)}static fromJsonString(s,u){return new Y().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Y,s,u)}}Y.runtime=b,Y.typeName="google.protobuf.OneofDescriptorProto",Y.fields=b.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:He,opt:!0}]);class H extends ce.v{constructor(s){super(),this.value=[],this.reservedRange=[],this.reservedName=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new H().fromBinary(s,u)}static fromJson(s,u){return new H().fromJson(s,u)}static fromJsonString(s,u){return new H().fromJsonString(s,u)}static equals(s,u){return b.util.equals(H,s,u)}}H.runtime=b,H.typeName="google.protobuf.EnumDescriptorProto",H.fields=b.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:ue,repeated:!0},{no:3,name:"options",kind:"message",T:Ze,opt:!0},{no:4,name:"reserved_range",kind:"message",T:X,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class X extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new X().fromBinary(s,u)}static fromJson(s,u){return new X().fromJson(s,u)}static fromJsonString(s,u){return new X().fromJsonString(s,u)}static equals(s,u){return b.util.equals(X,s,u)}}X.runtime=b,X.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",X.fields=b.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class ue extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new ue().fromBinary(s,u)}static fromJson(s,u){return new ue().fromJson(s,u)}static fromJsonString(s,u){return new ue().fromJsonString(s,u)}static equals(s,u){return b.util.equals(ue,s,u)}}ue.runtime=b,ue.typeName="google.protobuf.EnumValueDescriptorProto",ue.fields=b.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:kt,opt:!0}]);class ge extends ce.v{constructor(s){super(),this.method=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new ge().fromBinary(s,u)}static fromJson(s,u){return new ge().fromJson(s,u)}static fromJsonString(s,u){return new ge().fromJsonString(s,u)}static equals(s,u){return b.util.equals(ge,s,u)}}ge.runtime=b,ge.typeName="google.protobuf.ServiceDescriptorProto",ge.fields=b.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:ie,repeated:!0},{no:3,name:"options",kind:"message",T:Yt,opt:!0}]);class ie extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new ie().fromBinary(s,u)}static fromJson(s,u){return new ie().fromJson(s,u)}static fromJsonString(s,u){return new ie().fromJsonString(s,u)}static equals(s,u){return b.util.equals(ie,s,u)}}ie.runtime=b,ie.typeName="google.protobuf.MethodDescriptorProto",ie.fields=b.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:Ct,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]);class V extends ce.v{constructor(s){super(),this.uninterpretedOption=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new V().fromBinary(s,u)}static fromJson(s,u){return new V().fromJson(s,u)}static fromJsonString(s,u){return new V().fromJsonString(s,u)}static equals(s,u){return b.util.equals(V,s,u)}}V.runtime=b,V.typeName="google.protobuf.FileOptions",V.fields=b.util.newFieldList(()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:b.getEnumType(oe),opt:!0,default:oe.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:50,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);var oe;(function(c){c[c.SPEED=1]="SPEED",c[c.CODE_SIZE=2]="CODE_SIZE",c[c.LITE_RUNTIME=3]="LITE_RUNTIME"})(oe||(oe={})),b.util.setEnumType(oe,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class we extends ce.v{constructor(s){super(),this.uninterpretedOption=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new we().fromBinary(s,u)}static fromJson(s,u){return new we().fromJson(s,u)}static fromJsonString(s,u){return new we().fromJsonString(s,u)}static equals(s,u){return b.util.equals(we,s,u)}}we.runtime=b,we.typeName="google.protobuf.MessageOptions",we.fields=b.util.newFieldList(()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:11,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:12,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class ve extends ce.v{constructor(s){super(),this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new ve().fromBinary(s,u)}static fromJson(s,u){return new ve().fromJson(s,u)}static fromJsonString(s,u){return new ve().fromJsonString(s,u)}static equals(s,u){return b.util.equals(ve,s,u)}}ve.runtime=b,ve.typeName="google.protobuf.FieldOptions",ve.fields=b.util.newFieldList(()=>[{no:1,name:"ctype",kind:"enum",T:b.getEnumType(be),opt:!0,default:be.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:b.getEnumType(Se),opt:!0,default:Se.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:16,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"retention",kind:"enum",T:b.getEnumType(Pe),opt:!0},{no:19,name:"targets",kind:"enum",T:b.getEnumType(Ye),repeated:!0},{no:20,name:"edition_defaults",kind:"message",T:De,repeated:!0},{no:21,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);var be;(function(c){c[c.STRING=0]="STRING",c[c.CORD=1]="CORD",c[c.STRING_PIECE=2]="STRING_PIECE"})(be||(be={})),b.util.setEnumType(be,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]);var Se;(function(c){c[c.JS_NORMAL=0]="JS_NORMAL",c[c.JS_STRING=1]="JS_STRING",c[c.JS_NUMBER=2]="JS_NUMBER"})(Se||(Se={})),b.util.setEnumType(Se,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]);var Pe;(function(c){c[c.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",c[c.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",c[c.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(Pe||(Pe={})),b.util.setEnumType(Pe,"google.protobuf.FieldOptions.OptionRetention",[{no:0,name:"RETENTION_UNKNOWN"},{no:1,name:"RETENTION_RUNTIME"},{no:2,name:"RETENTION_SOURCE"}]);var Ye;(function(c){c[c.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",c[c.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",c[c.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",c[c.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",c[c.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",c[c.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",c[c.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",c[c.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",c[c.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",c[c.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(Ye||(Ye={})),b.util.setEnumType(Ye,"google.protobuf.FieldOptions.OptionTargetType",[{no:0,name:"TARGET_TYPE_UNKNOWN"},{no:1,name:"TARGET_TYPE_FILE"},{no:2,name:"TARGET_TYPE_EXTENSION_RANGE"},{no:3,name:"TARGET_TYPE_MESSAGE"},{no:4,name:"TARGET_TYPE_FIELD"},{no:5,name:"TARGET_TYPE_ONEOF"},{no:6,name:"TARGET_TYPE_ENUM"},{no:7,name:"TARGET_TYPE_ENUM_ENTRY"},{no:8,name:"TARGET_TYPE_SERVICE"},{no:9,name:"TARGET_TYPE_METHOD"}]);class De extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new De().fromBinary(s,u)}static fromJson(s,u){return new De().fromJson(s,u)}static fromJsonString(s,u){return new De().fromJsonString(s,u)}static equals(s,u){return b.util.equals(De,s,u)}}De.runtime=b,De.typeName="google.protobuf.FieldOptions.EditionDefault",De.fields=b.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:b.getEnumType(pe),opt:!0},{no:2,name:"value",kind:"scalar",T:9,opt:!0}]);class He extends ce.v{constructor(s){super(),this.uninterpretedOption=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new He().fromBinary(s,u)}static fromJson(s,u){return new He().fromJson(s,u)}static fromJsonString(s,u){return new He().fromJsonString(s,u)}static equals(s,u){return b.util.equals(He,s,u)}}He.runtime=b,He.typeName="google.protobuf.OneofOptions",He.fields=b.util.newFieldList(()=>[{no:1,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class Ze extends ce.v{constructor(s){super(),this.uninterpretedOption=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new Ze().fromBinary(s,u)}static fromJson(s,u){return new Ze().fromJson(s,u)}static fromJsonString(s,u){return new Ze().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Ze,s,u)}}Ze.runtime=b,Ze.typeName="google.protobuf.EnumOptions",Ze.fields=b.util.newFieldList(()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:7,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class kt extends ce.v{constructor(s){super(),this.uninterpretedOption=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new kt().fromBinary(s,u)}static fromJson(s,u){return new kt().fromJson(s,u)}static fromJsonString(s,u){return new kt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(kt,s,u)}}kt.runtime=b,kt.typeName="google.protobuf.EnumValueOptions",kt.fields=b.util.newFieldList(()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"features",kind:"message",T:tt,opt:!0},{no:3,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class Yt extends ce.v{constructor(s){super(),this.uninterpretedOption=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new Yt().fromBinary(s,u)}static fromJson(s,u){return new Yt().fromJson(s,u)}static fromJsonString(s,u){return new Yt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Yt,s,u)}}Yt.runtime=b,Yt.typeName="google.protobuf.ServiceOptions",Yt.fields=b.util.newFieldList(()=>[{no:34,name:"features",kind:"message",T:tt,opt:!0},{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);class Ct extends ce.v{constructor(s){super(),this.uninterpretedOption=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new Ct().fromBinary(s,u)}static fromJson(s,u){return new Ct().fromJson(s,u)}static fromJsonString(s,u){return new Ct().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Ct,s,u)}}Ct.runtime=b,Ct.typeName="google.protobuf.MethodOptions",Ct.fields=b.util.newFieldList(()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:b.getEnumType(Wt),opt:!0,default:Wt.IDEMPOTENCY_UNKNOWN},{no:35,name:"features",kind:"message",T:tt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:qe,repeated:!0}]);var Wt;(function(c){c[c.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",c[c.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",c[c.IDEMPOTENT=2]="IDEMPOTENT"})(Wt||(Wt={})),b.util.setEnumType(Wt,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class qe extends ce.v{constructor(s){super(),this.name=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new qe().fromBinary(s,u)}static fromJson(s,u){return new qe().fromJson(s,u)}static fromJsonString(s,u){return new qe().fromJsonString(s,u)}static equals(s,u){return b.util.equals(qe,s,u)}}qe.runtime=b,qe.typeName="google.protobuf.UninterpretedOption",qe.fields=b.util.newFieldList(()=>[{no:2,name:"name",kind:"message",T:ut,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]);class ut extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new ut().fromBinary(s,u)}static fromJson(s,u){return new ut().fromJson(s,u)}static fromJsonString(s,u){return new ut().fromJsonString(s,u)}static equals(s,u){return b.util.equals(ut,s,u)}}ut.runtime=b,ut.typeName="google.protobuf.UninterpretedOption.NamePart",ut.fields=b.util.newFieldList(()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]);class tt extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new tt().fromBinary(s,u)}static fromJson(s,u){return new tt().fromJson(s,u)}static fromJsonString(s,u){return new tt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(tt,s,u)}}tt.runtime=b,tt.typeName="google.protobuf.FeatureSet",tt.fields=b.util.newFieldList(()=>[{no:1,name:"field_presence",kind:"enum",T:b.getEnumType(sr),opt:!0},{no:2,name:"enum_type",kind:"enum",T:b.getEnumType(vr),opt:!0},{no:3,name:"repeated_field_encoding",kind:"enum",T:b.getEnumType(zt),opt:!0},{no:4,name:"utf8_validation",kind:"enum",T:b.getEnumType(wr),opt:!0},{no:5,name:"message_encoding",kind:"enum",T:b.getEnumType(br),opt:!0},{no:6,name:"json_format",kind:"enum",T:b.getEnumType(Er),opt:!0}]);var sr;(function(c){c[c.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",c[c.EXPLICIT=1]="EXPLICIT",c[c.IMPLICIT=2]="IMPLICIT",c[c.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(sr||(sr={})),b.util.setEnumType(sr,"google.protobuf.FeatureSet.FieldPresence",[{no:0,name:"FIELD_PRESENCE_UNKNOWN"},{no:1,name:"EXPLICIT"},{no:2,name:"IMPLICIT"},{no:3,name:"LEGACY_REQUIRED"}]);var vr;(function(c){c[c.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",c[c.OPEN=1]="OPEN",c[c.CLOSED=2]="CLOSED"})(vr||(vr={})),b.util.setEnumType(vr,"google.protobuf.FeatureSet.EnumType",[{no:0,name:"ENUM_TYPE_UNKNOWN"},{no:1,name:"OPEN"},{no:2,name:"CLOSED"}]);var zt;(function(c){c[c.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",c[c.PACKED=1]="PACKED",c[c.EXPANDED=2]="EXPANDED"})(zt||(zt={})),b.util.setEnumType(zt,"google.protobuf.FeatureSet.RepeatedFieldEncoding",[{no:0,name:"REPEATED_FIELD_ENCODING_UNKNOWN"},{no:1,name:"PACKED"},{no:2,name:"EXPANDED"}]);var wr;(function(c){c[c.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",c[c.NONE=1]="NONE",c[c.VERIFY=2]="VERIFY"})(wr||(wr={})),b.util.setEnumType(wr,"google.protobuf.FeatureSet.Utf8Validation",[{no:0,name:"UTF8_VALIDATION_UNKNOWN"},{no:1,name:"NONE"},{no:2,name:"VERIFY"}]);var br;(function(c){c[c.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",c[c.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",c[c.DELIMITED=2]="DELIMITED"})(br||(br={})),b.util.setEnumType(br,"google.protobuf.FeatureSet.MessageEncoding",[{no:0,name:"MESSAGE_ENCODING_UNKNOWN"},{no:1,name:"LENGTH_PREFIXED"},{no:2,name:"DELIMITED"}]);var Er;(function(c){c[c.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",c[c.ALLOW=1]="ALLOW",c[c.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(Er||(Er={})),b.util.setEnumType(Er,"google.protobuf.FeatureSet.JsonFormat",[{no:0,name:"JSON_FORMAT_UNKNOWN"},{no:1,name:"ALLOW"},{no:2,name:"LEGACY_BEST_EFFORT"}]);class se extends ce.v{constructor(s){super(),this.defaults=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new se().fromBinary(s,u)}static fromJson(s,u){return new se().fromJson(s,u)}static fromJsonString(s,u){return new se().fromJsonString(s,u)}static equals(s,u){return b.util.equals(se,s,u)}}se.runtime=b,se.typeName="google.protobuf.FeatureSetDefaults",se.fields=b.util.newFieldList(()=>[{no:1,name:"defaults",kind:"message",T:pt,repeated:!0},{no:4,name:"minimum_edition",kind:"enum",T:b.getEnumType(pe),opt:!0},{no:5,name:"maximum_edition",kind:"enum",T:b.getEnumType(pe),opt:!0}]);class pt extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new pt().fromBinary(s,u)}static fromJson(s,u){return new pt().fromJson(s,u)}static fromJsonString(s,u){return new pt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(pt,s,u)}}pt.runtime=b,pt.typeName="google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault",pt.fields=b.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:b.getEnumType(pe),opt:!0},{no:2,name:"features",kind:"message",T:tt,opt:!0}]);class je extends ce.v{constructor(s){super(),this.location=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new je().fromBinary(s,u)}static fromJson(s,u){return new je().fromJson(s,u)}static fromJsonString(s,u){return new je().fromJsonString(s,u)}static equals(s,u){return b.util.equals(je,s,u)}}je.runtime=b,je.typeName="google.protobuf.SourceCodeInfo",je.fields=b.util.newFieldList(()=>[{no:1,name:"location",kind:"message",T:rt,repeated:!0}]);class rt extends ce.v{constructor(s){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new rt().fromBinary(s,u)}static fromJson(s,u){return new rt().fromJson(s,u)}static fromJsonString(s,u){return new rt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(rt,s,u)}}rt.runtime=b,rt.typeName="google.protobuf.SourceCodeInfo.Location",rt.fields=b.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]);class fn extends ce.v{constructor(s){super(),this.annotation=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new fn().fromBinary(s,u)}static fromJson(s,u){return new fn().fromJson(s,u)}static fromJsonString(s,u){return new fn().fromJsonString(s,u)}static equals(s,u){return b.util.equals(fn,s,u)}}fn.runtime=b,fn.typeName="google.protobuf.GeneratedCodeInfo",fn.fields=b.util.newFieldList(()=>[{no:1,name:"annotation",kind:"message",T:dn,repeated:!0}]);class dn extends ce.v{constructor(s){super(),this.path=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new dn().fromBinary(s,u)}static fromJson(s,u){return new dn().fromJson(s,u)}static fromJsonString(s,u){return new dn().fromJsonString(s,u)}static equals(s,u){return b.util.equals(dn,s,u)}}dn.runtime=b,dn.typeName="google.protobuf.GeneratedCodeInfo.Annotation",dn.fields=b.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0},{no:5,name:"semantic",kind:"enum",T:b.getEnumType(ir),opt:!0}]);var ir;(function(c){c[c.NONE=0]="NONE",c[c.SET=1]="SET",c[c.ALIAS=2]="ALIAS"})(ir||(ir={})),b.util.setEnumType(ir,"google.protobuf.GeneratedCodeInfo.Annotation.Semantic",[{no:0,name:"NONE"},{no:1,name:"SET"},{no:2,name:"ALIAS"}]);function zn(c,s){const u=c.values.find(N=>N.name===s);return(0,C.hu)(u,`cannot parse ${c.name} default value: ${s}`),u.number}function sn(c,s){switch(c){case v.w.STRING:return s;case v.w.BYTES:{const u=We(s);if(u===!1)throw new Error(`cannot parse ${v.w[c]} default value: ${s}`);return u}case v.w.INT64:case v.w.SFIXED64:case v.w.SINT64:return _.q.parse(s);case v.w.UINT64:case v.w.FIXED64:return _.q.uParse(s);case v.w.DOUBLE:case v.w.FLOAT:switch(s){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(s)}case v.w.BOOL:return s==="true";case v.w.INT32:case v.w.UINT32:case v.w.SINT32:case v.w.FIXED32:case v.w.SFIXED32:return parseInt(s,10)}}function We(c){const s=[],u={tail:c,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(N){if(this.tail.length>=N){const k=this.tail.substring(0,N);return this.tail=this.tail.substring(N),k}return!1}};for(;u.next();)switch(u.c){case"\\":if(u.next())switch(u.c){case"\\":s.push(u.c.charCodeAt(0));break;case"b":s.push(8);break;case"f":s.push(12);break;case"n":s.push(10);break;case"r":s.push(13);break;case"t":s.push(9);break;case"v":s.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const N=u.c,k=u.take(2);if(k===!1)return!1;const M=parseInt(N+k,8);if(isNaN(M))return!1;s.push(M);break}case"x":{const N=u.c,k=u.take(2);if(k===!1)return!1;const M=parseInt(N+k,16);if(isNaN(M))return!1;s.push(M);break}case"u":{const N=u.c,k=u.take(4);if(k===!1)return!1;const M=parseInt(N+k,16);if(isNaN(M))return!1;const F=new Uint8Array(4);new DataView(F.buffer).setInt32(0,M,!0),s.push(F[0],F[1],F[2],F[3]);break}case"U":{const N=u.c,k=u.take(8);if(k===!1)return!1;const M=_.q.uEnc(N+k),F=new Uint8Array(8),ee=new DataView(F.buffer);ee.setInt32(0,M.lo,!0),ee.setInt32(4,M.hi,!0),s.push(F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7]);break}}break;default:s.push(u.c.charCodeAt(0))}return new Uint8Array(s)}const $r=se.fromBinary(W.W.dec("ChESDAgBEAIYAiABKAEwAhjmBwoREgwIAhABGAEgAigBMAEY5wcKERIMCAEQARgBIAIoATABGOgHIOYHKOgH"));function ls(c){const s=c.minimumEdition,u=c.maximumEdition;if(s===void 0||u===void 0||c.defaults.some(k=>k.edition===void 0))throw new Error("Invalid FeatureSetDefaults");const N=new Map;return(k,...M)=>{var F,ee;let K=N.get(k);if(K===void 0){if(k<s)throw new Error(`Edition ${pe[k]} is earlier than the minimum supported edition ${pe[s]}`);if(u<k)throw new Error(`Edition ${pe[k]} is later than the maximum supported edition ${pe[u]}`);let ye;for(const Oe of c.defaults){const at=(F=Oe.edition)!==null&&F!==void 0?F:0;at>k||ye!==void 0&&ye.e>at||(ye={e:at,f:(ee=Oe.features)!==null&&ee!==void 0?ee:new tt})}if(ye===void 0)throw new Error(`No valid default found for edition ${pe[k]}`);K=ye.f.toBinary(),N.set(k,K)}const he=tt.fromBinary(K);for(const ye of M)ye!==void 0&&he.fromBinary(ye.toBinary());if(!hn(he))throw new Error(`Invalid FeatureSet for edition ${pe[k]}`);return he}}function hn(c){for(const s of tt.fields.list()){const u=c[s.localName];if(u===void 0||s.kind=="enum"&&u===0)return!1}return!0}function fs(c,s){var u;const N={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map,resolveFeatures:ls((u=s==null?void 0:s.featureSetDefaults)!==null&&u!==void 0?u:$r)},M=(c instanceof ke?c.file:c instanceof Uint8Array?ke.fromBinary(c).file:c).map(F=>pi(F,N));return Object.assign({files:M},N)}function pi(c,s){var u,N;(0,C.hu)(c.name,"invalid FileDescriptorProto: missing name");const k=Object.assign(Object.assign({kind:"file",proto:c,deprecated:(N=(u=c.options)===null||u===void 0?void 0:u.deprecated)!==null&&N!==void 0?N:!1},Os(c.syntax,c.edition)),{name:c.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return Bt(this.proto.sourceCodeInfo,[Et.FileDescriptorProto_Syntax])},getPackageComments(){return Bt(this.proto.sourceCodeInfo,[Et.FileDescriptorProto_Package])},getFeatures(){var M;return s.resolveFeatures(this.edition,(M=this.proto.options)===null||M===void 0?void 0:M.features)}});s.mapEntries.clear();for(const M of c.enumType)ds(M,k,void 0,s);for(const M of c.messageType)hs(M,k,void 0,s);for(const M of c.service)mn(M,k,s);Mn(k,s);for(const M of s.mapEntries.values())jr(M,s);for(const M of k.messages)jr(M,s),Mn(M,s);return s.mapEntries.clear(),k}function Mn(c,s){switch(c.kind){case"file":for(const u of c.proto.extension){const N=Vr(u,c,void 0,s);c.extensions.push(N),s.extensions.set(N.typeName,N)}break;case"message":for(const u of c.proto.extension){const N=Vr(u,c.file,c,s);c.nestedExtensions.push(N),s.extensions.set(N.typeName,N)}for(const u of c.nestedMessages)Mn(u,s);break}}function jr(c,s){const u=c.proto.oneofDecl.map(k=>or(k,c,s)),N=new Set;for(const k of c.proto.field){const M=Ot(k,u),F=ms(k,c.file,c,M,s);c.fields.push(F),M===void 0?c.members.push(F):(M.fields.push(F),N.has(M)||(N.add(M),c.members.push(M)))}for(const k of u.filter(M=>N.has(M)))c.oneofs.push(k);for(const k of c.nestedMessages)jr(k,s)}function ds(c,s,u,N){var k,M,F;(0,C.hu)(c.name,"invalid EnumDescriptorProto: missing name");const ee={kind:"enum",proto:c,deprecated:(M=(k=c.options)===null||k===void 0?void 0:k.deprecated)!==null&&M!==void 0?M:!1,file:s,parent:u,name:c.name,typeName:Nr(c,u,s),values:[],sharedPrefix:(0,A.Sm)(c.name,c.value.map(K=>{var he;return(he=K.name)!==null&&he!==void 0?he:""})),toString(){return`enum ${this.typeName}`},getComments(){const K=this.parent?[...this.parent.getComments().sourcePath,Et.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[Et.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,K)},getFeatures(){var K,he,ye;const Oe=(he=(K=this.parent)===null||K===void 0?void 0:K.getFeatures())!==null&&he!==void 0?he:this.file.getFeatures();return N.resolveFeatures(this.file.edition,Oe,(ye=this.proto.options)===null||ye===void 0?void 0:ye.features)}};N.enums.set(ee.typeName,ee),c.value.forEach(K=>{var he,ye;(0,C.hu)(K.name,"invalid EnumValueDescriptorProto: missing name"),(0,C.hu)(K.number!==void 0,"invalid EnumValueDescriptorProto: missing number"),ee.values.push({kind:"enum_value",proto:K,deprecated:(ye=(he=K.options)===null||he===void 0?void 0:he.deprecated)!==null&&ye!==void 0?ye:!1,parent:ee,name:K.name,number:K.number,toString(){return`enum value ${ee.typeName}.${this.name}`},declarationString(){var Oe;let at=`${this.name} = ${this.number}`;return((Oe=this.proto.options)===null||Oe===void 0?void 0:Oe.deprecated)===!0&&(at+=" [deprecated = true]"),at},getComments(){const Oe=[...this.parent.getComments().sourcePath,Et.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,Oe)},getFeatures(){var Oe;return N.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(Oe=this.proto.options)===null||Oe===void 0?void 0:Oe.features)}})}),((F=u==null?void 0:u.nestedEnums)!==null&&F!==void 0?F:s.enums).push(ee)}function hs(c,s,u,N){var k,M,F,ee;(0,C.hu)(c.name,"invalid DescriptorProto: missing name");const K={kind:"message",proto:c,deprecated:(M=(k=c.options)===null||k===void 0?void 0:k.deprecated)!==null&&M!==void 0?M:!1,file:s,parent:u,name:c.name,typeName:Nr(c,u,s),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const he=this.parent?[...this.parent.getComments().sourcePath,Et.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[Et.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,he)},getFeatures(){var he,ye,Oe;const at=(ye=(he=this.parent)===null||he===void 0?void 0:he.getFeatures())!==null&&ye!==void 0?ye:this.file.getFeatures();return N.resolveFeatures(this.file.edition,at,(Oe=this.proto.options)===null||Oe===void 0?void 0:Oe.features)}};((F=c.options)===null||F===void 0?void 0:F.mapEntry)===!0?N.mapEntries.set(K.typeName,K):(((ee=u==null?void 0:u.nestedMessages)!==null&&ee!==void 0?ee:s.messages).push(K),N.messages.set(K.typeName,K));for(const he of c.enumType)ds(he,s,K,N);for(const he of c.nestedType)hs(he,s,K,N)}function mn(c,s,u){var N,k;(0,C.hu)(c.name,"invalid ServiceDescriptorProto: missing name");const M={kind:"service",proto:c,deprecated:(k=(N=c.options)===null||N===void 0?void 0:N.deprecated)!==null&&k!==void 0?k:!1,file:s,name:c.name,typeName:Nr(c,void 0,s),methods:[],toString(){return`service ${this.typeName}`},getComments(){const F=[Et.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,F)},getFeatures(){var F;return u.resolveFeatures(this.file.edition,this.file.getFeatures(),(F=this.proto.options)===null||F===void 0?void 0:F.features)}};s.services.push(M),u.services.set(M.typeName,M);for(const F of c.method)M.methods.push(Cn(F,M,u))}function Cn(c,s,u){var N,k,M;(0,C.hu)(c.name,"invalid MethodDescriptorProto: missing name"),(0,C.hu)(c.inputType,"invalid MethodDescriptorProto: missing input_type"),(0,C.hu)(c.outputType,"invalid MethodDescriptorProto: missing output_type");let F;c.clientStreaming===!0&&c.serverStreaming===!0?F=_e.t.BiDiStreaming:c.clientStreaming===!0?F=_e.t.ClientStreaming:c.serverStreaming===!0?F=_e.t.ServerStreaming:F=_e.t.Unary;let ee;switch((N=c.options)===null||N===void 0?void 0:N.idempotencyLevel){case Wt.IDEMPOTENT:ee=_e.w.Idempotent;break;case Wt.NO_SIDE_EFFECTS:ee=_e.w.NoSideEffects;break;case Wt.IDEMPOTENCY_UNKNOWN:case void 0:ee=void 0;break}const K=u.messages.get(bt(c.inputType)),he=u.messages.get(bt(c.outputType));(0,C.hu)(K,`invalid MethodDescriptorProto: input_type ${c.inputType} not found`),(0,C.hu)(he,`invalid MethodDescriptorProto: output_type ${c.inputType} not found`);const ye=c.name;return{kind:"rpc",proto:c,deprecated:(M=(k=c.options)===null||k===void 0?void 0:k.deprecated)!==null&&M!==void 0?M:!1,parent:s,name:ye,methodKind:F,input:K,output:he,idempotency:ee,toString(){return`rpc ${s.typeName}.${ye}`},getComments(){const Oe=[...this.parent.getComments().sourcePath,Et.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return Bt(s.file.proto.sourceCodeInfo,Oe)},getFeatures(){var Oe;return u.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(Oe=this.proto.options)===null||Oe===void 0?void 0:Oe.features)}}}function or(c,s,u){return(0,C.hu)(c.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:c,deprecated:!1,parent:s,fields:[],name:c.name,toString(){return`oneof ${s.typeName}.${this.name}`},getComments(){const N=[...this.parent.getComments().sourcePath,Et.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return Bt(s.file.proto.sourceCodeInfo,N)},getFeatures(){var N;return u.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(N=this.proto.options)===null||N===void 0?void 0:N.features)}}}function ms(c,s,u,N,k){var M,F,ee;(0,C.hu)(c.name,"invalid FieldDescriptorProto: missing name"),(0,C.hu)(c.number,"invalid FieldDescriptorProto: missing number"),(0,C.hu)(c.type,"invalid FieldDescriptorProto: missing type");const K={proto:c,deprecated:(F=(M=c.options)===null||M===void 0?void 0:M.deprecated)!==null&&F!==void 0?F:!1,name:c.name,number:c.number,parent:u,oneof:N,optional:Re(c,s.syntax),packedByDefault:Me(s,c,k.resolveFeatures),packed:Sn(s,u,c,k.resolveFeatures),jsonName:c.jsonName===(0,A.x1)(c.name)?void 0:c.jsonName,scalar:void 0,longType:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,declarationString:gn,toString(){return`field ${this.parent.typeName}.${this.name}`},getComments(){const ye=[...this.parent.getComments().sourcePath,Et.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return Bt(s.proto.sourceCodeInfo,ye)},getFeatures(){var ye;return k.resolveFeatures(s.edition,this.parent.getFeatures(),(ye=this.proto.options)===null||ye===void 0?void 0:ye.features)}},he=c.label===D.REPEATED;switch(c.type){case I.MESSAGE:case I.GROUP:{(0,C.hu)(c.typeName,"invalid FieldDescriptorProto: missing type_name");const ye=k.mapEntries.get(bt(c.typeName));if(ye!==void 0)return(0,C.hu)(he,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},K),{kind:"field",fieldKind:"map",repeated:!1}),de(ye));const Oe=k.messages.get(bt(c.typeName));return(0,C.hu)(Oe!==void 0,`invalid FieldDescriptorProto: type_name ${c.typeName} not found`),Object.assign(Object.assign({},K),{kind:"field",fieldKind:"message",repeated:he,message:Oe})}case I.ENUM:{(0,C.hu)(c.typeName,"invalid FieldDescriptorProto: missing type_name");const ye=k.enums.get(bt(c.typeName));return(0,C.hu)(ye!==void 0,`invalid FieldDescriptorProto: type_name ${c.typeName} not found`),Object.assign(Object.assign({},K),{kind:"field",fieldKind:"enum",getDefaultValue:Kr,repeated:he,enum:ye})}default:{const ye=Ps[c.type];return(0,C.hu)(ye,`invalid FieldDescriptorProto: unknown type ${c.type}`),Object.assign(Object.assign({},K),{kind:"field",fieldKind:"scalar",getDefaultValue:Kr,repeated:he,scalar:ye,longType:((ee=c.options)===null||ee===void 0?void 0:ee.jstype)==Se.JS_STRING?v.p.STRING:v.p.BIGINT})}}}function Vr(c,s,u,N){(0,C.hu)(c.extendee,"invalid FieldDescriptorProto: missing extendee");const k=ms(c,s,null,void 0,N),M=N.messages.get(bt(c.extendee));return(0,C.hu)(M,`invalid FieldDescriptorProto: extendee ${c.extendee} not found`),Object.assign(Object.assign({},k),{kind:"extension",typeName:Nr(c,u,s),parent:u,file:s,extendee:M,toString(){return`extension ${this.typeName}`},getComments(){const F=this.parent?[...this.parent.getComments().sourcePath,Et.DescriptorProto_Extension,this.parent.proto.extension.indexOf(c)]:[Et.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(c)];return Bt(s.proto.sourceCodeInfo,F)},getFeatures(){var F,ee;return N.resolveFeatures(this.file.edition,((F=this.parent)!==null&&F!==void 0?F:this.file).getFeatures(),(ee=this.proto.options)===null||ee===void 0?void 0:ee.features)}})}function Os(c,s){let u,N;switch(c){case void 0:case"proto2":N="proto2",u=pe.EDITION_PROTO2;break;case"proto3":N="proto3",u=pe.EDITION_PROTO3;break;case"editions":switch(N="editions",s){case void 0:case pe.EDITION_1_TEST_ONLY:case pe.EDITION_2_TEST_ONLY:case pe.EDITION_99997_TEST_ONLY:case pe.EDITION_99998_TEST_ONLY:case pe.EDITION_99999_TEST_ONLY:case pe.EDITION_UNKNOWN:u=pe.EDITION_UNKNOWN;break;default:u=s;break}break;default:throw new Error(`invalid FileDescriptorProto: unsupported syntax: ${c}`)}if(c==="editions"&&s===pe.EDITION_UNKNOWN)throw new Error(`invalid FileDescriptorProto: syntax ${c} cannot have edition ${String(s)}`);return{syntax:N,edition:u}}function Nr(c,s,u){(0,C.hu)(c.name,`invalid ${c.getType().typeName}: missing name`);let N;return s?N=`${s.typeName}.${c.name}`:u.proto.package!==void 0?N=`${u.proto.package}.${c.name}`:N=`${c.name}`,N}function bt(c){return c.startsWith(".")?c.substring(1):c}function de(c){var s,u;(0,C.hu)((s=c.proto.options)===null||s===void 0?void 0:s.mapEntry,`invalid DescriptorProto: expected ${c.toString()} to be a map entry`),(0,C.hu)(c.fields.length===2,`invalid DescriptorProto: map entry ${c.toString()} has ${c.fields.length} fields`);const N=c.fields.find(F=>F.proto.number===1);(0,C.hu)(N,`invalid DescriptorProto: map entry ${c.toString()} is missing key field`);const k=N.scalar;(0,C.hu)(k!==void 0&&k!==v.w.BYTES&&k!==v.w.FLOAT&&k!==v.w.DOUBLE,`invalid DescriptorProto: map entry ${c.toString()} has unexpected key type ${(u=N.proto.type)!==null&&u!==void 0?u:-1}`);const M=c.fields.find(F=>F.proto.number===2);switch((0,C.hu)(M,`invalid DescriptorProto: map entry ${c.toString()} is missing value field`),M.fieldKind){case"scalar":return{mapKey:k,mapValue:Object.assign(Object.assign({},M),{kind:"scalar"})};case"message":return{mapKey:k,mapValue:Object.assign(Object.assign({},M),{kind:"message"})};case"enum":return{mapKey:k,mapValue:Object.assign(Object.assign({},M),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}function Ot(c,s){var u;const N=c.oneofIndex;if(N===void 0)return;let k;return c.proto3Optional!==!0&&(k=s[N],(0,C.hu)(k,`invalid FieldDescriptorProto: oneof #${N} for field #${(u=c.number)!==null&&u!==void 0?u:-1} not found`)),k}function Re(c,s){switch(s){case"proto2":return c.oneofIndex===void 0&&c.label===D.OPTIONAL;case"proto3":return c.proto3Optional===!0;case"editions":return!1}}function Me(c,s,u){const{repeatedFieldEncoding:N}=u(c.edition);if(N!=zt.PACKED)return!1;switch(s.type){case I.STRING:case I.BYTES:case I.GROUP:case I.MESSAGE:return!1;default:return!0}}function Sn(c,s,u,N){var k,M,F,ee,K,he;switch(u.type){case I.STRING:case I.BYTES:case I.GROUP:case I.MESSAGE:return!1;default:switch(c.edition){case pe.EDITION_PROTO2:return(M=(k=u.options)===null||k===void 0?void 0:k.packed)!==null&&M!==void 0?M:!1;case pe.EDITION_PROTO3:return(ee=(F=u.options)===null||F===void 0?void 0:F.packed)!==null&&ee!==void 0?ee:!0;default:{const{repeatedFieldEncoding:ye}=N(c.edition,(K=s==null?void 0:s.getFeatures())!==null&&K!==void 0?K:c.getFeatures(),(he=u.options)===null||he===void 0?void 0:he.features);return ye==zt.PACKED}}}}const Ps={[I.DOUBLE]:v.w.DOUBLE,[I.FLOAT]:v.w.FLOAT,[I.INT64]:v.w.INT64,[I.UINT64]:v.w.UINT64,[I.INT32]:v.w.INT32,[I.FIXED64]:v.w.FIXED64,[I.FIXED32]:v.w.FIXED32,[I.BOOL]:v.w.BOOL,[I.STRING]:v.w.STRING,[I.GROUP]:void 0,[I.MESSAGE]:void 0,[I.BYTES]:v.w.BYTES,[I.UINT32]:v.w.UINT32,[I.ENUM]:void 0,[I.SFIXED32]:v.w.SFIXED32,[I.SFIXED64]:v.w.SFIXED64,[I.SINT32]:v.w.SINT32,[I.SINT64]:v.w.SINT64};function Bt(c,s){if(!c)return{leadingDetached:[],sourcePath:s};for(const u of c.location)if(u.path.length===s.length&&!u.path.some((N,k)=>s[k]!==N))return{leadingDetached:u.leadingDetachedComments,leading:u.leadingComments,trailing:u.trailingComments,sourcePath:s};return{leadingDetached:[],sourcePath:s}}var Et;(function(c){c[c.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",c[c.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",c[c.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",c[c.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",c[c.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",c[c.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",c[c.DescriptorProto_Field=2]="DescriptorProto_Field",c[c.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",c[c.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",c[c.DescriptorProto_Extension=6]="DescriptorProto_Extension",c[c.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",c[c.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",c[c.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"})(Et||(Et={}));function gn(){var c,s,u;const N=[];this.repeated&&N.push("repeated"),this.optional&&N.push("optional"),(this.kind==="extension"?this.file:this.parent.file).syntax=="proto2"&&this.proto.label===D.REQUIRED&&N.push("required");let M;switch(this.fieldKind){case"scalar":M=v.w[this.scalar].toLowerCase();break;case"enum":M=this.enum.typeName;break;case"message":M=this.message.typeName;break;case"map":{const K=v.w[this.mapKey].toLowerCase();let he;switch(this.mapValue.kind){case"scalar":he=v.w[this.mapValue.scalar].toLowerCase();break;case"enum":he=this.mapValue.enum.typeName;break;case"message":he=this.mapValue.message.typeName;break}M=`map<${K}, ${he}>`;break}}N.push(`${M} ${this.name} = ${this.number}`);const F=[];((c=this.proto.options)===null||c===void 0?void 0:c.packed)!==void 0&&F.push(`packed = ${this.proto.options.packed.toString()}`);let ee=this.proto.defaultValue;return ee!==void 0&&((this.proto.type==I.BYTES||this.proto.type==I.STRING)&&(ee='"'+ee.replace('"','\\"')+'"'),F.push(`default = ${ee}`)),this.jsonName!==void 0&&F.push(`json_name = "${this.jsonName}"`),((s=this.proto.options)===null||s===void 0?void 0:s.jstype)!==void 0&&F.push(`jstype = ${Se[this.proto.options.jstype]}`),((u=this.proto.options)===null||u===void 0?void 0:u.deprecated)===!0&&F.push("deprecated = true"),F.length>0&&N.push("["+F.join(", ")+"]"),N.join(" ")}function Kr(){const c=this.proto.defaultValue;if(c!==void 0)switch(this.fieldKind){case"enum":return zn(this.enum,c);case"scalar":return sn(this.scalar,c);default:return}}function _s(...c){const s={},u={},N={},k={add(M){if("fields"in M){if(!this.findMessage(M.typeName)){s[M.typeName]=M;for(const F of M.fields.list())F.kind=="message"?this.add(F.T):F.kind=="map"&&F.V.kind=="message"?this.add(F.V.T):F.kind=="enum"&&this.add(F.T)}}else if("methods"in M){if(!this.findService(M.typeName)){N[M.typeName]=M;for(const F of Object.values(M.methods))this.add(F.I),this.add(F.O)}}else u[M.typeName]=M},findMessage(M){return s[M]},findEnum(M){return u[M]},findService(M){return N[M]}};for(const M of c)k.add(M);return k}class on extends ce.v{constructor(s){super(),this.seconds=_.q.zero,this.nanos=0,h.w.util.initPartial(s,this)}fromJson(s,u){if(typeof s!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${h.w.json.debug(s)}`);const N=s.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!N)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const k=Date.parse(N[1]+"-"+N[2]+"-"+N[3]+"T"+N[4]+":"+N[5]+":"+N[6]+(N[8]?N[8]:"Z"));if(Number.isNaN(k))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(k<Date.parse("0001-01-01T00:00:00Z")||k>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=_.q.parse(k/1e3),this.nanos=0,N[7]&&(this.nanos=parseInt("1"+N[7]+"0".repeat(9-N[7].length))-1e9),this}toJson(s){const u=Number(this.seconds)*1e3;if(u<Date.parse("0001-01-01T00:00:00Z")||u>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let N="Z";if(this.nanos>0){const k=(this.nanos+1e9).toString().substring(1);k.substring(3)==="000000"?N="."+k.substring(0,3)+"Z":k.substring(6)==="000"?N="."+k.substring(0,6)+"Z":N="."+k+"Z"}return new Date(u).toISOString().replace(".000Z",N)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return on.fromDate(new Date)}static fromDate(s){const u=s.getTime();return new on({seconds:_.q.parse(Math.floor(u/1e3)),nanos:u%1e3*1e6})}static fromBinary(s,u){return new on().fromBinary(s,u)}static fromJson(s,u){return new on().fromJson(s,u)}static fromJsonString(s,u){return new on().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(on,s,u)}}on.runtime=h.w,on.typeName="google.protobuf.Timestamp",on.fields=h.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ot extends ce.v{constructor(s){super(),this.seconds=_.q.zero,this.nanos=0,h.w.util.initPartial(s,this)}fromJson(s,u){if(typeof s!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${h.w.json.debug(s)}`);const N=s.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(N===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${h.w.json.debug(s)}`);const k=Number(N[1]);if(k>315576e6||k<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${h.w.json.debug(s)}`);if(this.seconds=_.q.parse(k),typeof N[2]=="string"){const M=N[2]+"0".repeat(9-N[2].length);this.nanos=parseInt(M),(k<0||Object.is(k,-0))&&(this.nanos=-this.nanos)}return this}toJson(s){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let u=this.seconds.toString();if(this.nanos!==0){let N=Math.abs(this.nanos).toString();N="0".repeat(9-N.length)+N,N.substring(3)==="000000"?N=N.substring(0,3):N.substring(6)==="000"&&(N=N.substring(0,6)),u+="."+N,this.nanos<0&&Number(this.seconds)==0&&(u="-"+u)}return u+"s"}static fromBinary(s,u){return new ot().fromBinary(s,u)}static fromJson(s,u){return new ot().fromJson(s,u)}static fromJsonString(s,u){return new ot().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(ot,s,u)}}ot.runtime=h.w,ot.typeName="google.protobuf.Duration",ot.fields=h.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var qr=g(733);class An extends ce.v{constructor(s){super(),h.w.util.initPartial(s,this)}static fromBinary(s,u){return new An().fromBinary(s,u)}static fromJson(s,u){return new An().fromJson(s,u)}static fromJsonString(s,u){return new An().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(An,s,u)}}An.runtime=h.w,An.typeName="google.protobuf.Empty",An.fields=h.w.util.newFieldList(()=>[]);class kn extends ce.v{constructor(s){super(),this.paths=[],h.w.util.initPartial(s,this)}toJson(s){function u(N){let k=!1;const M=[];for(let F=0;F<N.length;F++){let ee=N.charAt(F);switch(ee){case"_":k=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":M.push(ee),k=!1;break;default:k&&(k=!1,ee=ee.toUpperCase()),M.push(ee);break}}return M.join("")}return this.paths.map(N=>{if(N.match(/_[0-9]?_/g)||N.match(/[A-Z]/g))throw new Error('cannot encode google.protobuf.FieldMask to JSON: lowerCamelCase of path name "'+N+'" is irreversible');return u(N)}).join(",")}fromJson(s,u){if(typeof s!="string")throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+h.w.json.debug(s));if(s==="")return this;function N(k){if(k.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const M=k.replace(/[A-Z]/g,F=>"_"+F.toLowerCase());return M[0]==="_"?M.substring(1):M}return this.paths=s.split(",").map(N),this}static fromBinary(s,u){return new kn().fromBinary(s,u)}static fromJson(s,u){return new kn().fromJson(s,u)}static fromJsonString(s,u){return new kn().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(kn,s,u)}}kn.runtime=h.w,kn.typeName="google.protobuf.FieldMask",kn.fields=h.w.util.newFieldList(()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}]);var Mt;(function(c){c[c.NULL_VALUE=0]="NULL_VALUE"})(Mt||(Mt={})),h.w.util.setEnumType(Mt,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class $t extends ce.v{constructor(s){super(),this.fields={},h.w.util.initPartial(s,this)}toJson(s){const u={};for(const[N,k]of Object.entries(this.fields))u[N]=k.toJson(s);return u}fromJson(s,u){if(typeof s!="object"||s==null||Array.isArray(s))throw new Error("cannot decode google.protobuf.Struct from JSON "+h.w.json.debug(s));for(const[N,k]of Object.entries(s))this.fields[N]=ht.fromJson(k);return this}static fromBinary(s,u){return new $t().fromBinary(s,u)}static fromJson(s,u){return new $t().fromJson(s,u)}static fromJsonString(s,u){return new $t().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals($t,s,u)}}$t.runtime=h.w,$t.typeName="google.protobuf.Struct",$t.fields=h.w.util.newFieldList(()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:ht}}]);class ht extends ce.v{constructor(s){super(),this.kind={case:void 0},h.w.util.initPartial(s,this)}toJson(s){switch(this.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(this.kind.value))throw new Error("google.protobuf.Value cannot be NaN or Infinity");return this.kind.value;case"boolValue":return this.kind.value;case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},s),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(s,u){switch(typeof s){case"number":this.kind={case:"numberValue",value:s};break;case"string":this.kind={case:"stringValue",value:s};break;case"boolean":this.kind={case:"boolValue",value:s};break;case"object":s===null?this.kind={case:"nullValue",value:Mt.NULL_VALUE}:Array.isArray(s)?this.kind={case:"listValue",value:Ft.fromJson(s)}:this.kind={case:"structValue",value:$t.fromJson(s)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+h.w.json.debug(s))}return this}static fromBinary(s,u){return new ht().fromBinary(s,u)}static fromJson(s,u){return new ht().fromJson(s,u)}static fromJsonString(s,u){return new ht().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(ht,s,u)}}ht.runtime=h.w,ht.typeName="google.protobuf.Value",ht.fields=h.w.util.newFieldList(()=>[{no:1,name:"null_value",kind:"enum",T:h.w.getEnumType(Mt),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:$t,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:Ft,oneof:"kind"}]);class Ft extends ce.v{constructor(s){super(),this.values=[],h.w.util.initPartial(s,this)}toJson(s){return this.values.map(u=>u.toJson())}fromJson(s,u){if(!Array.isArray(s))throw new Error("cannot decode google.protobuf.ListValue from JSON "+h.w.json.debug(s));for(let N of s)this.values.push(ht.fromJson(N));return this}static fromBinary(s,u){return new Ft().fromBinary(s,u)}static fromJson(s,u){return new Ft().fromJson(s,u)}static fromJsonString(s,u){return new Ft().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(Ft,s,u)}}Ft.runtime=h.w,Ft.typeName="google.protobuf.ListValue",Ft.fields=h.w.util.newFieldList(()=>[{no:1,name:"values",kind:"message",T:ht,repeated:!0}]);var Fn=g(609);class Gt extends ce.v{constructor(s){super(),this.value=0,h.w.util.initPartial(s,this)}toJson(s){return h.w.json.writeScalar(v.w.DOUBLE,this.value,!0)}fromJson(s,u){try{this.value=h.w.json.readScalar(v.w.DOUBLE,s)}catch(N){let k='cannot decode message google.protobuf.DoubleValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(s,u){return new Gt().fromBinary(s,u)}static fromJson(s,u){return new Gt().fromJson(s,u)}static fromJsonString(s,u){return new Gt().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(Gt,s,u)}}Gt.runtime=h.w,Gt.typeName="google.protobuf.DoubleValue",Gt.fields=h.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Gt.fieldWrapper={wrapField(c){return new Gt({value:c})},unwrapField(c){return c.value}};class jt extends ce.v{constructor(s){super(),this.value=0,h.w.util.initPartial(s,this)}toJson(s){return h.w.json.writeScalar(v.w.FLOAT,this.value,!0)}fromJson(s,u){try{this.value=h.w.json.readScalar(v.w.FLOAT,s)}catch(N){let k='cannot decode message google.protobuf.FloatValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(s,u){return new jt().fromBinary(s,u)}static fromJson(s,u){return new jt().fromJson(s,u)}static fromJsonString(s,u){return new jt().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(jt,s,u)}}jt.runtime=h.w,jt.typeName="google.protobuf.FloatValue",jt.fields=h.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),jt.fieldWrapper={wrapField(c){return new jt({value:c})},unwrapField(c){return c.value}};class xt extends ce.v{constructor(s){super(),this.value=_.q.zero,h.w.util.initPartial(s,this)}toJson(s){return h.w.json.writeScalar(v.w.INT64,this.value,!0)}fromJson(s,u){try{this.value=h.w.json.readScalar(v.w.INT64,s)}catch(N){let k='cannot decode message google.protobuf.Int64Value from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(s,u){return new xt().fromBinary(s,u)}static fromJson(s,u){return new xt().fromJson(s,u)}static fromJsonString(s,u){return new xt().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(xt,s,u)}}xt.runtime=h.w,xt.typeName="google.protobuf.Int64Value",xt.fields=h.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),xt.fieldWrapper={wrapField(c){return new xt({value:c})},unwrapField(c){return c.value}};class st extends ce.v{constructor(s){super(),this.value=_.q.zero,h.w.util.initPartial(s,this)}toJson(s){return h.w.json.writeScalar(v.w.UINT64,this.value,!0)}fromJson(s,u){try{this.value=h.w.json.readScalar(v.w.UINT64,s)}catch(N){let k='cannot decode message google.protobuf.UInt64Value from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(s,u){return new st().fromBinary(s,u)}static fromJson(s,u){return new st().fromJson(s,u)}static fromJsonString(s,u){return new st().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(st,s,u)}}st.runtime=h.w,st.typeName="google.protobuf.UInt64Value",st.fields=h.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),st.fieldWrapper={wrapField(c){return new st({value:c})},unwrapField(c){return c.value}};class ct extends ce.v{constructor(s){super(),this.value=0,h.w.util.initPartial(s,this)}toJson(s){return h.w.json.writeScalar(v.w.INT32,this.value,!0)}fromJson(s,u){try{this.value=h.w.json.readScalar(v.w.INT32,s)}catch(N){let k='cannot decode message google.protobuf.Int32Value from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(s,u){return new ct().fromBinary(s,u)}static fromJson(s,u){return new ct().fromJson(s,u)}static fromJsonString(s,u){return new ct().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(ct,s,u)}}ct.runtime=h.w,ct.typeName="google.protobuf.Int32Value",ct.fields=h.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),ct.fieldWrapper={wrapField(c){return new ct({value:c})},unwrapField(c){return c.value}};class mt extends ce.v{constructor(s){super(),this.value=0,h.w.util.initPartial(s,this)}toJson(s){return h.w.json.writeScalar(v.w.UINT32,this.value,!0)}fromJson(s,u){try{this.value=h.w.json.readScalar(v.w.UINT32,s)}catch(N){let k='cannot decode message google.protobuf.UInt32Value from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(s,u){return new mt().fromBinary(s,u)}static fromJson(s,u){return new mt().fromJson(s,u)}static fromJsonString(s,u){return new mt().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(mt,s,u)}}mt.runtime=h.w,mt.typeName="google.protobuf.UInt32Value",mt.fields=h.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),mt.fieldWrapper={wrapField(c){return new mt({value:c})},unwrapField(c){return c.value}};class Ht extends ce.v{constructor(s){super(),this.value=!1,h.w.util.initPartial(s,this)}toJson(s){return h.w.json.writeScalar(v.w.BOOL,this.value,!0)}fromJson(s,u){try{this.value=h.w.json.readScalar(v.w.BOOL,s)}catch(N){let k='cannot decode message google.protobuf.BoolValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(s,u){return new Ht().fromBinary(s,u)}static fromJson(s,u){return new Ht().fromJson(s,u)}static fromJsonString(s,u){return new Ht().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(Ht,s,u)}}Ht.runtime=h.w,Ht.typeName="google.protobuf.BoolValue",Ht.fields=h.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),Ht.fieldWrapper={wrapField(c){return new Ht({value:c})},unwrapField(c){return c.value}};class Rt extends ce.v{constructor(s){super(),this.value="",h.w.util.initPartial(s,this)}toJson(s){return h.w.json.writeScalar(v.w.STRING,this.value,!0)}fromJson(s,u){try{this.value=h.w.json.readScalar(v.w.STRING,s)}catch(N){let k='cannot decode message google.protobuf.StringValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(s,u){return new Rt().fromBinary(s,u)}static fromJson(s,u){return new Rt().fromJson(s,u)}static fromJsonString(s,u){return new Rt().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(Rt,s,u)}}Rt.runtime=h.w,Rt.typeName="google.protobuf.StringValue",Rt.fields=h.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),Rt.fieldWrapper={wrapField(c){return new Rt({value:c})},unwrapField(c){return c.value}};class Ee extends ce.v{constructor(s){super(),this.value=new Uint8Array(0),h.w.util.initPartial(s,this)}toJson(s){return h.w.json.writeScalar(v.w.BYTES,this.value,!0)}fromJson(s,u){try{this.value=h.w.json.readScalar(v.w.BYTES,s)}catch(N){let k='cannot decode message google.protobuf.BytesValue from JSON"';throw N instanceof Error&&N.message.length>0&&(k+=`: ${N.message}`),new Error(k)}return this}static fromBinary(s,u){return new Ee().fromBinary(s,u)}static fromJson(s,u){return new Ee().fromJson(s,u)}static fromJsonString(s,u){return new Ee().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(Ee,s,u)}}Ee.runtime=h.w,Ee.typeName="google.protobuf.BytesValue",Ee.fields=h.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),Ee.fieldWrapper={wrapField(c){return new Ee({value:c})},unwrapField(c){return c.value}};const lt=[qr.I,ot,An,kn,$t,ht,Ft,on,ot,Gt,jt,xt,ct,mt,st,Ht,Rt,Ee],Yr=[(0,Fn.V3)(Mt)];function Ir(c,s=!0){const u=c instanceof Uint8Array||c instanceof ke?fs(c):c,N={},k={},M={};if(s){for(const F of lt)k[F.typeName]=F;for(const F of Yr)N[F.typeName]=F}return{findEnum(F){const ee=N[F];if(ee)return ee;const K=u.enums.get(F);if(!K)return;const ye=(K.file.syntax=="proto3"?h.w:b).makeEnumType(F,K.values.map(Oe=>({no:Oe.number,name:Oe.name,localName:(0,A.r1)(Oe)})),{});return N[F]=ye,ye},findMessage(F){const ee=k[F];if(ee)return ee;const K=u.messages.get(F);if(!K)return;const he=K.file.syntax=="proto3"?h.w:b,ye=[],Oe=he.makeMessageType(F,()=>ye,{localName:(0,A.r1)(K)});k[F]=Oe;for(const at of K.fields){const Ce=Xt(at,this);ye.push(Ce)}return Oe},findService(F){const ee=M[F];if(ee)return ee;const K=u.services.get(F);if(!K)return;const he={};for(const ye of K.methods){const Oe=this.findMessage(ye.input.typeName),at=this.findMessage(ye.output.typeName);(0,C.hu)(Oe,`message "${ye.input.typeName}" for ${ye.toString()} not found`),(0,C.hu)(at,`output message "${ye.output.typeName}" for ${ye.toString()} not found`),he[(0,A.r1)(ye)]={name:ye.name,I:Oe,O:at,kind:ye.methodKind,idempotency:ye.idempotency}}return M[F]={typeName:K.typeName,methods:he}}}}function Xt(c,s){switch(c.fieldKind){case"map":return Jn(c,s);case"message":return Sr(c,s);case"enum":{const u=Un(c,s);return u.default=c.getDefaultValue(),u}case"scalar":{const u=Gn(c);return u.default=c.getDefaultValue(),u}}}function Jn(c,s){const u={kind:"map",no:c.number,name:c.name,jsonName:c.jsonName,K:c.mapKey};if(c.mapValue.message){const N=s.findMessage(c.mapValue.message.typeName);return(0,C.hu)(N,`message "${c.mapValue.message.typeName}" for ${c.toString()} not found`),Object.assign(Object.assign({},u),{V:{kind:"message",T:N}})}if(c.mapValue.enum){const N=s.findEnum(c.mapValue.enum.typeName);return(0,C.hu)(N,`enum "${c.mapValue.enum.typeName}" for ${c.toString()} not found`),Object.assign(Object.assign({},u),{V:{kind:"enum",T:N}})}return Object.assign(Object.assign({},u),{V:{kind:"scalar",T:c.mapValue.scalar}})}function Gn(c){const s=c.longType==v.p.STRING?{L:v.p.STRING}:{},u=Object.assign({kind:"scalar",no:c.number,name:c.name,jsonName:c.jsonName,T:c.scalar},s);return c.repeated?Object.assign(Object.assign({},u),{repeated:!0,packed:c.packed,oneof:void 0,T:c.scalar}):c.oneof?Object.assign(Object.assign({},u),{oneof:c.oneof.name}):c.optional?Object.assign(Object.assign({},u),{opt:!0}):u}function Sr(c,s){const u=s.findMessage(c.message.typeName);(0,C.hu)(u,`message "${c.message.typeName}" for ${c.toString()} not found`);const N={kind:"message",no:c.number,name:c.name,jsonName:c.jsonName,T:u,delimited:c.proto.type==I.GROUP};return c.repeated?Object.assign(Object.assign({},N),{repeated:!0,packed:c.packed,oneof:void 0}):c.oneof?Object.assign(Object.assign({},N),{oneof:c.oneof.name}):c.optional?Object.assign(Object.assign({},N),{opt:!0}):N}function Un(c,s){const u=s.findEnum(c.enum.typeName);(0,C.hu)(u,`enum "${c.enum.typeName}" for ${c.toString()} not found`);const N={kind:"enum",no:c.number,name:c.name,jsonName:c.jsonName,T:u};return c.repeated?Object.assign(Object.assign({},N),{repeated:!0,packed:c.packed,oneof:void 0}):c.oneof?Object.assign(Object.assign({},N),{oneof:c.oneof.name}):c.optional?Object.assign(Object.assign({},N),{opt:!0}):N}function Wr(c){if(!(c instanceof ce.v))return c;const s=c.getType(),u={};for(const N of s.fields.byMember()){const k=c[N.localName];let M;if(N.repeated)M=k.map(F=>pn(F));else if(N.kind=="map"){M={};for(const[F,ee]of Object.entries(k))M[F]=pn(ee)}else N.kind=="oneof"?M=N.findField(k.case)?{case:k.case,value:pn(k.value)}:{case:void 0}:M=pn(k);u[N.localName]=M}return u}function pn(c){if(c===void 0)return c;if(c instanceof ce.v)return Wr(c);if(c instanceof Uint8Array){const s=new Uint8Array(c.byteLength);return s.set(c),s}return c}class Zt extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new Zt().fromBinary(s,u)}static fromJson(s,u){return new Zt().fromJson(s,u)}static fromJsonString(s,u){return new Zt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Zt,s,u)}}Zt.runtime=b,Zt.typeName="google.protobuf.compiler.Version",Zt.fields=b.util.newFieldList(()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]);class Qt extends ce.v{constructor(s){super(),this.fileToGenerate=[],this.protoFile=[],this.sourceFileDescriptors=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new Qt().fromBinary(s,u)}static fromJson(s,u){return new Qt().fromJson(s,u)}static fromJsonString(s,u){return new Qt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Qt,s,u)}}Qt.runtime=b,Qt.typeName="google.protobuf.compiler.CodeGeneratorRequest",Qt.fields=b.util.newFieldList(()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:Ge,repeated:!0},{no:17,name:"source_file_descriptors",kind:"message",T:Ge,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:Zt,opt:!0}]);class Nt extends ce.v{constructor(s){super(),this.file=[],b.util.initPartial(s,this)}static fromBinary(s,u){return new Nt().fromBinary(s,u)}static fromJson(s,u){return new Nt().fromJson(s,u)}static fromJsonString(s,u){return new Nt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Nt,s,u)}}Nt.runtime=b,Nt.typeName="google.protobuf.compiler.CodeGeneratorResponse",Nt.fields=b.util.newFieldList(()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:Vt,repeated:!0}]);var $n;(function(c){c[c.NONE=0]="NONE",c[c.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL",c[c.SUPPORTS_EDITIONS=2]="SUPPORTS_EDITIONS"})($n||($n={})),b.util.setEnumType($n,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"},{no:2,name:"FEATURE_SUPPORTS_EDITIONS"}]);class Vt extends ce.v{constructor(s){super(),b.util.initPartial(s,this)}static fromBinary(s,u){return new Vt().fromBinary(s,u)}static fromJson(s,u){return new Vt().fromJson(s,u)}static fromJsonString(s,u){return new Vt().fromJsonString(s,u)}static equals(s,u){return b.util.equals(Vt,s,u)}}Vt.runtime=b,Vt.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",Vt.fields=b.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:fn,opt:!0}]);class an extends ce.v{constructor(s){super(),this.fileName="",h.w.util.initPartial(s,this)}static fromBinary(s,u){return new an().fromBinary(s,u)}static fromJson(s,u){return new an().fromJson(s,u)}static fromJsonString(s,u){return new an().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(an,s,u)}}an.runtime=h.w,an.typeName="google.protobuf.SourceContext",an.fields=h.w.util.newFieldList(()=>[{no:1,name:"file_name",kind:"scalar",T:9}]);var un;(function(c){c[c.PROTO2=0]="PROTO2",c[c.PROTO3=1]="PROTO3",c[c.EDITIONS=2]="EDITIONS"})(un||(un={})),h.w.util.setEnumType(un,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"},{no:2,name:"SYNTAX_EDITIONS"}]);class Pt extends ce.v{constructor(s){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=un.PROTO2,this.edition="",h.w.util.initPartial(s,this)}static fromBinary(s,u){return new Pt().fromBinary(s,u)}static fromJson(s,u){return new Pt().fromJson(s,u)}static fromJsonString(s,u){return new Pt().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(Pt,s,u)}}Pt.runtime=h.w,Pt.typeName="google.protobuf.Type",Pt.fields=h.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:en,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:_t,repeated:!0},{no:5,name:"source_context",kind:"message",T:an},{no:6,name:"syntax",kind:"enum",T:h.w.getEnumType(un)},{no:7,name:"edition",kind:"scalar",T:9}]);class en extends ce.v{constructor(s){super(),this.kind=ar.TYPE_UNKNOWN,this.cardinality=ur.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",h.w.util.initPartial(s,this)}static fromBinary(s,u){return new en().fromBinary(s,u)}static fromJson(s,u){return new en().fromJson(s,u)}static fromJsonString(s,u){return new en().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(en,s,u)}}en.runtime=h.w,en.typeName="google.protobuf.Field",en.fields=h.w.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:h.w.getEnumType(ar)},{no:2,name:"cardinality",kind:"enum",T:h.w.getEnumType(ur)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:_t,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}]);var ar;(function(c){c[c.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",c[c.TYPE_DOUBLE=1]="TYPE_DOUBLE",c[c.TYPE_FLOAT=2]="TYPE_FLOAT",c[c.TYPE_INT64=3]="TYPE_INT64",c[c.TYPE_UINT64=4]="TYPE_UINT64",c[c.TYPE_INT32=5]="TYPE_INT32",c[c.TYPE_FIXED64=6]="TYPE_FIXED64",c[c.TYPE_FIXED32=7]="TYPE_FIXED32",c[c.TYPE_BOOL=8]="TYPE_BOOL",c[c.TYPE_STRING=9]="TYPE_STRING",c[c.TYPE_GROUP=10]="TYPE_GROUP",c[c.TYPE_MESSAGE=11]="TYPE_MESSAGE",c[c.TYPE_BYTES=12]="TYPE_BYTES",c[c.TYPE_UINT32=13]="TYPE_UINT32",c[c.TYPE_ENUM=14]="TYPE_ENUM",c[c.TYPE_SFIXED32=15]="TYPE_SFIXED32",c[c.TYPE_SFIXED64=16]="TYPE_SFIXED64",c[c.TYPE_SINT32=17]="TYPE_SINT32",c[c.TYPE_SINT64=18]="TYPE_SINT64"})(ar||(ar={})),h.w.util.setEnumType(ar,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var ur;(function(c){c[c.UNKNOWN=0]="UNKNOWN",c[c.OPTIONAL=1]="OPTIONAL",c[c.REQUIRED=2]="REQUIRED",c[c.REPEATED=3]="REPEATED"})(ur||(ur={})),h.w.util.setEnumType(ur,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class ze extends ce.v{constructor(s){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=un.PROTO2,this.edition="",h.w.util.initPartial(s,this)}static fromBinary(s,u){return new ze().fromBinary(s,u)}static fromJson(s,u){return new ze().fromJson(s,u)}static fromJsonString(s,u){return new ze().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(ze,s,u)}}ze.runtime=h.w,ze.typeName="google.protobuf.Enum",ze.fields=h.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:yn,repeated:!0},{no:3,name:"options",kind:"message",T:_t,repeated:!0},{no:4,name:"source_context",kind:"message",T:an},{no:5,name:"syntax",kind:"enum",T:h.w.getEnumType(un)},{no:6,name:"edition",kind:"scalar",T:9}]);class yn extends ce.v{constructor(s){super(),this.name="",this.number=0,this.options=[],h.w.util.initPartial(s,this)}static fromBinary(s,u){return new yn().fromBinary(s,u)}static fromJson(s,u){return new yn().fromJson(s,u)}static fromJsonString(s,u){return new yn().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(yn,s,u)}}yn.runtime=h.w,yn.typeName="google.protobuf.EnumValue",yn.fields=h.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:_t,repeated:!0}]);class _t extends ce.v{constructor(s){super(),this.name="",h.w.util.initPartial(s,this)}static fromBinary(s,u){return new _t().fromBinary(s,u)}static fromJson(s,u){return new _t().fromJson(s,u)}static fromJsonString(s,u){return new _t().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(_t,s,u)}}_t.runtime=h.w,_t.typeName="google.protobuf.Option",_t.fields=h.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:qr.I}]);class Tn extends ce.v{constructor(s){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=un.PROTO2,h.w.util.initPartial(s,this)}static fromBinary(s,u){return new Tn().fromBinary(s,u)}static fromJson(s,u){return new Tn().fromJson(s,u)}static fromJsonString(s,u){return new Tn().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(Tn,s,u)}}Tn.runtime=h.w,Tn.typeName="google.protobuf.Api",Tn.fields=h.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:cn,repeated:!0},{no:3,name:"options",kind:"message",T:_t,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:an},{no:6,name:"mixins",kind:"message",T:vn,repeated:!0},{no:7,name:"syntax",kind:"enum",T:h.w.getEnumType(un)}]);class cn extends ce.v{constructor(s){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=un.PROTO2,h.w.util.initPartial(s,this)}static fromBinary(s,u){return new cn().fromBinary(s,u)}static fromJson(s,u){return new cn().fromJson(s,u)}static fromJsonString(s,u){return new cn().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(cn,s,u)}}cn.runtime=h.w,cn.typeName="google.protobuf.Method",cn.fields=h.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:_t,repeated:!0},{no:7,name:"syntax",kind:"enum",T:h.w.getEnumType(un)}]);class vn extends ce.v{constructor(s){super(),this.name="",this.root="",h.w.util.initPartial(s,this)}static fromBinary(s,u){return new vn().fromBinary(s,u)}static fromJson(s,u){return new vn().fromJson(s,u)}static fromJsonString(s,u){return new vn().fromJsonString(s,u)}static equals(s,u){return h.w.util.equals(vn,s,u)}}vn.runtime=h.w,vn.typeName="google.protobuf.Mixin",vn.fields=h.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}])},561:(w,T,g)=>{g.d(T,{v:()=>h});class h{equals(v){return this.getType().runtime.util.equals(this.getType(),this,v)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(v,R){const P=this.getType(),q=P.runtime.bin,L=q.makeReadOptions(R);return q.readMessage(this,L.readerFactory(v),v.byteLength,L),this}fromJson(v,R){const P=this.getType(),q=P.runtime.json,L=q.makeReadOptions(R);return q.readMessage(P,v,L,this),this}fromJsonString(v,R){let P;try{P=JSON.parse(v)}catch(q){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${q instanceof Error?q.message:String(q)}`)}return this.fromJson(P,R)}toBinary(v){const R=this.getType(),P=R.runtime.bin,q=P.makeWriteOptions(v),L=q.writerFactory();return P.writeMessage(this,L,q),L.finish()}toJson(v){const R=this.getType(),P=R.runtime.json,q=P.makeWriteOptions(v);return P.writeMessage(this,q)}toJsonString(v){var R;const P=this.toJson(v);return JSON.stringify(P,null,(R=v==null?void 0:v.prettySpaces)!==null&&R!==void 0?R:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}},120:(w,T,g)=>{g.d(T,{E_:()=>A,fp:()=>O,hu:()=>h,ug:()=>L});function h(U,C){if(!U)throw new Error(C)}const S=34028234663852886e22,v=-34028234663852886e22,R=4294967295,P=2147483647,q=-2147483648;function L(U){if(typeof U!="number")throw new Error("invalid int 32: "+typeof U);if(!Number.isInteger(U)||U>P||U<q)throw new Error("invalid int 32: "+U)}function O(U){if(typeof U!="number")throw new Error("invalid uint 32: "+typeof U);if(!Number.isInteger(U)||U>R||U<0)throw new Error("invalid uint 32: "+U)}function A(U){if(typeof U!="number")throw new Error("invalid float 32: "+typeof U);if(!!Number.isFinite(U)&&(U>S||U<v))throw new Error("invalid float 32: "+U)}},744:(w,T,g)=>{g.d(T,{Jj:()=>ae,NN:()=>Z,gQ:()=>_,gY:()=>z,oQ:()=>W});var h=g(79),S=g(561),v=g(465),R=g(432),P=g(781),q=g(120);const L=Symbol("@bufbuild/protobuf/unknown-fields"),O={readUnknownFields:!0,readerFactory:j=>new h.oP(j)},A={writeUnknownFields:!0,writerFactory:()=>new h.Lt};function U(j){return j?Object.assign(Object.assign({},O),j):O}function C(j){return j?Object.assign(Object.assign({},A),j):A}function z(){return{makeReadOptions:U,makeWriteOptions:C,listUnknownFields(j){var te;return(te=j[L])!==null&&te!==void 0?te:[]},discardUnknownFields(j){delete j[L]},writeUnknownFields(j,te){const re=j[L];if(re)for(const G of re)te.tag(G.no,G.wireType).raw(G.data)},onUnknownField(j,te,fe,re){const G=j;Array.isArray(G[L])||(G[L]=[]),G[L].push({no:te,wireType:fe,data:re})},readMessage(j,te,fe,re,G){const le=j.getType(),Le=G?te.len:te.pos+fe;let ce,_e;for(;te.pos<Le&&([ce,_e]=te.tag(),_e!=h.TD.EndGroup);){const pe=le.fields.find(ce);if(!pe){const Ke=te.skip(_e);re.readUnknownFields&&this.onUnknownField(j,ce,_e,Ke);continue}let ke=j,Ge=pe.repeated,Ue=pe.localName;switch(pe.oneof&&(ke=ke[pe.oneof.localName],ke.case!=Ue&&delete ke.value,ke.case=Ue,Ue="value"),pe.kind){case"scalar":case"enum":const Ke=pe.kind=="enum"?v.w.INT32:pe.T;let it=J;if(pe.kind=="scalar"&&pe.L>0&&(it=Q),Ge){let dt=ke[Ue];if(_e==h.TD.LengthDelimited&&Ke!=v.w.STRING&&Ke!=v.w.BYTES){let I=te.uint32()+te.pos;for(;te.pos<I;)dt.push(it(te,Ke))}else dt.push(it(te,Ke))}else ke[Ue]=it(te,Ke);break;case"message":const nt=pe.T;Ge?ke[Ue].push(B(te,new nt,re,pe)):ke[Ue]instanceof S.v?B(te,ke[Ue],re,pe):(ke[Ue]=B(te,new nt,re,pe),nt.fieldWrapper&&!pe.oneof&&!pe.repeated&&(ke[Ue]=nt.fieldWrapper.unwrapField(ke[Ue])));break;case"map":let[gt,St]=b(pe,te,re);ke[Ue][gt]=St;break}}if(G&&(_e!=h.TD.EndGroup||ce!==fe))throw new Error("invalid end group tag")}}}function B(j,te,fe,re){const G=te.getType().runtime.bin,le=re==null?void 0:re.delimited;return G.readMessage(te,j,le?re==null?void 0:re.no:j.uint32(),fe,le),te}function b(j,te,fe){const re=te.uint32(),G=te.pos+re;let le,Le;for(;te.pos<G;){let[ce]=te.tag();switch(ce){case 1:le=J(te,j.K);break;case 2:switch(j.V.kind){case"scalar":Le=J(te,j.V.T);break;case"enum":Le=te.int32();break;case"message":Le=B(te,new j.V.T,fe,void 0);break}break}}if(le===void 0){let ce=(0,P.kY)(j.K,v.p.BIGINT);le=j.K==v.w.BOOL?ce.toString():ce}if(typeof le!="string"&&typeof le!="number"&&(le=le.toString()),Le===void 0)switch(j.V.kind){case"scalar":Le=(0,P.kY)(j.V.T,v.p.BIGINT);break;case"enum":Le=0;break;case"message":Le=new j.V.T;break}return[le,Le]}function Q(j,te){const fe=J(j,te);return typeof fe=="bigint"?fe.toString():fe}function J(j,te){switch(te){case v.w.STRING:return j.string();case v.w.BOOL:return j.bool();case v.w.DOUBLE:return j.double();case v.w.FLOAT:return j.float();case v.w.INT32:return j.int32();case v.w.INT64:return j.int64();case v.w.UINT64:return j.uint64();case v.w.FIXED64:return j.fixed64();case v.w.BYTES:return j.bytes();case v.w.FIXED32:return j.fixed32();case v.w.SFIXED32:return j.sfixed32();case v.w.SFIXED64:return j.sfixed64();case v.w.SINT64:return j.sint64();case v.w.UINT32:return j.uint32();case v.w.SINT32:return j.sint32()}}function _(j,te,fe,re,G){j.tag(fe.no,h.TD.LengthDelimited),j.fork();let le=re;switch(fe.K){case v.w.INT32:case v.w.FIXED32:case v.w.UINT32:case v.w.SFIXED32:case v.w.SINT32:le=Number.parseInt(re);break;case v.w.BOOL:(0,q.hu)(re=="true"||re=="false"),le=re=="true";break}switch(Z(j,fe.K,1,le,!0),fe.V.kind){case"scalar":Z(j,fe.V.T,2,G,!0);break;case"enum":Z(j,v.w.INT32,2,G,!0);break;case"message":j.tag(2,h.TD.LengthDelimited).bytes(G.toBinary(te));break}j.join()}function W(j,te,fe,re){if(re!==void 0){const G=(0,R.E)(fe.T,re);fe!=null&&fe.delimited?j.tag(fe.no,h.TD.StartGroup).raw(G.toBinary(te)).tag(fe.no,h.TD.EndGroup):j.tag(fe.no,h.TD.LengthDelimited).bytes(G.toBinary(te))}}function Z(j,te,fe,re,G){let[le,Le,ce]=(0,P.T1)(te,re);(!ce||G)&&j.tag(fe,le)[Le](re)}function ae(j,te,fe,re){if(!re.length)return;j.tag(fe,h.TD.LengthDelimited).fork();let[,G]=(0,P.T1)(te);for(let le=0;le<re.length;le++)j[G](re[le]);j.join()}},609:(w,T,g)=>{g.d(T,{V3:()=>v,be:()=>P,ut:()=>q,zg:()=>R});var h=g(120);const S=Symbol("@bufbuild/protobuf/enum-type");function v(O){const A=O[S];return(0,h.hu)(A,"missing enum type on enum object"),A}function R(O,A,U,C){O[S]=P(A,U.map(z=>({no:z.no,name:z.name,localName:O[z.no]})))}function P(O,A,U){const C=Object.create(null),z=Object.create(null),B=[];for(const b of A){const Q=L(b);B.push(Q),C[b.name]=Q,z[b.no]=Q}return{typeName:O,values:B,findName(b){return C[b]},findNumber(b){return z[b]}}}function q(O,A,U){const C={};for(const z of A){const B=L(z);C[B.localName]=B.no,C[B.no]=B.localName}return R(C,O,A),C}function L(O){return"localName"in O?O:Object.assign(Object.assign({},O),{localName:O.name})}},501:(w,T,g)=>{g.d(T,{i:()=>h});class h{constructor(v,R){this._fields=v,this._normalizer=R}findJsonName(v){if(!this.jsonNames){const R={};for(const P of this.list())R[P.jsonName]=R[P.name]=P;this.jsonNames=R}return this.jsonNames[v]}find(v){if(!this.numbers){const R={};for(const P of this.list())R[P.no]=P;this.numbers=R}return this.numbers[v]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((v,R)=>v.no-R.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const v=this.members;let R;for(const P of this.list())P.oneof?P.oneof!==R&&(R=P.oneof,v.push(R)):v.push(P)}return this.members}}},432:(w,T,g)=>{g.d(T,{E:()=>v,w:()=>R});var h=g(561),S=g(465);function v(q,L){return L instanceof h.v||!q.fieldWrapper?L:q.fieldWrapper.wrapField(L)}function R(q){if(q.fieldKind==="message"&&!q.repeated&&q.oneof==null)return P[q.message.typeName]}const P={"google.protobuf.DoubleValue":S.w.DOUBLE,"google.protobuf.FloatValue":S.w.FLOAT,"google.protobuf.Int64Value":S.w.INT64,"google.protobuf.UInt64Value":S.w.UINT64,"google.protobuf.Int32Value":S.w.INT32,"google.protobuf.UInt32Value":S.w.UINT32,"google.protobuf.BoolValue":S.w.BOOL,"google.protobuf.StringValue":S.w.STRING,"google.protobuf.BytesValue":S.w.BYTES}},215:(w,T,g)=>{g.d(T,{o:()=>v});var h=g(504),S=g(120);class v{constructor(P){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=P,this.localName=(0,h.uA)(P)}addField(P){(0,S.hu)(P.oneof===this,`field ${P.name} not one of ${this.name}`),this.fields.push(P)}findField(P){if(!this._lookup){this._lookup=Object.create(null);for(let q=0;q<this.fields.length;q++)this._lookup[this.fields[q].localName]=this.fields[q]}return this._lookup[P]}}},814:(w,T,g)=>{g.d(T,{b:()=>U});var h=g(561),S=g(465),v=g(120),R=g(210),P=g(236);const q={ignoreUnknownFields:!1},L={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function O(J){return J?Object.assign(Object.assign({},q),J):q}function A(J){return J?Object.assign(Object.assign({},L),J):L}function U(J){const _=J(b,Q);return{makeReadOptions:O,makeWriteOptions:A,readMessage(W,Z,ae,j){if(Z==null||Array.isArray(Z)||typeof Z!="object")throw new Error(`cannot decode message ${W.typeName} from JSON: ${this.debug(Z)}`);j=j!=null?j:new W;const te={};for(const[fe,re]of Object.entries(Z)){const G=W.fields.findJsonName(fe);if(!G){if(!ae.ignoreUnknownFields)throw new Error(`cannot decode message ${W.typeName} from JSON: key "${fe}" is unknown`);continue}let le=G.localName,Le=j;if(G.oneof){if(re===null&&G.kind=="scalar")continue;const ce=te[G.oneof.localName];if(ce)throw new Error(`cannot decode message ${W.typeName} from JSON: multiple keys for oneof "${G.oneof.name}" present: "${ce}", "${fe}"`);te[G.oneof.localName]=fe,Le=Le[G.oneof.localName]={case:le},le="value"}if(G.repeated){if(re===null)continue;if(!Array.isArray(re))throw new Error(`cannot decode field ${W.typeName}.${G.name} from JSON: ${this.debug(re)}`);const ce=Le[le];for(const _e of re){if(_e===null)throw new Error(`cannot decode field ${W.typeName}.${G.name} from JSON: ${this.debug(_e)}`);let pe;switch(G.kind){case"message":pe=G.T.fromJson(_e,ae);break;case"enum":if(pe=B(G.T,_e,ae.ignoreUnknownFields),pe===void 0)continue;break;case"scalar":try{pe=z(G.T,_e,G.L)}catch(ke){let Ge=`cannot decode field ${W.typeName}.${G.name} from JSON: ${this.debug(_e)}`;throw ke instanceof Error&&ke.message.length>0&&(Ge+=`: ${ke.message}`),new Error(Ge)}break}ce.push(pe)}}else if(G.kind=="map"){if(re===null)continue;if(Array.isArray(re)||typeof re!="object")throw new Error(`cannot decode field ${W.typeName}.${G.name} from JSON: ${this.debug(re)}`);const ce=Le[le];for(const[_e,pe]of Object.entries(re)){if(pe===null)throw new Error(`cannot decode field ${W.typeName}.${G.name} from JSON: map value null`);let ke;switch(G.V.kind){case"message":ke=G.V.T.fromJson(pe,ae);break;case"enum":if(ke=B(G.V.T,pe,ae.ignoreUnknownFields),ke===void 0)continue;break;case"scalar":try{ke=z(G.V.T,pe,S.p.BIGINT)}catch(Ge){let Ue=`cannot decode map value for field ${W.typeName}.${G.name} from JSON: ${this.debug(re)}`;throw Ge instanceof Error&&Ge.message.length>0&&(Ue+=`: ${Ge.message}`),new Error(Ue)}break}try{ce[z(G.K,G.K==S.w.BOOL?_e=="true"?!0:_e=="false"?!1:_e:_e,S.p.BIGINT).toString()]=ke}catch(Ge){let Ue=`cannot decode map key for field ${W.typeName}.${G.name} from JSON: ${this.debug(re)}`;throw Ge instanceof Error&&Ge.message.length>0&&(Ue+=`: ${Ge.message}`),new Error(Ue)}}}else switch(G.kind){case"message":const ce=G.T;if(re===null&&ce.typeName!="google.protobuf.Value"){if(G.oneof)throw new Error(`cannot decode field ${W.typeName}.${G.name} from JSON: null is invalid for oneof field "${fe}"`);continue}Le[le]instanceof h.v?Le[le].fromJson(re,ae):(Le[le]=ce.fromJson(re,ae),ce.fieldWrapper&&!G.oneof&&(Le[le]=ce.fieldWrapper.unwrapField(Le[le])));break;case"enum":const _e=B(G.T,re,ae.ignoreUnknownFields);_e!==void 0&&(Le[le]=_e);break;case"scalar":try{Le[le]=z(G.T,re,G.L)}catch(pe){let ke=`cannot decode field ${W.typeName}.${G.name} from JSON: ${this.debug(re)}`;throw pe instanceof Error&&pe.message.length>0&&(ke+=`: ${pe.message}`),new Error(ke)}break}}return j},writeMessage(W,Z){const ae=W.getType(),j={};let te;try{for(const fe of ae.fields.byMember()){let re;if(fe.kind=="oneof"){const G=W[fe.localName];if(G.value===void 0)continue;if(te=fe.findField(G.case),!te)throw"oneof case not found: "+G.case;re=_(te,G.value,Z)}else te=fe,re=_(te,W[te.localName],Z);re!==void 0&&(j[Z.useProtoFieldName?te.name:te.jsonName]=re)}}catch(fe){const re=te?`cannot encode field ${ae.typeName}.${te.name} to JSON`:`cannot encode message ${ae.typeName} to JSON`,G=fe instanceof Error?fe.message:String(fe);throw new Error(re+(G.length>0?`: ${G}`:""))}return j},readScalar:z,writeScalar:Q,debug:C}}function C(J){if(J===null)return"null";switch(typeof J){case"object":return Array.isArray(J)?"array":"object";case"string":return J.length>100?"string":`"${J.split('"').join('\\"')}"`;default:return String(J)}}function z(J,_,W){switch(J){case S.w.DOUBLE:case S.w.FLOAT:if(_===null)return 0;if(_==="NaN")return Number.NaN;if(_==="Infinity")return Number.POSITIVE_INFINITY;if(_==="-Infinity")return Number.NEGATIVE_INFINITY;if(_===""||typeof _=="string"&&_.trim().length!==_.length||typeof _!="string"&&typeof _!="number")break;const Z=Number(_);if(Number.isNaN(Z)||!Number.isFinite(Z))break;return J==S.w.FLOAT&&(0,v.E_)(Z),Z;case S.w.INT32:case S.w.FIXED32:case S.w.SFIXED32:case S.w.SINT32:case S.w.UINT32:if(_===null)return 0;let ae;if(typeof _=="number"?ae=_:typeof _=="string"&&_.length>0&&_.trim().length===_.length&&(ae=Number(_)),ae===void 0)break;return J==S.w.UINT32?(0,v.fp)(ae):(0,v.ug)(ae),ae;case S.w.INT64:case S.w.SFIXED64:case S.w.SINT64:if(_===null)return R.q.zero;if(typeof _!="number"&&typeof _!="string")break;const j=R.q.parse(_);return W?j.toString():j;case S.w.FIXED64:case S.w.UINT64:if(_===null)return R.q.zero;if(typeof _!="number"&&typeof _!="string")break;const te=R.q.uParse(_);return W?te.toString():te;case S.w.BOOL:if(_===null)return!1;if(typeof _!="boolean")break;return _;case S.w.STRING:if(_===null)return"";if(typeof _!="string")break;try{encodeURIComponent(_)}catch{throw new Error("invalid UTF8")}return _;case S.w.BYTES:if(_===null||_==="")return new Uint8Array(0);if(typeof _!="string")break;return P.W.dec(_)}throw new Error}function B(J,_,W){if(_===null)return 0;switch(typeof _){case"number":if(Number.isInteger(_))return _;break;case"string":const Z=J.findName(_);if(Z||W)return Z==null?void 0:Z.no;break}throw new Error(`cannot decode enum ${J.typeName} from JSON: ${C(_)}`)}function b(J,_,W,Z){var ae;if(_===void 0)return _;if(_===0&&!W)return;if(Z)return _;if(J.typeName=="google.protobuf.NullValue")return null;const j=J.findNumber(_);return(ae=j==null?void 0:j.name)!==null&&ae!==void 0?ae:_}function Q(J,_,W){if(_!==void 0)switch(J){case S.w.INT32:case S.w.SFIXED32:case S.w.SINT32:case S.w.FIXED32:case S.w.UINT32:return(0,v.hu)(typeof _=="number"),_!=0||W?_:void 0;case S.w.FLOAT:case S.w.DOUBLE:return(0,v.hu)(typeof _=="number"),Number.isNaN(_)?"NaN":_===Number.POSITIVE_INFINITY?"Infinity":_===Number.NEGATIVE_INFINITY?"-Infinity":_!==0||W?_:void 0;case S.w.STRING:return(0,v.hu)(typeof _=="string"),_.length>0||W?_:void 0;case S.w.BOOL:return(0,v.hu)(typeof _=="boolean"),_||W?_:void 0;case S.w.UINT64:case S.w.FIXED64:case S.w.INT64:case S.w.SFIXED64:case S.w.SINT64:return(0,v.hu)(typeof _=="bigint"||typeof _=="string"||typeof _=="number"),W||_!=0?_.toString(10):void 0;case S.w.BYTES:return(0,v.hu)(_ instanceof Uint8Array),W||_.byteLength>0?P.W.enc(_):void 0}}},504:(w,T,g)=>{g.d(T,{GD:()=>b,Rz:()=>S,Sm:()=>P,ll:()=>B,r1:()=>h,uA:()=>v,x1:()=>R});function h(Q){switch(Q.kind){case"field":return S(Q.name,Q.oneof!==void 0);case"oneof":return v(Q.name);case"enum":case"message":case"service":{const J=Q.file.proto.package,_=J===void 0?0:J.length+1,W=Q.typeName.substring(_).replace(/\./g,"_");return B(b(W))}case"enum_value":{const J=Q.parent.sharedPrefix;if(J===void 0)return Q.name;const _=Q.name.substring(J.length);return B(_)}case"rpc":{let J=Q.name;return J.length==0?J:(J=J[0].toLowerCase()+J.substring(1),B(J))}}}function S(Q,J){const _=L(Q);return J?_:B(z(_))}function v(Q){return S(Q,!1)}const R=L;function P(Q,J){const _=q(Q)+"_";for(const W of J){if(!W.toLowerCase().startsWith(_))return;const Z=W.substring(_.length);if(Z.length==0||/^\d/.test(Z))return}return _}function q(Q){return(Q.substring(0,1)+Q.substring(1).replace(/[A-Z]/g,J=>"_"+J)).toLowerCase()}function L(Q){let J=!1;const _=[];for(let W=0;W<Q.length;W++){let Z=Q.charAt(W);switch(Z){case"_":J=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":_.push(Z),J=!1;break;default:J&&(J=!1,Z=Z.toUpperCase()),_.push(Z);break}}return _.join("")}const O=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]),A=new Set(["constructor","toString","toJSON","valueOf"]),U=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),C=Q=>`${Q}$`,z=Q=>U.has(Q)?C(Q):Q,B=Q=>A.has(Q)?C(Q):Q,b=Q=>O.has(Q)?C(Q):Q},493:(w,T,g)=>{g.d(T,{F:()=>R});var h=g(609),S=g(561);function v(P,q,L,O){var A;const U=(A=O==null?void 0:O.localName)!==null&&A!==void 0?A:q.substring(q.lastIndexOf(".")+1),C={[U]:function(z){P.util.initFields(this),P.util.initPartial(z,this)}}[U];return Object.setPrototypeOf(C.prototype,new S.v),Object.assign(C,{runtime:P,typeName:q,fields:P.util.newFieldList(L),fromBinary(z,B){return new C().fromBinary(z,B)},fromJson(z,B){return new C().fromJson(z,B)},fromJsonString(z,B){return new C().fromJsonString(z,B)},equals(z,B){return P.util.equals(C,z,B)}}),C}function R(P,q,L,O){return{syntax:P,json:q,bin:L,util:O,makeMessageType(A,U,C){return v(this,A,U,C)},makeEnum:h.ut,makeEnumType:h.be,getEnumType:h.V3}}},781:(w,T,g)=>{g.d(T,{AA:()=>R,T1:()=>q,kY:()=>P});var h=g(465),S=g(79),v=g(210);function R(L,O,A){if(O===A)return!0;if(L==h.w.BYTES){if(!(O instanceof Uint8Array)||!(A instanceof Uint8Array)||O.length!==A.length)return!1;for(let U=0;U<O.length;U++)if(O[U]!==A[U])return!1;return!0}switch(L){case h.w.UINT64:case h.w.FIXED64:case h.w.INT64:case h.w.SFIXED64:case h.w.SINT64:return O==A}return!1}function P(L,O){switch(L){case h.w.BOOL:return!1;case h.w.UINT64:case h.w.FIXED64:case h.w.INT64:case h.w.SFIXED64:case h.w.SINT64:return O==0?v.q.zero:"0";case h.w.DOUBLE:case h.w.FLOAT:return 0;case h.w.BYTES:return new Uint8Array(0);case h.w.STRING:return"";default:return 0}}function q(L,O){const A=O===void 0;let U=S.TD.Varint,C=O===0;switch(L){case h.w.STRING:C=A||!O.length,U=S.TD.LengthDelimited;break;case h.w.BOOL:C=O===!1;break;case h.w.DOUBLE:U=S.TD.Bit64;break;case h.w.FLOAT:U=S.TD.Bit32;break;case h.w.INT64:C=A||O==0;break;case h.w.UINT64:C=A||O==0;break;case h.w.FIXED64:C=A||O==0,U=S.TD.Bit64;break;case h.w.BYTES:C=A||!O.byteLength,U=S.TD.LengthDelimited;break;case h.w.FIXED32:U=S.TD.Bit32;break;case h.w.SFIXED32:U=S.TD.Bit32;break;case h.w.SFIXED64:C=A||O==0,U=S.TD.Bit64;break;case h.w.SINT64:C=A||O==0;break}const z=h.w[L].toLowerCase();return[U,z,A||C]}},433:(w,T,g)=>{g.d(T,{f:()=>P});var h=g(609),S=g(561),v=g(465),R=g(781);function P(){return{setEnumType:h.zg,initPartial(O,A){if(O===void 0)return;const U=A.getType();for(const C of U.fields.byMember()){const z=C.localName,B=A,b=O;if(b[z]!==void 0)switch(C.kind){case"oneof":const Q=b[z].case;if(Q===void 0)continue;const J=C.findField(Q);let _=b[z].value;J&&J.kind=="message"&&!(_ instanceof J.T)?_=new J.T(_):J&&J.kind==="scalar"&&J.T===v.w.BYTES&&(_=L(_)),B[z]={case:Q,value:_};break;case"scalar":case"enum":let W=b[z];C.T===v.w.BYTES&&(W=C.repeated?W.map(L):L(W)),B[z]=W;break;case"map":switch(C.V.kind){case"scalar":case"enum":if(C.V.T===v.w.BYTES)for(const[j,te]of Object.entries(b[z]))B[z][j]=L(te);else Object.assign(B[z],b[z]);break;case"message":const ae=C.V.T;for(const j of Object.keys(b[z])){let te=b[z][j];ae.fieldWrapper||(te=new ae(te)),B[z][j]=te}break}break;case"message":const Z=C.T;if(C.repeated)B[z]=b[z].map(ae=>ae instanceof Z?ae:new Z(ae));else if(b[z]!==void 0){const ae=b[z];Z.fieldWrapper?Z.typeName==="google.protobuf.BytesValue"?B[z]=L(ae):B[z]=ae:B[z]=ae instanceof Z?ae:new Z(ae)}break}}},equals(O,A,U){return A===U?!0:!A||!U?!1:O.fields.byMember().every(C=>{const z=A[C.localName],B=U[C.localName];if(C.repeated){if(z.length!==B.length)return!1;switch(C.kind){case"message":return z.every((b,Q)=>C.T.equals(b,B[Q]));case"scalar":return z.every((b,Q)=>(0,R.AA)(C.T,b,B[Q]));case"enum":return z.every((b,Q)=>(0,R.AA)(v.w.INT32,b,B[Q]))}throw new Error(`repeated cannot contain ${C.kind}`)}switch(C.kind){case"message":return C.T.equals(z,B);case"enum":return(0,R.AA)(v.w.INT32,z,B);case"scalar":return(0,R.AA)(C.T,z,B);case"oneof":if(z.case!==B.case)return!1;const b=C.findField(z.case);if(b===void 0)return!0;switch(b.kind){case"message":return b.T.equals(z.value,B.value);case"enum":return(0,R.AA)(v.w.INT32,z.value,B.value);case"scalar":return(0,R.AA)(b.T,z.value,B.value)}throw new Error(`oneof cannot contain ${b.kind}`);case"map":const Q=Object.keys(z).concat(Object.keys(B));switch(C.V.kind){case"message":const J=C.V.T;return Q.every(W=>J.equals(z[W],B[W]));case"enum":return Q.every(W=>(0,R.AA)(v.w.INT32,z[W],B[W]));case"scalar":const _=C.V.T;return Q.every(W=>(0,R.AA)(_,z[W],B[W]))}break}})},clone(O){const A=O.getType(),U=new A,C=U;for(const z of A.fields.byMember()){const B=O[z.localName];let b;if(z.repeated)b=B.map(q);else if(z.kind=="map"){b=C[z.localName];for(const[Q,J]of Object.entries(B))b[Q]=q(J)}else z.kind=="oneof"?b=z.findField(B.case)?{case:B.case,value:q(B.value)}:{case:void 0}:b=q(B);C[z.localName]=b}return U}}}function q(O){if(O===void 0)return O;if(O instanceof S.v)return O.clone();if(O instanceof Uint8Array){const A=new Uint8Array(O.byteLength);return A.set(O),A}return O}function L(O){return O instanceof Uint8Array?O:new Uint8Array(O)}},236:(w,T,g)=>{g.d(T,{W:()=>v});let h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),S=[];for(let R=0;R<h.length;R++)S[h[R].charCodeAt(0)]=R;S["-".charCodeAt(0)]=h.indexOf("+"),S["_".charCodeAt(0)]=h.indexOf("/");const v={dec(R){let P=R.length*3/4;R[R.length-2]=="="?P-=2:R[R.length-1]=="="&&(P-=1);let q=new Uint8Array(P),L=0,O=0,A,U=0;for(let C=0;C<R.length;C++){if(A=S[R.charCodeAt(C)],A===void 0)switch(R[C]){case"=":O=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(O){case 0:U=A,O=1;break;case 1:q[L++]=U<<2|(A&48)>>4,U=A,O=2;break;case 2:q[L++]=(U&15)<<4|(A&60)>>2,U=A,O=3;break;case 3:q[L++]=(U&3)<<6|A,O=0;break}}if(O==1)throw Error("invalid base64 string.");return q.subarray(0,L)},enc(R){let P="",q=0,L,O=0;for(let A=0;A<R.length;A++)switch(L=R[A],q){case 0:P+=h[L>>2],O=(L&3)<<4,q=1;break;case 1:P+=h[O|L>>4],O=(L&15)<<2,q=2;break;case 2:P+=h[O|L>>6],P+=h[L&63],q=0;break}return q&&(P+=h[O],P+="=",q==1&&(P+="=")),P}}},210:(w,T,g)=>{g.d(T,{q:()=>R});var h=g(120),S=g(818);function v(){const P=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof P.getBigInt64=="function"&&typeof P.getBigUint64=="function"&&typeof P.setBigInt64=="function"&&typeof P.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const A=BigInt("-9223372036854775808"),U=BigInt("9223372036854775807"),C=BigInt("0"),z=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(B){const b=typeof B=="bigint"?B:BigInt(B);if(b>U||b<A)throw new Error(`int64 invalid: ${B}`);return b},uParse(B){const b=typeof B=="bigint"?B:BigInt(B);if(b>z||b<C)throw new Error(`uint64 invalid: ${B}`);return b},enc(B){return P.setBigInt64(0,this.parse(B),!0),{lo:P.getInt32(0,!0),hi:P.getInt32(4,!0)}},uEnc(B){return P.setBigInt64(0,this.uParse(B),!0),{lo:P.getInt32(0,!0),hi:P.getInt32(4,!0)}},dec(B,b){return P.setInt32(0,B,!0),P.setInt32(4,b,!0),P.getBigInt64(0,!0)},uDec(B,b){return P.setInt32(0,B,!0),P.setInt32(4,b,!0),P.getBigUint64(0,!0)}}}const L=A=>(0,h.hu)(/^-?[0-9]+$/.test(A),`int64 invalid: ${A}`),O=A=>(0,h.hu)(/^[0-9]+$/.test(A),`uint64 invalid: ${A}`);return{zero:"0",supported:!1,parse(A){return typeof A!="string"&&(A=A.toString()),L(A),A},uParse(A){return typeof A!="string"&&(A=A.toString()),O(A),A},enc(A){return typeof A!="string"&&(A=A.toString()),L(A),(0,S.CZ)(A)},uEnc(A){return typeof A!="string"&&(A=A.toString()),O(A),(0,S.CZ)(A)},dec(A,U){return(0,S.Ak)(A,U)},uDec(A,U){return(0,S.Fd)(A,U)}}}const R=v()},850:(w,T,g)=>{g.d(T,{w:()=>b});var h=g(493),S=g(465),v=g(744);function R(){return Object.assign(Object.assign({},(0,v.gY)()),{writeMessage(J,_,W){const Z=J.getType();for(const ae of Z.fields.byNumber()){let j,te=ae.repeated,fe=ae.localName;if(ae.oneof){const re=J[ae.oneof.localName];if(re.case!==fe)continue;j=re.value}else j=J[fe];switch(ae.kind){case"scalar":case"enum":let re=ae.kind=="enum"?S.w.INT32:ae.T;if(te)if(ae.packed)(0,v.Jj)(_,re,ae.no,j);else for(const G of j)(0,v.NN)(_,re,ae.no,G,!0);else j!==void 0&&(0,v.NN)(_,re,ae.no,j,!!ae.oneof||ae.opt);break;case"message":if(te)for(const G of j)(0,v.oQ)(_,W,ae,G);else(0,v.oQ)(_,W,ae,j);break;case"map":for(const[G,le]of Object.entries(j))(0,v.gQ)(_,W,ae,G,le);break}}return W.writeUnknownFields&&this.writeUnknownFields(J,_),_}})}var P=g(432),q=g(120),L=g(814);function O(){return(0,L.b)((J,_)=>function(Z,ae,j){if(Z.kind=="map"){const te={};switch(Z.V.kind){case"scalar":for(const[re,G]of Object.entries(ae)){const le=_(Z.V.T,G,!0);(0,q.hu)(le!==void 0),te[re.toString()]=le}break;case"message":for(const[re,G]of Object.entries(ae))te[re.toString()]=G.toJson(j);break;case"enum":const fe=Z.V.T;for(const[re,G]of Object.entries(ae)){(0,q.hu)(G===void 0||typeof G=="number");const le=J(fe,G,!0,j.enumAsInteger);(0,q.hu)(le!==void 0),te[re.toString()]=le}break}return j.emitDefaultValues||Object.keys(te).length>0?te:void 0}else if(Z.repeated){const te=[];switch(Z.kind){case"scalar":for(let fe=0;fe<ae.length;fe++)te.push(_(Z.T,ae[fe],!0));break;case"enum":for(let fe=0;fe<ae.length;fe++)te.push(J(Z.T,ae[fe],!0,j.enumAsInteger));break;case"message":for(let fe=0;fe<ae.length;fe++)te.push((0,P.E)(Z.T,ae[fe]).toJson(j));break}return j.emitDefaultValues||te.length>0?te:void 0}else switch(Z.kind){case"scalar":return _(Z.T,ae,!!Z.oneof||Z.opt||j.emitDefaultValues);case"enum":return J(Z.T,ae,!!Z.oneof||Z.opt||j.emitDefaultValues,j.enumAsInteger);case"message":return ae!==void 0?(0,P.E)(Z.T,ae).toJson(j):void 0}})}var A=g(433),U=g(501),C=g(781),z=g(215),B=g(504);const b=(0,h.F)("proto3",O(),R(),Object.assign(Object.assign({},(0,A.f)()),{newFieldList(J){return new U.i(J,Q)},initFields(J){for(const _ of J.getType().fields.byMember()){if(_.opt)continue;const W=_.localName,Z=J;if(_.repeated){Z[W]=[];continue}switch(_.kind){case"oneof":Z[W]={case:void 0};break;case"enum":Z[W]=0;break;case"map":Z[W]={};break;case"scalar":Z[W]=(0,C.kY)(_.T,_.L);break}}}}));function Q(J){var _,W,Z,ae;const j=[];let te;for(const fe of typeof J=="function"?J():J){const re=fe;if(re.localName=(0,B.Rz)(fe.name,fe.oneof!==void 0),re.jsonName=(_=fe.jsonName)!==null&&_!==void 0?_:(0,B.x1)(fe.name),re.repeated=(W=fe.repeated)!==null&&W!==void 0?W:!1,fe.kind=="scalar"&&(re.L=(Z=fe.L)!==null&&Z!==void 0?Z:S.p.BIGINT),fe.oneof!==void 0){const G=typeof fe.oneof=="string"?fe.oneof:fe.oneof.name;(!te||te.name!=G)&&(te=new z.o(G)),re.oneof=te,te.addField(re)}fe.kind=="message"&&(re.delimited=!1),re.packed=(ae=fe.packed)!==null&&ae!==void 0?ae:fe.kind=="enum"||fe.kind=="scalar"&&fe.T!=S.w.BYTES&&fe.T!=S.w.STRING,j.push(re)}return j}},328:(w,T,g)=>{g.d(T,{t:()=>h,w:()=>S});var h;(function(v){v[v.Unary=0]="Unary",v[v.ServerStreaming=1]="ServerStreaming",v[v.ClientStreaming=2]="ClientStreaming",v[v.BiDiStreaming=3]="BiDiStreaming"})(h||(h={}));var S;(function(v){v[v.NoSideEffects=1]="NoSideEffects",v[v.Idempotent=2]="Idempotent"})(S||(S={}))}},d={};function m(w){var T=d[w];if(T!==void 0)return T.exports;var g=d[w]={exports:{}};return l[w](g,g.exports,m),g.exports}m.d=(w,T)=>{for(var g in T)m.o(T,g)&&!m.o(w,g)&&Object.defineProperty(w,g,{enumerable:!0,get:T[g]})},m.o=(w,T)=>Object.prototype.hasOwnProperty.call(w,T),m.r=w=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})};var y={};return(()=>{m.r(y),m.d(y,{Change:()=>Ar,Client:()=>Fo,ClientEventType:()=>En,ClientStatus:()=>fr,Counter:()=>Fs,DocEventType:()=>$e,Document:()=>Bo,DocumentSyncResultType:()=>Qr,Primitive:()=>lt,StreamConnectionStatus:()=>Or,SyncMode:()=>Hn,Text:()=>Ms,TimeTicket:()=>ot,Tree:()=>Js,converter:()=>Vn,default:()=>uc});var w;(function(i){i[i.Trivial=0]="Trivial",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"})(w||(w={}));let T=w.Info;const g={trivial:(...i)=>{T>w.Trivial||typeof console<"u"&&console.log("YORKIE T:",...i)},debug:(...i)=>{T>w.Debug||typeof console<"u"&&console.log("YORKIE D:",...i)},info:(...i)=>{T>w.Info||typeof console<"u"&&console.log("YORKIE I:",...i)},warn:(...i)=>{T>w.Warn||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...i):console.log("YORKIE W:",...i))},error:(...i)=>{T>w.Error||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...i):console.log("YORKIE E:",...i))},fatal:(i,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${i}`)},isEnabled:i=>T<=i};function h(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)})}const S=()=>{};class v{constructor(e){this.finalized=!1,this.observers=[];try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;e||g.fatal("missing observer"),this.finalized&&g.fatal("observable is finalized due to previous error"),typeof e=="object"?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=S),o.error===void 0&&(o.error=S),o.complete===void 0&&(o.complete=S);const f=h(),p=this.unsubscribeOne.bind(this,f);if(this.observers.push({subscriptionID:f,observer:o}),this.finalized)try{this.finalError?o.error(this.finalError):o.complete()}catch(E){g.warn(E)}return p}unsubscribeOne(e){var t;this.observers=(t=this.observers)===null||t===void 0?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){g.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function R(i){const e=new v(i);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}var P=m(328);function q(i,e){const t={};for(const[r,o]of Object.entries(i.methods)){const f=e(Object.assign(Object.assign({},o),{localName:r,service:i}));f!=null&&(t[r]=f)}return t}var L;(function(i){i[i.Canceled=1]="Canceled",i[i.Unknown=2]="Unknown",i[i.InvalidArgument=3]="InvalidArgument",i[i.DeadlineExceeded=4]="DeadlineExceeded",i[i.NotFound=5]="NotFound",i[i.AlreadyExists=6]="AlreadyExists",i[i.PermissionDenied=7]="PermissionDenied",i[i.ResourceExhausted=8]="ResourceExhausted",i[i.FailedPrecondition=9]="FailedPrecondition",i[i.Aborted=10]="Aborted",i[i.OutOfRange=11]="OutOfRange",i[i.Unimplemented=12]="Unimplemented",i[i.Internal=13]="Internal",i[i.Unavailable=14]="Unavailable",i[i.DataLoss=15]="DataLoss",i[i.Unauthenticated=16]="Unauthenticated"})(L||(L={}));var O=m(561);function A(i){const e=L[i];return typeof e!="string"?i.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class U extends Error{constructor(e,t=L.Unknown,r,o,f){super(C(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r!=null?r:{}),this.details=o!=null?o:[],this.cause=f}static from(e,t=L.Unknown){return e instanceof U?e:e instanceof Error?e.name=="AbortError"?new U(e.message,L.Canceled):new U(e.message,t,void 0,void 0,e):new U(String(e),t,void 0,void 0,e)}findDetails(e){const t="typeName"in e?{findMessage:o=>o===e.typeName?e:void 0}:e,r=[];for(const o of this.details){if(o instanceof O.v){t.findMessage(o.getType().typeName)&&r.push(o);continue}const f=t.findMessage(o.type);if(f)try{r.push(f.fromBinary(o.value))}catch{}}return r}}function C(i,e){return i.length?`[${A(e)}] ${i}`:`[${A(e)}]`}var z=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(f){t[f]=i[f]&&function(p){return new Promise(function(E,x){p=i[f](p),o(E,x,p.done,p.value)})}}function o(f,p,E,x){Promise.resolve(x).then(function($){f({value:$,done:E})},p)}},B=function(i){return this instanceof B?(this.v=i,this):new B(i)},b=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),o,f=[];return o={},p("next"),p("throw"),p("return"),o[Symbol.asyncIterator]=function(){return this},o;function p(ne){r[ne]&&(o[ne]=function(Ne){return new Promise(function(Be,Fe){f.push([ne,Ne,Be,Fe])>1||E(ne,Ne)})})}function E(ne,Ne){try{x(r[ne](Ne))}catch(Be){Te(f[0][3],Be)}}function x(ne){ne.value instanceof B?Promise.resolve(ne.value.v).then($,me):Te(f[0][2],ne)}function $(ne){E("next",ne)}function me(ne){E("throw",ne)}function Te(ne,Ne){ne(Ne),f.shift(),f.length&&E(f[0][0],f[0][1])}},Q=function(i){var e,t;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,f){e[o]=i[o]?function(p){return(t=!t)?{value:B(i[o](p)),done:!1}:f?f(p):p}:f}};function J(i){return b(this,arguments,function*(){yield B(yield*Q(z(i)))})}var _=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(f){t[f]=i[f]&&function(p){return new Promise(function(E,x){p=i[f](p),o(E,x,p.done,p.value)})}}function o(f,p,E,x){Promise.resolve(x).then(function($){f({value:$,done:E})},p)}},W=function(i){return this instanceof W?(this.v=i,this):new W(i)},Z=function(i){var e,t;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,f){e[o]=i[o]?function(p){return(t=!t)?{value:W(i[o](p)),done:!1}:f?f(p):p}:f}},ae=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),o,f=[];return o={},p("next"),p("throw"),p("return"),o[Symbol.asyncIterator]=function(){return this},o;function p(ne){r[ne]&&(o[ne]=function(Ne){return new Promise(function(Be,Fe){f.push([ne,Ne,Be,Fe])>1||E(ne,Ne)})})}function E(ne,Ne){try{x(r[ne](Ne))}catch(Be){Te(f[0][3],Be)}}function x(ne){ne.value instanceof W?Promise.resolve(ne.value.v).then($,me):Te(f[0][2],ne)}function $(ne){E("next",ne)}function me(ne){E("throw",ne)}function Te(ne,Ne){ne(Ne),f.shift(),f.length&&E(f[0][0],f[0][1])}};function j(i,e){return q(i,t=>{switch(t.kind){case P.t.Unary:return te(e,i,t);case P.t.ServerStreaming:return fe(e,i,t);case P.t.ClientStreaming:return re(e,i,t);case P.t.BiDiStreaming:return G(e,i,t);default:return null}})}function te(i,e,t){return async function(r,o){var f,p;const E=await i.unary(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,r,o==null?void 0:o.contextValues);return(f=o==null?void 0:o.onHeader)===null||f===void 0||f.call(o,E.header),(p=o==null?void 0:o.onTrailer)===null||p===void 0||p.call(o,E.trailer),E.message}}function fe(i,e,t){return function(r,o){return le(i.stream(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,J([r]),o==null?void 0:o.contextValues),o)}}function re(i,e,t){return async function(r,o){var f,p,E,x,$,me;const Te=await i.stream(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,r,o==null?void 0:o.contextValues);($=o==null?void 0:o.onHeader)===null||$===void 0||$.call(o,Te.header);let ne;try{for(var Ne=!0,Be=_(Te.message),Fe;Fe=await Be.next(),f=Fe.done,!f;Ne=!0)x=Fe.value,Ne=!1,ne=x}catch(Qe){p={error:Qe}}finally{try{!Ne&&!f&&(E=Be.return)&&await E.call(Be)}finally{if(p)throw p.error}}if(!ne)throw new U("protocol error: missing response message",L.Internal);return(me=o==null?void 0:o.onTrailer)===null||me===void 0||me.call(o,Te.trailer),ne}}function G(i,e,t){return function(r,o){return le(i.stream(e,t,o==null?void 0:o.signal,o==null?void 0:o.timeoutMs,o==null?void 0:o.headers,r,o==null?void 0:o.contextValues),o)}}function le(i,e){const t=function(){var r,o;return ae(this,arguments,function*(){const f=yield W(i);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,f.header),yield W(yield*Z(_(f.message))),(o=e==null?void 0:e.onTrailer)===null||o===void 0||o.call(e,f.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function Le(){return{get(i){return i.id in this?this[i.id]:i.defaultValue},set(i,e){return this[i.id]=e,this},delete(i){return delete this[i.id],this}}}function ce(i){var e;const t=Object.assign({},i);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function _e(i,e,t,r){const o=e?pe(i.I,r):ke(i.I,t);return{parse:(e?pe(i.O,r):ke(i.O,t)).parse,serialize:o.serialize}}function pe(i,e){return{parse(t){try{return i.fromBinary(t,e)}catch(r){const o=r instanceof Error?r.message:String(r);throw new U(`parse binary: ${o}`,L.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(r){const o=r instanceof Error?r.message:String(r);throw new U(`serialize binary: ${o}`,L.Internal)}}}}function ke(i,e){var t,r;const o=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,f=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,p=ce(e);return{parse(E){try{const x=f.decode(E);return i.fromJsonString(x,p)}catch(x){throw U.from(x,L.InvalidArgument)}},serialize(E){try{const x=E.toJsonString(p);return o.encode(x)}catch(x){throw U.from(x,L.Internal)}}}}function Ge(...i){const e=new AbortController,t=i.filter(o=>o!==void 0).concat(e.signal);for(const o of t){if(o.aborted){r.apply(o);break}o.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(Ke(this));for(const o of t)o.removeEventListener("abort",r)}return e}function Ue(i){const e=new AbortController,t=()=>{e.abort(new U("the operation timed out",L.DeadlineExceeded))};let r;return i!==void 0&&(i<=0?t():r=setTimeout(t,i)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function Ke(i){if(!i.aborted)return;if(i.reason!==void 0)return i.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function it(i,e){return e instanceof O.v?e:new i(e)}function nt(i,e){function t(r){return r.done===!0?r:{done:r.done,value:it(i,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),o={next:()=>r.next().then(t)};return r.throw!==void 0&&(o.throw=f=>r.throw(f).then(t)),r.return!==void 0&&(o.return=f=>r.return(f).then(t)),o}}}function gt(i){const e=I(i.next,i.interceptors),[t,r,o]=dt(i),f=Object.assign(Object.assign({},i.req),{message:it(i.req.method.I,i.req.message),signal:t});return e(f).then(p=>(o(),p),r)}function St(i){const e=I(i.next,i.interceptors),[t,r,o]=dt(i),f=Object.assign(Object.assign({},i.req),{message:nt(i.req.method.I,i.req.message),signal:t});let p=!1;return t.addEventListener("abort",function(){var E,x;const $=i.req.message[Symbol.asyncIterator]();p||(E=$.throw)===null||E===void 0||E.call($,this.reason).catch(()=>{}),(x=$.return)===null||x===void 0||x.call($).catch(()=>{})}),e(f).then(E=>Object.assign(Object.assign({},E),{message:{[Symbol.asyncIterator](){const x=E.message[Symbol.asyncIterator]();return{next(){return x.next().then($=>($.done==!0&&(p=!0,o()),$),r)}}}}}),r)}function dt(i){const{signal:e,cleanup:t}=Ue(i.timeoutMs),r=Ge(i.signal,e);return[r.signal,function(f){const p=U.from(e.aborted?Ke(e):f);return r.abort(p),t(),Promise.reject(p)},function(){t(),r.abort()}]}function I(i,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,o)=>o(r),i))!==null&&t!==void 0?t:i}function D(i,e,t){const r=typeof e=="string"?e:e.typeName,o=typeof t=="string"?t:t.name;return i.toString().replace(/\/?$/,`/${r}/${o}`)}function Y(i){let e,t=new Uint8Array(0);function r(o){const f=new Uint8Array(t.length+o.length);f.set(t),f.set(o,t.length),t=f}return new ReadableStream({start(){e=i.getReader()},async pull(o){let f;for(;;){if(f===void 0&&t.byteLength>=5){let x=0;for(let $=1;$<5;$++)x=(x<<8)+t[$];f={flags:t[0],length:x}}if(f!==void 0&&t.byteLength>=f.length+5)break;const E=await e.read();if(E.done)break;r(E.value)}if(f===void 0){if(t.byteLength==0){o.close();return}o.error(new U("premature end of stream",L.DataLoss));return}const p=t.subarray(5,5+f.length);t=t.subarray(5+f.length),o.enqueue({flags:f.flags,data:p})}})}function H(i,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,i),r.setUint32(1,e.length),t}const X="Content-Type",ue="Grpc-Timeout",ge="Grpc-Status",ie="Grpc-Message",V="Grpc-Status-Details-Bin",oe="User-Agent",we="X-User-Agent",ve="X-Grpc-Web",be="application/grpc-web+proto",Se="application/grpc-web+json";function Pe(i,e,t,r){const o=new Headers(t!=null?t:{});return o.set(X,i?be:Se),o.set(ve,"1"),o.set(we,"connect-es/1.2.0"),r&&o.set(oe,"connect-es/1.2.0"),e!==void 0&&o.set(ue,`${e}m`),o}function Ye(i){switch(i){case 400:return L.Internal;case 401:return L.Unauthenticated;case 403:return L.PermissionDenied;case 404:return L.Unimplemented;case 429:return L.Unavailable;case 502:return L.Unavailable;case 503:return L.Unavailable;case 504:return L.Unavailable;default:return L.Unknown}}var De=m(850),He=m(733);class Ze extends O.v{constructor(e){super(),this.code=0,this.message="",this.details=[],De.w.util.initPartial(e,this)}static fromBinary(e,t){return new Ze().fromBinary(e,t)}static fromJson(e,t){return new Ze().fromJson(e,t)}static fromJsonString(e,t){return new Ze().fromJsonString(e,t)}static equals(e,t){return De.w.util.equals(Ze,e,t)}}Ze.runtime=De.w,Ze.typeName="google.rpc.Status",Ze.fields=De.w.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:He.I,repeated:!0}]);var kt=m(236);function Yt(i,e,t){try{const r=kt.W.dec(i);return e?e.fromBinary(r,t):r}catch(r){throw U.from(r,L.DataLoss)}}const Ct="0";function Wt(i){var e;const t=i.get(V);if(t!=null){const o=Yt(t,Ze);if(o.code==0)return;const f=new U(o.message,o.code,i);return f.details=o.details.map(p=>({type:p.typeUrl.substring(p.typeUrl.lastIndexOf("/")+1),value:p.value})),f}const r=i.get(ge);if(r!=null){if(r===Ct)return;const o=parseInt(r,10);return o in L?new U(decodeURIComponent((e=i.get(ie))!==null&&e!==void 0?e:""),o,i):new U(`invalid grpc-status: ${r}`,L.Internal,i)}}function qe(i,e){var t;if(i>=200&&i<300){const r=Wt(e);if(r)throw r;return{foundStatus:e.has(ge)}}throw new U(decodeURIComponent((t=e.get(ie))!==null&&t!==void 0?t:`HTTP ${i}`),Ye(i),e)}const ut=128;function tt(i){const e=new Headers,t=new TextDecoder().decode(i).split(`\r
`);for(const r of t){if(r==="")continue;const o=r.indexOf(":");if(o>0){const f=r.substring(0,o).trim(),p=r.substring(o+1).trim();e.append(f,p)}}return e}function sr(i,e){const t=Wt(i);if(t)throw e.forEach((r,o)=>{t.metadata.append(o,r)}),t}function vr(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}var zt=function(i){return this instanceof zt?(this.v=i,this):new zt(i)},wr=function(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),o,f=[];return o={},p("next"),p("throw"),p("return"),o[Symbol.asyncIterator]=function(){return this},o;function p(ne){r[ne]&&(o[ne]=function(Ne){return new Promise(function(Be,Fe){f.push([ne,Ne,Be,Fe])>1||E(ne,Ne)})})}function E(ne,Ne){try{x(r[ne](Ne))}catch(Be){Te(f[0][3],Be)}}function x(ne){ne.value instanceof zt?Promise.resolve(ne.value.v).then($,me):Te(f[0][2],ne)}function $(ne){E("next",ne)}function me(ne){E("throw",ne)}function Te(ne,Ne){ne(Ne),f.shift(),f.length&&E(f[0][0],f[0][1])}};function br(i){var e;vr();const t=(e=i.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,o,f,p,E,x,$){var me;const{serialize:Te,parse:ne}=_e(o,t,i.jsonOptions,i.binaryOptions);return p=p===void 0?i.defaultTimeoutMs:p<=0?void 0:p,await gt({interceptors:i.interceptors,signal:f,timeoutMs:p,req:{stream:!1,service:r,method:o,url:D(i.baseUrl,r,o),init:{method:"POST",credentials:(me=i.credentials)!==null&&me!==void 0?me:"same-origin",redirect:"error",mode:"cors"},header:Pe(t,p,E,!1),contextValues:$!=null?$:Le(),message:x},next:async Ne=>{var Be;const Qe=await((Be=i.fetch)!==null&&Be!==void 0?Be:globalThis.fetch)(Ne.url,Object.assign(Object.assign({},Ne.init),{headers:Ne.header,signal:Ne.signal,body:H(0,Te(Ne.message))}));if(qe(Qe.status,Qe.headers),!Qe.body)throw"missing response body";const Jt=Y(Qe.body).getReader();let Ve,wt;for(;;){const yt=await Jt.read();if(yt.done)break;const{flags:At,data:Pr}=yt.value;if(At===ut){if(Ve!==void 0)throw"extra trailer";Ve=tt(Pr);continue}if(wt!==void 0)throw"extra message";wt=ne(Pr)}if(Ve===void 0)throw"missing trailer";if(sr(Ve,Qe.headers),wt===void 0)throw"missing message";return{stream:!1,header:Qe.headers,message:wt,trailer:Ve}}})},async stream(r,o,f,p,E,x,$){var me;const{serialize:Te,parse:ne}=_e(o,t,i.jsonOptions,i.binaryOptions);function Ne(Fe,Qe,Jt,Ve){return wr(this,arguments,function*(){const yt=Y(Fe).getReader();if(Qe){if(!(yield zt(yt.read())).done)throw"extra data for trailers-only";return yield zt(void 0)}let At=!1;for(;;){const Pr=yield zt(yt.read());if(Pr.done)break;const{flags:es,data:vs}=Pr.value;if((es&ut)===ut){if(At)throw"extra trailer";At=!0;const Jo=tt(vs);sr(Jo,Ve),Jo.forEach((cc,lc)=>Jt.set(lc,cc));continue}if(At)throw"extra message";yield yield zt(ne(vs))}if(!At)throw"missing trailer"})}async function Be(Fe){if(o.kind!=P.t.ServerStreaming)throw"The fetch API does not support streaming request bodies";const Qe=await Fe[Symbol.asyncIterator]().next();if(Qe.done==!0)throw"missing request message";return H(0,Te(Qe.value))}return p=p===void 0?i.defaultTimeoutMs:p<=0?void 0:p,St({interceptors:i.interceptors,signal:f,timeoutMs:p,req:{stream:!0,service:r,method:o,url:D(i.baseUrl,r,o),init:{method:"POST",credentials:(me=i.credentials)!==null&&me!==void 0?me:"same-origin",redirect:"error",mode:"cors"},header:Pe(t,p,E,!1),contextValues:$!=null?$:Le(),message:x},next:async Fe=>{var Qe;const Ve=await((Qe=i.fetch)!==null&&Qe!==void 0?Qe:globalThis.fetch)(Fe.url,Object.assign(Object.assign({},Fe.init),{headers:Fe.header,signal:Fe.signal,body:await Be(Fe.message)})),{foundStatus:wt}=qe(Ve.status,Ve.headers);if(!Ve.body)throw"missing response body";const yt=new Headers;return Object.assign(Object.assign({},Fe),{header:Ve.headers,trailer:yt,message:Ne(Ve.body,wt,yt,Ve.headers)})}})}}}var Er=m(295),se=m(646);/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var pt=null;try{pt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function je(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}je.prototype.__isLong__,Object.defineProperty(je.prototype,"__isLong__",{value:!0});function rt(i){return(i&&i.__isLong__)===!0}function fn(i){var e=Math.clz32(i&-i);return i?31-e:e}je.isLong=rt;var dn={},ir={};function zn(i,e){var t,r,o;return e?(i>>>=0,(o=0<=i&&i<256)&&(r=ir[i],r)?r:(t=We(i,0,!0),o&&(ir[i]=t),t)):(i|=0,(o=-128<=i&&i<128)&&(r=dn[i],r)?r:(t=We(i,i<0?-1:0,!1),o&&(dn[i]=t),t))}je.fromInt=zn;function sn(i,e){if(isNaN(i))return e?Cn:mn;if(e){if(i<0)return Cn;if(i>=jr)return Nr}else{if(i<=-ds)return bt;if(i+1>=ds)return Os}return i<0?sn(-i,e).neg():We(i%Mn|0,i/Mn|0,e)}je.fromNumber=sn;function We(i,e,t){return new je(i,e,t)}je.fromBits=We;var $r=Math.pow;function ls(i,e,t){if(i.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return e?Cn:mn;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=i.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return ls(i.substring(1),e,t).neg();for(var o=sn($r(t,8)),f=mn,p=0;p<i.length;p+=8){var E=Math.min(8,i.length-p),x=parseInt(i.substring(p,p+E),t);if(E<8){var $=sn($r(t,E));f=f.mul($).add(sn(x))}else f=f.mul(o),f=f.add(sn(x))}return f.unsigned=e,f}je.fromString=ls;function hn(i,e){return typeof i=="number"?sn(i,e):typeof i=="string"?ls(i,e):We(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}je.fromValue=hn;var fs=1<<16,pi=1<<24,Mn=fs*fs,jr=Mn*Mn,ds=jr/2,hs=zn(pi),mn=zn(0);je.ZERO=mn;var Cn=zn(0,!0);je.UZERO=Cn;var or=zn(1);je.ONE=or;var ms=zn(1,!0);je.UONE=ms;var Vr=zn(-1);je.NEG_ONE=Vr;var Os=We(-1,2147483647,!1);je.MAX_VALUE=Os;var Nr=We(-1,-1,!0);je.MAX_UNSIGNED_VALUE=Nr;var bt=We(0,-2147483648,!1);je.MIN_VALUE=bt;var de=je.prototype;de.toInt=function(){return this.unsigned?this.low>>>0:this.low},de.toNumber=function(){return this.unsigned?(this.high>>>0)*Mn+(this.low>>>0):this.high*Mn+(this.low>>>0)},de.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(bt)){var t=sn(e),r=this.div(t),o=r.mul(t).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var f=sn($r(e,6),this.unsigned),p=this,E="";;){var x=p.div(f),$=p.sub(x.mul(f)).toInt()>>>0,me=$.toString(e);if(p=x,p.isZero())return me+E;for(;me.length<6;)me="0"+me;E=""+me+E}},de.getHighBits=function(){return this.high},de.getHighBitsUnsigned=function(){return this.high>>>0},de.getLowBits=function(){return this.low},de.getLowBitsUnsigned=function(){return this.low>>>0},de.getNumBitsAbs=function(){if(this.isNegative())return this.eq(bt)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},de.isZero=function(){return this.high===0&&this.low===0},de.eqz=de.isZero,de.isNegative=function(){return!this.unsigned&&this.high<0},de.isPositive=function(){return this.unsigned||this.high>=0},de.isOdd=function(){return(this.low&1)===1},de.isEven=function(){return(this.low&1)===0},de.equals=function(e){return rt(e)||(e=hn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},de.eq=de.equals,de.notEquals=function(e){return!this.eq(e)},de.neq=de.notEquals,de.ne=de.notEquals,de.lessThan=function(e){return this.comp(e)<0},de.lt=de.lessThan,de.lessThanOrEqual=function(e){return this.comp(e)<=0},de.lte=de.lessThanOrEqual,de.le=de.lessThanOrEqual,de.greaterThan=function(e){return this.comp(e)>0},de.gt=de.greaterThan,de.greaterThanOrEqual=function(e){return this.comp(e)>=0},de.gte=de.greaterThanOrEqual,de.ge=de.greaterThanOrEqual,de.compare=function(e){if(rt(e)||(e=hn(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},de.comp=de.compare,de.negate=function(){return!this.unsigned&&this.eq(bt)?bt:this.not().add(or)},de.neg=de.negate,de.add=function(e){rt(e)||(e=hn(e));var t=this.high>>>16,r=this.high&65535,o=this.low>>>16,f=this.low&65535,p=e.high>>>16,E=e.high&65535,x=e.low>>>16,$=e.low&65535,me=0,Te=0,ne=0,Ne=0;return Ne+=f+$,ne+=Ne>>>16,Ne&=65535,ne+=o+x,Te+=ne>>>16,ne&=65535,Te+=r+E,me+=Te>>>16,Te&=65535,me+=t+p,me&=65535,We(ne<<16|Ne,me<<16|Te,this.unsigned)},de.subtract=function(e){return rt(e)||(e=hn(e)),this.add(e.neg())},de.sub=de.subtract,de.multiply=function(e){if(this.isZero())return this;if(rt(e)||(e=hn(e)),pt){var t=pt.mul(this.low,this.high,e.low,e.high);return We(t,pt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Cn:mn;if(this.eq(bt))return e.isOdd()?bt:mn;if(e.eq(bt))return this.isOdd()?bt:mn;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(hs)&&e.lt(hs))return sn(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,f=this.low>>>16,p=this.low&65535,E=e.high>>>16,x=e.high&65535,$=e.low>>>16,me=e.low&65535,Te=0,ne=0,Ne=0,Be=0;return Be+=p*me,Ne+=Be>>>16,Be&=65535,Ne+=f*me,ne+=Ne>>>16,Ne&=65535,Ne+=p*$,ne+=Ne>>>16,Ne&=65535,ne+=o*me,Te+=ne>>>16,ne&=65535,ne+=f*$,Te+=ne>>>16,ne&=65535,ne+=p*x,Te+=ne>>>16,ne&=65535,Te+=r*me+o*$+f*x+p*E,Te&=65535,We(Ne<<16|Be,Te<<16|ne,this.unsigned)},de.mul=de.multiply,de.divide=function(e){if(rt(e)||(e=hn(e)),e.isZero())throw Error("division by zero");if(pt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?pt.div_u:pt.div_s)(this.low,this.high,e.low,e.high);return We(t,pt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Cn:mn;var r,o,f;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Cn;if(e.gt(this.shru(1)))return ms;f=Cn}else{if(this.eq(bt)){if(e.eq(or)||e.eq(Vr))return bt;if(e.eq(bt))return or;var p=this.shr(1);return r=p.div(e).shl(1),r.eq(mn)?e.isNegative()?or:Vr:(o=this.sub(e.mul(r)),f=r.add(o.div(e)),f)}else if(e.eq(bt))return this.unsigned?Cn:mn;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();f=mn}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var E=Math.ceil(Math.log(r)/Math.LN2),x=E<=48?1:$r(2,E-48),$=sn(r),me=$.mul(e);me.isNegative()||me.gt(o);)r-=x,$=sn(r,this.unsigned),me=$.mul(e);$.isZero()&&($=or),f=f.add($),o=o.sub(me)}return f},de.div=de.divide,de.modulo=function(e){if(rt(e)||(e=hn(e)),pt){var t=(this.unsigned?pt.rem_u:pt.rem_s)(this.low,this.high,e.low,e.high);return We(t,pt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},de.mod=de.modulo,de.rem=de.modulo,de.not=function(){return We(~this.low,~this.high,this.unsigned)},de.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},de.clz=de.countLeadingZeros,de.countTrailingZeros=function(){return this.low?fn(this.low):fn(this.high)+32},de.ctz=de.countTrailingZeros,de.and=function(e){return rt(e)||(e=hn(e)),We(this.low&e.low,this.high&e.high,this.unsigned)},de.or=function(e){return rt(e)||(e=hn(e)),We(this.low|e.low,this.high|e.high,this.unsigned)},de.xor=function(e){return rt(e)||(e=hn(e)),We(this.low^e.low,this.high^e.high,this.unsigned)},de.shiftLeft=function(e){return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?We(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):We(0,this.low<<e-32,this.unsigned)},de.shl=de.shiftLeft,de.shiftRight=function(e){return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?We(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):We(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},de.shr=de.shiftRight,de.shiftRightUnsigned=function(e){return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?We(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?We(this.high,0,this.unsigned):We(this.high>>>e-32,0,this.unsigned)},de.shru=de.shiftRightUnsigned,de.shr_u=de.shiftRightUnsigned,de.rotateLeft=function(e){var t;return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?We(this.high,this.low,this.unsigned):e<32?(t=32-e,We(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,We(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},de.rotl=de.rotateLeft,de.rotateRight=function(e){var t;return rt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?We(this.high,this.low,this.unsigned):e<32?(t=32-e,We(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,We(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},de.rotr=de.rotateRight,de.toSigned=function(){return this.unsigned?We(this.low,this.high,!1):this},de.toUnsigned=function(){return this.unsigned?this:We(this.low,this.high,!0)},de.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},de.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},de.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},je.fromBytes=function(e,t,r){return r?je.fromBytesLE(e,t):je.fromBytesBE(e,t)},je.fromBytesLE=function(e,t){return new je(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},je.fromBytesBE=function(e,t){return new je(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const Ot=je;var Re;(function(i){i.Ok="ok",i.ClientNotActive="client-not-active",i.Unimplemented="unimplemented",i.Unsupported="unsupported",i.DocumentNotAttached="document-not-attached",i.DocumentNotDetached="document-not-detached",i.DocumentRemoved="document-removed",i.InvalidObjectKey="invalid-object-key",i.InvalidArgument="invalid-argument"})(Re||(Re={}));class Me extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="YorkieError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function Sn(i){if(i instanceof Map){const e=Array.from(i);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(i))}const Ps=i=>i?Object.entries(i).length===0:!0,Bt=i=>{const e={};for(const[t,r]of Object.entries(i))e[t]=JSON.stringify(r);return e},Et=i=>{const e={};for(const[t,r]of Object.entries(i))e[t]=JSON.parse(r);return e};var gn;(function(i){i.Put="put",i.Clear="clear"})(gn||(gn={}));class Kr{constructor(e,t){this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:gn.Put,presence:Sn(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:gn.Clear})}}const _s="000000000000000000000000",on="FFFFFFFFFFFFFFFFFFFFFFFF";class ot{constructor(e,t,r){this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new ot(e,t,r)}static fromStruct(e){return ot.of(Ot.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return this.actorID?`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`:`${this.lamport.toString()}:nil:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return this.actorID?`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`:`${this.lamport.toString()}:nil:${this.delimiter}`}setActor(e){return new ot(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const qr=0,An=4294967295,kn=Ot.MAX_VALUE,Mt=new ot(Ot.fromNumber(0),qr,_s),$t=new ot(kn,An,on);function ht(i){return i.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Ft{constructor(e){this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Fn extends Ft{constructor(e){super(e)}}class Gt extends Ft{}class jt{constructor(e,t){this.strKey=e,this.value=t}static of(e,t){return new jt(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class xt{constructor(){this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new xt}set(e,t,r){let o;const f=this.nodeMapByKey.get(e);f!=null&&!f.isRemoved()&&f.remove(r)&&(o=f.getValue());const p=jt.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),p),(f==null||r.after(f.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,p),t.setMovedAt(r)),o}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||g.fatal(`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){g.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&!!r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class st extends Fn{constructor(e,t){super(e),this.memberNodes=t}static create(e,t){if(!t)return new st(e,xt.create());const r=xt.create();for(const[o,f]of Object.entries(t))r.set(o,f.deepcopy(),f.getCreatedAt());return new st(e,r)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,r){return this.memberNodes.set(e,t,r)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,r]of this)e.push(`"${ht(t)}":${r.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,r]of this){const{id:o,value:f,type:p}=r.toJSForTest();e[t]={key:t,id:o,value:f,type:p}}return{id:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[o]of this)t.push(o);const r=[];for(const o of t.sort()){const f=(e=this.memberNodes.get(o))===null||e===void 0?void 0:e.getValue();r.push(`"${ht(o)}":${f.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=st.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const r=t.getValue();if(e(r,this))return;r instanceof Fn&&r.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var ct;(function(i){i.Local="local",i.Remote="remote",i.UndoRedo="undoredo"})(ct||(ct={}));class mt{constructor(e,t){this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Ht{constructor(e){this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Rt{constructor(e){this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&g.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,r=e,o;for(;r;)(!o||o===r.getRight())&&(t+=r.getLength()+(r.hasLeft()?r.getLeftWeight():0)),o=r,r=r.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Rt(e.getLeft());t.root&&t.root.setParent();const r=new Rt(e.getRight());if(r.root&&r.root.setParent(),t.root){const o=t.getRightmost();t.splayNode(o),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Ee;(function(i){i[i.Null=0]="Null",i[i.Boolean=1]="Boolean",i[i.Integer=2]="Integer",i[i.Long=3]="Long",i[i.Double=4]="Double",i[i.String=5]="String",i[i.Bytes=6]="Bytes",i[i.Date=7]="Date"})(Ee||(Ee={}));class lt extends Ft{constructor(e,t){super(t),this.valueType=lt.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new lt(e,t)}static valueFromBytes(e,t){switch(e){case Ee.Null:return null;case Ee.Boolean:return!!t[0];case Ee.Integer:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case Ee.Double:{const r=new DataView(t.buffer);return t.forEach(function(o,f){r.setUint8(f,o)}),r.getFloat64(0,!0)}case Ee.String:return new TextDecoder("utf-8").decode(t);case Ee.Long:return Ot.fromBytesLE(Array.from(t));case Ee.Bytes:return t;case Ee.Date:return new Date(Ot.fromBytesLE(Array.from(t),!0).toNumber());default:throw new Me(Re.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===Ee.String?`"${ht(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=lt.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return Ee.Null;case"boolean":return Ee.Boolean;case"number":return this.isInteger(e)?Ee.Integer:Ee.Double;case"string":return Ee.String;case"object":if(e===null)return Ee.Null;if(e instanceof Ot)return Ee.Long;if(e instanceof Uint8Array)return Ee.Bytes;if(e instanceof Date)return Ee.Date}}static isSupport(e){return lt.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===Ee.Integer||e===Ee.Long||e===Ee.Double}getValue(){return this.value}toBytes(){switch(this.valueType){case Ee.Null:return new Uint8Array;case Ee.Boolean:return this.value?new Uint8Array([1]):new Uint8Array([0]);case Ee.Integer:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case Ee.Double:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case Ee.String:return new TextEncoder().encode(this.value);case Ee.Long:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case Ee.Bytes:return this.value;case Ee.Date:{const e=this.value,t=Ot.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new Me(Re.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class Yr extends Ht{constructor(e){super(e),this.value=e}static createAfter(e,t){const r=new Yr(t),o=e.next;return e.next=r,r.prev=e,r.next=o,o&&(o.prev=r),r}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Ir{constructor(){const e=lt.of(0,Mt);e.setRemovedAt(Mt),this.dummyHead=new Yr(e),this.last=this.dummyHead,this.nodeMapByIndex=new Rt,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Ir}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());for(r||g.fatal(`cant find the given node: ${e.toIDString()}`);r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const o=this.findNextBeforeExecutedAt(e,r),f=Yr.createAfter(o,t);o===this.last&&(this.last=f),this.nodeMapByIndex.insertAfter(o,f),this.nodeMapByCreatedAt.set(f.getCreatedAt().toIDString(),f)}moveAfter(e,t,r){const o=this.nodeMapByCreatedAt.get(e.toIDString());o||g.fatal(`cant find the given node: ${e.toIDString()}`);const f=this.nodeMapByCreatedAt.get(t.toIDString());f||g.fatal(`cant find the given node: ${t.toIDString()}`),o!==f&&(!f.getValue().getMovedAt()||r.after(f.getValue().getMovedAt()))&&(this.release(f),this.insertAfter(o.getCreatedAt(),f.getValue(),r),f.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||g.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let o=t;if(e===0&&t===this.dummyHead||r>0)do o&&(o=o.getNext());while(o&&o.isRemoved());return o}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),o=r.isRemoved();return r.remove(t)&&!o&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(!!r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class Xt extends Fn{constructor(e,t){super(e),this.elements=t}static create(e,t){if(!t)return new Xt(e,Ir.create());const r=Ir.create();for(const o of t)r.insertAfter(r.getLastCreatedAt(),o.deepcopy());return new Xt(e,r)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,r){this.elements.moveAfter(e,t,r)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const r=t.getValue();if(e(r,this))return;r instanceof Fn&&r.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{id:r,value:o,type:f}=this.get(t).toJSForTest();e[t]={key:String(t),id:r,value:o,type:f}}return{id:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=Xt.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class Jn extends mt{constructor(e,t,r){super(e,r),this.createdAt=t}static create(e,t,r){return new Jn(e,t,r)}execute(e,t){var r;const o=e.findByCreatedAt(this.getParentCreatedAt());if(o||g.fatal(`fail to find ${this.getParentCreatedAt()}`),o instanceof Fn||g.fatal(`only object and array can execute remove: ${o}`),t===ct.UndoRedo){let $=o.getByID(this.createdAt);for(;$;){if($.getRemovedAt())return;$=(r=e.findElementPairByCreatedAt($.getCreatedAt()))===null||r===void 0?void 0:r.parent}}const f=o.subPathOf(this.createdAt),p=this.toReverseOperation(o),E=o.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(E),{opInfos:o instanceof Xt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(f)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:f}],reverseOp:p}}toReverseOperation(e){if(e instanceof st){const t=e.subPathOf(this.createdAt);if(t!==void 0){const r=e.get(t);if(r!==void 0)return Gn.create(t,r.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Gn extends mt{constructor(e,t,r,o){super(r,o),this.key=e,this.value=t}static create(e,t,r,o){return new Gn(e,t,r,o)}execute(e,t){var r;const o=e.findByCreatedAt(this.getParentCreatedAt());if(o||g.fatal(`fail to find ${this.getParentCreatedAt()}`),o instanceof st||g.fatal("fail to execute, only object can execute set"),t===ct.UndoRedo){let $=o;for(;$;){if($.getRemovedAt())return;$=(r=e.findElementPairByCreatedAt($.getCreatedAt()))===null||r===void 0?void 0:r.parent}}const f=o.get(this.key),p=this.toReverseOperation(f),E=this.value.deepcopy(),x=o.set(this.key,E,this.getExecutedAt());return t===ct.UndoRedo&&e.findByCreatedAt(E.getCreatedAt())&&e.deregisterElement(E),e.registerElement(E,o),x&&e.registerRemovedElement(x),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:p}}toReverseOperation(e){let t=Jn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=Gn.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class Sr extends mt{constructor(e,t,r,o){super(e,o),this.prevCreatedAt=t,this.value=r}static create(e,t,r,o){return new Sr(e,t,r,o)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Xt||g.fatal("fail to execute, only array can execute add");const r=t,o=this.value.deepcopy();return r.insertAfter(this.prevCreatedAt,o),e.registerElement(o,r),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(r.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Un extends mt{constructor(e,t,r,o){super(e,o),this.prevCreatedAt=t,this.createdAt=r}static create(e,t,r,o){return new Un(e,t,r,o)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Xt||g.fatal("fail to execute, only array can execute move");const r=t,o=Number(r.subPathOf(this.createdAt));r.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const f=Number(r.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:f,previousIndex:o}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Wr{constructor(e,t,r){this.key=e,this.value=t,this.updatedAt=r}static of(e,t,r){return new Wr(e,t,r)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}}class pn{constructor(){this.nodeMapByKey=new Map}static create(){return new pn}set(e,t,r){const o=this.nodeMapByKey.get(e);if(o===void 0||r.after(o.getUpdatedAt())){const f=Wr.of(e,t,r);this.nodeMapByKey.set(e,f)}}has(e){return this.nodeMapByKey.has(e)}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new pn;for(const[,t]of this.nodeMapByKey)e.set(t.getKey(),t.getValue(),t.getUpdatedAt());return e}toJSON(){const e=[];for(const[t,r]of this.nodeMapByKey)e.push(`"${ht(t)}":"${ht(r.getValue())}"`);return`{${e.join(",")}}`}toXML(){return this.size()?` ${[...this.nodeMapByKey].map(([e,t])=>`${e}="${JSON.parse(t.getValue())}"`).join(" ")}`:""}size(){return this.nodeMapByKey.size}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)e[t]=r.getValue();return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}var Zt;(function(i){i.Content="content",i.Style="style"})(Zt||(Zt={}));class Qt{constructor(e){this.attributes=pn.create(),this.content=e}static create(e){return new Qt(e)}get length(){return this.content.length}substring(e,t){const r=new Qt(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=ht(this.content),t=this.attributes.toObject(),r=[];for(const[o,f]of Object.entries(t)){const p=JSON.parse(f),E=typeof p=="string"?`"${ht(o)}":"${ht(p)}"`:`"${ht(o)}":${String(p)}`;r.push(E)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}}class Nt extends Gt{constructor(e,t){super(t),this.rgaTreeSplit=e}static create(e,t){return new Nt(e,t)}edit(e,t,r,o,f){const p=t?Qt.create(t):void 0;if(p&&o)for(const[Te,ne]of Object.entries(o))p.setAttr(Te,ne,r);const[E,x,$]=this.rgaTreeSplit.edit(e,r,p,f),me=$.map(Te=>({...Te,value:Te.value?{attributes:Et(Te.value.getAttributes()),content:Te.value.getContent()}:{attributes:void 0,content:""},type:Zt.Content}));return[x,me,[E,E]]}setStyle(e,t,r,o){const[,f]=this.rgaTreeSplit.findNodeWithSplit(e[1],r),[,p]=this.rgaTreeSplit.findNodeWithSplit(e[0],r),E=[],x=this.rgaTreeSplit.findBetween(p,f),$=new Map,me=[];for(const Te of x){const ne=Te.getCreatedAt().getActorID(),Ne=o!=null&&o.size?o.has(ne)?o.get(ne):Mt:$t;if(Te.canStyle(r,Ne)){const Be=$.get(ne),Fe=Te.getCreatedAt();(!Be||Fe.after(Be))&&$.set(ne,Fe),me.push(Te)}}for(const Te of me){if(Te.isRemoved())continue;const[ne,Ne]=this.rgaTreeSplit.findIndexesFromRange(Te.createPosRange());E.push({type:Zt.Style,actor:r.getActorID(),from:ne,to:Ne,value:{attributes:Et(t)}});for(const[Be,Fe]of Object.entries(t))Te.getValue().setAttr(Be,Fe,r)}return[$,E]}indexRangeToPosRange(e,t){const r=this.rgaTreeSplit.indexToPos(e);return e===t?[r,r]:[r,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const r=t.getValue();e.push({attributes:Et(r.getAttributes()),content:r.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}getRemovedNodesLen(){return this.rgaTreeSplit.getRemovedNodesLen()}purgeRemovedNodesBefore(e){return this.rgaTreeSplit.purgeRemovedNodesBefore(e)}deepcopy(){const e=new Nt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}}class $n extends mt{constructor(e,t,r,o,f,p,E){super(e,E),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=o,this.content=f,this.attributes=p}static create(e,t,r,o,f,p,E){return new $n(e,t,r,o,f,p,E)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Nt||g.fatal("fail to execute, only Text can execute edit");const r=t,[,o]=r.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(r),{opInfos:o.map(({from:f,to:p,value:E})=>({type:"edit",from:f,to:p,value:E,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.content;return`${e}.EDIT(${t},${r},${o})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Vt extends mt{constructor(e,t,r,o,f,p){super(e,p),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=o,this.attributes=f}static create(e,t,r,o,f,p){return new Vt(e,t,r,o,f,p)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Nt||g.fatal("fail to execute, only Text can execute edit");const r=t,[,o]=r.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);return{opInfos:o.map(({from:f,to:p,value:E})=>({type:"style",from:f,to:p,value:E,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),o=this.attributes;return`${e}.STYL(${t},${r},${JSON.stringify(o)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const an=2,un="root",Pt="text";function en(i,e){let t=0;const r=i.children;for(let o=0;o<e;o++){const f=r[o];!f||f.isRemoved||(t+=f.paddedSize)}return t}class ar{constructor(e,t=[]){if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e;)e.size+=this.paddedSize*t,e=e.parent}get isText(){return this.type===Pt}get paddedSize(){return this.size+(this.isText?0:an)}isAncestorOf(e){return ur(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),o=this.value.slice(e);if(!o.length)return;this.value=r;const f=this.cloneText(e+t);return f.value=o,this.parent.insertAfterInternal(f,this),f}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.some(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this,t.isRemoved||t.updateAncestorsSize()}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const o=this.children.slice(0,e),f=this.children.slice(e);this._children=o,r._children=f,this.size=this._children.reduce((p,E)=>p+E.paddedSize,0),r.size=r._children.reduce((p,E)=>p+E.paddedSize,0);for(const p of r._children)p.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(o=>!o.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function ur(i,e){if(i===e)return!1;for(;e.parent;){if(e.parent===i)return!0;e=e.parent}return!1}var ze;(function(i){i.Start="Start",i.End="End",i.Text="Text"})(ze||(ze={}));function yn(i,e,t,r){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>i.size)throw new Error(`from is out of range: ${e} > ${i.size}`);if(t>i.size)throw new Error(`to is out of range: ${t} > ${i.size}`);if(e===t)return;let o=0;for(const f of i.children){if(e-f.paddedSize<o&&o<t){const p=f.isText?e-o:e-o-1,E=f.isText?t-o:t-o-1,x=!f.isText&&p<0,$=!f.isText&&E>f.size;(f.isText||x)&&r([f,f.isText?ze.Text:ze.Start],$),yn(f,Math.max(0,p),Math.min(E,f.size),r),$&&r([f,ze.End],$)}o+=f.paddedSize}}function _t(i,e,t=0){for(const r of i.children)_t(r,e,t+1);e(i,t)}function Tn(i,e,t=0){for(const r of i._children)Tn(r,e,t+1);e(i,t)}function cn(i,e,t=!0){if(e>i.size)throw new Error(`index is out of range: ${e} > ${i.size}`);if(i.isText)return{node:i,offset:e};let r=0,o=0;for(const f of i.children){if(t&&f.isText&&f.size>=e-o)return cn(f,e-o,t);if(e===o)return{node:i,offset:r};if(!t&&f.paddedSize===e-o)return{node:i,offset:r+1};if(f.paddedSize>e-o)return cn(f,e-o-1,t);o+=f.paddedSize,r+=1}return{node:i,offset:r}}function vn(i){return i.isText||i.children.length===0?i:vn(i.children[0])}function c(i,e){if(i.size<e)throw new Error("unacceptable path");for(let t=0;t<i.children.length;t++){const r=i.children[t];if(r.size<e)e-=r.size;else{i=r;break}}return{node:i,offset:e}}class s{constructor(e){this.root=e}tokensBetween(e,t,r){yn(this.root,e,t,r)}traverse(e){_t(this.root,e,0)}traverseAll(e){Tn(this.root,e,0)}findTreePos(e,t=!0){return cn(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const o=r.parent.findOffset(r);if(o===-1)throw new Error("invalid treePos");const f=en(r.parent,o);r=r.parent,t.push(f+e.offset)}else t.push(e.offset);for(;r.parent;){const o=r.parent.findOffset(r);if(o===-1)throw new Error("invalid treePos");t.push(o),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const o=e[r];if(t=t.children[o],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return c(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const o=t.nextSibling;return o||t.parent}return t}return t.children.length===r?t:vn(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let o=0,f=1;if(t.isText){o+=r;const p=t.parent,E=p.findOffset(t);if(E===-1)throw new Error("invalid pos");o+=en(p,E),t=t.parent}else o+=en(t,r);for(;t!=null&&t.parent;){const p=t.parent,E=p.findOffset(t);if(E===-1)throw new Error("invalid pos");o+=en(p,E),f++,t=t.parent}return o+f-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const u=(i,e)=>i===e?0:i<e?-1:1;class N{constructor(e,t,r){this.key=e,this.value=t,this.isRed=r}}class k{constructor(e){this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class M{constructor(e){this.comparator=typeof e<"u"?e:u,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new k(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let o=t.parent,f=t;for(;o&&f===o.left;)f=o,o=o.parent;return o}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new N(e,t,!0);const o=this.comparator(e,r.key);return o<0?r.left=this.putInternal(e,t,r.left):o>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}var F;(function(i){i.Content="content",i.Style="style"})(F||(F={}));class ee{constructor(e,t){this.parentID=e,this.leftSiblingID=t}static of(e,t){return new ee(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,o;return r.isText?(r.parent.children[0]===r&&t===0?o=r.parent:o=r,r=r.parent):t===0?o=r:o=r.children[t-1],ee.of(r.id,K.of(o.getCreatedAt(),o.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return ee.of(K.of(ot.fromStruct(e.parentID.createdAt),e.parentID.offset),K.of(ot.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodes(e){const t=this.getParentID(),r=this.getLeftSiblingID(),o=e.findFloorNode(t);let f=e.findFloorNode(r);if(!o||!f)throw new Error(`cannot find node at ${this}`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===f.id.getOffset()&&f.insPrevID&&(f=e.findFloorNode(f.insPrevID)),[o,f]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class K{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new K(e,t)}static fromStruct(e){return K.of(ot.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}class he extends ar{constructor(e,t,r,o,f){super(t),this._value="",this.id=e,this.removedAt=f,o&&(this.attrs=o),typeof r=="string"?this.value=r:Array.isArray(r)&&(this._children=r)}static create(e,t,r,o){return new he(e,t,r,o)}deepcopy(){var e;const t=new he(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)===null||e===void 0?void 0:e.deepcopy(),t._children=this._children.map(r=>{const o=r.deepcopy();return o.parent=t,o}),t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&(this.parent.removedAt?this.parent.size-=this.paddedSize:this.updateAncestorsSize())}cloneText(e){return new he(K.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new he(K.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,r){const o=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,r);if(o){if(o.insPrevID=this.id,this.insNextID){const f=e.findFloorNode(this.insNextID);f.insPrevID=o.id,o.insNextID=this.insNextID}this.insNextID=o.id,e.registerNode(o)}return o}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}}function ye(i){var e;if(i.isText){const t=i;return{type:t.type,value:t.value}}return{type:i.type,children:i.children.map(ye),attributes:i.attrs?Et((e=i.attrs)===null||e===void 0?void 0:e.toObject()):void 0}}function Oe(i){var e;return i.isText?i.value:`<${i.type}${((e=i.attrs)===null||e===void 0?void 0:e.toXML())||""}>${i.children.map(t=>Oe(t)).join("")}</${i.type}>`}function at(i){if(i.isText){const e=i;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:i.type,children:i.children.map(at),size:i.size,isRemoved:i.isRemoved}}class Ce extends Gt{constructor(e,t){super(t),this.indexTree=new s(e),this.nodeMapByID=new M(K.createComparator()),this.removedNodeMap=new Map,this.indexTree.traverse(r=>{this.nodeMapByID.put(r.id,r)})}static create(e,t){return new Ce(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[r,o]=e.toTreeNodes(this);let f=o;const p=r===f,E=f.parent&&!p?f.parent:r;f.isText&&f.split(this,e.getLeftSiblingID().getOffset()-f.id.getOffset());const x=E.allChildren,$=p?0:x.indexOf(f)+1;for(let me=$;me<x.length;me++){const Te=x[me];if(!Te.id.getCreatedAt().after(t))break;f=Te}return[E,f]}style(e,t,r){const[o,f]=this.findNodesAndSplitText(e[0],r),[p,E]=this.findNodesAndSplitText(e[1],r),x=[];return x.push({type:F.Style,from:this.toIndex(o,f),to:this.toIndex(p,E),fromPath:this.toPath(o,f),toPath:this.toPath(p,E),actor:r.getActorID(),value:t?Et(t):void 0}),this.traverseInPosRange(o,f,p,E,([$])=>{if(!$.isRemoved&&!$.isText&&t){$.attrs||($.attrs=new pn);for(const[me,Te]of Object.entries(t))$.attrs.set(me,Te,r)}}),x}edit(e,t,r,o,f,p){const[E,x]=this.findNodesAndSplitText(e[0],o),[$,me]=this.findNodesAndSplitText(e[1],o),Te=this.toIndex(E,x),ne=this.toPath(E,x),Ne=[],Be=[],Fe=[],Qe=new Map;this.traverseInPosRange(E,x,$,me,([Ve,wt],yt)=>{if(wt===ze.Start&&!yt)for(const es of Ve.children)Fe.push(es);const At=Ve.getCreatedAt().getActorID(),Pr=p?p.has(At)?p.get(At):Mt:$t;if(Ve.canDelete(o,Pr)||Ne.includes(Ve.parent)){const es=Qe.get(At),vs=Ve.getCreatedAt();(!es||vs.after(es))&&Qe.set(At,vs),(wt===ze.Text||wt===ze.Start)&&Ne.push(Ve),Be.push([Ve,wt])}});const Jt=this.makeDeletionChanges(Be,o);for(const Ve of Ne)Ve.remove(o),Ve.isRemoved&&this.removedNodeMap.set(Ve.id.toIDString(),Ve);for(const Ve of Fe)Ve.removedAt||E.append(Ve);if(r>0){let Ve=0,wt=E,yt=x;for(;Ve<r;)wt.split(this,wt.findOffset(yt)+1,f),yt=wt,wt=wt.parent,Ve++;Jt.push({type:F.Content,from:Te,to:Te,fromPath:ne,toPath:ne,actor:o.getActorID()})}if(t!=null&&t.length){const Ve=[];let wt=x;for(const yt of t)wt===E?E.insertAt(yt,0):E.insertAfter(yt,wt),wt=yt,Tn(yt,At=>{E.isRemoved&&(At.remove(o),this.removedNodeMap.set(At.id.toIDString(),At)),this.nodeMapByID.put(At.id,At)}),yt.isRemoved||Ve.push(yt);if(Ve.length){const yt=Ve.map(At=>ye(At));Jt.length&&Jt[Jt.length-1].from===Te?Jt[Jt.length-1].value=yt:Jt.push({type:F.Content,from:Te,to:Te,fromPath:ne,toPath:ne,actor:o.getActorID(),value:yt})}}return[Jt,Qe]}editT(e,t,r,o,f){const p=this.findPos(e[0]),E=this.findPos(e[1]);this.edit([p,E],t,r,o,f)}move(e,t,r){throw new Error(`not implemented: ${e}, ${t}, ${r}`)}purgeRemovedNodesBefore(e){var t;const r=new Set;let o=0;for(const[,f]of this.removedNodeMap)f.removedAt&&e.compare(f.removedAt)>=0&&(r.add(f),o++);for(const f of r)(t=f.parent)===null||t===void 0||t.removeChild(f),this.nodeMapByID.remove(f.id),this.purge(f),this.removedNodeMap.delete(f.id.toIDString());return o}purge(e){const t=e.insPrevID,r=e.insNextID;if(t){const o=this.findFloorNode(t);o.insNextID=r}if(r){const o=this.findFloorNode(r);o.insPrevID=t}e.insPrevID=void 0,e.insNextID=void 0}findPos(e,t=!0){const r=this.indexTree.findTreePos(e,t);return ee.fromTreePos(r)}getRemovedNodesLen(){return this.removedNodeMap.size}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getIndexTree(){return this.indexTree}toXML(){return Oe(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}getRootTreeNode(){return ye(this.indexTree.getRoot())}toTestTreeNode(){return at(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new Ce(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.treePosToPath(r):[]}toIndex(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.indexOf(r):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,r]=e,o=this.findPos(t);return t===r?[o.toStruct(),o.toStruct()]:[o.toStruct(),this.findPos(r).toStruct()]}posRangeToPathRange(e,t){const[r,o]=this.findNodesAndSplitText(e[0],t),[f,p]=this.findNodesAndSplitText(e[1],t);return[this.toPath(r,o),this.toPath(f,p)]}posRangeToIndexRange(e,t){const[r,o]=this.findNodesAndSplitText(e[0],t),[f,p]=this.findNodesAndSplitText(e[1],t);return[this.toIndex(r,o),this.toIndex(f,p)]}traverseInPosRange(e,t,r,o,f){const p=this.toIndex(e,t),E=this.toIndex(r,o);return this.indexTree.tokensBetween(p,E,f)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let o;for(;e.isRemoved;)o=e,e=o.parent;const f=e.findOffset(o);return{node:e,offset:f}}if(e===t)return{node:e,offset:0};let r=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};r++}return{node:e,offset:r}}makeDeletionChanges(e,t){const r=[],o=[];let f=null,p=null;for(let E=0;E<e.length;E++){const x=e[E],$=e[E+1];f||(f=x),p=x;const me=this.findRightToken(x);(!me||!$||me[0]!==$[0]||me[1]!==$[1])&&(o.push([f,p]),f=null,p=null)}for(const E of o){const[x,$]=E,[me,Te]=this.findLeftToken(x),[ne,Ne]=$,Be=Te===ze.Start?me:me.parent,Fe=Ne===ze.Start?ne:ne.parent,Qe=this.toIndex(Be,me),Jt=this.toIndex(Fe,ne);Qe<Jt&&(r.length>0&&Qe===r[r.length-1].to?(r[r.length-1].to=Jt,r[r.length-1].toPath=this.toPath(Fe,ne)):r.push({type:F.Content,from:Qe,to:Jt,fromPath:this.toPath(Be,me),toPath:this.toPath(Fe,ne),actor:t.getActorID()}))}return r}findRightToken([e,t]){if(t===ze.Start){const E=e.allChildren;return E.length>0?[E[0],E[0].isText?ze.Text:ze.Start]:[e,ze.End]}const r=e.parent,o=r.allChildren,f=o.indexOf(e);if(r&&f===o.length-1)return[r,ze.End];const p=o[f+1];return[p,p.isText?ze.Text:ze.Start]}findLeftToken([e,t]){if(t===ze.End){const E=e.allChildren;if(E.length>0){const x=E[E.length-1];return[x,x.isText?ze.Text:ze.End]}return[e,ze.Start]}const r=e.parent,o=r.allChildren,f=o.indexOf(e);if(r&&f===0)return[r,ze.Start];const p=o[f-1];return[p,p.isText?ze.Text:ze.End]}}class Lt extends mt{constructor(e,t,r,o,f,p,E){super(e,E),this.fromPos=t,this.toPos=r,this.contents=o,this.splitLevel=f,this.maxCreatedAtMapByActor=p}static create(e,t,r,o,f,p,E){return new Lt(e,t,r,o,f,p,E)}execute(e){var t;const r=e.findByCreatedAt(this.getParentCreatedAt());r||g.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Ce||g.fatal("fail to execute, only Tree can execute edit");const o=this.getExecutedAt(),f=r,[p]=f.edit([this.fromPos,this.toPos],(t=this.contents)===null||t===void 0?void 0:t.map(E=>E.deepcopy()),this.splitLevel,o,(()=>{let E=o.getDelimiter();return this.contents!==void 0&&(E+=this.contents.length),()=>ot.of(o.getLamport(),++E,o.getActorID())})(),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(f),{opInfos:p.map(({from:E,to:x,value:$,splitLevel:me,fromPath:Te,toPath:ne})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:E,to:x,value:$,splitLevel:me,fromPath:Te,toPath:ne}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`,o=this.contents;return`${e}.EDIT(${t},${r},${o==null?void 0:o.join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class wn{constructor(e,t,r){this.clientSeq=e,this.lamport=t,this.actor=r}static of(e,t,r){return new wn(e,t,r)}next(){return new wn(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new wn(this.clientSeq,e,this.actor):new wn(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return ot.of(this.lamport,e,this.actor)}setActor(e){return new wn(this.clientSeq,this.lamport,e)}getClientSeq(){return this.clientSeq}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return this.actor?`${this.lamport.toString()}:${this.actor.substring(22,24)}:${this.clientSeq}`:`${this.lamport.toString()}:nil:${this.clientSeq}`}}const yi=new wn(0,Ot.fromInt(0,!0),_s);class Ar{constructor({id:e,operations:t,presenceChange:r,message:o}){this.id=e,this.operations=t||[],this.presenceChange=r,this.message=o}static create({id:e,operations:t,presenceChange:r,message:o}){return new Ar({id:e,operations:t,presenceChange:r,message:o})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const o=[],f=[];for(const p of this.operations){const E=p.execute(e,r);if(!E)continue;const{opInfos:x,reverseOp:$}=E;o.push(...x),$&&f.unshift($)}return this.presenceChange&&(this.presenceChange.type===gn.Put?t.set(this.id.getActorID(),Sn(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:o,reverseOps:f}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}}class Ds{constructor(e,t,r,o,f,p){this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=o,this.snapshot=f,this.minSyncedTicket=p}static create(e,t,r,o,f,p){return new Ds(e,t,r,o,f,p)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class zr{constructor(e,t){this.serverSeq=e,this.clientSeq=t}static of(e,t){return new zr(e,t)}increaseClientSeq(e){return e===0?this:new zr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return zr.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const gu=new zr(Ot.fromInt(0,!0),0);class jn{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new jn(e,t)}static fromStruct(e){return jn.of(ot.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new jn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const pu=jn.of(Mt,0);class xn{constructor(e,t){this.id=e,this.relativeOffset=t}static of(e,t){return new xn(e,t)}static fromStruct(e){const t=jn.fromStruct(e.id);return xn.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return jn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class cr extends Ht{constructor(e,t,r){super(t),this.id=e,this.removedAt=r}static create(e,t){return new cr(e,t)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new cr(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[xn.of(this.id,0),xn.of(this.id,this.getLength())]}deepcopy(){return new cr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}}class Gr{constructor(){this.head=cr.create(pu),this.treeByIndex=new Rt,this.treeByID=new M(cr.createComparator()),this.removedNodeMap=new Map,this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Gr}edit(e,t,r,o){const[f,p]=this.findNodeWithSplit(e[1],t),[E,x]=this.findNodeWithSplit(e[0],t),$=this.findBetween(x,p),[me,Te,ne]=this.deleteNodes($,t,o),Ne=p?p.getID():f.getID();let Be=xn.of(Ne,0);if(r){const Fe=this.posToIndex(E.createPosRange()[1],!0),Qe=this.insertAfter(E,cr.create(jn.of(t,0),r));me.length&&me[me.length-1].from===Fe?me[me.length-1].value=r:me.push({actor:t.getActorID(),from:Fe,to:Fe,value:r}),Be=xn.of(Qe.getID(),Qe.getContentLength())}for(const[Fe,Qe]of ne)this.removedNodeMap.set(Fe,Qe);return[Be,Te,me]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),o=t;return xn.of(o.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),o=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);o||g.fatal(`the node of the given id should be found: ${r.toTestString()}`);const f=this.treeByIndex.indexOf(o),p=o.isRemoved()?0:r.getOffset()-o.getID().getOffset();return f+p}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Gr;let t=this.head.getNext(),r=e.head,o;for(;t;){if(o=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const f=e.findNode(t.getInsPrevID());o.setInsPrev(f)}r=o,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let o=this.findFloorNodePreferToLeft(r);const f=r.getOffset()-o.getID().getOffset();for(this.splitNode(o,f);o.hasNext()&&o.getNext().getCreatedAt().after(t);)o=o.getNext();return[o,o.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||g.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let o=e;for(;o&&o!==t;)r.push(o),o=o.getNext();return r}splitNode(e,t){if(t>e.getContentLength()&&g.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const o=e.getInsNext();return o&&o.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r){if(!e.length)return[[],new Map,new Map];const[o,f]=this.filterNodes(e,t,r),p=new Map,E=new Map,x=this.makeChanges(f,t);for(const $ of o){const me=$.getCreatedAt().getActorID();(!p.has(me)||$.getID().getCreatedAt().after(p.get(me)))&&p.set(me,$.getID().getCreatedAt()),E.set($.getID().toIDString(),$),$.remove(t)}return this.deleteIndexNodes(f),[x,p,E]}filterNodes(e,t,r){const o=!!r,f=[],p=[],[E,x]=this.findEdgesOfCandidates(e);p.push(E);for(const $ of e){const me=$.getCreatedAt().getActorID(),Te=o?r.has(me)?r.get(me):Mt:$t;$.canDelete(t,Te)?f.push($):p.push($)}return p.push(x),[f,p]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let o,f;for(let p=0;p<e.length-1;p++){const E=e[p],x=e[p+1];E.getNext()!=x&&([o]=this.findIndexesFromRange(E.getNext().createPosRange()),x?[,f]=this.findIndexesFromRange(x.getPrev().createPosRange()):f=this.treeByIndex.length,o<f&&r.push({actor:t.getActorID(),from:o,to:f}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],o=e[t+1];r.getNext()!=o&&this.treeByIndex.deleteRange(r,o)}}getRemovedNodesLen(){return this.removedNodeMap.size}purgeRemovedNodesBefore(e){let t=0;for(const[,r]of this.removedNodeMap)r.getRemovedAt()&&e.compare(r.getRemovedAt())>=0&&(this.treeByIndex.delete(r),this.purge(r),this.treeByID.remove(r.getID()),this.removedNodeMap.delete(r.getID().toIDString()),t++);return t}purge(e){const t=e.getPrev(),r=e.getNext(),o=e.getInsPrev(),f=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),o&&o.setInsNext(f),f&&f.setInsPrev(o),e.setInsPrev(void 0),e.setInsNext(void 0)}}const po=i=>i<0?Math.ceil(i):Math.floor(i);var It;(function(i){i[i.IntegerCnt=0]="IntegerCnt",i[i.LongCnt=1]="LongCnt"})(It||(It={}));class bn extends Ft{constructor(e,t,r){switch(super(r),this.valueType=e,e){case It.IntegerCnt:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=Ot.fromNumber(t).toInt():this.value=po(t):this.value=t.toInt();break;case It.LongCnt:typeof t=="number"?this.value=Ot.fromNumber(t):this.value=t;break;default:throw new Me(Re.Unimplemented,`unimplemented type: ${e}`)}}static create(e,t,r){return new bn(e,t,r)}static valueFromBytes(e,t){switch(e){case It.IntegerCnt:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case It.LongCnt:return Ot.fromBytesLE(Array.from(t));default:throw new Me(Re.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=bn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ot?It.LongCnt:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?It.LongCnt:It.IntegerCnt;default:return}}static isSupport(e){return!!bn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===It.IntegerCnt||e===It.LongCnt}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case It.IntegerCnt:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case It.LongCnt:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new Me(Re.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(r){if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`)}return t(this),t(e),this.valueType===It.LongCnt?this.value=this.value.add(e.getValue()):e.getType()===Ee.Long?this.value=this.value+e.getValue().toInt():this.value=Ot.fromNumber(this.value+po(e.getValue())).toInt(),this}}class Hr extends mt{constructor(e,t,r){super(e,r),this.value=t}static create(e,t,r){return new Hr(e,t,r)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof bn||g.fatal("fail to execute, only Counter can execute increase");const r=t,o=this.value.deepcopy();return r.increase(o),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:o.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),r=e.getType()===Ee.Long?e.getValue().multiply(-1):e.getValue()*-1;return Hr.create(this.getParentCreatedAt(),lt.of(r,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Xr extends mt{constructor(e,t,r,o,f){super(e,f),this.fromPos=t,this.toPos=r,this.attributes=o}static create(e,t,r,o,f){return new Xr(e,t,r,o,f)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||g.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Ce||g.fatal("fail to execute, only Tree can execute edit");const r={};return[...this.attributes].forEach(([p,E])=>r[p]=E),{opInfos:t.style([this.fromPos,this.toPos],r,this.getExecutedAt()).map(({from:p,to:E,value:x,fromPath:$})=>({type:"tree-style",from:p,to:E,value:x,fromPath:$,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${r},${Object.entries(this.attributes||{}).map(([o,f])=>`${o}:"${f}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}function yu(i){const e=new se.Presence,t=e.data;for(const[r,o]of Object.entries(i))t[r]=JSON.stringify(o);return e}function Tu(i){if(i.type===gn.Put)return new se.PresenceChange({type:se.PresenceChange_ChangeType.PUT,presence:yu(i.presence)});if(i.type===gn.Clear)return new se.PresenceChange({type:se.PresenceChange_ChangeType.CLEAR});throw new Me(Re.Unimplemented,"unimplemented type")}function vu(i){return new se.Checkpoint({serverSeq:i.getServerSeqAsString(),clientSeq:i.getClientSeq()})}function wu(i){return new se.ChangeID({clientSeq:i.getClientSeq(),lamport:i.getLamportAsString(),actorId:Ii(i.getActorID())})}function Ie(i){if(!!i)return new se.TimeTicket({lamport:i.getLamportAsString(),delimiter:i.getDelimiter(),actorId:Ii(i.getActorID())})}function yo(i){switch(i){case Ee.Null:return se.ValueType.NULL;case Ee.Boolean:return se.ValueType.BOOLEAN;case Ee.Integer:return se.ValueType.INTEGER;case Ee.Long:return se.ValueType.LONG;case Ee.Double:return se.ValueType.DOUBLE;case Ee.String:return se.ValueType.STRING;case Ee.Bytes:return se.ValueType.BYTES;case Ee.Date:return se.ValueType.DATE;default:throw new Me(Re.Unsupported,`unsupported type: ${i}`)}}function To(i){switch(i){case It.IntegerCnt:return se.ValueType.INTEGER_CNT;case It.LongCnt:return se.ValueType.LONG_CNT;default:throw new Me(Re.Unsupported,`unsupported type: ${i}`)}}function Ti(i){if(i instanceof st)return new se.JSONElementSimple({type:se.ValueType.JSON_OBJECT,createdAt:Ie(i.getCreatedAt()),value:_o(i)});if(i instanceof Xt)return new se.JSONElementSimple({type:se.ValueType.JSON_ARRAY,createdAt:Ie(i.getCreatedAt()),value:Gu(i)});if(i instanceof Nt)return new se.JSONElementSimple({type:se.ValueType.TEXT,createdAt:Ie(i.getCreatedAt())});if(i instanceof lt)return new se.JSONElementSimple({type:yo(i.getType()),createdAt:Ie(i.getCreatedAt()),value:i.toBytes()});if(i instanceof bn)return new se.JSONElementSimple({type:To(i.getType()),createdAt:Ie(i.getCreatedAt()),value:i.toBytes()});if(i instanceof Ce)return new se.JSONElementSimple({type:se.ValueType.TREE,createdAt:Ie(i.getCreatedAt()),value:Xu(i)});throw new Me(Re.Unimplemented,"unimplemented element")}function bu(i){return new se.TextNodeID({createdAt:Ie(i.getCreatedAt()),offset:i.getOffset()})}function Cs(i){return new se.TextNodePos({createdAt:Ie(i.getID().getCreatedAt()),offset:i.getID().getOffset(),relativeOffset:i.getRelativeOffset()})}function xs(i){return new se.TreePos({parentId:gs(i.getParentID()),leftSiblingId:gs(i.getLeftSiblingID())})}function gs(i){return new se.TreeNodeID({createdAt:Ie(i.getCreatedAt()),offset:i.getOffset()})}function Eu(i){const e=new se.Operation;if(i instanceof Gn){const t=i,r=new se.Operation_Set;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.key=t.getKey(),r.value=Ti(t.getValue()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(i instanceof Sr){const t=i,r=new se.Operation_Add;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.prevCreatedAt=Ie(t.getPrevCreatedAt()),r.value=Ti(t.getValue()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(i instanceof Un){const t=i,r=new se.Operation_Move;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.prevCreatedAt=Ie(t.getPrevCreatedAt()),r.createdAt=Ie(t.getCreatedAt()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(i instanceof Jn){const t=i,r=new se.Operation_Remove;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.createdAt=Ie(t.getCreatedAt()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(i instanceof $n){const t=i,r=new se.Operation_Edit;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.from=Cs(t.getFromPos()),r.to=Cs(t.getToPos());const o=r.createdAtMapByActor;for(const[p,E]of t.getMaxCreatedAtMapByActor())o[p]=Ie(E);r.content=t.getContent();const f=r.attributes;for(const[p,E]of t.getAttributes())f[p]=E;r.executedAt=Ie(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(i instanceof Vt){const t=i,r=new se.Operation_Style;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.from=Cs(t.getFromPos()),r.to=Cs(t.getToPos());const o=r.createdAtMapByActor;for(const[p,E]of t.getMaxCreatedAtMapByActor())o[p]=Ie(E);const f=r.attributes;for(const[p,E]of t.getAttributes())f[p]=E;r.executedAt=Ie(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(i instanceof Hr){const t=i,r=new se.Operation_Increase;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.value=Ti(t.getValue()),r.executedAt=Ie(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(i instanceof Lt){const t=i,r=new se.Operation_TreeEdit,o=r.createdAtMapByActor;for(const[f,p]of t.getMaxCreatedAtMapByActor())o[f]=Ie(p);r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.from=xs(t.getFromPos()),r.to=xs(t.getToPos()),r.contents=Pu(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=Ie(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(i instanceof Xr){const t=i,r=new se.Operation_TreeStyle;r.parentCreatedAt=Ie(t.getParentCreatedAt()),r.from=xs(t.getFromPos()),r.to=xs(t.getToPos());const o=r.attributes;for(const[f,p]of t.getAttributes())o[f]=p;r.executedAt=Ie(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new Me(Re.Unimplemented,"unimplemented operation");return e}function Nu(i){const e=[];for(const t of i)e.push(Eu(t));return e}function Iu(i){const e=new se.Change({id:wu(i.getID()),message:i.getMessage()});return i.hasOperations()&&(e.operations=Nu(i.getOperations())),i.hasPresenceChange()&&(e.presenceChange=Tu(i.getPresenceChange())),e}function Su(i){const e=[];for(const t of i)e.push(Iu(t));return e}function Au(i){const e=[];for(const t of i)e.push(new se.RHTNode({key:t.getStrKey(),element:vi(t.getValue())}));return e}function ku(i){const e=[];for(const t of i)e.push(new se.RGANode({element:vi(t.getValue())}));return e}function Ou(i){const e=[];for(const t of i){const r=new se.TextNode;r.id=bu(t.getID()),r.value=t.getValue().getContent(),r.removedAt=Ie(t.getRemovedAt());const o=r.attributes,f=t.getValue().getAttrs();for(const p of f){const E=new se.NodeAttr;E.value=p.getValue(),E.updatedAt=Ie(p.getUpdatedAt()),o[p.getKey()]=E}e.push(r)}return e}function Pu(i){const e=[];if(!i||!i.length)return e;for(const t of i)e.push(new se.TreeNodes({content:vo(t)}));return e}function vo(i){if(!i)return[];const e=[];return _t(i,(t,r)=>{const o=new se.TreeNode({id:gs(t.id),type:t.type,removedAt:Ie(t.removedAt),depth:r});if(t.isText&&(o.value=t.value),t.insPrevID&&(o.insPrevId=gs(t.insPrevID)),t.insNextID&&(o.insNextId=gs(t.insNextID)),t.attrs)for(const f of t.attrs)o.attributes[f.getKey()]=new se.NodeAttr({value:f.getValue(),updatedAt:Ie(f.getUpdatedAt())});e.push(o)}),e}function _u(i){const e=new se.JSONElement;return e.body.case="jsonObject",e.body.value=new se.JSONElement_JSONObject({nodes:Au(i.getRHT()),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function wo(i){const e=new se.JSONElement;return e.body.case="jsonArray",e.body.value=new se.JSONElement_JSONArray({nodes:ku(i.getElements()),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function Du(i){const e=new se.JSONElement;return e.body.case="primitive",e.body.value=new se.JSONElement_Primitive({type:yo(i.getType()),value:i.toBytes(),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function Cu(i){const e=new se.JSONElement;return e.body.case="text",e.body.value=new se.JSONElement_Text({nodes:Ou(i.getRGATreeSplit()),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function xu(i){const e=new se.JSONElement;return e.body.case="counter",e.body.value=new se.JSONElement_Counter({type:To(i.getType()),value:i.toBytes(),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function bo(i){const e=new se.JSONElement;return e.body.case="tree",e.body.value=new se.JSONElement_Tree({nodes:vo(i.getRoot()),createdAt:Ie(i.getCreatedAt()),movedAt:Ie(i.getMovedAt()),removedAt:Ie(i.getRemovedAt())}),e}function vi(i){if(i instanceof st)return _u(i);if(i instanceof Xt)return wo(i);if(i instanceof lt)return Du(i);if(i instanceof Nt)return Cu(i);if(i instanceof bn)return xu(i);if(i instanceof Ce)return bo(i);throw new Me(Re.Unimplemented,"unimplemented element")}function Ru(i){return new se.ChangePack({documentKey:i.getDocumentKey(),checkpoint:vu(i.getCheckpoint()),isRemoved:i.getIsRemoved(),changes:Su(i.getChanges()),snapshot:i.getSnapshot(),minSyncedTicket:Ie(i.getMinSyncedTicket())})}function Lu(i){return wn.of(i.clientSeq,Ot.fromString(i.lamport,!0),Ni(i.actorId))}function Ae(i){if(!!i)return ot.of(Ot.fromString(i.lamport,!0),i.delimiter,Ni(i.actorId))}function wi(i){const e={};return Object.entries(i.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function Bu(i){const e=i.type;if(e===se.PresenceChange_ChangeType.PUT){const t=wi(i.presence);return{type:gn.Put,presence:t}}if(e===se.PresenceChange_ChangeType.CLEAR)return{type:gn.Clear};throw new Me(Re.Unsupported,`unsupported type: ${e}`)}function Mu(i){const e=new Map;return Object.entries(i).forEach(([t,r])=>{e.set(t,wi(r))}),e}function Eo(i){switch(i){case se.ValueType.NULL:return Ee.Null;case se.ValueType.BOOLEAN:return Ee.Boolean;case se.ValueType.INTEGER:return Ee.Integer;case se.ValueType.LONG:return Ee.Long;case se.ValueType.DOUBLE:return Ee.Double;case se.ValueType.STRING:return Ee.String;case se.ValueType.BYTES:return Ee.Bytes;case se.ValueType.DATE:return Ee.Date}throw new Me(Re.Unimplemented,`unimplemented value type: ${i}`)}function Rs(i){switch(i){case se.ValueType.INTEGER_CNT:return It.IntegerCnt;case se.ValueType.LONG_CNT:return It.LongCnt}throw new Me(Re.Unimplemented,`unimplemented value type: ${i}`)}function bi(i){switch(i.type){case se.ValueType.JSON_OBJECT:return i.value?Po(i.value):st.create(Ae(i.createdAt));case se.ValueType.JSON_ARRAY:return i.value?zu(i.value):Xt.create(Ae(i.createdAt));case se.ValueType.TEXT:return Nt.create(Gr.create(),Ae(i.createdAt));case se.ValueType.TREE:return Hu(i.value);case se.ValueType.NULL:case se.ValueType.BOOLEAN:case se.ValueType.INTEGER:case se.ValueType.LONG:case se.ValueType.DOUBLE:case se.ValueType.STRING:case se.ValueType.BYTES:case se.ValueType.DATE:return lt.of(lt.valueFromBytes(Eo(i.type),i.value),Ae(i.createdAt));case se.ValueType.INTEGER_CNT:case se.ValueType.LONG_CNT:return bn.create(Rs(i.type),bn.valueFromBytes(Rs(i.type),i.value),Ae(i.createdAt))}}function Ls(i){return xn.of(jn.of(Ae(i.createdAt),i.offset),i.relativeOffset)}function No(i){return jn.of(Ae(i.createdAt),i.offset)}function Fu(i){const e=Qt.create(i.value);Object.entries(i.attributes).forEach(([r,o])=>{e.setAttr(r,o.value,Ae(o.updatedAt))});const t=cr.create(No(i.id),e);return t.remove(Ae(i.removedAt)),t}function Bs(i){return ee.of(ps(i.parentId),ps(i.leftSiblingId))}function ps(i){return K.of(Ae(i.createdAt),i.offset)}function Ju(i){if(!i.length)return;const e=[];return i.forEach(t=>{const r=Io(t.content);e.push(r)}),e}function Io(i){if(i.length===0)return;const e=[];for(const r of i)e.push(Uu(r));const t=e[e.length-1];for(let r=e.length-2;r>=0;r--){let o;for(let f=r+1;f<e.length;f++)if(i[r].depth-1===i[f].depth){o=e[f];break}o.prepend(e[r])}return Ce.create(t,Mt).getRoot()}function Uu(i){const e=ps(i.id),t=he.create(e,i.type);if(t.isText)t.value=i.value;else{const r=pn.create();Object.entries(i.attributes).forEach(([o,f])=>{r.set(o,f.value,Ae(f.updatedAt))}),t.attrs=r}return i.insPrevId&&(t.insPrevID=ps(i.insPrevId)),i.insPrevId&&(t.insNextID=ps(i.insNextId)),t.removedAt=Ae(i.removedAt),t}function $u(i){const e=[];for(const t of i){let r;if(t.body.case==="set"){const o=t.body.value;r=Gn.create(o.key,bi(o.value),Ae(o.parentCreatedAt),Ae(o.executedAt))}else if(t.body.case==="add"){const o=t.body.value;r=Sr.create(Ae(o.parentCreatedAt),Ae(o.prevCreatedAt),bi(o.value),Ae(o.executedAt))}else if(t.body.case==="move"){const o=t.body.value;r=Un.create(Ae(o.parentCreatedAt),Ae(o.prevCreatedAt),Ae(o.createdAt),Ae(o.executedAt))}else if(t.body.case==="remove"){const o=t.body.value;r=Jn.create(Ae(o.parentCreatedAt),Ae(o.createdAt),Ae(o.executedAt))}else if(t.body.case==="edit"){const o=t.body.value,f=new Map;Object.entries(o.createdAtMapByActor).forEach(([E,x])=>{f.set(E,Ae(x))});const p=new Map;Object.entries(o.attributes).forEach(([E,x])=>{p.set(E,x)}),r=$n.create(Ae(o.parentCreatedAt),Ls(o.from),Ls(o.to),f,o.content,p,Ae(o.executedAt))}else if(t.body.case==="style"){const o=t.body.value,f=new Map;Object.entries(o.createdAtMapByActor).forEach(([E,x])=>{f.set(E,Ae(x))});const p=new Map;Object.entries(o.attributes).forEach(([E,x])=>{p.set(E,x)}),r=Vt.create(Ae(o.parentCreatedAt),Ls(o.from),Ls(o.to),f,p,Ae(o.executedAt))}else{if(t.body.case==="select")continue;if(t.body.case==="increase"){const o=t.body.value;r=Hr.create(Ae(o.parentCreatedAt),bi(o.value),Ae(o.executedAt))}else if(t.body.case==="treeEdit"){const o=t.body.value,f=new Map;Object.entries(o.createdAtMapByActor).forEach(([p,E])=>{f.set(p,Ae(E))}),r=Lt.create(Ae(o.parentCreatedAt),Bs(o.from),Bs(o.to),Ju(o.contents),o.splitLevel,f,Ae(o.executedAt))}else if(t.body.case==="treeStyle"){const o=t.body.value,f=new Map;Object.entries(o.attributes).forEach(([p,E])=>{f.set(p,E)}),r=Xr.create(Ae(o.parentCreatedAt),Bs(o.from),Bs(o.to),f,Ae(o.executedAt))}else throw new Me(Re.Unimplemented,"unimplemented operation")}e.push(r)}return e}function So(i){const e=[];for(const t of i)e.push(Ar.create({id:Lu(t.id),operations:$u(t.operations),presenceChange:t.presenceChange?Bu(t.presenceChange):void 0,message:t.message}));return e}function ju(i){return zr.of(Ot.fromString(i.serverSeq,!0),i.clientSeq)}function Vu(i){return Ds.create(i.documentKey,ju(i.checkpoint),i.isRemoved,So(i.changes),i.snapshot,Ae(i.minSyncedTicket))}function Ao(i){const e=new xt;for(const r of i.nodes){const o=Ei(r.element);e.set(r.key,o,o.getPositionedAt())}const t=new st(Ae(i.createdAt),e);return t.setMovedAt(Ae(i.movedAt)),t.setRemovedAt(Ae(i.removedAt)),t}function ko(i){const e=new Ir;for(const r of i.nodes)e.insert(Ei(r.element));const t=new Xt(Ae(i.createdAt),e);return t.setMovedAt(Ae(i.movedAt)),t.setRemovedAt(Ae(i.removedAt)),t}function Ku(i){const e=lt.of(lt.valueFromBytes(Eo(i.type),i.value),Ae(i.createdAt));return e.setMovedAt(Ae(i.movedAt)),e.setRemovedAt(Ae(i.removedAt)),e}function qu(i){const e=new Gr;let t=e.getHead();for(const o of i.nodes){const f=e.insertAfter(t,Fu(o));o.insPrevId&&f.setInsPrev(e.findNode(No(o.insPrevId))),t=f}const r=new Nt(e,Ae(i.createdAt));return r.setMovedAt(Ae(i.movedAt)),r.setRemovedAt(Ae(i.removedAt)),r}function Yu(i){const e=bn.create(Rs(i.type),bn.valueFromBytes(Rs(i.type),i.value),Ae(i.createdAt));return e.setMovedAt(Ae(i.movedAt)),e.setRemovedAt(Ae(i.removedAt)),e}function Oo(i){const e=Io(i.nodes);return Ce.create(e,Ae(i.createdAt))}function Ei(i){if(i.body.case==="jsonObject")return Ao(i.body.value);if(i.body.case==="jsonArray")return ko(i.body.value);if(i.body.case==="primitive")return Ku(i.body.value);if(i.body.case==="text")return qu(i.body.value);if(i.body.case==="counter")return Yu(i.body.value);if(i.body.case==="tree")return Oo(i.body.value);throw new Me(Re.Unimplemented,"unimplemented element")}function Wu(i){if(!i)return{root:st.create(Mt),presences:new Map};const e=se.Snapshot.fromBinary(i);return{root:Ei(e.root),presences:Mu(e.presences)}}function Po(i){if(!i)throw new Error("bytes is empty");const e=se.JSONElement.fromBinary(i);return Ao(e.body.value)}function _o(i){return vi(i).toBinary()}function zu(i){if(!i)throw new Error("bytes is empty");const e=se.JSONElement.fromBinary(i);return ko(e.body.value)}function Gu(i){return wo(i).toBinary()}function Hu(i){if(!i)throw new Error("bytes is empty");const e=se.JSONElement.fromBinary(i);return Oo(e.body.value)}function Xu(i){return bo(i).toBinary()}function Zu(i){return i?Array.from(i).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Ni(i){return Zu(i)}function Qu(i){return new Uint8Array(i.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Ii(i){return Qu(i)}const Vn={fromPresence:wi,toChangePack:Ru,fromChangePack:Vu,fromChanges:So,objectToBytes:_o,bytesToObject:Po,bytesToSnapshot:Wu,toHexString:Ni,toUint8Array:Ii};class ec{constructor(e,t,r,o){this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.isRealtimeSync=o,this.syncMode=Hn.PushPull,this.remoteChangeEventReceived=!1}changeRealtimeSync(e){return this.isRealtimeSync===e?!1:e?(this.isRealtimeSync=!0,!0):(this.cancelWatchStream(),this.isRealtimeSync=!1,!0)}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.isRealtimeSync&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}class Zr{constructor(e,t,r,o){this.id=e,this.delimiter=qr,this.root=t,this.operations=[],this.previousPresence=Sn(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=o}static create(e,t,r,o){return new Zr(e,t,r,o)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerElementHasRemovedNodes(e){this.root.registerElementHasRemovedNodes(e)}getChange(){return Ar.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class ys{constructor(e){this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.removedElementSetByCreatedAt=new Set,this.elementHasRemovedNodesSetByCreatedAt=new Set,this.opsForTest=[],this.registerElement(e,void 0)}static create(){return new ys(st.create(Mt))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const o=t.element.getCreatedAt(),f=t.parent.subPathOf(o);f===void 0&&g.fatal(`cant find the given element: ${o.toIDString()}`),r.unshift(f),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof Fn&&e.getDescendants((r,o)=>(this.registerElement(r,o),!1))}deregisterElement(e){let t=0;const r=o=>{const f=o.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(f),this.removedElementSetByCreatedAt.delete(f),t++};return r(e),e instanceof Fn&&e.getDescendants(o=>(r(o),!1)),t}registerRemovedElement(e){this.removedElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerElementHasRemovedNodes(e){this.elementHasRemovedNodesSetByCreatedAt.add(e.getCreatedAt().toIDString())}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getRemovedElementSetSize(){return this.removedElementSetByCreatedAt.size}getObject(){return this.rootObject}getGarbageLen(){let e=0;const t=new Set;for(const r of this.removedElementSetByCreatedAt){t.add(r);const o=this.elementPairMapByCreatedAt.get(r);o.element instanceof Fn&&o.element.getDescendants(f=>(t.add(f.getCreatedAt().toIDString()),!1))}e+=t.size;for(const r of this.elementHasRemovedNodesSetByCreatedAt){const f=this.elementPairMapByCreatedAt.get(r).element;e+=f.getRemovedNodesLen()}return e}deepcopy(){return new ys(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.removedElementSetByCreatedAt){const o=this.elementPairMapByCreatedAt.get(r);o.element.getRemovedAt()&&e.compare(o.element.getRemovedAt())>=0&&(o.parent.purge(o.element),t+=this.deregisterElement(o.element))}for(const r of this.elementHasRemovedNodesSetByCreatedAt){const f=this.elementPairMapByCreatedAt.get(r).element,p=f.purgeRemovedNodesBefore(e);p>0&&this.elementHasRemovedNodesSetByCreatedAt.delete(f.getCreatedAt().toIDString()),t+=p}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function Do(i,e){const t=new Ts(i);return new Proxy(e,t.getHandlers())}class Ts{constructor(e){this.context=e,this.handlers={set:(t,r,o)=>(g.isEnabled(w.Trivial)&&g.trivial(`obj[${r}]=${JSON.stringify(o)}`),Ts.setInternal(e,t,r,o),!0),get:(t,r)=>(g.isEnabled(w.Trivial)&&g.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():kr(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(g.isEnabled(w.Trivial)&&g.trivial(`obj[${r}]`),Ts.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,o){if(r.includes("."))throw new Me(Re.InvalidObjectKey,"key must not contain the '.'.");const f=e.issueTimeTicket(),p=Us(e,o,f),E=t.set(r,p,f);e.registerElement(p,t),E&&e.registerRemovedElement(E),e.push(Gn.create(r,p.deepcopy(),t.getCreatedAt(),f))}static buildObjectMembers(e,t){const r={};for(const[o,f]of Object.entries(t)){if(o.includes("."))throw new Me(Re.InvalidObjectKey,"key must not contain the '.'.");const p=e.issueTimeTicket(),E=Us(e,f,p);r[o]=E}return r}static deleteInternal(e,t,r){const o=e.issueTimeTicket(),f=t.deleteByKey(r,o);!f||(e.push(Jn.create(t.getCreatedAt(),f.getCreatedAt(),o)),e.registerRemovedElement(f))}getHandlers(){return this.handlers}}function tc(i,e){const t=new vt(i,e);return new Proxy(e,t.getHandlers())}function nc(i){return typeof i=="string"||i instanceof String?!isNaN(i):!1}function rc(i){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(i)}class vt{constructor(e,t){this.context=e,this.array=t,this.handlers={get:(r,o,f)=>o==="getID"?()=>r.getCreatedAt():o==="getElementByID"?p=>{const E=r.getByID(p);if(!(!E||E.isRemoved()))return lr(e,E)}:o==="getElementByIndex"?p=>{const E=r.get(p);return lr(e,E)}:o==="getLast"?()=>lr(e,r.getLast()):o==="deleteByID"?p=>{const E=vt.deleteInternalByID(e,r,p);return lr(e,E)}:o==="insertAfter"?(p,E)=>{const x=vt.insertAfterInternal(e,r,p,E);return lr(e,x)}:o==="insertBefore"?(p,E)=>{const x=vt.insertBeforeInternal(e,r,p,E);return lr(e,x)}:o==="moveBefore"?(p,E)=>{vt.moveBeforeInternal(e,r,p,E)}:o==="moveAfter"?(p,E)=>{vt.moveAfterInternal(e,r,p,E)}:o==="moveFront"?p=>{vt.moveFrontInternal(e,r,p)}:o==="moveLast"?p=>{vt.moveLastInternal(e,r,p)}:nc(o)?kr(e,r.get(Number(o))):o==="push"?p=>vt.pushInternal(e,r,p):o==="splice"?(p,E,...x)=>vt.splice(e,r,p,E,...x):o==="length"?r.length:typeof o=="symbol"&&o===Symbol.iterator?vt.iteratorInternal.bind(this,e,r):o==="includes"?(p,E)=>vt.includes(e,r,p,E):o==="indexOf"?(p,E)=>vt.indexOf(e,r,p,E):o==="lastIndexOf"?(p,E)=>vt.lastIndexOf(e,r,p,E):o==="toTestString"?()=>vt.toTestString(r):typeof o=="string"&&rc(o)?(...p)=>{const E=Array.from(r).map(x=>kr(e,x));return Array.prototype[o].apply(E,p)}:Reflect.get(r,o,f),deleteProperty:(r,o)=>(g.isEnabled(w.Trivial)&&g.trivial(`array[${o}]`),vt.deleteInternalByIndex(e,r,Number.parseInt(o)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield lr(e,r)}static buildArrayElements(e,t){const r=[];for(const o of t){const f=e.issueTimeTicket(),p=Us(e,o,f);r.push(p)}return r}static pushInternal(e,t,r){return vt.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,o){const f=e.issueTimeTicket(),p=t.getPrevCreatedAt(r);t.moveAfter(p,o,f),e.push(Un.create(t.getCreatedAt(),p,o,f))}static moveAfterInternal(e,t,r,o){const f=e.issueTimeTicket();t.moveAfter(r,o,f),e.push(Un.create(t.getCreatedAt(),r,o,f))}static moveFrontInternal(e,t,r){const o=e.issueTimeTicket(),f=t.getHead();t.moveAfter(f.getCreatedAt(),r,o),e.push(Un.create(t.getCreatedAt(),f.getCreatedAt(),r,o))}static moveLastInternal(e,t,r){const o=e.issueTimeTicket(),f=t.getLastCreatedAt();t.moveAfter(f,r,o),e.push(Un.create(t.getCreatedAt(),f,r,o))}static insertAfterInternal(e,t,r,o){const f=e.issueTimeTicket(),p=Us(e,o,f);return t.insertAfter(r,p),e.registerElement(p,t),e.push(Sr.create(t.getCreatedAt(),r,p.deepcopy(),f)),p}static insertBeforeInternal(e,t,r,o){return vt.insertAfterInternal(e,t,t.getPrevCreatedAt(r),o)}static deleteInternalByIndex(e,t,r){const o=e.issueTimeTicket(),f=t.deleteByIndex(r,o);if(!!f)return e.push(Jn.create(t.getCreatedAt(),f.getCreatedAt(),o)),e.registerRemovedElement(f),f}static deleteInternalByID(e,t,r){const o=e.issueTimeTicket(),f=t.delete(r,o);return e.push(Jn.create(t.getCreatedAt(),f.getCreatedAt(),o)),e.registerRemovedElement(f),f}static splice(e,t,r,o,...f){const p=t.length,E=r>=0?Math.min(r,p):Math.max(p+r,0),x=o===void 0?p:o<0?E:Math.min(E+o,p),$=[];for(let me=E;me<x;me++){const Te=vt.deleteInternalByIndex(e,t,E);if(Te){const ne=Te.deepcopy();ne.setRemovedAt(),$.push(kr(e,ne))}}if(f){let me=E===0?t.getHead().getID():t.get(E-1).getID();for(const Te of f)me=vt.insertAfterInternal(e,t,me,Te).getID()}return $}static includes(e,t,r,o){var f;const p=t.length,E=o===void 0?0:o<0?Math.max(o+p,0):o;if(E>=p)return!1;if(lt.isSupport(r))return Array.from(t).map($=>kr(e,$)).includes(r,E);for(let x=E;x<p;x++)if(((f=t.get(x))===null||f===void 0?void 0:f.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,o){var f;const p=t.length,E=o===void 0?0:o<0?Math.max(o+p,0):o;if(E>=p)return-1;if(lt.isSupport(r))return Array.from(t).map($=>kr(e,$)).indexOf(r,E);for(let x=E;x<p;x++)if(((f=t.get(x))===null||f===void 0?void 0:f.getID())===r.getID())return x;return-1}static lastIndexOf(e,t,r,o){var f;const p=t.length,E=o===void 0||o>=p?p-1:o<0?o+p:o;if(E<0)return-1;if(lt.isSupport(r))return Array.from(t).map($=>kr(e,$)).lastIndexOf(r,E);for(let x=E;x>0;x--)if(((f=t.get(x))===null||f===void 0?void 0:f.getID())===r.getID())return x;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Ms{constructor(e,t){this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,o){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}if(e>t){g.fatal("from should be less than or equal to to");return}const f=this.text.indexRangeToPosRange(e,t);g.isEnabled(w.Debug)&&g.debug(`EDIT: f:${e}->${f[0].toTestString()}, t:${t}->${f[1].toTestString()} c:${r}`);const p=o?Bt(o):void 0,E=this.context.issueTimeTicket(),[x,,$]=this.text.edit(f,r,E,p);return this.context.push(new $n(this.text.getCreatedAt(),f[0],f[1],x,r,p?new Map(Object.entries(p)):new Map,E)),f[0].equals(f[1])||this.context.registerElementHasRemovedNodes(this.text),this.text.findIndexesFromRange($)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)return g.fatal("it is not initialized yet"),!1;if(e>t)return g.fatal("from should be less than or equal to to"),!1;const o=this.text.indexRangeToPosRange(e,t);g.isEnabled(w.Debug)&&g.debug(`STYL: f:${e}->${o[0].toTestString()}, t:${t}->${o[1].toTestString()} a:${JSON.stringify(r)}`);const f=Bt(r),p=this.context.issueTimeTicket(),[E]=this.text.setStyle(o,f,p);return this.context.push(new Vt(this.text.getCreatedAt(),o[0],o[1],E,new Map(Object.entries(f)),p)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([xn.fromStruct(e[0]),xn.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(g.fatal("it is not initialized yet"),""):this.text.toString()}createRangeForTest(e,t){if(!this.context||!this.text){g.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class Fs{constructor(e,t){this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){g.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),r=lt.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Hr.create(this.counter.getCreatedAt(),r,t)),this}}function Si(i,e,t){const{type:r}=i,o=t.issueTimeTicket();if(r===Pt){Co(i);const{value:f}=i,p=he.create(K.of(o,0),r,f);e.append(p)}else{const{children:f=[]}=i;let{attributes:p}=i,E;if(typeof p=="object"&&!Ps(p)){p=Bt(p),E=new pn;for(const[$,me]of Object.entries(p))E.set($,me,o)}const x=he.create(K.of(o,0),r,void 0,E);e.append(x);for(const $ of f)Si($,x,t)}}function sc(i,e){const{type:t}=e,r=i.issueTimeTicket();let o;if(e.type===Pt){const{value:f}=e;o=he.create(K.of(r,0),t,f)}else if(e){const{children:f=[]}=e;let{attributes:p}=e,E;if(typeof p=="object"&&!Ps(p)){p=Bt(p),E=new pn;for(const[x,$]of Object.entries(p))E.set(x,$,r)}o=he.create(K.of(i.issueTimeTicket(),0),t,void 0,E);for(const x of f)Si(x,o,i)}return o}function Co(i){if(!i.value.length)throw new Error("text node cannot have empty value");return!0}function xo(i){if(!i.length)return!0;if(i[0].type===Pt)for(const t of i){const{type:r}=t;if(r!==Pt)throw new Error("element node and text node cannot be passed together");Co(t)}else for(const t of i){const{type:r}=t;if(r===Pt)throw new Error("element node and text node cannot be passed together")}return!0}class Js{constructor(e){this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return he.create(K.of(e.issueTimeTicket(),0),un);const t=he.create(K.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Si(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[r,o]=this.tree.pathToPosRange(e),f=this.context.issueTimeTicket(),p=t?Bt(t):void 0;this.tree.style([r,o],p,f),this.context.push(Xr.create(this.tree.getCreatedAt(),r,o,p?new Map(Object.entries(p)):new Map,f))}style(e,t,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),f=this.tree.findPos(t),p=this.context.issueTimeTicket(),E=r?Bt(r):void 0;this.tree.style([o,f],E,p),this.context.push(Xr.create(this.tree.getCreatedAt(),o,f,E?new Map(Object.entries(E)):new Map,p))}editInternal(e,t,r,o=0){var f;if(r.length!==0&&r[0]&&(xo(r),r[0].type!==Pt))for(const $ of r){const{children:me=[]}=$;xo(me)}const p=this.context.getLastTimeTicket();let E=new Array;if(((f=r[0])===null||f===void 0?void 0:f.type)===Pt){let $="";for(const me of r){const{value:Te}=me;$+=Te}E.push(he.create(K.of(this.context.issueTimeTicket(),0),Pt,$))}else E=r.map($=>$&&sc(this.context,$)).filter($=>$);const[,x]=this.tree.edit([e,t],E.length?E.map($=>$==null?void 0:$.deepcopy()):void 0,o,p,()=>this.context.issueTimeTicket());return this.context.push(Lt.create(this.tree.getCreatedAt(),e,t,E.length?E:void 0,o,x,p)),e.equals(t)||this.context.registerElementHasRemovedNodes(this.tree),!0}editByPath(e,t,r,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),p=this.tree.pathToPos(t);return this.editInternal(f,p,r?[r]:[],o)}editBulkByPath(e,t,r,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),p=this.tree.pathToPos(t);return this.editInternal(f,p,r,o)}edit(e,t,r,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),p=this.tree.findPos(t);return this.editInternal(f,p,r?[r]:[],o)}editBulk(e,t,r,o=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),p=this.tree.findPos(t);return this.editInternal(f,p,r,o)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){g.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){g.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){g.fatal("it is not initialized yet");return}const t=[ee.fromStruct(e[0]),ee.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t,this.context.getLastTimeTicket())}posRangeToPathRange(e){if(!this.context||!this.tree){g.fatal("it is not initialized yet");return}const t=[ee.fromStruct(e[0]),ee.fromStruct(e[1])];return this.tree.posRangeToPathRange(t,this.context.getLastTimeTicket())}}function Ro(i,e){return Do(i,e)}function lr(i,e){if(e){if(e instanceof lt)return e;if(e instanceof st)return Do(i,e);if(e instanceof Xt)return tc(i,e);if(e instanceof Nt)return new Ms(i,e);if(e instanceof bn){const t=new Fs(It.IntegerCnt,0);return t.initialize(i,e),t}else if(e instanceof Ce){const t=new Js;return t.initialize(i,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function kr(i,e){const t=lr(i,e);return t instanceof lt?t.getValue():t}function Us(i,e,t){let r;if(lt.isSupport(e))r=lt.of(e,t);else if(Array.isArray(e))r=Xt.create(t,vt.buildArrayElements(i,e));else if(typeof e=="object")e instanceof Ms?(r=Nt.create(Gr.create(),t),e.initialize(i,r)):e instanceof Fs?(r=bn.create(e.getValueType(),e.getValue(),t),e.initialize(i,r)):e instanceof Js?(r=Ce.create(e.buildRoot(i),t),e.initialize(i,r)):r=st.create(t,Ts.buildObjectMembers(i,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const Lo=50;class ic{constructor(){this.undoStack=[],this.redoStack=[]}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Lo&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Lo&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}var On;(function(i){i.Detached="detached",i.Attached="attached",i.Removed="removed"})(On||(On={}));var $e;(function(i){i.Snapshot="snapshot",i.LocalChange="local-change",i.RemoteChange="remote-change",i.Initialized="initialized",i.Watched="watched",i.Unwatched="unwatched",i.PresenceChanged="presence-changed"})($e||($e={}));class Bo{constructor(e,t){this.opts=t||{},this.key=e,this.status=On.Detached,this.root=ys.create(),this.changeID=yi,this.checkpoint=gu,this.localChanges=[],this.eventStream=R(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new ic,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)}}update(e,t){if(this.getStatus()===On.Removed)throw new Me(Re.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),o=Zr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},t);try{const f=Ro(o,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(f,new Kr(o,this.clone.presences.get(r)))}catch(f){throw this.clone=void 0,g.error(f),f}finally{this.isUpdating=!1}if(o.hasChange()){g.isEnabled(w.Trivial)&&g.trivial(`trying to update a local change: ${this.toJSON()}`);const f=o.getChange(),{opInfos:p,reverseOps:E}=f.execute(this.root,this.presences,ct.Local),x=o.getReversePresence();x&&E.push({type:"presence",value:x}),this.localChanges.push(f),E.length>0&&this.internalHistory.pushUndo(E),p.length>0&&this.internalHistory.clearRedo(),this.changeID=f.getID(),p.length>0&&this.publish({type:$e.LocalChange,value:{message:f.getMessage()||"",operations:p,actor:r}}),f.hasPresenceChange()&&this.publish({type:$e.PresenceChanged,value:{clientID:r,presence:this.getPresence(r)}}),g.isEnabled(w.Trivial)&&g.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,o){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const E=t;return this.eventStream.subscribe(x=>{x.type!==$e.Initialized&&x.type!==$e.Watched&&x.type!==$e.Unwatched&&x.type!==$e.PresenceChanged||E(x)},r,o)}if(e==="my-presence"){const E=t;return this.eventStream.subscribe(x=>{x.type!==$e.Initialized&&x.type!==$e.Watched&&x.type!==$e.Unwatched&&x.type!==$e.PresenceChanged||x.type!==$e.Initialized&&x.value.clientID!==this.changeID.getActorID()||E(x)},r,o)}if(e==="others"){const E=t;return this.eventStream.subscribe(x=>{x.type!==$e.Watched&&x.type!==$e.Unwatched&&x.type!==$e.PresenceChanged||x.value.clientID!==this.changeID.getActorID()&&E(x)},r,o)}const f=e,p=t;return this.eventStream.subscribe(E=>{if(E.type===$e.Initialized||E.type===$e.Watched||E.type===$e.Unwatched||E.type===$e.PresenceChanged)return;if(E.type===$e.Snapshot){f==="$"&&p(E);return}const{message:x,operations:$,actor:me}=E.value,Te=[];for(const ne of $)this.isSameElementOrChildOf(ne.path,f)&&Te.push(ne);Te.length&&p({type:E.type,value:{message:x,operations:Te,actor:me}})},r,o)}if(typeof e=="function"){const f=e,p=t,E=r;return this.eventStream.subscribe(x=>{x.type===$e.Initialized||x.type===$e.Watched||x.type===$e.Unwatched||x.type===$e.PresenceChanged||f(x)},p,E)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((f,p)=>f===r[p])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges());this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.setStatus(On.Removed),g.isEnabled(w.Trivial)&&g.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Sn(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Ds.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}getKey(){return this.key}setStatus(e){this.status=e}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Zr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Ro(e,this.clone.root.getObject())}getOpsForTest(){return this.root.opsForTest}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}applySnapshot(e,t){const{root:r,presences:o}=Vn.bytesToSnapshot(t);this.root=new ys(r),this.presences=o,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish({type:$e.Snapshot,value:t})}applyChanges(e){g.isEnabled(w.Debug)&&g.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getRemovedElementSetSize()}`),g.isEnabled(w.Trivial)&&g.trivial(e.map(t=>`${t.getID().toTestString()}	${t.toTestString()}`).join(`
`)),this.ensureClone();for(const t of e){t.execute(this.clone.root,this.clone.presences,ct.Remote);let r;const o=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(o)){const p=t.getPresenceChange();switch(p.type){case gn.Put:r={type:this.presences.has(o)?$e.PresenceChanged:$e.Watched,value:{clientID:o,presence:p.presence}};break;case gn.Clear:r={type:$e.Unwatched,value:{clientID:o,presence:this.getPresence(o)}},this.removeOnlineClient(o);break}}const{opInfos:f}=t.execute(this.root,this.presences,ct.Remote);f.length>0&&this.publish({type:$e.RemoteChange,value:{actor:o,message:t.getMessage()||"",operations:f}}),r&&this.publish(r),this.changeID=this.changeID.syncLamport(t.getID().getLamport())}g.isEnabled(w.Debug)&&g.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getRemovedElementSetSize()}`)}getValueByPath(e){if(!e.startsWith("$"))throw new Me(Re.InvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const o of t)if(r=r[o],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!==On.Attached)return{};const e=this.presences.get(this.changeID.getActorID());return Sn(e)}getPresence(e){if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Sn(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Sn(t):void 0}getPresences(){const e=[];for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Sn(this.presences.get(t))});return e}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=Zr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const x of e){if(!(x instanceof mt)){new Kr(t,Sn(this.clone.presences.get(this.changeID.getActorID()))).set(x.value,{addToHistory:!0});continue}const $=t.issueTimeTicket();x.setExecutedAt($),t.push(x)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,ct.UndoRedo);const{opInfos:o,reverseOps:f}=r.execute(this.root,this.presences,ct.UndoRedo),p=t.getReversePresence();if(p&&f.push({type:"presence",value:p}),f.length>0&&this.internalHistory.pushRedo(f),!r.hasPresenceChange()&&o.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const E=this.changeID.getActorID();o.length>0&&this.publish({type:$e.LocalChange,value:{message:r.getMessage()||"",operations:o,actor:E}}),r.hasPresenceChange()&&this.publish({type:$e.PresenceChanged,value:{clientID:E,presence:this.getPresence(E)}})}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=Zr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const x of e){if(!(x instanceof mt)){new Kr(t,Sn(this.clone.presences.get(this.changeID.getActorID()))).set(x.value,{addToHistory:!0});continue}const $=t.issueTimeTicket();x.setExecutedAt($),t.push(x)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,ct.UndoRedo);const{opInfos:o,reverseOps:f}=r.execute(this.root,this.presences,ct.UndoRedo),p=t.getReversePresence();if(p&&f.push({type:"presence",value:p}),f.length>0&&this.internalHistory.pushUndo(f),!r.hasPresenceChange()&&o.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const E=this.changeID.getActorID();o.length>0&&this.publish({type:$e.LocalChange,value:{message:r.getMessage()||"",operations:o,actor:E}}),r.hasPresenceChange()&&this.publish({type:$e.PresenceChanged,value:{clientID:E,presence:this.getPresence(E)}})}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function oc(i,e){return t=>async r=>(i&&r.header.set("x-api-key",i),e&&r.header.set("authorization",e),await t(r))}const Mo=JSON.parse('{"u2":"yorkie-js-sdk","i8":"0.4.12"}');function ac(){return i=>async e=>(e.header.set("x-yorkie-user-agent",Mo.u2+"/"+Mo.i8),await i(e))}var Hn;(function(i){i.PushPull="pushpull",i.PushOnly="pushonly"})(Hn||(Hn={}));var fr;(function(i){i.Deactivated="deactivated",i.Activated="activated"})(fr||(fr={}));var Or;(function(i){i.Connected="connected",i.Disconnected="disconnected"})(Or||(Or={}));var Qr;(function(i){i.Synced="synced",i.SyncFailed="sync-failed"})(Qr||(Qr={}));var En;(function(i){i.StatusChanged="status-changed",i.DocumentChanged="document-changed",i.StreamConnectionStatusChanged="stream-connection-status-changed",i.DocumentSynced="document-synced"})(En||(En={}));const $s={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class Fo{constructor(e,t){t=t||$s,this.key=t.key?t.key:h(),this.status=fr.Deactivated,this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.syncLoopDuration=t.syncLoopDuration||$s.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||$s.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||$s.retrySyncLoopDelay,this.rpcClient=j(Er.V,br({baseUrl:e,interceptors:[oc(t.apiKey,t.token),ac()]})),this.eventStream=R(r=>{this.eventStreamObserver=r})}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status=fr.Activated,this.runSyncLoop(),this.eventStreamObserver.next({type:En.StatusChanged,value:this.status}),g.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw g.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){if(this.status===fr.Deactivated)return Promise.resolve();for(const[e]of this.attachmentMap)this.detachInternal(e);return this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.status=fr.Deactivated,this.eventStreamObserver.next({type:En.StatusChanged,value:this.status}),g.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw g.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,t={}){var r;if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==On.Detached)throw new Me(Re.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((f,p)=>p.set(t.initialPresence||{}));const o=(r=t.isRealtimeSync)!==null&&r!==void 0?r:!0;return this.rpcClient.attachDocument({clientId:this.id,changePack:Vn.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async f=>{const p=Vn.fromChangePack(f.changePack);return e.applyChangePack(p),e.getStatus()===On.Removed||(e.setStatus(On.Attached),this.attachmentMap.set(e.getKey(),new ec(this.reconnectStreamDelay,e,f.documentId,o)),o&&await this.runWatchLoop(e.getKey()),g.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(f=>{throw g.error(`[AD] c:"${this.getKey()}" err :`,f),f})}detach(e,t={}){var r;if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const o=this.attachmentMap.get(e.getKey());if(!o)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((f,p)=>p.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:o.docID,changePack:Vn.toChangePack(e.createChangePack()),removeIfNotAttached:(r=t.removeIfNotAttached)!==null&&r!==void 0?r:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(f=>{const p=Vn.fromChangePack(f.changePack);return e.applyChangePack(p),e.getStatus()!==On.Removed&&e.setStatus(On.Detached),this.detachInternal(e.getKey()),g.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(f=>{throw g.error(`[DD] c:"${this.getKey()}" err :`,f),f})}pause(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);return this.changeRealtimeSync(e,!1)}resume(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);return this.changeRealtimeSync(e,!0)}pauseRemoteChanges(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);t.changeSyncMode(Hn.PushOnly)}resumeRemoteChanges(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);t.changeSyncMode(Hn.PushPull),t.remoteChangeEventReceived=!0}async changeRealtimeSync(e,t){const r=this.attachmentMap.get(e.getKey());if(!r)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);return r.changeRealtimeSync(t)?t?(r.remoteChangeEventReceived=!0,await this.runWatchLoop(e.getKey()),e):(this.eventStreamObserver.next({type:En.StreamConnectionStatusChanged,value:Or.Disconnected}),g.debug(`[WD] c:"${this.getKey()}" unwatches`),e):e}sync(e,t=Hn.PushPull){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const r=[];if(e){const o=this.attachmentMap.get(e.getKey());if(!o)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);r.push(this.syncInternal(o,t))}else this.attachmentMap.forEach(o=>{r.push(this.syncInternal(o,o.syncMode))});return Promise.all(r).catch(o=>{throw this.eventStreamObserver.next({type:En.DocumentSynced,value:Qr.SyncFailed}),o})}remove(e){if(!this.isActive())throw new Me(Re.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Me(Re.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=Vn.toChangePack(e.createChangePack());return r.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(o=>{const f=Vn.fromChangePack(o.changePack);e.applyChangePack(f),this.detachInternal(e.getKey()),g.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(o=>{throw g.error(`[RD] c:"${this.getKey()}" err :`,o),o})}subscribe(e,t,r){return this.eventStream.subscribe(e,t,r)}getID(){return this.id}getKey(){return this.key}isActive(){return this.status===fr.Activated}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){g.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(r=>{g.error(`[SL] c:"${this.getKey()}" sync failed:`,r),this.eventStreamObserver.next({type:En.DocumentSynced,value:Qr.SyncFailed}),setTimeout(e,this.retrySyncLoopDelay)})};g.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new Me(Re.DocumentNotAttached,`${e} is not attached`);return t.runWatchLoop(r=>{if(!this.isActive())return Promise.reject(new Me(Re.ClientNotActive,`${this.key} is not active`));const o=new AbortController,f=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:o.signal});return this.eventStreamObserver.next({type:En.StreamConnectionStatusChanged,value:Or.Connected}),g.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((p,E)=>{(async()=>{try{for await(const $ of f)this.handleWatchDocumentsResponse(t,$),$.body.case==="initialization"&&p([f,o])}catch($){this.eventStreamObserver.next({type:En.StreamConnectionStatusChanged,value:Or.Disconnected}),g.debug(`[WD] c:"${this.getKey()}" unwatches`),r(),E($)}})()})})}handleWatchDocumentsResponse(e,t){const r=e.doc.getKey();if(t.body.case==="initialization"){const o=t.body.value.clientIds,f=new Set;for(const p of o)f.add(p);e.doc.setOnlineClients(f),e.doc.publish({type:$e.Initialized,value:e.doc.getPresences()});return}else if(t.body.case==="event"){const o=t.body.value,f=o.type,p=o.publisher;switch(f){case se.DocEventType.DOCUMENT_CHANGED:e.remoteChangeEventReceived=!0,this.eventStreamObserver.next({type:En.DocumentChanged,value:[r]});break;case se.DocEventType.DOCUMENT_WATCHED:e.doc.addOnlineClient(p),e.doc.hasPresence(p)&&e.doc.publish({type:$e.Watched,value:{clientID:p,presence:e.doc.getPresence(p)}});break;case se.DocEventType.DOCUMENT_UNWATCHED:{const E=e.doc.getPresence(p);e.doc.removeOnlineClient(p),E&&e.doc.publish({type:$e.Unwatched,value:{clientID:p,presence:E}});break}}}}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),g.debug(`[WD] c:"${this.getKey()}" unwatches`),this.eventStreamObserver.next({type:En.StreamConnectionStatusChanged,value:Or.Disconnected}),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:r,docID:o}=e,f=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:o,changePack:Vn.toChangePack(f),pushOnly:t===Hn.PushOnly},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(p=>{const E=Vn.fromChangePack(p.changePack);if(E.hasChanges()&&t===Hn.PushOnly)return r;r.applyChangePack(E),this.eventStreamObserver.next({type:En.DocumentSynced,value:Qr.Synced}),r.getStatus()===On.Removed&&this.detachInternal(r.getKey());const x=r.getKey(),$=E.getChangeSize();return g.info(`[PP] c:"${this.getKey()}" sync d:"${x}", push:${f.getChangeSize()} pull:${$} cp:${E.getCheckpoint().toTestString()}`),r}).catch(p=>{throw g.error(`[PP] c:"${this.getKey()}" err :`,p),p})}}const uc={Client:Fo,Document:Bo,Primitive:lt,Text:Ms,Counter:Fs,Tree:Js,IntType:It.IntegerCnt,LongType:It.LongCnt}})(),y})())})(hu);const mu=$f(hu.exports),jf=(n,a)=>{const l=n.__vccOpts||n;for(const[d,m]of a)l[d]=m;return l},Vf=[{title:"Todo",cards:[{title:"Pruning document"},{title:"Clean up codes"}]},{title:"Doing",cards:[{title:"Array operations"}]},{title:"Done",cards:[{title:"Create a sample page"},{title:"Launch demo site"}]}],hr=new mu.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"}),Qn=new mu.Document(`vuejs-kanban-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`),Kf={data(){return{lists:[],title:"",opened:null}},created(){this.fetchDoc()},beforeUnmount(){this.disconnect()},watch:{opened(n){this.$nextTick(function(){n===0?this.$refs.addListForm.querySelector("input").focus():n&&this.$refs.addCardForm[n-1].querySelector("input").focus(),this.title=""})}},methods:{async fetchDoc(){await hr.activate(),await hr.attach(Qn),Qn.update(n=>{n.lists||(n.lists=Vf)},"create default list if not exists"),Qn.subscribe(n=>{this.lists=Qn.getRoot().lists}),await hr.sync(),this.lists=Qn.getRoot().lists},async disconnect(){await hr.deactivate()},isOpened(n){return this.opened===n},openForm(n){this.opened=n},closeForm(){this.opened=null},addCard(n){this.title!==""&&Qn.update(a=>{a.lists.getElementByID(n.getID()).cards.push({title:this.title}),this.title=""},`add new card by ${hr.getID()}`)},deleteCard(n,a){Qn.update(l=>{l.lists.getElementByID(n.getID()).cards.deleteByID(a.getID())},`delete a card by ${hr.getID()}`)},addList(){this.title!==""&&Qn.update(n=>{n.lists.push({title:this.title,cards:[]}),this.title=""},`add new list by ${hr.getID()}`)},deleteList(n){Qn.update(a=>{a.lists.deleteByID(n.getID())},`delete a list by ${hr.getID()}`)}}},qf={class:"list"},Yf=["onClick"],Wf={class:"title"},zf={class:"card"},Gf=["onClick"],Hf={key:0,class:"add-form"},Xf=["onKeyup"],Zf={class:"buttons"},Qf=["onClick"],ed=["onClick"],td={class:"add-list",ref:"addListForm"},nd={key:0,class:"add-form"},rd={class:"buttons"};function sd(n,a,l,d,m,y){return Xn(),Zn(Nn,null,[(Xn(!0),Zn(Nn,null,Qo(m.lists,(w,T)=>(Xn(),Zn("div",qf,[nn("span",{class:"delete",onClick:g=>y.deleteList(w)},"\u274C",8,Yf),nn("div",Wf,Uo(w.title),1),(Xn(!0),Zn(Nn,null,Qo(w.cards,g=>(Xn(),Zn("div",zf,[nn("span",{class:"delete",onClick:h=>y.deleteCard(w,g)},"\u274C",8,Gf),lu(" "+Uo(g.title),1)]))),256)),nn("div",{class:"add-card",ref_for:!0,ref:"addCardForm"},[y.isOpened(T+1)?(Xn(),Zn("div",Hf,[Zo(nn("input",{type:"text",placeholder:"Enter card title","onUpdate:modelValue":a[0]||(a[0]=g=>m.title=g),onKeyup:[zs(g=>y.addCard(w),["enter"]),a[1]||(a[1]=zs(g=>y.closeForm(),["esc"]))]},null,40,Xf),[[ya,m.title]]),nn("div",Zf,[nn("input",{type:"button",value:"Add",onClick:g=>y.addCard(w)},null,8,Qf),nn("input",{type:"button",value:"Close",class:"pull-right",onClick:a[2]||(a[2]=g=>y.closeForm())})])])):(Xn(),Zn("div",{key:1,class:"add-card-opener",onClick:g=>y.openForm(T+1)},"Add another card",8,ed))],512)]))),256)),nn("div",td,[y.isOpened(0)?(Xn(),Zn("div",nd,[Zo(nn("input",{type:"text",placeholder:"Enter list title","onUpdate:modelValue":a[3]||(a[3]=w=>m.title=w),onKeyup:[a[4]||(a[4]=zs(w=>y.addList(),["enter"])),a[5]||(a[5]=zs(w=>y.closeForm(),["esc"]))]},null,544),[[ya,m.title]]),nn("div",rd,[nn("input",{type:"button",value:"Add",onClick:a[6]||(a[6]=w=>y.addList())}),nn("input",{type:"button",value:"Close",class:"pull-right",onClick:a[7]||(a[7]=w=>y.closeForm())})])])):(Xn(),Zn("div",{key:1,class:"add-list-opener",onClick:a[8]||(a[8]=w=>y.openForm(0))},"Add another list"))],512)],64)}const id=jf(Kf,[["render",sd]]);Ff(id).mount("#app");
