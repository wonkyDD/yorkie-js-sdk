(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const l of m)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function u(m){const l={};return m.integrity&&(l.integrity=m.integrity),m.referrerpolicy&&(l.referrerPolicy=m.referrerpolicy),m.crossorigin==="use-credentials"?l.credentials="include":m.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function d(m){if(m.ep)return;m.ep=!0;const l=u(m);fetch(m.href,l)}})();function ec(i,a){const u=Object.create(null),d=i.split(",");for(let m=0;m<d.length;m++)u[d[m]]=!0;return a?m=>!!u[m.toLowerCase()]:m=>!!u[m]}const xe={},Fs=[],fn=()=>{},Pp=()=>!1,Cp=/^on[^a-z]/,$o=i=>Cp.test(i),tc=i=>i.startsWith("onUpdate:"),et=Object.assign,nc=(i,a)=>{const u=i.indexOf(a);u>-1&&i.splice(u,1)},Dp=Object.prototype.hasOwnProperty,ge=(i,a)=>Dp.call(i,a),re=Array.isArray,js=i=>Fo(i)==="[object Map]",jf=i=>Fo(i)==="[object Set]",ue=i=>typeof i=="function",ze=i=>typeof i=="string",rc=i=>typeof i=="symbol",Be=i=>i!==null&&typeof i=="object",qf=i=>Be(i)&&ue(i.then)&&ue(i.catch),Vf=Object.prototype.toString,Fo=i=>Vf.call(i),Rp=i=>Fo(i).slice(8,-1),Kf=i=>Fo(i)==="[object Object]",sc=i=>ze(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,xo=ec(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),jo=i=>{const a=Object.create(null);return u=>a[u]||(a[u]=i(u))},Bp=/-(\w)/g,Ks=jo(i=>i.replace(Bp,(a,u)=>u?u.toUpperCase():"")),Lp=/\B([A-Z])/g,gs=jo(i=>i.replace(Lp,"-$1").toLowerCase()),Yf=jo(i=>i.charAt(0).toUpperCase()+i.slice(1)),Ca=jo(i=>i?`on${Yf(i)}`:""),Bo=(i,a)=>!Object.is(i,a),Po=(i,a)=>{for(let u=0;u<i.length;u++)i[u](a)},Lo=(i,a,u)=>{Object.defineProperty(i,a,{configurable:!0,enumerable:!1,value:u})},Ua=i=>{const a=parseFloat(i);return isNaN(a)?i:a};let af;const $a=()=>af||(af=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ic(i){if(re(i)){const a={};for(let u=0;u<i.length;u++){const d=i[u],m=ze(d)?$p(d):ic(d);if(m)for(const l in m)a[l]=m[l]}return a}else{if(ze(i))return i;if(Be(i))return i}}const Jp=/;(?![^(]*\))/g,Mp=/:([^]+)/,Up=/\/\*[^]*?\*\//g;function $p(i){const a={};return i.replace(Up,"").split(Jp).forEach(u=>{if(u){const d=u.split(Mp);d.length>1&&(a[d[0].trim()]=d[1].trim())}}),a}function oc(i){let a="";if(ze(i))a=i;else if(re(i))for(let u=0;u<i.length;u++){const d=oc(i[u]);d&&(a+=d+" ")}else if(Be(i))for(const u in i)i[u]&&(a+=u+" ");return a.trim()}const Fp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jp=ec(Fp);function Wf(i){return!!i||i===""}const cf=i=>ze(i)?i:i==null?"":re(i)||Be(i)&&(i.toString===Vf||!ue(i.toString))?JSON.stringify(i,zf,2):String(i),zf=(i,a)=>a&&a.__v_isRef?zf(i,a.value):js(a)?{[`Map(${a.size})`]:[...a.entries()].reduce((u,[d,m])=>(u[`${d} =>`]=m,u),{})}:jf(a)?{[`Set(${a.size})`]:[...a.values()]}:Be(a)&&!re(a)&&!Kf(a)?String(a):a;let an;class qp{constructor(a=!1){this.detached=a,this._active=!0,this.effects=[],this.cleanups=[],this.parent=an,!a&&an&&(this.index=(an.scopes||(an.scopes=[])).push(this)-1)}get active(){return this._active}run(a){if(this._active){const u=an;try{return an=this,a()}finally{an=u}}}on(){an=this}off(){an=this.parent}stop(a){if(this._active){let u,d;for(u=0,d=this.effects.length;u<d;u++)this.effects[u].stop();for(u=0,d=this.cleanups.length;u<d;u++)this.cleanups[u]();if(this.scopes)for(u=0,d=this.scopes.length;u<d;u++)this.scopes[u].stop(!0);if(!this.detached&&this.parent&&!a){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.parent=void 0,this._active=!1}}}function Vp(i,a=an){a&&a.active&&a.effects.push(i)}function Kp(){return an}const ac=i=>{const a=new Set(i);return a.w=0,a.n=0,a},Gf=i=>(i.w&jr)>0,Hf=i=>(i.n&jr)>0,Yp=({deps:i})=>{if(i.length)for(let a=0;a<i.length;a++)i[a].w|=jr},Wp=i=>{const{deps:a}=i;if(a.length){let u=0;for(let d=0;d<a.length;d++){const m=a[d];Gf(m)&&!Hf(m)?m.delete(i):a[u++]=m,m.w&=~jr,m.n&=~jr}a.length=u}},Fa=new WeakMap;let Li=0,jr=1;const ja=30;let cn;const hs=Symbol(""),qa=Symbol("");class cc{constructor(a,u=null,d){this.fn=a,this.scheduler=u,this.active=!0,this.deps=[],this.parent=void 0,Vp(this,d)}run(){if(!this.active)return this.fn();let a=cn,u=$r;for(;a;){if(a===this)return;a=a.parent}try{return this.parent=cn,cn=this,$r=!0,jr=1<<++Li,Li<=ja?Yp(this):uf(this),this.fn()}finally{Li<=ja&&Wp(this),jr=1<<--Li,cn=this.parent,$r=u,this.parent=void 0,this.deferStop&&this.stop()}}stop(){cn===this?this.deferStop=!0:this.active&&(uf(this),this.onStop&&this.onStop(),this.active=!1)}}function uf(i){const{deps:a}=i;if(a.length){for(let u=0;u<a.length;u++)a[u].delete(i);a.length=0}}let $r=!0;const Xf=[];function zs(){Xf.push($r),$r=!1}function Gs(){const i=Xf.pop();$r=i===void 0?!0:i}function yt(i,a,u){if($r&&cn){let d=Fa.get(i);d||Fa.set(i,d=new Map);let m=d.get(u);m||d.set(u,m=ac()),Zf(m)}}function Zf(i,a){let u=!1;Li<=ja?Hf(i)||(i.n|=jr,u=!Gf(i)):u=!i.has(cn),u&&(i.add(cn),cn.deps.push(i))}function Tr(i,a,u,d,m,l){const p=Fa.get(i);if(!p)return;let y=[];if(a==="clear")y=[...p.values()];else if(u==="length"&&re(i)){const I=Number(d);p.forEach((O,L)=>{(L==="length"||L>=I)&&y.push(O)})}else switch(u!==void 0&&y.push(p.get(u)),a){case"add":re(i)?sc(u)&&y.push(p.get("length")):(y.push(p.get(hs)),js(i)&&y.push(p.get(qa)));break;case"delete":re(i)||(y.push(p.get(hs)),js(i)&&y.push(p.get(qa)));break;case"set":js(i)&&y.push(p.get(hs));break}if(y.length===1)y[0]&&Va(y[0]);else{const I=[];for(const O of y)O&&I.push(...O);Va(ac(I))}}function Va(i,a){const u=re(i)?i:[...i];for(const d of u)d.computed&&lf(d);for(const d of u)d.computed||lf(d)}function lf(i,a){(i!==cn||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const zp=ec("__proto__,__v_isRef,__isVue"),Qf=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(rc)),Gp=uc(),Hp=uc(!1,!0),Xp=uc(!0),ff=Zp();function Zp(){const i={};return["includes","indexOf","lastIndexOf"].forEach(a=>{i[a]=function(...u){const d=Ee(this);for(let l=0,p=this.length;l<p;l++)yt(d,"get",l+"");const m=d[a](...u);return m===-1||m===!1?d[a](...u.map(Ee)):m}}),["push","pop","shift","unshift","splice"].forEach(a=>{i[a]=function(...u){zs();const d=Ee(this)[a].apply(this,u);return Gs(),d}}),i}function Qp(i){const a=Ee(this);return yt(a,"has",i),a.hasOwnProperty(i)}function uc(i=!1,a=!1){return function(d,m,l){if(m==="__v_isReactive")return!i;if(m==="__v_isReadonly")return i;if(m==="__v_isShallow")return a;if(m==="__v_raw"&&l===(i?a?gy:sh:a?rh:nh).get(d))return d;const p=re(d);if(!i){if(p&&ge(ff,m))return Reflect.get(ff,m,l);if(m==="hasOwnProperty")return Qp}const y=Reflect.get(d,m,l);return(rc(m)?Qf.has(m):zp(m))||(i||yt(d,"get",m),a)?y:ht(y)?p&&sc(m)?y:y.value:Be(y)?i?ih(y):hc(y):y}}const ey=eh(),ty=eh(!0);function eh(i=!1){return function(u,d,m,l){let p=u[d];if(Fi(p)&&ht(p)&&!ht(m))return!1;if(!i&&(!Ka(m)&&!Fi(m)&&(p=Ee(p),m=Ee(m)),!re(u)&&ht(p)&&!ht(m)))return p.value=m,!0;const y=re(u)&&sc(d)?Number(d)<u.length:ge(u,d),I=Reflect.set(u,d,m,l);return u===Ee(l)&&(y?Bo(m,p)&&Tr(u,"set",d,m):Tr(u,"add",d,m)),I}}function ny(i,a){const u=ge(i,a);i[a];const d=Reflect.deleteProperty(i,a);return d&&u&&Tr(i,"delete",a,void 0),d}function ry(i,a){const u=Reflect.has(i,a);return(!rc(a)||!Qf.has(a))&&yt(i,"has",a),u}function sy(i){return yt(i,"iterate",re(i)?"length":hs),Reflect.ownKeys(i)}const th={get:Gp,set:ey,deleteProperty:ny,has:ry,ownKeys:sy},iy={get:Xp,set(i,a){return!0},deleteProperty(i,a){return!0}},oy=et({},th,{get:Hp,set:ty}),lc=i=>i,qo=i=>Reflect.getPrototypeOf(i);function Eo(i,a,u=!1,d=!1){i=i.__v_raw;const m=Ee(i),l=Ee(a);u||(a!==l&&yt(m,"get",a),yt(m,"get",l));const{has:p}=qo(m),y=d?lc:u?gc:mc;if(p.call(m,a))return y(i.get(a));if(p.call(m,l))return y(i.get(l));i!==m&&i.get(a)}function Io(i,a=!1){const u=this.__v_raw,d=Ee(u),m=Ee(i);return a||(i!==m&&yt(d,"has",i),yt(d,"has",m)),i===m?u.has(i):u.has(i)||u.has(m)}function No(i,a=!1){return i=i.__v_raw,!a&&yt(Ee(i),"iterate",hs),Reflect.get(i,"size",i)}function hf(i){i=Ee(i);const a=Ee(this);return qo(a).has.call(a,i)||(a.add(i),Tr(a,"add",i,i)),this}function df(i,a){a=Ee(a);const u=Ee(this),{has:d,get:m}=qo(u);let l=d.call(u,i);l||(i=Ee(i),l=d.call(u,i));const p=m.call(u,i);return u.set(i,a),l?Bo(a,p)&&Tr(u,"set",i,a):Tr(u,"add",i,a),this}function mf(i){const a=Ee(this),{has:u,get:d}=qo(a);let m=u.call(a,i);m||(i=Ee(i),m=u.call(a,i)),d&&d.call(a,i);const l=a.delete(i);return m&&Tr(a,"delete",i,void 0),l}function gf(){const i=Ee(this),a=i.size!==0,u=i.clear();return a&&Tr(i,"clear",void 0,void 0),u}function _o(i,a){return function(d,m){const l=this,p=l.__v_raw,y=Ee(p),I=a?lc:i?gc:mc;return!i&&yt(y,"iterate",hs),p.forEach((O,L)=>d.call(m,I(O),I(L),l))}}function Ao(i,a,u){return function(...d){const m=this.__v_raw,l=Ee(m),p=js(l),y=i==="entries"||i===Symbol.iterator&&p,I=i==="keys"&&p,O=m[i](...d),L=u?lc:a?gc:mc;return!a&&yt(l,"iterate",I?qa:hs),{next(){const{value:q,done:W}=O.next();return W?{value:q,done:W}:{value:y?[L(q[0]),L(q[1])]:L(q),done:W}},[Symbol.iterator](){return this}}}}function Jr(i){return function(...a){return i==="delete"?!1:this}}function ay(){const i={get(l){return Eo(this,l)},get size(){return No(this)},has:Io,add:hf,set:df,delete:mf,clear:gf,forEach:_o(!1,!1)},a={get(l){return Eo(this,l,!1,!0)},get size(){return No(this)},has:Io,add:hf,set:df,delete:mf,clear:gf,forEach:_o(!1,!0)},u={get(l){return Eo(this,l,!0)},get size(){return No(this,!0)},has(l){return Io.call(this,l,!0)},add:Jr("add"),set:Jr("set"),delete:Jr("delete"),clear:Jr("clear"),forEach:_o(!0,!1)},d={get(l){return Eo(this,l,!0,!0)},get size(){return No(this,!0)},has(l){return Io.call(this,l,!0)},add:Jr("add"),set:Jr("set"),delete:Jr("delete"),clear:Jr("clear"),forEach:_o(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{i[l]=Ao(l,!1,!1),u[l]=Ao(l,!0,!1),a[l]=Ao(l,!1,!0),d[l]=Ao(l,!0,!0)}),[i,u,a,d]}const[cy,uy,ly,fy]=ay();function fc(i,a){const u=a?i?fy:ly:i?uy:cy;return(d,m,l)=>m==="__v_isReactive"?!i:m==="__v_isReadonly"?i:m==="__v_raw"?d:Reflect.get(ge(u,m)&&m in d?u:d,m,l)}const hy={get:fc(!1,!1)},dy={get:fc(!1,!0)},my={get:fc(!0,!1)},nh=new WeakMap,rh=new WeakMap,sh=new WeakMap,gy=new WeakMap;function py(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yy(i){return i.__v_skip||!Object.isExtensible(i)?0:py(Rp(i))}function hc(i){return Fi(i)?i:dc(i,!1,th,hy,nh)}function vy(i){return dc(i,!1,oy,dy,rh)}function ih(i){return dc(i,!0,iy,my,sh)}function dc(i,a,u,d,m){if(!Be(i)||i.__v_raw&&!(a&&i.__v_isReactive))return i;const l=m.get(i);if(l)return l;const p=yy(i);if(p===0)return i;const y=new Proxy(i,p===2?d:u);return m.set(i,y),y}function qs(i){return Fi(i)?qs(i.__v_raw):!!(i&&i.__v_isReactive)}function Fi(i){return!!(i&&i.__v_isReadonly)}function Ka(i){return!!(i&&i.__v_isShallow)}function oh(i){return qs(i)||Fi(i)}function Ee(i){const a=i&&i.__v_raw;return a?Ee(a):i}function ah(i){return Lo(i,"__v_skip",!0),i}const mc=i=>Be(i)?hc(i):i,gc=i=>Be(i)?ih(i):i;function Ty(i){$r&&cn&&(i=Ee(i),Zf(i.dep||(i.dep=ac())))}function by(i,a){i=Ee(i);const u=i.dep;u&&Va(u)}function ht(i){return!!(i&&i.__v_isRef===!0)}function Sy(i){return ht(i)?i.value:i}const wy={get:(i,a,u)=>Sy(Reflect.get(i,a,u)),set:(i,a,u,d)=>{const m=i[a];return ht(m)&&!ht(u)?(m.value=u,!0):Reflect.set(i,a,u,d)}};function ch(i){return qs(i)?i:new Proxy(i,wy)}class Ey{constructor(a,u,d,m){this._setter=u,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new cc(a,()=>{this._dirty||(this._dirty=!0,by(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!m,this.__v_isReadonly=d}get value(){const a=Ee(this);return Ty(a),(a._dirty||!a._cacheable)&&(a._dirty=!1,a._value=a.effect.run()),a._value}set value(a){this._setter(a)}}function Iy(i,a,u=!1){let d,m;const l=ue(i);return l?(d=i,m=fn):(d=i.get,m=i.set),new Ey(d,m,l||!m,u)}function Fr(i,a,u,d){let m;try{m=d?i(...d):i()}catch(l){Vo(l,a,u)}return m}function hn(i,a,u,d){if(ue(i)){const l=Fr(i,a,u,d);return l&&qf(l)&&l.catch(p=>{Vo(p,a,u)}),l}const m=[];for(let l=0;l<i.length;l++)m.push(hn(i[l],a,u,d));return m}function Vo(i,a,u,d=!0){const m=a?a.vnode:null;if(a){let l=a.parent;const p=a.proxy,y=u;for(;l;){const O=l.ec;if(O){for(let L=0;L<O.length;L++)if(O[L](i,p,y)===!1)return}l=l.parent}const I=a.appContext.config.errorHandler;if(I){Fr(I,null,10,[i,p,y]);return}}Ny(i,u,m,d)}function Ny(i,a,u,d=!0){console.error(i)}let ji=!1,Ya=!1;const rt=[];let nr=0;const Vs=[];let vr=null,us=0;const uh=Promise.resolve();let pc=null;function _y(i){const a=pc||uh;return i?a.then(this?i.bind(this):i):a}function Ay(i){let a=nr+1,u=rt.length;for(;a<u;){const d=a+u>>>1;qi(rt[d])<i?a=d+1:u=d}return a}function yc(i){(!rt.length||!rt.includes(i,ji&&i.allowRecurse?nr+1:nr))&&(i.id==null?rt.push(i):rt.splice(Ay(i.id),0,i),lh())}function lh(){!ji&&!Ya&&(Ya=!0,pc=uh.then(hh))}function ky(i){const a=rt.indexOf(i);a>nr&&rt.splice(a,1)}function Oy(i){re(i)?Vs.push(...i):(!vr||!vr.includes(i,i.allowRecurse?us+1:us))&&Vs.push(i),lh()}function pf(i,a=ji?nr+1:0){for(;a<rt.length;a++){const u=rt[a];u&&u.pre&&(rt.splice(a,1),a--,u())}}function fh(i){if(Vs.length){const a=[...new Set(Vs)];if(Vs.length=0,vr){vr.push(...a);return}for(vr=a,vr.sort((u,d)=>qi(u)-qi(d)),us=0;us<vr.length;us++)vr[us]();vr=null,us=0}}const qi=i=>i.id==null?1/0:i.id,xy=(i,a)=>{const u=qi(i)-qi(a);if(u===0){if(i.pre&&!a.pre)return-1;if(a.pre&&!i.pre)return 1}return u};function hh(i){Ya=!1,ji=!0,rt.sort(xy);const a=fn;try{for(nr=0;nr<rt.length;nr++){const u=rt[nr];u&&u.active!==!1&&Fr(u,null,14)}}finally{nr=0,rt.length=0,fh(),ji=!1,pc=null,(rt.length||Vs.length)&&hh()}}function Py(i,a,...u){if(i.isUnmounted)return;const d=i.vnode.props||xe;let m=u;const l=a.startsWith("update:"),p=l&&a.slice(7);if(p&&p in d){const L=`${p==="modelValue"?"model":p}Modifiers`,{number:q,trim:W}=d[L]||xe;W&&(m=u.map(se=>ze(se)?se.trim():se)),q&&(m=u.map(Ua))}let y,I=d[y=Ca(a)]||d[y=Ca(Ks(a))];!I&&l&&(I=d[y=Ca(gs(a))]),I&&hn(I,i,6,m);const O=d[y+"Once"];if(O){if(!i.emitted)i.emitted={};else if(i.emitted[y])return;i.emitted[y]=!0,hn(O,i,6,m)}}function dh(i,a,u=!1){const d=a.emitsCache,m=d.get(i);if(m!==void 0)return m;const l=i.emits;let p={},y=!1;if(!ue(i)){const I=O=>{const L=dh(O,a,!0);L&&(y=!0,et(p,L))};!u&&a.mixins.length&&a.mixins.forEach(I),i.extends&&I(i.extends),i.mixins&&i.mixins.forEach(I)}return!l&&!y?(Be(i)&&d.set(i,null),null):(re(l)?l.forEach(I=>p[I]=null):et(p,l),Be(i)&&d.set(i,p),p)}function Ko(i,a){return!i||!$o(a)?!1:(a=a.slice(2).replace(/Once$/,""),ge(i,a[0].toLowerCase()+a.slice(1))||ge(i,gs(a))||ge(i,a))}let un=null,mh=null;function Jo(i){const a=un;return un=i,mh=i&&i.type.__scopeId||null,a}function Cy(i,a=un,u){if(!a||i._n)return i;const d=(...m)=>{d._d&&kf(-1);const l=Jo(a);let p;try{p=i(...m)}finally{Jo(l),d._d&&kf(1)}return p};return d._n=!0,d._c=!0,d._d=!0,d}function Da(i){const{type:a,vnode:u,proxy:d,withProxy:m,props:l,propsOptions:[p],slots:y,attrs:I,emit:O,render:L,renderCache:q,data:W,setupState:se,ctx:Pe,inheritAttrs:he}=i;let Me,qe;const Ve=Jo(i);try{if(u.shapeFlag&4){const ae=m||d;Me=tr(L.call(ae,ae,q,l,se,W,Pe)),qe=I}else{const ae=a;Me=tr(ae.length>1?ae(l,{attrs:I,slots:y,emit:O}):ae(l,null)),qe=a.props?I:Dy(I)}}catch(ae){$i.length=0,Vo(ae,i,1),Me=ds(Vi)}let Ke=Me;if(qe&&he!==!1){const ae=Object.keys(qe),{shapeFlag:Gt}=Ke;ae.length&&Gt&7&&(p&&ae.some(tc)&&(qe=Ry(qe,p)),Ke=Ys(Ke,qe))}return u.dirs&&(Ke=Ys(Ke),Ke.dirs=Ke.dirs?Ke.dirs.concat(u.dirs):u.dirs),u.transition&&(Ke.transition=u.transition),Me=Ke,Jo(Ve),Me}const Dy=i=>{let a;for(const u in i)(u==="class"||u==="style"||$o(u))&&((a||(a={}))[u]=i[u]);return a},Ry=(i,a)=>{const u={};for(const d in i)(!tc(d)||!(d.slice(9)in a))&&(u[d]=i[d]);return u};function By(i,a,u){const{props:d,children:m,component:l}=i,{props:p,children:y,patchFlag:I}=a,O=l.emitsOptions;if(a.dirs||a.transition)return!0;if(u&&I>=0){if(I&1024)return!0;if(I&16)return d?yf(d,p,O):!!p;if(I&8){const L=a.dynamicProps;for(let q=0;q<L.length;q++){const W=L[q];if(p[W]!==d[W]&&!Ko(O,W))return!0}}}else return(m||y)&&(!y||!y.$stable)?!0:d===p?!1:d?p?yf(d,p,O):!0:!!p;return!1}function yf(i,a,u){const d=Object.keys(a);if(d.length!==Object.keys(i).length)return!0;for(let m=0;m<d.length;m++){const l=d[m];if(a[l]!==i[l]&&!Ko(u,l))return!0}return!1}function Ly({vnode:i,parent:a},u){for(;a&&a.subTree===i;)(i=a.vnode).el=u,a=a.parent}const Jy=i=>i.__isSuspense;function My(i,a){a&&a.pendingBranch?re(i)?a.effects.push(...i):a.effects.push(i):Oy(i)}const ko={};function Ra(i,a,u){return gh(i,a,u)}function gh(i,a,{immediate:u,deep:d,flush:m,onTrack:l,onTrigger:p}=xe){var y;const I=Kp()===((y=st)==null?void 0:y.scope)?st:null;let O,L=!1,q=!1;if(ht(i)?(O=()=>i.value,L=Ka(i)):qs(i)?(O=()=>i,d=!0):re(i)?(q=!0,L=i.some(ae=>qs(ae)||Ka(ae)),O=()=>i.map(ae=>{if(ht(ae))return ae.value;if(qs(ae))return fs(ae);if(ue(ae))return Fr(ae,I,2)})):ue(i)?a?O=()=>Fr(i,I,2):O=()=>{if(!(I&&I.isUnmounted))return W&&W(),hn(i,I,3,[se])}:O=fn,a&&d){const ae=O;O=()=>fs(ae())}let W,se=ae=>{W=Ve.onStop=()=>{Fr(ae,I,4)}},Pe;if(Yi)if(se=fn,a?u&&hn(a,I,3,[O(),q?[]:void 0,se]):O(),m==="sync"){const ae=Dv();Pe=ae.__watcherHandles||(ae.__watcherHandles=[])}else return fn;let he=q?new Array(i.length).fill(ko):ko;const Me=()=>{if(!!Ve.active)if(a){const ae=Ve.run();(d||L||(q?ae.some((Gt,F)=>Bo(Gt,he[F])):Bo(ae,he)))&&(W&&W(),hn(a,I,3,[ae,he===ko?void 0:q&&he[0]===ko?[]:he,se]),he=ae)}else Ve.run()};Me.allowRecurse=!!a;let qe;m==="sync"?qe=Me:m==="post"?qe=()=>pt(Me,I&&I.suspense):(Me.pre=!0,I&&(Me.id=I.uid),qe=()=>yc(Me));const Ve=new cc(O,qe);a?u?Me():he=Ve.run():m==="post"?pt(Ve.run.bind(Ve),I&&I.suspense):Ve.run();const Ke=()=>{Ve.stop(),I&&I.scope&&nc(I.scope.effects,Ve)};return Pe&&Pe.push(Ke),Ke}function Uy(i,a,u){const d=this.proxy,m=ze(i)?i.includes(".")?ph(d,i):()=>d[i]:i.bind(d,d);let l;ue(a)?l=a:(l=a.handler,u=a);const p=st;Ws(this);const y=gh(m,l.bind(d),u);return p?Ws(p):ms(),y}function ph(i,a){const u=a.split(".");return()=>{let d=i;for(let m=0;m<u.length&&d;m++)d=d[u[m]];return d}}function fs(i,a){if(!Be(i)||i.__v_skip||(a=a||new Set,a.has(i)))return i;if(a.add(i),ht(i))fs(i.value,a);else if(re(i))for(let u=0;u<i.length;u++)fs(i[u],a);else if(jf(i)||js(i))i.forEach(u=>{fs(u,a)});else if(Kf(i))for(const u in i)fs(i[u],a);return i}function vf(i,a){const u=un;if(u===null)return i;const d=Go(u)||u.proxy,m=i.dirs||(i.dirs=[]);for(let l=0;l<a.length;l++){let[p,y,I,O=xe]=a[l];p&&(ue(p)&&(p={mounted:p,updated:p}),p.deep&&fs(y),m.push({dir:p,instance:d,value:y,oldValue:void 0,arg:I,modifiers:O}))}return i}function os(i,a,u,d){const m=i.dirs,l=a&&a.dirs;for(let p=0;p<m.length;p++){const y=m[p];l&&(y.oldValue=l[p].value);let I=y.dir[d];I&&(zs(),hn(I,u,8,[i.el,y,i,a]),Gs())}}const Co=i=>!!i.type.__asyncLoader,yh=i=>i.type.__isKeepAlive;function $y(i,a){vh(i,"a",a)}function Fy(i,a){vh(i,"da",a)}function vh(i,a,u=st){const d=i.__wdc||(i.__wdc=()=>{let m=u;for(;m;){if(m.isDeactivated)return;m=m.parent}return i()});if(Yo(a,d,u),u){let m=u.parent;for(;m&&m.parent;)yh(m.parent.vnode)&&jy(d,a,u,m),m=m.parent}}function jy(i,a,u,d){const m=Yo(a,i,d,!0);Th(()=>{nc(d[a],m)},u)}function Yo(i,a,u=st,d=!1){if(u){const m=u[i]||(u[i]=[]),l=a.__weh||(a.__weh=(...p)=>{if(u.isUnmounted)return;zs(),Ws(u);const y=hn(a,u,i,p);return ms(),Gs(),y});return d?m.unshift(l):m.push(l),l}}const br=i=>(a,u=st)=>(!Yi||i==="sp")&&Yo(i,(...d)=>a(...d),u),qy=br("bm"),Vy=br("m"),Ky=br("bu"),Yy=br("u"),Wy=br("bum"),Th=br("um"),zy=br("sp"),Gy=br("rtg"),Hy=br("rtc");function Xy(i,a=st){Yo("ec",i,a)}const Zy=Symbol.for("v-ndc");function Tf(i,a,u,d){let m;const l=u&&u[d];if(re(i)||ze(i)){m=new Array(i.length);for(let p=0,y=i.length;p<y;p++)m[p]=a(i[p],p,void 0,l&&l[p])}else if(typeof i=="number"){m=new Array(i);for(let p=0;p<i;p++)m[p]=a(p+1,p,void 0,l&&l[p])}else if(Be(i))if(i[Symbol.iterator])m=Array.from(i,(p,y)=>a(p,y,void 0,l&&l[y]));else{const p=Object.keys(i);m=new Array(p.length);for(let y=0,I=p.length;y<I;y++){const O=p[y];m[y]=a(i[O],O,y,l&&l[y])}}else m=[];return u&&(u[d]=m),m}const Wa=i=>i?xh(i)?Go(i)||i.proxy:Wa(i.parent):null,Ui=et(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Wa(i.parent),$root:i=>Wa(i.root),$emit:i=>i.emit,$options:i=>vc(i),$forceUpdate:i=>i.f||(i.f=()=>yc(i.update)),$nextTick:i=>i.n||(i.n=_y.bind(i.proxy)),$watch:i=>Uy.bind(i)}),Ba=(i,a)=>i!==xe&&!i.__isScriptSetup&&ge(i,a),Qy={get({_:i},a){const{ctx:u,setupState:d,data:m,props:l,accessCache:p,type:y,appContext:I}=i;let O;if(a[0]!=="$"){const se=p[a];if(se!==void 0)switch(se){case 1:return d[a];case 2:return m[a];case 4:return u[a];case 3:return l[a]}else{if(Ba(d,a))return p[a]=1,d[a];if(m!==xe&&ge(m,a))return p[a]=2,m[a];if((O=i.propsOptions[0])&&ge(O,a))return p[a]=3,l[a];if(u!==xe&&ge(u,a))return p[a]=4,u[a];za&&(p[a]=0)}}const L=Ui[a];let q,W;if(L)return a==="$attrs"&&yt(i,"get",a),L(i);if((q=y.__cssModules)&&(q=q[a]))return q;if(u!==xe&&ge(u,a))return p[a]=4,u[a];if(W=I.config.globalProperties,ge(W,a))return W[a]},set({_:i},a,u){const{data:d,setupState:m,ctx:l}=i;return Ba(m,a)?(m[a]=u,!0):d!==xe&&ge(d,a)?(d[a]=u,!0):ge(i.props,a)||a[0]==="$"&&a.slice(1)in i?!1:(l[a]=u,!0)},has({_:{data:i,setupState:a,accessCache:u,ctx:d,appContext:m,propsOptions:l}},p){let y;return!!u[p]||i!==xe&&ge(i,p)||Ba(a,p)||(y=l[0])&&ge(y,p)||ge(d,p)||ge(Ui,p)||ge(m.config.globalProperties,p)},defineProperty(i,a,u){return u.get!=null?i._.accessCache[a]=0:ge(u,"value")&&this.set(i,a,u.value,null),Reflect.defineProperty(i,a,u)}};function bf(i){return re(i)?i.reduce((a,u)=>(a[u]=null,a),{}):i}let za=!0;function ev(i){const a=vc(i),u=i.proxy,d=i.ctx;za=!1,a.beforeCreate&&Sf(a.beforeCreate,i,"bc");const{data:m,computed:l,methods:p,watch:y,provide:I,inject:O,created:L,beforeMount:q,mounted:W,beforeUpdate:se,updated:Pe,activated:he,deactivated:Me,beforeDestroy:qe,beforeUnmount:Ve,destroyed:Ke,unmounted:ae,render:Gt,renderTracked:F,renderTriggered:ps,errorCaptured:dn,serverPrefetch:E,expose:Ue,inheritAttrs:qr,components:Sr,directives:rr,filters:ys}=a;if(O&&tv(O,d,null),p)for(const Ce in p){const ve=p[Ce];ue(ve)&&(d[Ce]=ve.bind(u))}if(m){const Ce=m.call(u,u);Be(Ce)&&(i.data=hc(Ce))}if(za=!0,l)for(const Ce in l){const ve=l[Ce],mn=ue(ve)?ve.bind(u,u):ue(ve.get)?ve.get.bind(u,u):fn,Vr=!ue(ve)&&ue(ve.set)?ve.set.bind(u):fn,gn=Pv({get:mn,set:Vr});Object.defineProperty(d,Ce,{enumerable:!0,configurable:!0,get:()=>gn.value,set:It=>gn.value=It})}if(y)for(const Ce in y)bh(y[Ce],d,u,Ce);if(I){const Ce=ue(I)?I.call(u):I;Reflect.ownKeys(Ce).forEach(ve=>{av(ve,Ce[ve])})}L&&Sf(L,i,"c");function Ge(Ce,ve){re(ve)?ve.forEach(mn=>Ce(mn.bind(u))):ve&&Ce(ve.bind(u))}if(Ge(qy,q),Ge(Vy,W),Ge(Ky,se),Ge(Yy,Pe),Ge($y,he),Ge(Fy,Me),Ge(Xy,dn),Ge(Hy,F),Ge(Gy,ps),Ge(Wy,Ve),Ge(Th,ae),Ge(zy,E),re(Ue))if(Ue.length){const Ce=i.exposed||(i.exposed={});Ue.forEach(ve=>{Object.defineProperty(Ce,ve,{get:()=>u[ve],set:mn=>u[ve]=mn})})}else i.exposed||(i.exposed={});Gt&&i.render===fn&&(i.render=Gt),qr!=null&&(i.inheritAttrs=qr),Sr&&(i.components=Sr),rr&&(i.directives=rr)}function tv(i,a,u=fn){re(i)&&(i=Ga(i));for(const d in i){const m=i[d];let l;Be(m)?"default"in m?l=Do(m.from||d,m.default,!0):l=Do(m.from||d):l=Do(m),ht(l)?Object.defineProperty(a,d,{enumerable:!0,configurable:!0,get:()=>l.value,set:p=>l.value=p}):a[d]=l}}function Sf(i,a,u){hn(re(i)?i.map(d=>d.bind(a.proxy)):i.bind(a.proxy),a,u)}function bh(i,a,u,d){const m=d.includes(".")?ph(u,d):()=>u[d];if(ze(i)){const l=a[i];ue(l)&&Ra(m,l)}else if(ue(i))Ra(m,i.bind(u));else if(Be(i))if(re(i))i.forEach(l=>bh(l,a,u,d));else{const l=ue(i.handler)?i.handler.bind(u):a[i.handler];ue(l)&&Ra(m,l,i)}}function vc(i){const a=i.type,{mixins:u,extends:d}=a,{mixins:m,optionsCache:l,config:{optionMergeStrategies:p}}=i.appContext,y=l.get(a);let I;return y?I=y:!m.length&&!u&&!d?I=a:(I={},m.length&&m.forEach(O=>Mo(I,O,p,!0)),Mo(I,a,p)),Be(a)&&l.set(a,I),I}function Mo(i,a,u,d=!1){const{mixins:m,extends:l}=a;l&&Mo(i,l,u,!0),m&&m.forEach(p=>Mo(i,p,u,!0));for(const p in a)if(!(d&&p==="expose")){const y=nv[p]||u&&u[p];i[p]=y?y(i[p],a[p]):a[p]}return i}const nv={data:wf,props:Ef,emits:Ef,methods:Ji,computed:Ji,beforeCreate:lt,created:lt,beforeMount:lt,mounted:lt,beforeUpdate:lt,updated:lt,beforeDestroy:lt,beforeUnmount:lt,destroyed:lt,unmounted:lt,activated:lt,deactivated:lt,errorCaptured:lt,serverPrefetch:lt,components:Ji,directives:Ji,watch:sv,provide:wf,inject:rv};function wf(i,a){return a?i?function(){return et(ue(i)?i.call(this,this):i,ue(a)?a.call(this,this):a)}:a:i}function rv(i,a){return Ji(Ga(i),Ga(a))}function Ga(i){if(re(i)){const a={};for(let u=0;u<i.length;u++)a[i[u]]=i[u];return a}return i}function lt(i,a){return i?[...new Set([].concat(i,a))]:a}function Ji(i,a){return i?et(Object.create(null),i,a):a}function Ef(i,a){return i?re(i)&&re(a)?[...new Set([...i,...a])]:et(Object.create(null),bf(i),bf(a!=null?a:{})):a}function sv(i,a){if(!i)return a;if(!a)return i;const u=et(Object.create(null),i);for(const d in a)u[d]=lt(i[d],a[d]);return u}function Sh(){return{app:null,config:{isNativeTag:Pp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let iv=0;function ov(i,a){return function(d,m=null){ue(d)||(d=et({},d)),m!=null&&!Be(m)&&(m=null);const l=Sh(),p=new Set;let y=!1;const I=l.app={_uid:iv++,_component:d,_props:m,_container:null,_context:l,_instance:null,version:Rv,get config(){return l.config},set config(O){},use(O,...L){return p.has(O)||(O&&ue(O.install)?(p.add(O),O.install(I,...L)):ue(O)&&(p.add(O),O(I,...L))),I},mixin(O){return l.mixins.includes(O)||l.mixins.push(O),I},component(O,L){return L?(l.components[O]=L,I):l.components[O]},directive(O,L){return L?(l.directives[O]=L,I):l.directives[O]},mount(O,L,q){if(!y){const W=ds(d,m);return W.appContext=l,L&&a?a(W,O):i(W,O,q),y=!0,I._container=O,O.__vue_app__=I,Go(W.component)||W.component.proxy}},unmount(){y&&(i(null,I._container),delete I._container.__vue_app__)},provide(O,L){return l.provides[O]=L,I},runWithContext(O){Uo=I;try{return O()}finally{Uo=null}}};return I}}let Uo=null;function av(i,a){if(st){let u=st.provides;const d=st.parent&&st.parent.provides;d===u&&(u=st.provides=Object.create(d)),u[i]=a}}function Do(i,a,u=!1){const d=st||un;if(d||Uo){const m=d?d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides:Uo._context.provides;if(m&&i in m)return m[i];if(arguments.length>1)return u&&ue(a)?a.call(d&&d.proxy):a}}function cv(i,a,u,d=!1){const m={},l={};Lo(l,zo,1),i.propsDefaults=Object.create(null),wh(i,a,m,l);for(const p in i.propsOptions[0])p in m||(m[p]=void 0);u?i.props=d?m:vy(m):i.type.props?i.props=m:i.props=l,i.attrs=l}function uv(i,a,u,d){const{props:m,attrs:l,vnode:{patchFlag:p}}=i,y=Ee(m),[I]=i.propsOptions;let O=!1;if((d||p>0)&&!(p&16)){if(p&8){const L=i.vnode.dynamicProps;for(let q=0;q<L.length;q++){let W=L[q];if(Ko(i.emitsOptions,W))continue;const se=a[W];if(I)if(ge(l,W))se!==l[W]&&(l[W]=se,O=!0);else{const Pe=Ks(W);m[Pe]=Ha(I,y,Pe,se,i,!1)}else se!==l[W]&&(l[W]=se,O=!0)}}}else{wh(i,a,m,l)&&(O=!0);let L;for(const q in y)(!a||!ge(a,q)&&((L=gs(q))===q||!ge(a,L)))&&(I?u&&(u[q]!==void 0||u[L]!==void 0)&&(m[q]=Ha(I,y,q,void 0,i,!0)):delete m[q]);if(l!==y)for(const q in l)(!a||!ge(a,q)&&!0)&&(delete l[q],O=!0)}O&&Tr(i,"set","$attrs")}function wh(i,a,u,d){const[m,l]=i.propsOptions;let p=!1,y;if(a)for(let I in a){if(xo(I))continue;const O=a[I];let L;m&&ge(m,L=Ks(I))?!l||!l.includes(L)?u[L]=O:(y||(y={}))[L]=O:Ko(i.emitsOptions,I)||(!(I in d)||O!==d[I])&&(d[I]=O,p=!0)}if(l){const I=Ee(u),O=y||xe;for(let L=0;L<l.length;L++){const q=l[L];u[q]=Ha(m,I,q,O[q],i,!ge(O,q))}}return p}function Ha(i,a,u,d,m,l){const p=i[u];if(p!=null){const y=ge(p,"default");if(y&&d===void 0){const I=p.default;if(p.type!==Function&&!p.skipFactory&&ue(I)){const{propsDefaults:O}=m;u in O?d=O[u]:(Ws(m),d=O[u]=I.call(null,a),ms())}else d=I}p[0]&&(l&&!y?d=!1:p[1]&&(d===""||d===gs(u))&&(d=!0))}return d}function Eh(i,a,u=!1){const d=a.propsCache,m=d.get(i);if(m)return m;const l=i.props,p={},y=[];let I=!1;if(!ue(i)){const L=q=>{I=!0;const[W,se]=Eh(q,a,!0);et(p,W),se&&y.push(...se)};!u&&a.mixins.length&&a.mixins.forEach(L),i.extends&&L(i.extends),i.mixins&&i.mixins.forEach(L)}if(!l&&!I)return Be(i)&&d.set(i,Fs),Fs;if(re(l))for(let L=0;L<l.length;L++){const q=Ks(l[L]);If(q)&&(p[q]=xe)}else if(l)for(const L in l){const q=Ks(L);if(If(q)){const W=l[L],se=p[q]=re(W)||ue(W)?{type:W}:et({},W);if(se){const Pe=Af(Boolean,se.type),he=Af(String,se.type);se[0]=Pe>-1,se[1]=he<0||Pe<he,(Pe>-1||ge(se,"default"))&&y.push(q)}}}const O=[p,y];return Be(i)&&d.set(i,O),O}function If(i){return i[0]!=="$"}function Nf(i){const a=i&&i.toString().match(/^\s*(function|class) (\w+)/);return a?a[2]:i===null?"null":""}function _f(i,a){return Nf(i)===Nf(a)}function Af(i,a){return re(a)?a.findIndex(u=>_f(u,i)):ue(a)&&_f(a,i)?0:-1}const Ih=i=>i[0]==="_"||i==="$stable",Tc=i=>re(i)?i.map(tr):[tr(i)],lv=(i,a,u)=>{if(a._n)return a;const d=Cy((...m)=>Tc(a(...m)),u);return d._c=!1,d},Nh=(i,a,u)=>{const d=i._ctx;for(const m in i){if(Ih(m))continue;const l=i[m];if(ue(l))a[m]=lv(m,l,d);else if(l!=null){const p=Tc(l);a[m]=()=>p}}},_h=(i,a)=>{const u=Tc(a);i.slots.default=()=>u},fv=(i,a)=>{if(i.vnode.shapeFlag&32){const u=a._;u?(i.slots=Ee(a),Lo(a,"_",u)):Nh(a,i.slots={})}else i.slots={},a&&_h(i,a);Lo(i.slots,zo,1)},hv=(i,a,u)=>{const{vnode:d,slots:m}=i;let l=!0,p=xe;if(d.shapeFlag&32){const y=a._;y?u&&y===1?l=!1:(et(m,a),!u&&y===1&&delete m._):(l=!a.$stable,Nh(a,m)),p=a}else a&&(_h(i,a),p={default:1});if(l)for(const y in m)!Ih(y)&&!(y in p)&&delete m[y]};function Xa(i,a,u,d,m=!1){if(re(i)){i.forEach((W,se)=>Xa(W,a&&(re(a)?a[se]:a),u,d,m));return}if(Co(d)&&!m)return;const l=d.shapeFlag&4?Go(d.component)||d.component.proxy:d.el,p=m?null:l,{i:y,r:I}=i,O=a&&a.r,L=y.refs===xe?y.refs={}:y.refs,q=y.setupState;if(O!=null&&O!==I&&(ze(O)?(L[O]=null,ge(q,O)&&(q[O]=null)):ht(O)&&(O.value=null)),ue(I))Fr(I,y,12,[p,L]);else{const W=ze(I),se=ht(I);if(W||se){const Pe=()=>{if(i.f){const he=W?ge(q,I)?q[I]:L[I]:I.value;m?re(he)&&nc(he,l):re(he)?he.includes(l)||he.push(l):W?(L[I]=[l],ge(q,I)&&(q[I]=L[I])):(I.value=[l],i.k&&(L[i.k]=I.value))}else W?(L[I]=p,ge(q,I)&&(q[I]=p)):se&&(I.value=p,i.k&&(L[i.k]=p))};p?(Pe.id=-1,pt(Pe,u)):Pe()}}}const pt=My;function dv(i){return mv(i)}function mv(i,a){const u=$a();u.__VUE__=!0;const{insert:d,remove:m,patchProp:l,createElement:p,createText:y,createComment:I,setText:O,setElementText:L,parentNode:q,nextSibling:W,setScopeId:se=fn,insertStaticContent:Pe}=i,he=(T,w,k,P=null,x=null,U=null,j=!1,M=null,$=!!w.dynamicChildren)=>{if(T===w)return;T&&!Bi(T,w)&&(P=wr(T),It(T,x,U,!0),T=null),w.patchFlag===-2&&($=!1,w.dynamicChildren=null);const{type:D,ref:Z,shapeFlag:K}=w;switch(D){case Wo:Me(T,w,k,P);break;case Vi:qe(T,w,k,P);break;case La:T==null&&Ve(w,k,P,j);break;case zt:Sr(T,w,k,P,x,U,j,M,$);break;default:K&1?Gt(T,w,k,P,x,U,j,M,$):K&6?rr(T,w,k,P,x,U,j,M,$):(K&64||K&128)&&D.process(T,w,k,P,x,U,j,M,$,Er)}Z!=null&&x&&Xa(Z,T&&T.ref,U,w||T,!w)},Me=(T,w,k,P)=>{if(T==null)d(w.el=y(w.children),k,P);else{const x=w.el=T.el;w.children!==T.children&&O(x,w.children)}},qe=(T,w,k,P)=>{T==null?d(w.el=I(w.children||""),k,P):w.el=T.el},Ve=(T,w,k,P)=>{[T.el,T.anchor]=Pe(T.children,w,k,P,T.el,T.anchor)},Ke=({el:T,anchor:w},k,P)=>{let x;for(;T&&T!==w;)x=W(T),d(T,k,P),T=x;d(w,k,P)},ae=({el:T,anchor:w})=>{let k;for(;T&&T!==w;)k=W(T),m(T),T=k;m(w)},Gt=(T,w,k,P,x,U,j,M,$)=>{j=j||w.type==="svg",T==null?F(w,k,P,x,U,j,M,$):E(T,w,x,U,j,M,$)},F=(T,w,k,P,x,U,j,M)=>{let $,D;const{type:Z,props:K,shapeFlag:X,transition:ee,dirs:ie}=T;if($=T.el=p(T.type,U,K&&K.is,K),X&8?L($,T.children):X&16&&dn(T.children,$,null,P,x,U&&Z!=="foreignObject",j,M),ie&&os(T,null,P,"created"),ps($,T,T.scopeId,j,P),K){for(const Te in K)Te!=="value"&&!xo(Te)&&l($,Te,null,K[Te],U,T.children,P,x,Nt);"value"in K&&l($,"value",null,K.value),(D=K.onVnodeBeforeMount)&&er(D,P,T)}ie&&os(T,null,P,"beforeMount");const we=(!x||x&&!x.pendingBranch)&&ee&&!ee.persisted;we&&ee.beforeEnter($),d($,w,k),((D=K&&K.onVnodeMounted)||we||ie)&&pt(()=>{D&&er(D,P,T),we&&ee.enter($),ie&&os(T,null,P,"mounted")},x)},ps=(T,w,k,P,x)=>{if(k&&se(T,k),P)for(let U=0;U<P.length;U++)se(T,P[U]);if(x){let U=x.subTree;if(w===U){const j=x.vnode;ps(T,j,j.scopeId,j.slotScopeIds,x.parent)}}},dn=(T,w,k,P,x,U,j,M,$=0)=>{for(let D=$;D<T.length;D++){const Z=T[D]=M?Ur(T[D]):tr(T[D]);he(null,Z,w,k,P,x,U,j,M)}},E=(T,w,k,P,x,U,j)=>{const M=w.el=T.el;let{patchFlag:$,dynamicChildren:D,dirs:Z}=w;$|=T.patchFlag&16;const K=T.props||xe,X=w.props||xe;let ee;k&&as(k,!1),(ee=X.onVnodeBeforeUpdate)&&er(ee,k,w,T),Z&&os(w,T,k,"beforeUpdate"),k&&as(k,!0);const ie=x&&w.type!=="foreignObject";if(D?Ue(T.dynamicChildren,D,M,k,P,ie,U):j||ve(T,w,M,null,k,P,ie,U,!1),$>0){if($&16)qr(M,w,K,X,k,P,x);else if($&2&&K.class!==X.class&&l(M,"class",null,X.class,x),$&4&&l(M,"style",K.style,X.style,x),$&8){const we=w.dynamicProps;for(let Te=0;Te<we.length;Te++){const be=we[Te],tt=K[be],At=X[be];(At!==tt||be==="value")&&l(M,be,tt,At,x,T.children,k,P,Nt)}}$&1&&T.children!==w.children&&L(M,w.children)}else!j&&D==null&&qr(M,w,K,X,k,P,x);((ee=X.onVnodeUpdated)||Z)&&pt(()=>{ee&&er(ee,k,w,T),Z&&os(w,T,k,"updated")},P)},Ue=(T,w,k,P,x,U,j)=>{for(let M=0;M<w.length;M++){const $=T[M],D=w[M],Z=$.el&&($.type===zt||!Bi($,D)||$.shapeFlag&70)?q($.el):k;he($,D,Z,null,P,x,U,j,!0)}},qr=(T,w,k,P,x,U,j)=>{if(k!==P){if(k!==xe)for(const M in k)!xo(M)&&!(M in P)&&l(T,M,k[M],null,j,w.children,x,U,Nt);for(const M in P){if(xo(M))continue;const $=P[M],D=k[M];$!==D&&M!=="value"&&l(T,M,D,$,j,w.children,x,U,Nt)}"value"in P&&l(T,"value",k.value,P.value)}},Sr=(T,w,k,P,x,U,j,M,$)=>{const D=w.el=T?T.el:y(""),Z=w.anchor=T?T.anchor:y("");let{patchFlag:K,dynamicChildren:X,slotScopeIds:ee}=w;ee&&(M=M?M.concat(ee):ee),T==null?(d(D,k,P),d(Z,k,P),dn(w.children,k,Z,x,U,j,M,$)):K>0&&K&64&&X&&T.dynamicChildren?(Ue(T.dynamicChildren,X,k,x,U,j,M),(w.key!=null||x&&w===x.subTree)&&Ah(T,w,!0)):ve(T,w,k,Z,x,U,j,M,$)},rr=(T,w,k,P,x,U,j,M,$)=>{w.slotScopeIds=M,T==null?w.shapeFlag&512?x.ctx.activate(w,k,P,j,$):ys(w,k,P,x,U,j,$):Wi(T,w,$)},ys=(T,w,k,P,x,U,j)=>{const M=T.component=Nv(T,P,x);if(yh(T)&&(M.ctx.renderer=Er),_v(M),M.asyncDep){if(x&&x.registerDep(M,Ge),!T.el){const $=M.subTree=ds(Vi);qe(null,$,w,k)}return}Ge(M,T,w,k,x,U,j)},Wi=(T,w,k)=>{const P=w.component=T.component;if(By(T,w,k))if(P.asyncDep&&!P.asyncResolved){Ce(P,w,k);return}else P.next=w,ky(P.update),P.update();else w.el=T.el,P.vnode=w},Ge=(T,w,k,P,x,U,j)=>{const M=()=>{if(T.isMounted){let{next:Z,bu:K,u:X,parent:ee,vnode:ie}=T,we=Z,Te;as(T,!1),Z?(Z.el=ie.el,Ce(T,Z,j)):Z=ie,K&&Po(K),(Te=Z.props&&Z.props.onVnodeBeforeUpdate)&&er(Te,ee,Z,ie),as(T,!0);const be=Da(T),tt=T.subTree;T.subTree=be,he(tt,be,q(tt.el),wr(tt),T,x,U),Z.el=be.el,we===null&&Ly(T,be.el),X&&pt(X,x),(Te=Z.props&&Z.props.onVnodeUpdated)&&pt(()=>er(Te,ee,Z,ie),x)}else{let Z;const{el:K,props:X}=w,{bm:ee,m:ie,parent:we}=T,Te=Co(w);if(as(T,!1),ee&&Po(ee),!Te&&(Z=X&&X.onVnodeBeforeMount)&&er(Z,we,w),as(T,!0),K&&_t){const be=()=>{T.subTree=Da(T),_t(K,T.subTree,T,x,null)};Te?w.type.__asyncLoader().then(()=>!T.isUnmounted&&be()):be()}else{const be=T.subTree=Da(T);he(null,be,k,P,T,x,U),w.el=be.el}if(ie&&pt(ie,x),!Te&&(Z=X&&X.onVnodeMounted)){const be=w;pt(()=>er(Z,we,be),x)}(w.shapeFlag&256||we&&Co(we.vnode)&&we.vnode.shapeFlag&256)&&T.a&&pt(T.a,x),T.isMounted=!0,w=k=P=null}},$=T.effect=new cc(M,()=>yc(D),T.scope),D=T.update=()=>$.run();D.id=T.uid,as(T,!0),D()},Ce=(T,w,k)=>{w.component=T;const P=T.vnode.props;T.vnode=w,T.next=null,uv(T,w.props,P,k),hv(T,w.children,k),zs(),pf(),Gs()},ve=(T,w,k,P,x,U,j,M,$=!1)=>{const D=T&&T.children,Z=T?T.shapeFlag:0,K=w.children,{patchFlag:X,shapeFlag:ee}=w;if(X>0){if(X&128){Vr(D,K,k,P,x,U,j,M,$);return}else if(X&256){mn(D,K,k,P,x,U,j,M,$);return}}ee&8?(Z&16&&Nt(D,x,U),K!==D&&L(k,K)):Z&16?ee&16?Vr(D,K,k,P,x,U,j,M,$):Nt(D,x,U,!0):(Z&8&&L(k,""),ee&16&&dn(K,k,P,x,U,j,M,$))},mn=(T,w,k,P,x,U,j,M,$)=>{T=T||Fs,w=w||Fs;const D=T.length,Z=w.length,K=Math.min(D,Z);let X;for(X=0;X<K;X++){const ee=w[X]=$?Ur(w[X]):tr(w[X]);he(T[X],ee,k,null,x,U,j,M,$)}D>Z?Nt(T,x,U,!0,!1,K):dn(w,k,P,x,U,j,M,$,K)},Vr=(T,w,k,P,x,U,j,M,$)=>{let D=0;const Z=w.length;let K=T.length-1,X=Z-1;for(;D<=K&&D<=X;){const ee=T[D],ie=w[D]=$?Ur(w[D]):tr(w[D]);if(Bi(ee,ie))he(ee,ie,k,null,x,U,j,M,$);else break;D++}for(;D<=K&&D<=X;){const ee=T[K],ie=w[X]=$?Ur(w[X]):tr(w[X]);if(Bi(ee,ie))he(ee,ie,k,null,x,U,j,M,$);else break;K--,X--}if(D>K){if(D<=X){const ee=X+1,ie=ee<Z?w[ee].el:P;for(;D<=X;)he(null,w[D]=$?Ur(w[D]):tr(w[D]),k,ie,x,U,j,M,$),D++}}else if(D>X)for(;D<=K;)It(T[D],x,U,!0),D++;else{const ee=D,ie=D,we=new Map;for(D=ie;D<=X;D++){const it=w[D]=$?Ur(w[D]):tr(w[D]);it.key!=null&&we.set(it.key,D)}let Te,be=0;const tt=X-ie+1;let At=!1,Xs=0;const Ir=new Array(tt);for(D=0;D<tt;D++)Ir[D]=0;for(D=ee;D<=K;D++){const it=T[D];if(be>=tt){It(it,x,U,!0);continue}let vt;if(it.key!=null)vt=we.get(it.key);else for(Te=ie;Te<=X;Te++)if(Ir[Te-ie]===0&&Bi(it,w[Te])){vt=Te;break}vt===void 0?It(it,x,U,!0):(Ir[vt-ie]=D+1,vt>=Xs?Xs=vt:At=!0,he(it,w[vt],k,null,x,U,j,M,$),be++)}const Gi=At?gv(Ir):Fs;for(Te=Gi.length-1,D=tt-1;D>=0;D--){const it=ie+D,vt=w[it],Zs=it+1<Z?w[it+1].el:P;Ir[D]===0?he(null,vt,k,Zs,x,U,j,M,$):At&&(Te<0||D!==Gi[Te]?gn(vt,k,Zs,2):Te--)}}},gn=(T,w,k,P,x=null)=>{const{el:U,type:j,transition:M,children:$,shapeFlag:D}=T;if(D&6){gn(T.component.subTree,w,k,P);return}if(D&128){T.suspense.move(w,k,P);return}if(D&64){j.move(T,w,k,Er);return}if(j===zt){d(U,w,k);for(let K=0;K<$.length;K++)gn($[K],w,k,P);d(T.anchor,w,k);return}if(j===La){Ke(T,w,k);return}if(P!==2&&D&1&&M)if(P===0)M.beforeEnter(U),d(U,w,k),pt(()=>M.enter(U),x);else{const{leave:K,delayLeave:X,afterLeave:ee}=M,ie=()=>d(U,w,k),we=()=>{K(U,()=>{ie(),ee&&ee()})};X?X(U,ie,we):we()}else d(U,w,k)},It=(T,w,k,P=!1,x=!1)=>{const{type:U,props:j,ref:M,children:$,dynamicChildren:D,shapeFlag:Z,patchFlag:K,dirs:X}=T;if(M!=null&&Xa(M,null,k,T,!0),Z&256){w.ctx.deactivate(T);return}const ee=Z&1&&X,ie=!Co(T);let we;if(ie&&(we=j&&j.onVnodeBeforeUnmount)&&er(we,w,T),Z&6)Se(T.component,k,P);else{if(Z&128){T.suspense.unmount(k,P);return}ee&&os(T,null,w,"beforeUnmount"),Z&64?T.type.remove(T,w,k,x,Er,P):D&&(U!==zt||K>0&&K&64)?Nt(D,w,k,!1,!0):(U===zt&&K&384||!x&&Z&16)&&Nt($,w,k),P&&zi(T)}(ie&&(we=j&&j.onVnodeUnmounted)||ee)&&pt(()=>{we&&er(we,w,T),ee&&os(T,null,w,"unmounted")},k)},zi=T=>{const{type:w,el:k,anchor:P,transition:x}=T;if(w===zt){Ie(k,P);return}if(w===La){ae(T);return}const U=()=>{m(k),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(T.shapeFlag&1&&x&&!x.persisted){const{leave:j,delayLeave:M}=x,$=()=>j(k,U);M?M(T.el,U,$):$()}else U()},Ie=(T,w)=>{let k;for(;T!==w;)k=W(T),m(T),T=k;m(w)},Se=(T,w,k)=>{const{bum:P,scope:x,update:U,subTree:j,um:M}=T;P&&Po(P),x.stop(),U&&(U.active=!1,It(j,T,w,k)),M&&pt(M,w),pt(()=>{T.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Nt=(T,w,k,P=!1,x=!1,U=0)=>{for(let j=U;j<T.length;j++)It(T[j],w,k,P,x)},wr=T=>T.shapeFlag&6?wr(T.component.subTree):T.shapeFlag&128?T.suspense.next():W(T.anchor||T.el),Kr=(T,w,k)=>{T==null?w._vnode&&It(w._vnode,null,null,!0):he(w._vnode||null,T,w,null,null,null,k),pf(),fh(),w._vnode=T},Er={p:he,um:It,m:gn,r:zi,mt:ys,mc:dn,pc:ve,pbc:Ue,n:wr,o:i};let Hs,_t;return a&&([Hs,_t]=a(Er)),{render:Kr,hydrate:Hs,createApp:ov(Kr,Hs)}}function as({effect:i,update:a},u){i.allowRecurse=a.allowRecurse=u}function Ah(i,a,u=!1){const d=i.children,m=a.children;if(re(d)&&re(m))for(let l=0;l<d.length;l++){const p=d[l];let y=m[l];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=m[l]=Ur(m[l]),y.el=p.el),u||Ah(p,y)),y.type===Wo&&(y.el=p.el)}}function gv(i){const a=i.slice(),u=[0];let d,m,l,p,y;const I=i.length;for(d=0;d<I;d++){const O=i[d];if(O!==0){if(m=u[u.length-1],i[m]<O){a[d]=m,u.push(d);continue}for(l=0,p=u.length-1;l<p;)y=l+p>>1,i[u[y]]<O?l=y+1:p=y;O<i[u[l]]&&(l>0&&(a[d]=u[l-1]),u[l]=d)}}for(l=u.length,p=u[l-1];l-- >0;)u[l]=p,p=a[p];return u}const pv=i=>i.__isTeleport,zt=Symbol.for("v-fgt"),Wo=Symbol.for("v-txt"),Vi=Symbol.for("v-cmt"),La=Symbol.for("v-stc"),$i=[];let ln=null;function gr(i=!1){$i.push(ln=i?null:[])}function yv(){$i.pop(),ln=$i[$i.length-1]||null}let Ki=1;function kf(i){Ki+=i}function vv(i){return i.dynamicChildren=Ki>0?ln||Fs:null,yv(),Ki>0&&ln&&ln.push(i),i}function pr(i,a,u,d,m,l){return vv(ft(i,a,u,d,m,l,!0))}function Tv(i){return i?i.__v_isVNode===!0:!1}function Bi(i,a){return i.type===a.type&&i.key===a.key}const zo="__vInternal",kh=({key:i})=>i!=null?i:null,Ro=({ref:i,ref_key:a,ref_for:u})=>(typeof i=="number"&&(i=""+i),i!=null?ze(i)||ht(i)||ue(i)?{i:un,r:i,k:a,f:!!u}:i:null);function ft(i,a=null,u=null,d=0,m=null,l=i===zt?0:1,p=!1,y=!1){const I={__v_isVNode:!0,__v_skip:!0,type:i,props:a,key:a&&kh(a),ref:a&&Ro(a),scopeId:mh,slotScopeIds:null,children:u,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:d,dynamicProps:m,dynamicChildren:null,appContext:null,ctx:un};return y?(bc(I,u),l&128&&i.normalize(I)):u&&(I.shapeFlag|=ze(u)?8:16),Ki>0&&!p&&ln&&(I.patchFlag>0||l&6)&&I.patchFlag!==32&&ln.push(I),I}const ds=bv;function bv(i,a=null,u=null,d=0,m=null,l=!1){if((!i||i===Zy)&&(i=Vi),Tv(i)){const y=Ys(i,a,!0);return u&&bc(y,u),Ki>0&&!l&&ln&&(y.shapeFlag&6?ln[ln.indexOf(i)]=y:ln.push(y)),y.patchFlag|=-2,y}if(xv(i)&&(i=i.__vccOpts),a){a=Sv(a);let{class:y,style:I}=a;y&&!ze(y)&&(a.class=oc(y)),Be(I)&&(oh(I)&&!re(I)&&(I=et({},I)),a.style=ic(I))}const p=ze(i)?1:Jy(i)?128:pv(i)?64:Be(i)?4:ue(i)?2:0;return ft(i,a,u,d,m,p,l,!0)}function Sv(i){return i?oh(i)||zo in i?et({},i):i:null}function Ys(i,a,u=!1){const{props:d,ref:m,patchFlag:l,children:p}=i,y=a?wv(d||{},a):d;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:y,key:y&&kh(y),ref:a&&a.ref?u&&m?re(m)?m.concat(Ro(a)):[m,Ro(a)]:Ro(a):m,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:p,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:a&&i.type!==zt?l===-1?16:l|16:l,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Ys(i.ssContent),ssFallback:i.ssFallback&&Ys(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce}}function Oh(i=" ",a=0){return ds(Wo,null,i,a)}function tr(i){return i==null||typeof i=="boolean"?ds(Vi):re(i)?ds(zt,null,i.slice()):typeof i=="object"?Ur(i):ds(Wo,null,String(i))}function Ur(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Ys(i)}function bc(i,a){let u=0;const{shapeFlag:d}=i;if(a==null)a=null;else if(re(a))u=16;else if(typeof a=="object")if(d&65){const m=a.default;m&&(m._c&&(m._d=!1),bc(i,m()),m._c&&(m._d=!0));return}else{u=32;const m=a._;!m&&!(zo in a)?a._ctx=un:m===3&&un&&(un.slots._===1?a._=1:(a._=2,i.patchFlag|=1024))}else ue(a)?(a={default:a,_ctx:un},u=32):(a=String(a),d&64?(u=16,a=[Oh(a)]):u=8);i.children=a,i.shapeFlag|=u}function wv(...i){const a={};for(let u=0;u<i.length;u++){const d=i[u];for(const m in d)if(m==="class")a.class!==d.class&&(a.class=oc([a.class,d.class]));else if(m==="style")a.style=ic([a.style,d.style]);else if($o(m)){const l=a[m],p=d[m];p&&l!==p&&!(re(l)&&l.includes(p))&&(a[m]=l?[].concat(l,p):p)}else m!==""&&(a[m]=d[m])}return a}function er(i,a,u,d=null){hn(i,a,7,[u,d])}const Ev=Sh();let Iv=0;function Nv(i,a,u){const d=i.type,m=(a?a.appContext:i.appContext)||Ev,l={uid:Iv++,vnode:i,type:d,parent:a,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,scope:new qp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Eh(d,m),emitsOptions:dh(d,m),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:d.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:u,suspenseId:u?u.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=a?a.root:l,l.emit=Py.bind(null,l),i.ce&&i.ce(l),l}let st=null,Sc,Us,Of="__VUE_INSTANCE_SETTERS__";(Us=$a()[Of])||(Us=$a()[Of]=[]),Us.push(i=>st=i),Sc=i=>{Us.length>1?Us.forEach(a=>a(i)):Us[0](i)};const Ws=i=>{Sc(i),i.scope.on()},ms=()=>{st&&st.scope.off(),Sc(null)};function xh(i){return i.vnode.shapeFlag&4}let Yi=!1;function _v(i,a=!1){Yi=a;const{props:u,children:d}=i.vnode,m=xh(i);cv(i,u,m,a),fv(i,d);const l=m?Av(i,a):void 0;return Yi=!1,l}function Av(i,a){const u=i.type;i.accessCache=Object.create(null),i.proxy=ah(new Proxy(i.ctx,Qy));const{setup:d}=u;if(d){const m=i.setupContext=d.length>1?Ov(i):null;Ws(i),zs();const l=Fr(d,i,0,[i.props,m]);if(Gs(),ms(),qf(l)){if(l.then(ms,ms),a)return l.then(p=>{xf(i,p,a)}).catch(p=>{Vo(p,i,0)});i.asyncDep=l}else xf(i,l,a)}else Ph(i,a)}function xf(i,a,u){ue(a)?i.type.__ssrInlineRender?i.ssrRender=a:i.render=a:Be(a)&&(i.setupState=ch(a)),Ph(i,u)}let Pf;function Ph(i,a,u){const d=i.type;if(!i.render){if(!a&&Pf&&!d.render){const m=d.template||vc(i).template;if(m){const{isCustomElement:l,compilerOptions:p}=i.appContext.config,{delimiters:y,compilerOptions:I}=d,O=et(et({isCustomElement:l,delimiters:y},p),I);d.render=Pf(m,O)}}i.render=d.render||fn}Ws(i),zs(),ev(i),Gs(),ms()}function kv(i){return i.attrsProxy||(i.attrsProxy=new Proxy(i.attrs,{get(a,u){return yt(i,"get","$attrs"),a[u]}}))}function Ov(i){const a=u=>{i.exposed=u||{}};return{get attrs(){return kv(i)},slots:i.slots,emit:i.emit,expose:a}}function Go(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(ch(ah(i.exposed)),{get(a,u){if(u in a)return a[u];if(u in Ui)return Ui[u](i)},has(a,u){return u in a||u in Ui}}))}function xv(i){return ue(i)&&"__vccOpts"in i}const Pv=(i,a)=>Iy(i,a,Yi),Cv=Symbol.for("v-scx"),Dv=()=>Do(Cv),Rv="3.3.4",Bv="http://www.w3.org/2000/svg",ls=typeof document<"u"?document:null,Cf=ls&&ls.createElement("template"),Lv={insert:(i,a,u)=>{a.insertBefore(i,u||null)},remove:i=>{const a=i.parentNode;a&&a.removeChild(i)},createElement:(i,a,u,d)=>{const m=a?ls.createElementNS(Bv,i):ls.createElement(i,u?{is:u}:void 0);return i==="select"&&d&&d.multiple!=null&&m.setAttribute("multiple",d.multiple),m},createText:i=>ls.createTextNode(i),createComment:i=>ls.createComment(i),setText:(i,a)=>{i.nodeValue=a},setElementText:(i,a)=>{i.textContent=a},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>ls.querySelector(i),setScopeId(i,a){i.setAttribute(a,"")},insertStaticContent(i,a,u,d,m,l){const p=u?u.previousSibling:a.lastChild;if(m&&(m===l||m.nextSibling))for(;a.insertBefore(m.cloneNode(!0),u),!(m===l||!(m=m.nextSibling)););else{Cf.innerHTML=d?`<svg>${i}</svg>`:i;const y=Cf.content;if(d){const I=y.firstChild;for(;I.firstChild;)y.appendChild(I.firstChild);y.removeChild(I)}a.insertBefore(y,u)}return[p?p.nextSibling:a.firstChild,u?u.previousSibling:a.lastChild]}};function Jv(i,a,u){const d=i._vtc;d&&(a=(a?[a,...d]:[...d]).join(" ")),a==null?i.removeAttribute("class"):u?i.setAttribute("class",a):i.className=a}function Mv(i,a,u){const d=i.style,m=ze(u);if(u&&!m){if(a&&!ze(a))for(const l in a)u[l]==null&&Za(d,l,"");for(const l in u)Za(d,l,u[l])}else{const l=d.display;m?a!==u&&(d.cssText=u):a&&i.removeAttribute("style"),"_vod"in i&&(d.display=l)}}const Df=/\s*!important$/;function Za(i,a,u){if(re(u))u.forEach(d=>Za(i,a,d));else if(u==null&&(u=""),a.startsWith("--"))i.setProperty(a,u);else{const d=Uv(i,a);Df.test(u)?i.setProperty(gs(d),u.replace(Df,""),"important"):i[d]=u}}const Rf=["Webkit","Moz","ms"],Ja={};function Uv(i,a){const u=Ja[a];if(u)return u;let d=Ks(a);if(d!=="filter"&&d in i)return Ja[a]=d;d=Yf(d);for(let m=0;m<Rf.length;m++){const l=Rf[m]+d;if(l in i)return Ja[a]=l}return a}const Bf="http://www.w3.org/1999/xlink";function $v(i,a,u,d,m){if(d&&a.startsWith("xlink:"))u==null?i.removeAttributeNS(Bf,a.slice(6,a.length)):i.setAttributeNS(Bf,a,u);else{const l=jp(a);u==null||l&&!Wf(u)?i.removeAttribute(a):i.setAttribute(a,l?"":u)}}function Fv(i,a,u,d,m,l,p){if(a==="innerHTML"||a==="textContent"){d&&p(d,m,l),i[a]=u==null?"":u;return}const y=i.tagName;if(a==="value"&&y!=="PROGRESS"&&!y.includes("-")){i._value=u;const O=y==="OPTION"?i.getAttribute("value"):i.value,L=u==null?"":u;O!==L&&(i.value=L),u==null&&i.removeAttribute(a);return}let I=!1;if(u===""||u==null){const O=typeof i[a];O==="boolean"?u=Wf(u):u==null&&O==="string"?(u="",I=!0):O==="number"&&(u=0,I=!0)}try{i[a]=u}catch{}I&&i.removeAttribute(a)}function $s(i,a,u,d){i.addEventListener(a,u,d)}function jv(i,a,u,d){i.removeEventListener(a,u,d)}function qv(i,a,u,d,m=null){const l=i._vei||(i._vei={}),p=l[a];if(d&&p)p.value=d;else{const[y,I]=Vv(a);if(d){const O=l[a]=Wv(d,m);$s(i,y,O,I)}else p&&(jv(i,y,p,I),l[a]=void 0)}}const Lf=/(?:Once|Passive|Capture)$/;function Vv(i){let a;if(Lf.test(i)){a={};let d;for(;d=i.match(Lf);)i=i.slice(0,i.length-d[0].length),a[d[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):gs(i.slice(2)),a]}let Ma=0;const Kv=Promise.resolve(),Yv=()=>Ma||(Kv.then(()=>Ma=0),Ma=Date.now());function Wv(i,a){const u=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=u.attached)return;hn(zv(d,u.value),a,5,[d])};return u.value=i,u.attached=Yv(),u}function zv(i,a){if(re(a)){const u=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{u.call(i),i._stopped=!0},a.map(d=>m=>!m._stopped&&d&&d(m))}else return a}const Jf=/^on[a-z]/,Gv=(i,a,u,d,m=!1,l,p,y,I)=>{a==="class"?Jv(i,d,m):a==="style"?Mv(i,u,d):$o(a)?tc(a)||qv(i,a,u,d,p):(a[0]==="."?(a=a.slice(1),!0):a[0]==="^"?(a=a.slice(1),!1):Hv(i,a,d,m))?Fv(i,a,d,l,p,y,I):(a==="true-value"?i._trueValue=d:a==="false-value"&&(i._falseValue=d),$v(i,a,d,m))};function Hv(i,a,u,d){return d?!!(a==="innerHTML"||a==="textContent"||a in i&&Jf.test(a)&&ue(u)):a==="spellcheck"||a==="draggable"||a==="translate"||a==="form"||a==="list"&&i.tagName==="INPUT"||a==="type"&&i.tagName==="TEXTAREA"||Jf.test(a)&&ze(u)?!1:a in i}const Mf=i=>{const a=i.props["onUpdate:modelValue"]||!1;return re(a)?u=>Po(a,u):a};function Xv(i){i.target.composing=!0}function Uf(i){const a=i.target;a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}const $f={created(i,{modifiers:{lazy:a,trim:u,number:d}},m){i._assign=Mf(m);const l=d||m.props&&m.props.type==="number";$s(i,a?"change":"input",p=>{if(p.target.composing)return;let y=i.value;u&&(y=y.trim()),l&&(y=Ua(y)),i._assign(y)}),u&&$s(i,"change",()=>{i.value=i.value.trim()}),a||($s(i,"compositionstart",Xv),$s(i,"compositionend",Uf),$s(i,"change",Uf))},mounted(i,{value:a}){i.value=a==null?"":a},beforeUpdate(i,{value:a,modifiers:{lazy:u,trim:d,number:m}},l){if(i._assign=Mf(l),i.composing||document.activeElement===i&&i.type!=="range"&&(u||d&&i.value.trim()===a||(m||i.type==="number")&&Ua(i.value)===a))return;const p=a==null?"":a;i.value!==p&&(i.value=p)}},Zv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Oo=(i,a)=>u=>{if(!("key"in u))return;const d=gs(u.key);if(a.some(m=>m===d||Zv[m]===d))return i(u)},Qv=et({patchProp:Gv},Lv);let Ff;function eT(){return Ff||(Ff=dv(Qv))}const tT=(...i)=>{const a=eT().createApp(...i),{mount:u}=a;return a.mount=d=>{const m=nT(d);if(!m)return;const l=a._component;!ue(l)&&!l.render&&!l.template&&(l.template=m.innerHTML),m.innerHTML="";const p=u(m,!1,m instanceof SVGElement);return m instanceof Element&&(m.removeAttribute("v-cloak"),m.setAttribute("data-v-app","")),p},a};function nT(i){return ze(i)?document.querySelector(i):i}var rT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sT(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Qa={exports:{}};(function(i,a){(function(u,d){d(a)})(rT,function(u){var d=Object.defineProperty,m=(n,e,t)=>e in n?d(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,l=(n,e,t)=>(m(n,typeof e!="symbol"?e+"":e,t),t),p;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(p||(p={}));function y(n,e){if(!n)throw new Error(e)}const I=34028234663852886e22,O=-34028234663852886e22,L=4294967295,q=2147483647,W=-2147483648;function se(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>q||n<W)throw new Error("invalid int 32: "+n)}function Pe(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>L||n<0)throw new Error("invalid uint 32: "+n)}function he(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(!!Number.isFinite(n)&&(n>I||n<O))throw new Error("invalid float 32: "+n)}const Me=Symbol("@bufbuild/protobuf/enum-type");function qe(n){const e=n[Me];return y(e,"missing enum type on enum object"),e}function Ve(n,e,t,r){n[Me]=Ke(e,t.map(s=>({no:s.no,name:s.name,localName:n[s.no]})))}function Ke(n,e,t){const r=Object.create(null),s=Object.create(null),o=[];for(const c of e){const f=Gt(c);o.push(f),r[c.name]=f,s[c.no]=f}return{typeName:n,values:o,findName(c){return r[c]},findNumber(c){return s[c]}}}function ae(n,e,t){const r={};for(const s of e){const o=Gt(s);r[o.localName]=o.no,r[o.no]=o.localName}return Ve(r,n,e),r}function Gt(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class F{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),s=r.runtime.bin,o=s.makeReadOptions(t);return s.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,t){const r=this.getType(),s=r.runtime.json,o=s.makeReadOptions(t);return s.readMessage(r,e,o,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(s){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${s instanceof Error?s.message:String(s)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,s=r.makeWriteOptions(e),o=s.writerFactory();return r.writeMessage(this,o,s),o.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,s=r.makeWriteOptions(e);return r.writeMessage(this,s)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function ps(n,e,t,r){var s;const o=(s=r==null?void 0:r.localName)!==null&&s!==void 0?s:e.substring(e.lastIndexOf(".")+1),c={[o]:function(f){n.util.initFields(this),n.util.initPartial(f,this)}}[o];return Object.setPrototypeOf(c.prototype,new F),Object.assign(c,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(f,h){return new c().fromBinary(f,h)},fromJson(f,h){return new c().fromJson(f,h)},fromJsonString(f,h){return new c().fromJsonString(f,h)},equals(f,h){return n.util.equals(c,f,h)}}),c}function dn(n,e,t,r){return{syntax:n,json:e,bin:t,util:r,makeMessageType(s,o,c){return ps(this,s,o,c)},makeEnum:ae,makeEnumType:Ke,getEnumType:qe}}var E;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(E||(E={}));var Ue;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(Ue||(Ue={}));function qr(){let n=0,e=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(n|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,(t&128)==0)return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function Sr(n,e,t){for(let o=0;o<28;o=o+7){const c=n>>>o,f=!(c>>>7==0&&e==0),h=(f?c|128:c)&255;if(t.push(h),!f)return}const r=n>>>28&15|(e&7)<<4,s=e>>3!=0;if(t.push((s?r|128:r)&255),!!s){for(let o=3;o<31;o=o+7){const c=e>>>o,f=c>>>7!=0,h=(f?c|128:c)&255;if(t.push(h),!f)return}t.push(e>>>31&1)}}const rr=4294967296;function ys(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,s=0;function o(c,f){const h=Number(n.slice(c,f));s*=t,r=r*t+h,r>=rr&&(s=s+(r/rr|0),r=r%rr)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?mn(r,s):ve(r,s)}function Wi(n,e){let t=ve(n,e);const r=t.hi&2147483648;r&&(t=mn(t.lo,t.hi));const s=Ge(t.lo,t.hi);return r?"-"+s:s}function Ge(n,e){if({lo:n,hi:e}=Ce(n,e),e<=2097151)return String(rr*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,s=e>>16&65535;let o=t+r*6777216+s*6710656,c=r+s*8147497,f=s*2;const h=1e7;return o>=h&&(c+=Math.floor(o/h),o%=h),c>=h&&(f+=Math.floor(c/h),c%=h),f.toString()+Vr(c)+Vr(o)}function Ce(n,e){return{lo:n>>>0,hi:e>>>0}}function ve(n,e){return{lo:n|0,hi:e|0}}function mn(n,e){return e=~e,n?n=~n+1:e+=1,ve(n,e)}const Vr=n=>{const e=String(n);return"0000000".slice(e.length)+e};function gn(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function It(){let n=this.buf[this.pos++],e=n&127;if((n&128)==0)return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,(n&128)==0)return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,(n&128)==0)return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,(n&128)==0)return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;(n&128)!==0&&t<10;t++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function zi(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const s=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),c=BigInt("0"),f=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>o||g<s)throw new Error(`int64 invalid: ${h}`);return g},uParse(h){const g=typeof h=="bigint"?h:BigInt(h);if(g>f||g<c)throw new Error(`uint64 invalid: ${h}`);return g},enc(h){return n.setBigInt64(0,this.parse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(h){return n.setBigInt64(0,this.uParse(h),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigInt64(0,!0)},uDec(h,g){return n.setInt32(0,h,!0),n.setInt32(4,g,!0),n.getBigUint64(0,!0)}}}const t=s=>y(/^-?[0-9]+$/.test(s),`int64 invalid: ${s}`),r=s=>y(/^[0-9]+$/.test(s),`uint64 invalid: ${s}`);return{zero:"0",supported:!1,parse(s){return typeof s!="string"&&(s=s.toString()),t(s),s},uParse(s){return typeof s!="string"&&(s=s.toString()),r(s),s},enc(s){return typeof s!="string"&&(s=s.toString()),t(s),ys(s)},uEnc(s){return typeof s!="string"&&(s=s.toString()),r(s),ys(s)},dec(s,o){return Wi(s,o)},uDec(s,o){return Ge(s,o)}}}const Ie=zi();var Se;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(Se||(Se={}));class Nt{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let t=new Uint8Array(e),r=0;for(let s=0;s<this.chunks.length;s++)t.set(this.chunks[s],r),r+=this.chunks[s].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Pe(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return se(e),gn(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){he(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Pe(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){se(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return se(e),e=(e<<1^e>>31)>>>0,gn(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),s=Ie.enc(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),s=Ie.uEnc(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(t)}int64(e){let t=Ie.enc(e);return Sr(t.lo,t.hi,this.buf),this}sint64(e){let t=Ie.enc(e),r=t.hi>>31,s=t.lo<<1^r,o=(t.hi<<1|t.lo>>>31)^r;return Sr(s,o,this.buf),this}uint64(e){let t=Ie.uEnc(e);return Sr(t.lo,t.hi,this.buf),this}}class wr{constructor(e,t){this.varint64=qr,this.uint32=It,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t!=null?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e){let t=this.pos;switch(e){case Se.Varint:for(;this.buf[this.pos++]&128;);break;case Se.Bit64:this.pos+=4;case Se.Bit32:this.pos+=4;break;case Se.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Se.StartGroup:let s;for(;(s=this.tag()[1])!==Se.EndGroup;)this.skip(s);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Ie.dec(...this.varint64())}uint64(){return Ie.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,Ie.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Ie.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Ie.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Kr(n,e){return e instanceof F||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}function Er(n){if(n.fieldKind==="message"&&!n.repeated&&n.oneof==null)return Hs[n.message.typeName]}const Hs={"google.protobuf.DoubleValue":E.DOUBLE,"google.protobuf.FloatValue":E.FLOAT,"google.protobuf.Int64Value":E.INT64,"google.protobuf.UInt64Value":E.UINT64,"google.protobuf.Int32Value":E.INT32,"google.protobuf.UInt32Value":E.UINT32,"google.protobuf.BoolValue":E.BOOL,"google.protobuf.StringValue":E.STRING,"google.protobuf.BytesValue":E.BYTES};function _t(n,e,t){if(e===t)return!0;if(n==E.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==t}return!1}function T(n,e){switch(n){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==0?Ie.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function w(n,e){const t=e===void 0;let r=Se.Varint,s=e===0;switch(n){case E.STRING:s=t||!e.length,r=Se.LengthDelimited;break;case E.BOOL:s=e===!1;break;case E.DOUBLE:r=Se.Bit64;break;case E.FLOAT:r=Se.Bit32;break;case E.INT64:s=t||e==0;break;case E.UINT64:s=t||e==0;break;case E.FIXED64:s=t||e==0,r=Se.Bit64;break;case E.BYTES:s=t||!e.byteLength,r=Se.LengthDelimited;break;case E.FIXED32:r=Se.Bit32;break;case E.SFIXED32:r=Se.Bit32;break;case E.SFIXED64:s=t||e==0,r=Se.Bit64;break;case E.SINT64:s=t||e==0;break}const o=E[n].toLowerCase();return[r,o,t||s]}const k=Symbol("@bufbuild/protobuf/unknown-fields"),P={readUnknownFields:!0,readerFactory:n=>new wr(n)},x={writeUnknownFields:!0,writerFactory:()=>new Nt};function U(n){return n?Object.assign(Object.assign({},P),n):P}function j(n){return n?Object.assign(Object.assign({},x),n):x}function M(){return{makeReadOptions:U,makeWriteOptions:j,listUnknownFields(n){var e;return(e=n[k])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[k]},writeUnknownFields(n,e){const r=n[k];if(r)for(const s of r)e.tag(s.no,s.wireType).raw(s.data)},onUnknownField(n,e,t,r){const s=n;Array.isArray(s[k])||(s[k]=[]),s[k].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,s){const o=n.getType(),c=s?e.len:e.pos+t;let f,h;for(;e.pos<c&&([f,h]=e.tag(),h!=Se.EndGroup);){const g=o.fields.find(f);if(!g){const _=e.skip(h);r.readUnknownFields&&this.onUnknownField(n,f,h,_);continue}let v=n,A=g.repeated,b=g.localName;switch(g.oneof&&(v=v[g.oneof.localName],v.case!=b&&delete v.value,v.case=b,b="value"),g.kind){case"scalar":case"enum":const _=g.kind=="enum"?E.INT32:g.T;let J=K;if(g.kind=="scalar"&&g.L>0&&(J=Z),A){let ke=v[b];if(h==Se.LengthDelimited&&_!=E.STRING&&_!=E.BYTES){let de=e.uint32()+e.pos;for(;e.pos<de;)ke.push(J(e,_))}else ke.push(J(e,_))}else v[b]=J(e,_);break;case"message":const V=g.T;A?v[b].push($(e,new V,r,g)):v[b]instanceof F?$(e,v[b],r,g):(v[b]=$(e,new V,r,g),V.fieldWrapper&&!g.oneof&&!g.repeated&&(v[b]=V.fieldWrapper.unwrapField(v[b])));break;case"map":let[Y,oe]=D(g,e,r);v[b][Y]=oe;break}}if(s&&(h!=Se.EndGroup||f!==t))throw new Error("invalid end group tag")}}}function $(n,e,t,r){const s=e.getType().runtime.bin,o=r==null?void 0:r.delimited;return s.readMessage(e,n,o?r==null?void 0:r.no:n.uint32(),t,o),e}function D(n,e,t){const r=e.uint32(),s=e.pos+r;let o,c;for(;e.pos<s;){let[f]=e.tag();switch(f){case 1:o=K(e,n.K);break;case 2:switch(n.V.kind){case"scalar":c=K(e,n.V.T);break;case"enum":c=e.int32();break;case"message":c=$(e,new n.V.T,t,void 0);break}break}}if(o===void 0){let f=T(n.K,Ue.BIGINT);o=n.K==E.BOOL?f.toString():f}if(typeof o!="string"&&typeof o!="number"&&(o=o.toString()),c===void 0)switch(n.V.kind){case"scalar":c=T(n.V.T,Ue.BIGINT);break;case"enum":c=0;break;case"message":c=new n.V.T;break}return[o,c]}function Z(n,e){const t=K(n,e);return typeof t=="bigint"?t.toString():t}function K(n,e){switch(e){case E.STRING:return n.string();case E.BOOL:return n.bool();case E.DOUBLE:return n.double();case E.FLOAT:return n.float();case E.INT32:return n.int32();case E.INT64:return n.int64();case E.UINT64:return n.uint64();case E.FIXED64:return n.fixed64();case E.BYTES:return n.bytes();case E.FIXED32:return n.fixed32();case E.SFIXED32:return n.sfixed32();case E.SFIXED64:return n.sfixed64();case E.SINT64:return n.sint64();case E.UINT32:return n.uint32();case E.SINT32:return n.sint32()}}function X(n,e,t,r,s){n.tag(t.no,Se.LengthDelimited),n.fork();let o=r;switch(t.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:o=Number.parseInt(r);break;case E.BOOL:y(r=="true"||r=="false"),o=r=="true";break}switch(ie(n,t.K,1,o,!0),t.V.kind){case"scalar":ie(n,t.V.T,2,s,!0);break;case"enum":ie(n,E.INT32,2,s,!0);break;case"message":n.tag(2,Se.LengthDelimited).bytes(s.toBinary(e));break}n.join()}function ee(n,e,t,r){if(r!==void 0){const s=Kr(t.T,r);t!=null&&t.delimited?n.tag(t.no,Se.StartGroup).raw(s.toBinary(e)).tag(t.no,Se.EndGroup):n.tag(t.no,Se.LengthDelimited).bytes(s.toBinary(e))}}function ie(n,e,t,r,s){let[o,c,f]=w(e,r);(!f||s)&&n.tag(t,o)[c](r)}function we(n,e,t,r){if(!r.length)return;n.tag(t,Se.LengthDelimited).fork();let[,s]=w(e);for(let o=0;o<r.length;o++)n[s](r[o]);n.join()}function Te(){return Object.assign(Object.assign({},M()),{writeMessage(n,e,t){const r=n.getType();for(const s of r.fields.byNumber()){let o,c=s.repeated,f=s.localName;if(s.oneof){const h=n[s.oneof.localName];if(h.case!==f)continue;o=h.value}else o=n[f];switch(s.kind){case"scalar":case"enum":let h=s.kind=="enum"?E.INT32:s.T;if(c)if(s.packed)we(e,h,s.no,o);else for(const g of o)ie(e,h,s.no,g,!0);else o!==void 0&&ie(e,h,s.no,o,!!s.oneof||s.opt);break;case"message":if(c)for(const g of o)ee(e,t,s,g);else ee(e,t,s,o);break;case"map":for(const[g,v]of Object.entries(o))X(e,t,s,g,v);break}}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e}})}let be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),tt=[];for(let n=0;n<be.length;n++)tt[be[n].charCodeAt(0)]=n;tt["-".charCodeAt(0)]=be.indexOf("+"),tt["_".charCodeAt(0)]=be.indexOf("/");const At={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,s=0,o,c=0;for(let f=0;f<n.length;f++){if(o=tt[n.charCodeAt(f)],o===void 0)switch(n[f]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:c=o,s=1;break;case 1:t[r++]=c<<2|(o&48)>>4,c=o,s=2;break;case 2:t[r++]=(c&15)<<4|(o&60)>>2,c=o,s=3;break;case 3:t[r++]=(c&3)<<6|o,s=0;break}}if(s==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,s=0;for(let o=0;o<n.length;o++)switch(r=n[o],t){case 0:e+=be[r>>2],s=(r&3)<<4,t=1;break;case 1:e+=be[s|r>>4],s=(r&15)<<2,t=2;break;case 2:e+=be[s|r>>6],e+=be[r&63],t=0;break}return t&&(e+=be[s],e+="=",t==1&&(e+="=")),e}},Xs={ignoreUnknownFields:!1},Ir={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Gi(n){return n?Object.assign(Object.assign({},Xs),n):Xs}function it(n){return n?Object.assign(Object.assign({},Ir),n):Ir}function vt(n){const e=n(Dh,wc);return{makeReadOptions:Gi,makeWriteOptions:it,readMessage(t,r,s,o){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error(`cannot decode message ${t.typeName} from JSON: ${this.debug(r)}`);o=o!=null?o:new t;const c={};for(const[f,h]of Object.entries(r)){const g=t.fields.findJsonName(f);if(!g){if(!s.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${f}" is unknown`);continue}let v=g.localName,A=o;if(g.oneof){if(h===null&&g.kind=="scalar")continue;const b=c[g.oneof.localName];if(b)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${g.oneof.name}" present: "${b}", "${f}"`);c[g.oneof.localName]=f,A=A[g.oneof.localName]={case:v},v="value"}if(g.repeated){if(h===null)continue;if(!Array.isArray(h))throw new Error(`cannot decode field ${t.typeName}.${g.name} from JSON: ${this.debug(h)}`);const b=A[v];for(const _ of h){if(_===null)throw new Error(`cannot decode field ${t.typeName}.${g.name} from JSON: ${this.debug(_)}`);let J;switch(g.kind){case"message":J=g.T.fromJson(_,s);break;case"enum":if(J=Ho(g.T,_,s.ignoreUnknownFields),J===void 0)continue;break;case"scalar":try{J=Qs(g.T,_,g.L)}catch(V){let Y=`cannot decode field ${t.typeName}.${g.name} from JSON: ${this.debug(_)}`;throw V instanceof Error&&V.message.length>0&&(Y+=`: ${V.message}`),new Error(Y)}break}b.push(J)}}else if(g.kind=="map"){if(h===null)continue;if(Array.isArray(h)||typeof h!="object")throw new Error(`cannot decode field ${t.typeName}.${g.name} from JSON: ${this.debug(h)}`);const b=A[v];for(const[_,J]of Object.entries(h)){if(J===null)throw new Error(`cannot decode field ${t.typeName}.${g.name} from JSON: map value null`);let V;switch(g.V.kind){case"message":V=g.V.T.fromJson(J,s);break;case"enum":if(V=Ho(g.V.T,J,s.ignoreUnknownFields),V===void 0)continue;break;case"scalar":try{V=Qs(g.V.T,J,Ue.BIGINT)}catch(Y){let oe=`cannot decode map value for field ${t.typeName}.${g.name} from JSON: ${this.debug(h)}`;throw Y instanceof Error&&Y.message.length>0&&(oe+=`: ${Y.message}`),new Error(oe)}break}try{b[Qs(g.K,g.K==E.BOOL?_=="true"?!0:_=="false"?!1:_:_,Ue.BIGINT).toString()]=V}catch(Y){let oe=`cannot decode map key for field ${t.typeName}.${g.name} from JSON: ${this.debug(h)}`;throw Y instanceof Error&&Y.message.length>0&&(oe+=`: ${Y.message}`),new Error(oe)}}}else switch(g.kind){case"message":const b=g.T;if(h===null&&b.typeName!="google.protobuf.Value"){if(g.oneof)throw new Error(`cannot decode field ${t.typeName}.${g.name} from JSON: null is invalid for oneof field "${f}"`);continue}A[v]instanceof F?A[v].fromJson(h,s):(A[v]=b.fromJson(h,s),b.fieldWrapper&&!g.oneof&&(A[v]=b.fieldWrapper.unwrapField(A[v])));break;case"enum":const _=Ho(g.T,h,s.ignoreUnknownFields);_!==void 0&&(A[v]=_);break;case"scalar":try{A[v]=Qs(g.T,h,g.L)}catch(J){let V=`cannot decode field ${t.typeName}.${g.name} from JSON: ${this.debug(h)}`;throw J instanceof Error&&J.message.length>0&&(V+=`: ${J.message}`),new Error(V)}break}}return o},writeMessage(t,r){const s=t.getType(),o={};let c;try{for(const f of s.fields.byMember()){let h;if(f.kind=="oneof"){const g=t[f.localName];if(g.value===void 0)continue;if(c=f.findField(g.case),!c)throw"oneof case not found: "+g.case;h=e(c,g.value,r)}else c=f,h=e(c,t[c.localName],r);h!==void 0&&(o[r.useProtoFieldName?c.name:c.jsonName]=h)}}catch(f){const h=c?`cannot encode field ${s.typeName}.${c.name} to JSON`:`cannot encode message ${s.typeName} to JSON`,g=f instanceof Error?f.message:String(f);throw new Error(h+(g.length>0?`: ${g}`:""))}return o},readScalar:Qs,writeScalar:wc,debug:Zs}}function Zs(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Qs(n,e,t){switch(n){case E.DOUBLE:case E.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return n==E.FLOAT&&he(r),r;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:if(e===null)return 0;let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return n==E.UINT32?Pe(s):se(s),s;case E.INT64:case E.SFIXED64:case E.SINT64:if(e===null)return Ie.zero;if(typeof e!="number"&&typeof e!="string")break;const o=Ie.parse(e);return t?o.toString():o;case E.FIXED64:case E.UINT64:if(e===null)return Ie.zero;if(typeof e!="number"&&typeof e!="string")break;const c=Ie.uParse(e);return t?c.toString():c;case E.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case E.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case E.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return At.dec(e)}throw new Error}function Ho(n,e,t){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=n.findName(e);if(r||t)return r==null?void 0:r.no;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Zs(e)}`)}function Dh(n,e,t,r){var s;if(e===void 0)return e;if(e===0&&!t)return;if(r)return e;if(n.typeName=="google.protobuf.NullValue")return null;const o=n.findNumber(e);return(s=o==null?void 0:o.name)!==null&&s!==void 0?s:e}function wc(n,e,t){if(e!==void 0)switch(n){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return y(typeof e=="number"),e!=0||t?e:void 0;case E.FLOAT:case E.DOUBLE:return y(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||t?e:void 0;case E.STRING:return y(typeof e=="string"),e.length>0||t?e:void 0;case E.BOOL:return y(typeof e=="boolean"),e||t?e:void 0;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return y(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),t||e!=0?e.toString(10):void 0;case E.BYTES:return y(e instanceof Uint8Array),t||e.byteLength>0?At.enc(e):void 0}}function Rh(){return vt((n,e)=>function(r,s,o){if(r.kind=="map"){const c={};switch(r.V.kind){case"scalar":for(const[h,g]of Object.entries(s)){const v=e(r.V.T,g,!0);y(v!==void 0),c[h.toString()]=v}break;case"message":for(const[h,g]of Object.entries(s))c[h.toString()]=g.toJson(o);break;case"enum":const f=r.V.T;for(const[h,g]of Object.entries(s)){y(g===void 0||typeof g=="number");const v=n(f,g,!0,o.enumAsInteger);y(v!==void 0),c[h.toString()]=v}break}return o.emitDefaultValues||Object.keys(c).length>0?c:void 0}else if(r.repeated){const c=[];switch(r.kind){case"scalar":for(let f=0;f<s.length;f++)c.push(e(r.T,s[f],!0));break;case"enum":for(let f=0;f<s.length;f++)c.push(n(r.T,s[f],!0,o.enumAsInteger));break;case"message":for(let f=0;f<s.length;f++)c.push(Kr(r.T,s[f]).toJson(o));break}return o.emitDefaultValues||c.length>0?c:void 0}else switch(r.kind){case"scalar":return e(r.T,s,!!r.oneof||r.opt||o.emitDefaultValues);case"enum":return n(r.T,s,!!r.oneof||r.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return s!==void 0?Kr(r.T,s).toJson(o):void 0}})}function Ec(){return{setEnumType:Ve,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const s=r.localName,o=e,c=n;if(c[s]!==void 0)switch(r.kind){case"oneof":const f=c[s].case;if(f===void 0)continue;const h=r.findField(f);let g=c[s].value;h&&h.kind=="message"&&!(g instanceof h.T)?g=new h.T(g):h&&h.kind==="scalar"&&h.T===E.BYTES&&(g=ei(g)),o[s]={case:f,value:g};break;case"scalar":case"enum":let v=c[s];r.T===E.BYTES&&(v=r.repeated?v.map(ei):ei(v)),o[s]=v;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===E.BYTES)for(const[_,J]of Object.entries(c[s]))o[s][_]=ei(J);else Object.assign(o[s],c[s]);break;case"message":const b=r.V.T;for(const _ of Object.keys(c[s])){let J=c[s][_];b.fieldWrapper||(J=new b(J)),o[s][_]=J}break}break;case"message":const A=r.T;if(r.repeated)o[s]=c[s].map(b=>b instanceof A?b:new A(b));else if(c[s]!==void 0){const b=c[s];A.fieldWrapper?A.typeName==="google.protobuf.BytesValue"?o[s]=ei(b):o[s]=b:o[s]=b instanceof A?b:new A(b)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const s=e[r.localName],o=t[r.localName];if(r.repeated){if(s.length!==o.length)return!1;switch(r.kind){case"message":return s.every((c,f)=>r.T.equals(c,o[f]));case"scalar":return s.every((c,f)=>_t(r.T,c,o[f]));case"enum":return s.every((c,f)=>_t(E.INT32,c,o[f]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(s,o);case"enum":return _t(E.INT32,s,o);case"scalar":return _t(r.T,s,o);case"oneof":if(s.case!==o.case)return!1;const c=r.findField(s.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(s.value,o.value);case"enum":return _t(E.INT32,s.value,o.value);case"scalar":return _t(c.T,s.value,o.value)}throw new Error(`oneof cannot contain ${c.kind}`);case"map":const f=Object.keys(s).concat(Object.keys(o));switch(r.V.kind){case"message":const h=r.V.T;return f.every(v=>h.equals(s[v],o[v]));case"enum":return f.every(v=>_t(E.INT32,s[v],o[v]));case"scalar":const g=r.V.T;return f.every(v=>_t(g,s[v],o[v]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const s of e.fields.byMember()){const o=n[s.localName];let c;if(s.repeated)c=o.map(Hi);else if(s.kind=="map"){c=r[s.localName];for(const[f,h]of Object.entries(o))c[f]=Hi(h)}else s.kind=="oneof"?c=s.findField(o.case)?{case:o.case,value:Hi(o.value)}:{case:void 0}:c=Hi(o);r[s.localName]=c}return t}}}function Hi(n){if(n===void 0)return n;if(n instanceof F)return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function ei(n){return n instanceof Uint8Array?n:new Uint8Array(n)}class Ic{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function Xi(n){switch(n.kind){case"field":return Zi(n.name,n.oneof!==void 0);case"oneof":return Nc(n.name);case"enum":case"message":case"service":{const e=n.file.proto.package,t=e===void 0?0:e.length+1,r=n.typeName.substring(t).replace(/\./g,"_");return ti(Ac(r))}case"enum_value":{const e=n.parent.sharedPrefix;if(e===void 0)return n.name;const t=n.name.substring(e.length);return ti(t)}case"rpc":{let e=n.name;return e.length==0?e:(e=e[0].toLowerCase()+e.substring(1),ti(e))}}}function Zi(n,e){const t=_c(n);return e?t:ti($h(t))}function Nc(n){return Zi(n,!1)}const Xo=_c;function Bh(n,e){const t=Lh(n)+"_";for(const r of e){if(!r.toLowerCase().startsWith(t))return;const s=r.substring(t.length);if(s.length==0||/^\d/.test(s))return}return t}function Lh(n){return(n.substring(0,1)+n.substring(1).replace(/[A-Z]/g,e=>"_"+e)).toLowerCase()}function _c(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let s=n.charAt(r);switch(s){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(s),e=!1;break;default:e&&(e=!1,s=s.toUpperCase()),t.push(s);break}}return t.join("")}const Jh=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]),Mh=new Set(["constructor","toString","toJSON","valueOf"]),Uh=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Zo=n=>`${n}$`,$h=n=>Uh.has(n)?Zo(n):n,ti=n=>Mh.has(n)?Zo(n):n,Ac=n=>Jh.has(n)?Zo(n):n;class kc{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Nc(e)}addField(e){y(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}const N=dn("proto3",Rh(),Te(),Object.assign(Object.assign({},Ec()),{newFieldList(n){return new Ic(n,Fh)},initFields(n){for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=T(e.T,e.L);break}}}}));function Fh(n){var e,t,r,s;const o=[];let c;for(const f of typeof n=="function"?n():n){const h=f;if(h.localName=Zi(f.name,f.oneof!==void 0),h.jsonName=(e=f.jsonName)!==null&&e!==void 0?e:Xo(f.name),h.repeated=(t=f.repeated)!==null&&t!==void 0?t:!1,f.kind=="scalar"&&(h.L=(r=f.L)!==null&&r!==void 0?r:Ue.BIGINT),f.oneof!==void 0){const g=typeof f.oneof=="string"?f.oneof:f.oneof.name;(!c||c.name!=g)&&(c=new kc(g)),h.oneof=c,c.addField(h)}f.kind=="message"&&(h.delimited=!1),h.packed=(s=f.packed)!==null&&s!==void 0?s:f.kind=="enum"||f.kind=="scalar"&&f.T!=E.BYTES&&f.T!=E.STRING,o.push(h)}return o}function jh(){return Object.assign(Object.assign({},M()),{writeMessage(n,e,t){const r=n.getType();let s;try{for(s of r.fields.byNumber()){let o,c=s.repeated,f=s.localName;if(s.oneof){const h=n[s.oneof.localName];if(h.case!==f)continue;o=h.value}else if(o=n[f],o===void 0&&!s.oneof&&!s.opt)throw new Error(`cannot encode field ${r.typeName}.${s.name} to binary: required field not set`);switch(s.kind){case"scalar":case"enum":let h=s.kind=="enum"?E.INT32:s.T;if(c)if(s.packed)we(e,h,s.no,o);else for(const g of o)ie(e,h,s.no,g,!0);else o!==void 0&&ie(e,h,s.no,o,!0);break;case"message":if(c)for(const g of o)ee(e,t,s,g);else ee(e,t,s,o);break;case"map":for(const[g,v]of Object.entries(o))X(e,t,s,g,v);break}}}catch(o){let c=s?`cannot encode field ${r.typeName}.${s==null?void 0:s.name} to binary`:`cannot encode message ${r.typeName} to binary`,f=o instanceof Error?o.message:String(o);throw new Error(c+(f.length>0?`: ${f}`:""))}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e}})}function qh(){return vt((n,e)=>function(r,s,o){if(r.kind=="map"){const c={};switch(r.V.kind){case"scalar":for(const[h,g]of Object.entries(s)){const v=e(r.V.T,g,!0);y(v!==void 0),c[h.toString()]=v}break;case"message":for(const[h,g]of Object.entries(s))c[h.toString()]=g.toJson(o);break;case"enum":const f=r.V.T;for(const[h,g]of Object.entries(s)){y(g===void 0||typeof g=="number");const v=n(f,g,!0,o.enumAsInteger);y(v!==void 0),c[h.toString()]=v}break}return o.emitDefaultValues||Object.keys(c).length>0?c:void 0}else if(r.repeated){const c=[];switch(r.kind){case"scalar":for(let f=0;f<s.length;f++)c.push(e(r.T,s[f],!0));break;case"enum":for(let f=0;f<s.length;f++)c.push(n(r.T,s[f],!0,o.enumAsInteger));break;case"message":for(let f=0;f<s.length;f++)c.push(s[f].toJson(o));break}return o.emitDefaultValues||c.length>0?c:void 0}else{if(s===void 0){if(!r.oneof&&!r.opt)throw"required field not set";return}switch(r.kind){case"scalar":return e(r.T,s,!0);case"enum":return n(r.T,s,!0,o.enumAsInteger);case"message":return Kr(r.T,s).toJson(o)}}})}const S=dn("proto2",qh(),jh(),Object.assign(Object.assign({},Ec()),{newFieldList(n){return new Ic(n,Vh)},initFields(n){for(const e of n.getType().fields.byMember()){const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"map":r[t]={};break}}}}));function Vh(n){var e,t,r,s,o;const c=[];let f;for(const h of typeof n=="function"?n():n){const g=h;if(g.localName=Zi(h.name,h.oneof!==void 0),g.jsonName=(e=h.jsonName)!==null&&e!==void 0?e:Xo(h.name),g.repeated=(t=h.repeated)!==null&&t!==void 0?t:!1,h.kind=="scalar"&&(g.L=(r=h.L)!==null&&r!==void 0?r:Ue.BIGINT),h.oneof!==void 0){const v=typeof h.oneof=="string"?h.oneof:h.oneof.name;(!f||f.name!=v)&&(f=new kc(v)),g.oneof=f,f.addField(g)}h.kind=="message"&&(g.delimited=(s=h.delimited)!==null&&s!==void 0?s:!1),g.packed=(o=h.packed)!==null&&o!==void 0?o:!1,c.push(g)}return c}const Kh={NaN:Number.NaN,POSITIVE_INFINITY:Number.POSITIVE_INFINITY,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY};var Yh=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(c){return new Promise(function(f,h){c=n[o](c),s(f,h,c.done,c.value)})}}function s(o,c,f,h){Promise.resolve(h).then(function(g){o({value:g,done:f})},c)}},vs=globalThis&&globalThis.__await||function(n){return this instanceof vs?(this.v=n,this):new vs(n)},Wh=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s={},f("next"),f("throw"),f("return",c),s[Symbol.asyncIterator]=function(){return this},s;function c(_){return function(J){return Promise.resolve(J).then(_,A)}}function f(_,J){r[_]&&(s[_]=function(V){return new Promise(function(Y,oe){o.push([_,V,Y,oe])>1||h(_,V)})},J&&(s[_]=J(s[_])))}function h(_,J){try{g(r[_](J))}catch(V){b(o[0][3],V)}}function g(_){_.value instanceof vs?Promise.resolve(_.value.v).then(v,A):b(o[0][2],_)}function v(_){h("next",_)}function A(_){h("throw",_)}function b(_,J){_(J),o.shift(),o.length&&h(o[0][0],o[0][1])}};const Qo={enc(n,e){const t=M().makeWriteOptions(e);return t.writerFactory().bytes(n.toBinary(t)).finish()},dec(n,e,t){const r=M().makeReadOptions(t);return n.fromBinary(r.readerFactory(e).bytes(),r)},decStream(n,e){return Wh(this,arguments,function*(){var r,s,o,c;function f(b,_){const J=new Uint8Array(b.byteLength+_.byteLength);return J.set(b),J.set(_,b.length),J}let h=new Uint8Array(0);try{for(var g=!0,v=Yh(e),A;A=yield vs(v.next()),r=A.done,!r;g=!0)for(c=A.value,g=!1,h=f(h,c);;){const _=Qo.peekSize(h);if(_.eof||_.offset+_.size>h.byteLength)break;yield yield vs(Qo.dec(n,h)),h=h.subarray(_.offset+_.size)}}catch(b){s={error:b}}finally{try{!g&&!r&&(o=v.return)&&(yield vs(o.call(v)))}finally{if(s)throw s.error}}if(h.byteLength>0)throw new Error("incomplete data")})},peekSize(n){const e={eof:!0,size:null,offset:null};for(let t=0;t<10;t++){if(t>n.byteLength)return e;if((n[t]&128)==0){const r=new wr(n);let s;try{s=r.uint32()}catch(o){if(o instanceof RangeError)return e;throw o}return{eof:!1,size:s,offset:r.pos}}}throw new Error("invalid varint")}};function zh(n){switch(n.typeName){case"google.protobuf.Any":{const e=n.fields.find(r=>r.number==1&&r.fieldKind=="scalar"&&r.scalar===E.STRING),t=n.fields.find(r=>r.number==2&&r.fieldKind=="scalar"&&r.scalar===E.BYTES);if(e&&t)return{typeName:n.typeName,typeUrl:e,value:t};break}case"google.protobuf.Timestamp":{const e=n.fields.find(r=>r.number==1&&r.fieldKind=="scalar"&&r.scalar===E.INT64),t=n.fields.find(r=>r.number==2&&r.fieldKind=="scalar"&&r.scalar===E.INT32);if(e&&t)return{typeName:n.typeName,seconds:e,nanos:t};break}case"google.protobuf.Duration":{const e=n.fields.find(r=>r.number==1&&r.fieldKind=="scalar"&&r.scalar===E.INT64),t=n.fields.find(r=>r.number==2&&r.fieldKind=="scalar"&&r.scalar===E.INT32);if(e&&t)return{typeName:n.typeName,seconds:e,nanos:t};break}case"google.protobuf.Struct":{const e=n.fields.find(t=>t.number==1&&!t.repeated);if((e==null?void 0:e.fieldKind)!=="map"||e.mapValue.kind!=="message"||e.mapValue.message.typeName!=="google.protobuf.Value")break;return{typeName:n.typeName,fields:e}}case"google.protobuf.Value":{const e=n.oneofs.find(h=>h.name==="kind"),t=n.fields.find(h=>h.number==1&&h.oneof===e);if((t==null?void 0:t.fieldKind)!=="enum"||t.enum.typeName!=="google.protobuf.NullValue")return;const r=n.fields.find(h=>h.number==2&&h.fieldKind=="scalar"&&h.scalar===E.DOUBLE&&h.oneof===e),s=n.fields.find(h=>h.number==3&&h.fieldKind=="scalar"&&h.scalar===E.STRING&&h.oneof===e),o=n.fields.find(h=>h.number==4&&h.fieldKind=="scalar"&&h.scalar===E.BOOL&&h.oneof===e),c=n.fields.find(h=>h.number==5&&h.oneof===e);if((c==null?void 0:c.fieldKind)!=="message"||c.message.typeName!=="google.protobuf.Struct")return;const f=n.fields.find(h=>h.number==6&&h.oneof===e);if((f==null?void 0:f.fieldKind)!=="message"||f.message.typeName!=="google.protobuf.ListValue")return;if(e&&r&&s&&o)return{typeName:n.typeName,kind:e,nullValue:t,numberValue:r,stringValue:s,boolValue:o,structValue:c,listValue:f};break}case"google.protobuf.ListValue":{const e=n.fields.find(t=>t.number==1&&t.repeated);if((e==null?void 0:e.fieldKind)!="message"||e.message.typeName!=="google.protobuf.Value")break;return{typeName:n.typeName,values:e}}case"google.protobuf.FieldMask":{const e=n.fields.find(t=>t.number==1&&t.fieldKind=="scalar"&&t.scalar===E.STRING&&t.repeated);if(e)return{typeName:n.typeName,paths:e};break}case"google.protobuf.DoubleValue":case"google.protobuf.FloatValue":case"google.protobuf.Int64Value":case"google.protobuf.UInt64Value":case"google.protobuf.Int32Value":case"google.protobuf.UInt32Value":case"google.protobuf.BoolValue":case"google.protobuf.StringValue":case"google.protobuf.BytesValue":{const e=n.fields.find(t=>t.number==1&&t.name=="value");if(!e||e.fieldKind!=="scalar")break;return{typeName:n.typeName,value:e}}}}const $e="@bufbuild/protobuf",Gh={packageName:"@bufbuild/protobuf",localName:Xi,reifyWkt:zh,getUnwrappedFieldType:Er,scalarDefaultValue:T,safeIdentifier:Ac,safeObjectProperty:ti,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:$e},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:$e},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:$e},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:$e},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:$e},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:$e},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:$e},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:$e},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:$e},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:$e},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:$e},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:$e},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:$e},protoDouble:{typeOnly:!1,privateImportPath:"./proto-double.js",publicImportPath:$e},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:$e},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:$e},LongType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:$e},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:$e},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:$e},IMessageTypeRegistry:{typeOnly:!0,privateImportPath:"./type-registry.js",publicImportPath:$e}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]};var kt;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(kt||(kt={}));var ni;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(ni||(ni={}));var _e;(function(n){n[n.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",n[n.EDITION_PROTO2=998]="EDITION_PROTO2",n[n.EDITION_PROTO3=999]="EDITION_PROTO3",n[n.EDITION_2023=1e3]="EDITION_2023",n[n.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",n[n.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",n[n.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",n[n.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",n[n.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY"})(_e||(_e={})),S.util.setEnumType(_e,"google.protobuf.Edition",[{no:0,name:"EDITION_UNKNOWN"},{no:998,name:"EDITION_PROTO2"},{no:999,name:"EDITION_PROTO3"},{no:1e3,name:"EDITION_2023"},{no:1,name:"EDITION_1_TEST_ONLY"},{no:2,name:"EDITION_2_TEST_ONLY"},{no:99997,name:"EDITION_99997_TEST_ONLY"},{no:99998,name:"EDITION_99998_TEST_ONLY"},{no:99999,name:"EDITION_99999_TEST_ONLY"}]);class Ot extends F{constructor(e){super(),this.file=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Ot().fromBinary(e,t)}static fromJson(e,t){return new Ot().fromJson(e,t)}static fromJsonString(e,t){return new Ot().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Ot,e,t)}}Ot.runtime=S,Ot.typeName="google.protobuf.FileDescriptorSet",Ot.fields=S.util.newFieldList(()=>[{no:1,name:"file",kind:"message",T:xt,repeated:!0}]);class xt extends F{constructor(e){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new xt().fromBinary(e,t)}static fromJson(e,t){return new xt().fromJson(e,t)}static fromJsonString(e,t){return new xt().fromJsonString(e,t)}static equals(e,t){return S.util.equals(xt,e,t)}}xt.runtime=S,xt.typeName="google.protobuf.FileDescriptorProto",xt.fields=S.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:Ht,repeated:!0},{no:5,name:"enum_type",kind:"message",T:Xt,repeated:!0},{no:6,name:"service",kind:"message",T:En,repeated:!0},{no:7,name:"extension",kind:"message",T:Pt,repeated:!0},{no:8,name:"options",kind:"message",T:Nn,opt:!0},{no:9,name:"source_code_info",kind:"message",T:Jn,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0},{no:14,name:"edition",kind:"enum",T:S.getEnumType(_e),opt:!0}]);class Ht extends F{constructor(e){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Ht().fromBinary(e,t)}static fromJson(e,t){return new Ht().fromJson(e,t)}static fromJsonString(e,t){return new Ht().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Ht,e,t)}}Ht.runtime=S,Ht.typeName="google.protobuf.DescriptorProto",Ht.fields=S.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:Pt,repeated:!0},{no:6,name:"extension",kind:"message",T:Pt,repeated:!0},{no:3,name:"nested_type",kind:"message",T:Ht,repeated:!0},{no:4,name:"enum_type",kind:"message",T:Xt,repeated:!0},{no:5,name:"extension_range",kind:"message",T:pn,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:bn,repeated:!0},{no:7,name:"options",kind:"message",T:_n,opt:!0},{no:9,name:"reserved_range",kind:"message",T:yn,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class pn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new pn().fromBinary(e,t)}static fromJson(e,t){return new pn().fromJson(e,t)}static fromJsonString(e,t){return new pn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(pn,e,t)}}pn.runtime=S,pn.typeName="google.protobuf.DescriptorProto.ExtensionRange",pn.fields=S.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:vn,opt:!0}]);class yn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new yn().fromBinary(e,t)}static fromJson(e,t){return new yn().fromJson(e,t)}static fromJsonString(e,t){return new yn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(yn,e,t)}}yn.runtime=S,yn.typeName="google.protobuf.DescriptorProto.ReservedRange",yn.fields=S.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class vn extends F{constructor(e){super(),this.uninterpretedOption=[],this.declaration=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new vn().fromBinary(e,t)}static fromJson(e,t){return new vn().fromJson(e,t)}static fromJsonString(e,t){return new vn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(vn,e,t)}}vn.runtime=S,vn.typeName="google.protobuf.ExtensionRangeOptions",vn.fields=S.util.newFieldList(()=>[{no:999,name:"uninterpreted_option",kind:"message",T:He,repeated:!0},{no:2,name:"declaration",kind:"message",T:Tn,repeated:!0},{no:50,name:"features",kind:"message",T:Le,opt:!0},{no:3,name:"verification",kind:"enum",T:S.getEnumType(Ts),opt:!0,default:Ts.UNVERIFIED}]);var Ts;(function(n){n[n.DECLARATION=0]="DECLARATION",n[n.UNVERIFIED=1]="UNVERIFIED"})(Ts||(Ts={})),S.util.setEnumType(Ts,"google.protobuf.ExtensionRangeOptions.VerificationState",[{no:0,name:"DECLARATION"},{no:1,name:"UNVERIFIED"}]);class Tn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new Tn().fromBinary(e,t)}static fromJson(e,t){return new Tn().fromJson(e,t)}static fromJsonString(e,t){return new Tn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Tn,e,t)}}Tn.runtime=S,Tn.typeName="google.protobuf.ExtensionRangeOptions.Declaration",Tn.fields=S.util.newFieldList(()=>[{no:1,name:"number",kind:"scalar",T:5,opt:!0},{no:2,name:"full_name",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"scalar",T:9,opt:!0},{no:5,name:"reserved",kind:"scalar",T:8,opt:!0},{no:6,name:"repeated",kind:"scalar",T:8,opt:!0}]);class Pt extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new Pt().fromBinary(e,t)}static fromJson(e,t){return new Pt().fromJson(e,t)}static fromJsonString(e,t){return new Pt().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Pt,e,t)}}Pt.runtime=S,Pt.typeName="google.protobuf.FieldDescriptorProto",Pt.fields=S.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:S.getEnumType(Nr),opt:!0},{no:5,name:"type",kind:"enum",T:S.getEnumType(fe),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:An,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}]);var fe;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.GROUP=10]="GROUP",n[n.MESSAGE=11]="MESSAGE",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.ENUM=14]="ENUM",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(fe||(fe={})),S.util.setEnumType(fe,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var Nr;(function(n){n[n.OPTIONAL=1]="OPTIONAL",n[n.REPEATED=3]="REPEATED",n[n.REQUIRED=2]="REQUIRED"})(Nr||(Nr={})),S.util.setEnumType(Nr,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:3,name:"LABEL_REPEATED"},{no:2,name:"LABEL_REQUIRED"}]);class bn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new bn().fromBinary(e,t)}static fromJson(e,t){return new bn().fromJson(e,t)}static fromJsonString(e,t){return new bn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(bn,e,t)}}bn.runtime=S,bn.typeName="google.protobuf.OneofDescriptorProto",bn.fields=S.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:On,opt:!0}]);class Xt extends F{constructor(e){super(),this.value=[],this.reservedRange=[],this.reservedName=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Xt().fromBinary(e,t)}static fromJson(e,t){return new Xt().fromJson(e,t)}static fromJsonString(e,t){return new Xt().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Xt,e,t)}}Xt.runtime=S,Xt.typeName="google.protobuf.EnumDescriptorProto",Xt.fields=S.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:wn,repeated:!0},{no:3,name:"options",kind:"message",T:xn,opt:!0},{no:4,name:"reserved_range",kind:"message",T:Sn,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class Sn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new Sn().fromBinary(e,t)}static fromJson(e,t){return new Sn().fromJson(e,t)}static fromJsonString(e,t){return new Sn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Sn,e,t)}}Sn.runtime=S,Sn.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",Sn.fields=S.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class wn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new wn().fromBinary(e,t)}static fromJson(e,t){return new wn().fromJson(e,t)}static fromJsonString(e,t){return new wn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(wn,e,t)}}wn.runtime=S,wn.typeName="google.protobuf.EnumValueDescriptorProto",wn.fields=S.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:Pn,opt:!0}]);class En extends F{constructor(e){super(),this.method=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new En().fromBinary(e,t)}static fromJson(e,t){return new En().fromJson(e,t)}static fromJsonString(e,t){return new En().fromJsonString(e,t)}static equals(e,t){return S.util.equals(En,e,t)}}En.runtime=S,En.typeName="google.protobuf.ServiceDescriptorProto",En.fields=S.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:In,repeated:!0},{no:3,name:"options",kind:"message",T:Cn,opt:!0}]);class In extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new In().fromBinary(e,t)}static fromJson(e,t){return new In().fromJson(e,t)}static fromJsonString(e,t){return new In().fromJsonString(e,t)}static equals(e,t){return S.util.equals(In,e,t)}}In.runtime=S,In.typeName="google.protobuf.MethodDescriptorProto",In.fields=S.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:Dn,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]);class Nn extends F{constructor(e){super(),this.uninterpretedOption=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Nn().fromBinary(e,t)}static fromJson(e,t){return new Nn().fromJson(e,t)}static fromJsonString(e,t){return new Nn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Nn,e,t)}}Nn.runtime=S,Nn.typeName="google.protobuf.FileOptions",Nn.fields=S.util.newFieldList(()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:S.getEnumType(bs),opt:!0,default:bs.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:50,name:"features",kind:"message",T:Le,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:He,repeated:!0}]);var bs;(function(n){n[n.SPEED=1]="SPEED",n[n.CODE_SIZE=2]="CODE_SIZE",n[n.LITE_RUNTIME=3]="LITE_RUNTIME"})(bs||(bs={})),S.util.setEnumType(bs,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class _n extends F{constructor(e){super(),this.uninterpretedOption=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new _n().fromBinary(e,t)}static fromJson(e,t){return new _n().fromJson(e,t)}static fromJsonString(e,t){return new _n().fromJsonString(e,t)}static equals(e,t){return S.util.equals(_n,e,t)}}_n.runtime=S,_n.typeName="google.protobuf.MessageOptions",_n.fields=S.util.newFieldList(()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:11,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:12,name:"features",kind:"message",T:Le,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:He,repeated:!0}]);class An extends F{constructor(e){super(),this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new An().fromBinary(e,t)}static fromJson(e,t){return new An().fromJson(e,t)}static fromJsonString(e,t){return new An().fromJsonString(e,t)}static equals(e,t){return S.util.equals(An,e,t)}}An.runtime=S,An.typeName="google.protobuf.FieldOptions",An.fields=S.util.newFieldList(()=>[{no:1,name:"ctype",kind:"enum",T:S.getEnumType(Ss),opt:!0,default:Ss.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:S.getEnumType(_r),opt:!0,default:_r.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:16,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"retention",kind:"enum",T:S.getEnumType(ri),opt:!0},{no:19,name:"targets",kind:"enum",T:S.getEnumType(si),repeated:!0},{no:20,name:"edition_defaults",kind:"message",T:kn,repeated:!0},{no:21,name:"features",kind:"message",T:Le,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:He,repeated:!0}]);var Ss;(function(n){n[n.STRING=0]="STRING",n[n.CORD=1]="CORD",n[n.STRING_PIECE=2]="STRING_PIECE"})(Ss||(Ss={})),S.util.setEnumType(Ss,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]);var _r;(function(n){n[n.JS_NORMAL=0]="JS_NORMAL",n[n.JS_STRING=1]="JS_STRING",n[n.JS_NUMBER=2]="JS_NUMBER"})(_r||(_r={})),S.util.setEnumType(_r,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]);var ri;(function(n){n[n.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",n[n.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",n[n.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(ri||(ri={})),S.util.setEnumType(ri,"google.protobuf.FieldOptions.OptionRetention",[{no:0,name:"RETENTION_UNKNOWN"},{no:1,name:"RETENTION_RUNTIME"},{no:2,name:"RETENTION_SOURCE"}]);var si;(function(n){n[n.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",n[n.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",n[n.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",n[n.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",n[n.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",n[n.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",n[n.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",n[n.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",n[n.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",n[n.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(si||(si={})),S.util.setEnumType(si,"google.protobuf.FieldOptions.OptionTargetType",[{no:0,name:"TARGET_TYPE_UNKNOWN"},{no:1,name:"TARGET_TYPE_FILE"},{no:2,name:"TARGET_TYPE_EXTENSION_RANGE"},{no:3,name:"TARGET_TYPE_MESSAGE"},{no:4,name:"TARGET_TYPE_FIELD"},{no:5,name:"TARGET_TYPE_ONEOF"},{no:6,name:"TARGET_TYPE_ENUM"},{no:7,name:"TARGET_TYPE_ENUM_ENTRY"},{no:8,name:"TARGET_TYPE_SERVICE"},{no:9,name:"TARGET_TYPE_METHOD"}]);class kn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new kn().fromBinary(e,t)}static fromJson(e,t){return new kn().fromJson(e,t)}static fromJsonString(e,t){return new kn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(kn,e,t)}}kn.runtime=S,kn.typeName="google.protobuf.FieldOptions.EditionDefault",kn.fields=S.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:S.getEnumType(_e),opt:!0},{no:2,name:"value",kind:"scalar",T:9,opt:!0}]);class On extends F{constructor(e){super(),this.uninterpretedOption=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new On().fromBinary(e,t)}static fromJson(e,t){return new On().fromJson(e,t)}static fromJsonString(e,t){return new On().fromJsonString(e,t)}static equals(e,t){return S.util.equals(On,e,t)}}On.runtime=S,On.typeName="google.protobuf.OneofOptions",On.fields=S.util.newFieldList(()=>[{no:1,name:"features",kind:"message",T:Le,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:He,repeated:!0}]);class xn extends F{constructor(e){super(),this.uninterpretedOption=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new xn().fromBinary(e,t)}static fromJson(e,t){return new xn().fromJson(e,t)}static fromJsonString(e,t){return new xn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(xn,e,t)}}xn.runtime=S,xn.typeName="google.protobuf.EnumOptions",xn.fields=S.util.newFieldList(()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:7,name:"features",kind:"message",T:Le,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:He,repeated:!0}]);class Pn extends F{constructor(e){super(),this.uninterpretedOption=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Pn().fromBinary(e,t)}static fromJson(e,t){return new Pn().fromJson(e,t)}static fromJsonString(e,t){return new Pn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Pn,e,t)}}Pn.runtime=S,Pn.typeName="google.protobuf.EnumValueOptions",Pn.fields=S.util.newFieldList(()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"features",kind:"message",T:Le,opt:!0},{no:3,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:He,repeated:!0}]);class Cn extends F{constructor(e){super(),this.uninterpretedOption=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Cn().fromBinary(e,t)}static fromJson(e,t){return new Cn().fromJson(e,t)}static fromJsonString(e,t){return new Cn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Cn,e,t)}}Cn.runtime=S,Cn.typeName="google.protobuf.ServiceOptions",Cn.fields=S.util.newFieldList(()=>[{no:34,name:"features",kind:"message",T:Le,opt:!0},{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:He,repeated:!0}]);class Dn extends F{constructor(e){super(),this.uninterpretedOption=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Dn().fromBinary(e,t)}static fromJson(e,t){return new Dn().fromJson(e,t)}static fromJsonString(e,t){return new Dn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Dn,e,t)}}Dn.runtime=S,Dn.typeName="google.protobuf.MethodOptions",Dn.fields=S.util.newFieldList(()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:S.getEnumType(sr),opt:!0,default:sr.IDEMPOTENCY_UNKNOWN},{no:35,name:"features",kind:"message",T:Le,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:He,repeated:!0}]);var sr;(function(n){n[n.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",n[n.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",n[n.IDEMPOTENT=2]="IDEMPOTENT"})(sr||(sr={})),S.util.setEnumType(sr,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class He extends F{constructor(e){super(),this.name=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new He().fromBinary(e,t)}static fromJson(e,t){return new He().fromJson(e,t)}static fromJsonString(e,t){return new He().fromJsonString(e,t)}static equals(e,t){return S.util.equals(He,e,t)}}He.runtime=S,He.typeName="google.protobuf.UninterpretedOption",He.fields=S.util.newFieldList(()=>[{no:2,name:"name",kind:"message",T:Rn,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]);class Rn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new Rn().fromBinary(e,t)}static fromJson(e,t){return new Rn().fromJson(e,t)}static fromJsonString(e,t){return new Rn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Rn,e,t)}}Rn.runtime=S,Rn.typeName="google.protobuf.UninterpretedOption.NamePart",Rn.fields=S.util.newFieldList(()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]);class Le extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new Le().fromBinary(e,t)}static fromJson(e,t){return new Le().fromJson(e,t)}static fromJsonString(e,t){return new Le().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Le,e,t)}}Le.runtime=S,Le.typeName="google.protobuf.FeatureSet",Le.fields=S.util.newFieldList(()=>[{no:1,name:"field_presence",kind:"enum",T:S.getEnumType(ii),opt:!0},{no:2,name:"enum_type",kind:"enum",T:S.getEnumType(oi),opt:!0},{no:3,name:"repeated_field_encoding",kind:"enum",T:S.getEnumType(Yr),opt:!0},{no:4,name:"utf8_validation",kind:"enum",T:S.getEnumType(ai),opt:!0},{no:5,name:"message_encoding",kind:"enum",T:S.getEnumType(ci),opt:!0},{no:6,name:"json_format",kind:"enum",T:S.getEnumType(ui),opt:!0}]);var ii;(function(n){n[n.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",n[n.EXPLICIT=1]="EXPLICIT",n[n.IMPLICIT=2]="IMPLICIT",n[n.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(ii||(ii={})),S.util.setEnumType(ii,"google.protobuf.FeatureSet.FieldPresence",[{no:0,name:"FIELD_PRESENCE_UNKNOWN"},{no:1,name:"EXPLICIT"},{no:2,name:"IMPLICIT"},{no:3,name:"LEGACY_REQUIRED"}]);var oi;(function(n){n[n.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",n[n.OPEN=1]="OPEN",n[n.CLOSED=2]="CLOSED"})(oi||(oi={})),S.util.setEnumType(oi,"google.protobuf.FeatureSet.EnumType",[{no:0,name:"ENUM_TYPE_UNKNOWN"},{no:1,name:"OPEN"},{no:2,name:"CLOSED"}]);var Yr;(function(n){n[n.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",n[n.PACKED=1]="PACKED",n[n.EXPANDED=2]="EXPANDED"})(Yr||(Yr={})),S.util.setEnumType(Yr,"google.protobuf.FeatureSet.RepeatedFieldEncoding",[{no:0,name:"REPEATED_FIELD_ENCODING_UNKNOWN"},{no:1,name:"PACKED"},{no:2,name:"EXPANDED"}]);var ai;(function(n){n[n.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",n[n.NONE=1]="NONE",n[n.VERIFY=2]="VERIFY"})(ai||(ai={})),S.util.setEnumType(ai,"google.protobuf.FeatureSet.Utf8Validation",[{no:0,name:"UTF8_VALIDATION_UNKNOWN"},{no:1,name:"NONE"},{no:2,name:"VERIFY"}]);var ci;(function(n){n[n.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",n[n.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",n[n.DELIMITED=2]="DELIMITED"})(ci||(ci={})),S.util.setEnumType(ci,"google.protobuf.FeatureSet.MessageEncoding",[{no:0,name:"MESSAGE_ENCODING_UNKNOWN"},{no:1,name:"LENGTH_PREFIXED"},{no:2,name:"DELIMITED"}]);var ui;(function(n){n[n.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",n[n.ALLOW=1]="ALLOW",n[n.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(ui||(ui={})),S.util.setEnumType(ui,"google.protobuf.FeatureSet.JsonFormat",[{no:0,name:"JSON_FORMAT_UNKNOWN"},{no:1,name:"ALLOW"},{no:2,name:"LEGACY_BEST_EFFORT"}]);class Bn extends F{constructor(e){super(),this.defaults=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Bn().fromBinary(e,t)}static fromJson(e,t){return new Bn().fromJson(e,t)}static fromJsonString(e,t){return new Bn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Bn,e,t)}}Bn.runtime=S,Bn.typeName="google.protobuf.FeatureSetDefaults",Bn.fields=S.util.newFieldList(()=>[{no:1,name:"defaults",kind:"message",T:Ln,repeated:!0},{no:4,name:"minimum_edition",kind:"enum",T:S.getEnumType(_e),opt:!0},{no:5,name:"maximum_edition",kind:"enum",T:S.getEnumType(_e),opt:!0}]);class Ln extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new Ln().fromBinary(e,t)}static fromJson(e,t){return new Ln().fromJson(e,t)}static fromJsonString(e,t){return new Ln().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Ln,e,t)}}Ln.runtime=S,Ln.typeName="google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault",Ln.fields=S.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:S.getEnumType(_e),opt:!0},{no:2,name:"features",kind:"message",T:Le,opt:!0}]);class Jn extends F{constructor(e){super(),this.location=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Jn().fromBinary(e,t)}static fromJson(e,t){return new Jn().fromJson(e,t)}static fromJsonString(e,t){return new Jn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Jn,e,t)}}Jn.runtime=S,Jn.typeName="google.protobuf.SourceCodeInfo",Jn.fields=S.util.newFieldList(()=>[{no:1,name:"location",kind:"message",T:Mn,repeated:!0}]);class Mn extends F{constructor(e){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Mn().fromBinary(e,t)}static fromJson(e,t){return new Mn().fromJson(e,t)}static fromJsonString(e,t){return new Mn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Mn,e,t)}}Mn.runtime=S,Mn.typeName="google.protobuf.SourceCodeInfo.Location",Mn.fields=S.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]);class Un extends F{constructor(e){super(),this.annotation=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new Un().fromBinary(e,t)}static fromJson(e,t){return new Un().fromJson(e,t)}static fromJsonString(e,t){return new Un().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Un,e,t)}}Un.runtime=S,Un.typeName="google.protobuf.GeneratedCodeInfo",Un.fields=S.util.newFieldList(()=>[{no:1,name:"annotation",kind:"message",T:$n,repeated:!0}]);class $n extends F{constructor(e){super(),this.path=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new $n().fromBinary(e,t)}static fromJson(e,t){return new $n().fromJson(e,t)}static fromJsonString(e,t){return new $n().fromJsonString(e,t)}static equals(e,t){return S.util.equals($n,e,t)}}$n.runtime=S,$n.typeName="google.protobuf.GeneratedCodeInfo.Annotation",$n.fields=S.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0},{no:5,name:"semantic",kind:"enum",T:S.getEnumType(li),opt:!0}]);var li;(function(n){n[n.NONE=0]="NONE",n[n.SET=1]="SET",n[n.ALIAS=2]="ALIAS"})(li||(li={})),S.util.setEnumType(li,"google.protobuf.GeneratedCodeInfo.Annotation.Semantic",[{no:0,name:"NONE"},{no:1,name:"SET"},{no:2,name:"ALIAS"}]);function Hh(n,e){const t=n.values.find(r=>r.name===e);return y(t,`cannot parse ${n.name} default value: ${e}`),t.number}function Xh(n,e){switch(n){case E.STRING:return e;case E.BYTES:{const t=Zh(e);if(t===!1)throw new Error(`cannot parse ${E[n]} default value: ${e}`);return t}case E.INT64:case E.SFIXED64:case E.SINT64:return Ie.parse(e);case E.UINT64:case E.FIXED64:return Ie.uParse(e);case E.DOUBLE:case E.FLOAT:switch(e){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(e)}case E.BOOL:return e==="true";case E.INT32:case E.UINT32:case E.SINT32:case E.FIXED32:case E.SFIXED32:return parseInt(e,10)}}function Zh(n){const e=[],t={tail:n,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(r){if(this.tail.length>=r){const s=this.tail.substring(0,r);return this.tail=this.tail.substring(r),s}return!1}};for(;t.next();)switch(t.c){case"\\":if(t.next())switch(t.c){case"\\":e.push(t.c.charCodeAt(0));break;case"b":e.push(8);break;case"f":e.push(12);break;case"n":e.push(10);break;case"r":e.push(13);break;case"t":e.push(9);break;case"v":e.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const r=t.c,s=t.take(2);if(s===!1)return!1;const o=parseInt(r+s,8);if(isNaN(o))return!1;e.push(o);break}case"x":{const r=t.c,s=t.take(2);if(s===!1)return!1;const o=parseInt(r+s,16);if(isNaN(o))return!1;e.push(o);break}case"u":{const r=t.c,s=t.take(4);if(s===!1)return!1;const o=parseInt(r+s,16);if(isNaN(o))return!1;const c=new Uint8Array(4);new DataView(c.buffer).setInt32(0,o,!0),e.push(c[0],c[1],c[2],c[3]);break}case"U":{const r=t.c,s=t.take(8);if(s===!1)return!1;const o=Ie.uEnc(r+s),c=new Uint8Array(8),f=new DataView(c.buffer);f.setInt32(0,o.lo,!0),f.setInt32(4,o.hi,!0),e.push(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7]);break}}break;default:e.push(t.c.charCodeAt(0))}return new Uint8Array(e)}const Qh=Bn.fromBinary(At.dec("ChESDAgBEAIYAiABKAEwAhjmBwoREgwIAhABGAEgAigBMAEY5wcKERIMCAEQARgBIAIoATABGOgHIOYHKOgH"));function ed(n){const e=n.minimumEdition,t=n.maximumEdition;if(e===void 0||t===void 0||n.defaults.some(s=>s.edition===void 0))throw new Error("Invalid FeatureSetDefaults");const r=new Map;return(s,...o)=>{var c,f;let h=r.get(s);if(h===void 0){if(s<e)throw new Error(`Edition ${_e[s]} is earlier than the minimum supported edition ${_e[e]}`);if(t<s)throw new Error(`Edition ${_e[s]} is later than the maximum supported edition ${_e[t]}`);let v;for(const A of n.defaults){const b=(c=A.edition)!==null&&c!==void 0?c:0;b>s||v!==void 0&&v.e>b||(v={e:b,f:(f=A.features)!==null&&f!==void 0?f:new Le})}if(v===void 0)throw new Error(`No valid default found for edition ${_e[s]}`);h=v.f.toBinary(),r.set(s,h)}const g=Le.fromBinary(h);for(const v of o)v!==void 0&&g.fromBinary(v.toBinary());if(!td(g))throw new Error(`Invalid FeatureSet for edition ${_e[s]}`);return g}}function td(n){for(const e of Le.fields.list()){const t=n[e.localName];if(t===void 0||e.kind=="enum"&&t===0)return!1}return!0}function Oc(n,e){var t;const r={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map,resolveFeatures:ed((t=e==null?void 0:e.featureSetDefaults)!==null&&t!==void 0?t:Qh)},o=(n instanceof Ot?n.file:n instanceof Uint8Array?Ot.fromBinary(n).file:n).map(c=>nd(c,r));return Object.assign({files:o},r)}function nd(n,e){var t,r;y(n.name,"invalid FileDescriptorProto: missing name");const s=Object.assign(Object.assign({kind:"file",proto:n,deprecated:(r=(t=n.options)===null||t===void 0?void 0:t.deprecated)!==null&&r!==void 0?r:!1},od(n.syntax,n.edition)),{name:n.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return Fn(this.proto.sourceCodeInfo,[ot.FileDescriptorProto_Syntax])},getPackageComments(){return Fn(this.proto.sourceCodeInfo,[ot.FileDescriptorProto_Package])},getFeatures(){var o;return e.resolveFeatures(this.edition,(o=this.proto.options)===null||o===void 0?void 0:o.features)}});e.mapEntries.clear();for(const o of n.enumType)xc(o,s,void 0,e);for(const o of n.messageType)Pc(o,s,void 0,e);for(const o of n.service)rd(o,s,e);ea(s,e);for(const o of e.mapEntries.values())ta(o,e);for(const o of s.messages)ta(o,e),ea(o,e);return e.mapEntries.clear(),s}function ea(n,e){switch(n.kind){case"file":for(const t of n.proto.extension){const r=Dc(t,n,void 0,e);n.extensions.push(r),e.extensions.set(r.typeName,r)}break;case"message":for(const t of n.proto.extension){const r=Dc(t,n.file,n,e);n.nestedExtensions.push(r),e.extensions.set(r.typeName,r)}for(const t of n.nestedMessages)ea(t,e);break}}function ta(n,e){const t=n.proto.oneofDecl.map(s=>id(s,n,e)),r=new Set;for(const s of n.proto.field){const o=cd(s,t),c=Cc(s,n.file,n,o,e);n.fields.push(c),o===void 0?n.members.push(c):(o.fields.push(c),r.has(o)||(r.add(o),n.members.push(o)))}for(const s of t.filter(o=>r.has(o)))n.oneofs.push(s);for(const s of n.nestedMessages)ta(s,e)}function xc(n,e,t,r){var s,o,c;y(n.name,"invalid EnumDescriptorProto: missing name");const f={kind:"enum",proto:n,deprecated:(o=(s=n.options)===null||s===void 0?void 0:s.deprecated)!==null&&o!==void 0?o:!1,file:e,parent:t,name:n.name,typeName:Qi(n,t,e),values:[],sharedPrefix:Bh(n.name,n.value.map(h=>{var g;return(g=h.name)!==null&&g!==void 0?g:""})),toString(){return`enum ${this.typeName}`},getComments(){const h=this.parent?[...this.parent.getComments().sourcePath,ot.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[ot.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return Fn(e.proto.sourceCodeInfo,h)},getFeatures(){var h,g,v;const A=(g=(h=this.parent)===null||h===void 0?void 0:h.getFeatures())!==null&&g!==void 0?g:this.file.getFeatures();return r.resolveFeatures(this.file.edition,A,(v=this.proto.options)===null||v===void 0?void 0:v.features)}};r.enums.set(f.typeName,f),n.value.forEach(h=>{var g,v;y(h.name,"invalid EnumValueDescriptorProto: missing name"),y(h.number!==void 0,"invalid EnumValueDescriptorProto: missing number"),f.values.push({kind:"enum_value",proto:h,deprecated:(v=(g=h.options)===null||g===void 0?void 0:g.deprecated)!==null&&v!==void 0?v:!1,parent:f,name:h.name,number:h.number,toString(){return`enum value ${f.typeName}.${this.name}`},declarationString(){var A;let b=`${this.name} = ${this.number}`;return((A=this.proto.options)===null||A===void 0?void 0:A.deprecated)===!0&&(b+=" [deprecated = true]"),b},getComments(){const A=[...this.parent.getComments().sourcePath,ot.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return Fn(e.proto.sourceCodeInfo,A)},getFeatures(){var A;return r.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(A=this.proto.options)===null||A===void 0?void 0:A.features)}})}),((c=t==null?void 0:t.nestedEnums)!==null&&c!==void 0?c:e.enums).push(f)}function Pc(n,e,t,r){var s,o,c,f;y(n.name,"invalid DescriptorProto: missing name");const h={kind:"message",proto:n,deprecated:(o=(s=n.options)===null||s===void 0?void 0:s.deprecated)!==null&&o!==void 0?o:!1,file:e,parent:t,name:n.name,typeName:Qi(n,t,e),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const g=this.parent?[...this.parent.getComments().sourcePath,ot.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[ot.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return Fn(e.proto.sourceCodeInfo,g)},getFeatures(){var g,v,A;const b=(v=(g=this.parent)===null||g===void 0?void 0:g.getFeatures())!==null&&v!==void 0?v:this.file.getFeatures();return r.resolveFeatures(this.file.edition,b,(A=this.proto.options)===null||A===void 0?void 0:A.features)}};((c=n.options)===null||c===void 0?void 0:c.mapEntry)===!0?r.mapEntries.set(h.typeName,h):(((f=t==null?void 0:t.nestedMessages)!==null&&f!==void 0?f:e.messages).push(h),r.messages.set(h.typeName,h));for(const g of n.enumType)xc(g,e,h,r);for(const g of n.nestedType)Pc(g,e,h,r)}function rd(n,e,t){var r,s;y(n.name,"invalid ServiceDescriptorProto: missing name");const o={kind:"service",proto:n,deprecated:(s=(r=n.options)===null||r===void 0?void 0:r.deprecated)!==null&&s!==void 0?s:!1,file:e,name:n.name,typeName:Qi(n,void 0,e),methods:[],toString(){return`service ${this.typeName}`},getComments(){const c=[ot.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return Fn(e.proto.sourceCodeInfo,c)},getFeatures(){var c;return t.resolveFeatures(this.file.edition,this.file.getFeatures(),(c=this.proto.options)===null||c===void 0?void 0:c.features)}};e.services.push(o),t.services.set(o.typeName,o);for(const c of n.method)o.methods.push(sd(c,o,t))}function sd(n,e,t){var r,s,o;y(n.name,"invalid MethodDescriptorProto: missing name"),y(n.inputType,"invalid MethodDescriptorProto: missing input_type"),y(n.outputType,"invalid MethodDescriptorProto: missing output_type");let c;n.clientStreaming===!0&&n.serverStreaming===!0?c=kt.BiDiStreaming:n.clientStreaming===!0?c=kt.ClientStreaming:n.serverStreaming===!0?c=kt.ServerStreaming:c=kt.Unary;let f;switch((r=n.options)===null||r===void 0?void 0:r.idempotencyLevel){case sr.IDEMPOTENT:f=ni.Idempotent;break;case sr.NO_SIDE_EFFECTS:f=ni.NoSideEffects;break;case sr.IDEMPOTENCY_UNKNOWN:case void 0:f=void 0;break}const h=t.messages.get(ws(n.inputType)),g=t.messages.get(ws(n.outputType));y(h,`invalid MethodDescriptorProto: input_type ${n.inputType} not found`),y(g,`invalid MethodDescriptorProto: output_type ${n.inputType} not found`);const v=n.name;return{kind:"rpc",proto:n,deprecated:(o=(s=n.options)===null||s===void 0?void 0:s.deprecated)!==null&&o!==void 0?o:!1,parent:e,name:v,methodKind:c,input:h,output:g,idempotency:f,toString(){return`rpc ${e.typeName}.${v}`},getComments(){const A=[...this.parent.getComments().sourcePath,ot.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return Fn(e.file.proto.sourceCodeInfo,A)},getFeatures(){var A;return t.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(A=this.proto.options)===null||A===void 0?void 0:A.features)}}}function id(n,e,t){return y(n.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:n,deprecated:!1,parent:e,fields:[],name:n.name,toString(){return`oneof ${e.typeName}.${this.name}`},getComments(){const r=[...this.parent.getComments().sourcePath,ot.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return Fn(e.file.proto.sourceCodeInfo,r)},getFeatures(){var r;return t.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(r=this.proto.options)===null||r===void 0?void 0:r.features)}}}function Cc(n,e,t,r,s){var o,c,f;y(n.name,"invalid FieldDescriptorProto: missing name"),y(n.number,"invalid FieldDescriptorProto: missing number"),y(n.type,"invalid FieldDescriptorProto: missing type");const h={proto:n,deprecated:(c=(o=n.options)===null||o===void 0?void 0:o.deprecated)!==null&&c!==void 0?c:!1,name:n.name,number:n.number,parent:t,oneof:r,optional:ud(n,e.syntax),packedByDefault:ld(e,n,s.resolveFeatures),packed:fd(e,t,n,s.resolveFeatures),jsonName:n.jsonName===Xo(n.name)?void 0:n.jsonName,scalar:void 0,longType:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,declarationString:dd,toString(){return`field ${this.parent.typeName}.${this.name}`},getComments(){const v=[...this.parent.getComments().sourcePath,ot.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return Fn(e.proto.sourceCodeInfo,v)},getFeatures(){var v;return s.resolveFeatures(e.edition,this.parent.getFeatures(),(v=this.proto.options)===null||v===void 0?void 0:v.features)}},g=n.label===Nr.REPEATED;switch(n.type){case fe.MESSAGE:case fe.GROUP:{y(n.typeName,"invalid FieldDescriptorProto: missing type_name");const v=s.mapEntries.get(ws(n.typeName));if(v!==void 0)return y(g,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},h),{kind:"field",fieldKind:"map",repeated:!1}),ad(v));const A=s.messages.get(ws(n.typeName));return y(A!==void 0,`invalid FieldDescriptorProto: type_name ${n.typeName} not found`),Object.assign(Object.assign({},h),{kind:"field",fieldKind:"message",repeated:g,message:A})}case fe.ENUM:{y(n.typeName,"invalid FieldDescriptorProto: missing type_name");const v=s.enums.get(ws(n.typeName));return y(v!==void 0,`invalid FieldDescriptorProto: type_name ${n.typeName} not found`),Object.assign(Object.assign({},h),{kind:"field",fieldKind:"enum",getDefaultValue:Rc,repeated:g,enum:v})}default:{const v=hd[n.type];return y(v,`invalid FieldDescriptorProto: unknown type ${n.type}`),Object.assign(Object.assign({},h),{kind:"field",fieldKind:"scalar",getDefaultValue:Rc,repeated:g,scalar:v,longType:((f=n.options)===null||f===void 0?void 0:f.jstype)==_r.JS_STRING?Ue.STRING:Ue.BIGINT})}}}function Dc(n,e,t,r){y(n.extendee,"invalid FieldDescriptorProto: missing extendee");const s=Cc(n,e,null,void 0,r),o=r.messages.get(ws(n.extendee));return y(o,`invalid FieldDescriptorProto: extendee ${n.extendee} not found`),Object.assign(Object.assign({},s),{kind:"extension",typeName:Qi(n,t,e),parent:t,file:e,extendee:o,toString(){return`extension ${this.typeName}`},getComments(){const c=this.parent?[...this.parent.getComments().sourcePath,ot.DescriptorProto_Extension,this.parent.proto.extension.indexOf(n)]:[ot.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(n)];return Fn(e.proto.sourceCodeInfo,c)},getFeatures(){var c,f;return r.resolveFeatures(this.file.edition,((c=this.parent)!==null&&c!==void 0?c:this.file).getFeatures(),(f=this.proto.options)===null||f===void 0?void 0:f.features)}})}function od(n,e){let t,r;switch(n){case void 0:case"proto2":r="proto2",t=_e.EDITION_PROTO2;break;case"proto3":r="proto3",t=_e.EDITION_PROTO3;break;case"editions":switch(r="editions",e){case void 0:case _e.EDITION_1_TEST_ONLY:case _e.EDITION_2_TEST_ONLY:case _e.EDITION_99997_TEST_ONLY:case _e.EDITION_99998_TEST_ONLY:case _e.EDITION_99999_TEST_ONLY:case _e.EDITION_UNKNOWN:t=_e.EDITION_UNKNOWN;break;default:t=e;break}break;default:throw new Error(`invalid FileDescriptorProto: unsupported syntax: ${n}`)}if(n==="editions"&&e===_e.EDITION_UNKNOWN)throw new Error(`invalid FileDescriptorProto: syntax ${n} cannot have edition ${String(e)}`);return{syntax:r,edition:t}}function Qi(n,e,t){y(n.name,`invalid ${n.getType().typeName}: missing name`);let r;return e?r=`${e.typeName}.${n.name}`:t.proto.package!==void 0?r=`${t.proto.package}.${n.name}`:r=`${n.name}`,r}function ws(n){return n.startsWith(".")?n.substring(1):n}function ad(n){var e,t;y((e=n.proto.options)===null||e===void 0?void 0:e.mapEntry,`invalid DescriptorProto: expected ${n.toString()} to be a map entry`),y(n.fields.length===2,`invalid DescriptorProto: map entry ${n.toString()} has ${n.fields.length} fields`);const r=n.fields.find(c=>c.proto.number===1);y(r,`invalid DescriptorProto: map entry ${n.toString()} is missing key field`);const s=r.scalar;y(s!==void 0&&s!==E.BYTES&&s!==E.FLOAT&&s!==E.DOUBLE,`invalid DescriptorProto: map entry ${n.toString()} has unexpected key type ${(t=r.proto.type)!==null&&t!==void 0?t:-1}`);const o=n.fields.find(c=>c.proto.number===2);switch(y(o,`invalid DescriptorProto: map entry ${n.toString()} is missing value field`),o.fieldKind){case"scalar":return{mapKey:s,mapValue:Object.assign(Object.assign({},o),{kind:"scalar"})};case"message":return{mapKey:s,mapValue:Object.assign(Object.assign({},o),{kind:"message"})};case"enum":return{mapKey:s,mapValue:Object.assign(Object.assign({},o),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}function cd(n,e){var t;const r=n.oneofIndex;if(r===void 0)return;let s;return n.proto3Optional!==!0&&(s=e[r],y(s,`invalid FieldDescriptorProto: oneof #${r} for field #${(t=n.number)!==null&&t!==void 0?t:-1} not found`)),s}function ud(n,e){switch(e){case"proto2":return n.oneofIndex===void 0&&n.label===Nr.OPTIONAL;case"proto3":return n.proto3Optional===!0;case"editions":return!1}}function ld(n,e,t){const{repeatedFieldEncoding:r}=t(n.edition);if(r!=Yr.PACKED)return!1;switch(e.type){case fe.STRING:case fe.BYTES:case fe.GROUP:case fe.MESSAGE:return!1;default:return!0}}function fd(n,e,t,r){var s,o,c,f,h,g;switch(t.type){case fe.STRING:case fe.BYTES:case fe.GROUP:case fe.MESSAGE:return!1;default:switch(n.edition){case _e.EDITION_PROTO2:return(o=(s=t.options)===null||s===void 0?void 0:s.packed)!==null&&o!==void 0?o:!1;case _e.EDITION_PROTO3:return(f=(c=t.options)===null||c===void 0?void 0:c.packed)!==null&&f!==void 0?f:!0;default:{const{repeatedFieldEncoding:v}=r(n.edition,(h=e==null?void 0:e.getFeatures())!==null&&h!==void 0?h:n.getFeatures(),(g=t.options)===null||g===void 0?void 0:g.features);return v==Yr.PACKED}}}}const hd={[fe.DOUBLE]:E.DOUBLE,[fe.FLOAT]:E.FLOAT,[fe.INT64]:E.INT64,[fe.UINT64]:E.UINT64,[fe.INT32]:E.INT32,[fe.FIXED64]:E.FIXED64,[fe.FIXED32]:E.FIXED32,[fe.BOOL]:E.BOOL,[fe.STRING]:E.STRING,[fe.GROUP]:void 0,[fe.MESSAGE]:void 0,[fe.BYTES]:E.BYTES,[fe.UINT32]:E.UINT32,[fe.ENUM]:void 0,[fe.SFIXED32]:E.SFIXED32,[fe.SFIXED64]:E.SFIXED64,[fe.SINT32]:E.SINT32,[fe.SINT64]:E.SINT64};function Fn(n,e){if(!n)return{leadingDetached:[],sourcePath:e};for(const t of n.location)if(t.path.length===e.length&&!t.path.some((r,s)=>e[s]!==r))return{leadingDetached:t.leadingDetachedComments,leading:t.leadingComments,trailing:t.trailingComments,sourcePath:e};return{leadingDetached:[],sourcePath:e}}var ot;(function(n){n[n.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",n[n.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",n[n.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",n[n.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",n[n.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",n[n.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",n[n.DescriptorProto_Field=2]="DescriptorProto_Field",n[n.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",n[n.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",n[n.DescriptorProto_Extension=6]="DescriptorProto_Extension",n[n.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",n[n.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",n[n.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"})(ot||(ot={}));function dd(){var n,e,t;const r=[];this.repeated&&r.push("repeated"),this.optional&&r.push("optional"),(this.kind==="extension"?this.file:this.parent.file).syntax=="proto2"&&this.proto.label===Nr.REQUIRED&&r.push("required");let o;switch(this.fieldKind){case"scalar":o=E[this.scalar].toLowerCase();break;case"enum":o=this.enum.typeName;break;case"message":o=this.message.typeName;break;case"map":{const h=E[this.mapKey].toLowerCase();let g;switch(this.mapValue.kind){case"scalar":g=E[this.mapValue.scalar].toLowerCase();break;case"enum":g=this.mapValue.enum.typeName;break;case"message":g=this.mapValue.message.typeName;break}o=`map<${h}, ${g}>`;break}}r.push(`${o} ${this.name} = ${this.number}`);const c=[];((n=this.proto.options)===null||n===void 0?void 0:n.packed)!==void 0&&c.push(`packed = ${this.proto.options.packed.toString()}`);let f=this.proto.defaultValue;return f!==void 0&&((this.proto.type==fe.BYTES||this.proto.type==fe.STRING)&&(f='"'+f.replace('"','\\"')+'"'),c.push(`default = ${f}`)),this.jsonName!==void 0&&c.push(`json_name = "${this.jsonName}"`),((e=this.proto.options)===null||e===void 0?void 0:e.jstype)!==void 0&&c.push(`jstype = ${_r[this.proto.options.jstype]}`),((t=this.proto.options)===null||t===void 0?void 0:t.deprecated)===!0&&c.push("deprecated = true"),c.length>0&&r.push("["+c.join(", ")+"]"),r.join(" ")}function Rc(){const n=this.proto.defaultValue;if(n!==void 0)switch(this.fieldKind){case"enum":return Hh(this.enum,n);case"scalar":return Xh(this.scalar,n);default:return}}function md(...n){const e={},t={},r={},s={add(o){if("fields"in o){if(!this.findMessage(o.typeName)){e[o.typeName]=o;for(const c of o.fields.list())c.kind=="message"?this.add(c.T):c.kind=="map"&&c.V.kind=="message"?this.add(c.V.T):c.kind=="enum"&&this.add(c.T)}}else if("methods"in o){if(!this.findService(o.typeName)){r[o.typeName]=o;for(const c of Object.values(o.methods))this.add(c.I),this.add(c.O)}}else t[o.typeName]=o},findMessage(o){return e[o]},findEnum(o){return t[o]},findService(o){return r[o]}};for(const o of n)s.add(o);return s}let fi=class cs extends F{constructor(e){super(),this.seconds=Ie.zero,this.nanos=0,N.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${N.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const s=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(s))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Ie.parse(s/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const s=(this.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?r="."+s.substring(0,3)+"Z":s.substring(6)==="000"?r="."+s.substring(0,6)+"Z":r="."+s+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return cs.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new cs({seconds:Ie.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new cs().fromBinary(e,t)}static fromJson(e,t){return new cs().fromJson(e,t)}static fromJsonString(e,t){return new cs().fromJsonString(e,t)}static equals(e,t){return N.util.equals(cs,e,t)}};fi.runtime=N,fi.typeName="google.protobuf.Timestamp",fi.fields=N.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Zt extends F{constructor(e){super(),this.seconds=Ie.zero,this.nanos=0,N.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${N.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${N.json.debug(e)}`);const s=Number(r[1]);if(s>315576e6||s<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${N.json.debug(e)}`);if(this.seconds=Ie.parse(s),typeof r[2]=="string"){const o=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(o),(s<0||Object.is(s,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new Zt().fromBinary(e,t)}static fromJson(e,t){return new Zt().fromJson(e,t)}static fromJsonString(e,t){return new Zt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Zt,e,t)}}Zt.runtime=N,Zt.typeName="google.protobuf.Duration",Zt.fields=N.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Tt extends F{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),N.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),s=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!s)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let c=s.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||c===null||Array.isArray(c)||typeof c!="object")&&(c={value:c}),c["@type"]=this.typeUrl,c}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const s=e["@type"];if(typeof s!="string"||s=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const o=this.typeUrlToName(s),c=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(o);if(!c)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${s} is not in the type registry`);let f;if(o.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))f=c.fromJson(e.value,t);else{const h=Object.assign({},e);delete h["@type"],f=c.fromJson(h,t)}return this.packFrom(f),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(!!t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new Tt;return t.packFrom(e),t}static fromBinary(e,t){return new Tt().fromBinary(e,t)}static fromJson(e,t){return new Tt().fromJson(e,t)}static fromJsonString(e,t){return new Tt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Tt,e,t)}}Tt.runtime=N,Tt.typeName="google.protobuf.Any",Tt.fields=N.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class jn extends F{constructor(e){super(),N.util.initPartial(e,this)}static fromBinary(e,t){return new jn().fromBinary(e,t)}static fromJson(e,t){return new jn().fromJson(e,t)}static fromJsonString(e,t){return new jn().fromJsonString(e,t)}static equals(e,t){return N.util.equals(jn,e,t)}}jn.runtime=N,jn.typeName="google.protobuf.Empty",jn.fields=N.util.newFieldList(()=>[]);class qn extends F{constructor(e){super(),this.paths=[],N.util.initPartial(e,this)}toJson(e){function t(r){let s=!1;const o=[];for(let c=0;c<r.length;c++){let f=r.charAt(c);switch(f){case"_":s=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o.push(f),s=!1;break;default:s&&(s=!1,f=f.toUpperCase()),o.push(f);break}}return o.join("")}return this.paths.map(r=>{if(r.match(/_[0-9]?_/g)||r.match(/[A-Z]/g))throw new Error('cannot encode google.protobuf.FieldMask to JSON: lowerCamelCase of path name "'+r+'" is irreversible');return t(r)}).join(",")}fromJson(e,t){if(typeof e!="string")throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+N.json.debug(e));if(e==="")return this;function r(s){if(s.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const o=s.replace(/[A-Z]/g,c=>"_"+c.toLowerCase());return o[0]==="_"?o.substring(1):o}return this.paths=e.split(",").map(r),this}static fromBinary(e,t){return new qn().fromBinary(e,t)}static fromJson(e,t){return new qn().fromJson(e,t)}static fromJsonString(e,t){return new qn().fromJsonString(e,t)}static equals(e,t){return N.util.equals(qn,e,t)}}qn.runtime=N,qn.typeName="google.protobuf.FieldMask",qn.fields=N.util.newFieldList(()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}]);var Wr;(function(n){n[n.NULL_VALUE=0]="NULL_VALUE"})(Wr||(Wr={})),N.util.setEnumType(Wr,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class Ct extends F{constructor(e){super(),this.fields={},N.util.initPartial(e,this)}toJson(e){const t={};for(const[r,s]of Object.entries(this.fields))t[r]=s.toJson(e);return t}fromJson(e,t){if(typeof e!="object"||e==null||Array.isArray(e))throw new Error("cannot decode google.protobuf.Struct from JSON "+N.json.debug(e));for(const[r,s]of Object.entries(e))this.fields[r]=dt.fromJson(s);return this}static fromBinary(e,t){return new Ct().fromBinary(e,t)}static fromJson(e,t){return new Ct().fromJson(e,t)}static fromJsonString(e,t){return new Ct().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Ct,e,t)}}Ct.runtime=N,Ct.typeName="google.protobuf.Struct",Ct.fields=N.util.newFieldList(()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:dt}}]);class dt extends F{constructor(e){super(),this.kind={case:void 0},N.util.initPartial(e,this)}toJson(e){switch(this.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(this.kind.value))throw new Error("google.protobuf.Value cannot be NaN or Infinity");return this.kind.value;case"boolValue":return this.kind.value;case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},e),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(e,t){switch(typeof e){case"number":this.kind={case:"numberValue",value:e};break;case"string":this.kind={case:"stringValue",value:e};break;case"boolean":this.kind={case:"boolValue",value:e};break;case"object":e===null?this.kind={case:"nullValue",value:Wr.NULL_VALUE}:Array.isArray(e)?this.kind={case:"listValue",value:Dt.fromJson(e)}:this.kind={case:"structValue",value:Ct.fromJson(e)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+N.json.debug(e))}return this}static fromBinary(e,t){return new dt().fromBinary(e,t)}static fromJson(e,t){return new dt().fromJson(e,t)}static fromJsonString(e,t){return new dt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(dt,e,t)}}dt.runtime=N,dt.typeName="google.protobuf.Value",dt.fields=N.util.newFieldList(()=>[{no:1,name:"null_value",kind:"enum",T:N.getEnumType(Wr),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:Ct,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:Dt,oneof:"kind"}]);class Dt extends F{constructor(e){super(),this.values=[],N.util.initPartial(e,this)}toJson(e){return this.values.map(t=>t.toJson())}fromJson(e,t){if(!Array.isArray(e))throw new Error("cannot decode google.protobuf.ListValue from JSON "+N.json.debug(e));for(let r of e)this.values.push(dt.fromJson(r));return this}static fromBinary(e,t){return new Dt().fromBinary(e,t)}static fromJson(e,t){return new Dt().fromJson(e,t)}static fromJsonString(e,t){return new Dt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Dt,e,t)}}Dt.runtime=N,Dt.typeName="google.protobuf.ListValue",Dt.fields=N.util.newFieldList(()=>[{no:1,name:"values",kind:"message",T:dt,repeated:!0}]);class Rt extends F{constructor(e){super(),this.value=0,N.util.initPartial(e,this)}toJson(e){return N.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=N.json.readScalar(E.DOUBLE,e)}catch(r){let s='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(s+=`: ${r.message}`),new Error(s)}return this}static fromBinary(e,t){return new Rt().fromBinary(e,t)}static fromJson(e,t){return new Rt().fromJson(e,t)}static fromJsonString(e,t){return new Rt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Rt,e,t)}}Rt.runtime=N,Rt.typeName="google.protobuf.DoubleValue",Rt.fields=N.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Rt.fieldWrapper={wrapField(n){return new Rt({value:n})},unwrapField(n){return n.value}};class Bt extends F{constructor(e){super(),this.value=0,N.util.initPartial(e,this)}toJson(e){return N.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=N.json.readScalar(E.FLOAT,e)}catch(r){let s='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(s+=`: ${r.message}`),new Error(s)}return this}static fromBinary(e,t){return new Bt().fromBinary(e,t)}static fromJson(e,t){return new Bt().fromJson(e,t)}static fromJsonString(e,t){return new Bt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Bt,e,t)}}Bt.runtime=N,Bt.typeName="google.protobuf.FloatValue",Bt.fields=N.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),Bt.fieldWrapper={wrapField(n){return new Bt({value:n})},unwrapField(n){return n.value}};class Lt extends F{constructor(e){super(),this.value=Ie.zero,N.util.initPartial(e,this)}toJson(e){return N.json.writeScalar(E.INT64,this.value,!0)}fromJson(e,t){try{this.value=N.json.readScalar(E.INT64,e)}catch(r){let s='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(s+=`: ${r.message}`),new Error(s)}return this}static fromBinary(e,t){return new Lt().fromBinary(e,t)}static fromJson(e,t){return new Lt().fromJson(e,t)}static fromJsonString(e,t){return new Lt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Lt,e,t)}}Lt.runtime=N,Lt.typeName="google.protobuf.Int64Value",Lt.fields=N.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),Lt.fieldWrapper={wrapField(n){return new Lt({value:n})},unwrapField(n){return n.value}};class Jt extends F{constructor(e){super(),this.value=Ie.zero,N.util.initPartial(e,this)}toJson(e){return N.json.writeScalar(E.UINT64,this.value,!0)}fromJson(e,t){try{this.value=N.json.readScalar(E.UINT64,e)}catch(r){let s='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(s+=`: ${r.message}`),new Error(s)}return this}static fromBinary(e,t){return new Jt().fromBinary(e,t)}static fromJson(e,t){return new Jt().fromJson(e,t)}static fromJsonString(e,t){return new Jt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Jt,e,t)}}Jt.runtime=N,Jt.typeName="google.protobuf.UInt64Value",Jt.fields=N.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),Jt.fieldWrapper={wrapField(n){return new Jt({value:n})},unwrapField(n){return n.value}};class Mt extends F{constructor(e){super(),this.value=0,N.util.initPartial(e,this)}toJson(e){return N.json.writeScalar(E.INT32,this.value,!0)}fromJson(e,t){try{this.value=N.json.readScalar(E.INT32,e)}catch(r){let s='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(s+=`: ${r.message}`),new Error(s)}return this}static fromBinary(e,t){return new Mt().fromBinary(e,t)}static fromJson(e,t){return new Mt().fromJson(e,t)}static fromJsonString(e,t){return new Mt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Mt,e,t)}}Mt.runtime=N,Mt.typeName="google.protobuf.Int32Value",Mt.fields=N.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),Mt.fieldWrapper={wrapField(n){return new Mt({value:n})},unwrapField(n){return n.value}};class Ut extends F{constructor(e){super(),this.value=0,N.util.initPartial(e,this)}toJson(e){return N.json.writeScalar(E.UINT32,this.value,!0)}fromJson(e,t){try{this.value=N.json.readScalar(E.UINT32,e)}catch(r){let s='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(s+=`: ${r.message}`),new Error(s)}return this}static fromBinary(e,t){return new Ut().fromBinary(e,t)}static fromJson(e,t){return new Ut().fromJson(e,t)}static fromJsonString(e,t){return new Ut().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Ut,e,t)}}Ut.runtime=N,Ut.typeName="google.protobuf.UInt32Value",Ut.fields=N.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),Ut.fieldWrapper={wrapField(n){return new Ut({value:n})},unwrapField(n){return n.value}};class $t extends F{constructor(e){super(),this.value=!1,N.util.initPartial(e,this)}toJson(e){return N.json.writeScalar(E.BOOL,this.value,!0)}fromJson(e,t){try{this.value=N.json.readScalar(E.BOOL,e)}catch(r){let s='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(s+=`: ${r.message}`),new Error(s)}return this}static fromBinary(e,t){return new $t().fromBinary(e,t)}static fromJson(e,t){return new $t().fromJson(e,t)}static fromJsonString(e,t){return new $t().fromJsonString(e,t)}static equals(e,t){return N.util.equals($t,e,t)}}$t.runtime=N,$t.typeName="google.protobuf.BoolValue",$t.fields=N.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),$t.fieldWrapper={wrapField(n){return new $t({value:n})},unwrapField(n){return n.value}};let zr=class Mi extends F{constructor(e){super(),this.value="",N.util.initPartial(e,this)}toJson(e){return N.json.writeScalar(E.STRING,this.value,!0)}fromJson(e,t){try{this.value=N.json.readScalar(E.STRING,e)}catch(r){let s='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(s+=`: ${r.message}`),new Error(s)}return this}static fromBinary(e,t){return new Mi().fromBinary(e,t)}static fromJson(e,t){return new Mi().fromJson(e,t)}static fromJsonString(e,t){return new Mi().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Mi,e,t)}};zr.runtime=N,zr.typeName="google.protobuf.StringValue",zr.fields=N.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),zr.fieldWrapper={wrapField(n){return new zr({value:n})},unwrapField(n){return n.value}};class Ft extends F{constructor(e){super(),this.value=new Uint8Array(0),N.util.initPartial(e,this)}toJson(e){return N.json.writeScalar(E.BYTES,this.value,!0)}fromJson(e,t){try{this.value=N.json.readScalar(E.BYTES,e)}catch(r){let s='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(s+=`: ${r.message}`),new Error(s)}return this}static fromBinary(e,t){return new Ft().fromBinary(e,t)}static fromJson(e,t){return new Ft().fromJson(e,t)}static fromJsonString(e,t){return new Ft().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Ft,e,t)}}Ft.runtime=N,Ft.typeName="google.protobuf.BytesValue",Ft.fields=N.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),Ft.fieldWrapper={wrapField(n){return new Ft({value:n})},unwrapField(n){return n.value}};const gd=[Tt,Zt,jn,qn,Ct,dt,Dt,fi,Zt,Rt,Bt,Lt,Mt,Ut,Jt,$t,zr,Ft],pd=[qe(Wr)];function yd(n,e=!0){const t=n instanceof Uint8Array||n instanceof Ot?Oc(n):n,r={},s={},o={};if(e){for(const c of gd)s[c.typeName]=c;for(const c of pd)r[c.typeName]=c}return{findEnum(c){const f=r[c];if(f)return f;const h=t.enums.get(c);if(!h)return;const v=(h.file.syntax=="proto3"?N:S).makeEnumType(c,h.values.map(A=>({no:A.number,name:A.name,localName:Xi(A)})),{});return r[c]=v,v},findMessage(c){const f=s[c];if(f)return f;const h=t.messages.get(c);if(!h)return;const g=h.file.syntax=="proto3"?N:S,v=[],A=g.makeMessageType(c,()=>v,{localName:Xi(h)});s[c]=A;for(const b of h.fields){const _=vd(b,this);v.push(_)}return A},findService(c){const f=o[c];if(f)return f;const h=t.services.get(c);if(!h)return;const g={};for(const v of h.methods){const A=this.findMessage(v.input.typeName),b=this.findMessage(v.output.typeName);y(A,`message "${v.input.typeName}" for ${v.toString()} not found`),y(b,`output message "${v.output.typeName}" for ${v.toString()} not found`),g[Xi(v)]={name:v.name,I:A,O:b,kind:v.methodKind,idempotency:v.idempotency}}return o[c]={typeName:h.typeName,methods:g}}}}function vd(n,e){switch(n.fieldKind){case"map":return Td(n,e);case"message":return Sd(n,e);case"enum":{const t=wd(n,e);return t.default=n.getDefaultValue(),t}case"scalar":{const t=bd(n);return t.default=n.getDefaultValue(),t}}}function Td(n,e){const t={kind:"map",no:n.number,name:n.name,jsonName:n.jsonName,K:n.mapKey};if(n.mapValue.message){const r=e.findMessage(n.mapValue.message.typeName);return y(r,`message "${n.mapValue.message.typeName}" for ${n.toString()} not found`),Object.assign(Object.assign({},t),{V:{kind:"message",T:r}})}if(n.mapValue.enum){const r=e.findEnum(n.mapValue.enum.typeName);return y(r,`enum "${n.mapValue.enum.typeName}" for ${n.toString()} not found`),Object.assign(Object.assign({},t),{V:{kind:"enum",T:r}})}return Object.assign(Object.assign({},t),{V:{kind:"scalar",T:n.mapValue.scalar}})}function bd(n){const e=n.longType==Ue.STRING?{L:Ue.STRING}:{},t=Object.assign({kind:"scalar",no:n.number,name:n.name,jsonName:n.jsonName,T:n.scalar},e);return n.repeated?Object.assign(Object.assign({},t),{repeated:!0,packed:n.packed,oneof:void 0,T:n.scalar}):n.oneof?Object.assign(Object.assign({},t),{oneof:n.oneof.name}):n.optional?Object.assign(Object.assign({},t),{opt:!0}):t}function Sd(n,e){const t=e.findMessage(n.message.typeName);y(t,`message "${n.message.typeName}" for ${n.toString()} not found`);const r={kind:"message",no:n.number,name:n.name,jsonName:n.jsonName,T:t,delimited:n.proto.type==fe.GROUP};return n.repeated?Object.assign(Object.assign({},r),{repeated:!0,packed:n.packed,oneof:void 0}):n.oneof?Object.assign(Object.assign({},r),{oneof:n.oneof.name}):n.optional?Object.assign(Object.assign({},r),{opt:!0}):r}function wd(n,e){const t=e.findEnum(n.enum.typeName);y(t,`enum "${n.enum.typeName}" for ${n.toString()} not found`);const r={kind:"enum",no:n.number,name:n.name,jsonName:n.jsonName,T:t};return n.repeated?Object.assign(Object.assign({},r),{repeated:!0,packed:n.packed,oneof:void 0}):n.oneof?Object.assign(Object.assign({},r),{oneof:n.oneof.name}):n.optional?Object.assign(Object.assign({},r),{opt:!0}):r}function Bc(n){if(!(n instanceof F))return n;const e=n.getType(),t={};for(const r of e.fields.byMember()){const s=n[r.localName];let o;if(r.repeated)o=s.map(c=>eo(c));else if(r.kind=="map"){o={};for(const[c,f]of Object.entries(s))o[c]=eo(f)}else r.kind=="oneof"?o=r.findField(s.case)?{case:s.case,value:eo(s.value)}:{case:void 0}:o=eo(s);t[r.localName]=o}return t}function eo(n){if(n===void 0)return n;if(n instanceof F)return Bc(n);if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}class Vn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new Vn().fromBinary(e,t)}static fromJson(e,t){return new Vn().fromJson(e,t)}static fromJsonString(e,t){return new Vn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Vn,e,t)}}Vn.runtime=S,Vn.typeName="google.protobuf.compiler.Version",Vn.fields=S.util.newFieldList(()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]);class ir extends F{constructor(e){super(),this.fileToGenerate=[],this.protoFile=[],this.sourceFileDescriptors=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new ir().fromBinary(e,t)}static fromJson(e,t){return new ir().fromJson(e,t)}static fromJsonString(e,t){return new ir().fromJsonString(e,t)}static equals(e,t){return S.util.equals(ir,e,t)}}ir.runtime=S,ir.typeName="google.protobuf.compiler.CodeGeneratorRequest",ir.fields=S.util.newFieldList(()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:xt,repeated:!0},{no:17,name:"source_file_descriptors",kind:"message",T:xt,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:Vn,opt:!0}]);class or extends F{constructor(e){super(),this.file=[],S.util.initPartial(e,this)}static fromBinary(e,t){return new or().fromBinary(e,t)}static fromJson(e,t){return new or().fromJson(e,t)}static fromJsonString(e,t){return new or().fromJsonString(e,t)}static equals(e,t){return S.util.equals(or,e,t)}}or.runtime=S,or.typeName="google.protobuf.compiler.CodeGeneratorResponse",or.fields=S.util.newFieldList(()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:Kn,repeated:!0}]);var to;(function(n){n[n.NONE=0]="NONE",n[n.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL",n[n.SUPPORTS_EDITIONS=2]="SUPPORTS_EDITIONS"})(to||(to={})),S.util.setEnumType(to,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"},{no:2,name:"FEATURE_SUPPORTS_EDITIONS"}]);class Kn extends F{constructor(e){super(),S.util.initPartial(e,this)}static fromBinary(e,t){return new Kn().fromBinary(e,t)}static fromJson(e,t){return new Kn().fromJson(e,t)}static fromJsonString(e,t){return new Kn().fromJsonString(e,t)}static equals(e,t){return S.util.equals(Kn,e,t)}}Kn.runtime=S,Kn.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",Kn.fields=S.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:Un,opt:!0}]);class jt extends F{constructor(e){super(),this.fileName="",N.util.initPartial(e,this)}static fromBinary(e,t){return new jt().fromBinary(e,t)}static fromJson(e,t){return new jt().fromJson(e,t)}static fromJsonString(e,t){return new jt().fromJsonString(e,t)}static equals(e,t){return N.util.equals(jt,e,t)}}jt.runtime=N,jt.typeName="google.protobuf.SourceContext",jt.fields=N.util.newFieldList(()=>[{no:1,name:"file_name",kind:"scalar",T:9}]);var qt;(function(n){n[n.PROTO2=0]="PROTO2",n[n.PROTO3=1]="PROTO3",n[n.EDITIONS=2]="EDITIONS"})(qt||(qt={})),N.util.setEnumType(qt,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"},{no:2,name:"SYNTAX_EDITIONS"}]);class ar extends F{constructor(e){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=qt.PROTO2,this.edition="",N.util.initPartial(e,this)}static fromBinary(e,t){return new ar().fromBinary(e,t)}static fromJson(e,t){return new ar().fromJson(e,t)}static fromJsonString(e,t){return new ar().fromJsonString(e,t)}static equals(e,t){return N.util.equals(ar,e,t)}}ar.runtime=N,ar.typeName="google.protobuf.Type",ar.fields=N.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:Yn,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:at,repeated:!0},{no:5,name:"source_context",kind:"message",T:jt},{no:6,name:"syntax",kind:"enum",T:N.getEnumType(qt)},{no:7,name:"edition",kind:"scalar",T:9}]);class Yn extends F{constructor(e){super(),this.kind=Es.TYPE_UNKNOWN,this.cardinality=Is.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",N.util.initPartial(e,this)}static fromBinary(e,t){return new Yn().fromBinary(e,t)}static fromJson(e,t){return new Yn().fromJson(e,t)}static fromJsonString(e,t){return new Yn().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Yn,e,t)}}Yn.runtime=N,Yn.typeName="google.protobuf.Field",Yn.fields=N.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:N.getEnumType(Es)},{no:2,name:"cardinality",kind:"enum",T:N.getEnumType(Is)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:at,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}]);var Es;(function(n){n[n.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",n[n.TYPE_DOUBLE=1]="TYPE_DOUBLE",n[n.TYPE_FLOAT=2]="TYPE_FLOAT",n[n.TYPE_INT64=3]="TYPE_INT64",n[n.TYPE_UINT64=4]="TYPE_UINT64",n[n.TYPE_INT32=5]="TYPE_INT32",n[n.TYPE_FIXED64=6]="TYPE_FIXED64",n[n.TYPE_FIXED32=7]="TYPE_FIXED32",n[n.TYPE_BOOL=8]="TYPE_BOOL",n[n.TYPE_STRING=9]="TYPE_STRING",n[n.TYPE_GROUP=10]="TYPE_GROUP",n[n.TYPE_MESSAGE=11]="TYPE_MESSAGE",n[n.TYPE_BYTES=12]="TYPE_BYTES",n[n.TYPE_UINT32=13]="TYPE_UINT32",n[n.TYPE_ENUM=14]="TYPE_ENUM",n[n.TYPE_SFIXED32=15]="TYPE_SFIXED32",n[n.TYPE_SFIXED64=16]="TYPE_SFIXED64",n[n.TYPE_SINT32=17]="TYPE_SINT32",n[n.TYPE_SINT64=18]="TYPE_SINT64"})(Es||(Es={})),N.util.setEnumType(Es,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var Is;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.OPTIONAL=1]="OPTIONAL",n[n.REQUIRED=2]="REQUIRED",n[n.REPEATED=3]="REPEATED"})(Is||(Is={})),N.util.setEnumType(Is,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class cr extends F{constructor(e){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=qt.PROTO2,this.edition="",N.util.initPartial(e,this)}static fromBinary(e,t){return new cr().fromBinary(e,t)}static fromJson(e,t){return new cr().fromJson(e,t)}static fromJsonString(e,t){return new cr().fromJsonString(e,t)}static equals(e,t){return N.util.equals(cr,e,t)}}cr.runtime=N,cr.typeName="google.protobuf.Enum",cr.fields=N.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:Wn,repeated:!0},{no:3,name:"options",kind:"message",T:at,repeated:!0},{no:4,name:"source_context",kind:"message",T:jt},{no:5,name:"syntax",kind:"enum",T:N.getEnumType(qt)},{no:6,name:"edition",kind:"scalar",T:9}]);class Wn extends F{constructor(e){super(),this.name="",this.number=0,this.options=[],N.util.initPartial(e,this)}static fromBinary(e,t){return new Wn().fromBinary(e,t)}static fromJson(e,t){return new Wn().fromJson(e,t)}static fromJsonString(e,t){return new Wn().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Wn,e,t)}}Wn.runtime=N,Wn.typeName="google.protobuf.EnumValue",Wn.fields=N.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:at,repeated:!0}]);class at extends F{constructor(e){super(),this.name="",N.util.initPartial(e,this)}static fromBinary(e,t){return new at().fromBinary(e,t)}static fromJson(e,t){return new at().fromJson(e,t)}static fromJsonString(e,t){return new at().fromJsonString(e,t)}static equals(e,t){return N.util.equals(at,e,t)}}at.runtime=N,at.typeName="google.protobuf.Option",at.fields=N.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:Tt}]);class ur extends F{constructor(e){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=qt.PROTO2,N.util.initPartial(e,this)}static fromBinary(e,t){return new ur().fromBinary(e,t)}static fromJson(e,t){return new ur().fromJson(e,t)}static fromJsonString(e,t){return new ur().fromJsonString(e,t)}static equals(e,t){return N.util.equals(ur,e,t)}}ur.runtime=N,ur.typeName="google.protobuf.Api",ur.fields=N.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:zn,repeated:!0},{no:3,name:"options",kind:"message",T:at,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:jt},{no:6,name:"mixins",kind:"message",T:Gn,repeated:!0},{no:7,name:"syntax",kind:"enum",T:N.getEnumType(qt)}]);class zn extends F{constructor(e){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=qt.PROTO2,N.util.initPartial(e,this)}static fromBinary(e,t){return new zn().fromBinary(e,t)}static fromJson(e,t){return new zn().fromJson(e,t)}static fromJsonString(e,t){return new zn().fromJsonString(e,t)}static equals(e,t){return N.util.equals(zn,e,t)}}zn.runtime=N,zn.typeName="google.protobuf.Method",zn.fields=N.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:at,repeated:!0},{no:7,name:"syntax",kind:"enum",T:N.getEnumType(qt)}]);class Gn extends F{constructor(e){super(),this.name="",this.root="",N.util.initPartial(e,this)}static fromBinary(e,t){return new Gn().fromBinary(e,t)}static fromJson(e,t){return new Gn().fromJson(e,t)}static fromJsonString(e,t){return new Gn().fromJsonString(e,t)}static equals(e,t){return N.util.equals(Gn,e,t)}}Gn.runtime=N,Gn.typeName="google.protobuf.Mixin",Gn.fields=N.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}]);const na=Object.freeze(Object.defineProperty({__proto__:null,Any:Tt,Api:ur,BinaryReader:wr,BinaryWriter:Nt,BoolValue:$t,BytesValue:Ft,CodeGeneratorRequest:ir,CodeGeneratorResponse:or,get CodeGeneratorResponse_Feature(){return to},CodeGeneratorResponse_File:Kn,DescriptorProto:Ht,DescriptorProto_ExtensionRange:pn,DescriptorProto_ReservedRange:yn,DoubleValue:Rt,Duration:Zt,get Edition(){return _e},Empty:jn,Enum:cr,EnumDescriptorProto:Xt,EnumDescriptorProto_EnumReservedRange:Sn,EnumOptions:xn,EnumValue:Wn,EnumValueDescriptorProto:wn,EnumValueOptions:Pn,ExtensionRangeOptions:vn,ExtensionRangeOptions_Declaration:Tn,get ExtensionRangeOptions_VerificationState(){return Ts},FeatureSet:Le,FeatureSetDefaults:Bn,FeatureSetDefaults_FeatureSetEditionDefault:Ln,get FeatureSet_EnumType(){return oi},get FeatureSet_FieldPresence(){return ii},get FeatureSet_JsonFormat(){return ui},get FeatureSet_MessageEncoding(){return ci},get FeatureSet_RepeatedFieldEncoding(){return Yr},get FeatureSet_Utf8Validation(){return ai},Field:Yn,FieldDescriptorProto:Pt,get FieldDescriptorProto_Label(){return Nr},get FieldDescriptorProto_Type(){return fe},FieldMask:qn,FieldOptions:An,get FieldOptions_CType(){return Ss},FieldOptions_EditionDefault:kn,get FieldOptions_JSType(){return _r},get FieldOptions_OptionRetention(){return ri},get FieldOptions_OptionTargetType(){return si},get Field_Cardinality(){return Is},get Field_Kind(){return Es},FileDescriptorProto:xt,FileDescriptorSet:Ot,FileOptions:Nn,get FileOptions_OptimizeMode(){return bs},FloatValue:Bt,GeneratedCodeInfo:Un,GeneratedCodeInfo_Annotation:$n,get GeneratedCodeInfo_Annotation_Semantic(){return li},Int32Value:Mt,Int64Value:Lt,ListValue:Dt,get LongType(){return Ue},Message:F,MessageOptions:_n,Method:zn,MethodDescriptorProto:In,get MethodIdempotency(){return ni},get MethodKind(){return kt},MethodOptions:Dn,get MethodOptions_IdempotencyLevel(){return sr},Mixin:Gn,get NullValue(){return Wr},OneofDescriptorProto:bn,OneofOptions:On,Option:at,get ScalarType(){return E},ServiceDescriptorProto:En,ServiceOptions:Cn,SourceCodeInfo:Jn,SourceCodeInfo_Location:Mn,SourceContext:jt,StringValue:zr,Struct:Ct,get Syntax(){return qt},Timestamp:fi,Type:ar,UInt32Value:Ut,UInt64Value:Jt,UninterpretedOption:He,UninterpretedOption_NamePart:Rn,Value:dt,Version:Vn,get WireType(){return Se},codegenInfo:Gh,createDescriptorSet:Oc,createRegistry:md,createRegistryFromDescriptors:yd,proto2:S,proto3:N,protoBase64:At,protoDelimited:Qo,protoDouble:Kh,protoInt64:Ie,toPlainMessage:Bc},Symbol.toStringTag,{value:"Module"}));function Lc(n){const e=p[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class Ye extends Error{constructor(e,t=p.Unknown,r,s,o){super(Ed(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r!=null?r:{}),this.details=s!=null?s:[],this.cause=o}static from(e,t=p.Unknown){return e instanceof Ye?e:e instanceof Error?e.name=="AbortError"?new Ye(e.message,p.Canceled):new Ye(e.message,t,void 0,void 0,e):new Ye(String(e),t,void 0,void 0,e)}findDetails(e){const t="typeName"in e?{findMessage:s=>s===e.typeName?e:void 0}:e,r=[];for(const s of this.details){if(s instanceof F){t.findMessage(s.getType().typeName)&&r.push(s);continue}const o=t.findMessage(s.type);if(o)try{r.push(o.fromBinary(s.value))}catch{}}return r}}function Ed(n,e){return n.length?`[${Lc(e)}] ${n}`:`[${Lc(e)}]`}function Id(n,e,t){try{const r=At.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw Ye.from(r,p.DataLoss)}}function Nd(n,e){const t={};for(const[r,s]of Object.entries(n.methods)){const o=e(Object.assign(Object.assign({},s),{localName:r,service:n}));o!=null&&(t[r]=o)}return t}function Jc(n){let e,t=new Uint8Array(0);function r(s){const o=new Uint8Array(t.length+s.length);o.set(t),o.set(s,t.length),t=o}return new ReadableStream({start(){e=n.getReader()},async pull(s){let o;for(;;){if(o===void 0&&t.byteLength>=5){let h=0;for(let g=1;g<5;g++)h=(h<<8)+t[g];o={flags:t[0],length:h}}if(o!==void 0&&t.byteLength>=o.length+5)break;const f=await e.read();if(f.done)break;r(f.value)}if(o===void 0){if(t.byteLength==0){s.close();return}s.error(new Ye("premature end of stream",p.DataLoss));return}const c=t.subarray(5,5+o.length);t=t.subarray(5+o.length),s.enqueue({flags:o.flags,data:c})}})}function Mc(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var _d=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(c){return new Promise(function(f,h){c=n[o](c),s(f,h,c.done,c.value)})}}function s(o,c,f,h){Promise.resolve(h).then(function(g){o({value:g,done:f})},c)}},hi=globalThis&&globalThis.__await||function(n){return this instanceof hi?(this.v=n,this):new hi(n)},Ad=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(b){r[b]&&(s[b]=function(_){return new Promise(function(J,V){o.push([b,_,J,V])>1||f(b,_)})})}function f(b,_){try{h(r[b](_))}catch(J){A(o[0][3],J)}}function h(b){b.value instanceof hi?Promise.resolve(b.value.v).then(g,v):A(o[0][2],b)}function g(b){f("next",b)}function v(b){f("throw",b)}function A(b,_){b(_),o.shift(),o.length&&f(o[0][0],o[0][1])}},kd=globalThis&&globalThis.__asyncDelegator||function(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,o){e[s]=n[s]?function(c){return(t=!t)?{value:hi(n[s](c)),done:!1}:o?o(c):c}:o}};function Od(n){return Ad(this,arguments,function*(){yield hi(yield*kd(_d(n)))})}var Uc=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(c){return new Promise(function(f,h){c=n[o](c),s(f,h,c.done,c.value)})}}function s(o,c,f,h){Promise.resolve(h).then(function(g){o({value:g,done:f})},c)}},Ns=globalThis&&globalThis.__await||function(n){return this instanceof Ns?(this.v=n,this):new Ns(n)},xd=globalThis&&globalThis.__asyncDelegator||function(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,o){e[s]=n[s]?function(c){return(t=!t)?{value:Ns(n[s](c)),done:!1}:o?o(c):c}:o}},Pd=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(b){r[b]&&(s[b]=function(_){return new Promise(function(J,V){o.push([b,_,J,V])>1||f(b,_)})})}function f(b,_){try{h(r[b](_))}catch(J){A(o[0][3],J)}}function h(b){b.value instanceof Ns?Promise.resolve(b.value.v).then(g,v):A(o[0][2],b)}function g(b){f("next",b)}function v(b){f("throw",b)}function A(b,_){b(_),o.shift(),o.length&&f(o[0][0],o[0][1])}};function Cd(n,e){return Nd(n,t=>{switch(t.kind){case kt.Unary:return Dd(e,n,t);case kt.ServerStreaming:return Rd(e,n,t);case kt.ClientStreaming:return Bd(e,n,t);case kt.BiDiStreaming:return Ld(e,n,t);default:return null}})}function Dd(n,e,t){return async function(r,s){var o,c;const f=await n.unary(e,t,s==null?void 0:s.signal,s==null?void 0:s.timeoutMs,s==null?void 0:s.headers,r,s==null?void 0:s.contextValues);return(o=s==null?void 0:s.onHeader)===null||o===void 0||o.call(s,f.header),(c=s==null?void 0:s.onTrailer)===null||c===void 0||c.call(s,f.trailer),f.message}}function Rd(n,e,t){return function(r,s){return $c(n.stream(e,t,s==null?void 0:s.signal,s==null?void 0:s.timeoutMs,s==null?void 0:s.headers,Od([r]),s==null?void 0:s.contextValues),s)}}function Bd(n,e,t){return async function(r,s){var o,c,f,h,g,v;const A=await n.stream(e,t,s==null?void 0:s.signal,s==null?void 0:s.timeoutMs,s==null?void 0:s.headers,r,s==null?void 0:s.contextValues);(g=s==null?void 0:s.onHeader)===null||g===void 0||g.call(s,A.header);let b;try{for(var _=!0,J=Uc(A.message),V;V=await J.next(),o=V.done,!o;_=!0)h=V.value,_=!1,b=h}catch(Y){c={error:Y}}finally{try{!_&&!o&&(f=J.return)&&await f.call(J)}finally{if(c)throw c.error}}if(!b)throw new Ye("protocol error: missing response message",p.Internal);return(v=s==null?void 0:s.onTrailer)===null||v===void 0||v.call(s,A.trailer),b}}function Ld(n,e,t){return function(r,s){return $c(n.stream(e,t,s==null?void 0:s.signal,s==null?void 0:s.timeoutMs,s==null?void 0:s.headers,r,s==null?void 0:s.contextValues),s)}}function $c(n,e){const t=function(){var r,s;return Pd(this,arguments,function*(){const o=yield Ns(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,o.header),yield Ns(yield*xd(Uc(o.message))),(s=e==null?void 0:e.onTrailer)===null||s===void 0||s.call(e,o.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function Jd(...n){const e=new AbortController,t=n.filter(s=>s!==void 0).concat(e.signal);for(const s of t){if(s.aborted){r.apply(s);break}s.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(Fc(this));for(const s of t)s.removeEventListener("abort",r)}return e}function Md(n){const e=new AbortController,t=()=>{e.abort(new Ye("the operation timed out",p.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function Fc(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function jc(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const ra=128;function qc(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const s=r.indexOf(":");if(s>0){const o=r.substring(0,s).trim(),c=r.substring(s+1).trim();e.append(o,c)}}return e}const Ud="Content-Type",$d="Grpc-Timeout",Vc="Grpc-Status",Kc="Grpc-Message",Fd="Grpc-Status-Details-Bin",jd="User-Agent",qd="X-User-Agent",Vd="X-Grpc-Web",Kd="application/grpc-web+proto",Yd="application/grpc-web+json";class lr extends F{constructor(e){super(),this.code=0,this.message="",this.details=[],N.util.initPartial(e,this)}static fromBinary(e,t){return new lr().fromBinary(e,t)}static fromJson(e,t){return new lr().fromJson(e,t)}static fromJsonString(e,t){return new lr().fromJsonString(e,t)}static equals(e,t){return N.util.equals(lr,e,t)}}lr.runtime=N,lr.typeName="google.rpc.Status",lr.fields=N.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Tt,repeated:!0}]);const Wd="0";function Yc(n){var e;const t=n.get(Fd);if(t!=null){const s=Id(t,lr);if(s.code==0)return;const o=new Ye(s.message,s.code,n);return o.details=s.details.map(c=>({type:c.typeUrl.substring(c.typeUrl.lastIndexOf("/")+1),value:c.value})),o}const r=n.get(Vc);if(r!=null){if(r===Wd)return;const s=parseInt(r,10);return s in p?new Ye(decodeURIComponent((e=n.get(Kc))!==null&&e!==void 0?e:""),s,n):new Ye(`invalid grpc-status: ${r}`,p.Internal,n)}}function Wc(n,e,t){const r=typeof e=="string"?e:e.typeName,s=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${s}`)}function zc(n,e){return e instanceof F?e:new n(e)}function zd(n,e){function t(r){return r.done===!0?r:{done:r.done,value:zc(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),s={next:()=>r.next().then(t)};return r.throw!==void 0&&(s.throw=o=>r.throw(o).then(t)),r.return!==void 0&&(s.return=o=>r.return(o).then(t)),s}}}function Gd(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function Gc(n,e,t,r){const s=e?Hc(n.I,r):Xc(n.I,t);return{parse:(e?Hc(n.O,r):Xc(n.O,t)).parse,serialize:s.serialize}}function Hc(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const s=r instanceof Error?r.message:String(r);throw new Ye(`parse binary: ${s}`,p.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(r){const s=r instanceof Error?r.message:String(r);throw new Ye(`serialize binary: ${s}`,p.Internal)}}}}function Xc(n,e){var t,r;const s=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,o=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,c=Gd(e);return{parse(f){try{const h=o.decode(f);return n.fromJsonString(h,c)}catch(h){throw Ye.from(h,p.InvalidArgument)}},serialize(f){try{const h=f.toJsonString(c);return s.encode(h)}catch(h){throw Ye.from(h,p.Internal)}}}}function Hd(n){const e=Qc(n.next,n.interceptors),[t,r,s]=Zc(n),o=Object.assign(Object.assign({},n.req),{message:zc(n.req.method.I,n.req.message),signal:t});return e(o).then(c=>(s(),c),r)}function Xd(n){const e=Qc(n.next,n.interceptors),[t,r,s]=Zc(n),o=Object.assign(Object.assign({},n.req),{message:zd(n.req.method.I,n.req.message),signal:t});let c=!1;return t.addEventListener("abort",function(){var f,h;const g=n.req.message[Symbol.asyncIterator]();c||(f=g.throw)===null||f===void 0||f.call(g,this.reason).catch(()=>{}),(h=g.return)===null||h===void 0||h.call(g).catch(()=>{})}),e(o).then(f=>Object.assign(Object.assign({},f),{message:{[Symbol.asyncIterator](){const h=f.message[Symbol.asyncIterator]();return{next(){return h.next().then(g=>(g.done==!0&&(c=!0,s()),g),r)}}}}}),r)}function Zc(n){const{signal:e,cleanup:t}=Md(n.timeoutMs),r=Jd(n.signal,e);return[r.signal,function(o){const c=Ye.from(e.aborted?Fc(e):o);return r.abort(c),t(),Promise.reject(c)},function(){t(),r.abort()}]}function Qc(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,s)=>s(r),n))!==null&&t!==void 0?t:n}function Zd(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function eu(n,e){const t=Yc(n);if(t)throw e.forEach((r,s)=>{t.metadata.append(s,r)}),t}function tu(n,e,t,r){const s=new Headers(t!=null?t:{});return s.set(Ud,n?Kd:Yd),s.set(Vd,"1"),s.set(qd,"connect-es/1.2.0"),r&&s.set(jd,"connect-es/1.2.0"),e!==void 0&&s.set($d,`${e}m`),s}function Qd(n){switch(n){case 400:return p.Internal;case 401:return p.Unauthenticated;case 403:return p.PermissionDenied;case 404:return p.Unimplemented;case 429:return p.Unavailable;case 502:return p.Unavailable;case 503:return p.Unavailable;case 504:return p.Unavailable;default:return p.Unknown}}function nu(n,e){var t;if(n>=200&&n<300){const r=Yc(e);if(r)throw r;return{foundStatus:e.has(Vc)}}throw new Ye(decodeURIComponent((t=e.get(Kc))!==null&&t!==void 0?t:`HTTP ${n}`),Qd(n),e)}var Gr=globalThis&&globalThis.__await||function(n){return this instanceof Gr?(this.v=n,this):new Gr(n)},em=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(b){r[b]&&(s[b]=function(_){return new Promise(function(J,V){o.push([b,_,J,V])>1||f(b,_)})})}function f(b,_){try{h(r[b](_))}catch(J){A(o[0][3],J)}}function h(b){b.value instanceof Gr?Promise.resolve(b.value.v).then(g,v):A(o[0][2],b)}function g(b){f("next",b)}function v(b){f("throw",b)}function A(b,_){b(_),o.shift(),o.length&&f(o[0][0],o[0][1])}};function tm(n){var e;Zd();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,s,o,c,f,h,g){var v;const{serialize:A,parse:b}=Gc(s,t,n.jsonOptions,n.binaryOptions);return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,await Hd({interceptors:n.interceptors,signal:o,timeoutMs:c,req:{stream:!1,service:r,method:s,url:Wc(n.baseUrl,r,s),init:{method:"POST",credentials:(v=n.credentials)!==null&&v!==void 0?v:"same-origin",redirect:"error",mode:"cors"},header:tu(t,c,f,!1),contextValues:g!=null?g:jc(),message:h},next:async _=>{var J;const Y=await((J=n.fetch)!==null&&J!==void 0?J:globalThis.fetch)(_.url,Object.assign(Object.assign({},_.init),{headers:_.header,signal:_.signal,body:Mc(0,A(_.message))}));if(nu(Y.status,Y.headers),!Y.body)throw"missing response body";const oe=Jc(Y.body).getReader();let ke,de;for(;;){const Ne=await oe.read();if(Ne.done)break;const{flags:Oe,data:Re}=Ne.value;if(Oe===ra){if(ke!==void 0)throw"extra trailer";ke=qc(Re);continue}if(de!==void 0)throw"extra message";de=b(Re)}if(ke===void 0)throw"missing trailer";if(eu(ke,Y.headers),de===void 0)throw"missing message";return{stream:!1,header:Y.headers,message:de,trailer:ke}}})},async stream(r,s,o,c,f,h,g){var v;const{serialize:A,parse:b}=Gc(s,t,n.jsonOptions,n.binaryOptions);function _(V,Y,oe,ke){return em(this,arguments,function*(){const Ne=Jc(V).getReader();if(Y){if(!(yield Gr(Ne.read())).done)throw"extra data for trailers-only";return yield Gr(void 0)}let Oe=!1;for(;;){const Re=yield Gr(Ne.read());if(Re.done)break;const{flags:ss,data:is}=Re.value;if((ss&ra)===ra){if(Oe)throw"extra trailer";Oe=!0;const Ri=qc(is);eu(Ri,ke),Ri.forEach((Op,xp)=>oe.set(xp,Op));continue}if(Oe)throw"extra message";yield yield Gr(b(is))}if(!Oe)throw"missing trailer"})}async function J(V){if(s.kind!=kt.ServerStreaming)throw"The fetch API does not support streaming request bodies";const Y=await V[Symbol.asyncIterator]().next();if(Y.done==!0)throw"missing request message";return Mc(0,A(Y.value))}return c=c===void 0?n.defaultTimeoutMs:c<=0?void 0:c,Xd({interceptors:n.interceptors,signal:o,timeoutMs:c,req:{stream:!0,service:r,method:s,url:Wc(n.baseUrl,r,s),init:{method:"POST",credentials:(v=n.credentials)!==null&&v!==void 0?v:"same-origin",redirect:"error",mode:"cors"},header:tu(t,c,f,!1),contextValues:g!=null?g:jc(),message:h},next:async V=>{var Y;const ke=await((Y=n.fetch)!==null&&Y!==void 0?Y:globalThis.fetch)(V.url,Object.assign(Object.assign({},V.init),{headers:V.header,signal:V.signal,body:await J(V.message)})),{foundStatus:de}=nu(ke.status,ke.headers);if(!ke.body)throw"missing response body";const Ne=new Headers;return Object.assign(Object.assign({},V),{header:ke.headers,trailer:Ne,message:_(ke.body,de,Ne,ke.headers)})}})}}}var C={exports:{}},te=C.exports;Object.defineProperty(te,"__esModule",{value:!0});const{proto3:Q,StringValue:sa,Timestamp:_s}=na,no=Q.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),ru=Q.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),nm=Q.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:so},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:ua}}]),rm=Q.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Ou},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:su,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:G},{no:6,name:"is_removed",kind:"scalar",T:8}]),su=Q.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:iu},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:ou,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Au}]),iu=Q.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),ou=Q.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:au,oneof:"body"},{no:2,name:"add",kind:"message",T:cu,oneof:"body"},{no:3,name:"move",kind:"message",T:uu,oneof:"body"},{no:4,name:"remove",kind:"message",T:lu,oneof:"body"},{no:5,name:"edit",kind:"message",T:fu,oneof:"body"},{no:6,name:"select",kind:"message",T:hu,oneof:"body"},{no:7,name:"style",kind:"message",T:du,oneof:"body"},{no:8,name:"increase",kind:"message",T:mu,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:gu,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:pu,oneof:"body"}]),au=Q.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:ro},{no:4,name:"executed_at",kind:"message",T:G}],{localName:"Operation_Set"}),cu=Q.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"prev_created_at",kind:"message",T:G},{no:3,name:"value",kind:"message",T:ro},{no:4,name:"executed_at",kind:"message",T:G}],{localName:"Operation_Add"}),uu=Q.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"prev_created_at",kind:"message",T:G},{no:3,name:"created_at",kind:"message",T:G},{no:4,name:"executed_at",kind:"message",T:G}],{localName:"Operation_Move"}),lu=Q.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"created_at",kind:"message",T:G},{no:3,name:"executed_at",kind:"message",T:G}],{localName:"Operation_Remove"}),fu=Q.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"from",kind:"message",T:Hr},{no:3,name:"to",kind:"message",T:Hr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:G}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:G},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),hu=Q.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"from",kind:"message",T:Hr},{no:3,name:"to",kind:"message",T:Hr},{no:4,name:"executed_at",kind:"message",T:G}],{localName:"Operation_Select"}),du=Q.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"from",kind:"message",T:Hr},{no:3,name:"to",kind:"message",T:Hr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:G},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:G}}],{localName:"Operation_Style"}),mu=Q.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"value",kind:"message",T:ro},{no:3,name:"executed_at",kind:"message",T:G}],{localName:"Operation_Increase"}),gu=Q.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"from",kind:"message",T:di},{no:3,name:"to",kind:"message",T:di},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:G}},{no:5,name:"contents",kind:"message",T:Nu,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:G}],{localName:"Operation_TreeEdit"}),pu=Q.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:G},{no:2,name:"from",kind:"message",T:di},{no:3,name:"to",kind:"message",T:di},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:G},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:G}}],{localName:"Operation_TreeStyle"}),ro=Q.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:G},{no:2,name:"moved_at",kind:"message",T:G},{no:3,name:"removed_at",kind:"message",T:G},{no:4,name:"type",kind:"enum",T:Q.getEnumType(no)},{no:5,name:"value",kind:"scalar",T:12}]),so=Q.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:yu,oneof:"body"},{no:2,name:"json_array",kind:"message",T:vu,oneof:"body"},{no:3,name:"primitive",kind:"message",T:Tu,oneof:"body"},{no:5,name:"text",kind:"message",T:bu,oneof:"body"},{no:6,name:"counter",kind:"message",T:Su,oneof:"body"},{no:7,name:"tree",kind:"message",T:wu,oneof:"body"}]),yu=Q.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:Eu,repeated:!0},{no:2,name:"created_at",kind:"message",T:G},{no:3,name:"moved_at",kind:"message",T:G},{no:4,name:"removed_at",kind:"message",T:G}],{localName:"JSONElement_JSONObject"}),vu=Q.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:ia,repeated:!0},{no:2,name:"created_at",kind:"message",T:G},{no:3,name:"moved_at",kind:"message",T:G},{no:4,name:"removed_at",kind:"message",T:G}],{localName:"JSONElement_JSONArray"}),Tu=Q.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:Q.getEnumType(no)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:G},{no:4,name:"moved_at",kind:"message",T:G},{no:5,name:"removed_at",kind:"message",T:G}],{localName:"JSONElement_Primitive"}),bu=Q.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:Iu,repeated:!0},{no:2,name:"created_at",kind:"message",T:G},{no:3,name:"moved_at",kind:"message",T:G},{no:4,name:"removed_at",kind:"message",T:G}],{localName:"JSONElement_Text"}),Su=Q.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:Q.getEnumType(no)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:G},{no:4,name:"moved_at",kind:"message",T:G},{no:5,name:"removed_at",kind:"message",T:G}],{localName:"JSONElement_Counter"}),wu=Q.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:ca,repeated:!0},{no:2,name:"created_at",kind:"message",T:G},{no:3,name:"moved_at",kind:"message",T:G},{no:4,name:"removed_at",kind:"message",T:G}],{localName:"JSONElement_Tree"}),Eu=Q.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:so}]),ia=Q.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:ia},{no:2,name:"element",kind:"message",T:so}]),oa=Q.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:G},{no:3,name:"is_removed",kind:"scalar",T:8}]),Iu=Q.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:aa},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:G},{no:4,name:"ins_prev_id",kind:"message",T:aa},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:oa}}]),aa=Q.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:G},{no:2,name:"offset",kind:"scalar",T:5}]),ca=Q.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:As},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:G},{no:5,name:"ins_prev_id",kind:"message",T:As},{no:6,name:"ins_next_id",kind:"message",T:As},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:oa}}]),Nu=Q.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:ca,repeated:!0}]),As=Q.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:G},{no:2,name:"offset",kind:"scalar",T:5}]),di=Q.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:As},{no:2,name:"left_sibling_id",kind:"message",T:As}]),sm=Q.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:_s}]),im=Q.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:_s},{no:9,name:"updated_at",kind:"message",T:_s}]),om=Q.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:sa},{no:2,name:"auth_webhook_url",kind:"message",T:sa},{no:3,name:"auth_webhook_methods",kind:"message",T:_u},{no:4,name:"client_deactivate_threshold",kind:"message",T:sa}]),_u=Q.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"}),am=Q.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:_s},{no:5,name:"accessed_at",kind:"message",T:_s},{no:6,name:"updated_at",kind:"message",T:_s}]),Au=Q.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:Q.getEnumType(ku)},{no:2,name:"presence",kind:"message",T:ua}]),ku=Q.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),ua=Q.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),Ou=Q.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),Hr=Q.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:G},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),G=Q.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),xu=Q.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),cm=Q.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:Q.getEnumType(ru)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:xu}]);te.ValueType=no,te.DocEventType=ru,te.Snapshot=nm,te.ChangePack=rm,te.Change=su,te.ChangeID=iu,te.Operation=ou,te.Operation_Set=au,te.Operation_Add=cu,te.Operation_Move=uu,te.Operation_Remove=lu,te.Operation_Edit=fu,te.Operation_Select=hu,te.Operation_Style=du,te.Operation_Increase=mu,te.Operation_TreeEdit=gu,te.Operation_TreeStyle=pu,te.JSONElementSimple=ro,te.JSONElement=so,te.JSONElement_JSONObject=yu,te.JSONElement_JSONArray=vu,te.JSONElement_Primitive=Tu,te.JSONElement_Text=bu,te.JSONElement_Counter=Su,te.JSONElement_Tree=wu,te.RHTNode=Eu,te.RGANode=ia,te.NodeAttr=oa,te.TextNode=Iu,te.TextNodeID=aa,te.TreeNode=ca,te.TreeNodes=Nu,te.TreeNodeID=As,te.TreePos=di,te.User=sm,te.Project=im,te.UpdatableProjectFields=om,te.UpdatableProjectFields_AuthWebhookMethods=_u,te.DocumentSummary=am,te.PresenceChange=Au,te.PresenceChange_ChangeType=ku,te.Presence=ua,te.Checkpoint=Ou,te.TextNodePos=Hr,te.TimeTicket=G,te.DocEventBody=xu,te.DocEvent=cm;const Pu=(C.exports==null?{}:C.exports).default||C.exports,ce=(C.exports==null?{}:C.exports).ValueType,io=(C.exports==null?{}:C.exports).DocEventType,Cu=(C.exports==null?{}:C.exports).Snapshot,Du=(C.exports==null?{}:C.exports).ChangePack,Ru=(C.exports==null?{}:C.exports).Change,oo=(C.exports==null?{}:C.exports).ChangeID,la=(C.exports==null?{}:C.exports).Operation,Bu=(C.exports==null?{}:C.exports).Operation_Set,Lu=(C.exports==null?{}:C.exports).Operation_Add,Ju=(C.exports==null?{}:C.exports).Operation_Move,Mu=(C.exports==null?{}:C.exports).Operation_Remove,Uu=(C.exports==null?{}:C.exports).Operation_Edit,um=(C.exports==null?{}:C.exports).Operation_Select,$u=(C.exports==null?{}:C.exports).Operation_Style,Fu=(C.exports==null?{}:C.exports).Operation_Increase,ju=(C.exports==null?{}:C.exports).Operation_TreeEdit,qu=(C.exports==null?{}:C.exports).Operation_TreeStyle,Xr=(C.exports==null?{}:C.exports).JSONElementSimple,Hn=(C.exports==null?{}:C.exports).JSONElement,Vu=(C.exports==null?{}:C.exports).JSONElement_JSONObject,Ku=(C.exports==null?{}:C.exports).JSONElement_JSONArray,Yu=(C.exports==null?{}:C.exports).JSONElement_Primitive,Wu=(C.exports==null?{}:C.exports).JSONElement_Text,zu=(C.exports==null?{}:C.exports).JSONElement_Counter,Gu=(C.exports==null?{}:C.exports).JSONElement_Tree,Hu=(C.exports==null?{}:C.exports).RHTNode,Xu=(C.exports==null?{}:C.exports).RGANode,fa=(C.exports==null?{}:C.exports).NodeAttr,Zu=(C.exports==null?{}:C.exports).TextNode,Qu=(C.exports==null?{}:C.exports).TextNodeID,el=(C.exports==null?{}:C.exports).TreeNode,tl=(C.exports==null?{}:C.exports).TreeNodes,nl=(C.exports==null?{}:C.exports).TreeNodeID,rl=(C.exports==null?{}:C.exports).TreePos,lm=(C.exports==null?{}:C.exports).User,fm=(C.exports==null?{}:C.exports).Project,hm=(C.exports==null?{}:C.exports).UpdatableProjectFields,dm=(C.exports==null?{}:C.exports).UpdatableProjectFields_AuthWebhookMethods,mm=(C.exports==null?{}:C.exports).DocumentSummary,ha=(C.exports==null?{}:C.exports).PresenceChange,mi=(C.exports==null?{}:C.exports).PresenceChange_ChangeType,sl=(C.exports==null?{}:C.exports).Presence,il=(C.exports==null?{}:C.exports).Checkpoint,ol=(C.exports==null?{}:C.exports).TextNodePos,al=(C.exports==null?{}:C.exports).TimeTicket,gm=(C.exports==null?{}:C.exports).DocEventBody,pm=(C.exports==null?{}:C.exports).DocEvent,ym=Object.freeze(Object.defineProperty({__proto__:null,Change:Ru,ChangeID:oo,ChangePack:Du,Checkpoint:il,DocEvent:pm,DocEventBody:gm,DocEventType:io,DocumentSummary:mm,JSONElement:Hn,JSONElementSimple:Xr,JSONElement_Counter:zu,JSONElement_JSONArray:Ku,JSONElement_JSONObject:Vu,JSONElement_Primitive:Yu,JSONElement_Text:Wu,JSONElement_Tree:Gu,NodeAttr:fa,Operation:la,Operation_Add:Lu,Operation_Edit:Uu,Operation_Increase:Fu,Operation_Move:Ju,Operation_Remove:Mu,Operation_Select:um,Operation_Set:Bu,Operation_Style:$u,Operation_TreeEdit:ju,Operation_TreeStyle:qu,Presence:sl,PresenceChange:ha,PresenceChange_ChangeType:mi,Project:fm,RGANode:Xu,RHTNode:Hu,Snapshot:Cu,TextNode:Zu,TextNodeID:Qu,TextNodePos:ol,TimeTicket:al,TreeNode:el,TreeNodeID:nl,TreeNodes:tl,TreePos:rl,UpdatableProjectFields:hm,UpdatableProjectFields_AuthWebhookMethods:dm,User:lm,ValueType:ce,default:Pu},Symbol.toStringTag,{value:"Module"}));var le={exports:{}},Xe=le.exports;Object.defineProperty(Xe,"__esModule",{value:!0});const{proto3:Ze}=na,{ChangePack:Ar,DocEvent:vm}=Pu||ym,Tm=Ze.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),bm=Ze.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Sm=Ze.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),wm=Ze.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),Em=Ze.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Ar}]),Im=Ze.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Ar}]),Nm=Ze.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ar},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),_m=Ze.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:Ar}]),Am=Ze.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),km=Ze.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:cl,oneof:"body"},{no:2,name:"event",kind:"message",T:vm,oneof:"body"}]),cl=Ze.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),Om=Ze.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ar}]),xm=Ze.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Ar}]),Pm=Ze.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Ar},{no:4,name:"push_only",kind:"scalar",T:8}]),Cm=Ze.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Ar}]),Dm=Ze.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),Rm=Ze.makeMessageType("yorkie.v1.BroadcastResponse",[]);Xe.ActivateClientRequest=Tm,Xe.ActivateClientResponse=bm,Xe.DeactivateClientRequest=Sm,Xe.DeactivateClientResponse=wm,Xe.AttachDocumentRequest=Em,Xe.AttachDocumentResponse=Im,Xe.DetachDocumentRequest=Nm,Xe.DetachDocumentResponse=_m,Xe.WatchDocumentRequest=Am,Xe.WatchDocumentResponse=km,Xe.WatchDocumentResponse_Initialization=cl,Xe.RemoveDocumentRequest=Om,Xe.RemoveDocumentResponse=xm,Xe.PushPullChangesRequest=Pm,Xe.PushPullChangesResponse=Cm,Xe.BroadcastRequest=Dm,Xe.BroadcastResponse=Rm;const ul=(le.exports==null?{}:le.exports).default||le.exports,Bm=(le.exports==null?{}:le.exports).ActivateClientRequest,Lm=(le.exports==null?{}:le.exports).ActivateClientResponse,Jm=(le.exports==null?{}:le.exports).DeactivateClientRequest,Mm=(le.exports==null?{}:le.exports).DeactivateClientResponse,Um=(le.exports==null?{}:le.exports).AttachDocumentRequest,$m=(le.exports==null?{}:le.exports).AttachDocumentResponse,Fm=(le.exports==null?{}:le.exports).DetachDocumentRequest,jm=(le.exports==null?{}:le.exports).DetachDocumentResponse,qm=(le.exports==null?{}:le.exports).WatchDocumentRequest,Vm=(le.exports==null?{}:le.exports).WatchDocumentResponse,Km=(le.exports==null?{}:le.exports).WatchDocumentResponse_Initialization,Ym=(le.exports==null?{}:le.exports).RemoveDocumentRequest,Wm=(le.exports==null?{}:le.exports).RemoveDocumentResponse,zm=(le.exports==null?{}:le.exports).PushPullChangesRequest,Gm=(le.exports==null?{}:le.exports).PushPullChangesResponse,Hm=(le.exports==null?{}:le.exports).BroadcastRequest,Xm=(le.exports==null?{}:le.exports).BroadcastResponse,Zm=Object.freeze(Object.defineProperty({__proto__:null,ActivateClientRequest:Bm,ActivateClientResponse:Lm,AttachDocumentRequest:Um,AttachDocumentResponse:$m,BroadcastRequest:Hm,BroadcastResponse:Xm,DeactivateClientRequest:Jm,DeactivateClientResponse:Mm,DetachDocumentRequest:Fm,DetachDocumentResponse:jm,PushPullChangesRequest:zm,PushPullChangesResponse:Gm,RemoveDocumentRequest:Ym,RemoveDocumentResponse:Wm,WatchDocumentRequest:qm,WatchDocumentResponse:Vm,WatchDocumentResponse_Initialization:Km,default:ul},Symbol.toStringTag,{value:"Module"}));var ks={exports:{}},ll=ks.exports;Object.defineProperty(ll,"__esModule",{value:!0});const{ActivateClientRequest:Qm,ActivateClientResponse:eg,AttachDocumentRequest:tg,AttachDocumentResponse:ng,BroadcastRequest:rg,BroadcastResponse:sg,DeactivateClientRequest:ig,DeactivateClientResponse:og,DetachDocumentRequest:ag,DetachDocumentResponse:cg,PushPullChangesRequest:ug,PushPullChangesResponse:lg,RemoveDocumentRequest:fg,RemoveDocumentResponse:hg,WatchDocumentRequest:dg,WatchDocumentResponse:mg}=ul||Zm,{MethodKind:kr}=na,gg={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Qm,O:eg,kind:kr.Unary},deactivateClient:{name:"DeactivateClient",I:ig,O:og,kind:kr.Unary},attachDocument:{name:"AttachDocument",I:tg,O:ng,kind:kr.Unary},detachDocument:{name:"DetachDocument",I:ag,O:cg,kind:kr.Unary},removeDocument:{name:"RemoveDocument",I:fg,O:hg,kind:kr.Unary},pushPullChanges:{name:"PushPullChanges",I:ug,O:lg,kind:kr.Unary},watchDocument:{name:"WatchDocument",I:dg,O:mg,kind:kr.ServerStreaming},broadcast:{name:"Broadcast",I:rg,O:sg,kind:kr.Unary}}};ll.YorkieService=gg,(ks.exports==null?{}:ks.exports).default||ks.exports;const pg=(ks.exports==null?{}:ks.exports).YorkieService;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Vt=null;try{Vt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ne(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}ne.prototype.__isLong__,Object.defineProperty(ne.prototype,"__isLong__",{value:!0});function nt(n){return(n&&n.__isLong__)===!0}function fl(n){var e=Math.clz32(n&-n);return n?31-e:e}ne.isLong=nt;var hl={},dl={};function Zr(n,e){var t,r,s;return e?(n>>>=0,(s=0<=n&&n<256)&&(r=dl[n],r)?r:(t=pe(n,0,!0),s&&(dl[n]=t),t)):(n|=0,(s=-128<=n&&n<128)&&(r=hl[n],r)?r:(t=pe(n,n<0?-1:0,!1),s&&(hl[n]=t),t))}ne.fromInt=Zr;function Kt(n,e){if(isNaN(n))return e?fr:en;if(e){if(n<0)return fr;if(n>=gl)return bl}else{if(n<=-pl)return mt;if(n+1>=pl)return Tl}return n<0?Kt(-n,e).neg():pe(n%Os|0,n/Os|0,e)}ne.fromNumber=Kt;function pe(n,e,t){return new ne(n,e,t)}ne.fromBits=pe;var ao=Math.pow;function da(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?fr:en;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return da(n.substring(1),e,t).neg();for(var s=Kt(ao(t,8)),o=en,c=0;c<n.length;c+=8){var f=Math.min(8,n.length-c),h=parseInt(n.substring(c,c+f),t);if(f<8){var g=Kt(ao(t,f));o=o.mul(g).add(Kt(h))}else o=o.mul(s),o=o.add(Kt(h))}return o.unsigned=e,o}ne.fromString=da;function Qt(n,e){return typeof n=="number"?Kt(n,e):typeof n=="string"?da(n,e):pe(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}ne.fromValue=Qt;var ml=1<<16,yg=1<<24,Os=ml*ml,gl=Os*Os,pl=gl/2,yl=Zr(yg),en=Zr(0);ne.ZERO=en;var fr=Zr(0,!0);ne.UZERO=fr;var xs=Zr(1);ne.ONE=xs;var vl=Zr(1,!0);ne.UONE=vl;var ma=Zr(-1);ne.NEG_ONE=ma;var Tl=pe(-1,2147483647,!1);ne.MAX_VALUE=Tl;var bl=pe(-1,-1,!0);ne.MAX_UNSIGNED_VALUE=bl;var mt=pe(0,-2147483648,!1);ne.MIN_VALUE=mt;var B=ne.prototype;B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*Os+(this.low>>>0):this.high*Os+(this.low>>>0)},B.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(mt)){var t=Kt(e),r=this.div(t),s=r.mul(t).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=Kt(ao(e,6),this.unsigned),c=this,f="";;){var h=c.div(o),g=c.sub(h.mul(o)).toInt()>>>0,v=g.toString(e);if(c=h,c.isZero())return v+f;for(;v.length<6;)v="0"+v;f=""+v+f}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(mt)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},B.isZero=function(){return this.high===0&&this.low===0},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(e){return nt(e)||(e=Qt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},B.eq=B.equals,B.notEquals=function(e){return!this.eq(e)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(e){return this.comp(e)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(e){return this.comp(e)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(e){return this.comp(e)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(e){return this.comp(e)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(e){if(nt(e)||(e=Qt(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(mt)?mt:this.not().add(xs)},B.neg=B.negate,B.add=function(e){nt(e)||(e=Qt(e));var t=this.high>>>16,r=this.high&65535,s=this.low>>>16,o=this.low&65535,c=e.high>>>16,f=e.high&65535,h=e.low>>>16,g=e.low&65535,v=0,A=0,b=0,_=0;return _+=o+g,b+=_>>>16,_&=65535,b+=s+h,A+=b>>>16,b&=65535,A+=r+f,v+=A>>>16,A&=65535,v+=t+c,v&=65535,pe(b<<16|_,v<<16|A,this.unsigned)},B.subtract=function(e){return nt(e)||(e=Qt(e)),this.add(e.neg())},B.sub=B.subtract,B.multiply=function(e){if(this.isZero())return this;if(nt(e)||(e=Qt(e)),Vt){var t=Vt.mul(this.low,this.high,e.low,e.high);return pe(t,Vt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?fr:en;if(this.eq(mt))return e.isOdd()?mt:en;if(e.eq(mt))return this.isOdd()?mt:en;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(yl)&&e.lt(yl))return Kt(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,o=this.low>>>16,c=this.low&65535,f=e.high>>>16,h=e.high&65535,g=e.low>>>16,v=e.low&65535,A=0,b=0,_=0,J=0;return J+=c*v,_+=J>>>16,J&=65535,_+=o*v,b+=_>>>16,_&=65535,_+=c*g,b+=_>>>16,_&=65535,b+=s*v,A+=b>>>16,b&=65535,b+=o*g,A+=b>>>16,b&=65535,b+=c*h,A+=b>>>16,b&=65535,A+=r*v+s*g+o*h+c*f,A&=65535,pe(_<<16|J,A<<16|b,this.unsigned)},B.mul=B.multiply,B.divide=function(e){if(nt(e)||(e=Qt(e)),e.isZero())throw Error("division by zero");if(Vt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Vt.div_u:Vt.div_s)(this.low,this.high,e.low,e.high);return pe(t,Vt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?fr:en;var r,s,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return fr;if(e.gt(this.shru(1)))return vl;o=fr}else{if(this.eq(mt)){if(e.eq(xs)||e.eq(ma))return mt;if(e.eq(mt))return xs;var c=this.shr(1);return r=c.div(e).shl(1),r.eq(en)?e.isNegative()?xs:ma:(s=this.sub(e.mul(r)),o=r.add(s.div(e)),o)}else if(e.eq(mt))return this.unsigned?fr:en;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=en}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var f=Math.ceil(Math.log(r)/Math.LN2),h=f<=48?1:ao(2,f-48),g=Kt(r),v=g.mul(e);v.isNegative()||v.gt(s);)r-=h,g=Kt(r,this.unsigned),v=g.mul(e);g.isZero()&&(g=xs),o=o.add(g),s=s.sub(v)}return o},B.div=B.divide,B.modulo=function(e){if(nt(e)||(e=Qt(e)),Vt){var t=(this.unsigned?Vt.rem_u:Vt.rem_s)(this.low,this.high,e.low,e.high);return pe(t,Vt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return pe(~this.low,~this.high,this.unsigned)},B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},B.clz=B.countLeadingZeros,B.countTrailingZeros=function(){return this.low?fl(this.low):fl(this.high)+32},B.ctz=B.countTrailingZeros,B.and=function(e){return nt(e)||(e=Qt(e)),pe(this.low&e.low,this.high&e.high,this.unsigned)},B.or=function(e){return nt(e)||(e=Qt(e)),pe(this.low|e.low,this.high|e.high,this.unsigned)},B.xor=function(e){return nt(e)||(e=Qt(e)),pe(this.low^e.low,this.high^e.high,this.unsigned)},B.shiftLeft=function(e){return nt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?pe(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):pe(0,this.low<<e-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(e){return nt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?pe(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):pe(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(e){return nt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?pe(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?pe(this.high,0,this.unsigned):pe(this.high>>>e-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.rotateLeft=function(e){var t;return nt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?pe(this.high,this.low,this.unsigned):e<32?(t=32-e,pe(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,pe(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},B.rotl=B.rotateLeft,B.rotateRight=function(e){var t;return nt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?pe(this.high,this.low,this.unsigned):e<32?(t=32-e,pe(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,pe(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},B.rotr=B.rotateRight,B.toSigned=function(){return this.unsigned?pe(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:pe(this.low,this.high,!0)},B.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},B.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},ne.fromBytes=function(e,t,r){return r?ne.fromBytesLE(e,t):ne.fromBytesBE(e,t)},ne.fromBytesLE=function(e,t){return new ne(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},ne.fromBytesBE=function(e,t){return new ne(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var me=(n=>(n.Ok="ok",n.ClientNotActive="client-not-active",n.Unimplemented="unimplemented",n.Unsupported="unsupported",n.DocumentNotAttached="document-not-attached",n.DocumentNotDetached="document-not-detached",n.DocumentRemoved="document-removed",n.InvalidObjectKey="invalid-object-key",n.InvalidArgument="invalid-argument",n))(me||{});class ye extends Error{constructor(e,t){super(t),l(this,"name","YorkieError"),l(this,"stack"),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function tn(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const Sl=n=>n?Object.entries(n).length===0:!0,Ps=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},Cs=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};var Or=(n=>(n.Put="put",n.Clear="clear",n))(Or||{});class ga{constructor(e,t){l(this,"context"),l(this,"presence"),this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:"put",presence:tn(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const co="000000000000000000000000",vg="FFFFFFFFFFFFFFFFFFFFFFFF";class ct{constructor(e,t,r){l(this,"lamport"),l(this,"delimiter"),l(this,"actorID"),this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new ct(e,t,r)}static fromStruct(e){return ct.of(ne.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new ct(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const pa=0,Tg=4294967295,bg=ne.MAX_VALUE,nn=new ct(ne.fromNumber(0),pa,co);new ct(ne.fromNumber(1),pa+1,co);const gi=new ct(bg,Tg,vg);var bt=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(bt||{});let Qr=2;function Sg(n){Qr=n}const R={trivial:(...n)=>{Qr>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{Qr>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{Qr>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{Qr>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{Qr>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(n,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${n}`)},isEnabled:n=>Qr<=n};function Xn(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class pi{constructor(e){l(this,"createdAt"),l(this,"movedAt"),l(this,"removedAt"),this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class xr extends pi{constructor(e){super(e)}}class ya{constructor(e,t){l(this,"strKey"),l(this,"value"),this.strKey=e,this.value=t}static of(e,t){return new ya(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class yi{constructor(){l(this,"nodeMapByKey"),l(this,"nodeMapByCreatedAt"),this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new yi}set(e,t,r){let s;const o=this.nodeMapByKey.get(e);o!=null&&!o.isRemoved()&&o.remove(r)&&(s=o.getValue());const c=ya.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),c),(o==null||r.after(o.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,c),t.setMovedAt(r)),s}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||R.fatal(`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){R.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&!!r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class gt extends xr{constructor(e,t){super(e),l(this,"memberNodes"),this.memberNodes=t}static create(e,t){if(!t)return new gt(e,yi.create());const r=yi.create();for(const[s,o]of Object.entries(t))r.set(s,o.deepcopy(),o.getCreatedAt());return new gt(e,r)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,r){return this.memberNodes.set(e,t,r)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,r]of this)e.push(`"${Xn(t)}":${r.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,r]of this){const{createdAt:s,value:o,type:c}=r.toJSForTest();e[t]={key:t,createdAt:s,value:o,type:c}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[s]of this)t.push(s);const r=[];for(const s of t.sort()){const o=(e=this.memberNodes.get(s))==null?void 0:e.getValue();r.push(`"${Xn(s)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=gt.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const r=t.getValue();if(e(r,this))return;r instanceof xr&&r.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var Ae=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(Ae||{});class rn{constructor(e,t){l(this,"parentCreatedAt"),l(this,"executedAt"),this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class wl{constructor(e){l(this,"value"),l(this,"left"),l(this,"right"),l(this,"parent"),l(this,"weight"),this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class vi{constructor(e){l(this,"root"),this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&R.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,r=e,s;for(;r;)(!s||s===r.getRight())&&(t+=r.getLength()+(r.hasLeft()?r.getLeftWeight():0)),s=r,r=r.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new vi(e.getLeft());t.root&&t.root.setParent();const r=new vi(e.getRight());if(r.root&&r.root.setParent(),t.root){const s=t.getRightmost();t.splayNode(s),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var We=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(We||{});class De extends pi{constructor(e,t){super(t),l(this,"valueType"),l(this,"value"),this.valueType=De.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new De(e,t)}static valueFromBytes(e,t){switch(e){case 0:return null;case 1:return!!t[0];case 2:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 4:{const r=new DataView(t.buffer);return t.forEach(function(s,o){r.setUint8(o,s)}),r.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(t);case 3:return ne.fromBytesLE(Array.from(t));case 6:return t;case 7:return new Date(ne.fromBytesLE(Array.from(t),!0).toNumber());default:throw new ye(me.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${Xn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=De.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof ne)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return De.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case 5:return new TextEncoder().encode(this.value);case 3:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case 6:return this.value;case 7:{const e=this.value,t=ne.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new ye(me.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class uo extends wl{constructor(e){super(e),l(this,"prev"),l(this,"next"),this.value=e}static createAfter(e,t){const r=new uo(t),s=e.next;return e.next=r,r.prev=e,r.next=s,s&&(s.prev=r),r}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Ti{constructor(){l(this,"dummyHead"),l(this,"last"),l(this,"nodeMapByIndex"),l(this,"nodeMapByCreatedAt");const e=De.of(0,nn);e.setRemovedAt(nn),this.dummyHead=new uo(e),this.last=this.dummyHead,this.nodeMapByIndex=new vi,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Ti}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());for(r||R.fatal(`cant find the given node: ${e.toIDString()}`);r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const s=this.findNextBeforeExecutedAt(e,r),o=uo.createAfter(s,t);s===this.last&&(this.last=o),this.nodeMapByIndex.insertAfter(s,o),this.nodeMapByCreatedAt.set(o.getCreatedAt().toIDString(),o)}moveAfter(e,t,r){const s=this.nodeMapByCreatedAt.get(e.toIDString());s||R.fatal(`cant find the given node: ${e.toIDString()}`);const o=this.nodeMapByCreatedAt.get(t.toIDString());o||R.fatal(`cant find the given node: ${t.toIDString()}`),s!==o&&(!o.getValue().getMovedAt()||r.after(o.getValue().getMovedAt()))&&(this.release(o),this.insertAfter(s.getCreatedAt(),o.getValue(),r),o.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||R.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let s=t;if(e===0&&t===this.dummyHead||r>0)do s&&(s=s.getNext());while(s&&s.isRemoved());return s}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),s=r.isRemoved();return r.remove(t)&&!s&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(!!r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class St extends xr{constructor(e,t){super(e),l(this,"elements"),this.elements=t}static create(e,t){if(!t)return new St(e,Ti.create());const r=Ti.create();for(const s of t)r.insertAfter(r.getLastCreatedAt(),s.deepcopy());return new St(e,r)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,r){this.elements.moveAfter(e,t,r)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const r=t.getValue();if(e(r,this))return;r instanceof xr&&r.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{createdAt:r,value:s,type:o}=this.get(t).toJSForTest();e[t]={key:String(t),createdAt:r,value:s,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=St.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class Pr extends rn{constructor(e,t,r){super(e,r),l(this,"createdAt"),this.createdAt=t}static create(e,t,r){return new Pr(e,t,r)}execute(e,t){var r;const s=e.findByCreatedAt(this.getParentCreatedAt());if(s||R.fatal(`fail to find ${this.getParentCreatedAt()}`),s instanceof xr||R.fatal(`only object and array can execute remove: ${s}`),t===Ae.UndoRedo){let g=s.getByID(this.createdAt);for(;g;){if(g.getRemovedAt())return;g=(r=e.findElementPairByCreatedAt(g.getCreatedAt()))==null?void 0:r.parent}}const o=s.subPathOf(this.createdAt),c=this.toReverseOperation(s),f=s.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(f),{opInfos:s instanceof St?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(o)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:o}],reverseOp:c}}toReverseOperation(e){if(e instanceof gt){const t=e.subPathOf(this.createdAt);if(t!==void 0){const r=e.get(t);if(r!==void 0)return es.create(t,r.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class es extends rn{constructor(e,t,r,s){super(r,s),l(this,"key"),l(this,"value"),this.key=e,this.value=t}static create(e,t,r,s){return new es(e,t,r,s)}execute(e,t){var r;const s=e.findByCreatedAt(this.getParentCreatedAt());if(s||R.fatal(`fail to find ${this.getParentCreatedAt()}`),s instanceof gt||R.fatal("fail to execute, only object can execute set"),t===Ae.UndoRedo){let g=s;for(;g;){if(g.getRemovedAt())return;g=(r=e.findElementPairByCreatedAt(g.getCreatedAt()))==null?void 0:r.parent}}const o=s.get(this.key),c=this.toReverseOperation(o),f=this.value.deepcopy(),h=s.set(this.key,f,this.getExecutedAt());return t===Ae.UndoRedo&&e.findByCreatedAt(f.getCreatedAt())&&e.deregisterElement(f),e.registerElement(f,s),h&&e.registerRemovedElement(h),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:c}}toReverseOperation(e){let t=Pr.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=es.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class bi extends rn{constructor(e,t,r,s){super(e,s),l(this,"prevCreatedAt"),l(this,"value"),this.prevCreatedAt=t,this.value=r}static create(e,t,r,s){return new bi(e,t,r,s)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||R.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof St||R.fatal("fail to execute, only array can execute add");const r=t,s=this.value.deepcopy();return r.insertAfter(this.prevCreatedAt,s),e.registerElement(s,r),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(r.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Cr extends rn{constructor(e,t,r,s){super(e,s),l(this,"prevCreatedAt"),l(this,"createdAt"),this.prevCreatedAt=t,this.createdAt=r}static create(e,t,r,s){return new Cr(e,t,r,s)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||R.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof St||R.fatal("fail to execute, only array can execute move");const r=t,s=Number(r.subPathOf(this.createdAt));r.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(r.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:o,previousIndex:s}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class ts{constructor(e,t,r,s){l(this,"key"),l(this,"value"),l(this,"updatedAt"),l(this,"_isRemoved"),this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=s}static of(e,t,r,s){return new ts(e,t,r,s)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class hr{constructor(){l(this,"nodeMapByKey"),l(this,"numberOfRemovedElement"),this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new hr}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,r){const s=this.nodeMapByKey.get(e);if(s&&s.isRemoved()&&r.after(s.getUpdatedAt())&&(this.numberOfRemovedElement-=1),s===void 0||r.after(s.getUpdatedAt())){const o=ts.of(e,t,r,!1);return this.nodeMapByKey.set(e,o),s!==void 0&&s.isRemoved()?[s,o]:[void 0,o]}return s.isRemoved()?[s,void 0]:[void 0,void 0]}setInternal(e,t,r,s){const o=ts.of(e,t,r,s);this.nodeMapByKey.set(e,o),s&&this.numberOfRemovedElement++}remove(e,t){const r=this.nodeMapByKey.get(e),s=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const f=ts.of(e,"",t,!0);return this.nodeMapByKey.set(e,f),s.push(f),s}const o=r.isRemoved();o||(this.numberOfRemovedElement+=1),o&&s.push(r);const c=ts.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,c),s.push(c),s}return s}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new hr;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${Xn(t)}":"${Xn(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class Si{constructor(e){l(this,"attributes"),l(this,"content"),this.attributes=hr.create(),this.content=e}static create(e){return new Si(e)}get length(){return this.content.length}substring(e,t){const r=new Si(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=Xn(this.content),t=this.attributes.toObject(),r=[];for(const[s,o]of Object.entries(t)){const c=JSON.parse(o),f=typeof c=="string"?`"${Xn(s)}":"${Xn(c)}"`:`"${Xn(s)}":${String(c)}`;r.push(f)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof ts&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class Yt extends pi{constructor(e,t){super(t),l(this,"rgaTreeSplit"),this.rgaTreeSplit=e}static create(e,t){return new Yt(e,t)}edit(e,t,r,s,o){const c=t?Si.create(t):void 0;if(c&&s)for(const[b,_]of Object.entries(s))c.setAttr(b,_,r);const[f,h,g,v]=this.rgaTreeSplit.edit(e,r,c,o),A=v.map(b=>({...b,value:b.value?{attributes:Cs(b.value.getAttributes()),content:b.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[h,A,g,[f,f]]}setStyle(e,t,r,s){const[,o]=this.rgaTreeSplit.findNodeWithSplit(e[1],r),[,c]=this.rgaTreeSplit.findNodeWithSplit(e[0],r),f=[],h=this.rgaTreeSplit.findBetween(c,o),g=new Map,v=[];for(const b of h){const _=b.getCreatedAt().getActorID(),J=s!=null&&s.size?s.has(_)?s.get(_):nn:gi;if(b.canStyle(r,J)){const V=g.get(_),Y=b.getCreatedAt();(!V||Y.after(V))&&g.set(_,Y),v.push(b)}}const A=[];for(const b of v){if(b.isRemoved())continue;const[_,J]=this.rgaTreeSplit.findIndexesFromRange(b.createPosRange());f.push({type:"style",actor:r.getActorID(),from:_,to:J,value:{attributes:Cs(t)}});for(const[V,Y]of Object.entries(t)){const[oe]=b.getValue().setAttr(V,Y,r);oe!==void 0&&A.push({parent:b.getValue(),child:oe})}}return[g,A,f]}indexRangeToPosRange(e,t){const r=this.rgaTreeSplit.indexToPos(e);return e===t?[r,r]:[r,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const r=t.getValue();e.push({attributes:Cs(r.getAttributes()),content:r.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Yt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const t of this.rgaTreeSplit){t.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:t});for(const r of t.getValue().getGCPairs())e.push(r)}return e}}class wi extends rn{constructor(e,t,r,s,o,c,f){super(e,f),l(this,"fromPos"),l(this,"toPos"),l(this,"maxCreatedAtMapByActor"),l(this,"content"),l(this,"attributes"),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=s,this.content=o,this.attributes=c}static create(e,t,r,s,o,c,f){return new wi(e,t,r,s,o,c,f)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||R.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Yt||R.fatal("fail to execute, only Text can execute edit");const r=t,[,s,o]=r.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const c of o)e.registerGCPair(c);return{opInfos:s.map(({from:c,to:f,value:h})=>({type:"edit",from:c,to:f,value:h,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),s=this.content;return`${e}.EDIT(${t},${r},${s})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Ei extends rn{constructor(e,t,r,s,o,c){super(e,c),l(this,"fromPos"),l(this,"toPos"),l(this,"maxCreatedAtMapByActor"),l(this,"attributes"),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=s,this.attributes=o}static create(e,t,r,s,o,c){return new Ei(e,t,r,s,o,c)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||R.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Yt||R.fatal("fail to execute, only Text can execute edit");const r=t,[,s,o]=r.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const c of s)e.registerGCPair(c);return{opInfos:o.map(({from:c,to:f,value:h})=>({type:"style",from:c,to:f,value:h,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),s=this.attributes;return`${e}.STYL(${t},${r},${JSON.stringify(s)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const wg=2,Eg="root",dr="text";function Ii(n,e){let t=0;const r=n.children;for(let s=0;s<e;s++){const o=r[s];!o||o.isRemoved||(t+=o.paddedSize)}return t}class Ig{constructor(e,t=[]){if(l(this,"type"),l(this,"parent"),l(this,"_children"),l(this,"size"),this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const r=t.updateDescendantsSize();t.isRemoved||(e+=r)}return this.size+=e,this.paddedSize}get isText(){return this.type===dr}get paddedSize(){return this.size+(this.isText?0:wg)}isAncestorOf(e){return Ng(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),s=this.value.slice(e);if(!s.length)return;this.value=r;const o=this.cloneText(e+t);return o.value=s,this.parent.insertAfterInternal(o,this),o}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const s=this.children.slice(0,e),o=this.children.slice(e);this._children=s,r._children=o,this.size=this._children.reduce((c,f)=>c+f.paddedSize,0),r.size=r._children.reduce((c,f)=>c+f.paddedSize,0);for(const c of r._children)c.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(s=>!s.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function Ng(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var Fe=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(Fe||{});function El(n,e,t,r){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new Error(`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new Error(`to is out of range: ${t} > ${n.size}`);if(e===t)return;let s=0;for(const o of n.children){if(e-o.paddedSize<s&&s<t){const c=o.isText?e-s:e-s-1,f=o.isText?t-s:t-s-1,h=!o.isText&&c<0,g=!o.isText&&f>o.size;(o.isText||h)&&r([o,o.isText?"Text":"Start"],g),El(o,Math.max(0,c),Math.min(f,o.size),r),g&&r([o,"End"],g)}s+=o.paddedSize}}function Il(n,e,t=0){for(const r of n.children)Il(r,e,t+1);e(n,t)}function lo(n,e,t=0){for(const r of n._children)lo(r,e,t+1);e(n,t)}function va(n,e,t=!0){if(e>n.size)throw new Error(`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,s=0;for(const o of n.children){if(t&&o.isText&&o.size>=e-s)return va(o,e-s,t);if(e===s)return{node:n,offset:r};if(!t&&o.paddedSize===e-s)return{node:n,offset:r+1};if(o.paddedSize>e-s)return va(o,e-s-1,t);s+=o.paddedSize,r+=1}return{node:n,offset:r}}function Nl(n){return n.isText||n.children.length===0?n:Nl(n.children[0])}function _g(n,e){if(n.size<e)throw new Error("unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class Ag{constructor(e){l(this,"root"),this.root=e}tokensBetween(e,t,r){El(this.root,e,t,r)}traverse(e){Il(this.root,e,0)}traverseAll(e){lo(this.root,e,0)}findTreePos(e,t=!0){return va(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const s=r.parent.findOffset(r);if(s===-1)throw new Error("invalid treePos");const o=Ii(r.parent,s);t.push(o+e.offset),r=r.parent}else if(r.hasTextChild()){const s=Ii(r,e.offset);t.push(s)}else t.push(e.offset);for(;r.parent;){const s=r.parent.findOffset(r);if(s===-1)throw new Error("invalid treePos");t.push(s),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const s=e[r];if(t=t.children[s],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return _g(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const s=t.nextSibling;return s||t.parent}return t}return t.children.length===r?t:Nl(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let s=0,o=1;if(t.isText){s+=r;const c=t.parent,f=c.findOffset(t);if(f===-1)throw new Error("invalid pos");s+=Ii(c,f),t=t.parent}else s+=Ii(t,r);for(;t!=null&&t.parent;){const c=t.parent,f=c.findOffset(t);if(f===-1)throw new Error("invalid pos");s+=Ii(c,f),o++,t=t.parent}return s+o-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const kg=(n,e)=>n===e?0:n<e?-1:1;class Og{constructor(e,t,r){l(this,"key"),l(this,"value"),l(this,"parent"),l(this,"left"),l(this,"right"),l(this,"isRed"),this.key=e,this.value=t,this.isRed=r}}class xg{constructor(e){l(this,"stack"),this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class _l{constructor(e){l(this,"root"),l(this,"comparator"),l(this,"counter"),this.comparator=typeof e<"u"?e:kg,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new xg(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let s=t.parent,o=t;for(;s&&o===s.left;)o=s,s=s.parent;return s}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new Og(e,t,!0);const s=this.comparator(e,r.key);return s<0?r.left=this.putInternal(e,t,r.left):s>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class sn{constructor(e,t){l(this,"parentID"),l(this,"leftSiblingID"),this.parentID=e,this.leftSiblingID=t}static of(e,t){return new sn(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,s;return r.isText?(r.parent.children[0]===r&&t===0?s=r.parent:s=r,r=r.parent):t===0?s=r:s=r.children[t-1],sn.of(r.id,Qe.of(s.getCreatedAt(),s.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return sn.of(Qe.of(ct.fromStruct(e.parentID.createdAt),e.parentID.offset),Qe.of(ct.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),r=this.getLeftSiblingID(),s=e.findFloorNode(t);let o=e.findFloorNode(r);if(!s||!o)throw new Error(`cannot find node of CRDTTreePos(${t.toTestString()}, ${r.toTestString()})`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===o.id.getOffset()&&o.insPrevID&&(o=e.findFloorNode(o.insPrevID)),[s,o]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Qe{constructor(e,t){l(this,"createdAt"),l(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new Qe(e,t)}static fromStruct(e){return Qe.of(ct.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class wt extends Ig{constructor(e,t,r,s,o){super(t),l(this,"id"),l(this,"removedAt"),l(this,"attrs"),l(this,"insPrevID"),l(this,"insNextID"),l(this,"_value",""),this.id=e,this.removedAt=o,s&&(this.attrs=s),typeof r=="string"?this.value=r:Array.isArray(r)&&(this._children=r)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,t,r,s){return new wt(e,t,r,s)}deepcopy(){var e;const t=new wt(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)==null?void 0:e.deepcopy(),t._children=this._children.map(r=>{const s=r.deepcopy();return s.parent=t,s}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&this.updateAncestorsSize()}cloneText(e){return new wt(Qe.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new wt(Qe.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,r){const s=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,r);if(s){if(s.insPrevID=this.id,this.insNextID){const o=e.findFloorNode(this.insNextID);o.insPrevID=s.id,s.insNextID=this.insNextID}this.insNextID=s.id,e.registerNode(s)}return s}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return this.isText?!1:!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,t){this.attrs||(this.attrs=new hr);const r=new Array;for(const[s,o]of Object.entries(e))r.push(this.attrs.set(s,o,t));return r}purge(e){this.attrs&&this.attrs.purge(e)}getGCPairs(){const e=[];if(!this.attrs)return e;for(const t of this.attrs)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}function Ta(n){var e;if(n.isText){const r=n;return{type:r.type,value:r.value}}const t={type:n.type,children:n.children.map(Ta)};return n.attrs&&(t.attributes=Cs((e=n.attrs)==null?void 0:e.toObject())),t}function ba(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${Xn(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>ba(t)).join("")}</${n.type}>`}function Al(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(Al),size:n.size,isRemoved:n.isRemoved}}class Wt extends pi{constructor(e,t){super(t),l(this,"indexTree"),l(this,"nodeMapByID"),this.indexTree=new Ag(e),this.nodeMapByID=new _l(Qe.createComparator()),this.indexTree.traverseAll(r=>{this.nodeMapByID.put(r.id,r)})}static create(e,t){return new Wt(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[r,s]=e.toTreeNodePair(this);let o=s;const c=r===o,f=o.parent&&!c?o.parent:r;if(o.isText&&o.split(this,e.getLeftSiblingID().getOffset()-o.id.getOffset()),t){const h=f.allChildren,g=c?0:h.indexOf(o)+1;for(let v=g;v<h.length;v++){const A=h[v];if(!A.id.getCreatedAt().after(t))break;o=A}}return[f,o]}style(e,t,r,s){const[o,c]=this.findNodesAndSplitText(e[0],r),[f,h]=this.findNodesAndSplitText(e[1],r),g=[],v=t?Cs(t):{},A=new Map,b=[];return this.traverseInPosRange(o,c,f,h,([_])=>{const J=_.getCreatedAt().getActorID(),V=s?s.has(J)?s.get(J):nn:gi;if(_.canStyle(r,V)&&t){const Y=A.get(J),oe=_.getCreatedAt();(!Y||oe.after(Y))&&A.set(J,oe);const ke=_.setAttrs(t,r),de=ke.reduce((Re,[,ss])=>(ss&&(Re[ss.getKey()]=v[ss.getKey()]),Re),{}),Ne=_.parent,Oe=_.prevSibling||_.parent;Object.keys(de).length>0&&g.push({type:"style",from:this.toIndex(Ne,Oe),to:this.toIndex(_,_),fromPath:this.toPath(Ne,Oe),toPath:this.toPath(_,_),actor:r.getActorID(),value:de});for(const[Re]of ke)Re&&b.push({parent:_,child:Re})}}),[A,b,g]}removeStyle(e,t,r,s){const[o,c]=this.findNodesAndSplitText(e[0],r),[f,h]=this.findNodesAndSplitText(e[1],r),g=[],v=new Map,A=[];return this.traverseInPosRange(o,c,f,h,([b])=>{const _=b.getCreatedAt().getActorID(),J=s?s.has(_)?s.get(_):nn:gi;if(b.canStyle(r,J)&&t){const V=v.get(_),Y=b.getCreatedAt();(!V||Y.after(V))&&v.set(_,Y),b.attrs||(b.attrs=new hr);for(const de of t){const Ne=b.attrs.remove(de,r);for(const Oe of Ne)A.push({parent:b,child:Oe})}const oe=b.parent,ke=b.prevSibling||b.parent;g.push({actor:r.getActorID(),type:"removeStyle",from:this.toIndex(oe,ke),to:this.toIndex(b,b),fromPath:this.toPath(oe,ke),toPath:this.toPath(b,b),value:t})}}),[v,A,g]}edit(e,t,r,s,o,c){const[f,h]=this.findNodesAndSplitText(e[0],s),[g,v]=this.findNodesAndSplitText(e[1],s),A=this.toIndex(f,h),b=this.toPath(f,h),_=[],J=[],V=[],Y=new Map;this.traverseInPosRange(f,h,g,v,([de,Ne],Oe)=>{if(Ne===Fe.Start&&!Oe)for(const is of de.children)V.push(is);const Re=de.getCreatedAt().getActorID(),ss=c?c.has(Re)?c.get(Re):nn:gi;if(de.canDelete(s,ss)||_.includes(de.parent)){const is=Y.get(Re),Ri=de.getCreatedAt();(!is||Ri.after(is))&&Y.set(Re,Ri),(Ne===Fe.Text||Ne===Fe.Start)&&_.push(de),J.push([de,Ne])}});const oe=this.makeDeletionChanges(J,s),ke=[];for(const de of _)de.remove(s),de.isRemoved&&ke.push({parent:this,child:de});for(const de of V)de.removedAt||f.append(de);if(r>0){let de=0,Ne=f,Oe=h;for(;de<r;)Ne.split(this,Ne.findOffset(Oe)+1,o),Oe=Ne,Ne=Ne.parent,de++;oe.push({type:"content",from:A,to:A,fromPath:b,toPath:b,actor:s.getActorID()})}if(t!=null&&t.length){const de=[];let Ne=h;for(const Oe of t)Ne===f?f.insertAt(Oe,0):f.insertAfter(Oe,Ne),Ne=Oe,lo(Oe,Re=>{f.isRemoved&&(Re.remove(s),ke.push({parent:this,child:Re})),this.nodeMapByID.put(Re.id,Re)}),Oe.isRemoved||de.push(Oe);if(de.length){const Oe=de.map(Re=>Ta(Re));oe.length&&oe[oe.length-1].from===A?oe[oe.length-1].value=Oe:oe.push({type:"content",from:A,to:A,fromPath:b,toPath:b,actor:s.getActorID(),value:Oe})}}return[oe,ke,Y]}editT(e,t,r,s,o){const c=this.findPos(e[0]),f=this.findPos(e[1]);this.edit([c,f],t,r,s,o)}move(e,t,r){throw new Error(`not implemented: ${e}, ${t}, ${r}`)}purge(e){var t;(t=e.parent)==null||t.removeChild(e),this.nodeMapByID.remove(e.id);const r=e.insPrevID,s=e.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=s}if(s){const o=this.findFloorNode(s);o.insPrevID=r}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(t=>{t.getRemovedAt()&&e.push({parent:this,child:t});for(const r of t.getGCPairs())e.push(r)}),e}findPos(e,t=!0){const r=this.indexTree.findTreePos(e,t);return sn.fromTreePos(r)}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return ba(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),t=(r,s=void 0,o=void 0,c=0)=>{var f,h,g,v;let A,b,_;const J=r.isText?{node:r,offset:0}:s&&o?this.toTreePos(s,o):null;J&&(A=this.indexTree.indexOf(J),b=this.indexTree.treePosToPath(J),_=sn.fromTreePos(J).toStruct());const V={type:r.type,parent:s==null?void 0:s.id.toTestString(),size:r.size,id:r.id.toTestString(),removedAt:(f=r.removedAt)==null?void 0:f.toTestString(),insPrev:(h=r.insPrevID)==null?void 0:h.toTestString(),insNext:(g=r.insNextID)==null?void 0:g.toTestString(),value:r.isText?r.value:void 0,isRemoved:r.isRemoved,children:[],depth:c,attributes:r.attrs?Cs((v=r.attrs)==null?void 0:v.toObject()):void 0,index:A,path:b,pos:_};for(let Y=0;Y<r.allChildren.length;Y++){const oe=Y===0?r:r.allChildren[Y-1];V.children.push(t(r.allChildren[Y],r,oe,c+1))}return V};return t(e)}getRootTreeNode(){return Ta(this.indexTree.getRoot())}toTestTreeNode(){return Al(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new Wt(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.treePosToPath(r):[]}toIndex(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.indexOf(r):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,r]=e,s=this.findPos(t);return t===r?[s.toStruct(),s.toStruct()]:[s.toStruct(),this.findPos(r).toStruct()]}posRangeToPathRange(e){const[t,r]=this.findNodesAndSplitText(e[0]),[s,o]=this.findNodesAndSplitText(e[1]);return[this.toPath(t,r),this.toPath(s,o)]}posRangeToIndexRange(e){const[t,r]=this.findNodesAndSplitText(e[0]),[s,o]=this.findNodesAndSplitText(e[1]);return[this.toIndex(t,r),this.toIndex(s,o)]}traverseInPosRange(e,t,r,s,o){const c=this.toIndex(e,t),f=this.toIndex(r,s);return this.indexTree.tokensBetween(c,f,o)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let s;for(;e.isRemoved;)s=e,e=s.parent;const o=e.findOffset(s);return{node:e,offset:o}}if(e===t)return{node:e,offset:0};let r=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};r++}return{node:e,offset:r}}makeDeletionChanges(e,t){const r=[],s=[];let o=null,c=null;for(let f=0;f<e.length;f++){const h=e[f],g=e[f+1];o||(o=h),c=h;const v=this.findRightToken(h);(!v||!g||v[0]!==g[0]||v[1]!==g[1])&&(s.push([o,c]),o=null,c=null)}for(const f of s){const[h,g]=f,[v,A]=this.findLeftToken(h),[b,_]=g,J=A===Fe.Start?v:v.parent,V=_===Fe.Start?b:b.parent,Y=this.toIndex(J,v),oe=this.toIndex(V,b);Y<oe&&(r.length>0&&Y===r[r.length-1].to?(r[r.length-1].to=oe,r[r.length-1].toPath=this.toPath(V,b)):r.push({type:"content",from:Y,to:oe,fromPath:this.toPath(J,v),toPath:this.toPath(V,b),actor:t.getActorID()}))}return r.reverse()}findRightToken([e,t]){if(t===Fe.Start){const f=e.allChildren;return f.length>0?[f[0],f[0].isText?Fe.Text:Fe.Start]:[e,Fe.End]}const r=e.parent,s=r.allChildren,o=s.indexOf(e);if(r&&o===s.length-1)return[r,Fe.End];const c=s[o+1];return[c,c.isText?Fe.Text:Fe.Start]}findLeftToken([e,t]){if(t===Fe.End){const f=e.allChildren;if(f.length>0){const h=f[f.length-1];return[h,h.isText?Fe.Text:Fe.End]}return[e,Fe.Start]}const r=e.parent,s=r.allChildren,o=s.indexOf(e);if(r&&o===0)return[r,Fe.Start];const c=s[o-1];return[c,c.isText?Fe.Text:Fe.End]}}class Ni extends rn{constructor(e,t,r,s,o,c,f){super(e,f),l(this,"fromPos"),l(this,"toPos"),l(this,"contents"),l(this,"splitLevel"),l(this,"maxCreatedAtMapByActor"),this.fromPos=t,this.toPos=r,this.contents=s,this.splitLevel=o,this.maxCreatedAtMapByActor=c}static create(e,t,r,s,o,c,f){return new Ni(e,t,r,s,o,c,f)}execute(e){var t;const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Wt||R.fatal("fail to execute, only Tree can execute edit");const s=this.getExecutedAt(),o=r,[c,f]=o.edit([this.fromPos,this.toPos],(t=this.contents)==null?void 0:t.map(h=>h.deepcopy()),this.splitLevel,s,(()=>{let h=s.getDelimiter();return this.contents!==void 0&&(h+=this.contents.length),()=>ct.of(s.getLamport(),++h,s.getActorID())})(),this.maxCreatedAtMapByActor);for(const h of f)e.registerGCPair(h);return{opInfos:c.map(({from:h,to:g,value:v,splitLevel:A,fromPath:b,toPath:_})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:h,to:g,value:v,splitLevel:A,fromPath:b,toPath:_}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,s=this.contents||[];return`${e}.EDIT(${t},${r},${s.map(o=>ba(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Dr{constructor(e,t,r,s){l(this,"clientSeq"),l(this,"serverSeq"),l(this,"lamport"),l(this,"actor"),this.clientSeq=e,this.serverSeq=s,this.lamport=t,this.actor=r}static of(e,t,r,s){return new Dr(e,t,r,s)}next(){return new Dr(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new Dr(this.clientSeq,e,this.actor):new Dr(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return ct.of(this.lamport,e,this.actor)}setActor(e){return new Dr(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Pg=new Dr(0,ne.fromInt(0,!0),co);class ns{constructor({id:e,operations:t,presenceChange:r,message:s}){l(this,"id"),l(this,"operations"),l(this,"presenceChange"),l(this,"message"),this.id=e,this.operations=t||[],this.presenceChange=r,this.message=s}static create({id:e,operations:t,presenceChange:r,message:s}){return new ns({id:e,operations:t,presenceChange:r,message:s})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const s=[],o=[];for(const c of this.operations){const f=c.execute(e,r);if(!f)continue;const{opInfos:h,reverseOp:g}=f;s.push(...h),g&&o.unshift(g)}return this.presenceChange&&(this.presenceChange.type===Or.Put?t.set(this.id.getActorID(),tn(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:s,reverseOps:o}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:je.bytesToHex(je.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>je.bytesToHex(je.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:s,message:o}=e;return ns.create({id:je.bytesToChangeID(je.hexToBytes(t)),operations:r==null?void 0:r.map(c=>je.bytesToOperation(je.hexToBytes(c))),presenceChange:s,message:o})}}class fo{constructor(e,t,r,s,o,c){l(this,"documentKey"),l(this,"checkpoint"),l(this,"isRemoved"),l(this,"changes"),l(this,"snapshot"),l(this,"minSyncedTicket"),this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=s,this.snapshot=o,this.minSyncedTicket=c}static create(e,t,r,s,o,c){return new fo(e,t,r,s,o,c)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Ds{constructor(e,t){l(this,"serverSeq"),l(this,"clientSeq"),this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Ds(e,t)}increaseClientSeq(e){return e===0?this:new Ds(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return Ds.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Cg=new Ds(ne.fromInt(0,!0),0);class Zn{constructor(e,t){l(this,"createdAt"),l(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new Zn(e,t)}static fromStruct(e){return Zn.of(ct.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new Zn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Dg=Zn.of(nn,0);class on{constructor(e,t){l(this,"id"),l(this,"relativeOffset"),this.id=e,this.relativeOffset=t}static of(e,t){return new on(e,t)}static fromStruct(e){const t=Zn.fromStruct(e.id);return on.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Zn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Rr extends wl{constructor(e,t,r){super(t),l(this,"id"),l(this,"removedAt"),l(this,"prev"),l(this,"next"),l(this,"insPrev"),l(this,"insNext"),this.id=e,this.removedAt=r}static create(e,t){return new Rr(e,t)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new Rr(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){const r=!this.removedAt;return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))?r:!1}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[on.of(this.id,0),on.of(this.id,this.getLength())]}deepcopy(){return new Rr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}toIDString(){return this.id.toIDString()}}class Rs{constructor(){l(this,"head"),l(this,"treeByIndex"),l(this,"treeByID"),this.head=Rr.create(Dg),this.treeByIndex=new vi,this.treeByID=new _l(Rr.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Rs}edit(e,t,r,s){const[o,c]=this.findNodeWithSplit(e[1],t),[f,h]=this.findNodeWithSplit(e[0],t),g=this.findBetween(h,c),[v,A,b]=this.deleteNodes(g,t,s),_=c?c.getID():o.getID();let J=on.of(_,0);if(r){const Y=this.posToIndex(f.createPosRange()[1],!0),oe=this.insertAfter(f,Rr.create(Zn.of(t,0),r));v.length&&v[v.length-1].from===Y?v[v.length-1].value=r:v.push({actor:t.getActorID(),from:Y,to:Y,value:r}),J=on.of(oe.getID(),oe.getContentLength())}const V=[];for(const[,Y]of b)V.push({parent:this,child:Y});return[J,A,V,v]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),s=t;return on.of(s.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),s=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);s||R.fatal(`the node of the given id should be found: ${r.toTestString()}`);const o=this.treeByIndex.indexOf(s),c=s.isRemoved()?0:r.getOffset()-s.getID().getOffset();return o+c}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Rs;let t=this.head.getNext(),r=e.head,s;for(;t;){if(s=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const o=e.findNode(t.getInsPrevID());s.setInsPrev(o)}r=s,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let s=this.findFloorNodePreferToLeft(r);const o=r.getOffset()-s.getID().getOffset();for(this.splitNode(s,o);s.hasNext()&&s.getNext().getCreatedAt().after(t);)s=s.getNext();return[s,s.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||R.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let s=e;for(;s&&s!==t;)r.push(s),s=s.getNext();return r}splitNode(e,t){if(t>e.getContentLength()&&R.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const s=e.getInsNext();return s&&s.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r){if(!e.length)return[[],new Map,new Map];const[s,o]=this.filterNodes(e,t,r),c=new Map,f=new Map,h=this.makeChanges(o,t);for(const g of s){const v=g.getCreatedAt().getActorID();(!c.has(v)||g.getID().getCreatedAt().after(c.get(v)))&&c.set(v,g.getID().getCreatedAt()),f.set(g.getID().toIDString(),g),g.remove(t)}return this.deleteIndexNodes(o),[h,c,f]}filterNodes(e,t,r){const s=!!r,o=[],c=[],[f,h]=this.findEdgesOfCandidates(e);c.push(f);for(const g of e){const v=g.getCreatedAt().getActorID(),A=s?r.has(v)?r.get(v):nn:gi;g.canDelete(t,A)?o.push(g):c.push(g)}return c.push(h),[o,c]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let s,o;for(let c=0;c<e.length-1;c++){const f=e[c],h=e[c+1];f.getNext()!=h&&([s]=this.findIndexesFromRange(f.getNext().createPosRange()),h?[,o]=this.findIndexesFromRange(h.getPrev().createPosRange()):o=this.treeByIndex.length,s<o&&r.push({actor:t.getActorID(),from:s,to:o}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],s=e[t+1];r.getNext()!=s&&this.treeByIndex.deleteRange(r,s)}}purge(e){const t=e.getPrev(),r=e.getNext(),s=e.getInsPrev(),o=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),s&&s.setInsNext(o),o&&o.setInsPrev(s),e.setInsPrev(void 0),e.setInsNext(void 0)}}const kl=n=>n<0?Math.ceil(n):Math.floor(n);var Qn=(n=>(n[n.IntegerCnt=0]="IntegerCnt",n[n.LongCnt=1]="LongCnt",n))(Qn||{});class Et extends pi{constructor(e,t,r){switch(super(r),l(this,"valueType"),l(this,"value"),this.valueType=e,e){case 0:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=ne.fromNumber(t).toInt():this.value=kl(t):this.value=t.toInt();break;case 1:typeof t=="number"?this.value=ne.fromNumber(t):this.value=t;break;default:throw new ye(me.Unimplemented,`unimplemented type: ${e}`)}}static create(e,t,r){return new Et(e,t,r)}static valueFromBytes(e,t){switch(e){case 0:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 1:return ne.fromBytesLE(Array.from(t));default:throw new ye(me.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=Et.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof ne?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!Et.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new ye(me.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(r){if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`)}return t(this),t(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===We.Long?this.value=this.value+e.getValue().toInt():this.value=ne.fromNumber(this.value+kl(e.getValue())).toInt(),this}}class Bs extends rn{constructor(e,t,r){super(e,r),l(this,"value"),this.value=t}static create(e,t,r){return new Bs(e,t,r)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||R.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Et||R.fatal("fail to execute, only Counter can execute increase");const r=t,s=this.value.deepcopy();return r.increase(s),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:s.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),r=e.getType()===We.Long?e.getValue().multiply(-1):e.getValue()*-1;return Bs.create(this.getParentCreatedAt(),De.of(r,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class mr extends rn{constructor(e,t,r,s,o,c,f){super(e,f),l(this,"fromPos"),l(this,"toPos"),l(this,"maxCreatedAtMapByActor"),l(this,"attributes"),l(this,"attributesToRemove"),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=s,this.attributes=o,this.attributesToRemove=c}static create(e,t,r,s,o,c){return new mr(e,t,r,s,o,new Array,c)}static createTreeRemoveStyleOperation(e,t,r,s,o,c){return new mr(e,t,r,s,new Map,o,c)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||R.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Wt||R.fatal("fail to execute, only Tree can execute edit");const r=t;let s,o;if(this.attributes.size){const c={};[...this.attributes].forEach(([f,h])=>c[f]=h),[,o,s]=r.style([this.fromPos,this.toPos],c,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const c=this.attributesToRemove;[,o,s]=r.removeStyle([this.fromPos,this.toPos],c,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const c of o)e.registerGCPair(c);return{opInfos:s.map(({from:c,to:f,value:h,fromPath:g,toPath:v})=>({type:"tree-style",from:c,to:f,value:this.attributes.size?{attributes:h}:{attributesToRemove:h},fromPath:g,toPath:v,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${r},${Object.entries(this.attributes||{}).map(([s,o])=>`${s}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function Rg(n){const e=new sl,t=e.data;for(const[r,s]of Object.entries(n))t[r]=JSON.stringify(s);return e}function Bg(n){if(n.type===Or.Put)return new ha({type:mi.PUT,presence:Rg(n.presence)});if(n.type===Or.Clear)return new ha({type:mi.CLEAR});throw new ye(me.Unimplemented,"unimplemented type")}function Lg(n){return new il({serverSeq:n.getServerSeqAsString(),clientSeq:n.getClientSeq()})}function Ol(n){return new oo({clientSeq:n.getClientSeq(),lamport:n.getLamportAsString(),actorId:Aa(n.getActorID())})}function z(n){if(!!n)return new al({lamport:n.getLamportAsString(),delimiter:n.getDelimiter(),actorId:Aa(n.getActorID())})}function xl(n){switch(n){case We.Null:return ce.NULL;case We.Boolean:return ce.BOOLEAN;case We.Integer:return ce.INTEGER;case We.Long:return ce.LONG;case We.Double:return ce.DOUBLE;case We.String:return ce.STRING;case We.Bytes:return ce.BYTES;case We.Date:return ce.DATE;default:throw new ye(me.Unsupported,`unsupported type: ${n}`)}}function Pl(n){switch(n){case Qn.IntegerCnt:return ce.INTEGER_CNT;case Qn.LongCnt:return ce.LONG_CNT;default:throw new ye(me.Unsupported,`unsupported type: ${n}`)}}function Sa(n){if(n instanceof gt)return new Xr({type:ce.JSON_OBJECT,createdAt:z(n.getCreatedAt()),value:Yl(n)});if(n instanceof St)return new Xr({type:ce.JSON_ARRAY,createdAt:z(n.getCreatedAt()),value:fp(n)});if(n instanceof Yt)return new Xr({type:ce.TEXT,createdAt:z(n.getCreatedAt())});if(n instanceof De)return new Xr({type:xl(n.getType()),createdAt:z(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Et)return new Xr({type:Pl(n.getType()),createdAt:z(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Wt)return new Xr({type:ce.TREE,createdAt:z(n.getCreatedAt()),value:dp(n)});throw new ye(me.Unimplemented,"unimplemented element")}function Jg(n){return new Qu({createdAt:z(n.getCreatedAt()),offset:n.getOffset()})}function ho(n){return new ol({createdAt:z(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function mo(n){return new rl({parentId:_i(n.getParentID()),leftSiblingId:_i(n.getLeftSiblingID())})}function _i(n){return new nl({createdAt:z(n.getCreatedAt()),offset:n.getOffset()})}function Cl(n){const e=new la;if(n instanceof es){const t=n,r=new Bu;r.parentCreatedAt=z(t.getParentCreatedAt()),r.key=t.getKey(),r.value=Sa(t.getValue()),r.executedAt=z(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof bi){const t=n,r=new Lu;r.parentCreatedAt=z(t.getParentCreatedAt()),r.prevCreatedAt=z(t.getPrevCreatedAt()),r.value=Sa(t.getValue()),r.executedAt=z(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof Cr){const t=n,r=new Ju;r.parentCreatedAt=z(t.getParentCreatedAt()),r.prevCreatedAt=z(t.getPrevCreatedAt()),r.createdAt=z(t.getCreatedAt()),r.executedAt=z(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof Pr){const t=n,r=new Mu;r.parentCreatedAt=z(t.getParentCreatedAt()),r.createdAt=z(t.getCreatedAt()),r.executedAt=z(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof wi){const t=n,r=new Uu;r.parentCreatedAt=z(t.getParentCreatedAt()),r.from=ho(t.getFromPos()),r.to=ho(t.getToPos());const s=r.createdAtMapByActor;for(const[c,f]of t.getMaxCreatedAtMapByActor())s[c]=z(f);r.content=t.getContent();const o=r.attributes;for(const[c,f]of t.getAttributes())o[c]=f;r.executedAt=z(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof Ei){const t=n,r=new $u;r.parentCreatedAt=z(t.getParentCreatedAt()),r.from=ho(t.getFromPos()),r.to=ho(t.getToPos());const s=r.createdAtMapByActor;for(const[c,f]of t.getMaxCreatedAtMapByActor())s[c]=z(f);const o=r.attributes;for(const[c,f]of t.getAttributes())o[c]=f;r.executedAt=z(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof Bs){const t=n,r=new Fu;r.parentCreatedAt=z(t.getParentCreatedAt()),r.value=Sa(t.getValue()),r.executedAt=z(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof Ni){const t=n,r=new ju,s=r.createdAtMapByActor;for(const[o,c]of t.getMaxCreatedAtMapByActor())s[o]=z(c);r.parentCreatedAt=z(t.getParentCreatedAt()),r.from=mo(t.getFromPos()),r.to=mo(t.getToPos()),r.contents=Vg(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=z(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof mr){const t=n,r=new qu;r.parentCreatedAt=z(t.getParentCreatedAt()),r.from=mo(t.getFromPos()),r.to=mo(t.getToPos());const s=r.createdAtMapByActor;for(const[c,f]of t.getMaxCreatedAtMapByActor())s[c]=z(f);const o=t.getAttributesToRemove();if(o.length>0)r.attributesToRemove=o;else{const c=r.attributes;for(const[f,h]of t.getAttributes())c[f]=h}r.executedAt=z(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new ye(me.Unimplemented,"unimplemented operation");return e}function Mg(n){const e=[];for(const t of n)e.push(Cl(t));return e}function Ug(n){const e=new Ru({id:Ol(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=Mg(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=Bg(n.getPresenceChange())),e}function $g(n){const e=[];for(const t of n)e.push(Ug(t));return e}function Fg(n){const e=[];for(const t of n)e.push(new Hu({key:t.getStrKey(),element:wa(t.getValue())}));return e}function jg(n){const e=[];for(const t of n)e.push(new Xu({element:wa(t.getValue())}));return e}function qg(n){const e=[];for(const t of n){const r=new Zu;r.id=Jg(t.getID()),r.value=t.getValue().getContent(),r.removedAt=z(t.getRemovedAt());const s=r.attributes,o=t.getValue().getAttrs();for(const c of o){const f=new fa;f.value=c.getValue(),f.updatedAt=z(c.getUpdatedAt()),s[c.getKey()]=f}e.push(r)}return e}function Vg(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new tl({content:Dl(t)}));return e}function Kg(n){const e={};for(const t of n)e[t.getKey()]=new fa({value:t.getValue(),updatedAt:z(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function Dl(n){if(!n)return[];const e=[];return lo(n,(t,r)=>{const s=new el({id:_i(t.id),type:t.type,removedAt:z(t.removedAt),depth:r});t.isText&&(s.value=t.value),t.insPrevID&&(s.insPrevId=_i(t.insPrevID)),t.insNextID&&(s.insNextId=_i(t.insNextID)),t.attrs&&(s.attributes=Kg(t.attrs)),e.push(s)}),e}function Yg(n){const e=new Hn;return e.body.case="jsonObject",e.body.value=new Vu({nodes:Fg(n.getRHT()),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function Rl(n){const e=new Hn;return e.body.case="jsonArray",e.body.value=new Ku({nodes:jg(n.getElements()),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function Wg(n){const e=new Hn;return e.body.case="primitive",e.body.value=new Yu({type:xl(n.getType()),value:n.toBytes(),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function zg(n){const e=new Hn;return e.body.case="text",e.body.value=new Wu({nodes:qg(n.getRGATreeSplit()),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function Gg(n){const e=new Hn;return e.body.case="counter",e.body.value=new zu({type:Pl(n.getType()),value:n.toBytes(),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function Bl(n){const e=new Hn;return e.body.case="tree",e.body.value=new Gu({nodes:Dl(n.getRoot()),createdAt:z(n.getCreatedAt()),movedAt:z(n.getMovedAt()),removedAt:z(n.getRemovedAt())}),e}function wa(n){if(n instanceof gt)return Yg(n);if(n instanceof St)return Rl(n);if(n instanceof De)return Wg(n);if(n instanceof Yt)return zg(n);if(n instanceof Et)return Gg(n);if(n instanceof Wt)return Bl(n);throw new ye(me.Unimplemented,"unimplemented element")}function Hg(n){return new Du({documentKey:n.getDocumentKey(),checkpoint:Lg(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:$g(n.getChanges()),snapshot:n.getSnapshot(),minSyncedTicket:z(n.getMinSyncedTicket())})}function Ll(n){let e;return n.serverSeq&&(e=ne.fromString(n.serverSeq,!0)),Dr.of(n.clientSeq,ne.fromString(n.lamport,!0),_a(n.actorId),e)}function H(n){if(!!n)return ct.of(ne.fromString(n.lamport,!0),n.delimiter,_a(n.actorId))}function Ea(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function Xg(n){const e=n.type;if(e===mi.PUT){const t=Ea(n.presence);return{type:Or.Put,presence:t}}if(e===mi.CLEAR)return{type:Or.Clear};throw new ye(me.Unsupported,`unsupported type: ${e}`)}function Zg(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,Ea(r))}),e}function Jl(n){switch(n){case ce.NULL:return We.Null;case ce.BOOLEAN:return We.Boolean;case ce.INTEGER:return We.Integer;case ce.LONG:return We.Long;case ce.DOUBLE:return We.Double;case ce.STRING:return We.String;case ce.BYTES:return We.Bytes;case ce.DATE:return We.Date}throw new ye(me.Unimplemented,`unimplemented value type: ${n}`)}function go(n){switch(n){case ce.INTEGER_CNT:return Qn.IntegerCnt;case ce.LONG_CNT:return Qn.LongCnt}throw new ye(me.Unimplemented,`unimplemented value type: ${n}`)}function Ia(n){switch(n.type){case ce.JSON_OBJECT:return n.value?Kl(n.value):gt.create(H(n.createdAt));case ce.JSON_ARRAY:return n.value?lp(n.value):St.create(H(n.createdAt));case ce.TEXT:return Yt.create(Rs.create(),H(n.createdAt));case ce.TREE:return hp(n.value);case ce.NULL:case ce.BOOLEAN:case ce.INTEGER:case ce.LONG:case ce.DOUBLE:case ce.STRING:case ce.BYTES:case ce.DATE:return De.of(De.valueFromBytes(Jl(n.type),n.value),H(n.createdAt));case ce.INTEGER_CNT:case ce.LONG_CNT:return Et.create(go(n.type),Et.valueFromBytes(go(n.type),n.value),H(n.createdAt))}}function po(n){return on.of(Zn.of(H(n.createdAt),n.offset),n.relativeOffset)}function Ml(n){return Zn.of(H(n.createdAt),n.offset)}function Qg(n){const e=Si.create(n.value);Object.entries(n.attributes).forEach(([r,s])=>{e.setAttr(r,s.value,H(s.updatedAt))});const t=Rr.create(Ml(n.id),e);return t.remove(H(n.removedAt)),t}function Ls(n){return sn.of(Ai(n.parentId),Ai(n.leftSiblingId))}function Ai(n){return Qe.of(H(n.createdAt),n.offset)}function ep(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=Ul(t.content);e.push(r)}),e}function Ul(n){if(n.length===0)return;const e=[];for(const r of n)e.push(np(r));const t=e[e.length-1];for(let r=e.length-2;r>=0;r--){let s;for(let o=r+1;o<e.length;o++)if(n[r].depth-1===n[o].depth){s=e[o];break}s.prepend(e[r])}return t.updateDescendantsSize(),Wt.create(t,nn).getRoot()}function tp(n){const e=hr.create();for(const[t,r]of Object.entries(n))e.setInternal(t,r.value,H(r.updatedAt),r.isRemoved);return e}function np(n){const e=Ai(n.id),t=wt.create(e,n.type),r=Object.entries(n.attributes);return t.isText?t.value=n.value:r.length&&(t.attrs=tp(n.attributes)),n.insPrevId&&(t.insPrevID=Ai(n.insPrevId)),n.insNextId&&(t.insNextID=Ai(n.insNextId)),t.removedAt=H(n.removedAt),t}function $l(n){if(n.body.case==="set"){const e=n.body.value;return es.create(e.key,Ia(e.value),H(e.parentCreatedAt),H(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return bi.create(H(e.parentCreatedAt),H(e.prevCreatedAt),Ia(e.value),H(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return Cr.create(H(e.parentCreatedAt),H(e.prevCreatedAt),H(e.createdAt),H(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return Pr.create(H(e.parentCreatedAt),H(e.createdAt),H(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([s,o])=>{t.set(s,H(o))});const r=new Map;return Object.entries(e.attributes).forEach(([s,o])=>{r.set(s,o)}),wi.create(H(e.parentCreatedAt),po(e.from),po(e.to),t,e.content,r,H(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([s,o])=>{t.set(s,H(o))});const r=new Map;return Object.entries(e.attributes).forEach(([s,o])=>{r.set(s,o)}),Ei.create(H(e.parentCreatedAt),po(e.from),po(e.to),t,r,H(e.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const e=n.body.value;return Bs.create(H(e.parentCreatedAt),Ia(e.value),H(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([r,s])=>{t.set(r,H(s))}),Ni.create(H(e.parentCreatedAt),Ls(e.from),Ls(e.to),ep(e.contents),e.splitLevel,t,H(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove,s=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([o,c])=>{s.set(o,H(c))}),(r==null?void 0:r.length)>0?mr.createTreeRemoveStyleOperation(H(e.parentCreatedAt),Ls(e.from),Ls(e.to),s,r,H(e.executedAt)):(Object.entries(e.attributes).forEach(([o,c])=>{t.set(o,c)}),mr.create(H(e.parentCreatedAt),Ls(e.from),Ls(e.to),s,t,H(e.executedAt)))}else throw new ye(me.Unimplemented,"unimplemented operation")}}function rp(n){const e=[];for(const t of n){const r=$l(t);r&&e.push(r)}return e}function Fl(n){const e=[];for(const t of n)e.push(ns.create({id:Ll(t.id),operations:rp(t.operations),presenceChange:t.presenceChange?Xg(t.presenceChange):void 0,message:t.message}));return e}function sp(n){return Ds.of(ne.fromString(n.serverSeq,!0),n.clientSeq)}function ip(n){return fo.create(n.documentKey,sp(n.checkpoint),n.isRemoved,Fl(n.changes),n.snapshot,H(n.minSyncedTicket))}function jl(n){const e=new yi;for(const r of n.nodes){const s=Na(r.element);e.set(r.key,s,s.getPositionedAt())}const t=new gt(H(n.createdAt),e);return t.setMovedAt(H(n.movedAt)),t.setRemovedAt(H(n.removedAt)),t}function ql(n){const e=new Ti;for(const r of n.nodes)e.insert(Na(r.element));const t=new St(H(n.createdAt),e);return t.setMovedAt(H(n.movedAt)),t.setRemovedAt(H(n.removedAt)),t}function op(n){const e=De.of(De.valueFromBytes(Jl(n.type),n.value),H(n.createdAt));return e.setMovedAt(H(n.movedAt)),e.setRemovedAt(H(n.removedAt)),e}function ap(n){const e=new Rs;let t=e.getHead();for(const s of n.nodes){const o=e.insertAfter(t,Qg(s));s.insPrevId&&o.setInsPrev(e.findNode(Ml(s.insPrevId))),t=o}const r=new Yt(e,H(n.createdAt));return r.setMovedAt(H(n.movedAt)),r.setRemovedAt(H(n.removedAt)),r}function cp(n){const e=Et.create(go(n.type),Et.valueFromBytes(go(n.type),n.value),H(n.createdAt));return e.setMovedAt(H(n.movedAt)),e.setRemovedAt(H(n.removedAt)),e}function Vl(n){const e=Ul(n.nodes);return Wt.create(e,H(n.createdAt))}function Na(n){if(n.body.case==="jsonObject")return jl(n.body.value);if(n.body.case==="jsonArray")return ql(n.body.value);if(n.body.case==="primitive")return op(n.body.value);if(n.body.case==="text")return ap(n.body.value);if(n.body.case==="counter")return cp(n.body.value);if(n.body.case==="tree")return Vl(n.body.value);throw new ye(me.Unimplemented,"unimplemented element")}function up(n){if(!n)return{root:gt.create(nn),presences:new Map};const e=Cu.fromBinary(n);return{root:Na(e.root),presences:Zg(e.presences)}}function Kl(n){if(!n)throw new Error("bytes is empty");const e=Hn.fromBinary(n);return jl(e.body.value)}function Yl(n){return wa(n).toBinary()}function lp(n){if(!n)throw new Error("bytes is empty");const e=Hn.fromBinary(n);return ql(e.body.value)}function fp(n){return Rl(n).toBinary()}function hp(n){if(!n)throw new Error("bytes is empty");const e=Hn.fromBinary(n);return Vl(e.body.value)}function dp(n){return Bl(n).toBinary()}function Wl(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function _a(n){return Wl(n)}function zl(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Aa(n){return zl(n)}function mp(n){const e=oo.fromBinary(n);return Ll(e)}function gp(n){const e=la.fromBinary(n);return $l(e)}const je={fromPresence:Ea,toChangePack:Hg,fromChangePack:ip,fromChanges:Fl,objectToBytes:Yl,bytesToObject:Kl,bytesToSnapshot:up,bytesToHex:Wl,hexToBytes:zl,toHexString:_a,toUint8Array:Aa,toOperation:Cl,toChangeID:Ol,PbChangeID:oo,bytesToChangeID:mp,bytesToOperation:gp};function Gl(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class pp{constructor(e,t,r,s){l(this,"reconnectStreamDelay"),l(this,"doc"),l(this,"docID"),l(this,"syncMode"),l(this,"remoteChangeEventReceived"),l(this,"watchStream"),l(this,"watchLoopTimerID"),l(this,"watchAbortController"),this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=s,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Di.RealtimeSyncOff?!1:this.syncMode===Di.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Di.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const ka=()=>{};class yp{constructor(e){l(this,"finalized",!1),l(this,"observers",[]),l(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;e||R.fatal("missing observer"),this.finalized&&R.fatal("observable is finalized due to previous error"),typeof e=="object"?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ka),s.error===void 0&&(s.error=ka),s.complete===void 0&&(s.complete=ka);const o=Gl(),c=this.unsubscribeOne.bind(this,o);if(this.observers.push({subscriptionID:o,observer:s}),this.finalized)try{this.finalError?s.error(this.finalError):s.complete()}catch(f){R.warn(f)}return c}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){R.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function vp(n){const e=new yp(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Js{constructor(e,t,r,s){l(this,"id"),l(this,"delimiter"),l(this,"message"),l(this,"root"),l(this,"operations"),l(this,"presenceChange"),l(this,"previousPresence"),l(this,"reversePresenceKeys"),this.id=e,this.delimiter=pa,this.root=t,this.operations=[],this.previousPresence=tn(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=s}static create(e,t,r,s){return new Js(e,t,r,s)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return ns.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class ki{constructor(e){l(this,"rootObject"),l(this,"elementPairMapByCreatedAt"),l(this,"gcElementSetByCreatedAt"),l(this,"gcPairMap"),this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof Yt||t instanceof Wt)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new ki(gt.create(nn))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const s=t.element.getCreatedAt(),o=t.parent.subPathOf(s);o===void 0&&R.fatal(`cant find the given element: ${s.toIDString()}`),r.unshift(o),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof xr&&e.getDescendants((r,s)=>(this.registerElement(r,s),!1))}deregisterElement(e){let t=0;const r=s=>{const o=s.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(o),this.gcElementSetByCreatedAt.delete(o),t++};return r(e),e instanceof xr&&e.getDescendants(s=>(r(s),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof xr&&r.element.getDescendants(s=>(e.add(s.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new ki(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const s=this.elementPairMapByCreatedAt.get(r);s.element.getRemovedAt()&&e.compare(s.element.getRemovedAt())>=0&&(s.parent.purge(s.element),t+=this.deregisterElement(s.element))}for(const[,r]of this.gcPairMap){const s=r.child.getRemovedAt();s!==void 0&&e.compare(s)>=0&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function Hl(n,e){const t=new Oi(n);return new Proxy(e,t.getHandlers())}class Oi{constructor(e){l(this,"context"),l(this,"handlers"),this.context=e,this.handlers={set:(t,r,s)=>(R.isEnabled(bt.Trivial)&&R.trivial(`obj[${r}]=${JSON.stringify(s)}`),Oi.setInternal(e,t,r,s),!0),get:(t,r)=>(R.isEnabled(bt.Trivial)&&R.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():rs(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(R.isEnabled(bt.Trivial)&&R.trivial(`obj[${r}]`),Oi.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,s){if(r.includes("."))throw new ye(me.InvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),c=yo(e,s,o),f=t.set(r,c,o);e.registerElement(c,t),f&&e.registerRemovedElement(f),e.push(es.create(r,c.deepcopy(),t.getCreatedAt(),o))}static buildObjectMembers(e,t){const r={};for(const[s,o]of Object.entries(t)){if(s.includes("."))throw new ye(me.InvalidObjectKey,"key must not contain the '.'.");const c=e.issueTimeTicket(),f=yo(e,o,c);r[s]=f}return r}static deleteInternal(e,t,r){const s=e.issueTimeTicket(),o=t.deleteByKey(r,s);!o||(e.push(Pr.create(t.getCreatedAt(),o.getCreatedAt(),s)),e.registerRemovedElement(o))}getHandlers(){return this.handlers}}function Tp(n,e){const t=new Je(n,e);return new Proxy(e,t.getHandlers())}function bp(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function Sp(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class Je{constructor(e,t){l(this,"context"),l(this,"handlers"),l(this,"array"),this.context=e,this.array=t,this.handlers={get:(r,s,o)=>s==="getID"?()=>r.getCreatedAt():s==="getElementByID"?c=>{const f=r.getByID(c);if(!(!f||f.isRemoved()))return Br(e,f)}:s==="getElementByIndex"?c=>{const f=r.get(c);return Br(e,f)}:s==="getLast"?()=>Br(e,r.getLast()):s==="deleteByID"?c=>{const f=Je.deleteInternalByID(e,r,c);return Br(e,f)}:s==="insertAfter"?(c,f)=>{const h=Je.insertAfterInternal(e,r,c,f);return Br(e,h)}:s==="insertBefore"?(c,f)=>{const h=Je.insertBeforeInternal(e,r,c,f);return Br(e,h)}:s==="moveBefore"?(c,f)=>{Je.moveBeforeInternal(e,r,c,f)}:s==="moveAfter"?(c,f)=>{Je.moveAfterInternal(e,r,c,f)}:s==="moveFront"?c=>{Je.moveFrontInternal(e,r,c)}:s==="moveLast"?c=>{Je.moveLastInternal(e,r,c)}:bp(s)?rs(e,r.get(Number(s))):s==="push"?c=>Je.pushInternal(e,r,c):s==="splice"?(c,f,...h)=>Je.splice(e,r,c,f,...h):s==="length"?r.length:typeof s=="symbol"&&s===Symbol.iterator?Je.iteratorInternal.bind(this,e,r):s==="includes"?(c,f)=>Je.includes(e,r,c,f):s==="indexOf"?(c,f)=>Je.indexOf(e,r,c,f):s==="lastIndexOf"?(c,f)=>Je.lastIndexOf(e,r,c,f):s==="toJSForTest"?()=>r.toJSForTest():s==="toTestString"?()=>Je.toTestString(r):typeof s=="string"&&Sp(s)?(...c)=>{const f=Array.from(r).map(h=>rs(e,h));return Array.prototype[s].apply(f,c)}:Reflect.get(r,s,o),deleteProperty:(r,s)=>(R.isEnabled(bt.Trivial)&&R.trivial(`array[${s}]`),Je.deleteInternalByIndex(e,r,Number.parseInt(s)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield Br(e,r)}static buildArrayElements(e,t){const r=[];for(const s of t){const o=e.issueTimeTicket(),c=yo(e,s,o);r.push(c)}return r}static pushInternal(e,t,r){return Je.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,s){const o=e.issueTimeTicket(),c=t.getPrevCreatedAt(r);t.moveAfter(c,s,o),e.push(Cr.create(t.getCreatedAt(),c,s,o))}static moveAfterInternal(e,t,r,s){const o=e.issueTimeTicket();t.moveAfter(r,s,o),e.push(Cr.create(t.getCreatedAt(),r,s,o))}static moveFrontInternal(e,t,r){const s=e.issueTimeTicket(),o=t.getHead();t.moveAfter(o.getCreatedAt(),r,s),e.push(Cr.create(t.getCreatedAt(),o.getCreatedAt(),r,s))}static moveLastInternal(e,t,r){const s=e.issueTimeTicket(),o=t.getLastCreatedAt();t.moveAfter(o,r,s),e.push(Cr.create(t.getCreatedAt(),o,r,s))}static insertAfterInternal(e,t,r,s){const o=e.issueTimeTicket(),c=yo(e,s,o);return t.insertAfter(r,c),e.registerElement(c,t),e.push(bi.create(t.getCreatedAt(),r,c.deepcopy(),o)),c}static insertBeforeInternal(e,t,r,s){return Je.insertAfterInternal(e,t,t.getPrevCreatedAt(r),s)}static deleteInternalByIndex(e,t,r){const s=e.issueTimeTicket(),o=t.deleteByIndex(r,s);if(!!o)return e.push(Pr.create(t.getCreatedAt(),o.getCreatedAt(),s)),e.registerRemovedElement(o),o}static deleteInternalByID(e,t,r){const s=e.issueTimeTicket(),o=t.delete(r,s);return e.push(Pr.create(t.getCreatedAt(),o.getCreatedAt(),s)),e.registerRemovedElement(o),o}static splice(e,t,r,s,...o){const c=t.length,f=r>=0?Math.min(r,c):Math.max(c+r,0),h=s===void 0?c:s<0?f:Math.min(f+s,c),g=[];for(let v=f;v<h;v++){const A=Je.deleteInternalByIndex(e,t,f);if(A){const b=A.deepcopy();b.setRemovedAt(),g.push(rs(e,b))}}if(o){let v=f===0?t.getHead().getID():t.get(f-1).getID();for(const A of o)v=Je.insertAfterInternal(e,t,v,A).getID()}return g}static includes(e,t,r,s){var o;const c=t.length,f=s===void 0?0:s<0?Math.max(s+c,0):s;if(f>=c)return!1;if(De.isSupport(r))return Array.from(t).map(g=>rs(e,g)).includes(r,f);for(let h=f;h<c;h++)if(((o=t.get(h))==null?void 0:o.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,s){var o;const c=t.length,f=s===void 0?0:s<0?Math.max(s+c,0):s;if(f>=c)return-1;if(De.isSupport(r))return Array.from(t).map(g=>rs(e,g)).indexOf(r,f);for(let h=f;h<c;h++)if(((o=t.get(h))==null?void 0:o.getID())===r.getID())return h;return-1}static lastIndexOf(e,t,r,s){var o;const c=t.length,f=s===void 0||s>=c?c-1:s<0?s+c:s;if(f<0)return-1;if(De.isSupport(r))return Array.from(t).map(g=>rs(e,g)).lastIndexOf(r,f);for(let h=f;h>0;h--)if(((o=t.get(h))==null?void 0:o.getID())===r.getID())return h;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class xi{constructor(e,t){l(this,"context"),l(this,"text"),this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,s){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}if(e>t){R.fatal("from should be less than or equal to to");return}const o=this.text.indexRangeToPosRange(e,t);R.isEnabled(bt.Debug)&&R.debug(`EDIT: f:${e}->${o[0].toTestString()}, t:${t}->${o[1].toTestString()} c:${r}`);const c=s?Ps(s):void 0,f=this.context.issueTimeTicket(),[h,,g,v]=this.text.edit(o,r,f,c);for(const A of g)this.context.registerGCPair(A);return this.context.push(new wi(this.text.getCreatedAt(),o[0],o[1],h,r,c?new Map(Object.entries(c)):new Map,f)),this.text.findIndexesFromRange(v)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)return R.fatal("it is not initialized yet"),!1;if(e>t)return R.fatal("from should be less than or equal to to"),!1;const s=this.text.indexRangeToPosRange(e,t);R.isEnabled(bt.Debug)&&R.debug(`STYL: f:${e}->${s[0].toTestString()}, t:${t}->${s[1].toTestString()} a:${JSON.stringify(r)}`);const o=Ps(r),c=this.context.issueTimeTicket(),[f,h]=this.text.setStyle(s,o,c);for(const g of h)this.context.registerGCPair(g);return this.context.push(new Ei(this.text.getCreatedAt(),s[0],s[1],f,new Map(Object.entries(o)),c)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([on.fromStruct(e[0]),on.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(R.fatal("it is not initialized yet"),""):this.text.toString()}toJSON(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class Pi{constructor(e,t){l(this,"valueType"),l(this,"value"),l(this,"context"),l(this,"counter"),this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){R.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),r=De.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Bs.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function Oa(n,e,t){const{type:r}=n,s=t.issueTimeTicket();if(r===dr){Xl(n);const{value:o}=n,c=wt.create(Qe.of(s,0),r,o);e.append(c)}else{const{children:o=[]}=n;let{attributes:c}=n,f;if(typeof c=="object"&&!Sl(c)){c=Ps(c),f=new hr;for(const[g,v]of Object.entries(c))f.set(g,v,s)}const h=wt.create(Qe.of(s,0),r,void 0,f);e.append(h);for(const g of o)Oa(g,h,t)}}function wp(n,e){const{type:t}=e,r=n.issueTimeTicket();let s;if(e.type===dr){const{value:o}=e;s=wt.create(Qe.of(r,0),t,o)}else if(e){const{children:o=[]}=e;let{attributes:c}=e,f;if(typeof c=="object"&&!Sl(c)){c=Ps(c),f=new hr;for(const[h,g]of Object.entries(c))f.set(h,g,r)}s=wt.create(Qe.of(n.issueTimeTicket(),0),t,void 0,f);for(const h of o)Oa(h,s,n)}return s}function Xl(n){if(!n.value.length)throw new Error("text node cannot have empty value");return!0}function Zl(n){if(!n.length)return!0;if(n[0].type===dr)for(const t of n){const{type:r}=t;if(r!==dr)throw new Error("element node and text node cannot be passed together");Xl(t)}else for(const t of n){const{type:r}=t;if(r===dr)throw new Error("element node and text node cannot be passed together")}return!0}class Ci{constructor(e){l(this,"initialRoot"),l(this,"context"),l(this,"tree"),this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return wt.create(Qe.of(e.issueTimeTicket(),0),Eg);const t=wt.create(Qe.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Oa(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[r,s]=this.tree.pathToPosRange(e),o=this.context.issueTimeTicket(),c=t?Ps(t):void 0,[f]=this.tree.style([r,s],c,o);this.context.push(mr.create(this.tree.getCreatedAt(),r,s,f,c?new Map(Object.entries(c)):new Map,o))}style(e,t,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t),c=this.context.issueTimeTicket(),f=r?Ps(r):void 0,[h,g]=this.tree.style([s,o],f,c);for(const v of g)this.context.registerGCPair(v);this.context.push(mr.create(this.tree.getCreatedAt(),s,o,h,f?new Map(Object.entries(f)):new Map,c))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const s=this.tree.findPos(e),o=this.tree.findPos(t),c=this.context.issueTimeTicket(),[f,h]=this.tree.removeStyle([s,o],r,c);for(const g of h)this.context.registerGCPair(g);this.context.push(mr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),s,o,f,r,c))}editInternal(e,t,r,s=0){var o;if(r.length!==0&&r[0]&&(Zl(r),r[0].type!==dr))for(const v of r){const{children:A=[]}=v;Zl(A)}const c=this.context.getLastTimeTicket();let f=new Array;if(((o=r[0])==null?void 0:o.type)===dr){let v="";for(const A of r){const{value:b}=A;v+=b}f.push(wt.create(Qe.of(this.context.issueTimeTicket(),0),dr,v))}else f=r.map(v=>v&&wp(this.context,v)).filter(v=>v);const[,h,g]=this.tree.edit([e,t],f.length?f.map(v=>v==null?void 0:v.deepcopy()):void 0,s,c,()=>this.context.issueTimeTicket());for(const v of h)this.context.registerGCPair(v);return this.context.push(Ni.create(this.tree.getCreatedAt(),e,t,f.length?f:void 0,s,g,c)),!0}editByPath(e,t,r,s=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const o=this.tree.pathToPos(e),c=this.tree.pathToPos(t);return this.editInternal(o,c,r?[r]:[],s)}editBulkByPath(e,t,r,s=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const o=this.tree.pathToPos(e),c=this.tree.pathToPos(t);return this.editInternal(o,c,r,s)}edit(e,t,r,s=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),c=this.tree.findPos(t);return this.editInternal(o,c,r?[r]:[],s)}editBulk(e,t,r,s=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),c=this.tree.findPos(t);return this.editInternal(o,c,r,s)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}const t=[sn.fromStruct(e[0]),sn.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}const t=[sn.fromStruct(e[0]),sn.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function Ql(n,e){return Hl(n,e)}function Br(n,e){if(e){if(e instanceof De)return e;if(e instanceof gt)return Hl(n,e);if(e instanceof St)return Tp(n,e);if(e instanceof Yt)return new xi(n,e);if(e instanceof Et){const t=new Pi(Qn.IntegerCnt,0);return t.initialize(n,e),t}else if(e instanceof Wt){const t=new Ci;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function rs(n,e){const t=Br(n,e);return t instanceof De?t.getValue():t}function yo(n,e,t){let r;if(De.isSupport(e))r=De.of(e,t);else if(Array.isArray(e))r=St.create(t,Je.buildArrayElements(n,e));else if(typeof e=="object")e instanceof xi?(r=Yt.create(Rs.create(),t),e.initialize(n,r)):e instanceof Pi?(r=Et.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof Ci?(r=Wt.create(e.buildRoot(n),t),e.initialize(n,r)):r=gt.create(t,Oi.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const ef=50;class Ep{constructor(){l(this,"undoStack",[]),l(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=ef&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=ef&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const tf="yorkie-devtools-panel",nf="yorkie-devtools-sdk";let Ms="disconnected";const rf=new Map,vo=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=vo);function To(n,e){!((e==null?void 0:e.force)||Ms!=="disconnected")||window.postMessage({source:nf,...n},"*")}function Ip(n){if(!n.isEnableDevtools()||typeof window>"u"||rf.has(n.getKey()))return;vo.set(n.getKey(),[]);const e=n.subscribe("all",t=>{t.some(r=>r.type!==ut.StatusChanged&&r.type!==ut.Snapshot&&r.type!==ut.LocalChange&&r.type!==ut.RemoteChange&&r.type!==ut.Initialized&&r.type!==ut.Watched&&r.type!==ut.Unwatched&&r.type!==ut.PresenceChanged)||(vo.get(n.getKey()).push(t),Ms==="synced"&&To({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});rf.set(n.getKey(),[e]),To({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var r;if(((r=t.data)==null?void 0:r.source)!==tf)return;switch(t.data.msg){case"devtools::connect":if(Ms!=="disconnected")break;Ms="connected",To({msg:"doc::available",docKey:n.getKey()}),R.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":Ms="disconnected",R.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":Ms="synced",To({msg:"doc::sync::full",docKey:n.getKey(),events:vo.get(n.getKey())}),R.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var Lr=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(Lr||{}),ut=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n))(ut||{}),bo=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(bo||{}),So=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(So||{});class xa{constructor(e,t){l(this,"key"),l(this,"status"),l(this,"opts"),l(this,"changeID"),l(this,"checkpoint"),l(this,"localChanges"),l(this,"root"),l(this,"clone"),l(this,"eventStream"),l(this,"eventStreamObserver"),l(this,"onlineClients"),l(this,"presences"),l(this,"history"),l(this,"internalHistory"),l(this,"isUpdating"),this.opts=t||{},this.key=e,this.status="detached",this.root=ki.create(),this.changeID=Pg,this.checkpoint=Cg,this.localChanges=[],this.eventStream=vp(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new Ep,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},Ip(this)}update(e,t){if(this.getStatus()==="removed")throw new ye(me.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),s=Js.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},t);try{const o=Ql(s,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(o,new ga(s,this.clone.presences.get(r)))}catch(o){throw this.clone=void 0,R.error(o),o}finally{this.isUpdating=!1}if(s.hasChange()){R.isEnabled(bt.Trivial)&&R.trivial(`trying to update a local change: ${this.toJSON()}`);const o=s.getChange(),{opInfos:c,reverseOps:f}=o.execute(this.root,this.presences,Ae.Local),h=s.getReversePresence();h&&f.push({type:"presence",value:h}),this.localChanges.push(o),f.length>0&&this.internalHistory.pushUndo(f),c.length>0&&this.internalHistory.clearRedo(),this.changeID=o.getID();const g=[];c.length>0&&g.push({type:"local-change",source:Ae.Local,value:{message:o.getMessage()||"",operations:c,actor:r,clientSeq:o.getID().getClientSeq(),serverSeq:o.getID().getServerSeq()},rawChange:this.isEnableDevtools()?o.toStruct():void 0}),o.hasPresenceChange()&&g.push({type:"presence-changed",source:Ae.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(g),R.isEnabled(bt.Trivial)&&R.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,s){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const f=t;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||f(g)},r,s)}if(e==="my-presence"){const f=t;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="initialized"&&g.type!=="presence-changed"||g.type==="presence-changed"&&g.value.clientID!==this.changeID.getActorID()||f(g)},r,s)}if(e==="others"){const f=t;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="watched"&&g.type!=="unwatched"&&g.type!=="presence-changed"||g.value.clientID!==this.changeID.getActorID()&&f(g)},r,s)}if(e==="connection"){const f=t;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="connection-changed"&&f(g)},r,s)}if(e==="sync"){const f=t;return this.eventStream.subscribe(h=>{for(const g of h)g.type==="sync-status-changed"&&f(g)},r,s)}if(e==="all"){const f=t;return this.eventStream.subscribe(f,r,s)}const o=e,c=t;return this.eventStream.subscribe(f=>{for(const h of f){if(h.type!=="local-change"&&h.type!=="remote-change")continue;const g=[];for(const v of h.value.operations)this.isSameElementOrChildOf(v.path,o)&&g.push(v);g.length&&c({...h,value:{...h.value,operations:g}})}},r,s)}if(typeof e=="function"){const o=e,c=t,f=r;return this.eventStream.subscribe(h=>{for(const g of h)g.type!=="snapshot"&&g.type!=="local-change"&&g.type!=="remote-change"||o(g)},c,f)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((o,c)=>o===r[c])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),Ae.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),R.isEnabled(bt.Trivial)&&R.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:tn(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return fo.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Js.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Ql(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t){const{root:r,presences:s}=je.bytesToSnapshot(t);this.root=new ki(r),this.presences=s,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:Ae.Remote,value:{snapshot:this.isEnableDevtools()?je.bytesToHex(t):void 0,serverSeq:e.toString()}}])}applyChanges(e,t){R.isEnabled(bt.Debug)&&R.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),R.isEnabled(bt.Trivial)&&R.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);R.isEnabled(bt.Debug)&&R.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],s=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(s)){const c=e.getPresenceChange();switch(c.type){case Or.Put:r.push(this.presences.has(s)?{type:"presence-changed",source:t,value:{clientID:s,presence:c.presence}}:{type:"watched",source:Ae.Remote,value:{clientID:s,presence:c.presence}});break;case Or.Clear:r.push({type:"unwatched",source:Ae.Remote,value:{clientID:s,presence:this.getPresence(s)}}),this.removeOnlineClient(s);break}}const{opInfos:o}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),o.length>0){const c=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===Ae.Remote?{type:"remote-change",source:t,value:{actor:s,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:o},rawChange:c}:{type:"local-change",source:t,value:{actor:s,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:o},rawChange:c})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const s of t)s!==this.changeID.getActorID()&&r.add(s);this.setOnlineClients(r),this.publish([{type:"initialized",source:Ae.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,s=[];if(t===io.DOCUMENT_WATCHED)this.addOnlineClient(r),this.hasPresence(r)&&s.push({type:"watched",source:Ae.Remote,value:{clientID:r,presence:this.getPresence(r)}});else if(t===io.DOCUMENT_UNWATCHED){const o=this.getPresence(r);this.removeOnlineClient(r),o&&s.push({type:"unwatched",source:Ae.Remote,value:{clientID:r,presence:o}})}s.length>0&&this.publish(s)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(co),this.publish([{source:e==="removed"?Ae.Remote:Ae.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r}=e.value;if(!t)return;this.applySnapshot(ne.fromString(r),je.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=ns.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:s}of e.value)t.add(r),this.presences.set(r,s);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new ye(me.InvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const s of t)if(r=r[s],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?tn(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?tn(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?tn(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:tn(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:tn(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=Js.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of e){if(!(g instanceof rn)){new ga(t,tn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const v=t.issueTimeTicket();g.setExecutedAt(v),t.push(g)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Ae.UndoRedo);const{opInfos:s,reverseOps:o}=r.execute(this.root,this.presences,Ae.UndoRedo),c=t.getReversePresence();if(c&&o.push({type:"presence",value:c}),o.length>0&&this.internalHistory.pushRedo(o),!r.hasPresenceChange()&&s.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const f=this.changeID.getActorID(),h=[];s.length>0&&h.push({type:"local-change",source:Ae.UndoRedo,value:{message:r.getMessage()||"",operations:s,actor:f,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&h.push({type:"presence-changed",source:Ae.UndoRedo,value:{clientID:f,presence:this.getPresence(f)}}),this.publish(h)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=Js.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const g of e){if(!(g instanceof rn)){new ga(t,tn(this.clone.presences.get(this.changeID.getActorID()))).set(g.value,{addToHistory:!0});continue}const v=t.issueTimeTicket();g.setExecutedAt(v),t.push(g)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Ae.UndoRedo);const{opInfos:s,reverseOps:o}=r.execute(this.root,this.presences,Ae.UndoRedo),c=t.getReversePresence();if(c&&o.push({type:"presence",value:c}),o.length>0&&this.internalHistory.pushUndo(o),!r.hasPresenceChange()&&s.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const f=this.changeID.getActorID(),h=[];s.length>0&&h.push({type:"local-change",source:Ae.UndoRedo,value:{message:r.getMessage()||"",operations:s,actor:f,clientSeq:r.getID().getClientSeq(),serverSeq:r.getID().getServerSeq()},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&h.push({type:"presence-changed",source:Ae.UndoRedo,value:{clientID:f,presence:this.getPresence(f)}}),this.publish(h)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function Np(n,e){return t=>async r=>(n&&r.header.set("x-api-key",n),e&&r.header.set("authorization",e),await t(r))}const sf={name:"yorkie-js-sdk",version:"0.4.23",description:"Yorkie JS SDK",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts",files:["dist"],scripts:{build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:examples":"npm run build --workspace examples","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"npm run build"},engines:{node:">=18.0.0",npm:">=7.1.0"},repository:{type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},author:{name:"hackerwins",email:"susukang98@gmail.com"},license:"Apache-2.0",bugs:{url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},homepage:"https://github.com/yorkie-team/yorkie-js-sdk#readme",devDependencies:{"@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.2.0","@types/google-protobuf":"^3.15.5","@types/jsdom":"^21.1.3","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",jsdom:"^22.1.0",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^4.7.4","typescript-transform-paths":"^3.3.1",vite:"^4.4.9","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5","vitest-environment-custom-jsdom":"file:test/vitest/env"},dependencies:{"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.2.0","@connectrpc/connect-web":"^1.2.0",long:"^5.2.0"},husky:{hooks:{"pre-commit":"npm run lint"}},workspaces:["examples/*"]};function _p(){return n=>async e=>(e.header.set("x-yorkie-user-agent",sf.name+"/"+sf.version),await n(e))}var Di=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Di||{}),of=(n=>(n.Deactivated="deactivated",n.Activated="activated",n))(of||{});const wo={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class Pa{constructor(e,t){l(this,"id"),l(this,"key"),l(this,"status"),l(this,"attachmentMap"),l(this,"apiKey"),l(this,"syncLoopDuration"),l(this,"reconnectStreamDelay"),l(this,"retrySyncLoopDelay"),l(this,"rpcClient"),t=t||wo,this.key=t.key?t.key:Gl(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.syncLoopDuration=t.syncLoopDuration||wo.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||wo.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||wo.retrySyncLoopDelay,this.rpcClient=Cd(pg,tm({baseUrl:e,interceptors:[Np(t.apiKey,t.token),_p()]}))}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),R.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw R.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){if(this.status==="deactivated")return Promise.resolve();for(const[e]of this.attachmentMap)this.detachInternal(e);return this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.status="deactivated",R.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw R.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,t={}){var s;if(!this.isActive())throw new ye(me.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==Lr.Detached)throw new ye(me.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((o,c)=>c.set(t.initialPresence||{}));const r=(s=t.syncMode)!=null?s:"realtime";return this.rpcClient.attachDocument({clientId:this.id,changePack:je.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async o=>{const c=je.fromChangePack(o.changePack);return e.applyChangePack(c),e.getStatus()===Lr.Removed||(e.applyStatus(Lr.Attached),this.attachmentMap.set(e.getKey(),new pp(this.reconnectStreamDelay,e,o.documentId,r)),r!=="manual"&&await this.runWatchLoop(e.getKey()),R.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(o=>{throw R.error(`[AD] c:"${this.getKey()}" err :`,o),o})}detach(e,t={}){var s;if(!this.isActive())throw new ye(me.ClientNotActive,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new ye(me.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((o,c)=>c.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:je.toChangePack(e.createChangePack()),removeIfNotAttached:(s=t.removeIfNotAttached)!=null?s:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(o=>{const c=je.fromChangePack(o.changePack);return e.applyChangePack(c),e.getStatus()!==Lr.Removed&&e.applyStatus(Lr.Detached),this.detachInternal(e.getKey()),R.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(o=>{throw R.error(`[DD] c:"${this.getKey()}" err :`,o),o})}async changeSyncMode(e,t){if(!this.isActive())throw new ye(me.ClientNotActive,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new ye(me.DocumentNotAttached,`${e.getKey()} is not attached`);const s=r.syncMode;return s===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),s==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new ye(me.ClientNotActive,`${this.key} is not active`);const t=[];if(e){const r=this.attachmentMap.get(e.getKey());if(!r)throw new ye(me.DocumentNotAttached,`${e.getKey()} is not attached`);t.push(this.syncInternal(r,"realtime"))}else this.attachmentMap.forEach(r=>{t.push(this.syncInternal(r,r.syncMode))});return Promise.all(t)}remove(e){if(!this.isActive())throw new ye(me.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new ye(me.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=je.toChangePack(e.createChangePack());return r.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(s=>{const o=je.fromChangePack(s.changePack);e.applyChangePack(o),this.detachInternal(e.getKey()),R.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(s=>{throw R.error(`[RD] c:"${this.getKey()}" err :`,s),s})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){R.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(r=>{R.error(`[SL] c:"${this.getKey()}" sync failed:`,r),setTimeout(e,this.retrySyncLoopDelay)})};R.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new ye(me.DocumentNotAttached,`${e} is not attached`);return t.runWatchLoop(r=>{if(!this.isActive())return Promise.reject(new ye(me.ClientNotActive,`${this.key} is not active`));const s=new AbortController,o=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:s.signal});return t.doc.publish([{type:ut.ConnectionChanged,value:bo.Connected}]),R.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((c,f)=>{(async()=>{try{for await(const g of o)this.handleWatchDocumentsResponse(t,g),g.body.case==="initialization"&&c([o,s])}catch(g){t.doc.resetOnlineClients(),t.doc.publish([{type:ut.Initialized,source:Ae.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:ut.ConnectionChanged,value:bo.Disconnected}]),R.debug(`[WD] c:"${this.getKey()}" unwatches`),g instanceof Ye&&g.code!=p.Canceled&&r(),f(g)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===io.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),R.debug(`[WD] c:"${this.getKey()}" unwatches`),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:r,docID:s}=e,o=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:s,changePack:je.toChangePack(o),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(c=>{const f=je.fromChangePack(c.changePack);if(f.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return r;r.applyChangePack(f),e.doc.publish([{type:ut.SyncStatusChanged,value:So.Synced}]),r.getStatus()===Lr.Removed&&this.detachInternal(r.getKey());const h=r.getKey(),g=f.getChangeSize();return R.info(`[PP] c:"${this.getKey()}" sync d:"${h}", push:${o.getChangeSize()} pull:${g} cp:${f.getCheckpoint().toTestString()}`),r}).catch(c=>{throw r.publish([{type:ut.SyncStatusChanged,value:So.SyncFailed}]),R.error(`[PP] c:"${this.getKey()}" err :`,c),c})}}const Ap=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),kp={Client:Pa,Document:xa,Primitive:De,Text:xi,Counter:Pi,Tree:Ci,IntType:Qn.IntegerCnt,LongType:Qn.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:Pa,Document:xa,Primitive:De,Text:xi,Counter:Pi,Tree:Ci,IntType:Qn.IntegerCnt,LongType:Qn.LongCnt}),u.Change=ns,u.Client=Pa,u.ClientStatus=of,u.Counter=Pi,u.Devtools=Ap,u.DocEventType=ut,u.Document=xa,u.DocumentStatus=Lr,u.DocumentSyncStatus=So,u.EventSourceDevPanel=tf,u.EventSourceSDK=nf,u.OpSource=Ae,u.Primitive=De,u.StreamConnectionStatus=bo,u.SyncMode=Di,u.Text=xi,u.TimeTicket=ct,u.Tree=Ci,u.converter=je,u.default=kp,u.setLogLevel=Sg,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(Qa,Qa.exports);const Ch=sT(Qa.exports),iT=(i,a)=>{const u=i.__vccOpts||i;for(const[d,m]of a)u[d]=m;return u},oT=[{title:"Todo",cards:[{title:"Pruning document"},{title:"Clean up codes"}]},{title:"Doing",cards:[{title:"Array operations"}]},{title:"Done",cards:[{title:"Create a sample page"},{title:"Launch demo site"}]}],Mr=new Ch.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"}),yr=new Ch.Document(`vuejs-kanban-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`,{enableDevtools:!0}),aT={data(){return{lists:[],title:"",opened:null}},created(){this.fetchDoc()},beforeUnmount(){this.disconnect()},watch:{opened(i){this.$nextTick(function(){i===0?this.$refs.addListForm.querySelector("input").focus():i&&this.$refs.addCardForm[i-1].querySelector("input").focus(),this.title=""})}},methods:{async fetchDoc(){await Mr.activate(),await Mr.attach(yr),yr.update(i=>{i.lists||(i.lists=oT)},"create default list if not exists"),yr.subscribe(i=>{this.lists=yr.getRoot().lists}),await Mr.sync(),this.lists=yr.getRoot().lists},async disconnect(){await Mr.deactivate()},isOpened(i){return this.opened===i},openForm(i){this.opened=i},closeForm(){this.opened=null},addCard(i){this.title!==""&&yr.update(a=>{a.lists.getElementByID(i.getID()).cards.push({title:this.title}),this.title=""},`add new card by ${Mr.getID()}`)},deleteCard(i,a){yr.update(u=>{u.lists.getElementByID(i.getID()).cards.deleteByID(a.getID())},`delete a card by ${Mr.getID()}`)},addList(){this.title!==""&&yr.update(i=>{i.lists.push({title:this.title,cards:[]}),this.title=""},`add new list by ${Mr.getID()}`)},deleteList(i){yr.update(a=>{a.lists.deleteByID(i.getID())},`delete a list by ${Mr.getID()}`)}}},cT={class:"list"},uT=["onClick"],lT={class:"title"},fT={class:"card"},hT=["onClick"],dT={key:0,class:"add-form"},mT=["onKeyup"],gT={class:"buttons"},pT=["onClick"],yT=["onClick"],vT={class:"add-list",ref:"addListForm"},TT={key:0,class:"add-form"},bT={class:"buttons"};function ST(i,a,u,d,m,l){return gr(),pr(zt,null,[(gr(!0),pr(zt,null,Tf(m.lists,(p,y)=>(gr(),pr("div",cT,[ft("span",{class:"delete",onClick:I=>l.deleteList(p)},"\u274C",8,uT),ft("div",lT,cf(p.title),1),(gr(!0),pr(zt,null,Tf(p.cards,I=>(gr(),pr("div",fT,[ft("span",{class:"delete",onClick:O=>l.deleteCard(p,I)},"\u274C",8,hT),Oh(" "+cf(I.title),1)]))),256)),ft("div",{class:"add-card",ref_for:!0,ref:"addCardForm"},[l.isOpened(y+1)?(gr(),pr("div",dT,[vf(ft("input",{type:"text",placeholder:"Enter card title","onUpdate:modelValue":a[0]||(a[0]=I=>m.title=I),onKeyup:[Oo(I=>l.addCard(p),["enter"]),a[1]||(a[1]=Oo(I=>l.closeForm(),["esc"]))]},null,40,mT),[[$f,m.title]]),ft("div",gT,[ft("input",{type:"button",value:"Add",onClick:I=>l.addCard(p)},null,8,pT),ft("input",{type:"button",value:"Close",class:"pull-right",onClick:a[2]||(a[2]=I=>l.closeForm())})])])):(gr(),pr("div",{key:1,class:"add-card-opener",onClick:I=>l.openForm(y+1)}," Add another card ",8,yT))],512)]))),256)),ft("div",vT,[l.isOpened(0)?(gr(),pr("div",TT,[vf(ft("input",{type:"text",placeholder:"Enter list title","onUpdate:modelValue":a[3]||(a[3]=p=>m.title=p),onKeyup:[a[4]||(a[4]=Oo(p=>l.addList(),["enter"])),a[5]||(a[5]=Oo(p=>l.closeForm(),["esc"]))]},null,544),[[$f,m.title]]),ft("div",bT,[ft("input",{type:"button",value:"Add",onClick:a[6]||(a[6]=p=>l.addList())}),ft("input",{type:"button",value:"Close",class:"pull-right",onClick:a[7]||(a[7]=p=>l.closeForm())})])])):(gr(),pr("div",{key:1,class:"add-list-opener",onClick:a[8]||(a[8]=p=>l.openForm(0))}," Add another list "))],512)],64)}const wT=iT(aT,[["render",ST]]);tT(wT).mount("#app");
