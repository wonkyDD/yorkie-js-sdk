(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fd={exports:{}},ma={},zd={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fs=Symbol.for("react.element"),Qv=Symbol.for("react.portal"),Xv=Symbol.for("react.fragment"),Zv=Symbol.for("react.strict_mode"),e0=Symbol.for("react.profiler"),t0=Symbol.for("react.provider"),n0=Symbol.for("react.context"),r0=Symbol.for("react.forward_ref"),i0=Symbol.for("react.suspense"),s0=Symbol.for("react.memo"),o0=Symbol.for("react.lazy"),Oh=Symbol.iterator;function a0(t){return t===null||typeof t!="object"?null:(t=Oh&&t[Oh]||t["@@iterator"],typeof t=="function"?t:null)}var jd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vd=Object.assign,Jd={};function Ii(t,n,s){this.props=t,this.context=n,this.refs=Jd,this.updater=s||jd}Ii.prototype.isReactComponent={};Ii.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};Ii.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kd(){}Kd.prototype=Ii.prototype;function Du(t,n,s){this.props=t,this.context=n,this.refs=Jd,this.updater=s||jd}var Ru=Du.prototype=new Kd;Ru.constructor=Du;Vd(Ru,Ii.prototype);Ru.isPureReactComponent=!0;var Dh=Array.isArray,Wd=Object.prototype.hasOwnProperty,_u={current:null},qd={key:!0,ref:!0,__self:!0,__source:!0};function Hd(t,n,s){var l,c={},u=null,d=null;if(n!=null)for(l in n.ref!==void 0&&(d=n.ref),n.key!==void 0&&(u=""+n.key),n)Wd.call(n,l)&&!qd.hasOwnProperty(l)&&(c[l]=n[l]);var m=arguments.length-2;if(m===1)c.children=s;else if(1<m){for(var y=Array(m),T=0;T<m;T++)y[T]=arguments[T+2];c.children=y}if(t&&t.defaultProps)for(l in m=t.defaultProps,m)c[l]===void 0&&(c[l]=m[l]);return{$$typeof:Fs,type:t,key:u,ref:d,props:c,_owner:_u.current}}function l0(t,n){return{$$typeof:Fs,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function Lu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fs}function u0(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return n[s]})}var Rh=/\/+/g;function ul(t,n){return typeof t=="object"&&t!==null&&t.key!=null?u0(""+t.key):n.toString(36)}function Lo(t,n,s,l,c){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(u){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case Fs:case Qv:d=!0}}if(d)return d=t,c=c(d),t=l===""?"."+ul(d,0):l,Dh(c)?(s="",t!=null&&(s=t.replace(Rh,"$&/")+"/"),Lo(c,n,s,"",function(T){return T})):c!=null&&(Lu(c)&&(c=l0(c,s+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(Rh,"$&/")+"/")+t)),n.push(c)),1;if(d=0,l=l===""?".":l+":",Dh(t))for(var m=0;m<t.length;m++){u=t[m];var y=l+ul(u,m);d+=Lo(u,n,s,y,c)}else if(y=a0(t),typeof y=="function")for(t=y.call(t),m=0;!(u=t.next()).done;)u=u.value,y=l+ul(u,m++),d+=Lo(u,n,s,y,c);else if(u==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return d}function yo(t,n,s){if(t==null)return t;var l=[],c=0;return Lo(t,l,"","",function(u){return n.call(s,u,c++)}),l}function c0(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var it={current:null},bo={transition:null},f0={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:bo,ReactCurrentOwner:_u};ie.Children={map:yo,forEach:function(t,n,s){yo(t,function(){n.apply(this,arguments)},s)},count:function(t){var n=0;return yo(t,function(){n++}),n},toArray:function(t){return yo(t,function(n){return n})||[]},only:function(t){if(!Lu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Ii;ie.Fragment=Xv;ie.Profiler=e0;ie.PureComponent=Du;ie.StrictMode=Zv;ie.Suspense=i0;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f0;ie.cloneElement=function(t,n,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var l=Vd({},t.props),c=t.key,u=t.ref,d=t._owner;if(n!=null){if(n.ref!==void 0&&(u=n.ref,d=_u.current),n.key!==void 0&&(c=""+n.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(y in n)Wd.call(n,y)&&!qd.hasOwnProperty(y)&&(l[y]=n[y]===void 0&&m!==void 0?m[y]:n[y])}var y=arguments.length-2;if(y===1)l.children=s;else if(1<y){m=Array(y);for(var T=0;T<y;T++)m[T]=arguments[T+2];l.children=m}return{$$typeof:Fs,type:t.type,key:c,ref:u,props:l,_owner:d}};ie.createContext=function(t){return t={$$typeof:n0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:t0,_context:t},t.Consumer=t};ie.createElement=Hd;ie.createFactory=function(t){var n=Hd.bind(null,t);return n.type=t,n};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:r0,render:t}};ie.isValidElement=Lu;ie.lazy=function(t){return{$$typeof:o0,_payload:{_status:-1,_result:t},_init:c0}};ie.memo=function(t,n){return{$$typeof:s0,type:t,compare:n===void 0?null:n}};ie.startTransition=function(t){var n=bo.transition;bo.transition={};try{t()}finally{bo.transition=n}};ie.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ie.useCallback=function(t,n){return it.current.useCallback(t,n)};ie.useContext=function(t){return it.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return it.current.useDeferredValue(t)};ie.useEffect=function(t,n){return it.current.useEffect(t,n)};ie.useId=function(){return it.current.useId()};ie.useImperativeHandle=function(t,n,s){return it.current.useImperativeHandle(t,n,s)};ie.useInsertionEffect=function(t,n){return it.current.useInsertionEffect(t,n)};ie.useLayoutEffect=function(t,n){return it.current.useLayoutEffect(t,n)};ie.useMemo=function(t,n){return it.current.useMemo(t,n)};ie.useReducer=function(t,n,s){return it.current.useReducer(t,n,s)};ie.useRef=function(t){return it.current.useRef(t)};ie.useState=function(t){return it.current.useState(t)};ie.useSyncExternalStore=function(t,n,s){return it.current.useSyncExternalStore(t,n,s)};ie.useTransition=function(){return it.current.useTransition()};ie.version="18.2.0";zd.exports=ie;var ut=zd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0=ut,d0=Symbol.for("react.element"),g0=Symbol.for("react.fragment"),p0=Object.prototype.hasOwnProperty,m0=h0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y0={key:!0,ref:!0,__self:!0,__source:!0};function Gd(t,n,s){var l,c={},u=null,d=null;s!==void 0&&(u=""+s),n.key!==void 0&&(u=""+n.key),n.ref!==void 0&&(d=n.ref);for(l in n)p0.call(n,l)&&!y0.hasOwnProperty(l)&&(c[l]=n[l]);if(t&&t.defaultProps)for(l in n=t.defaultProps,n)c[l]===void 0&&(c[l]=n[l]);return{$$typeof:d0,type:t,key:u,ref:d,props:c,_owner:m0.current}}ma.Fragment=g0;ma.jsx=Gd;ma.jsxs=Gd;Fd.exports=ma;var Pe=Fd.exports,Bl={},Yd={exports:{}},Et={},Qd={exports:{}},Xd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(F,X){var Z=F.length;F.push(X);e:for(;0<Z;){var we=Z-1>>>1,Re=F[we];if(0<c(Re,X))F[we]=X,F[Z]=Re,Z=we;else break e}}function s(F){return F.length===0?null:F[0]}function l(F){if(F.length===0)return null;var X=F[0],Z=F.pop();if(Z!==X){F[0]=Z;e:for(var we=0,Re=F.length,$r=Re>>>1;we<$r;){var he=2*(we+1)-1,N=F[he],Ke=he+1,pt=F[Ke];if(0>c(N,Z))Ke<Re&&0>c(pt,N)?(F[we]=pt,F[Ke]=Z,we=Ke):(F[we]=N,F[he]=Z,we=he);else if(Ke<Re&&0>c(pt,Z))F[we]=pt,F[Ke]=Z,we=Ke;else break e}}return X}function c(F,X){var Z=F.sortIndex-X.sortIndex;return Z!==0?Z:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var y=[],T=[],C=1,O=null,x=3,M=!1,B=!1,U=!1,ce=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(F){for(var X=s(T);X!==null;){if(X.callback===null)l(T);else if(X.startTime<=F)l(T),X.sortIndex=X.expirationTime,n(y,X);else break;X=s(T)}}function _(F){if(U=!1,A(F),!B)if(s(y)!==null)B=!0,Br(z);else{var X=s(T);X!==null&&Pi(_,X.startTime-F)}}function z(F,X){B=!1,U&&(U=!1,k(H),H=-1),M=!0;var Z=x;try{for(A(X),O=s(y);O!==null&&(!(O.expirationTime>X)||F&&!gt());){var we=O.callback;if(typeof we=="function"){O.callback=null,x=O.priorityLevel;var Re=we(O.expirationTime<=X);X=t.unstable_now(),typeof Re=="function"?O.callback=Re:O===s(y)&&l(y),A(X)}else l(y);O=s(y)}if(O!==null)var $r=!0;else{var he=s(T);he!==null&&Pi(_,he.startTime-X),$r=!1}return $r}finally{O=null,x=Z,M=!1}}var V=!1,J=null,H=-1,te=5,ne=-1;function gt(){return!(t.unstable_now()-ne<te)}function yn(){if(J!==null){var F=t.unstable_now();ne=F;var X=!0;try{X=J(!0,F)}finally{X?Qt():(V=!1,J=null)}}else V=!1}var Qt;if(typeof w=="function")Qt=function(){w(yn)};else if(typeof MessageChannel<"u"){var xi=new MessageChannel,Ra=xi.port2;xi.port1.onmessage=yn,Qt=function(){Ra.postMessage(null)}}else Qt=function(){ce(yn,0)};function Br(F){J=F,V||(V=!0,Qt())}function Pi(F,X){H=ce(function(){F(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){B||M||(B=!0,Br(z))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return s(y)},t.unstable_next=function(F){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var Z=x;x=X;try{return F()}finally{x=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=x;x=F;try{return X()}finally{x=Z}},t.unstable_scheduleCallback=function(F,X,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,F){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=Z+Re,F={id:C++,callback:X,priorityLevel:F,startTime:Z,expirationTime:Re,sortIndex:-1},Z>we?(F.sortIndex=Z,n(T,F),s(y)===null&&F===s(T)&&(U?(k(H),H=-1):U=!0,Pi(_,Z-we))):(F.sortIndex=Re,n(y,F),B||M||(B=!0,Br(z))),F},t.unstable_shouldYield=gt,t.unstable_wrapCallback=function(F){var X=x;return function(){var Z=x;x=X;try{return F.apply(this,arguments)}finally{x=Z}}}})(Xd);Qd.exports=Xd;var v0=Qd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=ut,At=v0;function L(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eg=new Set,As={};function br(t,n){vi(t,n),vi(t+"Capture",n)}function vi(t,n){for(As[t]=n,t=0;t<n.length;t++)eg.add(n[t])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$l=Object.prototype.hasOwnProperty,w0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_h={},Lh={};function S0(t){return $l.call(Lh,t)?!0:$l.call(_h,t)?!1:w0.test(t)?Lh[t]=!0:(_h[t]=!0,!1)}function T0(t,n,s,l){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function k0(t,n,s,l){if(n===null||typeof n>"u"||T0(t,n,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function st(t,n,s,l,c,u,d){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=t,this.type=n,this.sanitizeURL=u,this.removeEmptyString=d}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new st(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Je[n]=new st(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new st(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new st(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new st(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new st(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new st(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new st(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new st(t,5,!1,t.toLowerCase(),null,!1,!1)});var bu=/[\-:]([a-z])/g;function Mu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(bu,Mu);Je[n]=new st(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(bu,Mu);Je[n]=new st(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(bu,Mu);Je[n]=new st(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new st(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new st(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bu(t,n,s,l){var c=Je.hasOwnProperty(n)?Je[n]:null;(c!==null?c.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(k0(n,s,c,l)&&(s=null),l||c===null?S0(n)&&(s===null?t.removeAttribute(n):t.setAttribute(n,""+s)):c.mustUseProperty?t[c.propertyName]=s===null?c.type===3?!1:"":s:(n=c.attributeName,l=c.attributeNamespace,s===null?t.removeAttribute(n):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,l?t.setAttributeNS(l,n,s):t.setAttribute(n,s))))}var Bn=Zd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vo=Symbol.for("react.element"),ei=Symbol.for("react.portal"),ti=Symbol.for("react.fragment"),$u=Symbol.for("react.strict_mode"),Ul=Symbol.for("react.profiler"),tg=Symbol.for("react.provider"),ng=Symbol.for("react.context"),Uu=Symbol.for("react.forward_ref"),Fl=Symbol.for("react.suspense"),zl=Symbol.for("react.suspense_list"),Fu=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),rg=Symbol.for("react.offscreen"),bh=Symbol.iterator;function ns(t){return t===null||typeof t!="object"?null:(t=bh&&t[bh]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,cl;function cs(t){if(cl===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);cl=n&&n[1]||""}return`
`+cl+t}var fl=!1;function hl(t,n){if(!t||fl)return"";fl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(T){var l=T}Reflect.construct(t,[],n)}else{try{n.call()}catch(T){l=T}t.call(n.prototype)}else{try{throw Error()}catch(T){l=T}t()}}catch(T){if(T&&l&&typeof T.stack=="string"){for(var c=T.stack.split(`
`),u=l.stack.split(`
`),d=c.length-1,m=u.length-1;1<=d&&0<=m&&c[d]!==u[m];)m--;for(;1<=d&&0<=m;d--,m--)if(c[d]!==u[m]){if(d!==1||m!==1)do if(d--,m--,0>m||c[d]!==u[m]){var y=`
`+c[d].replace(" at new "," at ");return t.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",t.displayName)),y}while(1<=d&&0<=m);break}}}finally{fl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?cs(t):""}function A0(t){switch(t.tag){case 5:return cs(t.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return t=hl(t.type,!1),t;case 11:return t=hl(t.type.render,!1),t;case 1:return t=hl(t.type,!0),t;default:return""}}function jl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ti:return"Fragment";case ei:return"Portal";case Ul:return"Profiler";case $u:return"StrictMode";case Fl:return"Suspense";case zl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ng:return(t.displayName||"Context")+".Consumer";case tg:return(t._context.displayName||"Context")+".Provider";case Uu:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fu:return n=t.displayName||null,n!==null?n:jl(t.type)||"Memo";case Wn:n=t._payload,t=t._init;try{return jl(t(n))}catch{}}return null}function E0(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jl(n);case 8:return n===$u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ig(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function I0(t){var n=ig(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,u=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(d){l=""+d,u.call(this,d)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(d){l=""+d},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function wo(t){t._valueTracker||(t._valueTracker=I0(t))}function sg(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return t&&(l=ig(t)?t.checked?"true":"false":t.value),t=l,t!==s?(n.setValue(t),!0):!1}function Wo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vl(t,n){var s=n.checked;return Ce({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Mh(t,n){var s=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;s=or(n.value!=null?n.value:s),t._wrapperState={initialChecked:l,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function og(t,n){n=n.checked,n!=null&&Bu(t,"checked",n,!1)}function Jl(t,n){og(t,n);var s=or(n.value),l=n.type;if(s!=null)l==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(l==="submit"||l==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Kl(t,n.type,s):n.hasOwnProperty("defaultValue")&&Kl(t,n.type,or(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Bh(t,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,s||n===t.value||(t.value=n),t.defaultValue=n}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Kl(t,n,s){(n!=="number"||Wo(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var fs=Array.isArray;function hi(t,n,s,l){if(t=t.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=n.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&l&&(t[s].defaultSelected=!0)}else{for(s=""+or(s),n=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Wl(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ce({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $h(t,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(L(92));if(fs(s)){if(1<s.length)throw Error(L(93));s=s[0]}n=s}n==null&&(n=""),s=n}t._wrapperState={initialValue:or(s)}}function ag(t,n){var s=or(n.value),l=or(n.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),n.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),l!=null&&(t.defaultValue=""+l)}function Uh(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function lg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ql(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?lg(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var So,ug=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,l,c){MSApp.execUnsafeLocalFunction(function(){return t(n,s,l,c)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(So=So||document.createElement("div"),So.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=So.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Es(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C0=["Webkit","ms","Moz","O"];Object.keys(gs).forEach(function(t){C0.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),gs[n]=gs[t]})});function cg(t,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||gs.hasOwnProperty(t)&&gs[t]?(""+n).trim():n+"px"}function fg(t,n){t=t.style;for(var s in n)if(n.hasOwnProperty(s)){var l=s.indexOf("--")===0,c=cg(s,n[s],l);s==="float"&&(s="cssFloat"),l?t.setProperty(s,c):t[s]=c}}var N0=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(t,n){if(n){if(N0[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(L(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(L(61))}if(n.style!=null&&typeof n.style!="object")throw Error(L(62))}}function Gl(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yl=null;function zu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ql=null,di=null,gi=null;function Fh(t){if(t=Vs(t)){if(typeof Ql!="function")throw Error(L(280));var n=t.stateNode;n&&(n=Ta(n),Ql(t.stateNode,t.type,n))}}function hg(t){di?gi?gi.push(t):gi=[t]:di=t}function dg(){if(di){var t=di,n=gi;if(gi=di=null,Fh(t),n)for(t=0;t<n.length;t++)Fh(n[t])}}function gg(t,n){return t(n)}function pg(){}var dl=!1;function mg(t,n,s){if(dl)return t(n,s);dl=!0;try{return gg(t,n,s)}finally{dl=!1,(di!==null||gi!==null)&&(pg(),dg())}}function Is(t,n){var s=t.stateNode;if(s===null)return null;var l=Ta(s);if(l===null)return null;s=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(L(231,n,typeof s));return s}var Xl=!1;if(_n)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){Xl=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{Xl=!1}function x0(t,n,s,l,c,u,d,m,y){var T=Array.prototype.slice.call(arguments,3);try{n.apply(s,T)}catch(C){this.onError(C)}}var ps=!1,qo=null,Ho=!1,Zl=null,P0={onError:function(t){ps=!0,qo=t}};function O0(t,n,s,l,c,u,d,m,y){ps=!1,qo=null,x0.apply(P0,arguments)}function D0(t,n,s,l,c,u,d,m,y){if(O0.apply(this,arguments),ps){if(ps){var T=qo;ps=!1,qo=null}else throw Error(L(198));Ho||(Ho=!0,Zl=T)}}function Mr(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function yg(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function zh(t){if(Mr(t)!==t)throw Error(L(188))}function R0(t){var n=t.alternate;if(!n){if(n=Mr(t),n===null)throw Error(L(188));return n!==t?null:t}for(var s=t,l=n;;){var c=s.return;if(c===null)break;var u=c.alternate;if(u===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===s)return zh(c),t;if(u===l)return zh(c),n;u=u.sibling}throw Error(L(188))}if(s.return!==l.return)s=c,l=u;else{for(var d=!1,m=c.child;m;){if(m===s){d=!0,s=c,l=u;break}if(m===l){d=!0,l=c,s=u;break}m=m.sibling}if(!d){for(m=u.child;m;){if(m===s){d=!0,s=u,l=c;break}if(m===l){d=!0,l=u,s=c;break}m=m.sibling}if(!d)throw Error(L(189))}}if(s.alternate!==l)throw Error(L(190))}if(s.tag!==3)throw Error(L(188));return s.stateNode.current===s?t:n}function vg(t){return t=R0(t),t!==null?wg(t):null}function wg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=wg(t);if(n!==null)return n;t=t.sibling}return null}var Sg=At.unstable_scheduleCallback,jh=At.unstable_cancelCallback,_0=At.unstable_shouldYield,L0=At.unstable_requestPaint,De=At.unstable_now,b0=At.unstable_getCurrentPriorityLevel,ju=At.unstable_ImmediatePriority,Tg=At.unstable_UserBlockingPriority,Go=At.unstable_NormalPriority,M0=At.unstable_LowPriority,kg=At.unstable_IdlePriority,ya=null,pn=null;function B0(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ya,t,void 0,(t.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:F0,$0=Math.log,U0=Math.LN2;function F0(t){return t>>>=0,t===0?32:31-($0(t)/U0|0)|0}var To=64,ko=4194304;function hs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yo(t,n){var s=t.pendingLanes;if(s===0)return 0;var l=0,c=t.suspendedLanes,u=t.pingedLanes,d=s&268435455;if(d!==0){var m=d&~c;m!==0?l=hs(m):(u&=d,u!==0&&(l=hs(u)))}else d=s&~c,d!==0?l=hs(d):u!==0&&(l=hs(u));if(l===0)return 0;if(n!==0&&n!==l&&!(n&c)&&(c=l&-l,u=n&-n,c>=u||c===16&&(u&4194240)!==0))return n;if(l&4&&(l|=s&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=l;0<n;)s=31-Ht(n),c=1<<s,l|=t[s],n&=~c;return l}function z0(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j0(t,n){for(var s=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,u=t.pendingLanes;0<u;){var d=31-Ht(u),m=1<<d,y=c[d];y===-1?(!(m&s)||m&l)&&(c[d]=z0(m,n)):y<=n&&(t.expiredLanes|=m),u&=~m}}function eu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ag(){var t=To;return To<<=1,!(To&4194240)&&(To=64),t}function gl(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function zs(t,n,s){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Ht(n),t[n]=s}function V0(t,n){var s=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var l=t.eventTimes;for(t=t.expirationTimes;0<s;){var c=31-Ht(s),u=1<<c;n[c]=0,l[c]=-1,t[c]=-1,s&=~u}}function Vu(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var l=31-Ht(s),c=1<<l;c&n|t[l]&n&&(t[l]|=n),s&=~c}}var fe=0;function Eg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ig,Ju,Cg,Ng,xg,tu=!1,Ao=[],Xn=null,Zn=null,er=null,Cs=new Map,Ns=new Map,Hn=[],J0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vh(t,n){switch(t){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Cs.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ns.delete(n.pointerId)}}function is(t,n,s,l,c,u){return t===null||t.nativeEvent!==u?(t={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:u,targetContainers:[c]},n!==null&&(n=Vs(n),n!==null&&Ju(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function K0(t,n,s,l,c){switch(n){case"focusin":return Xn=is(Xn,t,n,s,l,c),!0;case"dragenter":return Zn=is(Zn,t,n,s,l,c),!0;case"mouseover":return er=is(er,t,n,s,l,c),!0;case"pointerover":var u=c.pointerId;return Cs.set(u,is(Cs.get(u)||null,t,n,s,l,c)),!0;case"gotpointercapture":return u=c.pointerId,Ns.set(u,is(Ns.get(u)||null,t,n,s,l,c)),!0}return!1}function Pg(t){var n=Ir(t.target);if(n!==null){var s=Mr(n);if(s!==null){if(n=s.tag,n===13){if(n=yg(s),n!==null){t.blockedOn=n,xg(t.priority,function(){Cg(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mo(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=nu(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Yl=l,s.target.dispatchEvent(l),Yl=null}else return n=Vs(s),n!==null&&Ju(n),t.blockedOn=s,!1;n.shift()}return!0}function Jh(t,n,s){Mo(t)&&s.delete(n)}function W0(){tu=!1,Xn!==null&&Mo(Xn)&&(Xn=null),Zn!==null&&Mo(Zn)&&(Zn=null),er!==null&&Mo(er)&&(er=null),Cs.forEach(Jh),Ns.forEach(Jh)}function ss(t,n){t.blockedOn===n&&(t.blockedOn=null,tu||(tu=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,W0)))}function xs(t){function n(c){return ss(c,t)}if(0<Ao.length){ss(Ao[0],t);for(var s=1;s<Ao.length;s++){var l=Ao[s];l.blockedOn===t&&(l.blockedOn=null)}}for(Xn!==null&&ss(Xn,t),Zn!==null&&ss(Zn,t),er!==null&&ss(er,t),Cs.forEach(n),Ns.forEach(n),s=0;s<Hn.length;s++)l=Hn[s],l.blockedOn===t&&(l.blockedOn=null);for(;0<Hn.length&&(s=Hn[0],s.blockedOn===null);)Pg(s),s.blockedOn===null&&Hn.shift()}var pi=Bn.ReactCurrentBatchConfig,Qo=!0;function q0(t,n,s,l){var c=fe,u=pi.transition;pi.transition=null;try{fe=1,Ku(t,n,s,l)}finally{fe=c,pi.transition=u}}function H0(t,n,s,l){var c=fe,u=pi.transition;pi.transition=null;try{fe=4,Ku(t,n,s,l)}finally{fe=c,pi.transition=u}}function Ku(t,n,s,l){if(Qo){var c=nu(t,n,s,l);if(c===null)El(t,n,l,Xo,s),Vh(t,l);else if(K0(c,t,n,s,l))l.stopPropagation();else if(Vh(t,l),n&4&&-1<J0.indexOf(t)){for(;c!==null;){var u=Vs(c);if(u!==null&&Ig(u),u=nu(t,n,s,l),u===null&&El(t,n,l,Xo,s),u===c)break;c=u}c!==null&&l.stopPropagation()}else El(t,n,l,null,s)}}var Xo=null;function nu(t,n,s,l){if(Xo=null,t=zu(l),t=Ir(t),t!==null)if(n=Mr(t),n===null)t=null;else if(s=n.tag,s===13){if(t=yg(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Xo=t,null}function Og(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(b0()){case ju:return 1;case Tg:return 4;case Go:case M0:return 16;case kg:return 536870912;default:return 16}default:return 16}}var Yn=null,Wu=null,Bo=null;function Dg(){if(Bo)return Bo;var t,n=Wu,s=n.length,l,c="value"in Yn?Yn.value:Yn.textContent,u=c.length;for(t=0;t<s&&n[t]===c[t];t++);var d=s-t;for(l=1;l<=d&&n[s-l]===c[u-l];l++);return Bo=c.slice(t,1<l?1-l:void 0)}function $o(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Eo(){return!0}function Kh(){return!1}function It(t){function n(s,l,c,u,d){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(s=t[m],this[m]=s?s(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Eo:Kh,this.isPropagationStopped=Kh,this}return Ce(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),n}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qu=It(Ci),js=Ce({},Ci,{view:0,detail:0}),G0=It(js),pl,ml,os,va=Ce({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==os&&(os&&t.type==="mousemove"?(pl=t.screenX-os.screenX,ml=t.screenY-os.screenY):ml=pl=0,os=t),pl)},movementY:function(t){return"movementY"in t?t.movementY:ml}}),Wh=It(va),Y0=Ce({},va,{dataTransfer:0}),Q0=It(Y0),X0=Ce({},js,{relatedTarget:0}),yl=It(X0),Z0=Ce({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),e1=It(Z0),t1=Ce({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),n1=It(t1),r1=Ce({},Ci,{data:0}),qh=It(r1),i1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a1(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=o1[t])?!!n[t]:!1}function Hu(){return a1}var l1=Ce({},js,{key:function(t){if(t.key){var n=i1[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=$o(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?s1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hu,charCode:function(t){return t.type==="keypress"?$o(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$o(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u1=It(l1),c1=Ce({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hh=It(c1),f1=Ce({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hu}),h1=It(f1),d1=Ce({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),g1=It(d1),p1=Ce({},va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),m1=It(p1),y1=[9,13,27,32],Gu=_n&&"CompositionEvent"in window,ms=null;_n&&"documentMode"in document&&(ms=document.documentMode);var v1=_n&&"TextEvent"in window&&!ms,Rg=_n&&(!Gu||ms&&8<ms&&11>=ms),Gh=String.fromCharCode(32),Yh=!1;function _g(t,n){switch(t){case"keyup":return y1.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ni=!1;function w1(t,n){switch(t){case"compositionend":return Lg(n);case"keypress":return n.which!==32?null:(Yh=!0,Gh);case"textInput":return t=n.data,t===Gh&&Yh?null:t;default:return null}}function S1(t,n){if(ni)return t==="compositionend"||!Gu&&_g(t,n)?(t=Dg(),Bo=Wu=Yn=null,ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Rg&&n.locale!=="ko"?null:n.data;default:return null}}var T1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!T1[t.type]:n==="textarea"}function bg(t,n,s,l){hg(l),n=Zo(n,"onChange"),0<n.length&&(s=new qu("onChange","change",null,s,l),t.push({event:s,listeners:n}))}var ys=null,Ps=null;function k1(t){Wg(t,0)}function wa(t){var n=si(t);if(sg(n))return t}function A1(t,n){if(t==="change")return n}var Mg=!1;if(_n){var vl;if(_n){var wl="oninput"in document;if(!wl){var Xh=document.createElement("div");Xh.setAttribute("oninput","return;"),wl=typeof Xh.oninput=="function"}vl=wl}else vl=!1;Mg=vl&&(!document.documentMode||9<document.documentMode)}function Zh(){ys&&(ys.detachEvent("onpropertychange",Bg),Ps=ys=null)}function Bg(t){if(t.propertyName==="value"&&wa(Ps)){var n=[];bg(n,Ps,t,zu(t)),mg(k1,n)}}function E1(t,n,s){t==="focusin"?(Zh(),ys=n,Ps=s,ys.attachEvent("onpropertychange",Bg)):t==="focusout"&&Zh()}function I1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wa(Ps)}function C1(t,n){if(t==="click")return wa(n)}function N1(t,n){if(t==="input"||t==="change")return wa(n)}function x1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Yt=typeof Object.is=="function"?Object.is:x1;function Os(t,n){if(Yt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!$l.call(n,c)||!Yt(t[c],n[c]))return!1}return!0}function ed(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function td(t,n){var s=ed(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=n&&l>=n)return{node:s,offset:n-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ed(s)}}function $g(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?$g(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Ug(){for(var t=window,n=Wo();n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Wo(t.document)}return n}function Yu(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function P1(t){var n=Ug(),s=t.focusedElem,l=t.selectionRange;if(n!==s&&s&&s.ownerDocument&&$g(s.ownerDocument.documentElement,s)){if(l!==null&&Yu(s)){if(n=l.start,t=l.end,t===void 0&&(t=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(t,s.value.length);else if(t=(n=s.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var c=s.textContent.length,u=Math.min(l.start,c);l=l.end===void 0?u:Math.min(l.end,c),!t.extend&&u>l&&(c=l,l=u,u=c),c=td(s,u);var d=td(s,l);c&&d&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),t.removeAllRanges(),u>l?(t.addRange(n),t.extend(d.node,d.offset)):(n.setEnd(d.node,d.offset),t.addRange(n)))}}for(n=[],t=s;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)t=n[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var O1=_n&&"documentMode"in document&&11>=document.documentMode,ri=null,ru=null,vs=null,iu=!1;function nd(t,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;iu||ri==null||ri!==Wo(l)||(l=ri,"selectionStart"in l&&Yu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),vs&&Os(vs,l)||(vs=l,l=Zo(ru,"onSelect"),0<l.length&&(n=new qu("onSelect","select",null,n,s),t.push({event:n,listeners:l}),n.target=ri)))}function Io(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var ii={animationend:Io("Animation","AnimationEnd"),animationiteration:Io("Animation","AnimationIteration"),animationstart:Io("Animation","AnimationStart"),transitionend:Io("Transition","TransitionEnd")},Sl={},Fg={};_n&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function Sa(t){if(Sl[t])return Sl[t];if(!ii[t])return t;var n=ii[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in Fg)return Sl[t]=n[s];return t}var zg=Sa("animationend"),jg=Sa("animationiteration"),Vg=Sa("animationstart"),Jg=Sa("transitionend"),Kg=new Map,rd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(t,n){Kg.set(t,n),br(n,[t])}for(var Tl=0;Tl<rd.length;Tl++){var kl=rd[Tl],D1=kl.toLowerCase(),R1=kl[0].toUpperCase()+kl.slice(1);lr(D1,"on"+R1)}lr(zg,"onAnimationEnd");lr(jg,"onAnimationIteration");lr(Vg,"onAnimationStart");lr("dblclick","onDoubleClick");lr("focusin","onFocus");lr("focusout","onBlur");lr(Jg,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));br("onBeforeInput",["compositionend","keypress","textInput","paste"]);br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function id(t,n,s){var l=t.type||"unknown-event";t.currentTarget=s,D0(l,n,void 0,t),t.currentTarget=null}function Wg(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],c=l.event;l=l.listeners;e:{var u=void 0;if(n)for(var d=l.length-1;0<=d;d--){var m=l[d],y=m.instance,T=m.currentTarget;if(m=m.listener,y!==u&&c.isPropagationStopped())break e;id(c,m,T),u=y}else for(d=0;d<l.length;d++){if(m=l[d],y=m.instance,T=m.currentTarget,m=m.listener,y!==u&&c.isPropagationStopped())break e;id(c,m,T),u=y}}}if(Ho)throw t=Zl,Ho=!1,Zl=null,t}function ye(t,n){var s=n[uu];s===void 0&&(s=n[uu]=new Set);var l=t+"__bubble";s.has(l)||(qg(n,t,2,!1),s.add(l))}function Al(t,n,s){var l=0;n&&(l|=4),qg(s,t,l,n)}var Co="_reactListening"+Math.random().toString(36).slice(2);function Ds(t){if(!t[Co]){t[Co]=!0,eg.forEach(function(s){s!=="selectionchange"&&(_1.has(s)||Al(s,!1,t),Al(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Co]||(n[Co]=!0,Al("selectionchange",!1,n))}}function qg(t,n,s,l){switch(Og(n)){case 1:var c=q0;break;case 4:c=H0;break;default:c=Ku}s=c.bind(null,n,s,t),c=void 0,!Xl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,s,{capture:!0,passive:c}):t.addEventListener(n,s,!0):c!==void 0?t.addEventListener(n,s,{passive:c}):t.addEventListener(n,s,!1)}function El(t,n,s,l,c){var u=l;if(!(n&1)&&!(n&2)&&l!==null)e:for(;;){if(l===null)return;var d=l.tag;if(d===3||d===4){var m=l.stateNode.containerInfo;if(m===c||m.nodeType===8&&m.parentNode===c)break;if(d===4)for(d=l.return;d!==null;){var y=d.tag;if((y===3||y===4)&&(y=d.stateNode.containerInfo,y===c||y.nodeType===8&&y.parentNode===c))return;d=d.return}for(;m!==null;){if(d=Ir(m),d===null)return;if(y=d.tag,y===5||y===6){l=u=d;continue e}m=m.parentNode}}l=l.return}mg(function(){var T=u,C=zu(s),O=[];e:{var x=Kg.get(t);if(x!==void 0){var M=qu,B=t;switch(t){case"keypress":if($o(s)===0)break e;case"keydown":case"keyup":M=u1;break;case"focusin":B="focus",M=yl;break;case"focusout":B="blur",M=yl;break;case"beforeblur":case"afterblur":M=yl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=Q0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=h1;break;case zg:case jg:case Vg:M=e1;break;case Jg:M=g1;break;case"scroll":M=G0;break;case"wheel":M=m1;break;case"copy":case"cut":case"paste":M=n1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Hh}var U=(n&4)!==0,ce=!U&&t==="scroll",k=U?x!==null?x+"Capture":null:x;U=[];for(var w=T,A;w!==null;){A=w;var _=A.stateNode;if(A.tag===5&&_!==null&&(A=_,k!==null&&(_=Is(w,k),_!=null&&U.push(Rs(w,_,A)))),ce)break;w=w.return}0<U.length&&(x=new M(x,B,null,s,C),O.push({event:x,listeners:U}))}}if(!(n&7)){e:{if(x=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",x&&s!==Yl&&(B=s.relatedTarget||s.fromElement)&&(Ir(B)||B[Ln]))break e;if((M||x)&&(x=C.window===C?C:(x=C.ownerDocument)?x.defaultView||x.parentWindow:window,M?(B=s.relatedTarget||s.toElement,M=T,B=B?Ir(B):null,B!==null&&(ce=Mr(B),B!==ce||B.tag!==5&&B.tag!==6)&&(B=null)):(M=null,B=T),M!==B)){if(U=Wh,_="onMouseLeave",k="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(U=Hh,_="onPointerLeave",k="onPointerEnter",w="pointer"),ce=M==null?x:si(M),A=B==null?x:si(B),x=new U(_,w+"leave",M,s,C),x.target=ce,x.relatedTarget=A,_=null,Ir(C)===T&&(U=new U(k,w+"enter",B,s,C),U.target=A,U.relatedTarget=ce,_=U),ce=_,M&&B)t:{for(U=M,k=B,w=0,A=U;A;A=Zr(A))w++;for(A=0,_=k;_;_=Zr(_))A++;for(;0<w-A;)U=Zr(U),w--;for(;0<A-w;)k=Zr(k),A--;for(;w--;){if(U===k||k!==null&&U===k.alternate)break t;U=Zr(U),k=Zr(k)}U=null}else U=null;M!==null&&sd(O,x,M,U,!1),B!==null&&ce!==null&&sd(O,ce,B,U,!0)}}e:{if(x=T?si(T):window,M=x.nodeName&&x.nodeName.toLowerCase(),M==="select"||M==="input"&&x.type==="file")var z=A1;else if(Qh(x))if(Mg)z=N1;else{z=I1;var V=E1}else(M=x.nodeName)&&M.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(z=C1);if(z&&(z=z(t,T))){bg(O,z,s,C);break e}V&&V(t,x,T),t==="focusout"&&(V=x._wrapperState)&&V.controlled&&x.type==="number"&&Kl(x,"number",x.value)}switch(V=T?si(T):window,t){case"focusin":(Qh(V)||V.contentEditable==="true")&&(ri=V,ru=T,vs=null);break;case"focusout":vs=ru=ri=null;break;case"mousedown":iu=!0;break;case"contextmenu":case"mouseup":case"dragend":iu=!1,nd(O,s,C);break;case"selectionchange":if(O1)break;case"keydown":case"keyup":nd(O,s,C)}var J;if(Gu)e:{switch(t){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else ni?_g(t,s)&&(H="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(H="onCompositionStart");H&&(Rg&&s.locale!=="ko"&&(ni||H!=="onCompositionStart"?H==="onCompositionEnd"&&ni&&(J=Dg()):(Yn=C,Wu="value"in Yn?Yn.value:Yn.textContent,ni=!0)),V=Zo(T,H),0<V.length&&(H=new qh(H,t,null,s,C),O.push({event:H,listeners:V}),J?H.data=J:(J=Lg(s),J!==null&&(H.data=J)))),(J=v1?w1(t,s):S1(t,s))&&(T=Zo(T,"onBeforeInput"),0<T.length&&(C=new qh("onBeforeInput","beforeinput",null,s,C),O.push({event:C,listeners:T}),C.data=J))}Wg(O,n)})}function Rs(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Zo(t,n){for(var s=n+"Capture",l=[];t!==null;){var c=t,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=Is(t,s),u!=null&&l.unshift(Rs(t,u,c)),u=Is(t,n),u!=null&&l.push(Rs(t,u,c))),t=t.return}return l}function Zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sd(t,n,s,l,c){for(var u=n._reactName,d=[];s!==null&&s!==l;){var m=s,y=m.alternate,T=m.stateNode;if(y!==null&&y===l)break;m.tag===5&&T!==null&&(m=T,c?(y=Is(s,u),y!=null&&d.unshift(Rs(s,y,m))):c||(y=Is(s,u),y!=null&&d.push(Rs(s,y,m)))),s=s.return}d.length!==0&&t.push({event:n,listeners:d})}var L1=/\r\n?/g,b1=/\u0000|\uFFFD/g;function od(t){return(typeof t=="string"?t:""+t).replace(L1,`
`).replace(b1,"")}function No(t,n,s){if(n=od(n),od(t)!==n&&s)throw Error(L(425))}function ea(){}var su=null,ou=null;function au(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var lu=typeof setTimeout=="function"?setTimeout:void 0,M1=typeof clearTimeout=="function"?clearTimeout:void 0,ad=typeof Promise=="function"?Promise:void 0,B1=typeof queueMicrotask=="function"?queueMicrotask:typeof ad<"u"?function(t){return ad.resolve(null).then(t).catch($1)}:lu;function $1(t){setTimeout(function(){throw t})}function Il(t,n){var s=n,l=0;do{var c=s.nextSibling;if(t.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(l===0){t.removeChild(c),xs(n);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=c}while(s);xs(n)}function tr(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function ld(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),gn="__reactFiber$"+Ni,_s="__reactProps$"+Ni,Ln="__reactContainer$"+Ni,uu="__reactEvents$"+Ni,U1="__reactListeners$"+Ni,F1="__reactHandles$"+Ni;function Ir(t){var n=t[gn];if(n)return n;for(var s=t.parentNode;s;){if(n=s[Ln]||s[gn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=ld(t);t!==null;){if(s=t[gn])return s;t=ld(t)}return n}t=s,s=t.parentNode}return null}function Vs(t){return t=t[gn]||t[Ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Ta(t){return t[_s]||null}var cu=[],oi=-1;function ur(t){return{current:t}}function ve(t){0>oi||(t.current=cu[oi],cu[oi]=null,oi--)}function me(t,n){oi++,cu[oi]=t.current,t.current=n}var ar={},Xe=ur(ar),ft=ur(!1),Or=ar;function wi(t,n){var s=t.type.contextTypes;if(!s)return ar;var l=t.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in s)c[u]=n[u];return l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=c),c}function ht(t){return t=t.childContextTypes,t!=null}function ta(){ve(ft),ve(Xe)}function ud(t,n,s){if(Xe.current!==ar)throw Error(L(168));me(Xe,n),me(ft,s)}function Hg(t,n,s){var l=t.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var c in l)if(!(c in n))throw Error(L(108,E0(t)||"Unknown",c));return Ce({},s,l)}function na(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ar,Or=Xe.current,me(Xe,t),me(ft,ft.current),!0}function cd(t,n,s){var l=t.stateNode;if(!l)throw Error(L(169));s?(t=Hg(t,n,Or),l.__reactInternalMemoizedMergedChildContext=t,ve(ft),ve(Xe),me(Xe,t)):ve(ft),me(ft,s)}var Pn=null,ka=!1,Cl=!1;function Gg(t){Pn===null?Pn=[t]:Pn.push(t)}function z1(t){ka=!0,Gg(t)}function cr(){if(!Cl&&Pn!==null){Cl=!0;var t=0,n=fe;try{var s=Pn;for(fe=1;t<s.length;t++){var l=s[t];do l=l(!0);while(l!==null)}Pn=null,ka=!1}catch(c){throw Pn!==null&&(Pn=Pn.slice(t+1)),Sg(ju,cr),c}finally{fe=n,Cl=!1}}return null}var ai=[],li=0,ra=null,ia=0,Dt=[],Rt=0,Dr=null,On=1,Dn="";function Ar(t,n){ai[li++]=ia,ai[li++]=ra,ra=t,ia=n}function Yg(t,n,s){Dt[Rt++]=On,Dt[Rt++]=Dn,Dt[Rt++]=Dr,Dr=t;var l=On;t=Dn;var c=32-Ht(l)-1;l&=~(1<<c),s+=1;var u=32-Ht(n)+c;if(30<u){var d=c-c%5;u=(l&(1<<d)-1).toString(32),l>>=d,c-=d,On=1<<32-Ht(n)+c|s<<c|l,Dn=u+t}else On=1<<u|s<<c|l,Dn=t}function Qu(t){t.return!==null&&(Ar(t,1),Yg(t,1,0))}function Xu(t){for(;t===ra;)ra=ai[--li],ai[li]=null,ia=ai[--li],ai[li]=null;for(;t===Dr;)Dr=Dt[--Rt],Dt[Rt]=null,Dn=Dt[--Rt],Dt[Rt]=null,On=Dt[--Rt],Dt[Rt]=null}var kt=null,Tt=null,Ae=!1,qt=null;function Qg(t,n){var s=_t(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=t,n=t.deletions,n===null?(t.deletions=[s],t.flags|=16):n.push(s)}function fd(t,n){switch(t.tag){case 5:var s=t.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,kt=t,Tt=tr(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,kt=t,Tt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Dr!==null?{id:On,overflow:Dn}:null,t.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=_t(18,null,null,0),s.stateNode=n,s.return=t,t.child=s,kt=t,Tt=null,!0):!1;default:return!1}}function fu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hu(t){if(Ae){var n=Tt;if(n){var s=n;if(!fd(t,n)){if(fu(t))throw Error(L(418));n=tr(s.nextSibling);var l=kt;n&&fd(t,n)?Qg(l,s):(t.flags=t.flags&-4097|2,Ae=!1,kt=t)}}else{if(fu(t))throw Error(L(418));t.flags=t.flags&-4097|2,Ae=!1,kt=t}}}function hd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kt=t}function xo(t){if(t!==kt)return!1;if(!Ae)return hd(t),Ae=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!au(t.type,t.memoizedProps)),n&&(n=Tt)){if(fu(t))throw Xg(),Error(L(418));for(;n;)Qg(t,n),n=tr(n.nextSibling)}if(hd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(n===0){Tt=tr(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}t=t.nextSibling}Tt=null}}else Tt=kt?tr(t.stateNode.nextSibling):null;return!0}function Xg(){for(var t=Tt;t;)t=tr(t.nextSibling)}function Si(){Tt=kt=null,Ae=!1}function Zu(t){qt===null?qt=[t]:qt.push(t)}var j1=Bn.ReactCurrentBatchConfig;function Kt(t,n){if(t&&t.defaultProps){n=Ce({},n),t=t.defaultProps;for(var s in t)n[s]===void 0&&(n[s]=t[s]);return n}return n}var sa=ur(null),oa=null,ui=null,ec=null;function tc(){ec=ui=oa=null}function nc(t){var n=sa.current;ve(sa),t._currentValue=n}function du(t,n,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===s)break;t=t.return}}function mi(t,n){oa=t,ec=ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(ct=!0),t.firstContext=null)}function bt(t){var n=t._currentValue;if(ec!==t)if(t={context:t,memoizedValue:n,next:null},ui===null){if(oa===null)throw Error(L(308));ui=t,oa.dependencies={lanes:0,firstContext:t}}else ui=ui.next=t;return n}var Cr=null;function rc(t){Cr===null?Cr=[t]:Cr.push(t)}function Zg(t,n,s,l){var c=n.interleaved;return c===null?(s.next=s,rc(n)):(s.next=c.next,c.next=s),n.interleaved=s,bn(t,l)}function bn(t,n){t.lanes|=n;var s=t.alternate;for(s!==null&&(s.lanes|=n),s=t,t=t.return;t!==null;)t.childLanes|=n,s=t.alternate,s!==null&&(s.childLanes|=n),s=t,t=t.return;return s.tag===3?s.stateNode:null}var qn=!1;function ic(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ep(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function nr(t,n,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,ae&2){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,bn(t,s)}return c=l.interleaved,c===null?(n.next=n,rc(l)):(n.next=c.next,c.next=n),l.interleaved=n,bn(t,s)}function Uo(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Vu(t,s)}}function dd(t,n){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,u=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};u===null?c=u=d:u=u.next=d,s=s.next}while(s!==null);u===null?c=u=n:u=u.next=n}else c=u=n;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:l.shared,effects:l.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}function aa(t,n,s,l){var c=t.updateQueue;qn=!1;var u=c.firstBaseUpdate,d=c.lastBaseUpdate,m=c.shared.pending;if(m!==null){c.shared.pending=null;var y=m,T=y.next;y.next=null,d===null?u=T:d.next=T,d=y;var C=t.alternate;C!==null&&(C=C.updateQueue,m=C.lastBaseUpdate,m!==d&&(m===null?C.firstBaseUpdate=T:m.next=T,C.lastBaseUpdate=y))}if(u!==null){var O=c.baseState;d=0,C=T=y=null,m=u;do{var x=m.lane,M=m.eventTime;if((l&x)===x){C!==null&&(C=C.next={eventTime:M,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var B=t,U=m;switch(x=n,M=s,U.tag){case 1:if(B=U.payload,typeof B=="function"){O=B.call(M,O,x);break e}O=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=U.payload,x=typeof B=="function"?B.call(M,O,x):B,x==null)break e;O=Ce({},O,x);break e;case 2:qn=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,x=c.effects,x===null?c.effects=[m]:x.push(m))}else M={eventTime:M,lane:x,tag:m.tag,payload:m.payload,callback:m.callback,next:null},C===null?(T=C=M,y=O):C=C.next=M,d|=x;if(m=m.next,m===null){if(m=c.shared.pending,m===null)break;x=m,m=x.next,x.next=null,c.lastBaseUpdate=x,c.shared.pending=null}}while(1);if(C===null&&(y=O),c.baseState=y,c.firstBaseUpdate=T,c.lastBaseUpdate=C,n=c.shared.interleaved,n!==null){c=n;do d|=c.lane,c=c.next;while(c!==n)}else u===null&&(c.shared.lanes=0);_r|=d,t.lanes=d,t.memoizedState=O}}function gd(t,n,s){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var l=t[n],c=l.callback;if(c!==null){if(l.callback=null,l=s,typeof c!="function")throw Error(L(191,c));c.call(l)}}}var tp=new Zd.Component().refs;function gu(t,n,s,l){n=t.memoizedState,s=s(l,n),s=s==null?n:Ce({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Aa={isMounted:function(t){return(t=t._reactInternals)?Mr(t)===t:!1},enqueueSetState:function(t,n,s){t=t._reactInternals;var l=rt(),c=ir(t),u=Rn(l,c);u.payload=n,s!=null&&(u.callback=s),n=nr(t,u,c),n!==null&&(Gt(n,t,c,l),Uo(n,t,c))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var l=rt(),c=ir(t),u=Rn(l,c);u.tag=1,u.payload=n,s!=null&&(u.callback=s),n=nr(t,u,c),n!==null&&(Gt(n,t,c,l),Uo(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=rt(),l=ir(t),c=Rn(s,l);c.tag=2,n!=null&&(c.callback=n),n=nr(t,c,l),n!==null&&(Gt(n,t,l,s),Uo(n,t,l))}};function pd(t,n,s,l,c,u,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,u,d):n.prototype&&n.prototype.isPureReactComponent?!Os(s,l)||!Os(c,u):!0}function np(t,n,s){var l=!1,c=ar,u=n.contextType;return typeof u=="object"&&u!==null?u=bt(u):(c=ht(n)?Or:Xe.current,l=n.contextTypes,u=(l=l!=null)?wi(t,c):ar),n=new n(s,u),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Aa,t.stateNode=n,n._reactInternals=t,l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=u),n}function md(t,n,s,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==t&&Aa.enqueueReplaceState(n,n.state,null)}function pu(t,n,s,l){var c=t.stateNode;c.props=s,c.state=t.memoizedState,c.refs=tp,ic(t);var u=n.contextType;typeof u=="object"&&u!==null?c.context=bt(u):(u=ht(n)?Or:Xe.current,c.context=wi(t,u)),c.state=t.memoizedState,u=n.getDerivedStateFromProps,typeof u=="function"&&(gu(t,n,u,s),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&Aa.enqueueReplaceState(c,c.state,null),aa(t,s,c,l),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function as(t,n,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(L(309));var l=s.stateNode}if(!l)throw Error(L(147,t));var c=l,u=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===u?n.ref:(n=function(d){var m=c.refs;m===tp&&(m=c.refs={}),d===null?delete m[u]:m[u]=d},n._stringRef=u,n)}if(typeof t!="string")throw Error(L(284));if(!s._owner)throw Error(L(290,t))}return t}function Po(t,n){throw t=Object.prototype.toString.call(n),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function yd(t){var n=t._init;return n(t._payload)}function rp(t){function n(k,w){if(t){var A=k.deletions;A===null?(k.deletions=[w],k.flags|=16):A.push(w)}}function s(k,w){if(!t)return null;for(;w!==null;)n(k,w),w=w.sibling;return null}function l(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function c(k,w){return k=sr(k,w),k.index=0,k.sibling=null,k}function u(k,w,A){return k.index=A,t?(A=k.alternate,A!==null?(A=A.index,A<w?(k.flags|=2,w):A):(k.flags|=2,w)):(k.flags|=1048576,w)}function d(k){return t&&k.alternate===null&&(k.flags|=2),k}function m(k,w,A,_){return w===null||w.tag!==6?(w=_l(A,k.mode,_),w.return=k,w):(w=c(w,A),w.return=k,w)}function y(k,w,A,_){var z=A.type;return z===ti?C(k,w,A.props.children,_,A.key):w!==null&&(w.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Wn&&yd(z)===w.type)?(_=c(w,A.props),_.ref=as(k,w,A),_.return=k,_):(_=Ko(A.type,A.key,A.props,null,k.mode,_),_.ref=as(k,w,A),_.return=k,_)}function T(k,w,A,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Ll(A,k.mode,_),w.return=k,w):(w=c(w,A.children||[]),w.return=k,w)}function C(k,w,A,_,z){return w===null||w.tag!==7?(w=Pr(A,k.mode,_,z),w.return=k,w):(w=c(w,A),w.return=k,w)}function O(k,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=_l(""+w,k.mode,A),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vo:return A=Ko(w.type,w.key,w.props,null,k.mode,A),A.ref=as(k,null,w),A.return=k,A;case ei:return w=Ll(w,k.mode,A),w.return=k,w;case Wn:var _=w._init;return O(k,_(w._payload),A)}if(fs(w)||ns(w))return w=Pr(w,k.mode,A,null),w.return=k,w;Po(k,w)}return null}function x(k,w,A,_){var z=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return z!==null?null:m(k,w,""+A,_);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case vo:return A.key===z?y(k,w,A,_):null;case ei:return A.key===z?T(k,w,A,_):null;case Wn:return z=A._init,x(k,w,z(A._payload),_)}if(fs(A)||ns(A))return z!==null?null:C(k,w,A,_,null);Po(k,A)}return null}function M(k,w,A,_,z){if(typeof _=="string"&&_!==""||typeof _=="number")return k=k.get(A)||null,m(w,k,""+_,z);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vo:return k=k.get(_.key===null?A:_.key)||null,y(w,k,_,z);case ei:return k=k.get(_.key===null?A:_.key)||null,T(w,k,_,z);case Wn:var V=_._init;return M(k,w,A,V(_._payload),z)}if(fs(_)||ns(_))return k=k.get(A)||null,C(w,k,_,z,null);Po(w,_)}return null}function B(k,w,A,_){for(var z=null,V=null,J=w,H=w=0,te=null;J!==null&&H<A.length;H++){J.index>H?(te=J,J=null):te=J.sibling;var ne=x(k,J,A[H],_);if(ne===null){J===null&&(J=te);break}t&&J&&ne.alternate===null&&n(k,J),w=u(ne,w,H),V===null?z=ne:V.sibling=ne,V=ne,J=te}if(H===A.length)return s(k,J),Ae&&Ar(k,H),z;if(J===null){for(;H<A.length;H++)J=O(k,A[H],_),J!==null&&(w=u(J,w,H),V===null?z=J:V.sibling=J,V=J);return Ae&&Ar(k,H),z}for(J=l(k,J);H<A.length;H++)te=M(J,k,H,A[H],_),te!==null&&(t&&te.alternate!==null&&J.delete(te.key===null?H:te.key),w=u(te,w,H),V===null?z=te:V.sibling=te,V=te);return t&&J.forEach(function(gt){return n(k,gt)}),Ae&&Ar(k,H),z}function U(k,w,A,_){var z=ns(A);if(typeof z!="function")throw Error(L(150));if(A=z.call(A),A==null)throw Error(L(151));for(var V=z=null,J=w,H=w=0,te=null,ne=A.next();J!==null&&!ne.done;H++,ne=A.next()){J.index>H?(te=J,J=null):te=J.sibling;var gt=x(k,J,ne.value,_);if(gt===null){J===null&&(J=te);break}t&&J&&gt.alternate===null&&n(k,J),w=u(gt,w,H),V===null?z=gt:V.sibling=gt,V=gt,J=te}if(ne.done)return s(k,J),Ae&&Ar(k,H),z;if(J===null){for(;!ne.done;H++,ne=A.next())ne=O(k,ne.value,_),ne!==null&&(w=u(ne,w,H),V===null?z=ne:V.sibling=ne,V=ne);return Ae&&Ar(k,H),z}for(J=l(k,J);!ne.done;H++,ne=A.next())ne=M(J,k,H,ne.value,_),ne!==null&&(t&&ne.alternate!==null&&J.delete(ne.key===null?H:ne.key),w=u(ne,w,H),V===null?z=ne:V.sibling=ne,V=ne);return t&&J.forEach(function(yn){return n(k,yn)}),Ae&&Ar(k,H),z}function ce(k,w,A,_){if(typeof A=="object"&&A!==null&&A.type===ti&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case vo:e:{for(var z=A.key,V=w;V!==null;){if(V.key===z){if(z=A.type,z===ti){if(V.tag===7){s(k,V.sibling),w=c(V,A.props.children),w.return=k,k=w;break e}}else if(V.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Wn&&yd(z)===V.type){s(k,V.sibling),w=c(V,A.props),w.ref=as(k,V,A),w.return=k,k=w;break e}s(k,V);break}else n(k,V);V=V.sibling}A.type===ti?(w=Pr(A.props.children,k.mode,_,A.key),w.return=k,k=w):(_=Ko(A.type,A.key,A.props,null,k.mode,_),_.ref=as(k,w,A),_.return=k,k=_)}return d(k);case ei:e:{for(V=A.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){s(k,w.sibling),w=c(w,A.children||[]),w.return=k,k=w;break e}else{s(k,w);break}else n(k,w);w=w.sibling}w=Ll(A,k.mode,_),w.return=k,k=w}return d(k);case Wn:return V=A._init,ce(k,w,V(A._payload),_)}if(fs(A))return B(k,w,A,_);if(ns(A))return U(k,w,A,_);Po(k,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(s(k,w.sibling),w=c(w,A),w.return=k,k=w):(s(k,w),w=_l(A,k.mode,_),w.return=k,k=w),d(k)):s(k,w)}return ce}var Ti=rp(!0),ip=rp(!1),Js={},mn=ur(Js),Ls=ur(Js),bs=ur(Js);function Nr(t){if(t===Js)throw Error(L(174));return t}function sc(t,n){switch(me(bs,n),me(Ls,t),me(mn,Js),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ql(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=ql(n,t)}ve(mn),me(mn,n)}function ki(){ve(mn),ve(Ls),ve(bs)}function sp(t){Nr(bs.current);var n=Nr(mn.current),s=ql(n,t.type);n!==s&&(me(Ls,t),me(mn,s))}function oc(t){Ls.current===t&&(ve(mn),ve(Ls))}var Ee=ur(0);function la(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Nl=[];function ac(){for(var t=0;t<Nl.length;t++)Nl[t]._workInProgressVersionPrimary=null;Nl.length=0}var Fo=Bn.ReactCurrentDispatcher,xl=Bn.ReactCurrentBatchConfig,Rr=0,Ie=null,Be=null,Ue=null,ua=!1,ws=!1,Ms=0,V1=0;function Ge(){throw Error(L(321))}function lc(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!Yt(t[s],n[s]))return!1;return!0}function uc(t,n,s,l,c,u){if(Rr=u,Ie=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Fo.current=t===null||t.memoizedState===null?q1:H1,t=s(l,c),ws){u=0;do{if(ws=!1,Ms=0,25<=u)throw Error(L(301));u+=1,Ue=Be=null,n.updateQueue=null,Fo.current=G1,t=s(l,c)}while(ws)}if(Fo.current=ca,n=Be!==null&&Be.next!==null,Rr=0,Ue=Be=Ie=null,ua=!1,n)throw Error(L(300));return t}function cc(){var t=Ms!==0;return Ms=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ie.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Mt(){if(Be===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var n=Ue===null?Ie.memoizedState:Ue.next;if(n!==null)Ue=n,Be=t;else{if(t===null)throw Error(L(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ue===null?Ie.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Bs(t,n){return typeof n=="function"?n(t):n}function Pl(t){var n=Mt(),s=n.queue;if(s===null)throw Error(L(311));s.lastRenderedReducer=t;var l=Be,c=l.baseQueue,u=s.pending;if(u!==null){if(c!==null){var d=c.next;c.next=u.next,u.next=d}l.baseQueue=c=u,s.pending=null}if(c!==null){u=c.next,l=l.baseState;var m=d=null,y=null,T=u;do{var C=T.lane;if((Rr&C)===C)y!==null&&(y=y.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),l=T.hasEagerState?T.eagerState:t(l,T.action);else{var O={lane:C,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};y===null?(m=y=O,d=l):y=y.next=O,Ie.lanes|=C,_r|=C}T=T.next}while(T!==null&&T!==u);y===null?d=l:y.next=m,Yt(l,n.memoizedState)||(ct=!0),n.memoizedState=l,n.baseState=d,n.baseQueue=y,s.lastRenderedState=l}if(t=s.interleaved,t!==null){c=t;do u=c.lane,Ie.lanes|=u,_r|=u,c=c.next;while(c!==t)}else c===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Ol(t){var n=Mt(),s=n.queue;if(s===null)throw Error(L(311));s.lastRenderedReducer=t;var l=s.dispatch,c=s.pending,u=n.memoizedState;if(c!==null){s.pending=null;var d=c=c.next;do u=t(u,d.action),d=d.next;while(d!==c);Yt(u,n.memoizedState)||(ct=!0),n.memoizedState=u,n.baseQueue===null&&(n.baseState=u),s.lastRenderedState=u}return[u,l]}function op(){}function ap(t,n){var s=Ie,l=Mt(),c=n(),u=!Yt(l.memoizedState,c);if(u&&(l.memoizedState=c,ct=!0),l=l.queue,fc(cp.bind(null,s,l,t),[t]),l.getSnapshot!==n||u||Ue!==null&&Ue.memoizedState.tag&1){if(s.flags|=2048,$s(9,up.bind(null,s,l,c,n),void 0,null),Fe===null)throw Error(L(349));Rr&30||lp(s,n,c)}return c}function lp(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Ie.updateQueue,n===null?(n={lastEffect:null,stores:null},Ie.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function up(t,n,s,l){n.value=s,n.getSnapshot=l,fp(n)&&hp(t)}function cp(t,n,s){return s(function(){fp(n)&&hp(t)})}function fp(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!Yt(t,s)}catch{return!0}}function hp(t){var n=bn(t,1);n!==null&&Gt(n,t,1,-1)}function vd(t){var n=dn();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:t},n.queue=t,t=t.dispatch=W1.bind(null,Ie,t),[n.memoizedState,t]}function $s(t,n,s,l){return t={tag:t,create:n,destroy:s,deps:l,next:null},n=Ie.updateQueue,n===null?(n={lastEffect:null,stores:null},Ie.updateQueue=n,n.lastEffect=t.next=t):(s=n.lastEffect,s===null?n.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,n.lastEffect=t)),t}function dp(){return Mt().memoizedState}function zo(t,n,s,l){var c=dn();Ie.flags|=t,c.memoizedState=$s(1|n,s,void 0,l===void 0?null:l)}function Ea(t,n,s,l){var c=Mt();l=l===void 0?null:l;var u=void 0;if(Be!==null){var d=Be.memoizedState;if(u=d.destroy,l!==null&&lc(l,d.deps)){c.memoizedState=$s(n,s,u,l);return}}Ie.flags|=t,c.memoizedState=$s(1|n,s,u,l)}function wd(t,n){return zo(8390656,8,t,n)}function fc(t,n){return Ea(2048,8,t,n)}function gp(t,n){return Ea(4,2,t,n)}function pp(t,n){return Ea(4,4,t,n)}function mp(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function yp(t,n,s){return s=s!=null?s.concat([t]):null,Ea(4,4,mp.bind(null,n,t),s)}function hc(){}function vp(t,n){var s=Mt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&lc(n,l[1])?l[0]:(s.memoizedState=[t,n],t)}function wp(t,n){var s=Mt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&lc(n,l[1])?l[0]:(t=t(),s.memoizedState=[t,n],t)}function Sp(t,n,s){return Rr&21?(Yt(s,n)||(s=Ag(),Ie.lanes|=s,_r|=s,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,ct=!0),t.memoizedState=s)}function J1(t,n){var s=fe;fe=s!==0&&4>s?s:4,t(!0);var l=xl.transition;xl.transition={};try{t(!1),n()}finally{fe=s,xl.transition=l}}function Tp(){return Mt().memoizedState}function K1(t,n,s){var l=ir(t);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},kp(t))Ap(n,s);else if(s=Zg(t,n,s,l),s!==null){var c=rt();Gt(s,t,l,c),Ep(s,n,l)}}function W1(t,n,s){var l=ir(t),c={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(kp(t))Ap(n,c);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=n.lastRenderedReducer,u!==null))try{var d=n.lastRenderedState,m=u(d,s);if(c.hasEagerState=!0,c.eagerState=m,Yt(m,d)){var y=n.interleaved;y===null?(c.next=c,rc(n)):(c.next=y.next,y.next=c),n.interleaved=c;return}}catch{}finally{}s=Zg(t,n,c,l),s!==null&&(c=rt(),Gt(s,t,l,c),Ep(s,n,l))}}function kp(t){var n=t.alternate;return t===Ie||n!==null&&n===Ie}function Ap(t,n){ws=ua=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function Ep(t,n,s){if(s&4194240){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,Vu(t,s)}}var ca={readContext:bt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},q1={readContext:bt,useCallback:function(t,n){return dn().memoizedState=[t,n===void 0?null:n],t},useContext:bt,useEffect:wd,useImperativeHandle:function(t,n,s){return s=s!=null?s.concat([t]):null,zo(4194308,4,mp.bind(null,n,t),s)},useLayoutEffect:function(t,n){return zo(4194308,4,t,n)},useInsertionEffect:function(t,n){return zo(4,2,t,n)},useMemo:function(t,n){var s=dn();return n=n===void 0?null:n,t=t(),s.memoizedState=[t,n],t},useReducer:function(t,n,s){var l=dn();return n=s!==void 0?s(n):n,l.memoizedState=l.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},l.queue=t,t=t.dispatch=K1.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var n=dn();return t={current:t},n.memoizedState=t},useState:vd,useDebugValue:hc,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=vd(!1),n=t[0];return t=J1.bind(null,t[1]),dn().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,s){var l=Ie,c=dn();if(Ae){if(s===void 0)throw Error(L(407));s=s()}else{if(s=n(),Fe===null)throw Error(L(349));Rr&30||lp(l,n,s)}c.memoizedState=s;var u={value:s,getSnapshot:n};return c.queue=u,wd(cp.bind(null,l,u,t),[t]),l.flags|=2048,$s(9,up.bind(null,l,u,s,n),void 0,null),s},useId:function(){var t=dn(),n=Fe.identifierPrefix;if(Ae){var s=Dn,l=On;s=(l&~(1<<32-Ht(l)-1)).toString(32)+s,n=":"+n+"R"+s,s=Ms++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=V1++,n=":"+n+"r"+s.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},H1={readContext:bt,useCallback:vp,useContext:bt,useEffect:fc,useImperativeHandle:yp,useInsertionEffect:gp,useLayoutEffect:pp,useMemo:wp,useReducer:Pl,useRef:dp,useState:function(){return Pl(Bs)},useDebugValue:hc,useDeferredValue:function(t){var n=Mt();return Sp(n,Be.memoizedState,t)},useTransition:function(){var t=Pl(Bs)[0],n=Mt().memoizedState;return[t,n]},useMutableSource:op,useSyncExternalStore:ap,useId:Tp,unstable_isNewReconciler:!1},G1={readContext:bt,useCallback:vp,useContext:bt,useEffect:fc,useImperativeHandle:yp,useInsertionEffect:gp,useLayoutEffect:pp,useMemo:wp,useReducer:Ol,useRef:dp,useState:function(){return Ol(Bs)},useDebugValue:hc,useDeferredValue:function(t){var n=Mt();return Be===null?n.memoizedState=t:Sp(n,Be.memoizedState,t)},useTransition:function(){var t=Ol(Bs)[0],n=Mt().memoizedState;return[t,n]},useMutableSource:op,useSyncExternalStore:ap,useId:Tp,unstable_isNewReconciler:!1};function Ai(t,n){try{var s="",l=n;do s+=A0(l),l=l.return;while(l);var c=s}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:n,stack:c,digest:null}}function Dl(t,n,s){return{value:t,source:null,stack:s??null,digest:n??null}}function mu(t,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Y1=typeof WeakMap=="function"?WeakMap:Map;function Ip(t,n,s){s=Rn(-1,s),s.tag=3,s.payload={element:null};var l=n.value;return s.callback=function(){ha||(ha=!0,Cu=l),mu(t,n)},s}function Cp(t,n,s){s=Rn(-1,s),s.tag=3;var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var c=n.value;s.payload=function(){return l(c)},s.callback=function(){mu(t,n)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(s.callback=function(){mu(t,n),typeof l!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var d=n.stack;this.componentDidCatch(n.value,{componentStack:d!==null?d:""})}),s}function Sd(t,n,s){var l=t.pingCache;if(l===null){l=t.pingCache=new Y1;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(s)||(c.add(s),t=cw.bind(null,t,n,s),n.then(t,t))}function Td(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function kd(t,n,s,l,c){return t.mode&1?(t.flags|=65536,t.lanes=c,t):(t===n?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Rn(-1,1),n.tag=2,nr(s,n,1))),s.lanes|=1),t)}var Q1=Bn.ReactCurrentOwner,ct=!1;function nt(t,n,s,l){n.child=t===null?ip(n,null,s,l):Ti(n,t.child,s,l)}function Ad(t,n,s,l,c){s=s.render;var u=n.ref;return mi(n,c),l=uc(t,n,s,l,u,c),s=cc(),t!==null&&!ct?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,Mn(t,n,c)):(Ae&&s&&Qu(n),n.flags|=1,nt(t,n,l,c),n.child)}function Ed(t,n,s,l,c){if(t===null){var u=s.type;return typeof u=="function"&&!Sc(u)&&u.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=u,Np(t,n,u,l,c)):(t=Ko(s.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(u=t.child,!(t.lanes&c)){var d=u.memoizedProps;if(s=s.compare,s=s!==null?s:Os,s(d,l)&&t.ref===n.ref)return Mn(t,n,c)}return n.flags|=1,t=sr(u,l),t.ref=n.ref,t.return=n,n.child=t}function Np(t,n,s,l,c){if(t!==null){var u=t.memoizedProps;if(Os(u,l)&&t.ref===n.ref)if(ct=!1,n.pendingProps=l=u,(t.lanes&c)!==0)t.flags&131072&&(ct=!0);else return n.lanes=t.lanes,Mn(t,n,c)}return yu(t,n,s,l,c)}function xp(t,n,s){var l=n.pendingProps,c=l.children,u=t!==null?t.memoizedState:null;if(l.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(fi,St),St|=s;else{if(!(s&1073741824))return t=u!==null?u.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,me(fi,St),St|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=u!==null?u.baseLanes:s,me(fi,St),St|=l}else u!==null?(l=u.baseLanes|s,n.memoizedState=null):l=s,me(fi,St),St|=l;return nt(t,n,c,s),n.child}function Pp(t,n){var s=n.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function yu(t,n,s,l,c){var u=ht(s)?Or:Xe.current;return u=wi(n,u),mi(n,c),s=uc(t,n,s,l,u,c),l=cc(),t!==null&&!ct?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,Mn(t,n,c)):(Ae&&l&&Qu(n),n.flags|=1,nt(t,n,s,c),n.child)}function Id(t,n,s,l,c){if(ht(s)){var u=!0;na(n)}else u=!1;if(mi(n,c),n.stateNode===null)jo(t,n),np(n,s,l),pu(n,s,l,c),l=!0;else if(t===null){var d=n.stateNode,m=n.memoizedProps;d.props=m;var y=d.context,T=s.contextType;typeof T=="object"&&T!==null?T=bt(T):(T=ht(s)?Or:Xe.current,T=wi(n,T));var C=s.getDerivedStateFromProps,O=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function";O||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==l||y!==T)&&md(n,d,l,T),qn=!1;var x=n.memoizedState;d.state=x,aa(n,l,d,c),y=n.memoizedState,m!==l||x!==y||ft.current||qn?(typeof C=="function"&&(gu(n,s,C,l),y=n.memoizedState),(m=qn||pd(n,s,m,l,x,y,T))?(O||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=y),d.props=l,d.state=y,d.context=T,l=m):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,ep(t,n),m=n.memoizedProps,T=n.type===n.elementType?m:Kt(n.type,m),d.props=T,O=n.pendingProps,x=d.context,y=s.contextType,typeof y=="object"&&y!==null?y=bt(y):(y=ht(s)?Or:Xe.current,y=wi(n,y));var M=s.getDerivedStateFromProps;(C=typeof M=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==O||x!==y)&&md(n,d,l,y),qn=!1,x=n.memoizedState,d.state=x,aa(n,l,d,c);var B=n.memoizedState;m!==O||x!==B||ft.current||qn?(typeof M=="function"&&(gu(n,s,M,l),B=n.memoizedState),(T=qn||pd(n,s,T,l,x,B,y)||!1)?(C||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,B,y),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,B,y)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===t.memoizedProps&&x===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&x===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=B),d.props=l,d.state=B,d.context=y,l=T):(typeof d.componentDidUpdate!="function"||m===t.memoizedProps&&x===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&x===t.memoizedState||(n.flags|=1024),l=!1)}return vu(t,n,s,l,u,c)}function vu(t,n,s,l,c,u){Pp(t,n);var d=(n.flags&128)!==0;if(!l&&!d)return c&&cd(n,s,!1),Mn(t,n,u);l=n.stateNode,Q1.current=n;var m=d&&typeof s.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,t!==null&&d?(n.child=Ti(n,t.child,null,u),n.child=Ti(n,null,m,u)):nt(t,n,m,u),n.memoizedState=l.state,c&&cd(n,s,!0),n.child}function Op(t){var n=t.stateNode;n.pendingContext?ud(t,n.pendingContext,n.pendingContext!==n.context):n.context&&ud(t,n.context,!1),sc(t,n.containerInfo)}function Cd(t,n,s,l,c){return Si(),Zu(c),n.flags|=256,nt(t,n,s,l),n.child}var wu={dehydrated:null,treeContext:null,retryLane:0};function Su(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dp(t,n,s){var l=n.pendingProps,c=Ee.current,u=!1,d=(n.flags&128)!==0,m;if((m=d)||(m=t!==null&&t.memoizedState===null?!1:(c&2)!==0),m?(u=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),me(Ee,c&1),t===null)return hu(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(d=l.children,t=l.fallback,u?(l=n.mode,u=n.child,d={mode:"hidden",children:d},!(l&1)&&u!==null?(u.childLanes=0,u.pendingProps=d):u=Na(d,l,0,null),t=Pr(t,l,s,null),u.return=n,t.return=n,u.sibling=t,n.child=u,n.child.memoizedState=Su(s),n.memoizedState=wu,t):dc(n,d));if(c=t.memoizedState,c!==null&&(m=c.dehydrated,m!==null))return X1(t,n,d,l,m,c,s);if(u){u=l.fallback,d=n.mode,c=t.child,m=c.sibling;var y={mode:"hidden",children:l.children};return!(d&1)&&n.child!==c?(l=n.child,l.childLanes=0,l.pendingProps=y,n.deletions=null):(l=sr(c,y),l.subtreeFlags=c.subtreeFlags&14680064),m!==null?u=sr(m,u):(u=Pr(u,d,s,null),u.flags|=2),u.return=n,l.return=n,l.sibling=u,n.child=l,l=u,u=n.child,d=t.child.memoizedState,d=d===null?Su(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},u.memoizedState=d,u.childLanes=t.childLanes&~s,n.memoizedState=wu,l}return u=t.child,t=u.sibling,l=sr(u,{mode:"visible",children:l.children}),!(n.mode&1)&&(l.lanes=s),l.return=n,l.sibling=null,t!==null&&(s=n.deletions,s===null?(n.deletions=[t],n.flags|=16):s.push(t)),n.child=l,n.memoizedState=null,l}function dc(t,n){return n=Na({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Oo(t,n,s,l){return l!==null&&Zu(l),Ti(n,t.child,null,s),t=dc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function X1(t,n,s,l,c,u,d){if(s)return n.flags&256?(n.flags&=-257,l=Dl(Error(L(422))),Oo(t,n,d,l)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(u=l.fallback,c=n.mode,l=Na({mode:"visible",children:l.children},c,0,null),u=Pr(u,c,d,null),u.flags|=2,l.return=n,u.return=n,l.sibling=u,n.child=l,n.mode&1&&Ti(n,t.child,null,d),n.child.memoizedState=Su(d),n.memoizedState=wu,u);if(!(n.mode&1))return Oo(t,n,d,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var m=l.dgst;return l=m,u=Error(L(419)),l=Dl(u,l,void 0),Oo(t,n,d,l)}if(m=(d&t.childLanes)!==0,ct||m){if(l=Fe,l!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(l.suspendedLanes|d)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,bn(t,c),Gt(l,t,c,-1))}return wc(),l=Dl(Error(L(421))),Oo(t,n,d,l)}return c.data==="$?"?(n.flags|=128,n.child=t.child,n=fw.bind(null,t),c._reactRetry=n,null):(t=u.treeContext,Tt=tr(c.nextSibling),kt=n,Ae=!0,qt=null,t!==null&&(Dt[Rt++]=On,Dt[Rt++]=Dn,Dt[Rt++]=Dr,On=t.id,Dn=t.overflow,Dr=n),n=dc(n,l.children),n.flags|=4096,n)}function Nd(t,n,s){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),du(t.return,n,s)}function Rl(t,n,s,l,c){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c}:(u.isBackwards=n,u.rendering=null,u.renderingStartTime=0,u.last=l,u.tail=s,u.tailMode=c)}function Rp(t,n,s){var l=n.pendingProps,c=l.revealOrder,u=l.tail;if(nt(t,n,l.children,s),l=Ee.current,l&2)l=l&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nd(t,s,n);else if(t.tag===19)Nd(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}if(me(Ee,l),!(n.mode&1))n.memoizedState=null;else switch(c){case"forwards":for(s=n.child,c=null;s!==null;)t=s.alternate,t!==null&&la(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),Rl(n,!1,c,s,u);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&la(t)===null){n.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}Rl(n,!0,s,null,u);break;case"together":Rl(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function jo(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Mn(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),_r|=n.lanes,!(s&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(L(153));if(n.child!==null){for(t=n.child,s=sr(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=sr(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function Z1(t,n,s){switch(n.tag){case 3:Op(n),Si();break;case 5:sp(n);break;case 1:ht(n.type)&&na(n);break;case 4:sc(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,c=n.memoizedProps.value;me(sa,l._currentValue),l._currentValue=c;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(me(Ee,Ee.current&1),n.flags|=128,null):s&n.child.childLanes?Dp(t,n,s):(me(Ee,Ee.current&1),t=Mn(t,n,s),t!==null?t.sibling:null);me(Ee,Ee.current&1);break;case 19:if(l=(s&n.childLanes)!==0,t.flags&128){if(l)return Rp(t,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),me(Ee,Ee.current),l)break;return null;case 22:case 23:return n.lanes=0,xp(t,n,s)}return Mn(t,n,s)}var _p,Tu,Lp,bp;_p=function(t,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Tu=function(){};Lp=function(t,n,s,l){var c=t.memoizedProps;if(c!==l){t=n.stateNode,Nr(mn.current);var u=null;switch(s){case"input":c=Vl(t,c),l=Vl(t,l),u=[];break;case"select":c=Ce({},c,{value:void 0}),l=Ce({},l,{value:void 0}),u=[];break;case"textarea":c=Wl(t,c),l=Wl(t,l),u=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(t.onclick=ea)}Hl(s,l);var d;s=null;for(T in c)if(!l.hasOwnProperty(T)&&c.hasOwnProperty(T)&&c[T]!=null)if(T==="style"){var m=c[T];for(d in m)m.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(As.hasOwnProperty(T)?u||(u=[]):(u=u||[]).push(T,null));for(T in l){var y=l[T];if(m=c!=null?c[T]:void 0,l.hasOwnProperty(T)&&y!==m&&(y!=null||m!=null))if(T==="style")if(m){for(d in m)!m.hasOwnProperty(d)||y&&y.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in y)y.hasOwnProperty(d)&&m[d]!==y[d]&&(s||(s={}),s[d]=y[d])}else s||(u||(u=[]),u.push(T,s)),s=y;else T==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,m=m?m.__html:void 0,y!=null&&m!==y&&(u=u||[]).push(T,y)):T==="children"?typeof y!="string"&&typeof y!="number"||(u=u||[]).push(T,""+y):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(As.hasOwnProperty(T)?(y!=null&&T==="onScroll"&&ye("scroll",t),u||m===y||(u=[])):(u=u||[]).push(T,y))}s&&(u=u||[]).push("style",s);var T=u;(n.updateQueue=T)&&(n.flags|=4)}};bp=function(t,n,s,l){s!==l&&(n.flags|=4)};function ls(t,n){if(!Ae)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ye(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(n)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=s,n}function ew(t,n,s){var l=n.pendingProps;switch(Xu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(n),null;case 1:return ht(n.type)&&ta(),Ye(n),null;case 3:return l=n.stateNode,ki(),ve(ft),ve(Xe),ac(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(xo(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,qt!==null&&(Pu(qt),qt=null))),Tu(t,n),Ye(n),null;case 5:oc(n);var c=Nr(bs.current);if(s=n.type,t!==null&&n.stateNode!=null)Lp(t,n,s,l,c),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(L(166));return Ye(n),null}if(t=Nr(mn.current),xo(n)){l=n.stateNode,s=n.type;var u=n.memoizedProps;switch(l[gn]=n,l[_s]=u,t=(n.mode&1)!==0,s){case"dialog":ye("cancel",l),ye("close",l);break;case"iframe":case"object":case"embed":ye("load",l);break;case"video":case"audio":for(c=0;c<ds.length;c++)ye(ds[c],l);break;case"source":ye("error",l);break;case"img":case"image":case"link":ye("error",l),ye("load",l);break;case"details":ye("toggle",l);break;case"input":Mh(l,u),ye("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!u.multiple},ye("invalid",l);break;case"textarea":$h(l,u),ye("invalid",l)}Hl(s,u),c=null;for(var d in u)if(u.hasOwnProperty(d)){var m=u[d];d==="children"?typeof m=="string"?l.textContent!==m&&(u.suppressHydrationWarning!==!0&&No(l.textContent,m,t),c=["children",m]):typeof m=="number"&&l.textContent!==""+m&&(u.suppressHydrationWarning!==!0&&No(l.textContent,m,t),c=["children",""+m]):As.hasOwnProperty(d)&&m!=null&&d==="onScroll"&&ye("scroll",l)}switch(s){case"input":wo(l),Bh(l,u,!0);break;case"textarea":wo(l),Uh(l);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(l.onclick=ea)}l=c,n.updateQueue=l,l!==null&&(n.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lg(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof l.is=="string"?t=d.createElement(s,{is:l.is}):(t=d.createElement(s),s==="select"&&(d=t,l.multiple?d.multiple=!0:l.size&&(d.size=l.size))):t=d.createElementNS(t,s),t[gn]=n,t[_s]=l,_p(t,n,!1,!1),n.stateNode=t;e:{switch(d=Gl(s,l),s){case"dialog":ye("cancel",t),ye("close",t),c=l;break;case"iframe":case"object":case"embed":ye("load",t),c=l;break;case"video":case"audio":for(c=0;c<ds.length;c++)ye(ds[c],t);c=l;break;case"source":ye("error",t),c=l;break;case"img":case"image":case"link":ye("error",t),ye("load",t),c=l;break;case"details":ye("toggle",t),c=l;break;case"input":Mh(t,l),c=Vl(t,l),ye("invalid",t);break;case"option":c=l;break;case"select":t._wrapperState={wasMultiple:!!l.multiple},c=Ce({},l,{value:void 0}),ye("invalid",t);break;case"textarea":$h(t,l),c=Wl(t,l),ye("invalid",t);break;default:c=l}Hl(s,c),m=c;for(u in m)if(m.hasOwnProperty(u)){var y=m[u];u==="style"?fg(t,y):u==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&ug(t,y)):u==="children"?typeof y=="string"?(s!=="textarea"||y!=="")&&Es(t,y):typeof y=="number"&&Es(t,""+y):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(As.hasOwnProperty(u)?y!=null&&u==="onScroll"&&ye("scroll",t):y!=null&&Bu(t,u,y,d))}switch(s){case"input":wo(t),Bh(t,l,!1);break;case"textarea":wo(t),Uh(t);break;case"option":l.value!=null&&t.setAttribute("value",""+or(l.value));break;case"select":t.multiple=!!l.multiple,u=l.value,u!=null?hi(t,!!l.multiple,u,!1):l.defaultValue!=null&&hi(t,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=ea)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ye(n),null;case 6:if(t&&n.stateNode!=null)bp(t,n,t.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(L(166));if(s=Nr(bs.current),Nr(mn.current),xo(n)){if(l=n.stateNode,s=n.memoizedProps,l[gn]=n,(u=l.nodeValue!==s)&&(t=kt,t!==null))switch(t.tag){case 3:No(l.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(l.nodeValue,s,(t.mode&1)!==0)}u&&(n.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[gn]=n,n.stateNode=l}return Ye(n),null;case 13:if(ve(Ee),l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Tt!==null&&n.mode&1&&!(n.flags&128))Xg(),Si(),n.flags|=98560,u=!1;else if(u=xo(n),l!==null&&l.dehydrated!==null){if(t===null){if(!u)throw Error(L(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(L(317));u[gn]=n}else Si(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Ye(n),u=!1}else qt!==null&&(Pu(qt),qt=null),u=!0;if(!u)return n.flags&65536?n:null}return n.flags&128?(n.lanes=s,n):(l=l!==null,l!==(t!==null&&t.memoizedState!==null)&&l&&(n.child.flags|=8192,n.mode&1&&(t===null||Ee.current&1?$e===0&&($e=3):wc())),n.updateQueue!==null&&(n.flags|=4),Ye(n),null);case 4:return ki(),Tu(t,n),t===null&&Ds(n.stateNode.containerInfo),Ye(n),null;case 10:return nc(n.type._context),Ye(n),null;case 17:return ht(n.type)&&ta(),Ye(n),null;case 19:if(ve(Ee),u=n.memoizedState,u===null)return Ye(n),null;if(l=(n.flags&128)!==0,d=u.rendering,d===null)if(l)ls(u,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(d=la(t),d!==null){for(n.flags|=128,ls(u,!1),l=d.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=s,s=n.child;s!==null;)u=s,t=l,u.flags&=14680066,d=u.alternate,d===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=d.childLanes,u.lanes=d.lanes,u.child=d.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=d.memoizedProps,u.memoizedState=d.memoizedState,u.updateQueue=d.updateQueue,u.type=d.type,t=d.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return me(Ee,Ee.current&1|2),n.child}t=t.sibling}u.tail!==null&&De()>Ei&&(n.flags|=128,l=!0,ls(u,!1),n.lanes=4194304)}else{if(!l)if(t=la(d),t!==null){if(n.flags|=128,l=!0,s=t.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),ls(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!Ae)return Ye(n),null}else 2*De()-u.renderingStartTime>Ei&&s!==1073741824&&(n.flags|=128,l=!0,ls(u,!1),n.lanes=4194304);u.isBackwards?(d.sibling=n.child,n.child=d):(s=u.last,s!==null?s.sibling=d:n.child=d,u.last=d)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=De(),n.sibling=null,s=Ee.current,me(Ee,l?s&1|2:s&1),n):(Ye(n),null);case 22:case 23:return vc(),l=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==l&&(n.flags|=8192),l&&n.mode&1?St&1073741824&&(Ye(n),n.subtreeFlags&6&&(n.flags|=8192)):Ye(n),null;case 24:return null;case 25:return null}throw Error(L(156,n.tag))}function tw(t,n){switch(Xu(n),n.tag){case 1:return ht(n.type)&&ta(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ki(),ve(ft),ve(Xe),ac(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return oc(n),null;case 13:if(ve(Ee),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(L(340));Si()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ve(Ee),null;case 4:return ki(),null;case 10:return nc(n.type._context),null;case 22:case 23:return vc(),null;case 24:return null;default:return null}}var Do=!1,Qe=!1,nw=typeof WeakSet=="function"?WeakSet:Set,j=null;function ci(t,n){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){xe(t,n,l)}else s.current=null}function ku(t,n,s){try{s()}catch(l){xe(t,n,l)}}var xd=!1;function rw(t,n){if(su=Qo,t=Ug(),Yu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{s.nodeType,u.nodeType}catch{s=null;break e}var d=0,m=-1,y=-1,T=0,C=0,O=t,x=null;t:for(;;){for(var M;O!==s||c!==0&&O.nodeType!==3||(m=d+c),O!==u||l!==0&&O.nodeType!==3||(y=d+l),O.nodeType===3&&(d+=O.nodeValue.length),(M=O.firstChild)!==null;)x=O,O=M;for(;;){if(O===t)break t;if(x===s&&++T===c&&(m=d),x===u&&++C===l&&(y=d),(M=O.nextSibling)!==null)break;O=x,x=O.parentNode}O=M}s=m===-1||y===-1?null:{start:m,end:y}}else s=null}s=s||{start:0,end:0}}else s=null;for(ou={focusedElem:t,selectionRange:s},Qo=!1,j=n;j!==null;)if(n=j,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,j=t;else for(;j!==null;){n=j;try{var B=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var U=B.memoizedProps,ce=B.memoizedState,k=n.stateNode,w=k.getSnapshotBeforeUpdate(n.elementType===n.type?U:Kt(n.type,U),ce);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=n.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(_){xe(n,n.return,_)}if(t=n.sibling,t!==null){t.return=n.return,j=t;break}j=n.return}return B=xd,xd=!1,B}function Ss(t,n,s){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&t)===t){var u=c.destroy;c.destroy=void 0,u!==void 0&&ku(n,s,u)}c=c.next}while(c!==l)}}function Ia(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var l=s.create;s.destroy=l()}s=s.next}while(s!==n)}}function Au(t){var n=t.ref;if(n!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof n=="function"?n(t):n.current=t}}function Mp(t){var n=t.alternate;n!==null&&(t.alternate=null,Mp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[gn],delete n[_s],delete n[uu],delete n[U1],delete n[F1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bp(t){return t.tag===5||t.tag===3||t.tag===4}function Pd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eu(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(t,n):s.insertBefore(t,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(t,s)):(n=s,n.appendChild(t)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=ea));else if(l!==4&&(t=t.child,t!==null))for(Eu(t,n,s),t=t.sibling;t!==null;)Eu(t,n,s),t=t.sibling}function Iu(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(l!==4&&(t=t.child,t!==null))for(Iu(t,n,s),t=t.sibling;t!==null;)Iu(t,n,s),t=t.sibling}var je=null,Wt=!1;function Kn(t,n,s){for(s=s.child;s!==null;)$p(t,n,s),s=s.sibling}function $p(t,n,s){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ya,s)}catch{}switch(s.tag){case 5:Qe||ci(s,n);case 6:var l=je,c=Wt;je=null,Kn(t,n,s),je=l,Wt=c,je!==null&&(Wt?(t=je,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):je.removeChild(s.stateNode));break;case 18:je!==null&&(Wt?(t=je,s=s.stateNode,t.nodeType===8?Il(t.parentNode,s):t.nodeType===1&&Il(t,s),xs(t)):Il(je,s.stateNode));break;case 4:l=je,c=Wt,je=s.stateNode.containerInfo,Wt=!0,Kn(t,n,s),je=l,Wt=c;break;case 0:case 11:case 14:case 15:if(!Qe&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var u=c,d=u.destroy;u=u.tag,d!==void 0&&(u&2||u&4)&&ku(s,n,d),c=c.next}while(c!==l)}Kn(t,n,s);break;case 1:if(!Qe&&(ci(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(m){xe(s,n,m)}Kn(t,n,s);break;case 21:Kn(t,n,s);break;case 22:s.mode&1?(Qe=(l=Qe)||s.memoizedState!==null,Kn(t,n,s),Qe=l):Kn(t,n,s);break;default:Kn(t,n,s)}}function Od(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new nw),n.forEach(function(l){var c=hw.bind(null,t,l);s.has(l)||(s.add(l),l.then(c,c))})}}function Jt(t,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];try{var u=t,d=n,m=d;e:for(;m!==null;){switch(m.tag){case 5:je=m.stateNode,Wt=!1;break e;case 3:je=m.stateNode.containerInfo,Wt=!0;break e;case 4:je=m.stateNode.containerInfo,Wt=!0;break e}m=m.return}if(je===null)throw Error(L(160));$p(u,d,c),je=null,Wt=!1;var y=c.alternate;y!==null&&(y.return=null),c.return=null}catch(T){xe(c,n,T)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Up(n,t),n=n.sibling}function Up(t,n){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(n,t),hn(t),l&4){try{Ss(3,t,t.return),Ia(3,t)}catch(U){xe(t,t.return,U)}try{Ss(5,t,t.return)}catch(U){xe(t,t.return,U)}}break;case 1:Jt(n,t),hn(t),l&512&&s!==null&&ci(s,s.return);break;case 5:if(Jt(n,t),hn(t),l&512&&s!==null&&ci(s,s.return),t.flags&32){var c=t.stateNode;try{Es(c,"")}catch(U){xe(t,t.return,U)}}if(l&4&&(c=t.stateNode,c!=null)){var u=t.memoizedProps,d=s!==null?s.memoizedProps:u,m=t.type,y=t.updateQueue;if(t.updateQueue=null,y!==null)try{m==="input"&&u.type==="radio"&&u.name!=null&&og(c,u),Gl(m,d);var T=Gl(m,u);for(d=0;d<y.length;d+=2){var C=y[d],O=y[d+1];C==="style"?fg(c,O):C==="dangerouslySetInnerHTML"?ug(c,O):C==="children"?Es(c,O):Bu(c,C,O,T)}switch(m){case"input":Jl(c,u);break;case"textarea":ag(c,u);break;case"select":var x=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var M=u.value;M!=null?hi(c,!!u.multiple,M,!1):x!==!!u.multiple&&(u.defaultValue!=null?hi(c,!!u.multiple,u.defaultValue,!0):hi(c,!!u.multiple,u.multiple?[]:"",!1))}c[_s]=u}catch(U){xe(t,t.return,U)}}break;case 6:if(Jt(n,t),hn(t),l&4){if(t.stateNode===null)throw Error(L(162));c=t.stateNode,u=t.memoizedProps;try{c.nodeValue=u}catch(U){xe(t,t.return,U)}}break;case 3:if(Jt(n,t),hn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{xs(n.containerInfo)}catch(U){xe(t,t.return,U)}break;case 4:Jt(n,t),hn(t);break;case 13:Jt(n,t),hn(t),c=t.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(mc=De())),l&4&&Od(t);break;case 22:if(C=s!==null&&s.memoizedState!==null,t.mode&1?(Qe=(T=Qe)||C,Jt(n,t),Qe=T):Jt(n,t),hn(t),l&8192){if(T=t.memoizedState!==null,(t.stateNode.isHidden=T)&&!C&&t.mode&1)for(j=t,C=t.child;C!==null;){for(O=j=C;j!==null;){switch(x=j,M=x.child,x.tag){case 0:case 11:case 14:case 15:Ss(4,x,x.return);break;case 1:ci(x,x.return);var B=x.stateNode;if(typeof B.componentWillUnmount=="function"){l=x,s=x.return;try{n=l,B.props=n.memoizedProps,B.state=n.memoizedState,B.componentWillUnmount()}catch(U){xe(l,s,U)}}break;case 5:ci(x,x.return);break;case 22:if(x.memoizedState!==null){Rd(O);continue}}M!==null?(M.return=x,j=M):Rd(O)}C=C.sibling}e:for(C=null,O=t;;){if(O.tag===5){if(C===null){C=O;try{c=O.stateNode,T?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(m=O.stateNode,y=O.memoizedProps.style,d=y!=null&&y.hasOwnProperty("display")?y.display:null,m.style.display=cg("display",d))}catch(U){xe(t,t.return,U)}}}else if(O.tag===6){if(C===null)try{O.stateNode.nodeValue=T?"":O.memoizedProps}catch(U){xe(t,t.return,U)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===t)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===t)break e;for(;O.sibling===null;){if(O.return===null||O.return===t)break e;C===O&&(C=null),O=O.return}C===O&&(C=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:Jt(n,t),hn(t),l&4&&Od(t);break;case 21:break;default:Jt(n,t),hn(t)}}function hn(t){var n=t.flags;if(n&2){try{e:{for(var s=t.return;s!==null;){if(Bp(s)){var l=s;break e}s=s.return}throw Error(L(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(Es(c,""),l.flags&=-33);var u=Pd(t);Iu(t,u,c);break;case 3:case 4:var d=l.stateNode.containerInfo,m=Pd(t);Eu(t,m,d);break;default:throw Error(L(161))}}catch(y){xe(t,t.return,y)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function iw(t,n,s){j=t,Fp(t)}function Fp(t,n,s){for(var l=(t.mode&1)!==0;j!==null;){var c=j,u=c.child;if(c.tag===22&&l){var d=c.memoizedState!==null||Do;if(!d){var m=c.alternate,y=m!==null&&m.memoizedState!==null||Qe;m=Do;var T=Qe;if(Do=d,(Qe=y)&&!T)for(j=c;j!==null;)d=j,y=d.child,d.tag===22&&d.memoizedState!==null?_d(c):y!==null?(y.return=d,j=y):_d(c);for(;u!==null;)j=u,Fp(u),u=u.sibling;j=c,Do=m,Qe=T}Dd(t)}else c.subtreeFlags&8772&&u!==null?(u.return=c,j=u):Dd(t)}}function Dd(t){for(;j!==null;){var n=j;if(n.flags&8772){var s=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Qe||Ia(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Qe)if(s===null)l.componentDidMount();else{var c=n.elementType===n.type?s.memoizedProps:Kt(n.type,s.memoizedProps);l.componentDidUpdate(c,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var u=n.updateQueue;u!==null&&gd(n,u,l);break;case 3:var d=n.updateQueue;if(d!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}gd(n,d,s)}break;case 5:var m=n.stateNode;if(s===null&&n.flags&4){s=m;var y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&s.focus();break;case"img":y.src&&(s.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var T=n.alternate;if(T!==null){var C=T.memoizedState;if(C!==null){var O=C.dehydrated;O!==null&&xs(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Qe||n.flags&512&&Au(n)}catch(x){xe(n,n.return,x)}}if(n===t){j=null;break}if(s=n.sibling,s!==null){s.return=n.return,j=s;break}j=n.return}}function Rd(t){for(;j!==null;){var n=j;if(n===t){j=null;break}var s=n.sibling;if(s!==null){s.return=n.return,j=s;break}j=n.return}}function _d(t){for(;j!==null;){var n=j;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Ia(4,n)}catch(y){xe(n,s,y)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var c=n.return;try{l.componentDidMount()}catch(y){xe(n,c,y)}}var u=n.return;try{Au(n)}catch(y){xe(n,u,y)}break;case 5:var d=n.return;try{Au(n)}catch(y){xe(n,d,y)}}}catch(y){xe(n,n.return,y)}if(n===t){j=null;break}var m=n.sibling;if(m!==null){m.return=n.return,j=m;break}j=n.return}}var sw=Math.ceil,fa=Bn.ReactCurrentDispatcher,gc=Bn.ReactCurrentOwner,Lt=Bn.ReactCurrentBatchConfig,ae=0,Fe=null,be=null,Ve=0,St=0,fi=ur(0),$e=0,Us=null,_r=0,Ca=0,pc=0,Ts=null,lt=null,mc=0,Ei=1/0,xn=null,ha=!1,Cu=null,rr=null,Ro=!1,Qn=null,da=0,ks=0,Nu=null,Vo=-1,Jo=0;function rt(){return ae&6?De():Vo!==-1?Vo:Vo=De()}function ir(t){return t.mode&1?ae&2&&Ve!==0?Ve&-Ve:j1.transition!==null?(Jo===0&&(Jo=Ag()),Jo):(t=fe,t!==0||(t=window.event,t=t===void 0?16:Og(t.type)),t):1}function Gt(t,n,s,l){if(50<ks)throw ks=0,Nu=null,Error(L(185));zs(t,s,l),(!(ae&2)||t!==Fe)&&(t===Fe&&(!(ae&2)&&(Ca|=s),$e===4&&Gn(t,Ve)),dt(t,l),s===1&&ae===0&&!(n.mode&1)&&(Ei=De()+500,ka&&cr()))}function dt(t,n){var s=t.callbackNode;j0(t,n);var l=Yo(t,t===Fe?Ve:0);if(l===0)s!==null&&jh(s),t.callbackNode=null,t.callbackPriority=0;else if(n=l&-l,t.callbackPriority!==n){if(s!=null&&jh(s),n===1)t.tag===0?z1(Ld.bind(null,t)):Gg(Ld.bind(null,t)),B1(function(){!(ae&6)&&cr()}),s=null;else{switch(Eg(l)){case 1:s=ju;break;case 4:s=Tg;break;case 16:s=Go;break;case 536870912:s=kg;break;default:s=Go}s=Hp(s,zp.bind(null,t))}t.callbackPriority=n,t.callbackNode=s}}function zp(t,n){if(Vo=-1,Jo=0,ae&6)throw Error(L(327));var s=t.callbackNode;if(yi()&&t.callbackNode!==s)return null;var l=Yo(t,t===Fe?Ve:0);if(l===0)return null;if(l&30||l&t.expiredLanes||n)n=ga(t,l);else{n=l;var c=ae;ae|=2;var u=Vp();(Fe!==t||Ve!==n)&&(xn=null,Ei=De()+500,xr(t,n));do try{lw();break}catch(m){jp(t,m)}while(1);tc(),fa.current=u,ae=c,be!==null?n=0:(Fe=null,Ve=0,n=$e)}if(n!==0){if(n===2&&(c=eu(t),c!==0&&(l=c,n=xu(t,c))),n===1)throw s=Us,xr(t,0),Gn(t,l),dt(t,De()),s;if(n===6)Gn(t,l);else{if(c=t.current.alternate,!(l&30)&&!ow(c)&&(n=ga(t,l),n===2&&(u=eu(t),u!==0&&(l=u,n=xu(t,u))),n===1))throw s=Us,xr(t,0),Gn(t,l),dt(t,De()),s;switch(t.finishedWork=c,t.finishedLanes=l,n){case 0:case 1:throw Error(L(345));case 2:Er(t,lt,xn);break;case 3:if(Gn(t,l),(l&130023424)===l&&(n=mc+500-De(),10<n)){if(Yo(t,0)!==0)break;if(c=t.suspendedLanes,(c&l)!==l){rt(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=lu(Er.bind(null,t,lt,xn),n);break}Er(t,lt,xn);break;case 4:if(Gn(t,l),(l&4194240)===l)break;for(n=t.eventTimes,c=-1;0<l;){var d=31-Ht(l);u=1<<d,d=n[d],d>c&&(c=d),l&=~u}if(l=c,l=De()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*sw(l/1960))-l,10<l){t.timeoutHandle=lu(Er.bind(null,t,lt,xn),l);break}Er(t,lt,xn);break;case 5:Er(t,lt,xn);break;default:throw Error(L(329))}}}return dt(t,De()),t.callbackNode===s?zp.bind(null,t):null}function xu(t,n){var s=Ts;return t.current.memoizedState.isDehydrated&&(xr(t,n).flags|=256),t=ga(t,n),t!==2&&(n=lt,lt=s,n!==null&&Pu(n)),t}function Pu(t){lt===null?lt=t:lt.push.apply(lt,t)}function ow(t){for(var n=t;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var c=s[l],u=c.getSnapshot;c=c.value;try{if(!Yt(u(),c))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Gn(t,n){for(n&=~pc,n&=~Ca,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var s=31-Ht(n),l=1<<s;t[s]=-1,n&=~l}}function Ld(t){if(ae&6)throw Error(L(327));yi();var n=Yo(t,0);if(!(n&1))return dt(t,De()),null;var s=ga(t,n);if(t.tag!==0&&s===2){var l=eu(t);l!==0&&(n=l,s=xu(t,l))}if(s===1)throw s=Us,xr(t,0),Gn(t,n),dt(t,De()),s;if(s===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Er(t,lt,xn),dt(t,De()),null}function yc(t,n){var s=ae;ae|=1;try{return t(n)}finally{ae=s,ae===0&&(Ei=De()+500,ka&&cr())}}function Lr(t){Qn!==null&&Qn.tag===0&&!(ae&6)&&yi();var n=ae;ae|=1;var s=Lt.transition,l=fe;try{if(Lt.transition=null,fe=1,t)return t()}finally{fe=l,Lt.transition=s,ae=n,!(ae&6)&&cr()}}function vc(){St=fi.current,ve(fi)}function xr(t,n){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,M1(s)),be!==null)for(s=be.return;s!==null;){var l=s;switch(Xu(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ta();break;case 3:ki(),ve(ft),ve(Xe),ac();break;case 5:oc(l);break;case 4:ki();break;case 13:ve(Ee);break;case 19:ve(Ee);break;case 10:nc(l.type._context);break;case 22:case 23:vc()}s=s.return}if(Fe=t,be=t=sr(t.current,null),Ve=St=n,$e=0,Us=null,pc=Ca=_r=0,lt=Ts=null,Cr!==null){for(n=0;n<Cr.length;n++)if(s=Cr[n],l=s.interleaved,l!==null){s.interleaved=null;var c=l.next,u=s.pending;if(u!==null){var d=u.next;u.next=c,l.next=d}s.pending=l}Cr=null}return t}function jp(t,n){do{var s=be;try{if(tc(),Fo.current=ca,ua){for(var l=Ie.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}ua=!1}if(Rr=0,Ue=Be=Ie=null,ws=!1,Ms=0,gc.current=null,s===null||s.return===null){$e=1,Us=n,be=null;break}e:{var u=t,d=s.return,m=s,y=n;if(n=Ve,m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var T=y,C=m,O=C.tag;if(!(C.mode&1)&&(O===0||O===11||O===15)){var x=C.alternate;x?(C.updateQueue=x.updateQueue,C.memoizedState=x.memoizedState,C.lanes=x.lanes):(C.updateQueue=null,C.memoizedState=null)}var M=Td(d);if(M!==null){M.flags&=-257,kd(M,d,m,u,n),M.mode&1&&Sd(u,T,n),n=M,y=T;var B=n.updateQueue;if(B===null){var U=new Set;U.add(y),n.updateQueue=U}else B.add(y);break e}else{if(!(n&1)){Sd(u,T,n),wc();break e}y=Error(L(426))}}else if(Ae&&m.mode&1){var ce=Td(d);if(ce!==null){!(ce.flags&65536)&&(ce.flags|=256),kd(ce,d,m,u,n),Zu(Ai(y,m));break e}}u=y=Ai(y,m),$e!==4&&($e=2),Ts===null?Ts=[u]:Ts.push(u),u=d;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n;var k=Ip(u,y,n);dd(u,k);break e;case 1:m=y;var w=u.type,A=u.stateNode;if(!(u.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(rr===null||!rr.has(A)))){u.flags|=65536,n&=-n,u.lanes|=n;var _=Cp(u,m,n);dd(u,_);break e}}u=u.return}while(u!==null)}Kp(s)}catch(z){n=z,be===s&&s!==null&&(be=s=s.return);continue}break}while(1)}function Vp(){var t=fa.current;return fa.current=ca,t===null?ca:t}function wc(){($e===0||$e===3||$e===2)&&($e=4),Fe===null||!(_r&268435455)&&!(Ca&268435455)||Gn(Fe,Ve)}function ga(t,n){var s=ae;ae|=2;var l=Vp();(Fe!==t||Ve!==n)&&(xn=null,xr(t,n));do try{aw();break}catch(c){jp(t,c)}while(1);if(tc(),ae=s,fa.current=l,be!==null)throw Error(L(261));return Fe=null,Ve=0,$e}function aw(){for(;be!==null;)Jp(be)}function lw(){for(;be!==null&&!_0();)Jp(be)}function Jp(t){var n=qp(t.alternate,t,St);t.memoizedProps=t.pendingProps,n===null?Kp(t):be=n,gc.current=null}function Kp(t){var n=t;do{var s=n.alternate;if(t=n.return,n.flags&32768){if(s=tw(s,n),s!==null){s.flags&=32767,be=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,be=null;return}}else if(s=ew(s,n,St),s!==null){be=s;return}if(n=n.sibling,n!==null){be=n;return}be=n=t}while(n!==null);$e===0&&($e=5)}function Er(t,n,s){var l=fe,c=Lt.transition;try{Lt.transition=null,fe=1,uw(t,n,s,l)}finally{Lt.transition=c,fe=l}return null}function uw(t,n,s,l){do yi();while(Qn!==null);if(ae&6)throw Error(L(327));s=t.finishedWork;var c=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var u=s.lanes|s.childLanes;if(V0(t,u),t===Fe&&(be=Fe=null,Ve=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ro||(Ro=!0,Hp(Go,function(){return yi(),null})),u=(s.flags&15990)!==0,s.subtreeFlags&15990||u){u=Lt.transition,Lt.transition=null;var d=fe;fe=1;var m=ae;ae|=4,gc.current=null,rw(t,s),Up(s,t),P1(ou),Qo=!!su,ou=su=null,t.current=s,iw(s),L0(),ae=m,fe=d,Lt.transition=u}else t.current=s;if(Ro&&(Ro=!1,Qn=t,da=c),u=t.pendingLanes,u===0&&(rr=null),B0(s.stateNode),dt(t,De()),n!==null)for(l=t.onRecoverableError,s=0;s<n.length;s++)c=n[s],l(c.value,{componentStack:c.stack,digest:c.digest});if(ha)throw ha=!1,t=Cu,Cu=null,t;return da&1&&t.tag!==0&&yi(),u=t.pendingLanes,u&1?t===Nu?ks++:(ks=0,Nu=t):ks=0,cr(),null}function yi(){if(Qn!==null){var t=Eg(da),n=Lt.transition,s=fe;try{if(Lt.transition=null,fe=16>t?16:t,Qn===null)var l=!1;else{if(t=Qn,Qn=null,da=0,ae&6)throw Error(L(331));var c=ae;for(ae|=4,j=t.current;j!==null;){var u=j,d=u.child;if(j.flags&16){var m=u.deletions;if(m!==null){for(var y=0;y<m.length;y++){var T=m[y];for(j=T;j!==null;){var C=j;switch(C.tag){case 0:case 11:case 15:Ss(8,C,u)}var O=C.child;if(O!==null)O.return=C,j=O;else for(;j!==null;){C=j;var x=C.sibling,M=C.return;if(Mp(C),C===T){j=null;break}if(x!==null){x.return=M,j=x;break}j=M}}}var B=u.alternate;if(B!==null){var U=B.child;if(U!==null){B.child=null;do{var ce=U.sibling;U.sibling=null,U=ce}while(U!==null)}}j=u}}if(u.subtreeFlags&2064&&d!==null)d.return=u,j=d;else e:for(;j!==null;){if(u=j,u.flags&2048)switch(u.tag){case 0:case 11:case 15:Ss(9,u,u.return)}var k=u.sibling;if(k!==null){k.return=u.return,j=k;break e}j=u.return}}var w=t.current;for(j=w;j!==null;){d=j;var A=d.child;if(d.subtreeFlags&2064&&A!==null)A.return=d,j=A;else e:for(d=w;j!==null;){if(m=j,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:Ia(9,m)}}catch(z){xe(m,m.return,z)}if(m===d){j=null;break e}var _=m.sibling;if(_!==null){_.return=m.return,j=_;break e}j=m.return}}if(ae=c,cr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ya,t)}catch{}l=!0}return l}finally{fe=s,Lt.transition=n}}return!1}function bd(t,n,s){n=Ai(s,n),n=Ip(t,n,1),t=nr(t,n,1),n=rt(),t!==null&&(zs(t,1,n),dt(t,n))}function xe(t,n,s){if(t.tag===3)bd(t,t,s);else for(;n!==null;){if(n.tag===3){bd(n,t,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(rr===null||!rr.has(l))){t=Ai(s,t),t=Cp(n,t,1),n=nr(n,t,1),t=rt(),n!==null&&(zs(n,1,t),dt(n,t));break}}n=n.return}}function cw(t,n,s){var l=t.pingCache;l!==null&&l.delete(n),n=rt(),t.pingedLanes|=t.suspendedLanes&s,Fe===t&&(Ve&s)===s&&($e===4||$e===3&&(Ve&130023424)===Ve&&500>De()-mc?xr(t,0):pc|=s),dt(t,n)}function Wp(t,n){n===0&&(t.mode&1?(n=ko,ko<<=1,!(ko&130023424)&&(ko=4194304)):n=1);var s=rt();t=bn(t,n),t!==null&&(zs(t,n,s),dt(t,s))}function fw(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Wp(t,s)}function hw(t,n){var s=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=t.stateNode;break;default:throw Error(L(314))}l!==null&&l.delete(n),Wp(t,s)}var qp;qp=function(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps||ft.current)ct=!0;else{if(!(t.lanes&s)&&!(n.flags&128))return ct=!1,Z1(t,n,s);ct=!!(t.flags&131072)}else ct=!1,Ae&&n.flags&1048576&&Yg(n,ia,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;jo(t,n),t=n.pendingProps;var c=wi(n,Xe.current);mi(n,s),c=uc(null,n,l,t,c,s);var u=cc();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ht(l)?(u=!0,na(n)):u=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,ic(n),c.updater=Aa,n.stateNode=c,c._reactInternals=n,pu(n,l,t,s),n=vu(null,n,l,!0,u,s)):(n.tag=0,Ae&&u&&Qu(n),nt(null,n,c,s),n=n.child),n;case 16:l=n.elementType;e:{switch(jo(t,n),t=n.pendingProps,c=l._init,l=c(l._payload),n.type=l,c=n.tag=gw(l),t=Kt(l,t),c){case 0:n=yu(null,n,l,t,s);break e;case 1:n=Id(null,n,l,t,s);break e;case 11:n=Ad(null,n,l,t,s);break e;case 14:n=Ed(null,n,l,Kt(l.type,t),s);break e}throw Error(L(306,l,""))}return n;case 0:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Kt(l,c),yu(t,n,l,c,s);case 1:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Kt(l,c),Id(t,n,l,c,s);case 3:e:{if(Op(n),t===null)throw Error(L(387));l=n.pendingProps,u=n.memoizedState,c=u.element,ep(t,n),aa(n,l,null,s);var d=n.memoizedState;if(l=d.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},n.updateQueue.baseState=u,n.memoizedState=u,n.flags&256){c=Ai(Error(L(423)),n),n=Cd(t,n,l,s,c);break e}else if(l!==c){c=Ai(Error(L(424)),n),n=Cd(t,n,l,s,c);break e}else for(Tt=tr(n.stateNode.containerInfo.firstChild),kt=n,Ae=!0,qt=null,s=ip(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Si(),l===c){n=Mn(t,n,s);break e}nt(t,n,l,s)}n=n.child}return n;case 5:return sp(n),t===null&&hu(n),l=n.type,c=n.pendingProps,u=t!==null?t.memoizedProps:null,d=c.children,au(l,c)?d=null:u!==null&&au(l,u)&&(n.flags|=32),Pp(t,n),nt(t,n,d,s),n.child;case 6:return t===null&&hu(n),null;case 13:return Dp(t,n,s);case 4:return sc(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Ti(n,null,l,s):nt(t,n,l,s),n.child;case 11:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Kt(l,c),Ad(t,n,l,c,s);case 7:return nt(t,n,n.pendingProps,s),n.child;case 8:return nt(t,n,n.pendingProps.children,s),n.child;case 12:return nt(t,n,n.pendingProps.children,s),n.child;case 10:e:{if(l=n.type._context,c=n.pendingProps,u=n.memoizedProps,d=c.value,me(sa,l._currentValue),l._currentValue=d,u!==null)if(Yt(u.value,d)){if(u.children===c.children&&!ft.current){n=Mn(t,n,s);break e}}else for(u=n.child,u!==null&&(u.return=n);u!==null;){var m=u.dependencies;if(m!==null){d=u.child;for(var y=m.firstContext;y!==null;){if(y.context===l){if(u.tag===1){y=Rn(-1,s&-s),y.tag=2;var T=u.updateQueue;if(T!==null){T=T.shared;var C=T.pending;C===null?y.next=y:(y.next=C.next,C.next=y),T.pending=y}}u.lanes|=s,y=u.alternate,y!==null&&(y.lanes|=s),du(u.return,s,n),m.lanes|=s;break}y=y.next}}else if(u.tag===10)d=u.type===n.type?null:u.child;else if(u.tag===18){if(d=u.return,d===null)throw Error(L(341));d.lanes|=s,m=d.alternate,m!==null&&(m.lanes|=s),du(d,s,n),d=u.sibling}else d=u.child;if(d!==null)d.return=u;else for(d=u;d!==null;){if(d===n){d=null;break}if(u=d.sibling,u!==null){u.return=d.return,d=u;break}d=d.return}u=d}nt(t,n,c.children,s),n=n.child}return n;case 9:return c=n.type,l=n.pendingProps.children,mi(n,s),c=bt(c),l=l(c),n.flags|=1,nt(t,n,l,s),n.child;case 14:return l=n.type,c=Kt(l,n.pendingProps),c=Kt(l.type,c),Ed(t,n,l,c,s);case 15:return Np(t,n,n.type,n.pendingProps,s);case 17:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Kt(l,c),jo(t,n),n.tag=1,ht(l)?(t=!0,na(n)):t=!1,mi(n,s),np(n,l,c),pu(n,l,c,s),vu(null,n,l,!0,t,s);case 19:return Rp(t,n,s);case 22:return xp(t,n,s)}throw Error(L(156,n.tag))};function Hp(t,n){return Sg(t,n)}function dw(t,n,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(t,n,s,l){return new dw(t,n,s,l)}function Sc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gw(t){if(typeof t=="function")return Sc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uu)return 11;if(t===Fu)return 14}return 2}function sr(t,n){var s=t.alternate;return s===null?(s=_t(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ko(t,n,s,l,c,u){var d=2;if(l=t,typeof t=="function")Sc(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case ti:return Pr(s.children,c,u,n);case $u:d=8,c|=8;break;case Ul:return t=_t(12,s,n,c|2),t.elementType=Ul,t.lanes=u,t;case Fl:return t=_t(13,s,n,c),t.elementType=Fl,t.lanes=u,t;case zl:return t=_t(19,s,n,c),t.elementType=zl,t.lanes=u,t;case rg:return Na(s,c,u,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tg:d=10;break e;case ng:d=9;break e;case Uu:d=11;break e;case Fu:d=14;break e;case Wn:d=16,l=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return n=_t(d,s,n,c),n.elementType=t,n.type=l,n.lanes=u,n}function Pr(t,n,s,l){return t=_t(7,t,l,n),t.lanes=s,t}function Na(t,n,s,l){return t=_t(22,t,l,n),t.elementType=rg,t.lanes=s,t.stateNode={isHidden:!1},t}function _l(t,n,s){return t=_t(6,t,null,n),t.lanes=s,t}function Ll(t,n,s){return n=_t(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function pw(t,n,s,l,c){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gl(0),this.expirationTimes=gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gl(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Tc(t,n,s,l,c,u,d,m,y){return t=new pw(t,n,s,m,y),n===1?(n=1,u===!0&&(n|=8)):n=0,u=_t(3,null,null,n),t.current=u,u.stateNode=t,u.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ic(u),t}function mw(t,n,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ei,key:l==null?null:""+l,children:t,containerInfo:n,implementation:s}}function Gp(t){if(!t)return ar;t=t._reactInternals;e:{if(Mr(t)!==t||t.tag!==1)throw Error(L(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ht(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(L(171))}if(t.tag===1){var s=t.type;if(ht(s))return Hg(t,s,n)}return n}function Yp(t,n,s,l,c,u,d,m,y){return t=Tc(s,l,!0,t,c,u,d,m,y),t.context=Gp(null),s=t.current,l=rt(),c=ir(s),u=Rn(l,c),u.callback=n??null,nr(s,u,c),t.current.lanes=c,zs(t,c,l),dt(t,l),t}function xa(t,n,s,l){var c=n.current,u=rt(),d=ir(c);return s=Gp(s),n.context===null?n.context=s:n.pendingContext=s,n=Rn(u,d),n.payload={element:t},l=l===void 0?null:l,l!==null&&(n.callback=l),t=nr(c,n,d),t!==null&&(Gt(t,c,d,u),Uo(t,c,d)),d}function pa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Md(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function kc(t,n){Md(t,n),(t=t.alternate)&&Md(t,n)}function yw(){return null}var Qp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ac(t){this._internalRoot=t}Pa.prototype.render=Ac.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(L(409));xa(t,n,null,null)};Pa.prototype.unmount=Ac.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Lr(function(){xa(null,t,null,null)}),n[Ln]=null}};function Pa(t){this._internalRoot=t}Pa.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ng();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Hn.length&&n!==0&&n<Hn[s].priority;s++);Hn.splice(s,0,t),s===0&&Pg(t)}};function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bd(){}function vw(t,n,s,l,c){if(c){if(typeof l=="function"){var u=l;l=function(){var T=pa(d);u.call(T)}}var d=Yp(n,l,t,0,null,!1,!1,"",Bd);return t._reactRootContainer=d,t[Ln]=d.current,Ds(t.nodeType===8?t.parentNode:t),Lr(),d}for(;c=t.lastChild;)t.removeChild(c);if(typeof l=="function"){var m=l;l=function(){var T=pa(y);m.call(T)}}var y=Tc(t,0,!1,null,null,!1,!1,"",Bd);return t._reactRootContainer=y,t[Ln]=y.current,Ds(t.nodeType===8?t.parentNode:t),Lr(function(){xa(n,y,s,l)}),y}function Da(t,n,s,l,c){var u=s._reactRootContainer;if(u){var d=u;if(typeof c=="function"){var m=c;c=function(){var y=pa(d);m.call(y)}}xa(n,d,t,c)}else d=vw(s,n,t,c,l);return pa(d)}Ig=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var s=hs(n.pendingLanes);s!==0&&(Vu(n,s|1),dt(n,De()),!(ae&6)&&(Ei=De()+500,cr()))}break;case 13:Lr(function(){var l=bn(t,1);if(l!==null){var c=rt();Gt(l,t,1,c)}}),kc(t,1)}};Ju=function(t){if(t.tag===13){var n=bn(t,134217728);if(n!==null){var s=rt();Gt(n,t,134217728,s)}kc(t,134217728)}};Cg=function(t){if(t.tag===13){var n=ir(t),s=bn(t,n);if(s!==null){var l=rt();Gt(s,t,n,l)}kc(t,n)}};Ng=function(){return fe};xg=function(t,n){var s=fe;try{return fe=t,n()}finally{fe=s}};Ql=function(t,n,s){switch(n){case"input":if(Jl(t,s),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==t&&l.form===t.form){var c=Ta(l);if(!c)throw Error(L(90));sg(l),Jl(l,c)}}}break;case"textarea":ag(t,s);break;case"select":n=s.value,n!=null&&hi(t,!!s.multiple,n,!1)}};gg=yc;pg=Lr;var ww={usingClientEntryPoint:!1,Events:[Vs,si,Ta,hg,dg,yc]},us={findFiberByHostInstance:Ir,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Sw={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vg(t),t===null?null:t.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||yw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_o.isDisabled&&_o.supportsFiber)try{ya=_o.inject(Sw),pn=_o}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ww;Et.createPortal=function(t,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(n))throw Error(L(200));return mw(t,n,null,s)};Et.createRoot=function(t,n){if(!Ec(t))throw Error(L(299));var s=!1,l="",c=Qp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=Tc(t,1,!1,null,null,s,!1,l,c),t[Ln]=n.current,Ds(t.nodeType===8?t.parentNode:t),new Ac(n)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=vg(n),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return Lr(t)};Et.hydrate=function(t,n,s){if(!Oa(n))throw Error(L(200));return Da(null,t,n,!0,s)};Et.hydrateRoot=function(t,n,s){if(!Ec(t))throw Error(L(405));var l=s!=null&&s.hydratedSources||null,c=!1,u="",d=Qp;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),n=Yp(n,null,t,1,s??null,c,!1,u,d),t[Ln]=n.current,Ds(t),l)for(t=0;t<l.length;t++)s=l[t],c=s._getVersion,c=c(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,c]:n.mutableSourceEagerHydrationData.push(s,c);return new Pa(n)};Et.render=function(t,n,s){if(!Oa(n))throw Error(L(200));return Da(null,t,n,!1,s)};Et.unmountComponentAtNode=function(t){if(!Oa(t))throw Error(L(40));return t._reactRootContainer?(Lr(function(){Da(null,null,t,!1,function(){t._reactRootContainer=null,t[Ln]=null})}),!0):!1};Et.unstable_batchedUpdates=yc;Et.unstable_renderSubtreeIntoContainer=function(t,n,s,l){if(!Oa(s))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Da(t,n,s,!1,l)};Et.version="18.2.0-next-9e3b772b8-20220608";function Xp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xp)}catch(t){console.error(t)}}Xp(),Yd.exports=Et;var Tw=Yd.exports,$d=Tw;Bl.createRoot=$d.createRoot,Bl.hydrateRoot=$d.hydrateRoot;var Ou={exports:{}};(function(t,n){(function(s,l){l(n)})(Gv,function(s){var l=Object.defineProperty,c=(o,e,r)=>e in o?l(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,u=(o,e,r)=>(c(o,typeof e!="symbol"?e+"":e,r),r),d;(function(o){o[o.Canceled=1]="Canceled",o[o.Unknown=2]="Unknown",o[o.InvalidArgument=3]="InvalidArgument",o[o.DeadlineExceeded=4]="DeadlineExceeded",o[o.NotFound=5]="NotFound",o[o.AlreadyExists=6]="AlreadyExists",o[o.PermissionDenied=7]="PermissionDenied",o[o.ResourceExhausted=8]="ResourceExhausted",o[o.FailedPrecondition=9]="FailedPrecondition",o[o.Aborted=10]="Aborted",o[o.OutOfRange=11]="OutOfRange",o[o.Unimplemented=12]="Unimplemented",o[o.Internal=13]="Internal",o[o.Unavailable=14]="Unavailable",o[o.DataLoss=15]="DataLoss",o[o.Unauthenticated=16]="Unauthenticated"})(d||(d={}));function m(o){const e=d[o];return typeof e!="string"?o.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,r=>"_"+r.toLowerCase())}class y extends Error{constructor(e,r=d.Unknown,i,a,f){super(T(e,r)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=r,this.metadata=new Headers(i??{}),this.details=a??[],this.cause=f}static from(e,r=d.Unknown){return e instanceof y?e:e instanceof Error?e.name=="AbortError"?new y(e.message,d.Canceled):new y(e.message,r,void 0,void 0,e):new y(String(e),r,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===y.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const r="typeName"in e?{findMessage:a=>a===e.typeName?e:void 0}:e,i=[];for(const a of this.details){if("getType"in a){r.findMessage(a.getType().typeName)&&i.push(a);continue}const f=r.findMessage(a.type);if(f)try{i.push(f.fromBinary(a.value))}catch{}}return i}}function T(o,e){return o.length?`[${m(e)}] ${o}`:`[${m(e)}]`}function C(o,e){if(!o)throw new Error(e)}const O=34028234663852886e22,x=-34028234663852886e22,M=4294967295,B=2147483647,U=-2147483648;function ce(o){if(typeof o!="number")throw new Error("invalid int 32: "+typeof o);if(!Number.isInteger(o)||o>B||o<U)throw new Error("invalid int 32: "+o)}function k(o){if(typeof o!="number")throw new Error("invalid uint 32: "+typeof o);if(!Number.isInteger(o)||o>M||o<0)throw new Error("invalid uint 32: "+o)}function w(o){if(typeof o!="number")throw new Error("invalid float 32: "+typeof o);if(Number.isFinite(o)&&(o>O||o<x))throw new Error("invalid float 32: "+o)}const A=Symbol("@bufbuild/protobuf/enum-type");function _(o){const e=o[A];return C(e,"missing enum type on enum object"),e}function z(o,e,r,i){o[A]=V(e,r.map(a=>({no:a.no,name:a.name,localName:o[a.no]})))}function V(o,e,r){const i=Object.create(null),a=Object.create(null),f=[];for(const h of e){const g=H(h);f.push(g),i[h.name]=g,a[h.no]=g}return{typeName:o,values:f,findName(h){return i[h]},findNumber(h){return a[h]}}}function J(o,e,r){const i={};for(const a of e){const f=H(a);i[f.localName]=f.no,i[f.no]=f.localName}return z(i,o,e),i}function H(o){return"localName"in o?o:Object.assign(Object.assign({},o),{localName:o.name})}class te{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,r){const i=this.getType(),a=i.runtime.bin,f=a.makeReadOptions(r);return a.readMessage(this,f.readerFactory(e),e.byteLength,f),this}fromJson(e,r){const i=this.getType(),a=i.runtime.json,f=a.makeReadOptions(r);return a.readMessage(i,e,f,this),this}fromJsonString(e,r){let i;try{i=JSON.parse(e)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(i,r)}toBinary(e){const r=this.getType(),i=r.runtime.bin,a=i.makeWriteOptions(e),f=a.writerFactory();return i.writeMessage(this,f,a),f.finish()}toJson(e){const r=this.getType(),i=r.runtime.json,a=i.makeWriteOptions(e);return i.writeMessage(this,a)}toJsonString(e){var r;const i=this.toJson(e);return JSON.stringify(i,null,(r=e==null?void 0:e.prettySpaces)!==null&&r!==void 0?r:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function ne(o,e,r,i){var a;const f=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:e.substring(e.lastIndexOf(".")+1),h={[f]:function(g){o.util.initFields(this),o.util.initPartial(g,this)}}[f];return Object.setPrototypeOf(h.prototype,new te),Object.assign(h,{runtime:o,typeName:e,fields:o.util.newFieldList(r),fromBinary(g,p){return new h().fromBinary(g,p)},fromJson(g,p){return new h().fromJson(g,p)},fromJsonString(g,p){return new h().fromJsonString(g,p)},equals(g,p){return o.util.equals(h,g,p)}}),h}function gt(){let o=0,e=0;for(let i=0;i<28;i+=7){let a=this.buf[this.pos++];if(o|=(a&127)<<i,!(a&128))return this.assertBounds(),[o,e]}let r=this.buf[this.pos++];if(o|=(r&15)<<28,e=(r&112)>>4,!(r&128))return this.assertBounds(),[o,e];for(let i=3;i<=31;i+=7){let a=this.buf[this.pos++];if(e|=(a&127)<<i,!(a&128))return this.assertBounds(),[o,e]}throw new Error("invalid varint")}function yn(o,e,r){for(let f=0;f<28;f=f+7){const h=o>>>f,g=!(!(h>>>7)&&e==0),p=(g?h|128:h)&255;if(r.push(p),!g)return}const i=o>>>28&15|(e&7)<<4,a=!!(e>>3);if(r.push((a?i|128:i)&255),!!a){for(let f=3;f<31;f=f+7){const h=e>>>f,g=!!(h>>>7),p=(g?h|128:h)&255;if(r.push(p),!g)return}r.push(e>>>31&1)}}const Qt=4294967296;function xi(o){const e=o[0]==="-";e&&(o=o.slice(1));const r=1e6;let i=0,a=0;function f(h,g){const p=Number(o.slice(h,g));a*=r,i=i*r+p,i>=Qt&&(a=a+(i/Qt|0),i=i%Qt)}return f(-24,-18),f(-18,-12),f(-12,-6),f(-6),e?X(i,a):F(i,a)}function Ra(o,e){let r=F(o,e);const i=r.hi&2147483648;i&&(r=X(r.lo,r.hi));const a=Br(r.lo,r.hi);return i?"-"+a:a}function Br(o,e){if({lo:o,hi:e}=Pi(o,e),e<=2097151)return String(Qt*e+o);const r=o&16777215,i=(o>>>24|e<<8)&16777215,a=e>>16&65535;let f=r+i*6777216+a*6710656,h=i+a*8147497,g=a*2;const p=1e7;return f>=p&&(h+=Math.floor(f/p),f%=p),h>=p&&(g+=Math.floor(h/p),h%=p),g.toString()+Z(h)+Z(f)}function Pi(o,e){return{lo:o>>>0,hi:e>>>0}}function F(o,e){return{lo:o|0,hi:e|0}}function X(o,e){return e=~e,o?o=~o+1:e+=1,F(o,e)}const Z=o=>{const e=String(o);return"0000000".slice(e.length)+e};function we(o,e){if(o>=0){for(;o>127;)e.push(o&127|128),o=o>>>7;e.push(o)}else{for(let r=0;r<9;r++)e.push(o&127|128),o=o>>7;e.push(1)}}function Re(){let o=this.buf[this.pos++],e=o&127;if(!(o&128))return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<7,!(o&128))return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<14,!(o&128))return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<21,!(o&128))return this.assertBounds(),e;o=this.buf[this.pos++],e|=(o&15)<<28;for(let r=5;o&128&&r<10;r++)o=this.buf[this.pos++];if(o&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function $r(){const o=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof o.getBigInt64=="function"&&typeof o.getBigUint64=="function"&&typeof o.setBigInt64=="function"&&typeof o.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),f=BigInt("9223372036854775807"),h=BigInt("0"),g=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(p){const v=typeof p=="bigint"?p:BigInt(p);if(v>f||v<a)throw new Error(`int64 invalid: ${p}`);return v},uParse(p){const v=typeof p=="bigint"?p:BigInt(p);if(v>g||v<h)throw new Error(`uint64 invalid: ${p}`);return v},enc(p){return o.setBigInt64(0,this.parse(p),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},uEnc(p){return o.setBigInt64(0,this.uParse(p),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},dec(p,v){return o.setInt32(0,p,!0),o.setInt32(4,v,!0),o.getBigInt64(0,!0)},uDec(p,v){return o.setInt32(0,p,!0),o.setInt32(4,v,!0),o.getBigUint64(0,!0)}}}const r=a=>C(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),i=a=>C(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),r(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),i(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),r(a),xi(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),i(a),xi(a)},dec(a,f){return Ra(a,f)},uDec(a,f){return Br(a,f)}}}const he=$r();var N;(function(o){o[o.DOUBLE=1]="DOUBLE",o[o.FLOAT=2]="FLOAT",o[o.INT64=3]="INT64",o[o.UINT64=4]="UINT64",o[o.INT32=5]="INT32",o[o.FIXED64=6]="FIXED64",o[o.FIXED32=7]="FIXED32",o[o.BOOL=8]="BOOL",o[o.STRING=9]="STRING",o[o.BYTES=12]="BYTES",o[o.UINT32=13]="UINT32",o[o.SFIXED32=15]="SFIXED32",o[o.SFIXED64=16]="SFIXED64",o[o.SINT32=17]="SINT32",o[o.SINT64=18]="SINT64"})(N||(N={}));var Ke;(function(o){o[o.BIGINT=0]="BIGINT",o[o.STRING=1]="STRING"})(Ke||(Ke={}));function pt(o,e,r){if(e===r)return!0;if(o==N.BYTES){if(!(e instanceof Uint8Array)||!(r instanceof Uint8Array)||e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==r[i])return!1;return!0}switch(o){case N.UINT64:case N.FIXED64:case N.INT64:case N.SFIXED64:case N.SINT64:return e==r}return!1}function Ur(o,e){switch(o){case N.BOOL:return!1;case N.UINT64:case N.FIXED64:case N.INT64:case N.SFIXED64:case N.SINT64:return e==0?he.zero:"0";case N.DOUBLE:case N.FLOAT:return 0;case N.BYTES:return new Uint8Array(0);case N.STRING:return"";default:return 0}}function Ic(o,e){switch(o){case N.BOOL:return e===!1;case N.STRING:return e==="";case N.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Oe;(function(o){o[o.Varint=0]="Varint",o[o.Bit64=1]="Bit64",o[o.LengthDelimited=2]="LengthDelimited",o[o.StartGroup=3]="StartGroup",o[o.EndGroup=4]="EndGroup",o[o.Bit32=5]="Bit32"})(Oe||(Oe={}));class em{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let a=0;a<this.chunks.length;a++)e+=this.chunks[a].length;let r=new Uint8Array(e),i=0;for(let a=0;a<this.chunks.length;a++)r.set(this.chunks[a],i),i+=this.chunks[a].length;return this.chunks=[],r}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),r=this.stack.pop();if(!r)throw new Error("invalid state, fork stack empty");return this.chunks=r.chunks,this.buf=r.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,r){return this.uint32((e<<3|r)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(k(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return ce(e),we(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let r=this.textEncoder.encode(e);return this.uint32(r.byteLength),this.raw(r)}float(e){w(e);let r=new Uint8Array(4);return new DataView(r.buffer).setFloat32(0,e,!0),this.raw(r)}double(e){let r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),this.raw(r)}fixed32(e){k(e);let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e,!0),this.raw(r)}sfixed32(e){ce(e);let r=new Uint8Array(4);return new DataView(r.buffer).setInt32(0,e,!0),this.raw(r)}sint32(e){return ce(e),e=(e<<1^e>>31)>>>0,we(e,this.buf),this}sfixed64(e){let r=new Uint8Array(8),i=new DataView(r.buffer),a=he.enc(e);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(r)}fixed64(e){let r=new Uint8Array(8),i=new DataView(r.buffer),a=he.uEnc(e);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(r)}int64(e){let r=he.enc(e);return yn(r.lo,r.hi,this.buf),this}sint64(e){let r=he.enc(e),i=r.hi>>31,a=r.lo<<1^i,f=(r.hi<<1|r.lo>>>31)^i;return yn(a,f,this.buf),this}uint64(e){let r=he.uEnc(e);return yn(r.lo,r.hi,this.buf),this}}class tm{constructor(e,r){this.varint64=gt,this.uint32=Re,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=r??new TextDecoder}tag(){let e=this.uint32(),r=e>>>3,i=e&7;if(r<=0||i<0||i>5)throw new Error("illegal tag: field no "+r+" wire type "+i);return[r,i]}skip(e,r){let i=this.pos;switch(e){case Oe.Varint:for(;this.buf[this.pos++]&128;);break;case Oe.Bit64:this.pos+=4;case Oe.Bit32:this.pos+=4;break;case Oe.LengthDelimited:let a=this.uint32();this.pos+=a;break;case Oe.StartGroup:for(;;){const[f,h]=this.tag();if(h===Oe.EndGroup){if(r!==void 0&&f!==r)throw new Error("invalid end group tag");break}this.skip(h,f)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return he.dec(...this.varint64())}uint64(){return he.uDec(...this.varint64())}sint64(){let[e,r]=this.varint64(),i=-(e&1);return e=(e>>>1|(r&1)<<31)^i,r=r>>>1^i,he.dec(e,r)}bool(){let[e,r]=this.varint64();return e!==0||r!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return he.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return he.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),r=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(r,r+e)}string(){return this.textDecoder.decode(this.bytes())}}function nm(o,e,r,i){let a;return{typeName:e,extendee:r,get field(){if(!a){const f=typeof i=="function"?i():i;f.name=e.split(".").pop(),f.jsonName=`[${e}]`,a=o.util.newFieldList([f]).list()[0]}return a},runtime:o}}function Cc(o){const e=o.field.localName,r=Object.create(null);return r[e]=rm(o),[r,()=>r[e]]}function rm(o){const e=o.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Ur(e.T,e.L);case"message":const r=e.T,i=new r;return r.fieldWrapper?r.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function im(o,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let r=o.length-1;r>=0;--r)if(o[r].no==e.no)return[o[r]];return[]}return o.filter(r=>r.no===e.no)}let vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ks=[];for(let o=0;o<vn.length;o++)Ks[vn[o].charCodeAt(0)]=o;Ks["-".charCodeAt(0)]=vn.indexOf("+"),Ks["_".charCodeAt(0)]=vn.indexOf("/");const _a={dec(o){let e=o.length*3/4;o[o.length-2]=="="?e-=2:o[o.length-1]=="="&&(e-=1);let r=new Uint8Array(e),i=0,a=0,f,h=0;for(let g=0;g<o.length;g++){if(f=Ks[o.charCodeAt(g)],f===void 0)switch(o[g]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:h=f,a=1;break;case 1:r[i++]=h<<2|(f&48)>>4,h=f,a=2;break;case 2:r[i++]=(h&15)<<4|(f&60)>>2,h=f,a=3;break;case 3:r[i++]=(h&3)<<6|f,a=0;break}}if(a==1)throw Error("invalid base64 string.");return r.subarray(0,i)},enc(o){let e="",r=0,i,a=0;for(let f=0;f<o.length;f++)switch(i=o[f],r){case 0:e+=vn[i>>2],a=(i&3)<<4,r=1;break;case 1:e+=vn[a|i>>4],a=(i&15)<<2,r=2;break;case 2:e+=vn[a|i>>6],e+=vn[i&63],r=0;break}return r&&(e+=vn[a],e+="=",r==1&&(e+="=")),e}};function sm(o,e,r){xc(e,o);const i=e.runtime.bin.makeReadOptions(r),a=im(o.getType().runtime.bin.listUnknownFields(o),e.field),[f,h]=Cc(e);for(const g of a)e.runtime.bin.readField(f,i.readerFactory(g.data),e.field,g.wireType,i);return h()}function om(o,e,r,i){xc(e,o);const a=e.runtime.bin.makeReadOptions(i),f=e.runtime.bin.makeWriteOptions(i);if(Nc(o,e)){const v=o.getType().runtime.bin.listUnknownFields(o).filter(S=>S.no!=e.field.no);o.getType().runtime.bin.discardUnknownFields(o);for(const S of v)o.getType().runtime.bin.onUnknownField(o,S.no,S.wireType,S.data)}const h=f.writerFactory();let g=e.field;!g.opt&&!g.repeated&&(g.kind=="enum"||g.kind=="scalar")&&(g=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(g,r,h,f);const p=a.readerFactory(h.finish());for(;p.pos<p.len;){const[v,S]=p.tag(),D=p.skip(S,v);o.getType().runtime.bin.onUnknownField(o,v,S,D)}}function Nc(o,e){const r=o.getType();return e.extendee.typeName===r.typeName&&!!r.runtime.bin.listUnknownFields(o).find(i=>i.no==e.field.no)}function xc(o,e){C(o.extendee.typeName==e.getType().typeName,`extension ${o.typeName} can only be applied to message ${o.extendee.typeName}`)}function Pc(o,e){const r=o.localName;if(o.repeated)return e[r].length>0;if(o.oneof)return e[o.oneof.localName].case===r;switch(o.kind){case"enum":case"scalar":return o.opt||o.req?e[r]!==void 0:o.kind=="enum"?e[r]!==o.T.values[0].no:!Ic(o.T,e[r]);case"message":return e[r]!==void 0;case"map":return Object.keys(e[r]).length>0}}function Oc(o,e){const r=o.localName,i=!o.opt&&!o.req;if(o.repeated)e[r]=[];else if(o.oneof)e[o.oneof.localName]={case:void 0};else switch(o.kind){case"map":e[r]={};break;case"enum":e[r]=i?o.T.values[0].no:void 0;break;case"scalar":e[r]=i?Ur(o.T,o.L):void 0;break;case"message":e[r]=void 0;break}}function fr(o,e){if(o===null||typeof o!="object"||!Object.getOwnPropertyNames(te.prototype).every(i=>i in o&&typeof o[i]=="function"))return!1;const r=o.getType();return r===null||typeof r!="function"||!("typeName"in r)||typeof r.typeName!="string"?!1:e===void 0?!0:r.typeName==e.typeName}function Dc(o,e){return fr(e)||!o.fieldWrapper?e:o.fieldWrapper.wrapField(e)}N.DOUBLE,N.FLOAT,N.INT64,N.UINT64,N.INT32,N.UINT32,N.BOOL,N.STRING,N.BYTES;const Rc={ignoreUnknownFields:!1},_c={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function am(o){return o?Object.assign(Object.assign({},Rc),o):Rc}function lm(o){return o?Object.assign(Object.assign({},_c),o):_c}const Ws=Symbol(),qs=Symbol();function um(){return{makeReadOptions:am,makeWriteOptions:lm,readMessage(o,e,r,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${o.typeName} from JSON: ${Xt(e)}`);i=i??new o;const a=new Map,f=r.typeRegistry;for(const[h,g]of Object.entries(e)){const p=o.fields.findJsonName(h);if(p){if(p.oneof){if(g===null&&p.kind=="scalar")continue;const v=a.get(p.oneof);if(v!==void 0)throw new Error(`cannot decode message ${o.typeName} from JSON: multiple keys for oneof "${p.oneof.name}" present: "${v}", "${h}"`);a.set(p.oneof,h)}Lc(i,g,p,r,o)}else{let v=!1;if(f!=null&&f.findExtension&&h.startsWith("[")&&h.endsWith("]")){const S=f.findExtension(h.substring(1,h.length-1));if(S&&S.extendee.typeName==o.typeName){v=!0;const[D,P]=Cc(S);Lc(D,g,S.field,r,S),om(i,S,P(),r)}}if(!v&&!r.ignoreUnknownFields)throw new Error(`cannot decode message ${o.typeName} from JSON: key "${h}" is unknown`)}}return i},writeMessage(o,e){const r=o.getType(),i={};let a;try{for(a of r.fields.byNumber()){if(!Pc(a,o)){if(a.req)throw"required field not set";if(!e.emitDefaultValues||!fm(a))continue}const h=a.oneof?o[a.oneof.localName].value:o[a.localName],g=bc(a,h,e);g!==void 0&&(i[e.useProtoFieldName?a.name:a.jsonName]=g)}const f=e.typeRegistry;if(f!=null&&f.findExtensionFor)for(const h of r.runtime.bin.listUnknownFields(o)){const g=f.findExtensionFor(r.typeName,h.no);if(g&&Nc(o,g)){const p=sm(o,g,e),v=bc(g.field,p,e);v!==void 0&&(i[g.field.jsonName]=v)}}}catch(f){const h=a?`cannot encode field ${r.typeName}.${a.name} to JSON`:`cannot encode message ${r.typeName} to JSON`,g=f instanceof Error?f.message:String(f);throw new Error(h+(g.length>0?`: ${g}`:""))}return i},readScalar(o,e,r){return Oi(o,e,r??Ke.BIGINT,!0)},writeScalar(o,e,r){if(e!==void 0&&(r||Ic(o,e)))return Hs(o,e)},debug:Xt}}function Xt(o){if(o===null)return"null";switch(typeof o){case"object":return Array.isArray(o)?"array":"object";case"string":return o.length>100?"string":`"${o.split('"').join('\\"')}"`;default:return String(o)}}function Lc(o,e,r,i,a){let f=r.localName;if(r.repeated){if(C(r.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${a.typeName}.${r.name} from JSON: ${Xt(e)}`);const h=o[f];for(const g of e){if(g===null)throw new Error(`cannot decode field ${a.typeName}.${r.name} from JSON: ${Xt(g)}`);switch(r.kind){case"message":h.push(r.T.fromJson(g,i));break;case"enum":const p=La(r.T,g,i.ignoreUnknownFields,!0);p!==qs&&h.push(p);break;case"scalar":try{h.push(Oi(r.T,g,r.L,!0))}catch(v){let S=`cannot decode field ${a.typeName}.${r.name} from JSON: ${Xt(g)}`;throw v instanceof Error&&v.message.length>0&&(S+=`: ${v.message}`),new Error(S)}break}}}else if(r.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${a.typeName}.${r.name} from JSON: ${Xt(e)}`);const h=o[f];for(const[g,p]of Object.entries(e)){if(p===null)throw new Error(`cannot decode field ${a.typeName}.${r.name} from JSON: map value null`);let v;try{v=cm(r.K,g)}catch(S){let D=`cannot decode map key for field ${a.typeName}.${r.name} from JSON: ${Xt(e)}`;throw S instanceof Error&&S.message.length>0&&(D+=`: ${S.message}`),new Error(D)}switch(r.V.kind){case"message":h[v]=r.V.T.fromJson(p,i);break;case"enum":const S=La(r.V.T,p,i.ignoreUnknownFields,!0);S!==qs&&(h[v]=S);break;case"scalar":try{h[v]=Oi(r.V.T,p,Ke.BIGINT,!0)}catch(D){let P=`cannot decode map value for field ${a.typeName}.${r.name} from JSON: ${Xt(e)}`;throw D instanceof Error&&D.message.length>0&&(P+=`: ${D.message}`),new Error(P)}break}}}else switch(r.oneof&&(o=o[r.oneof.localName]={case:f},f="value"),r.kind){case"message":const h=r.T;if(e===null&&h.typeName!="google.protobuf.Value")return;let g=o[f];fr(g)?g.fromJson(e,i):(o[f]=g=h.fromJson(e,i),h.fieldWrapper&&!r.oneof&&(o[f]=h.fieldWrapper.unwrapField(g)));break;case"enum":const p=La(r.T,e,i.ignoreUnknownFields,!1);switch(p){case Ws:Oc(r,o);break;case qs:break;default:o[f]=p;break}break;case"scalar":try{const v=Oi(r.T,e,r.L,!1);switch(v){case Ws:Oc(r,o);break;default:o[f]=v;break}}catch(v){let S=`cannot decode field ${a.typeName}.${r.name} from JSON: ${Xt(e)}`;throw v instanceof Error&&v.message.length>0&&(S+=`: ${v.message}`),new Error(S)}break}}function cm(o,e){if(o===N.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Oi(o,e,Ke.BIGINT,!0).toString()}function Oi(o,e,r,i){if(e===null)return i?Ur(o,r):Ws;switch(o){case N.DOUBLE:case N.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const a=Number(e);if(Number.isNaN(a)||!Number.isFinite(a))break;return o==N.FLOAT&&w(a),a;case N.INT32:case N.FIXED32:case N.SFIXED32:case N.SINT32:case N.UINT32:let f;if(typeof e=="number"?f=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(f=Number(e)),f===void 0)break;return o==N.UINT32||o==N.FIXED32?k(f):ce(f),f;case N.INT64:case N.SFIXED64:case N.SINT64:if(typeof e!="number"&&typeof e!="string")break;const h=he.parse(e);return r?h.toString():h;case N.FIXED64:case N.UINT64:if(typeof e!="number"&&typeof e!="string")break;const g=he.uParse(e);return r?g.toString():g;case N.BOOL:if(typeof e!="boolean")break;return e;case N.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case N.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return _a.dec(e)}throw new Error}function La(o,e,r,i){if(e===null)return o.typeName=="google.protobuf.NullValue"?0:i?o.values[0].no:Ws;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const a=o.findName(e);if(a!==void 0)return a.no;if(r)return qs;break}throw new Error(`cannot decode enum ${o.typeName} from JSON: ${Xt(e)}`)}function fm(o){return o.repeated||o.kind=="map"?!0:!(o.oneof||o.kind=="message"||o.opt||o.req)}function bc(o,e,r){if(o.kind=="map"){C(typeof e=="object"&&e!=null);const i={},a=Object.entries(e);switch(o.V.kind){case"scalar":for(const[h,g]of a)i[h.toString()]=Hs(o.V.T,g);break;case"message":for(const[h,g]of a)i[h.toString()]=g.toJson(r);break;case"enum":const f=o.V.T;for(const[h,g]of a)i[h.toString()]=ba(f,g,r.enumAsInteger);break}return r.emitDefaultValues||a.length>0?i:void 0}if(o.repeated){C(Array.isArray(e));const i=[];switch(o.kind){case"scalar":for(let a=0;a<e.length;a++)i.push(Hs(o.T,e[a]));break;case"enum":for(let a=0;a<e.length;a++)i.push(ba(o.T,e[a],r.enumAsInteger));break;case"message":for(let a=0;a<e.length;a++)i.push(e[a].toJson(r));break}return r.emitDefaultValues||i.length>0?i:void 0}switch(o.kind){case"scalar":return Hs(o.T,e);case"enum":return ba(o.T,e,r.enumAsInteger);case"message":return Dc(o.T,e).toJson(r)}}function ba(o,e,r){var i;if(C(typeof e=="number"),o.typeName=="google.protobuf.NullValue")return null;if(r)return e;const a=o.findNumber(e);return(i=a==null?void 0:a.name)!==null&&i!==void 0?i:e}function Hs(o,e){switch(o){case N.INT32:case N.SFIXED32:case N.SINT32:case N.FIXED32:case N.UINT32:return C(typeof e=="number"),e;case N.FLOAT:case N.DOUBLE:return C(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case N.STRING:return C(typeof e=="string"),e;case N.BOOL:return C(typeof e=="boolean"),e;case N.UINT64:case N.FIXED64:case N.INT64:case N.SFIXED64:case N.SINT64:return C(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case N.BYTES:return C(e instanceof Uint8Array),_a.enc(e)}}const Fr=Symbol("@bufbuild/protobuf/unknown-fields"),Mc={readUnknownFields:!0,readerFactory:o=>new tm(o)},Bc={writeUnknownFields:!0,writerFactory:()=>new em};function hm(o){return o?Object.assign(Object.assign({},Mc),o):Mc}function dm(o){return o?Object.assign(Object.assign({},Bc),o):Bc}function gm(){return{makeReadOptions:hm,makeWriteOptions:dm,listUnknownFields(o){var e;return(e=o[Fr])!==null&&e!==void 0?e:[]},discardUnknownFields(o){delete o[Fr]},writeUnknownFields(o,e){const i=o[Fr];if(i)for(const a of i)e.tag(a.no,a.wireType).raw(a.data)},onUnknownField(o,e,r,i){const a=o;Array.isArray(a[Fr])||(a[Fr]=[]),a[Fr].push({no:e,wireType:r,data:i})},readMessage(o,e,r,i,a){const f=o.getType(),h=a?e.len:e.pos+r;let g,p;for(;e.pos<h&&([g,p]=e.tag(),!(a===!0&&p==Oe.EndGroup));){const v=f.fields.find(g);if(!v){const S=e.skip(p,g);i.readUnknownFields&&this.onUnknownField(o,g,p,S);continue}$c(o,e,v,p,i)}if(a&&(p!=Oe.EndGroup||g!==r))throw new Error("invalid end group tag")},readField:$c,writeMessage(o,e,r){const i=o.getType();for(const a of i.fields.byNumber()){if(!Pc(a,o)){if(a.req)throw new Error(`cannot encode field ${i.typeName}.${a.name} to binary: required field not set`);continue}const f=a.oneof?o[a.oneof.localName].value:o[a.localName];Uc(a,f,e,r)}return r.writeUnknownFields&&this.writeUnknownFields(o,e),e},writeField(o,e,r,i){e!==void 0&&Uc(o,e,r,i)}}}function $c(o,e,r,i,a){let{repeated:f,localName:h}=r;switch(r.oneof&&(o=o[r.oneof.localName],o.case!=h&&delete o.value,o.case=h,h="value"),r.kind){case"scalar":case"enum":const g=r.kind=="enum"?N.INT32:r.T;let p=Ys;if(r.kind=="scalar"&&r.L>0&&(p=mm),f){let P=o[h];if(i==Oe.LengthDelimited&&g!=N.STRING&&g!=N.BYTES){let $=e.uint32()+e.pos;for(;e.pos<$;)P.push(p(e,g))}else P.push(p(e,g))}else o[h]=p(e,g);break;case"message":const v=r.T;f?o[h].push(Gs(e,new v,a,r)):fr(o[h])?Gs(e,o[h],a,r):(o[h]=Gs(e,new v,a,r),v.fieldWrapper&&!r.oneof&&!r.repeated&&(o[h]=v.fieldWrapper.unwrapField(o[h])));break;case"map":let[S,D]=pm(r,e,a);o[h][S]=D;break}}function Gs(o,e,r,i){const a=e.getType().runtime.bin,f=i==null?void 0:i.delimited;return a.readMessage(e,o,f?i.no:o.uint32(),r,f),e}function pm(o,e,r){const i=e.uint32(),a=e.pos+i;let f,h;for(;e.pos<a;){const[g]=e.tag();switch(g){case 1:f=Ys(e,o.K);break;case 2:switch(o.V.kind){case"scalar":h=Ys(e,o.V.T);break;case"enum":h=e.int32();break;case"message":h=Gs(e,new o.V.T,r,void 0);break}break}}if(f===void 0&&(f=Ur(o.K,Ke.BIGINT)),typeof f!="string"&&typeof f!="number"&&(f=f.toString()),h===void 0)switch(o.V.kind){case"scalar":h=Ur(o.V.T,Ke.BIGINT);break;case"enum":h=o.V.T.values[0].no;break;case"message":h=new o.V.T;break}return[f,h]}function mm(o,e){const r=Ys(o,e);return typeof r=="bigint"?r.toString():r}function Ys(o,e){switch(e){case N.STRING:return o.string();case N.BOOL:return o.bool();case N.DOUBLE:return o.double();case N.FLOAT:return o.float();case N.INT32:return o.int32();case N.INT64:return o.int64();case N.UINT64:return o.uint64();case N.FIXED64:return o.fixed64();case N.BYTES:return o.bytes();case N.FIXED32:return o.fixed32();case N.SFIXED32:return o.sfixed32();case N.SFIXED64:return o.sfixed64();case N.SINT64:return o.sint64();case N.UINT32:return o.uint32();case N.SINT32:return o.sint32()}}function Uc(o,e,r,i){C(e!==void 0);const a=o.repeated;switch(o.kind){case"scalar":case"enum":let f=o.kind=="enum"?N.INT32:o.T;if(a)if(C(Array.isArray(e)),o.packed)vm(r,f,o.no,e);else for(const h of e)Di(r,f,o.no,h);else Di(r,f,o.no,e);break;case"message":if(a){C(Array.isArray(e));for(const h of e)Fc(r,i,o,h)}else Fc(r,i,o,e);break;case"map":C(typeof e=="object"&&e!=null);for(const[h,g]of Object.entries(e))ym(r,i,o,h,g);break}}function ym(o,e,r,i,a){o.tag(r.no,Oe.LengthDelimited),o.fork();let f=i;switch(r.K){case N.INT32:case N.FIXED32:case N.UINT32:case N.SFIXED32:case N.SINT32:f=Number.parseInt(i);break;case N.BOOL:C(i=="true"||i=="false"),f=i=="true";break}switch(Di(o,r.K,1,f),r.V.kind){case"scalar":Di(o,r.V.T,2,a);break;case"enum":Di(o,N.INT32,2,a);break;case"message":C(a!==void 0),o.tag(2,Oe.LengthDelimited).bytes(a.toBinary(e));break}o.join()}function Fc(o,e,r,i){const a=Dc(r.T,i);r.delimited?o.tag(r.no,Oe.StartGroup).raw(a.toBinary(e)).tag(r.no,Oe.EndGroup):o.tag(r.no,Oe.LengthDelimited).bytes(a.toBinary(e))}function Di(o,e,r,i){C(i!==void 0);let[a,f]=zc(e);o.tag(r,a)[f](i)}function vm(o,e,r,i){if(!i.length)return;o.tag(r,Oe.LengthDelimited).fork();let[,a]=zc(e);for(let f=0;f<i.length;f++)o[a](i[f]);o.join()}function zc(o){let e=Oe.Varint;switch(o){case N.BYTES:case N.STRING:e=Oe.LengthDelimited;break;case N.DOUBLE:case N.FIXED64:case N.SFIXED64:e=Oe.Bit64;break;case N.FIXED32:case N.SFIXED32:case N.FLOAT:e=Oe.Bit32;break}const r=N[o].toLowerCase();return[e,r]}function wm(){return{setEnumType:z,initPartial(o,e){if(o===void 0)return;const r=e.getType();for(const i of r.fields.byMember()){const a=i.localName,f=e,h=o;if(h[a]!=null)switch(i.kind){case"oneof":const g=h[a].case;if(g===void 0)continue;const p=i.findField(g);let v=h[a].value;p&&p.kind=="message"&&!fr(v,p.T)?v=new p.T(v):p&&p.kind==="scalar"&&p.T===N.BYTES&&(v=Ri(v)),f[a]={case:g,value:v};break;case"scalar":case"enum":let S=h[a];i.T===N.BYTES&&(S=i.repeated?S.map(Ri):Ri(S)),f[a]=S;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===N.BYTES)for(const[I,$]of Object.entries(h[a]))f[a][I]=Ri($);else Object.assign(f[a],h[a]);break;case"message":const P=i.V.T;for(const I of Object.keys(h[a])){let $=h[a][I];P.fieldWrapper||($=new P($)),f[a][I]=$}break}break;case"message":const D=i.T;if(i.repeated)f[a]=h[a].map(P=>fr(P,D)?P:new D(P));else{const P=h[a];D.fieldWrapper?D.typeName==="google.protobuf.BytesValue"?f[a]=Ri(P):f[a]=P:f[a]=fr(P,D)?P:new D(P)}break}}},equals(o,e,r){return e===r?!0:!e||!r?!1:o.fields.byMember().every(i=>{const a=e[i.localName],f=r[i.localName];if(i.repeated){if(a.length!==f.length)return!1;switch(i.kind){case"message":return a.every((h,g)=>i.T.equals(h,f[g]));case"scalar":return a.every((h,g)=>pt(i.T,h,f[g]));case"enum":return a.every((h,g)=>pt(N.INT32,h,f[g]))}throw new Error(`repeated cannot contain ${i.kind}`)}switch(i.kind){case"message":return i.T.equals(a,f);case"enum":return pt(N.INT32,a,f);case"scalar":return pt(i.T,a,f);case"oneof":if(a.case!==f.case)return!1;const h=i.findField(a.case);if(h===void 0)return!0;switch(h.kind){case"message":return h.T.equals(a.value,f.value);case"enum":return pt(N.INT32,a.value,f.value);case"scalar":return pt(h.T,a.value,f.value)}throw new Error(`oneof cannot contain ${h.kind}`);case"map":const g=Object.keys(a).concat(Object.keys(f));switch(i.V.kind){case"message":const p=i.V.T;return g.every(S=>p.equals(a[S],f[S]));case"enum":return g.every(S=>pt(N.INT32,a[S],f[S]));case"scalar":const v=i.V.T;return g.every(S=>pt(v,a[S],f[S]))}break}})},clone(o){const e=o.getType(),r=new e,i=r;for(const a of e.fields.byMember()){const f=o[a.localName];let h;if(a.repeated)h=f.map(Qs);else if(a.kind=="map"){h=i[a.localName];for(const[g,p]of Object.entries(f))h[g]=Qs(p)}else a.kind=="oneof"?h=a.findField(f.case)?{case:f.case,value:Qs(f.value)}:{case:void 0}:h=Qs(f);i[a.localName]=h}for(const a of e.runtime.bin.listUnknownFields(o))e.runtime.bin.onUnknownField(i,a.no,a.wireType,a.data);return r}}}function Qs(o){if(o===void 0)return o;if(fr(o))return o.clone();if(o instanceof Uint8Array){const e=new Uint8Array(o.byteLength);return e.set(o),e}return o}function Ri(o){return o instanceof Uint8Array?o:new Uint8Array(o)}function Sm(o,e,r){return{syntax:o,json:um(),bin:gm(),util:Object.assign(Object.assign({},wm()),{newFieldList:e,initFields:r}),makeMessageType(i,a,f){return ne(this,i,a,f)},makeEnum:J,makeEnumType:V,getEnumType:_,makeExtension(i,a,f){return nm(this,i,a,f)}}}class Tm{constructor(e,r){this._fields=e,this._normalizer=r}findJsonName(e){if(!this.jsonNames){const r={};for(const i of this.list())r[i.jsonName]=r[i.name]=i;this.jsonNames=r}return this.jsonNames[e]}find(e){if(!this.numbers){const r={};for(const i of this.list())r[i.no]=i;this.numbers=r}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,r)=>e.no-r.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let r;for(const i of this.list())i.oneof?i.oneof!==r&&(r=i.oneof,e.push(r)):e.push(i)}return this.members}}function jc(o,e){const r=Vc(o);return e?r:Nm(Cm(r))}function km(o){return jc(o,!1)}const Am=Vc;function Vc(o){let e=!1;const r=[];for(let i=0;i<o.length;i++){let a=o.charAt(i);switch(a){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r.push(a),e=!1;break;default:e&&(e=!1,a=a.toUpperCase()),r.push(a);break}}return r.join("")}const Em=new Set(["constructor","toString","toJSON","valueOf"]),Im=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Jc=o=>`${o}$`,Cm=o=>Im.has(o)?Jc(o):o,Nm=o=>Em.has(o)?Jc(o):o;class xm{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=km(e)}addField(e){C(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let r=0;r<this.fields.length;r++)this._lookup[this.fields[r].localName]=this.fields[r]}return this._lookup[e]}}function Pm(o,e){var r,i,a,f,h,g;const p=[];let v;for(const S of typeof o=="function"?o():o){const D=S;if(D.localName=jc(S.name,S.oneof!==void 0),D.jsonName=(r=S.jsonName)!==null&&r!==void 0?r:Am(S.name),D.repeated=(i=S.repeated)!==null&&i!==void 0?i:!1,S.kind=="scalar"&&(D.L=(a=S.L)!==null&&a!==void 0?a:Ke.BIGINT),D.delimited=(f=S.delimited)!==null&&f!==void 0?f:!1,D.req=(h=S.req)!==null&&h!==void 0?h:!1,D.opt=(g=S.opt)!==null&&g!==void 0?g:!1,S.packed===void 0&&(e?D.packed=S.kind=="enum"||S.kind=="scalar"&&S.T!=N.BYTES&&S.T!=N.STRING:D.packed=!1),S.oneof!==void 0){const P=typeof S.oneof=="string"?S.oneof:S.oneof.name;(!v||v.name!=P)&&(v=new xm(P)),D.oneof=v,v.addField(D)}p.push(D)}return p}const E=Sm("proto3",o=>new Tm(o,e=>Pm(e,!0)),o=>{for(const e of o.getType().fields.byMember()){if(e.opt)continue;const r=e.localName,i=o;if(e.repeated){i[r]=[];continue}switch(e.kind){case"oneof":i[r]={case:void 0};break;case"enum":i[r]=0;break;case"map":i[r]={};break;case"scalar":i[r]=Ur(e.T,e.L);break}}});var Ze;(function(o){o[o.Unary=0]="Unary",o[o.ServerStreaming=1]="ServerStreaming",o[o.ClientStreaming=2]="ClientStreaming",o[o.BiDiStreaming=3]="BiDiStreaming"})(Ze||(Ze={}));var Kc;(function(o){o[o.NoSideEffects=1]="NoSideEffects",o[o.Idempotent=2]="Idempotent"})(Kc||(Kc={}));class We extends te{constructor(e){super(),this.seconds=he.zero,this.nanos=0,E.util.initPartial(e,this)}fromJson(e,r){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${E.json.debug(e)}`);const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=he.parse(a/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const r=Number(this.seconds)*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?i="."+a.substring(0,3)+"Z":a.substring(6)==="000"?i="."+a.substring(0,6)+"Z":i="."+a+"Z"}return new Date(r).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return We.fromDate(new Date)}static fromDate(e){const r=e.getTime();return new We({seconds:he.parse(Math.floor(r/1e3)),nanos:r%1e3*1e6})}static fromBinary(e,r){return new We().fromBinary(e,r)}static fromJson(e,r){return new We().fromJson(e,r)}static fromJsonString(e,r){return new We().fromJsonString(e,r)}static equals(e,r){return E.util.equals(We,e,r)}}We.runtime=E,We.typeName="google.protobuf.Timestamp",We.fields=E.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class wn extends te{constructor(e){super(),this.seconds=he.zero,this.nanos=0,E.util.initPartial(e,this)}fromJson(e,r){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${E.json.debug(e)}`);const i=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(i===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${E.json.debug(e)}`);const a=Number(i[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${E.json.debug(e)}`);if(this.seconds=he.parse(a),typeof i[2]=="string"){const f=i[2]+"0".repeat(9-i[2].length);this.nanos=parseInt(f),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let r=this.seconds.toString();if(this.nanos!==0){let i=Math.abs(this.nanos).toString();i="0".repeat(9-i.length)+i,i.substring(3)==="000000"?i=i.substring(0,3):i.substring(6)==="000"&&(i=i.substring(0,6)),r+="."+i,this.nanos<0&&Number(this.seconds)==0&&(r="-"+r)}return r+"s"}static fromBinary(e,r){return new wn().fromBinary(e,r)}static fromJson(e,r){return new wn().fromJson(e,r)}static fromJsonString(e,r){return new wn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(wn,e,r)}}wn.runtime=E,wn.typeName="google.protobuf.Duration",wn.fields=E.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Zt extends te{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),E.util.initPartial(e,this)}toJson(e){var r;if(this.typeUrl==="")return{};const i=this.typeUrlToName(this.typeUrl),a=(r=e==null?void 0:e.typeRegistry)===null||r===void 0?void 0:r.findMessage(i);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let h=a.fromBinary(this.value).toJson(e);return(i.startsWith("google.protobuf.")||h===null||Array.isArray(h)||typeof h!="object")&&(h={value:h}),h["@type"]=this.typeUrl,h}fromJson(e,r){var i;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const a=e["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const f=this.typeUrlToName(a),h=(i=r==null?void 0:r.typeRegistry)===null||i===void 0?void 0:i.findMessage(f);if(!h)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let g;if(f.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))g=h.fromJson(e.value,r);else{const p=Object.assign({},e);delete p["@type"],g=h.fromJson(p,r)}return this.packFrom(g),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const r=e.findMessage(this.typeUrlToName(this.typeUrl));if(r)return r.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const r=this.typeUrlToName(this.typeUrl);let i="";return typeof e=="string"?i=e:i=e.typeName,r===i}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const r=e.lastIndexOf("/"),i=r>=0?e.substring(r+1):e;if(!i.length)throw new Error(`invalid type url: ${e}`);return i}static pack(e){const r=new Zt;return r.packFrom(e),r}static fromBinary(e,r){return new Zt().fromBinary(e,r)}static fromJson(e,r){return new Zt().fromJson(e,r)}static fromJsonString(e,r){return new Zt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Zt,e,r)}}Zt.runtime=E,Zt.typeName="google.protobuf.Any",Zt.fields=E.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class en extends te{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(N.DOUBLE,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(N.DOUBLE,e)}catch(i){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new en().fromBinary(e,r)}static fromJson(e,r){return new en().fromJson(e,r)}static fromJsonString(e,r){return new en().fromJsonString(e,r)}static equals(e,r){return E.util.equals(en,e,r)}}en.runtime=E,en.typeName="google.protobuf.DoubleValue",en.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),en.fieldWrapper={wrapField(o){return new en({value:o})},unwrapField(o){return o.value}};class tn extends te{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(N.FLOAT,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(N.FLOAT,e)}catch(i){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new tn().fromBinary(e,r)}static fromJson(e,r){return new tn().fromJson(e,r)}static fromJsonString(e,r){return new tn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(tn,e,r)}}tn.runtime=E,tn.typeName="google.protobuf.FloatValue",tn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),tn.fieldWrapper={wrapField(o){return new tn({value:o})},unwrapField(o){return o.value}};class nn extends te{constructor(e){super(),this.value=he.zero,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(N.INT64,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(N.INT64,e)}catch(i){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new nn().fromBinary(e,r)}static fromJson(e,r){return new nn().fromJson(e,r)}static fromJsonString(e,r){return new nn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(nn,e,r)}}nn.runtime=E,nn.typeName="google.protobuf.Int64Value",nn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),nn.fieldWrapper={wrapField(o){return new nn({value:o})},unwrapField(o){return o.value}};class rn extends te{constructor(e){super(),this.value=he.zero,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(N.UINT64,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(N.UINT64,e)}catch(i){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new rn().fromBinary(e,r)}static fromJson(e,r){return new rn().fromJson(e,r)}static fromJsonString(e,r){return new rn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(rn,e,r)}}rn.runtime=E,rn.typeName="google.protobuf.UInt64Value",rn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),rn.fieldWrapper={wrapField(o){return new rn({value:o})},unwrapField(o){return o.value}};class sn extends te{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(N.INT32,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(N.INT32,e)}catch(i){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new sn().fromBinary(e,r)}static fromJson(e,r){return new sn().fromJson(e,r)}static fromJsonString(e,r){return new sn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(sn,e,r)}}sn.runtime=E,sn.typeName="google.protobuf.Int32Value",sn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),sn.fieldWrapper={wrapField(o){return new sn({value:o})},unwrapField(o){return o.value}};class on extends te{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(N.UINT32,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(N.UINT32,e)}catch(i){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new on().fromBinary(e,r)}static fromJson(e,r){return new on().fromJson(e,r)}static fromJsonString(e,r){return new on().fromJsonString(e,r)}static equals(e,r){return E.util.equals(on,e,r)}}on.runtime=E,on.typeName="google.protobuf.UInt32Value",on.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),on.fieldWrapper={wrapField(o){return new on({value:o})},unwrapField(o){return o.value}};class an extends te{constructor(e){super(),this.value=!1,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(N.BOOL,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(N.BOOL,e)}catch(i){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new an().fromBinary(e,r)}static fromJson(e,r){return new an().fromJson(e,r)}static fromJsonString(e,r){return new an().fromJsonString(e,r)}static equals(e,r){return E.util.equals(an,e,r)}}an.runtime=E,an.typeName="google.protobuf.BoolValue",an.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),an.fieldWrapper={wrapField(o){return new an({value:o})},unwrapField(o){return o.value}};class mt extends te{constructor(e){super(),this.value="",E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(N.STRING,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(N.STRING,e)}catch(i){let a='cannot decode message google.protobuf.StringValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new mt().fromBinary(e,r)}static fromJson(e,r){return new mt().fromJson(e,r)}static fromJsonString(e,r){return new mt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(mt,e,r)}}mt.runtime=E,mt.typeName="google.protobuf.StringValue",mt.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),mt.fieldWrapper={wrapField(o){return new mt({value:o})},unwrapField(o){return o.value}};class ln extends te{constructor(e){super(),this.value=new Uint8Array(0),E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(N.BYTES,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(N.BYTES,e)}catch(i){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new ln().fromBinary(e,r)}static fromJson(e,r){return new ln().fromJson(e,r)}static fromJsonString(e,r){return new ln().fromJsonString(e,r)}static equals(e,r){return E.util.equals(ln,e,r)}}ln.runtime=E,ln.typeName="google.protobuf.BytesValue",ln.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),ln.fieldWrapper={wrapField(o){return new ln({value:o})},unwrapField(o){return o.value}};function Om(o,e,r){try{const i=_a.dec(o);return e?e.fromBinary(i,r):i}catch(i){throw y.from(i,d.DataLoss)}}function Dm(o,e){const r={};for(const[i,a]of Object.entries(o.methods)){const f=e(Object.assign(Object.assign({},a),{localName:i,service:o}));f!=null&&(r[i]=f)}return r}function Wc(o){let e,r=new Uint8Array(0);function i(a){const f=new Uint8Array(r.length+a.length);f.set(r),f.set(a,r.length),r=f}return new ReadableStream({start(){e=o.getReader()},async pull(a){let f;for(;;){if(f===void 0&&r.byteLength>=5){let p=0;for(let v=1;v<5;v++)p=(p<<8)+r[v];f={flags:r[0],length:p}}if(f!==void 0&&r.byteLength>=f.length+5)break;const g=await e.read();if(g.done)break;i(g.value)}if(f===void 0){if(r.byteLength==0){a.close();return}a.error(new y("premature end of stream",d.DataLoss));return}const h=r.subarray(5,5+f.length);r=r.subarray(5+f.length),a.enqueue({flags:f.flags,data:h})}})}function qc(o,e){const r=new Uint8Array(e.length+5);r.set(e,5);const i=new DataView(r.buffer,r.byteOffset,r.byteLength);return i.setUint8(0,o),i.setUint32(1,e.length),r}var Rm=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],r;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(f){r[f]=o[f]&&function(h){return new Promise(function(g,p){h=o[f](h),a(g,p,h.done,h.value)})}}function a(f,h,g,p){Promise.resolve(p).then(function(v){f({value:v,done:g})},h)}},_i=globalThis&&globalThis.__await||function(o){return this instanceof _i?(this.v=o,this):new _i(o)},_m=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(o,e||[]),a,f=[];return a={},g("next"),g("throw"),g("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(I){return function($){return Promise.resolve($).then(I,D)}}function g(I,$){i[I]&&(a[I]=function(Y){return new Promise(function(G,re){f.push([I,Y,G,re])>1||p(I,Y)})},$&&(a[I]=$(a[I])))}function p(I,$){try{v(i[I]($))}catch(Y){P(f[0][3],Y)}}function v(I){I.value instanceof _i?Promise.resolve(I.value.v).then(S,D):P(f[0][2],I)}function S(I){p("next",I)}function D(I){p("throw",I)}function P(I,$){I($),f.shift(),f.length&&p(f[0][0],f[0][1])}},Lm=globalThis&&globalThis.__asyncDelegator||function(o){var e,r;return e={},i("next"),i("throw",function(a){throw a}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(a,f){e[a]=o[a]?function(h){return(r=!r)?{value:_i(o[a](h)),done:!1}:f?f(h):h}:f}};function bm(o){return _m(this,arguments,function*(){yield _i(yield*Lm(Rm(o)))})}var Hc=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],r;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(f){r[f]=o[f]&&function(h){return new Promise(function(g,p){h=o[f](h),a(g,p,h.done,h.value)})}}function a(f,h,g,p){Promise.resolve(p).then(function(v){f({value:v,done:g})},h)}},zr=globalThis&&globalThis.__await||function(o){return this instanceof zr?(this.v=o,this):new zr(o)},Mm=globalThis&&globalThis.__asyncDelegator||function(o){var e,r;return e={},i("next"),i("throw",function(a){throw a}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(a,f){e[a]=o[a]?function(h){return(r=!r)?{value:zr(o[a](h)),done:!1}:f?f(h):h}:f}},Bm=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(o,e||[]),a,f=[];return a={},g("next"),g("throw"),g("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(I){return function($){return Promise.resolve($).then(I,D)}}function g(I,$){i[I]&&(a[I]=function(Y){return new Promise(function(G,re){f.push([I,Y,G,re])>1||p(I,Y)})},$&&(a[I]=$(a[I])))}function p(I,$){try{v(i[I]($))}catch(Y){P(f[0][3],Y)}}function v(I){I.value instanceof zr?Promise.resolve(I.value.v).then(S,D):P(f[0][2],I)}function S(I){p("next",I)}function D(I){p("throw",I)}function P(I,$){I($),f.shift(),f.length&&p(f[0][0],f[0][1])}};function $m(o,e){return Dm(o,r=>{switch(r.kind){case Ze.Unary:return Um(e,o,r);case Ze.ServerStreaming:return Fm(e,o,r);case Ze.ClientStreaming:return zm(e,o,r);case Ze.BiDiStreaming:return jm(e,o,r);default:return null}})}function Um(o,e,r){return async function(i,a){var f,h;const g=await o.unary(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);return(f=a==null?void 0:a.onHeader)===null||f===void 0||f.call(a,g.header),(h=a==null?void 0:a.onTrailer)===null||h===void 0||h.call(a,g.trailer),g.message}}function Fm(o,e,r){return function(i,a){return Gc(o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,bm([i]),a==null?void 0:a.contextValues),a)}}function zm(o,e,r){return async function(i,a){var f,h,g,p,v,S;const D=await o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);(v=a==null?void 0:a.onHeader)===null||v===void 0||v.call(a,D.header);let P;try{for(var I=!0,$=Hc(D.message),Y;Y=await $.next(),f=Y.done,!f;I=!0)p=Y.value,I=!1,P=p}catch(G){h={error:G}}finally{try{!I&&!f&&(g=$.return)&&await g.call($)}finally{if(h)throw h.error}}if(!P)throw new y("protocol error: missing response message",d.Internal);return(S=a==null?void 0:a.onTrailer)===null||S===void 0||S.call(a,D.trailer),P}}function jm(o,e,r){return function(i,a){return Gc(o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues),a)}}function Gc(o,e){const r=function(){var i,a;return Bm(this,arguments,function*(){const f=yield zr(o);(i=e==null?void 0:e.onHeader)===null||i===void 0||i.call(e,f.header),yield zr(yield*Mm(Hc(f.message))),(a=e==null?void 0:e.onTrailer)===null||a===void 0||a.call(e,f.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>r.next()})}}function Vm(...o){const e=new AbortController,r=o.filter(a=>a!==void 0).concat(e.signal);for(const a of r){if(a.aborted){i.apply(a);break}a.addEventListener("abort",i)}function i(){e.signal.aborted||e.abort(Yc(this));for(const a of r)a.removeEventListener("abort",i)}return e}function Jm(o){const e=new AbortController,r=()=>{e.abort(new y("the operation timed out",d.DeadlineExceeded))};let i;return o!==void 0&&(o<=0?r():i=setTimeout(r,o)),{signal:e.signal,cleanup:()=>clearTimeout(i)}}function Yc(o){if(!o.aborted)return;if(o.reason!==void 0)return o.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Qc(){return{get(o){return o.id in this?this[o.id]:o.defaultValue},set(o,e){return this[o.id]=e,this},delete(o){return delete this[o.id],this}}}const Ma=128;function Xc(o){const e=new Headers,r=new TextDecoder().decode(o).split(`\r
`);for(const i of r){if(i==="")continue;const a=i.indexOf(":");if(a>0){const f=i.substring(0,a).trim(),h=i.substring(a+1).trim();e.append(f,h)}}return e}const Km="Content-Type",Wm="Grpc-Timeout",Zc="Grpc-Status",ef="Grpc-Message",qm="Grpc-Status-Details-Bin",Hm="User-Agent",Gm="X-User-Agent",Ym="X-Grpc-Web",Qm="application/grpc-web+proto",Xm="application/grpc-web+json";class Sn extends te{constructor(e){super(),this.code=0,this.message="",this.details=[],E.util.initPartial(e,this)}static fromBinary(e,r){return new Sn().fromBinary(e,r)}static fromJson(e,r){return new Sn().fromJson(e,r)}static fromJsonString(e,r){return new Sn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Sn,e,r)}}Sn.runtime=E,Sn.typeName="google.rpc.Status",Sn.fields=E.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Zt,repeated:!0}]);const Zm="0";function tf(o){var e;const r=o.get(qm);if(r!=null){const a=Om(r,Sn);if(a.code==0)return;const f=new y(a.message,a.code,o);return f.details=a.details.map(h=>({type:h.typeUrl.substring(h.typeUrl.lastIndexOf("/")+1),value:h.value})),f}const i=o.get(Zc);if(i!=null){if(i===Zm)return;const a=parseInt(i,10);return a in d?new y(decodeURIComponent((e=o.get(ef))!==null&&e!==void 0?e:""),a,o):new y(`invalid grpc-status: ${i}`,d.Internal,o)}}function nf(o,e,r){const i=typeof e=="string"?e:e.typeName,a=typeof r=="string"?r:r.name;return o.toString().replace(/\/?$/,`/${i}/${a}`)}function rf(o,e){return e instanceof o?e:new o(e)}function ey(o,e){function r(i){return i.done===!0?i:{done:i.done,value:rf(o,i.value)}}return{[Symbol.asyncIterator](){const i=e[Symbol.asyncIterator](),a={next:()=>i.next().then(r)};return i.throw!==void 0&&(a.throw=f=>i.throw(f).then(r)),i.return!==void 0&&(a.return=f=>i.return(f).then(r)),a}}}function sf(o,e){var r;return(r=e==null?void 0:e.concat().reverse().reduce((i,a)=>a(i),o))!==null&&r!==void 0?r:o}function ty(o){var e;const r=Object.assign({},o);return(e=r.ignoreUnknownFields)!==null&&e!==void 0||(r.ignoreUnknownFields=!0),r}function of(o,e,r,i){const a=e?af(o.I,i):lf(o.I,r);return{parse:(e?af(o.O,i):lf(o.O,r)).parse,serialize:a.serialize}}function af(o,e){return{parse(r){try{return o.fromBinary(r,e)}catch(i){const a=i instanceof Error?i.message:String(i);throw new y(`parse binary: ${a}`,d.InvalidArgument)}},serialize(r){try{return r.toBinary(e)}catch(i){const a=i instanceof Error?i.message:String(i);throw new y(`serialize binary: ${a}`,d.Internal)}}}}function lf(o,e){var r,i;const a=(r=e==null?void 0:e.textEncoder)!==null&&r!==void 0?r:new TextEncoder,f=(i=e==null?void 0:e.textDecoder)!==null&&i!==void 0?i:new TextDecoder,h=ty(e);return{parse(g){try{const p=f.decode(g);return o.fromJsonString(p,h)}catch(p){throw y.from(p,d.InvalidArgument)}},serialize(g){try{const p=g.toJsonString(h);return a.encode(p)}catch(p){throw y.from(p,d.Internal)}}}}function ny(o){const e=sf(o.next,o.interceptors),[r,i,a]=uf(o),f=Object.assign(Object.assign({},o.req),{message:rf(o.req.method.I,o.req.message),signal:r});return e(f).then(h=>(a(),h),i)}function ry(o){const e=sf(o.next,o.interceptors),[r,i,a]=uf(o),f=Object.assign(Object.assign({},o.req),{message:ey(o.req.method.I,o.req.message),signal:r});let h=!1;return r.addEventListener("abort",function(){var g,p;const v=o.req.message[Symbol.asyncIterator]();h||(g=v.throw)===null||g===void 0||g.call(v,this.reason).catch(()=>{}),(p=v.return)===null||p===void 0||p.call(v).catch(()=>{})}),e(f).then(g=>Object.assign(Object.assign({},g),{message:{[Symbol.asyncIterator](){const p=g.message[Symbol.asyncIterator]();return{next(){return p.next().then(v=>(v.done==!0&&(h=!0,a()),v),i)}}}}}),i)}function uf(o){const{signal:e,cleanup:r}=Jm(o.timeoutMs),i=Vm(o.signal,e);return[i.signal,function(f){const h=y.from(e.aborted?Yc(e):f);return i.abort(h),r(),Promise.reject(h)},function(){r(),i.abort()}]}function iy(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function cf(o,e){const r=tf(o);if(r)throw e.forEach((i,a)=>{r.metadata.append(a,i)}),r}function ff(o,e,r,i){const a=new Headers(r??{});return a.set(Km,o?Qm:Xm),a.set(Ym,"1"),a.set(Gm,"connect-es/1.4.0"),i&&a.set(Hm,"connect-es/1.4.0"),e!==void 0&&a.set(Wm,`${e}m`),a}function sy(o){switch(o){case 400:return d.Internal;case 401:return d.Unauthenticated;case 403:return d.PermissionDenied;case 404:return d.Unimplemented;case 429:return d.Unavailable;case 502:return d.Unavailable;case 503:return d.Unavailable;case 504:return d.Unavailable;default:return d.Unknown}}function hf(o,e){var r;if(o>=200&&o<300){const i=tf(e);if(i)throw i;return{foundStatus:e.has(Zc)}}throw new y(decodeURIComponent((r=e.get(ef))!==null&&r!==void 0?r:`HTTP ${o}`),sy(o),e)}var hr=globalThis&&globalThis.__await||function(o){return this instanceof hr?(this.v=o,this):new hr(o)},oy=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(o,e||[]),a,f=[];return a={},g("next"),g("throw"),g("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(I){return function($){return Promise.resolve($).then(I,D)}}function g(I,$){i[I]&&(a[I]=function(Y){return new Promise(function(G,re){f.push([I,Y,G,re])>1||p(I,Y)})},$&&(a[I]=$(a[I])))}function p(I,$){try{v(i[I]($))}catch(Y){P(f[0][3],Y)}}function v(I){I.value instanceof hr?Promise.resolve(I.value.v).then(S,D):P(f[0][2],I)}function S(I){p("next",I)}function D(I){p("throw",I)}function P(I,$){I($),f.shift(),f.length&&p(f[0][0],f[0][1])}};function ay(o){var e;iy();const r=(e=o.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(i,a,f,h,g,p,v){var S;const{serialize:D,parse:P}=of(a,r,o.jsonOptions,o.binaryOptions);return h=h===void 0?o.defaultTimeoutMs:h<=0?void 0:h,await ny({interceptors:o.interceptors,signal:f,timeoutMs:h,req:{stream:!1,service:i,method:a,url:nf(o.baseUrl,i,a),init:{method:"POST",credentials:(S=o.credentials)!==null&&S!==void 0?S:"same-origin",redirect:"error",mode:"cors"},header:ff(r,h,g,!1),contextValues:v??Qc(),message:p},next:async I=>{var $;const G=await(($=o.fetch)!==null&&$!==void 0?$:globalThis.fetch)(I.url,Object.assign(Object.assign({},I.init),{headers:I.header,signal:I.signal,body:qc(0,D(I.message))}));if(hf(G.status,G.headers),!G.body)throw"missing response body";const re=Wc(G.body).getReader();let Te,oe;for(;;){const ge=await re.read();if(ge.done)break;const{flags:pe,data:ke}=ge.value;if(pe===Ma){if(Te!==void 0)throw"extra trailer";Te=Xc(ke);continue}if(oe!==void 0)throw"extra message";oe=P(ke)}if(Te===void 0)throw"missing trailer";if(cf(Te,G.headers),oe===void 0)throw"missing message";return{stream:!1,service:i,method:a,header:G.headers,message:oe,trailer:Te}}})},async stream(i,a,f,h,g,p,v){var S;const{serialize:D,parse:P}=of(a,r,o.jsonOptions,o.binaryOptions);function I(Y,G,re,Te){return oy(this,arguments,function*(){const ge=Wc(Y).getReader();if(G){if(!(yield hr(ge.read())).done)throw"extra data for trailers-only";return yield hr(void 0)}let pe=!1;for(;;){const ke=yield hr(ge.read());if(ke.done)break;const{flags:Sr,data:Tr}=ke.value;if((Sr&Ma)===Ma){if(pe)throw"extra trailer";pe=!0;const ts=Xc(Tr);cf(ts,Te),ts.forEach((qv,Hv)=>re.set(Hv,qv));continue}if(pe)throw"extra message";yield yield hr(P(Tr))}if(!pe)throw"missing trailer"})}async function $(Y){if(a.kind!=Ze.ServerStreaming)throw"The fetch API does not support streaming request bodies";const G=await Y[Symbol.asyncIterator]().next();if(G.done==!0)throw"missing request message";return qc(0,D(G.value))}return h=h===void 0?o.defaultTimeoutMs:h<=0?void 0:h,ry({interceptors:o.interceptors,signal:f,timeoutMs:h,req:{stream:!0,service:i,method:a,url:nf(o.baseUrl,i,a),init:{method:"POST",credentials:(S=o.credentials)!==null&&S!==void 0?S:"same-origin",redirect:"error",mode:"cors"},header:ff(r,h,g,!1),contextValues:v??Qc(),message:p},next:async Y=>{var G;const Te=await((G=o.fetch)!==null&&G!==void 0?G:globalThis.fetch)(Y.url,Object.assign(Object.assign({},Y.init),{headers:Y.header,signal:Y.signal,body:await $(Y.message)})),{foundStatus:oe}=hf(Te.status,Te.headers);if(!Te.body)throw"missing response body";const ge=new Headers;return Object.assign(Object.assign({},Y),{header:Te.headers,trailer:ge,message:I(Te.body,oe,ge,Te.headers)})}})}}}const ee=E.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),Xs=E.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),ly=E.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:Ct},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:ja}}]),Tn=E.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Rf},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:df,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:W},{no:6,name:"is_removed",kind:"scalar",T:8}]),df=E.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:Zs},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Ba,repeated:!0},{no:4,name:"presence_change",kind:"message",T:za}]),Zs=E.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),Ba=E.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:gf,oneof:"body"},{no:2,name:"add",kind:"message",T:pf,oneof:"body"},{no:3,name:"move",kind:"message",T:mf,oneof:"body"},{no:4,name:"remove",kind:"message",T:yf,oneof:"body"},{no:5,name:"edit",kind:"message",T:vf,oneof:"body"},{no:6,name:"select",kind:"message",T:uy,oneof:"body"},{no:7,name:"style",kind:"message",T:wf,oneof:"body"},{no:8,name:"increase",kind:"message",T:Sf,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Tf,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:kf,oneof:"body"}]),gf=E.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:kn},{no:4,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Set"}),pf=E.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"prev_created_at",kind:"message",T:W},{no:3,name:"value",kind:"message",T:kn},{no:4,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Add"}),mf=E.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"prev_created_at",kind:"message",T:W},{no:3,name:"created_at",kind:"message",T:W},{no:4,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Move"}),yf=E.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Remove"}),vf=E.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:dr},{no:3,name:"to",kind:"message",T:dr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:W}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:W},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),uy=E.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:dr},{no:3,name:"to",kind:"message",T:dr},{no:4,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Select"}),wf=E.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:dr},{no:3,name:"to",kind:"message",T:dr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:W},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:W}}],{localName:"Operation_Style"}),Sf=E.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"value",kind:"message",T:kn},{no:3,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Increase"}),Tf=E.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:Li},{no:3,name:"to",kind:"message",T:Li},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:W}},{no:5,name:"contents",kind:"message",T:Df,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:W}],{localName:"Operation_TreeEdit"}),kf=E.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:Li},{no:3,name:"to",kind:"message",T:Li},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:W},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:W}}],{localName:"Operation_TreeStyle"}),kn=E.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:W},{no:2,name:"moved_at",kind:"message",T:W},{no:3,name:"removed_at",kind:"message",T:W},{no:4,name:"type",kind:"enum",T:E.getEnumType(ee)},{no:5,name:"value",kind:"scalar",T:12}]),Ct=E.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:Af,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Ef,oneof:"body"},{no:3,name:"primitive",kind:"message",T:If,oneof:"body"},{no:5,name:"text",kind:"message",T:Cf,oneof:"body"},{no:6,name:"counter",kind:"message",T:Nf,oneof:"body"},{no:7,name:"tree",kind:"message",T:xf,oneof:"body"}]),Af=E.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:Pf,repeated:!0},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"moved_at",kind:"message",T:W},{no:4,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_JSONObject"}),Ef=E.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:$a,repeated:!0},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"moved_at",kind:"message",T:W},{no:4,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_JSONArray"}),If=E.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(ee)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:W},{no:4,name:"moved_at",kind:"message",T:W},{no:5,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_Primitive"}),Cf=E.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:Of,repeated:!0},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"moved_at",kind:"message",T:W},{no:4,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_Text"}),Nf=E.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(ee)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:W},{no:4,name:"moved_at",kind:"message",T:W},{no:5,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_Counter"}),xf=E.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:Fa,repeated:!0},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"moved_at",kind:"message",T:W},{no:4,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_Tree"}),Pf=E.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:Ct}]),$a=E.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:$a},{no:2,name:"element",kind:"message",T:Ct}]),eo=E.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:W},{no:3,name:"is_removed",kind:"scalar",T:8}]),Of=E.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:Ua},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:W},{no:4,name:"ins_prev_id",kind:"message",T:Ua},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:eo}}]),Ua=E.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:W},{no:2,name:"offset",kind:"scalar",T:5}]),Fa=E.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:jr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:W},{no:5,name:"ins_prev_id",kind:"message",T:jr},{no:6,name:"ins_next_id",kind:"message",T:jr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:eo}}]),Df=E.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:Fa,repeated:!0}]),jr=E.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:W},{no:2,name:"offset",kind:"scalar",T:5}]),Li=E.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:jr},{no:2,name:"left_sibling_id",kind:"message",T:jr}]);E.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:We}]),E.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:We},{no:9,name:"updated_at",kind:"message",T:We}]),E.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:mt},{no:2,name:"auth_webhook_url",kind:"message",T:mt},{no:3,name:"auth_webhook_methods",kind:"message",T:cy},{no:4,name:"client_deactivate_threshold",kind:"message",T:mt}]);const cy=E.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"});E.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:We},{no:5,name:"accessed_at",kind:"message",T:We},{no:6,name:"updated_at",kind:"message",T:We}]);const za=E.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(bi)},{no:2,name:"presence",kind:"message",T:ja}]),bi=E.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),ja=E.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),Rf=E.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),dr=E.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:W},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),W=E.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),fy=E.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),hy=E.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(Xs)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:fy}]),dy=E.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),gy=E.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),py=E.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),my=E.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),yy=E.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Tn}]),vy=E.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Tn}]),wy=E.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Tn},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),Sy=E.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:Tn}]),Ty=E.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),ky=E.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:Ay,oneof:"body"},{no:2,name:"event",kind:"message",T:hy,oneof:"body"}]),Ay=E.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),Ey=E.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Tn}]),Iy=E.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Tn}]),Cy=E.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Tn},{no:4,name:"push_only",kind:"scalar",T:8}]),Ny=E.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Tn}]),xy=E.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),Py=E.makeMessageType("yorkie.v1.BroadcastResponse",[]),Oy={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:dy,O:gy,kind:Ze.Unary},deactivateClient:{name:"DeactivateClient",I:py,O:my,kind:Ze.Unary},attachDocument:{name:"AttachDocument",I:yy,O:vy,kind:Ze.Unary},detachDocument:{name:"DetachDocument",I:wy,O:Sy,kind:Ze.Unary},removeDocument:{name:"RemoveDocument",I:Ey,O:Iy,kind:Ze.Unary},pushPullChanges:{name:"PushPullChanges",I:Cy,O:Ny,kind:Ze.Unary},watchDocument:{name:"WatchDocument",I:Ty,O:ky,kind:Ze.ServerStreaming},broadcast:{name:"Broadcast",I:xy,O:Py,kind:Ze.Unary}}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Nt=null;try{Nt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Q(o,e,r){this.low=o|0,this.high=e|0,this.unsigned=!!r}Q.prototype.__isLong__,Object.defineProperty(Q.prototype,"__isLong__",{value:!0});function qe(o){return(o&&o.__isLong__)===!0}function _f(o){var e=Math.clz32(o&-o);return o?31-e:e}Q.isLong=qe;var Lf={},bf={};function gr(o,e){var r,i,a;return e?(o>>>=0,(a=0<=o&&o<256)&&(i=bf[o],i)?i:(r=le(o,0,!0),a&&(bf[o]=r),r)):(o|=0,(a=-128<=o&&o<128)&&(i=Lf[o],i)?i:(r=le(o,o<0?-1:0,!1),a&&(Lf[o]=r),r))}Q.fromInt=gr;function xt(o,e){if(isNaN(o))return e?An:$t;if(e){if(o<0)return An;if(o>=Bf)return jf}else{if(o<=-$f)return ot;if(o+1>=$f)return zf}return o<0?xt(-o,e).neg():le(o%Vr|0,o/Vr|0,e)}Q.fromNumber=xt;function le(o,e,r){return new Q(o,e,r)}Q.fromBits=le;var to=Math.pow;function Va(o,e,r){if(o.length===0)throw Error("empty string");if(typeof e=="number"?(r=e,e=!1):e=!!e,o==="NaN"||o==="Infinity"||o==="+Infinity"||o==="-Infinity")return e?An:$t;if(r=r||10,r<2||36<r)throw RangeError("radix");var i;if((i=o.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return Va(o.substring(1),e,r).neg();for(var a=xt(to(r,8)),f=$t,h=0;h<o.length;h+=8){var g=Math.min(8,o.length-h),p=parseInt(o.substring(h,h+g),r);if(g<8){var v=xt(to(r,g));f=f.mul(v).add(xt(p))}else f=f.mul(a),f=f.add(xt(p))}return f.unsigned=e,f}Q.fromString=Va;function Bt(o,e){return typeof o=="number"?xt(o,e):typeof o=="string"?Va(o,e):le(o.low,o.high,typeof e=="boolean"?e:o.unsigned)}Q.fromValue=Bt;var Mf=65536,Dy=1<<24,Vr=Mf*Mf,Bf=Vr*Vr,$f=Bf/2,Uf=gr(Dy),$t=gr(0);Q.ZERO=$t;var An=gr(0,!0);Q.UZERO=An;var Jr=gr(1);Q.ONE=Jr;var Ff=gr(1,!0);Q.UONE=Ff;var Ja=gr(-1);Q.NEG_ONE=Ja;var zf=le(-1,2147483647,!1);Q.MAX_VALUE=zf;var jf=le(-1,-1,!0);Q.MAX_UNSIGNED_VALUE=jf;var ot=le(0,-2147483648,!1);Q.MIN_VALUE=ot;var b=Q.prototype;b.toInt=function(){return this.unsigned?this.low>>>0:this.low},b.toNumber=function(){return this.unsigned?(this.high>>>0)*Vr+(this.low>>>0):this.high*Vr+(this.low>>>0)},b.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ot)){var r=xt(e),i=this.div(r),a=i.mul(r).sub(this);return i.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var f=xt(to(e,6),this.unsigned),h=this,g="";;){var p=h.div(f),v=h.sub(p.mul(f)).toInt()>>>0,S=v.toString(e);if(h=p,h.isZero())return S+g;for(;S.length<6;)S="0"+S;g=""+S+g}},b.getHighBits=function(){return this.high},b.getHighBitsUnsigned=function(){return this.high>>>0},b.getLowBits=function(){return this.low},b.getLowBitsUnsigned=function(){return this.low>>>0},b.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ot)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&!(e&1<<r);r--);return this.high!=0?r+33:r+1},b.isZero=function(){return this.high===0&&this.low===0},b.eqz=b.isZero,b.isNegative=function(){return!this.unsigned&&this.high<0},b.isPositive=function(){return this.unsigned||this.high>=0},b.isOdd=function(){return(this.low&1)===1},b.isEven=function(){return(this.low&1)===0},b.equals=function(e){return qe(e)||(e=Bt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},b.eq=b.equals,b.notEquals=function(e){return!this.eq(e)},b.neq=b.notEquals,b.ne=b.notEquals,b.lessThan=function(e){return this.comp(e)<0},b.lt=b.lessThan,b.lessThanOrEqual=function(e){return this.comp(e)<=0},b.lte=b.lessThanOrEqual,b.le=b.lessThanOrEqual,b.greaterThan=function(e){return this.comp(e)>0},b.gt=b.greaterThan,b.greaterThanOrEqual=function(e){return this.comp(e)>=0},b.gte=b.greaterThanOrEqual,b.ge=b.greaterThanOrEqual,b.compare=function(e){if(qe(e)||(e=Bt(e)),this.eq(e))return 0;var r=this.isNegative(),i=e.isNegative();return r&&!i?-1:!r&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},b.comp=b.compare,b.negate=function(){return!this.unsigned&&this.eq(ot)?ot:this.not().add(Jr)},b.neg=b.negate,b.add=function(e){qe(e)||(e=Bt(e));var r=this.high>>>16,i=this.high&65535,a=this.low>>>16,f=this.low&65535,h=e.high>>>16,g=e.high&65535,p=e.low>>>16,v=e.low&65535,S=0,D=0,P=0,I=0;return I+=f+v,P+=I>>>16,I&=65535,P+=a+p,D+=P>>>16,P&=65535,D+=i+g,S+=D>>>16,D&=65535,S+=r+h,S&=65535,le(P<<16|I,S<<16|D,this.unsigned)},b.subtract=function(e){return qe(e)||(e=Bt(e)),this.add(e.neg())},b.sub=b.subtract,b.multiply=function(e){if(this.isZero())return this;if(qe(e)||(e=Bt(e)),Nt){var r=Nt.mul(this.low,this.high,e.low,e.high);return le(r,Nt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?An:$t;if(this.eq(ot))return e.isOdd()?ot:$t;if(e.eq(ot))return this.isOdd()?ot:$t;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Uf)&&e.lt(Uf))return xt(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,a=this.high&65535,f=this.low>>>16,h=this.low&65535,g=e.high>>>16,p=e.high&65535,v=e.low>>>16,S=e.low&65535,D=0,P=0,I=0,$=0;return $+=h*S,I+=$>>>16,$&=65535,I+=f*S,P+=I>>>16,I&=65535,I+=h*v,P+=I>>>16,I&=65535,P+=a*S,D+=P>>>16,P&=65535,P+=f*v,D+=P>>>16,P&=65535,P+=h*p,D+=P>>>16,P&=65535,D+=i*S+a*v+f*p+h*g,D&=65535,le(I<<16|$,D<<16|P,this.unsigned)},b.mul=b.multiply,b.divide=function(e){if(qe(e)||(e=Bt(e)),e.isZero())throw Error("division by zero");if(Nt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?Nt.div_u:Nt.div_s)(this.low,this.high,e.low,e.high);return le(r,Nt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?An:$t;var i,a,f;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return An;if(e.gt(this.shru(1)))return Ff;f=An}else{if(this.eq(ot)){if(e.eq(Jr)||e.eq(Ja))return ot;if(e.eq(ot))return Jr;var h=this.shr(1);return i=h.div(e).shl(1),i.eq($t)?e.isNegative()?Jr:Ja:(a=this.sub(e.mul(i)),f=i.add(a.div(e)),f)}else if(e.eq(ot))return this.unsigned?An:$t;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();f=$t}for(a=this;a.gte(e);){i=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var g=Math.ceil(Math.log(i)/Math.LN2),p=g<=48?1:to(2,g-48),v=xt(i),S=v.mul(e);S.isNegative()||S.gt(a);)i-=p,v=xt(i,this.unsigned),S=v.mul(e);v.isZero()&&(v=Jr),f=f.add(v),a=a.sub(S)}return f},b.div=b.divide,b.modulo=function(e){if(qe(e)||(e=Bt(e)),Nt){var r=(this.unsigned?Nt.rem_u:Nt.rem_s)(this.low,this.high,e.low,e.high);return le(r,Nt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},b.mod=b.modulo,b.rem=b.modulo,b.not=function(){return le(~this.low,~this.high,this.unsigned)},b.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},b.clz=b.countLeadingZeros,b.countTrailingZeros=function(){return this.low?_f(this.low):_f(this.high)+32},b.ctz=b.countTrailingZeros,b.and=function(e){return qe(e)||(e=Bt(e)),le(this.low&e.low,this.high&e.high,this.unsigned)},b.or=function(e){return qe(e)||(e=Bt(e)),le(this.low|e.low,this.high|e.high,this.unsigned)},b.xor=function(e){return qe(e)||(e=Bt(e)),le(this.low^e.low,this.high^e.high,this.unsigned)},b.shiftLeft=function(e){return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):le(0,this.low<<e-32,this.unsigned)},b.shl=b.shiftLeft,b.shiftRight=function(e){return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):le(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},b.shr=b.shiftRight,b.shiftRightUnsigned=function(e){return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?le(this.high,0,this.unsigned):le(this.high>>>e-32,0,this.unsigned)},b.shru=b.shiftRightUnsigned,b.shr_u=b.shiftRightUnsigned,b.rotateLeft=function(e){var r;return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(r=32-e,le(this.low<<e|this.high>>>r,this.high<<e|this.low>>>r,this.unsigned)):(e-=32,r=32-e,le(this.high<<e|this.low>>>r,this.low<<e|this.high>>>r,this.unsigned))},b.rotl=b.rotateLeft,b.rotateRight=function(e){var r;return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(r=32-e,le(this.high<<r|this.low>>>e,this.low<<r|this.high>>>e,this.unsigned)):(e-=32,r=32-e,le(this.low<<r|this.high>>>e,this.high<<r|this.low>>>e,this.unsigned))},b.rotr=b.rotateRight,b.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},b.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},b.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},b.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},b.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},Q.fromBytes=function(e,r,i){return i?Q.fromBytesLE(e,r):Q.fromBytesBE(e,r)},Q.fromBytesLE=function(e,r){return new Q(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},Q.fromBytesBE=function(e,r){return new Q(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)};const Ry=E.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);E.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:wn}]),E.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]),E.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:_y,repeated:!0}]);const _y=E.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});E.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:Ly,repeated:!0}]);const Ly=E.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});E.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:by,repeated:!0}]);const by=E.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});E.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]),E.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]),E.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:My,repeated:!0}]);const My=E.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});E.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var se=(o=>(o.Ok="ok",o.ErrClientNotActivated="ErrClientNotActivated",o.ErrClientNotFound="ErrClientNotFound",o.ErrUnimplemented="ErrUnimplemented",o.Unsupported="unsupported",o.ErrDocumentNotAttached="ErrDocumentNotAttached",o.ErrDocumentNotDetached="ErrDocumentNotDetached",o.ErrDocumentRemoved="ErrDocumentRemoved",o.ErrInvalidObjectKey="ErrInvalidObjectKey",o.ErrInvalidArgument="ErrInvalidArgument",o))(se||{});class ue extends Error{constructor(e,r){super(r),u(this,"name","YorkieError"),u(this,"stack"),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function Ut(o){if(o instanceof Map){const e=Array.from(o);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(o))}const Vf=o=>o?Object.entries(o).length===0:!0,Kr=o=>{const e={};for(const[r,i]of Object.entries(o))e[r]=JSON.stringify(i);return e},Wr=o=>{const e={};for(const[r,i]of Object.entries(o))e[r]=JSON.parse(i);return e};var $n=(o=>(o.Put="put",o.Clear="clear",o))($n||{});class Ka{constructor(e,r){u(this,"context"),u(this,"presence"),this.context=e,this.presence=r}set(e,r){for(const i of Object.keys(e))this.presence[i]=e[i];this.context.setPresenceChange({type:"put",presence:Ut(this.presence)}),this.context.setReversePresence(e,r)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const no="000000000000000000000000",By="FFFFFFFFFFFFFFFFFFFFFFFF";class et{constructor(e,r,i){u(this,"lamport"),u(this,"delimiter"),u(this,"actorID"),this.lamport=e,this.delimiter=r,this.actorID=i}static of(e,r,i){return new et(e,r,i)}static fromStruct(e){return et.of(Q.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new et(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const r=this.actorID.localeCompare(e.actorID);return r!==0?r:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Wa=0,$y=4294967295,Uy=Q.MAX_VALUE,Ft=new et(Q.fromNumber(0),Wa,no);new et(Q.fromNumber(1),Wa+1,no);const Mi=new et(Uy,$y,By);var He=(o=>(o[o.Trivial=0]="Trivial",o[o.Debug=1]="Debug",o[o.Info=2]="Info",o[o.Warn=3]="Warn",o[o.Error=4]="Error",o[o.Fatal=5]="Fatal",o))(He||{});let pr=2;function qa(o){pr=o}const R={trivial:(...o)=>{pr>0||typeof console<"u"&&console.log("YORKIE T:",...o)},debug:(...o)=>{pr>1||typeof console<"u"&&console.log("YORKIE D:",...o)},info:(...o)=>{pr>2||typeof console<"u"&&console.log("YORKIE I:",...o)},warn:(...o)=>{pr>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...o):console.log("YORKIE W:",...o))},error:(...o)=>{pr>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...o):console.log("YORKIE E:",...o))},fatal:(o,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${o}`)},isEnabled:o=>pr<=o};function un(o){return o.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Bi{constructor(e){u(this,"createdAt"),u(this,"movedAt"),u(this,"removedAt"),this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Un extends Bi{constructor(e){super(e)}}class Ha{constructor(e,r){u(this,"strKey"),u(this,"value"),this.strKey=e,this.value=r}static of(e,r){return new Ha(e,r)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class $i{constructor(){u(this,"nodeMapByKey"),u(this,"nodeMapByCreatedAt"),this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new $i}set(e,r,i){let a;const f=this.nodeMapByKey.get(e);f!=null&&!f.isRemoved()&&f.remove(i)&&(a=f.getValue());const h=Ha.of(e,r);return this.nodeMapByCreatedAt.set(r.getCreatedAt().toIDString(),h),(f==null||i.after(f.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,h),r.setMovedAt(i)),a}delete(e,r){this.nodeMapByCreatedAt.has(e.toIDString())||R.fatal(`fail to find ${e.toIDString()}`);const i=this.nodeMapByCreatedAt.get(e.toIDString());return i.remove(r),i.getValue()}subPathOf(e){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(r)return r.getStrKey()}purge(e){const r=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!r){R.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const i=this.nodeMapByKey.get(r.getStrKey());r===i&&this.nodeMapByKey.delete(i.getStrKey()),this.nodeMapByCreatedAt.delete(r.getValue().getCreatedAt().toIDString())}deleteByKey(e,r){const i=this.nodeMapByKey.get(e);if(i!=null&&i.remove(r))return i.getValue()}has(e){const r=this.nodeMapByKey.get(e);return r==null?!1:!r.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const r=this.nodeMapByKey.get(e);if(!(!r||r.isRemoved()))return r}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class at extends Un{constructor(e,r){super(e),u(this,"memberNodes"),this.memberNodes=r}static create(e,r){if(!r)return new at(e,$i.create());const i=$i.create();for(const[a,f]of Object.entries(r))i.set(a,f.deepcopy(),f.getCreatedAt());return new at(e,i)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,r,i){return this.memberNodes.set(e,r,i)}delete(e,r){return this.memberNodes.delete(e,r)}deleteByKey(e,r){return this.memberNodes.deleteByKey(e,r)}get(e){const r=this.memberNodes.get(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.memberNodes.getByID(e);return r==null?void 0:r.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[r,i]of this)e.push(`"${un(r)}":${i.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[r,i]of this){const{createdAt:a,value:f,type:h}=i.toJSForTest();e[r]={key:r,createdAt:a,value:f,type:h}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[r]of this)e.push(r);return e}toSortedJSON(){var e;const r=Array();for(const[a]of this)r.push(a);const i=[];for(const a of r.sort()){const f=(e=this.memberNodes.get(a))==null?void 0:e.getValue();i.push(`"${un(a)}":${f.toSortedJSON()}`)}return`{${i.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=at.create(this.getCreatedAt());for(const r of this.memberNodes)e.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const r of this.memberNodes){const i=r.getValue();if(e(i,this))return;i instanceof Un&&i.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const r of this.memberNodes)e.has(r.getStrKey())||(e.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var de=(o=>(o.Local="local",o.Remote="remote",o.UndoRedo="undoredo",o))(de||{});class zt{constructor(e,r){u(this,"parentCreatedAt"),u(this,"executedAt"),this.parentCreatedAt=e,this.executedAt=r}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Jf{constructor(e){u(this,"value"),u(this,"left"),u(this,"right"),u(this,"parent"),u(this,"weight"),this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Ui{constructor(e){u(this,"root"),this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let r=this.root;for(;;)if(r.hasLeft()&&e<=r.getLeftWeight())r=r.getLeft();else if(r.hasRight()&&r.getLeftWeight()+r.getLength()<e)e-=r.getLeftWeight()+r.getLength(),r=r.getRight();else{e-=r.getLeftWeight();break}return e>r.getLength()&&R.fatal(`out of index range: pos: ${e} > node.length: ${r.getLength()}`),[r,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let r=0,i=e,a;for(;i;)(!a||a===i.getRight())&&(r+=i.getLength()+(i.hasLeft()?i.getLeftWeight():0)),a=i,i=i.getParent();return r-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,r){return e?(this.splayNode(e),this.root=r,r.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(r),r.setLeft(e),e.setParent(r),e.setRight(),this.updateWeight(e),this.updateWeight(r),r):(this.root=r,r)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const r=new Ui(e.getLeft());r.root&&r.root.setParent();const i=new Ui(e.getRight());if(i.root&&i.root.setParent(),r.root){const a=r.getRightmost();r.splayNode(a),r.root.setRight(i.root),i.root&&i.root.setParent(r.root),this.root=r.root}else this.root=i.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,r){if(!r){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(r),r.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const r=[];this.traversePostorder(e.getRight(),r);for(const i of r)i.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(r=>`[${r.getWeight()},${r.getLength()}]${r.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const r of e)if(r.getWeight()!=r.getLength()+r.getLeftWeight()+r.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,r){e&&(this.traverseInorder(e.getLeft(),r),r.push(e),this.traverseInorder(e.getRight(),r))}traversePostorder(e,r){e&&(this.traversePostorder(e.getLeft(),r),this.traversePostorder(e.getRight(),r),r.push(e))}rotateLeft(e){const r=e.getParent();r.hasParent()?r===r.getParent().getLeft()?r.getParent().setLeft(e):r.getParent().setRight(e):this.root=e,e.setParent(r.getParent()),r.setRight(e.getLeft()),r.hasRight()&&r.getRight().setParent(r),e.setLeft(r),e.getLeft().setParent(e),this.updateWeight(r),this.updateWeight(e)}rotateRight(e){const r=e.getParent();r.hasParent()?r===r.getParent().getLeft()?r.getParent().setLeft(e):r.getParent().setRight(e):this.root=e,e.setParent(r.getParent()),r.setLeft(e.getRight()),r.hasLeft()&&r.getLeft().setParent(r),e.setRight(r),e.getRight().setParent(e),this.updateWeight(r),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Me=(o=>(o[o.Null=0]="Null",o[o.Boolean=1]="Boolean",o[o.Integer=2]="Integer",o[o.Long=3]="Long",o[o.Double=4]="Double",o[o.String=5]="String",o[o.Bytes=6]="Bytes",o[o.Date=7]="Date",o))(Me||{});class Se extends Bi{constructor(e,r){super(r),u(this,"valueType"),u(this,"value"),this.valueType=Se.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,r){return new Se(e,r)}static valueFromBytes(e,r){switch(e){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(a,f){i.setUint8(f,a)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return Q.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(Q.fromBytesLE(Array.from(r),!0).toNumber());default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${un(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=Se.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Q)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return Se.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const e=this.value,r=Q.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class ro extends Jf{constructor(e){super(e),u(this,"prev"),u(this,"next"),this.value=e}static createAfter(e,r){const i=new ro(r),a=e.next;return e.next=i,i.prev=e,i.next=a,a&&(a.prev=i),i}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Fi{constructor(){u(this,"dummyHead"),u(this,"last"),u(this,"nodeMapByIndex"),u(this,"nodeMapByCreatedAt");const e=Se.of(0,Ft);e.setRemovedAt(Ft),this.dummyHead=new ro(e),this.last=this.dummyHead,this.nodeMapByIndex=new Ui,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Fi}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,r){let i=this.nodeMapByCreatedAt.get(e.toIDString());for(i||R.fatal(`cant find the given node: ${e.toIDString()}`);i.getNext()&&i.getNext().getPositionedAt().after(r);)i=i.getNext();return i}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,r,i=r.getCreatedAt()){const a=this.findNextBeforeExecutedAt(e,i),f=ro.createAfter(a,r);a===this.last&&(this.last=f),this.nodeMapByIndex.insertAfter(a,f),this.nodeMapByCreatedAt.set(f.getCreatedAt().toIDString(),f)}moveAfter(e,r,i){const a=this.nodeMapByCreatedAt.get(e.toIDString());a||R.fatal(`cant find the given node: ${e.toIDString()}`);const f=this.nodeMapByCreatedAt.get(r.toIDString());f||R.fatal(`cant find the given node: ${r.toIDString()}`),a!==f&&(!f.getValue().getMovedAt()||i.after(f.getValue().getMovedAt()))&&(this.release(f),this.insertAfter(a.getCreatedAt(),f.getValue(),i),f.getValue().setMovedAt(i))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(r)return String(this.nodeMapByIndex.indexOf(r))}purge(e){const r=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());r||R.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(r)}getByIndex(e){if(e>=this.length)return;const[r,i]=this.nodeMapByIndex.find(e);let a=r;if(e===0&&r===this.dummyHead||i>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(e){let r=this.nodeMapByCreatedAt.get(e.toIDString());do r=r.getPrev();while(this.dummyHead!==r&&r.isRemoved());return r.getValue().getCreatedAt()}delete(e,r){const i=this.nodeMapByCreatedAt.get(e.toIDString()),a=i.isRemoved();return i.remove(r)&&!a&&this.nodeMapByIndex.splayNode(i),i.getValue()}deleteByIndex(e,r){const i=this.getByIndex(e);if(i)return i.remove(r)&&this.nodeMapByIndex.splayNode(i),i.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const r of this){const i=`${r.getCreatedAt().toIDString()}:${r.getValue().toJSON()}`;r.isRemoved()?e.push(`{${i}}`):e.push(`[${i}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class yt extends Un{constructor(e,r){super(e),u(this,"elements"),this.elements=r}static create(e,r){if(!r)return new yt(e,Fi.create());const i=Fi.create();for(const a of r)i.insertAfter(i.getLastCreatedAt(),a.deepcopy());return new yt(e,i)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,r){this.elements.insertAfter(e,r)}moveAfter(e,r,i){this.elements.moveAfter(e,r,i)}get(e){const r=this.elements.getByIndex(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.elements.getByID(e);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,r){return this.elements.delete(e,r)}deleteByIndex(e,r){return this.elements.deleteByIndex(e,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const r of this.elements){const i=r.getValue();if(e(i,this))return;i instanceof Un&&i.getDescendants(e)}}toJSON(){const e=[];for(const r of this)e.push(r.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let r=0;r<this.length;r++){const{createdAt:i,value:a,type:f}=this.get(r).toJSForTest();e[r]={key:String(r),createdAt:i,value:a,type:f}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=yt.create(this.getCreatedAt());for(const r of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),r.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class Fn extends zt{constructor(e,r,i){super(e,i),u(this,"createdAt"),this.createdAt=r}static create(e,r,i){return new Fn(e,r,i)}execute(e,r){var i;const a=e.findByCreatedAt(this.getParentCreatedAt());if(a||R.fatal(`fail to find ${this.getParentCreatedAt()}`),a instanceof Un||R.fatal(`only object and array can execute remove: ${a}`),r===de.UndoRedo){let v=a.getByID(this.createdAt);for(;v;){if(v.getRemovedAt())return;v=(i=e.findElementPairByCreatedAt(v.getCreatedAt()))==null?void 0:i.parent}}const f=a.subPathOf(this.createdAt),h=this.toReverseOperation(a),g=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(g),{opInfos:a instanceof yt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(f)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:f}],reverseOp:h}}toReverseOperation(e){if(e instanceof at){const r=e.subPathOf(this.createdAt);if(r!==void 0){const i=e.get(r);if(i!==void 0)return mr.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class mr extends zt{constructor(e,r,i,a){super(i,a),u(this,"key"),u(this,"value"),this.key=e,this.value=r}static create(e,r,i,a){return new mr(e,r,i,a)}execute(e,r){var i;const a=e.findByCreatedAt(this.getParentCreatedAt());if(a||R.fatal(`fail to find ${this.getParentCreatedAt()}`),a instanceof at||R.fatal("fail to execute, only object can execute set"),r===de.UndoRedo){let v=a;for(;v;){if(v.getRemovedAt())return;v=(i=e.findElementPairByCreatedAt(v.getCreatedAt()))==null?void 0:i.parent}}const f=a.get(this.key),h=this.toReverseOperation(f),g=this.value.deepcopy(),p=a.set(this.key,g,this.getExecutedAt());return r===de.UndoRedo&&e.findByCreatedAt(g.getCreatedAt())&&e.deregisterElement(g),e.registerElement(g,a),p&&e.registerRemovedElement(p),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:h}}toReverseOperation(e){let r=Fn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(r=mr.create(this.key,e.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class zi extends zt{constructor(e,r,i,a){super(e,a),u(this,"prevCreatedAt"),u(this,"value"),this.prevCreatedAt=r,this.value=i}static create(e,r,i,a){return new zi(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof yt||R.fatal("fail to execute, only array can execute add");const i=r,a=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,a),e.registerElement(a,i),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class zn extends zt{constructor(e,r,i,a){super(e,a),u(this,"prevCreatedAt"),u(this,"createdAt"),this.prevCreatedAt=r,this.createdAt=i}static create(e,r,i,a){return new zn(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof yt||R.fatal("fail to execute, only array can execute move");const i=r,a=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const f=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:f,previousIndex:a}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class yr{constructor(e,r,i,a){u(this,"key"),u(this,"value"),u(this,"updatedAt"),u(this,"_isRemoved"),this.key=e,this.value=r,this.updatedAt=i,this._isRemoved=a}static of(e,r,i,a){return new yr(e,r,i,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class En{constructor(){u(this,"nodeMapByKey"),u(this,"numberOfRemovedElement"),this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new En}getNodeMapByKey(){return this.nodeMapByKey}set(e,r,i){const a=this.nodeMapByKey.get(e);if(a&&a.isRemoved()&&i.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||i.after(a.getUpdatedAt())){const f=yr.of(e,r,i,!1);return this.nodeMapByKey.set(e,f),a!==void 0&&a.isRemoved()?[a,f]:[void 0,f]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(e,r,i,a){const f=yr.of(e,r,i,a);this.nodeMapByKey.set(e,f),a&&this.numberOfRemovedElement++}remove(e,r){const i=this.nodeMapByKey.get(e),a=[];if(i===void 0||r.after(i.getUpdatedAt())){if(i===void 0){this.numberOfRemovedElement+=1;const g=yr.of(e,"",r,!0);return this.nodeMapByKey.set(e,g),a.push(g),a}const f=i.isRemoved();f||(this.numberOfRemovedElement+=1),f&&a.push(i);const h=yr.of(e,i.getValue(),r,!0);return this.nodeMapByKey.set(e,h),a.push(h),a}return a}has(e){if(this.nodeMapByKey.has(e)){const r=this.nodeMapByKey.get(e);return r!==void 0&&!r.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new En;for(const[,r]of this.nodeMapByKey)e.setInternal(r.getKey(),r.getValue(),r.getUpdatedAt(),r.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[r,i]of this.nodeMapByKey)i.isRemoved()||e.push(`"${un(r)}":"${un(i.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[r,i]of this.nodeMapByKey)i.isRemoved()||(e[r]=i.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const r=this.nodeMapByKey.get(e.getKey());r==null||r.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class ji{constructor(e){u(this,"attributes"),u(this,"content"),this.attributes=En.create(),this.content=e}static create(e){return new ji(e)}get length(){return this.content.length}substring(e,r){const i=new ji(this.content.substring(e,r));return i.attributes=this.attributes.deepcopy(),i}setAttr(e,r,i){return this.attributes.set(e,r,i)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=un(this.content),r=this.attributes.toObject(),i=[];for(const[a,f]of Object.entries(r)){const h=JSON.parse(f),g=typeof h=="string"?`"${un(a)}":"${un(h)}"`:`"${un(a)}":${String(h)}`;i.push(g)}return i.sort(),i.length===0?`{"val":"${e}"}`:`{"attrs":{${i.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof yr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const r of this.attributes)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}class Pt extends Bi{constructor(e,r){super(r),u(this,"rgaTreeSplit"),this.rgaTreeSplit=e}static create(e,r){return new Pt(e,r)}edit(e,r,i,a,f){const h=r?ji.create(r):void 0;if(h&&a)for(const[P,I]of Object.entries(a))h.setAttr(P,I,i);const[g,p,v,S]=this.rgaTreeSplit.edit(e,i,h,f),D=S.map(P=>({...P,value:P.value?{attributes:Wr(P.value.getAttributes()),content:P.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[p,D,v,[g,g]]}setStyle(e,r,i,a){const[,f]=this.rgaTreeSplit.findNodeWithSplit(e[1],i),[,h]=this.rgaTreeSplit.findNodeWithSplit(e[0],i),g=[],p=this.rgaTreeSplit.findBetween(h,f),v=new Map,S=[];for(const P of p){const I=P.getCreatedAt().getActorID(),$=a!=null&&a.size?a.has(I)?a.get(I):Ft:Mi;if(P.canStyle(i,$)){const Y=v.get(I),G=P.getCreatedAt();(!Y||G.after(Y))&&v.set(I,G),S.push(P)}}const D=[];for(const P of S){if(P.isRemoved())continue;const[I,$]=this.rgaTreeSplit.findIndexesFromRange(P.createPosRange());g.push({type:"style",actor:i.getActorID(),from:I,to:$,value:{attributes:Wr(r)}});for(const[Y,G]of Object.entries(r)){const[re]=P.getValue().setAttr(Y,G,i);re!==void 0&&D.push({parent:P.getValue(),child:re})}}return[v,D,g]}indexRangeToPosRange(e,r){const i=this.rgaTreeSplit.indexToPos(e);return e===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const e=[];for(const r of this.rgaTreeSplit)r.isRemoved()||e.push(r.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();e.push({attributes:Wr(i.getAttributes()),content:i.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Pt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())e.push(i)}return e}}class Vi extends zt{constructor(e,r,i,a,f,h,g){super(e,g),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"content"),u(this,"attributes"),this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=a,this.content=f,this.attributes=h}static create(e,r,i,a,f,h,g){return new Vi(e,r,i,a,f,h,g)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Pt||R.fatal("fail to execute, only Text can execute edit");const i=r,[,a,f]=i.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const h of f)e.registerGCPair(h);return{opInfos:a.map(({from:h,to:g,value:p})=>({type:"edit",from:h,to:g,value:p,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),a=this.content;return`${e}.EDIT(${r},${i},${a})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Ji extends zt{constructor(e,r,i,a,f,h){super(e,h),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"attributes"),this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=a,this.attributes=f}static create(e,r,i,a,f,h){return new Ji(e,r,i,a,f,h)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Pt||R.fatal("fail to execute, only Text can execute edit");const i=r,[,a,f]=i.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const h of a)e.registerGCPair(h);return{opInfos:f.map(({from:h,to:g,value:p})=>({type:"style",from:h,to:g,value:p,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),a=this.attributes;return`${e}.STYL(${r},${i},${JSON.stringify(a)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const Fy=2,zy="root",In="text";function Ki(o,e){let r=0;const i=o.children;for(let a=0;a<e;a++){const f=i[a];!f||f.isRemoved||(r+=f.paddedSize)}return r}class jy{constructor(e,r=[]){if(u(this,"type"),u(this,"parent"),u(this,"_children"),u(this,"size"),this.type=e,this.size=0,this._children=r,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const r=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*r,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const r of this._children){const i=r.updateDescendantsSize();r.isRemoved||(e+=i)}return this.size+=e,this.paddedSize}get isText(){return this.type===In}get paddedSize(){return this.size+(this.isText?0:Fy)}isAncestorOf(e){return Vy(this,e)}get nextSibling(){const e=this.parent.findOffset(this),r=this.parent.children[e+1];if(r)return r}get prevSibling(){const e=this.parent.findOffset(this),r=this.parent.children[e-1];if(r)return r}splitText(e,r){if(e===0||e===this.size)return;const i=this.value.slice(0,e),a=this.value.slice(e);if(!a.length)return;this.value=i;const f=this.cloneText(e+r);return f.value=a,this.parent.insertAfterInternal(f,this),f}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const r of e)r.parent=this,r.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const r of e)r.parent=this}insertBefore(e,r){if(this.isText)throw new Error("Text node cannot have children");const i=this._children.indexOf(r);if(i===-1)throw new Error("child not found");this.insertAtInternal(e,i),e.updateAncestorsSize()}insertAfter(e,r){if(this.isText)throw new Error("Text node cannot have children");const i=this._children.indexOf(r);if(i===-1)throw new Error("child not found");this.insertAtInternal(e,i+1),e.updateAncestorsSize()}insertAt(e,r){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,r),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new Error("child not found");this._children.splice(r,1),e.parent=void 0}splitElement(e,r){const i=this.cloneElement(r);this.parent.insertAfterInternal(i,this),i.updateAncestorsSize();const a=this.children.slice(0,e),f=this.children.slice(e);this._children=a,i._children=f,this.size=this._children.reduce((h,g)=>h+g.paddedSize,0),i.size=i._children.reduce((h,g)=>h+g.paddedSize,0);for(const h of i._children)h.parent=i;return i}insertAfterInternal(e,r){if(this.isText)throw new Error("Text node cannot have children");const i=this._children.indexOf(r);if(i===-1)throw new Error("child not found");this.insertAtInternal(e,i+1)}insertAtInternal(e,r){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(r,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const r=this._children.indexOf(e);return this.allChildren.splice(0,r).filter(a=>!a.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let r=e;for(;r;){const i=this._children.indexOf(r);if(i!==-1)return i;r=r.parent}return-1}}function Vy(o,e){if(o===e)return!1;for(;e.parent;){if(e.parent===o)return!0;e=e.parent}return!1}var _e=(o=>(o.Start="Start",o.End="End",o.Text="Text",o))(_e||{});function Kf(o,e,r,i){if(e>r)throw new Error(`from is greater than to: ${e} > ${r}`);if(e>o.size)throw new Error(`from is out of range: ${e} > ${o.size}`);if(r>o.size)throw new Error(`to is out of range: ${r} > ${o.size}`);if(e===r)return;let a=0;for(const f of o.children){if(e-f.paddedSize<a&&a<r){const h=f.isText?e-a:e-a-1,g=f.isText?r-a:r-a-1,p=!f.isText&&h<0,v=!f.isText&&g>f.size;(f.isText||p)&&i([f,f.isText?"Text":"Start"],v),Kf(f,Math.max(0,h),Math.min(g,f.size),i),v&&i([f,"End"],v)}a+=f.paddedSize}}function Wf(o,e,r=0){for(const i of o.children)Wf(i,e,r+1);e(o,r)}function io(o,e,r=0){for(const i of o._children)io(i,e,r+1);e(o,r)}function Ga(o,e,r=!0){if(e>o.size)throw new Error(`index is out of range: ${e} > ${o.size}`);if(o.isText)return{node:o,offset:e};let i=0,a=0;for(const f of o.children){if(r&&f.isText&&f.size>=e-a)return Ga(f,e-a,r);if(e===a)return{node:o,offset:i};if(!r&&f.paddedSize===e-a)return{node:o,offset:i+1};if(f.paddedSize>e-a)return Ga(f,e-a-1,r);a+=f.paddedSize,i+=1}return{node:o,offset:i}}function qf(o){return o.isText||o.children.length===0?o:qf(o.children[0])}function Jy(o,e){if(o.size<e)throw new Error("unacceptable path");for(let r=0;r<o.children.length;r++){const i=o.children[r];if(i.size<e)e-=i.size;else{o=i;break}}return{node:o,offset:e}}class Ky{constructor(e){u(this,"root"),this.root=e}tokensBetween(e,r,i){Kf(this.root,e,r,i)}traverse(e){Wf(this.root,e,0)}traverseAll(e){io(this.root,e,0)}findTreePos(e,r=!0){return Ga(this.root,e,r)}treePosToPath(e){const r=[];let i=e.node;if(i.isText){const a=i.parent.findOffset(i);if(a===-1)throw new Error("invalid treePos");const f=Ki(i.parent,a);r.push(f+e.offset),i=i.parent}else if(i.hasTextChild()){const a=Ki(i,e.offset);r.push(a)}else r.push(e.offset);for(;i.parent;){const a=i.parent.findOffset(i);if(a===-1)throw new Error("invalid treePos");r.push(a),i=i.parent}return r.reverse()}pathToIndex(e){const r=this.pathToTreePos(e);return this.indexOf(r)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let r=this.root;for(let i=0;i<e.length-1;i++){const a=e[i];if(r=r.children[a],!r)throw new Error("unacceptable path")}if(r.hasTextChild())return Jy(r,e[e.length-1]);if(r.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:r,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:r,offset:i}=e;if(r.isText){if(r.size===i){const a=r.nextSibling;return a||r.parent}return r}return r.children.length===i?r:qf(r.children[i])}indexOf(e){let{node:r}=e;const{offset:i}=e;let a=0,f=1;if(r.isText){a+=i;const h=r.parent,g=h.findOffset(r);if(g===-1)throw new Error("invalid pos");a+=Ki(h,g),r=r.parent}else a+=Ki(r,i);for(;r!=null&&r.parent;){const h=r.parent,g=h.findOffset(r);if(g===-1)throw new Error("invalid pos");a+=Ki(h,g),f++,r=r.parent}return a+f-1}indexToPath(e){const r=this.findTreePos(e);return this.treePosToPath(r)}}const Wy=(o,e)=>o===e?0:o<e?-1:1;class qy{constructor(e,r,i){u(this,"key"),u(this,"value"),u(this,"parent"),u(this,"left"),u(this,"right"),u(this,"isRed"),this.key=e,this.value=r,this.isRed=i}}class Hy{constructor(e){u(this,"stack"),this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Hf{constructor(e){u(this,"root"),u(this,"comparator"),u(this,"counter"),this.comparator=typeof e<"u"?e:Wy,this.counter=0}put(e,r){return this.root=this.putInternal(e,r,this.root),this.root.isRed=!1,r}get(e){const r=this.getInternal(e,this.root);return r?r.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new Hy(this.root)}values(){const e=[];for(const r of this.getIterator().stack)e.push(r.value);return e}floorEntry(e){let r=this.root;for(;r;){const i=this.comparator(e,r.key);if(i>0)if(r.right)r.right.parent=r,r=r.right;else return r;else if(i<0)if(r.left)r.left.parent=r,r=r.left;else{let a=r.parent,f=r;for(;a&&f===a.left;)f=a,a=a.parent;return a}else return r}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,r){for(;r;){const i=this.comparator(e,r.key);if(i===0)return r;i<0?r=r.left:i>0&&(r=r.right)}}putInternal(e,r,i){if(!i)return this.counter+=1,new qy(e,r,!0);const a=this.comparator(e,i.key);return a<0?i.left=this.putInternal(e,r,i.left):a>0?i.right=this.putInternal(e,r,i.right):i.value=r,this.isRed(i.right)&&!this.isRed(i.left)&&(i=this.rotateLeft(i)),this.isRed(i.left)&&this.isRed(i.left.left)&&(i=this.rotateRight(i)),this.isRed(i.left)&&this.isRed(i.right)&&this.flipColors(i),i}removeInternal(e,r){if(this.comparator(r,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,r);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(r,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(r,e.key)===0){this.counter-=1;const i=this.min(e.right);e.value=i.value,e.key=i.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,r)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const r=e.right;return e.right=r.left,r.left=e,r.isRed=r.left.isRed,r.left.isRed=!0,r}rotateRight(e){const r=e.left;return e.left=r.right,r.right=e,r.isRed=r.right.isRed,r.right.isRed=!0,r}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class jt{constructor(e,r){u(this,"parentID"),u(this,"leftSiblingID"),this.parentID=e,this.leftSiblingID=r}static of(e,r){return new jt(e,r)}static fromTreePos(e){const{offset:r}=e;let{node:i}=e,a;return i.isText?(i.parent.children[0]===i&&r===0?a=i.parent:a=i,i=i.parent):r===0?a=i:a=i.children[r-1],jt.of(i.id,ze.of(a.getCreatedAt(),a.getOffset()+r))}getParentID(){return this.parentID}static fromStruct(e){return jt.of(ze.of(et.fromStruct(e.parentID.createdAt),e.parentID.offset),ze.of(et.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const r=this.getParentID(),i=this.getLeftSiblingID(),a=e.findFloorNode(r);let f=e.findFloorNode(i);if(!a||!f)throw new Error(`cannot find node of CRDTTreePos(${r.toTestString()}, ${i.toTestString()})`);return!i.equals(r)&&i.getOffset()>0&&i.getOffset()===f.id.getOffset()&&f.insPrevID&&(f=e.findFloorNode(f.insPrevID)),[a,f]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class ze{constructor(e,r){u(this,"createdAt"),u(this,"offset"),this.createdAt=e,this.offset=r}static of(e,r){return new ze(e,r)}static fromStruct(e){return ze.of(et.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,r)=>{const i=e.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class vt extends jy{constructor(e,r,i,a,f){super(r),u(this,"id"),u(this,"removedAt"),u(this,"attrs"),u(this,"insPrevID"),u(this,"insNextID"),u(this,"_value",""),this.id=e,this.removedAt=f,a&&(this.attrs=a),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,r,i,a){return new vt(e,r,i,a)}deepcopy(){var e;const r=new vt(this.id,this.type);return r.removedAt=this.removedAt,r._value=this._value,r.size=this.size,r.attrs=(e=this.attrs)==null?void 0:e.deepcopy(),r._children=this._children.map(i=>{const a=i.deepcopy();return a.parent=r,a}),r.insPrevID=this.insPrevID,r.insNextID=this.insNextID,r}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),r&&this.updateAncestorsSize()}cloneText(e){return new vt(ze.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new vt(ze.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,r,i){const a=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(a){if(a.insPrevID=this.id,this.insNextID){const f=e.findFloorNode(this.insNextID);f.insPrevID=a.id,a.insNextID=this.insNextID}this.insNextID=a.id,e.registerNode(a)}return a}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,r){return this.isText?!1:!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,r){this.attrs||(this.attrs=new En);const i=new Array;for(const[a,f]of Object.entries(e))i.push(this.attrs.set(a,f,r));return i}purge(e){this.attrs&&this.attrs.purge(e)}getGCPairs(){const e=[];if(!this.attrs)return e;for(const r of this.attrs)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}function Ya(o){var e;if(o.isText){const i=o;return{type:i.type,value:i.value}}const r={type:o.type,children:o.children.map(Ya)};return o.attrs&&(r.attributes=Wr((e=o.attrs)==null?void 0:e.toObject())),r}function Qa(o){if(o.isText)return o.value;let e="";return o.attrs&&o.attrs.size()&&(e=" "+Array.from(o.attrs).filter(r=>!r.isRemoved()).sort((r,i)=>r.getKey().localeCompare(i.getKey())).map(r=>{const i=JSON.parse(r.getValue());return typeof i=="string"?`${r.getKey()}="${i}"`:`${r.getKey()}="${un(r.getValue())}"`}).join(" ")),`<${o.type}${e}>${o.children.map(r=>Qa(r)).join("")}</${o.type}>`}function Gf(o){if(o.isText){const e=o;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:o.type,children:o.children.map(Gf),size:o.size,isRemoved:o.isRemoved}}class Ot extends Bi{constructor(e,r){super(r),u(this,"indexTree"),u(this,"nodeMapByID"),this.indexTree=new Ky(e),this.nodeMapByID=new Hf(ze.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(e,r){return new Ot(e,r)}findFloorNode(e){const r=this.nodeMapByID.floorEntry(e);if(!(!r||!r.key.getCreatedAt().equals(e.getCreatedAt())))return r.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,r){const[i,a]=e.toTreeNodePair(this);let f=a;const h=i===f,g=f.parent&&!h?f.parent:i;if(f.isText&&f.split(this,e.getLeftSiblingID().getOffset()-f.id.getOffset()),r){const p=g.allChildren,v=h?0:p.indexOf(f)+1;for(let S=v;S<p.length;S++){const D=p[S];if(!D.id.getCreatedAt().after(r))break;f=D}}return[g,f]}style(e,r,i,a){const[f,h]=this.findNodesAndSplitText(e[0],i),[g,p]=this.findNodesAndSplitText(e[1],i),v=[],S=r?Wr(r):{},D=new Map,P=[];return this.traverseInPosRange(f,h,g,p,([I])=>{const $=I.getCreatedAt().getActorID(),Y=a?a.has($)?a.get($):Ft:Mi;if(I.canStyle(i,Y)&&r){const G=D.get($),re=I.getCreatedAt();(!G||re.after(G))&&D.set($,re);const Te=I.setAttrs(r,i),oe=Te.reduce((ke,[,Sr])=>(Sr&&(ke[Sr.getKey()]=S[Sr.getKey()]),ke),{}),ge=I.parent,pe=I.prevSibling||I.parent;Object.keys(oe).length>0&&v.push({type:"style",from:this.toIndex(ge,pe),to:this.toIndex(I,I),fromPath:this.toPath(ge,pe),toPath:this.toPath(I,I),actor:i.getActorID(),value:oe});for(const[ke]of Te)ke&&P.push({parent:I,child:ke})}}),[D,P,v]}removeStyle(e,r,i,a){const[f,h]=this.findNodesAndSplitText(e[0],i),[g,p]=this.findNodesAndSplitText(e[1],i),v=[],S=new Map,D=[];return this.traverseInPosRange(f,h,g,p,([P])=>{const I=P.getCreatedAt().getActorID(),$=a?a.has(I)?a.get(I):Ft:Mi;if(P.canStyle(i,$)&&r){const Y=S.get(I),G=P.getCreatedAt();(!Y||G.after(Y))&&S.set(I,G),P.attrs||(P.attrs=new En);for(const oe of r){const ge=P.attrs.remove(oe,i);for(const pe of ge)D.push({parent:P,child:pe})}const re=P.parent,Te=P.prevSibling||P.parent;v.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(re,Te),to:this.toIndex(P,P),fromPath:this.toPath(re,Te),toPath:this.toPath(P,P),value:r})}}),[S,D,v]}edit(e,r,i,a,f,h){const[g,p]=this.findNodesAndSplitText(e[0],a),[v,S]=this.findNodesAndSplitText(e[1],a),D=this.toIndex(g,p),P=this.toPath(g,p),I=[],$=[],Y=[],G=new Map;this.traverseInPosRange(g,p,v,S,([oe,ge],pe)=>{if(ge===_e.Start&&!pe)for(const Tr of oe.children)Y.push(Tr);const ke=oe.getCreatedAt().getActorID(),Sr=h?h.has(ke)?h.get(ke):Ft:Mi;if(oe.canDelete(a,Sr)||I.includes(oe.parent)){const Tr=G.get(ke),ts=oe.getCreatedAt();(!Tr||ts.after(Tr))&&G.set(ke,ts),(ge===_e.Text||ge===_e.Start)&&I.push(oe),$.push([oe,ge])}});const re=this.makeDeletionChanges($,a),Te=[];for(const oe of I)oe.remove(a),oe.isRemoved&&Te.push({parent:this,child:oe});for(const oe of Y)oe.removedAt||g.append(oe);if(i>0){let oe=0,ge=g,pe=p;for(;oe<i;)ge.split(this,ge.findOffset(pe)+1,f),pe=ge,ge=ge.parent,oe++;re.push({type:"content",from:D,to:D,fromPath:P,toPath:P,actor:a.getActorID()})}if(r!=null&&r.length){const oe=[];let ge=p;for(const pe of r)ge===g?g.insertAt(pe,0):g.insertAfter(pe,ge),ge=pe,io(pe,ke=>{g.isRemoved&&(ke.remove(a),Te.push({parent:this,child:ke})),this.nodeMapByID.put(ke.id,ke)}),pe.isRemoved||oe.push(pe);if(oe.length){const pe=oe.map(ke=>Ya(ke));re.length&&re[re.length-1].from===D?re[re.length-1].value=pe:re.push({type:"content",from:D,to:D,fromPath:P,toPath:P,actor:a.getActorID(),value:pe})}}return[re,Te,G]}editT(e,r,i,a,f){const h=this.findPos(e[0]),g=this.findPos(e[1]);this.edit([h,g],r,i,a,f)}move(e,r,i){throw new Error(`not implemented: ${e}, ${r}, ${i}`)}purge(e){var r;(r=e.parent)==null||r.removeChild(e),this.nodeMapByID.remove(e.id);const i=e.insPrevID,a=e.insNextID;if(i){const f=this.findFloorNode(i);f.insNextID=a}if(a){const f=this.findFloorNode(a);f.insPrevID=i}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&e.push({parent:this,child:r});for(const i of r.getGCPairs())e.push(i)}),e}findPos(e,r=!0){const i=this.indexTree.findTreePos(e,r);return jt.fromTreePos(i)}pathToPosRange(e){const r=this.pathToIndex(e);return[this.findPos(r),this.findPos(r+1)]}pathToPos(e){const r=this.indexTree.pathToIndex(e);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Qa(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),r=(i,a=void 0,f=void 0,h=0)=>{var g,p,v,S;let D,P,I;const $=i.isText?{node:i,offset:0}:a&&f?this.toTreePos(a,f):null;$&&(D=this.indexTree.indexOf($),P=this.indexTree.treePosToPath($),I=jt.fromTreePos($).toStruct());const Y={type:i.type,parent:a==null?void 0:a.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(g=i.removedAt)==null?void 0:g.toTestString(),insPrev:(p=i.insPrevID)==null?void 0:p.toTestString(),insNext:(v=i.insNextID)==null?void 0:v.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:h,attributes:i.attrs?Wr((S=i.attrs)==null?void 0:S.toObject()):void 0,index:D,path:P,pos:I};for(let G=0;G<i.allChildren.length;G++){const re=G===0?i:i.allChildren[G-1];Y.children.push(r(i.allChildren[G],i,re,h+1))}return Y};return r(e)}getRootTreeNode(){return Ya(this.indexTree.getRoot())}toTestTreeNode(){return Gf(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new Ot(e.deepcopy(),this.getCreatedAt())}toPath(e,r){const i=this.toTreePos(e,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(e,r){const i=this.toTreePos(e,r);return i?this.indexTree.indexOf(i):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const r=this.findPos(e[0]);return e[0]===e[1]?[r,r]:[r,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[r,i]=e,a=this.findPos(r);return r===i?[a.toStruct(),a.toStruct()]:[a.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(e){const[r,i]=this.findNodesAndSplitText(e[0]),[a,f]=this.findNodesAndSplitText(e[1]);return[this.toPath(r,i),this.toPath(a,f)]}posRangeToIndexRange(e){const[r,i]=this.findNodesAndSplitText(e[0]),[a,f]=this.findNodesAndSplitText(e[1]);return[this.toIndex(r,i),this.toIndex(a,f)]}traverseInPosRange(e,r,i,a,f){const h=this.toIndex(e,r),g=this.toIndex(i,a);return this.indexTree.tokensBetween(h,g,f)}toTreePos(e,r){if(!e||!r)return;if(e.isRemoved){let a;for(;e.isRemoved;)a=e,e=a.parent;const f=e.findOffset(a);return{node:e,offset:f}}if(e===r)return{node:e,offset:0};let i=e.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:e,offset:i}}makeDeletionChanges(e,r){const i=[],a=[];let f=null,h=null;for(let g=0;g<e.length;g++){const p=e[g],v=e[g+1];f||(f=p),h=p;const S=this.findRightToken(p);(!S||!v||S[0]!==v[0]||S[1]!==v[1])&&(a.push([f,h]),f=null,h=null)}for(const g of a){const[p,v]=g,[S,D]=this.findLeftToken(p),[P,I]=v,$=D===_e.Start?S:S.parent,Y=I===_e.Start?P:P.parent,G=this.toIndex($,S),re=this.toIndex(Y,P);G<re&&(i.length>0&&G===i[i.length-1].to?(i[i.length-1].to=re,i[i.length-1].toPath=this.toPath(Y,P)):i.push({type:"content",from:G,to:re,fromPath:this.toPath($,S),toPath:this.toPath(Y,P),actor:r.getActorID()}))}return i.reverse()}findRightToken([e,r]){if(r===_e.Start){const g=e.allChildren;return g.length>0?[g[0],g[0].isText?_e.Text:_e.Start]:[e,_e.End]}const i=e.parent,a=i.allChildren,f=a.indexOf(e);if(i&&f===a.length-1)return[i,_e.End];const h=a[f+1];return[h,h.isText?_e.Text:_e.Start]}findLeftToken([e,r]){if(r===_e.End){const g=e.allChildren;if(g.length>0){const p=g[g.length-1];return[p,p.isText?_e.Text:_e.End]}return[e,_e.Start]}const i=e.parent,a=i.allChildren,f=a.indexOf(e);if(i&&f===0)return[i,_e.Start];const h=a[f-1];return[h,h.isText?_e.Text:_e.End]}}class Wi extends zt{constructor(e,r,i,a,f,h,g){super(e,g),u(this,"fromPos"),u(this,"toPos"),u(this,"contents"),u(this,"splitLevel"),u(this,"maxCreatedAtMapByActor"),this.fromPos=r,this.toPos=i,this.contents=a,this.splitLevel=f,this.maxCreatedAtMapByActor=h}static create(e,r,i,a,f,h,g){return new Wi(e,r,i,a,f,h,g)}execute(e){var r;const i=e.findByCreatedAt(this.getParentCreatedAt());i||R.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof Ot||R.fatal("fail to execute, only Tree can execute edit");const a=this.getExecutedAt(),f=i,[h,g]=f.edit([this.fromPos,this.toPos],(r=this.contents)==null?void 0:r.map(p=>p.deepcopy()),this.splitLevel,a,(()=>{let p=a.getDelimiter();return this.contents!==void 0&&(p+=this.contents.length),()=>et.of(a.getLamport(),++p,a.getActorID())})(),this.maxCreatedAtMapByActor);for(const p of g)e.registerGCPair(p);return{opInfos:h.map(({from:p,to:v,value:S,splitLevel:D,fromPath:P,toPath:I})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:p,to:v,value:S,splitLevel:D,fromPath:P,toPath:I}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,a=this.contents||[];return`${e}.EDIT(${r},${i},${a.map(f=>Qa(f)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class jn{constructor(e,r,i,a){u(this,"clientSeq"),u(this,"serverSeq"),u(this,"lamport"),u(this,"actor"),this.clientSeq=e,this.serverSeq=a,this.lamport=r,this.actor=i}static of(e,r,i,a){return new jn(e,r,i,a)}next(){return new jn(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new jn(this.clientSeq,e,this.actor):new jn(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return et.of(this.lamport,e,this.actor)}setActor(e){return new jn(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Gy=new jn(0,Q.fromInt(0,!0),no);class vr{constructor({id:e,operations:r,presenceChange:i,message:a}){u(this,"id"),u(this,"operations"),u(this,"presenceChange"),u(this,"message"),this.id=e,this.operations=r||[],this.presenceChange=i,this.message=a}static create({id:e,operations:r,presenceChange:i,message:a}){return new vr({id:e,operations:r,presenceChange:i,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const r of this.operations)r.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,r,i){const a=[],f=[];for(const h of this.operations){const g=h.execute(e,i);if(!g)continue;const{opInfos:p,reverseOp:v}=g;a.push(...p),v&&f.unshift(v)}return this.presenceChange&&(this.presenceChange.type===$n.Put?r.set(this.id.getActorID(),Ut(this.presenceChange.presence)):r.delete(this.id.getActorID())),{opInfos:a,reverseOps:f}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:Le.bytesToHex(Le.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>Le.bytesToHex(Le.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:r,operations:i,presenceChange:a,message:f}=e;return vr.create({id:Le.bytesToChangeID(Le.hexToBytes(r)),operations:i==null?void 0:i.map(h=>Le.bytesToOperation(Le.hexToBytes(h))),presenceChange:a,message:f})}}class so{constructor(e,r,i,a,f,h){u(this,"documentKey"),u(this,"checkpoint"),u(this,"isRemoved"),u(this,"changes"),u(this,"snapshot"),u(this,"minSyncedTicket"),this.documentKey=e,this.checkpoint=r,this.isRemoved=i,this.changes=a,this.snapshot=f,this.minSyncedTicket=h}static create(e,r,i,a,f,h){return new so(e,r,i,a,f,h)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class qr{constructor(e,r){u(this,"serverSeq"),u(this,"clientSeq"),this.serverSeq=e,this.clientSeq=r}static of(e,r){return new qr(e,r)}increaseClientSeq(e){return e===0?this:new qr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const r=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,i=Math.max(this.clientSeq,e.clientSeq);return qr.of(r,i)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Yy=new qr(Q.fromInt(0,!0),0);class cn{constructor(e,r){u(this,"createdAt"),u(this,"offset"),this.createdAt=e,this.offset=r}static of(e,r){return new cn(e,r)}static fromStruct(e){return cn.of(et.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new cn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Qy=cn.of(Ft,0);class Vt{constructor(e,r){u(this,"id"),u(this,"relativeOffset"),this.id=e,this.relativeOffset=r}static of(e,r){return new Vt(e,r)}static fromStruct(e){const r=cn.fromStruct(e.id);return Vt.of(r,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return cn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Vn extends Jf{constructor(e,r,i){super(r),u(this,"id"),u(this,"removedAt"),u(this,"prev"),u(this,"next"),u(this,"insPrev"),u(this,"insNext"),this.id=e,this.removedAt=i}static create(e,r){return new Vn(e,r)}static createComparator(){return(e,r)=>{const i=e.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new Vn(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,r){const i=!this.removedAt;return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))?i:!1}canStyle(e,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Vt.of(this.id,0),Vt.of(this.id,this.getLength())]}deepcopy(){return new Vn(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const r=this.value;return this.value=r.substring(0,e),r.substring(e,r.length)}toIDString(){return this.id.toIDString()}}class Hr{constructor(){u(this,"head"),u(this,"treeByIndex"),u(this,"treeByID"),this.head=Vn.create(Qy),this.treeByIndex=new Ui,this.treeByID=new Hf(Vn.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Hr}edit(e,r,i,a){const[f,h]=this.findNodeWithSplit(e[1],r),[g,p]=this.findNodeWithSplit(e[0],r),v=this.findBetween(p,h),[S,D,P]=this.deleteNodes(v,r,a),I=h?h.getID():f.getID();let $=Vt.of(I,0);if(i){const G=this.posToIndex(g.createPosRange()[1],!0),re=this.insertAfter(g,Vn.create(cn.of(r,0),i));S.length&&S[S.length-1].from===G?S[S.length-1].value=i:S.push({actor:r.getActorID(),from:G,to:G,value:i}),$=Vt.of(re.getID(),re.getContentLength())}const Y=[];for(const[,G]of P)Y.push({parent:this,child:G});return[$,D,Y,S]}indexToPos(e){const[r,i]=this.treeByIndex.find(e),a=r;return Vt.of(a.getID(),i)}findIndexesFromRange(e){const[r,i]=e;return[this.posToIndex(r,!1),this.posToIndex(i,!0)]}posToIndex(e,r){const i=e.getAbsoluteID(),a=r?this.findFloorNodePreferToLeft(i):this.findFloorNode(i);a||R.fatal(`the node of the given id should be found: ${i.toTestString()}`);const f=this.treeByIndex.indexOf(a),h=a.isRemoved()?0:i.getOffset()-a.getID().getOffset();return f+h}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const r of this)r.isRemoved()||e.push(r.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Hr;let r=this.head.getNext(),i=e.head,a;for(;r;){if(a=e.insertAfter(i,r.deepcopy()),r.hasInsPrev()){const f=e.findNode(r.getInsPrevID());a.setInsPrev(f)}i=a,r=r.getNext()}return e}toTestString(){const e=[];let r=this.head;for(;r;)r.isRemoved()?e.push(`{${r.toTestString()}}`):e.push(`[${r.toTestString()}]`),r=r.getNext();return e.join("")}insertAfter(e,r){const i=e.getNext();return r.setPrev(e),i&&i.setPrev(r),this.treeByID.put(r.getID(),r),this.treeByIndex.insertAfter(e,r),r}findNodeWithSplit(e,r){const i=e.getAbsoluteID();let a=this.findFloorNodePreferToLeft(i);const f=i.getOffset()-a.getID().getOffset();for(this.splitNode(a,f);a.hasNext()&&a.getNext().getCreatedAt().after(r);)a=a.getNext();return[a,a.getNext()]}findFloorNodePreferToLeft(e){let r=this.findFloorNode(e);if(r||R.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&r.getID().getOffset()==e.getOffset()){if(!r.hasInsPrev())return r;r=r.getInsPrev()}return r}findFloorNode(e){const r=this.treeByID.floorEntry(e);if(r&&!(!r.key.equals(e)&&!r.key.hasSameCreatedAt(e)))return r.value}findBetween(e,r){const i=[];let a=e;for(;a&&a!==r;)i.push(a),a=a.getNext();return i}splitNode(e,r){if(r>e.getContentLength()&&R.fatal("offset should be less than or equal to length"),r===0)return e;if(r===e.getContentLength())return e.getNext();const i=e.split(r);this.treeByIndex.updateWeight(i),this.insertAfter(e,i);const a=e.getInsNext();return a&&a.setInsPrev(i),i.setInsPrev(e),i}deleteNodes(e,r,i){if(!e.length)return[[],new Map,new Map];const[a,f]=this.filterNodes(e,r,i),h=new Map,g=new Map,p=this.makeChanges(f,r);for(const v of a){const S=v.getCreatedAt().getActorID();(!h.has(S)||v.getID().getCreatedAt().after(h.get(S)))&&h.set(S,v.getID().getCreatedAt()),g.set(v.getID().toIDString(),v),v.remove(r)}return this.deleteIndexNodes(f),[p,h,g]}filterNodes(e,r,i){const a=!!i,f=[],h=[],[g,p]=this.findEdgesOfCandidates(e);h.push(g);for(const v of e){const S=v.getCreatedAt().getActorID(),D=a?i.has(S)?i.get(S):Ft:Mi;v.canDelete(r,D)?f.push(v):h.push(v)}return h.push(p),[f,h]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,r){const i=[];let a,f;for(let h=0;h<e.length-1;h++){const g=e[h],p=e[h+1];g.getNext()!=p&&([a]=this.findIndexesFromRange(g.getNext().createPosRange()),p?[,f]=this.findIndexesFromRange(p.getPrev().createPosRange()):f=this.treeByIndex.length,a<f&&i.push({actor:r.getActorID(),from:a,to:f}))}return i.reverse()}deleteIndexNodes(e){for(let r=0;r<e.length-1;r++){const i=e[r],a=e[r+1];i.getNext()!=a&&this.treeByIndex.deleteRange(i,a)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const r=e.getPrev(),i=e.getNext(),a=e.getInsPrev(),f=e.getInsNext();r&&r.setNext(i),i&&i.setPrev(r),e.setPrev(void 0),e.setNext(void 0),a&&a.setInsNext(f),f&&f.setInsPrev(a),e.setInsPrev(void 0),e.setInsNext(void 0)}}const Yf=o=>o<0?Math.ceil(o):Math.floor(o);var fn=(o=>(o[o.IntegerCnt=0]="IntegerCnt",o[o.LongCnt=1]="LongCnt",o))(fn||{});class wt extends Bi{constructor(e,r,i){switch(super(i),u(this,"valueType"),u(this,"value"),this.valueType=e,e){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=Q.fromNumber(r).toInt():this.value=Yf(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=Q.fromNumber(r):this.value=r;break;default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,r,i){return new wt(e,r,i)}static valueFromBytes(e,r){switch(e){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return Q.fromBytesLE(Array.from(r));default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=wt.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Q?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!wt.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Me.Long?this.value=this.value+e.getValue().toInt():this.value=Q.fromNumber(this.value+Yf(e.getValue())).toInt(),this}}class Gr extends zt{constructor(e,r,i){super(e,i),u(this,"value"),this.value=r}static create(e,r,i){return new Gr(e,r,i)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof wt||R.fatal("fail to execute, only Counter can execute increase");const i=r,a=this.value.deepcopy();return i.increase(a),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:a.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),i=e.getType()===Me.Long?e.getValue().multiply(-1):e.getValue()*-1;return Gr.create(this.getParentCreatedAt(),Se.of(i,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class Cn extends zt{constructor(e,r,i,a,f,h,g){super(e,g),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"attributes"),u(this,"attributesToRemove"),this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=a,this.attributes=f,this.attributesToRemove=h}static create(e,r,i,a,f,h){return new Cn(e,r,i,a,f,new Array,h)}static createTreeRemoveStyleOperation(e,r,i,a,f,h){return new Cn(e,r,i,a,new Map,f,h)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Ot||R.fatal("fail to execute, only Tree can execute edit");const i=r;let a,f;if(this.attributes.size){const h={};[...this.attributes].forEach(([g,p])=>h[g]=p),[,f,a]=i.style([this.fromPos,this.toPos],h,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const h=this.attributesToRemove;[,f,a]=i.removeStyle([this.fromPos,this.toPos],h,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const h of f)e.registerGCPair(h);return{opInfos:a.map(({from:h,to:g,value:p,fromPath:v,toPath:S})=>({type:"tree-style",from:h,to:g,value:this.attributes.size?{attributes:p}:{attributesToRemove:p},fromPath:v,toPath:S,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([a,f])=>`${a}:"${f}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function Xy(o){const e=new ja,r=e.data;for(const[i,a]of Object.entries(o))r[i]=JSON.stringify(a);return e}function Zy(o){if(o.type===$n.Put)return new za({type:bi.PUT,presence:Xy(o.presence)});if(o.type===$n.Clear)return new za({type:bi.CLEAR});throw new ue(se.ErrUnimplemented,"unimplemented type")}function ev(o){return new Rf({serverSeq:o.getServerSeqAsString(),clientSeq:o.getClientSeq()})}function Qf(o){return new Zs({clientSeq:o.getClientSeq(),lamport:o.getLamportAsString(),actorId:il(o.getActorID())})}function K(o){if(o)return new W({lamport:o.getLamportAsString(),delimiter:o.getDelimiter(),actorId:il(o.getActorID())})}function Xf(o){switch(o){case Me.Null:return ee.NULL;case Me.Boolean:return ee.BOOLEAN;case Me.Integer:return ee.INTEGER;case Me.Long:return ee.LONG;case Me.Double:return ee.DOUBLE;case Me.String:return ee.STRING;case Me.Bytes:return ee.BYTES;case Me.Date:return ee.DATE;default:throw new ue(se.Unsupported,`unsupported type: ${o}`)}}function Zf(o){switch(o){case fn.IntegerCnt:return ee.INTEGER_CNT;case fn.LongCnt:return ee.LONG_CNT;default:throw new ue(se.Unsupported,`unsupported type: ${o}`)}}function Xa(o){if(o instanceof at)return new kn({type:ee.JSON_OBJECT,createdAt:K(o.getCreatedAt()),value:ph(o)});if(o instanceof yt)return new kn({type:ee.JSON_ARRAY,createdAt:K(o.getCreatedAt()),value:Pv(o)});if(o instanceof Pt)return new kn({type:ee.TEXT,createdAt:K(o.getCreatedAt())});if(o instanceof Se)return new kn({type:Xf(o.getType()),createdAt:K(o.getCreatedAt()),value:o.toBytes()});if(o instanceof wt)return new kn({type:Zf(o.getType()),createdAt:K(o.getCreatedAt()),value:o.toBytes()});if(o instanceof Ot)return new kn({type:ee.TREE,createdAt:K(o.getCreatedAt()),value:Dv(o)});throw new ue(se.ErrUnimplemented,"unimplemented element")}function tv(o){return new Ua({createdAt:K(o.getCreatedAt()),offset:o.getOffset()})}function oo(o){return new dr({createdAt:K(o.getID().getCreatedAt()),offset:o.getID().getOffset(),relativeOffset:o.getRelativeOffset()})}function ao(o){return new Li({parentId:qi(o.getParentID()),leftSiblingId:qi(o.getLeftSiblingID())})}function qi(o){return new jr({createdAt:K(o.getCreatedAt()),offset:o.getOffset()})}function eh(o){const e=new Ba;if(o instanceof mr){const r=o,i=new gf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.key=r.getKey(),i.value=Xa(r.getValue()),i.executedAt=K(r.getExecutedAt()),e.body.case="set",e.body.value=i}else if(o instanceof zi){const r=o,i=new pf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.prevCreatedAt=K(r.getPrevCreatedAt()),i.value=Xa(r.getValue()),i.executedAt=K(r.getExecutedAt()),e.body.case="add",e.body.value=i}else if(o instanceof zn){const r=o,i=new mf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.prevCreatedAt=K(r.getPrevCreatedAt()),i.createdAt=K(r.getCreatedAt()),i.executedAt=K(r.getExecutedAt()),e.body.case="move",e.body.value=i}else if(o instanceof Fn){const r=o,i=new yf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.createdAt=K(r.getCreatedAt()),i.executedAt=K(r.getExecutedAt()),e.body.case="remove",e.body.value=i}else if(o instanceof Vi){const r=o,i=new vf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.from=oo(r.getFromPos()),i.to=oo(r.getToPos());const a=i.createdAtMapByActor;for(const[h,g]of r.getMaxCreatedAtMapByActor())a[h]=K(g);i.content=r.getContent();const f=i.attributes;for(const[h,g]of r.getAttributes())f[h]=g;i.executedAt=K(r.getExecutedAt()),e.body.case="edit",e.body.value=i}else if(o instanceof Ji){const r=o,i=new wf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.from=oo(r.getFromPos()),i.to=oo(r.getToPos());const a=i.createdAtMapByActor;for(const[h,g]of r.getMaxCreatedAtMapByActor())a[h]=K(g);const f=i.attributes;for(const[h,g]of r.getAttributes())f[h]=g;i.executedAt=K(r.getExecutedAt()),e.body.case="style",e.body.value=i}else if(o instanceof Gr){const r=o,i=new Sf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.value=Xa(r.getValue()),i.executedAt=K(r.getExecutedAt()),e.body.case="increase",e.body.value=i}else if(o instanceof Wi){const r=o,i=new Tf,a=i.createdAtMapByActor;for(const[f,h]of r.getMaxCreatedAtMapByActor())a[f]=K(h);i.parentCreatedAt=K(r.getParentCreatedAt()),i.from=ao(r.getFromPos()),i.to=ao(r.getToPos()),i.contents=lv(r.getContents()),i.splitLevel=r.getSplitLevel(),i.executedAt=K(r.getExecutedAt()),e.body.case="treeEdit",e.body.value=i}else if(o instanceof Cn){const r=o,i=new kf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.from=ao(r.getFromPos()),i.to=ao(r.getToPos());const a=i.createdAtMapByActor;for(const[h,g]of r.getMaxCreatedAtMapByActor())a[h]=K(g);const f=r.getAttributesToRemove();if(f.length>0)i.attributesToRemove=f;else{const h=i.attributes;for(const[g,p]of r.getAttributes())h[g]=p}i.executedAt=K(r.getExecutedAt()),e.body.case="treeStyle",e.body.value=i}else throw new ue(se.ErrUnimplemented,"unimplemented operation");return e}function nv(o){const e=[];for(const r of o)e.push(eh(r));return e}function rv(o){const e=new df({id:Qf(o.getID()),message:o.getMessage()});return o.hasOperations()&&(e.operations=nv(o.getOperations())),o.hasPresenceChange()&&(e.presenceChange=Zy(o.getPresenceChange())),e}function iv(o){const e=[];for(const r of o)e.push(rv(r));return e}function sv(o){const e=[];for(const r of o)e.push(new Pf({key:r.getStrKey(),element:Za(r.getValue())}));return e}function ov(o){const e=[];for(const r of o)e.push(new $a({element:Za(r.getValue())}));return e}function av(o){const e=[];for(const r of o){const i=new Of;i.id=tv(r.getID()),i.value=r.getValue().getContent(),i.removedAt=K(r.getRemovedAt());const a=i.attributes,f=r.getValue().getAttrs();for(const h of f){const g=new eo;g.value=h.getValue(),g.updatedAt=K(h.getUpdatedAt()),a[h.getKey()]=g}e.push(i)}return e}function lv(o){const e=[];if(!o||!o.length)return e;for(const r of o)e.push(new Df({content:th(r)}));return e}function uv(o){const e={};for(const r of o)e[r.getKey()]=new eo({value:r.getValue(),updatedAt:K(r.getUpdatedAt()),isRemoved:r.isRemoved()});return e}function th(o){if(!o)return[];const e=[];return io(o,(r,i)=>{const a=new Fa({id:qi(r.id),type:r.type,removedAt:K(r.removedAt),depth:i});r.isText&&(a.value=r.value),r.insPrevID&&(a.insPrevId=qi(r.insPrevID)),r.insNextID&&(a.insNextId=qi(r.insNextID)),r.attrs&&(a.attributes=uv(r.attrs)),e.push(a)}),e}function cv(o){const e=new Ct;return e.body.case="jsonObject",e.body.value=new Af({nodes:sv(o.getRHT()),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function nh(o){const e=new Ct;return e.body.case="jsonArray",e.body.value=new Ef({nodes:ov(o.getElements()),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function fv(o){const e=new Ct;return e.body.case="primitive",e.body.value=new If({type:Xf(o.getType()),value:o.toBytes(),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function hv(o){const e=new Ct;return e.body.case="text",e.body.value=new Cf({nodes:av(o.getRGATreeSplit()),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function dv(o){const e=new Ct;return e.body.case="counter",e.body.value=new Nf({type:Zf(o.getType()),value:o.toBytes(),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function rh(o){const e=new Ct;return e.body.case="tree",e.body.value=new xf({nodes:th(o.getRoot()),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function Za(o){if(o instanceof at)return cv(o);if(o instanceof yt)return nh(o);if(o instanceof Se)return fv(o);if(o instanceof Pt)return hv(o);if(o instanceof wt)return dv(o);if(o instanceof Ot)return rh(o);throw new ue(se.ErrUnimplemented,"unimplemented element")}function gv(o){return new Tn({documentKey:o.getDocumentKey(),checkpoint:ev(o.getCheckpoint()),isRemoved:o.getIsRemoved(),changes:iv(o.getChanges()),snapshot:o.getSnapshot(),minSyncedTicket:K(o.getMinSyncedTicket())})}function ih(o){const e=o.findDetails(Ry);for(const r of e)if(r.metadata.code)return r.metadata.code;return""}function sh(o){let e;return o.serverSeq&&(e=Q.fromString(o.serverSeq,!0)),jn.of(o.clientSeq,Q.fromString(o.lamport,!0),rl(o.actorId),e)}function q(o){if(o)return et.of(Q.fromString(o.lamport,!0),o.delimiter,rl(o.actorId))}function el(o){const e={};return Object.entries(o.data).forEach(([r,i])=>{e[r]=JSON.parse(i)}),e}function pv(o){const e=o.type;if(e===bi.PUT){const r=el(o.presence);return{type:$n.Put,presence:r}}if(e===bi.CLEAR)return{type:$n.Clear};throw new ue(se.Unsupported,`unsupported type: ${e}`)}function mv(o){const e=new Map;return Object.entries(o).forEach(([r,i])=>{e.set(r,el(i))}),e}function oh(o){switch(o){case ee.NULL:return Me.Null;case ee.BOOLEAN:return Me.Boolean;case ee.INTEGER:return Me.Integer;case ee.LONG:return Me.Long;case ee.DOUBLE:return Me.Double;case ee.STRING:return Me.String;case ee.BYTES:return Me.Bytes;case ee.DATE:return Me.Date}throw new ue(se.ErrUnimplemented,`unimplemented value type: ${o}`)}function lo(o){switch(o){case ee.INTEGER_CNT:return fn.IntegerCnt;case ee.LONG_CNT:return fn.LongCnt}throw new ue(se.ErrUnimplemented,`unimplemented value type: ${o}`)}function tl(o){switch(o.type){case ee.JSON_OBJECT:return o.value?gh(o.value):at.create(q(o.createdAt));case ee.JSON_ARRAY:return o.value?xv(o.value):yt.create(q(o.createdAt));case ee.TEXT:return Pt.create(Hr.create(),q(o.createdAt));case ee.TREE:return Ov(o.value);case ee.NULL:case ee.BOOLEAN:case ee.INTEGER:case ee.LONG:case ee.DOUBLE:case ee.STRING:case ee.BYTES:case ee.DATE:return Se.of(Se.valueFromBytes(oh(o.type),o.value),q(o.createdAt));case ee.INTEGER_CNT:case ee.LONG_CNT:return wt.create(lo(o.type),wt.valueFromBytes(lo(o.type),o.value),q(o.createdAt))}}function uo(o){return Vt.of(cn.of(q(o.createdAt),o.offset),o.relativeOffset)}function ah(o){return cn.of(q(o.createdAt),o.offset)}function yv(o){const e=ji.create(o.value);Object.entries(o.attributes).forEach(([i,a])=>{e.setAttr(i,a.value,q(a.updatedAt))});const r=Vn.create(ah(o.id),e);return r.remove(q(o.removedAt)),r}function Yr(o){return jt.of(Hi(o.parentId),Hi(o.leftSiblingId))}function Hi(o){return ze.of(q(o.createdAt),o.offset)}function vv(o){if(!o.length)return;const e=[];return o.forEach(r=>{const i=lh(r.content);e.push(i)}),e}function lh(o){if(o.length===0)return;const e=[];for(const i of o)e.push(Sv(i));const r=e[e.length-1];for(let i=e.length-2;i>=0;i--){let a;for(let f=i+1;f<e.length;f++)if(o[i].depth-1===o[f].depth){a=e[f];break}a.prepend(e[i])}return r.updateDescendantsSize(),Ot.create(r,Ft).getRoot()}function wv(o){const e=En.create();for(const[r,i]of Object.entries(o))e.setInternal(r,i.value,q(i.updatedAt),i.isRemoved);return e}function Sv(o){const e=Hi(o.id),r=vt.create(e,o.type),i=Object.entries(o.attributes);return r.isText?r.value=o.value:i.length&&(r.attrs=wv(o.attributes)),o.insPrevId&&(r.insPrevID=Hi(o.insPrevId)),o.insNextId&&(r.insNextID=Hi(o.insNextId)),r.removedAt=q(o.removedAt),r}function uh(o){if(o.body.case==="set"){const e=o.body.value;return mr.create(e.key,tl(e.value),q(e.parentCreatedAt),q(e.executedAt))}else if(o.body.case==="add"){const e=o.body.value;return zi.create(q(e.parentCreatedAt),q(e.prevCreatedAt),tl(e.value),q(e.executedAt))}else if(o.body.case==="move"){const e=o.body.value;return zn.create(q(e.parentCreatedAt),q(e.prevCreatedAt),q(e.createdAt),q(e.executedAt))}else if(o.body.case==="remove"){const e=o.body.value;return Fn.create(q(e.parentCreatedAt),q(e.createdAt),q(e.executedAt))}else if(o.body.case==="edit"){const e=o.body.value,r=new Map;Object.entries(e.createdAtMapByActor).forEach(([a,f])=>{r.set(a,q(f))});const i=new Map;return Object.entries(e.attributes).forEach(([a,f])=>{i.set(a,f)}),Vi.create(q(e.parentCreatedAt),uo(e.from),uo(e.to),r,e.content,i,q(e.executedAt))}else if(o.body.case==="style"){const e=o.body.value,r=new Map;Object.entries(e.createdAtMapByActor).forEach(([a,f])=>{r.set(a,q(f))});const i=new Map;return Object.entries(e.attributes).forEach(([a,f])=>{i.set(a,f)}),Ji.create(q(e.parentCreatedAt),uo(e.from),uo(e.to),r,i,q(e.executedAt))}else{if(o.body.case==="select")return;if(o.body.case==="increase"){const e=o.body.value;return Gr.create(q(e.parentCreatedAt),tl(e.value),q(e.executedAt))}else if(o.body.case==="treeEdit"){const e=o.body.value,r=new Map;return Object.entries(e.createdAtMapByActor).forEach(([i,a])=>{r.set(i,q(a))}),Wi.create(q(e.parentCreatedAt),Yr(e.from),Yr(e.to),vv(e.contents),e.splitLevel,r,q(e.executedAt))}else if(o.body.case==="treeStyle"){const e=o.body.value,r=new Map,i=e.attributesToRemove,a=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([f,h])=>{a.set(f,q(h))}),(i==null?void 0:i.length)>0?Cn.createTreeRemoveStyleOperation(q(e.parentCreatedAt),Yr(e.from),Yr(e.to),a,i,q(e.executedAt)):(Object.entries(e.attributes).forEach(([f,h])=>{r.set(f,h)}),Cn.create(q(e.parentCreatedAt),Yr(e.from),Yr(e.to),a,r,q(e.executedAt)))}else throw new ue(se.ErrUnimplemented,"unimplemented operation")}}function Tv(o){const e=[];for(const r of o){const i=uh(r);i&&e.push(i)}return e}function ch(o){const e=[];for(const r of o)e.push(vr.create({id:sh(r.id),operations:Tv(r.operations),presenceChange:r.presenceChange?pv(r.presenceChange):void 0,message:r.message}));return e}function kv(o){return qr.of(Q.fromString(o.serverSeq,!0),o.clientSeq)}function Av(o){return so.create(o.documentKey,kv(o.checkpoint),o.isRemoved,ch(o.changes),o.snapshot,q(o.minSyncedTicket))}function fh(o){const e=new $i;for(const i of o.nodes){const a=nl(i.element);e.set(i.key,a,a.getPositionedAt())}const r=new at(q(o.createdAt),e);return r.setMovedAt(q(o.movedAt)),r.setRemovedAt(q(o.removedAt)),r}function hh(o){const e=new Fi;for(const i of o.nodes)e.insert(nl(i.element));const r=new yt(q(o.createdAt),e);return r.setMovedAt(q(o.movedAt)),r.setRemovedAt(q(o.removedAt)),r}function Ev(o){const e=Se.of(Se.valueFromBytes(oh(o.type),o.value),q(o.createdAt));return e.setMovedAt(q(o.movedAt)),e.setRemovedAt(q(o.removedAt)),e}function Iv(o){const e=new Hr;let r=e.getHead();for(const a of o.nodes){const f=e.insertAfter(r,yv(a));a.insPrevId&&f.setInsPrev(e.findNode(ah(a.insPrevId))),r=f}const i=new Pt(e,q(o.createdAt));return i.setMovedAt(q(o.movedAt)),i.setRemovedAt(q(o.removedAt)),i}function Cv(o){const e=wt.create(lo(o.type),wt.valueFromBytes(lo(o.type),o.value),q(o.createdAt));return e.setMovedAt(q(o.movedAt)),e.setRemovedAt(q(o.removedAt)),e}function dh(o){const e=lh(o.nodes);return Ot.create(e,q(o.createdAt))}function nl(o){if(o.body.case==="jsonObject")return fh(o.body.value);if(o.body.case==="jsonArray")return hh(o.body.value);if(o.body.case==="primitive")return Ev(o.body.value);if(o.body.case==="text")return Iv(o.body.value);if(o.body.case==="counter")return Cv(o.body.value);if(o.body.case==="tree")return dh(o.body.value);throw new ue(se.ErrUnimplemented,"unimplemented element")}function Nv(o){if(!o)return{root:at.create(Ft),presences:new Map};const e=ly.fromBinary(o);return{root:nl(e.root),presences:mv(e.presences)}}function gh(o){if(!o)throw new Error("bytes is empty");const e=Ct.fromBinary(o);return fh(e.body.value)}function ph(o){return Za(o).toBinary()}function xv(o){if(!o)throw new Error("bytes is empty");const e=Ct.fromBinary(o);return hh(e.body.value)}function Pv(o){return nh(o).toBinary()}function Ov(o){if(!o)throw new Error("bytes is empty");const e=Ct.fromBinary(o);return dh(e.body.value)}function Dv(o){return rh(o).toBinary()}function mh(o){return o?Array.from(o).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function rl(o){return mh(o)}function yh(o){return new Uint8Array(o.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function il(o){return yh(o)}function Rv(o){const e=Zs.fromBinary(o);return sh(e)}function _v(o){const e=Ba.fromBinary(o);return uh(e)}const Le={fromPresence:el,toChangePack:gv,fromChangePack:Av,fromChanges:ch,objectToBytes:ph,bytesToObject:gh,bytesToSnapshot:Nv,bytesToHex:mh,hexToBytes:yh,toHexString:rl,toUint8Array:il,toOperation:eh,toChangeID:Qf,PbChangeID:Zs,bytesToChangeID:Rv,bytesToOperation:_v};function vh(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,o=>{const e=Math.random()*16|0;return(o==="x"?e:e&3|8).toString(16)})}class Lv{constructor(e,r,i,a){u(this,"reconnectStreamDelay"),u(this,"doc"),u(this,"docID"),u(this,"syncMode"),u(this,"remoteChangeEventReceived"),u(this,"watchStream"),u(this,"watchLoopTimerID"),u(this,"watchAbortController"),this.reconnectStreamDelay=e,this.doc=r,this.docID=i,this.syncMode=a,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===es.RealtimeSyncOff?!1:this.syncMode===es.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==es.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const r=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(r,this.reconnectStreamDelay)})}catch{}};await r()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const sl=()=>{};class bv{constructor(e){u(this,"finalized",!1),u(this,"observers",[]),u(this,"finalError");try{e(this)}catch(r){this.error(r)}}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let a;e||R.fatal("missing observer"),this.finalized&&R.fatal("observable is finalized due to previous error"),typeof e=="object"?a=e:a={next:e,error:r,complete:i},a.next===void 0&&(a.next=sl),a.error===void 0&&(a.error=sl),a.complete===void 0&&(a.complete=sl);const f=vh(),h=this.unsubscribeOne.bind(this,f);if(this.observers.push({subscriptionID:f,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(g){R.warn(g)}return h}unsubscribeOne(e){var r;this.observers=(r=this.observers)==null?void 0:r.filter(i=>i.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e].observer)}catch(i){R.error(i)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function Mv(o){const e=new bv(o);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Qr{constructor(e,r,i,a){u(this,"id"),u(this,"delimiter"),u(this,"message"),u(this,"root"),u(this,"operations"),u(this,"presenceChange"),u(this,"previousPresence"),u(this,"reversePresenceKeys"),this.id=e,this.delimiter=Wa,this.root=r,this.operations=[],this.previousPresence=Ut(i),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(e,r,i,a){return new Qr(e,r,i,a)}push(e){this.operations.push(e)}registerElement(e,r){this.root.registerElement(e,r)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return vr.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,r){for(const i of Object.keys(e))r!=null&&r.addToHistory?this.reversePresenceKeys.add(i):this.reversePresenceKeys.delete(i)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const r of this.reversePresenceKeys)e[r]=this.previousPresence[r];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class Gi{constructor(e){u(this,"rootObject"),u(this,"elementPairMapByCreatedAt"),u(this,"gcElementSetByCreatedAt"),u(this,"gcPairMap"),this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(r=>{if(r.getRemovedAt()&&this.registerRemovedElement(r),r instanceof Pt||r instanceof Ot)for(const i of r.getGCPairs())this.registerGCPair(i);return!1})}static create(){return new Gi(at.create(Ft))}findByCreatedAt(e){const r=this.elementPairMapByCreatedAt.get(e.toIDString());if(r)return r.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let r=this.elementPairMapByCreatedAt.get(e.toIDString());if(!r)return[];const i=[];for(;r.parent;){const a=r.element.getCreatedAt(),f=r.parent.subPathOf(a);f===void 0&&R.fatal(`cant find the given element: ${a.toIDString()}`),i.unshift(f),r=this.elementPairMapByCreatedAt.get(r.parent.getCreatedAt().toIDString())}return i.unshift("$"),i}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,r){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:r,element:e}),e instanceof Un&&e.getDescendants((i,a)=>(this.registerElement(i,a),!1))}deregisterElement(e){let r=0;const i=a=>{const f=a.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(f),this.gcElementSetByCreatedAt.delete(f),r++};return i(e),e instanceof Un&&e.getDescendants(a=>(i(a),!1)),r}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const r of this.gcElementSetByCreatedAt){e.add(r);const i=this.elementPairMapByCreatedAt.get(r);i.element instanceof Un&&i.element.getDescendants(a=>(e.add(a.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new Gi(this.rootObject.deepcopy())}garbageCollect(e){let r=0;for(const i of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(i);a.element.getRemovedAt()&&e.compare(a.element.getRemovedAt())>=0&&(a.parent.purge(a.element),r+=this.deregisterElement(a.element))}for(const[,i]of this.gcPairMap){const a=i.child.getRemovedAt();a!==void 0&&e.compare(a)>=0&&(i.parent.purge(i.child),this.gcPairMap.delete(i.child.toIDString()),r+=1)}return r}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function wh(o,e){const r=new Yi(o);return new Proxy(e,r.getHandlers())}class Yi{constructor(e){u(this,"context"),u(this,"handlers"),this.context=e,this.handlers={set:(r,i,a)=>(R.isEnabled(He.Trivial)&&R.trivial(`obj[${i}]=${JSON.stringify(a)}`),Yi.setInternal(e,r,i,a),!0),get:(r,i)=>(R.isEnabled(He.Trivial)&&R.trivial(`obj[${i}]`),i==="getID"?()=>r.getCreatedAt():i==="toJSON"||i==="toString"?()=>r.toJSON():i==="toJS"?()=>r.toJS():i==="toJSForTest"?()=>r.toJSForTest():wr(e,r.get(i))),ownKeys:r=>r.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(r,i)=>(R.isEnabled(He.Trivial)&&R.trivial(`obj[${i}]`),Yi.deleteInternal(e,r,i),!0)}}static setInternal(e,r,i,a){if(i.includes("."))throw new ue(se.ErrInvalidObjectKey,"key must not contain the '.'.");const f=e.issueTimeTicket(),h=co(e,a,f),g=r.set(i,h,f);e.registerElement(h,r),g&&e.registerRemovedElement(g),e.push(mr.create(i,h.deepcopy(),r.getCreatedAt(),f))}static buildObjectMembers(e,r){const i={};for(const[a,f]of Object.entries(r)){if(a.includes("."))throw new ue(se.ErrInvalidObjectKey,"key must not contain the '.'.");const h=e.issueTimeTicket(),g=co(e,f,h);i[a]=g}return i}static deleteInternal(e,r,i){const a=e.issueTimeTicket(),f=r.deleteByKey(i,a);f&&(e.push(Fn.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f))}getHandlers(){return this.handlers}}function Bv(o,e){const r=new Ne(o,e);return new Proxy(e,r.getHandlers())}function $v(o){return typeof o=="string"||o instanceof String?!isNaN(o):!1}function Uv(o){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(o)}class Ne{constructor(e,r){u(this,"context"),u(this,"handlers"),u(this,"array"),this.context=e,this.array=r,this.handlers={get:(i,a,f)=>a==="getID"?()=>i.getCreatedAt():a==="getElementByID"?h=>{const g=i.getByID(h);if(!(!g||g.isRemoved()))return Jn(e,g)}:a==="getElementByIndex"?h=>{const g=i.get(h);return Jn(e,g)}:a==="getLast"?()=>Jn(e,i.getLast()):a==="deleteByID"?h=>{const g=Ne.deleteInternalByID(e,i,h);return Jn(e,g)}:a==="insertAfter"?(h,g)=>{const p=Ne.insertAfterInternal(e,i,h,g);return Jn(e,p)}:a==="insertBefore"?(h,g)=>{const p=Ne.insertBeforeInternal(e,i,h,g);return Jn(e,p)}:a==="moveBefore"?(h,g)=>{Ne.moveBeforeInternal(e,i,h,g)}:a==="moveAfter"?(h,g)=>{Ne.moveAfterInternal(e,i,h,g)}:a==="moveFront"?h=>{Ne.moveFrontInternal(e,i,h)}:a==="moveLast"?h=>{Ne.moveLastInternal(e,i,h)}:$v(a)?wr(e,i.get(Number(a))):a==="push"?h=>Ne.pushInternal(e,i,h):a==="splice"?(h,g,...p)=>Ne.splice(e,i,h,g,...p):a==="length"?i.length:typeof a=="symbol"&&a===Symbol.iterator?Ne.iteratorInternal.bind(this,e,i):a==="includes"?(h,g)=>Ne.includes(e,i,h,g):a==="indexOf"?(h,g)=>Ne.indexOf(e,i,h,g):a==="lastIndexOf"?(h,g)=>Ne.lastIndexOf(e,i,h,g):a==="toJSForTest"?()=>i.toJSForTest():a==="toTestString"?()=>Ne.toTestString(i):typeof a=="string"&&Uv(a)?(...h)=>{const g=Array.from(i).map(p=>wr(e,p));return Array.prototype[a].apply(g,h)}:Reflect.get(i,a,f),deleteProperty:(i,a)=>(R.isEnabled(He.Trivial)&&R.trivial(`array[${a}]`),Ne.deleteInternalByIndex(e,i,Number.parseInt(a)),!0)}}static*iteratorInternal(e,r){for(const i of r)yield Jn(e,i)}static buildArrayElements(e,r){const i=[];for(const a of r){const f=e.issueTimeTicket(),h=co(e,a,f);i.push(h)}return i}static pushInternal(e,r,i){return Ne.insertAfterInternal(e,r,r.getLastCreatedAt(),i),r.length}static moveBeforeInternal(e,r,i,a){const f=e.issueTimeTicket(),h=r.getPrevCreatedAt(i);r.moveAfter(h,a,f),e.push(zn.create(r.getCreatedAt(),h,a,f))}static moveAfterInternal(e,r,i,a){const f=e.issueTimeTicket();r.moveAfter(i,a,f),e.push(zn.create(r.getCreatedAt(),i,a,f))}static moveFrontInternal(e,r,i){const a=e.issueTimeTicket(),f=r.getHead();r.moveAfter(f.getCreatedAt(),i,a),e.push(zn.create(r.getCreatedAt(),f.getCreatedAt(),i,a))}static moveLastInternal(e,r,i){const a=e.issueTimeTicket(),f=r.getLastCreatedAt();r.moveAfter(f,i,a),e.push(zn.create(r.getCreatedAt(),f,i,a))}static insertAfterInternal(e,r,i,a){const f=e.issueTimeTicket(),h=co(e,a,f);return r.insertAfter(i,h),e.registerElement(h,r),e.push(zi.create(r.getCreatedAt(),i,h.deepcopy(),f)),h}static insertBeforeInternal(e,r,i,a){return Ne.insertAfterInternal(e,r,r.getPrevCreatedAt(i),a)}static deleteInternalByIndex(e,r,i){const a=e.issueTimeTicket(),f=r.deleteByIndex(i,a);if(f)return e.push(Fn.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f),f}static deleteInternalByID(e,r,i){const a=e.issueTimeTicket(),f=r.delete(i,a);return e.push(Fn.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f),f}static splice(e,r,i,a,...f){const h=r.length,g=i>=0?Math.min(i,h):Math.max(h+i,0),p=a===void 0?h:a<0?g:Math.min(g+a,h),v=[];for(let S=g;S<p;S++){const D=Ne.deleteInternalByIndex(e,r,g);if(D){const P=D.deepcopy();P.setRemovedAt(),v.push(wr(e,P))}}if(f){let S=g===0?r.getHead().getID():r.get(g-1).getID();for(const D of f)S=Ne.insertAfterInternal(e,r,S,D).getID()}return v}static includes(e,r,i,a){var f;const h=r.length,g=a===void 0?0:a<0?Math.max(a+h,0):a;if(g>=h)return!1;if(Se.isSupport(i))return Array.from(r).map(v=>wr(e,v)).includes(i,g);for(let p=g;p<h;p++)if(((f=r.get(p))==null?void 0:f.getID())===i.getID())return!0;return!1}static indexOf(e,r,i,a){var f;const h=r.length,g=a===void 0?0:a<0?Math.max(a+h,0):a;if(g>=h)return-1;if(Se.isSupport(i))return Array.from(r).map(v=>wr(e,v)).indexOf(i,g);for(let p=g;p<h;p++)if(((f=r.get(p))==null?void 0:f.getID())===i.getID())return p;return-1}static lastIndexOf(e,r,i,a){var f;const h=r.length,g=a===void 0||a>=h?h-1:a<0?a+h:a;if(g<0)return-1;if(Se.isSupport(i))return Array.from(r).map(v=>wr(e,v)).lastIndexOf(i,g);for(let p=g;p>0;p--)if(((f=r.get(p))==null?void 0:f.getID())===i.getID())return p;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Qi{constructor(e,r){u(this,"context"),u(this,"text"),this.context=e,this.text=r}initialize(e,r){this.context=e,this.text=r}getID(){return this.text.getID()}edit(e,r,i,a){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}if(e>r){R.fatal("from should be less than or equal to to");return}const f=this.text.indexRangeToPosRange(e,r);R.isEnabled(He.Debug)&&R.debug(`EDIT: f:${e}->${f[0].toTestString()}, t:${r}->${f[1].toTestString()} c:${i}`);const h=a?Kr(a):void 0,g=this.context.issueTimeTicket(),[p,,v,S]=this.text.edit(f,i,g,h);for(const D of v)this.context.registerGCPair(D);return this.context.push(new Vi(this.text.getCreatedAt(),f[0],f[1],p,i,h?new Map(Object.entries(h)):new Map,g)),this.text.findIndexesFromRange(S)}delete(e,r){return this.edit(e,r,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,r,i){if(!this.context||!this.text)return R.fatal("it is not initialized yet"),!1;if(e>r)return R.fatal("from should be less than or equal to to"),!1;const a=this.text.indexRangeToPosRange(e,r);R.isEnabled(He.Debug)&&R.debug(`STYL: f:${e}->${a[0].toTestString()}, t:${r}->${a[1].toTestString()} a:${JSON.stringify(i)}`);const f=Kr(i),h=this.context.issueTimeTicket(),[g,p]=this.text.setStyle(a,f,h);for(const v of p)this.context.registerGCPair(v);return this.context.push(new Ji(this.text.getCreatedAt(),a[0],a[1],g,new Map(Object.entries(f)),h)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}const r=this.text.indexRangeToPosRange(e[0],e[1]);return[r[0].toStruct(),r[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}const r=this.text.findIndexesFromRange([Vt.fromStruct(e[0]),Vt.fromStruct(e[1])]);return[r[0],r[1]]}toTestString(){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){return!this.context||!this.text?(R.fatal("it is not initialized yet"),""):this.text.toString()}toJSON(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,r){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,r)}}class Xi{constructor(e,r){u(this,"valueType"),u(this,"value"),u(this,"context"),u(this,"counter"),this.valueType=e,this.value=r}initialize(e,r){this.valueType=r.getValueType(),this.context=e,this.counter=r,this.value=r.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){R.fatal("it is not initialized yet");return}const r=this.context.issueTimeTicket(),i=Se.of(e,r);if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`);return this.counter.increase(i),this.context.push(Gr.create(this.counter.getCreatedAt(),i,r)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function ol(o,e,r){const{type:i}=o,a=r.issueTimeTicket();if(i===In){Sh(o);const{value:f}=o,h=vt.create(ze.of(a,0),i,f);e.append(h)}else{const{children:f=[]}=o;let{attributes:h}=o,g;if(typeof h=="object"&&!Vf(h)){h=Kr(h),g=new En;for(const[v,S]of Object.entries(h))g.set(v,S,a)}const p=vt.create(ze.of(a,0),i,void 0,g);e.append(p);for(const v of f)ol(v,p,r)}}function Fv(o,e){const{type:r}=e,i=o.issueTimeTicket();let a;if(e.type===In){const{value:f}=e;a=vt.create(ze.of(i,0),r,f)}else if(e){const{children:f=[]}=e;let{attributes:h}=e,g;if(typeof h=="object"&&!Vf(h)){h=Kr(h),g=new En;for(const[p,v]of Object.entries(h))g.set(p,v,i)}a=vt.create(ze.of(o.issueTimeTicket(),0),r,void 0,g);for(const p of f)ol(p,a,o)}return a}function Sh(o){if(!o.value.length)throw new Error("text node cannot have empty value");return!0}function Th(o){if(!o.length)return!0;if(o[0].type===In)for(const r of o){const{type:i}=r;if(i!==In)throw new Error("element node and text node cannot be passed together");Sh(r)}else for(const r of o){const{type:i}=r;if(i===In)throw new Error("element node and text node cannot be passed together")}return!0}class Zi{constructor(e){u(this,"initialRoot"),u(this,"context"),u(this,"tree"),this.initialRoot=e}initialize(e,r){this.context=e,this.tree=r}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return vt.create(ze.of(e.issueTimeTicket(),0),zy);const r=vt.create(ze.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const i of this.initialRoot.children)ol(i,r,e);return r}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[i,a]=this.tree.pathToPosRange(e),f=this.context.issueTimeTicket(),h=r?Kr(r):void 0,[g]=this.tree.style([i,a],h,f);this.context.push(Cn.create(this.tree.getCreatedAt(),i,a,g,h?new Map(Object.entries(h)):new Map,f))}style(e,r,i){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const a=this.tree.findPos(e),f=this.tree.findPos(r),h=this.context.issueTimeTicket(),g=i?Kr(i):void 0,[p,v]=this.tree.style([a,f],g,h);for(const S of v)this.context.registerGCPair(S);this.context.push(Cn.create(this.tree.getCreatedAt(),a,f,p,g?new Map(Object.entries(g)):new Map,h))}removeStyle(e,r,i){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const a=this.tree.findPos(e),f=this.tree.findPos(r),h=this.context.issueTimeTicket(),[g,p]=this.tree.removeStyle([a,f],i,h);for(const v of p)this.context.registerGCPair(v);this.context.push(Cn.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,f,g,i,h))}editInternal(e,r,i,a=0){var f;if(i.length!==0&&i[0]&&(Th(i),i[0].type!==In))for(const S of i){const{children:D=[]}=S;Th(D)}const h=this.context.getLastTimeTicket();let g=new Array;if(((f=i[0])==null?void 0:f.type)===In){let S="";for(const D of i){const{value:P}=D;S+=P}g.push(vt.create(ze.of(this.context.issueTimeTicket(),0),In,S))}else g=i.map(S=>S&&Fv(this.context,S)).filter(S=>S);const[,p,v]=this.tree.edit([e,r],g.length?g.map(S=>S==null?void 0:S.deepcopy()):void 0,a,h,()=>this.context.issueTimeTicket());for(const S of p)this.context.registerGCPair(S);return this.context.push(Wi.create(this.tree.getCreatedAt(),e,r,g.length?g:void 0,a,v,h)),!0}editByPath(e,r,i,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==r.length)throw new Error("path length should be equal");if(!e.length||!r.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),h=this.tree.pathToPos(r);return this.editInternal(f,h,i?[i]:[],a)}editBulkByPath(e,r,i,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==r.length)throw new Error("path length should be equal");if(!e.length||!r.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),h=this.tree.pathToPos(r);return this.editInternal(f,h,i,a)}edit(e,r,i,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),h=this.tree.findPos(r);return this.editInternal(f,h,i?[i]:[],a)}editBulk(e,r,i,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),h=this.tree.findPos(r);return this.editInternal(f,h,i,a)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}const r=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],i=this.tree.indexRangeToPosRange(r);return[i[0].toStruct(),i[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}const r=[jt.fromStruct(e[0]),jt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(r)}posRangeToPathRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}const r=[jt.fromStruct(e[0]),jt.fromStruct(e[1])];return this.tree.posRangeToPathRange(r)}}function kh(o,e){return wh(o,e)}function Jn(o,e){if(e){if(e instanceof Se)return e;if(e instanceof at)return wh(o,e);if(e instanceof yt)return Bv(o,e);if(e instanceof Pt)return new Qi(o,e);if(e instanceof wt){const r=new Xi(fn.IntegerCnt,0);return r.initialize(o,e),r}else if(e instanceof Ot){const r=new Zi;return r.initialize(o,e),r}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function wr(o,e){const r=Jn(o,e);return r instanceof Se?r.getValue():r}function co(o,e,r){let i;if(Se.isSupport(e))i=Se.of(e,r);else if(Array.isArray(e))i=yt.create(r,Ne.buildArrayElements(o,e));else if(typeof e=="object")e instanceof Qi?(i=Pt.create(Hr.create(),r),e.initialize(o,i)):e instanceof Xi?(i=wt.create(e.getValueType(),e.getValue(),r),e.initialize(o,i)):e instanceof Zi?(i=Ot.create(e.buildRoot(o),r),e.initialize(o,i)):i=at.create(r,Yi.buildObjectMembers(o,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return i}const Ah=50;class zv{constructor(){u(this,"undoStack",[]),u(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Ah&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Ah&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const Eh="yorkie-devtools-panel",Ih="yorkie-devtools-sdk";let Xr="disconnected";const Ch=new Map,fo=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=fo);function ho(o,e){(e!=null&&e.force||Xr!=="disconnected")&&window.postMessage({source:Ih,...o},"*")}function jv(o){if(!o.isEnableDevtools()||typeof window>"u"||Ch.has(o.getKey()))return;fo.set(o.getKey(),[]);const e=o.subscribe("all",r=>{r.some(i=>i.type!==tt.StatusChanged&&i.type!==tt.Snapshot&&i.type!==tt.LocalChange&&i.type!==tt.RemoteChange&&i.type!==tt.Initialized&&i.type!==tt.Watched&&i.type!==tt.Unwatched&&i.type!==tt.PresenceChanged)||(fo.get(o.getKey()).push(r),Xr==="synced"&&ho({msg:"doc::sync::partial",docKey:o.getKey(),event:r}))});Ch.set(o.getKey(),[e]),ho({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",r=>{var i;if(((i=r.data)==null?void 0:i.source)!==Eh)return;switch(r.data.msg){case"devtools::connect":if(Xr!=="disconnected")break;Xr="connected",ho({msg:"doc::available",docKey:o.getKey()}),R.info(`[YD] Devtools connected. Doc: ${o.getKey()}`);break;case"devtools::disconnect":Xr="disconnected",R.info(`[YD] Devtools disconnected. Doc: ${o.getKey()}`);break;case"devtools::subscribe":Xr="synced",ho({msg:"doc::sync::full",docKey:o.getKey(),events:fo.get(o.getKey())}),R.info(`[YD] Devtools subscribed. Doc: ${o.getKey()}`);break}})}var Nn=(o=>(o.Detached="detached",o.Attached="attached",o.Removed="removed",o))(Nn||{}),tt=(o=>(o.StatusChanged="status-changed",o.ConnectionChanged="connection-changed",o.SyncStatusChanged="sync-status-changed",o.Snapshot="snapshot",o.LocalChange="local-change",o.RemoteChange="remote-change",o.Initialized="initialized",o.Watched="watched",o.Unwatched="unwatched",o.PresenceChanged="presence-changed",o))(tt||{}),go=(o=>(o.Connected="connected",o.Disconnected="disconnected",o))(go||{}),po=(o=>(o.Synced="synced",o.SyncFailed="sync-failed",o))(po||{});class al{constructor(e,r){u(this,"key"),u(this,"status"),u(this,"opts"),u(this,"changeID"),u(this,"checkpoint"),u(this,"localChanges"),u(this,"root"),u(this,"clone"),u(this,"eventStream"),u(this,"eventStreamObserver"),u(this,"onlineClients"),u(this,"presences"),u(this,"history"),u(this,"internalHistory"),u(this,"isUpdating"),this.opts=r||{},this.key=e,this.status="detached",this.root=Gi.create(),this.changeID=Gy,this.checkpoint=Yy,this.localChanges=[],this.eventStream=Mv(i=>{this.eventStreamObserver=i}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new zv,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},jv(this)}update(e,r){if(this.getStatus()==="removed")throw new ue(se.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const i=this.changeID.getActorID(),a=Qr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(i)||{},r);try{const f=kh(a,this.clone.root.getObject());this.presences.has(i)||this.clone.presences.set(i,{}),this.isUpdating=!0,e(f,new Ka(a,this.clone.presences.get(i)))}catch(f){throw this.clone=void 0,R.error(f),f}finally{this.isUpdating=!1}if(a.hasChange()){R.isEnabled(He.Trivial)&&R.trivial(`trying to update a local change: ${this.toJSON()}`);const f=a.getChange(),{opInfos:h,reverseOps:g}=f.execute(this.root,this.presences,de.Local),p=a.getReversePresence();p&&g.push({type:"presence",value:p}),this.localChanges.push(f),g.length>0&&this.internalHistory.pushUndo(g),h.length>0&&this.internalHistory.clearRedo(),this.changeID=f.getID();const v=[];h.length>0&&v.push({type:"local-change",source:de.Local,value:{message:f.getMessage()||"",operations:h,actor:i,clientSeq:f.getID().getClientSeq(),serverSeq:f.getID().getServerSeq()},rawChange:this.isEnableDevtools()?f.toStruct():void 0}),f.hasPresenceChange()&&v.push({type:"presence-changed",source:de.Local,value:{clientID:i,presence:this.getPresence(i)}}),this.publish(v),R.isEnabled(He.Trivial)&&R.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,r,i,a){if(typeof e=="string"){if(typeof r!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const g=r;return this.eventStream.subscribe(p=>{for(const v of p)v.type!=="initialized"&&v.type!=="watched"&&v.type!=="unwatched"&&v.type!=="presence-changed"||g(v)},i,a)}if(e==="my-presence"){const g=r;return this.eventStream.subscribe(p=>{for(const v of p)v.type!=="initialized"&&v.type!=="presence-changed"||v.type==="presence-changed"&&v.value.clientID!==this.changeID.getActorID()||g(v)},i,a)}if(e==="others"){const g=r;return this.eventStream.subscribe(p=>{for(const v of p)v.type!=="watched"&&v.type!=="unwatched"&&v.type!=="presence-changed"||v.value.clientID!==this.changeID.getActorID()&&g(v)},i,a)}if(e==="connection"){const g=r;return this.eventStream.subscribe(p=>{for(const v of p)v.type==="connection-changed"&&g(v)},i,a)}if(e==="status"){const g=r;return this.eventStream.subscribe(p=>{for(const v of p)v.type==="status-changed"&&g(v)},i,a)}if(e==="sync"){const g=r;return this.eventStream.subscribe(p=>{for(const v of p)v.type==="sync-status-changed"&&g(v)},i,a)}if(e==="all"){const g=r;return this.eventStream.subscribe(g,i,a)}const f=e,h=r;return this.eventStream.subscribe(g=>{for(const p of g){if(p.type!=="local-change"&&p.type!=="remote-change")continue;const v=[];for(const S of p.value.operations)this.isSameElementOrChildOf(S.path,f)&&v.push(S);v.length&&h({...p,value:{...p.value,operations:v}})}},i,a)}if(typeof e=="function"){const f=e,h=r,g=i;return this.eventStream.subscribe(p=>{for(const v of p)v.type!=="snapshot"&&v.type!=="local-change"&&v.type!=="remote-change"||f(v)},h,g)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,r){if(r===e)return!0;const i=e.split(".");return r.split(".").every((f,h)=>f===i[h])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),de.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();e.hasSnapshot()&&this.applyChanges(this.localChanges,de.Remote),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),R.isEnabled(He.Trivial)&&R.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Ut(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),r=this.checkpoint.increaseClientSeq(e.length);return so.create(this.key,r,!1,e)}setActor(e){for(const r of this.localChanges)r.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Qr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return kh(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,r){const{root:i,presences:a}=Le.bytesToSnapshot(r);this.root=new Gi(i),this.presences=a,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:de.Remote,value:{snapshot:this.isEnableDevtools()?Le.bytesToHex(r):void 0,serverSeq:e.toString()}}])}applyChanges(e,r){R.isEnabled(He.Debug)&&R.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),R.isEnabled(He.Trivial)&&R.trivial(e.map(i=>`${i.getID().toTestString()}	${i.toTestString()}`).join(`
`));for(const i of e)this.applyChange(i,r);R.isEnabled(He.Debug)&&R.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,r){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,r);const i=[],a=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(a)){const h=e.getPresenceChange();switch(h.type){case $n.Put:i.push(this.presences.has(a)?{type:"presence-changed",source:r,value:{clientID:a,presence:h.presence}}:{type:"watched",source:de.Remote,value:{clientID:a,presence:h.presence}});break;case $n.Clear:i.push({type:"unwatched",source:de.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:f}=e.execute(this.root,this.presences,r);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),f.length>0){const h=this.isEnableDevtools()?e.toStruct():void 0;i.push(r===de.Remote?{type:"remote-change",source:r,value:{actor:a,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:f},rawChange:h}:{type:"local-change",source:r,value:{actor:a,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:f},rawChange:h})}i.length>0&&this.publish(i)}applyWatchStream(e){if(e.body.case==="initialization"){const r=e.body.value.clientIds,i=new Set;for(const a of r)a!==this.changeID.getActorID()&&i.add(a);this.setOnlineClients(i),this.publish([{type:"initialized",source:de.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:r,publisher:i}=e.body.value,a=[];if(r===Xs.DOCUMENT_WATCHED)this.addOnlineClient(i),this.hasPresence(i)&&a.push({type:"watched",source:de.Remote,value:{clientID:i,presence:this.getPresence(i)}});else if(r===Xs.DOCUMENT_UNWATCHED){const f=this.getPresence(i);this.removeOnlineClient(i),f&&a.push({type:"unwatched",source:de.Remote,value:{clientID:i,presence:f}})}a.length>0&&this.publish(a)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(no),this.publish([{source:e==="removed"?de.Remote:de.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:r,serverSeq:i}=e.value;if(!r)return;this.applySnapshot(Q.fromString(i),Le.hexToBytes(r));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const r=vr.fromStruct(e.rawChange);this.applyChange(r,e.source)}if(e.type==="initialized"){const r=new Set;for(const{clientID:i,presence:a}of e.value)r.add(i),this.presences.set(i,a);this.setOnlineClients(r);return}if(e.type==="watched"){const{clientID:r,presence:i}=e.value;this.addOnlineClient(r),this.presences.set(r,i);return}if(e.type==="unwatched"){const{clientID:r}=e.value;this.removeOnlineClient(r),this.presences.delete(r)}if(e.type==="presence-changed"){const{clientID:r,presence:i}=e.value;this.presences.set(r,i)}}applyTransactionEvent(e){for(const r of e)this.applyDocEvent(r)}getValueByPath(e){if(!e.startsWith("$"))throw new ue(se.ErrInvalidArgument,'path must start with "$"');const r=e.split(".");r.shift();let i=this.getRoot();for(const a of r)if(i=i[a],i===void 0)return;return i}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Ut(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const r=this.presences.get(e);return r?Ut(r):void 0}getPresenceForTest(e){const r=this.presences.get(e);return r?Ut(r):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Ut(this.getMyPresence())});for(const r of this.onlineClients)this.presences.has(r)&&e.push({clientID:r,presence:Ut(this.presences.get(r))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(r=>r.clientID!==e).sort((r,i)=>r.clientID>i.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const r=Qr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const v of e){if(!(v instanceof zt)){new Ka(r,Ut(this.clone.presences.get(this.changeID.getActorID()))).set(v.value,{addToHistory:!0});continue}const S=r.issueTimeTicket();v.setExecutedAt(S),r.push(v)}const i=r.getChange();i.execute(this.clone.root,this.clone.presences,de.UndoRedo);const{opInfos:a,reverseOps:f}=i.execute(this.root,this.presences,de.UndoRedo),h=r.getReversePresence();if(h&&f.push({type:"presence",value:h}),f.length>0&&this.internalHistory.pushRedo(f),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=i.getID();const g=this.changeID.getActorID(),p=[];a.length>0&&p.push({type:"local-change",source:de.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:g,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&p.push({type:"presence-changed",source:de.UndoRedo,value:{clientID:g,presence:this.getPresence(g)}}),this.publish(p)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const r=Qr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const v of e){if(!(v instanceof zt)){new Ka(r,Ut(this.clone.presences.get(this.changeID.getActorID()))).set(v.value,{addToHistory:!0});continue}const S=r.issueTimeTicket();v.setExecutedAt(S),r.push(v)}const i=r.getChange();i.execute(this.clone.root,this.clone.presences,de.UndoRedo);const{opInfos:a,reverseOps:f}=i.execute(this.root,this.presences,de.UndoRedo),h=r.getReversePresence();if(h&&f.push({type:"presence",value:h}),f.length>0&&this.internalHistory.pushUndo(f),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=i.getID();const g=this.changeID.getActorID(),p=[];a.length>0&&p.push({type:"local-change",source:de.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:g,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&p.push({type:"presence-changed",source:de.UndoRedo,value:{clientID:g,presence:this.getPresence(g)}}),this.publish(p)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function Vv(o,e){return r=>async i=>(o&&i.header.set("x-api-key",o),e&&i.header.set("authorization",e),await r(i))}const Nh={name:"yorkie-js-sdk",version:"0.4.27",description:"Yorkie JS SDK",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts",files:["dist"],scripts:{build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:examples":"npm run build --workspace examples","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"npm run build"},engines:{node:">=18.0.0",npm:">=7.1.0"},repository:{type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},author:{name:"hackerwins",email:"susukang98@gmail.com"},license:"Apache-2.0",bugs:{url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},homepage:"https://github.com/yorkie-team/yorkie-js-sdk#readme",devDependencies:{"@buf/googleapis_googleapis.connectrpc_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^4.7.4","typescript-transform-paths":"^3.3.1",vite:"^4.4.9","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5"},dependencies:{"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},husky:{hooks:{"pre-commit":"npm run lint"}},workspaces:["examples/*"]};function Jv(){return o=>async e=>(e.header.set("x-yorkie-user-agent",Nh.name+"/"+Nh.version),await o(e))}var es=(o=>(o.Manual="manual",o.Realtime="realtime",o.RealtimePushOnly="realtime-pushonly",o.RealtimeSyncOff="realtime-syncoff",o))(es||{}),xh=(o=>(o.Deactivated="deactivated",o.Activated="activated",o))(xh||{}),Ph=(o=>(o.SyncLoop="SyncLoop",o.WatchLoop="WatchLoop",o))(Ph||{});const mo={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class ll{constructor(e,r){u(this,"id"),u(this,"key"),u(this,"status"),u(this,"attachmentMap"),u(this,"apiKey"),u(this,"conditions"),u(this,"syncLoopDuration"),u(this,"reconnectStreamDelay"),u(this,"retrySyncLoopDelay"),u(this,"rpcClient"),u(this,"taskQueue"),u(this,"processing",!1),r=r||mo,this.key=r.key?r.key:vh(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=r.apiKey||"",this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=r.syncLoopDuration||mo.syncLoopDuration,this.reconnectStreamDelay=r.reconnectStreamDelay||mo.reconnectStreamDelay,this.retrySyncLoopDelay=r.retrySyncLoopDelay||mo.retrySyncLoopDelay,this.rpcClient=$m(Oy,ay({baseUrl:e,interceptors:[Vv(r.apiKey,r.token),Jv()]})),this.taskQueue=[]}activate(){return this.isActive()?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),R.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw R.error(`[AC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}deactivate(){return this.status==="deactivated"?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.deactivateInternal(),R.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw R.error(`[DC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}attach(e,r={}){if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Nn.Detached)throw new ue(se.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((a,f)=>f.set(r.initialPresence||{}));const i=r.syncMode??"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:Le.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async a=>{const f=Le.fromChangePack(a.changePack);return e.applyChangePack(f),e.getStatus()===Nn.Removed||(e.applyStatus(Nn.Attached),this.attachmentMap.set(e.getKey(),new Lv(this.reconnectStreamDelay,e,a.documentId,i)),i!=="manual"&&await this.runWatchLoop(e.getKey()),R.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(a=>{throw R.error(`[AD] c:"${this.getKey()}" err :`,a),this.handleConnectError(a),a}))}detach(e,r={}){if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(e.getKey());if(!i)throw new ue(se.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return e.update((a,f)=>f.clear()),this.enqueueTask(async()=>this.rpcClient.detachDocument({clientId:this.id,documentId:i.docID,changePack:Le.toChangePack(e.createChangePack()),removeIfNotAttached:r.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(a=>{const f=Le.fromChangePack(a.changePack);return e.applyChangePack(f),e.getStatus()!==Nn.Removed&&e.applyStatus(Nn.Detached),this.detachInternal(e.getKey()),R.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(a=>{throw R.error(`[DD] c:"${this.getKey()}" err :`,a),this.handleConnectError(a),a}))}async changeSyncMode(e,r){if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(e.getKey());if(!i)throw new ue(se.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const a=i.syncMode;return a===r?e:(i.changeSyncMode(r),r==="manual"?(i.cancelWatchStream(),e):(r==="realtime"&&(i.remoteChangeEventReceived=!0),a==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);if(e){const r=this.attachmentMap.get(e.getKey());if(!r)throw new ue(se.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(r,"realtime").catch(i=>{throw R.error(`[SY] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}return this.enqueueTask(async()=>{const r=[];for(const[,i]of this.attachmentMap)r.push(this.syncInternal(i,i.syncMode));return Promise.all(r).catch(i=>{throw R.error(`[SY] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i})})}remove(e){if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new ue(se.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const i=Le.toChangePack(e.createChangePack());return i.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:r.docID,changePack:i},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(a=>{const f=Le.fromChangePack(a.changePack);e.applyChangePack(f),this.detachInternal(e.getKey()),R.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(a=>{throw R.error(`[RD] c:"${this.getKey()}" err :`,a),this.handleConnectError(a),a}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}runSyncLoop(){const e=()=>{if(!this.isActive()){R.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const r=[];for(const[,i]of this.attachmentMap)i.needRealtimeSync()&&(i.remoteChangeEventReceived=!1,r.push(this.syncInternal(i,i.syncMode)));Promise.all(r).then(()=>setTimeout(e,this.syncLoopDuration)).catch(i=>{R.error(`[SL] c:"${this.getKey()}" sync failed:`,i),this.handleConnectError(i)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};R.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const r=this.attachmentMap.get(e);if(!r)throw new ue(se.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,r.runWatchLoop(i=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new ue(se.ErrClientNotActivated,`${this.key} is not active`));const a=new AbortController,f=this.rpcClient.watchDocument({clientId:this.id,documentId:r.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:a.signal});return r.doc.publish([{type:tt.ConnectionChanged,value:go.Connected}]),R.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((h,g)=>{(async()=>{try{for await(const v of f)this.handleWatchDocumentsResponse(r,v),v.body.case==="initialization"&&h([f,a])}catch(v){r.doc.resetOnlineClients(),r.doc.publish([{type:tt.Initialized,source:de.Local,value:r.doc.getPresences()}]),r.doc.publish([{type:tt.ConnectionChanged,value:go.Disconnected}]),R.debug(`[WD] c:"${this.getKey()}" unwatches`),this.handleConnectError(v)?i():this.conditions.WatchLoop=!1,g(v)}})()})})}handleWatchDocumentsResponse(e,r){if(r.body.case==="event"&&r.body.value.type===Xs.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(r)}deactivateInternal(){this.status="deactivated";for(const[e,r]of this.attachmentMap)this.detachInternal(e),r.doc.applyStatus(Nn.Detached)}detachInternal(e){const r=this.attachmentMap.get(e);r&&(r.cancelWatchStream(),this.attachmentMap.delete(e))}syncInternal(e,r){const{doc:i,docID:a}=e,f=i.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:Le.toChangePack(f),pushOnly:r==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}).then(h=>{const g=Le.fromChangePack(h.changePack);if(g.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return i;i.applyChangePack(g),e.doc.publish([{type:tt.SyncStatusChanged,value:po.Synced}]),i.getStatus()===Nn.Removed&&this.detachInternal(i.getKey());const p=i.getKey(),v=g.getChangeSize();return R.info(`[PP] c:"${this.getKey()}" sync d:"${p}", push:${f.getChangeSize()} pull:${v} cp:${g.getCheckpoint().toTestString()}`),i}).catch(h=>{throw i.publish([{type:tt.SyncStatusChanged,value:po.SyncFailed}]),R.error(`[PP] c:"${this.getKey()}" err :`,h),h})}handleConnectError(e){return e instanceof y?e.code===d.Canceled||e.code===d.Unknown||e.code===d.ResourceExhausted||e.code===d.Unavailable?!0:((ih(e)===se.ErrClientNotActivated||ih(e)===se.ErrClientNotFound)&&this.deactivateInternal(),!1):!1}enqueueTask(e){return new Promise((r,i)=>{this.taskQueue.push(()=>e().then(r).catch(i)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{R.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const Kv=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Wv={Client:ll,Document:al,Primitive:Se,Text:Qi,Counter:Xi,Tree:Zi,LogLevel:He,setLogLevel:qa,IntType:fn.IntegerCnt,LongType:fn.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:ll,Document:al,Primitive:Se,Text:Qi,Counter:Xi,Tree:Zi,LogLevel:He,setLogLevel:qa,IntType:fn.IntegerCnt,LongType:fn.LongCnt}),s.Change=vr,s.Client=ll,s.ClientCondition=Ph,s.ClientStatus=xh,s.Counter=Xi,s.Devtools=Kv,s.DocEventType=tt,s.Document=al,s.DocumentStatus=Nn,s.DocumentSyncStatus=po,s.EventSourceDevPanel=Eh,s.EventSourceSDK=Ih,s.LogLevel=He,s.OpSource=de,s.Primitive=Se,s.StreamConnectionStatus=go,s.SyncMode=es,s.Text=Qi,s.TimeTicket=et,s.Tree=Zi,s.converter=Le,s.default=Wv,s.setLogLevel=qa,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(Ou,Ou.exports);var kw=Ou.exports;const Zp=Yv(kw);class Aw{constructor(n,s){this.x=n,this.y=s,this.lifetime=0}}const Ew=({xPos:t,yPos:n})=>{const[s,l]=ut.useState([]),c=ut.useRef(null),[u,d]=ut.useState([]),m=(y,T)=>{const C=new Aw(y,T);u.push(C),d(u),s.push(C),l(s)};return ut.useEffect(()=>{const T=c.current.getContext("2d"),C=()=>{T.clearRect(0,0,T.canvas.width,T.canvas.height);const O=.7*(1*4e3)/60;for(let x=0;x<u.length;++x){const M=u[x];let B;if(u[x-1]!==void 0?B=u[x-1]:B=M,M.lifetime+=1,M.lifetime>O)u.shift();else{T.lineWidth=5,T.lineJoin="round";const U=0,ce=0,k=0;T.strokeStyle=`rgb(${U},${ce},${k})`,T.beginPath(),T.moveTo(B.x,B.y),T.lineTo(M.x,M.y),T.stroke(),T.closePath()}}requestAnimationFrame(C)};C()},[u]),ut.useEffect(()=>{m(t,n)},[t,n]),Pe.jsx("canvas",{className:"pen-cursor-canvas",ref:c,width:document.body.clientWidth,height:document.body.clientHeight})},Iw="_goUp0_1lnal_1",Cw="_goUpAnimation0_1lnal_1",Nw="_fadeOut_1lnal_1",xw="_goUp1_1lnal_16",Pw="_goUpAnimation1_1lnal_1",Ow="_goUp2_1lnal_31",Dw="_goUpAnimation2_1lnal_1",Rw="_leftRight0_1lnal_46",_w="_leftRightAnimation0_1lnal_1",Lw="_leftRight1_1lnal_60",bw="_leftRightAnimation1_1lnal_1",Mw="_leftRight2_1lnal_74",Bw="_leftRightAnimation2_1lnal_1",bl={goUp0:Iw,goUpAnimation0:Cw,fadeOut:Nw,goUp1:xw,goUpAnimation1:Pw,goUp2:Ow,goUpAnimation2:Dw,leftRight0:Rw,leftRightAnimation0:_w,leftRight1:Lw,leftRightAnimation1:bw,leftRight2:Mw,leftRightAnimation2:Bw};function $w({x:t,y:n,timestamp:s,selectedCursorShape:l}){return Pe.jsx("div",{className:"single-animation-container",children:Pe.jsx("div",{className:`absolute select-none pointer-events-none ${bl.disappear} text-${s%5+2}xl ${bl["goUp"+s%3]}`,style:{left:t,top:n},children:Pe.jsx("div",{className:bl["leftRight"+s%3],children:Pe.jsx("div",{className:"transform -translate-x-1/2 -translate-y-1/2",children:Pe.jsx("img",{src:`./icons/icon_${l}.svg`})})})})})}function Ud(t,n){const s=ut.useRef(t);ut.useEffect(()=>{s.current=t},[t]),ut.useEffect(()=>{function l(){s.current()}if(n!==null){let c=setInterval(l,n);return()=>clearInterval(c)}},[n])}const Uw=({pointerDown:t,xPos:n,yPos:s,selectedCursorShape:l})=>{const[c,u]=ut.useState([]),d=100;return Ud(()=>{u(m=>m.filter(y=>y.timestamp>Date.now()-4e3))},1e3),Ud(()=>{t&&u(m=>m.concat([{point:{x:n,y:s},timestamp:Date.now()}]))},d),Pe.jsx("div",{style:{transform:`translateX(${n}px) translateY(${s}px)`},children:c.map(m=>Pe.jsx($w,{x:m.point.x,y:m.point.y,timestamp:m.timestamp,selectedCursorShape:l},m.timestamp.toString()))})},Fw=({selectedCursorShape:t,x:n,y:s,pointerDown:l})=>Pe.jsxs(Pe.Fragment,{children:[Pe.jsx("img",{src:`./icons/icon_${t}.svg`,className:`${t}-cursor`,style:{transform:`translate3d(${n}px, ${s}px, 0)`}}),(t==="heart"||t==="thumbs")&&Pe.jsx(Uw,{pointerDown:l,xPos:n,yPos:s,selectedCursorShape:t}),t==="pen"&&l&&Pe.jsx(Ew,{xPos:n,yPos:s})]}),zw=({handleCursorShapeSelect:t,clientsLength:n})=>{const[s,l]=ut.useState("cursor"),c=["heart","thumbs","pen","cursor"];return Pe.jsxs("div",{className:"cursor-selector-container",children:[Pe.jsx("div",{className:"cursor-selections-container",children:c.map(u=>Pe.jsx("img",{onClick:()=>{t(u),l(u)},className:`${s===u?"cursor-shape-selected":"cursor-shape-not-selected"}`,src:`./icons/icon_${u}.svg`},u))}),Pe.jsx("div",{className:"num-users-container",children:Pe.jsx("p",{children:n!==1?`${n} users are here`:"1 user here"})})]})};const Ml=new Zp.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"}),kr=new Zp.Document("simultaneous-cursors",{enableDevtools:!0}),jw=()=>{const[t,n]=ut.useState([]),s=l=>{kr.update((c,u)=>{u.set({cursorShape:l})})};return ut.useEffect(()=>{(async()=>{await Ml.activate(),kr.subscribe("presence",m=>{n(kr.getPresences())}),await Ml.attach(kr,{initialPresence:{cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1}}),window.addEventListener("beforeunload",()=>{Ml.deactivate()})})();const c=()=>{kr.update((m,y)=>{y.set({pointerDown:!1})})},u=()=>{kr.update((m,y)=>{y.set({pointerDown:!0})})},d=m=>{kr.update((y,T)=>{T.set({cursor:{xPos:m.clientX,yPos:m.clientY}})})};return window.addEventListener("mousedown",u),window.addEventListener("mouseup",c),window.addEventListener("mousemove",d),()=>{window.removeEventListener("mousedown",u),window.removeEventListener("mouseup",c),window.removeEventListener("mousemove",d)}},[]),Pe.jsxs("div",{className:"general-container",children:[t.map(({clientID:l,presence:{cursorShape:c,cursor:u,pointerDown:d}})=>u?Pe.jsx(Fw,{selectedCursorShape:c,x:u.xPos,y:u.yPos,pointerDown:d},l):null),Pe.jsx(zw,{handleCursorShapeSelect:s,clientsLength:t.length})]})};Bl.createRoot(document.getElementById("root")).render(Pe.jsx(jw,{}));
