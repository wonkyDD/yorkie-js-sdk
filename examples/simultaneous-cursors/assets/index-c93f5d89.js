(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Iv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Id={exports:{}},ca={},Ed={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=Symbol.for("react.element"),Ev=Symbol.for("react.portal"),Cv=Symbol.for("react.fragment"),Nv=Symbol.for("react.strict_mode"),xv=Symbol.for("react.profiler"),Pv=Symbol.for("react.provider"),Ov=Symbol.for("react.context"),Dv=Symbol.for("react.forward_ref"),Rv=Symbol.for("react.suspense"),_v=Symbol.for("react.memo"),Lv=Symbol.for("react.lazy"),gh=Symbol.iterator;function bv(t){return t===null||typeof t!="object"?null:(t=gh&&t[gh]||t["@@iterator"],typeof t=="function"?t:null)}var Cd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nd=Object.assign,xd={};function ki(t,n,i){this.props=t,this.context=n,this.refs=xd,this.updater=i||Cd}ki.prototype.isReactComponent={};ki.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pd(){}Pd.prototype=ki.prototype;function Eu(t,n,i){this.props=t,this.context=n,this.refs=xd,this.updater=i||Cd}var Cu=Eu.prototype=new Pd;Cu.constructor=Eu;Nd(Cu,ki.prototype);Cu.isPureReactComponent=!0;var ph=Array.isArray,Od=Object.prototype.hasOwnProperty,Nu={current:null},Dd={key:!0,ref:!0,__self:!0,__source:!0};function Rd(t,n,i){var l,c={},u=null,d=null;if(n!=null)for(l in n.ref!==void 0&&(d=n.ref),n.key!==void 0&&(u=""+n.key),n)Od.call(n,l)&&!Dd.hasOwnProperty(l)&&(c[l]=n[l]);var m=arguments.length-2;if(m===1)c.children=i;else if(1<m){for(var v=Array(m),S=0;S<m;S++)v[S]=arguments[S+2];c.children=v}if(t&&t.defaultProps)for(l in m=t.defaultProps,m)c[l]===void 0&&(c[l]=m[l]);return{$$typeof:Bs,type:t,key:u,ref:d,props:c,_owner:Nu.current}}function Mv(t,n){return{$$typeof:Bs,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function xu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bs}function Bv(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return n[i]})}var mh=/\/+/g;function rl(t,n){return typeof t=="object"&&t!==null&&t.key!=null?Bv(""+t.key):n.toString(36)}function xo(t,n,i,l,c){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(u){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case Bs:case Ev:d=!0}}if(d)return d=t,c=c(d),t=l===""?"."+rl(d,0):l,ph(c)?(i="",t!=null&&(i=t.replace(mh,"$&/")+"/"),xo(c,n,i,"",function(S){return S})):c!=null&&(xu(c)&&(c=Mv(c,i+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(mh,"$&/")+"/")+t)),n.push(c)),1;if(d=0,l=l===""?".":l+":",ph(t))for(var m=0;m<t.length;m++){u=t[m];var v=l+rl(u,m);d+=xo(u,n,i,v,c)}else if(v=bv(t),typeof v=="function")for(t=v.call(t),m=0;!(u=t.next()).done;)u=u.value,v=l+rl(u,m++),d+=xo(u,n,i,v,c);else if(u==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return d}function co(t,n,i){if(t==null)return t;var l=[],c=0;return xo(t,l,"","",function(u){return n.call(i,u,c++)}),l}function $v(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var nt={current:null},Po={transition:null},Uv={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:Po,ReactCurrentOwner:Nu};ie.Children={map:co,forEach:function(t,n,i){co(t,function(){n.apply(this,arguments)},i)},count:function(t){var n=0;return co(t,function(){n++}),n},toArray:function(t){return co(t,function(n){return n})||[]},only:function(t){if(!xu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=ki;ie.Fragment=Cv;ie.Profiler=xv;ie.PureComponent=Eu;ie.StrictMode=Nv;ie.Suspense=Rv;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uv;ie.cloneElement=function(t,n,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var l=Nd({},t.props),c=t.key,u=t.ref,d=t._owner;if(n!=null){if(n.ref!==void 0&&(u=n.ref,d=Nu.current),n.key!==void 0&&(c=""+n.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(v in n)Od.call(n,v)&&!Dd.hasOwnProperty(v)&&(l[v]=n[v]===void 0&&m!==void 0?m[v]:n[v])}var v=arguments.length-2;if(v===1)l.children=i;else if(1<v){m=Array(v);for(var S=0;S<v;S++)m[S]=arguments[S+2];l.children=m}return{$$typeof:Bs,type:t.type,key:c,ref:u,props:l,_owner:d}};ie.createContext=function(t){return t={$$typeof:Ov,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pv,_context:t},t.Consumer=t};ie.createElement=Rd;ie.createFactory=function(t){var n=Rd.bind(null,t);return n.type=t,n};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:Dv,render:t}};ie.isValidElement=xu;ie.lazy=function(t){return{$$typeof:Lv,_payload:{_status:-1,_result:t},_init:$v}};ie.memo=function(t,n){return{$$typeof:_v,type:t,compare:n===void 0?null:n}};ie.startTransition=function(t){var n=Po.transition;Po.transition={};try{t()}finally{Po.transition=n}};ie.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ie.useCallback=function(t,n){return nt.current.useCallback(t,n)};ie.useContext=function(t){return nt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return nt.current.useDeferredValue(t)};ie.useEffect=function(t,n){return nt.current.useEffect(t,n)};ie.useId=function(){return nt.current.useId()};ie.useImperativeHandle=function(t,n,i){return nt.current.useImperativeHandle(t,n,i)};ie.useInsertionEffect=function(t,n){return nt.current.useInsertionEffect(t,n)};ie.useLayoutEffect=function(t,n){return nt.current.useLayoutEffect(t,n)};ie.useMemo=function(t,n){return nt.current.useMemo(t,n)};ie.useReducer=function(t,n,i){return nt.current.useReducer(t,n,i)};ie.useRef=function(t){return nt.current.useRef(t)};ie.useState=function(t){return nt.current.useState(t)};ie.useSyncExternalStore=function(t,n,i){return nt.current.useSyncExternalStore(t,n,i)};ie.useTransition=function(){return nt.current.useTransition()};ie.version="18.2.0";Ed.exports=ie;var at=Ed.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv=at,Fv=Symbol.for("react.element"),jv=Symbol.for("react.fragment"),Vv=Object.prototype.hasOwnProperty,Jv=zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kv={key:!0,ref:!0,__self:!0,__source:!0};function _d(t,n,i){var l,c={},u=null,d=null;i!==void 0&&(u=""+i),n.key!==void 0&&(u=""+n.key),n.ref!==void 0&&(d=n.ref);for(l in n)Vv.call(n,l)&&!Kv.hasOwnProperty(l)&&(c[l]=n[l]);if(t&&t.defaultProps)for(l in n=t.defaultProps,n)c[l]===void 0&&(c[l]=n[l]);return{$$typeof:Fv,type:t,key:u,ref:d,props:c,_owner:Jv.current}}ca.Fragment=jv;ca.jsx=_d;ca.jsxs=_d;Id.exports=ca;var Pe=Id.exports,Dl={},Ld={exports:{}},kt={},bd={exports:{}},Md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(F,Q){var ee=F.length;F.push(Q);e:for(;0<ee;){var Se=ee-1>>>1,De=F[Se];if(0<c(De,Q))F[Se]=Q,F[ee]=De,ee=Se;else break e}}function i(F){return F.length===0?null:F[0]}function l(F){if(F.length===0)return null;var Q=F[0],ee=F.pop();if(ee!==Q){F[0]=ee;e:for(var Se=0,De=F.length,br=De>>>1;Se<br;){var he=2*(Se+1)-1,ue=F[he],pn=he+1,Mr=F[pn];if(0>c(ue,ee))pn<De&&0>c(Mr,ue)?(F[Se]=Mr,F[pn]=ee,Se=pn):(F[Se]=ue,F[he]=ee,Se=he);else if(pn<De&&0>c(Mr,ee))F[Se]=Mr,F[pn]=ee,Se=pn;else break e}}return Q}function c(F,Q){var ee=F.sortIndex-Q.sortIndex;return ee!==0?ee:F.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var v=[],S=[],O=1,P=null,N=3,M=!1,B=!1,z=!1,ce=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var Q=i(S);Q!==null;){if(Q.callback===null)l(S);else if(Q.startTime<=F)l(S),Q.sortIndex=Q.expirationTime,n(v,Q);else break;Q=i(S)}}function R(F){if(z=!1,I(F),!B)if(i(v)!==null)B=!0,Lr(j);else{var Q=i(S);Q!==null&&Ci(R,Q.startTime-F)}}function j(F,Q){B=!1,z&&(z=!1,k(Y),Y=-1),M=!0;var ee=N;try{for(I(Q),P=i(v);P!==null&&(!(P.expirationTime>Q)||F&&!ht());){var Se=P.callback;if(typeof Se=="function"){P.callback=null,N=P.priorityLevel;var De=Se(P.expirationTime<=Q);Q=t.unstable_now(),typeof De=="function"?P.callback=De:P===i(v)&&l(v),I(Q)}else l(v);P=i(v)}if(P!==null)var br=!0;else{var he=i(S);he!==null&&Ci(R,he.startTime-Q),br=!1}return br}finally{P=null,N=ee,M=!1}}var $=!1,W=null,Y=-1,E=5,Z=-1;function ht(){return!(t.unstable_now()-Z<E)}function gn(){if(W!==null){var F=t.unstable_now();Z=F;var Q=!0;try{Q=W(!0,F)}finally{Q?Gt():($=!1,W=null)}}else $=!1}var Gt;if(typeof w=="function")Gt=function(){w(gn)};else if(typeof MessageChannel<"u"){var Ei=new MessageChannel,Ca=Ei.port2;Ei.port1.onmessage=gn,Gt=function(){Ca.postMessage(null)}}else Gt=function(){ce(gn,0)};function Lr(F){W=F,$||($=!0,Gt())}function Ci(F,Q){Y=ce(function(){F(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){B||M||(B=!0,Lr(j))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return i(v)},t.unstable_next=function(F){switch(N){case 1:case 2:case 3:var Q=3;break;default:Q=N}var ee=N;N=Q;try{return F()}finally{N=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,Q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ee=N;N=F;try{return Q()}finally{N=ee}},t.unstable_scheduleCallback=function(F,Q,ee){var Se=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Se+ee:Se):ee=Se,F){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ee+De,F={id:O++,callback:Q,priorityLevel:F,startTime:ee,expirationTime:De,sortIndex:-1},ee>Se?(F.sortIndex=ee,n(S,F),i(v)===null&&F===i(S)&&(z?(k(Y),Y=-1):z=!0,Ci(R,ee-Se))):(F.sortIndex=De,n(v,F),B||M||(B=!0,Lr(j))),F},t.unstable_shouldYield=ht,t.unstable_wrapCallback=function(F){var Q=N;return function(){var ee=N;N=Q;try{return F.apply(this,arguments)}finally{N=ee}}}})(Md);bd.exports=Md;var Wv=bd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd=at,Tt=Wv;function L(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $d=new Set,Ss={};function Rr(t,n){pi(t,n),pi(t+"Capture",n)}function pi(t,n){for(Ss[t]=n,t=0;t<n.length;t++)$d.add(n[t])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rl=Object.prototype.hasOwnProperty,qv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yh={},vh={};function Hv(t){return Rl.call(vh,t)?!0:Rl.call(yh,t)?!1:qv.test(t)?vh[t]=!0:(yh[t]=!0,!1)}function Gv(t,n,i,l){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yv(t,n,i,l){if(n===null||typeof n>"u"||Gv(t,n,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function rt(t,n,i,l,c,u,d){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=t,this.type=n,this.sanitizeURL=u,this.removeEmptyString=d}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Je[n]=new rt(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pu=/[\-:]([a-z])/g;function Ou(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(Pu,Ou);Je[n]=new rt(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(Pu,Ou);Je[n]=new rt(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(Pu,Ou);Je[n]=new rt(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new rt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Du(t,n,i,l){var c=Je.hasOwnProperty(n)?Je[n]:null;(c!==null?c.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Yv(n,i,c,l)&&(i=null),l||c===null?Hv(n)&&(i===null?t.removeAttribute(n):t.setAttribute(n,""+i)):c.mustUseProperty?t[c.propertyName]=i===null?c.type===3?!1:"":i:(n=c.attributeName,l=c.attributeNamespace,i===null?t.removeAttribute(n):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,l?t.setAttributeNS(l,n,i):t.setAttribute(n,i))))}var Ln=Bd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fo=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),Ru=Symbol.for("react.strict_mode"),_l=Symbol.for("react.profiler"),Ud=Symbol.for("react.provider"),zd=Symbol.for("react.context"),_u=Symbol.for("react.forward_ref"),Ll=Symbol.for("react.suspense"),bl=Symbol.for("react.suspense_list"),Lu=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),Fd=Symbol.for("react.offscreen"),wh=Symbol.iterator;function Zi(t){return t===null||typeof t!="object"?null:(t=wh&&t[wh]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,il;function as(t){if(il===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);il=n&&n[1]||""}return`
`+il+t}var sl=!1;function ol(t,n){if(!t||sl)return"";sl=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(S){var l=S}Reflect.construct(t,[],n)}else{try{n.call()}catch(S){l=S}t.call(n.prototype)}else{try{throw Error()}catch(S){l=S}t()}}catch(S){if(S&&l&&typeof S.stack=="string"){for(var c=S.stack.split(`
`),u=l.stack.split(`
`),d=c.length-1,m=u.length-1;1<=d&&0<=m&&c[d]!==u[m];)m--;for(;1<=d&&0<=m;d--,m--)if(c[d]!==u[m]){if(d!==1||m!==1)do if(d--,m--,0>m||c[d]!==u[m]){var v=`
`+c[d].replace(" at new "," at ");return t.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",t.displayName)),v}while(1<=d&&0<=m);break}}}finally{sl=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?as(t):""}function Xv(t){switch(t.tag){case 5:return as(t.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return t=ol(t.type,!1),t;case 11:return t=ol(t.type.render,!1),t;case 1:return t=ol(t.type,!0),t;default:return""}}function Ml(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qr:return"Fragment";case Xr:return"Portal";case _l:return"Profiler";case Ru:return"StrictMode";case Ll:return"Suspense";case bl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zd:return(t.displayName||"Context")+".Consumer";case Ud:return(t._context.displayName||"Context")+".Provider";case _u:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lu:return n=t.displayName||null,n!==null?n:Ml(t.type)||"Memo";case Jn:n=t._payload,t=t._init;try{return Ml(t(n))}catch{}}return null}function Qv(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ml(n);case 8:return n===Ru?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jd(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Zv(t){var n=jd(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,u=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(d){l=""+d,u.call(this,d)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(d){l=""+d},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ho(t){t._valueTracker||(t._valueTracker=Zv(t))}function Vd(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return t&&(l=jd(t)?t.checked?"true":"false":t.value),t=l,t!==i?(n.setValue(t),!0):!1}function zo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bl(t,n){var i=n.checked;return Ce({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function Sh(t,n){var i=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;i=ir(n.value!=null?n.value:i),t._wrapperState={initialChecked:l,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Jd(t,n){n=n.checked,n!=null&&Du(t,"checked",n,!1)}function $l(t,n){Jd(t,n);var i=ir(n.value),l=n.type;if(i!=null)l==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(l==="submit"||l==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Ul(t,n.type,i):n.hasOwnProperty("defaultValue")&&Ul(t,n.type,ir(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Th(t,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,i||n===t.value||(t.value=n),t.defaultValue=n}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function Ul(t,n,i){(n!=="number"||zo(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var ls=Array.isArray;function ui(t,n,i,l){if(t=t.options,n){n={};for(var c=0;c<i.length;c++)n["$"+i[c]]=!0;for(i=0;i<t.length;i++)c=n.hasOwnProperty("$"+t[i].value),t[i].selected!==c&&(t[i].selected=c),c&&l&&(t[i].defaultSelected=!0)}else{for(i=""+ir(i),n=null,c=0;c<t.length;c++){if(t[c].value===i){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function zl(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ce({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kh(t,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(L(92));if(ls(i)){if(1<i.length)throw Error(L(93));i=i[0]}n=i}n==null&&(n=""),i=n}t._wrapperState={initialValue:ir(i)}}function Kd(t,n){var i=ir(n.value),l=ir(n.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),n.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),l!=null&&(t.defaultValue=""+l)}function Ah(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function Wd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fl(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?Wd(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var go,qd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,l,c){MSApp.execUnsafeLocalFunction(function(){return t(n,i,l,c)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(go=go||document.createElement("div"),go.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=go.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Ts(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e0=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){e0.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),fs[n]=fs[t]})});function Hd(t,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||fs.hasOwnProperty(t)&&fs[t]?(""+n).trim():n+"px"}function Gd(t,n){t=t.style;for(var i in n)if(n.hasOwnProperty(i)){var l=i.indexOf("--")===0,c=Hd(i,n[i],l);i==="float"&&(i="cssFloat"),l?t.setProperty(i,c):t[i]=c}}var t0=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jl(t,n){if(n){if(t0[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(L(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(L(61))}if(n.style!=null&&typeof n.style!="object")throw Error(L(62))}}function Vl(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jl=null;function bu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kl=null,ci=null,fi=null;function Ih(t){if(t=zs(t)){if(typeof Kl!="function")throw Error(L(280));var n=t.stateNode;n&&(n=pa(n),Kl(t.stateNode,t.type,n))}}function Yd(t){ci?fi?fi.push(t):fi=[t]:ci=t}function Xd(){if(ci){var t=ci,n=fi;if(fi=ci=null,Ih(t),n)for(t=0;t<n.length;t++)Ih(n[t])}}function Qd(t,n){return t(n)}function Zd(){}var al=!1;function eg(t,n,i){if(al)return t(n,i);al=!0;try{return Qd(t,n,i)}finally{al=!1,(ci!==null||fi!==null)&&(Zd(),Xd())}}function ks(t,n){var i=t.stateNode;if(i===null)return null;var l=pa(i);if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(L(231,n,typeof i));return i}var Wl=!1;if(On)try{var es={};Object.defineProperty(es,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{Wl=!1}function n0(t,n,i,l,c,u,d,m,v){var S=Array.prototype.slice.call(arguments,3);try{n.apply(i,S)}catch(O){this.onError(O)}}var hs=!1,Fo=null,jo=!1,ql=null,r0={onError:function(t){hs=!0,Fo=t}};function i0(t,n,i,l,c,u,d,m,v){hs=!1,Fo=null,n0.apply(r0,arguments)}function s0(t,n,i,l,c,u,d,m,v){if(i0.apply(this,arguments),hs){if(hs){var S=Fo;hs=!1,Fo=null}else throw Error(L(198));jo||(jo=!0,ql=S)}}function _r(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function tg(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Eh(t){if(_r(t)!==t)throw Error(L(188))}function o0(t){var n=t.alternate;if(!n){if(n=_r(t),n===null)throw Error(L(188));return n!==t?null:t}for(var i=t,l=n;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(l=c.return,l!==null){i=l;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return Eh(c),t;if(u===l)return Eh(c),n;u=u.sibling}throw Error(L(188))}if(i.return!==l.return)i=c,l=u;else{for(var d=!1,m=c.child;m;){if(m===i){d=!0,i=c,l=u;break}if(m===l){d=!0,l=c,i=u;break}m=m.sibling}if(!d){for(m=u.child;m;){if(m===i){d=!0,i=u,l=c;break}if(m===l){d=!0,l=u,i=c;break}m=m.sibling}if(!d)throw Error(L(189))}}if(i.alternate!==l)throw Error(L(190))}if(i.tag!==3)throw Error(L(188));return i.stateNode.current===i?t:n}function ng(t){return t=o0(t),t!==null?rg(t):null}function rg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=rg(t);if(n!==null)return n;t=t.sibling}return null}var ig=Tt.unstable_scheduleCallback,Ch=Tt.unstable_cancelCallback,a0=Tt.unstable_shouldYield,l0=Tt.unstable_requestPaint,Oe=Tt.unstable_now,u0=Tt.unstable_getCurrentPriorityLevel,Mu=Tt.unstable_ImmediatePriority,sg=Tt.unstable_UserBlockingPriority,Vo=Tt.unstable_NormalPriority,c0=Tt.unstable_LowPriority,og=Tt.unstable_IdlePriority,fa=null,hn=null;function f0(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(fa,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:g0,h0=Math.log,d0=Math.LN2;function g0(t){return t>>>=0,t===0?32:31-(h0(t)/d0|0)|0}var po=64,mo=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jo(t,n){var i=t.pendingLanes;if(i===0)return 0;var l=0,c=t.suspendedLanes,u=t.pingedLanes,d=i&268435455;if(d!==0){var m=d&~c;m!==0?l=us(m):(u&=d,u!==0&&(l=us(u)))}else d=i&~c,d!==0?l=us(d):u!==0&&(l=us(u));if(l===0)return 0;if(n!==0&&n!==l&&!(n&c)&&(c=l&-l,u=n&-n,c>=u||c===16&&(u&4194240)!==0))return n;if(l&4&&(l|=i&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=l;0<n;)i=31-Wt(n),c=1<<i,l|=t[i],n&=~c;return l}function p0(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m0(t,n){for(var i=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,u=t.pendingLanes;0<u;){var d=31-Wt(u),m=1<<d,v=c[d];v===-1?(!(m&i)||m&l)&&(c[d]=p0(m,n)):v<=n&&(t.expiredLanes|=m),u&=~m}}function Hl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ag(){var t=po;return po<<=1,!(po&4194240)&&(po=64),t}function ll(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function $s(t,n,i){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Wt(n),t[n]=i}function y0(t,n){var i=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var l=t.eventTimes;for(t=t.expirationTimes;0<i;){var c=31-Wt(i),u=1<<c;n[c]=0,l[c]=-1,t[c]=-1,i&=~u}}function Bu(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var l=31-Wt(i),c=1<<l;c&n|t[l]&n&&(t[l]|=n),i&=~c}}var fe=0;function lg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ug,$u,cg,fg,hg,Gl=!1,yo=[],Yn=null,Xn=null,Qn=null,As=new Map,Is=new Map,Wn=[],v0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nh(t,n){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":As.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(n.pointerId)}}function ts(t,n,i,l,c,u){return t===null||t.nativeEvent!==u?(t={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:u,targetContainers:[c]},n!==null&&(n=zs(n),n!==null&&$u(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function w0(t,n,i,l,c){switch(n){case"focusin":return Yn=ts(Yn,t,n,i,l,c),!0;case"dragenter":return Xn=ts(Xn,t,n,i,l,c),!0;case"mouseover":return Qn=ts(Qn,t,n,i,l,c),!0;case"pointerover":var u=c.pointerId;return As.set(u,ts(As.get(u)||null,t,n,i,l,c)),!0;case"gotpointercapture":return u=c.pointerId,Is.set(u,ts(Is.get(u)||null,t,n,i,l,c)),!0}return!1}function dg(t){var n=kr(t.target);if(n!==null){var i=_r(n);if(i!==null){if(n=i.tag,n===13){if(n=tg(i),n!==null){t.blockedOn=n,hg(t.priority,function(){cg(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oo(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Yl(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);Jl=l,i.target.dispatchEvent(l),Jl=null}else return n=zs(i),n!==null&&$u(n),t.blockedOn=i,!1;n.shift()}return!0}function xh(t,n,i){Oo(t)&&i.delete(n)}function S0(){Gl=!1,Yn!==null&&Oo(Yn)&&(Yn=null),Xn!==null&&Oo(Xn)&&(Xn=null),Qn!==null&&Oo(Qn)&&(Qn=null),As.forEach(xh),Is.forEach(xh)}function ns(t,n){t.blockedOn===n&&(t.blockedOn=null,Gl||(Gl=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,S0)))}function Es(t){function n(c){return ns(c,t)}if(0<yo.length){ns(yo[0],t);for(var i=1;i<yo.length;i++){var l=yo[i];l.blockedOn===t&&(l.blockedOn=null)}}for(Yn!==null&&ns(Yn,t),Xn!==null&&ns(Xn,t),Qn!==null&&ns(Qn,t),As.forEach(n),Is.forEach(n),i=0;i<Wn.length;i++)l=Wn[i],l.blockedOn===t&&(l.blockedOn=null);for(;0<Wn.length&&(i=Wn[0],i.blockedOn===null);)dg(i),i.blockedOn===null&&Wn.shift()}var hi=Ln.ReactCurrentBatchConfig,Ko=!0;function T0(t,n,i,l){var c=fe,u=hi.transition;hi.transition=null;try{fe=1,Uu(t,n,i,l)}finally{fe=c,hi.transition=u}}function k0(t,n,i,l){var c=fe,u=hi.transition;hi.transition=null;try{fe=4,Uu(t,n,i,l)}finally{fe=c,hi.transition=u}}function Uu(t,n,i,l){if(Ko){var c=Yl(t,n,i,l);if(c===null)vl(t,n,l,Wo,i),Nh(t,l);else if(w0(c,t,n,i,l))l.stopPropagation();else if(Nh(t,l),n&4&&-1<v0.indexOf(t)){for(;c!==null;){var u=zs(c);if(u!==null&&ug(u),u=Yl(t,n,i,l),u===null&&vl(t,n,l,Wo,i),u===c)break;c=u}c!==null&&l.stopPropagation()}else vl(t,n,l,null,i)}}var Wo=null;function Yl(t,n,i,l){if(Wo=null,t=bu(l),t=kr(t),t!==null)if(n=_r(t),n===null)t=null;else if(i=n.tag,i===13){if(t=tg(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Wo=t,null}function gg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u0()){case Mu:return 1;case sg:return 4;case Vo:case c0:return 16;case og:return 536870912;default:return 16}default:return 16}}var Hn=null,zu=null,Do=null;function pg(){if(Do)return Do;var t,n=zu,i=n.length,l,c="value"in Hn?Hn.value:Hn.textContent,u=c.length;for(t=0;t<i&&n[t]===c[t];t++);var d=i-t;for(l=1;l<=d&&n[i-l]===c[u-l];l++);return Do=c.slice(t,1<l?1-l:void 0)}function Ro(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function vo(){return!0}function Ph(){return!1}function At(t){function n(i,l,c,u,d){this._reactName=i,this._targetInst=c,this.type=l,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(i=t[m],this[m]=i?i(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?vo:Ph,this.isPropagationStopped=Ph,this}return Ce(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=vo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=vo)},persist:function(){},isPersistent:vo}),n}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fu=At(Ai),Us=Ce({},Ai,{view:0,detail:0}),A0=At(Us),ul,cl,rs,ha=Ce({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rs&&(rs&&t.type==="mousemove"?(ul=t.screenX-rs.screenX,cl=t.screenY-rs.screenY):cl=ul=0,rs=t),ul)},movementY:function(t){return"movementY"in t?t.movementY:cl}}),Oh=At(ha),I0=Ce({},ha,{dataTransfer:0}),E0=At(I0),C0=Ce({},Us,{relatedTarget:0}),fl=At(C0),N0=Ce({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),x0=At(N0),P0=Ce({},Ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),O0=At(P0),D0=Ce({},Ai,{data:0}),Dh=At(D0),R0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b0(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=L0[t])?!!n[t]:!1}function ju(){return b0}var M0=Ce({},Us,{key:function(t){if(t.key){var n=R0[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ro(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(t){return t.type==="keypress"?Ro(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ro(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),B0=At(M0),$0=Ce({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rh=At($0),U0=Ce({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),z0=At(U0),F0=Ce({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),j0=At(F0),V0=Ce({},ha,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J0=At(V0),K0=[9,13,27,32],Vu=On&&"CompositionEvent"in window,ds=null;On&&"documentMode"in document&&(ds=document.documentMode);var W0=On&&"TextEvent"in window&&!ds,mg=On&&(!Vu||ds&&8<ds&&11>=ds),_h=String.fromCharCode(32),Lh=!1;function yg(t,n){switch(t){case"keyup":return K0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zr=!1;function q0(t,n){switch(t){case"compositionend":return vg(n);case"keypress":return n.which!==32?null:(Lh=!0,_h);case"textInput":return t=n.data,t===_h&&Lh?null:t;default:return null}}function H0(t,n){if(Zr)return t==="compositionend"||!Vu&&yg(t,n)?(t=pg(),Do=zu=Hn=null,Zr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return mg&&n.locale!=="ko"?null:n.data;default:return null}}var G0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!G0[t.type]:n==="textarea"}function wg(t,n,i,l){Yd(l),n=qo(n,"onChange"),0<n.length&&(i=new Fu("onChange","change",null,i,l),t.push({event:i,listeners:n}))}var gs=null,Cs=null;function Y0(t){Og(t,0)}function da(t){var n=ni(t);if(Vd(n))return t}function X0(t,n){if(t==="change")return n}var Sg=!1;if(On){var hl;if(On){var dl="oninput"in document;if(!dl){var Mh=document.createElement("div");Mh.setAttribute("oninput","return;"),dl=typeof Mh.oninput=="function"}hl=dl}else hl=!1;Sg=hl&&(!document.documentMode||9<document.documentMode)}function Bh(){gs&&(gs.detachEvent("onpropertychange",Tg),Cs=gs=null)}function Tg(t){if(t.propertyName==="value"&&da(Cs)){var n=[];wg(n,Cs,t,bu(t)),eg(Y0,n)}}function Q0(t,n,i){t==="focusin"?(Bh(),gs=n,Cs=i,gs.attachEvent("onpropertychange",Tg)):t==="focusout"&&Bh()}function Z0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return da(Cs)}function e1(t,n){if(t==="click")return da(n)}function t1(t,n){if(t==="input"||t==="change")return da(n)}function n1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ht=typeof Object.is=="function"?Object.is:n1;function Ns(t,n){if(Ht(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var c=i[l];if(!Rl.call(n,c)||!Ht(t[c],n[c]))return!1}return!0}function $h(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uh(t,n){var i=$h(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=n&&l>=n)return{node:i,offset:n-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=$h(i)}}function kg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?kg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Ag(){for(var t=window,n=zo();n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=zo(t.document)}return n}function Ju(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function r1(t){var n=Ag(),i=t.focusedElem,l=t.selectionRange;if(n!==i&&i&&i.ownerDocument&&kg(i.ownerDocument.documentElement,i)){if(l!==null&&Ju(i)){if(n=l.start,t=l.end,t===void 0&&(t=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(t,i.value.length);else if(t=(n=i.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var c=i.textContent.length,u=Math.min(l.start,c);l=l.end===void 0?u:Math.min(l.end,c),!t.extend&&u>l&&(c=l,l=u,u=c),c=Uh(i,u);var d=Uh(i,l);c&&d&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),t.removeAllRanges(),u>l?(t.addRange(n),t.extend(d.node,d.offset)):(n.setEnd(d.node,d.offset),t.addRange(n)))}}for(n=[],t=i;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)t=n[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i1=On&&"documentMode"in document&&11>=document.documentMode,ei=null,Xl=null,ps=null,Ql=!1;function zh(t,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ql||ei==null||ei!==zo(l)||(l=ei,"selectionStart"in l&&Ju(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ps&&Ns(ps,l)||(ps=l,l=qo(Xl,"onSelect"),0<l.length&&(n=new Fu("onSelect","select",null,n,i),t.push({event:n,listeners:l}),n.target=ei)))}function wo(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var ti={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionend:wo("Transition","TransitionEnd")},gl={},Ig={};On&&(Ig=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function ga(t){if(gl[t])return gl[t];if(!ti[t])return t;var n=ti[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in Ig)return gl[t]=n[i];return t}var Eg=ga("animationend"),Cg=ga("animationiteration"),Ng=ga("animationstart"),xg=ga("transitionend"),Pg=new Map,Fh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(t,n){Pg.set(t,n),Rr(n,[t])}for(var pl=0;pl<Fh.length;pl++){var ml=Fh[pl],s1=ml.toLowerCase(),o1=ml[0].toUpperCase()+ml.slice(1);or(s1,"on"+o1)}or(Eg,"onAnimationEnd");or(Cg,"onAnimationIteration");or(Ng,"onAnimationStart");or("dblclick","onDoubleClick");or("focusin","onFocus");or("focusout","onBlur");or(xg,"onTransitionEnd");pi("onMouseEnter",["mouseout","mouseover"]);pi("onMouseLeave",["mouseout","mouseover"]);pi("onPointerEnter",["pointerout","pointerover"]);pi("onPointerLeave",["pointerout","pointerover"]);Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a1=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function jh(t,n,i){var l=t.type||"unknown-event";t.currentTarget=i,s0(l,n,void 0,t),t.currentTarget=null}function Og(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],c=l.event;l=l.listeners;e:{var u=void 0;if(n)for(var d=l.length-1;0<=d;d--){var m=l[d],v=m.instance,S=m.currentTarget;if(m=m.listener,v!==u&&c.isPropagationStopped())break e;jh(c,m,S),u=v}else for(d=0;d<l.length;d++){if(m=l[d],v=m.instance,S=m.currentTarget,m=m.listener,v!==u&&c.isPropagationStopped())break e;jh(c,m,S),u=v}}}if(jo)throw t=ql,jo=!1,ql=null,t}function ve(t,n){var i=n[ru];i===void 0&&(i=n[ru]=new Set);var l=t+"__bubble";i.has(l)||(Dg(n,t,2,!1),i.add(l))}function yl(t,n,i){var l=0;n&&(l|=4),Dg(i,t,l,n)}var So="_reactListening"+Math.random().toString(36).slice(2);function xs(t){if(!t[So]){t[So]=!0,$d.forEach(function(i){i!=="selectionchange"&&(a1.has(i)||yl(i,!1,t),yl(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[So]||(n[So]=!0,yl("selectionchange",!1,n))}}function Dg(t,n,i,l){switch(gg(n)){case 1:var c=T0;break;case 4:c=k0;break;default:c=Uu}i=c.bind(null,n,i,t),c=void 0,!Wl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,i,{capture:!0,passive:c}):t.addEventListener(n,i,!0):c!==void 0?t.addEventListener(n,i,{passive:c}):t.addEventListener(n,i,!1)}function vl(t,n,i,l,c){var u=l;if(!(n&1)&&!(n&2)&&l!==null)e:for(;;){if(l===null)return;var d=l.tag;if(d===3||d===4){var m=l.stateNode.containerInfo;if(m===c||m.nodeType===8&&m.parentNode===c)break;if(d===4)for(d=l.return;d!==null;){var v=d.tag;if((v===3||v===4)&&(v=d.stateNode.containerInfo,v===c||v.nodeType===8&&v.parentNode===c))return;d=d.return}for(;m!==null;){if(d=kr(m),d===null)return;if(v=d.tag,v===5||v===6){l=u=d;continue e}m=m.parentNode}}l=l.return}eg(function(){var S=u,O=bu(i),P=[];e:{var N=Pg.get(t);if(N!==void 0){var M=Fu,B=t;switch(t){case"keypress":if(Ro(i)===0)break e;case"keydown":case"keyup":M=B0;break;case"focusin":B="focus",M=fl;break;case"focusout":B="blur",M=fl;break;case"beforeblur":case"afterblur":M=fl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=E0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=z0;break;case Eg:case Cg:case Ng:M=x0;break;case xg:M=j0;break;case"scroll":M=A0;break;case"wheel":M=J0;break;case"copy":case"cut":case"paste":M=O0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Rh}var z=(n&4)!==0,ce=!z&&t==="scroll",k=z?N!==null?N+"Capture":null:N;z=[];for(var w=S,I;w!==null;){I=w;var R=I.stateNode;if(I.tag===5&&R!==null&&(I=R,k!==null&&(R=ks(w,k),R!=null&&z.push(Ps(w,R,I)))),ce)break;w=w.return}0<z.length&&(N=new M(N,B,null,i,O),P.push({event:N,listeners:z}))}}if(!(n&7)){e:{if(N=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",N&&i!==Jl&&(B=i.relatedTarget||i.fromElement)&&(kr(B)||B[Dn]))break e;if((M||N)&&(N=O.window===O?O:(N=O.ownerDocument)?N.defaultView||N.parentWindow:window,M?(B=i.relatedTarget||i.toElement,M=S,B=B?kr(B):null,B!==null&&(ce=_r(B),B!==ce||B.tag!==5&&B.tag!==6)&&(B=null)):(M=null,B=S),M!==B)){if(z=Oh,R="onMouseLeave",k="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(z=Rh,R="onPointerLeave",k="onPointerEnter",w="pointer"),ce=M==null?N:ni(M),I=B==null?N:ni(B),N=new z(R,w+"leave",M,i,O),N.target=ce,N.relatedTarget=I,R=null,kr(O)===S&&(z=new z(k,w+"enter",B,i,O),z.target=I,z.relatedTarget=ce,R=z),ce=R,M&&B)t:{for(z=M,k=B,w=0,I=z;I;I=Yr(I))w++;for(I=0,R=k;R;R=Yr(R))I++;for(;0<w-I;)z=Yr(z),w--;for(;0<I-w;)k=Yr(k),I--;for(;w--;){if(z===k||k!==null&&z===k.alternate)break t;z=Yr(z),k=Yr(k)}z=null}else z=null;M!==null&&Vh(P,N,M,z,!1),B!==null&&ce!==null&&Vh(P,ce,B,z,!0)}}e:{if(N=S?ni(S):window,M=N.nodeName&&N.nodeName.toLowerCase(),M==="select"||M==="input"&&N.type==="file")var j=X0;else if(bh(N))if(Sg)j=t1;else{j=Z0;var $=Q0}else(M=N.nodeName)&&M.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(j=e1);if(j&&(j=j(t,S))){wg(P,j,i,O);break e}$&&$(t,N,S),t==="focusout"&&($=N._wrapperState)&&$.controlled&&N.type==="number"&&Ul(N,"number",N.value)}switch($=S?ni(S):window,t){case"focusin":(bh($)||$.contentEditable==="true")&&(ei=$,Xl=S,ps=null);break;case"focusout":ps=Xl=ei=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,zh(P,i,O);break;case"selectionchange":if(i1)break;case"keydown":case"keyup":zh(P,i,O)}var W;if(Vu)e:{switch(t){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else Zr?yg(t,i)&&(Y="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Y="onCompositionStart");Y&&(mg&&i.locale!=="ko"&&(Zr||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&Zr&&(W=pg()):(Hn=O,zu="value"in Hn?Hn.value:Hn.textContent,Zr=!0)),$=qo(S,Y),0<$.length&&(Y=new Dh(Y,t,null,i,O),P.push({event:Y,listeners:$}),W?Y.data=W:(W=vg(i),W!==null&&(Y.data=W)))),(W=W0?q0(t,i):H0(t,i))&&(S=qo(S,"onBeforeInput"),0<S.length&&(O=new Dh("onBeforeInput","beforeinput",null,i,O),P.push({event:O,listeners:S}),O.data=W))}Og(P,n)})}function Ps(t,n,i){return{instance:t,listener:n,currentTarget:i}}function qo(t,n){for(var i=n+"Capture",l=[];t!==null;){var c=t,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=ks(t,i),u!=null&&l.unshift(Ps(t,u,c)),u=ks(t,n),u!=null&&l.push(Ps(t,u,c))),t=t.return}return l}function Yr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vh(t,n,i,l,c){for(var u=n._reactName,d=[];i!==null&&i!==l;){var m=i,v=m.alternate,S=m.stateNode;if(v!==null&&v===l)break;m.tag===5&&S!==null&&(m=S,c?(v=ks(i,u),v!=null&&d.unshift(Ps(i,v,m))):c||(v=ks(i,u),v!=null&&d.push(Ps(i,v,m)))),i=i.return}d.length!==0&&t.push({event:n,listeners:d})}var l1=/\r\n?/g,u1=/\u0000|\uFFFD/g;function Jh(t){return(typeof t=="string"?t:""+t).replace(l1,`
`).replace(u1,"")}function To(t,n,i){if(n=Jh(n),Jh(t)!==n&&i)throw Error(L(425))}function Ho(){}var Zl=null,eu=null;function tu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var nu=typeof setTimeout=="function"?setTimeout:void 0,c1=typeof clearTimeout=="function"?clearTimeout:void 0,Kh=typeof Promise=="function"?Promise:void 0,f1=typeof queueMicrotask=="function"?queueMicrotask:typeof Kh<"u"?function(t){return Kh.resolve(null).then(t).catch(h1)}:nu;function h1(t){setTimeout(function(){throw t})}function wl(t,n){var i=n,l=0;do{var c=i.nextSibling;if(t.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(l===0){t.removeChild(c),Es(n);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=c}while(i);Es(n)}function Zn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Wh(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}var Ii=Math.random().toString(36).slice(2),fn="__reactFiber$"+Ii,Os="__reactProps$"+Ii,Dn="__reactContainer$"+Ii,ru="__reactEvents$"+Ii,d1="__reactListeners$"+Ii,g1="__reactHandles$"+Ii;function kr(t){var n=t[fn];if(n)return n;for(var i=t.parentNode;i;){if(n=i[Dn]||i[fn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=Wh(t);t!==null;){if(i=t[fn])return i;t=Wh(t)}return n}t=i,i=t.parentNode}return null}function zs(t){return t=t[fn]||t[Dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function pa(t){return t[Os]||null}var iu=[],ri=-1;function ar(t){return{current:t}}function we(t){0>ri||(t.current=iu[ri],iu[ri]=null,ri--)}function ye(t,n){ri++,iu[ri]=t.current,t.current=n}var sr={},Ye=ar(sr),ut=ar(!1),Nr=sr;function mi(t,n){var i=t.type.contextTypes;if(!i)return sr;var l=t.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in i)c[u]=n[u];return l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=c),c}function ct(t){return t=t.childContextTypes,t!=null}function Go(){we(ut),we(Ye)}function qh(t,n,i){if(Ye.current!==sr)throw Error(L(168));ye(Ye,n),ye(ut,i)}function Rg(t,n,i){var l=t.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var c in l)if(!(c in n))throw Error(L(108,Qv(t)||"Unknown",c));return Ce({},i,l)}function Yo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sr,Nr=Ye.current,ye(Ye,t),ye(ut,ut.current),!0}function Hh(t,n,i){var l=t.stateNode;if(!l)throw Error(L(169));i?(t=Rg(t,n,Nr),l.__reactInternalMemoizedMergedChildContext=t,we(ut),we(Ye),ye(Ye,t)):we(ut),ye(ut,i)}var Cn=null,ma=!1,Sl=!1;function _g(t){Cn===null?Cn=[t]:Cn.push(t)}function p1(t){ma=!0,_g(t)}function lr(){if(!Sl&&Cn!==null){Sl=!0;var t=0,n=fe;try{var i=Cn;for(fe=1;t<i.length;t++){var l=i[t];do l=l(!0);while(l!==null)}Cn=null,ma=!1}catch(c){throw Cn!==null&&(Cn=Cn.slice(t+1)),ig(Mu,lr),c}finally{fe=n,Sl=!1}}return null}var ii=[],si=0,Xo=null,Qo=0,Pt=[],Ot=0,xr=null,Nn=1,xn="";function Sr(t,n){ii[si++]=Qo,ii[si++]=Xo,Xo=t,Qo=n}function Lg(t,n,i){Pt[Ot++]=Nn,Pt[Ot++]=xn,Pt[Ot++]=xr,xr=t;var l=Nn;t=xn;var c=32-Wt(l)-1;l&=~(1<<c),i+=1;var u=32-Wt(n)+c;if(30<u){var d=c-c%5;u=(l&(1<<d)-1).toString(32),l>>=d,c-=d,Nn=1<<32-Wt(n)+c|i<<c|l,xn=u+t}else Nn=1<<u|i<<c|l,xn=t}function Ku(t){t.return!==null&&(Sr(t,1),Lg(t,1,0))}function Wu(t){for(;t===Xo;)Xo=ii[--si],ii[si]=null,Qo=ii[--si],ii[si]=null;for(;t===xr;)xr=Pt[--Ot],Pt[Ot]=null,xn=Pt[--Ot],Pt[Ot]=null,Nn=Pt[--Ot],Pt[Ot]=null}var St=null,wt=null,Ae=!1,Kt=null;function bg(t,n){var i=Dt(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=t,n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)}function Gh(t,n){switch(t.tag){case 5:var i=t.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,St=t,wt=Zn(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,St=t,wt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=xr!==null?{id:Nn,overflow:xn}:null,t.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=Dt(18,null,null,0),i.stateNode=n,i.return=t,t.child=i,St=t,wt=null,!0):!1;default:return!1}}function su(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ou(t){if(Ae){var n=wt;if(n){var i=n;if(!Gh(t,n)){if(su(t))throw Error(L(418));n=Zn(i.nextSibling);var l=St;n&&Gh(t,n)?bg(l,i):(t.flags=t.flags&-4097|2,Ae=!1,St=t)}}else{if(su(t))throw Error(L(418));t.flags=t.flags&-4097|2,Ae=!1,St=t}}}function Yh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function ko(t){if(t!==St)return!1;if(!Ae)return Yh(t),Ae=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!tu(t.type,t.memoizedProps)),n&&(n=wt)){if(su(t))throw Mg(),Error(L(418));for(;n;)bg(t,n),n=Zn(n.nextSibling)}if(Yh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(n===0){wt=Zn(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}t=t.nextSibling}wt=null}}else wt=St?Zn(t.stateNode.nextSibling):null;return!0}function Mg(){for(var t=wt;t;)t=Zn(t.nextSibling)}function yi(){wt=St=null,Ae=!1}function qu(t){Kt===null?Kt=[t]:Kt.push(t)}var m1=Ln.ReactCurrentBatchConfig;function Vt(t,n){if(t&&t.defaultProps){n=Ce({},n),t=t.defaultProps;for(var i in t)n[i]===void 0&&(n[i]=t[i]);return n}return n}var Zo=ar(null),ea=null,oi=null,Hu=null;function Gu(){Hu=oi=ea=null}function Yu(t){var n=Zo.current;we(Zo),t._currentValue=n}function au(t,n,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===i)break;t=t.return}}function di(t,n){ea=t,Hu=oi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(lt=!0),t.firstContext=null)}function _t(t){var n=t._currentValue;if(Hu!==t)if(t={context:t,memoizedValue:n,next:null},oi===null){if(ea===null)throw Error(L(308));oi=t,ea.dependencies={lanes:0,firstContext:t}}else oi=oi.next=t;return n}var Ar=null;function Xu(t){Ar===null?Ar=[t]:Ar.push(t)}function Bg(t,n,i,l){var c=n.interleaved;return c===null?(i.next=i,Xu(n)):(i.next=c.next,c.next=i),n.interleaved=i,Rn(t,l)}function Rn(t,n){t.lanes|=n;var i=t.alternate;for(i!==null&&(i.lanes|=n),i=t,t=t.return;t!==null;)t.childLanes|=n,i=t.alternate,i!==null&&(i.childLanes|=n),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Kn=!1;function Qu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $g(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pn(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function er(t,n,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,oe&2){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,Rn(t,i)}return c=l.interleaved,c===null?(n.next=n,Xu(l)):(n.next=c.next,c.next=n),l.interleaved=n,Rn(t,i)}function _o(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,Bu(t,i)}}function Xh(t,n){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};u===null?c=u=d:u=u.next=d,i=i.next}while(i!==null);u===null?c=u=n:u=u.next=n}else c=u=n;i={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:l.shared,effects:l.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}function ta(t,n,i,l){var c=t.updateQueue;Kn=!1;var u=c.firstBaseUpdate,d=c.lastBaseUpdate,m=c.shared.pending;if(m!==null){c.shared.pending=null;var v=m,S=v.next;v.next=null,d===null?u=S:d.next=S,d=v;var O=t.alternate;O!==null&&(O=O.updateQueue,m=O.lastBaseUpdate,m!==d&&(m===null?O.firstBaseUpdate=S:m.next=S,O.lastBaseUpdate=v))}if(u!==null){var P=c.baseState;d=0,O=S=v=null,m=u;do{var N=m.lane,M=m.eventTime;if((l&N)===N){O!==null&&(O=O.next={eventTime:M,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var B=t,z=m;switch(N=n,M=i,z.tag){case 1:if(B=z.payload,typeof B=="function"){P=B.call(M,P,N);break e}P=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=z.payload,N=typeof B=="function"?B.call(M,P,N):B,N==null)break e;P=Ce({},P,N);break e;case 2:Kn=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,N=c.effects,N===null?c.effects=[m]:N.push(m))}else M={eventTime:M,lane:N,tag:m.tag,payload:m.payload,callback:m.callback,next:null},O===null?(S=O=M,v=P):O=O.next=M,d|=N;if(m=m.next,m===null){if(m=c.shared.pending,m===null)break;N=m,m=N.next,N.next=null,c.lastBaseUpdate=N,c.shared.pending=null}}while(1);if(O===null&&(v=P),c.baseState=v,c.firstBaseUpdate=S,c.lastBaseUpdate=O,n=c.shared.interleaved,n!==null){c=n;do d|=c.lane,c=c.next;while(c!==n)}else u===null&&(c.shared.lanes=0);Or|=d,t.lanes=d,t.memoizedState=P}}function Qh(t,n,i){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var l=t[n],c=l.callback;if(c!==null){if(l.callback=null,l=i,typeof c!="function")throw Error(L(191,c));c.call(l)}}}var Ug=new Bd.Component().refs;function lu(t,n,i,l){n=t.memoizedState,i=i(l,n),i=i==null?n:Ce({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var ya={isMounted:function(t){return(t=t._reactInternals)?_r(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var l=tt(),c=nr(t),u=Pn(l,c);u.payload=n,i!=null&&(u.callback=i),n=er(t,u,c),n!==null&&(qt(n,t,c,l),_o(n,t,c))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var l=tt(),c=nr(t),u=Pn(l,c);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=er(t,u,c),n!==null&&(qt(n,t,c,l),_o(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=tt(),l=nr(t),c=Pn(i,l);c.tag=2,n!=null&&(c.callback=n),n=er(t,c,l),n!==null&&(qt(n,t,l,i),_o(n,t,l))}};function Zh(t,n,i,l,c,u,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,u,d):n.prototype&&n.prototype.isPureReactComponent?!Ns(i,l)||!Ns(c,u):!0}function zg(t,n,i){var l=!1,c=sr,u=n.contextType;return typeof u=="object"&&u!==null?u=_t(u):(c=ct(n)?Nr:Ye.current,l=n.contextTypes,u=(l=l!=null)?mi(t,c):sr),n=new n(i,u),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ya,t.stateNode=n,n._reactInternals=t,l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=u),n}function ed(t,n,i,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==t&&ya.enqueueReplaceState(n,n.state,null)}function uu(t,n,i,l){var c=t.stateNode;c.props=i,c.state=t.memoizedState,c.refs=Ug,Qu(t);var u=n.contextType;typeof u=="object"&&u!==null?c.context=_t(u):(u=ct(n)?Nr:Ye.current,c.context=mi(t,u)),c.state=t.memoizedState,u=n.getDerivedStateFromProps,typeof u=="function"&&(lu(t,n,u,i),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&ya.enqueueReplaceState(c,c.state,null),ta(t,i,c,l),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function is(t,n,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(L(309));var l=i.stateNode}if(!l)throw Error(L(147,t));var c=l,u=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===u?n.ref:(n=function(d){var m=c.refs;m===Ug&&(m=c.refs={}),d===null?delete m[u]:m[u]=d},n._stringRef=u,n)}if(typeof t!="string")throw Error(L(284));if(!i._owner)throw Error(L(290,t))}return t}function Ao(t,n){throw t=Object.prototype.toString.call(n),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function td(t){var n=t._init;return n(t._payload)}function Fg(t){function n(k,w){if(t){var I=k.deletions;I===null?(k.deletions=[w],k.flags|=16):I.push(w)}}function i(k,w){if(!t)return null;for(;w!==null;)n(k,w),w=w.sibling;return null}function l(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function c(k,w){return k=rr(k,w),k.index=0,k.sibling=null,k}function u(k,w,I){return k.index=I,t?(I=k.alternate,I!==null?(I=I.index,I<w?(k.flags|=2,w):I):(k.flags|=2,w)):(k.flags|=1048576,w)}function d(k){return t&&k.alternate===null&&(k.flags|=2),k}function m(k,w,I,R){return w===null||w.tag!==6?(w=Nl(I,k.mode,R),w.return=k,w):(w=c(w,I),w.return=k,w)}function v(k,w,I,R){var j=I.type;return j===Qr?O(k,w,I.props.children,R,I.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Jn&&td(j)===w.type)?(R=c(w,I.props),R.ref=is(k,w,I),R.return=k,R):(R=Uo(I.type,I.key,I.props,null,k.mode,R),R.ref=is(k,w,I),R.return=k,R)}function S(k,w,I,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=xl(I,k.mode,R),w.return=k,w):(w=c(w,I.children||[]),w.return=k,w)}function O(k,w,I,R,j){return w===null||w.tag!==7?(w=Cr(I,k.mode,R,j),w.return=k,w):(w=c(w,I),w.return=k,w)}function P(k,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nl(""+w,k.mode,I),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fo:return I=Uo(w.type,w.key,w.props,null,k.mode,I),I.ref=is(k,null,w),I.return=k,I;case Xr:return w=xl(w,k.mode,I),w.return=k,w;case Jn:var R=w._init;return P(k,R(w._payload),I)}if(ls(w)||Zi(w))return w=Cr(w,k.mode,I,null),w.return=k,w;Ao(k,w)}return null}function N(k,w,I,R){var j=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return j!==null?null:m(k,w,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case fo:return I.key===j?v(k,w,I,R):null;case Xr:return I.key===j?S(k,w,I,R):null;case Jn:return j=I._init,N(k,w,j(I._payload),R)}if(ls(I)||Zi(I))return j!==null?null:O(k,w,I,R,null);Ao(k,I)}return null}function M(k,w,I,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return k=k.get(I)||null,m(w,k,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case fo:return k=k.get(R.key===null?I:R.key)||null,v(w,k,R,j);case Xr:return k=k.get(R.key===null?I:R.key)||null,S(w,k,R,j);case Jn:var $=R._init;return M(k,w,I,$(R._payload),j)}if(ls(R)||Zi(R))return k=k.get(I)||null,O(w,k,R,j,null);Ao(w,R)}return null}function B(k,w,I,R){for(var j=null,$=null,W=w,Y=w=0,E=null;W!==null&&Y<I.length;Y++){W.index>Y?(E=W,W=null):E=W.sibling;var Z=N(k,W,I[Y],R);if(Z===null){W===null&&(W=E);break}t&&W&&Z.alternate===null&&n(k,W),w=u(Z,w,Y),$===null?j=Z:$.sibling=Z,$=Z,W=E}if(Y===I.length)return i(k,W),Ae&&Sr(k,Y),j;if(W===null){for(;Y<I.length;Y++)W=P(k,I[Y],R),W!==null&&(w=u(W,w,Y),$===null?j=W:$.sibling=W,$=W);return Ae&&Sr(k,Y),j}for(W=l(k,W);Y<I.length;Y++)E=M(W,k,Y,I[Y],R),E!==null&&(t&&E.alternate!==null&&W.delete(E.key===null?Y:E.key),w=u(E,w,Y),$===null?j=E:$.sibling=E,$=E);return t&&W.forEach(function(ht){return n(k,ht)}),Ae&&Sr(k,Y),j}function z(k,w,I,R){var j=Zi(I);if(typeof j!="function")throw Error(L(150));if(I=j.call(I),I==null)throw Error(L(151));for(var $=j=null,W=w,Y=w=0,E=null,Z=I.next();W!==null&&!Z.done;Y++,Z=I.next()){W.index>Y?(E=W,W=null):E=W.sibling;var ht=N(k,W,Z.value,R);if(ht===null){W===null&&(W=E);break}t&&W&&ht.alternate===null&&n(k,W),w=u(ht,w,Y),$===null?j=ht:$.sibling=ht,$=ht,W=E}if(Z.done)return i(k,W),Ae&&Sr(k,Y),j;if(W===null){for(;!Z.done;Y++,Z=I.next())Z=P(k,Z.value,R),Z!==null&&(w=u(Z,w,Y),$===null?j=Z:$.sibling=Z,$=Z);return Ae&&Sr(k,Y),j}for(W=l(k,W);!Z.done;Y++,Z=I.next())Z=M(W,k,Y,Z.value,R),Z!==null&&(t&&Z.alternate!==null&&W.delete(Z.key===null?Y:Z.key),w=u(Z,w,Y),$===null?j=Z:$.sibling=Z,$=Z);return t&&W.forEach(function(gn){return n(k,gn)}),Ae&&Sr(k,Y),j}function ce(k,w,I,R){if(typeof I=="object"&&I!==null&&I.type===Qr&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case fo:e:{for(var j=I.key,$=w;$!==null;){if($.key===j){if(j=I.type,j===Qr){if($.tag===7){i(k,$.sibling),w=c($,I.props.children),w.return=k,k=w;break e}}else if($.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Jn&&td(j)===$.type){i(k,$.sibling),w=c($,I.props),w.ref=is(k,$,I),w.return=k,k=w;break e}i(k,$);break}else n(k,$);$=$.sibling}I.type===Qr?(w=Cr(I.props.children,k.mode,R,I.key),w.return=k,k=w):(R=Uo(I.type,I.key,I.props,null,k.mode,R),R.ref=is(k,w,I),R.return=k,k=R)}return d(k);case Xr:e:{for($=I.key;w!==null;){if(w.key===$)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){i(k,w.sibling),w=c(w,I.children||[]),w.return=k,k=w;break e}else{i(k,w);break}else n(k,w);w=w.sibling}w=xl(I,k.mode,R),w.return=k,k=w}return d(k);case Jn:return $=I._init,ce(k,w,$(I._payload),R)}if(ls(I))return B(k,w,I,R);if(Zi(I))return z(k,w,I,R);Ao(k,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(i(k,w.sibling),w=c(w,I),w.return=k,k=w):(i(k,w),w=Nl(I,k.mode,R),w.return=k,k=w),d(k)):i(k,w)}return ce}var vi=Fg(!0),jg=Fg(!1),Fs={},dn=ar(Fs),Ds=ar(Fs),Rs=ar(Fs);function Ir(t){if(t===Fs)throw Error(L(174));return t}function Zu(t,n){switch(ye(Rs,n),ye(Ds,t),ye(dn,Fs),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Fl(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Fl(n,t)}we(dn),ye(dn,n)}function wi(){we(dn),we(Ds),we(Rs)}function Vg(t){Ir(Rs.current);var n=Ir(dn.current),i=Fl(n,t.type);n!==i&&(ye(Ds,t),ye(dn,i))}function ec(t){Ds.current===t&&(we(dn),we(Ds))}var Ie=ar(0);function na(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Tl=[];function tc(){for(var t=0;t<Tl.length;t++)Tl[t]._workInProgressVersionPrimary=null;Tl.length=0}var Lo=Ln.ReactCurrentDispatcher,kl=Ln.ReactCurrentBatchConfig,Pr=0,Ee=null,Be=null,Ue=null,ra=!1,ms=!1,_s=0,y1=0;function qe(){throw Error(L(321))}function nc(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Ht(t[i],n[i]))return!1;return!0}function rc(t,n,i,l,c,u){if(Pr=u,Ee=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Lo.current=t===null||t.memoizedState===null?T1:k1,t=i(l,c),ms){u=0;do{if(ms=!1,_s=0,25<=u)throw Error(L(301));u+=1,Ue=Be=null,n.updateQueue=null,Lo.current=A1,t=i(l,c)}while(ms)}if(Lo.current=ia,n=Be!==null&&Be.next!==null,Pr=0,Ue=Be=Ee=null,ra=!1,n)throw Error(L(300));return t}function ic(){var t=_s!==0;return _s=0,t}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ee.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Lt(){if(Be===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var n=Ue===null?Ee.memoizedState:Ue.next;if(n!==null)Ue=n,Be=t;else{if(t===null)throw Error(L(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ue===null?Ee.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Ls(t,n){return typeof n=="function"?n(t):n}function Al(t){var n=Lt(),i=n.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=t;var l=Be,c=l.baseQueue,u=i.pending;if(u!==null){if(c!==null){var d=c.next;c.next=u.next,u.next=d}l.baseQueue=c=u,i.pending=null}if(c!==null){u=c.next,l=l.baseState;var m=d=null,v=null,S=u;do{var O=S.lane;if((Pr&O)===O)v!==null&&(v=v.next={lane:0,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null}),l=S.hasEagerState?S.eagerState:t(l,S.action);else{var P={lane:O,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null};v===null?(m=v=P,d=l):v=v.next=P,Ee.lanes|=O,Or|=O}S=S.next}while(S!==null&&S!==u);v===null?d=l:v.next=m,Ht(l,n.memoizedState)||(lt=!0),n.memoizedState=l,n.baseState=d,n.baseQueue=v,i.lastRenderedState=l}if(t=i.interleaved,t!==null){c=t;do u=c.lane,Ee.lanes|=u,Or|=u,c=c.next;while(c!==t)}else c===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function Il(t){var n=Lt(),i=n.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=t;var l=i.dispatch,c=i.pending,u=n.memoizedState;if(c!==null){i.pending=null;var d=c=c.next;do u=t(u,d.action),d=d.next;while(d!==c);Ht(u,n.memoizedState)||(lt=!0),n.memoizedState=u,n.baseQueue===null&&(n.baseState=u),i.lastRenderedState=u}return[u,l]}function Jg(){}function Kg(t,n){var i=Ee,l=Lt(),c=n(),u=!Ht(l.memoizedState,c);if(u&&(l.memoizedState=c,lt=!0),l=l.queue,sc(Hg.bind(null,i,l,t),[t]),l.getSnapshot!==n||u||Ue!==null&&Ue.memoizedState.tag&1){if(i.flags|=2048,bs(9,qg.bind(null,i,l,c,n),void 0,null),ze===null)throw Error(L(349));Pr&30||Wg(i,n,c)}return c}function Wg(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=Ee.updateQueue,n===null?(n={lastEffect:null,stores:null},Ee.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function qg(t,n,i,l){n.value=i,n.getSnapshot=l,Gg(n)&&Yg(t)}function Hg(t,n,i){return i(function(){Gg(n)&&Yg(t)})}function Gg(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Ht(t,i)}catch{return!0}}function Yg(t){var n=Rn(t,1);n!==null&&qt(n,t,1,-1)}function nd(t){var n=cn();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:t},n.queue=t,t=t.dispatch=S1.bind(null,Ee,t),[n.memoizedState,t]}function bs(t,n,i,l){return t={tag:t,create:n,destroy:i,deps:l,next:null},n=Ee.updateQueue,n===null?(n={lastEffect:null,stores:null},Ee.updateQueue=n,n.lastEffect=t.next=t):(i=n.lastEffect,i===null?n.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,n.lastEffect=t)),t}function Xg(){return Lt().memoizedState}function bo(t,n,i,l){var c=cn();Ee.flags|=t,c.memoizedState=bs(1|n,i,void 0,l===void 0?null:l)}function va(t,n,i,l){var c=Lt();l=l===void 0?null:l;var u=void 0;if(Be!==null){var d=Be.memoizedState;if(u=d.destroy,l!==null&&nc(l,d.deps)){c.memoizedState=bs(n,i,u,l);return}}Ee.flags|=t,c.memoizedState=bs(1|n,i,u,l)}function rd(t,n){return bo(8390656,8,t,n)}function sc(t,n){return va(2048,8,t,n)}function Qg(t,n){return va(4,2,t,n)}function Zg(t,n){return va(4,4,t,n)}function ep(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function tp(t,n,i){return i=i!=null?i.concat([t]):null,va(4,4,ep.bind(null,n,t),i)}function oc(){}function np(t,n){var i=Lt();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&nc(n,l[1])?l[0]:(i.memoizedState=[t,n],t)}function rp(t,n){var i=Lt();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&nc(n,l[1])?l[0]:(t=t(),i.memoizedState=[t,n],t)}function ip(t,n,i){return Pr&21?(Ht(i,n)||(i=ag(),Ee.lanes|=i,Or|=i,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,lt=!0),t.memoizedState=i)}function v1(t,n){var i=fe;fe=i!==0&&4>i?i:4,t(!0);var l=kl.transition;kl.transition={};try{t(!1),n()}finally{fe=i,kl.transition=l}}function sp(){return Lt().memoizedState}function w1(t,n,i){var l=nr(t);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},op(t))ap(n,i);else if(i=Bg(t,n,i,l),i!==null){var c=tt();qt(i,t,l,c),lp(i,n,l)}}function S1(t,n,i){var l=nr(t),c={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(op(t))ap(n,c);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=n.lastRenderedReducer,u!==null))try{var d=n.lastRenderedState,m=u(d,i);if(c.hasEagerState=!0,c.eagerState=m,Ht(m,d)){var v=n.interleaved;v===null?(c.next=c,Xu(n)):(c.next=v.next,v.next=c),n.interleaved=c;return}}catch{}finally{}i=Bg(t,n,c,l),i!==null&&(c=tt(),qt(i,t,l,c),lp(i,n,l))}}function op(t){var n=t.alternate;return t===Ee||n!==null&&n===Ee}function ap(t,n){ms=ra=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function lp(t,n,i){if(i&4194240){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,Bu(t,i)}}var ia={readContext:_t,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},T1={readContext:_t,useCallback:function(t,n){return cn().memoizedState=[t,n===void 0?null:n],t},useContext:_t,useEffect:rd,useImperativeHandle:function(t,n,i){return i=i!=null?i.concat([t]):null,bo(4194308,4,ep.bind(null,n,t),i)},useLayoutEffect:function(t,n){return bo(4194308,4,t,n)},useInsertionEffect:function(t,n){return bo(4,2,t,n)},useMemo:function(t,n){var i=cn();return n=n===void 0?null:n,t=t(),i.memoizedState=[t,n],t},useReducer:function(t,n,i){var l=cn();return n=i!==void 0?i(n):n,l.memoizedState=l.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},l.queue=t,t=t.dispatch=w1.bind(null,Ee,t),[l.memoizedState,t]},useRef:function(t){var n=cn();return t={current:t},n.memoizedState=t},useState:nd,useDebugValue:oc,useDeferredValue:function(t){return cn().memoizedState=t},useTransition:function(){var t=nd(!1),n=t[0];return t=v1.bind(null,t[1]),cn().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,i){var l=Ee,c=cn();if(Ae){if(i===void 0)throw Error(L(407));i=i()}else{if(i=n(),ze===null)throw Error(L(349));Pr&30||Wg(l,n,i)}c.memoizedState=i;var u={value:i,getSnapshot:n};return c.queue=u,rd(Hg.bind(null,l,u,t),[t]),l.flags|=2048,bs(9,qg.bind(null,l,u,i,n),void 0,null),i},useId:function(){var t=cn(),n=ze.identifierPrefix;if(Ae){var i=xn,l=Nn;i=(l&~(1<<32-Wt(l)-1)).toString(32)+i,n=":"+n+"R"+i,i=_s++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=y1++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},k1={readContext:_t,useCallback:np,useContext:_t,useEffect:sc,useImperativeHandle:tp,useInsertionEffect:Qg,useLayoutEffect:Zg,useMemo:rp,useReducer:Al,useRef:Xg,useState:function(){return Al(Ls)},useDebugValue:oc,useDeferredValue:function(t){var n=Lt();return ip(n,Be.memoizedState,t)},useTransition:function(){var t=Al(Ls)[0],n=Lt().memoizedState;return[t,n]},useMutableSource:Jg,useSyncExternalStore:Kg,useId:sp,unstable_isNewReconciler:!1},A1={readContext:_t,useCallback:np,useContext:_t,useEffect:sc,useImperativeHandle:tp,useInsertionEffect:Qg,useLayoutEffect:Zg,useMemo:rp,useReducer:Il,useRef:Xg,useState:function(){return Il(Ls)},useDebugValue:oc,useDeferredValue:function(t){var n=Lt();return Be===null?n.memoizedState=t:ip(n,Be.memoizedState,t)},useTransition:function(){var t=Il(Ls)[0],n=Lt().memoizedState;return[t,n]},useMutableSource:Jg,useSyncExternalStore:Kg,useId:sp,unstable_isNewReconciler:!1};function Si(t,n){try{var i="",l=n;do i+=Xv(l),l=l.return;while(l);var c=i}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:n,stack:c,digest:null}}function El(t,n,i){return{value:t,source:null,stack:i??null,digest:n??null}}function cu(t,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var I1=typeof WeakMap=="function"?WeakMap:Map;function up(t,n,i){i=Pn(-1,i),i.tag=3,i.payload={element:null};var l=n.value;return i.callback=function(){oa||(oa=!0,Su=l),cu(t,n)},i}function cp(t,n,i){i=Pn(-1,i),i.tag=3;var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var c=n.value;i.payload=function(){return l(c)},i.callback=function(){cu(t,n)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(i.callback=function(){cu(t,n),typeof l!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var d=n.stack;this.componentDidCatch(n.value,{componentStack:d!==null?d:""})}),i}function id(t,n,i){var l=t.pingCache;if(l===null){l=t.pingCache=new I1;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(i)||(c.add(i),t=$1.bind(null,t,n,i),n.then(t,t))}function sd(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function od(t,n,i,l,c){return t.mode&1?(t.flags|=65536,t.lanes=c,t):(t===n?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=Pn(-1,1),n.tag=2,er(i,n,1))),i.lanes|=1),t)}var E1=Ln.ReactCurrentOwner,lt=!1;function et(t,n,i,l){n.child=t===null?jg(n,null,i,l):vi(n,t.child,i,l)}function ad(t,n,i,l,c){i=i.render;var u=n.ref;return di(n,c),l=rc(t,n,i,l,u,c),i=ic(),t!==null&&!lt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,_n(t,n,c)):(Ae&&i&&Ku(n),n.flags|=1,et(t,n,l,c),n.child)}function ld(t,n,i,l,c){if(t===null){var u=i.type;return typeof u=="function"&&!gc(u)&&u.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=u,fp(t,n,u,l,c)):(t=Uo(i.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(u=t.child,!(t.lanes&c)){var d=u.memoizedProps;if(i=i.compare,i=i!==null?i:Ns,i(d,l)&&t.ref===n.ref)return _n(t,n,c)}return n.flags|=1,t=rr(u,l),t.ref=n.ref,t.return=n,n.child=t}function fp(t,n,i,l,c){if(t!==null){var u=t.memoizedProps;if(Ns(u,l)&&t.ref===n.ref)if(lt=!1,n.pendingProps=l=u,(t.lanes&c)!==0)t.flags&131072&&(lt=!0);else return n.lanes=t.lanes,_n(t,n,c)}return fu(t,n,i,l,c)}function hp(t,n,i){var l=n.pendingProps,c=l.children,u=t!==null?t.memoizedState:null;if(l.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(li,vt),vt|=i;else{if(!(i&1073741824))return t=u!==null?u.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,ye(li,vt),vt|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=u!==null?u.baseLanes:i,ye(li,vt),vt|=l}else u!==null?(l=u.baseLanes|i,n.memoizedState=null):l=i,ye(li,vt),vt|=l;return et(t,n,c,i),n.child}function dp(t,n){var i=n.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function fu(t,n,i,l,c){var u=ct(i)?Nr:Ye.current;return u=mi(n,u),di(n,c),i=rc(t,n,i,l,u,c),l=ic(),t!==null&&!lt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,_n(t,n,c)):(Ae&&l&&Ku(n),n.flags|=1,et(t,n,i,c),n.child)}function ud(t,n,i,l,c){if(ct(i)){var u=!0;Yo(n)}else u=!1;if(di(n,c),n.stateNode===null)Mo(t,n),zg(n,i,l),uu(n,i,l,c),l=!0;else if(t===null){var d=n.stateNode,m=n.memoizedProps;d.props=m;var v=d.context,S=i.contextType;typeof S=="object"&&S!==null?S=_t(S):(S=ct(i)?Nr:Ye.current,S=mi(n,S));var O=i.getDerivedStateFromProps,P=typeof O=="function"||typeof d.getSnapshotBeforeUpdate=="function";P||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==l||v!==S)&&ed(n,d,l,S),Kn=!1;var N=n.memoizedState;d.state=N,ta(n,l,d,c),v=n.memoizedState,m!==l||N!==v||ut.current||Kn?(typeof O=="function"&&(lu(n,i,O,l),v=n.memoizedState),(m=Kn||Zh(n,i,m,l,N,v,S))?(P||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=v),d.props=l,d.state=v,d.context=S,l=m):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,$g(t,n),m=n.memoizedProps,S=n.type===n.elementType?m:Vt(n.type,m),d.props=S,P=n.pendingProps,N=d.context,v=i.contextType,typeof v=="object"&&v!==null?v=_t(v):(v=ct(i)?Nr:Ye.current,v=mi(n,v));var M=i.getDerivedStateFromProps;(O=typeof M=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==P||N!==v)&&ed(n,d,l,v),Kn=!1,N=n.memoizedState,d.state=N,ta(n,l,d,c);var B=n.memoizedState;m!==P||N!==B||ut.current||Kn?(typeof M=="function"&&(lu(n,i,M,l),B=n.memoizedState),(S=Kn||Zh(n,i,S,l,N,B,v)||!1)?(O||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,B,v),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,B,v)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=B),d.props=l,d.state=B,d.context=v,l=S):(typeof d.componentDidUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(n.flags|=1024),l=!1)}return hu(t,n,i,l,u,c)}function hu(t,n,i,l,c,u){dp(t,n);var d=(n.flags&128)!==0;if(!l&&!d)return c&&Hh(n,i,!1),_n(t,n,u);l=n.stateNode,E1.current=n;var m=d&&typeof i.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,t!==null&&d?(n.child=vi(n,t.child,null,u),n.child=vi(n,null,m,u)):et(t,n,m,u),n.memoizedState=l.state,c&&Hh(n,i,!0),n.child}function gp(t){var n=t.stateNode;n.pendingContext?qh(t,n.pendingContext,n.pendingContext!==n.context):n.context&&qh(t,n.context,!1),Zu(t,n.containerInfo)}function cd(t,n,i,l,c){return yi(),qu(c),n.flags|=256,et(t,n,i,l),n.child}var du={dehydrated:null,treeContext:null,retryLane:0};function gu(t){return{baseLanes:t,cachePool:null,transitions:null}}function pp(t,n,i){var l=n.pendingProps,c=Ie.current,u=!1,d=(n.flags&128)!==0,m;if((m=d)||(m=t!==null&&t.memoizedState===null?!1:(c&2)!==0),m?(u=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),ye(Ie,c&1),t===null)return ou(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(d=l.children,t=l.fallback,u?(l=n.mode,u=n.child,d={mode:"hidden",children:d},!(l&1)&&u!==null?(u.childLanes=0,u.pendingProps=d):u=Ta(d,l,0,null),t=Cr(t,l,i,null),u.return=n,t.return=n,u.sibling=t,n.child=u,n.child.memoizedState=gu(i),n.memoizedState=du,t):ac(n,d));if(c=t.memoizedState,c!==null&&(m=c.dehydrated,m!==null))return C1(t,n,d,l,m,c,i);if(u){u=l.fallback,d=n.mode,c=t.child,m=c.sibling;var v={mode:"hidden",children:l.children};return!(d&1)&&n.child!==c?(l=n.child,l.childLanes=0,l.pendingProps=v,n.deletions=null):(l=rr(c,v),l.subtreeFlags=c.subtreeFlags&14680064),m!==null?u=rr(m,u):(u=Cr(u,d,i,null),u.flags|=2),u.return=n,l.return=n,l.sibling=u,n.child=l,l=u,u=n.child,d=t.child.memoizedState,d=d===null?gu(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},u.memoizedState=d,u.childLanes=t.childLanes&~i,n.memoizedState=du,l}return u=t.child,t=u.sibling,l=rr(u,{mode:"visible",children:l.children}),!(n.mode&1)&&(l.lanes=i),l.return=n,l.sibling=null,t!==null&&(i=n.deletions,i===null?(n.deletions=[t],n.flags|=16):i.push(t)),n.child=l,n.memoizedState=null,l}function ac(t,n){return n=Ta({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Io(t,n,i,l){return l!==null&&qu(l),vi(n,t.child,null,i),t=ac(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function C1(t,n,i,l,c,u,d){if(i)return n.flags&256?(n.flags&=-257,l=El(Error(L(422))),Io(t,n,d,l)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(u=l.fallback,c=n.mode,l=Ta({mode:"visible",children:l.children},c,0,null),u=Cr(u,c,d,null),u.flags|=2,l.return=n,u.return=n,l.sibling=u,n.child=l,n.mode&1&&vi(n,t.child,null,d),n.child.memoizedState=gu(d),n.memoizedState=du,u);if(!(n.mode&1))return Io(t,n,d,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var m=l.dgst;return l=m,u=Error(L(419)),l=El(u,l,void 0),Io(t,n,d,l)}if(m=(d&t.childLanes)!==0,lt||m){if(l=ze,l!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(l.suspendedLanes|d)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,Rn(t,c),qt(l,t,c,-1))}return dc(),l=El(Error(L(421))),Io(t,n,d,l)}return c.data==="$?"?(n.flags|=128,n.child=t.child,n=U1.bind(null,t),c._reactRetry=n,null):(t=u.treeContext,wt=Zn(c.nextSibling),St=n,Ae=!0,Kt=null,t!==null&&(Pt[Ot++]=Nn,Pt[Ot++]=xn,Pt[Ot++]=xr,Nn=t.id,xn=t.overflow,xr=n),n=ac(n,l.children),n.flags|=4096,n)}function fd(t,n,i){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),au(t.return,n,i)}function Cl(t,n,i,l,c){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:c}:(u.isBackwards=n,u.rendering=null,u.renderingStartTime=0,u.last=l,u.tail=i,u.tailMode=c)}function mp(t,n,i){var l=n.pendingProps,c=l.revealOrder,u=l.tail;if(et(t,n,l.children,i),l=Ie.current,l&2)l=l&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fd(t,i,n);else if(t.tag===19)fd(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}if(ye(Ie,l),!(n.mode&1))n.memoizedState=null;else switch(c){case"forwards":for(i=n.child,c=null;i!==null;)t=i.alternate,t!==null&&na(t)===null&&(c=i),i=i.sibling;i=c,i===null?(c=n.child,n.child=null):(c=i.sibling,i.sibling=null),Cl(n,!1,c,i,u);break;case"backwards":for(i=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&na(t)===null){n.child=c;break}t=c.sibling,c.sibling=i,i=c,c=t}Cl(n,!0,i,null,u);break;case"together":Cl(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Mo(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function _n(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),Or|=n.lanes,!(i&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(L(153));if(n.child!==null){for(t=n.child,i=rr(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=rr(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function N1(t,n,i){switch(n.tag){case 3:gp(n),yi();break;case 5:Vg(n);break;case 1:ct(n.type)&&Yo(n);break;case 4:Zu(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,c=n.memoizedProps.value;ye(Zo,l._currentValue),l._currentValue=c;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(ye(Ie,Ie.current&1),n.flags|=128,null):i&n.child.childLanes?pp(t,n,i):(ye(Ie,Ie.current&1),t=_n(t,n,i),t!==null?t.sibling:null);ye(Ie,Ie.current&1);break;case 19:if(l=(i&n.childLanes)!==0,t.flags&128){if(l)return mp(t,n,i);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ye(Ie,Ie.current),l)break;return null;case 22:case 23:return n.lanes=0,hp(t,n,i)}return _n(t,n,i)}var yp,pu,vp,wp;yp=function(t,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};pu=function(){};vp=function(t,n,i,l){var c=t.memoizedProps;if(c!==l){t=n.stateNode,Ir(dn.current);var u=null;switch(i){case"input":c=Bl(t,c),l=Bl(t,l),u=[];break;case"select":c=Ce({},c,{value:void 0}),l=Ce({},l,{value:void 0}),u=[];break;case"textarea":c=zl(t,c),l=zl(t,l),u=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(t.onclick=Ho)}jl(i,l);var d;i=null;for(S in c)if(!l.hasOwnProperty(S)&&c.hasOwnProperty(S)&&c[S]!=null)if(S==="style"){var m=c[S];for(d in m)m.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Ss.hasOwnProperty(S)?u||(u=[]):(u=u||[]).push(S,null));for(S in l){var v=l[S];if(m=c!=null?c[S]:void 0,l.hasOwnProperty(S)&&v!==m&&(v!=null||m!=null))if(S==="style")if(m){for(d in m)!m.hasOwnProperty(d)||v&&v.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in v)v.hasOwnProperty(d)&&m[d]!==v[d]&&(i||(i={}),i[d]=v[d])}else i||(u||(u=[]),u.push(S,i)),i=v;else S==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,m=m?m.__html:void 0,v!=null&&m!==v&&(u=u||[]).push(S,v)):S==="children"?typeof v!="string"&&typeof v!="number"||(u=u||[]).push(S,""+v):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(Ss.hasOwnProperty(S)?(v!=null&&S==="onScroll"&&ve("scroll",t),u||m===v||(u=[])):(u=u||[]).push(S,v))}i&&(u=u||[]).push("style",i);var S=u;(n.updateQueue=S)&&(n.flags|=4)}};wp=function(t,n,i,l){i!==l&&(n.flags|=4)};function ss(t,n){if(!Ae)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function He(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(n)for(var c=t.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=i,n}function x1(t,n,i){var l=n.pendingProps;switch(Wu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(n),null;case 1:return ct(n.type)&&Go(),He(n),null;case 3:return l=n.stateNode,wi(),we(ut),we(Ye),tc(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(ko(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Kt!==null&&(Au(Kt),Kt=null))),pu(t,n),He(n),null;case 5:ec(n);var c=Ir(Rs.current);if(i=n.type,t!==null&&n.stateNode!=null)vp(t,n,i,l,c),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(L(166));return He(n),null}if(t=Ir(dn.current),ko(n)){l=n.stateNode,i=n.type;var u=n.memoizedProps;switch(l[fn]=n,l[Os]=u,t=(n.mode&1)!==0,i){case"dialog":ve("cancel",l),ve("close",l);break;case"iframe":case"object":case"embed":ve("load",l);break;case"video":case"audio":for(c=0;c<cs.length;c++)ve(cs[c],l);break;case"source":ve("error",l);break;case"img":case"image":case"link":ve("error",l),ve("load",l);break;case"details":ve("toggle",l);break;case"input":Sh(l,u),ve("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!u.multiple},ve("invalid",l);break;case"textarea":kh(l,u),ve("invalid",l)}jl(i,u),c=null;for(var d in u)if(u.hasOwnProperty(d)){var m=u[d];d==="children"?typeof m=="string"?l.textContent!==m&&(u.suppressHydrationWarning!==!0&&To(l.textContent,m,t),c=["children",m]):typeof m=="number"&&l.textContent!==""+m&&(u.suppressHydrationWarning!==!0&&To(l.textContent,m,t),c=["children",""+m]):Ss.hasOwnProperty(d)&&m!=null&&d==="onScroll"&&ve("scroll",l)}switch(i){case"input":ho(l),Th(l,u,!0);break;case"textarea":ho(l),Ah(l);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(l.onclick=Ho)}l=c,n.updateQueue=l,l!==null&&(n.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wd(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof l.is=="string"?t=d.createElement(i,{is:l.is}):(t=d.createElement(i),i==="select"&&(d=t,l.multiple?d.multiple=!0:l.size&&(d.size=l.size))):t=d.createElementNS(t,i),t[fn]=n,t[Os]=l,yp(t,n,!1,!1),n.stateNode=t;e:{switch(d=Vl(i,l),i){case"dialog":ve("cancel",t),ve("close",t),c=l;break;case"iframe":case"object":case"embed":ve("load",t),c=l;break;case"video":case"audio":for(c=0;c<cs.length;c++)ve(cs[c],t);c=l;break;case"source":ve("error",t),c=l;break;case"img":case"image":case"link":ve("error",t),ve("load",t),c=l;break;case"details":ve("toggle",t),c=l;break;case"input":Sh(t,l),c=Bl(t,l),ve("invalid",t);break;case"option":c=l;break;case"select":t._wrapperState={wasMultiple:!!l.multiple},c=Ce({},l,{value:void 0}),ve("invalid",t);break;case"textarea":kh(t,l),c=zl(t,l),ve("invalid",t);break;default:c=l}jl(i,c),m=c;for(u in m)if(m.hasOwnProperty(u)){var v=m[u];u==="style"?Gd(t,v):u==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&qd(t,v)):u==="children"?typeof v=="string"?(i!=="textarea"||v!=="")&&Ts(t,v):typeof v=="number"&&Ts(t,""+v):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ss.hasOwnProperty(u)?v!=null&&u==="onScroll"&&ve("scroll",t):v!=null&&Du(t,u,v,d))}switch(i){case"input":ho(t),Th(t,l,!1);break;case"textarea":ho(t),Ah(t);break;case"option":l.value!=null&&t.setAttribute("value",""+ir(l.value));break;case"select":t.multiple=!!l.multiple,u=l.value,u!=null?ui(t,!!l.multiple,u,!1):l.defaultValue!=null&&ui(t,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=Ho)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return He(n),null;case 6:if(t&&n.stateNode!=null)wp(t,n,t.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(L(166));if(i=Ir(Rs.current),Ir(dn.current),ko(n)){if(l=n.stateNode,i=n.memoizedProps,l[fn]=n,(u=l.nodeValue!==i)&&(t=St,t!==null))switch(t.tag){case 3:To(l.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&To(l.nodeValue,i,(t.mode&1)!==0)}u&&(n.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[fn]=n,n.stateNode=l}return He(n),null;case 13:if(we(Ie),l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&wt!==null&&n.mode&1&&!(n.flags&128))Mg(),yi(),n.flags|=98560,u=!1;else if(u=ko(n),l!==null&&l.dehydrated!==null){if(t===null){if(!u)throw Error(L(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(L(317));u[fn]=n}else yi(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;He(n),u=!1}else Kt!==null&&(Au(Kt),Kt=null),u=!0;if(!u)return n.flags&65536?n:null}return n.flags&128?(n.lanes=i,n):(l=l!==null,l!==(t!==null&&t.memoizedState!==null)&&l&&(n.child.flags|=8192,n.mode&1&&(t===null||Ie.current&1?$e===0&&($e=3):dc())),n.updateQueue!==null&&(n.flags|=4),He(n),null);case 4:return wi(),pu(t,n),t===null&&xs(n.stateNode.containerInfo),He(n),null;case 10:return Yu(n.type._context),He(n),null;case 17:return ct(n.type)&&Go(),He(n),null;case 19:if(we(Ie),u=n.memoizedState,u===null)return He(n),null;if(l=(n.flags&128)!==0,d=u.rendering,d===null)if(l)ss(u,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(d=na(t),d!==null){for(n.flags|=128,ss(u,!1),l=d.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=i,i=n.child;i!==null;)u=i,t=l,u.flags&=14680066,d=u.alternate,d===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=d.childLanes,u.lanes=d.lanes,u.child=d.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=d.memoizedProps,u.memoizedState=d.memoizedState,u.updateQueue=d.updateQueue,u.type=d.type,t=d.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return ye(Ie,Ie.current&1|2),n.child}t=t.sibling}u.tail!==null&&Oe()>Ti&&(n.flags|=128,l=!0,ss(u,!1),n.lanes=4194304)}else{if(!l)if(t=na(d),t!==null){if(n.flags|=128,l=!0,i=t.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),ss(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!Ae)return He(n),null}else 2*Oe()-u.renderingStartTime>Ti&&i!==1073741824&&(n.flags|=128,l=!0,ss(u,!1),n.lanes=4194304);u.isBackwards?(d.sibling=n.child,n.child=d):(i=u.last,i!==null?i.sibling=d:n.child=d,u.last=d)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Oe(),n.sibling=null,i=Ie.current,ye(Ie,l?i&1|2:i&1),n):(He(n),null);case 22:case 23:return hc(),l=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==l&&(n.flags|=8192),l&&n.mode&1?vt&1073741824&&(He(n),n.subtreeFlags&6&&(n.flags|=8192)):He(n),null;case 24:return null;case 25:return null}throw Error(L(156,n.tag))}function P1(t,n){switch(Wu(n),n.tag){case 1:return ct(n.type)&&Go(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return wi(),we(ut),we(Ye),tc(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return ec(n),null;case 13:if(we(Ie),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(L(340));yi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return we(Ie),null;case 4:return wi(),null;case 10:return Yu(n.type._context),null;case 22:case 23:return hc(),null;case 24:return null;default:return null}}var Eo=!1,Ge=!1,O1=typeof WeakSet=="function"?WeakSet:Set,V=null;function ai(t,n){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){xe(t,n,l)}else i.current=null}function mu(t,n,i){try{i()}catch(l){xe(t,n,l)}}var hd=!1;function D1(t,n){if(Zl=Ko,t=Ag(),Ju(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var c=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var d=0,m=-1,v=-1,S=0,O=0,P=t,N=null;t:for(;;){for(var M;P!==i||c!==0&&P.nodeType!==3||(m=d+c),P!==u||l!==0&&P.nodeType!==3||(v=d+l),P.nodeType===3&&(d+=P.nodeValue.length),(M=P.firstChild)!==null;)N=P,P=M;for(;;){if(P===t)break t;if(N===i&&++S===c&&(m=d),N===u&&++O===l&&(v=d),(M=P.nextSibling)!==null)break;P=N,N=P.parentNode}P=M}i=m===-1||v===-1?null:{start:m,end:v}}else i=null}i=i||{start:0,end:0}}else i=null;for(eu={focusedElem:t,selectionRange:i},Ko=!1,V=n;V!==null;)if(n=V,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,V=t;else for(;V!==null;){n=V;try{var B=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var z=B.memoizedProps,ce=B.memoizedState,k=n.stateNode,w=k.getSnapshotBeforeUpdate(n.elementType===n.type?z:Vt(n.type,z),ce);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=n.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(R){xe(n,n.return,R)}if(t=n.sibling,t!==null){t.return=n.return,V=t;break}V=n.return}return B=hd,hd=!1,B}function ys(t,n,i){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&t)===t){var u=c.destroy;c.destroy=void 0,u!==void 0&&mu(n,i,u)}c=c.next}while(c!==l)}}function wa(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var l=i.create;i.destroy=l()}i=i.next}while(i!==n)}}function yu(t){var n=t.ref;if(n!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof n=="function"?n(t):n.current=t}}function Sp(t){var n=t.alternate;n!==null&&(t.alternate=null,Sp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[fn],delete n[Os],delete n[ru],delete n[d1],delete n[g1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tp(t){return t.tag===5||t.tag===3||t.tag===4}function dd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vu(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Ho));else if(l!==4&&(t=t.child,t!==null))for(vu(t,n,i),t=t.sibling;t!==null;)vu(t,n,i),t=t.sibling}function wu(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(l!==4&&(t=t.child,t!==null))for(wu(t,n,i),t=t.sibling;t!==null;)wu(t,n,i),t=t.sibling}var je=null,Jt=!1;function Vn(t,n,i){for(i=i.child;i!==null;)kp(t,n,i),i=i.sibling}function kp(t,n,i){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(fa,i)}catch{}switch(i.tag){case 5:Ge||ai(i,n);case 6:var l=je,c=Jt;je=null,Vn(t,n,i),je=l,Jt=c,je!==null&&(Jt?(t=je,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):je.removeChild(i.stateNode));break;case 18:je!==null&&(Jt?(t=je,i=i.stateNode,t.nodeType===8?wl(t.parentNode,i):t.nodeType===1&&wl(t,i),Es(t)):wl(je,i.stateNode));break;case 4:l=je,c=Jt,je=i.stateNode.containerInfo,Jt=!0,Vn(t,n,i),je=l,Jt=c;break;case 0:case 11:case 14:case 15:if(!Ge&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var u=c,d=u.destroy;u=u.tag,d!==void 0&&(u&2||u&4)&&mu(i,n,d),c=c.next}while(c!==l)}Vn(t,n,i);break;case 1:if(!Ge&&(ai(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(m){xe(i,n,m)}Vn(t,n,i);break;case 21:Vn(t,n,i);break;case 22:i.mode&1?(Ge=(l=Ge)||i.memoizedState!==null,Vn(t,n,i),Ge=l):Vn(t,n,i);break;default:Vn(t,n,i)}}function gd(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new O1),n.forEach(function(l){var c=z1.bind(null,t,l);i.has(l)||(i.add(l),l.then(c,c))})}}function jt(t,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];try{var u=t,d=n,m=d;e:for(;m!==null;){switch(m.tag){case 5:je=m.stateNode,Jt=!1;break e;case 3:je=m.stateNode.containerInfo,Jt=!0;break e;case 4:je=m.stateNode.containerInfo,Jt=!0;break e}m=m.return}if(je===null)throw Error(L(160));kp(u,d,c),je=null,Jt=!1;var v=c.alternate;v!==null&&(v.return=null),c.return=null}catch(S){xe(c,n,S)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Ap(n,t),n=n.sibling}function Ap(t,n){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jt(n,t),un(t),l&4){try{ys(3,t,t.return),wa(3,t)}catch(z){xe(t,t.return,z)}try{ys(5,t,t.return)}catch(z){xe(t,t.return,z)}}break;case 1:jt(n,t),un(t),l&512&&i!==null&&ai(i,i.return);break;case 5:if(jt(n,t),un(t),l&512&&i!==null&&ai(i,i.return),t.flags&32){var c=t.stateNode;try{Ts(c,"")}catch(z){xe(t,t.return,z)}}if(l&4&&(c=t.stateNode,c!=null)){var u=t.memoizedProps,d=i!==null?i.memoizedProps:u,m=t.type,v=t.updateQueue;if(t.updateQueue=null,v!==null)try{m==="input"&&u.type==="radio"&&u.name!=null&&Jd(c,u),Vl(m,d);var S=Vl(m,u);for(d=0;d<v.length;d+=2){var O=v[d],P=v[d+1];O==="style"?Gd(c,P):O==="dangerouslySetInnerHTML"?qd(c,P):O==="children"?Ts(c,P):Du(c,O,P,S)}switch(m){case"input":$l(c,u);break;case"textarea":Kd(c,u);break;case"select":var N=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var M=u.value;M!=null?ui(c,!!u.multiple,M,!1):N!==!!u.multiple&&(u.defaultValue!=null?ui(c,!!u.multiple,u.defaultValue,!0):ui(c,!!u.multiple,u.multiple?[]:"",!1))}c[Os]=u}catch(z){xe(t,t.return,z)}}break;case 6:if(jt(n,t),un(t),l&4){if(t.stateNode===null)throw Error(L(162));c=t.stateNode,u=t.memoizedProps;try{c.nodeValue=u}catch(z){xe(t,t.return,z)}}break;case 3:if(jt(n,t),un(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Es(n.containerInfo)}catch(z){xe(t,t.return,z)}break;case 4:jt(n,t),un(t);break;case 13:jt(n,t),un(t),c=t.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(cc=Oe())),l&4&&gd(t);break;case 22:if(O=i!==null&&i.memoizedState!==null,t.mode&1?(Ge=(S=Ge)||O,jt(n,t),Ge=S):jt(n,t),un(t),l&8192){if(S=t.memoizedState!==null,(t.stateNode.isHidden=S)&&!O&&t.mode&1)for(V=t,O=t.child;O!==null;){for(P=V=O;V!==null;){switch(N=V,M=N.child,N.tag){case 0:case 11:case 14:case 15:ys(4,N,N.return);break;case 1:ai(N,N.return);var B=N.stateNode;if(typeof B.componentWillUnmount=="function"){l=N,i=N.return;try{n=l,B.props=n.memoizedProps,B.state=n.memoizedState,B.componentWillUnmount()}catch(z){xe(l,i,z)}}break;case 5:ai(N,N.return);break;case 22:if(N.memoizedState!==null){md(P);continue}}M!==null?(M.return=N,V=M):md(P)}O=O.sibling}e:for(O=null,P=t;;){if(P.tag===5){if(O===null){O=P;try{c=P.stateNode,S?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(m=P.stateNode,v=P.memoizedProps.style,d=v!=null&&v.hasOwnProperty("display")?v.display:null,m.style.display=Hd("display",d))}catch(z){xe(t,t.return,z)}}}else if(P.tag===6){if(O===null)try{P.stateNode.nodeValue=S?"":P.memoizedProps}catch(z){xe(t,t.return,z)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===t)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===t)break e;for(;P.sibling===null;){if(P.return===null||P.return===t)break e;O===P&&(O=null),P=P.return}O===P&&(O=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:jt(n,t),un(t),l&4&&gd(t);break;case 21:break;default:jt(n,t),un(t)}}function un(t){var n=t.flags;if(n&2){try{e:{for(var i=t.return;i!==null;){if(Tp(i)){var l=i;break e}i=i.return}throw Error(L(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(Ts(c,""),l.flags&=-33);var u=dd(t);wu(t,u,c);break;case 3:case 4:var d=l.stateNode.containerInfo,m=dd(t);vu(t,m,d);break;default:throw Error(L(161))}}catch(v){xe(t,t.return,v)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function R1(t,n,i){V=t,Ip(t)}function Ip(t,n,i){for(var l=(t.mode&1)!==0;V!==null;){var c=V,u=c.child;if(c.tag===22&&l){var d=c.memoizedState!==null||Eo;if(!d){var m=c.alternate,v=m!==null&&m.memoizedState!==null||Ge;m=Eo;var S=Ge;if(Eo=d,(Ge=v)&&!S)for(V=c;V!==null;)d=V,v=d.child,d.tag===22&&d.memoizedState!==null?yd(c):v!==null?(v.return=d,V=v):yd(c);for(;u!==null;)V=u,Ip(u),u=u.sibling;V=c,Eo=m,Ge=S}pd(t)}else c.subtreeFlags&8772&&u!==null?(u.return=c,V=u):pd(t)}}function pd(t){for(;V!==null;){var n=V;if(n.flags&8772){var i=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Ge||wa(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Ge)if(i===null)l.componentDidMount();else{var c=n.elementType===n.type?i.memoizedProps:Vt(n.type,i.memoizedProps);l.componentDidUpdate(c,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var u=n.updateQueue;u!==null&&Qh(n,u,l);break;case 3:var d=n.updateQueue;if(d!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}Qh(n,d,i)}break;case 5:var m=n.stateNode;if(i===null&&n.flags&4){i=m;var v=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&i.focus();break;case"img":v.src&&(i.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var S=n.alternate;if(S!==null){var O=S.memoizedState;if(O!==null){var P=O.dehydrated;P!==null&&Es(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Ge||n.flags&512&&yu(n)}catch(N){xe(n,n.return,N)}}if(n===t){V=null;break}if(i=n.sibling,i!==null){i.return=n.return,V=i;break}V=n.return}}function md(t){for(;V!==null;){var n=V;if(n===t){V=null;break}var i=n.sibling;if(i!==null){i.return=n.return,V=i;break}V=n.return}}function yd(t){for(;V!==null;){var n=V;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{wa(4,n)}catch(v){xe(n,i,v)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var c=n.return;try{l.componentDidMount()}catch(v){xe(n,c,v)}}var u=n.return;try{yu(n)}catch(v){xe(n,u,v)}break;case 5:var d=n.return;try{yu(n)}catch(v){xe(n,d,v)}}}catch(v){xe(n,n.return,v)}if(n===t){V=null;break}var m=n.sibling;if(m!==null){m.return=n.return,V=m;break}V=n.return}}var _1=Math.ceil,sa=Ln.ReactCurrentDispatcher,lc=Ln.ReactCurrentOwner,Rt=Ln.ReactCurrentBatchConfig,oe=0,ze=null,Le=null,Ve=0,vt=0,li=ar(0),$e=0,Ms=null,Or=0,Sa=0,uc=0,vs=null,ot=null,cc=0,Ti=1/0,En=null,oa=!1,Su=null,tr=null,Co=!1,Gn=null,aa=0,ws=0,Tu=null,Bo=-1,$o=0;function tt(){return oe&6?Oe():Bo!==-1?Bo:Bo=Oe()}function nr(t){return t.mode&1?oe&2&&Ve!==0?Ve&-Ve:m1.transition!==null?($o===0&&($o=ag()),$o):(t=fe,t!==0||(t=window.event,t=t===void 0?16:gg(t.type)),t):1}function qt(t,n,i,l){if(50<ws)throw ws=0,Tu=null,Error(L(185));$s(t,i,l),(!(oe&2)||t!==ze)&&(t===ze&&(!(oe&2)&&(Sa|=i),$e===4&&qn(t,Ve)),ft(t,l),i===1&&oe===0&&!(n.mode&1)&&(Ti=Oe()+500,ma&&lr()))}function ft(t,n){var i=t.callbackNode;m0(t,n);var l=Jo(t,t===ze?Ve:0);if(l===0)i!==null&&Ch(i),t.callbackNode=null,t.callbackPriority=0;else if(n=l&-l,t.callbackPriority!==n){if(i!=null&&Ch(i),n===1)t.tag===0?p1(vd.bind(null,t)):_g(vd.bind(null,t)),f1(function(){!(oe&6)&&lr()}),i=null;else{switch(lg(l)){case 1:i=Mu;break;case 4:i=sg;break;case 16:i=Vo;break;case 536870912:i=og;break;default:i=Vo}i=Rp(i,Ep.bind(null,t))}t.callbackPriority=n,t.callbackNode=i}}function Ep(t,n){if(Bo=-1,$o=0,oe&6)throw Error(L(327));var i=t.callbackNode;if(gi()&&t.callbackNode!==i)return null;var l=Jo(t,t===ze?Ve:0);if(l===0)return null;if(l&30||l&t.expiredLanes||n)n=la(t,l);else{n=l;var c=oe;oe|=2;var u=Np();(ze!==t||Ve!==n)&&(En=null,Ti=Oe()+500,Er(t,n));do try{M1();break}catch(m){Cp(t,m)}while(1);Gu(),sa.current=u,oe=c,Le!==null?n=0:(ze=null,Ve=0,n=$e)}if(n!==0){if(n===2&&(c=Hl(t),c!==0&&(l=c,n=ku(t,c))),n===1)throw i=Ms,Er(t,0),qn(t,l),ft(t,Oe()),i;if(n===6)qn(t,l);else{if(c=t.current.alternate,!(l&30)&&!L1(c)&&(n=la(t,l),n===2&&(u=Hl(t),u!==0&&(l=u,n=ku(t,u))),n===1))throw i=Ms,Er(t,0),qn(t,l),ft(t,Oe()),i;switch(t.finishedWork=c,t.finishedLanes=l,n){case 0:case 1:throw Error(L(345));case 2:Tr(t,ot,En);break;case 3:if(qn(t,l),(l&130023424)===l&&(n=cc+500-Oe(),10<n)){if(Jo(t,0)!==0)break;if(c=t.suspendedLanes,(c&l)!==l){tt(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=nu(Tr.bind(null,t,ot,En),n);break}Tr(t,ot,En);break;case 4:if(qn(t,l),(l&4194240)===l)break;for(n=t.eventTimes,c=-1;0<l;){var d=31-Wt(l);u=1<<d,d=n[d],d>c&&(c=d),l&=~u}if(l=c,l=Oe()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*_1(l/1960))-l,10<l){t.timeoutHandle=nu(Tr.bind(null,t,ot,En),l);break}Tr(t,ot,En);break;case 5:Tr(t,ot,En);break;default:throw Error(L(329))}}}return ft(t,Oe()),t.callbackNode===i?Ep.bind(null,t):null}function ku(t,n){var i=vs;return t.current.memoizedState.isDehydrated&&(Er(t,n).flags|=256),t=la(t,n),t!==2&&(n=ot,ot=i,n!==null&&Au(n)),t}function Au(t){ot===null?ot=t:ot.push.apply(ot,t)}function L1(t){for(var n=t;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var c=i[l],u=c.getSnapshot;c=c.value;try{if(!Ht(u(),c))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function qn(t,n){for(n&=~uc,n&=~Sa,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var i=31-Wt(n),l=1<<i;t[i]=-1,n&=~l}}function vd(t){if(oe&6)throw Error(L(327));gi();var n=Jo(t,0);if(!(n&1))return ft(t,Oe()),null;var i=la(t,n);if(t.tag!==0&&i===2){var l=Hl(t);l!==0&&(n=l,i=ku(t,l))}if(i===1)throw i=Ms,Er(t,0),qn(t,n),ft(t,Oe()),i;if(i===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Tr(t,ot,En),ft(t,Oe()),null}function fc(t,n){var i=oe;oe|=1;try{return t(n)}finally{oe=i,oe===0&&(Ti=Oe()+500,ma&&lr())}}function Dr(t){Gn!==null&&Gn.tag===0&&!(oe&6)&&gi();var n=oe;oe|=1;var i=Rt.transition,l=fe;try{if(Rt.transition=null,fe=1,t)return t()}finally{fe=l,Rt.transition=i,oe=n,!(oe&6)&&lr()}}function hc(){vt=li.current,we(li)}function Er(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,c1(i)),Le!==null)for(i=Le.return;i!==null;){var l=i;switch(Wu(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Go();break;case 3:wi(),we(ut),we(Ye),tc();break;case 5:ec(l);break;case 4:wi();break;case 13:we(Ie);break;case 19:we(Ie);break;case 10:Yu(l.type._context);break;case 22:case 23:hc()}i=i.return}if(ze=t,Le=t=rr(t.current,null),Ve=vt=n,$e=0,Ms=null,uc=Sa=Or=0,ot=vs=null,Ar!==null){for(n=0;n<Ar.length;n++)if(i=Ar[n],l=i.interleaved,l!==null){i.interleaved=null;var c=l.next,u=i.pending;if(u!==null){var d=u.next;u.next=c,l.next=d}i.pending=l}Ar=null}return t}function Cp(t,n){do{var i=Le;try{if(Gu(),Lo.current=ia,ra){for(var l=Ee.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}ra=!1}if(Pr=0,Ue=Be=Ee=null,ms=!1,_s=0,lc.current=null,i===null||i.return===null){$e=1,Ms=n,Le=null;break}e:{var u=t,d=i.return,m=i,v=n;if(n=Ve,m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var S=v,O=m,P=O.tag;if(!(O.mode&1)&&(P===0||P===11||P===15)){var N=O.alternate;N?(O.updateQueue=N.updateQueue,O.memoizedState=N.memoizedState,O.lanes=N.lanes):(O.updateQueue=null,O.memoizedState=null)}var M=sd(d);if(M!==null){M.flags&=-257,od(M,d,m,u,n),M.mode&1&&id(u,S,n),n=M,v=S;var B=n.updateQueue;if(B===null){var z=new Set;z.add(v),n.updateQueue=z}else B.add(v);break e}else{if(!(n&1)){id(u,S,n),dc();break e}v=Error(L(426))}}else if(Ae&&m.mode&1){var ce=sd(d);if(ce!==null){!(ce.flags&65536)&&(ce.flags|=256),od(ce,d,m,u,n),qu(Si(v,m));break e}}u=v=Si(v,m),$e!==4&&($e=2),vs===null?vs=[u]:vs.push(u),u=d;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n;var k=up(u,v,n);Xh(u,k);break e;case 1:m=v;var w=u.type,I=u.stateNode;if(!(u.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(tr===null||!tr.has(I)))){u.flags|=65536,n&=-n,u.lanes|=n;var R=cp(u,m,n);Xh(u,R);break e}}u=u.return}while(u!==null)}Pp(i)}catch(j){n=j,Le===i&&i!==null&&(Le=i=i.return);continue}break}while(1)}function Np(){var t=sa.current;return sa.current=ia,t===null?ia:t}function dc(){($e===0||$e===3||$e===2)&&($e=4),ze===null||!(Or&268435455)&&!(Sa&268435455)||qn(ze,Ve)}function la(t,n){var i=oe;oe|=2;var l=Np();(ze!==t||Ve!==n)&&(En=null,Er(t,n));do try{b1();break}catch(c){Cp(t,c)}while(1);if(Gu(),oe=i,sa.current=l,Le!==null)throw Error(L(261));return ze=null,Ve=0,$e}function b1(){for(;Le!==null;)xp(Le)}function M1(){for(;Le!==null&&!a0();)xp(Le)}function xp(t){var n=Dp(t.alternate,t,vt);t.memoizedProps=t.pendingProps,n===null?Pp(t):Le=n,lc.current=null}function Pp(t){var n=t;do{var i=n.alternate;if(t=n.return,n.flags&32768){if(i=P1(i,n),i!==null){i.flags&=32767,Le=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Le=null;return}}else if(i=x1(i,n,vt),i!==null){Le=i;return}if(n=n.sibling,n!==null){Le=n;return}Le=n=t}while(n!==null);$e===0&&($e=5)}function Tr(t,n,i){var l=fe,c=Rt.transition;try{Rt.transition=null,fe=1,B1(t,n,i,l)}finally{Rt.transition=c,fe=l}return null}function B1(t,n,i,l){do gi();while(Gn!==null);if(oe&6)throw Error(L(327));i=t.finishedWork;var c=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var u=i.lanes|i.childLanes;if(y0(t,u),t===ze&&(Le=ze=null,Ve=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Co||(Co=!0,Rp(Vo,function(){return gi(),null})),u=(i.flags&15990)!==0,i.subtreeFlags&15990||u){u=Rt.transition,Rt.transition=null;var d=fe;fe=1;var m=oe;oe|=4,lc.current=null,D1(t,i),Ap(i,t),r1(eu),Ko=!!Zl,eu=Zl=null,t.current=i,R1(i),l0(),oe=m,fe=d,Rt.transition=u}else t.current=i;if(Co&&(Co=!1,Gn=t,aa=c),u=t.pendingLanes,u===0&&(tr=null),f0(i.stateNode),ft(t,Oe()),n!==null)for(l=t.onRecoverableError,i=0;i<n.length;i++)c=n[i],l(c.value,{componentStack:c.stack,digest:c.digest});if(oa)throw oa=!1,t=Su,Su=null,t;return aa&1&&t.tag!==0&&gi(),u=t.pendingLanes,u&1?t===Tu?ws++:(ws=0,Tu=t):ws=0,lr(),null}function gi(){if(Gn!==null){var t=lg(aa),n=Rt.transition,i=fe;try{if(Rt.transition=null,fe=16>t?16:t,Gn===null)var l=!1;else{if(t=Gn,Gn=null,aa=0,oe&6)throw Error(L(331));var c=oe;for(oe|=4,V=t.current;V!==null;){var u=V,d=u.child;if(V.flags&16){var m=u.deletions;if(m!==null){for(var v=0;v<m.length;v++){var S=m[v];for(V=S;V!==null;){var O=V;switch(O.tag){case 0:case 11:case 15:ys(8,O,u)}var P=O.child;if(P!==null)P.return=O,V=P;else for(;V!==null;){O=V;var N=O.sibling,M=O.return;if(Sp(O),O===S){V=null;break}if(N!==null){N.return=M,V=N;break}V=M}}}var B=u.alternate;if(B!==null){var z=B.child;if(z!==null){B.child=null;do{var ce=z.sibling;z.sibling=null,z=ce}while(z!==null)}}V=u}}if(u.subtreeFlags&2064&&d!==null)d.return=u,V=d;else e:for(;V!==null;){if(u=V,u.flags&2048)switch(u.tag){case 0:case 11:case 15:ys(9,u,u.return)}var k=u.sibling;if(k!==null){k.return=u.return,V=k;break e}V=u.return}}var w=t.current;for(V=w;V!==null;){d=V;var I=d.child;if(d.subtreeFlags&2064&&I!==null)I.return=d,V=I;else e:for(d=w;V!==null;){if(m=V,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:wa(9,m)}}catch(j){xe(m,m.return,j)}if(m===d){V=null;break e}var R=m.sibling;if(R!==null){R.return=m.return,V=R;break e}V=m.return}}if(oe=c,lr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(fa,t)}catch{}l=!0}return l}finally{fe=i,Rt.transition=n}}return!1}function wd(t,n,i){n=Si(i,n),n=up(t,n,1),t=er(t,n,1),n=tt(),t!==null&&($s(t,1,n),ft(t,n))}function xe(t,n,i){if(t.tag===3)wd(t,t,i);else for(;n!==null;){if(n.tag===3){wd(n,t,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(tr===null||!tr.has(l))){t=Si(i,t),t=cp(n,t,1),n=er(n,t,1),t=tt(),n!==null&&($s(n,1,t),ft(n,t));break}}n=n.return}}function $1(t,n,i){var l=t.pingCache;l!==null&&l.delete(n),n=tt(),t.pingedLanes|=t.suspendedLanes&i,ze===t&&(Ve&i)===i&&($e===4||$e===3&&(Ve&130023424)===Ve&&500>Oe()-cc?Er(t,0):uc|=i),ft(t,n)}function Op(t,n){n===0&&(t.mode&1?(n=mo,mo<<=1,!(mo&130023424)&&(mo=4194304)):n=1);var i=tt();t=Rn(t,n),t!==null&&($s(t,n,i),ft(t,i))}function U1(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),Op(t,i)}function z1(t,n){var i=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(i=c.retryLane);break;case 19:l=t.stateNode;break;default:throw Error(L(314))}l!==null&&l.delete(n),Op(t,i)}var Dp;Dp=function(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps||ut.current)lt=!0;else{if(!(t.lanes&i)&&!(n.flags&128))return lt=!1,N1(t,n,i);lt=!!(t.flags&131072)}else lt=!1,Ae&&n.flags&1048576&&Lg(n,Qo,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;Mo(t,n),t=n.pendingProps;var c=mi(n,Ye.current);di(n,i),c=rc(null,n,l,t,c,i);var u=ic();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ct(l)?(u=!0,Yo(n)):u=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Qu(n),c.updater=ya,n.stateNode=c,c._reactInternals=n,uu(n,l,t,i),n=hu(null,n,l,!0,u,i)):(n.tag=0,Ae&&u&&Ku(n),et(null,n,c,i),n=n.child),n;case 16:l=n.elementType;e:{switch(Mo(t,n),t=n.pendingProps,c=l._init,l=c(l._payload),n.type=l,c=n.tag=j1(l),t=Vt(l,t),c){case 0:n=fu(null,n,l,t,i);break e;case 1:n=ud(null,n,l,t,i);break e;case 11:n=ad(null,n,l,t,i);break e;case 14:n=ld(null,n,l,Vt(l.type,t),i);break e}throw Error(L(306,l,""))}return n;case 0:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Vt(l,c),fu(t,n,l,c,i);case 1:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Vt(l,c),ud(t,n,l,c,i);case 3:e:{if(gp(n),t===null)throw Error(L(387));l=n.pendingProps,u=n.memoizedState,c=u.element,$g(t,n),ta(n,l,null,i);var d=n.memoizedState;if(l=d.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},n.updateQueue.baseState=u,n.memoizedState=u,n.flags&256){c=Si(Error(L(423)),n),n=cd(t,n,l,i,c);break e}else if(l!==c){c=Si(Error(L(424)),n),n=cd(t,n,l,i,c);break e}else for(wt=Zn(n.stateNode.containerInfo.firstChild),St=n,Ae=!0,Kt=null,i=jg(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(yi(),l===c){n=_n(t,n,i);break e}et(t,n,l,i)}n=n.child}return n;case 5:return Vg(n),t===null&&ou(n),l=n.type,c=n.pendingProps,u=t!==null?t.memoizedProps:null,d=c.children,tu(l,c)?d=null:u!==null&&tu(l,u)&&(n.flags|=32),dp(t,n),et(t,n,d,i),n.child;case 6:return t===null&&ou(n),null;case 13:return pp(t,n,i);case 4:return Zu(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=vi(n,null,l,i):et(t,n,l,i),n.child;case 11:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Vt(l,c),ad(t,n,l,c,i);case 7:return et(t,n,n.pendingProps,i),n.child;case 8:return et(t,n,n.pendingProps.children,i),n.child;case 12:return et(t,n,n.pendingProps.children,i),n.child;case 10:e:{if(l=n.type._context,c=n.pendingProps,u=n.memoizedProps,d=c.value,ye(Zo,l._currentValue),l._currentValue=d,u!==null)if(Ht(u.value,d)){if(u.children===c.children&&!ut.current){n=_n(t,n,i);break e}}else for(u=n.child,u!==null&&(u.return=n);u!==null;){var m=u.dependencies;if(m!==null){d=u.child;for(var v=m.firstContext;v!==null;){if(v.context===l){if(u.tag===1){v=Pn(-1,i&-i),v.tag=2;var S=u.updateQueue;if(S!==null){S=S.shared;var O=S.pending;O===null?v.next=v:(v.next=O.next,O.next=v),S.pending=v}}u.lanes|=i,v=u.alternate,v!==null&&(v.lanes|=i),au(u.return,i,n),m.lanes|=i;break}v=v.next}}else if(u.tag===10)d=u.type===n.type?null:u.child;else if(u.tag===18){if(d=u.return,d===null)throw Error(L(341));d.lanes|=i,m=d.alternate,m!==null&&(m.lanes|=i),au(d,i,n),d=u.sibling}else d=u.child;if(d!==null)d.return=u;else for(d=u;d!==null;){if(d===n){d=null;break}if(u=d.sibling,u!==null){u.return=d.return,d=u;break}d=d.return}u=d}et(t,n,c.children,i),n=n.child}return n;case 9:return c=n.type,l=n.pendingProps.children,di(n,i),c=_t(c),l=l(c),n.flags|=1,et(t,n,l,i),n.child;case 14:return l=n.type,c=Vt(l,n.pendingProps),c=Vt(l.type,c),ld(t,n,l,c,i);case 15:return fp(t,n,n.type,n.pendingProps,i);case 17:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Vt(l,c),Mo(t,n),n.tag=1,ct(l)?(t=!0,Yo(n)):t=!1,di(n,i),zg(n,l,c),uu(n,l,c,i),hu(null,n,l,!0,t,i);case 19:return mp(t,n,i);case 22:return hp(t,n,i)}throw Error(L(156,n.tag))};function Rp(t,n){return ig(t,n)}function F1(t,n,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,n,i,l){return new F1(t,n,i,l)}function gc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function j1(t){if(typeof t=="function")return gc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_u)return 11;if(t===Lu)return 14}return 2}function rr(t,n){var i=t.alternate;return i===null?(i=Dt(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Uo(t,n,i,l,c,u){var d=2;if(l=t,typeof t=="function")gc(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case Qr:return Cr(i.children,c,u,n);case Ru:d=8,c|=8;break;case _l:return t=Dt(12,i,n,c|2),t.elementType=_l,t.lanes=u,t;case Ll:return t=Dt(13,i,n,c),t.elementType=Ll,t.lanes=u,t;case bl:return t=Dt(19,i,n,c),t.elementType=bl,t.lanes=u,t;case Fd:return Ta(i,c,u,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ud:d=10;break e;case zd:d=9;break e;case _u:d=11;break e;case Lu:d=14;break e;case Jn:d=16,l=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return n=Dt(d,i,n,c),n.elementType=t,n.type=l,n.lanes=u,n}function Cr(t,n,i,l){return t=Dt(7,t,l,n),t.lanes=i,t}function Ta(t,n,i,l){return t=Dt(22,t,l,n),t.elementType=Fd,t.lanes=i,t.stateNode={isHidden:!1},t}function Nl(t,n,i){return t=Dt(6,t,null,n),t.lanes=i,t}function xl(t,n,i){return n=Dt(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function V1(t,n,i,l,c){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ll(0),this.expirationTimes=ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ll(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function pc(t,n,i,l,c,u,d,m,v){return t=new V1(t,n,i,m,v),n===1?(n=1,u===!0&&(n|=8)):n=0,u=Dt(3,null,null,n),t.current=u,u.stateNode=t,u.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qu(u),t}function J1(t,n,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:l==null?null:""+l,children:t,containerInfo:n,implementation:i}}function _p(t){if(!t)return sr;t=t._reactInternals;e:{if(_r(t)!==t||t.tag!==1)throw Error(L(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ct(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(L(171))}if(t.tag===1){var i=t.type;if(ct(i))return Rg(t,i,n)}return n}function Lp(t,n,i,l,c,u,d,m,v){return t=pc(i,l,!0,t,c,u,d,m,v),t.context=_p(null),i=t.current,l=tt(),c=nr(i),u=Pn(l,c),u.callback=n??null,er(i,u,c),t.current.lanes=c,$s(t,c,l),ft(t,l),t}function ka(t,n,i,l){var c=n.current,u=tt(),d=nr(c);return i=_p(i),n.context===null?n.context=i:n.pendingContext=i,n=Pn(u,d),n.payload={element:t},l=l===void 0?null:l,l!==null&&(n.callback=l),t=er(c,n,d),t!==null&&(qt(t,c,d,u),_o(t,c,d)),d}function ua(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sd(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function mc(t,n){Sd(t,n),(t=t.alternate)&&Sd(t,n)}function K1(){return null}var bp=typeof reportError=="function"?reportError:function(t){console.error(t)};function yc(t){this._internalRoot=t}Aa.prototype.render=yc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(L(409));ka(t,n,null,null)};Aa.prototype.unmount=yc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Dr(function(){ka(null,t,null,null)}),n[Dn]=null}};function Aa(t){this._internalRoot=t}Aa.prototype.unstable_scheduleHydration=function(t){if(t){var n=fg();t={blockedOn:null,target:t,priority:n};for(var i=0;i<Wn.length&&n!==0&&n<Wn[i].priority;i++);Wn.splice(i,0,t),i===0&&dg(t)}};function vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ia(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Td(){}function W1(t,n,i,l,c){if(c){if(typeof l=="function"){var u=l;l=function(){var S=ua(d);u.call(S)}}var d=Lp(n,l,t,0,null,!1,!1,"",Td);return t._reactRootContainer=d,t[Dn]=d.current,xs(t.nodeType===8?t.parentNode:t),Dr(),d}for(;c=t.lastChild;)t.removeChild(c);if(typeof l=="function"){var m=l;l=function(){var S=ua(v);m.call(S)}}var v=pc(t,0,!1,null,null,!1,!1,"",Td);return t._reactRootContainer=v,t[Dn]=v.current,xs(t.nodeType===8?t.parentNode:t),Dr(function(){ka(n,v,i,l)}),v}function Ea(t,n,i,l,c){var u=i._reactRootContainer;if(u){var d=u;if(typeof c=="function"){var m=c;c=function(){var v=ua(d);m.call(v)}}ka(n,d,t,c)}else d=W1(i,n,t,c,l);return ua(d)}ug=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var i=us(n.pendingLanes);i!==0&&(Bu(n,i|1),ft(n,Oe()),!(oe&6)&&(Ti=Oe()+500,lr()))}break;case 13:Dr(function(){var l=Rn(t,1);if(l!==null){var c=tt();qt(l,t,1,c)}}),mc(t,1)}};$u=function(t){if(t.tag===13){var n=Rn(t,134217728);if(n!==null){var i=tt();qt(n,t,134217728,i)}mc(t,134217728)}};cg=function(t){if(t.tag===13){var n=nr(t),i=Rn(t,n);if(i!==null){var l=tt();qt(i,t,n,l)}mc(t,n)}};fg=function(){return fe};hg=function(t,n){var i=fe;try{return fe=t,n()}finally{fe=i}};Kl=function(t,n,i){switch(n){case"input":if($l(t,i),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==t&&l.form===t.form){var c=pa(l);if(!c)throw Error(L(90));Vd(l),$l(l,c)}}}break;case"textarea":Kd(t,i);break;case"select":n=i.value,n!=null&&ui(t,!!i.multiple,n,!1)}};Qd=fc;Zd=Dr;var q1={usingClientEntryPoint:!1,Events:[zs,ni,pa,Yd,Xd,fc]},os={findFiberByHostInstance:kr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},H1={bundleType:os.bundleType,version:os.version,rendererPackageName:os.rendererPackageName,rendererConfig:os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ng(t),t===null?null:t.stateNode},findFiberByHostInstance:os.findFiberByHostInstance||K1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var No=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!No.isDisabled&&No.supportsFiber)try{fa=No.inject(H1),hn=No}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q1;kt.createPortal=function(t,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vc(n))throw Error(L(200));return J1(t,n,null,i)};kt.createRoot=function(t,n){if(!vc(t))throw Error(L(299));var i=!1,l="",c=bp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=pc(t,1,!1,null,null,i,!1,l,c),t[Dn]=n.current,xs(t.nodeType===8?t.parentNode:t),new yc(n)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=ng(n),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return Dr(t)};kt.hydrate=function(t,n,i){if(!Ia(n))throw Error(L(200));return Ea(null,t,n,!0,i)};kt.hydrateRoot=function(t,n,i){if(!vc(t))throw Error(L(405));var l=i!=null&&i.hydratedSources||null,c=!1,u="",d=bp;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),n=Lp(n,null,t,1,i??null,c,!1,u,d),t[Dn]=n.current,xs(t),l)for(t=0;t<l.length;t++)i=l[t],c=i._getVersion,c=c(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,c]:n.mutableSourceEagerHydrationData.push(i,c);return new Aa(n)};kt.render=function(t,n,i){if(!Ia(n))throw Error(L(200));return Ea(null,t,n,!1,i)};kt.unmountComponentAtNode=function(t){if(!Ia(t))throw Error(L(40));return t._reactRootContainer?(Dr(function(){Ea(null,null,t,!1,function(){t._reactRootContainer=null,t[Dn]=null})}),!0):!1};kt.unstable_batchedUpdates=fc;kt.unstable_renderSubtreeIntoContainer=function(t,n,i,l){if(!Ia(i))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Ea(t,n,i,!1,l)};kt.version="18.2.0-next-9e3b772b8-20220608";function Mp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mp)}catch(t){console.error(t)}}Mp(),Ld.exports=kt;var G1=Ld.exports,kd=G1;Dl.createRoot=kd.createRoot,Dl.hydrateRoot=kd.hydrateRoot;var Iu={exports:{}};(function(t,n){(function(i,l){l(n)})(Av,function(i){var l=Object.defineProperty,c=(o,e,r)=>e in o?l(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,u=(o,e,r)=>(c(o,typeof e!="symbol"?e+"":e,r),r),d;(function(o){o[o.Canceled=1]="Canceled",o[o.Unknown=2]="Unknown",o[o.InvalidArgument=3]="InvalidArgument",o[o.DeadlineExceeded=4]="DeadlineExceeded",o[o.NotFound=5]="NotFound",o[o.AlreadyExists=6]="AlreadyExists",o[o.PermissionDenied=7]="PermissionDenied",o[o.ResourceExhausted=8]="ResourceExhausted",o[o.FailedPrecondition=9]="FailedPrecondition",o[o.Aborted=10]="Aborted",o[o.OutOfRange=11]="OutOfRange",o[o.Unimplemented=12]="Unimplemented",o[o.Internal=13]="Internal",o[o.Unavailable=14]="Unavailable",o[o.DataLoss=15]="DataLoss",o[o.Unauthenticated=16]="Unauthenticated"})(d||(d={}));function m(o,e){if(!o)throw new Error(e)}const v=34028234663852886e22,S=-34028234663852886e22,O=4294967295,P=2147483647,N=-2147483648;function M(o){if(typeof o!="number")throw new Error("invalid int 32: "+typeof o);if(!Number.isInteger(o)||o>P||o<N)throw new Error("invalid int 32: "+o)}function B(o){if(typeof o!="number")throw new Error("invalid uint 32: "+typeof o);if(!Number.isInteger(o)||o>O||o<0)throw new Error("invalid uint 32: "+o)}function z(o){if(typeof o!="number")throw new Error("invalid float 32: "+typeof o);if(Number.isFinite(o)&&(o>v||o<S))throw new Error("invalid float 32: "+o)}const ce=Symbol("@bufbuild/protobuf/enum-type");function k(o){const e=o[ce];return m(e,"missing enum type on enum object"),e}function w(o,e,r,s){o[ce]=I(e,r.map(a=>({no:a.no,name:a.name,localName:o[a.no]})))}function I(o,e,r){const s=Object.create(null),a=Object.create(null),f=[];for(const h of e){const g=j(h);f.push(g),s[h.name]=g,a[h.no]=g}return{typeName:o,values:f,findName(h){return s[h]},findNumber(h){return a[h]}}}function R(o,e,r){const s={};for(const a of e){const f=j(a);s[f.localName]=f.no,s[f.no]=f.localName}return w(s,o,e),s}function j(o){return"localName"in o?o:Object.assign(Object.assign({},o),{localName:o.name})}class ${equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,r){const s=this.getType(),a=s.runtime.bin,f=a.makeReadOptions(r);return a.readMessage(this,f.readerFactory(e),e.byteLength,f),this}fromJson(e,r){const s=this.getType(),a=s.runtime.json,f=a.makeReadOptions(r);return a.readMessage(s,e,f,this),this}fromJsonString(e,r){let s;try{s=JSON.parse(e)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(s,r)}toBinary(e){const r=this.getType(),s=r.runtime.bin,a=s.makeWriteOptions(e),f=a.writerFactory();return s.writeMessage(this,f,a),f.finish()}toJson(e){const r=this.getType(),s=r.runtime.json,a=s.makeWriteOptions(e);return s.writeMessage(this,a)}toJsonString(e){var r;const s=this.toJson(e);return JSON.stringify(s,null,(r=e==null?void 0:e.prettySpaces)!==null&&r!==void 0?r:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function W(o,e,r,s){var a;const f=(a=s==null?void 0:s.localName)!==null&&a!==void 0?a:e.substring(e.lastIndexOf(".")+1),h={[f]:function(g){o.util.initFields(this),o.util.initPartial(g,this)}}[f];return Object.setPrototypeOf(h.prototype,new $),Object.assign(h,{runtime:o,typeName:e,fields:o.util.newFieldList(r),fromBinary(g,p){return new h().fromBinary(g,p)},fromJson(g,p){return new h().fromJson(g,p)},fromJsonString(g,p){return new h().fromJsonString(g,p)},equals(g,p){return o.util.equals(h,g,p)}}),h}function Y(o,e,r,s){return{syntax:o,json:e,bin:r,util:s,makeMessageType(a,f,h){return W(this,a,f,h)},makeEnum:R,makeEnumType:I,getEnumType:k}}var E;(function(o){o[o.DOUBLE=1]="DOUBLE",o[o.FLOAT=2]="FLOAT",o[o.INT64=3]="INT64",o[o.UINT64=4]="UINT64",o[o.INT32=5]="INT32",o[o.FIXED64=6]="FIXED64",o[o.FIXED32=7]="FIXED32",o[o.BOOL=8]="BOOL",o[o.STRING=9]="STRING",o[o.BYTES=12]="BYTES",o[o.UINT32=13]="UINT32",o[o.SFIXED32=15]="SFIXED32",o[o.SFIXED64=16]="SFIXED64",o[o.SINT32=17]="SINT32",o[o.SINT64=18]="SINT64"})(E||(E={}));var Z;(function(o){o[o.BIGINT=0]="BIGINT",o[o.STRING=1]="STRING"})(Z||(Z={}));function ht(){let o=0,e=0;for(let s=0;s<28;s+=7){let a=this.buf[this.pos++];if(o|=(a&127)<<s,!(a&128))return this.assertBounds(),[o,e]}let r=this.buf[this.pos++];if(o|=(r&15)<<28,e=(r&112)>>4,!(r&128))return this.assertBounds(),[o,e];for(let s=3;s<=31;s+=7){let a=this.buf[this.pos++];if(e|=(a&127)<<s,!(a&128))return this.assertBounds(),[o,e]}throw new Error("invalid varint")}function gn(o,e,r){for(let f=0;f<28;f=f+7){const h=o>>>f,g=!(!(h>>>7)&&e==0),p=(g?h|128:h)&255;if(r.push(p),!g)return}const s=o>>>28&15|(e&7)<<4,a=!!(e>>3);if(r.push((a?s|128:s)&255),!!a){for(let f=3;f<31;f=f+7){const h=e>>>f,g=!!(h>>>7),p=(g?h|128:h)&255;if(r.push(p),!g)return}r.push(e>>>31&1)}}const Gt=4294967296;function Ei(o){const e=o[0]==="-";e&&(o=o.slice(1));const r=1e6;let s=0,a=0;function f(h,g){const p=Number(o.slice(h,g));a*=r,s=s*r+p,s>=Gt&&(a=a+(s/Gt|0),s=s%Gt)}return f(-24,-18),f(-18,-12),f(-12,-6),f(-6),e?Q(s,a):F(s,a)}function Ca(o,e){let r=F(o,e);const s=r.hi&2147483648;s&&(r=Q(r.lo,r.hi));const a=Lr(r.lo,r.hi);return s?"-"+a:a}function Lr(o,e){if({lo:o,hi:e}=Ci(o,e),e<=2097151)return String(Gt*e+o);const r=o&16777215,s=(o>>>24|e<<8)&16777215,a=e>>16&65535;let f=r+s*6777216+a*6710656,h=s+a*8147497,g=a*2;const p=1e7;return f>=p&&(h+=Math.floor(f/p),f%=p),h>=p&&(g+=Math.floor(h/p),h%=p),g.toString()+ee(h)+ee(f)}function Ci(o,e){return{lo:o>>>0,hi:e>>>0}}function F(o,e){return{lo:o|0,hi:e|0}}function Q(o,e){return e=~e,o?o=~o+1:e+=1,F(o,e)}const ee=o=>{const e=String(o);return"0000000".slice(e.length)+e};function Se(o,e){if(o>=0){for(;o>127;)e.push(o&127|128),o=o>>>7;e.push(o)}else{for(let r=0;r<9;r++)e.push(o&127|128),o=o>>7;e.push(1)}}function De(){let o=this.buf[this.pos++],e=o&127;if(!(o&128))return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<7,!(o&128))return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<14,!(o&128))return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<21,!(o&128))return this.assertBounds(),e;o=this.buf[this.pos++],e|=(o&15)<<28;for(let r=5;o&128&&r<10;r++)o=this.buf[this.pos++];if(o&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function br(){const o=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof o.getBigInt64=="function"&&typeof o.getBigUint64=="function"&&typeof o.setBigInt64=="function"&&typeof o.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),f=BigInt("9223372036854775807"),h=BigInt("0"),g=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(p){const y=typeof p=="bigint"?p:BigInt(p);if(y>f||y<a)throw new Error(`int64 invalid: ${p}`);return y},uParse(p){const y=typeof p=="bigint"?p:BigInt(p);if(y>g||y<h)throw new Error(`uint64 invalid: ${p}`);return y},enc(p){return o.setBigInt64(0,this.parse(p),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},uEnc(p){return o.setBigInt64(0,this.uParse(p),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},dec(p,y){return o.setInt32(0,p,!0),o.setInt32(4,y,!0),o.getBigInt64(0,!0)},uDec(p,y){return o.setInt32(0,p,!0),o.setInt32(4,y,!0),o.getBigUint64(0,!0)}}}const r=a=>m(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),s=a=>m(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),r(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),s(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),r(a),Ei(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),s(a),Ei(a)},dec(a,f){return Ca(a,f)},uDec(a,f){return Lr(a,f)}}}const he=br();var ue;(function(o){o[o.Varint=0]="Varint",o[o.Bit64=1]="Bit64",o[o.LengthDelimited=2]="LengthDelimited",o[o.StartGroup=3]="StartGroup",o[o.EndGroup=4]="EndGroup",o[o.Bit32=5]="Bit32"})(ue||(ue={}));class pn{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let a=0;a<this.chunks.length;a++)e+=this.chunks[a].length;let r=new Uint8Array(e),s=0;for(let a=0;a<this.chunks.length;a++)r.set(this.chunks[a],s),s+=this.chunks[a].length;return this.chunks=[],r}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),r=this.stack.pop();if(!r)throw new Error("invalid state, fork stack empty");return this.chunks=r.chunks,this.buf=r.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,r){return this.uint32((e<<3|r)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(B(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return M(e),Se(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let r=this.textEncoder.encode(e);return this.uint32(r.byteLength),this.raw(r)}float(e){z(e);let r=new Uint8Array(4);return new DataView(r.buffer).setFloat32(0,e,!0),this.raw(r)}double(e){let r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),this.raw(r)}fixed32(e){B(e);let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e,!0),this.raw(r)}sfixed32(e){M(e);let r=new Uint8Array(4);return new DataView(r.buffer).setInt32(0,e,!0),this.raw(r)}sint32(e){return M(e),e=(e<<1^e>>31)>>>0,Se(e,this.buf),this}sfixed64(e){let r=new Uint8Array(8),s=new DataView(r.buffer),a=he.enc(e);return s.setInt32(0,a.lo,!0),s.setInt32(4,a.hi,!0),this.raw(r)}fixed64(e){let r=new Uint8Array(8),s=new DataView(r.buffer),a=he.uEnc(e);return s.setInt32(0,a.lo,!0),s.setInt32(4,a.hi,!0),this.raw(r)}int64(e){let r=he.enc(e);return gn(r.lo,r.hi,this.buf),this}sint64(e){let r=he.enc(e),s=r.hi>>31,a=r.lo<<1^s,f=(r.hi<<1|r.lo>>>31)^s;return gn(a,f,this.buf),this}uint64(e){let r=he.uEnc(e);return gn(r.lo,r.hi,this.buf),this}}class Mr{constructor(e,r){this.varint64=ht,this.uint32=De,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=r??new TextDecoder}tag(){let e=this.uint32(),r=e>>>3,s=e&7;if(r<=0||s<0||s>5)throw new Error("illegal tag: field no "+r+" wire type "+s);return[r,s]}skip(e){let r=this.pos;switch(e){case ue.Varint:for(;this.buf[this.pos++]&128;);break;case ue.Bit64:this.pos+=4;case ue.Bit32:this.pos+=4;break;case ue.LengthDelimited:let s=this.uint32();this.pos+=s;break;case ue.StartGroup:let a;for(;(a=this.tag()[1])!==ue.EndGroup;)this.skip(a);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return he.dec(...this.varint64())}uint64(){return he.uDec(...this.varint64())}sint64(){let[e,r]=this.varint64(),s=-(e&1);return e=(e>>>1|(r&1)<<31)^s,r=r>>>1^s,he.dec(e,r)}bool(){let[e,r]=this.varint64();return e!==0||r!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return he.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return he.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),r=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(r,r+e)}string(){return this.textDecoder.decode(this.bytes())}}function Na(o,e){return e instanceof $||!o.fieldWrapper?e:o.fieldWrapper.wrapField(e)}E.DOUBLE,E.FLOAT,E.INT64,E.UINT64,E.INT32,E.UINT32,E.BOOL,E.STRING,E.BYTES;function bn(o,e,r){if(e===r)return!0;if(o==E.BYTES){if(!(e instanceof Uint8Array)||!(r instanceof Uint8Array)||e.length!==r.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==r[s])return!1;return!0}switch(o){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==r}return!1}function xa(o,e){switch(o){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==0?he.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function wc(o,e){const r=e===void 0;let s=ue.Varint,a=e===0;switch(o){case E.STRING:a=r||!e.length,s=ue.LengthDelimited;break;case E.BOOL:a=e===!1;break;case E.DOUBLE:s=ue.Bit64;break;case E.FLOAT:s=ue.Bit32;break;case E.INT64:a=r||e==0;break;case E.UINT64:a=r||e==0;break;case E.FIXED64:a=r||e==0,s=ue.Bit64;break;case E.BYTES:a=r||!e.byteLength,s=ue.LengthDelimited;break;case E.FIXED32:s=ue.Bit32;break;case E.SFIXED32:s=ue.Bit32;break;case E.SFIXED64:a=r||e==0,s=ue.Bit64;break;case E.SINT64:a=r||e==0;break}const f=E[o].toLowerCase();return[s,f,r||a]}const Br=Symbol("@bufbuild/protobuf/unknown-fields"),Sc={readUnknownFields:!0,readerFactory:o=>new Mr(o)},Tc={writeUnknownFields:!0,writerFactory:()=>new pn};function $p(o){return o?Object.assign(Object.assign({},Sc),o):Sc}function Up(o){return o?Object.assign(Object.assign({},Tc),o):Tc}function zp(){return{makeReadOptions:$p,makeWriteOptions:Up,listUnknownFields(o){var e;return(e=o[Br])!==null&&e!==void 0?e:[]},discardUnknownFields(o){delete o[Br]},writeUnknownFields(o,e){const s=o[Br];if(s)for(const a of s)e.tag(a.no,a.wireType).raw(a.data)},onUnknownField(o,e,r,s){const a=o;Array.isArray(a[Br])||(a[Br]=[]),a[Br].push({no:e,wireType:r,data:s})},readMessage(o,e,r,s,a){const f=o.getType(),h=a?e.len:e.pos+r;let g,p;for(;e.pos<h&&([g,p]=e.tag(),p!=ue.EndGroup);){const y=f.fields.find(g);if(!y){const x=e.skip(p);s.readUnknownFields&&this.onUnknownField(o,g,p,x);continue}let A=o,D=y.repeated,T=y.localName;switch(y.oneof&&(A=A[y.oneof.localName],A.case!=T&&delete A.value,A.case=T,T="value"),y.kind){case"scalar":case"enum":const x=y.kind=="enum"?E.INT32:y.T;let U=Vs;if(y.kind=="scalar"&&y.L>0&&(U=jp),D){let pe=A[T];if(p==ue.LengthDelimited&&x!=E.STRING&&x!=E.BYTES){let re=e.uint32()+e.pos;for(;e.pos<re;)pe.push(U(e,x))}else pe.push(U(e,x))}else A[T]=U(e,x);break;case"message":const J=y.T;D?A[T].push(js(e,new J,s,y)):A[T]instanceof $?js(e,A[T],s,y):(A[T]=js(e,new J,s,y),J.fieldWrapper&&!y.oneof&&!y.repeated&&(A[T]=J.fieldWrapper.unwrapField(A[T])));break;case"map":let[K,ne]=Fp(y,e,s);A[T][K]=ne;break}}if(a&&(p!=ue.EndGroup||g!==r))throw new Error("invalid end group tag")}}}function js(o,e,r,s){const a=e.getType().runtime.bin,f=s==null?void 0:s.delimited;return a.readMessage(e,o,f?s==null?void 0:s.no:o.uint32(),r,f),e}function Fp(o,e,r){const s=e.uint32(),a=e.pos+s;let f,h;for(;e.pos<a;){let[g]=e.tag();switch(g){case 1:f=Vs(e,o.K);break;case 2:switch(o.V.kind){case"scalar":h=Vs(e,o.V.T);break;case"enum":h=e.int32();break;case"message":h=js(e,new o.V.T,r,void 0);break}break}}if(f===void 0){let g=xa(o.K,Z.BIGINT);f=o.K==E.BOOL?g.toString():g}if(typeof f!="string"&&typeof f!="number"&&(f=f.toString()),h===void 0)switch(o.V.kind){case"scalar":h=xa(o.V.T,Z.BIGINT);break;case"enum":h=0;break;case"message":h=new o.V.T;break}return[f,h]}function jp(o,e){const r=Vs(o,e);return typeof r=="bigint"?r.toString():r}function Vs(o,e){switch(e){case E.STRING:return o.string();case E.BOOL:return o.bool();case E.DOUBLE:return o.double();case E.FLOAT:return o.float();case E.INT32:return o.int32();case E.INT64:return o.int64();case E.UINT64:return o.uint64();case E.FIXED64:return o.fixed64();case E.BYTES:return o.bytes();case E.FIXED32:return o.fixed32();case E.SFIXED32:return o.sfixed32();case E.SFIXED64:return o.sfixed64();case E.SINT64:return o.sint64();case E.UINT32:return o.uint32();case E.SINT32:return o.sint32()}}function Vp(o,e,r,s,a){o.tag(r.no,ue.LengthDelimited),o.fork();let f=s;switch(r.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:f=Number.parseInt(s);break;case E.BOOL:m(s=="true"||s=="false"),f=s=="true";break}switch(Ni(o,r.K,1,f,!0),r.V.kind){case"scalar":Ni(o,r.V.T,2,a,!0);break;case"enum":Ni(o,E.INT32,2,a,!0);break;case"message":o.tag(2,ue.LengthDelimited).bytes(a.toBinary(e));break}o.join()}function kc(o,e,r,s){if(s!==void 0){const a=Na(r.T,s);r!=null&&r.delimited?o.tag(r.no,ue.StartGroup).raw(a.toBinary(e)).tag(r.no,ue.EndGroup):o.tag(r.no,ue.LengthDelimited).bytes(a.toBinary(e))}}function Ni(o,e,r,s,a){let[f,h,g]=wc(e,s);(!g||a)&&o.tag(r,f)[h](s)}function Jp(o,e,r,s){if(!s.length)return;o.tag(r,ue.LengthDelimited).fork();let[,a]=wc(e);for(let f=0;f<s.length;f++)o[a](s[f]);o.join()}function Kp(){return Object.assign(Object.assign({},zp()),{writeMessage(o,e,r){const s=o.getType();for(const a of s.fields.byNumber()){let f,h=a.repeated,g=a.localName;if(a.oneof){const p=o[a.oneof.localName];if(p.case!==g)continue;f=p.value}else f=o[g];switch(a.kind){case"scalar":case"enum":let p=a.kind=="enum"?E.INT32:a.T;if(h)if(a.packed)Jp(e,p,a.no,f);else for(const y of f)Ni(e,p,a.no,y,!0);else f!==void 0&&Ni(e,p,a.no,f,!!a.oneof||a.opt);break;case"message":if(h)for(const y of f)kc(e,r,a,y);else kc(e,r,a,f);break;case"map":for(const[y,A]of Object.entries(f))Vp(e,r,a,y,A);break}}return r.writeUnknownFields&&this.writeUnknownFields(o,e),e}})}let mn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Js=[];for(let o=0;o<mn.length;o++)Js[mn[o].charCodeAt(0)]=o;Js["-".charCodeAt(0)]=mn.indexOf("+"),Js["_".charCodeAt(0)]=mn.indexOf("/");const Pa={dec(o){let e=o.length*3/4;o[o.length-2]=="="?e-=2:o[o.length-1]=="="&&(e-=1);let r=new Uint8Array(e),s=0,a=0,f,h=0;for(let g=0;g<o.length;g++){if(f=Js[o.charCodeAt(g)],f===void 0)switch(o[g]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:h=f,a=1;break;case 1:r[s++]=h<<2|(f&48)>>4,h=f,a=2;break;case 2:r[s++]=(h&15)<<4|(f&60)>>2,h=f,a=3;break;case 3:r[s++]=(h&3)<<6|f,a=0;break}}if(a==1)throw Error("invalid base64 string.");return r.subarray(0,s)},enc(o){let e="",r=0,s,a=0;for(let f=0;f<o.length;f++)switch(s=o[f],r){case 0:e+=mn[s>>2],a=(s&3)<<4,r=1;break;case 1:e+=mn[a|s>>4],a=(s&15)<<2,r=2;break;case 2:e+=mn[a|s>>6],e+=mn[s&63],r=0;break}return r&&(e+=mn[a],e+="=",r==1&&(e+="=")),e}},Ac={ignoreUnknownFields:!1},Ic={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Wp(o){return o?Object.assign(Object.assign({},Ac),o):Ac}function qp(o){return o?Object.assign(Object.assign({},Ic),o):Ic}function Hp(o){const e=o(Gp,Cc);return{makeReadOptions:Wp,makeWriteOptions:qp,readMessage(r,s,a,f){if(s==null||Array.isArray(s)||typeof s!="object")throw new Error(`cannot decode message ${r.typeName} from JSON: ${this.debug(s)}`);f=f??new r;const h={};for(const[g,p]of Object.entries(s)){const y=r.fields.findJsonName(g);if(!y){if(!a.ignoreUnknownFields)throw new Error(`cannot decode message ${r.typeName} from JSON: key "${g}" is unknown`);continue}let A=y.localName,D=f;if(y.oneof){if(p===null&&y.kind=="scalar")continue;const T=h[y.oneof.localName];if(T)throw new Error(`cannot decode message ${r.typeName} from JSON: multiple keys for oneof "${y.oneof.name}" present: "${T}", "${g}"`);h[y.oneof.localName]=g,D=D[y.oneof.localName]={case:A},A="value"}if(y.repeated){if(p===null)continue;if(!Array.isArray(p))throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(p)}`);const T=D[A];for(const x of p){if(x===null)throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(x)}`);let U;switch(y.kind){case"message":U=y.T.fromJson(x,a);break;case"enum":if(U=Oa(y.T,x,a.ignoreUnknownFields),U===void 0)continue;break;case"scalar":try{U=xi(y.T,x,y.L)}catch(J){let K=`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(x)}`;throw J instanceof Error&&J.message.length>0&&(K+=`: ${J.message}`),new Error(K)}break}T.push(U)}}else if(y.kind=="map"){if(p===null)continue;if(Array.isArray(p)||typeof p!="object")throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(p)}`);const T=D[A];for(const[x,U]of Object.entries(p)){if(U===null)throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: map value null`);let J;switch(y.V.kind){case"message":J=y.V.T.fromJson(U,a);break;case"enum":if(J=Oa(y.V.T,U,a.ignoreUnknownFields),J===void 0)continue;break;case"scalar":try{J=xi(y.V.T,U,Z.BIGINT)}catch(K){let ne=`cannot decode map value for field ${r.typeName}.${y.name} from JSON: ${this.debug(p)}`;throw K instanceof Error&&K.message.length>0&&(ne+=`: ${K.message}`),new Error(ne)}break}try{T[xi(y.K,y.K==E.BOOL?x=="true"?!0:x=="false"?!1:x:x,Z.BIGINT).toString()]=J}catch(K){let ne=`cannot decode map key for field ${r.typeName}.${y.name} from JSON: ${this.debug(p)}`;throw K instanceof Error&&K.message.length>0&&(ne+=`: ${K.message}`),new Error(ne)}}}else switch(y.kind){case"message":const T=y.T;if(p===null&&T.typeName!="google.protobuf.Value"){if(y.oneof)throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: null is invalid for oneof field "${g}"`);continue}D[A]instanceof $?D[A].fromJson(p,a):(D[A]=T.fromJson(p,a),T.fieldWrapper&&!y.oneof&&(D[A]=T.fieldWrapper.unwrapField(D[A])));break;case"enum":const x=Oa(y.T,p,a.ignoreUnknownFields);x!==void 0&&(D[A]=x);break;case"scalar":try{D[A]=xi(y.T,p,y.L)}catch(U){let J=`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(p)}`;throw U instanceof Error&&U.message.length>0&&(J+=`: ${U.message}`),new Error(J)}break}}return f},writeMessage(r,s){const a=r.getType(),f={};let h;try{for(const g of a.fields.byMember()){let p;if(g.kind=="oneof"){const y=r[g.localName];if(y.value===void 0)continue;if(h=g.findField(y.case),!h)throw"oneof case not found: "+y.case;p=e(h,y.value,s)}else h=g,p=e(h,r[h.localName],s);p!==void 0&&(f[s.useProtoFieldName?h.name:h.jsonName]=p)}}catch(g){const p=h?`cannot encode field ${a.typeName}.${h.name} to JSON`:`cannot encode message ${a.typeName} to JSON`,y=g instanceof Error?g.message:String(g);throw new Error(p+(y.length>0?`: ${y}`:""))}return f},readScalar:xi,writeScalar:Cc,debug:Ec}}function Ec(o){if(o===null)return"null";switch(typeof o){case"object":return Array.isArray(o)?"array":"object";case"string":return o.length>100?"string":`"${o.split('"').join('\\"')}"`;default:return String(o)}}function xi(o,e,r){switch(o){case E.DOUBLE:case E.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const s=Number(e);if(Number.isNaN(s)||!Number.isFinite(s))break;return o==E.FLOAT&&z(s),s;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:if(e===null)return 0;let a;if(typeof e=="number"?a=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(a=Number(e)),a===void 0)break;return o==E.UINT32?B(a):M(a),a;case E.INT64:case E.SFIXED64:case E.SINT64:if(e===null)return he.zero;if(typeof e!="number"&&typeof e!="string")break;const f=he.parse(e);return r?f.toString():f;case E.FIXED64:case E.UINT64:if(e===null)return he.zero;if(typeof e!="number"&&typeof e!="string")break;const h=he.uParse(e);return r?h.toString():h;case E.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case E.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case E.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return Pa.dec(e)}throw new Error}function Oa(o,e,r){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const s=o.findName(e);if(s||r)return s==null?void 0:s.no;break}throw new Error(`cannot decode enum ${o.typeName} from JSON: ${Ec(e)}`)}function Gp(o,e,r,s){var a;if(e===void 0)return e;if(e===0&&!r)return;if(s)return e;if(o.typeName=="google.protobuf.NullValue")return null;const f=o.findNumber(e);return(a=f==null?void 0:f.name)!==null&&a!==void 0?a:e}function Cc(o,e,r){if(e!==void 0)switch(o){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return m(typeof e=="number"),e!=0||r?e:void 0;case E.FLOAT:case E.DOUBLE:return m(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||r?e:void 0;case E.STRING:return m(typeof e=="string"),e.length>0||r?e:void 0;case E.BOOL:return m(typeof e=="boolean"),e||r?e:void 0;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return m(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),r||e!=0?e.toString(10):void 0;case E.BYTES:return m(e instanceof Uint8Array),r||e.byteLength>0?Pa.enc(e):void 0}}function Yp(){return Hp((o,e)=>function(s,a,f){if(s.kind=="map"){const h={};switch(s.V.kind){case"scalar":for(const[p,y]of Object.entries(a)){const A=e(s.V.T,y,!0);m(A!==void 0),h[p.toString()]=A}break;case"message":for(const[p,y]of Object.entries(a))h[p.toString()]=y.toJson(f);break;case"enum":const g=s.V.T;for(const[p,y]of Object.entries(a)){m(y===void 0||typeof y=="number");const A=o(g,y,!0,f.enumAsInteger);m(A!==void 0),h[p.toString()]=A}break}return f.emitDefaultValues||Object.keys(h).length>0?h:void 0}else if(s.repeated){const h=[];switch(s.kind){case"scalar":for(let g=0;g<a.length;g++)h.push(e(s.T,a[g],!0));break;case"enum":for(let g=0;g<a.length;g++)h.push(o(s.T,a[g],!0,f.enumAsInteger));break;case"message":for(let g=0;g<a.length;g++)h.push(Na(s.T,a[g]).toJson(f));break}return f.emitDefaultValues||h.length>0?h:void 0}else switch(s.kind){case"scalar":return e(s.T,a,!!s.oneof||s.opt||f.emitDefaultValues);case"enum":return o(s.T,a,!!s.oneof||s.opt||f.emitDefaultValues,f.enumAsInteger);case"message":return a!==void 0?Na(s.T,a).toJson(f):void 0}})}function Xp(){return{setEnumType:w,initPartial(o,e){if(o===void 0)return;const r=e.getType();for(const s of r.fields.byMember()){const a=s.localName,f=e,h=o;if(h[a]!==void 0)switch(s.kind){case"oneof":const g=h[a].case;if(g===void 0)continue;const p=s.findField(g);let y=h[a].value;p&&p.kind=="message"&&!(y instanceof p.T)?y=new p.T(y):p&&p.kind==="scalar"&&p.T===E.BYTES&&(y=Pi(y)),f[a]={case:g,value:y};break;case"scalar":case"enum":let A=h[a];s.T===E.BYTES&&(A=s.repeated?A.map(Pi):Pi(A)),f[a]=A;break;case"map":switch(s.V.kind){case"scalar":case"enum":if(s.V.T===E.BYTES)for(const[x,U]of Object.entries(h[a]))f[a][x]=Pi(U);else Object.assign(f[a],h[a]);break;case"message":const T=s.V.T;for(const x of Object.keys(h[a])){let U=h[a][x];T.fieldWrapper||(U=new T(U)),f[a][x]=U}break}break;case"message":const D=s.T;if(s.repeated)f[a]=h[a].map(T=>T instanceof D?T:new D(T));else if(h[a]!==void 0){const T=h[a];D.fieldWrapper?D.typeName==="google.protobuf.BytesValue"?f[a]=Pi(T):f[a]=T:f[a]=T instanceof D?T:new D(T)}break}}},equals(o,e,r){return e===r?!0:!e||!r?!1:o.fields.byMember().every(s=>{const a=e[s.localName],f=r[s.localName];if(s.repeated){if(a.length!==f.length)return!1;switch(s.kind){case"message":return a.every((h,g)=>s.T.equals(h,f[g]));case"scalar":return a.every((h,g)=>bn(s.T,h,f[g]));case"enum":return a.every((h,g)=>bn(E.INT32,h,f[g]))}throw new Error(`repeated cannot contain ${s.kind}`)}switch(s.kind){case"message":return s.T.equals(a,f);case"enum":return bn(E.INT32,a,f);case"scalar":return bn(s.T,a,f);case"oneof":if(a.case!==f.case)return!1;const h=s.findField(a.case);if(h===void 0)return!0;switch(h.kind){case"message":return h.T.equals(a.value,f.value);case"enum":return bn(E.INT32,a.value,f.value);case"scalar":return bn(h.T,a.value,f.value)}throw new Error(`oneof cannot contain ${h.kind}`);case"map":const g=Object.keys(a).concat(Object.keys(f));switch(s.V.kind){case"message":const p=s.V.T;return g.every(A=>p.equals(a[A],f[A]));case"enum":return g.every(A=>bn(E.INT32,a[A],f[A]));case"scalar":const y=s.V.T;return g.every(A=>bn(y,a[A],f[A]))}break}})},clone(o){const e=o.getType(),r=new e,s=r;for(const a of e.fields.byMember()){const f=o[a.localName];let h;if(a.repeated)h=f.map(Ks);else if(a.kind=="map"){h=s[a.localName];for(const[g,p]of Object.entries(f))h[g]=Ks(p)}else a.kind=="oneof"?h=a.findField(f.case)?{case:f.case,value:Ks(f.value)}:{case:void 0}:h=Ks(f);s[a.localName]=h}return r}}}function Ks(o){if(o===void 0)return o;if(o instanceof $)return o.clone();if(o instanceof Uint8Array){const e=new Uint8Array(o.byteLength);return e.set(o),e}return o}function Pi(o){return o instanceof Uint8Array?o:new Uint8Array(o)}class Qp{constructor(e,r){this._fields=e,this._normalizer=r}findJsonName(e){if(!this.jsonNames){const r={};for(const s of this.list())r[s.jsonName]=r[s.name]=s;this.jsonNames=r}return this.jsonNames[e]}find(e){if(!this.numbers){const r={};for(const s of this.list())r[s.no]=s;this.numbers=r}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,r)=>e.no-r.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let r;for(const s of this.list())s.oneof?s.oneof!==r&&(r=s.oneof,e.push(r)):e.push(s)}return this.members}}function Nc(o,e){const r=xc(o);return e?r:im(rm(r))}function Zp(o){return Nc(o,!1)}const em=xc;function xc(o){let e=!1;const r=[];for(let s=0;s<o.length;s++){let a=o.charAt(s);switch(a){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r.push(a),e=!1;break;default:e&&(e=!1,a=a.toUpperCase()),r.push(a);break}}return r.join("")}const tm=new Set(["constructor","toString","toJSON","valueOf"]),nm=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Pc=o=>`${o}$`,rm=o=>nm.has(o)?Pc(o):o,im=o=>tm.has(o)?Pc(o):o;class sm{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Zp(e)}addField(e){m(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let r=0;r<this.fields.length;r++)this._lookup[this.fields[r].localName]=this.fields[r]}return this._lookup[e]}}const C=Y("proto3",Yp(),Kp(),Object.assign(Object.assign({},Xp()),{newFieldList(o){return new Qp(o,om)},initFields(o){for(const e of o.getType().fields.byMember()){if(e.opt)continue;const r=e.localName,s=o;if(e.repeated){s[r]=[];continue}switch(e.kind){case"oneof":s[r]={case:void 0};break;case"enum":s[r]=0;break;case"map":s[r]={};break;case"scalar":s[r]=xa(e.T,e.L);break}}}}));function om(o){var e,r,s,a;const f=[];let h;for(const g of typeof o=="function"?o():o){const p=g;if(p.localName=Nc(g.name,g.oneof!==void 0),p.jsonName=(e=g.jsonName)!==null&&e!==void 0?e:em(g.name),p.repeated=(r=g.repeated)!==null&&r!==void 0?r:!1,g.kind=="scalar"&&(p.L=(s=g.L)!==null&&s!==void 0?s:Z.BIGINT),g.oneof!==void 0){const y=typeof g.oneof=="string"?g.oneof:g.oneof.name;(!h||h.name!=y)&&(h=new sm(y)),p.oneof=h,h.addField(p)}g.kind=="message"&&(p.delimited=!1),p.packed=(a=g.packed)!==null&&a!==void 0?a:g.kind=="enum"||g.kind=="scalar"&&g.T!=E.BYTES&&g.T!=E.STRING,f.push(p)}return f}var Xe;(function(o){o[o.Unary=0]="Unary",o[o.ServerStreaming=1]="ServerStreaming",o[o.ClientStreaming=2]="ClientStreaming",o[o.BiDiStreaming=3]="BiDiStreaming"})(Xe||(Xe={}));var Oc;(function(o){o[o.NoSideEffects=1]="NoSideEffects",o[o.Idempotent=2]="Idempotent"})(Oc||(Oc={}));class Ke extends ${constructor(e){super(),this.seconds=he.zero,this.nanos=0,C.util.initPartial(e,this)}fromJson(e,r){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${C.json.debug(e)}`);const s=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!s)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(s[1]+"-"+s[2]+"-"+s[3]+"T"+s[4]+":"+s[5]+":"+s[6]+(s[8]?s[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=he.parse(a/1e3),this.nanos=0,s[7]&&(this.nanos=parseInt("1"+s[7]+"0".repeat(9-s[7].length))-1e9),this}toJson(e){const r=Number(this.seconds)*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let s="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?s="."+a.substring(0,3)+"Z":a.substring(6)==="000"?s="."+a.substring(0,6)+"Z":s="."+a+"Z"}return new Date(r).toISOString().replace(".000Z",s)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Ke.fromDate(new Date)}static fromDate(e){const r=e.getTime();return new Ke({seconds:he.parse(Math.floor(r/1e3)),nanos:r%1e3*1e6})}static fromBinary(e,r){return new Ke().fromBinary(e,r)}static fromJson(e,r){return new Ke().fromJson(e,r)}static fromJsonString(e,r){return new Ke().fromJsonString(e,r)}static equals(e,r){return C.util.equals(Ke,e,r)}}Ke.runtime=C,Ke.typeName="google.protobuf.Timestamp",Ke.fields=C.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Yt extends ${constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),C.util.initPartial(e,this)}toJson(e){var r;if(this.typeUrl==="")return{};const s=this.typeUrlToName(this.typeUrl),a=(r=e==null?void 0:e.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let h=a.fromBinary(this.value).toJson(e);return(s.startsWith("google.protobuf.")||h===null||Array.isArray(h)||typeof h!="object")&&(h={value:h}),h["@type"]=this.typeUrl,h}fromJson(e,r){var s;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const a=e["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const f=this.typeUrlToName(a),h=(s=r==null?void 0:r.typeRegistry)===null||s===void 0?void 0:s.findMessage(f);if(!h)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let g;if(f.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))g=h.fromJson(e.value,r);else{const p=Object.assign({},e);delete p["@type"],g=h.fromJson(p,r)}return this.packFrom(g),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const r=e.findMessage(this.typeUrlToName(this.typeUrl));if(r)return r.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const r=this.typeUrlToName(this.typeUrl);let s="";return typeof e=="string"?s=e:s=e.typeName,r===s}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const r=e.lastIndexOf("/"),s=r>=0?e.substring(r+1):e;if(!s.length)throw new Error(`invalid type url: ${e}`);return s}static pack(e){const r=new Yt;return r.packFrom(e),r}static fromBinary(e,r){return new Yt().fromBinary(e,r)}static fromJson(e,r){return new Yt().fromJson(e,r)}static fromJsonString(e,r){return new Yt().fromJsonString(e,r)}static equals(e,r){return C.util.equals(Yt,e,r)}}Yt.runtime=C,Yt.typeName="google.protobuf.Any",Yt.fields=C.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Xt extends ${constructor(e){super(),this.value=0,C.util.initPartial(e,this)}toJson(e){return C.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(e,r){try{this.value=C.json.readScalar(E.DOUBLE,e)}catch(s){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new Xt().fromBinary(e,r)}static fromJson(e,r){return new Xt().fromJson(e,r)}static fromJsonString(e,r){return new Xt().fromJsonString(e,r)}static equals(e,r){return C.util.equals(Xt,e,r)}}Xt.runtime=C,Xt.typeName="google.protobuf.DoubleValue",Xt.fields=C.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Xt.fieldWrapper={wrapField(o){return new Xt({value:o})},unwrapField(o){return o.value}};class Qt extends ${constructor(e){super(),this.value=0,C.util.initPartial(e,this)}toJson(e){return C.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(e,r){try{this.value=C.json.readScalar(E.FLOAT,e)}catch(s){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new Qt().fromBinary(e,r)}static fromJson(e,r){return new Qt().fromJson(e,r)}static fromJsonString(e,r){return new Qt().fromJsonString(e,r)}static equals(e,r){return C.util.equals(Qt,e,r)}}Qt.runtime=C,Qt.typeName="google.protobuf.FloatValue",Qt.fields=C.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),Qt.fieldWrapper={wrapField(o){return new Qt({value:o})},unwrapField(o){return o.value}};class Zt extends ${constructor(e){super(),this.value=he.zero,C.util.initPartial(e,this)}toJson(e){return C.json.writeScalar(E.INT64,this.value,!0)}fromJson(e,r){try{this.value=C.json.readScalar(E.INT64,e)}catch(s){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new Zt().fromBinary(e,r)}static fromJson(e,r){return new Zt().fromJson(e,r)}static fromJsonString(e,r){return new Zt().fromJsonString(e,r)}static equals(e,r){return C.util.equals(Zt,e,r)}}Zt.runtime=C,Zt.typeName="google.protobuf.Int64Value",Zt.fields=C.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),Zt.fieldWrapper={wrapField(o){return new Zt({value:o})},unwrapField(o){return o.value}};class en extends ${constructor(e){super(),this.value=he.zero,C.util.initPartial(e,this)}toJson(e){return C.json.writeScalar(E.UINT64,this.value,!0)}fromJson(e,r){try{this.value=C.json.readScalar(E.UINT64,e)}catch(s){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new en().fromBinary(e,r)}static fromJson(e,r){return new en().fromJson(e,r)}static fromJsonString(e,r){return new en().fromJsonString(e,r)}static equals(e,r){return C.util.equals(en,e,r)}}en.runtime=C,en.typeName="google.protobuf.UInt64Value",en.fields=C.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),en.fieldWrapper={wrapField(o){return new en({value:o})},unwrapField(o){return o.value}};class tn extends ${constructor(e){super(),this.value=0,C.util.initPartial(e,this)}toJson(e){return C.json.writeScalar(E.INT32,this.value,!0)}fromJson(e,r){try{this.value=C.json.readScalar(E.INT32,e)}catch(s){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new tn().fromBinary(e,r)}static fromJson(e,r){return new tn().fromJson(e,r)}static fromJsonString(e,r){return new tn().fromJsonString(e,r)}static equals(e,r){return C.util.equals(tn,e,r)}}tn.runtime=C,tn.typeName="google.protobuf.Int32Value",tn.fields=C.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),tn.fieldWrapper={wrapField(o){return new tn({value:o})},unwrapField(o){return o.value}};class nn extends ${constructor(e){super(),this.value=0,C.util.initPartial(e,this)}toJson(e){return C.json.writeScalar(E.UINT32,this.value,!0)}fromJson(e,r){try{this.value=C.json.readScalar(E.UINT32,e)}catch(s){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new nn().fromBinary(e,r)}static fromJson(e,r){return new nn().fromJson(e,r)}static fromJsonString(e,r){return new nn().fromJsonString(e,r)}static equals(e,r){return C.util.equals(nn,e,r)}}nn.runtime=C,nn.typeName="google.protobuf.UInt32Value",nn.fields=C.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),nn.fieldWrapper={wrapField(o){return new nn({value:o})},unwrapField(o){return o.value}};class rn extends ${constructor(e){super(),this.value=!1,C.util.initPartial(e,this)}toJson(e){return C.json.writeScalar(E.BOOL,this.value,!0)}fromJson(e,r){try{this.value=C.json.readScalar(E.BOOL,e)}catch(s){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new rn().fromBinary(e,r)}static fromJson(e,r){return new rn().fromJson(e,r)}static fromJsonString(e,r){return new rn().fromJsonString(e,r)}static equals(e,r){return C.util.equals(rn,e,r)}}rn.runtime=C,rn.typeName="google.protobuf.BoolValue",rn.fields=C.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),rn.fieldWrapper={wrapField(o){return new rn({value:o})},unwrapField(o){return o.value}};class dt extends ${constructor(e){super(),this.value="",C.util.initPartial(e,this)}toJson(e){return C.json.writeScalar(E.STRING,this.value,!0)}fromJson(e,r){try{this.value=C.json.readScalar(E.STRING,e)}catch(s){let a='cannot decode message google.protobuf.StringValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new dt().fromBinary(e,r)}static fromJson(e,r){return new dt().fromJson(e,r)}static fromJsonString(e,r){return new dt().fromJsonString(e,r)}static equals(e,r){return C.util.equals(dt,e,r)}}dt.runtime=C,dt.typeName="google.protobuf.StringValue",dt.fields=C.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),dt.fieldWrapper={wrapField(o){return new dt({value:o})},unwrapField(o){return o.value}};class sn extends ${constructor(e){super(),this.value=new Uint8Array(0),C.util.initPartial(e,this)}toJson(e){return C.json.writeScalar(E.BYTES,this.value,!0)}fromJson(e,r){try{this.value=C.json.readScalar(E.BYTES,e)}catch(s){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new sn().fromBinary(e,r)}static fromJson(e,r){return new sn().fromJson(e,r)}static fromJsonString(e,r){return new sn().fromJsonString(e,r)}static equals(e,r){return C.util.equals(sn,e,r)}}sn.runtime=C,sn.typeName="google.protobuf.BytesValue",sn.fields=C.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),sn.fieldWrapper={wrapField(o){return new sn({value:o})},unwrapField(o){return o.value}};function Dc(o){const e=d[o];return typeof e!="string"?o.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,r=>"_"+r.toLowerCase())}class be extends Error{constructor(e,r=d.Unknown,s,a,f){super(am(e,r)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=r,this.metadata=new Headers(s??{}),this.details=a??[],this.cause=f}static from(e,r=d.Unknown){return e instanceof be?e:e instanceof Error?e.name=="AbortError"?new be(e.message,d.Canceled):new be(e.message,r,void 0,void 0,e):new be(String(e),r,void 0,void 0,e)}findDetails(e){const r="typeName"in e?{findMessage:a=>a===e.typeName?e:void 0}:e,s=[];for(const a of this.details){if(a instanceof $){r.findMessage(a.getType().typeName)&&s.push(a);continue}const f=r.findMessage(a.type);if(f)try{s.push(f.fromBinary(a.value))}catch{}}return s}}function am(o,e){return o.length?`[${Dc(e)}] ${o}`:`[${Dc(e)}]`}function lm(o,e,r){try{const s=Pa.dec(o);return e?e.fromBinary(s,r):s}catch(s){throw be.from(s,d.DataLoss)}}function um(o,e){const r={};for(const[s,a]of Object.entries(o.methods)){const f=e(Object.assign(Object.assign({},a),{localName:s,service:o}));f!=null&&(r[s]=f)}return r}function Rc(o){let e,r=new Uint8Array(0);function s(a){const f=new Uint8Array(r.length+a.length);f.set(r),f.set(a,r.length),r=f}return new ReadableStream({start(){e=o.getReader()},async pull(a){let f;for(;;){if(f===void 0&&r.byteLength>=5){let p=0;for(let y=1;y<5;y++)p=(p<<8)+r[y];f={flags:r[0],length:p}}if(f!==void 0&&r.byteLength>=f.length+5)break;const g=await e.read();if(g.done)break;s(g.value)}if(f===void 0){if(r.byteLength==0){a.close();return}a.error(new be("premature end of stream",d.DataLoss));return}const h=r.subarray(5,5+f.length);r=r.subarray(5+f.length),a.enqueue({flags:f.flags,data:h})}})}function _c(o,e){const r=new Uint8Array(e.length+5);r.set(e,5);const s=new DataView(r.buffer,r.byteOffset,r.byteLength);return s.setUint8(0,o),s.setUint32(1,e.length),r}var cm=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],r;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(f){r[f]=o[f]&&function(h){return new Promise(function(g,p){h=o[f](h),a(g,p,h.done,h.value)})}}function a(f,h,g,p){Promise.resolve(p).then(function(y){f({value:y,done:g})},h)}},Oi=globalThis&&globalThis.__await||function(o){return this instanceof Oi?(this.v=o,this):new Oi(o)},fm=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(o,e||[]),a,f=[];return a={},h("next"),h("throw"),h("return"),a[Symbol.asyncIterator]=function(){return this},a;function h(T){s[T]&&(a[T]=function(x){return new Promise(function(U,J){f.push([T,x,U,J])>1||g(T,x)})})}function g(T,x){try{p(s[T](x))}catch(U){D(f[0][3],U)}}function p(T){T.value instanceof Oi?Promise.resolve(T.value.v).then(y,A):D(f[0][2],T)}function y(T){g("next",T)}function A(T){g("throw",T)}function D(T,x){T(x),f.shift(),f.length&&g(f[0][0],f[0][1])}},hm=globalThis&&globalThis.__asyncDelegator||function(o){var e,r;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,f){e[a]=o[a]?function(h){return(r=!r)?{value:Oi(o[a](h)),done:!1}:f?f(h):h}:f}};function dm(o){return fm(this,arguments,function*(){yield Oi(yield*hm(cm(o)))})}var Lc=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],r;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(f){r[f]=o[f]&&function(h){return new Promise(function(g,p){h=o[f](h),a(g,p,h.done,h.value)})}}function a(f,h,g,p){Promise.resolve(p).then(function(y){f({value:y,done:g})},h)}},$r=globalThis&&globalThis.__await||function(o){return this instanceof $r?(this.v=o,this):new $r(o)},gm=globalThis&&globalThis.__asyncDelegator||function(o){var e,r;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,f){e[a]=o[a]?function(h){return(r=!r)?{value:$r(o[a](h)),done:!1}:f?f(h):h}:f}},pm=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(o,e||[]),a,f=[];return a={},h("next"),h("throw"),h("return"),a[Symbol.asyncIterator]=function(){return this},a;function h(T){s[T]&&(a[T]=function(x){return new Promise(function(U,J){f.push([T,x,U,J])>1||g(T,x)})})}function g(T,x){try{p(s[T](x))}catch(U){D(f[0][3],U)}}function p(T){T.value instanceof $r?Promise.resolve(T.value.v).then(y,A):D(f[0][2],T)}function y(T){g("next",T)}function A(T){g("throw",T)}function D(T,x){T(x),f.shift(),f.length&&g(f[0][0],f[0][1])}};function mm(o,e){return um(o,r=>{switch(r.kind){case Xe.Unary:return ym(e,o,r);case Xe.ServerStreaming:return vm(e,o,r);case Xe.ClientStreaming:return wm(e,o,r);case Xe.BiDiStreaming:return Sm(e,o,r);default:return null}})}function ym(o,e,r){return async function(s,a){var f,h;const g=await o.unary(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,s,a==null?void 0:a.contextValues);return(f=a==null?void 0:a.onHeader)===null||f===void 0||f.call(a,g.header),(h=a==null?void 0:a.onTrailer)===null||h===void 0||h.call(a,g.trailer),g.message}}function vm(o,e,r){return function(s,a){return bc(o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,dm([s]),a==null?void 0:a.contextValues),a)}}function wm(o,e,r){return async function(s,a){var f,h,g,p,y,A;const D=await o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,s,a==null?void 0:a.contextValues);(y=a==null?void 0:a.onHeader)===null||y===void 0||y.call(a,D.header);let T;try{for(var x=!0,U=Lc(D.message),J;J=await U.next(),f=J.done,!f;x=!0)p=J.value,x=!1,T=p}catch(K){h={error:K}}finally{try{!x&&!f&&(g=U.return)&&await g.call(U)}finally{if(h)throw h.error}}if(!T)throw new be("protocol error: missing response message",d.Internal);return(A=a==null?void 0:a.onTrailer)===null||A===void 0||A.call(a,D.trailer),T}}function Sm(o,e,r){return function(s,a){return bc(o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,s,a==null?void 0:a.contextValues),a)}}function bc(o,e){const r=function(){var s,a;return pm(this,arguments,function*(){const f=yield $r(o);(s=e==null?void 0:e.onHeader)===null||s===void 0||s.call(e,f.header),yield $r(yield*gm(Lc(f.message))),(a=e==null?void 0:e.onTrailer)===null||a===void 0||a.call(e,f.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>r.next()})}}function Tm(...o){const e=new AbortController,r=o.filter(a=>a!==void 0).concat(e.signal);for(const a of r){if(a.aborted){s.apply(a);break}a.addEventListener("abort",s)}function s(){e.signal.aborted||e.abort(Mc(this));for(const a of r)a.removeEventListener("abort",s)}return e}function km(o){const e=new AbortController,r=()=>{e.abort(new be("the operation timed out",d.DeadlineExceeded))};let s;return o!==void 0&&(o<=0?r():s=setTimeout(r,o)),{signal:e.signal,cleanup:()=>clearTimeout(s)}}function Mc(o){if(!o.aborted)return;if(o.reason!==void 0)return o.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Bc(){return{get(o){return o.id in this?this[o.id]:o.defaultValue},set(o,e){return this[o.id]=e,this},delete(o){return delete this[o.id],this}}}const Da=128;function $c(o){const e=new Headers,r=new TextDecoder().decode(o).split(`\r
`);for(const s of r){if(s==="")continue;const a=s.indexOf(":");if(a>0){const f=s.substring(0,a).trim(),h=s.substring(a+1).trim();e.append(f,h)}}return e}const Am="Content-Type",Im="Grpc-Timeout",Uc="Grpc-Status",zc="Grpc-Message",Em="Grpc-Status-Details-Bin",Cm="User-Agent",Nm="X-User-Agent",xm="X-Grpc-Web",Pm="application/grpc-web+proto",Om="application/grpc-web+json";class yn extends ${constructor(e){super(),this.code=0,this.message="",this.details=[],C.util.initPartial(e,this)}static fromBinary(e,r){return new yn().fromBinary(e,r)}static fromJson(e,r){return new yn().fromJson(e,r)}static fromJsonString(e,r){return new yn().fromJsonString(e,r)}static equals(e,r){return C.util.equals(yn,e,r)}}yn.runtime=C,yn.typeName="google.rpc.Status",yn.fields=C.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Yt,repeated:!0}]);const Dm="0";function Fc(o){var e;const r=o.get(Em);if(r!=null){const a=lm(r,yn);if(a.code==0)return;const f=new be(a.message,a.code,o);return f.details=a.details.map(h=>({type:h.typeUrl.substring(h.typeUrl.lastIndexOf("/")+1),value:h.value})),f}const s=o.get(Uc);if(s!=null){if(s===Dm)return;const a=parseInt(s,10);return a in d?new be(decodeURIComponent((e=o.get(zc))!==null&&e!==void 0?e:""),a,o):new be(`invalid grpc-status: ${s}`,d.Internal,o)}}function jc(o,e,r){const s=typeof e=="string"?e:e.typeName,a=typeof r=="string"?r:r.name;return o.toString().replace(/\/?$/,`/${s}/${a}`)}function Vc(o,e){return e instanceof $?e:new o(e)}function Rm(o,e){function r(s){return s.done===!0?s:{done:s.done,value:Vc(o,s.value)}}return{[Symbol.asyncIterator](){const s=e[Symbol.asyncIterator](),a={next:()=>s.next().then(r)};return s.throw!==void 0&&(a.throw=f=>s.throw(f).then(r)),s.return!==void 0&&(a.return=f=>s.return(f).then(r)),a}}}function _m(o){var e;const r=Object.assign({},o);return(e=r.ignoreUnknownFields)!==null&&e!==void 0||(r.ignoreUnknownFields=!0),r}function Jc(o,e,r,s){const a=e?Kc(o.I,s):Wc(o.I,r);return{parse:(e?Kc(o.O,s):Wc(o.O,r)).parse,serialize:a.serialize}}function Kc(o,e){return{parse(r){try{return o.fromBinary(r,e)}catch(s){const a=s instanceof Error?s.message:String(s);throw new be(`parse binary: ${a}`,d.InvalidArgument)}},serialize(r){try{return r.toBinary(e)}catch(s){const a=s instanceof Error?s.message:String(s);throw new be(`serialize binary: ${a}`,d.Internal)}}}}function Wc(o,e){var r,s;const a=(r=e==null?void 0:e.textEncoder)!==null&&r!==void 0?r:new TextEncoder,f=(s=e==null?void 0:e.textDecoder)!==null&&s!==void 0?s:new TextDecoder,h=_m(e);return{parse(g){try{const p=f.decode(g);return o.fromJsonString(p,h)}catch(p){throw be.from(p,d.InvalidArgument)}},serialize(g){try{const p=g.toJsonString(h);return a.encode(p)}catch(p){throw be.from(p,d.Internal)}}}}function Lm(o){const e=Hc(o.next,o.interceptors),[r,s,a]=qc(o),f=Object.assign(Object.assign({},o.req),{message:Vc(o.req.method.I,o.req.message),signal:r});return e(f).then(h=>(a(),h),s)}function bm(o){const e=Hc(o.next,o.interceptors),[r,s,a]=qc(o),f=Object.assign(Object.assign({},o.req),{message:Rm(o.req.method.I,o.req.message),signal:r});let h=!1;return r.addEventListener("abort",function(){var g,p;const y=o.req.message[Symbol.asyncIterator]();h||(g=y.throw)===null||g===void 0||g.call(y,this.reason).catch(()=>{}),(p=y.return)===null||p===void 0||p.call(y).catch(()=>{})}),e(f).then(g=>Object.assign(Object.assign({},g),{message:{[Symbol.asyncIterator](){const p=g.message[Symbol.asyncIterator]();return{next(){return p.next().then(y=>(y.done==!0&&(h=!0,a()),y),s)}}}}}),s)}function qc(o){const{signal:e,cleanup:r}=km(o.timeoutMs),s=Tm(o.signal,e);return[s.signal,function(f){const h=be.from(e.aborted?Mc(e):f);return s.abort(h),r(),Promise.reject(h)},function(){r(),s.abort()}]}function Hc(o,e){var r;return(r=e==null?void 0:e.concat().reverse().reduce((s,a)=>a(s),o))!==null&&r!==void 0?r:o}function Mm(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Gc(o,e){const r=Fc(o);if(r)throw e.forEach((s,a)=>{r.metadata.append(a,s)}),r}function Yc(o,e,r,s){const a=new Headers(r??{});return a.set(Am,o?Pm:Om),a.set(xm,"1"),a.set(Nm,"connect-es/1.2.0"),s&&a.set(Cm,"connect-es/1.2.0"),e!==void 0&&a.set(Im,`${e}m`),a}function Bm(o){switch(o){case 400:return d.Internal;case 401:return d.Unauthenticated;case 403:return d.PermissionDenied;case 404:return d.Unimplemented;case 429:return d.Unavailable;case 502:return d.Unavailable;case 503:return d.Unavailable;case 504:return d.Unavailable;default:return d.Unknown}}function Xc(o,e){var r;if(o>=200&&o<300){const s=Fc(e);if(s)throw s;return{foundStatus:e.has(Uc)}}throw new be(decodeURIComponent((r=e.get(zc))!==null&&r!==void 0?r:`HTTP ${o}`),Bm(o),e)}var ur=globalThis&&globalThis.__await||function(o){return this instanceof ur?(this.v=o,this):new ur(o)},$m=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(o,e||[]),a,f=[];return a={},h("next"),h("throw"),h("return"),a[Symbol.asyncIterator]=function(){return this},a;function h(T){s[T]&&(a[T]=function(x){return new Promise(function(U,J){f.push([T,x,U,J])>1||g(T,x)})})}function g(T,x){try{p(s[T](x))}catch(U){D(f[0][3],U)}}function p(T){T.value instanceof ur?Promise.resolve(T.value.v).then(y,A):D(f[0][2],T)}function y(T){g("next",T)}function A(T){g("throw",T)}function D(T,x){T(x),f.shift(),f.length&&g(f[0][0],f[0][1])}};function Um(o){var e;Mm();const r=(e=o.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(s,a,f,h,g,p,y){var A;const{serialize:D,parse:T}=Jc(a,r,o.jsonOptions,o.binaryOptions);return h=h===void 0?o.defaultTimeoutMs:h<=0?void 0:h,await Lm({interceptors:o.interceptors,signal:f,timeoutMs:h,req:{stream:!1,service:s,method:a,url:jc(o.baseUrl,s,a),init:{method:"POST",credentials:(A=o.credentials)!==null&&A!==void 0?A:"same-origin",redirect:"error",mode:"cors"},header:Yc(r,h,g,!1),contextValues:y??Bc(),message:p},next:async x=>{var U;const K=await((U=o.fetch)!==null&&U!==void 0?U:globalThis.fetch)(x.url,Object.assign(Object.assign({},x.init),{headers:x.header,signal:x.signal,body:_c(0,D(x.message))}));if(Xc(K.status,K.headers),!K.body)throw"missing response body";const ne=Rc(K.body).getReader();let pe,re;for(;;){const de=await ne.read();if(de.done)break;const{flags:me,data:ke}=de.value;if(me===Da){if(pe!==void 0)throw"extra trailer";pe=$c(ke);continue}if(re!==void 0)throw"extra message";re=T(ke)}if(pe===void 0)throw"missing trailer";if(Gc(pe,K.headers),re===void 0)throw"missing message";return{stream:!1,header:K.headers,message:re,trailer:pe}}})},async stream(s,a,f,h,g,p,y){var A;const{serialize:D,parse:T}=Jc(a,r,o.jsonOptions,o.binaryOptions);function x(J,K,ne,pe){return $m(this,arguments,function*(){const de=Rc(J).getReader();if(K){if(!(yield ur(de.read())).done)throw"extra data for trailers-only";return yield ur(void 0)}let me=!1;for(;;){const ke=yield ur(de.read());if(ke.done)break;const{flags:yr,data:vr}=ke.value;if((yr&Da)===Da){if(me)throw"extra trailer";me=!0;const Qi=$c(vr);Gc(Qi,pe),Qi.forEach((Tv,kv)=>ne.set(kv,Tv));continue}if(me)throw"extra message";yield yield ur(T(vr))}if(!me)throw"missing trailer"})}async function U(J){if(a.kind!=Xe.ServerStreaming)throw"The fetch API does not support streaming request bodies";const K=await J[Symbol.asyncIterator]().next();if(K.done==!0)throw"missing request message";return _c(0,D(K.value))}return h=h===void 0?o.defaultTimeoutMs:h<=0?void 0:h,bm({interceptors:o.interceptors,signal:f,timeoutMs:h,req:{stream:!0,service:s,method:a,url:jc(o.baseUrl,s,a),init:{method:"POST",credentials:(A=o.credentials)!==null&&A!==void 0?A:"same-origin",redirect:"error",mode:"cors"},header:Yc(r,h,g,!1),contextValues:y??Bc(),message:p},next:async J=>{var K;const pe=await((K=o.fetch)!==null&&K!==void 0?K:globalThis.fetch)(J.url,Object.assign(Object.assign({},J.init),{headers:J.header,signal:J.signal,body:await U(J.message)})),{foundStatus:re}=Xc(pe.status,pe.headers);if(!pe.body)throw"missing response body";const de=new Headers;return Object.assign(Object.assign({},J),{header:pe.headers,trailer:de,message:x(pe.body,re,de,pe.headers)})}})}}}const te=C.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),Ws=C.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),zm=C.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:It},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Ba}}]),vn=C.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:vf},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Qc,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:H},{no:6,name:"is_removed",kind:"scalar",T:8}]),Qc=C.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:qs},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Ra,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Ma}]),qs=C.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),Ra=C.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:Zc,oneof:"body"},{no:2,name:"add",kind:"message",T:ef,oneof:"body"},{no:3,name:"move",kind:"message",T:tf,oneof:"body"},{no:4,name:"remove",kind:"message",T:nf,oneof:"body"},{no:5,name:"edit",kind:"message",T:rf,oneof:"body"},{no:6,name:"select",kind:"message",T:Fm,oneof:"body"},{no:7,name:"style",kind:"message",T:sf,oneof:"body"},{no:8,name:"increase",kind:"message",T:of,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:af,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:lf,oneof:"body"}]),Zc=C.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:wn},{no:4,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Set"}),ef=C.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"prev_created_at",kind:"message",T:H},{no:3,name:"value",kind:"message",T:wn},{no:4,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Add"}),tf=C.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"prev_created_at",kind:"message",T:H},{no:3,name:"created_at",kind:"message",T:H},{no:4,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Move"}),nf=C.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Remove"}),rf=C.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:cr},{no:3,name:"to",kind:"message",T:cr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:H}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:H},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),Fm=C.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:cr},{no:3,name:"to",kind:"message",T:cr},{no:4,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Select"}),sf=C.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:cr},{no:3,name:"to",kind:"message",T:cr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:H},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:H}}],{localName:"Operation_Style"}),of=C.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"value",kind:"message",T:wn},{no:3,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Increase"}),af=C.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:Di},{no:3,name:"to",kind:"message",T:Di},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:H}},{no:5,name:"contents",kind:"message",T:yf,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:H}],{localName:"Operation_TreeEdit"}),lf=C.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:Di},{no:3,name:"to",kind:"message",T:Di},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:H},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:H}}],{localName:"Operation_TreeStyle"}),wn=C.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:H},{no:2,name:"moved_at",kind:"message",T:H},{no:3,name:"removed_at",kind:"message",T:H},{no:4,name:"type",kind:"enum",T:C.getEnumType(te)},{no:5,name:"value",kind:"scalar",T:12}]),It=C.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:uf,oneof:"body"},{no:2,name:"json_array",kind:"message",T:cf,oneof:"body"},{no:3,name:"primitive",kind:"message",T:ff,oneof:"body"},{no:5,name:"text",kind:"message",T:hf,oneof:"body"},{no:6,name:"counter",kind:"message",T:df,oneof:"body"},{no:7,name:"tree",kind:"message",T:gf,oneof:"body"}]),uf=C.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:pf,repeated:!0},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"moved_at",kind:"message",T:H},{no:4,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_JSONObject"}),cf=C.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:_a,repeated:!0},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"moved_at",kind:"message",T:H},{no:4,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_JSONArray"}),ff=C.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:C.getEnumType(te)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:H},{no:4,name:"moved_at",kind:"message",T:H},{no:5,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_Primitive"}),hf=C.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:mf,repeated:!0},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"moved_at",kind:"message",T:H},{no:4,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_Text"}),df=C.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:C.getEnumType(te)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:H},{no:4,name:"moved_at",kind:"message",T:H},{no:5,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_Counter"}),gf=C.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:ba,repeated:!0},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"moved_at",kind:"message",T:H},{no:4,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_Tree"}),pf=C.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:It}]),_a=C.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:_a},{no:2,name:"element",kind:"message",T:It}]),Hs=C.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:H},{no:3,name:"is_removed",kind:"scalar",T:8}]),mf=C.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:La},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:H},{no:4,name:"ins_prev_id",kind:"message",T:La},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Hs}}]),La=C.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:H},{no:2,name:"offset",kind:"scalar",T:5}]),ba=C.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:Ur},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:H},{no:5,name:"ins_prev_id",kind:"message",T:Ur},{no:6,name:"ins_next_id",kind:"message",T:Ur},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Hs}}]),yf=C.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:ba,repeated:!0}]),Ur=C.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:H},{no:2,name:"offset",kind:"scalar",T:5}]),Di=C.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:Ur},{no:2,name:"left_sibling_id",kind:"message",T:Ur}]);C.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Ke}]),C.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Ke},{no:9,name:"updated_at",kind:"message",T:Ke}]),C.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:dt},{no:2,name:"auth_webhook_url",kind:"message",T:dt},{no:3,name:"auth_webhook_methods",kind:"message",T:jm},{no:4,name:"client_deactivate_threshold",kind:"message",T:dt}]);const jm=C.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"});C.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Ke},{no:5,name:"accessed_at",kind:"message",T:Ke},{no:6,name:"updated_at",kind:"message",T:Ke}]);const Ma=C.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:C.getEnumType(Ri)},{no:2,name:"presence",kind:"message",T:Ba}]),Ri=C.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),Ba=C.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),vf=C.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),cr=C.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:H},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),H=C.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),Vm=C.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),Jm=C.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:C.getEnumType(Ws)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Vm}]),Km=C.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),Wm=C.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),qm=C.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Hm=C.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),Gm=C.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:vn}]),Ym=C.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:vn}]),Xm=C.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:vn},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),Qm=C.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:vn}]),Zm=C.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),ey=C.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:ty,oneof:"body"},{no:2,name:"event",kind:"message",T:Jm,oneof:"body"}]),ty=C.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),ny=C.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:vn}]),ry=C.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:vn}]),iy=C.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:vn},{no:4,name:"push_only",kind:"scalar",T:8}]),sy=C.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:vn}]),oy=C.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),ay=C.makeMessageType("yorkie.v1.BroadcastResponse",[]),ly={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Km,O:Wm,kind:Xe.Unary},deactivateClient:{name:"DeactivateClient",I:qm,O:Hm,kind:Xe.Unary},attachDocument:{name:"AttachDocument",I:Gm,O:Ym,kind:Xe.Unary},detachDocument:{name:"DetachDocument",I:Xm,O:Qm,kind:Xe.Unary},removeDocument:{name:"RemoveDocument",I:ny,O:ry,kind:Xe.Unary},pushPullChanges:{name:"PushPullChanges",I:iy,O:sy,kind:Xe.Unary},watchDocument:{name:"WatchDocument",I:Zm,O:ey,kind:Xe.ServerStreaming},broadcast:{name:"Broadcast",I:oy,O:ay,kind:Xe.Unary}}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Et=null;try{Et=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function X(o,e,r){this.low=o|0,this.high=e|0,this.unsigned=!!r}X.prototype.__isLong__,Object.defineProperty(X.prototype,"__isLong__",{value:!0});function We(o){return(o&&o.__isLong__)===!0}function wf(o){var e=Math.clz32(o&-o);return o?31-e:e}X.isLong=We;var Sf={},Tf={};function fr(o,e){var r,s,a;return e?(o>>>=0,(a=0<=o&&o<256)&&(s=Tf[o],s)?s:(r=ae(o,0,!0),a&&(Tf[o]=r),r)):(o|=0,(a=-128<=o&&o<128)&&(s=Sf[o],s)?s:(r=ae(o,o<0?-1:0,!1),a&&(Sf[o]=r),r))}X.fromInt=fr;function Ct(o,e){if(isNaN(o))return e?Sn:Mt;if(e){if(o<0)return Sn;if(o>=Af)return xf}else{if(o<=-If)return it;if(o+1>=If)return Nf}return o<0?Ct(-o,e).neg():ae(o%zr|0,o/zr|0,e)}X.fromNumber=Ct;function ae(o,e,r){return new X(o,e,r)}X.fromBits=ae;var Gs=Math.pow;function $a(o,e,r){if(o.length===0)throw Error("empty string");if(typeof e=="number"?(r=e,e=!1):e=!!e,o==="NaN"||o==="Infinity"||o==="+Infinity"||o==="-Infinity")return e?Sn:Mt;if(r=r||10,r<2||36<r)throw RangeError("radix");var s;if((s=o.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return $a(o.substring(1),e,r).neg();for(var a=Ct(Gs(r,8)),f=Mt,h=0;h<o.length;h+=8){var g=Math.min(8,o.length-h),p=parseInt(o.substring(h,h+g),r);if(g<8){var y=Ct(Gs(r,g));f=f.mul(y).add(Ct(p))}else f=f.mul(a),f=f.add(Ct(p))}return f.unsigned=e,f}X.fromString=$a;function bt(o,e){return typeof o=="number"?Ct(o,e):typeof o=="string"?$a(o,e):ae(o.low,o.high,typeof e=="boolean"?e:o.unsigned)}X.fromValue=bt;var kf=65536,uy=1<<24,zr=kf*kf,Af=zr*zr,If=Af/2,Ef=fr(uy),Mt=fr(0);X.ZERO=Mt;var Sn=fr(0,!0);X.UZERO=Sn;var Fr=fr(1);X.ONE=Fr;var Cf=fr(1,!0);X.UONE=Cf;var Ua=fr(-1);X.NEG_ONE=Ua;var Nf=ae(-1,2147483647,!1);X.MAX_VALUE=Nf;var xf=ae(-1,-1,!0);X.MAX_UNSIGNED_VALUE=xf;var it=ae(0,-2147483648,!1);X.MIN_VALUE=it;var b=X.prototype;b.toInt=function(){return this.unsigned?this.low>>>0:this.low},b.toNumber=function(){return this.unsigned?(this.high>>>0)*zr+(this.low>>>0):this.high*zr+(this.low>>>0)},b.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(it)){var r=Ct(e),s=this.div(r),a=s.mul(r).sub(this);return s.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var f=Ct(Gs(e,6),this.unsigned),h=this,g="";;){var p=h.div(f),y=h.sub(p.mul(f)).toInt()>>>0,A=y.toString(e);if(h=p,h.isZero())return A+g;for(;A.length<6;)A="0"+A;g=""+A+g}},b.getHighBits=function(){return this.high},b.getHighBitsUnsigned=function(){return this.high>>>0},b.getLowBits=function(){return this.low},b.getLowBitsUnsigned=function(){return this.low>>>0},b.getNumBitsAbs=function(){if(this.isNegative())return this.eq(it)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&!(e&1<<r);r--);return this.high!=0?r+33:r+1},b.isZero=function(){return this.high===0&&this.low===0},b.eqz=b.isZero,b.isNegative=function(){return!this.unsigned&&this.high<0},b.isPositive=function(){return this.unsigned||this.high>=0},b.isOdd=function(){return(this.low&1)===1},b.isEven=function(){return(this.low&1)===0},b.equals=function(e){return We(e)||(e=bt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},b.eq=b.equals,b.notEquals=function(e){return!this.eq(e)},b.neq=b.notEquals,b.ne=b.notEquals,b.lessThan=function(e){return this.comp(e)<0},b.lt=b.lessThan,b.lessThanOrEqual=function(e){return this.comp(e)<=0},b.lte=b.lessThanOrEqual,b.le=b.lessThanOrEqual,b.greaterThan=function(e){return this.comp(e)>0},b.gt=b.greaterThan,b.greaterThanOrEqual=function(e){return this.comp(e)>=0},b.gte=b.greaterThanOrEqual,b.ge=b.greaterThanOrEqual,b.compare=function(e){if(We(e)||(e=bt(e)),this.eq(e))return 0;var r=this.isNegative(),s=e.isNegative();return r&&!s?-1:!r&&s?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},b.comp=b.compare,b.negate=function(){return!this.unsigned&&this.eq(it)?it:this.not().add(Fr)},b.neg=b.negate,b.add=function(e){We(e)||(e=bt(e));var r=this.high>>>16,s=this.high&65535,a=this.low>>>16,f=this.low&65535,h=e.high>>>16,g=e.high&65535,p=e.low>>>16,y=e.low&65535,A=0,D=0,T=0,x=0;return x+=f+y,T+=x>>>16,x&=65535,T+=a+p,D+=T>>>16,T&=65535,D+=s+g,A+=D>>>16,D&=65535,A+=r+h,A&=65535,ae(T<<16|x,A<<16|D,this.unsigned)},b.subtract=function(e){return We(e)||(e=bt(e)),this.add(e.neg())},b.sub=b.subtract,b.multiply=function(e){if(this.isZero())return this;if(We(e)||(e=bt(e)),Et){var r=Et.mul(this.low,this.high,e.low,e.high);return ae(r,Et.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Sn:Mt;if(this.eq(it))return e.isOdd()?it:Mt;if(e.eq(it))return this.isOdd()?it:Mt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Ef)&&e.lt(Ef))return Ct(this.toNumber()*e.toNumber(),this.unsigned);var s=this.high>>>16,a=this.high&65535,f=this.low>>>16,h=this.low&65535,g=e.high>>>16,p=e.high&65535,y=e.low>>>16,A=e.low&65535,D=0,T=0,x=0,U=0;return U+=h*A,x+=U>>>16,U&=65535,x+=f*A,T+=x>>>16,x&=65535,x+=h*y,T+=x>>>16,x&=65535,T+=a*A,D+=T>>>16,T&=65535,T+=f*y,D+=T>>>16,T&=65535,T+=h*p,D+=T>>>16,T&=65535,D+=s*A+a*y+f*p+h*g,D&=65535,ae(x<<16|U,D<<16|T,this.unsigned)},b.mul=b.multiply,b.divide=function(e){if(We(e)||(e=bt(e)),e.isZero())throw Error("division by zero");if(Et){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?Et.div_u:Et.div_s)(this.low,this.high,e.low,e.high);return ae(r,Et.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Sn:Mt;var s,a,f;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Sn;if(e.gt(this.shru(1)))return Cf;f=Sn}else{if(this.eq(it)){if(e.eq(Fr)||e.eq(Ua))return it;if(e.eq(it))return Fr;var h=this.shr(1);return s=h.div(e).shl(1),s.eq(Mt)?e.isNegative()?Fr:Ua:(a=this.sub(e.mul(s)),f=s.add(a.div(e)),f)}else if(e.eq(it))return this.unsigned?Sn:Mt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();f=Mt}for(a=this;a.gte(e);){s=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var g=Math.ceil(Math.log(s)/Math.LN2),p=g<=48?1:Gs(2,g-48),y=Ct(s),A=y.mul(e);A.isNegative()||A.gt(a);)s-=p,y=Ct(s,this.unsigned),A=y.mul(e);y.isZero()&&(y=Fr),f=f.add(y),a=a.sub(A)}return f},b.div=b.divide,b.modulo=function(e){if(We(e)||(e=bt(e)),Et){var r=(this.unsigned?Et.rem_u:Et.rem_s)(this.low,this.high,e.low,e.high);return ae(r,Et.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},b.mod=b.modulo,b.rem=b.modulo,b.not=function(){return ae(~this.low,~this.high,this.unsigned)},b.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},b.clz=b.countLeadingZeros,b.countTrailingZeros=function(){return this.low?wf(this.low):wf(this.high)+32},b.ctz=b.countTrailingZeros,b.and=function(e){return We(e)||(e=bt(e)),ae(this.low&e.low,this.high&e.high,this.unsigned)},b.or=function(e){return We(e)||(e=bt(e)),ae(this.low|e.low,this.high|e.high,this.unsigned)},b.xor=function(e){return We(e)||(e=bt(e)),ae(this.low^e.low,this.high^e.high,this.unsigned)},b.shiftLeft=function(e){return We(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ae(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ae(0,this.low<<e-32,this.unsigned)},b.shl=b.shiftLeft,b.shiftRight=function(e){return We(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ae(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ae(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},b.shr=b.shiftRight,b.shiftRightUnsigned=function(e){return We(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ae(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?ae(this.high,0,this.unsigned):ae(this.high>>>e-32,0,this.unsigned)},b.shru=b.shiftRightUnsigned,b.shr_u=b.shiftRightUnsigned,b.rotateLeft=function(e){var r;return We(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ae(this.high,this.low,this.unsigned):e<32?(r=32-e,ae(this.low<<e|this.high>>>r,this.high<<e|this.low>>>r,this.unsigned)):(e-=32,r=32-e,ae(this.high<<e|this.low>>>r,this.low<<e|this.high>>>r,this.unsigned))},b.rotl=b.rotateLeft,b.rotateRight=function(e){var r;return We(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ae(this.high,this.low,this.unsigned):e<32?(r=32-e,ae(this.high<<r|this.low>>>e,this.low<<r|this.high>>>e,this.unsigned)):(e-=32,r=32-e,ae(this.low<<r|this.high>>>e,this.high<<r|this.low>>>e,this.unsigned))},b.rotr=b.rotateRight,b.toSigned=function(){return this.unsigned?ae(this.low,this.high,!1):this},b.toUnsigned=function(){return this.unsigned?this:ae(this.low,this.high,!0)},b.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},b.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},b.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},X.fromBytes=function(e,r,s){return s?X.fromBytesLE(e,r):X.fromBytesBE(e,r)},X.fromBytesLE=function(e,r){return new X(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},X.fromBytesBE=function(e,r){return new X(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)};var se=(o=>(o.Ok="ok",o.ClientNotActive="client-not-active",o.Unimplemented="unimplemented",o.Unsupported="unsupported",o.DocumentNotAttached="document-not-attached",o.DocumentNotDetached="document-not-detached",o.DocumentRemoved="document-removed",o.InvalidObjectKey="invalid-object-key",o.InvalidArgument="invalid-argument",o))(se||{});class le extends Error{constructor(e,r){super(r),u(this,"name","YorkieError"),u(this,"stack"),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function Bt(o){if(o instanceof Map){const e=Array.from(o);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(o))}const Pf=o=>o?Object.entries(o).length===0:!0,jr=o=>{const e={};for(const[r,s]of Object.entries(o))e[r]=JSON.stringify(s);return e},Vr=o=>{const e={};for(const[r,s]of Object.entries(o))e[r]=JSON.parse(s);return e};var Mn=(o=>(o.Put="put",o.Clear="clear",o))(Mn||{});class za{constructor(e,r){u(this,"context"),u(this,"presence"),this.context=e,this.presence=r}set(e,r){for(const s of Object.keys(e))this.presence[s]=e[s];this.context.setPresenceChange({type:"put",presence:Bt(this.presence)}),this.context.setReversePresence(e,r)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Ys="000000000000000000000000",cy="FFFFFFFFFFFFFFFFFFFFFFFF";class Qe{constructor(e,r,s){u(this,"lamport"),u(this,"delimiter"),u(this,"actorID"),this.lamport=e,this.delimiter=r,this.actorID=s}static of(e,r,s){return new Qe(e,r,s)}static fromStruct(e){return Qe.of(X.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Qe(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const r=this.actorID.localeCompare(e.actorID);return r!==0?r:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Fa=0,fy=4294967295,hy=X.MAX_VALUE,$t=new Qe(X.fromNumber(0),Fa,Ys);new Qe(X.fromNumber(1),Fa+1,Ys);const _i=new Qe(hy,fy,cy);var gt=(o=>(o[o.Trivial=0]="Trivial",o[o.Debug=1]="Debug",o[o.Info=2]="Info",o[o.Warn=3]="Warn",o[o.Error=4]="Error",o[o.Fatal=5]="Fatal",o))(gt||{});let hr=2;function dy(o){hr=o}const _={trivial:(...o)=>{hr>0||typeof console<"u"&&console.log("YORKIE T:",...o)},debug:(...o)=>{hr>1||typeof console<"u"&&console.log("YORKIE D:",...o)},info:(...o)=>{hr>2||typeof console<"u"&&console.log("YORKIE I:",...o)},warn:(...o)=>{hr>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...o):console.log("YORKIE W:",...o))},error:(...o)=>{hr>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...o):console.log("YORKIE E:",...o))},fatal:(o,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${o}`)},isEnabled:o=>hr<=o};function on(o){return o.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Li{constructor(e){u(this,"createdAt"),u(this,"movedAt"),u(this,"removedAt"),this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Bn extends Li{constructor(e){super(e)}}class ja{constructor(e,r){u(this,"strKey"),u(this,"value"),this.strKey=e,this.value=r}static of(e,r){return new ja(e,r)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class bi{constructor(){u(this,"nodeMapByKey"),u(this,"nodeMapByCreatedAt"),this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new bi}set(e,r,s){let a;const f=this.nodeMapByKey.get(e);f!=null&&!f.isRemoved()&&f.remove(s)&&(a=f.getValue());const h=ja.of(e,r);return this.nodeMapByCreatedAt.set(r.getCreatedAt().toIDString(),h),(f==null||s.after(f.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,h),r.setMovedAt(s)),a}delete(e,r){this.nodeMapByCreatedAt.has(e.toIDString())||_.fatal(`fail to find ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(e.toIDString());return s.remove(r),s.getValue()}subPathOf(e){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(r)return r.getStrKey()}purge(e){const r=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!r){_.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const s=this.nodeMapByKey.get(r.getStrKey());r===s&&this.nodeMapByKey.delete(s.getStrKey()),this.nodeMapByCreatedAt.delete(r.getValue().getCreatedAt().toIDString())}deleteByKey(e,r){const s=this.nodeMapByKey.get(e);if(s!=null&&s.remove(r))return s.getValue()}has(e){const r=this.nodeMapByKey.get(e);return r==null?!1:!r.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const r=this.nodeMapByKey.get(e);if(!(!r||r.isRemoved()))return r}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class st extends Bn{constructor(e,r){super(e),u(this,"memberNodes"),this.memberNodes=r}static create(e,r){if(!r)return new st(e,bi.create());const s=bi.create();for(const[a,f]of Object.entries(r))s.set(a,f.deepcopy(),f.getCreatedAt());return new st(e,s)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,r,s){return this.memberNodes.set(e,r,s)}delete(e,r){return this.memberNodes.delete(e,r)}deleteByKey(e,r){return this.memberNodes.deleteByKey(e,r)}get(e){const r=this.memberNodes.get(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.memberNodes.getByID(e);return r==null?void 0:r.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[r,s]of this)e.push(`"${on(r)}":${s.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[r,s]of this){const{createdAt:a,value:f,type:h}=s.toJSForTest();e[r]={key:r,createdAt:a,value:f,type:h}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[r]of this)e.push(r);return e}toSortedJSON(){var e;const r=Array();for(const[a]of this)r.push(a);const s=[];for(const a of r.sort()){const f=(e=this.memberNodes.get(a))==null?void 0:e.getValue();s.push(`"${on(a)}":${f.toSortedJSON()}`)}return`{${s.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=st.create(this.getCreatedAt());for(const r of this.memberNodes)e.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const r of this.memberNodes){const s=r.getValue();if(e(s,this))return;s instanceof Bn&&s.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const r of this.memberNodes)e.has(r.getStrKey())||(e.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var ge=(o=>(o.Local="local",o.Remote="remote",o.UndoRedo="undoredo",o))(ge||{});class Ut{constructor(e,r){u(this,"parentCreatedAt"),u(this,"executedAt"),this.parentCreatedAt=e,this.executedAt=r}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Of{constructor(e){u(this,"value"),u(this,"left"),u(this,"right"),u(this,"parent"),u(this,"weight"),this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Mi{constructor(e){u(this,"root"),this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let r=this.root;for(;;)if(r.hasLeft()&&e<=r.getLeftWeight())r=r.getLeft();else if(r.hasRight()&&r.getLeftWeight()+r.getLength()<e)e-=r.getLeftWeight()+r.getLength(),r=r.getRight();else{e-=r.getLeftWeight();break}return e>r.getLength()&&_.fatal(`out of index range: pos: ${e} > node.length: ${r.getLength()}`),[r,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let r=0,s=e,a;for(;s;)(!a||a===s.getRight())&&(r+=s.getLength()+(s.hasLeft()?s.getLeftWeight():0)),a=s,s=s.getParent();return r-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,r){return e?(this.splayNode(e),this.root=r,r.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(r),r.setLeft(e),e.setParent(r),e.setRight(),this.updateWeight(e),this.updateWeight(r),r):(this.root=r,r)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const r=new Mi(e.getLeft());r.root&&r.root.setParent();const s=new Mi(e.getRight());if(s.root&&s.root.setParent(),r.root){const a=r.getRightmost();r.splayNode(a),r.root.setRight(s.root),s.root&&s.root.setParent(r.root),this.root=r.root}else this.root=s.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,r){if(!r){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(r),r.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const r=[];this.traversePostorder(e.getRight(),r);for(const s of r)s.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(r=>`[${r.getWeight()},${r.getLength()}]${r.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const r of e)if(r.getWeight()!=r.getLength()+r.getLeftWeight()+r.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,r){e&&(this.traverseInorder(e.getLeft(),r),r.push(e),this.traverseInorder(e.getRight(),r))}traversePostorder(e,r){e&&(this.traversePostorder(e.getLeft(),r),this.traversePostorder(e.getRight(),r),r.push(e))}rotateLeft(e){const r=e.getParent();r.hasParent()?r===r.getParent().getLeft()?r.getParent().setLeft(e):r.getParent().setRight(e):this.root=e,e.setParent(r.getParent()),r.setRight(e.getLeft()),r.hasRight()&&r.getRight().setParent(r),e.setLeft(r),e.getLeft().setParent(e),this.updateWeight(r),this.updateWeight(e)}rotateRight(e){const r=e.getParent();r.hasParent()?r===r.getParent().getLeft()?r.getParent().setLeft(e):r.getParent().setRight(e):this.root=e,e.setParent(r.getParent()),r.setLeft(e.getRight()),r.hasLeft()&&r.getLeft().setParent(r),e.setRight(r),e.getRight().setParent(e),this.updateWeight(r),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Me=(o=>(o[o.Null=0]="Null",o[o.Boolean=1]="Boolean",o[o.Integer=2]="Integer",o[o.Long=3]="Long",o[o.Double=4]="Double",o[o.String=5]="String",o[o.Bytes=6]="Bytes",o[o.Date=7]="Date",o))(Me||{});class Te extends Li{constructor(e,r){super(r),u(this,"valueType"),u(this,"value"),this.valueType=Te.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,r){return new Te(e,r)}static valueFromBytes(e,r){switch(e){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const s=new DataView(r.buffer);return r.forEach(function(a,f){s.setUint8(f,a)}),s.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return X.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(X.fromBytesLE(Array.from(r),!0).toNumber());default:throw new le(se.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${on(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=Te.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof X)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return Te.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const e=this.value,r=X.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new le(se.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class Xs extends Of{constructor(e){super(e),u(this,"prev"),u(this,"next"),this.value=e}static createAfter(e,r){const s=new Xs(r),a=e.next;return e.next=s,s.prev=e,s.next=a,a&&(a.prev=s),s}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Bi{constructor(){u(this,"dummyHead"),u(this,"last"),u(this,"nodeMapByIndex"),u(this,"nodeMapByCreatedAt");const e=Te.of(0,$t);e.setRemovedAt($t),this.dummyHead=new Xs(e),this.last=this.dummyHead,this.nodeMapByIndex=new Mi,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Bi}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,r){let s=this.nodeMapByCreatedAt.get(e.toIDString());for(s||_.fatal(`cant find the given node: ${e.toIDString()}`);s.getNext()&&s.getNext().getPositionedAt().after(r);)s=s.getNext();return s}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,r,s=r.getCreatedAt()){const a=this.findNextBeforeExecutedAt(e,s),f=Xs.createAfter(a,r);a===this.last&&(this.last=f),this.nodeMapByIndex.insertAfter(a,f),this.nodeMapByCreatedAt.set(f.getCreatedAt().toIDString(),f)}moveAfter(e,r,s){const a=this.nodeMapByCreatedAt.get(e.toIDString());a||_.fatal(`cant find the given node: ${e.toIDString()}`);const f=this.nodeMapByCreatedAt.get(r.toIDString());f||_.fatal(`cant find the given node: ${r.toIDString()}`),a!==f&&(!f.getValue().getMovedAt()||s.after(f.getValue().getMovedAt()))&&(this.release(f),this.insertAfter(a.getCreatedAt(),f.getValue(),s),f.getValue().setMovedAt(s))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(r)return String(this.nodeMapByIndex.indexOf(r))}purge(e){const r=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());r||_.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(r)}getByIndex(e){if(e>=this.length)return;const[r,s]=this.nodeMapByIndex.find(e);let a=r;if(e===0&&r===this.dummyHead||s>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(e){let r=this.nodeMapByCreatedAt.get(e.toIDString());do r=r.getPrev();while(this.dummyHead!==r&&r.isRemoved());return r.getValue().getCreatedAt()}delete(e,r){const s=this.nodeMapByCreatedAt.get(e.toIDString()),a=s.isRemoved();return s.remove(r)&&!a&&this.nodeMapByIndex.splayNode(s),s.getValue()}deleteByIndex(e,r){const s=this.getByIndex(e);if(s)return s.remove(r)&&this.nodeMapByIndex.splayNode(s),s.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const r of this){const s=`${r.getCreatedAt().toIDString()}:${r.getValue().toJSON()}`;r.isRemoved()?e.push(`{${s}}`):e.push(`[${s}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class pt extends Bn{constructor(e,r){super(e),u(this,"elements"),this.elements=r}static create(e,r){if(!r)return new pt(e,Bi.create());const s=Bi.create();for(const a of r)s.insertAfter(s.getLastCreatedAt(),a.deepcopy());return new pt(e,s)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,r){this.elements.insertAfter(e,r)}moveAfter(e,r,s){this.elements.moveAfter(e,r,s)}get(e){const r=this.elements.getByIndex(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.elements.getByID(e);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,r){return this.elements.delete(e,r)}deleteByIndex(e,r){return this.elements.deleteByIndex(e,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const r of this.elements){const s=r.getValue();if(e(s,this))return;s instanceof Bn&&s.getDescendants(e)}}toJSON(){const e=[];for(const r of this)e.push(r.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let r=0;r<this.length;r++){const{createdAt:s,value:a,type:f}=this.get(r).toJSForTest();e[r]={key:String(r),createdAt:s,value:a,type:f}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=pt.create(this.getCreatedAt());for(const r of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),r.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class $n extends Ut{constructor(e,r,s){super(e,s),u(this,"createdAt"),this.createdAt=r}static create(e,r,s){return new $n(e,r,s)}execute(e,r){var s;const a=e.findByCreatedAt(this.getParentCreatedAt());if(a||_.fatal(`fail to find ${this.getParentCreatedAt()}`),a instanceof Bn||_.fatal(`only object and array can execute remove: ${a}`),r===ge.UndoRedo){let y=a.getByID(this.createdAt);for(;y;){if(y.getRemovedAt())return;y=(s=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:s.parent}}const f=a.subPathOf(this.createdAt),h=this.toReverseOperation(a),g=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(g),{opInfos:a instanceof pt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(f)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:f}],reverseOp:h}}toReverseOperation(e){if(e instanceof st){const r=e.subPathOf(this.createdAt);if(r!==void 0){const s=e.get(r);if(s!==void 0)return dr.create(r,s.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class dr extends Ut{constructor(e,r,s,a){super(s,a),u(this,"key"),u(this,"value"),this.key=e,this.value=r}static create(e,r,s,a){return new dr(e,r,s,a)}execute(e,r){var s;const a=e.findByCreatedAt(this.getParentCreatedAt());if(a||_.fatal(`fail to find ${this.getParentCreatedAt()}`),a instanceof st||_.fatal("fail to execute, only object can execute set"),r===ge.UndoRedo){let y=a;for(;y;){if(y.getRemovedAt())return;y=(s=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:s.parent}}const f=a.get(this.key),h=this.toReverseOperation(f),g=this.value.deepcopy(),p=a.set(this.key,g,this.getExecutedAt());return r===ge.UndoRedo&&e.findByCreatedAt(g.getCreatedAt())&&e.deregisterElement(g),e.registerElement(g,a),p&&e.registerRemovedElement(p),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:h}}toReverseOperation(e){let r=$n.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(r=dr.create(this.key,e.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class $i extends Ut{constructor(e,r,s,a){super(e,a),u(this,"prevCreatedAt"),u(this,"value"),this.prevCreatedAt=r,this.value=s}static create(e,r,s,a){return new $i(e,r,s,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof pt||_.fatal("fail to execute, only array can execute add");const s=r,a=this.value.deepcopy();return s.insertAfter(this.prevCreatedAt,a),e.registerElement(a,s),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(s.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Un extends Ut{constructor(e,r,s,a){super(e,a),u(this,"prevCreatedAt"),u(this,"createdAt"),this.prevCreatedAt=r,this.createdAt=s}static create(e,r,s,a){return new Un(e,r,s,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof pt||_.fatal("fail to execute, only array can execute move");const s=r,a=Number(s.subPathOf(this.createdAt));s.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const f=Number(s.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:f,previousIndex:a}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class gr{constructor(e,r,s,a){u(this,"key"),u(this,"value"),u(this,"updatedAt"),u(this,"_isRemoved"),this.key=e,this.value=r,this.updatedAt=s,this._isRemoved=a}static of(e,r,s,a){return new gr(e,r,s,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Tn{constructor(){u(this,"nodeMapByKey"),u(this,"numberOfRemovedElement"),this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Tn}getNodeMapByKey(){return this.nodeMapByKey}set(e,r,s){const a=this.nodeMapByKey.get(e);if(a&&a.isRemoved()&&s.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||s.after(a.getUpdatedAt())){const f=gr.of(e,r,s,!1);return this.nodeMapByKey.set(e,f),a!==void 0&&a.isRemoved()?[a,f]:[void 0,f]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(e,r,s,a){const f=gr.of(e,r,s,a);this.nodeMapByKey.set(e,f),a&&this.numberOfRemovedElement++}remove(e,r){const s=this.nodeMapByKey.get(e),a=[];if(s===void 0||r.after(s.getUpdatedAt())){if(s===void 0){this.numberOfRemovedElement+=1;const g=gr.of(e,"",r,!0);return this.nodeMapByKey.set(e,g),a.push(g),a}const f=s.isRemoved();f||(this.numberOfRemovedElement+=1),f&&a.push(s);const h=gr.of(e,s.getValue(),r,!0);return this.nodeMapByKey.set(e,h),a.push(h),a}return a}has(e){if(this.nodeMapByKey.has(e)){const r=this.nodeMapByKey.get(e);return r!==void 0&&!r.isRemoved()}return!1}get(e){if(this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Tn;for(const[,r]of this.nodeMapByKey)e.setInternal(r.getKey(),r.getValue(),r.getUpdatedAt(),r.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[r,s]of this.nodeMapByKey)s.isRemoved()||e.push(`"${on(r)}":"${on(s.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[r,s]of this.nodeMapByKey)s.isRemoved()||(e[r]=s.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const r=this.nodeMapByKey.get(e.getKey());r==null||r.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class Ui{constructor(e){u(this,"attributes"),u(this,"content"),this.attributes=Tn.create(),this.content=e}static create(e){return new Ui(e)}get length(){return this.content.length}substring(e,r){const s=new Ui(this.content.substring(e,r));return s.attributes=this.attributes.deepcopy(),s}setAttr(e,r,s){return this.attributes.set(e,r,s)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=on(this.content),r=this.attributes.toObject(),s=[];for(const[a,f]of Object.entries(r)){const h=JSON.parse(f),g=typeof h=="string"?`"${on(a)}":"${on(h)}"`:`"${on(a)}":${String(h)}`;s.push(g)}return s.sort(),s.length===0?`{"val":"${e}"}`:`{"attrs":{${s.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof gr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const r of this.attributes)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}class Nt extends Li{constructor(e,r){super(r),u(this,"rgaTreeSplit"),this.rgaTreeSplit=e}static create(e,r){return new Nt(e,r)}edit(e,r,s,a,f){const h=r?Ui.create(r):void 0;if(h&&a)for(const[T,x]of Object.entries(a))h.setAttr(T,x,s);const[g,p,y,A]=this.rgaTreeSplit.edit(e,s,h,f),D=A.map(T=>({...T,value:T.value?{attributes:Vr(T.value.getAttributes()),content:T.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[p,D,y,[g,g]]}setStyle(e,r,s,a){const[,f]=this.rgaTreeSplit.findNodeWithSplit(e[1],s),[,h]=this.rgaTreeSplit.findNodeWithSplit(e[0],s),g=[],p=this.rgaTreeSplit.findBetween(h,f),y=new Map,A=[];for(const T of p){const x=T.getCreatedAt().getActorID(),U=a!=null&&a.size?a.has(x)?a.get(x):$t:_i;if(T.canStyle(s,U)){const J=y.get(x),K=T.getCreatedAt();(!J||K.after(J))&&y.set(x,K),A.push(T)}}const D=[];for(const T of A){if(T.isRemoved())continue;const[x,U]=this.rgaTreeSplit.findIndexesFromRange(T.createPosRange());g.push({type:"style",actor:s.getActorID(),from:x,to:U,value:{attributes:Vr(r)}});for(const[J,K]of Object.entries(r)){const[ne]=T.getValue().setAttr(J,K,s);ne!==void 0&&D.push({parent:T.getValue(),child:ne})}}return[y,D,g]}indexRangeToPosRange(e,r){const s=this.rgaTreeSplit.indexToPos(e);return e===r?[s,s]:[s,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const r of this.rgaTreeSplit)r.isRemoved()||e.push(r.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const s=r.getValue();e.push({attributes:Vr(s.getAttributes()),content:s.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Nt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:r});for(const s of r.getValue().getGCPairs())e.push(s)}return e}}class zi extends Ut{constructor(e,r,s,a,f,h,g){super(e,g),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"content"),u(this,"attributes"),this.fromPos=r,this.toPos=s,this.maxCreatedAtMapByActor=a,this.content=f,this.attributes=h}static create(e,r,s,a,f,h,g){return new zi(e,r,s,a,f,h,g)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Nt||_.fatal("fail to execute, only Text can execute edit");const s=r,[,a,f]=s.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const h of f)e.registerGCPair(h);return{opInfos:a.map(({from:h,to:g,value:p})=>({type:"edit",from:h,to:g,value:p,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),s=this.toPos.toTestString(),a=this.content;return`${e}.EDIT(${r},${s},${a})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Fi extends Ut{constructor(e,r,s,a,f,h){super(e,h),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"attributes"),this.fromPos=r,this.toPos=s,this.maxCreatedAtMapByActor=a,this.attributes=f}static create(e,r,s,a,f,h){return new Fi(e,r,s,a,f,h)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Nt||_.fatal("fail to execute, only Text can execute edit");const s=r,[,a,f]=s.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const h of a)e.registerGCPair(h);return{opInfos:f.map(({from:h,to:g,value:p})=>({type:"style",from:h,to:g,value:p,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),s=this.toPos.toTestString(),a=this.attributes;return`${e}.STYL(${r},${s},${JSON.stringify(a)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const gy=2,py="root",kn="text";function ji(o,e){let r=0;const s=o.children;for(let a=0;a<e;a++){const f=s[a];!f||f.isRemoved||(r+=f.paddedSize)}return r}class my{constructor(e,r=[]){if(u(this,"type"),u(this,"parent"),u(this,"_children"),u(this,"size"),this.type=e,this.size=0,this._children=r,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const r=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*r,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const r of this._children){const s=r.updateDescendantsSize();r.isRemoved||(e+=s)}return this.size+=e,this.paddedSize}get isText(){return this.type===kn}get paddedSize(){return this.size+(this.isText?0:gy)}isAncestorOf(e){return yy(this,e)}get nextSibling(){const e=this.parent.findOffset(this),r=this.parent.children[e+1];if(r)return r}get prevSibling(){const e=this.parent.findOffset(this),r=this.parent.children[e-1];if(r)return r}splitText(e,r){if(e===0||e===this.size)return;const s=this.value.slice(0,e),a=this.value.slice(e);if(!a.length)return;this.value=s;const f=this.cloneText(e+r);return f.value=a,this.parent.insertAfterInternal(f,this),f}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const r of e)r.parent=this,r.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const r of e)r.parent=this}insertBefore(e,r){if(this.isText)throw new Error("Text node cannot have children");const s=this._children.indexOf(r);if(s===-1)throw new Error("child not found");this.insertAtInternal(e,s),e.updateAncestorsSize()}insertAfter(e,r){if(this.isText)throw new Error("Text node cannot have children");const s=this._children.indexOf(r);if(s===-1)throw new Error("child not found");this.insertAtInternal(e,s+1),e.updateAncestorsSize()}insertAt(e,r){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,r),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new Error("child not found");this._children.splice(r,1),e.parent=void 0}splitElement(e,r){const s=this.cloneElement(r);this.parent.insertAfterInternal(s,this),s.updateAncestorsSize();const a=this.children.slice(0,e),f=this.children.slice(e);this._children=a,s._children=f,this.size=this._children.reduce((h,g)=>h+g.paddedSize,0),s.size=s._children.reduce((h,g)=>h+g.paddedSize,0);for(const h of s._children)h.parent=s;return s}insertAfterInternal(e,r){if(this.isText)throw new Error("Text node cannot have children");const s=this._children.indexOf(r);if(s===-1)throw new Error("child not found");this.insertAtInternal(e,s+1)}insertAtInternal(e,r){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(r,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const r=this._children.indexOf(e);return this.allChildren.splice(0,r).filter(a=>!a.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let r=e;for(;r;){const s=this._children.indexOf(r);if(s!==-1)return s;r=r.parent}return-1}}function yy(o,e){if(o===e)return!1;for(;e.parent;){if(e.parent===o)return!0;e=e.parent}return!1}var Re=(o=>(o.Start="Start",o.End="End",o.Text="Text",o))(Re||{});function Df(o,e,r,s){if(e>r)throw new Error(`from is greater than to: ${e} > ${r}`);if(e>o.size)throw new Error(`from is out of range: ${e} > ${o.size}`);if(r>o.size)throw new Error(`to is out of range: ${r} > ${o.size}`);if(e===r)return;let a=0;for(const f of o.children){if(e-f.paddedSize<a&&a<r){const h=f.isText?e-a:e-a-1,g=f.isText?r-a:r-a-1,p=!f.isText&&h<0,y=!f.isText&&g>f.size;(f.isText||p)&&s([f,f.isText?"Text":"Start"],y),Df(f,Math.max(0,h),Math.min(g,f.size),s),y&&s([f,"End"],y)}a+=f.paddedSize}}function Rf(o,e,r=0){for(const s of o.children)Rf(s,e,r+1);e(o,r)}function Qs(o,e,r=0){for(const s of o._children)Qs(s,e,r+1);e(o,r)}function Va(o,e,r=!0){if(e>o.size)throw new Error(`index is out of range: ${e} > ${o.size}`);if(o.isText)return{node:o,offset:e};let s=0,a=0;for(const f of o.children){if(r&&f.isText&&f.size>=e-a)return Va(f,e-a,r);if(e===a)return{node:o,offset:s};if(!r&&f.paddedSize===e-a)return{node:o,offset:s+1};if(f.paddedSize>e-a)return Va(f,e-a-1,r);a+=f.paddedSize,s+=1}return{node:o,offset:s}}function _f(o){return o.isText||o.children.length===0?o:_f(o.children[0])}function vy(o,e){if(o.size<e)throw new Error("unacceptable path");for(let r=0;r<o.children.length;r++){const s=o.children[r];if(s.size<e)e-=s.size;else{o=s;break}}return{node:o,offset:e}}class wy{constructor(e){u(this,"root"),this.root=e}tokensBetween(e,r,s){Df(this.root,e,r,s)}traverse(e){Rf(this.root,e,0)}traverseAll(e){Qs(this.root,e,0)}findTreePos(e,r=!0){return Va(this.root,e,r)}treePosToPath(e){const r=[];let s=e.node;if(s.isText){const a=s.parent.findOffset(s);if(a===-1)throw new Error("invalid treePos");const f=ji(s.parent,a);r.push(f+e.offset),s=s.parent}else if(s.hasTextChild()){const a=ji(s,e.offset);r.push(a)}else r.push(e.offset);for(;s.parent;){const a=s.parent.findOffset(s);if(a===-1)throw new Error("invalid treePos");r.push(a),s=s.parent}return r.reverse()}pathToIndex(e){const r=this.pathToTreePos(e);return this.indexOf(r)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let r=this.root;for(let s=0;s<e.length-1;s++){const a=e[s];if(r=r.children[a],!r)throw new Error("unacceptable path")}if(r.hasTextChild())return vy(r,e[e.length-1]);if(r.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:r,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:r,offset:s}=e;if(r.isText){if(r.size===s){const a=r.nextSibling;return a||r.parent}return r}return r.children.length===s?r:_f(r.children[s])}indexOf(e){let{node:r}=e;const{offset:s}=e;let a=0,f=1;if(r.isText){a+=s;const h=r.parent,g=h.findOffset(r);if(g===-1)throw new Error("invalid pos");a+=ji(h,g),r=r.parent}else a+=ji(r,s);for(;r!=null&&r.parent;){const h=r.parent,g=h.findOffset(r);if(g===-1)throw new Error("invalid pos");a+=ji(h,g),f++,r=r.parent}return a+f-1}indexToPath(e){const r=this.findTreePos(e);return this.treePosToPath(r)}}const Sy=(o,e)=>o===e?0:o<e?-1:1;class Ty{constructor(e,r,s){u(this,"key"),u(this,"value"),u(this,"parent"),u(this,"left"),u(this,"right"),u(this,"isRed"),this.key=e,this.value=r,this.isRed=s}}class ky{constructor(e){u(this,"stack"),this.stack=[],this.traverseInorder(e)}traverseInorder(e){e&&(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Lf{constructor(e){u(this,"root"),u(this,"comparator"),u(this,"counter"),this.comparator=typeof e<"u"?e:Sy,this.counter=0}put(e,r){return this.root=this.putInternal(e,r,this.root),this.root.isRed=!1,r}get(e){const r=this.getInternal(e,this.root);return r?r.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new ky(this.root)}values(){const e=[];for(const r of this.getIterator().stack)e.push(r.value);return e}floorEntry(e){let r=this.root;for(;r;){const s=this.comparator(e,r.key);if(s>0)if(r.right)r.right.parent=r,r=r.right;else return r;else if(s<0)if(r.left)r.left.parent=r,r=r.left;else{let a=r.parent,f=r;for(;a&&f===a.left;)f=a,a=a.parent;return a}else return r}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,r){for(;r;){const s=this.comparator(e,r.key);if(s===0)return r;s<0?r=r.left:s>0&&(r=r.right)}}putInternal(e,r,s){if(!s)return this.counter+=1,new Ty(e,r,!0);const a=this.comparator(e,s.key);return a<0?s.left=this.putInternal(e,r,s.left):a>0?s.right=this.putInternal(e,r,s.right):s.value=r,this.isRed(s.right)&&!this.isRed(s.left)&&(s=this.rotateLeft(s)),this.isRed(s.left)&&this.isRed(s.left.left)&&(s=this.rotateRight(s)),this.isRed(s.left)&&this.isRed(s.right)&&this.flipColors(s),s}removeInternal(e,r){if(this.comparator(r,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,r);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(r,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(r,e.key)===0){this.counter-=1;const s=this.min(e.right);e.value=s.value,e.key=s.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,r)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const r=e.right;return e.right=r.left,r.left=e,r.isRed=r.left.isRed,r.left.isRed=!0,r}rotateRight(e){const r=e.left;return e.left=r.right,r.right=e,r.isRed=r.right.isRed,r.right.isRed=!0,r}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class zt{constructor(e,r){u(this,"parentID"),u(this,"leftSiblingID"),this.parentID=e,this.leftSiblingID=r}static of(e,r){return new zt(e,r)}static fromTreePos(e){const{offset:r}=e;let{node:s}=e,a;return s.isText?(s.parent.children[0]===s&&r===0?a=s.parent:a=s,s=s.parent):r===0?a=s:a=s.children[r-1],zt.of(s.id,Fe.of(a.getCreatedAt(),a.getOffset()+r))}getParentID(){return this.parentID}static fromStruct(e){return zt.of(Fe.of(Qe.fromStruct(e.parentID.createdAt),e.parentID.offset),Fe.of(Qe.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const r=this.getParentID(),s=this.getLeftSiblingID(),a=e.findFloorNode(r);let f=e.findFloorNode(s);if(!a||!f)throw new Error(`cannot find node of CRDTTreePos(${r.toTestString()}, ${s.toTestString()})`);return!s.equals(r)&&s.getOffset()>0&&s.getOffset()===f.id.getOffset()&&f.insPrevID&&(f=e.findFloorNode(f.insPrevID)),[a,f]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Fe{constructor(e,r){u(this,"createdAt"),u(this,"offset"),this.createdAt=e,this.offset=r}static of(e,r){return new Fe(e,r)}static fromStruct(e){return Fe.of(Qe.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,r)=>{const s=e.getCreatedAt().compare(r.getCreatedAt());return s!==0?s:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class mt extends my{constructor(e,r,s,a,f){super(r),u(this,"id"),u(this,"removedAt"),u(this,"attrs"),u(this,"insPrevID"),u(this,"insNextID"),u(this,"_value",""),this.id=e,this.removedAt=f,a&&(this.attrs=a),typeof s=="string"?this.value=s:Array.isArray(s)&&(this._children=s)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,r,s,a){return new mt(e,r,s,a)}deepcopy(){var e;const r=new mt(this.id,this.type);return r.removedAt=this.removedAt,r._value=this._value,r.size=this.size,r.attrs=(e=this.attrs)==null?void 0:e.deepcopy(),r._children=this._children.map(s=>{const a=s.deepcopy();return a.parent=r,a}),r.insPrevID=this.insPrevID,r.insNextID=this.insNextID,r}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),r&&this.updateAncestorsSize()}cloneText(e){return new mt(Fe.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new mt(Fe.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,r,s){const a=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,s);if(a){if(a.insPrevID=this.id,this.insNextID){const f=e.findFloorNode(this.insNextID);f.insPrevID=a.id,a.insNextID=this.insNextID}this.insNextID=a.id,e.registerNode(a)}return a}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,r){return this.isText?!1:!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,r){this.attrs||(this.attrs=new Tn);const s=new Array;for(const[a,f]of Object.entries(e))s.push(this.attrs.set(a,f,r));return s}purge(e){this.attrs&&this.attrs.purge(e)}getGCPairs(){const e=[];if(!this.attrs)return e;for(const r of this.attrs)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}function Ja(o){var e;if(o.isText){const s=o;return{type:s.type,value:s.value}}const r={type:o.type,children:o.children.map(Ja)};return o.attrs&&(r.attributes=Vr((e=o.attrs)==null?void 0:e.toObject())),r}function Ka(o){if(o.isText)return o.value;let e="";return o.attrs&&o.attrs.size()&&(e=" "+Array.from(o.attrs).filter(r=>!r.isRemoved()).sort((r,s)=>r.getKey().localeCompare(s.getKey())).map(r=>{const s=JSON.parse(r.getValue());return typeof s=="string"?`${r.getKey()}="${s}"`:`${r.getKey()}="${on(r.getValue())}"`}).join(" ")),`<${o.type}${e}>${o.children.map(r=>Ka(r)).join("")}</${o.type}>`}function bf(o){if(o.isText){const e=o;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:o.type,children:o.children.map(bf),size:o.size,isRemoved:o.isRemoved}}class xt extends Li{constructor(e,r){super(r),u(this,"indexTree"),u(this,"nodeMapByID"),this.indexTree=new wy(e),this.nodeMapByID=new Lf(Fe.createComparator()),this.indexTree.traverseAll(s=>{this.nodeMapByID.put(s.id,s)})}static create(e,r){return new xt(e,r)}findFloorNode(e){const r=this.nodeMapByID.floorEntry(e);if(!(!r||!r.key.getCreatedAt().equals(e.getCreatedAt())))return r.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,r){const[s,a]=e.toTreeNodePair(this);let f=a;const h=s===f,g=f.parent&&!h?f.parent:s;if(f.isText&&f.split(this,e.getLeftSiblingID().getOffset()-f.id.getOffset()),r){const p=g.allChildren,y=h?0:p.indexOf(f)+1;for(let A=y;A<p.length;A++){const D=p[A];if(!D.id.getCreatedAt().after(r))break;f=D}}return[g,f]}style(e,r,s,a){const[f,h]=this.findNodesAndSplitText(e[0],s),[g,p]=this.findNodesAndSplitText(e[1],s),y=[],A=r?Vr(r):{},D=new Map,T=[];return this.traverseInPosRange(f,h,g,p,([x])=>{const U=x.getCreatedAt().getActorID(),J=a?a.has(U)?a.get(U):$t:_i;if(x.canStyle(s,J)&&r){const K=D.get(U),ne=x.getCreatedAt();(!K||ne.after(K))&&D.set(U,ne);const pe=x.setAttrs(r,s),re=pe.reduce((ke,[,yr])=>(yr&&(ke[yr.getKey()]=A[yr.getKey()]),ke),{}),de=x.parent,me=x.prevSibling||x.parent;Object.keys(re).length>0&&y.push({type:"style",from:this.toIndex(de,me),to:this.toIndex(x,x),fromPath:this.toPath(de,me),toPath:this.toPath(x,x),actor:s.getActorID(),value:re});for(const[ke]of pe)ke&&T.push({parent:x,child:ke})}}),[D,T,y]}removeStyle(e,r,s,a){const[f,h]=this.findNodesAndSplitText(e[0],s),[g,p]=this.findNodesAndSplitText(e[1],s),y=[],A=new Map,D=[];return this.traverseInPosRange(f,h,g,p,([T])=>{const x=T.getCreatedAt().getActorID(),U=a?a.has(x)?a.get(x):$t:_i;if(T.canStyle(s,U)&&r){const J=A.get(x),K=T.getCreatedAt();(!J||K.after(J))&&A.set(x,K),T.attrs||(T.attrs=new Tn);for(const re of r){const de=T.attrs.remove(re,s);for(const me of de)D.push({parent:T,child:me})}const ne=T.parent,pe=T.prevSibling||T.parent;y.push({actor:s.getActorID(),type:"removeStyle",from:this.toIndex(ne,pe),to:this.toIndex(T,T),fromPath:this.toPath(ne,pe),toPath:this.toPath(T,T),value:r})}}),[A,D,y]}edit(e,r,s,a,f,h){const[g,p]=this.findNodesAndSplitText(e[0],a),[y,A]=this.findNodesAndSplitText(e[1],a),D=this.toIndex(g,p),T=this.toPath(g,p),x=[],U=[],J=[],K=new Map;this.traverseInPosRange(g,p,y,A,([re,de],me)=>{if(de===Re.Start&&!me)for(const vr of re.children)J.push(vr);const ke=re.getCreatedAt().getActorID(),yr=h?h.has(ke)?h.get(ke):$t:_i;if(re.canDelete(a,yr)||x.includes(re.parent)){const vr=K.get(ke),Qi=re.getCreatedAt();(!vr||Qi.after(vr))&&K.set(ke,Qi),(de===Re.Text||de===Re.Start)&&x.push(re),U.push([re,de])}});const ne=this.makeDeletionChanges(U,a),pe=[];for(const re of x)re.remove(a),re.isRemoved&&pe.push({parent:this,child:re});for(const re of J)re.removedAt||g.append(re);if(s>0){let re=0,de=g,me=p;for(;re<s;)de.split(this,de.findOffset(me)+1,f),me=de,de=de.parent,re++;ne.push({type:"content",from:D,to:D,fromPath:T,toPath:T,actor:a.getActorID()})}if(r!=null&&r.length){const re=[];let de=p;for(const me of r)de===g?g.insertAt(me,0):g.insertAfter(me,de),de=me,Qs(me,ke=>{g.isRemoved&&(ke.remove(a),pe.push({parent:this,child:ke})),this.nodeMapByID.put(ke.id,ke)}),me.isRemoved||re.push(me);if(re.length){const me=re.map(ke=>Ja(ke));ne.length&&ne[ne.length-1].from===D?ne[ne.length-1].value=me:ne.push({type:"content",from:D,to:D,fromPath:T,toPath:T,actor:a.getActorID(),value:me})}}return[ne,pe,K]}editT(e,r,s,a,f){const h=this.findPos(e[0]),g=this.findPos(e[1]);this.edit([h,g],r,s,a,f)}move(e,r,s){throw new Error(`not implemented: ${e}, ${r}, ${s}`)}purge(e){var r;(r=e.parent)==null||r.removeChild(e),this.nodeMapByID.remove(e.id);const s=e.insPrevID,a=e.insNextID;if(s){const f=this.findFloorNode(s);f.insNextID=a}if(a){const f=this.findFloorNode(a);f.insPrevID=s}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&e.push({parent:this,child:r});for(const s of r.getGCPairs())e.push(s)}),e}findPos(e,r=!0){const s=this.indexTree.findTreePos(e,r);return zt.fromTreePos(s)}pathToPosRange(e){const r=this.pathToIndex(e);return[this.findPos(r),this.findPos(r+1)]}pathToPos(e){const r=this.indexTree.pathToIndex(e);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Ka(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),r=(s,a=void 0,f=void 0,h=0)=>{var g,p,y,A;let D,T,x;const U=s.isText?{node:s,offset:0}:a&&f?this.toTreePos(a,f):null;U&&(D=this.indexTree.indexOf(U),T=this.indexTree.treePosToPath(U),x=zt.fromTreePos(U).toStruct());const J={type:s.type,parent:a==null?void 0:a.id.toTestString(),size:s.size,id:s.id.toTestString(),removedAt:(g=s.removedAt)==null?void 0:g.toTestString(),insPrev:(p=s.insPrevID)==null?void 0:p.toTestString(),insNext:(y=s.insNextID)==null?void 0:y.toTestString(),value:s.isText?s.value:void 0,isRemoved:s.isRemoved,children:[],depth:h,attributes:s.attrs?Vr((A=s.attrs)==null?void 0:A.toObject()):void 0,index:D,path:T,pos:x};for(let K=0;K<s.allChildren.length;K++){const ne=K===0?s:s.allChildren[K-1];J.children.push(r(s.allChildren[K],s,ne,h+1))}return J};return r(e)}getRootTreeNode(){return Ja(this.indexTree.getRoot())}toTestTreeNode(){return bf(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new xt(e.deepcopy(),this.getCreatedAt())}toPath(e,r){const s=this.toTreePos(e,r);return s?this.indexTree.treePosToPath(s):[]}toIndex(e,r){const s=this.toTreePos(e,r);return s?this.indexTree.indexOf(s):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const r=this.findPos(e[0]);return e[0]===e[1]?[r,r]:[r,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[r,s]=e,a=this.findPos(r);return r===s?[a.toStruct(),a.toStruct()]:[a.toStruct(),this.findPos(s).toStruct()]}posRangeToPathRange(e){const[r,s]=this.findNodesAndSplitText(e[0]),[a,f]=this.findNodesAndSplitText(e[1]);return[this.toPath(r,s),this.toPath(a,f)]}posRangeToIndexRange(e){const[r,s]=this.findNodesAndSplitText(e[0]),[a,f]=this.findNodesAndSplitText(e[1]);return[this.toIndex(r,s),this.toIndex(a,f)]}traverseInPosRange(e,r,s,a,f){const h=this.toIndex(e,r),g=this.toIndex(s,a);return this.indexTree.tokensBetween(h,g,f)}toTreePos(e,r){if(!e||!r)return;if(e.isRemoved){let a;for(;e.isRemoved;)a=e,e=a.parent;const f=e.findOffset(a);return{node:e,offset:f}}if(e===r)return{node:e,offset:0};let s=e.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};s++}return{node:e,offset:s}}makeDeletionChanges(e,r){const s=[],a=[];let f=null,h=null;for(let g=0;g<e.length;g++){const p=e[g],y=e[g+1];f||(f=p),h=p;const A=this.findRightToken(p);(!A||!y||A[0]!==y[0]||A[1]!==y[1])&&(a.push([f,h]),f=null,h=null)}for(const g of a){const[p,y]=g,[A,D]=this.findLeftToken(p),[T,x]=y,U=D===Re.Start?A:A.parent,J=x===Re.Start?T:T.parent,K=this.toIndex(U,A),ne=this.toIndex(J,T);K<ne&&(s.length>0&&K===s[s.length-1].to?(s[s.length-1].to=ne,s[s.length-1].toPath=this.toPath(J,T)):s.push({type:"content",from:K,to:ne,fromPath:this.toPath(U,A),toPath:this.toPath(J,T),actor:r.getActorID()}))}return s.reverse()}findRightToken([e,r]){if(r===Re.Start){const g=e.allChildren;return g.length>0?[g[0],g[0].isText?Re.Text:Re.Start]:[e,Re.End]}const s=e.parent,a=s.allChildren,f=a.indexOf(e);if(s&&f===a.length-1)return[s,Re.End];const h=a[f+1];return[h,h.isText?Re.Text:Re.Start]}findLeftToken([e,r]){if(r===Re.End){const g=e.allChildren;if(g.length>0){const p=g[g.length-1];return[p,p.isText?Re.Text:Re.End]}return[e,Re.Start]}const s=e.parent,a=s.allChildren,f=a.indexOf(e);if(s&&f===0)return[s,Re.Start];const h=a[f-1];return[h,h.isText?Re.Text:Re.End]}}class Vi extends Ut{constructor(e,r,s,a,f,h,g){super(e,g),u(this,"fromPos"),u(this,"toPos"),u(this,"contents"),u(this,"splitLevel"),u(this,"maxCreatedAtMapByActor"),this.fromPos=r,this.toPos=s,this.contents=a,this.splitLevel=f,this.maxCreatedAtMapByActor=h}static create(e,r,s,a,f,h,g){return new Vi(e,r,s,a,f,h,g)}execute(e){var r;const s=e.findByCreatedAt(this.getParentCreatedAt());s||_.fatal(`fail to find ${this.getParentCreatedAt()}`),s instanceof xt||_.fatal("fail to execute, only Tree can execute edit");const a=this.getExecutedAt(),f=s,[h,g]=f.edit([this.fromPos,this.toPos],(r=this.contents)==null?void 0:r.map(p=>p.deepcopy()),this.splitLevel,a,(()=>{let p=a.getDelimiter();return this.contents!==void 0&&(p+=this.contents.length),()=>Qe.of(a.getLamport(),++p,a.getActorID())})(),this.maxCreatedAtMapByActor);for(const p of g)e.registerGCPair(p);return{opInfos:h.map(({from:p,to:y,value:A,splitLevel:D,fromPath:T,toPath:x})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:p,to:y,value:A,splitLevel:D,fromPath:T,toPath:x}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,s=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,a=this.contents||[];return`${e}.EDIT(${r},${s},${a.map(f=>Ka(f)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class zn{constructor(e,r,s,a){u(this,"clientSeq"),u(this,"serverSeq"),u(this,"lamport"),u(this,"actor"),this.clientSeq=e,this.serverSeq=a,this.lamport=r,this.actor=s}static of(e,r,s,a){return new zn(e,r,s,a)}next(){return new zn(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new zn(this.clientSeq,e,this.actor):new zn(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return Qe.of(this.lamport,e,this.actor)}setActor(e){return new zn(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Ay=new zn(0,X.fromInt(0,!0),Ys);class pr{constructor({id:e,operations:r,presenceChange:s,message:a}){u(this,"id"),u(this,"operations"),u(this,"presenceChange"),u(this,"message"),this.id=e,this.operations=r||[],this.presenceChange=s,this.message=a}static create({id:e,operations:r,presenceChange:s,message:a}){return new pr({id:e,operations:r,presenceChange:s,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const r of this.operations)r.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,r,s){const a=[],f=[];for(const h of this.operations){const g=h.execute(e,s);if(!g)continue;const{opInfos:p,reverseOp:y}=g;a.push(...p),y&&f.unshift(y)}return this.presenceChange&&(this.presenceChange.type===Mn.Put?r.set(this.id.getActorID(),Bt(this.presenceChange.presence)):r.delete(this.id.getActorID())),{opInfos:a,reverseOps:f}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:_e.bytesToHex(_e.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>_e.bytesToHex(_e.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:r,operations:s,presenceChange:a,message:f}=e;return pr.create({id:_e.bytesToChangeID(_e.hexToBytes(r)),operations:s==null?void 0:s.map(h=>_e.bytesToOperation(_e.hexToBytes(h))),presenceChange:a,message:f})}}class Zs{constructor(e,r,s,a,f,h){u(this,"documentKey"),u(this,"checkpoint"),u(this,"isRemoved"),u(this,"changes"),u(this,"snapshot"),u(this,"minSyncedTicket"),this.documentKey=e,this.checkpoint=r,this.isRemoved=s,this.changes=a,this.snapshot=f,this.minSyncedTicket=h}static create(e,r,s,a,f,h){return new Zs(e,r,s,a,f,h)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Jr{constructor(e,r){u(this,"serverSeq"),u(this,"clientSeq"),this.serverSeq=e,this.clientSeq=r}static of(e,r){return new Jr(e,r)}increaseClientSeq(e){return e===0?this:new Jr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const r=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,s=Math.max(this.clientSeq,e.clientSeq);return Jr.of(r,s)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Iy=new Jr(X.fromInt(0,!0),0);class an{constructor(e,r){u(this,"createdAt"),u(this,"offset"),this.createdAt=e,this.offset=r}static of(e,r){return new an(e,r)}static fromStruct(e){return an.of(Qe.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new an(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Ey=an.of($t,0);class Ft{constructor(e,r){u(this,"id"),u(this,"relativeOffset"),this.id=e,this.relativeOffset=r}static of(e,r){return new Ft(e,r)}static fromStruct(e){const r=an.fromStruct(e.id);return Ft.of(r,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return an.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Fn extends Of{constructor(e,r,s){super(r),u(this,"id"),u(this,"removedAt"),u(this,"prev"),u(this,"next"),u(this,"insPrev"),u(this,"insNext"),this.id=e,this.removedAt=s}static create(e,r){return new Fn(e,r)}static createComparator(){return(e,r)=>{const s=e.getCreatedAt().compare(r.getCreatedAt());return s!==0?s:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new Fn(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,r){const s=!this.removedAt;return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))?s:!1}canStyle(e,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Ft.of(this.id,0),Ft.of(this.id,this.getLength())]}deepcopy(){return new Fn(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const r=this.value;return this.value=r.substring(0,e),r.substring(e,r.length)}toIDString(){return this.id.toIDString()}}class Kr{constructor(){u(this,"head"),u(this,"treeByIndex"),u(this,"treeByID"),this.head=Fn.create(Ey),this.treeByIndex=new Mi,this.treeByID=new Lf(Fn.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Kr}edit(e,r,s,a){const[f,h]=this.findNodeWithSplit(e[1],r),[g,p]=this.findNodeWithSplit(e[0],r),y=this.findBetween(p,h),[A,D,T]=this.deleteNodes(y,r,a),x=h?h.getID():f.getID();let U=Ft.of(x,0);if(s){const K=this.posToIndex(g.createPosRange()[1],!0),ne=this.insertAfter(g,Fn.create(an.of(r,0),s));A.length&&A[A.length-1].from===K?A[A.length-1].value=s:A.push({actor:r.getActorID(),from:K,to:K,value:s}),U=Ft.of(ne.getID(),ne.getContentLength())}const J=[];for(const[,K]of T)J.push({parent:this,child:K});return[U,D,J,A]}indexToPos(e){const[r,s]=this.treeByIndex.find(e),a=r;return Ft.of(a.getID(),s)}findIndexesFromRange(e){const[r,s]=e;return[this.posToIndex(r,!1),this.posToIndex(s,!0)]}posToIndex(e,r){const s=e.getAbsoluteID(),a=r?this.findFloorNodePreferToLeft(s):this.findFloorNode(s);a||_.fatal(`the node of the given id should be found: ${s.toTestString()}`);const f=this.treeByIndex.indexOf(a),h=a.isRemoved()?0:s.getOffset()-a.getID().getOffset();return f+h}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const r of this)r.isRemoved()||e.push(r.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Kr;let r=this.head.getNext(),s=e.head,a;for(;r;){if(a=e.insertAfter(s,r.deepcopy()),r.hasInsPrev()){const f=e.findNode(r.getInsPrevID());a.setInsPrev(f)}s=a,r=r.getNext()}return e}toTestString(){const e=[];let r=this.head;for(;r;)r.isRemoved()?e.push(`{${r.toTestString()}}`):e.push(`[${r.toTestString()}]`),r=r.getNext();return e.join("")}insertAfter(e,r){const s=e.getNext();return r.setPrev(e),s&&s.setPrev(r),this.treeByID.put(r.getID(),r),this.treeByIndex.insertAfter(e,r),r}findNodeWithSplit(e,r){const s=e.getAbsoluteID();let a=this.findFloorNodePreferToLeft(s);const f=s.getOffset()-a.getID().getOffset();for(this.splitNode(a,f);a.hasNext()&&a.getNext().getCreatedAt().after(r);)a=a.getNext();return[a,a.getNext()]}findFloorNodePreferToLeft(e){let r=this.findFloorNode(e);if(r||_.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&r.getID().getOffset()==e.getOffset()){if(!r.hasInsPrev())return r;r=r.getInsPrev()}return r}findFloorNode(e){const r=this.treeByID.floorEntry(e);if(r&&!(!r.key.equals(e)&&!r.key.hasSameCreatedAt(e)))return r.value}findBetween(e,r){const s=[];let a=e;for(;a&&a!==r;)s.push(a),a=a.getNext();return s}splitNode(e,r){if(r>e.getContentLength()&&_.fatal("offset should be less than or equal to length"),r===0)return e;if(r===e.getContentLength())return e.getNext();const s=e.split(r);this.treeByIndex.updateWeight(s),this.insertAfter(e,s);const a=e.getInsNext();return a&&a.setInsPrev(s),s.setInsPrev(e),s}deleteNodes(e,r,s){if(!e.length)return[[],new Map,new Map];const[a,f]=this.filterNodes(e,r,s),h=new Map,g=new Map,p=this.makeChanges(f,r);for(const y of a){const A=y.getCreatedAt().getActorID();(!h.has(A)||y.getID().getCreatedAt().after(h.get(A)))&&h.set(A,y.getID().getCreatedAt()),g.set(y.getID().toIDString(),y),y.remove(r)}return this.deleteIndexNodes(f),[p,h,g]}filterNodes(e,r,s){const a=!!s,f=[],h=[],[g,p]=this.findEdgesOfCandidates(e);h.push(g);for(const y of e){const A=y.getCreatedAt().getActorID(),D=a?s.has(A)?s.get(A):$t:_i;y.canDelete(r,D)?f.push(y):h.push(y)}return h.push(p),[f,h]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,r){const s=[];let a,f;for(let h=0;h<e.length-1;h++){const g=e[h],p=e[h+1];g.getNext()!=p&&([a]=this.findIndexesFromRange(g.getNext().createPosRange()),p?[,f]=this.findIndexesFromRange(p.getPrev().createPosRange()):f=this.treeByIndex.length,a<f&&s.push({actor:r.getActorID(),from:a,to:f}))}return s.reverse()}deleteIndexNodes(e){for(let r=0;r<e.length-1;r++){const s=e[r],a=e[r+1];s.getNext()!=a&&this.treeByIndex.deleteRange(s,a)}}purge(e){const r=e.getPrev(),s=e.getNext(),a=e.getInsPrev(),f=e.getInsNext();r&&r.setNext(s),s&&s.setPrev(r),e.setPrev(void 0),e.setNext(void 0),a&&a.setInsNext(f),f&&f.setInsPrev(a),e.setInsPrev(void 0),e.setInsNext(void 0)}}const Mf=o=>o<0?Math.ceil(o):Math.floor(o);var ln=(o=>(o[o.IntegerCnt=0]="IntegerCnt",o[o.LongCnt=1]="LongCnt",o))(ln||{});class yt extends Li{constructor(e,r,s){switch(super(s),u(this,"valueType"),u(this,"value"),this.valueType=e,e){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=X.fromNumber(r).toInt():this.value=Mf(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=X.fromNumber(r):this.value=r;break;default:throw new le(se.Unimplemented,`unimplemented type: ${e}`)}}static create(e,r,s){return new yt(e,r,s)}static valueFromBytes(e,r){switch(e){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return X.fromBytesLE(Array.from(r));default:throw new le(se.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=yt.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof X?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!yt.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new le(se.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function r(s){if(!s.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof s.getValue()}`)}return r(this),r(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Me.Long?this.value=this.value+e.getValue().toInt():this.value=X.fromNumber(this.value+Mf(e.getValue())).toInt(),this}}class Wr extends Ut{constructor(e,r,s){super(e,s),u(this,"value"),this.value=r}static create(e,r,s){return new Wr(e,r,s)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof yt||_.fatal("fail to execute, only Counter can execute increase");const s=r,a=this.value.deepcopy();return s.increase(a),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:a.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),s=e.getType()===Me.Long?e.getValue().multiply(-1):e.getValue()*-1;return Wr.create(this.getParentCreatedAt(),Te.of(s,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class An extends Ut{constructor(e,r,s,a,f,h,g){super(e,g),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"attributes"),u(this,"attributesToRemove"),this.fromPos=r,this.toPos=s,this.maxCreatedAtMapByActor=a,this.attributes=f,this.attributesToRemove=h}static create(e,r,s,a,f,h){return new An(e,r,s,a,f,new Array,h)}static createTreeRemoveStyleOperation(e,r,s,a,f,h){return new An(e,r,s,a,new Map,f,h)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof xt||_.fatal("fail to execute, only Tree can execute edit");const s=r;let a,f;if(this.attributes.size){const h={};[...this.attributes].forEach(([g,p])=>h[g]=p),[,f,a]=s.style([this.fromPos,this.toPos],h,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const h=this.attributesToRemove;[,f,a]=s.removeStyle([this.fromPos,this.toPos],h,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const h of f)e.registerGCPair(h);return{opInfos:a.map(({from:h,to:g,value:p,fromPath:y,toPath:A})=>({type:"tree-style",from:h,to:g,value:this.attributes.size?{attributes:p}:{attributesToRemove:p},fromPath:y,toPath:A,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,s=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${r},${s},${Object.entries(this.attributes||{}).map(([a,f])=>`${a}:"${f}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function Cy(o){const e=new Ba,r=e.data;for(const[s,a]of Object.entries(o))r[s]=JSON.stringify(a);return e}function Ny(o){if(o.type===Mn.Put)return new Ma({type:Ri.PUT,presence:Cy(o.presence)});if(o.type===Mn.Clear)return new Ma({type:Ri.CLEAR});throw new le(se.Unimplemented,"unimplemented type")}function xy(o){return new vf({serverSeq:o.getServerSeqAsString(),clientSeq:o.getClientSeq()})}function Bf(o){return new qs({clientSeq:o.getClientSeq(),lamport:o.getLamportAsString(),actorId:Qa(o.getActorID())})}function q(o){if(o)return new H({lamport:o.getLamportAsString(),delimiter:o.getDelimiter(),actorId:Qa(o.getActorID())})}function $f(o){switch(o){case Me.Null:return te.NULL;case Me.Boolean:return te.BOOLEAN;case Me.Integer:return te.INTEGER;case Me.Long:return te.LONG;case Me.Double:return te.DOUBLE;case Me.String:return te.STRING;case Me.Bytes:return te.BYTES;case Me.Date:return te.DATE;default:throw new le(se.Unsupported,`unsupported type: ${o}`)}}function Uf(o){switch(o){case ln.IntegerCnt:return te.INTEGER_CNT;case ln.LongCnt:return te.LONG_CNT;default:throw new le(se.Unsupported,`unsupported type: ${o}`)}}function Wa(o){if(o instanceof st)return new wn({type:te.JSON_OBJECT,createdAt:q(o.getCreatedAt()),value:eh(o)});if(o instanceof pt)return new wn({type:te.JSON_ARRAY,createdAt:q(o.getCreatedAt()),value:rv(o)});if(o instanceof Nt)return new wn({type:te.TEXT,createdAt:q(o.getCreatedAt())});if(o instanceof Te)return new wn({type:$f(o.getType()),createdAt:q(o.getCreatedAt()),value:o.toBytes()});if(o instanceof yt)return new wn({type:Uf(o.getType()),createdAt:q(o.getCreatedAt()),value:o.toBytes()});if(o instanceof xt)return new wn({type:te.TREE,createdAt:q(o.getCreatedAt()),value:sv(o)});throw new le(se.Unimplemented,"unimplemented element")}function Py(o){return new La({createdAt:q(o.getCreatedAt()),offset:o.getOffset()})}function eo(o){return new cr({createdAt:q(o.getID().getCreatedAt()),offset:o.getID().getOffset(),relativeOffset:o.getRelativeOffset()})}function to(o){return new Di({parentId:Ji(o.getParentID()),leftSiblingId:Ji(o.getLeftSiblingID())})}function Ji(o){return new Ur({createdAt:q(o.getCreatedAt()),offset:o.getOffset()})}function zf(o){const e=new Ra;if(o instanceof dr){const r=o,s=new Zc;s.parentCreatedAt=q(r.getParentCreatedAt()),s.key=r.getKey(),s.value=Wa(r.getValue()),s.executedAt=q(r.getExecutedAt()),e.body.case="set",e.body.value=s}else if(o instanceof $i){const r=o,s=new ef;s.parentCreatedAt=q(r.getParentCreatedAt()),s.prevCreatedAt=q(r.getPrevCreatedAt()),s.value=Wa(r.getValue()),s.executedAt=q(r.getExecutedAt()),e.body.case="add",e.body.value=s}else if(o instanceof Un){const r=o,s=new tf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.prevCreatedAt=q(r.getPrevCreatedAt()),s.createdAt=q(r.getCreatedAt()),s.executedAt=q(r.getExecutedAt()),e.body.case="move",e.body.value=s}else if(o instanceof $n){const r=o,s=new nf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.createdAt=q(r.getCreatedAt()),s.executedAt=q(r.getExecutedAt()),e.body.case="remove",e.body.value=s}else if(o instanceof zi){const r=o,s=new rf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.from=eo(r.getFromPos()),s.to=eo(r.getToPos());const a=s.createdAtMapByActor;for(const[h,g]of r.getMaxCreatedAtMapByActor())a[h]=q(g);s.content=r.getContent();const f=s.attributes;for(const[h,g]of r.getAttributes())f[h]=g;s.executedAt=q(r.getExecutedAt()),e.body.case="edit",e.body.value=s}else if(o instanceof Fi){const r=o,s=new sf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.from=eo(r.getFromPos()),s.to=eo(r.getToPos());const a=s.createdAtMapByActor;for(const[h,g]of r.getMaxCreatedAtMapByActor())a[h]=q(g);const f=s.attributes;for(const[h,g]of r.getAttributes())f[h]=g;s.executedAt=q(r.getExecutedAt()),e.body.case="style",e.body.value=s}else if(o instanceof Wr){const r=o,s=new of;s.parentCreatedAt=q(r.getParentCreatedAt()),s.value=Wa(r.getValue()),s.executedAt=q(r.getExecutedAt()),e.body.case="increase",e.body.value=s}else if(o instanceof Vi){const r=o,s=new af,a=s.createdAtMapByActor;for(const[f,h]of r.getMaxCreatedAtMapByActor())a[f]=q(h);s.parentCreatedAt=q(r.getParentCreatedAt()),s.from=to(r.getFromPos()),s.to=to(r.getToPos()),s.contents=My(r.getContents()),s.splitLevel=r.getSplitLevel(),s.executedAt=q(r.getExecutedAt()),e.body.case="treeEdit",e.body.value=s}else if(o instanceof An){const r=o,s=new lf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.from=to(r.getFromPos()),s.to=to(r.getToPos());const a=s.createdAtMapByActor;for(const[h,g]of r.getMaxCreatedAtMapByActor())a[h]=q(g);const f=r.getAttributesToRemove();if(f.length>0)s.attributesToRemove=f;else{const h=s.attributes;for(const[g,p]of r.getAttributes())h[g]=p}s.executedAt=q(r.getExecutedAt()),e.body.case="treeStyle",e.body.value=s}else throw new le(se.Unimplemented,"unimplemented operation");return e}function Oy(o){const e=[];for(const r of o)e.push(zf(r));return e}function Dy(o){const e=new Qc({id:Bf(o.getID()),message:o.getMessage()});return o.hasOperations()&&(e.operations=Oy(o.getOperations())),o.hasPresenceChange()&&(e.presenceChange=Ny(o.getPresenceChange())),e}function Ry(o){const e=[];for(const r of o)e.push(Dy(r));return e}function _y(o){const e=[];for(const r of o)e.push(new pf({key:r.getStrKey(),element:qa(r.getValue())}));return e}function Ly(o){const e=[];for(const r of o)e.push(new _a({element:qa(r.getValue())}));return e}function by(o){const e=[];for(const r of o){const s=new mf;s.id=Py(r.getID()),s.value=r.getValue().getContent(),s.removedAt=q(r.getRemovedAt());const a=s.attributes,f=r.getValue().getAttrs();for(const h of f){const g=new Hs;g.value=h.getValue(),g.updatedAt=q(h.getUpdatedAt()),a[h.getKey()]=g}e.push(s)}return e}function My(o){const e=[];if(!o||!o.length)return e;for(const r of o)e.push(new yf({content:Ff(r)}));return e}function By(o){const e={};for(const r of o)e[r.getKey()]=new Hs({value:r.getValue(),updatedAt:q(r.getUpdatedAt()),isRemoved:r.isRemoved()});return e}function Ff(o){if(!o)return[];const e=[];return Qs(o,(r,s)=>{const a=new ba({id:Ji(r.id),type:r.type,removedAt:q(r.removedAt),depth:s});r.isText&&(a.value=r.value),r.insPrevID&&(a.insPrevId=Ji(r.insPrevID)),r.insNextID&&(a.insNextId=Ji(r.insNextID)),r.attrs&&(a.attributes=By(r.attrs)),e.push(a)}),e}function $y(o){const e=new It;return e.body.case="jsonObject",e.body.value=new uf({nodes:_y(o.getRHT()),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function jf(o){const e=new It;return e.body.case="jsonArray",e.body.value=new cf({nodes:Ly(o.getElements()),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function Uy(o){const e=new It;return e.body.case="primitive",e.body.value=new ff({type:$f(o.getType()),value:o.toBytes(),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function zy(o){const e=new It;return e.body.case="text",e.body.value=new hf({nodes:by(o.getRGATreeSplit()),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function Fy(o){const e=new It;return e.body.case="counter",e.body.value=new df({type:Uf(o.getType()),value:o.toBytes(),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function Vf(o){const e=new It;return e.body.case="tree",e.body.value=new gf({nodes:Ff(o.getRoot()),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function qa(o){if(o instanceof st)return $y(o);if(o instanceof pt)return jf(o);if(o instanceof Te)return Uy(o);if(o instanceof Nt)return zy(o);if(o instanceof yt)return Fy(o);if(o instanceof xt)return Vf(o);throw new le(se.Unimplemented,"unimplemented element")}function jy(o){return new vn({documentKey:o.getDocumentKey(),checkpoint:xy(o.getCheckpoint()),isRemoved:o.getIsRemoved(),changes:Ry(o.getChanges()),snapshot:o.getSnapshot(),minSyncedTicket:q(o.getMinSyncedTicket())})}function Jf(o){let e;return o.serverSeq&&(e=X.fromString(o.serverSeq,!0)),zn.of(o.clientSeq,X.fromString(o.lamport,!0),Xa(o.actorId),e)}function G(o){if(o)return Qe.of(X.fromString(o.lamport,!0),o.delimiter,Xa(o.actorId))}function Ha(o){const e={};return Object.entries(o.data).forEach(([r,s])=>{e[r]=JSON.parse(s)}),e}function Vy(o){const e=o.type;if(e===Ri.PUT){const r=Ha(o.presence);return{type:Mn.Put,presence:r}}if(e===Ri.CLEAR)return{type:Mn.Clear};throw new le(se.Unsupported,`unsupported type: ${e}`)}function Jy(o){const e=new Map;return Object.entries(o).forEach(([r,s])=>{e.set(r,Ha(s))}),e}function Kf(o){switch(o){case te.NULL:return Me.Null;case te.BOOLEAN:return Me.Boolean;case te.INTEGER:return Me.Integer;case te.LONG:return Me.Long;case te.DOUBLE:return Me.Double;case te.STRING:return Me.String;case te.BYTES:return Me.Bytes;case te.DATE:return Me.Date}throw new le(se.Unimplemented,`unimplemented value type: ${o}`)}function no(o){switch(o){case te.INTEGER_CNT:return ln.IntegerCnt;case te.LONG_CNT:return ln.LongCnt}throw new le(se.Unimplemented,`unimplemented value type: ${o}`)}function Ga(o){switch(o.type){case te.JSON_OBJECT:return o.value?Zf(o.value):st.create(G(o.createdAt));case te.JSON_ARRAY:return o.value?nv(o.value):pt.create(G(o.createdAt));case te.TEXT:return Nt.create(Kr.create(),G(o.createdAt));case te.TREE:return iv(o.value);case te.NULL:case te.BOOLEAN:case te.INTEGER:case te.LONG:case te.DOUBLE:case te.STRING:case te.BYTES:case te.DATE:return Te.of(Te.valueFromBytes(Kf(o.type),o.value),G(o.createdAt));case te.INTEGER_CNT:case te.LONG_CNT:return yt.create(no(o.type),yt.valueFromBytes(no(o.type),o.value),G(o.createdAt))}}function ro(o){return Ft.of(an.of(G(o.createdAt),o.offset),o.relativeOffset)}function Wf(o){return an.of(G(o.createdAt),o.offset)}function Ky(o){const e=Ui.create(o.value);Object.entries(o.attributes).forEach(([s,a])=>{e.setAttr(s,a.value,G(a.updatedAt))});const r=Fn.create(Wf(o.id),e);return r.remove(G(o.removedAt)),r}function qr(o){return zt.of(Ki(o.parentId),Ki(o.leftSiblingId))}function Ki(o){return Fe.of(G(o.createdAt),o.offset)}function Wy(o){if(!o.length)return;const e=[];return o.forEach(r=>{const s=qf(r.content);e.push(s)}),e}function qf(o){if(o.length===0)return;const e=[];for(const s of o)e.push(Hy(s));const r=e[e.length-1];for(let s=e.length-2;s>=0;s--){let a;for(let f=s+1;f<e.length;f++)if(o[s].depth-1===o[f].depth){a=e[f];break}a.prepend(e[s])}return r.updateDescendantsSize(),xt.create(r,$t).getRoot()}function qy(o){const e=Tn.create();for(const[r,s]of Object.entries(o))e.setInternal(r,s.value,G(s.updatedAt),s.isRemoved);return e}function Hy(o){const e=Ki(o.id),r=mt.create(e,o.type),s=Object.entries(o.attributes);return r.isText?r.value=o.value:s.length&&(r.attrs=qy(o.attributes)),o.insPrevId&&(r.insPrevID=Ki(o.insPrevId)),o.insNextId&&(r.insNextID=Ki(o.insNextId)),r.removedAt=G(o.removedAt),r}function Hf(o){if(o.body.case==="set"){const e=o.body.value;return dr.create(e.key,Ga(e.value),G(e.parentCreatedAt),G(e.executedAt))}else if(o.body.case==="add"){const e=o.body.value;return $i.create(G(e.parentCreatedAt),G(e.prevCreatedAt),Ga(e.value),G(e.executedAt))}else if(o.body.case==="move"){const e=o.body.value;return Un.create(G(e.parentCreatedAt),G(e.prevCreatedAt),G(e.createdAt),G(e.executedAt))}else if(o.body.case==="remove"){const e=o.body.value;return $n.create(G(e.parentCreatedAt),G(e.createdAt),G(e.executedAt))}else if(o.body.case==="edit"){const e=o.body.value,r=new Map;Object.entries(e.createdAtMapByActor).forEach(([a,f])=>{r.set(a,G(f))});const s=new Map;return Object.entries(e.attributes).forEach(([a,f])=>{s.set(a,f)}),zi.create(G(e.parentCreatedAt),ro(e.from),ro(e.to),r,e.content,s,G(e.executedAt))}else if(o.body.case==="style"){const e=o.body.value,r=new Map;Object.entries(e.createdAtMapByActor).forEach(([a,f])=>{r.set(a,G(f))});const s=new Map;return Object.entries(e.attributes).forEach(([a,f])=>{s.set(a,f)}),Fi.create(G(e.parentCreatedAt),ro(e.from),ro(e.to),r,s,G(e.executedAt))}else{if(o.body.case==="select")return;if(o.body.case==="increase"){const e=o.body.value;return Wr.create(G(e.parentCreatedAt),Ga(e.value),G(e.executedAt))}else if(o.body.case==="treeEdit"){const e=o.body.value,r=new Map;return Object.entries(e.createdAtMapByActor).forEach(([s,a])=>{r.set(s,G(a))}),Vi.create(G(e.parentCreatedAt),qr(e.from),qr(e.to),Wy(e.contents),e.splitLevel,r,G(e.executedAt))}else if(o.body.case==="treeStyle"){const e=o.body.value,r=new Map,s=e.attributesToRemove,a=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([f,h])=>{a.set(f,G(h))}),(s==null?void 0:s.length)>0?An.createTreeRemoveStyleOperation(G(e.parentCreatedAt),qr(e.from),qr(e.to),a,s,G(e.executedAt)):(Object.entries(e.attributes).forEach(([f,h])=>{r.set(f,h)}),An.create(G(e.parentCreatedAt),qr(e.from),qr(e.to),a,r,G(e.executedAt)))}else throw new le(se.Unimplemented,"unimplemented operation")}}function Gy(o){const e=[];for(const r of o){const s=Hf(r);s&&e.push(s)}return e}function Gf(o){const e=[];for(const r of o)e.push(pr.create({id:Jf(r.id),operations:Gy(r.operations),presenceChange:r.presenceChange?Vy(r.presenceChange):void 0,message:r.message}));return e}function Yy(o){return Jr.of(X.fromString(o.serverSeq,!0),o.clientSeq)}function Xy(o){return Zs.create(o.documentKey,Yy(o.checkpoint),o.isRemoved,Gf(o.changes),o.snapshot,G(o.minSyncedTicket))}function Yf(o){const e=new bi;for(const s of o.nodes){const a=Ya(s.element);e.set(s.key,a,a.getPositionedAt())}const r=new st(G(o.createdAt),e);return r.setMovedAt(G(o.movedAt)),r.setRemovedAt(G(o.removedAt)),r}function Xf(o){const e=new Bi;for(const s of o.nodes)e.insert(Ya(s.element));const r=new pt(G(o.createdAt),e);return r.setMovedAt(G(o.movedAt)),r.setRemovedAt(G(o.removedAt)),r}function Qy(o){const e=Te.of(Te.valueFromBytes(Kf(o.type),o.value),G(o.createdAt));return e.setMovedAt(G(o.movedAt)),e.setRemovedAt(G(o.removedAt)),e}function Zy(o){const e=new Kr;let r=e.getHead();for(const a of o.nodes){const f=e.insertAfter(r,Ky(a));a.insPrevId&&f.setInsPrev(e.findNode(Wf(a.insPrevId))),r=f}const s=new Nt(e,G(o.createdAt));return s.setMovedAt(G(o.movedAt)),s.setRemovedAt(G(o.removedAt)),s}function ev(o){const e=yt.create(no(o.type),yt.valueFromBytes(no(o.type),o.value),G(o.createdAt));return e.setMovedAt(G(o.movedAt)),e.setRemovedAt(G(o.removedAt)),e}function Qf(o){const e=qf(o.nodes);return xt.create(e,G(o.createdAt))}function Ya(o){if(o.body.case==="jsonObject")return Yf(o.body.value);if(o.body.case==="jsonArray")return Xf(o.body.value);if(o.body.case==="primitive")return Qy(o.body.value);if(o.body.case==="text")return Zy(o.body.value);if(o.body.case==="counter")return ev(o.body.value);if(o.body.case==="tree")return Qf(o.body.value);throw new le(se.Unimplemented,"unimplemented element")}function tv(o){if(!o)return{root:st.create($t),presences:new Map};const e=zm.fromBinary(o);return{root:Ya(e.root),presences:Jy(e.presences)}}function Zf(o){if(!o)throw new Error("bytes is empty");const e=It.fromBinary(o);return Yf(e.body.value)}function eh(o){return qa(o).toBinary()}function nv(o){if(!o)throw new Error("bytes is empty");const e=It.fromBinary(o);return Xf(e.body.value)}function rv(o){return jf(o).toBinary()}function iv(o){if(!o)throw new Error("bytes is empty");const e=It.fromBinary(o);return Qf(e.body.value)}function sv(o){return Vf(o).toBinary()}function th(o){return o?Array.from(o).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Xa(o){return th(o)}function nh(o){return new Uint8Array(o.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Qa(o){return nh(o)}function ov(o){const e=qs.fromBinary(o);return Jf(e)}function av(o){const e=Ra.fromBinary(o);return Hf(e)}const _e={fromPresence:Ha,toChangePack:jy,fromChangePack:Xy,fromChanges:Gf,objectToBytes:eh,bytesToObject:Zf,bytesToSnapshot:tv,bytesToHex:th,hexToBytes:nh,toHexString:Xa,toUint8Array:Qa,toOperation:zf,toChangeID:Bf,PbChangeID:qs,bytesToChangeID:ov,bytesToOperation:av};function rh(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,o=>{const e=Math.random()*16|0;return(o==="x"?e:e&3|8).toString(16)})}class lv{constructor(e,r,s,a){u(this,"reconnectStreamDelay"),u(this,"doc"),u(this,"docID"),u(this,"syncMode"),u(this,"remoteChangeEventReceived"),u(this,"watchStream"),u(this,"watchLoopTimerID"),u(this,"watchAbortController"),this.reconnectStreamDelay=e,this.doc=r,this.docID=s,this.syncMode=a,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Xi.RealtimeSyncOff?!1:this.syncMode===Xi.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Xi.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const r=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(r,this.reconnectStreamDelay)})}catch{}};await r()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Za=()=>{};class uv{constructor(e){u(this,"finalized",!1),u(this,"observers",[]),u(this,"finalError");try{e(this)}catch(r){this.error(r)}}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,s){let a;e||_.fatal("missing observer"),this.finalized&&_.fatal("observable is finalized due to previous error"),typeof e=="object"?a=e:a={next:e,error:r,complete:s},a.next===void 0&&(a.next=Za),a.error===void 0&&(a.error=Za),a.complete===void 0&&(a.complete=Za);const f=rh(),h=this.unsubscribeOne.bind(this,f);if(this.observers.push({subscriptionID:f,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(g){_.warn(g)}return h}unsubscribeOne(e){var r;this.observers=(r=this.observers)==null?void 0:r.filter(s=>s.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e].observer)}catch(s){_.error(s)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function cv(o){const e=new uv(o);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Hr{constructor(e,r,s,a){u(this,"id"),u(this,"delimiter"),u(this,"message"),u(this,"root"),u(this,"operations"),u(this,"presenceChange"),u(this,"previousPresence"),u(this,"reversePresenceKeys"),this.id=e,this.delimiter=Fa,this.root=r,this.operations=[],this.previousPresence=Bt(s),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(e,r,s,a){return new Hr(e,r,s,a)}push(e){this.operations.push(e)}registerElement(e,r){this.root.registerElement(e,r)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return pr.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,r){for(const s of Object.keys(e))r!=null&&r.addToHistory?this.reversePresenceKeys.add(s):this.reversePresenceKeys.delete(s)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const r of this.reversePresenceKeys)e[r]=this.previousPresence[r];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class Wi{constructor(e){u(this,"rootObject"),u(this,"elementPairMapByCreatedAt"),u(this,"gcElementSetByCreatedAt"),u(this,"gcPairMap"),this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(r=>{if(r.getRemovedAt()&&this.registerRemovedElement(r),r instanceof Nt||r instanceof xt)for(const s of r.getGCPairs())this.registerGCPair(s);return!1})}static create(){return new Wi(st.create($t))}findByCreatedAt(e){const r=this.elementPairMapByCreatedAt.get(e.toIDString());if(r)return r.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let r=this.elementPairMapByCreatedAt.get(e.toIDString());if(!r)return[];const s=[];for(;r.parent;){const a=r.element.getCreatedAt(),f=r.parent.subPathOf(a);f===void 0&&_.fatal(`cant find the given element: ${a.toIDString()}`),s.unshift(f),r=this.elementPairMapByCreatedAt.get(r.parent.getCreatedAt().toIDString())}return s.unshift("$"),s}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,r){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:r,element:e}),e instanceof Bn&&e.getDescendants((s,a)=>(this.registerElement(s,a),!1))}deregisterElement(e){let r=0;const s=a=>{const f=a.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(f),this.gcElementSetByCreatedAt.delete(f),r++};return s(e),e instanceof Bn&&e.getDescendants(a=>(s(a),!1)),r}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const r of this.gcElementSetByCreatedAt){e.add(r);const s=this.elementPairMapByCreatedAt.get(r);s.element instanceof Bn&&s.element.getDescendants(a=>(e.add(a.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new Wi(this.rootObject.deepcopy())}garbageCollect(e){let r=0;for(const s of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(s);a.element.getRemovedAt()&&e.compare(a.element.getRemovedAt())>=0&&(a.parent.purge(a.element),r+=this.deregisterElement(a.element))}for(const[,s]of this.gcPairMap){const a=s.child.getRemovedAt();a!==void 0&&e.compare(a)>=0&&(s.parent.purge(s.child),this.gcPairMap.delete(s.child.toIDString()),r+=1)}return r}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function ih(o,e){const r=new qi(o);return new Proxy(e,r.getHandlers())}class qi{constructor(e){u(this,"context"),u(this,"handlers"),this.context=e,this.handlers={set:(r,s,a)=>(_.isEnabled(gt.Trivial)&&_.trivial(`obj[${s}]=${JSON.stringify(a)}`),qi.setInternal(e,r,s,a),!0),get:(r,s)=>(_.isEnabled(gt.Trivial)&&_.trivial(`obj[${s}]`),s==="getID"?()=>r.getCreatedAt():s==="toJSON"||s==="toString"?()=>r.toJSON():s==="toJS"?()=>r.toJS():s==="toJSForTest"?()=>r.toJSForTest():mr(e,r.get(s))),ownKeys:r=>r.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(r,s)=>(_.isEnabled(gt.Trivial)&&_.trivial(`obj[${s}]`),qi.deleteInternal(e,r,s),!0)}}static setInternal(e,r,s,a){if(s.includes("."))throw new le(se.InvalidObjectKey,"key must not contain the '.'.");const f=e.issueTimeTicket(),h=io(e,a,f),g=r.set(s,h,f);e.registerElement(h,r),g&&e.registerRemovedElement(g),e.push(dr.create(s,h.deepcopy(),r.getCreatedAt(),f))}static buildObjectMembers(e,r){const s={};for(const[a,f]of Object.entries(r)){if(a.includes("."))throw new le(se.InvalidObjectKey,"key must not contain the '.'.");const h=e.issueTimeTicket(),g=io(e,f,h);s[a]=g}return s}static deleteInternal(e,r,s){const a=e.issueTimeTicket(),f=r.deleteByKey(s,a);f&&(e.push($n.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f))}getHandlers(){return this.handlers}}function fv(o,e){const r=new Ne(o,e);return new Proxy(e,r.getHandlers())}function hv(o){return typeof o=="string"||o instanceof String?!isNaN(o):!1}function dv(o){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(o)}class Ne{constructor(e,r){u(this,"context"),u(this,"handlers"),u(this,"array"),this.context=e,this.array=r,this.handlers={get:(s,a,f)=>a==="getID"?()=>s.getCreatedAt():a==="getElementByID"?h=>{const g=s.getByID(h);if(!(!g||g.isRemoved()))return jn(e,g)}:a==="getElementByIndex"?h=>{const g=s.get(h);return jn(e,g)}:a==="getLast"?()=>jn(e,s.getLast()):a==="deleteByID"?h=>{const g=Ne.deleteInternalByID(e,s,h);return jn(e,g)}:a==="insertAfter"?(h,g)=>{const p=Ne.insertAfterInternal(e,s,h,g);return jn(e,p)}:a==="insertBefore"?(h,g)=>{const p=Ne.insertBeforeInternal(e,s,h,g);return jn(e,p)}:a==="moveBefore"?(h,g)=>{Ne.moveBeforeInternal(e,s,h,g)}:a==="moveAfter"?(h,g)=>{Ne.moveAfterInternal(e,s,h,g)}:a==="moveFront"?h=>{Ne.moveFrontInternal(e,s,h)}:a==="moveLast"?h=>{Ne.moveLastInternal(e,s,h)}:hv(a)?mr(e,s.get(Number(a))):a==="push"?h=>Ne.pushInternal(e,s,h):a==="splice"?(h,g,...p)=>Ne.splice(e,s,h,g,...p):a==="length"?s.length:typeof a=="symbol"&&a===Symbol.iterator?Ne.iteratorInternal.bind(this,e,s):a==="includes"?(h,g)=>Ne.includes(e,s,h,g):a==="indexOf"?(h,g)=>Ne.indexOf(e,s,h,g):a==="lastIndexOf"?(h,g)=>Ne.lastIndexOf(e,s,h,g):a==="toJSForTest"?()=>s.toJSForTest():a==="toTestString"?()=>Ne.toTestString(s):typeof a=="string"&&dv(a)?(...h)=>{const g=Array.from(s).map(p=>mr(e,p));return Array.prototype[a].apply(g,h)}:Reflect.get(s,a,f),deleteProperty:(s,a)=>(_.isEnabled(gt.Trivial)&&_.trivial(`array[${a}]`),Ne.deleteInternalByIndex(e,s,Number.parseInt(a)),!0)}}static*iteratorInternal(e,r){for(const s of r)yield jn(e,s)}static buildArrayElements(e,r){const s=[];for(const a of r){const f=e.issueTimeTicket(),h=io(e,a,f);s.push(h)}return s}static pushInternal(e,r,s){return Ne.insertAfterInternal(e,r,r.getLastCreatedAt(),s),r.length}static moveBeforeInternal(e,r,s,a){const f=e.issueTimeTicket(),h=r.getPrevCreatedAt(s);r.moveAfter(h,a,f),e.push(Un.create(r.getCreatedAt(),h,a,f))}static moveAfterInternal(e,r,s,a){const f=e.issueTimeTicket();r.moveAfter(s,a,f),e.push(Un.create(r.getCreatedAt(),s,a,f))}static moveFrontInternal(e,r,s){const a=e.issueTimeTicket(),f=r.getHead();r.moveAfter(f.getCreatedAt(),s,a),e.push(Un.create(r.getCreatedAt(),f.getCreatedAt(),s,a))}static moveLastInternal(e,r,s){const a=e.issueTimeTicket(),f=r.getLastCreatedAt();r.moveAfter(f,s,a),e.push(Un.create(r.getCreatedAt(),f,s,a))}static insertAfterInternal(e,r,s,a){const f=e.issueTimeTicket(),h=io(e,a,f);return r.insertAfter(s,h),e.registerElement(h,r),e.push($i.create(r.getCreatedAt(),s,h.deepcopy(),f)),h}static insertBeforeInternal(e,r,s,a){return Ne.insertAfterInternal(e,r,r.getPrevCreatedAt(s),a)}static deleteInternalByIndex(e,r,s){const a=e.issueTimeTicket(),f=r.deleteByIndex(s,a);if(f)return e.push($n.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f),f}static deleteInternalByID(e,r,s){const a=e.issueTimeTicket(),f=r.delete(s,a);return e.push($n.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f),f}static splice(e,r,s,a,...f){const h=r.length,g=s>=0?Math.min(s,h):Math.max(h+s,0),p=a===void 0?h:a<0?g:Math.min(g+a,h),y=[];for(let A=g;A<p;A++){const D=Ne.deleteInternalByIndex(e,r,g);if(D){const T=D.deepcopy();T.setRemovedAt(),y.push(mr(e,T))}}if(f){let A=g===0?r.getHead().getID():r.get(g-1).getID();for(const D of f)A=Ne.insertAfterInternal(e,r,A,D).getID()}return y}static includes(e,r,s,a){var f;const h=r.length,g=a===void 0?0:a<0?Math.max(a+h,0):a;if(g>=h)return!1;if(Te.isSupport(s))return Array.from(r).map(y=>mr(e,y)).includes(s,g);for(let p=g;p<h;p++)if(((f=r.get(p))==null?void 0:f.getID())===s.getID())return!0;return!1}static indexOf(e,r,s,a){var f;const h=r.length,g=a===void 0?0:a<0?Math.max(a+h,0):a;if(g>=h)return-1;if(Te.isSupport(s))return Array.from(r).map(y=>mr(e,y)).indexOf(s,g);for(let p=g;p<h;p++)if(((f=r.get(p))==null?void 0:f.getID())===s.getID())return p;return-1}static lastIndexOf(e,r,s,a){var f;const h=r.length,g=a===void 0||a>=h?h-1:a<0?a+h:a;if(g<0)return-1;if(Te.isSupport(s))return Array.from(r).map(y=>mr(e,y)).lastIndexOf(s,g);for(let p=g;p>0;p--)if(((f=r.get(p))==null?void 0:f.getID())===s.getID())return p;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Hi{constructor(e,r){u(this,"context"),u(this,"text"),this.context=e,this.text=r}initialize(e,r){this.context=e,this.text=r}getID(){return this.text.getID()}edit(e,r,s,a){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}if(e>r){_.fatal("from should be less than or equal to to");return}const f=this.text.indexRangeToPosRange(e,r);_.isEnabled(gt.Debug)&&_.debug(`EDIT: f:${e}->${f[0].toTestString()}, t:${r}->${f[1].toTestString()} c:${s}`);const h=a?jr(a):void 0,g=this.context.issueTimeTicket(),[p,,y,A]=this.text.edit(f,s,g,h);for(const D of y)this.context.registerGCPair(D);return this.context.push(new zi(this.text.getCreatedAt(),f[0],f[1],p,s,h?new Map(Object.entries(h)):new Map,g)),this.text.findIndexesFromRange(A)}delete(e,r){return this.edit(e,r,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,r,s){if(!this.context||!this.text)return _.fatal("it is not initialized yet"),!1;if(e>r)return _.fatal("from should be less than or equal to to"),!1;const a=this.text.indexRangeToPosRange(e,r);_.isEnabled(gt.Debug)&&_.debug(`STYL: f:${e}->${a[0].toTestString()}, t:${r}->${a[1].toTestString()} a:${JSON.stringify(s)}`);const f=jr(s),h=this.context.issueTimeTicket(),[g,p]=this.text.setStyle(a,f,h);for(const y of p)this.context.registerGCPair(y);return this.context.push(new Fi(this.text.getCreatedAt(),a[0],a[1],g,new Map(Object.entries(f)),h)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}const r=this.text.indexRangeToPosRange(e[0],e[1]);return[r[0].toStruct(),r[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}const r=this.text.findIndexesFromRange([Ft.fromStruct(e[0]),Ft.fromStruct(e[1])]);return[r[0],r[1]]}toTestString(){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(_.fatal("it is not initialized yet"),""):this.text.toString()}toJSON(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,r){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,r)}}class Gi{constructor(e,r){u(this,"valueType"),u(this,"value"),u(this,"context"),u(this,"counter"),this.valueType=e,this.value=r}initialize(e,r){this.valueType=r.getValueType(),this.context=e,this.counter=r,this.value=r.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){_.fatal("it is not initialized yet");return}const r=this.context.issueTimeTicket(),s=Te.of(e,r);if(!s.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof s.getValue()}`);return this.counter.increase(s),this.context.push(Wr.create(this.counter.getCreatedAt(),s,r)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function el(o,e,r){const{type:s}=o,a=r.issueTimeTicket();if(s===kn){sh(o);const{value:f}=o,h=mt.create(Fe.of(a,0),s,f);e.append(h)}else{const{children:f=[]}=o;let{attributes:h}=o,g;if(typeof h=="object"&&!Pf(h)){h=jr(h),g=new Tn;for(const[y,A]of Object.entries(h))g.set(y,A,a)}const p=mt.create(Fe.of(a,0),s,void 0,g);e.append(p);for(const y of f)el(y,p,r)}}function gv(o,e){const{type:r}=e,s=o.issueTimeTicket();let a;if(e.type===kn){const{value:f}=e;a=mt.create(Fe.of(s,0),r,f)}else if(e){const{children:f=[]}=e;let{attributes:h}=e,g;if(typeof h=="object"&&!Pf(h)){h=jr(h),g=new Tn;for(const[p,y]of Object.entries(h))g.set(p,y,s)}a=mt.create(Fe.of(o.issueTimeTicket(),0),r,void 0,g);for(const p of f)el(p,a,o)}return a}function sh(o){if(!o.value.length)throw new Error("text node cannot have empty value");return!0}function oh(o){if(!o.length)return!0;if(o[0].type===kn)for(const r of o){const{type:s}=r;if(s!==kn)throw new Error("element node and text node cannot be passed together");sh(r)}else for(const r of o){const{type:s}=r;if(s===kn)throw new Error("element node and text node cannot be passed together")}return!0}class Yi{constructor(e){u(this,"initialRoot"),u(this,"context"),u(this,"tree"),this.initialRoot=e}initialize(e,r){this.context=e,this.tree=r}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return mt.create(Fe.of(e.issueTimeTicket(),0),py);const r=mt.create(Fe.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const s of this.initialRoot.children)el(s,r,e);return r}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[s,a]=this.tree.pathToPosRange(e),f=this.context.issueTimeTicket(),h=r?jr(r):void 0,[g]=this.tree.style([s,a],h,f);this.context.push(An.create(this.tree.getCreatedAt(),s,a,g,h?new Map(Object.entries(h)):new Map,f))}style(e,r,s){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const a=this.tree.findPos(e),f=this.tree.findPos(r),h=this.context.issueTimeTicket(),g=s?jr(s):void 0,[p,y]=this.tree.style([a,f],g,h);for(const A of y)this.context.registerGCPair(A);this.context.push(An.create(this.tree.getCreatedAt(),a,f,p,g?new Map(Object.entries(g)):new Map,h))}removeStyle(e,r,s){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const a=this.tree.findPos(e),f=this.tree.findPos(r),h=this.context.issueTimeTicket(),[g,p]=this.tree.removeStyle([a,f],s,h);for(const y of p)this.context.registerGCPair(y);this.context.push(An.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,f,g,s,h))}editInternal(e,r,s,a=0){var f;if(s.length!==0&&s[0]&&(oh(s),s[0].type!==kn))for(const A of s){const{children:D=[]}=A;oh(D)}const h=this.context.getLastTimeTicket();let g=new Array;if(((f=s[0])==null?void 0:f.type)===kn){let A="";for(const D of s){const{value:T}=D;A+=T}g.push(mt.create(Fe.of(this.context.issueTimeTicket(),0),kn,A))}else g=s.map(A=>A&&gv(this.context,A)).filter(A=>A);const[,p,y]=this.tree.edit([e,r],g.length?g.map(A=>A==null?void 0:A.deepcopy()):void 0,a,h,()=>this.context.issueTimeTicket());for(const A of p)this.context.registerGCPair(A);return this.context.push(Vi.create(this.tree.getCreatedAt(),e,r,g.length?g:void 0,a,y,h)),!0}editByPath(e,r,s,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==r.length)throw new Error("path length should be equal");if(!e.length||!r.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),h=this.tree.pathToPos(r);return this.editInternal(f,h,s?[s]:[],a)}editBulkByPath(e,r,s,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==r.length)throw new Error("path length should be equal");if(!e.length||!r.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),h=this.tree.pathToPos(r);return this.editInternal(f,h,s,a)}edit(e,r,s,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),h=this.tree.findPos(r);return this.editInternal(f,h,s?[s]:[],a)}editBulk(e,r,s,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),h=this.tree.findPos(r);return this.editInternal(f,h,s,a)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){_.fatal("it is not initialized yet");return}const r=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],s=this.tree.indexRangeToPosRange(r);return[s[0].toStruct(),s[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){_.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){_.fatal("it is not initialized yet");return}const r=[zt.fromStruct(e[0]),zt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(r)}posRangeToPathRange(e){if(!this.context||!this.tree){_.fatal("it is not initialized yet");return}const r=[zt.fromStruct(e[0]),zt.fromStruct(e[1])];return this.tree.posRangeToPathRange(r)}}function ah(o,e){return ih(o,e)}function jn(o,e){if(e){if(e instanceof Te)return e;if(e instanceof st)return ih(o,e);if(e instanceof pt)return fv(o,e);if(e instanceof Nt)return new Hi(o,e);if(e instanceof yt){const r=new Gi(ln.IntegerCnt,0);return r.initialize(o,e),r}else if(e instanceof xt){const r=new Yi;return r.initialize(o,e),r}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function mr(o,e){const r=jn(o,e);return r instanceof Te?r.getValue():r}function io(o,e,r){let s;if(Te.isSupport(e))s=Te.of(e,r);else if(Array.isArray(e))s=pt.create(r,Ne.buildArrayElements(o,e));else if(typeof e=="object")e instanceof Hi?(s=Nt.create(Kr.create(),r),e.initialize(o,s)):e instanceof Gi?(s=yt.create(e.getValueType(),e.getValue(),r),e.initialize(o,s)):e instanceof Yi?(s=xt.create(e.buildRoot(o),r),e.initialize(o,s)):s=st.create(r,qi.buildObjectMembers(o,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return s}const lh=50;class pv{constructor(){u(this,"undoStack",[]),u(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=lh&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=lh&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const uh="yorkie-devtools-panel",ch="yorkie-devtools-sdk";let Gr="disconnected";const fh=new Map,so=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=so);function oo(o,e){(e!=null&&e.force||Gr!=="disconnected")&&window.postMessage({source:ch,...o},"*")}function mv(o){if(!o.isEnableDevtools()||typeof window>"u"||fh.has(o.getKey()))return;so.set(o.getKey(),[]);const e=o.subscribe("all",r=>{r.some(s=>s.type!==Ze.StatusChanged&&s.type!==Ze.Snapshot&&s.type!==Ze.LocalChange&&s.type!==Ze.RemoteChange&&s.type!==Ze.Initialized&&s.type!==Ze.Watched&&s.type!==Ze.Unwatched&&s.type!==Ze.PresenceChanged)||(so.get(o.getKey()).push(r),Gr==="synced"&&oo({msg:"doc::sync::partial",docKey:o.getKey(),event:r}))});fh.set(o.getKey(),[e]),oo({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",r=>{var s;if(((s=r.data)==null?void 0:s.source)!==uh)return;switch(r.data.msg){case"devtools::connect":if(Gr!=="disconnected")break;Gr="connected",oo({msg:"doc::available",docKey:o.getKey()}),_.info(`[YD] Devtools connected. Doc: ${o.getKey()}`);break;case"devtools::disconnect":Gr="disconnected",_.info(`[YD] Devtools disconnected. Doc: ${o.getKey()}`);break;case"devtools::subscribe":Gr="synced",oo({msg:"doc::sync::full",docKey:o.getKey(),events:so.get(o.getKey())}),_.info(`[YD] Devtools subscribed. Doc: ${o.getKey()}`);break}})}var In=(o=>(o.Detached="detached",o.Attached="attached",o.Removed="removed",o))(In||{}),Ze=(o=>(o.StatusChanged="status-changed",o.ConnectionChanged="connection-changed",o.SyncStatusChanged="sync-status-changed",o.Snapshot="snapshot",o.LocalChange="local-change",o.RemoteChange="remote-change",o.Initialized="initialized",o.Watched="watched",o.Unwatched="unwatched",o.PresenceChanged="presence-changed",o))(Ze||{}),ao=(o=>(o.Connected="connected",o.Disconnected="disconnected",o))(ao||{}),lo=(o=>(o.Synced="synced",o.SyncFailed="sync-failed",o))(lo||{});class tl{constructor(e,r){u(this,"key"),u(this,"status"),u(this,"opts"),u(this,"changeID"),u(this,"checkpoint"),u(this,"localChanges"),u(this,"root"),u(this,"clone"),u(this,"eventStream"),u(this,"eventStreamObserver"),u(this,"onlineClients"),u(this,"presences"),u(this,"history"),u(this,"internalHistory"),u(this,"isUpdating"),this.opts=r||{},this.key=e,this.status="detached",this.root=Wi.create(),this.changeID=Ay,this.checkpoint=Iy,this.localChanges=[],this.eventStream=cv(s=>{this.eventStreamObserver=s}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new pv,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},mv(this)}update(e,r){if(this.getStatus()==="removed")throw new le(se.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const s=this.changeID.getActorID(),a=Hr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(s)||{},r);try{const f=ah(a,this.clone.root.getObject());this.presences.has(s)||this.clone.presences.set(s,{}),this.isUpdating=!0,e(f,new za(a,this.clone.presences.get(s)))}catch(f){throw this.clone=void 0,_.error(f),f}finally{this.isUpdating=!1}if(a.hasChange()){_.isEnabled(gt.Trivial)&&_.trivial(`trying to update a local change: ${this.toJSON()}`);const f=a.getChange(),{opInfos:h,reverseOps:g}=f.execute(this.root,this.presences,ge.Local),p=a.getReversePresence();p&&g.push({type:"presence",value:p}),this.localChanges.push(f),g.length>0&&this.internalHistory.pushUndo(g),h.length>0&&this.internalHistory.clearRedo(),this.changeID=f.getID();const y=[];h.length>0&&y.push({type:"local-change",source:ge.Local,value:{message:f.getMessage()||"",operations:h,actor:s,clientSeq:f.getID().getClientSeq(),serverSeq:f.getID().getServerSeq()},rawChange:this.isEnableDevtools()?f.toStruct():void 0}),f.hasPresenceChange()&&y.push({type:"presence-changed",source:ge.Local,value:{clientID:s,presence:this.getPresence(s)}}),this.publish(y),_.isEnabled(gt.Trivial)&&_.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,r,s,a){if(typeof e=="string"){if(typeof r!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const g=r;return this.eventStream.subscribe(p=>{for(const y of p)y.type!=="initialized"&&y.type!=="watched"&&y.type!=="unwatched"&&y.type!=="presence-changed"||g(y)},s,a)}if(e==="my-presence"){const g=r;return this.eventStream.subscribe(p=>{for(const y of p)y.type!=="initialized"&&y.type!=="presence-changed"||y.type==="presence-changed"&&y.value.clientID!==this.changeID.getActorID()||g(y)},s,a)}if(e==="others"){const g=r;return this.eventStream.subscribe(p=>{for(const y of p)y.type!=="watched"&&y.type!=="unwatched"&&y.type!=="presence-changed"||y.value.clientID!==this.changeID.getActorID()&&g(y)},s,a)}if(e==="connection"){const g=r;return this.eventStream.subscribe(p=>{for(const y of p)y.type==="connection-changed"&&g(y)},s,a)}if(e==="status"){const g=r;return this.eventStream.subscribe(p=>{for(const y of p)y.type==="status-changed"&&g(y)},s,a)}if(e==="sync"){const g=r;return this.eventStream.subscribe(p=>{for(const y of p)y.type==="sync-status-changed"&&g(y)},s,a)}if(e==="all"){const g=r;return this.eventStream.subscribe(g,s,a)}const f=e,h=r;return this.eventStream.subscribe(g=>{for(const p of g){if(p.type!=="local-change"&&p.type!=="remote-change")continue;const y=[];for(const A of p.value.operations)this.isSameElementOrChildOf(A.path,f)&&y.push(A);y.length&&h({...p,value:{...p.value,operations:y}})}},s,a)}if(typeof e=="function"){const f=e,h=r,g=s;return this.eventStream.subscribe(p=>{for(const y of p)y.type!=="snapshot"&&y.type!=="local-change"&&y.type!=="remote-change"||f(y)},h,g)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,r){if(r===e)return!0;const s=e.split(".");return r.split(".").every((f,h)=>f===s[h])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),ge.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),_.isEnabled(gt.Trivial)&&_.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Bt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),r=this.checkpoint.increaseClientSeq(e.length);return Zs.create(this.key,r,!1,e)}setActor(e){for(const r of this.localChanges)r.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Hr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return ah(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,r){const{root:s,presences:a}=_e.bytesToSnapshot(r);this.root=new Wi(s),this.presences=a,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:ge.Remote,value:{snapshot:this.isEnableDevtools()?_e.bytesToHex(r):void 0,serverSeq:e.toString()}}])}applyChanges(e,r){_.isEnabled(gt.Debug)&&_.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),_.isEnabled(gt.Trivial)&&_.trivial(e.map(s=>`${s.getID().toTestString()}	${s.toTestString()}`).join(`
`));for(const s of e)this.applyChange(s,r);_.isEnabled(gt.Debug)&&_.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,r){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,r);const s=[],a=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(a)){const h=e.getPresenceChange();switch(h.type){case Mn.Put:s.push(this.presences.has(a)?{type:"presence-changed",source:r,value:{clientID:a,presence:h.presence}}:{type:"watched",source:ge.Remote,value:{clientID:a,presence:h.presence}});break;case Mn.Clear:s.push({type:"unwatched",source:ge.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:f}=e.execute(this.root,this.presences,r);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),f.length>0){const h=this.isEnableDevtools()?e.toStruct():void 0;s.push(r===ge.Remote?{type:"remote-change",source:r,value:{actor:a,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:f},rawChange:h}:{type:"local-change",source:r,value:{actor:a,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:f},rawChange:h})}s.length>0&&this.publish(s)}applyWatchStream(e){if(e.body.case==="initialization"){const r=e.body.value.clientIds,s=new Set;for(const a of r)a!==this.changeID.getActorID()&&s.add(a);this.setOnlineClients(s),this.publish([{type:"initialized",source:ge.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:r,publisher:s}=e.body.value,a=[];if(r===Ws.DOCUMENT_WATCHED)this.addOnlineClient(s),this.hasPresence(s)&&a.push({type:"watched",source:ge.Remote,value:{clientID:s,presence:this.getPresence(s)}});else if(r===Ws.DOCUMENT_UNWATCHED){const f=this.getPresence(s);this.removeOnlineClient(s),f&&a.push({type:"unwatched",source:ge.Remote,value:{clientID:s,presence:f}})}a.length>0&&this.publish(a)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Ys),this.publish([{source:e==="removed"?ge.Remote:ge.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:r,serverSeq:s}=e.value;if(!r)return;this.applySnapshot(X.fromString(s),_e.hexToBytes(r));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const r=pr.fromStruct(e.rawChange);this.applyChange(r,e.source)}if(e.type==="initialized"){const r=new Set;for(const{clientID:s,presence:a}of e.value)r.add(s),this.presences.set(s,a);this.setOnlineClients(r);return}if(e.type==="watched"){const{clientID:r,presence:s}=e.value;this.addOnlineClient(r),this.presences.set(r,s);return}if(e.type==="unwatched"){const{clientID:r}=e.value;this.removeOnlineClient(r),this.presences.delete(r)}if(e.type==="presence-changed"){const{clientID:r,presence:s}=e.value;this.presences.set(r,s)}}applyTransactionEvent(e){for(const r of e)this.applyDocEvent(r)}getValueByPath(e){if(!e.startsWith("$"))throw new le(se.InvalidArgument,'path must start with "$"');const r=e.split(".");r.shift();let s=this.getRoot();for(const a of r)if(s=s[a],s===void 0)return;return s}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Bt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const r=this.presences.get(e);return r?Bt(r):void 0}getPresenceForTest(e){const r=this.presences.get(e);return r?Bt(r):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Bt(this.getMyPresence())});for(const r of this.onlineClients)this.presences.has(r)&&e.push({clientID:r,presence:Bt(this.presences.get(r))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(r=>r.clientID!==e).sort((r,s)=>r.clientID>s.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const r=Hr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const y of e){if(!(y instanceof Ut)){new za(r,Bt(this.clone.presences.get(this.changeID.getActorID()))).set(y.value,{addToHistory:!0});continue}const A=r.issueTimeTicket();y.setExecutedAt(A),r.push(y)}const s=r.getChange();s.execute(this.clone.root,this.clone.presences,ge.UndoRedo);const{opInfos:a,reverseOps:f}=s.execute(this.root,this.presences,ge.UndoRedo),h=r.getReversePresence();if(h&&f.push({type:"presence",value:h}),f.length>0&&this.internalHistory.pushRedo(f),!s.hasPresenceChange()&&a.length===0)return;this.localChanges.push(s),this.changeID=s.getID();const g=this.changeID.getActorID(),p=[];a.length>0&&p.push({type:"local-change",source:ge.UndoRedo,value:{message:s.getMessage()||"",operations:a,actor:g,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&p.push({type:"presence-changed",source:ge.UndoRedo,value:{clientID:g,presence:this.getPresence(g)}}),this.publish(p)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const r=Hr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const y of e){if(!(y instanceof Ut)){new za(r,Bt(this.clone.presences.get(this.changeID.getActorID()))).set(y.value,{addToHistory:!0});continue}const A=r.issueTimeTicket();y.setExecutedAt(A),r.push(y)}const s=r.getChange();s.execute(this.clone.root,this.clone.presences,ge.UndoRedo);const{opInfos:a,reverseOps:f}=s.execute(this.root,this.presences,ge.UndoRedo),h=r.getReversePresence();if(h&&f.push({type:"presence",value:h}),f.length>0&&this.internalHistory.pushUndo(f),!s.hasPresenceChange()&&a.length===0)return;this.localChanges.push(s),this.changeID=s.getID();const g=this.changeID.getActorID(),p=[];a.length>0&&p.push({type:"local-change",source:ge.UndoRedo,value:{message:s.getMessage()||"",operations:a,actor:g,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&p.push({type:"presence-changed",source:ge.UndoRedo,value:{clientID:g,presence:this.getPresence(g)}}),this.publish(p)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function yv(o,e){return r=>async s=>(o&&s.header.set("x-api-key",o),e&&s.header.set("authorization",e),await r(s))}const hh={name:"yorkie-js-sdk",version:"0.4.25",description:"Yorkie JS SDK",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts",files:["dist"],scripts:{build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:examples":"npm run build --workspace examples","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"npm run build"},engines:{node:">=18.0.0",npm:">=7.1.0"},repository:{type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},author:{name:"hackerwins",email:"susukang98@gmail.com"},license:"Apache-2.0",bugs:{url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},homepage:"https://github.com/yorkie-team/yorkie-js-sdk#readme",devDependencies:{"@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.2.0","@types/google-protobuf":"^3.15.5","@types/jsdom":"^21.1.3","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",jsdom:"^22.1.0",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^4.7.4","typescript-transform-paths":"^3.3.1",vite:"^4.4.9","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5","vitest-environment-custom-jsdom":"file:test/vitest/env"},dependencies:{"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.2.0","@connectrpc/connect-web":"^1.2.0",long:"^5.2.0"},husky:{hooks:{"pre-commit":"npm run lint"}},workspaces:["examples/*"]};function vv(){return o=>async e=>(e.header.set("x-yorkie-user-agent",hh.name+"/"+hh.version),await o(e))}var Xi=(o=>(o.Manual="manual",o.Realtime="realtime",o.RealtimePushOnly="realtime-pushonly",o.RealtimeSyncOff="realtime-syncoff",o))(Xi||{}),dh=(o=>(o.Deactivated="deactivated",o.Activated="activated",o))(dh||{});const uo={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class nl{constructor(e,r){u(this,"id"),u(this,"key"),u(this,"status"),u(this,"attachmentMap"),u(this,"apiKey"),u(this,"syncLoopDuration"),u(this,"reconnectStreamDelay"),u(this,"retrySyncLoopDelay"),u(this,"rpcClient"),r=r||uo,this.key=r.key?r.key:rh(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=r.apiKey||"",this.syncLoopDuration=r.syncLoopDuration||uo.syncLoopDuration,this.reconnectStreamDelay=r.reconnectStreamDelay||uo.reconnectStreamDelay,this.retrySyncLoopDelay=r.retrySyncLoopDelay||uo.retrySyncLoopDelay,this.rpcClient=mm(ly,Um({baseUrl:e,interceptors:[yv(r.apiKey,r.token),vv()]}))}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),_.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw _.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){return this.status==="deactivated"?Promise.resolve():this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{for(const[e,r]of this.attachmentMap)r.doc.applyStatus(In.Detached),this.detachInternal(e);this.status="deactivated",_.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw _.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,r={}){if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==In.Detached)throw new le(se.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((a,f)=>f.set(r.initialPresence||{}));const s=r.syncMode??"realtime";return this.rpcClient.attachDocument({clientId:this.id,changePack:_e.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async a=>{const f=_e.fromChangePack(a.changePack);return e.applyChangePack(f),e.getStatus()===In.Removed||(e.applyStatus(In.Attached),this.attachmentMap.set(e.getKey(),new lv(this.reconnectStreamDelay,e,a.documentId,s)),s!=="manual"&&await this.runWatchLoop(e.getKey()),_.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(a=>{throw _.error(`[AD] c:"${this.getKey()}" err :`,a),a})}detach(e,r={}){if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);const s=this.attachmentMap.get(e.getKey());if(!s)throw new le(se.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((a,f)=>f.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:s.docID,changePack:_e.toChangePack(e.createChangePack()),removeIfNotAttached:r.removeIfNotAttached??!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(a=>{const f=_e.fromChangePack(a.changePack);return e.applyChangePack(f),e.getStatus()!==In.Removed&&e.applyStatus(In.Detached),this.detachInternal(e.getKey()),_.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(a=>{throw _.error(`[DD] c:"${this.getKey()}" err :`,a),a})}async changeSyncMode(e,r){if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);const s=this.attachmentMap.get(e.getKey());if(!s)throw new le(se.DocumentNotAttached,`${e.getKey()} is not attached`);const a=s.syncMode;return a===r?e:(s.changeSyncMode(r),r==="manual"?(s.cancelWatchStream(),e):(r==="realtime"&&(s.remoteChangeEventReceived=!0),a==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);const r=[];if(e){const s=this.attachmentMap.get(e.getKey());if(!s)throw new le(se.DocumentNotAttached,`${e.getKey()} is not attached`);r.push(this.syncInternal(s,"realtime"))}else this.attachmentMap.forEach(s=>{r.push(this.syncInternal(s,s.syncMode))});return Promise.all(r)}remove(e){if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new le(se.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const s=_e.toChangePack(e.createChangePack());return s.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:r.docID,changePack:s},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(a=>{const f=_e.fromChangePack(a.changePack);e.applyChangePack(f),this.detachInternal(e.getKey()),_.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(a=>{throw _.error(`[RD] c:"${this.getKey()}" err :`,a),a})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){_.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const r=[];for(const[,s]of this.attachmentMap)s.needRealtimeSync()&&(s.remoteChangeEventReceived=!1,r.push(this.syncInternal(s,s.syncMode)));Promise.all(r).then(()=>setTimeout(e,this.syncLoopDuration)).catch(s=>{_.error(`[SL] c:"${this.getKey()}" sync failed:`,s),setTimeout(e,this.retrySyncLoopDelay)})};_.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const r=this.attachmentMap.get(e);if(!r)throw new le(se.DocumentNotAttached,`${e} is not attached`);return r.runWatchLoop(s=>{if(!this.isActive())return Promise.reject(new le(se.ClientNotActive,`${this.key} is not active`));const a=new AbortController,f=this.rpcClient.watchDocument({clientId:this.id,documentId:r.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:a.signal});return r.doc.publish([{type:Ze.ConnectionChanged,value:ao.Connected}]),_.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((h,g)=>{(async()=>{try{for await(const y of f)this.handleWatchDocumentsResponse(r,y),y.body.case==="initialization"&&h([f,a])}catch(y){r.doc.resetOnlineClients(),r.doc.publish([{type:Ze.Initialized,source:ge.Local,value:r.doc.getPresences()}]),r.doc.publish([{type:Ze.ConnectionChanged,value:ao.Disconnected}]),_.debug(`[WD] c:"${this.getKey()}" unwatches`),y instanceof be&&y.code!=d.Canceled&&s(),g(y)}})()})})}handleWatchDocumentsResponse(e,r){if(r.body.case==="event"&&r.body.value.type===Ws.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(r)}detachInternal(e){const r=this.attachmentMap.get(e);r&&(r.cancelWatchStream(),_.debug(`[WD] c:"${this.getKey()}" unwatches`),this.attachmentMap.delete(e))}syncInternal(e,r){const{doc:s,docID:a}=e,f=s.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:_e.toChangePack(f),pushOnly:r==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${s.getKey()}`}}).then(h=>{const g=_e.fromChangePack(h.changePack);if(g.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return s;s.applyChangePack(g),e.doc.publish([{type:Ze.SyncStatusChanged,value:lo.Synced}]),s.getStatus()===In.Removed&&this.detachInternal(s.getKey());const p=s.getKey(),y=g.getChangeSize();return _.info(`[PP] c:"${this.getKey()}" sync d:"${p}", push:${f.getChangeSize()} pull:${y} cp:${g.getCheckpoint().toTestString()}`),s}).catch(h=>{throw s.publish([{type:Ze.SyncStatusChanged,value:lo.SyncFailed}]),_.error(`[PP] c:"${this.getKey()}" err :`,h),h})}}const wv=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Sv={Client:nl,Document:tl,Primitive:Te,Text:Hi,Counter:Gi,Tree:Yi,IntType:ln.IntegerCnt,LongType:ln.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:nl,Document:tl,Primitive:Te,Text:Hi,Counter:Gi,Tree:Yi,IntType:ln.IntegerCnt,LongType:ln.LongCnt}),i.Change=pr,i.Client=nl,i.ClientStatus=dh,i.Counter=Gi,i.Devtools=wv,i.DocEventType=Ze,i.Document=tl,i.DocumentStatus=In,i.DocumentSyncStatus=lo,i.EventSourceDevPanel=uh,i.EventSourceSDK=ch,i.OpSource=ge,i.Primitive=Te,i.StreamConnectionStatus=ao,i.SyncMode=Xi,i.Text=Hi,i.TimeTicket=Qe,i.Tree=Yi,i.converter=_e,i.default=Sv,i.setLogLevel=dy,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(Iu,Iu.exports);var Y1=Iu.exports;const Bp=Iv(Y1);class X1{constructor(n,i){this.x=n,this.y=i,this.lifetime=0}}const Q1=({xPos:t,yPos:n})=>{const[i,l]=at.useState([]),c=at.useRef(null),[u,d]=at.useState([]),m=(v,S)=>{const O=new X1(v,S);u.push(O),d(u),i.push(O),l(i)};return at.useEffect(()=>{const S=c.current.getContext("2d"),O=()=>{S.clearRect(0,0,S.canvas.width,S.canvas.height);const P=.7*(1*4e3)/60;for(let N=0;N<u.length;++N){const M=u[N];let B;if(u[N-1]!==void 0?B=u[N-1]:B=M,M.lifetime+=1,M.lifetime>P)u.shift();else{S.lineWidth=5,S.lineJoin="round";const z=0,ce=0,k=0;S.strokeStyle=`rgb(${z},${ce},${k})`,S.beginPath(),S.moveTo(B.x,B.y),S.lineTo(M.x,M.y),S.stroke(),S.closePath()}}requestAnimationFrame(O)};O()},[u]),at.useEffect(()=>{m(t,n)},[t,n]),Pe.jsx("canvas",{className:"pen-cursor-canvas",ref:c,width:document.body.clientWidth,height:document.body.clientHeight})},Z1="_goUp0_1lnal_1",ew="_goUpAnimation0_1lnal_1",tw="_fadeOut_1lnal_1",nw="_goUp1_1lnal_16",rw="_goUpAnimation1_1lnal_1",iw="_goUp2_1lnal_31",sw="_goUpAnimation2_1lnal_1",ow="_leftRight0_1lnal_46",aw="_leftRightAnimation0_1lnal_1",lw="_leftRight1_1lnal_60",uw="_leftRightAnimation1_1lnal_1",cw="_leftRight2_1lnal_74",fw="_leftRightAnimation2_1lnal_1",Pl={goUp0:Z1,goUpAnimation0:ew,fadeOut:tw,goUp1:nw,goUpAnimation1:rw,goUp2:iw,goUpAnimation2:sw,leftRight0:ow,leftRightAnimation0:aw,leftRight1:lw,leftRightAnimation1:uw,leftRight2:cw,leftRightAnimation2:fw};function hw({x:t,y:n,timestamp:i,selectedCursorShape:l}){return Pe.jsx("div",{className:"single-animation-container",children:Pe.jsx("div",{className:`absolute select-none pointer-events-none ${Pl.disappear} text-${i%5+2}xl ${Pl["goUp"+i%3]}`,style:{left:t,top:n},children:Pe.jsx("div",{className:Pl["leftRight"+i%3],children:Pe.jsx("div",{className:"transform -translate-x-1/2 -translate-y-1/2",children:Pe.jsx("img",{src:`./icons/icon_${l}.svg`})})})})})}function Ad(t,n){const i=at.useRef(t);at.useEffect(()=>{i.current=t},[t]),at.useEffect(()=>{function l(){i.current()}if(n!==null){let c=setInterval(l,n);return()=>clearInterval(c)}},[n])}const dw=({pointerDown:t,xPos:n,yPos:i,selectedCursorShape:l})=>{const[c,u]=at.useState([]),d=100;return Ad(()=>{u(m=>m.filter(v=>v.timestamp>Date.now()-4e3))},1e3),Ad(()=>{t&&u(m=>m.concat([{point:{x:n,y:i},timestamp:Date.now()}]))},d),Pe.jsx("div",{style:{transform:`translateX(${n}px) translateY(${i}px)`},children:c.map(m=>Pe.jsx(hw,{x:m.point.x,y:m.point.y,timestamp:m.timestamp,selectedCursorShape:l},m.timestamp.toString()))})},gw=({selectedCursorShape:t,x:n,y:i,pointerDown:l})=>Pe.jsxs(Pe.Fragment,{children:[Pe.jsx("img",{src:`./icons/icon_${t}.svg`,className:`${t}-cursor`,style:{transform:`translate3d(${n}px, ${i}px, 0)`}}),(t==="heart"||t==="thumbs")&&Pe.jsx(dw,{pointerDown:l,xPos:n,yPos:i,selectedCursorShape:t}),t==="pen"&&l&&Pe.jsx(Q1,{xPos:n,yPos:i})]}),pw=({handleCursorShapeSelect:t,clientsLength:n})=>{const[i,l]=at.useState("cursor"),c=["heart","thumbs","pen","cursor"];return Pe.jsxs("div",{className:"cursor-selector-container",children:[Pe.jsx("div",{className:"cursor-selections-container",children:c.map(u=>Pe.jsx("img",{onClick:()=>{t(u),l(u)},className:`${i===u?"cursor-shape-selected":"cursor-shape-not-selected"}`,src:`./icons/icon_${u}.svg`},u))}),Pe.jsx("div",{className:"num-users-container",children:Pe.jsx("p",{children:n!==1?`${n} users are here`:"1 user here"})})]})};const Ol=new Bp.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"}),wr=new Bp.Document("simultaneous-cursors",{enableDevtools:!0}),mw=()=>{const[t,n]=at.useState([]),i=l=>{wr.update((c,u)=>{u.set({cursorShape:l})})};return at.useEffect(()=>{(async()=>{await Ol.activate(),wr.subscribe("presence",m=>{n(wr.getPresences())}),await Ol.attach(wr,{initialPresence:{cursorShape:"cursor",cursor:{xPos:0,yPos:0},pointerDown:!1}}),window.addEventListener("beforeunload",()=>{Ol.deactivate()})})();const c=()=>{wr.update((m,v)=>{v.set({pointerDown:!1})})},u=()=>{wr.update((m,v)=>{v.set({pointerDown:!0})})},d=m=>{wr.update((v,S)=>{S.set({cursor:{xPos:m.clientX,yPos:m.clientY}})})};return window.addEventListener("mousedown",u),window.addEventListener("mouseup",c),window.addEventListener("mousemove",d),()=>{window.removeEventListener("mousedown",u),window.removeEventListener("mouseup",c),window.removeEventListener("mousemove",d)}},[]),Pe.jsxs("div",{className:"general-container",children:[t.map(({clientID:l,presence:{cursorShape:c,cursor:u,pointerDown:d}})=>u?Pe.jsx(gw,{selectedCursorShape:c,x:u.xPos,y:u.yPos,pointerDown:d},l):null),Pe.jsx(pw,{handleCursorShapeSelect:i,clientsLength:t.length})]})};Dl.createRoot(document.getElementById("root")).render(Pe.jsx(mw,{}));
