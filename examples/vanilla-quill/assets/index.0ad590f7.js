(function(){const de=document.createElement("link").relList;if(de&&de.supports&&de.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))C(A);new MutationObserver(A=>{for(const _ of A)if(_.type==="childList")for(const x of _.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&C(x)}).observe(document,{childList:!0,subtree:!0});function $(A){const _={};return A.integrity&&(_.integrity=A.integrity),A.referrerpolicy&&(_.referrerPolicy=A.referrerpolicy),A.crossorigin==="use-credentials"?_.credentials="include":A.crossorigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function C(A){if(A.ep)return;A.ep=!0;const _=$(A);fetch(A.href,_)}})();var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $s(Fe){return Fe&&Fe.__esModule&&Object.prototype.hasOwnProperty.call(Fe,"default")?Fe.default:Fe}var yi={exports:{}};(function(Fe,de){(function($,C){C(de)})(Nu,function($){var C=Object.defineProperty,A=(n,e,t)=>e in n?C(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_=(n,e,t)=>(A(n,typeof e!="symbol"?e+"":e,t),t),x;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(x||(x={}));function w(n,e){if(!n)throw new Error(e)}const T=34028234663852886e22,S=-34028234663852886e22,b=4294967295,h=2147483647,u=-2147483648;function l(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>h||n<u)throw new Error("invalid int 32: "+n)}function d(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>b||n<0)throw new Error("invalid uint 32: "+n)}function g(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(!!Number.isFinite(n)&&(n>T||n<S))throw new Error("invalid float 32: "+n)}const m=Symbol("@bufbuild/protobuf/enum-type");function f(n){const e=n[m];return w(e,"missing enum type on enum object"),e}function a(n,e,t,r){n[m]=c(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function c(n,e,t){const r=Object.create(null),i=Object.create(null),o=[];for(const p of e){const O=v(p);o.push(O),r[p.name]=O,i[p.no]=O}return{typeName:n,values:o,findName(p){return r[p]},findNumber(p){return i[p]}}}function s(n,e,t){const r={};for(const i of e){const o=v(i);r[o.localName]=o.no,r[o.no]=o.localName}return a(r,n,e),r}function v(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class y{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(t);return i.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(t);return i.readMessage(r,e,o,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function N(n,e,t,r){var i;const o=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),p={[o]:function(O){n.util.initFields(this),n.util.initPartial(O,this)}}[o];return Object.setPrototypeOf(p.prototype,new y),Object.assign(p,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(O,D){return new p().fromBinary(O,D)},fromJson(O,D){return new p().fromJson(O,D)},fromJsonString(O,D){return new p().fromJsonString(O,D)},equals(O,D){return n.util.equals(p,O,D)}}),p}function R(n,e,t,r){return{syntax:n,json:e,bin:t,util:r,makeMessageType(i,o,p){return N(this,i,o,p)},makeEnum:s,makeEnumType:c,getEnumType:f}}var E;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(E||(E={}));var I;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(I||(I={}));function k(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,(t&128)==0)return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function P(n,e,t){for(let o=0;o<28;o=o+7){const p=n>>>o,O=!(p>>>7==0&&e==0),D=(O?p|128:p)&255;if(t.push(D),!O)return}const r=n>>>28&15|(e&7)<<4,i=e>>3!=0;if(t.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const p=e>>>o,O=p>>>7!=0,D=(O?p|128:p)&255;if(t.push(D),!O)return}t.push(e>>>31&1)}}const L=4294967296;function B(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function o(p,O){const D=Number(n.slice(p,O));i*=t,r=r*t+D,r>=L&&(i=i+(r/L|0),r=r%L)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?Z(r,i):ue(r,i)}function q(n,e){let t=ue(n,e);const r=t.hi&2147483648;r&&(t=Z(t.lo,t.hi));const i=V(t.lo,t.hi);return r?"-"+i:i}function V(n,e){if({lo:n,hi:e}=X(n,e),e<=2097151)return String(L*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let o=t+r*6777216+i*6710656,p=r+i*8147497,O=i*2;const D=1e7;return o>=D&&(p+=Math.floor(o/D),o%=D),p>=D&&(O+=Math.floor(p/D),p%=D),O.toString()+z(p)+z(o)}function X(n,e){return{lo:n>>>0,hi:e>>>0}}function ue(n,e){return{lo:n|0,hi:e|0}}function Z(n,e){return e=~e,n?n=~n+1:e+=1,ue(n,e)}const z=n=>{const e=String(n);return"0000000".slice(e.length)+e};function j(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function F(){let n=this.buf[this.pos++],e=n&127;if((n&128)==0)return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,(n&128)==0)return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,(n&128)==0)return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,(n&128)==0)return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;(n&128)!==0&&t<10;t++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function J(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),p=BigInt("0"),O=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(D){const M=typeof D=="bigint"?D:BigInt(D);if(M>o||M<i)throw new Error(`int64 invalid: ${D}`);return M},uParse(D){const M=typeof D=="bigint"?D:BigInt(D);if(M>O||M<p)throw new Error(`uint64 invalid: ${D}`);return M},enc(D){return n.setBigInt64(0,this.parse(D),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(D){return n.setBigInt64(0,this.uParse(D),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(D,M){return n.setInt32(0,D,!0),n.setInt32(4,M,!0),n.getBigInt64(0,!0)},uDec(D,M){return n.setInt32(0,D,!0),n.setInt32(4,M,!0),n.getBigUint64(0,!0)}}}const t=i=>w(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>w(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),B(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),B(i)},dec(i,o){return q(i,o)},uDec(i,o){return V(i,o)}}}const Q=J();var H;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(H||(H={}));class U{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(d(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return l(e),j(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){g(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){d(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){l(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return l(e),e=(e<<1^e>>31)>>>0,j(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=Q.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=Q.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=Q.enc(e);return P(t.lo,t.hi,this.buf),this}sint64(e){let t=Q.enc(e),r=t.hi>>31,i=t.lo<<1^r,o=(t.hi<<1|t.lo>>>31)^r;return P(i,o,this.buf),this}uint64(e){let t=Q.uEnc(e);return P(t.lo,t.hi,this.buf),this}}class W{constructor(e,t){this.varint64=k,this.uint32=F,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t!=null?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e){let t=this.pos;switch(e){case H.Varint:for(;this.buf[this.pos++]&128;);break;case H.Bit64:this.pos+=4;case H.Bit32:this.pos+=4;break;case H.LengthDelimited:let r=this.uint32();this.pos+=r;break;case H.StartGroup:let i;for(;(i=this.tag()[1])!==H.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Q.dec(...this.varint64())}uint64(){return Q.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,Q.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Q.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Q.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function ne(n,e){return e instanceof y||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}function ae(n){if(n.fieldKind==="message"&&!n.repeated&&n.oneof==null)return me[n.message.typeName]}const me={"google.protobuf.DoubleValue":E.DOUBLE,"google.protobuf.FloatValue":E.FLOAT,"google.protobuf.Int64Value":E.INT64,"google.protobuf.UInt64Value":E.UINT64,"google.protobuf.Int32Value":E.INT32,"google.protobuf.UInt32Value":E.UINT32,"google.protobuf.BoolValue":E.BOOL,"google.protobuf.StringValue":E.STRING,"google.protobuf.BytesValue":E.BYTES};function Te(n,e,t){if(e===t)return!0;if(n==E.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==t}return!1}function De(n,e){switch(n){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==0?Q.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function Pe(n,e){const t=e===void 0;let r=H.Varint,i=e===0;switch(n){case E.STRING:i=t||!e.length,r=H.LengthDelimited;break;case E.BOOL:i=e===!1;break;case E.DOUBLE:r=H.Bit64;break;case E.FLOAT:r=H.Bit32;break;case E.INT64:i=t||e==0;break;case E.UINT64:i=t||e==0;break;case E.FIXED64:i=t||e==0,r=H.Bit64;break;case E.BYTES:i=t||!e.byteLength,r=H.LengthDelimited;break;case E.FIXED32:r=H.Bit32;break;case E.SFIXED32:r=H.Bit32;break;case E.SFIXED64:i=t||e==0,r=H.Bit64;break;case E.SINT64:i=t||e==0;break}const o=E[n].toLowerCase();return[r,o,t||i]}const Ie=Symbol("@bufbuild/protobuf/unknown-fields"),Y={readUnknownFields:!0,readerFactory:n=>new W(n)},le={writeUnknownFields:!0,writerFactory:()=>new U};function oe(n){return n?Object.assign(Object.assign({},Y),n):Y}function K(n){return n?Object.assign(Object.assign({},le),n):le}function re(){return{makeReadOptions:oe,makeWriteOptions:K,listUnknownFields(n){var e;return(e=n[Ie])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[Ie]},writeUnknownFields(n,e){const r=n[Ie];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[Ie])||(i[Ie]=[]),i[Ie].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const o=n.getType(),p=i?e.len:e.pos+t;let O,D;for(;e.pos<p&&([O,D]=e.tag(),D!=H.EndGroup);){const M=o.fields.find(O);if(!M){const ye=e.skip(D);r.readUnknownFields&&this.onUnknownField(n,O,D,ye);continue}let G=n,he=M.repeated,ie=M.localName;switch(M.oneof&&(G=G[M.oneof.localName],G.case!=ie&&delete G.value,G.case=ie,ie="value"),M.kind){case"scalar":case"enum":const ye=M.kind=="enum"?E.INT32:M.T;let Ae=ke;if(M.kind=="scalar"&&M.L>0&&(Ae=pe),he){let ot=G[ie];if(D==H.LengthDelimited&&ye!=E.STRING&&ye!=E.BYTES){let wt=e.uint32()+e.pos;for(;e.pos<wt;)ot.push(Ae(e,ye))}else ot.push(Ae(e,ye))}else G[ie]=Ae(e,ye);break;case"message":const Le=M.T;he?G[ie].push(ge(e,new Le,r,M)):G[ie]instanceof y?ge(e,G[ie],r,M):(G[ie]=ge(e,new Le,r,M),Le.fieldWrapper&&!M.oneof&&!M.repeated&&(G[ie]=Le.fieldWrapper.unwrapField(G[ie])));break;case"map":let[Ye,gt]=be(M,e,r);G[ie][Ye]=gt;break}}if(i&&(D!=H.EndGroup||O!==t))throw new Error("invalid end group tag")}}}function ge(n,e,t,r){const i=e.getType().runtime.bin,o=r==null?void 0:r.delimited;return i.readMessage(e,n,o?r==null?void 0:r.no:n.uint32(),t,o),e}function be(n,e,t){const r=e.uint32(),i=e.pos+r;let o,p;for(;e.pos<i;){let[O]=e.tag();switch(O){case 1:o=ke(e,n.K);break;case 2:switch(n.V.kind){case"scalar":p=ke(e,n.V.T);break;case"enum":p=e.int32();break;case"message":p=ge(e,new n.V.T,t,void 0);break}break}}if(o===void 0){let O=De(n.K,I.BIGINT);o=n.K==E.BOOL?O.toString():O}if(typeof o!="string"&&typeof o!="number"&&(o=o.toString()),p===void 0)switch(n.V.kind){case"scalar":p=De(n.V.T,I.BIGINT);break;case"enum":p=0;break;case"message":p=new n.V.T;break}return[o,p]}function pe(n,e){const t=ke(n,e);return typeof t=="bigint"?t.toString():t}function ke(n,e){switch(e){case E.STRING:return n.string();case E.BOOL:return n.bool();case E.DOUBLE:return n.double();case E.FLOAT:return n.float();case E.INT32:return n.int32();case E.INT64:return n.int64();case E.UINT64:return n.uint64();case E.FIXED64:return n.fixed64();case E.BYTES:return n.bytes();case E.FIXED32:return n.fixed32();case E.SFIXED32:return n.sfixed32();case E.SFIXED64:return n.sfixed64();case E.SINT64:return n.sint64();case E.UINT32:return n.uint32();case E.SINT32:return n.sint32()}}function Re(n,e,t,r,i){n.tag(t.no,H.LengthDelimited),n.fork();let o=r;switch(t.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:o=Number.parseInt(r);break;case E.BOOL:w(r=="true"||r=="false"),o=r=="true";break}switch(nt(n,t.K,1,o,!0),t.V.kind){case"scalar":nt(n,t.V.T,2,i,!0);break;case"enum":nt(n,E.INT32,2,i,!0);break;case"message":n.tag(2,H.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function je(n,e,t,r){if(r!==void 0){const i=ne(t.T,r);t!=null&&t.delimited?n.tag(t.no,H.StartGroup).raw(i.toBinary(e)).tag(t.no,H.EndGroup):n.tag(t.no,H.LengthDelimited).bytes(i.toBinary(e))}}function nt(n,e,t,r,i){let[o,p,O]=Pe(e,r);(!O||i)&&n.tag(t,o)[p](r)}function ut(n,e,t,r){if(!r.length)return;n.tag(t,H.LengthDelimited).fork();let[,i]=Pe(e);for(let o=0;o<r.length;o++)n[i](r[o]);n.join()}function He(){return Object.assign(Object.assign({},re()),{writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){let o,p=i.repeated,O=i.localName;if(i.oneof){const D=n[i.oneof.localName];if(D.case!==O)continue;o=D.value}else o=n[O];switch(i.kind){case"scalar":case"enum":let D=i.kind=="enum"?E.INT32:i.T;if(p)if(i.packed)ut(e,D,i.no,o);else for(const M of o)nt(e,D,i.no,M,!0);else o!==void 0&&nt(e,D,i.no,o,!!i.oneof||i.opt);break;case"message":if(p)for(const M of o)je(e,t,i,M);else je(e,t,i,o);break;case"map":for(const[M,G]of Object.entries(o))Re(e,t,i,M,G);break}}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e}})}let Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),_e=[];for(let n=0;n<Ke.length;n++)_e[Ke[n].charCodeAt(0)]=n;_e["-".charCodeAt(0)]=Ke.indexOf("+"),_e["_".charCodeAt(0)]=Ke.indexOf("/");const Qe={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,o,p=0;for(let O=0;O<n.length;O++){if(o=_e[n.charCodeAt(O)],o===void 0)switch(n[O]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:p=o,i=1;break;case 1:t[r++]=p<<2|(o&48)>>4,p=o,i=2;break;case 2:t[r++]=(p&15)<<4|(o&60)>>2,p=o,i=3;break;case 3:t[r++]=(p&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let o=0;o<n.length;o++)switch(r=n[o],t){case 0:e+=Ke[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=Ke[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=Ke[i|r>>6],e+=Ke[r&63],t=0;break}return t&&(e+=Ke[i],e+="=",t==1&&(e+="=")),e}},zt={ignoreUnknownFields:!1},yn={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Kt(n){return n?Object.assign(Object.assign({},zt),n):zt}function bn(n){return n?Object.assign(Object.assign({},yn),n):yn}function Qt(n){const e=n(St,Gt);return{makeReadOptions:Kt,makeWriteOptions:bn,readMessage(t,r,i,o){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error(`cannot decode message ${t.typeName} from JSON: ${this.debug(r)}`);o=o!=null?o:new t;const p={};for(const[O,D]of Object.entries(r)){const M=t.fields.findJsonName(O);if(!M){if(!i.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${O}" is unknown`);continue}let G=M.localName,he=o;if(M.oneof){if(D===null&&M.kind=="scalar")continue;const ie=p[M.oneof.localName];if(ie)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${M.oneof.name}" present: "${ie}", "${O}"`);p[M.oneof.localName]=O,he=he[M.oneof.localName]={case:G},G="value"}if(M.repeated){if(D===null)continue;if(!Array.isArray(D))throw new Error(`cannot decode field ${t.typeName}.${M.name} from JSON: ${this.debug(D)}`);const ie=he[G];for(const ye of D){if(ye===null)throw new Error(`cannot decode field ${t.typeName}.${M.name} from JSON: ${this.debug(ye)}`);let Ae;switch(M.kind){case"message":Ae=M.T.fromJson(ye,i);break;case"enum":if(Ae=en(M.T,ye,i.ignoreUnknownFields),Ae===void 0)continue;break;case"scalar":try{Ae=Rt(M.T,ye,M.L)}catch(Le){let Ye=`cannot decode field ${t.typeName}.${M.name} from JSON: ${this.debug(ye)}`;throw Le instanceof Error&&Le.message.length>0&&(Ye+=`: ${Le.message}`),new Error(Ye)}break}ie.push(Ae)}}else if(M.kind=="map"){if(D===null)continue;if(Array.isArray(D)||typeof D!="object")throw new Error(`cannot decode field ${t.typeName}.${M.name} from JSON: ${this.debug(D)}`);const ie=he[G];for(const[ye,Ae]of Object.entries(D)){if(Ae===null)throw new Error(`cannot decode field ${t.typeName}.${M.name} from JSON: map value null`);let Le;switch(M.V.kind){case"message":Le=M.V.T.fromJson(Ae,i);break;case"enum":if(Le=en(M.V.T,Ae,i.ignoreUnknownFields),Le===void 0)continue;break;case"scalar":try{Le=Rt(M.V.T,Ae,I.BIGINT)}catch(Ye){let gt=`cannot decode map value for field ${t.typeName}.${M.name} from JSON: ${this.debug(D)}`;throw Ye instanceof Error&&Ye.message.length>0&&(gt+=`: ${Ye.message}`),new Error(gt)}break}try{ie[Rt(M.K,M.K==E.BOOL?ye=="true"?!0:ye=="false"?!1:ye:ye,I.BIGINT).toString()]=Le}catch(Ye){let gt=`cannot decode map key for field ${t.typeName}.${M.name} from JSON: ${this.debug(D)}`;throw Ye instanceof Error&&Ye.message.length>0&&(gt+=`: ${Ye.message}`),new Error(gt)}}}else switch(M.kind){case"message":const ie=M.T;if(D===null&&ie.typeName!="google.protobuf.Value"){if(M.oneof)throw new Error(`cannot decode field ${t.typeName}.${M.name} from JSON: null is invalid for oneof field "${O}"`);continue}he[G]instanceof y?he[G].fromJson(D,i):(he[G]=ie.fromJson(D,i),ie.fieldWrapper&&!M.oneof&&(he[G]=ie.fieldWrapper.unwrapField(he[G])));break;case"enum":const ye=en(M.T,D,i.ignoreUnknownFields);ye!==void 0&&(he[G]=ye);break;case"scalar":try{he[G]=Rt(M.T,D,M.L)}catch(Ae){let Le=`cannot decode field ${t.typeName}.${M.name} from JSON: ${this.debug(D)}`;throw Ae instanceof Error&&Ae.message.length>0&&(Le+=`: ${Ae.message}`),new Error(Le)}break}}return o},writeMessage(t,r){const i=t.getType(),o={};let p;try{for(const O of i.fields.byMember()){let D;if(O.kind=="oneof"){const M=t[O.localName];if(M.value===void 0)continue;if(p=O.findField(M.case),!p)throw"oneof case not found: "+M.case;D=e(p,M.value,r)}else p=O,D=e(p,t[p.localName],r);D!==void 0&&(o[r.useProtoFieldName?p.name:p.jsonName]=D)}}catch(O){const D=p?`cannot encode field ${i.typeName}.${p.name} to JSON`:`cannot encode message ${i.typeName} to JSON`,M=O instanceof Error?O.message:String(O);throw new Error(D+(M.length>0?`: ${M}`:""))}return o},readScalar:Rt,writeScalar:Gt,debug:Wt}}function Wt(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Rt(n,e,t){switch(n){case E.DOUBLE:case E.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return n==E.FLOAT&&g(r),r;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:if(e===null)return 0;let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return n==E.UINT32?d(i):l(i),i;case E.INT64:case E.SFIXED64:case E.SINT64:if(e===null)return Q.zero;if(typeof e!="number"&&typeof e!="string")break;const o=Q.parse(e);return t?o.toString():o;case E.FIXED64:case E.UINT64:if(e===null)return Q.zero;if(typeof e!="number"&&typeof e!="string")break;const p=Q.uParse(e);return t?p.toString():p;case E.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case E.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case E.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return Qe.dec(e)}throw new Error}function en(n,e,t){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=n.findName(e);if(r||t)return r==null?void 0:r.no;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Wt(e)}`)}function St(n,e,t,r){var i;if(e===void 0)return e;if(e===0&&!t)return;if(r)return e;if(n.typeName=="google.protobuf.NullValue")return null;const o=n.findNumber(e);return(i=o==null?void 0:o.name)!==null&&i!==void 0?i:e}function Gt(n,e,t){if(e!==void 0)switch(n){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return w(typeof e=="number"),e!=0||t?e:void 0;case E.FLOAT:case E.DOUBLE:return w(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||t?e:void 0;case E.STRING:return w(typeof e=="string"),e.length>0||t?e:void 0;case E.BOOL:return w(typeof e=="boolean"),e||t?e:void 0;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return w(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),t||e!=0?e.toString(10):void 0;case E.BYTES:return w(e instanceof Uint8Array),t||e.byteLength>0?Qe.enc(e):void 0}}function tn(){return Qt((n,e)=>function(r,i,o){if(r.kind=="map"){const p={};switch(r.V.kind){case"scalar":for(const[D,M]of Object.entries(i)){const G=e(r.V.T,M,!0);w(G!==void 0),p[D.toString()]=G}break;case"message":for(const[D,M]of Object.entries(i))p[D.toString()]=M.toJson(o);break;case"enum":const O=r.V.T;for(const[D,M]of Object.entries(i)){w(M===void 0||typeof M=="number");const G=n(O,M,!0,o.enumAsInteger);w(G!==void 0),p[D.toString()]=G}break}return o.emitDefaultValues||Object.keys(p).length>0?p:void 0}else if(r.repeated){const p=[];switch(r.kind){case"scalar":for(let O=0;O<i.length;O++)p.push(e(r.T,i[O],!0));break;case"enum":for(let O=0;O<i.length;O++)p.push(n(r.T,i[O],!0,o.enumAsInteger));break;case"message":for(let O=0;O<i.length;O++)p.push(ne(r.T,i[O]).toJson(o));break}return o.emitDefaultValues||p.length>0?p:void 0}else switch(r.kind){case"scalar":return e(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues);case"enum":return n(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return i!==void 0?ne(r.T,i).toJson(o):void 0}})}function Ur(){return{setEnumType:a,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,o=e,p=n;if(p[i]!==void 0)switch(r.kind){case"oneof":const O=p[i].case;if(O===void 0)continue;const D=r.findField(O);let M=p[i].value;D&&D.kind=="message"&&!(M instanceof D.T)?M=new D.T(M):D&&D.kind==="scalar"&&D.T===E.BYTES&&(M=In(M)),o[i]={case:O,value:M};break;case"scalar":case"enum":let G=p[i];r.T===E.BYTES&&(G=r.repeated?G.map(In):In(G)),o[i]=G;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===E.BYTES)for(const[ye,Ae]of Object.entries(p[i]))o[i][ye]=In(Ae);else Object.assign(o[i],p[i]);break;case"message":const ie=r.V.T;for(const ye of Object.keys(p[i])){let Ae=p[i][ye];ie.fieldWrapper||(Ae=new ie(Ae)),o[i][ye]=Ae}break}break;case"message":const he=r.T;if(r.repeated)o[i]=p[i].map(ie=>ie instanceof he?ie:new he(ie));else if(p[i]!==void 0){const ie=p[i];he.fieldWrapper?he.typeName==="google.protobuf.BytesValue"?o[i]=In(ie):o[i]=ie:o[i]=ie instanceof he?ie:new he(ie)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],o=t[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((p,O)=>r.T.equals(p,o[O]));case"scalar":return i.every((p,O)=>Te(r.T,p,o[O]));case"enum":return i.every((p,O)=>Te(E.INT32,p,o[O]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,o);case"enum":return Te(E.INT32,i,o);case"scalar":return Te(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const p=r.findField(i.case);if(p===void 0)return!0;switch(p.kind){case"message":return p.T.equals(i.value,o.value);case"enum":return Te(E.INT32,i.value,o.value);case"scalar":return Te(p.T,i.value,o.value)}throw new Error(`oneof cannot contain ${p.kind}`);case"map":const O=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const D=r.V.T;return O.every(G=>D.equals(i[G],o[G]));case"enum":return O.every(G=>Te(E.INT32,i[G],o[G]));case"scalar":const M=r.V.T;return O.every(G=>Te(M,i[G],o[G]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const o=n[i.localName];let p;if(i.repeated)p=o.map(nn);else if(i.kind=="map"){p=r[i.localName];for(const[O,D]of Object.entries(o))p[O]=nn(D)}else i.kind=="oneof"?p=i.findField(o.case)?{case:o.case,value:nn(o.value)}:{case:void 0}:p=nn(o);r[i.localName]=p}return t}}}function nn(n){if(n===void 0)return n;if(n instanceof y)return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function In(n){return n instanceof Uint8Array?n:new Uint8Array(n)}class or{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function Jr(n){switch(n.kind){case"field":return sr(n.name,n.oneof!==void 0);case"oneof":return ni(n.name);case"enum":case"message":case"service":{const e=n.file.proto.package,t=e===void 0?0:e.length+1,r=n.typeName.substring(t).replace(/\./g,"_");return on(En(r))}case"enum_value":{const e=n.parent.sharedPrefix;if(e===void 0)return n.name;const t=n.name.substring(e.length);return on(t)}case"rpc":{let e=n.name;return e.length==0?e:(e=e[0].toLowerCase()+e.substring(1),on(e))}}}function sr(n,e){const t=Yn(n);return e?t:on(Li(t))}function ni(n){return sr(n,!1)}const pn=Yn;function Xt(n,e){const t=rn(n)+"_";for(const r of e){if(!r.toLowerCase().startsWith(t))return;const i=r.substring(t.length);if(i.length==0||/^\d/.test(i))return}return t}function rn(n){return(n.substring(0,1)+n.substring(1).replace(/[A-Z]/g,e=>"_"+e)).toLowerCase()}function Yn(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const Tn=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]),ri=new Set(["constructor","toString","toJSON","valueOf"]),_n=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),ar=n=>`${n}$`,Li=n=>_n.has(n)?ar(n):n,on=n=>ri.has(n)?ar(n):n,En=n=>Tn.has(n)?ar(n):n;class ii{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=ni(e)}addField(e){w(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}const ce=R("proto3",tn(),He(),Object.assign(Object.assign({},Ur()),{newFieldList(n){return new or(n,Mi)},initFields(n){for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=De(e.T,e.L);break}}}}));function Mi(n){var e,t,r,i;const o=[];let p;for(const O of typeof n=="function"?n():n){const D=O;if(D.localName=sr(O.name,O.oneof!==void 0),D.jsonName=(e=O.jsonName)!==null&&e!==void 0?e:pn(O.name),D.repeated=(t=O.repeated)!==null&&t!==void 0?t:!1,O.kind=="scalar"&&(D.L=(r=O.L)!==null&&r!==void 0?r:I.BIGINT),O.oneof!==void 0){const M=typeof O.oneof=="string"?O.oneof:O.oneof.name;(!p||p.name!=M)&&(p=new ii(M)),D.oneof=p,p.addField(D)}O.kind=="message"&&(D.delimited=!1),D.packed=(i=O.packed)!==null&&i!==void 0?i:O.kind=="enum"||O.kind=="scalar"&&O.T!=E.BYTES&&O.T!=E.STRING,o.push(D)}return o}function lr(){return Object.assign(Object.assign({},re()),{writeMessage(n,e,t){const r=n.getType();let i;try{for(i of r.fields.byNumber()){let o,p=i.repeated,O=i.localName;if(i.oneof){const D=n[i.oneof.localName];if(D.case!==O)continue;o=D.value}else if(o=n[O],o===void 0&&!i.oneof&&!i.opt)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);switch(i.kind){case"scalar":case"enum":let D=i.kind=="enum"?E.INT32:i.T;if(p)if(i.packed)ut(e,D,i.no,o);else for(const M of o)nt(e,D,i.no,M,!0);else o!==void 0&&nt(e,D,i.no,o,!0);break;case"message":if(p)for(const M of o)je(e,t,i,M);else je(e,t,i,o);break;case"map":for(const[M,G]of Object.entries(o))Re(e,t,i,M,G);break}}}catch(o){let p=i?`cannot encode field ${r.typeName}.${i==null?void 0:i.name} to binary`:`cannot encode message ${r.typeName} to binary`,O=o instanceof Error?o.message:String(o);throw new Error(p+(O.length>0?`: ${O}`:""))}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e}})}function Pn(){return Qt((n,e)=>function(r,i,o){if(r.kind=="map"){const p={};switch(r.V.kind){case"scalar":for(const[D,M]of Object.entries(i)){const G=e(r.V.T,M,!0);w(G!==void 0),p[D.toString()]=G}break;case"message":for(const[D,M]of Object.entries(i))p[D.toString()]=M.toJson(o);break;case"enum":const O=r.V.T;for(const[D,M]of Object.entries(i)){w(M===void 0||typeof M=="number");const G=n(O,M,!0,o.enumAsInteger);w(G!==void 0),p[D.toString()]=G}break}return o.emitDefaultValues||Object.keys(p).length>0?p:void 0}else if(r.repeated){const p=[];switch(r.kind){case"scalar":for(let O=0;O<i.length;O++)p.push(e(r.T,i[O],!0));break;case"enum":for(let O=0;O<i.length;O++)p.push(n(r.T,i[O],!0,o.enumAsInteger));break;case"message":for(let O=0;O<i.length;O++)p.push(i[O].toJson(o));break}return o.emitDefaultValues||p.length>0?p:void 0}else{if(i===void 0){if(!r.oneof&&!r.opt)throw"required field not set";return}switch(r.kind){case"scalar":return e(r.T,i,!0);case"enum":return n(r.T,i,!0,o.enumAsInteger);case"message":return ne(r.T,i).toJson(o)}}})}const te=R("proto2",Pn(),lr(),Object.assign(Object.assign({},Ur()),{newFieldList(n){return new or(n,se)},initFields(n){for(const e of n.getType().fields.byMember()){const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"map":r[t]={};break}}}}));function se(n){var e,t,r,i,o;const p=[];let O;for(const D of typeof n=="function"?n():n){const M=D;if(M.localName=sr(D.name,D.oneof!==void 0),M.jsonName=(e=D.jsonName)!==null&&e!==void 0?e:pn(D.name),M.repeated=(t=D.repeated)!==null&&t!==void 0?t:!1,D.kind=="scalar"&&(M.L=(r=D.L)!==null&&r!==void 0?r:I.BIGINT),D.oneof!==void 0){const G=typeof D.oneof=="string"?D.oneof:D.oneof.name;(!O||O.name!=G)&&(O=new ii(G)),M.oneof=O,O.addField(M)}D.kind=="message"&&(M.delimited=(i=D.delimited)!==null&&i!==void 0?i:!1),M.packed=(o=D.packed)!==null&&o!==void 0?o:!1,p.push(M)}return p}const ve={NaN:Number.NaN,POSITIVE_INFINITY:Number.POSITIVE_INFINITY,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY};var Se=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(p){return new Promise(function(O,D){p=n[o](p),i(O,D,p.done,p.value)})}}function i(o,p,O,D){Promise.resolve(D).then(function(M){o({value:M,done:O})},p)}},Ce=globalThis&&globalThis.__await||function(n){return this instanceof Ce?(this.v=n,this):new Ce(n)},dt=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},O("next"),O("throw"),O("return",p),i[Symbol.asyncIterator]=function(){return this},i;function p(ye){return function(Ae){return Promise.resolve(Ae).then(ye,he)}}function O(ye,Ae){r[ye]&&(i[ye]=function(Le){return new Promise(function(Ye,gt){o.push([ye,Le,Ye,gt])>1||D(ye,Le)})},Ae&&(i[ye]=Ae(i[ye])))}function D(ye,Ae){try{M(r[ye](Ae))}catch(Le){ie(o[0][3],Le)}}function M(ye){ye.value instanceof Ce?Promise.resolve(ye.value.v).then(G,he):ie(o[0][2],ye)}function G(ye){D("next",ye)}function he(ye){D("throw",ye)}function ie(ye,Ae){ye(Ae),o.shift(),o.length&&D(o[0][0],o[0][1])}};const st={enc(n,e){const t=re().makeWriteOptions(e);return t.writerFactory().bytes(n.toBinary(t)).finish()},dec(n,e,t){const r=re().makeReadOptions(t);return n.fromBinary(r.readerFactory(e).bytes(),r)},decStream(n,e){return dt(this,arguments,function*(){var r,i,o,p;function O(ie,ye){const Ae=new Uint8Array(ie.byteLength+ye.byteLength);return Ae.set(ie),Ae.set(ye,ie.length),Ae}let D=new Uint8Array(0);try{for(var M=!0,G=Se(e),he;he=yield Ce(G.next()),r=he.done,!r;M=!0)for(p=he.value,M=!1,D=O(D,p);;){const ye=st.peekSize(D);if(ye.eof||ye.offset+ye.size>D.byteLength)break;yield yield Ce(st.dec(n,D)),D=D.subarray(ye.offset+ye.size)}}catch(ie){i={error:ie}}finally{try{!M&&!r&&(o=G.return)&&(yield Ce(o.call(G)))}finally{if(i)throw i.error}}if(D.byteLength>0)throw new Error("incomplete data")})},peekSize(n){const e={eof:!0,size:null,offset:null};for(let t=0;t<10;t++){if(t>n.byteLength)return e;if((n[t]&128)==0){const r=new W(n);let i;try{i=r.uint32()}catch(o){if(o instanceof RangeError)return e;throw o}return{eof:!1,size:i,offset:r.pos}}}throw new Error("invalid varint")}};function ee(n){switch(n.typeName){case"google.protobuf.Any":{const e=n.fields.find(r=>r.number==1&&r.fieldKind=="scalar"&&r.scalar===E.STRING),t=n.fields.find(r=>r.number==2&&r.fieldKind=="scalar"&&r.scalar===E.BYTES);if(e&&t)return{typeName:n.typeName,typeUrl:e,value:t};break}case"google.protobuf.Timestamp":{const e=n.fields.find(r=>r.number==1&&r.fieldKind=="scalar"&&r.scalar===E.INT64),t=n.fields.find(r=>r.number==2&&r.fieldKind=="scalar"&&r.scalar===E.INT32);if(e&&t)return{typeName:n.typeName,seconds:e,nanos:t};break}case"google.protobuf.Duration":{const e=n.fields.find(r=>r.number==1&&r.fieldKind=="scalar"&&r.scalar===E.INT64),t=n.fields.find(r=>r.number==2&&r.fieldKind=="scalar"&&r.scalar===E.INT32);if(e&&t)return{typeName:n.typeName,seconds:e,nanos:t};break}case"google.protobuf.Struct":{const e=n.fields.find(t=>t.number==1&&!t.repeated);if((e==null?void 0:e.fieldKind)!=="map"||e.mapValue.kind!=="message"||e.mapValue.message.typeName!=="google.protobuf.Value")break;return{typeName:n.typeName,fields:e}}case"google.protobuf.Value":{const e=n.oneofs.find(D=>D.name==="kind"),t=n.fields.find(D=>D.number==1&&D.oneof===e);if((t==null?void 0:t.fieldKind)!=="enum"||t.enum.typeName!=="google.protobuf.NullValue")return;const r=n.fields.find(D=>D.number==2&&D.fieldKind=="scalar"&&D.scalar===E.DOUBLE&&D.oneof===e),i=n.fields.find(D=>D.number==3&&D.fieldKind=="scalar"&&D.scalar===E.STRING&&D.oneof===e),o=n.fields.find(D=>D.number==4&&D.fieldKind=="scalar"&&D.scalar===E.BOOL&&D.oneof===e),p=n.fields.find(D=>D.number==5&&D.oneof===e);if((p==null?void 0:p.fieldKind)!=="message"||p.message.typeName!=="google.protobuf.Struct")return;const O=n.fields.find(D=>D.number==6&&D.oneof===e);if((O==null?void 0:O.fieldKind)!=="message"||O.message.typeName!=="google.protobuf.ListValue")return;if(e&&r&&i&&o)return{typeName:n.typeName,kind:e,nullValue:t,numberValue:r,stringValue:i,boolValue:o,structValue:p,listValue:O};break}case"google.protobuf.ListValue":{const e=n.fields.find(t=>t.number==1&&t.repeated);if((e==null?void 0:e.fieldKind)!="message"||e.message.typeName!=="google.protobuf.Value")break;return{typeName:n.typeName,values:e}}case"google.protobuf.FieldMask":{const e=n.fields.find(t=>t.number==1&&t.fieldKind=="scalar"&&t.scalar===E.STRING&&t.repeated);if(e)return{typeName:n.typeName,paths:e};break}case"google.protobuf.DoubleValue":case"google.protobuf.FloatValue":case"google.protobuf.Int64Value":case"google.protobuf.UInt64Value":case"google.protobuf.Int32Value":case"google.protobuf.UInt32Value":case"google.protobuf.BoolValue":case"google.protobuf.StringValue":case"google.protobuf.BytesValue":{const e=n.fields.find(t=>t.number==1&&t.name=="value");if(!e||e.fieldKind!=="scalar")break;return{typeName:n.typeName,value:e}}}}const fe="@bufbuild/protobuf",Ne={packageName:"@bufbuild/protobuf",localName:Jr,reifyWkt:ee,getUnwrappedFieldType:ae,scalarDefaultValue:De,safeIdentifier:En,safeObjectProperty:on,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:fe},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:fe},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:fe},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:fe},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:fe},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:fe},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:fe},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:fe},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:fe},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},protoDouble:{typeOnly:!1,privateImportPath:"./proto-double.js",publicImportPath:fe},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:fe},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:fe},LongType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:fe},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:fe},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:fe},IMessageTypeRegistry:{typeOnly:!0,privateImportPath:"./type-registry.js",publicImportPath:fe}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]};var xe;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(xe||(xe={}));var et;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(et||(et={}));var qe;(function(n){n[n.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",n[n.EDITION_PROTO2=998]="EDITION_PROTO2",n[n.EDITION_PROTO3=999]="EDITION_PROTO3",n[n.EDITION_2023=1e3]="EDITION_2023",n[n.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",n[n.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",n[n.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",n[n.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",n[n.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY"})(qe||(qe={})),te.util.setEnumType(qe,"google.protobuf.Edition",[{no:0,name:"EDITION_UNKNOWN"},{no:998,name:"EDITION_PROTO2"},{no:999,name:"EDITION_PROTO3"},{no:1e3,name:"EDITION_2023"},{no:1,name:"EDITION_1_TEST_ONLY"},{no:2,name:"EDITION_2_TEST_ONLY"},{no:99997,name:"EDITION_99997_TEST_ONLY"},{no:99998,name:"EDITION_99998_TEST_ONLY"},{no:99999,name:"EDITION_99999_TEST_ONLY"}]);class ct extends y{constructor(e){super(),this.file=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new ct().fromBinary(e,t)}static fromJson(e,t){return new ct().fromJson(e,t)}static fromJsonString(e,t){return new ct().fromJsonString(e,t)}static equals(e,t){return te.util.equals(ct,e,t)}}ct.runtime=te,ct.typeName="google.protobuf.FileDescriptorSet",ct.fields=te.util.newFieldList(()=>[{no:1,name:"file",kind:"message",T:Ge,repeated:!0}]);class Ge extends y{constructor(e){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Ge().fromBinary(e,t)}static fromJson(e,t){return new Ge().fromJson(e,t)}static fromJsonString(e,t){return new Ge().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Ge,e,t)}}Ge.runtime=te,Ge.typeName="google.protobuf.FileDescriptorProto",Ge.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:mt,repeated:!0},{no:5,name:"enum_type",kind:"message",T:Nt,repeated:!0},{no:6,name:"service",kind:"message",T:vt,repeated:!0},{no:7,name:"extension",kind:"message",T:at,repeated:!0},{no:8,name:"options",kind:"message",T:jt,opt:!0},{no:9,name:"source_code_info",kind:"message",T:gr,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0},{no:14,name:"edition",kind:"enum",T:te.getEnumType(qe),opt:!0}]);class mt extends y{constructor(e){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new mt().fromBinary(e,t)}static fromJson(e,t){return new mt().fromJson(e,t)}static fromJsonString(e,t){return new mt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(mt,e,t)}}mt.runtime=te,mt.typeName="google.protobuf.DescriptorProto",mt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:at,repeated:!0},{no:6,name:"extension",kind:"message",T:at,repeated:!0},{no:3,name:"nested_type",kind:"message",T:mt,repeated:!0},{no:4,name:"enum_type",kind:"message",T:Nt,repeated:!0},{no:5,name:"extension_range",kind:"message",T:pt,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:rt,repeated:!0},{no:7,name:"options",kind:"message",T:Jt,opt:!0},{no:9,name:"reserved_range",kind:"message",T:Pt,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class pt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new pt().fromBinary(e,t)}static fromJson(e,t){return new pt().fromJson(e,t)}static fromJsonString(e,t){return new pt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(pt,e,t)}}pt.runtime=te,pt.typeName="google.protobuf.DescriptorProto.ExtensionRange",pt.fields=te.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:Dt,opt:!0}]);class Pt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new Pt().fromBinary(e,t)}static fromJson(e,t){return new Pt().fromJson(e,t)}static fromJsonString(e,t){return new Pt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Pt,e,t)}}Pt.runtime=te,Pt.typeName="google.protobuf.DescriptorProto.ReservedRange",Pt.fields=te.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class Dt extends y{constructor(e){super(),this.uninterpretedOption=[],this.declaration=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Dt().fromBinary(e,t)}static fromJson(e,t){return new Dt().fromJson(e,t)}static fromJsonString(e,t){return new Dt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Dt,e,t)}}Dt.runtime=te,Dt.typeName="google.protobuf.ExtensionRangeOptions",Dt.fields=te.util.newFieldList(()=>[{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0},{no:2,name:"declaration",kind:"message",T:Ue,repeated:!0},{no:50,name:"features",kind:"message",T:xt,opt:!0},{no:3,name:"verification",kind:"enum",T:te.getEnumType(sn),opt:!0,default:sn.UNVERIFIED}]);var sn;(function(n){n[n.DECLARATION=0]="DECLARATION",n[n.UNVERIFIED=1]="UNVERIFIED"})(sn||(sn={})),te.util.setEnumType(sn,"google.protobuf.ExtensionRangeOptions.VerificationState",[{no:0,name:"DECLARATION"},{no:1,name:"UNVERIFIED"}]);class Ue extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new Ue().fromBinary(e,t)}static fromJson(e,t){return new Ue().fromJson(e,t)}static fromJsonString(e,t){return new Ue().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Ue,e,t)}}Ue.runtime=te,Ue.typeName="google.protobuf.ExtensionRangeOptions.Declaration",Ue.fields=te.util.newFieldList(()=>[{no:1,name:"number",kind:"scalar",T:5,opt:!0},{no:2,name:"full_name",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"scalar",T:9,opt:!0},{no:5,name:"reserved",kind:"scalar",T:8,opt:!0},{no:6,name:"repeated",kind:"scalar",T:8,opt:!0}]);class at extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new at().fromBinary(e,t)}static fromJson(e,t){return new at().fromJson(e,t)}static fromJsonString(e,t){return new at().fromJsonString(e,t)}static equals(e,t){return te.util.equals(at,e,t)}}at.runtime=te,at.typeName="google.protobuf.FieldDescriptorProto",at.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:te.getEnumType(Xe),opt:!0},{no:5,name:"type",kind:"enum",T:te.getEnumType(Je),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:Ct,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}]);var Je;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.GROUP=10]="GROUP",n[n.MESSAGE=11]="MESSAGE",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.ENUM=14]="ENUM",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(Je||(Je={})),te.util.setEnumType(Je,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var Xe;(function(n){n[n.OPTIONAL=1]="OPTIONAL",n[n.REPEATED=3]="REPEATED",n[n.REQUIRED=2]="REQUIRED"})(Xe||(Xe={})),te.util.setEnumType(Xe,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:3,name:"LABEL_REPEATED"},{no:2,name:"LABEL_REQUIRED"}]);class rt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new rt().fromBinary(e,t)}static fromJson(e,t){return new rt().fromJson(e,t)}static fromJsonString(e,t){return new rt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(rt,e,t)}}rt.runtime=te,rt.typeName="google.protobuf.OneofDescriptorProto",rt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:On,opt:!0}]);class Nt extends y{constructor(e){super(),this.value=[],this.reservedRange=[],this.reservedName=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Nt().fromBinary(e,t)}static fromJson(e,t){return new Nt().fromJson(e,t)}static fromJsonString(e,t){return new Nt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Nt,e,t)}}Nt.runtime=te,Nt.typeName="google.protobuf.EnumDescriptorProto",Nt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:_t,repeated:!0},{no:3,name:"options",kind:"message",T:ln,opt:!0},{no:4,name:"reserved_range",kind:"message",T:tt,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class tt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new tt().fromBinary(e,t)}static fromJson(e,t){return new tt().fromJson(e,t)}static fromJsonString(e,t){return new tt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(tt,e,t)}}tt.runtime=te,tt.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",tt.fields=te.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class _t extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new _t().fromBinary(e,t)}static fromJson(e,t){return new _t().fromJson(e,t)}static fromJsonString(e,t){return new _t().fromJsonString(e,t)}static equals(e,t){return te.util.equals(_t,e,t)}}_t.runtime=te,_t.typeName="google.protobuf.EnumValueDescriptorProto",_t.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:un,opt:!0}]);class vt extends y{constructor(e){super(),this.method=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new vt().fromBinary(e,t)}static fromJson(e,t){return new vt().fromJson(e,t)}static fromJsonString(e,t){return new vt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(vt,e,t)}}vt.runtime=te,vt.typeName="google.protobuf.ServiceDescriptorProto",vt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:kt,repeated:!0},{no:3,name:"options",kind:"message",T:cr,opt:!0}]);class kt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new kt().fromBinary(e,t)}static fromJson(e,t){return new kt().fromJson(e,t)}static fromJsonString(e,t){return new kt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(kt,e,t)}}kt.runtime=te,kt.typeName="google.protobuf.MethodDescriptorProto",kt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:fr,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]);class jt extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new jt().fromBinary(e,t)}static fromJson(e,t){return new jt().fromJson(e,t)}static fromJsonString(e,t){return new jt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(jt,e,t)}}jt.runtime=te,jt.typeName="google.protobuf.FileOptions",jt.fields=te.util.newFieldList(()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:te.getEnumType(Rn),opt:!0,default:Rn.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:50,name:"features",kind:"message",T:xt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);var Rn;(function(n){n[n.SPEED=1]="SPEED",n[n.CODE_SIZE=2]="CODE_SIZE",n[n.LITE_RUNTIME=3]="LITE_RUNTIME"})(Rn||(Rn={})),te.util.setEnumType(Rn,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class Jt extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Jt().fromBinary(e,t)}static fromJson(e,t){return new Jt().fromJson(e,t)}static fromJsonString(e,t){return new Jt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Jt,e,t)}}Jt.runtime=te,Jt.typeName="google.protobuf.MessageOptions",Jt.fields=te.util.newFieldList(()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:11,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:12,name:"features",kind:"message",T:xt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class Ct extends y{constructor(e){super(),this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Ct().fromBinary(e,t)}static fromJson(e,t){return new Ct().fromJson(e,t)}static fromJsonString(e,t){return new Ct().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Ct,e,t)}}Ct.runtime=te,Ct.typeName="google.protobuf.FieldOptions",Ct.fields=te.util.newFieldList(()=>[{no:1,name:"ctype",kind:"enum",T:te.getEnumType(Fr),opt:!0,default:Fr.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:te.getEnumType(wn),opt:!0,default:wn.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:16,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"retention",kind:"enum",T:te.getEnumType($r),opt:!0},{no:19,name:"targets",kind:"enum",T:te.getEnumType(ur),repeated:!0},{no:20,name:"edition_defaults",kind:"message",T:an,repeated:!0},{no:21,name:"features",kind:"message",T:xt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);var Fr;(function(n){n[n.STRING=0]="STRING",n[n.CORD=1]="CORD",n[n.STRING_PIECE=2]="STRING_PIECE"})(Fr||(Fr={})),te.util.setEnumType(Fr,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]);var wn;(function(n){n[n.JS_NORMAL=0]="JS_NORMAL",n[n.JS_STRING=1]="JS_STRING",n[n.JS_NUMBER=2]="JS_NUMBER"})(wn||(wn={})),te.util.setEnumType(wn,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]);var $r;(function(n){n[n.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",n[n.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",n[n.RETENTION_SOURCE=2]="RETENTION_SOURCE"})($r||($r={})),te.util.setEnumType($r,"google.protobuf.FieldOptions.OptionRetention",[{no:0,name:"RETENTION_UNKNOWN"},{no:1,name:"RETENTION_RUNTIME"},{no:2,name:"RETENTION_SOURCE"}]);var ur;(function(n){n[n.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",n[n.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",n[n.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",n[n.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",n[n.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",n[n.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",n[n.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",n[n.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",n[n.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",n[n.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(ur||(ur={})),te.util.setEnumType(ur,"google.protobuf.FieldOptions.OptionTargetType",[{no:0,name:"TARGET_TYPE_UNKNOWN"},{no:1,name:"TARGET_TYPE_FILE"},{no:2,name:"TARGET_TYPE_EXTENSION_RANGE"},{no:3,name:"TARGET_TYPE_MESSAGE"},{no:4,name:"TARGET_TYPE_FIELD"},{no:5,name:"TARGET_TYPE_ONEOF"},{no:6,name:"TARGET_TYPE_ENUM"},{no:7,name:"TARGET_TYPE_ENUM_ENTRY"},{no:8,name:"TARGET_TYPE_SERVICE"},{no:9,name:"TARGET_TYPE_METHOD"}]);class an extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new an().fromBinary(e,t)}static fromJson(e,t){return new an().fromJson(e,t)}static fromJsonString(e,t){return new an().fromJsonString(e,t)}static equals(e,t){return te.util.equals(an,e,t)}}an.runtime=te,an.typeName="google.protobuf.FieldOptions.EditionDefault",an.fields=te.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:te.getEnumType(qe),opt:!0},{no:2,name:"value",kind:"scalar",T:9,opt:!0}]);class On extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new On().fromBinary(e,t)}static fromJson(e,t){return new On().fromJson(e,t)}static fromJsonString(e,t){return new On().fromJsonString(e,t)}static equals(e,t){return te.util.equals(On,e,t)}}On.runtime=te,On.typeName="google.protobuf.OneofOptions",On.fields=te.util.newFieldList(()=>[{no:1,name:"features",kind:"message",T:xt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class ln extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new ln().fromBinary(e,t)}static fromJson(e,t){return new ln().fromJson(e,t)}static fromJsonString(e,t){return new ln().fromJsonString(e,t)}static equals(e,t){return te.util.equals(ln,e,t)}}ln.runtime=te,ln.typeName="google.protobuf.EnumOptions",ln.fields=te.util.newFieldList(()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:7,name:"features",kind:"message",T:xt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class un extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new un().fromBinary(e,t)}static fromJson(e,t){return new un().fromJson(e,t)}static fromJsonString(e,t){return new un().fromJsonString(e,t)}static equals(e,t){return te.util.equals(un,e,t)}}un.runtime=te,un.typeName="google.protobuf.EnumValueOptions",un.fields=te.util.newFieldList(()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"features",kind:"message",T:xt,opt:!0},{no:3,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class cr extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new cr().fromBinary(e,t)}static fromJson(e,t){return new cr().fromJson(e,t)}static fromJsonString(e,t){return new cr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(cr,e,t)}}cr.runtime=te,cr.typeName="google.protobuf.ServiceOptions",cr.fields=te.util.newFieldList(()=>[{no:34,name:"features",kind:"message",T:xt,opt:!0},{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class fr extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new fr().fromBinary(e,t)}static fromJson(e,t){return new fr().fromJson(e,t)}static fromJsonString(e,t){return new fr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(fr,e,t)}}fr.runtime=te,fr.typeName="google.protobuf.MethodOptions",fr.fields=te.util.newFieldList(()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:te.getEnumType(Vr),opt:!0,default:Vr.IDEMPOTENCY_UNKNOWN},{no:35,name:"features",kind:"message",T:xt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);var Vr;(function(n){n[n.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",n[n.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",n[n.IDEMPOTENT=2]="IDEMPOTENT"})(Vr||(Vr={})),te.util.setEnumType(Vr,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class Ft extends y{constructor(e){super(),this.name=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Ft().fromBinary(e,t)}static fromJson(e,t){return new Ft().fromJson(e,t)}static fromJsonString(e,t){return new Ft().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Ft,e,t)}}Ft.runtime=te,Ft.typeName="google.protobuf.UninterpretedOption",Ft.fields=te.util.newFieldList(()=>[{no:2,name:"name",kind:"message",T:hr,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]);class hr extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new hr().fromBinary(e,t)}static fromJson(e,t){return new hr().fromJson(e,t)}static fromJsonString(e,t){return new hr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(hr,e,t)}}hr.runtime=te,hr.typeName="google.protobuf.UninterpretedOption.NamePart",hr.fields=te.util.newFieldList(()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]);class xt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new xt().fromBinary(e,t)}static fromJson(e,t){return new xt().fromJson(e,t)}static fromJsonString(e,t){return new xt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(xt,e,t)}}xt.runtime=te,xt.typeName="google.protobuf.FeatureSet",xt.fields=te.util.newFieldList(()=>[{no:1,name:"field_presence",kind:"enum",T:te.getEnumType(io),opt:!0},{no:2,name:"enum_type",kind:"enum",T:te.getEnumType(oo),opt:!0},{no:3,name:"repeated_field_encoding",kind:"enum",T:te.getEnumType(bi),opt:!0},{no:4,name:"utf8_validation",kind:"enum",T:te.getEnumType(so),opt:!0},{no:5,name:"message_encoding",kind:"enum",T:te.getEnumType(ao),opt:!0},{no:6,name:"json_format",kind:"enum",T:te.getEnumType(lo),opt:!0}]);var io;(function(n){n[n.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",n[n.EXPLICIT=1]="EXPLICIT",n[n.IMPLICIT=2]="IMPLICIT",n[n.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(io||(io={})),te.util.setEnumType(io,"google.protobuf.FeatureSet.FieldPresence",[{no:0,name:"FIELD_PRESENCE_UNKNOWN"},{no:1,name:"EXPLICIT"},{no:2,name:"IMPLICIT"},{no:3,name:"LEGACY_REQUIRED"}]);var oo;(function(n){n[n.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",n[n.OPEN=1]="OPEN",n[n.CLOSED=2]="CLOSED"})(oo||(oo={})),te.util.setEnumType(oo,"google.protobuf.FeatureSet.EnumType",[{no:0,name:"ENUM_TYPE_UNKNOWN"},{no:1,name:"OPEN"},{no:2,name:"CLOSED"}]);var bi;(function(n){n[n.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",n[n.PACKED=1]="PACKED",n[n.EXPANDED=2]="EXPANDED"})(bi||(bi={})),te.util.setEnumType(bi,"google.protobuf.FeatureSet.RepeatedFieldEncoding",[{no:0,name:"REPEATED_FIELD_ENCODING_UNKNOWN"},{no:1,name:"PACKED"},{no:2,name:"EXPANDED"}]);var so;(function(n){n[n.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",n[n.NONE=1]="NONE",n[n.VERIFY=2]="VERIFY"})(so||(so={})),te.util.setEnumType(so,"google.protobuf.FeatureSet.Utf8Validation",[{no:0,name:"UTF8_VALIDATION_UNKNOWN"},{no:1,name:"NONE"},{no:2,name:"VERIFY"}]);var ao;(function(n){n[n.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",n[n.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",n[n.DELIMITED=2]="DELIMITED"})(ao||(ao={})),te.util.setEnumType(ao,"google.protobuf.FeatureSet.MessageEncoding",[{no:0,name:"MESSAGE_ENCODING_UNKNOWN"},{no:1,name:"LENGTH_PREFIXED"},{no:2,name:"DELIMITED"}]);var lo;(function(n){n[n.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",n[n.ALLOW=1]="ALLOW",n[n.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(lo||(lo={})),te.util.setEnumType(lo,"google.protobuf.FeatureSet.JsonFormat",[{no:0,name:"JSON_FORMAT_UNKNOWN"},{no:1,name:"ALLOW"},{no:2,name:"LEGACY_BEST_EFFORT"}]);class dr extends y{constructor(e){super(),this.defaults=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new dr().fromBinary(e,t)}static fromJson(e,t){return new dr().fromJson(e,t)}static fromJsonString(e,t){return new dr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(dr,e,t)}}dr.runtime=te,dr.typeName="google.protobuf.FeatureSetDefaults",dr.fields=te.util.newFieldList(()=>[{no:1,name:"defaults",kind:"message",T:pr,repeated:!0},{no:4,name:"minimum_edition",kind:"enum",T:te.getEnumType(qe),opt:!0},{no:5,name:"maximum_edition",kind:"enum",T:te.getEnumType(qe),opt:!0}]);class pr extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new pr().fromBinary(e,t)}static fromJson(e,t){return new pr().fromJson(e,t)}static fromJsonString(e,t){return new pr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(pr,e,t)}}pr.runtime=te,pr.typeName="google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault",pr.fields=te.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:te.getEnumType(qe),opt:!0},{no:2,name:"features",kind:"message",T:xt,opt:!0}]);class gr extends y{constructor(e){super(),this.location=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new gr().fromBinary(e,t)}static fromJson(e,t){return new gr().fromJson(e,t)}static fromJsonString(e,t){return new gr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(gr,e,t)}}gr.runtime=te,gr.typeName="google.protobuf.SourceCodeInfo",gr.fields=te.util.newFieldList(()=>[{no:1,name:"location",kind:"message",T:mr,repeated:!0}]);class mr extends y{constructor(e){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new mr().fromBinary(e,t)}static fromJson(e,t){return new mr().fromJson(e,t)}static fromJsonString(e,t){return new mr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(mr,e,t)}}mr.runtime=te,mr.typeName="google.protobuf.SourceCodeInfo.Location",mr.fields=te.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]);class vr extends y{constructor(e){super(),this.annotation=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new vr().fromBinary(e,t)}static fromJson(e,t){return new vr().fromJson(e,t)}static fromJsonString(e,t){return new vr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(vr,e,t)}}vr.runtime=te,vr.typeName="google.protobuf.GeneratedCodeInfo",vr.fields=te.util.newFieldList(()=>[{no:1,name:"annotation",kind:"message",T:yr,repeated:!0}]);class yr extends y{constructor(e){super(),this.path=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new yr().fromBinary(e,t)}static fromJson(e,t){return new yr().fromJson(e,t)}static fromJsonString(e,t){return new yr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(yr,e,t)}}yr.runtime=te,yr.typeName="google.protobuf.GeneratedCodeInfo.Annotation",yr.fields=te.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0},{no:5,name:"semantic",kind:"enum",T:te.getEnumType(uo),opt:!0}]);var uo;(function(n){n[n.NONE=0]="NONE",n[n.SET=1]="SET",n[n.ALIAS=2]="ALIAS"})(uo||(uo={})),te.util.setEnumType(uo,"google.protobuf.GeneratedCodeInfo.Annotation.Semantic",[{no:0,name:"NONE"},{no:1,name:"SET"},{no:2,name:"ALIAS"}]);function xu(n,e){const t=n.values.find(r=>r.name===e);return w(t,`cannot parse ${n.name} default value: ${e}`),t.number}function Iu(n,e){switch(n){case E.STRING:return e;case E.BYTES:{const t=Pu(e);if(t===!1)throw new Error(`cannot parse ${E[n]} default value: ${e}`);return t}case E.INT64:case E.SFIXED64:case E.SINT64:return Q.parse(e);case E.UINT64:case E.FIXED64:return Q.uParse(e);case E.DOUBLE:case E.FLOAT:switch(e){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(e)}case E.BOOL:return e==="true";case E.INT32:case E.UINT32:case E.SINT32:case E.FIXED32:case E.SFIXED32:return parseInt(e,10)}}function Pu(n){const e=[],t={tail:n,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(r){if(this.tail.length>=r){const i=this.tail.substring(0,r);return this.tail=this.tail.substring(r),i}return!1}};for(;t.next();)switch(t.c){case"\\":if(t.next())switch(t.c){case"\\":e.push(t.c.charCodeAt(0));break;case"b":e.push(8);break;case"f":e.push(12);break;case"n":e.push(10);break;case"r":e.push(13);break;case"t":e.push(9);break;case"v":e.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const r=t.c,i=t.take(2);if(i===!1)return!1;const o=parseInt(r+i,8);if(isNaN(o))return!1;e.push(o);break}case"x":{const r=t.c,i=t.take(2);if(i===!1)return!1;const o=parseInt(r+i,16);if(isNaN(o))return!1;e.push(o);break}case"u":{const r=t.c,i=t.take(4);if(i===!1)return!1;const o=parseInt(r+i,16);if(isNaN(o))return!1;const p=new Uint8Array(4);new DataView(p.buffer).setInt32(0,o,!0),e.push(p[0],p[1],p[2],p[3]);break}case"U":{const r=t.c,i=t.take(8);if(i===!1)return!1;const o=Q.uEnc(r+i),p=new Uint8Array(8),O=new DataView(p.buffer);O.setInt32(0,o.lo,!0),O.setInt32(4,o.hi,!0),e.push(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7]);break}}break;default:e.push(t.c.charCodeAt(0))}return new Uint8Array(e)}const Ru=dr.fromBinary(Qe.dec("ChESDAgBEAIYAiABKAEwAhjmBwoREgwIAhABGAEgAigBMAEY5wcKERIMCAEQARgBIAIoATABGOgHIOYHKOgH"));function Du(n){const e=n.minimumEdition,t=n.maximumEdition;if(e===void 0||t===void 0||n.defaults.some(i=>i.edition===void 0))throw new Error("Invalid FeatureSetDefaults");const r=new Map;return(i,...o)=>{var p,O;let D=r.get(i);if(D===void 0){if(i<e)throw new Error(`Edition ${qe[i]} is earlier than the minimum supported edition ${qe[e]}`);if(t<i)throw new Error(`Edition ${qe[i]} is later than the maximum supported edition ${qe[t]}`);let G;for(const he of n.defaults){const ie=(p=he.edition)!==null&&p!==void 0?p:0;ie>i||G!==void 0&&G.e>ie||(G={e:ie,f:(O=he.features)!==null&&O!==void 0?O:new xt})}if(G===void 0)throw new Error(`No valid default found for edition ${qe[i]}`);D=G.f.toBinary(),r.set(i,D)}const M=xt.fromBinary(D);for(const G of o)G!==void 0&&M.fromBinary(G.toBinary());if(!Cu(M))throw new Error(`Invalid FeatureSet for edition ${qe[i]}`);return M}}function Cu(n){for(const e of xt.fields.list()){const t=n[e.localName];if(t===void 0||e.kind=="enum"&&t===0)return!1}return!0}function Vs(n,e){var t;const r={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map,resolveFeatures:Du((t=e==null?void 0:e.featureSetDefaults)!==null&&t!==void 0?t:Ru)},o=(n instanceof ct?n.file:n instanceof Uint8Array?ct.fromBinary(n).file:n).map(p=>Lu(p,r));return Object.assign({files:o},r)}function Lu(n,e){var t,r;w(n.name,"invalid FileDescriptorProto: missing name");const i=Object.assign(Object.assign({kind:"file",proto:n,deprecated:(r=(t=n.options)===null||t===void 0?void 0:t.deprecated)!==null&&r!==void 0?r:!1},qu(n.syntax,n.edition)),{name:n.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return br(this.proto.sourceCodeInfo,[cn.FileDescriptorProto_Syntax])},getPackageComments(){return br(this.proto.sourceCodeInfo,[cn.FileDescriptorProto_Package])},getFeatures(){var o;return e.resolveFeatures(this.edition,(o=this.proto.options)===null||o===void 0?void 0:o.features)}});e.mapEntries.clear();for(const o of n.enumType)zs(o,i,void 0,e);for(const o of n.messageType)Ks(o,i,void 0,e);for(const o of n.service)Mu(o,i,e);ss(i,e);for(const o of e.mapEntries.values())as(o,e);for(const o of i.messages)as(o,e),ss(o,e);return e.mapEntries.clear(),i}function ss(n,e){switch(n.kind){case"file":for(const t of n.proto.extension){const r=Hs(t,n,void 0,e);n.extensions.push(r),e.extensions.set(r.typeName,r)}break;case"message":for(const t of n.proto.extension){const r=Hs(t,n.file,n,e);n.nestedExtensions.push(r),e.extensions.set(r.typeName,r)}for(const t of n.nestedMessages)ss(t,e);break}}function as(n,e){const t=n.proto.oneofDecl.map(i=>ju(i,n,e)),r=new Set;for(const i of n.proto.field){const o=Ju(i,t),p=Ys(i,n.file,n,o,e);n.fields.push(p),o===void 0?n.members.push(p):(o.fields.push(p),r.has(o)||(r.add(o),n.members.push(o)))}for(const i of t.filter(o=>r.has(o)))n.oneofs.push(i);for(const i of n.nestedMessages)as(i,e)}function zs(n,e,t,r){var i,o,p;w(n.name,"invalid EnumDescriptorProto: missing name");const O={kind:"enum",proto:n,deprecated:(o=(i=n.options)===null||i===void 0?void 0:i.deprecated)!==null&&o!==void 0?o:!1,file:e,parent:t,name:n.name,typeName:Co(n,t,e),values:[],sharedPrefix:Xt(n.name,n.value.map(D=>{var M;return(M=D.name)!==null&&M!==void 0?M:""})),toString(){return`enum ${this.typeName}`},getComments(){const D=this.parent?[...this.parent.getComments().sourcePath,cn.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[cn.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return br(e.proto.sourceCodeInfo,D)},getFeatures(){var D,M,G;const he=(M=(D=this.parent)===null||D===void 0?void 0:D.getFeatures())!==null&&M!==void 0?M:this.file.getFeatures();return r.resolveFeatures(this.file.edition,he,(G=this.proto.options)===null||G===void 0?void 0:G.features)}};r.enums.set(O.typeName,O),n.value.forEach(D=>{var M,G;w(D.name,"invalid EnumValueDescriptorProto: missing name"),w(D.number!==void 0,"invalid EnumValueDescriptorProto: missing number"),O.values.push({kind:"enum_value",proto:D,deprecated:(G=(M=D.options)===null||M===void 0?void 0:M.deprecated)!==null&&G!==void 0?G:!1,parent:O,name:D.name,number:D.number,toString(){return`enum value ${O.typeName}.${this.name}`},declarationString(){var he;let ie=`${this.name} = ${this.number}`;return((he=this.proto.options)===null||he===void 0?void 0:he.deprecated)===!0&&(ie+=" [deprecated = true]"),ie},getComments(){const he=[...this.parent.getComments().sourcePath,cn.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return br(e.proto.sourceCodeInfo,he)},getFeatures(){var he;return r.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(he=this.proto.options)===null||he===void 0?void 0:he.features)}})}),((p=t==null?void 0:t.nestedEnums)!==null&&p!==void 0?p:e.enums).push(O)}function Ks(n,e,t,r){var i,o,p,O;w(n.name,"invalid DescriptorProto: missing name");const D={kind:"message",proto:n,deprecated:(o=(i=n.options)===null||i===void 0?void 0:i.deprecated)!==null&&o!==void 0?o:!1,file:e,parent:t,name:n.name,typeName:Co(n,t,e),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const M=this.parent?[...this.parent.getComments().sourcePath,cn.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[cn.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return br(e.proto.sourceCodeInfo,M)},getFeatures(){var M,G,he;const ie=(G=(M=this.parent)===null||M===void 0?void 0:M.getFeatures())!==null&&G!==void 0?G:this.file.getFeatures();return r.resolveFeatures(this.file.edition,ie,(he=this.proto.options)===null||he===void 0?void 0:he.features)}};((p=n.options)===null||p===void 0?void 0:p.mapEntry)===!0?r.mapEntries.set(D.typeName,D):(((O=t==null?void 0:t.nestedMessages)!==null&&O!==void 0?O:e.messages).push(D),r.messages.set(D.typeName,D));for(const M of n.enumType)zs(M,e,D,r);for(const M of n.nestedType)Ks(M,e,D,r)}function Mu(n,e,t){var r,i;w(n.name,"invalid ServiceDescriptorProto: missing name");const o={kind:"service",proto:n,deprecated:(i=(r=n.options)===null||r===void 0?void 0:r.deprecated)!==null&&i!==void 0?i:!1,file:e,name:n.name,typeName:Co(n,void 0,e),methods:[],toString(){return`service ${this.typeName}`},getComments(){const p=[cn.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return br(e.proto.sourceCodeInfo,p)},getFeatures(){var p;return t.resolveFeatures(this.file.edition,this.file.getFeatures(),(p=this.proto.options)===null||p===void 0?void 0:p.features)}};e.services.push(o),t.services.set(o.typeName,o);for(const p of n.method)o.methods.push(Bu(p,o,t))}function Bu(n,e,t){var r,i,o;w(n.name,"invalid MethodDescriptorProto: missing name"),w(n.inputType,"invalid MethodDescriptorProto: missing input_type"),w(n.outputType,"invalid MethodDescriptorProto: missing output_type");let p;n.clientStreaming===!0&&n.serverStreaming===!0?p=xe.BiDiStreaming:n.clientStreaming===!0?p=xe.ClientStreaming:n.serverStreaming===!0?p=xe.ServerStreaming:p=xe.Unary;let O;switch((r=n.options)===null||r===void 0?void 0:r.idempotencyLevel){case Vr.IDEMPOTENT:O=et.Idempotent;break;case Vr.NO_SIDE_EFFECTS:O=et.NoSideEffects;break;case Vr.IDEMPOTENCY_UNKNOWN:case void 0:O=void 0;break}const D=t.messages.get(Bi(n.inputType)),M=t.messages.get(Bi(n.outputType));w(D,`invalid MethodDescriptorProto: input_type ${n.inputType} not found`),w(M,`invalid MethodDescriptorProto: output_type ${n.inputType} not found`);const G=n.name;return{kind:"rpc",proto:n,deprecated:(o=(i=n.options)===null||i===void 0?void 0:i.deprecated)!==null&&o!==void 0?o:!1,parent:e,name:G,methodKind:p,input:D,output:M,idempotency:O,toString(){return`rpc ${e.typeName}.${G}`},getComments(){const he=[...this.parent.getComments().sourcePath,cn.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return br(e.file.proto.sourceCodeInfo,he)},getFeatures(){var he;return t.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(he=this.proto.options)===null||he===void 0?void 0:he.features)}}}function ju(n,e,t){return w(n.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:n,deprecated:!1,parent:e,fields:[],name:n.name,toString(){return`oneof ${e.typeName}.${this.name}`},getComments(){const r=[...this.parent.getComments().sourcePath,cn.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return br(e.file.proto.sourceCodeInfo,r)},getFeatures(){var r;return t.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(r=this.proto.options)===null||r===void 0?void 0:r.features)}}}function Ys(n,e,t,r,i){var o,p,O;w(n.name,"invalid FieldDescriptorProto: missing name"),w(n.number,"invalid FieldDescriptorProto: missing number"),w(n.type,"invalid FieldDescriptorProto: missing type");const D={proto:n,deprecated:(p=(o=n.options)===null||o===void 0?void 0:o.deprecated)!==null&&p!==void 0?p:!1,name:n.name,number:n.number,parent:t,oneof:r,optional:Fu(n,e.syntax),packedByDefault:$u(e,n,i.resolveFeatures),packed:Vu(e,t,n,i.resolveFeatures),jsonName:n.jsonName===pn(n.name)?void 0:n.jsonName,scalar:void 0,longType:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,declarationString:Ku,toString(){return`field ${this.parent.typeName}.${this.name}`},getComments(){const G=[...this.parent.getComments().sourcePath,cn.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return br(e.proto.sourceCodeInfo,G)},getFeatures(){var G;return i.resolveFeatures(e.edition,this.parent.getFeatures(),(G=this.proto.options)===null||G===void 0?void 0:G.features)}},M=n.label===Xe.REPEATED;switch(n.type){case Je.MESSAGE:case Je.GROUP:{w(n.typeName,"invalid FieldDescriptorProto: missing type_name");const G=i.mapEntries.get(Bi(n.typeName));if(G!==void 0)return w(M,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},D),{kind:"field",fieldKind:"map",repeated:!1}),Uu(G));const he=i.messages.get(Bi(n.typeName));return w(he!==void 0,`invalid FieldDescriptorProto: type_name ${n.typeName} not found`),Object.assign(Object.assign({},D),{kind:"field",fieldKind:"message",repeated:M,message:he})}case Je.ENUM:{w(n.typeName,"invalid FieldDescriptorProto: missing type_name");const G=i.enums.get(Bi(n.typeName));return w(G!==void 0,`invalid FieldDescriptorProto: type_name ${n.typeName} not found`),Object.assign(Object.assign({},D),{kind:"field",fieldKind:"enum",getDefaultValue:Ws,repeated:M,enum:G})}default:{const G=zu[n.type];return w(G,`invalid FieldDescriptorProto: unknown type ${n.type}`),Object.assign(Object.assign({},D),{kind:"field",fieldKind:"scalar",getDefaultValue:Ws,repeated:M,scalar:G,longType:((O=n.options)===null||O===void 0?void 0:O.jstype)==wn.JS_STRING?I.STRING:I.BIGINT})}}}function Hs(n,e,t,r){w(n.extendee,"invalid FieldDescriptorProto: missing extendee");const i=Ys(n,e,null,void 0,r),o=r.messages.get(Bi(n.extendee));return w(o,`invalid FieldDescriptorProto: extendee ${n.extendee} not found`),Object.assign(Object.assign({},i),{kind:"extension",typeName:Co(n,t,e),parent:t,file:e,extendee:o,toString(){return`extension ${this.typeName}`},getComments(){const p=this.parent?[...this.parent.getComments().sourcePath,cn.DescriptorProto_Extension,this.parent.proto.extension.indexOf(n)]:[cn.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(n)];return br(e.proto.sourceCodeInfo,p)},getFeatures(){var p,O;return r.resolveFeatures(this.file.edition,((p=this.parent)!==null&&p!==void 0?p:this.file).getFeatures(),(O=this.proto.options)===null||O===void 0?void 0:O.features)}})}function qu(n,e){let t,r;switch(n){case void 0:case"proto2":r="proto2",t=qe.EDITION_PROTO2;break;case"proto3":r="proto3",t=qe.EDITION_PROTO3;break;case"editions":switch(r="editions",e){case void 0:case qe.EDITION_1_TEST_ONLY:case qe.EDITION_2_TEST_ONLY:case qe.EDITION_99997_TEST_ONLY:case qe.EDITION_99998_TEST_ONLY:case qe.EDITION_99999_TEST_ONLY:case qe.EDITION_UNKNOWN:t=qe.EDITION_UNKNOWN;break;default:t=e;break}break;default:throw new Error(`invalid FileDescriptorProto: unsupported syntax: ${n}`)}if(n==="editions"&&e===qe.EDITION_UNKNOWN)throw new Error(`invalid FileDescriptorProto: syntax ${n} cannot have edition ${String(e)}`);return{syntax:r,edition:t}}function Co(n,e,t){w(n.name,`invalid ${n.getType().typeName}: missing name`);let r;return e?r=`${e.typeName}.${n.name}`:t.proto.package!==void 0?r=`${t.proto.package}.${n.name}`:r=`${n.name}`,r}function Bi(n){return n.startsWith(".")?n.substring(1):n}function Uu(n){var e,t;w((e=n.proto.options)===null||e===void 0?void 0:e.mapEntry,`invalid DescriptorProto: expected ${n.toString()} to be a map entry`),w(n.fields.length===2,`invalid DescriptorProto: map entry ${n.toString()} has ${n.fields.length} fields`);const r=n.fields.find(p=>p.proto.number===1);w(r,`invalid DescriptorProto: map entry ${n.toString()} is missing key field`);const i=r.scalar;w(i!==void 0&&i!==E.BYTES&&i!==E.FLOAT&&i!==E.DOUBLE,`invalid DescriptorProto: map entry ${n.toString()} has unexpected key type ${(t=r.proto.type)!==null&&t!==void 0?t:-1}`);const o=n.fields.find(p=>p.proto.number===2);switch(w(o,`invalid DescriptorProto: map entry ${n.toString()} is missing value field`),o.fieldKind){case"scalar":return{mapKey:i,mapValue:Object.assign(Object.assign({},o),{kind:"scalar"})};case"message":return{mapKey:i,mapValue:Object.assign(Object.assign({},o),{kind:"message"})};case"enum":return{mapKey:i,mapValue:Object.assign(Object.assign({},o),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}function Ju(n,e){var t;const r=n.oneofIndex;if(r===void 0)return;let i;return n.proto3Optional!==!0&&(i=e[r],w(i,`invalid FieldDescriptorProto: oneof #${r} for field #${(t=n.number)!==null&&t!==void 0?t:-1} not found`)),i}function Fu(n,e){switch(e){case"proto2":return n.oneofIndex===void 0&&n.label===Xe.OPTIONAL;case"proto3":return n.proto3Optional===!0;case"editions":return!1}}function $u(n,e,t){const{repeatedFieldEncoding:r}=t(n.edition);if(r!=bi.PACKED)return!1;switch(e.type){case Je.STRING:case Je.BYTES:case Je.GROUP:case Je.MESSAGE:return!1;default:return!0}}function Vu(n,e,t,r){var i,o,p,O,D,M;switch(t.type){case Je.STRING:case Je.BYTES:case Je.GROUP:case Je.MESSAGE:return!1;default:switch(n.edition){case qe.EDITION_PROTO2:return(o=(i=t.options)===null||i===void 0?void 0:i.packed)!==null&&o!==void 0?o:!1;case qe.EDITION_PROTO3:return(O=(p=t.options)===null||p===void 0?void 0:p.packed)!==null&&O!==void 0?O:!0;default:{const{repeatedFieldEncoding:G}=r(n.edition,(D=e==null?void 0:e.getFeatures())!==null&&D!==void 0?D:n.getFeatures(),(M=t.options)===null||M===void 0?void 0:M.features);return G==bi.PACKED}}}}const zu={[Je.DOUBLE]:E.DOUBLE,[Je.FLOAT]:E.FLOAT,[Je.INT64]:E.INT64,[Je.UINT64]:E.UINT64,[Je.INT32]:E.INT32,[Je.FIXED64]:E.FIXED64,[Je.FIXED32]:E.FIXED32,[Je.BOOL]:E.BOOL,[Je.STRING]:E.STRING,[Je.GROUP]:void 0,[Je.MESSAGE]:void 0,[Je.BYTES]:E.BYTES,[Je.UINT32]:E.UINT32,[Je.ENUM]:void 0,[Je.SFIXED32]:E.SFIXED32,[Je.SFIXED64]:E.SFIXED64,[Je.SINT32]:E.SINT32,[Je.SINT64]:E.SINT64};function br(n,e){if(!n)return{leadingDetached:[],sourcePath:e};for(const t of n.location)if(t.path.length===e.length&&!t.path.some((r,i)=>e[i]!==r))return{leadingDetached:t.leadingDetachedComments,leading:t.leadingComments,trailing:t.trailingComments,sourcePath:e};return{leadingDetached:[],sourcePath:e}}var cn;(function(n){n[n.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",n[n.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",n[n.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",n[n.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",n[n.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",n[n.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",n[n.DescriptorProto_Field=2]="DescriptorProto_Field",n[n.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",n[n.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",n[n.DescriptorProto_Extension=6]="DescriptorProto_Extension",n[n.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",n[n.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",n[n.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"})(cn||(cn={}));function Ku(){var n,e,t;const r=[];this.repeated&&r.push("repeated"),this.optional&&r.push("optional"),(this.kind==="extension"?this.file:this.parent.file).syntax=="proto2"&&this.proto.label===Xe.REQUIRED&&r.push("required");let o;switch(this.fieldKind){case"scalar":o=E[this.scalar].toLowerCase();break;case"enum":o=this.enum.typeName;break;case"message":o=this.message.typeName;break;case"map":{const D=E[this.mapKey].toLowerCase();let M;switch(this.mapValue.kind){case"scalar":M=E[this.mapValue.scalar].toLowerCase();break;case"enum":M=this.mapValue.enum.typeName;break;case"message":M=this.mapValue.message.typeName;break}o=`map<${D}, ${M}>`;break}}r.push(`${o} ${this.name} = ${this.number}`);const p=[];((n=this.proto.options)===null||n===void 0?void 0:n.packed)!==void 0&&p.push(`packed = ${this.proto.options.packed.toString()}`);let O=this.proto.defaultValue;return O!==void 0&&((this.proto.type==Je.BYTES||this.proto.type==Je.STRING)&&(O='"'+O.replace('"','\\"')+'"'),p.push(`default = ${O}`)),this.jsonName!==void 0&&p.push(`json_name = "${this.jsonName}"`),((e=this.proto.options)===null||e===void 0?void 0:e.jstype)!==void 0&&p.push(`jstype = ${wn[this.proto.options.jstype]}`),((t=this.proto.options)===null||t===void 0?void 0:t.deprecated)===!0&&p.push("deprecated = true"),p.length>0&&r.push("["+p.join(", ")+"]"),r.join(" ")}function Ws(){const n=this.proto.defaultValue;if(n!==void 0)switch(this.fieldKind){case"enum":return xu(this.enum,n);case"scalar":return Iu(this.scalar,n);default:return}}function Yu(...n){const e={},t={},r={},i={add(o){if("fields"in o){if(!this.findMessage(o.typeName)){e[o.typeName]=o;for(const p of o.fields.list())p.kind=="message"?this.add(p.T):p.kind=="map"&&p.V.kind=="message"?this.add(p.V.T):p.kind=="enum"&&this.add(p.T)}}else if("methods"in o){if(!this.findService(o.typeName)){r[o.typeName]=o;for(const p of Object.values(o.methods))this.add(p.I),this.add(p.O)}}else t[o.typeName]=o},findMessage(o){return e[o]},findEnum(o){return t[o]},findService(o){return r[o]}};for(const o of n)i.add(o);return i}let co=class Pi extends y{constructor(e){super(),this.seconds=Q.zero,this.nanos=0,ce.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${ce.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Q.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Pi.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Pi({seconds:Q.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Pi().fromBinary(e,t)}static fromJson(e,t){return new Pi().fromJson(e,t)}static fromJsonString(e,t){return new Pi().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Pi,e,t)}};co.runtime=ce,co.typeName="google.protobuf.Timestamp",co.fields=ce.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Hn extends y{constructor(e){super(),this.seconds=Q.zero,this.nanos=0,ce.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${ce.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${ce.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${ce.json.debug(e)}`);if(this.seconds=Q.parse(i),typeof r[2]=="string"){const o=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(o),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new Hn().fromBinary(e,t)}static fromJson(e,t){return new Hn().fromJson(e,t)}static fromJsonString(e,t){return new Hn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Hn,e,t)}}Hn.runtime=ce,Hn.typeName="google.protobuf.Duration",Hn.fields=ce.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Sn extends y{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),ce.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let p=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||p===null||Array.isArray(p)||typeof p!="object")&&(p={value:p}),p["@type"]=this.typeUrl,p}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const o=this.typeUrlToName(i),p=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(o);if(!p)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let O;if(o.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))O=p.fromJson(e.value,t);else{const D=Object.assign({},e);delete D["@type"],O=p.fromJson(D,t)}return this.packFrom(O),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(!!t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new Sn;return t.packFrom(e),t}static fromBinary(e,t){return new Sn().fromBinary(e,t)}static fromJson(e,t){return new Sn().fromJson(e,t)}static fromJsonString(e,t){return new Sn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Sn,e,t)}}Sn.runtime=ce,Sn.typeName="google.protobuf.Any",Sn.fields=ce.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Tr extends y{constructor(e){super(),ce.util.initPartial(e,this)}static fromBinary(e,t){return new Tr().fromBinary(e,t)}static fromJson(e,t){return new Tr().fromJson(e,t)}static fromJsonString(e,t){return new Tr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Tr,e,t)}}Tr.runtime=ce,Tr.typeName="google.protobuf.Empty",Tr.fields=ce.util.newFieldList(()=>[]);class _r extends y{constructor(e){super(),this.paths=[],ce.util.initPartial(e,this)}toJson(e){function t(r){let i=!1;const o=[];for(let p=0;p<r.length;p++){let O=r.charAt(p);switch(O){case"_":i=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o.push(O),i=!1;break;default:i&&(i=!1,O=O.toUpperCase()),o.push(O);break}}return o.join("")}return this.paths.map(r=>{if(r.match(/_[0-9]?_/g)||r.match(/[A-Z]/g))throw new Error('cannot encode google.protobuf.FieldMask to JSON: lowerCamelCase of path name "'+r+'" is irreversible');return t(r)}).join(",")}fromJson(e,t){if(typeof e!="string")throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+ce.json.debug(e));if(e==="")return this;function r(i){if(i.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const o=i.replace(/[A-Z]/g,p=>"_"+p.toLowerCase());return o[0]==="_"?o.substring(1):o}return this.paths=e.split(",").map(r),this}static fromBinary(e,t){return new _r().fromBinary(e,t)}static fromJson(e,t){return new _r().fromJson(e,t)}static fromJsonString(e,t){return new _r().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(_r,e,t)}}_r.runtime=ce,_r.typeName="google.protobuf.FieldMask",_r.fields=ce.util.newFieldList(()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}]);var Ti;(function(n){n[n.NULL_VALUE=0]="NULL_VALUE"})(Ti||(Ti={})),ce.util.setEnumType(Ti,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class Dn extends y{constructor(e){super(),this.fields={},ce.util.initPartial(e,this)}toJson(e){const t={};for(const[r,i]of Object.entries(this.fields))t[r]=i.toJson(e);return t}fromJson(e,t){if(typeof e!="object"||e==null||Array.isArray(e))throw new Error("cannot decode google.protobuf.Struct from JSON "+ce.json.debug(e));for(const[r,i]of Object.entries(e))this.fields[r]=gn.fromJson(i);return this}static fromBinary(e,t){return new Dn().fromBinary(e,t)}static fromJson(e,t){return new Dn().fromJson(e,t)}static fromJsonString(e,t){return new Dn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Dn,e,t)}}Dn.runtime=ce,Dn.typeName="google.protobuf.Struct",Dn.fields=ce.util.newFieldList(()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:gn}}]);class gn extends y{constructor(e){super(),this.kind={case:void 0},ce.util.initPartial(e,this)}toJson(e){switch(this.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(this.kind.value))throw new Error("google.protobuf.Value cannot be NaN or Infinity");return this.kind.value;case"boolValue":return this.kind.value;case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},e),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(e,t){switch(typeof e){case"number":this.kind={case:"numberValue",value:e};break;case"string":this.kind={case:"stringValue",value:e};break;case"boolean":this.kind={case:"boolValue",value:e};break;case"object":e===null?this.kind={case:"nullValue",value:Ti.NULL_VALUE}:Array.isArray(e)?this.kind={case:"listValue",value:Cn.fromJson(e)}:this.kind={case:"structValue",value:Dn.fromJson(e)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+ce.json.debug(e))}return this}static fromBinary(e,t){return new gn().fromBinary(e,t)}static fromJson(e,t){return new gn().fromJson(e,t)}static fromJsonString(e,t){return new gn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(gn,e,t)}}gn.runtime=ce,gn.typeName="google.protobuf.Value",gn.fields=ce.util.newFieldList(()=>[{no:1,name:"null_value",kind:"enum",T:ce.getEnumType(Ti),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:Dn,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:Cn,oneof:"kind"}]);class Cn extends y{constructor(e){super(),this.values=[],ce.util.initPartial(e,this)}toJson(e){return this.values.map(t=>t.toJson())}fromJson(e,t){if(!Array.isArray(e))throw new Error("cannot decode google.protobuf.ListValue from JSON "+ce.json.debug(e));for(let r of e)this.values.push(gn.fromJson(r));return this}static fromBinary(e,t){return new Cn().fromBinary(e,t)}static fromJson(e,t){return new Cn().fromJson(e,t)}static fromJsonString(e,t){return new Cn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Cn,e,t)}}Cn.runtime=ce,Cn.typeName="google.protobuf.ListValue",Cn.fields=ce.util.newFieldList(()=>[{no:1,name:"values",kind:"message",T:gn,repeated:!0}]);class Ln extends y{constructor(e){super(),this.value=0,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ln().fromBinary(e,t)}static fromJson(e,t){return new Ln().fromJson(e,t)}static fromJsonString(e,t){return new Ln().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Ln,e,t)}}Ln.runtime=ce,Ln.typeName="google.protobuf.DoubleValue",Ln.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Ln.fieldWrapper={wrapField(n){return new Ln({value:n})},unwrapField(n){return n.value}};class Mn extends y{constructor(e){super(),this.value=0,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Mn().fromBinary(e,t)}static fromJson(e,t){return new Mn().fromJson(e,t)}static fromJsonString(e,t){return new Mn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Mn,e,t)}}Mn.runtime=ce,Mn.typeName="google.protobuf.FloatValue",Mn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),Mn.fieldWrapper={wrapField(n){return new Mn({value:n})},unwrapField(n){return n.value}};class Bn extends y{constructor(e){super(),this.value=Q.zero,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.INT64,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Bn().fromBinary(e,t)}static fromJson(e,t){return new Bn().fromJson(e,t)}static fromJsonString(e,t){return new Bn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Bn,e,t)}}Bn.runtime=ce,Bn.typeName="google.protobuf.Int64Value",Bn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),Bn.fieldWrapper={wrapField(n){return new Bn({value:n})},unwrapField(n){return n.value}};class jn extends y{constructor(e){super(),this.value=Q.zero,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.UINT64,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new jn().fromBinary(e,t)}static fromJson(e,t){return new jn().fromJson(e,t)}static fromJsonString(e,t){return new jn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(jn,e,t)}}jn.runtime=ce,jn.typeName="google.protobuf.UInt64Value",jn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),jn.fieldWrapper={wrapField(n){return new jn({value:n})},unwrapField(n){return n.value}};class qn extends y{constructor(e){super(),this.value=0,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.INT32,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new qn().fromBinary(e,t)}static fromJson(e,t){return new qn().fromJson(e,t)}static fromJsonString(e,t){return new qn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(qn,e,t)}}qn.runtime=ce,qn.typeName="google.protobuf.Int32Value",qn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),qn.fieldWrapper={wrapField(n){return new qn({value:n})},unwrapField(n){return n.value}};class Un extends y{constructor(e){super(),this.value=0,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.UINT32,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Un().fromBinary(e,t)}static fromJson(e,t){return new Un().fromJson(e,t)}static fromJsonString(e,t){return new Un().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Un,e,t)}}Un.runtime=ce,Un.typeName="google.protobuf.UInt32Value",Un.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),Un.fieldWrapper={wrapField(n){return new Un({value:n})},unwrapField(n){return n.value}};class Jn extends y{constructor(e){super(),this.value=!1,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.BOOL,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Jn().fromBinary(e,t)}static fromJson(e,t){return new Jn().fromJson(e,t)}static fromJsonString(e,t){return new Jn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Jn,e,t)}}Jn.runtime=ce,Jn.typeName="google.protobuf.BoolValue",Jn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),Jn.fieldWrapper={wrapField(n){return new Jn({value:n})},unwrapField(n){return n.value}};let _i=class Ro extends y{constructor(e){super(),this.value="",ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.STRING,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ro().fromBinary(e,t)}static fromJson(e,t){return new Ro().fromJson(e,t)}static fromJsonString(e,t){return new Ro().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Ro,e,t)}};_i.runtime=ce,_i.typeName="google.protobuf.StringValue",_i.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),_i.fieldWrapper={wrapField(n){return new _i({value:n})},unwrapField(n){return n.value}};class Fn extends y{constructor(e){super(),this.value=new Uint8Array(0),ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.BYTES,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Fn().fromBinary(e,t)}static fromJson(e,t){return new Fn().fromJson(e,t)}static fromJsonString(e,t){return new Fn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Fn,e,t)}}Fn.runtime=ce,Fn.typeName="google.protobuf.BytesValue",Fn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),Fn.fieldWrapper={wrapField(n){return new Fn({value:n})},unwrapField(n){return n.value}};const Hu=[Sn,Hn,Tr,_r,Dn,gn,Cn,co,Hn,Ln,Mn,Bn,qn,Un,jn,Jn,_i,Fn],Wu=[f(Ti)];function Gu(n,e=!0){const t=n instanceof Uint8Array||n instanceof ct?Vs(n):n,r={},i={},o={};if(e){for(const p of Hu)i[p.typeName]=p;for(const p of Wu)r[p.typeName]=p}return{findEnum(p){const O=r[p];if(O)return O;const D=t.enums.get(p);if(!D)return;const G=(D.file.syntax=="proto3"?ce:te).makeEnumType(p,D.values.map(he=>({no:he.number,name:he.name,localName:Jr(he)})),{});return r[p]=G,G},findMessage(p){const O=i[p];if(O)return O;const D=t.messages.get(p);if(!D)return;const M=D.file.syntax=="proto3"?ce:te,G=[],he=M.makeMessageType(p,()=>G,{localName:Jr(D)});i[p]=he;for(const ie of D.fields){const ye=Xu(ie,this);G.push(ye)}return he},findService(p){const O=o[p];if(O)return O;const D=t.services.get(p);if(!D)return;const M={};for(const G of D.methods){const he=this.findMessage(G.input.typeName),ie=this.findMessage(G.output.typeName);w(he,`message "${G.input.typeName}" for ${G.toString()} not found`),w(ie,`output message "${G.output.typeName}" for ${G.toString()} not found`),M[Jr(G)]={name:G.name,I:he,O:ie,kind:G.methodKind,idempotency:G.idempotency}}return o[p]={typeName:D.typeName,methods:M}}}}function Xu(n,e){switch(n.fieldKind){case"map":return Zu(n,e);case"message":return ec(n,e);case"enum":{const t=tc(n,e);return t.default=n.getDefaultValue(),t}case"scalar":{const t=Qu(n);return t.default=n.getDefaultValue(),t}}}function Zu(n,e){const t={kind:"map",no:n.number,name:n.name,jsonName:n.jsonName,K:n.mapKey};if(n.mapValue.message){const r=e.findMessage(n.mapValue.message.typeName);return w(r,`message "${n.mapValue.message.typeName}" for ${n.toString()} not found`),Object.assign(Object.assign({},t),{V:{kind:"message",T:r}})}if(n.mapValue.enum){const r=e.findEnum(n.mapValue.enum.typeName);return w(r,`enum "${n.mapValue.enum.typeName}" for ${n.toString()} not found`),Object.assign(Object.assign({},t),{V:{kind:"enum",T:r}})}return Object.assign(Object.assign({},t),{V:{kind:"scalar",T:n.mapValue.scalar}})}function Qu(n){const e=n.longType==I.STRING?{L:I.STRING}:{},t=Object.assign({kind:"scalar",no:n.number,name:n.name,jsonName:n.jsonName,T:n.scalar},e);return n.repeated?Object.assign(Object.assign({},t),{repeated:!0,packed:n.packed,oneof:void 0,T:n.scalar}):n.oneof?Object.assign(Object.assign({},t),{oneof:n.oneof.name}):n.optional?Object.assign(Object.assign({},t),{opt:!0}):t}function ec(n,e){const t=e.findMessage(n.message.typeName);w(t,`message "${n.message.typeName}" for ${n.toString()} not found`);const r={kind:"message",no:n.number,name:n.name,jsonName:n.jsonName,T:t,delimited:n.proto.type==Je.GROUP};return n.repeated?Object.assign(Object.assign({},r),{repeated:!0,packed:n.packed,oneof:void 0}):n.oneof?Object.assign(Object.assign({},r),{oneof:n.oneof.name}):n.optional?Object.assign(Object.assign({},r),{opt:!0}):r}function tc(n,e){const t=e.findEnum(n.enum.typeName);w(t,`enum "${n.enum.typeName}" for ${n.toString()} not found`);const r={kind:"enum",no:n.number,name:n.name,jsonName:n.jsonName,T:t};return n.repeated?Object.assign(Object.assign({},r),{repeated:!0,packed:n.packed,oneof:void 0}):n.oneof?Object.assign(Object.assign({},r),{oneof:n.oneof.name}):n.optional?Object.assign(Object.assign({},r),{opt:!0}):r}function Gs(n){if(!(n instanceof y))return n;const e=n.getType(),t={};for(const r of e.fields.byMember()){const i=n[r.localName];let o;if(r.repeated)o=i.map(p=>Lo(p));else if(r.kind=="map"){o={};for(const[p,O]of Object.entries(i))o[p]=Lo(O)}else r.kind=="oneof"?o=r.findField(i.case)?{case:i.case,value:Lo(i.value)}:{case:void 0}:o=Lo(i);t[r.localName]=o}return t}function Lo(n){if(n===void 0)return n;if(n instanceof y)return Gs(n);if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}class Er extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new Er().fromBinary(e,t)}static fromJson(e,t){return new Er().fromJson(e,t)}static fromJsonString(e,t){return new Er().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Er,e,t)}}Er.runtime=te,Er.typeName="google.protobuf.compiler.Version",Er.fields=te.util.newFieldList(()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]);class zr extends y{constructor(e){super(),this.fileToGenerate=[],this.protoFile=[],this.sourceFileDescriptors=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new zr().fromBinary(e,t)}static fromJson(e,t){return new zr().fromJson(e,t)}static fromJsonString(e,t){return new zr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(zr,e,t)}}zr.runtime=te,zr.typeName="google.protobuf.compiler.CodeGeneratorRequest",zr.fields=te.util.newFieldList(()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:Ge,repeated:!0},{no:17,name:"source_file_descriptors",kind:"message",T:Ge,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:Er,opt:!0}]);class Kr extends y{constructor(e){super(),this.file=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Kr().fromBinary(e,t)}static fromJson(e,t){return new Kr().fromJson(e,t)}static fromJsonString(e,t){return new Kr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Kr,e,t)}}Kr.runtime=te,Kr.typeName="google.protobuf.compiler.CodeGeneratorResponse",Kr.fields=te.util.newFieldList(()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:wr,repeated:!0}]);var Mo;(function(n){n[n.NONE=0]="NONE",n[n.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL",n[n.SUPPORTS_EDITIONS=2]="SUPPORTS_EDITIONS"})(Mo||(Mo={})),te.util.setEnumType(Mo,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"},{no:2,name:"FEATURE_SUPPORTS_EDITIONS"}]);class wr extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new wr().fromBinary(e,t)}static fromJson(e,t){return new wr().fromJson(e,t)}static fromJsonString(e,t){return new wr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(wr,e,t)}}wr.runtime=te,wr.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",wr.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:vr,opt:!0}]);class $n extends y{constructor(e){super(),this.fileName="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new $n().fromBinary(e,t)}static fromJson(e,t){return new $n().fromJson(e,t)}static fromJsonString(e,t){return new $n().fromJsonString(e,t)}static equals(e,t){return ce.util.equals($n,e,t)}}$n.runtime=ce,$n.typeName="google.protobuf.SourceContext",$n.fields=ce.util.newFieldList(()=>[{no:1,name:"file_name",kind:"scalar",T:9}]);var Vn;(function(n){n[n.PROTO2=0]="PROTO2",n[n.PROTO3=1]="PROTO3",n[n.EDITIONS=2]="EDITIONS"})(Vn||(Vn={})),ce.util.setEnumType(Vn,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"},{no:2,name:"SYNTAX_EDITIONS"}]);class Yr extends y{constructor(e){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=Vn.PROTO2,this.edition="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new Yr().fromBinary(e,t)}static fromJson(e,t){return new Yr().fromJson(e,t)}static fromJsonString(e,t){return new Yr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Yr,e,t)}}Yr.runtime=ce,Yr.typeName="google.protobuf.Type",Yr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:Or,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:fn,repeated:!0},{no:5,name:"source_context",kind:"message",T:$n},{no:6,name:"syntax",kind:"enum",T:ce.getEnumType(Vn)},{no:7,name:"edition",kind:"scalar",T:9}]);class Or extends y{constructor(e){super(),this.kind=ji.TYPE_UNKNOWN,this.cardinality=qi.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new Or().fromBinary(e,t)}static fromJson(e,t){return new Or().fromJson(e,t)}static fromJsonString(e,t){return new Or().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Or,e,t)}}Or.runtime=ce,Or.typeName="google.protobuf.Field",Or.fields=ce.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:ce.getEnumType(ji)},{no:2,name:"cardinality",kind:"enum",T:ce.getEnumType(qi)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:fn,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}]);var ji;(function(n){n[n.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",n[n.TYPE_DOUBLE=1]="TYPE_DOUBLE",n[n.TYPE_FLOAT=2]="TYPE_FLOAT",n[n.TYPE_INT64=3]="TYPE_INT64",n[n.TYPE_UINT64=4]="TYPE_UINT64",n[n.TYPE_INT32=5]="TYPE_INT32",n[n.TYPE_FIXED64=6]="TYPE_FIXED64",n[n.TYPE_FIXED32=7]="TYPE_FIXED32",n[n.TYPE_BOOL=8]="TYPE_BOOL",n[n.TYPE_STRING=9]="TYPE_STRING",n[n.TYPE_GROUP=10]="TYPE_GROUP",n[n.TYPE_MESSAGE=11]="TYPE_MESSAGE",n[n.TYPE_BYTES=12]="TYPE_BYTES",n[n.TYPE_UINT32=13]="TYPE_UINT32",n[n.TYPE_ENUM=14]="TYPE_ENUM",n[n.TYPE_SFIXED32=15]="TYPE_SFIXED32",n[n.TYPE_SFIXED64=16]="TYPE_SFIXED64",n[n.TYPE_SINT32=17]="TYPE_SINT32",n[n.TYPE_SINT64=18]="TYPE_SINT64"})(ji||(ji={})),ce.util.setEnumType(ji,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var qi;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.OPTIONAL=1]="OPTIONAL",n[n.REQUIRED=2]="REQUIRED",n[n.REPEATED=3]="REPEATED"})(qi||(qi={})),ce.util.setEnumType(qi,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class Hr extends y{constructor(e){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=Vn.PROTO2,this.edition="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new Hr().fromBinary(e,t)}static fromJson(e,t){return new Hr().fromJson(e,t)}static fromJsonString(e,t){return new Hr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Hr,e,t)}}Hr.runtime=ce,Hr.typeName="google.protobuf.Enum",Hr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:Sr,repeated:!0},{no:3,name:"options",kind:"message",T:fn,repeated:!0},{no:4,name:"source_context",kind:"message",T:$n},{no:5,name:"syntax",kind:"enum",T:ce.getEnumType(Vn)},{no:6,name:"edition",kind:"scalar",T:9}]);class Sr extends y{constructor(e){super(),this.name="",this.number=0,this.options=[],ce.util.initPartial(e,this)}static fromBinary(e,t){return new Sr().fromBinary(e,t)}static fromJson(e,t){return new Sr().fromJson(e,t)}static fromJsonString(e,t){return new Sr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Sr,e,t)}}Sr.runtime=ce,Sr.typeName="google.protobuf.EnumValue",Sr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:fn,repeated:!0}]);class fn extends y{constructor(e){super(),this.name="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new fn().fromBinary(e,t)}static fromJson(e,t){return new fn().fromJson(e,t)}static fromJsonString(e,t){return new fn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(fn,e,t)}}fn.runtime=ce,fn.typeName="google.protobuf.Option",fn.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:Sn}]);class Wr extends y{constructor(e){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=Vn.PROTO2,ce.util.initPartial(e,this)}static fromBinary(e,t){return new Wr().fromBinary(e,t)}static fromJson(e,t){return new Wr().fromJson(e,t)}static fromJsonString(e,t){return new Wr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Wr,e,t)}}Wr.runtime=ce,Wr.typeName="google.protobuf.Api",Wr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:Nr,repeated:!0},{no:3,name:"options",kind:"message",T:fn,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:$n},{no:6,name:"mixins",kind:"message",T:Ar,repeated:!0},{no:7,name:"syntax",kind:"enum",T:ce.getEnumType(Vn)}]);class Nr extends y{constructor(e){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=Vn.PROTO2,ce.util.initPartial(e,this)}static fromBinary(e,t){return new Nr().fromBinary(e,t)}static fromJson(e,t){return new Nr().fromJson(e,t)}static fromJsonString(e,t){return new Nr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Nr,e,t)}}Nr.runtime=ce,Nr.typeName="google.protobuf.Method",Nr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:fn,repeated:!0},{no:7,name:"syntax",kind:"enum",T:ce.getEnumType(Vn)}]);class Ar extends y{constructor(e){super(),this.name="",this.root="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new Ar().fromBinary(e,t)}static fromJson(e,t){return new Ar().fromJson(e,t)}static fromJsonString(e,t){return new Ar().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Ar,e,t)}}Ar.runtime=ce,Ar.typeName="google.protobuf.Mixin",Ar.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}]);const ls=Object.freeze(Object.defineProperty({__proto__:null,Any:Sn,Api:Wr,BinaryReader:W,BinaryWriter:U,BoolValue:Jn,BytesValue:Fn,CodeGeneratorRequest:zr,CodeGeneratorResponse:Kr,get CodeGeneratorResponse_Feature(){return Mo},CodeGeneratorResponse_File:wr,DescriptorProto:mt,DescriptorProto_ExtensionRange:pt,DescriptorProto_ReservedRange:Pt,DoubleValue:Ln,Duration:Hn,get Edition(){return qe},Empty:Tr,Enum:Hr,EnumDescriptorProto:Nt,EnumDescriptorProto_EnumReservedRange:tt,EnumOptions:ln,EnumValue:Sr,EnumValueDescriptorProto:_t,EnumValueOptions:un,ExtensionRangeOptions:Dt,ExtensionRangeOptions_Declaration:Ue,get ExtensionRangeOptions_VerificationState(){return sn},FeatureSet:xt,FeatureSetDefaults:dr,FeatureSetDefaults_FeatureSetEditionDefault:pr,get FeatureSet_EnumType(){return oo},get FeatureSet_FieldPresence(){return io},get FeatureSet_JsonFormat(){return lo},get FeatureSet_MessageEncoding(){return ao},get FeatureSet_RepeatedFieldEncoding(){return bi},get FeatureSet_Utf8Validation(){return so},Field:Or,FieldDescriptorProto:at,get FieldDescriptorProto_Label(){return Xe},get FieldDescriptorProto_Type(){return Je},FieldMask:_r,FieldOptions:Ct,get FieldOptions_CType(){return Fr},FieldOptions_EditionDefault:an,get FieldOptions_JSType(){return wn},get FieldOptions_OptionRetention(){return $r},get FieldOptions_OptionTargetType(){return ur},get Field_Cardinality(){return qi},get Field_Kind(){return ji},FileDescriptorProto:Ge,FileDescriptorSet:ct,FileOptions:jt,get FileOptions_OptimizeMode(){return Rn},FloatValue:Mn,GeneratedCodeInfo:vr,GeneratedCodeInfo_Annotation:yr,get GeneratedCodeInfo_Annotation_Semantic(){return uo},Int32Value:qn,Int64Value:Bn,ListValue:Cn,get LongType(){return I},Message:y,MessageOptions:Jt,Method:Nr,MethodDescriptorProto:kt,get MethodIdempotency(){return et},get MethodKind(){return xe},MethodOptions:fr,get MethodOptions_IdempotencyLevel(){return Vr},Mixin:Ar,get NullValue(){return Ti},OneofDescriptorProto:rt,OneofOptions:On,Option:fn,get ScalarType(){return E},ServiceDescriptorProto:vt,ServiceOptions:cr,SourceCodeInfo:gr,SourceCodeInfo_Location:mr,SourceContext:$n,StringValue:_i,Struct:Dn,get Syntax(){return Vn},Timestamp:co,Type:Yr,UInt32Value:Un,UInt64Value:jn,UninterpretedOption:Ft,UninterpretedOption_NamePart:hr,Value:gn,Version:Er,get WireType(){return H},codegenInfo:Ne,createDescriptorSet:Vs,createRegistry:Yu,createRegistryFromDescriptors:Gu,proto2:te,proto3:ce,protoBase64:Qe,protoDelimited:st,protoDouble:ve,protoInt64:Q,toPlainMessage:Gs},Symbol.toStringTag,{value:"Module"}));function Xs(n){const e=x[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class qt extends Error{constructor(e,t=x.Unknown,r,i,o){super(nc(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r!=null?r:{}),this.details=i!=null?i:[],this.cause=o}static from(e,t=x.Unknown){return e instanceof qt?e:e instanceof Error?e.name=="AbortError"?new qt(e.message,x.Canceled):new qt(e.message,t,void 0,void 0,e):new qt(String(e),t,void 0,void 0,e)}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if(i instanceof y){t.findMessage(i.getType().typeName)&&r.push(i);continue}const o=t.findMessage(i.type);if(o)try{r.push(o.fromBinary(i.value))}catch{}}return r}}function nc(n,e){return n.length?`[${Xs(e)}] ${n}`:`[${Xs(e)}]`}function rc(n,e,t){try{const r=Qe.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw qt.from(r,x.DataLoss)}}function ic(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const o=e(Object.assign(Object.assign({},i),{localName:r,service:n}));o!=null&&(t[r]=o)}return t}function Zs(n){let e,t=new Uint8Array(0);function r(i){const o=new Uint8Array(t.length+i.length);o.set(t),o.set(i,t.length),t=o}return new ReadableStream({start(){e=n.getReader()},async pull(i){let o;for(;;){if(o===void 0&&t.byteLength>=5){let D=0;for(let M=1;M<5;M++)D=(D<<8)+t[M];o={flags:t[0],length:D}}if(o!==void 0&&t.byteLength>=o.length+5)break;const O=await e.read();if(O.done)break;r(O.value)}if(o===void 0){if(t.byteLength==0){i.close();return}i.error(new qt("premature end of stream",x.DataLoss));return}const p=t.subarray(5,5+o.length);t=t.subarray(5+o.length),i.enqueue({flags:o.flags,data:p})}})}function Qs(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var oc=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(p){return new Promise(function(O,D){p=n[o](p),i(O,D,p.done,p.value)})}}function i(o,p,O,D){Promise.resolve(D).then(function(M){o({value:M,done:O})},p)}},fo=globalThis&&globalThis.__await||function(n){return this instanceof fo?(this.v=n,this):new fo(n)},sc=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},p("next"),p("throw"),p("return"),i[Symbol.asyncIterator]=function(){return this},i;function p(ie){r[ie]&&(i[ie]=function(ye){return new Promise(function(Ae,Le){o.push([ie,ye,Ae,Le])>1||O(ie,ye)})})}function O(ie,ye){try{D(r[ie](ye))}catch(Ae){he(o[0][3],Ae)}}function D(ie){ie.value instanceof fo?Promise.resolve(ie.value.v).then(M,G):he(o[0][2],ie)}function M(ie){O("next",ie)}function G(ie){O("throw",ie)}function he(ie,ye){ie(ye),o.shift(),o.length&&O(o[0][0],o[0][1])}},ac=globalThis&&globalThis.__asyncDelegator||function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=n[i]?function(p){return(t=!t)?{value:fo(n[i](p)),done:!1}:o?o(p):p}:o}};function lc(n){return sc(this,arguments,function*(){yield fo(yield*ac(oc(n)))})}var ea=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(p){return new Promise(function(O,D){p=n[o](p),i(O,D,p.done,p.value)})}}function i(o,p,O,D){Promise.resolve(D).then(function(M){o({value:M,done:O})},p)}},Ui=globalThis&&globalThis.__await||function(n){return this instanceof Ui?(this.v=n,this):new Ui(n)},uc=globalThis&&globalThis.__asyncDelegator||function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=n[i]?function(p){return(t=!t)?{value:Ui(n[i](p)),done:!1}:o?o(p):p}:o}},cc=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},p("next"),p("throw"),p("return"),i[Symbol.asyncIterator]=function(){return this},i;function p(ie){r[ie]&&(i[ie]=function(ye){return new Promise(function(Ae,Le){o.push([ie,ye,Ae,Le])>1||O(ie,ye)})})}function O(ie,ye){try{D(r[ie](ye))}catch(Ae){he(o[0][3],Ae)}}function D(ie){ie.value instanceof Ui?Promise.resolve(ie.value.v).then(M,G):he(o[0][2],ie)}function M(ie){O("next",ie)}function G(ie){O("throw",ie)}function he(ie,ye){ie(ye),o.shift(),o.length&&O(o[0][0],o[0][1])}};function fc(n,e){return ic(n,t=>{switch(t.kind){case xe.Unary:return hc(e,n,t);case xe.ServerStreaming:return dc(e,n,t);case xe.ClientStreaming:return pc(e,n,t);case xe.BiDiStreaming:return gc(e,n,t);default:return null}})}function hc(n,e,t){return async function(r,i){var o,p;const O=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(o=i==null?void 0:i.onHeader)===null||o===void 0||o.call(i,O.header),(p=i==null?void 0:i.onTrailer)===null||p===void 0||p.call(i,O.trailer),O.message}}function dc(n,e,t){return function(r,i){return ta(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,lc([r]),i==null?void 0:i.contextValues),i)}}function pc(n,e,t){return async function(r,i){var o,p,O,D,M,G;const he=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(M=i==null?void 0:i.onHeader)===null||M===void 0||M.call(i,he.header);let ie;try{for(var ye=!0,Ae=ea(he.message),Le;Le=await Ae.next(),o=Le.done,!o;ye=!0)D=Le.value,ye=!1,ie=D}catch(Ye){p={error:Ye}}finally{try{!ye&&!o&&(O=Ae.return)&&await O.call(Ae)}finally{if(p)throw p.error}}if(!ie)throw new qt("protocol error: missing response message",x.Internal);return(G=i==null?void 0:i.onTrailer)===null||G===void 0||G.call(i,he.trailer),ie}}function gc(n,e,t){return function(r,i){return ta(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function ta(n,e){const t=function(){var r,i;return cc(this,arguments,function*(){const o=yield Ui(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,o.header),yield Ui(yield*uc(ea(o.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,o.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function mc(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(na(this));for(const i of t)i.removeEventListener("abort",r)}return e}function vc(n){const e=new AbortController,t=()=>{e.abort(new qt("the operation timed out",x.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function na(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function ra(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const us=128;function ia(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const o=r.substring(0,i).trim(),p=r.substring(i+1).trim();e.append(o,p)}}return e}const yc="Content-Type",bc="Grpc-Timeout",oa="Grpc-Status",sa="Grpc-Message",Tc="Grpc-Status-Details-Bin",_c="User-Agent",Ec="X-User-Agent",wc="X-Grpc-Web",Oc="application/grpc-web+proto",Sc="application/grpc-web+json";class Gr extends y{constructor(e){super(),this.code=0,this.message="",this.details=[],ce.util.initPartial(e,this)}static fromBinary(e,t){return new Gr().fromBinary(e,t)}static fromJson(e,t){return new Gr().fromJson(e,t)}static fromJsonString(e,t){return new Gr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Gr,e,t)}}Gr.runtime=ce,Gr.typeName="google.rpc.Status",Gr.fields=ce.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Sn,repeated:!0}]);const Nc="0";function aa(n){var e;const t=n.get(Tc);if(t!=null){const i=rc(t,Gr);if(i.code==0)return;const o=new qt(i.message,i.code,n);return o.details=i.details.map(p=>({type:p.typeUrl.substring(p.typeUrl.lastIndexOf("/")+1),value:p.value})),o}const r=n.get(oa);if(r!=null){if(r===Nc)return;const i=parseInt(r,10);return i in x?new qt(decodeURIComponent((e=n.get(sa))!==null&&e!==void 0?e:""),i,n):new qt(`invalid grpc-status: ${r}`,x.Internal,n)}}function la(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function ua(n,e){return e instanceof y?e:new n(e)}function Ac(n,e){function t(r){return r.done===!0?r:{done:r.done,value:ua(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=o=>r.throw(o).then(t)),r.return!==void 0&&(i.return=o=>r.return(o).then(t)),i}}}function kc(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function ca(n,e,t,r){const i=e?fa(n.I,r):ha(n.I,t);return{parse:(e?fa(n.O,r):ha(n.O,t)).parse,serialize:i.serialize}}function fa(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new qt(`parse binary: ${i}`,x.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new qt(`serialize binary: ${i}`,x.Internal)}}}}function ha(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,o=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,p=kc(e);return{parse(O){try{const D=o.decode(O);return n.fromJsonString(D,p)}catch(D){throw qt.from(D,x.InvalidArgument)}},serialize(O){try{const D=O.toJsonString(p);return i.encode(D)}catch(D){throw qt.from(D,x.Internal)}}}}function xc(n){const e=pa(n.next,n.interceptors),[t,r,i]=da(n),o=Object.assign(Object.assign({},n.req),{message:ua(n.req.method.I,n.req.message),signal:t});return e(o).then(p=>(i(),p),r)}function Ic(n){const e=pa(n.next,n.interceptors),[t,r,i]=da(n),o=Object.assign(Object.assign({},n.req),{message:Ac(n.req.method.I,n.req.message),signal:t});let p=!1;return t.addEventListener("abort",function(){var O,D;const M=n.req.message[Symbol.asyncIterator]();p||(O=M.throw)===null||O===void 0||O.call(M,this.reason).catch(()=>{}),(D=M.return)===null||D===void 0||D.call(M).catch(()=>{})}),e(o).then(O=>Object.assign(Object.assign({},O),{message:{[Symbol.asyncIterator](){const D=O.message[Symbol.asyncIterator]();return{next(){return D.next().then(M=>(M.done==!0&&(p=!0,i()),M),r)}}}}}),r)}function da(n){const{signal:e,cleanup:t}=vc(n.timeoutMs),r=mc(n.signal,e);return[r.signal,function(o){const p=qt.from(e.aborted?na(e):o);return r.abort(p),t(),Promise.reject(p)},function(){t(),r.abort()}]}function pa(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function Pc(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function ga(n,e){const t=aa(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t}function ma(n,e,t,r){const i=new Headers(t!=null?t:{});return i.set(yc,n?Oc:Sc),i.set(wc,"1"),i.set(Ec,"connect-es/1.2.0"),r&&i.set(_c,"connect-es/1.2.0"),e!==void 0&&i.set(bc,`${e}m`),i}function Rc(n){switch(n){case 400:return x.Internal;case 401:return x.Unauthenticated;case 403:return x.PermissionDenied;case 404:return x.Unimplemented;case 429:return x.Unavailable;case 502:return x.Unavailable;case 503:return x.Unavailable;case 504:return x.Unavailable;default:return x.Unknown}}function va(n,e){var t;if(n>=200&&n<300){const r=aa(e);if(r)throw r;return{foundStatus:e.has(oa)}}throw new qt(decodeURIComponent((t=e.get(sa))!==null&&t!==void 0?t:`HTTP ${n}`),Rc(n),e)}var Ei=globalThis&&globalThis.__await||function(n){return this instanceof Ei?(this.v=n,this):new Ei(n)},Dc=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},p("next"),p("throw"),p("return"),i[Symbol.asyncIterator]=function(){return this},i;function p(ie){r[ie]&&(i[ie]=function(ye){return new Promise(function(Ae,Le){o.push([ie,ye,Ae,Le])>1||O(ie,ye)})})}function O(ie,ye){try{D(r[ie](ye))}catch(Ae){he(o[0][3],Ae)}}function D(ie){ie.value instanceof Ei?Promise.resolve(ie.value.v).then(M,G):he(o[0][2],ie)}function M(ie){O("next",ie)}function G(ie){O("throw",ie)}function he(ie,ye){ie(ye),o.shift(),o.length&&O(o[0][0],o[0][1])}};function Cc(n){var e;Pc();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,o,p,O,D,M){var G;const{serialize:he,parse:ie}=ca(i,t,n.jsonOptions,n.binaryOptions);return p=p===void 0?n.defaultTimeoutMs:p<=0?void 0:p,await xc({interceptors:n.interceptors,signal:o,timeoutMs:p,req:{stream:!1,service:r,method:i,url:la(n.baseUrl,r,i),init:{method:"POST",credentials:(G=n.credentials)!==null&&G!==void 0?G:"same-origin",redirect:"error",mode:"cors"},header:ma(t,p,O,!1),contextValues:M!=null?M:ra(),message:D},next:async ye=>{var Ae;const Ye=await((Ae=n.fetch)!==null&&Ae!==void 0?Ae:globalThis.fetch)(ye.url,Object.assign(Object.assign({},ye.init),{headers:ye.header,signal:ye.signal,body:Qs(0,he(ye.message))}));if(va(Ye.status,Ye.headers),!Ye.body)throw"missing response body";const gt=Zs(Ye.body).getReader();let ot,wt;for(;;){const At=await gt.read();if(At.done)break;const{flags:Bt,data:Ii}=At.value;if(Bt===us){if(ot!==void 0)throw"extra trailer";ot=ia(Ii);continue}if(wt!==void 0)throw"extra message";wt=ie(Ii)}if(ot===void 0)throw"missing trailer";if(ga(ot,Ye.headers),wt===void 0)throw"missing message";return{stream:!1,header:Ye.headers,message:wt,trailer:ot}}})},async stream(r,i,o,p,O,D,M){var G;const{serialize:he,parse:ie}=ca(i,t,n.jsonOptions,n.binaryOptions);function ye(Le,Ye,gt,ot){return Dc(this,arguments,function*(){const At=Zs(Le).getReader();if(Ye){if(!(yield Ei(At.read())).done)throw"extra data for trailers-only";return yield Ei(void 0)}let Bt=!1;for(;;){const Ii=yield Ei(At.read());if(Ii.done)break;const{flags:to,data:Po}=Ii.value;if((to&us)===us){if(Bt)throw"extra trailer";Bt=!0;const _u=ia(Po);ga(_u,ot),_u.forEach((ad,ld)=>gt.set(ld,ad));continue}if(Bt)throw"extra message";yield yield Ei(ie(Po))}if(!Bt)throw"missing trailer"})}async function Ae(Le){if(i.kind!=xe.ServerStreaming)throw"The fetch API does not support streaming request bodies";const Ye=await Le[Symbol.asyncIterator]().next();if(Ye.done==!0)throw"missing request message";return Qs(0,he(Ye.value))}return p=p===void 0?n.defaultTimeoutMs:p<=0?void 0:p,Ic({interceptors:n.interceptors,signal:o,timeoutMs:p,req:{stream:!0,service:r,method:i,url:la(n.baseUrl,r,i),init:{method:"POST",credentials:(G=n.credentials)!==null&&G!==void 0?G:"same-origin",redirect:"error",mode:"cors"},header:ma(t,p,O,!1),contextValues:M!=null?M:ra(),message:D},next:async Le=>{var Ye;const ot=await((Ye=n.fetch)!==null&&Ye!==void 0?Ye:globalThis.fetch)(Le.url,Object.assign(Object.assign({},Le.init),{headers:Le.header,signal:Le.signal,body:await Ae(Le.message)})),{foundStatus:wt}=va(ot.status,ot.headers);if(!ot.body)throw"missing response body";const At=new Headers;return Object.assign(Object.assign({},Le),{header:ot.headers,trailer:At,message:ye(ot.body,wt,At,ot.headers)})}})}}}var Ee={exports:{}},Ze=Ee.exports;Object.defineProperty(Ze,"__esModule",{value:!0});const{proto3:We,StringValue:cs,Timestamp:Ji}=ls,Bo=We.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),ya=We.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),Lc=We.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:qo},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:gs}}]),Mc=We.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Va},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:ba,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:Ve},{no:6,name:"is_removed",kind:"scalar",T:8}]),ba=We.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:Ta},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:_a,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Fa}]),Ta=We.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),_a=We.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:Ea,oneof:"body"},{no:2,name:"add",kind:"message",T:wa,oneof:"body"},{no:3,name:"move",kind:"message",T:Oa,oneof:"body"},{no:4,name:"remove",kind:"message",T:Sa,oneof:"body"},{no:5,name:"edit",kind:"message",T:Na,oneof:"body"},{no:6,name:"select",kind:"message",T:Aa,oneof:"body"},{no:7,name:"style",kind:"message",T:ka,oneof:"body"},{no:8,name:"increase",kind:"message",T:xa,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Ia,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Pa,oneof:"body"}]),Ea=We.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:jo},{no:4,name:"executed_at",kind:"message",T:Ve}],{localName:"Operation_Set"}),wa=We.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"prev_created_at",kind:"message",T:Ve},{no:3,name:"value",kind:"message",T:jo},{no:4,name:"executed_at",kind:"message",T:Ve}],{localName:"Operation_Add"}),Oa=We.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"prev_created_at",kind:"message",T:Ve},{no:3,name:"created_at",kind:"message",T:Ve},{no:4,name:"executed_at",kind:"message",T:Ve}],{localName:"Operation_Move"}),Sa=We.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"created_at",kind:"message",T:Ve},{no:3,name:"executed_at",kind:"message",T:Ve}],{localName:"Operation_Remove"}),Na=We.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"from",kind:"message",T:wi},{no:3,name:"to",kind:"message",T:wi},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:Ve}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:Ve},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),Aa=We.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"from",kind:"message",T:wi},{no:3,name:"to",kind:"message",T:wi},{no:4,name:"executed_at",kind:"message",T:Ve}],{localName:"Operation_Select"}),ka=We.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"from",kind:"message",T:wi},{no:3,name:"to",kind:"message",T:wi},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:Ve},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:Ve}}],{localName:"Operation_Style"}),xa=We.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"value",kind:"message",T:jo},{no:3,name:"executed_at",kind:"message",T:Ve}],{localName:"Operation_Increase"}),Ia=We.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"from",kind:"message",T:ho},{no:3,name:"to",kind:"message",T:ho},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:Ve}},{no:5,name:"contents",kind:"message",T:Ua,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:Ve}],{localName:"Operation_TreeEdit"}),Pa=We.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ve},{no:2,name:"from",kind:"message",T:ho},{no:3,name:"to",kind:"message",T:ho},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:Ve},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:Ve}}],{localName:"Operation_TreeStyle"}),jo=We.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:Ve},{no:2,name:"moved_at",kind:"message",T:Ve},{no:3,name:"removed_at",kind:"message",T:Ve},{no:4,name:"type",kind:"enum",T:We.getEnumType(Bo)},{no:5,name:"value",kind:"scalar",T:12}]),qo=We.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:Ra,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Da,oneof:"body"},{no:3,name:"primitive",kind:"message",T:Ca,oneof:"body"},{no:5,name:"text",kind:"message",T:La,oneof:"body"},{no:6,name:"counter",kind:"message",T:Ma,oneof:"body"},{no:7,name:"tree",kind:"message",T:Ba,oneof:"body"}]),Ra=We.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:ja,repeated:!0},{no:2,name:"created_at",kind:"message",T:Ve},{no:3,name:"moved_at",kind:"message",T:Ve},{no:4,name:"removed_at",kind:"message",T:Ve}],{localName:"JSONElement_JSONObject"}),Da=We.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:fs,repeated:!0},{no:2,name:"created_at",kind:"message",T:Ve},{no:3,name:"moved_at",kind:"message",T:Ve},{no:4,name:"removed_at",kind:"message",T:Ve}],{localName:"JSONElement_JSONArray"}),Ca=We.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:We.getEnumType(Bo)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:Ve},{no:4,name:"moved_at",kind:"message",T:Ve},{no:5,name:"removed_at",kind:"message",T:Ve}],{localName:"JSONElement_Primitive"}),La=We.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:qa,repeated:!0},{no:2,name:"created_at",kind:"message",T:Ve},{no:3,name:"moved_at",kind:"message",T:Ve},{no:4,name:"removed_at",kind:"message",T:Ve}],{localName:"JSONElement_Text"}),Ma=We.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:We.getEnumType(Bo)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:Ve},{no:4,name:"moved_at",kind:"message",T:Ve},{no:5,name:"removed_at",kind:"message",T:Ve}],{localName:"JSONElement_Counter"}),Ba=We.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:ps,repeated:!0},{no:2,name:"created_at",kind:"message",T:Ve},{no:3,name:"moved_at",kind:"message",T:Ve},{no:4,name:"removed_at",kind:"message",T:Ve}],{localName:"JSONElement_Tree"}),ja=We.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:qo}]),fs=We.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:fs},{no:2,name:"element",kind:"message",T:qo}]),hs=We.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:Ve}]),qa=We.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:ds},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:Ve},{no:4,name:"ins_prev_id",kind:"message",T:ds},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:hs}}]),ds=We.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:Ve},{no:2,name:"offset",kind:"scalar",T:5}]),ps=We.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:Fi},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:Ve},{no:5,name:"ins_prev_id",kind:"message",T:Fi},{no:6,name:"ins_next_id",kind:"message",T:Fi},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:hs}}]),Ua=We.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:ps,repeated:!0}]),Fi=We.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:Ve},{no:2,name:"offset",kind:"scalar",T:5}]),ho=We.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:Fi},{no:2,name:"left_sibling_id",kind:"message",T:Fi}]),Bc=We.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Ji}]),jc=We.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Ji},{no:9,name:"updated_at",kind:"message",T:Ji}]),qc=We.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:cs},{no:2,name:"auth_webhook_url",kind:"message",T:cs},{no:3,name:"auth_webhook_methods",kind:"message",T:Ja},{no:4,name:"client_deactivate_threshold",kind:"message",T:cs}]),Ja=We.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"}),Uc=We.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Ji},{no:5,name:"accessed_at",kind:"message",T:Ji},{no:6,name:"updated_at",kind:"message",T:Ji}]),Fa=We.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:We.getEnumType($a)},{no:2,name:"presence",kind:"message",T:gs}]),$a=We.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),gs=We.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),Va=We.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),wi=We.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:Ve},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),Ve=We.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),za=We.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),Jc=We.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:We.getEnumType(ya)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:za}]);Ze.ValueType=Bo,Ze.DocEventType=ya,Ze.Snapshot=Lc,Ze.ChangePack=Mc,Ze.Change=ba,Ze.ChangeID=Ta,Ze.Operation=_a,Ze.Operation_Set=Ea,Ze.Operation_Add=wa,Ze.Operation_Move=Oa,Ze.Operation_Remove=Sa,Ze.Operation_Edit=Na,Ze.Operation_Select=Aa,Ze.Operation_Style=ka,Ze.Operation_Increase=xa,Ze.Operation_TreeEdit=Ia,Ze.Operation_TreeStyle=Pa,Ze.JSONElementSimple=jo,Ze.JSONElement=qo,Ze.JSONElement_JSONObject=Ra,Ze.JSONElement_JSONArray=Da,Ze.JSONElement_Primitive=Ca,Ze.JSONElement_Text=La,Ze.JSONElement_Counter=Ma,Ze.JSONElement_Tree=Ba,Ze.RHTNode=ja,Ze.RGANode=fs,Ze.NodeAttr=hs,Ze.TextNode=qa,Ze.TextNodeID=ds,Ze.TreeNode=ps,Ze.TreeNodes=Ua,Ze.TreeNodeID=Fi,Ze.TreePos=ho,Ze.User=Bc,Ze.Project=jc,Ze.UpdatableProjectFields=qc,Ze.UpdatableProjectFields_AuthWebhookMethods=Ja,Ze.DocumentSummary=Uc,Ze.PresenceChange=Fa,Ze.PresenceChange_ChangeType=$a,Ze.Presence=gs,Ze.Checkpoint=Va,Ze.TextNodePos=wi,Ze.TimeTicket=Ve,Ze.DocEventBody=za,Ze.DocEvent=Jc;const Ka=(Ee.exports==null?{}:Ee.exports).default||Ee.exports,ft=(Ee.exports==null?{}:Ee.exports).ValueType,Uo=(Ee.exports==null?{}:Ee.exports).DocEventType,Ya=(Ee.exports==null?{}:Ee.exports).Snapshot,Ha=(Ee.exports==null?{}:Ee.exports).ChangePack,Wa=(Ee.exports==null?{}:Ee.exports).Change,Jo=(Ee.exports==null?{}:Ee.exports).ChangeID,ms=(Ee.exports==null?{}:Ee.exports).Operation,Ga=(Ee.exports==null?{}:Ee.exports).Operation_Set,Xa=(Ee.exports==null?{}:Ee.exports).Operation_Add,Za=(Ee.exports==null?{}:Ee.exports).Operation_Move,Qa=(Ee.exports==null?{}:Ee.exports).Operation_Remove,el=(Ee.exports==null?{}:Ee.exports).Operation_Edit,Fc=(Ee.exports==null?{}:Ee.exports).Operation_Select,tl=(Ee.exports==null?{}:Ee.exports).Operation_Style,nl=(Ee.exports==null?{}:Ee.exports).Operation_Increase,rl=(Ee.exports==null?{}:Ee.exports).Operation_TreeEdit,il=(Ee.exports==null?{}:Ee.exports).Operation_TreeStyle,Oi=(Ee.exports==null?{}:Ee.exports).JSONElementSimple,kr=(Ee.exports==null?{}:Ee.exports).JSONElement,ol=(Ee.exports==null?{}:Ee.exports).JSONElement_JSONObject,sl=(Ee.exports==null?{}:Ee.exports).JSONElement_JSONArray,al=(Ee.exports==null?{}:Ee.exports).JSONElement_Primitive,ll=(Ee.exports==null?{}:Ee.exports).JSONElement_Text,ul=(Ee.exports==null?{}:Ee.exports).JSONElement_Counter,cl=(Ee.exports==null?{}:Ee.exports).JSONElement_Tree,fl=(Ee.exports==null?{}:Ee.exports).RHTNode,hl=(Ee.exports==null?{}:Ee.exports).RGANode,vs=(Ee.exports==null?{}:Ee.exports).NodeAttr,dl=(Ee.exports==null?{}:Ee.exports).TextNode,pl=(Ee.exports==null?{}:Ee.exports).TextNodeID,gl=(Ee.exports==null?{}:Ee.exports).TreeNode,ml=(Ee.exports==null?{}:Ee.exports).TreeNodes,vl=(Ee.exports==null?{}:Ee.exports).TreeNodeID,yl=(Ee.exports==null?{}:Ee.exports).TreePos,$c=(Ee.exports==null?{}:Ee.exports).User,Vc=(Ee.exports==null?{}:Ee.exports).Project,zc=(Ee.exports==null?{}:Ee.exports).UpdatableProjectFields,Kc=(Ee.exports==null?{}:Ee.exports).UpdatableProjectFields_AuthWebhookMethods,Yc=(Ee.exports==null?{}:Ee.exports).DocumentSummary,ys=(Ee.exports==null?{}:Ee.exports).PresenceChange,po=(Ee.exports==null?{}:Ee.exports).PresenceChange_ChangeType,bl=(Ee.exports==null?{}:Ee.exports).Presence,Tl=(Ee.exports==null?{}:Ee.exports).Checkpoint,_l=(Ee.exports==null?{}:Ee.exports).TextNodePos,El=(Ee.exports==null?{}:Ee.exports).TimeTicket,Hc=(Ee.exports==null?{}:Ee.exports).DocEventBody,Wc=(Ee.exports==null?{}:Ee.exports).DocEvent,Gc=Object.freeze(Object.defineProperty({__proto__:null,Change:Wa,ChangeID:Jo,ChangePack:Ha,Checkpoint:Tl,DocEvent:Wc,DocEventBody:Hc,DocEventType:Uo,DocumentSummary:Yc,JSONElement:kr,JSONElementSimple:Oi,JSONElement_Counter:ul,JSONElement_JSONArray:sl,JSONElement_JSONObject:ol,JSONElement_Primitive:al,JSONElement_Text:ll,JSONElement_Tree:cl,NodeAttr:vs,Operation:ms,Operation_Add:Xa,Operation_Edit:el,Operation_Increase:nl,Operation_Move:Za,Operation_Remove:Qa,Operation_Select:Fc,Operation_Set:Ga,Operation_Style:tl,Operation_TreeEdit:rl,Operation_TreeStyle:il,Presence:bl,PresenceChange:ys,PresenceChange_ChangeType:po,Project:Vc,RGANode:hl,RHTNode:fl,Snapshot:Ya,TextNode:dl,TextNodeID:pl,TextNodePos:_l,TimeTicket:El,TreeNode:gl,TreeNodeID:vl,TreeNodes:ml,TreePos:yl,UpdatableProjectFields:zc,UpdatableProjectFields_AuthWebhookMethods:Kc,User:$c,ValueType:ft,default:Ka},Symbol.toStringTag,{value:"Module"}));var ht={exports:{}},$t=ht.exports;Object.defineProperty($t,"__esModule",{value:!0});const{proto3:Yt}=ls,{ChangePack:oi,DocEvent:Xc}=Ka||Gc,Zc=Yt.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),Qc=Yt.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),ef=Yt.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),tf=Yt.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),nf=Yt.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:oi}]),rf=Yt.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:oi}]),of=Yt.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:oi},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),sf=Yt.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:oi}]),af=Yt.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),lf=Yt.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:wl,oneof:"body"},{no:2,name:"event",kind:"message",T:Xc,oneof:"body"}]),wl=Yt.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),uf=Yt.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:oi}]),cf=Yt.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:oi}]),ff=Yt.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:oi},{no:4,name:"push_only",kind:"scalar",T:8}]),hf=Yt.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:oi}]),df=Yt.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),pf=Yt.makeMessageType("yorkie.v1.BroadcastResponse",[]);$t.ActivateClientRequest=Zc,$t.ActivateClientResponse=Qc,$t.DeactivateClientRequest=ef,$t.DeactivateClientResponse=tf,$t.AttachDocumentRequest=nf,$t.AttachDocumentResponse=rf,$t.DetachDocumentRequest=of,$t.DetachDocumentResponse=sf,$t.WatchDocumentRequest=af,$t.WatchDocumentResponse=lf,$t.WatchDocumentResponse_Initialization=wl,$t.RemoveDocumentRequest=uf,$t.RemoveDocumentResponse=cf,$t.PushPullChangesRequest=ff,$t.PushPullChangesResponse=hf,$t.BroadcastRequest=df,$t.BroadcastResponse=pf;const Ol=(ht.exports==null?{}:ht.exports).default||ht.exports,gf=(ht.exports==null?{}:ht.exports).ActivateClientRequest,mf=(ht.exports==null?{}:ht.exports).ActivateClientResponse,vf=(ht.exports==null?{}:ht.exports).DeactivateClientRequest,yf=(ht.exports==null?{}:ht.exports).DeactivateClientResponse,bf=(ht.exports==null?{}:ht.exports).AttachDocumentRequest,Tf=(ht.exports==null?{}:ht.exports).AttachDocumentResponse,_f=(ht.exports==null?{}:ht.exports).DetachDocumentRequest,Ef=(ht.exports==null?{}:ht.exports).DetachDocumentResponse,wf=(ht.exports==null?{}:ht.exports).WatchDocumentRequest,Of=(ht.exports==null?{}:ht.exports).WatchDocumentResponse,Sf=(ht.exports==null?{}:ht.exports).WatchDocumentResponse_Initialization,Nf=(ht.exports==null?{}:ht.exports).RemoveDocumentRequest,Af=(ht.exports==null?{}:ht.exports).RemoveDocumentResponse,kf=(ht.exports==null?{}:ht.exports).PushPullChangesRequest,xf=(ht.exports==null?{}:ht.exports).PushPullChangesResponse,If=(ht.exports==null?{}:ht.exports).BroadcastRequest,Pf=(ht.exports==null?{}:ht.exports).BroadcastResponse,Rf=Object.freeze(Object.defineProperty({__proto__:null,ActivateClientRequest:gf,ActivateClientResponse:mf,AttachDocumentRequest:bf,AttachDocumentResponse:Tf,BroadcastRequest:If,BroadcastResponse:Pf,DeactivateClientRequest:vf,DeactivateClientResponse:yf,DetachDocumentRequest:_f,DetachDocumentResponse:Ef,PushPullChangesRequest:kf,PushPullChangesResponse:xf,RemoveDocumentRequest:Nf,RemoveDocumentResponse:Af,WatchDocumentRequest:wf,WatchDocumentResponse:Of,WatchDocumentResponse_Initialization:Sf,default:Ol},Symbol.toStringTag,{value:"Module"}));var $i={exports:{}},Sl=$i.exports;Object.defineProperty(Sl,"__esModule",{value:!0});const{ActivateClientRequest:Df,ActivateClientResponse:Cf,AttachDocumentRequest:Lf,AttachDocumentResponse:Mf,BroadcastRequest:Bf,BroadcastResponse:jf,DeactivateClientRequest:qf,DeactivateClientResponse:Uf,DetachDocumentRequest:Jf,DetachDocumentResponse:Ff,PushPullChangesRequest:$f,PushPullChangesResponse:Vf,RemoveDocumentRequest:zf,RemoveDocumentResponse:Kf,WatchDocumentRequest:Yf,WatchDocumentResponse:Hf}=Ol||Rf,{MethodKind:si}=ls,Wf={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Df,O:Cf,kind:si.Unary},deactivateClient:{name:"DeactivateClient",I:qf,O:Uf,kind:si.Unary},attachDocument:{name:"AttachDocument",I:Lf,O:Mf,kind:si.Unary},detachDocument:{name:"DetachDocument",I:Jf,O:Ff,kind:si.Unary},removeDocument:{name:"RemoveDocument",I:zf,O:Kf,kind:si.Unary},pushPullChanges:{name:"PushPullChanges",I:$f,O:Vf,kind:si.Unary},watchDocument:{name:"WatchDocument",I:Yf,O:Hf,kind:si.ServerStreaming},broadcast:{name:"Broadcast",I:Bf,O:jf,kind:si.Unary}}};Sl.YorkieService=Wf,($i.exports==null?{}:$i.exports).default||$i.exports;const Gf=($i.exports==null?{}:$i.exports).YorkieService;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var zn=null;try{zn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function lt(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}lt.prototype.__isLong__,Object.defineProperty(lt.prototype,"__isLong__",{value:!0});function Zt(n){return(n&&n.__isLong__)===!0}function Nl(n){var e=Math.clz32(n&-n);return n?31-e:e}lt.isLong=Zt;var Al={},kl={};function Si(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=kl[n],r)?r:(t=bt(n,0,!0),i&&(kl[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=Al[n],r)?r:(t=bt(n,n<0?-1:0,!1),i&&(Al[n]=t),t))}lt.fromInt=Si;function Kn(n,e){if(isNaN(n))return e?Xr:Gn;if(e){if(n<0)return Xr;if(n>=Il)return Ll}else{if(n<=-Pl)return mn;if(n+1>=Pl)return Cl}return n<0?Kn(-n,e).neg():bt(n%Vi|0,n/Vi|0,e)}lt.fromNumber=Kn;function bt(n,e,t){return new lt(n,e,t)}lt.fromBits=bt;var Fo=Math.pow;function bs(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?Xr:Gn;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return bs(n.substring(1),e,t).neg();for(var i=Kn(Fo(t,8)),o=Gn,p=0;p<n.length;p+=8){var O=Math.min(8,n.length-p),D=parseInt(n.substring(p,p+O),t);if(O<8){var M=Kn(Fo(t,O));o=o.mul(M).add(Kn(D))}else o=o.mul(i),o=o.add(Kn(D))}return o.unsigned=e,o}lt.fromString=bs;function Wn(n,e){return typeof n=="number"?Kn(n,e):typeof n=="string"?bs(n,e):bt(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}lt.fromValue=Wn;var xl=1<<16,Xf=1<<24,Vi=xl*xl,Il=Vi*Vi,Pl=Il/2,Rl=Si(Xf),Gn=Si(0);lt.ZERO=Gn;var Xr=Si(0,!0);lt.UZERO=Xr;var zi=Si(1);lt.ONE=zi;var Dl=Si(1,!0);lt.UONE=Dl;var Ts=Si(-1);lt.NEG_ONE=Ts;var Cl=bt(-1,2147483647,!1);lt.MAX_VALUE=Cl;var Ll=bt(-1,-1,!0);lt.MAX_UNSIGNED_VALUE=Ll;var mn=bt(0,-2147483648,!1);lt.MIN_VALUE=mn;var Oe=lt.prototype;Oe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Oe.toNumber=function(){return this.unsigned?(this.high>>>0)*Vi+(this.low>>>0):this.high*Vi+(this.low>>>0)},Oe.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(mn)){var t=Kn(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=Kn(Fo(e,6),this.unsigned),p=this,O="";;){var D=p.div(o),M=p.sub(D.mul(o)).toInt()>>>0,G=M.toString(e);if(p=D,p.isZero())return G+O;for(;G.length<6;)G="0"+G;O=""+G+O}},Oe.getHighBits=function(){return this.high},Oe.getHighBitsUnsigned=function(){return this.high>>>0},Oe.getLowBits=function(){return this.low},Oe.getLowBitsUnsigned=function(){return this.low>>>0},Oe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(mn)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},Oe.isZero=function(){return this.high===0&&this.low===0},Oe.eqz=Oe.isZero,Oe.isNegative=function(){return!this.unsigned&&this.high<0},Oe.isPositive=function(){return this.unsigned||this.high>=0},Oe.isOdd=function(){return(this.low&1)===1},Oe.isEven=function(){return(this.low&1)===0},Oe.equals=function(e){return Zt(e)||(e=Wn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},Oe.eq=Oe.equals,Oe.notEquals=function(e){return!this.eq(e)},Oe.neq=Oe.notEquals,Oe.ne=Oe.notEquals,Oe.lessThan=function(e){return this.comp(e)<0},Oe.lt=Oe.lessThan,Oe.lessThanOrEqual=function(e){return this.comp(e)<=0},Oe.lte=Oe.lessThanOrEqual,Oe.le=Oe.lessThanOrEqual,Oe.greaterThan=function(e){return this.comp(e)>0},Oe.gt=Oe.greaterThan,Oe.greaterThanOrEqual=function(e){return this.comp(e)>=0},Oe.gte=Oe.greaterThanOrEqual,Oe.ge=Oe.greaterThanOrEqual,Oe.compare=function(e){if(Zt(e)||(e=Wn(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},Oe.comp=Oe.compare,Oe.negate=function(){return!this.unsigned&&this.eq(mn)?mn:this.not().add(zi)},Oe.neg=Oe.negate,Oe.add=function(e){Zt(e)||(e=Wn(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,o=this.low&65535,p=e.high>>>16,O=e.high&65535,D=e.low>>>16,M=e.low&65535,G=0,he=0,ie=0,ye=0;return ye+=o+M,ie+=ye>>>16,ye&=65535,ie+=i+D,he+=ie>>>16,ie&=65535,he+=r+O,G+=he>>>16,he&=65535,G+=t+p,G&=65535,bt(ie<<16|ye,G<<16|he,this.unsigned)},Oe.subtract=function(e){return Zt(e)||(e=Wn(e)),this.add(e.neg())},Oe.sub=Oe.subtract,Oe.multiply=function(e){if(this.isZero())return this;if(Zt(e)||(e=Wn(e)),zn){var t=zn.mul(this.low,this.high,e.low,e.high);return bt(t,zn.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Xr:Gn;if(this.eq(mn))return e.isOdd()?mn:Gn;if(e.eq(mn))return this.isOdd()?mn:Gn;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Rl)&&e.lt(Rl))return Kn(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,o=this.low>>>16,p=this.low&65535,O=e.high>>>16,D=e.high&65535,M=e.low>>>16,G=e.low&65535,he=0,ie=0,ye=0,Ae=0;return Ae+=p*G,ye+=Ae>>>16,Ae&=65535,ye+=o*G,ie+=ye>>>16,ye&=65535,ye+=p*M,ie+=ye>>>16,ye&=65535,ie+=i*G,he+=ie>>>16,ie&=65535,ie+=o*M,he+=ie>>>16,ie&=65535,ie+=p*D,he+=ie>>>16,ie&=65535,he+=r*G+i*M+o*D+p*O,he&=65535,bt(ye<<16|Ae,he<<16|ie,this.unsigned)},Oe.mul=Oe.multiply,Oe.divide=function(e){if(Zt(e)||(e=Wn(e)),e.isZero())throw Error("division by zero");if(zn){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?zn.div_u:zn.div_s)(this.low,this.high,e.low,e.high);return bt(t,zn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Xr:Gn;var r,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Xr;if(e.gt(this.shru(1)))return Dl;o=Xr}else{if(this.eq(mn)){if(e.eq(zi)||e.eq(Ts))return mn;if(e.eq(mn))return zi;var p=this.shr(1);return r=p.div(e).shl(1),r.eq(Gn)?e.isNegative()?zi:Ts:(i=this.sub(e.mul(r)),o=r.add(i.div(e)),o)}else if(e.eq(mn))return this.unsigned?Xr:Gn;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=Gn}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var O=Math.ceil(Math.log(r)/Math.LN2),D=O<=48?1:Fo(2,O-48),M=Kn(r),G=M.mul(e);G.isNegative()||G.gt(i);)r-=D,M=Kn(r,this.unsigned),G=M.mul(e);M.isZero()&&(M=zi),o=o.add(M),i=i.sub(G)}return o},Oe.div=Oe.divide,Oe.modulo=function(e){if(Zt(e)||(e=Wn(e)),zn){var t=(this.unsigned?zn.rem_u:zn.rem_s)(this.low,this.high,e.low,e.high);return bt(t,zn.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},Oe.mod=Oe.modulo,Oe.rem=Oe.modulo,Oe.not=function(){return bt(~this.low,~this.high,this.unsigned)},Oe.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},Oe.clz=Oe.countLeadingZeros,Oe.countTrailingZeros=function(){return this.low?Nl(this.low):Nl(this.high)+32},Oe.ctz=Oe.countTrailingZeros,Oe.and=function(e){return Zt(e)||(e=Wn(e)),bt(this.low&e.low,this.high&e.high,this.unsigned)},Oe.or=function(e){return Zt(e)||(e=Wn(e)),bt(this.low|e.low,this.high|e.high,this.unsigned)},Oe.xor=function(e){return Zt(e)||(e=Wn(e)),bt(this.low^e.low,this.high^e.high,this.unsigned)},Oe.shiftLeft=function(e){return Zt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?bt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):bt(0,this.low<<e-32,this.unsigned)},Oe.shl=Oe.shiftLeft,Oe.shiftRight=function(e){return Zt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?bt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):bt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},Oe.shr=Oe.shiftRight,Oe.shiftRightUnsigned=function(e){return Zt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?bt(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?bt(this.high,0,this.unsigned):bt(this.high>>>e-32,0,this.unsigned)},Oe.shru=Oe.shiftRightUnsigned,Oe.shr_u=Oe.shiftRightUnsigned,Oe.rotateLeft=function(e){var t;return Zt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?bt(this.high,this.low,this.unsigned):e<32?(t=32-e,bt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,bt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},Oe.rotl=Oe.rotateLeft,Oe.rotateRight=function(e){var t;return Zt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?bt(this.high,this.low,this.unsigned):e<32?(t=32-e,bt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,bt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},Oe.rotr=Oe.rotateRight,Oe.toSigned=function(){return this.unsigned?bt(this.low,this.high,!1):this},Oe.toUnsigned=function(){return this.unsigned?this:bt(this.low,this.high,!0)},Oe.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},Oe.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},Oe.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},lt.fromBytes=function(e,t,r){return r?lt.fromBytesLE(e,t):lt.fromBytesBE(e,t)},lt.fromBytesLE=function(e,t){return new lt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},lt.fromBytesBE=function(e,t){return new lt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var yt=(n=>(n.Ok="ok",n.ClientNotActive="client-not-active",n.Unimplemented="unimplemented",n.Unsupported="unsupported",n.DocumentNotAttached="document-not-attached",n.DocumentNotDetached="document-not-detached",n.DocumentRemoved="document-removed",n.InvalidObjectKey="invalid-object-key",n.InvalidArgument="invalid-argument",n))(yt||{});class Tt extends Error{constructor(e,t){super(t),_(this,"name","YorkieError"),_(this,"stack"),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function Xn(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const Ml=n=>n?Object.entries(n).length===0:!0,Ki=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},Yi=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};var ai=(n=>(n.Put="put",n.Clear="clear",n))(ai||{});class _s{constructor(e,t){_(this,"context"),_(this,"presence"),this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:"put",presence:Xn(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const $o="000000000000000000000000",Zf="FFFFFFFFFFFFFFFFFFFFFFFF";class hn{constructor(e,t,r){_(this,"lamport"),_(this,"delimiter"),_(this,"actorID"),this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new hn(e,t,r)}static fromStruct(e){return hn.of(lt.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new hn(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Es=0,Qf=4294967295,eh=lt.MAX_VALUE,xr=new hn(lt.fromNumber(0),Es,$o);new hn(lt.fromNumber(1),Es+1,$o);const Vo=new hn(eh,Qf,Zf);var Nn=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(Nn||{});let Ni=2;function th(n){Ni=n}const we={trivial:(...n)=>{Ni>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{Ni>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{Ni>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{Ni>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{Ni>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(n,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${n}`)},isEnabled:n=>Ni<=n};function Zr(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class zo{constructor(e){_(this,"createdAt"),_(this,"movedAt"),_(this,"removedAt"),this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class li extends zo{constructor(e){super(e)}}class Bl extends zo{}class ws{constructor(e,t){_(this,"strKey"),_(this,"value"),this.strKey=e,this.value=t}static of(e,t){return new ws(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class go{constructor(){_(this,"nodeMapByKey"),_(this,"nodeMapByCreatedAt"),this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new go}set(e,t,r){let i;const o=this.nodeMapByKey.get(e);o!=null&&!o.isRemoved()&&o.remove(r)&&(i=o.getValue());const p=ws.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),p),(o==null||r.after(o.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,p),t.setMovedAt(r)),i}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||we.fatal(`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){we.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&!!r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class vn extends li{constructor(e,t){super(e),_(this,"memberNodes"),this.memberNodes=t}static create(e,t){if(!t)return new vn(e,go.create());const r=go.create();for(const[i,o]of Object.entries(t))r.set(i,o.deepcopy(),o.getCreatedAt());return new vn(e,r)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,r){return this.memberNodes.set(e,t,r)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,r]of this)e.push(`"${Zr(t)}":${r.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,r]of this){const{createdAt:i,value:o,type:p}=r.toJSForTest();e[t]={key:t,createdAt:i,value:o,type:p}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[i]of this)t.push(i);const r=[];for(const i of t.sort()){const o=(e=this.memberNodes.get(i))==null?void 0:e.getValue();r.push(`"${Zr(i)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=vn.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const r=t.getValue();if(e(r,this))return;r instanceof li&&r.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var Et=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(Et||{});class Zn{constructor(e,t){_(this,"parentCreatedAt"),_(this,"executedAt"),this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class jl{constructor(e){_(this,"value"),_(this,"left"),_(this,"right"),_(this,"parent"),_(this,"weight"),this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class mo{constructor(e){_(this,"root"),this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&we.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,r=e,i;for(;r;)(!i||i===r.getRight())&&(t+=r.getLength()+(r.hasLeft()?r.getLeftWeight():0)),i=r,r=r.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new mo(e.getLeft());t.root&&t.root.setParent();const r=new mo(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Ut=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(Ut||{});class Ot extends zo{constructor(e,t){super(t),_(this,"valueType"),_(this,"value"),this.valueType=Ot.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new Ot(e,t)}static valueFromBytes(e,t){switch(e){case 0:return null;case 1:return!!t[0];case 2:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 4:{const r=new DataView(t.buffer);return t.forEach(function(i,o){r.setUint8(o,i)}),r.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(t);case 3:return lt.fromBytesLE(Array.from(t));case 6:return t;case 7:return new Date(lt.fromBytesLE(Array.from(t),!0).toNumber());default:throw new Tt(yt.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${Zr(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=Ot.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof lt)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return Ot.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case 5:return new TextEncoder().encode(this.value);case 3:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case 6:return this.value;case 7:{const e=this.value,t=lt.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new Tt(yt.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class Ko extends jl{constructor(e){super(e),_(this,"prev"),_(this,"next"),this.value=e}static createAfter(e,t){const r=new Ko(t),i=e.next;return e.next=r,r.prev=e,r.next=i,i&&(i.prev=r),r}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class vo{constructor(){_(this,"dummyHead"),_(this,"last"),_(this,"nodeMapByIndex"),_(this,"nodeMapByCreatedAt");const e=Ot.of(0,xr);e.setRemovedAt(xr),this.dummyHead=new Ko(e),this.last=this.dummyHead,this.nodeMapByIndex=new mo,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new vo}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());for(r||we.fatal(`cant find the given node: ${e.toIDString()}`);r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),o=Ko.createAfter(i,t);i===this.last&&(this.last=o),this.nodeMapByIndex.insertAfter(i,o),this.nodeMapByCreatedAt.set(o.getCreatedAt().toIDString(),o)}moveAfter(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());i||we.fatal(`cant find the given node: ${e.toIDString()}`);const o=this.nodeMapByCreatedAt.get(t.toIDString());o||we.fatal(`cant find the given node: ${t.toIDString()}`),i!==o&&(!o.getValue().getMovedAt()||r.after(o.getValue().getMovedAt()))&&(this.release(o),this.insertAfter(i.getCreatedAt(),o.getValue(),r),o.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||we.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(!!r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class An extends li{constructor(e,t){super(e),_(this,"elements"),this.elements=t}static create(e,t){if(!t)return new An(e,vo.create());const r=vo.create();for(const i of t)r.insertAfter(r.getLastCreatedAt(),i.deepcopy());return new An(e,r)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,r){this.elements.moveAfter(e,t,r)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const r=t.getValue();if(e(r,this))return;r instanceof li&&r.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{createdAt:r,value:i,type:o}=this.get(t).toJSForTest();e[t]={key:String(t),createdAt:r,value:i,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=An.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class ui extends Zn{constructor(e,t,r){super(e,r),_(this,"createdAt"),this.createdAt=t}static create(e,t,r){return new ui(e,t,r)}execute(e,t){var r;const i=e.findByCreatedAt(this.getParentCreatedAt());if(i||we.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof li||we.fatal(`only object and array can execute remove: ${i}`),t===Et.UndoRedo){let M=i.getByID(this.createdAt);for(;M;){if(M.getRemovedAt())return;M=(r=e.findElementPairByCreatedAt(M.getCreatedAt()))==null?void 0:r.parent}}const o=i.subPathOf(this.createdAt),p=this.toReverseOperation(i),O=i.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(O),{opInfos:i instanceof An?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(o)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:o}],reverseOp:p}}toReverseOperation(e){if(e instanceof vn){const t=e.subPathOf(this.createdAt);if(t!==void 0){const r=e.get(t);if(r!==void 0)return Ai.create(t,r.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Ai extends Zn{constructor(e,t,r,i){super(r,i),_(this,"key"),_(this,"value"),this.key=e,this.value=t}static create(e,t,r,i){return new Ai(e,t,r,i)}execute(e,t){var r;const i=e.findByCreatedAt(this.getParentCreatedAt());if(i||we.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof vn||we.fatal("fail to execute, only object can execute set"),t===Et.UndoRedo){let M=i;for(;M;){if(M.getRemovedAt())return;M=(r=e.findElementPairByCreatedAt(M.getCreatedAt()))==null?void 0:r.parent}}const o=i.get(this.key),p=this.toReverseOperation(o),O=this.value.deepcopy(),D=i.set(this.key,O,this.getExecutedAt());return t===Et.UndoRedo&&e.findByCreatedAt(O.getCreatedAt())&&e.deregisterElement(O),e.registerElement(O,i),D&&e.registerRemovedElement(D),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:p}}toReverseOperation(e){let t=ui.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=Ai.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class yo extends Zn{constructor(e,t,r,i){super(e,i),_(this,"prevCreatedAt"),_(this,"value"),this.prevCreatedAt=t,this.value=r}static create(e,t,r,i){return new yo(e,t,r,i)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof An||we.fatal("fail to execute, only array can execute add");const r=t,i=this.value.deepcopy();return r.insertAfter(this.prevCreatedAt,i),e.registerElement(i,r),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(r.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class ci extends Zn{constructor(e,t,r,i){super(e,i),_(this,"prevCreatedAt"),_(this,"createdAt"),this.prevCreatedAt=t,this.createdAt=r}static create(e,t,r,i){return new ci(e,t,r,i)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof An||we.fatal("fail to execute, only array can execute move");const r=t,i=Number(r.subPathOf(this.createdAt));r.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(r.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:o,previousIndex:i}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Hi{constructor(e,t,r,i){_(this,"key"),_(this,"value"),_(this,"updatedAt"),_(this,"_isRemoved"),this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new Hi(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}}class Qr{constructor(){_(this,"nodeMapByKey"),_(this,"numberOfRemovedElement"),this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Qr}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i===void 0||r.after(i.getUpdatedAt())){i!==void 0&&!i.isRemoved()&&(this.numberOfRemovedElement-=1);const o=Hi.of(e,t,r,!1);return this.nodeMapByKey.set(e,o),!0}return!1}remove(e,t){const r=this.nodeMapByKey.get(e);if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const p=Hi.of(e,"",t,!0);return this.nodeMapByKey.set(e,p),""}const i=r.isRemoved();i||(this.numberOfRemovedElement+=1);const o=Hi.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,o),i?"":r.getValue()}return""}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Qr;for(const[,t]of this.nodeMapByKey)e.set(t.getKey(),t.getValue(),t.getUpdatedAt());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${Zr(t)}":"${Zr(r.getValue())}"`);return`{${e.join(",")}}`}toXML(){return this.size()?` ${[...this.nodeMapByKey].filter(([,t])=>t instanceof Hi&&!t.isRemoved()).sort((t,r)=>t[0].localeCompare(r[0])).map(([t,r])=>`${t}="${JSON.parse(r.getValue())}"`).join(" ")}`:""}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class bo{constructor(e){_(this,"attributes"),_(this,"content"),this.attributes=Qr.create(),this.content=e}static create(e){return new bo(e)}get length(){return this.content.length}substring(e,t){const r=new bo(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=Zr(this.content),t=this.attributes.toObject(),r=[];for(const[i,o]of Object.entries(t)){const p=JSON.parse(o),O=typeof p=="string"?`"${Zr(i)}":"${Zr(p)}"`:`"${Zr(i)}":${String(p)}`;r.push(O)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}}class Qn extends Bl{constructor(e,t){super(t),_(this,"rgaTreeSplit"),this.rgaTreeSplit=e}static create(e,t){return new Qn(e,t)}edit(e,t,r,i,o){const p=t?bo.create(t):void 0;if(p&&i)for(const[he,ie]of Object.entries(i))p.setAttr(he,ie,r);const[O,D,M]=this.rgaTreeSplit.edit(e,r,p,o),G=M.map(he=>({...he,value:he.value?{attributes:Yi(he.value.getAttributes()),content:he.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[D,G,[O,O]]}setStyle(e,t,r,i){const[,o]=this.rgaTreeSplit.findNodeWithSplit(e[1],r),[,p]=this.rgaTreeSplit.findNodeWithSplit(e[0],r),O=[],D=this.rgaTreeSplit.findBetween(p,o),M=new Map,G=[];for(const he of D){const ie=he.getCreatedAt().getActorID(),ye=i!=null&&i.size?i.has(ie)?i.get(ie):xr:Vo;if(he.canStyle(r,ye)){const Ae=M.get(ie),Le=he.getCreatedAt();(!Ae||Le.after(Ae))&&M.set(ie,Le),G.push(he)}}for(const he of G){if(he.isRemoved())continue;const[ie,ye]=this.rgaTreeSplit.findIndexesFromRange(he.createPosRange());O.push({type:"style",actor:r.getActorID(),from:ie,to:ye,value:{attributes:Yi(t)}});for(const[Ae,Le]of Object.entries(t))he.getValue().setAttr(Ae,Le,r)}return[M,O]}indexRangeToPosRange(e,t){const r=this.rgaTreeSplit.indexToPos(e);return e===t?[r,r]:[r,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const r=t.getValue();e.push({attributes:Yi(r.getAttributes()),content:r.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}getRemovedNodesLen(){return this.rgaTreeSplit.getRemovedNodesLen()}purgeRemovedNodesBefore(e){return this.rgaTreeSplit.purgeRemovedNodesBefore(e)}deepcopy(){const e=new Qn(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}}class To extends Zn{constructor(e,t,r,i,o,p,O){super(e,O),_(this,"fromPos"),_(this,"toPos"),_(this,"maxCreatedAtMapByActor"),_(this,"content"),_(this,"attributes"),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=i,this.content=o,this.attributes=p}static create(e,t,r,i,o,p,O){return new To(e,t,r,i,o,p,O)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Qn||we.fatal("fail to execute, only Text can execute edit");const r=t,[,i]=r.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(r),{opInfos:i.map(({from:o,to:p,value:O})=>({type:"edit",from:o,to:p,value:O,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),i=this.content;return`${e}.EDIT(${t},${r},${i})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class _o extends Zn{constructor(e,t,r,i,o,p){super(e,p),_(this,"fromPos"),_(this,"toPos"),_(this,"maxCreatedAtMapByActor"),_(this,"attributes"),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=i,this.attributes=o}static create(e,t,r,i,o,p){return new _o(e,t,r,i,o,p)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Qn||we.fatal("fail to execute, only Text can execute edit");const r=t,[,i]=r.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);return{opInfos:i.map(({from:o,to:p,value:O})=>({type:"style",from:o,to:p,value:O,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),i=this.attributes;return`${e}.STYL(${t},${r},${JSON.stringify(i)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const nh=2,rh="root",ei="text";function Eo(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const o=r[i];!o||o.isRemoved||(t+=o.paddedSize)}return t}class ih{constructor(e,t=[]){if(_(this,"type"),_(this,"parent"),_(this,"_children"),_(this,"size"),this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e;)e.size+=this.paddedSize*t,e=e.parent}get isText(){return this.type===ei}get paddedSize(){return this.size+(this.isText?0:nh)}isAncestorOf(e){return oh(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=r;const o=this.cloneText(e+t);return o.value=i,this.parent.insertAfterInternal(o,this),o}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this,t.isRemoved||t.updateAncestorsSize()}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const i=this.children.slice(0,e),o=this.children.slice(e);this._children=i,r._children=o,this.size=this._children.reduce((p,O)=>p+O.paddedSize,0),r.size=r._children.reduce((p,O)=>p+O.paddedSize,0);for(const p of r._children)p.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function oh(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var Lt=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(Lt||{});function ql(n,e,t,r){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new Error(`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new Error(`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const o of n.children){if(e-o.paddedSize<i&&i<t){const p=o.isText?e-i:e-i-1,O=o.isText?t-i:t-i-1,D=!o.isText&&p<0,M=!o.isText&&O>o.size;(o.isText||D)&&r([o,o.isText?"Text":"Start"],M),ql(o,Math.max(0,p),Math.min(O,o.size),r),M&&r([o,"End"],M)}i+=o.paddedSize}}function Os(n,e,t=0){for(const r of n.children)Os(r,e,t+1);e(n,t)}function Ss(n,e,t=0){for(const r of n._children)Ss(r,e,t+1);e(n,t)}function Ns(n,e,t=!0){if(e>n.size)throw new Error(`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const o of n.children){if(t&&o.isText&&o.size>=e-i)return Ns(o,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&o.paddedSize===e-i)return{node:n,offset:r+1};if(o.paddedSize>e-i)return Ns(o,e-i-1,t);i+=o.paddedSize,r+=1}return{node:n,offset:r}}function Ul(n){return n.isText||n.children.length===0?n:Ul(n.children[0])}function sh(n,e){if(n.size<e)throw new Error("unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class ah{constructor(e){_(this,"root"),this.root=e}tokensBetween(e,t,r){ql(this.root,e,t,r)}traverse(e){Os(this.root,e,0)}traverseAll(e){Ss(this.root,e,0)}findTreePos(e,t=!0){return Ns(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new Error("invalid treePos");const o=Eo(r.parent,i);t.push(o+e.offset),r=r.parent}else if(r.hasTextChild()){const i=Eo(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new Error("invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return sh(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:Ul(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,o=1;if(t.isText){i+=r;const p=t.parent,O=p.findOffset(t);if(O===-1)throw new Error("invalid pos");i+=Eo(p,O),t=t.parent}else i+=Eo(t,r);for(;t!=null&&t.parent;){const p=t.parent,O=p.findOffset(t);if(O===-1)throw new Error("invalid pos");i+=Eo(p,O),o++,t=t.parent}return i+o-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const lh=(n,e)=>n===e?0:n<e?-1:1;class uh{constructor(e,t,r){_(this,"key"),_(this,"value"),_(this,"parent"),_(this,"left"),_(this,"right"),_(this,"isRed"),this.key=e,this.value=t,this.isRed=r}}class ch{constructor(e){_(this,"stack"),this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Jl{constructor(e){_(this,"root"),_(this,"comparator"),_(this,"counter"),this.comparator=typeof e<"u"?e:lh,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new ch(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,o=t;for(;i&&o===i.left;)o=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new uh(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class er{constructor(e,t){_(this,"parentID"),_(this,"leftSiblingID"),this.parentID=e,this.leftSiblingID=t}static of(e,t){return new er(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],er.of(r.id,Ht.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return er.of(Ht.of(hn.fromStruct(e.parentID.createdAt),e.parentID.offset),Ht.of(hn.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodes(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let o=e.findFloorNode(r);if(!i||!o)throw new Error(`cannot find node at ${this}`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===o.id.getOffset()&&o.insPrevID&&(o=e.findFloorNode(o.insPrevID)),[i,o]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ht{constructor(e,t){_(this,"createdAt"),_(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new Ht(e,t)}static fromStruct(e){return Ht.of(hn.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class kn extends ih{constructor(e,t,r,i,o){super(t),_(this,"id"),_(this,"removedAt"),_(this,"attrs"),_(this,"insPrevID"),_(this,"insNextID"),_(this,"_value",""),this.id=e,this.removedAt=o,i&&(this.attrs=i),typeof r=="string"?this.value=r:Array.isArray(r)&&(this._children=r)}static create(e,t,r,i){return new kn(e,t,r,i)}deepcopy(){var e;const t=new kn(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)==null?void 0:e.deepcopy(),t._children=this._children.map(r=>{const i=r.deepcopy();return i.parent=t,i}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&(this.parent.removedAt?this.parent.size-=this.paddedSize:this.updateAncestorsSize())}cloneText(e){return new kn(Ht.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new kn(Ht.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,r){const i=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,r);if(i){if(i.insPrevID=this.id,this.insNextID){const o=e.findFloorNode(this.insNextID);o.insPrevID=i.id,i.insNextID=this.insNextID}this.insNextID=i.id,e.registerNode(i)}return i}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}}function As(n){var e;if(n.isText){const t=n;return{type:t.type,value:t.value}}return{type:n.type,children:n.children.map(As),attributes:n.attrs?Yi((e=n.attrs)==null?void 0:e.toObject()):void 0}}function ks(n){var e;return n.isText?n.value:`<${n.type}${((e=n.attrs)==null?void 0:e.toXML())||""}>${n.children.map(t=>ks(t)).join("")}</${n.type}>`}function Fl(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(Fl),size:n.size,isRemoved:n.isRemoved}}class tr extends Bl{constructor(e,t){super(t),_(this,"indexTree"),_(this,"nodeMapByID"),_(this,"removedNodeMap"),this.indexTree=new ah(e),this.nodeMapByID=new Jl(Ht.createComparator()),this.removedNodeMap=new Map,this.indexTree.traverse(r=>{this.nodeMapByID.put(r.id,r)})}static create(e,t){return new tr(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[r,i]=e.toTreeNodes(this);let o=i;const p=r===o,O=o.parent&&!p?o.parent:r;if(o.isText&&o.split(this,e.getLeftSiblingID().getOffset()-o.id.getOffset()),t){const D=O.allChildren,M=p?0:D.indexOf(o)+1;for(let G=M;G<D.length;G++){const he=D[G];if(!he.id.getCreatedAt().after(t))break;o=he}}return[O,o]}style(e,t,r,i){const[o,p]=this.findNodesAndSplitText(e[0],r),[O,D]=this.findNodesAndSplitText(e[1],r),M=[],G=t?Yi(t):{},he=new Map;return this.traverseInPosRange(o,p,O,D,([ie])=>{const ye=ie.getCreatedAt().getActorID();let Ae=i?i.has(ye)?i.get(ye):xr:Vo;if(ie.canStyle(r,Ae)&&!ie.isText&&t){Ae=he.get(ye);const Le=ie.getCreatedAt();(!Ae||Le.after(Ae))&&he.set(ye,Le),ie.attrs||(ie.attrs=new Qr);const Ye=new Set;for(const[gt,ot]of Object.entries(t))ie.attrs.set(gt,ot,r)&&Ye.add(gt);if(Ye.size>0){const gt=Array.from(Ye).reduce((ot,wt)=>(ot[wt]=G[wt],ot),{});M.push({type:"style",from:this.toIndex(o,p),to:this.toIndex(O,D),fromPath:this.toPath(o,p),toPath:this.toPath(O,D),actor:r.getActorID(),value:gt})}}}),[he,M]}removeStyle(e,t,r){const[i,o]=this.findNodesAndSplitText(e[0],r),[p,O]=this.findNodesAndSplitText(e[1],r),D=[],M=t||void 0;return this.traverseInPosRange(i,o,p,O,([G])=>{if(!G.isRemoved&&!G.isText&&t){G.attrs||(G.attrs=new Qr);for(const he of t)G.attrs.remove(he,r);D.push({type:"removeStyle",from:this.toIndex(i,o),to:this.toIndex(p,O),fromPath:this.toPath(i,o),toPath:this.toPath(p,O),actor:r.getActorID(),value:M})}}),D}edit(e,t,r,i,o,p){const[O,D]=this.findNodesAndSplitText(e[0],i),[M,G]=this.findNodesAndSplitText(e[1],i),he=this.toIndex(O,D),ie=this.toPath(O,D),ye=[],Ae=[],Le=[],Ye=new Map;this.traverseInPosRange(O,D,M,G,([ot,wt],At)=>{if(wt===Lt.Start&&!At)for(const to of ot.children)Le.push(to);const Bt=ot.getCreatedAt().getActorID(),Ii=p?p.has(Bt)?p.get(Bt):xr:Vo;if(ot.canDelete(i,Ii)||ye.includes(ot.parent)){const to=Ye.get(Bt),Po=ot.getCreatedAt();(!to||Po.after(to))&&Ye.set(Bt,Po),(wt===Lt.Text||wt===Lt.Start)&&ye.push(ot),Ae.push([ot,wt])}});const gt=this.makeDeletionChanges(Ae,i);for(const ot of ye)ot.remove(i),ot.isRemoved&&this.removedNodeMap.set(ot.id.toIDString(),ot);for(const ot of Le)ot.removedAt||O.append(ot);if(r>0){let ot=0,wt=O,At=D;for(;ot<r;)wt.split(this,wt.findOffset(At)+1,o),At=wt,wt=wt.parent,ot++;gt.push({type:"content",from:he,to:he,fromPath:ie,toPath:ie,actor:i.getActorID()})}if(t!=null&&t.length){const ot=[];let wt=D;for(const At of t)wt===O?O.insertAt(At,0):O.insertAfter(At,wt),wt=At,Ss(At,Bt=>{O.isRemoved&&(Bt.remove(i),this.removedNodeMap.set(Bt.id.toIDString(),Bt)),this.nodeMapByID.put(Bt.id,Bt)}),At.isRemoved||ot.push(At);if(ot.length){const At=ot.map(Bt=>As(Bt));gt.length&&gt[gt.length-1].from===he?gt[gt.length-1].value=At:gt.push({type:"content",from:he,to:he,fromPath:ie,toPath:ie,actor:i.getActorID(),value:At})}}return[gt,Ye]}editT(e,t,r,i,o){const p=this.findPos(e[0]),O=this.findPos(e[1]);this.edit([p,O],t,r,i,o)}move(e,t,r){throw new Error(`not implemented: ${e}, ${t}, ${r}`)}purgeRemovedNodesBefore(e){var t;const r=new Set;let i=0;for(const[,o]of this.removedNodeMap)o.removedAt&&e.compare(o.removedAt)>=0&&(r.add(o),i++);for(const o of r)(t=o.parent)==null||t.removeChild(o),this.nodeMapByID.remove(o.id),this.purge(o),this.removedNodeMap.delete(o.id.toIDString());return i}purge(e){const t=e.insPrevID,r=e.insNextID;if(t){const i=this.findFloorNode(t);i.insNextID=r}if(r){const i=this.findFloorNode(r);i.insPrevID=t}e.insPrevID=void 0,e.insNextID=void 0}findPos(e,t=!0){const r=this.indexTree.findTreePos(e,t);return er.fromTreePos(r)}getRemovedNodesLen(){return this.removedNodeMap.size}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getIndexTree(){return this.indexTree}toXML(){return ks(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),t=(r,i=void 0,o=void 0,p=0)=>{var O,D,M,G;let he,ie,ye;const Ae=r.isText?{node:r,offset:0}:i&&o?this.toTreePos(i,o):null;Ae&&(he=this.indexTree.indexOf(Ae),ie=this.indexTree.treePosToPath(Ae),ye=er.fromTreePos(Ae).toStruct());const Le={type:r.type,parent:i==null?void 0:i.id.toTestString(),size:r.size,id:r.id.toTestString(),removedAt:(O=r.removedAt)==null?void 0:O.toTestString(),insPrev:(D=r.insPrevID)==null?void 0:D.toTestString(),insNext:(M=r.insNextID)==null?void 0:M.toTestString(),value:r.isText?r.value:void 0,isRemoved:r.isRemoved,children:[],depth:p,attributes:r.attrs?Yi((G=r.attrs)==null?void 0:G.toObject()):void 0,index:he,path:ie,pos:ye};for(let Ye=0;Ye<r.children.length;Ye++){const gt=Ye===0?r:r.children[Ye-1];Le.children.push(t(r.children[Ye],r,gt,p+1))}return Le};return t(e)}getRootTreeNode(){return As(this.indexTree.getRoot())}toTestTreeNode(){return Fl(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new tr(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.treePosToPath(r):[]}toIndex(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.indexOf(r):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,r]=e,i=this.findPos(t);return t===r?[i.toStruct(),i.toStruct()]:[i.toStruct(),this.findPos(r).toStruct()]}posRangeToPathRange(e){const[t,r]=this.findNodesAndSplitText(e[0]),[i,o]=this.findNodesAndSplitText(e[1]);return[this.toPath(t,r),this.toPath(i,o)]}posRangeToIndexRange(e){const[t,r]=this.findNodesAndSplitText(e[0]),[i,o]=this.findNodesAndSplitText(e[1]);return[this.toIndex(t,r),this.toIndex(i,o)]}traverseInPosRange(e,t,r,i,o){const p=this.toIndex(e,t),O=this.toIndex(r,i);return this.indexTree.tokensBetween(p,O,o)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let i;for(;e.isRemoved;)i=e,e=i.parent;const o=e.findOffset(i);return{node:e,offset:o}}if(e===t)return{node:e,offset:0};let r=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};r++}return{node:e,offset:r}}makeDeletionChanges(e,t){const r=[],i=[];let o=null,p=null;for(let O=0;O<e.length;O++){const D=e[O],M=e[O+1];o||(o=D),p=D;const G=this.findRightToken(D);(!G||!M||G[0]!==M[0]||G[1]!==M[1])&&(i.push([o,p]),o=null,p=null)}for(const O of i){const[D,M]=O,[G,he]=this.findLeftToken(D),[ie,ye]=M,Ae=he===Lt.Start?G:G.parent,Le=ye===Lt.Start?ie:ie.parent,Ye=this.toIndex(Ae,G),gt=this.toIndex(Le,ie);Ye<gt&&(r.length>0&&Ye===r[r.length-1].to?(r[r.length-1].to=gt,r[r.length-1].toPath=this.toPath(Le,ie)):r.push({type:"content",from:Ye,to:gt,fromPath:this.toPath(Ae,G),toPath:this.toPath(Le,ie),actor:t.getActorID()}))}return r.reverse()}findRightToken([e,t]){if(t===Lt.Start){const O=e.allChildren;return O.length>0?[O[0],O[0].isText?Lt.Text:Lt.Start]:[e,Lt.End]}const r=e.parent,i=r.allChildren,o=i.indexOf(e);if(r&&o===i.length-1)return[r,Lt.End];const p=i[o+1];return[p,p.isText?Lt.Text:Lt.Start]}findLeftToken([e,t]){if(t===Lt.End){const O=e.allChildren;if(O.length>0){const D=O[O.length-1];return[D,D.isText?Lt.Text:Lt.End]}return[e,Lt.Start]}const r=e.parent,i=r.allChildren,o=i.indexOf(e);if(r&&o===0)return[r,Lt.Start];const p=i[o-1];return[p,p.isText?Lt.Text:Lt.End]}}class wo extends Zn{constructor(e,t,r,i,o,p,O){super(e,O),_(this,"fromPos"),_(this,"toPos"),_(this,"contents"),_(this,"splitLevel"),_(this,"maxCreatedAtMapByActor"),this.fromPos=t,this.toPos=r,this.contents=i,this.splitLevel=o,this.maxCreatedAtMapByActor=p}static create(e,t,r,i,o,p,O){return new wo(e,t,r,i,o,p,O)}execute(e){var t;const r=e.findByCreatedAt(this.getParentCreatedAt());r||we.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof tr||we.fatal("fail to execute, only Tree can execute edit");const i=this.getExecutedAt(),o=r,[p]=o.edit([this.fromPos,this.toPos],(t=this.contents)==null?void 0:t.map(O=>O.deepcopy()),this.splitLevel,i,(()=>{let O=i.getDelimiter();return this.contents!==void 0&&(O+=this.contents.length),()=>hn.of(i.getLamport(),++O,i.getActorID())})(),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(o),{opInfos:p.map(({from:O,to:D,value:M,splitLevel:G,fromPath:he,toPath:ie})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:O,to:D,value:M,splitLevel:G,fromPath:he,toPath:ie}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,i=this.contents||[];return`${e}.EDIT(${t},${r},${i.map(o=>ks(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class fi{constructor(e,t,r){_(this,"clientSeq"),_(this,"serverSeq"),_(this,"lamport"),_(this,"actor"),this.clientSeq=e,this.lamport=t,this.actor=r}static of(e,t,r){return new fi(e,t,r)}next(){return new fi(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new fi(this.clientSeq,e,this.actor):new fi(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return hn.of(this.lamport,e,this.actor)}setActor(e){return new fi(this.clientSeq,this.lamport,e)}getClientSeq(){return this.clientSeq}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const fh=new fi(0,lt.fromInt(0,!0),$o);class ki{constructor({id:e,operations:t,presenceChange:r,message:i}){_(this,"id"),_(this,"operations"),_(this,"presenceChange"),_(this,"message"),this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new ki({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],o=[];for(const p of this.operations){const O=p.execute(e,r);if(!O)continue;const{opInfos:D,reverseOp:M}=O;i.push(...D),M&&o.unshift(M)}return this.presenceChange&&(this.presenceChange.type===ai.Put?t.set(this.id.getActorID(),Xn(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:o}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:Mt.bytesToHex(Mt.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>Mt.bytesToHex(Mt.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:o}=e;return ki.create({id:Mt.bytesToChangeID(Mt.hexToBytes(t)),operations:r==null?void 0:r.map(p=>Mt.bytesToOperation(Mt.hexToBytes(p))),presenceChange:i,message:o})}}class Yo{constructor(e,t,r,i,o,p){_(this,"documentKey"),_(this,"checkpoint"),_(this,"isRemoved"),_(this,"changes"),_(this,"snapshot"),_(this,"minSyncedTicket"),this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.minSyncedTicket=p}static create(e,t,r,i,o,p){return new Yo(e,t,r,i,o,p)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Wi{constructor(e,t){_(this,"serverSeq"),_(this,"clientSeq"),this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Wi(e,t)}increaseClientSeq(e){return e===0?this:new Wi(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return Wi.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const hh=new Wi(lt.fromInt(0,!0),0);class Ir{constructor(e,t){_(this,"createdAt"),_(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new Ir(e,t)}static fromStruct(e){return Ir.of(hn.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new Ir(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const dh=Ir.of(xr,0);class nr{constructor(e,t){_(this,"id"),_(this,"relativeOffset"),this.id=e,this.relativeOffset=t}static of(e,t){return new nr(e,t)}static fromStruct(e){const t=Ir.fromStruct(e.id);return nr.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Ir.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class hi extends jl{constructor(e,t,r){super(t),_(this,"id"),_(this,"removedAt"),_(this,"prev"),_(this,"next"),_(this,"insPrev"),_(this,"insNext"),this.id=e,this.removedAt=r}static create(e,t){return new hi(e,t)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new hi(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[nr.of(this.id,0),nr.of(this.id,this.getLength())]}deepcopy(){return new hi(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}}class Gi{constructor(){_(this,"head"),_(this,"treeByIndex"),_(this,"treeByID"),_(this,"removedNodeMap"),this.head=hi.create(dh),this.treeByIndex=new mo,this.treeByID=new Jl(hi.createComparator()),this.removedNodeMap=new Map,this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Gi}edit(e,t,r,i){const[o,p]=this.findNodeWithSplit(e[1],t),[O,D]=this.findNodeWithSplit(e[0],t),M=this.findBetween(D,p),[G,he,ie]=this.deleteNodes(M,t,i),ye=p?p.getID():o.getID();let Ae=nr.of(ye,0);if(r){const Le=this.posToIndex(O.createPosRange()[1],!0),Ye=this.insertAfter(O,hi.create(Ir.of(t,0),r));G.length&&G[G.length-1].from===Le?G[G.length-1].value=r:G.push({actor:t.getActorID(),from:Le,to:Le,value:r}),Ae=nr.of(Ye.getID(),Ye.getContentLength())}for(const[Le,Ye]of ie)this.removedNodeMap.set(Le,Ye);return[Ae,he,G]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return nr.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);i||we.fatal(`the node of the given id should be found: ${r.toTestString()}`);const o=this.treeByIndex.indexOf(i),p=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return o+p}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Gi;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const o=e.findNode(t.getInsPrevID());i.setInsPrev(o)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const o=r.getOffset()-i.getID().getOffset();for(this.splitNode(i,o);i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||we.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){if(t>e.getContentLength()&&we.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const i=e.getInsNext();return i&&i.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r){if(!e.length)return[[],new Map,new Map];const[i,o]=this.filterNodes(e,t,r),p=new Map,O=new Map,D=this.makeChanges(o,t);for(const M of i){const G=M.getCreatedAt().getActorID();(!p.has(G)||M.getID().getCreatedAt().after(p.get(G)))&&p.set(G,M.getID().getCreatedAt()),O.set(M.getID().toIDString(),M),M.remove(t)}return this.deleteIndexNodes(o),[D,p,O]}filterNodes(e,t,r){const i=!!r,o=[],p=[],[O,D]=this.findEdgesOfCandidates(e);p.push(O);for(const M of e){const G=M.getCreatedAt().getActorID(),he=i?r.has(G)?r.get(G):xr:Vo;M.canDelete(t,he)?o.push(M):p.push(M)}return p.push(D),[o,p]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,o;for(let p=0;p<e.length-1;p++){const O=e[p],D=e[p+1];O.getNext()!=D&&([i]=this.findIndexesFromRange(O.getNext().createPosRange()),D?[,o]=this.findIndexesFromRange(D.getPrev().createPosRange()):o=this.treeByIndex.length,i<o&&r.push({actor:t.getActorID(),from:i,to:o}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}getRemovedNodesLen(){return this.removedNodeMap.size}purgeRemovedNodesBefore(e){let t=0;for(const[,r]of this.removedNodeMap)r.getRemovedAt()&&e.compare(r.getRemovedAt())>=0&&(this.treeByIndex.delete(r),this.purge(r),this.treeByID.remove(r.getID()),this.removedNodeMap.delete(r.getID().toIDString()),t++);return t}purge(e){const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),o=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(o),o&&o.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const $l=n=>n<0?Math.ceil(n):Math.floor(n);var Pr=(n=>(n[n.IntegerCnt=0]="IntegerCnt",n[n.LongCnt=1]="LongCnt",n))(Pr||{});class xn extends zo{constructor(e,t,r){switch(super(r),_(this,"valueType"),_(this,"value"),this.valueType=e,e){case 0:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=lt.fromNumber(t).toInt():this.value=$l(t):this.value=t.toInt();break;case 1:typeof t=="number"?this.value=lt.fromNumber(t):this.value=t;break;default:throw new Tt(yt.Unimplemented,`unimplemented type: ${e}`)}}static create(e,t,r){return new xn(e,t,r)}static valueFromBytes(e,t){switch(e){case 0:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 1:return lt.fromBytesLE(Array.from(t));default:throw new Tt(yt.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=xn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof lt?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!xn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new Tt(yt.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(r){if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`)}return t(this),t(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Ut.Long?this.value=this.value+e.getValue().toInt():this.value=lt.fromNumber(this.value+$l(e.getValue())).toInt(),this}}class Xi extends Zn{constructor(e,t,r){super(e,r),_(this,"value"),this.value=t}static create(e,t,r){return new Xi(e,t,r)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof xn||we.fatal("fail to execute, only Counter can execute increase");const r=t,i=this.value.deepcopy();return r.increase(i),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:i.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),r=e.getType()===Ut.Long?e.getValue().multiply(-1):e.getValue()*-1;return Xi.create(this.getParentCreatedAt(),Ot.of(r,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class ti extends Zn{constructor(e,t,r,i,o,p,O){super(e,O),_(this,"fromPos"),_(this,"toPos"),_(this,"maxCreatedAtMapByActor"),_(this,"attributes"),_(this,"attributesToRemove"),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=i,this.attributes=o,this.attributesToRemove=p}static create(e,t,r,i,o,p){return new ti(e,t,r,i,o,new Array,p)}static createTreeRemoveStyleOperation(e,t,r,i,o){return new ti(e,t,r,new Map,new Map,i,o)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof tr||we.fatal("fail to execute, only Tree can execute edit");const r=t;let i;if(this.attributes.size){const o={};[...this.attributes].forEach(([O,D])=>o[O]=D);const[,p]=r.style([this.fromPos,this.toPos],o,this.getExecutedAt(),this.maxCreatedAtMapByActor);i=p}else{const o=this.attributesToRemove;i=r.removeStyle([this.fromPos,this.toPos],o,this.getExecutedAt())}return{opInfos:i.map(({from:o,to:p,value:O,fromPath:D})=>({type:"tree-style",from:o,to:p,value:O,fromPath:D,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${r},${Object.entries(this.attributes||{}).map(([i,o])=>`${i}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function ph(n){const e=new bl,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function gh(n){if(n.type===ai.Put)return new ys({type:po.PUT,presence:ph(n.presence)});if(n.type===ai.Clear)return new ys({type:po.CLEAR});throw new Tt(yt.Unimplemented,"unimplemented type")}function mh(n){return new Tl({serverSeq:n.getServerSeqAsString(),clientSeq:n.getClientSeq()})}function Vl(n){return new Jo({clientSeq:n.getClientSeq(),lamport:n.getLamportAsString(),actorId:Ls(n.getActorID())})}function $e(n){if(!!n)return new El({lamport:n.getLamportAsString(),delimiter:n.getDelimiter(),actorId:Ls(n.getActorID())})}function zl(n){switch(n){case Ut.Null:return ft.NULL;case Ut.Boolean:return ft.BOOLEAN;case Ut.Integer:return ft.INTEGER;case Ut.Long:return ft.LONG;case Ut.Double:return ft.DOUBLE;case Ut.String:return ft.STRING;case Ut.Bytes:return ft.BYTES;case Ut.Date:return ft.DATE;default:throw new Tt(yt.Unsupported,`unsupported type: ${n}`)}}function Kl(n){switch(n){case Pr.IntegerCnt:return ft.INTEGER_CNT;case Pr.LongCnt:return ft.LONG_CNT;default:throw new Tt(yt.Unsupported,`unsupported type: ${n}`)}}function xs(n){if(n instanceof vn)return new Oi({type:ft.JSON_OBJECT,createdAt:$e(n.getCreatedAt()),value:au(n)});if(n instanceof An)return new Oi({type:ft.JSON_ARRAY,createdAt:$e(n.getCreatedAt()),value:$h(n)});if(n instanceof Qn)return new Oi({type:ft.TEXT,createdAt:$e(n.getCreatedAt())});if(n instanceof Ot)return new Oi({type:zl(n.getType()),createdAt:$e(n.getCreatedAt()),value:n.toBytes()});if(n instanceof xn)return new Oi({type:Kl(n.getType()),createdAt:$e(n.getCreatedAt()),value:n.toBytes()});if(n instanceof tr)return new Oi({type:ft.TREE,createdAt:$e(n.getCreatedAt()),value:zh(n)});throw new Tt(yt.Unimplemented,"unimplemented element")}function vh(n){return new pl({createdAt:$e(n.getCreatedAt()),offset:n.getOffset()})}function Ho(n){return new _l({createdAt:$e(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function Wo(n){return new yl({parentId:Oo(n.getParentID()),leftSiblingId:Oo(n.getLeftSiblingID())})}function Oo(n){return new vl({createdAt:$e(n.getCreatedAt()),offset:n.getOffset()})}function Yl(n){const e=new ms;if(n instanceof Ai){const t=n,r=new Ga;r.parentCreatedAt=$e(t.getParentCreatedAt()),r.key=t.getKey(),r.value=xs(t.getValue()),r.executedAt=$e(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof yo){const t=n,r=new Xa;r.parentCreatedAt=$e(t.getParentCreatedAt()),r.prevCreatedAt=$e(t.getPrevCreatedAt()),r.value=xs(t.getValue()),r.executedAt=$e(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof ci){const t=n,r=new Za;r.parentCreatedAt=$e(t.getParentCreatedAt()),r.prevCreatedAt=$e(t.getPrevCreatedAt()),r.createdAt=$e(t.getCreatedAt()),r.executedAt=$e(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof ui){const t=n,r=new Qa;r.parentCreatedAt=$e(t.getParentCreatedAt()),r.createdAt=$e(t.getCreatedAt()),r.executedAt=$e(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof To){const t=n,r=new el;r.parentCreatedAt=$e(t.getParentCreatedAt()),r.from=Ho(t.getFromPos()),r.to=Ho(t.getToPos());const i=r.createdAtMapByActor;for(const[p,O]of t.getMaxCreatedAtMapByActor())i[p]=$e(O);r.content=t.getContent();const o=r.attributes;for(const[p,O]of t.getAttributes())o[p]=O;r.executedAt=$e(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof _o){const t=n,r=new tl;r.parentCreatedAt=$e(t.getParentCreatedAt()),r.from=Ho(t.getFromPos()),r.to=Ho(t.getToPos());const i=r.createdAtMapByActor;for(const[p,O]of t.getMaxCreatedAtMapByActor())i[p]=$e(O);const o=r.attributes;for(const[p,O]of t.getAttributes())o[p]=O;r.executedAt=$e(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof Xi){const t=n,r=new nl;r.parentCreatedAt=$e(t.getParentCreatedAt()),r.value=xs(t.getValue()),r.executedAt=$e(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof wo){const t=n,r=new rl,i=r.createdAtMapByActor;for(const[o,p]of t.getMaxCreatedAtMapByActor())i[o]=$e(p);r.parentCreatedAt=$e(t.getParentCreatedAt()),r.from=Wo(t.getFromPos()),r.to=Wo(t.getToPos()),r.contents=Oh(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=$e(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof ti){const t=n,r=new il;r.parentCreatedAt=$e(t.getParentCreatedAt()),r.from=Wo(t.getFromPos()),r.to=Wo(t.getToPos());const i=r.createdAtMapByActor;for(const[p,O]of t.getMaxCreatedAtMapByActor())i[p]=$e(O);const o=t.getAttributesToRemove();if(o.length>0)r.attributesToRemove=o;else{const p=r.attributes;for(const[O,D]of t.getAttributes())p[O]=D}r.executedAt=$e(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new Tt(yt.Unimplemented,"unimplemented operation");return e}function yh(n){const e=[];for(const t of n)e.push(Yl(t));return e}function bh(n){const e=new Wa({id:Vl(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=yh(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=gh(n.getPresenceChange())),e}function Th(n){const e=[];for(const t of n)e.push(bh(t));return e}function _h(n){const e=[];for(const t of n)e.push(new fl({key:t.getStrKey(),element:Is(t.getValue())}));return e}function Eh(n){const e=[];for(const t of n)e.push(new hl({element:Is(t.getValue())}));return e}function wh(n){const e=[];for(const t of n){const r=new dl;r.id=vh(t.getID()),r.value=t.getValue().getContent(),r.removedAt=$e(t.getRemovedAt());const i=r.attributes,o=t.getValue().getAttrs();for(const p of o){const O=new vs;O.value=p.getValue(),O.updatedAt=$e(p.getUpdatedAt()),i[p.getKey()]=O}e.push(r)}return e}function Oh(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new ml({content:Hl(t)}));return e}function Hl(n){if(!n)return[];const e=[];return Os(n,(t,r)=>{const i=new gl({id:Oo(t.id),type:t.type,removedAt:$e(t.removedAt),depth:r});if(t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=Oo(t.insPrevID)),t.insNextID&&(i.insNextId=Oo(t.insNextID)),t.attrs)for(const o of t.attrs)i.attributes[o.getKey()]=new vs({value:o.getValue(),updatedAt:$e(o.getUpdatedAt())});e.push(i)}),e}function Sh(n){const e=new kr;return e.body.case="jsonObject",e.body.value=new ol({nodes:_h(n.getRHT()),createdAt:$e(n.getCreatedAt()),movedAt:$e(n.getMovedAt()),removedAt:$e(n.getRemovedAt())}),e}function Wl(n){const e=new kr;return e.body.case="jsonArray",e.body.value=new sl({nodes:Eh(n.getElements()),createdAt:$e(n.getCreatedAt()),movedAt:$e(n.getMovedAt()),removedAt:$e(n.getRemovedAt())}),e}function Nh(n){const e=new kr;return e.body.case="primitive",e.body.value=new al({type:zl(n.getType()),value:n.toBytes(),createdAt:$e(n.getCreatedAt()),movedAt:$e(n.getMovedAt()),removedAt:$e(n.getRemovedAt())}),e}function Ah(n){const e=new kr;return e.body.case="text",e.body.value=new ll({nodes:wh(n.getRGATreeSplit()),createdAt:$e(n.getCreatedAt()),movedAt:$e(n.getMovedAt()),removedAt:$e(n.getRemovedAt())}),e}function kh(n){const e=new kr;return e.body.case="counter",e.body.value=new ul({type:Kl(n.getType()),value:n.toBytes(),createdAt:$e(n.getCreatedAt()),movedAt:$e(n.getMovedAt()),removedAt:$e(n.getRemovedAt())}),e}function Gl(n){const e=new kr;return e.body.case="tree",e.body.value=new cl({nodes:Hl(n.getRoot()),createdAt:$e(n.getCreatedAt()),movedAt:$e(n.getMovedAt()),removedAt:$e(n.getRemovedAt())}),e}function Is(n){if(n instanceof vn)return Sh(n);if(n instanceof An)return Wl(n);if(n instanceof Ot)return Nh(n);if(n instanceof Qn)return Ah(n);if(n instanceof xn)return kh(n);if(n instanceof tr)return Gl(n);throw new Tt(yt.Unimplemented,"unimplemented element")}function xh(n){return new Ha({documentKey:n.getDocumentKey(),checkpoint:mh(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:Th(n.getChanges()),snapshot:n.getSnapshot(),minSyncedTicket:$e(n.getMinSyncedTicket())})}function Xl(n){return fi.of(n.clientSeq,lt.fromString(n.lamport,!0),Cs(n.actorId))}function ze(n){if(!!n)return hn.of(lt.fromString(n.lamport,!0),n.delimiter,Cs(n.actorId))}function Ps(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function Ih(n){const e=n.type;if(e===po.PUT){const t=Ps(n.presence);return{type:ai.Put,presence:t}}if(e===po.CLEAR)return{type:ai.Clear};throw new Tt(yt.Unsupported,`unsupported type: ${e}`)}function Ph(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,Ps(r))}),e}function Zl(n){switch(n){case ft.NULL:return Ut.Null;case ft.BOOLEAN:return Ut.Boolean;case ft.INTEGER:return Ut.Integer;case ft.LONG:return Ut.Long;case ft.DOUBLE:return Ut.Double;case ft.STRING:return Ut.String;case ft.BYTES:return Ut.Bytes;case ft.DATE:return Ut.Date}throw new Tt(yt.Unimplemented,`unimplemented value type: ${n}`)}function Go(n){switch(n){case ft.INTEGER_CNT:return Pr.IntegerCnt;case ft.LONG_CNT:return Pr.LongCnt}throw new Tt(yt.Unimplemented,`unimplemented value type: ${n}`)}function Rs(n){switch(n.type){case ft.JSON_OBJECT:return n.value?su(n.value):vn.create(ze(n.createdAt));case ft.JSON_ARRAY:return n.value?Fh(n.value):An.create(ze(n.createdAt));case ft.TEXT:return Qn.create(Gi.create(),ze(n.createdAt));case ft.TREE:return Vh(n.value);case ft.NULL:case ft.BOOLEAN:case ft.INTEGER:case ft.LONG:case ft.DOUBLE:case ft.STRING:case ft.BYTES:case ft.DATE:return Ot.of(Ot.valueFromBytes(Zl(n.type),n.value),ze(n.createdAt));case ft.INTEGER_CNT:case ft.LONG_CNT:return xn.create(Go(n.type),xn.valueFromBytes(Go(n.type),n.value),ze(n.createdAt))}}function Xo(n){return nr.of(Ir.of(ze(n.createdAt),n.offset),n.relativeOffset)}function Ql(n){return Ir.of(ze(n.createdAt),n.offset)}function Rh(n){const e=bo.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,ze(i.updatedAt))});const t=hi.create(Ql(n.id),e);return t.remove(ze(n.removedAt)),t}function Zi(n){return er.of(So(n.parentId),So(n.leftSiblingId))}function So(n){return Ht.of(ze(n.createdAt),n.offset)}function Dh(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=eu(t.content);e.push(r)}),e}function eu(n){if(n.length===0)return;const e=[];for(const r of n)e.push(Ch(r));const t=e[e.length-1];for(let r=e.length-2;r>=0;r--){let i;for(let o=r+1;o<e.length;o++)if(n[r].depth-1===n[o].depth){i=e[o];break}i.prepend(e[r])}return tr.create(t,xr).getRoot()}function Ch(n){const e=So(n.id),t=kn.create(e,n.type);if(t.isText)t.value=n.value;else{const r=Qr.create();Object.entries(n.attributes).forEach(([i,o])=>{r.set(i,o.value,ze(o.updatedAt))}),t.attrs=r}return n.insPrevId&&(t.insPrevID=So(n.insPrevId)),n.insNextId&&(t.insNextID=So(n.insNextId)),t.removedAt=ze(n.removedAt),t}function tu(n){if(n.body.case==="set"){const e=n.body.value;return Ai.create(e.key,Rs(e.value),ze(e.parentCreatedAt),ze(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return yo.create(ze(e.parentCreatedAt),ze(e.prevCreatedAt),Rs(e.value),ze(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return ci.create(ze(e.parentCreatedAt),ze(e.prevCreatedAt),ze(e.createdAt),ze(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return ui.create(ze(e.parentCreatedAt),ze(e.createdAt),ze(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,o])=>{t.set(i,ze(o))});const r=new Map;return Object.entries(e.attributes).forEach(([i,o])=>{r.set(i,o)}),To.create(ze(e.parentCreatedAt),Xo(e.from),Xo(e.to),t,e.content,r,ze(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,o])=>{t.set(i,ze(o))});const r=new Map;return Object.entries(e.attributes).forEach(([i,o])=>{r.set(i,o)}),_o.create(ze(e.parentCreatedAt),Xo(e.from),Xo(e.to),t,r,ze(e.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const e=n.body.value;return Xi.create(ze(e.parentCreatedAt),Rs(e.value),ze(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([r,i])=>{t.set(r,ze(i))}),wo.create(ze(e.parentCreatedAt),Zi(e.from),Zi(e.to),Dh(e.contents),e.splitLevel,t,ze(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove,i=new Map;return Object.entries(e.createdAtMapByActor).forEach(([o,p])=>{i.set(o,ze(p))}),r.length>0?ti.createTreeRemoveStyleOperation(ze(e.parentCreatedAt),Zi(e.from),Zi(e.to),r,ze(e.executedAt)):(Object.entries(e.attributes).forEach(([o,p])=>{t.set(o,p)}),ti.create(ze(e.parentCreatedAt),Zi(e.from),Zi(e.to),i,t,ze(e.executedAt)))}else throw new Tt(yt.Unimplemented,"unimplemented operation")}}function Lh(n){const e=[];for(const t of n){const r=tu(t);r&&e.push(r)}return e}function nu(n){const e=[];for(const t of n)e.push(ki.create({id:Xl(t.id),operations:Lh(t.operations),presenceChange:t.presenceChange?Ih(t.presenceChange):void 0,message:t.message}));return e}function Mh(n){return Wi.of(lt.fromString(n.serverSeq,!0),n.clientSeq)}function Bh(n){return Yo.create(n.documentKey,Mh(n.checkpoint),n.isRemoved,nu(n.changes),n.snapshot,ze(n.minSyncedTicket))}function ru(n){const e=new go;for(const r of n.nodes){const i=Ds(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new vn(ze(n.createdAt),e);return t.setMovedAt(ze(n.movedAt)),t.setRemovedAt(ze(n.removedAt)),t}function iu(n){const e=new vo;for(const r of n.nodes)e.insert(Ds(r.element));const t=new An(ze(n.createdAt),e);return t.setMovedAt(ze(n.movedAt)),t.setRemovedAt(ze(n.removedAt)),t}function jh(n){const e=Ot.of(Ot.valueFromBytes(Zl(n.type),n.value),ze(n.createdAt));return e.setMovedAt(ze(n.movedAt)),e.setRemovedAt(ze(n.removedAt)),e}function qh(n){const e=new Gi;let t=e.getHead();for(const i of n.nodes){const o=e.insertAfter(t,Rh(i));i.insPrevId&&o.setInsPrev(e.findNode(Ql(i.insPrevId))),t=o}const r=new Qn(e,ze(n.createdAt));return r.setMovedAt(ze(n.movedAt)),r.setRemovedAt(ze(n.removedAt)),r}function Uh(n){const e=xn.create(Go(n.type),xn.valueFromBytes(Go(n.type),n.value),ze(n.createdAt));return e.setMovedAt(ze(n.movedAt)),e.setRemovedAt(ze(n.removedAt)),e}function ou(n){const e=eu(n.nodes);return tr.create(e,ze(n.createdAt))}function Ds(n){if(n.body.case==="jsonObject")return ru(n.body.value);if(n.body.case==="jsonArray")return iu(n.body.value);if(n.body.case==="primitive")return jh(n.body.value);if(n.body.case==="text")return qh(n.body.value);if(n.body.case==="counter")return Uh(n.body.value);if(n.body.case==="tree")return ou(n.body.value);throw new Tt(yt.Unimplemented,"unimplemented element")}function Jh(n){if(!n)return{root:vn.create(xr),presences:new Map};const e=Ya.fromBinary(n);return{root:Ds(e.root),presences:Ph(e.presences)}}function su(n){if(!n)throw new Error("bytes is empty");const e=kr.fromBinary(n);return ru(e.body.value)}function au(n){return Is(n).toBinary()}function Fh(n){if(!n)throw new Error("bytes is empty");const e=kr.fromBinary(n);return iu(e.body.value)}function $h(n){return Wl(n).toBinary()}function Vh(n){if(!n)throw new Error("bytes is empty");const e=kr.fromBinary(n);return ou(e.body.value)}function zh(n){return Gl(n).toBinary()}function lu(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Cs(n){return lu(n)}function uu(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Ls(n){return uu(n)}function Kh(n){const e=Jo.fromBinary(n);return Xl(e)}function Yh(n){const e=ms.fromBinary(n);return tu(e)}const Mt={fromPresence:Ps,toChangePack:xh,fromChangePack:Bh,fromChanges:nu,objectToBytes:au,bytesToObject:su,bytesToSnapshot:Jh,bytesToHex:lu,hexToBytes:uu,toHexString:Cs,toUint8Array:Ls,toOperation:Yl,toChangeID:Vl,PbChangeID:Jo,bytesToChangeID:Kh,bytesToOperation:Yh};function cu(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class Hh{constructor(e,t,r,i){_(this,"reconnectStreamDelay"),_(this,"doc"),_(this,"docID"),_(this,"syncMode"),_(this,"remoteChangeEventReceived"),_(this,"watchStream"),_(this,"watchLoopTimerID"),_(this,"watchAbortController"),this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===ns.RealtimeSyncOff?!1:this.syncMode!==ns.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Ms=()=>{};class Wh{constructor(e){_(this,"finalized",!1),_(this,"observers",[]),_(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;e||we.fatal("missing observer"),this.finalized&&we.fatal("observable is finalized due to previous error"),typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ms),i.error===void 0&&(i.error=Ms),i.complete===void 0&&(i.complete=Ms);const o=cu(),p=this.unsubscribeOne.bind(this,o);if(this.observers.push({subscriptionID:o,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(O){we.warn(O)}return p}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){we.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function Gh(n){const e=new Wh(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Qi{constructor(e,t,r,i){_(this,"id"),_(this,"delimiter"),_(this,"message"),_(this,"root"),_(this,"operations"),_(this,"presenceChange"),_(this,"previousPresence"),_(this,"reversePresenceKeys"),this.id=e,this.delimiter=Es,this.root=t,this.operations=[],this.previousPresence=Xn(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new Qi(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerElementHasRemovedNodes(e){this.root.registerElementHasRemovedNodes(e)}getChange(){return ki.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class No{constructor(e){_(this,"rootObject"),_(this,"elementPairMapByCreatedAt"),_(this,"removedElementSetByCreatedAt"),_(this,"elementHasRemovedNodesSetByCreatedAt"),this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.removedElementSetByCreatedAt=new Set,this.elementHasRemovedNodesSetByCreatedAt=new Set,this.registerElement(e,void 0)}static create(){return new No(vn.create(xr))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),o=t.parent.subPathOf(i);o===void 0&&we.fatal(`cant find the given element: ${i.toIDString()}`),r.unshift(o),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof li&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let t=0;const r=i=>{const o=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(o),this.removedElementSetByCreatedAt.delete(o),t++};return r(e),e instanceof li&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){this.removedElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerElementHasRemovedNodes(e){this.elementHasRemovedNodesSetByCreatedAt.add(e.getCreatedAt().toIDString())}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getRemovedElementSetSize(){return this.removedElementSetByCreatedAt.size}getObject(){return this.rootObject}getGarbageLen(){let e=0;const t=new Set;for(const r of this.removedElementSetByCreatedAt){t.add(r);const i=this.elementPairMapByCreatedAt.get(r);i.element instanceof li&&i.element.getDescendants(o=>(t.add(o.getCreatedAt().toIDString()),!1))}e+=t.size;for(const r of this.elementHasRemovedNodesSetByCreatedAt){const o=this.elementPairMapByCreatedAt.get(r).element;e+=o.getRemovedNodesLen()}return e}deepcopy(){return new No(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.removedElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r);i.element.getRemovedAt()&&e.compare(i.element.getRemovedAt())>=0&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const r of this.elementHasRemovedNodesSetByCreatedAt){const o=this.elementPairMapByCreatedAt.get(r).element,p=o.purgeRemovedNodesBefore(e);o.getRemovedNodesLen()===0&&this.elementHasRemovedNodesSetByCreatedAt.delete(o.getCreatedAt().toIDString()),t+=p}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function fu(n,e){const t=new Ao(n);return new Proxy(e,t.getHandlers())}class Ao{constructor(e){_(this,"context"),_(this,"handlers"),this.context=e,this.handlers={set:(t,r,i)=>(we.isEnabled(Nn.Trivial)&&we.trivial(`obj[${r}]=${JSON.stringify(i)}`),Ao.setInternal(e,t,r,i),!0),get:(t,r)=>(we.isEnabled(Nn.Trivial)&&we.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():xi(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(we.isEnabled(Nn.Trivial)&&we.trivial(`obj[${r}]`),Ao.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new Tt(yt.InvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),p=Zo(e,i,o),O=t.set(r,p,o);e.registerElement(p,t),O&&e.registerRemovedElement(O),e.push(Ai.create(r,p.deepcopy(),t.getCreatedAt(),o))}static buildObjectMembers(e,t){const r={};for(const[i,o]of Object.entries(t)){if(i.includes("."))throw new Tt(yt.InvalidObjectKey,"key must not contain the '.'.");const p=e.issueTimeTicket(),O=Zo(e,o,p);r[i]=O}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),o=t.deleteByKey(r,i);!o||(e.push(ui.create(t.getCreatedAt(),o.getCreatedAt(),i)),e.registerRemovedElement(o))}getHandlers(){return this.handlers}}function Xh(n,e){const t=new It(n,e);return new Proxy(e,t.getHandlers())}function Zh(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function Qh(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class It{constructor(e,t){_(this,"context"),_(this,"handlers"),_(this,"array"),this.context=e,this.array=t,this.handlers={get:(r,i,o)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?p=>{const O=r.getByID(p);if(!(!O||O.isRemoved()))return di(e,O)}:i==="getElementByIndex"?p=>{const O=r.get(p);return di(e,O)}:i==="getLast"?()=>di(e,r.getLast()):i==="deleteByID"?p=>{const O=It.deleteInternalByID(e,r,p);return di(e,O)}:i==="insertAfter"?(p,O)=>{const D=It.insertAfterInternal(e,r,p,O);return di(e,D)}:i==="insertBefore"?(p,O)=>{const D=It.insertBeforeInternal(e,r,p,O);return di(e,D)}:i==="moveBefore"?(p,O)=>{It.moveBeforeInternal(e,r,p,O)}:i==="moveAfter"?(p,O)=>{It.moveAfterInternal(e,r,p,O)}:i==="moveFront"?p=>{It.moveFrontInternal(e,r,p)}:i==="moveLast"?p=>{It.moveLastInternal(e,r,p)}:Zh(i)?xi(e,r.get(Number(i))):i==="push"?p=>It.pushInternal(e,r,p):i==="splice"?(p,O,...D)=>It.splice(e,r,p,O,...D):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?It.iteratorInternal.bind(this,e,r):i==="includes"?(p,O)=>It.includes(e,r,p,O):i==="indexOf"?(p,O)=>It.indexOf(e,r,p,O):i==="lastIndexOf"?(p,O)=>It.lastIndexOf(e,r,p,O):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>It.toTestString(r):typeof i=="string"&&Qh(i)?(...p)=>{const O=Array.from(r).map(D=>xi(e,D));return Array.prototype[i].apply(O,p)}:Reflect.get(r,i,o),deleteProperty:(r,i)=>(we.isEnabled(Nn.Trivial)&&we.trivial(`array[${i}]`),It.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield di(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const o=e.issueTimeTicket(),p=Zo(e,i,o);r.push(p)}return r}static pushInternal(e,t,r){return It.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const o=e.issueTimeTicket(),p=t.getPrevCreatedAt(r);t.moveAfter(p,i,o),e.push(ci.create(t.getCreatedAt(),p,i,o))}static moveAfterInternal(e,t,r,i){const o=e.issueTimeTicket();t.moveAfter(r,i,o),e.push(ci.create(t.getCreatedAt(),r,i,o))}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),o=t.getHead();t.moveAfter(o.getCreatedAt(),r,i),e.push(ci.create(t.getCreatedAt(),o.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),o=t.getLastCreatedAt();t.moveAfter(o,r,i),e.push(ci.create(t.getCreatedAt(),o,r,i))}static insertAfterInternal(e,t,r,i){const o=e.issueTimeTicket(),p=Zo(e,i,o);return t.insertAfter(r,p),e.registerElement(p,t),e.push(yo.create(t.getCreatedAt(),r,p.deepcopy(),o)),p}static insertBeforeInternal(e,t,r,i){return It.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),o=t.deleteByIndex(r,i);if(!!o)return e.push(ui.create(t.getCreatedAt(),o.getCreatedAt(),i)),e.registerRemovedElement(o),o}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),o=t.delete(r,i);return e.push(ui.create(t.getCreatedAt(),o.getCreatedAt(),i)),e.registerRemovedElement(o),o}static splice(e,t,r,i,...o){const p=t.length,O=r>=0?Math.min(r,p):Math.max(p+r,0),D=i===void 0?p:i<0?O:Math.min(O+i,p),M=[];for(let G=O;G<D;G++){const he=It.deleteInternalByIndex(e,t,O);if(he){const ie=he.deepcopy();ie.setRemovedAt(),M.push(xi(e,ie))}}if(o){let G=O===0?t.getHead().getID():t.get(O-1).getID();for(const he of o)G=It.insertAfterInternal(e,t,G,he).getID()}return M}static includes(e,t,r,i){var o;const p=t.length,O=i===void 0?0:i<0?Math.max(i+p,0):i;if(O>=p)return!1;if(Ot.isSupport(r))return Array.from(t).map(M=>xi(e,M)).includes(r,O);for(let D=O;D<p;D++)if(((o=t.get(D))==null?void 0:o.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var o;const p=t.length,O=i===void 0?0:i<0?Math.max(i+p,0):i;if(O>=p)return-1;if(Ot.isSupport(r))return Array.from(t).map(M=>xi(e,M)).indexOf(r,O);for(let D=O;D<p;D++)if(((o=t.get(D))==null?void 0:o.getID())===r.getID())return D;return-1}static lastIndexOf(e,t,r,i){var o;const p=t.length,O=i===void 0||i>=p?p-1:i<0?i+p:i;if(O<0)return-1;if(Ot.isSupport(r))return Array.from(t).map(M=>xi(e,M)).lastIndexOf(r,O);for(let D=O;D>0;D--)if(((o=t.get(D))==null?void 0:o.getID())===r.getID())return D;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class ko{constructor(e,t){_(this,"context"),_(this,"text"),this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}if(e>t){we.fatal("from should be less than or equal to to");return}const o=this.text.indexRangeToPosRange(e,t);we.isEnabled(Nn.Debug)&&we.debug(`EDIT: f:${e}->${o[0].toTestString()}, t:${t}->${o[1].toTestString()} c:${r}`);const p=i?Ki(i):void 0,O=this.context.issueTimeTicket(),[D,,M]=this.text.edit(o,r,O,p);return this.context.push(new To(this.text.getCreatedAt(),o[0],o[1],D,r,p?new Map(Object.entries(p)):new Map,O)),o[0].equals(o[1])||this.context.registerElementHasRemovedNodes(this.text),this.text.findIndexesFromRange(M)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)return we.fatal("it is not initialized yet"),!1;if(e>t)return we.fatal("from should be less than or equal to to"),!1;const i=this.text.indexRangeToPosRange(e,t);we.isEnabled(Nn.Debug)&&we.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const o=Ki(r),p=this.context.issueTimeTicket(),[O]=this.text.setStyle(i,o,p);return this.context.push(new _o(this.text.getCreatedAt(),i[0],i[1],O,new Map(Object.entries(o)),p)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([nr.fromStruct(e[0]),nr.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(we.fatal("it is not initialized yet"),""):this.text.toString()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class xo{constructor(e,t){_(this,"valueType"),_(this,"value"),_(this,"context"),_(this,"counter"),this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){we.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),r=Ot.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Xi.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function Bs(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===ei){hu(n);const{value:o}=n,p=kn.create(Ht.of(i,0),r,o);e.append(p)}else{const{children:o=[]}=n;let{attributes:p}=n,O;if(typeof p=="object"&&!Ml(p)){p=Ki(p),O=new Qr;for(const[M,G]of Object.entries(p))O.set(M,G,i)}const D=kn.create(Ht.of(i,0),r,void 0,O);e.append(D);for(const M of o)Bs(M,D,t)}}function ed(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===ei){const{value:o}=e;i=kn.create(Ht.of(r,0),t,o)}else if(e){const{children:o=[]}=e;let{attributes:p}=e,O;if(typeof p=="object"&&!Ml(p)){p=Ki(p),O=new Qr;for(const[D,M]of Object.entries(p))O.set(D,M,r)}i=kn.create(Ht.of(n.issueTimeTicket(),0),t,void 0,O);for(const D of o)Bs(D,i,n)}return i}function hu(n){if(!n.value.length)throw new Error("text node cannot have empty value");return!0}function du(n){if(!n.length)return!0;if(n[0].type===ei)for(const t of n){const{type:r}=t;if(r!==ei)throw new Error("element node and text node cannot be passed together");hu(t)}else for(const t of n){const{type:r}=t;if(r===ei)throw new Error("element node and text node cannot be passed together")}return!0}class Io{constructor(e){_(this,"initialRoot"),_(this,"context"),_(this,"tree"),this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return kn.create(Ht.of(e.issueTimeTicket(),0),rh);const t=kn.create(Ht.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Bs(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[r,i]=this.tree.pathToPosRange(e),o=this.context.issueTimeTicket(),p=t?Ki(t):void 0,[O]=this.tree.style([r,i],p,o,void 0);this.context.push(ti.create(this.tree.getCreatedAt(),r,i,O,p?new Map(Object.entries(p)):new Map,o))}style(e,t,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const i=this.tree.findPos(e),o=this.tree.findPos(t),p=this.context.issueTimeTicket(),O=r?Ki(r):void 0,[D]=this.tree.style([i,o],O,p,void 0);this.context.push(ti.create(this.tree.getCreatedAt(),i,o,D,O?new Map(Object.entries(O)):new Map,p))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const i=this.tree.findPos(e),o=this.tree.findPos(t),p=this.context.issueTimeTicket();this.tree.removeStyle([i,o],r,p),this.context.push(ti.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,o,r,p))}editInternal(e,t,r,i=0){var o;if(r.length!==0&&r[0]&&(du(r),r[0].type!==ei))for(const M of r){const{children:G=[]}=M;du(G)}const p=this.context.getLastTimeTicket();let O=new Array;if(((o=r[0])==null?void 0:o.type)===ei){let M="";for(const G of r){const{value:he}=G;M+=he}O.push(kn.create(Ht.of(this.context.issueTimeTicket(),0),ei,M))}else O=r.map(M=>M&&ed(this.context,M)).filter(M=>M);const[,D]=this.tree.edit([e,t],O.length?O.map(M=>M==null?void 0:M.deepcopy()):void 0,i,p,()=>this.context.issueTimeTicket());return this.context.push(wo.create(this.tree.getCreatedAt(),e,t,O.length?O:void 0,i,D,p)),e.equals(t)||this.context.registerElementHasRemovedNodes(this.tree),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const o=this.tree.pathToPos(e),p=this.tree.pathToPos(t);return this.editInternal(o,p,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const o=this.tree.pathToPos(e),p=this.tree.pathToPos(t);return this.editInternal(o,p,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),p=this.tree.findPos(t);return this.editInternal(o,p,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),p=this.tree.findPos(t);return this.editInternal(o,p,r,i)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){we.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){we.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){we.fatal("it is not initialized yet");return}const t=[er.fromStruct(e[0]),er.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree){we.fatal("it is not initialized yet");return}const t=[er.fromStruct(e[0]),er.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function pu(n,e){return fu(n,e)}function di(n,e){if(e){if(e instanceof Ot)return e;if(e instanceof vn)return fu(n,e);if(e instanceof An)return Xh(n,e);if(e instanceof Qn)return new ko(n,e);if(e instanceof xn){const t=new xo(Pr.IntegerCnt,0);return t.initialize(n,e),t}else if(e instanceof tr){const t=new Io;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function xi(n,e){const t=di(n,e);return t instanceof Ot?t.getValue():t}function Zo(n,e,t){let r;if(Ot.isSupport(e))r=Ot.of(e,t);else if(Array.isArray(e))r=An.create(t,It.buildArrayElements(n,e));else if(typeof e=="object")e instanceof ko?(r=Qn.create(Gi.create(),t),e.initialize(n,r)):e instanceof xo?(r=xn.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof Io?(r=tr.create(e.buildRoot(n),t),e.initialize(n,r)):r=vn.create(t,Ao.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const gu=50;class td{constructor(){_(this,"undoStack",[]),_(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=gu&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=gu&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const mu="yorkie-devtools-panel",vu="yorkie-devtools-sdk";let eo="disconnected";const yu=new Map,js=new Map;function Qo(n,e){!((e==null?void 0:e.force)||eo!=="disconnected")||window.postMessage({source:vu,...n},"*")}function nd(n){if(!n.isEnableDevtools()||typeof window>"u"||yu.has(n.getKey()))return;js.set(n.getKey(),[]);const e=n.subscribe("all",t=>{t.some(r=>r.type!==dn.StatusChanged&&r.type!==dn.Snapshot&&r.type!==dn.LocalChange&&r.type!==dn.RemoteChange&&r.type!==dn.Initialized&&r.type!==dn.Watched&&r.type!==dn.Unwatched&&r.type!==dn.PresenceChanged)||(js.get(n.getKey()).push(t),eo==="synced"&&Qo({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});yu.set(n.getKey(),[e]),Qo({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var r;if(((r=t.data)==null?void 0:r.source)!==mu)return;switch(t.data.msg){case"devtools::connect":if(eo!=="disconnected")break;eo="connected",Qo({msg:"doc::available",docKey:n.getKey()}),we.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":eo="disconnected",we.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":eo="synced",Qo({msg:"doc::sync::full",docKey:n.getKey(),events:js.get(n.getKey())}),we.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var pi=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(pi||{}),dn=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n))(dn||{}),es=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(es||{}),ts=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(ts||{});class qs{constructor(e,t){_(this,"key"),_(this,"status"),_(this,"opts"),_(this,"changeID"),_(this,"checkpoint"),_(this,"localChanges"),_(this,"root"),_(this,"clone"),_(this,"eventStream"),_(this,"eventStreamObserver"),_(this,"onlineClients"),_(this,"presences"),_(this,"history"),_(this,"internalHistory"),_(this,"isUpdating"),this.opts=t||{},this.key=e,this.status="detached",this.root=No.create(),this.changeID=fh,this.checkpoint=hh,this.localChanges=[],this.eventStream=Gh(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new td,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},nd(this)}update(e,t){if(this.getStatus()==="removed")throw new Tt(yt.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=Qi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},t);try{const o=pu(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(o,new _s(i,this.clone.presences.get(r)))}catch(o){throw this.clone=void 0,we.error(o),o}finally{this.isUpdating=!1}if(i.hasChange()){we.isEnabled(Nn.Trivial)&&we.trivial(`trying to update a local change: ${this.toJSON()}`);const o=i.getChange(),{opInfos:p,reverseOps:O}=o.execute(this.root,this.presences,Et.Local),D=i.getReversePresence();D&&O.push({type:"presence",value:D}),this.localChanges.push(o),O.length>0&&this.internalHistory.pushUndo(O),p.length>0&&this.internalHistory.clearRedo(),this.changeID=o.getID();const M=[];p.length>0&&M.push({type:"local-change",source:Et.Local,value:{message:o.getMessage()||"",operations:p,actor:r},rawChange:this.isEnableDevtools()?o.toStruct():void 0}),o.hasPresenceChange()&&M.push({type:"presence-changed",source:Et.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(M),we.isEnabled(Nn.Trivial)&&we.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const O=t;return this.eventStream.subscribe(D=>{for(const M of D)M.type!=="initialized"&&M.type!=="watched"&&M.type!=="unwatched"&&M.type!=="presence-changed"||O(M)},r,i)}if(e==="my-presence"){const O=t;return this.eventStream.subscribe(D=>{for(const M of D)M.type!=="initialized"&&M.type!=="watched"&&M.type!=="unwatched"&&M.type!=="presence-changed"||M.type!=="initialized"&&M.value.clientID!==this.changeID.getActorID()||O(M)},r,i)}if(e==="others"){const O=t;return this.eventStream.subscribe(D=>{for(const M of D)M.type!=="watched"&&M.type!=="unwatched"&&M.type!=="presence-changed"||M.value.clientID!==this.changeID.getActorID()&&O(M)},r,i)}if(e==="connection"){const O=t;return this.eventStream.subscribe(D=>{for(const M of D)M.type==="connection-changed"&&O(M)},r,i)}if(e==="sync"){const O=t;return this.eventStream.subscribe(D=>{for(const M of D)M.type==="sync-status-changed"&&O(M)},r,i)}if(e==="all"){const O=t;return this.eventStream.subscribe(O,r,i)}const o=e,p=t;return this.eventStream.subscribe(O=>{for(const D of O){if(D.type!=="snapshot"&&D.type!=="local-change"&&D.type!=="remote-change")continue;if(D.type==="snapshot"){o==="$"&&p(D);continue}const M=[];for(const G of D.value.operations)this.isSameElementOrChildOf(G.path,o)&&M.push(G);M.length&&p({...D,value:{...D.value,operations:M}})}},r,i)}if(typeof e=="function"){const o=e,p=t,O=r;return this.eventStream.subscribe(D=>{for(const M of D)M.type!=="snapshot"&&M.type!=="local-change"&&M.type!=="remote-change"||o(M)},p,O)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((o,p)=>o===r[p])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),Et.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),we.isEnabled(Nn.Trivial)&&we.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Xn(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Yo.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Qi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return pu(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t){const{root:r,presences:i}=Mt.bytesToSnapshot(t);this.root=new No(r),this.presences=i,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:Et.Remote,value:{snapshot:this.isEnableDevtools()?Mt.bytesToHex(t):void 0,serverSeq:e.toString()}}])}applyChanges(e,t){we.isEnabled(Nn.Debug)&&we.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getRemovedElementSetSize()}`),we.isEnabled(Nn.Trivial)&&we.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);we.isEnabled(Nn.Debug)&&we.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getRemovedElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const p=e.getPresenceChange();switch(p.type){case ai.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:p.presence}}:{type:"watched",source:Et.Remote,value:{clientID:i,presence:p.presence}});break;case ai.Clear:r.push({type:"unwatched",source:Et.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:o}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),o.length>0){const p=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===Et.Remote?{type:"remote-change",source:t,value:{actor:i,message:e.getMessage()||"",operations:o},rawChange:p}:{type:"local-change",source:t,value:{actor:i,message:e.getMessage()||"",operations:o},rawChange:p})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:Et.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===Uo.DOCUMENT_WATCHED)this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:Et.Remote,value:{clientID:r,presence:this.getPresence(r)}});else if(t===Uo.DOCUMENT_UNWATCHED){const o=this.getPresence(r);this.removeOnlineClient(r),o&&i.push({type:"unwatched",source:Et.Remote,value:{clientID:r,presence:o}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor($o),this.publish([{source:e==="removed"?Et.Remote:Et.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r}=e.value;if(!t)return;this.applySnapshot(lt.fromString(r),Mt.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=ki.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new Tt(yt.InvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Xn(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Xn(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Xn(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Xn(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Xn(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=Qi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const M of e){if(!(M instanceof Zn)){new _s(t,Xn(this.clone.presences.get(this.changeID.getActorID()))).set(M.value,{addToHistory:!0});continue}const G=t.issueTimeTicket();M.setExecutedAt(G),t.push(M)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Et.UndoRedo);const{opInfos:i,reverseOps:o}=r.execute(this.root,this.presences,Et.UndoRedo),p=t.getReversePresence();if(p&&o.push({type:"presence",value:p}),o.length>0&&this.internalHistory.pushRedo(o),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const O=this.changeID.getActorID(),D=[];i.length>0&&D.push({type:"local-change",source:Et.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:O},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&D.push({type:"presence-changed",source:Et.UndoRedo,value:{clientID:O,presence:this.getPresence(O)}}),this.publish(D)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=Qi.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const M of e){if(!(M instanceof Zn)){new _s(t,Xn(this.clone.presences.get(this.changeID.getActorID()))).set(M.value,{addToHistory:!0});continue}const G=t.issueTimeTicket();M.setExecutedAt(G),t.push(M)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,Et.UndoRedo);const{opInfos:i,reverseOps:o}=r.execute(this.root,this.presences,Et.UndoRedo),p=t.getReversePresence();if(p&&o.push({type:"presence",value:p}),o.length>0&&this.internalHistory.pushUndo(o),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const O=this.changeID.getActorID(),D=[];i.length>0&&D.push({type:"local-change",source:Et.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:O},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&D.push({type:"presence-changed",source:Et.UndoRedo,value:{clientID:O,presence:this.getPresence(O)}}),this.publish(D)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function rd(n,e){return t=>async r=>(n&&r.header.set("x-api-key",n),e&&r.header.set("authorization",e),await t(r))}const bu={name:"yorkie-js-sdk",version:"0.4.19",description:"Yorkie JS SDK",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts",files:["dist"],scripts:{build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:examples":"npm run build --workspace examples","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"npm run build"},engines:{node:">=18.0.0",npm:">=7.1.0"},repository:{type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},author:{name:"hackerwins",email:"susukang98@gmail.com"},license:"Apache-2.0",bugs:{url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},homepage:"https://github.com/yorkie-team/yorkie-js-sdk#readme",devDependencies:{"@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.2.0","@types/google-protobuf":"^3.15.5","@types/jsdom":"^21.1.3","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",jsdom:"^22.1.0",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^4.7.4","typescript-transform-paths":"^3.3.1",vite:"^4.4.9","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5","vitest-environment-custom-jsdom":"file:test/vitest/env"},dependencies:{"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.2.0","@connectrpc/connect-web":"^1.2.0",long:"^5.2.0"},husky:{hooks:{"pre-commit":"npm run lint"}},workspaces:["examples/*"]};function id(){return n=>async e=>(e.header.set("x-yorkie-user-agent",bu.name+"/"+bu.version),await n(e))}var ns=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(ns||{}),Tu=(n=>(n.Deactivated="deactivated",n.Activated="activated",n))(Tu||{});const rs={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class Us{constructor(e,t){_(this,"id"),_(this,"key"),_(this,"status"),_(this,"attachmentMap"),_(this,"apiKey"),_(this,"syncLoopDuration"),_(this,"reconnectStreamDelay"),_(this,"retrySyncLoopDelay"),_(this,"rpcClient"),t=t||rs,this.key=t.key?t.key:cu(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.syncLoopDuration=t.syncLoopDuration||rs.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||rs.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||rs.retrySyncLoopDelay,this.rpcClient=fc(Gf,Cc({baseUrl:e,interceptors:[rd(t.apiKey,t.token),id()]}))}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),we.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw we.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){if(this.status==="deactivated")return Promise.resolve();for(const[e]of this.attachmentMap)this.detachInternal(e);return this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.status="deactivated",we.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw we.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,t={}){var i;if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==pi.Detached)throw new Tt(yt.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((o,p)=>p.set(t.initialPresence||{}));const r=(i=t.syncMode)!=null?i:"realtime";return this.rpcClient.attachDocument({clientId:this.id,changePack:Mt.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async o=>{const p=Mt.fromChangePack(o.changePack);return e.applyChangePack(p),e.getStatus()===pi.Removed||(e.applyStatus(pi.Attached),this.attachmentMap.set(e.getKey(),new Hh(this.reconnectStreamDelay,e,o.documentId,r)),r!=="manual"&&await this.runWatchLoop(e.getKey()),we.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(o=>{throw we.error(`[AD] c:"${this.getKey()}" err :`,o),o})}detach(e,t={}){var i;if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new Tt(yt.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((o,p)=>p.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:Mt.toChangePack(e.createChangePack()),removeIfNotAttached:(i=t.removeIfNotAttached)!=null?i:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(o=>{const p=Mt.fromChangePack(o.changePack);return e.applyChangePack(p),e.getStatus()!==pi.Removed&&e.applyStatus(pi.Detached),this.detachInternal(e.getKey()),we.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(o=>{throw we.error(`[DD] c:"${this.getKey()}" err :`,o),o})}async changeSyncMode(e,t){if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new Tt(yt.DocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);const t=[];if(e){const r=this.attachmentMap.get(e.getKey());if(!r)throw new Tt(yt.DocumentNotAttached,`${e.getKey()} is not attached`);t.push(this.syncInternal(r,"realtime"))}else this.attachmentMap.forEach(r=>{t.push(this.syncInternal(r,r.syncMode))});return Promise.all(t)}remove(e){if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Tt(yt.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=Mt.toChangePack(e.createChangePack());return r.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const o=Mt.fromChangePack(i.changePack);e.applyChangePack(o),this.detachInternal(e.getKey()),we.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(i=>{throw we.error(`[RD] c:"${this.getKey()}" err :`,i),i})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){we.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(r=>{we.error(`[SL] c:"${this.getKey()}" sync failed:`,r),setTimeout(e,this.retrySyncLoopDelay)})};we.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new Tt(yt.DocumentNotAttached,`${e} is not attached`);return t.runWatchLoop(r=>{if(!this.isActive())return Promise.reject(new Tt(yt.ClientNotActive,`${this.key} is not active`));const i=new AbortController,o=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:dn.ConnectionChanged,value:es.Connected}]),we.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((p,O)=>{(async()=>{try{for await(const M of o)this.handleWatchDocumentsResponse(t,M),M.body.case==="initialization"&&p([o,i])}catch(M){t.doc.resetOnlineClients(),t.doc.publish([{type:dn.Initialized,source:Et.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:dn.ConnectionChanged,value:es.Disconnected}]),we.debug(`[WD] c:"${this.getKey()}" unwatches`),M instanceof qt&&M.code!=x.Canceled&&r(),O(M)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Uo.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),we.debug(`[WD] c:"${this.getKey()}" unwatches`),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:r,docID:i}=e,o=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:Mt.toChangePack(o),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(p=>{const O=Mt.fromChangePack(p.changePack);if(O.hasChanges()&&e.syncMode==="realtime-pushonly")return r;r.applyChangePack(O),e.doc.publish([{type:dn.SyncStatusChanged,value:ts.Synced}]),r.getStatus()===pi.Removed&&this.detachInternal(r.getKey());const D=r.getKey(),M=O.getChangeSize();return we.info(`[PP] c:"${this.getKey()}" sync d:"${D}", push:${o.getChangeSize()} pull:${M} cp:${O.getCheckpoint().toTestString()}`),r}).catch(p=>{throw r.publish([{type:dn.SyncStatusChanged,value:ts.SyncFailed}]),we.error(`[PP] c:"${this.getKey()}" err :`,p),p})}}const od=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),sd={Client:Us,Document:qs,Primitive:Ot,Text:ko,Counter:xo,Tree:Io,IntType:Pr.IntegerCnt,LongType:Pr.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:Us,Document:qs,Primitive:Ot,Text:ko,Counter:xo,Tree:Io,IntType:Pr.IntegerCnt,LongType:Pr.LongCnt}),$.Change=ki,$.Client=Us,$.ClientStatus=Tu,$.Counter=xo,$.Devtools=od,$.DocEventType=dn,$.Document=qs,$.DocumentStatus=pi,$.DocumentSyncStatus=ts,$.EventSourceDevPanel=mu,$.EventSourceSDK=vu,$.OpSource=Et,$.Primitive=Ot,$.StreamConnectionStatus=es,$.SyncMode=ns,$.Text=ko,$.TimeTicket=hn,$.Tree=Io,$.converter=Mt,$.default=sd,$.setLogLevel=th,Object.defineProperties($,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(yi,yi.exports);const Js=$s(yi.exports);var Au={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(Fe,de){(function(C,A){Fe.exports=A()})(typeof self<"u"?self:Nu,function(){return function($){var C={};function A(_){if(C[_])return C[_].exports;var x=C[_]={i:_,l:!1,exports:{}};return $[_].call(x.exports,x,x.exports,A),x.l=!0,x.exports}return A.m=$,A.c=C,A.d=function(_,x,w){A.o(_,x)||Object.defineProperty(_,x,{configurable:!1,enumerable:!0,get:w})},A.n=function(_){var x=_&&_.__esModule?function(){return _.default}:function(){return _};return A.d(x,"a",x),x},A.o=function(_,x){return Object.prototype.hasOwnProperty.call(_,x)},A.p="",A(A.s=109)}([function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(17),x=A(18),w=A(19),T=A(45),S=A(46),b=A(47),h=A(48),u=A(49),l=A(12),d=A(32),g=A(33),m=A(31),f=A(1),a={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:_.default,Format:x.default,Leaf:w.default,Embed:h.default,Scroll:T.default,Block:b.default,Inline:S.default,Text:u.default,Attributor:{Attribute:l.default,Class:d.default,Style:g.default,Store:m.default}};C.default=a},function($,C,A){var _=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,a){f.__proto__=a}||function(f,a){for(var c in a)a.hasOwnProperty(c)&&(f[c]=a[c])};return function(f,a){m(f,a);function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=function(m){_(f,m);function f(a){var c=this;return a="[Parchment] "+a,c=m.call(this,a)||this,c.message=a,c.name=c.constructor.name,c}return f}(Error);C.ParchmentError=x;var w={},T={},S={},b={};C.DATA_KEY="__blot";var h;(function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"})(h=C.Scope||(C.Scope={}));function u(m,f){var a=d(m);if(a==null)throw new x("Unable to create "+m+" blot");var c=a,s=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:c.create(f);return new c(s,f)}C.create=u;function l(m,f){return f===void 0&&(f=!1),m==null?null:m[C.DATA_KEY]!=null?m[C.DATA_KEY].blot:f?l(m.parentNode,f):null}C.find=l;function d(m,f){f===void 0&&(f=h.ANY);var a;if(typeof m=="string")a=b[m]||w[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)a=b.text;else if(typeof m=="number")m&h.LEVEL&h.BLOCK?a=b.block:m&h.LEVEL&h.INLINE&&(a=b.inline);else if(m instanceof HTMLElement){var c=(m.getAttribute("class")||"").split(/\s+/);for(var s in c)if(a=T[c[s]],a)break;a=a||S[m.tagName]}return a==null?null:f&h.LEVEL&a.scope&&f&h.TYPE&a.scope?a:null}C.query=d;function g(){for(var m=[],f=0;f<arguments.length;f++)m[f]=arguments[f];if(m.length>1)return m.map(function(s){return g(s)});var a=m[0];if(typeof a.blotName!="string"&&typeof a.attrName!="string")throw new x("Invalid definition");if(a.blotName==="abstract")throw new x("Cannot register abstract class");if(b[a.blotName||a.attrName]=a,typeof a.keyName=="string")w[a.keyName]=a;else if(a.className!=null&&(T[a.className]=a),a.tagName!=null){Array.isArray(a.tagName)?a.tagName=a.tagName.map(function(s){return s.toUpperCase()}):a.tagName=a.tagName.toUpperCase();var c=Array.isArray(a.tagName)?a.tagName:[a.tagName];c.forEach(function(s){(S[s]==null||a.className==null)&&(S[s]=a)})}return a}C.register=g},function($,C,A){var _=A(51),x=A(11),w=A(3),T=A(20),S=String.fromCharCode(0),b=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};b.prototype.insert=function(h,u){var l={};return h.length===0?this:(l.insert=h,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(l.attributes=u),this.push(l))},b.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},b.prototype.retain=function(h,u){if(h<=0)return this;var l={retain:h};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(l.attributes=u),this.push(l)},b.prototype.push=function(h){var u=this.ops.length,l=this.ops[u-1];if(h=w(!0,{},h),typeof l=="object"){if(typeof h.delete=="number"&&typeof l.delete=="number")return this.ops[u-1]={delete:l.delete+h.delete},this;if(typeof l.delete=="number"&&h.insert!=null&&(u-=1,l=this.ops[u-1],typeof l!="object"))return this.ops.unshift(h),this;if(x(h.attributes,l.attributes)){if(typeof h.insert=="string"&&typeof l.insert=="string")return this.ops[u-1]={insert:l.insert+h.insert},typeof h.attributes=="object"&&(this.ops[u-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof l.retain=="number")return this.ops[u-1]={retain:l.retain+h.retain},typeof h.attributes=="object"&&(this.ops[u-1].attributes=h.attributes),this}}return u===this.ops.length?this.ops.push(h):this.ops.splice(u,0,h),this},b.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},b.prototype.filter=function(h){return this.ops.filter(h)},b.prototype.forEach=function(h){this.ops.forEach(h)},b.prototype.map=function(h){return this.ops.map(h)},b.prototype.partition=function(h){var u=[],l=[];return this.forEach(function(d){var g=h(d)?u:l;g.push(d)}),[u,l]},b.prototype.reduce=function(h,u){return this.ops.reduce(h,u)},b.prototype.changeLength=function(){return this.reduce(function(h,u){return u.insert?h+T.length(u):u.delete?h-u.delete:h},0)},b.prototype.length=function(){return this.reduce(function(h,u){return h+T.length(u)},0)},b.prototype.slice=function(h,u){h=h||0,typeof u!="number"&&(u=1/0);for(var l=[],d=T.iterator(this.ops),g=0;g<u&&d.hasNext();){var m;g<h?m=d.next(h-g):(m=d.next(u-g),l.push(m)),g+=T.length(m)}return new b(l)},b.prototype.compose=function(h){var u=T.iterator(this.ops),l=T.iterator(h.ops),d=[],g=l.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var m=g.retain;u.peekType()==="insert"&&u.peekLength()<=m;)m-=u.peekLength(),d.push(u.next());g.retain-m>0&&l.next(g.retain-m)}for(var f=new b(d);u.hasNext()||l.hasNext();)if(l.peekType()==="insert")f.push(l.next());else if(u.peekType()==="delete")f.push(u.next());else{var a=Math.min(u.peekLength(),l.peekLength()),c=u.next(a),s=l.next(a);if(typeof s.retain=="number"){var v={};typeof c.retain=="number"?v.retain=a:v.insert=c.insert;var y=T.attributes.compose(c.attributes,s.attributes,typeof c.retain=="number");if(y&&(v.attributes=y),f.push(v),!l.hasNext()&&x(f.ops[f.ops.length-1],v)){var N=new b(u.rest());return f.concat(N).chop()}}else typeof s.delete=="number"&&typeof c.retain=="number"&&f.push(s)}return f.chop()},b.prototype.concat=function(h){var u=new b(this.ops.slice());return h.ops.length>0&&(u.push(h.ops[0]),u.ops=u.ops.concat(h.ops.slice(1))),u},b.prototype.diff=function(h,u){if(this.ops===h.ops)return new b;var l=[this,h].map(function(a){return a.map(function(c){if(c.insert!=null)return typeof c.insert=="string"?c.insert:S;var s=a===h?"on":"with";throw new Error("diff() called "+s+" non-document")}).join("")}),d=new b,g=_(l[0],l[1],u),m=T.iterator(this.ops),f=T.iterator(h.ops);return g.forEach(function(a){for(var c=a[1].length;c>0;){var s=0;switch(a[0]){case _.INSERT:s=Math.min(f.peekLength(),c),d.push(f.next(s));break;case _.DELETE:s=Math.min(c,m.peekLength()),m.next(s),d.delete(s);break;case _.EQUAL:s=Math.min(m.peekLength(),f.peekLength(),c);var v=m.next(s),y=f.next(s);x(v.insert,y.insert)?d.retain(s,T.attributes.diff(v.attributes,y.attributes)):d.push(y).delete(s);break}c-=s}}),d.chop()},b.prototype.eachLine=function(h,u){u=u||`
`;for(var l=T.iterator(this.ops),d=new b,g=0;l.hasNext();){if(l.peekType()!=="insert")return;var m=l.peek(),f=T.length(m)-l.peekLength(),a=typeof m.insert=="string"?m.insert.indexOf(u,f)-f:-1;if(a<0)d.push(l.next());else if(a>0)d.push(l.next(a));else{if(h(d,l.next(1).attributes||{},g)===!1)return;g+=1,d=new b}}d.length()>0&&h(d,{},g)},b.prototype.transform=function(h,u){if(u=!!u,typeof h=="number")return this.transformPosition(h,u);for(var l=T.iterator(this.ops),d=T.iterator(h.ops),g=new b;l.hasNext()||d.hasNext();)if(l.peekType()==="insert"&&(u||d.peekType()!=="insert"))g.retain(T.length(l.next()));else if(d.peekType()==="insert")g.push(d.next());else{var m=Math.min(l.peekLength(),d.peekLength()),f=l.next(m),a=d.next(m);if(f.delete)continue;a.delete?g.push(a):g.retain(m,T.attributes.transform(f.attributes,a.attributes,u))}return g.chop()},b.prototype.transformPosition=function(h,u){u=!!u;for(var l=T.iterator(this.ops),d=0;l.hasNext()&&d<=h;){var g=l.peekLength(),m=l.peekType();if(l.next(),m==="delete"){h-=Math.min(g,h-d);continue}else m==="insert"&&(d<h||!u)&&(h+=g);d+=g}return h},$.exports=b},function($,C){var A=Object.prototype.hasOwnProperty,_=Object.prototype.toString,x=Object.defineProperty,w=Object.getOwnPropertyDescriptor,T=function(l){return typeof Array.isArray=="function"?Array.isArray(l):_.call(l)==="[object Array]"},S=function(l){if(!l||_.call(l)!=="[object Object]")return!1;var d=A.call(l,"constructor"),g=l.constructor&&l.constructor.prototype&&A.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!d&&!g)return!1;var m;for(m in l);return typeof m>"u"||A.call(l,m)},b=function(l,d){x&&d.name==="__proto__"?x(l,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):l[d.name]=d.newValue},h=function(l,d){if(d==="__proto__")if(A.call(l,d)){if(w)return w(l,d).value}else return;return l[d]};$.exports=function u(){var l,d,g,m,f,a,c=arguments[0],s=1,v=arguments.length,y=!1;for(typeof c=="boolean"&&(y=c,c=arguments[1]||{},s=2),(c==null||typeof c!="object"&&typeof c!="function")&&(c={});s<v;++s)if(l=arguments[s],l!=null)for(d in l)g=h(c,d),m=h(l,d),c!==m&&(y&&m&&(S(m)||(f=T(m)))?(f?(f=!1,a=g&&T(g)?g:[]):a=g&&S(g)?g:{},b(c,{name:d,newValue:u(y,a,m)})):typeof m<"u"&&b(c,{name:d,newValue:m}));return c}},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BlockEmbed=C.bubbleFormats=void 0;var _=function(){function k(P,L){for(var B=0;B<L.length;B++){var q=L[B];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(P,q.key,q)}}return function(P,L,B){return L&&k(P.prototype,L),B&&k(P,B),P}}(),x=function k(P,L,B){P===null&&(P=Function.prototype);var q=Object.getOwnPropertyDescriptor(P,L);if(q===void 0){var V=Object.getPrototypeOf(P);return V===null?void 0:k(V,L,B)}else{if("value"in q)return q.value;var X=q.get;return X===void 0?void 0:X.call(B)}},w=A(3),T=c(w),S=A(2),b=c(S),h=A(0),u=c(h),l=A(16),d=c(l),g=A(6),m=c(g),f=A(7),a=c(f);function c(k){return k&&k.__esModule?k:{default:k}}function s(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function v(k,P){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:k}function y(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(k,P):k.__proto__=P)}var N=1,R=function(k){y(P,k);function P(){return s(this,P),v(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return _(P,[{key:"attach",value:function(){x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new b.default().insert(this.value(),(0,T.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(B,q){var V=u.default.query(B,u.default.Scope.BLOCK_ATTRIBUTE);V!=null&&this.attributes.attribute(V,q)}},{key:"formatAt",value:function(B,q,V,X){this.format(V,X)}},{key:"insertAt",value:function(B,q,V){if(typeof q=="string"&&q.endsWith(`
`)){var X=u.default.create(E.blotName);this.parent.insertBefore(X,B===0?this:this.next),X.insertAt(0,q.slice(0,-1))}else x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,B,q,V)}}]),P}(u.default.Embed);R.scope=u.default.Scope.BLOCK_BLOT;var E=function(k){y(P,k);function P(L){s(this,P);var B=v(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,L));return B.cache={},B}return _(P,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(u.default.Leaf).reduce(function(B,q){return q.length()===0?B:B.insert(q.value(),I(q))},new b.default).insert(`
`,I(this))),this.cache.delta}},{key:"deleteAt",value:function(B,q){x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"deleteAt",this).call(this,B,q),this.cache={}}},{key:"formatAt",value:function(B,q,V,X){q<=0||(u.default.query(V,u.default.Scope.BLOCK)?B+q===this.length()&&this.format(V,X):x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"formatAt",this).call(this,B,Math.min(q,this.length()-B-1),V,X),this.cache={})}},{key:"insertAt",value:function(B,q,V){if(V!=null)return x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,B,q,V);if(q.length!==0){var X=q.split(`
`),ue=X.shift();ue.length>0&&(B<this.length()-1||this.children.tail==null?x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,Math.min(B,this.length()-1),ue):this.children.tail.insertAt(this.children.tail.length(),ue),this.cache={});var Z=this;X.reduce(function(z,j){return Z=Z.split(z,!0),Z.insertAt(0,j),j.length},B+ue.length)}}},{key:"insertBefore",value:function(B,q){var V=this.children.head;x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,B,q),V instanceof d.default&&V.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"length",this).call(this)+N),this.cache.length}},{key:"moveChildren",value:function(B,q){x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"moveChildren",this).call(this,B,q),this.cache={}}},{key:"optimize",value:function(B){x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,B),this.cache={}}},{key:"path",value:function(B){return x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"path",this).call(this,B,!0)}},{key:"removeChild",value:function(B){x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"removeChild",this).call(this,B),this.cache={}}},{key:"split",value:function(B){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(q&&(B===0||B>=this.length()-N)){var V=this.clone();return B===0?(this.parent.insertBefore(V,this),this):(this.parent.insertBefore(V,this.next),V)}else{var X=x(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"split",this).call(this,B,q);return this.cache={},X}}}]),P}(u.default.Block);E.blotName="block",E.tagName="P",E.defaultChild="break",E.allowedChildren=[m.default,u.default.Embed,a.default];function I(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k==null||(typeof k.formats=="function"&&(P=(0,T.default)(P,k.formats())),k.parent==null||k.parent.blotName=="scroll"||k.parent.statics.scope!==k.statics.scope)?P:I(k.parent,P)}C.bubbleFormats=I,C.BlockEmbed=R,C.default=E},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.overload=C.expandConfig=void 0;var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},x=function(){function Z(z,j){var F=[],J=!0,Q=!1,H=void 0;try{for(var U=z[Symbol.iterator](),W;!(J=(W=U.next()).done)&&(F.push(W.value),!(j&&F.length===j));J=!0);}catch(ne){Q=!0,H=ne}finally{try{!J&&U.return&&U.return()}finally{if(Q)throw H}}return F}return function(z,j){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return Z(z,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function Z(z,j){for(var F=0;F<j.length;F++){var J=j[F];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(z,J.key,J)}}return function(z,j,F){return j&&Z(z.prototype,j),F&&Z(z,F),z}}();A(50);var T=A(2),S=I(T),b=A(14),h=I(b),u=A(8),l=I(u),d=A(9),g=I(d),m=A(0),f=I(m),a=A(15),c=I(a),s=A(3),v=I(s),y=A(10),N=I(y),R=A(34),E=I(R);function I(Z){return Z&&Z.__esModule?Z:{default:Z}}function k(Z,z,j){return z in Z?Object.defineProperty(Z,z,{value:j,enumerable:!0,configurable:!0,writable:!0}):Z[z]=j,Z}function P(Z,z){if(!(Z instanceof z))throw new TypeError("Cannot call a class as a function")}var L=(0,N.default)("quill"),B=function(){w(Z,null,[{key:"debug",value:function(j){j===!0&&(j="log"),N.default.level(j)}},{key:"find",value:function(j){return j.__quill||f.default.find(j)}},{key:"import",value:function(j){return this.imports[j]==null&&L.error("Cannot import "+j+". Are you sure it was registered?"),this.imports[j]}},{key:"register",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof j!="string"){var H=j.attrName||j.blotName;typeof H=="string"?this.register("formats/"+H,j,F):Object.keys(j).forEach(function(U){J.register(U,j[U],F)})}else this.imports[j]!=null&&!Q&&L.warn("Overwriting "+j+" with",F),this.imports[j]=F,(j.startsWith("blots/")||j.startsWith("formats/"))&&F.blotName!=="abstract"?f.default.register(F):j.startsWith("modules")&&typeof F.register=="function"&&F.register()}}]);function Z(z){var j=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(this,Z),this.options=q(z,F),this.container=this.options.container,this.container==null)return L.error("Invalid Quill container",z);this.options.debug&&Z.debug(this.options.debug);var J=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=f.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new c.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(H){H===l.default.events.TEXT_CHANGE&&j.root.classList.toggle("ql-blank",j.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(H,U){var W=j.selection.lastRange,ne=W&&W.length===0?W.index:void 0;V.call(j,function(){return j.editor.update(null,U,ne)},H)});var Q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+J+"<p><br></p></div>");this.setContents(Q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return w(Z,[{key:"addContainer",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof j=="string"){var J=j;j=document.createElement("div"),j.classList.add(J)}return this.container.insertBefore(j,F),j}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(j,F,J){var Q=this,H=X(j,F,J),U=x(H,4);return j=U[0],F=U[1],J=U[3],V.call(this,function(){return Q.editor.deleteText(j,F)},J,j,-1*F)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(j),this.container.classList.toggle("ql-disabled",!j)}},{key:"focus",value:function(){var j=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=j,this.scrollIntoView()}},{key:"format",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.default.sources.API;return V.call(this,function(){var H=J.getSelection(!0),U=new S.default;if(H==null)return U;if(f.default.query(j,f.default.Scope.BLOCK))U=J.editor.formatLine(H.index,H.length,k({},j,F));else{if(H.length===0)return J.selection.format(j,F),U;U=J.editor.formatText(H.index,H.length,k({},j,F))}return J.setSelection(H,l.default.sources.SILENT),U},Q)}},{key:"formatLine",value:function(j,F,J,Q,H){var U=this,W=void 0,ne=X(j,F,J,Q,H),ae=x(ne,4);return j=ae[0],F=ae[1],W=ae[2],H=ae[3],V.call(this,function(){return U.editor.formatLine(j,F,W)},H,j,0)}},{key:"formatText",value:function(j,F,J,Q,H){var U=this,W=void 0,ne=X(j,F,J,Q,H),ae=x(ne,4);return j=ae[0],F=ae[1],W=ae[2],H=ae[3],V.call(this,function(){return U.editor.formatText(j,F,W)},H,j,0)}},{key:"getBounds",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,J=void 0;typeof j=="number"?J=this.selection.getBounds(j,F):J=this.selection.getBounds(j.index,j.length);var Q=this.container.getBoundingClientRect();return{bottom:J.bottom-Q.top,height:J.height,left:J.left-Q.left,right:J.right-Q.left,top:J.top-Q.top,width:J.width}}},{key:"getContents",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,J=X(j,F),Q=x(J,2);return j=Q[0],F=Q[1],this.editor.getContents(j,F)}},{key:"getFormat",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof j=="number"?this.editor.getFormat(j,F):this.editor.getFormat(j.index,j.length)}},{key:"getIndex",value:function(j){return j.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(j){return this.scroll.leaf(j)}},{key:"getLine",value:function(j){return this.scroll.line(j)}},{key:"getLines",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof j!="number"?this.scroll.lines(j.index,j.length):this.scroll.lines(j,F)}},{key:"getModule",value:function(j){return this.theme.modules[j]}},{key:"getSelection",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return j&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,J=X(j,F),Q=x(J,2);return j=Q[0],F=Q[1],this.editor.getText(j,F)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(j,F,J){var Q=this,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Z.sources.API;return V.call(this,function(){return Q.editor.insertEmbed(j,F,J)},H,j)}},{key:"insertText",value:function(j,F,J,Q,H){var U=this,W=void 0,ne=X(j,0,J,Q,H),ae=x(ne,4);return j=ae[0],W=ae[2],H=ae[3],V.call(this,function(){return U.editor.insertText(j,F,W)},H,j,F.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(j,F,J){this.clipboard.dangerouslyPasteHTML(j,F,J)}},{key:"removeFormat",value:function(j,F,J){var Q=this,H=X(j,F,J),U=x(H,4);return j=U[0],F=U[1],J=U[3],V.call(this,function(){return Q.editor.removeFormat(j,F)},J,j)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(j){var F=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API;return V.call(this,function(){j=new S.default(j);var Q=F.getLength(),H=F.editor.deleteText(0,Q),U=F.editor.applyDelta(j),W=U.ops[U.ops.length-1];W!=null&&typeof W.insert=="string"&&W.insert[W.insert.length-1]===`
`&&(F.editor.deleteText(F.getLength()-1,1),U.delete(1));var ne=H.compose(U);return ne},J)}},{key:"setSelection",value:function(j,F,J){if(j==null)this.selection.setRange(null,F||Z.sources.API);else{var Q=X(j,F,J),H=x(Q,4);j=H[0],F=H[1],J=H[3],this.selection.setRange(new a.Range(j,F),J),J!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API,J=new S.default().insert(j);return this.setContents(J,F)}},{key:"update",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l.default.sources.USER,F=this.scroll.update(j);return this.selection.update(j),F}},{key:"updateContents",value:function(j){var F=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API;return V.call(this,function(){return j=new S.default(j),F.editor.applyDelta(j,J)},J,!0)}}]),Z}();B.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},B.events=l.default.events,B.sources=l.default.sources,B.version="1.3.7",B.imports={delta:S.default,parchment:f.default,"core/module":g.default,"core/theme":E.default};function q(Z,z){if(z=(0,v.default)(!0,{container:Z,modules:{clipboard:!0,keyboard:!0,history:!0}},z),!z.theme||z.theme===B.DEFAULTS.theme)z.theme=E.default;else if(z.theme=B.import("themes/"+z.theme),z.theme==null)throw new Error("Invalid theme "+z.theme+". Did you register it?");var j=(0,v.default)(!0,{},z.theme.DEFAULTS);[j,z].forEach(function(Q){Q.modules=Q.modules||{},Object.keys(Q.modules).forEach(function(H){Q.modules[H]===!0&&(Q.modules[H]={})})});var F=Object.keys(j.modules).concat(Object.keys(z.modules)),J=F.reduce(function(Q,H){var U=B.import("modules/"+H);return U==null?L.error("Cannot load "+H+" module. Are you sure you registered it?"):Q[H]=U.DEFAULTS||{},Q},{});return z.modules!=null&&z.modules.toolbar&&z.modules.toolbar.constructor!==Object&&(z.modules.toolbar={container:z.modules.toolbar}),z=(0,v.default)(!0,{},B.DEFAULTS,{modules:J},j,z),["bounds","container","scrollingContainer"].forEach(function(Q){typeof z[Q]=="string"&&(z[Q]=document.querySelector(z[Q]))}),z.modules=Object.keys(z.modules).reduce(function(Q,H){return z.modules[H]&&(Q[H]=z.modules[H]),Q},{}),z}function V(Z,z,j,F){if(this.options.strict&&!this.isEnabled()&&z===l.default.sources.USER)return new S.default;var J=j==null?null:this.getSelection(),Q=this.editor.delta,H=Z();if(J!=null&&(j===!0&&(j=J.index),F==null?J=ue(J,H,z):F!==0&&(J=ue(J,j,F,z)),this.setSelection(J,l.default.sources.SILENT)),H.length()>0){var U,W=[l.default.events.TEXT_CHANGE,H,Q,z];if((U=this.emitter).emit.apply(U,[l.default.events.EDITOR_CHANGE].concat(W)),z!==l.default.sources.SILENT){var ne;(ne=this.emitter).emit.apply(ne,W)}}return H}function X(Z,z,j,F,J){var Q={};return typeof Z.index=="number"&&typeof Z.length=="number"?typeof z!="number"?(J=F,F=j,j=z,z=Z.length,Z=Z.index):(z=Z.length,Z=Z.index):typeof z!="number"&&(J=F,F=j,j=z,z=0),(typeof j>"u"?"undefined":_(j))==="object"?(Q=j,J=F):typeof j=="string"&&(F!=null?Q[j]=F:J=j),J=J||l.default.sources.API,[Z,z,Q,J]}function ue(Z,z,j,F){if(Z==null)return null;var J=void 0,Q=void 0;if(z instanceof S.default){var H=[Z.index,Z.index+Z.length].map(function(ae){return z.transformPosition(ae,F!==l.default.sources.USER)}),U=x(H,2);J=U[0],Q=U[1]}else{var W=[Z.index,Z.index+Z.length].map(function(ae){return ae<z||ae===z&&F===l.default.sources.USER?ae:j>=0?ae+j:Math.max(z,ae+j)}),ne=x(W,2);J=ne[0],Q=ne[1]}return new a.Range(J,Q-J)}C.expandConfig=q,C.overload=X,C.default=B},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),x=function m(f,a,c){f===null&&(f=Function.prototype);var s=Object.getOwnPropertyDescriptor(f,a);if(s===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:m(v,a,c)}else{if("value"in s)return s.value;var y=s.get;return y===void 0?void 0:y.call(c)}},w=A(7),T=h(w),S=A(0),b=h(S);function h(m){return m&&m.__esModule?m:{default:m}}function u(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function l(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function d(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var g=function(m){d(f,m);function f(){return u(this,f),l(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return _(f,[{key:"formatAt",value:function(c,s,v,y){if(f.compare(this.statics.blotName,v)<0&&b.default.query(v,b.default.Scope.BLOT)){var N=this.isolate(c,s);y&&N.wrap(v,y)}else x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"formatAt",this).call(this,c,s,v,y)}},{key:"optimize",value:function(c){if(x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"optimize",this).call(this,c),this.parent instanceof f&&f.compare(this.statics.blotName,this.parent.statics.blotName)>0){var s=this.parent.isolate(this.offset(),this.length());this.moveChildren(s),s.wrap(this)}}}],[{key:"compare",value:function(c,s){var v=f.order.indexOf(c),y=f.order.indexOf(s);return v>=0||y>=0?v-y:c===s?0:c<s?-1:1}}]),f}(b.default.Inline);g.allowedChildren=[g,b.default.Embed,T.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],C.default=g},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(0),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default.Text);C.default=h},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function a(c,s){for(var v=0;v<s.length;v++){var y=s[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(c,y.key,y)}}return function(c,s,v){return s&&a(c.prototype,s),v&&a(c,v),c}}(),x=function a(c,s,v){c===null&&(c=Function.prototype);var y=Object.getOwnPropertyDescriptor(c,s);if(y===void 0){var N=Object.getPrototypeOf(c);return N===null?void 0:a(N,s,v)}else{if("value"in y)return y.value;var R=y.get;return R===void 0?void 0:R.call(v)}},w=A(54),T=h(w),S=A(10),b=h(S);function h(a){return a&&a.__esModule?a:{default:a}}function u(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}function l(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:a}function d(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}var g=(0,b.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach(function(a){document.addEventListener(a,function(){for(var c=arguments.length,s=Array(c),v=0;v<c;v++)s[v]=arguments[v];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(y){if(y.__quill&&y.__quill.emitter){var N;(N=y.__quill.emitter).handleDOM.apply(N,s)}})})});var f=function(a){d(c,a);function c(){u(this,c);var s=l(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return s.listeners={},s.on("error",g.error),s}return _(c,[{key:"emit",value:function(){g.log.apply(g,arguments),x(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(v){for(var y=arguments.length,N=Array(y>1?y-1:0),R=1;R<y;R++)N[R-1]=arguments[R];(this.listeners[v.type]||[]).forEach(function(E){var I=E.node,k=E.handler;(v.target===I||I.contains(v.target))&&k.apply(void 0,[v].concat(N))})}},{key:"listenDOM",value:function(v,y,N){this.listeners[v]||(this.listeners[v]=[]),this.listeners[v].push({node:y,handler:N})}}]),c}(T.default);f.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},f.sources={API:"api",SILENT:"silent",USER:"user"},C.default=f},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});function _(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}var x=function w(T){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_(this,w),this.quill=T,this.options=S};x.DEFAULTS={},C.default=x},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=["error","warn","log","info"],x="warn";function w(S){if(_.indexOf(S)<=_.indexOf(x)){for(var b,h=arguments.length,u=Array(h>1?h-1:0),l=1;l<h;l++)u[l-1]=arguments[l];(b=console)[S].apply(b,u)}}function T(S){return _.reduce(function(b,h){return b[h]=w.bind(console,h,S),b},{})}w.level=T.level=function(S){x=S},C.default=T},function($,C,A){var _=Array.prototype.slice,x=A(52),w=A(53),T=$.exports=function(u,l,d){return d||(d={}),u===l?!0:u instanceof Date&&l instanceof Date?u.getTime()===l.getTime():!u||!l||typeof u!="object"&&typeof l!="object"?d.strict?u===l:u==l:h(u,l,d)};function S(u){return u==null}function b(u){return!(!u||typeof u!="object"||typeof u.length!="number"||typeof u.copy!="function"||typeof u.slice!="function"||u.length>0&&typeof u[0]!="number")}function h(u,l,d){var g,m;if(S(u)||S(l)||u.prototype!==l.prototype)return!1;if(w(u))return w(l)?(u=_.call(u),l=_.call(l),T(u,l,d)):!1;if(b(u)){if(!b(l)||u.length!==l.length)return!1;for(g=0;g<u.length;g++)if(u[g]!==l[g])return!1;return!0}try{var f=x(u),a=x(l)}catch{return!1}if(f.length!=a.length)return!1;for(f.sort(),a.sort(),g=f.length-1;g>=0;g--)if(f[g]!=a[g])return!1;for(g=f.length-1;g>=0;g--)if(m=f[g],!T(u[m],l[m],d))return!1;return typeof u==typeof l}},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(1),x=function(){function w(T,S,b){b===void 0&&(b={}),this.attrName=T,this.keyName=S;var h=_.Scope.TYPE&_.Scope.ATTRIBUTE;b.scope!=null?this.scope=b.scope&_.Scope.LEVEL|h:this.scope=_.Scope.ATTRIBUTE,b.whitelist!=null&&(this.whitelist=b.whitelist)}return w.keys=function(T){return[].map.call(T.attributes,function(S){return S.name})},w.prototype.add=function(T,S){return this.canAdd(T,S)?(T.setAttribute(this.keyName,S),!0):!1},w.prototype.canAdd=function(T,S){var b=_.query(T,_.Scope.BLOT&(this.scope|_.Scope.TYPE));return b==null?!1:this.whitelist==null?!0:typeof S=="string"?this.whitelist.indexOf(S.replace(/["']/g,""))>-1:this.whitelist.indexOf(S)>-1},w.prototype.remove=function(T){T.removeAttribute(this.keyName)},w.prototype.value=function(T){var S=T.getAttribute(this.keyName);return this.canAdd(T,S)&&S?S:""},w}();C.default=x},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.Code=void 0;var _=function(){function R(E,I){var k=[],P=!0,L=!1,B=void 0;try{for(var q=E[Symbol.iterator](),V;!(P=(V=q.next()).done)&&(k.push(V.value),!(I&&k.length===I));P=!0);}catch(X){L=!0,B=X}finally{try{!P&&q.return&&q.return()}finally{if(L)throw B}}return k}return function(E,I){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return R(E,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function R(E,I){for(var k=0;k<I.length;k++){var P=I[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(E,P.key,P)}}return function(E,I,k){return I&&R(E.prototype,I),k&&R(E,k),E}}(),w=function R(E,I,k){E===null&&(E=Function.prototype);var P=Object.getOwnPropertyDescriptor(E,I);if(P===void 0){var L=Object.getPrototypeOf(E);return L===null?void 0:R(L,I,k)}else{if("value"in P)return P.value;var B=P.get;return B===void 0?void 0:B.call(k)}},T=A(2),S=a(T),b=A(0),h=a(b),u=A(4),l=a(u),d=A(6),g=a(d),m=A(7),f=a(m);function a(R){return R&&R.__esModule?R:{default:R}}function c(R,E){if(!(R instanceof E))throw new TypeError("Cannot call a class as a function")}function s(R,E){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:R}function v(R,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);R.prototype=Object.create(E&&E.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(R,E):R.__proto__=E)}var y=function(R){v(E,R);function E(){return c(this,E),s(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return E}(g.default);y.blotName="code",y.tagName="CODE";var N=function(R){v(E,R);function E(){return c(this,E),s(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return x(E,[{key:"delta",value:function(){var k=this,P=this.domNode.textContent;return P.endsWith(`
`)&&(P=P.slice(0,-1)),P.split(`
`).reduce(function(L,B){return L.insert(B).insert(`
`,k.formats())},new S.default)}},{key:"format",value:function(k,P){if(!(k===this.statics.blotName&&P)){var L=this.descendant(f.default,this.length()-1),B=_(L,1),q=B[0];q!=null&&q.deleteAt(q.length()-1,1),w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,k,P)}}},{key:"formatAt",value:function(k,P,L,B){if(P!==0&&!(h.default.query(L,h.default.Scope.BLOCK)==null||L===this.statics.blotName&&B===this.statics.formats(this.domNode))){var q=this.newlineIndex(k);if(!(q<0||q>=k+P)){var V=this.newlineIndex(k,!0)+1,X=q-V+1,ue=this.isolate(V,X),Z=ue.next;ue.format(L,B),Z instanceof E&&Z.formatAt(0,k-V+P-X,L,B)}}}},{key:"insertAt",value:function(k,P,L){if(L==null){var B=this.descendant(f.default,k),q=_(B,2),V=q[0],X=q[1];V.insertAt(X,P)}}},{key:"length",value:function(){var k=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?k:k+1}},{key:"newlineIndex",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(P)return this.domNode.textContent.slice(0,k).lastIndexOf(`
`);var L=this.domNode.textContent.slice(k).indexOf(`
`);return L>-1?k+L:-1}},{key:"optimize",value:function(k){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,k);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===P.statics.formats(P.domNode)&&(P.optimize(k),P.moveChildren(this),P.remove())}},{key:"replace",value:function(k){w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,k),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(P){var L=h.default.find(P);L==null?P.parentNode.removeChild(P):L instanceof h.default.Embed?L.remove():L.unwrap()})}}],[{key:"create",value:function(k){var P=w(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,k);return P.setAttribute("spellcheck",!1),P}},{key:"formats",value:function(){return!0}}]),E}(l.default);N.blotName="code-block",N.tagName="PRE",N.TAB="  ",C.Code=y,C.default=N},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},x=function(){function Z(z,j){var F=[],J=!0,Q=!1,H=void 0;try{for(var U=z[Symbol.iterator](),W;!(J=(W=U.next()).done)&&(F.push(W.value),!(j&&F.length===j));J=!0);}catch(ne){Q=!0,H=ne}finally{try{!J&&U.return&&U.return()}finally{if(Q)throw H}}return F}return function(z,j){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return Z(z,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function Z(z,j){for(var F=0;F<j.length;F++){var J=j[F];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(z,J.key,J)}}return function(z,j,F){return j&&Z(z.prototype,j),F&&Z(z,F),z}}(),T=A(2),S=P(T),b=A(20),h=P(b),u=A(0),l=P(u),d=A(13),g=P(d),m=A(24),f=P(m),a=A(4),c=P(a),s=A(16),v=P(s),y=A(21),N=P(y),R=A(11),E=P(R),I=A(3),k=P(I);function P(Z){return Z&&Z.__esModule?Z:{default:Z}}function L(Z,z,j){return z in Z?Object.defineProperty(Z,z,{value:j,enumerable:!0,configurable:!0,writable:!0}):Z[z]=j,Z}function B(Z,z){if(!(Z instanceof z))throw new TypeError("Cannot call a class as a function")}var q=/^[ -~]*$/,V=function(){function Z(z){B(this,Z),this.scroll=z,this.delta=this.getDelta()}return w(Z,[{key:"applyDelta",value:function(j){var F=this,J=!1;this.scroll.update();var Q=this.scroll.length();return this.scroll.batchStart(),j=ue(j),j.reduce(function(H,U){var W=U.retain||U.delete||U.insert.length||1,ne=U.attributes||{};if(U.insert!=null){if(typeof U.insert=="string"){var ae=U.insert;ae.endsWith(`
`)&&J&&(J=!1,ae=ae.slice(0,-1)),H>=Q&&!ae.endsWith(`
`)&&(J=!0),F.scroll.insertAt(H,ae);var me=F.scroll.line(H),Te=x(me,2),De=Te[0],Pe=Te[1],Ie=(0,k.default)({},(0,a.bubbleFormats)(De));if(De instanceof c.default){var Y=De.descendant(l.default.Leaf,Pe),le=x(Y,1),oe=le[0];Ie=(0,k.default)(Ie,(0,a.bubbleFormats)(oe))}ne=h.default.attributes.diff(Ie,ne)||{}}else if(_(U.insert)==="object"){var K=Object.keys(U.insert)[0];if(K==null)return H;F.scroll.insertAt(H,K,U.insert[K])}Q+=W}return Object.keys(ne).forEach(function(re){F.scroll.formatAt(H,W,re,ne[re])}),H+W},0),j.reduce(function(H,U){return typeof U.delete=="number"?(F.scroll.deleteAt(H,U.delete),H):H+(U.retain||U.insert.length||1)},0),this.scroll.batchEnd(),this.update(j)}},{key:"deleteText",value:function(j,F){return this.scroll.deleteAt(j,F),this.update(new S.default().retain(j).delete(F))}},{key:"formatLine",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Q).forEach(function(H){if(!(J.scroll.whitelist!=null&&!J.scroll.whitelist[H])){var U=J.scroll.lines(j,Math.max(F,1)),W=F;U.forEach(function(ne){var ae=ne.length();if(!(ne instanceof g.default))ne.format(H,Q[H]);else{var me=j-ne.offset(J.scroll),Te=ne.newlineIndex(me+W)-me+1;ne.formatAt(me,Te,H,Q[H])}W-=ae})}}),this.scroll.optimize(),this.update(new S.default().retain(j).retain(F,(0,N.default)(Q)))}},{key:"formatText",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Q).forEach(function(H){J.scroll.formatAt(j,F,H,Q[H])}),this.update(new S.default().retain(j).retain(F,(0,N.default)(Q)))}},{key:"getContents",value:function(j,F){return this.delta.slice(j,j+F)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(j,F){return j.concat(F.delta())},new S.default)}},{key:"getFormat",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,J=[],Q=[];F===0?this.scroll.path(j).forEach(function(U){var W=x(U,1),ne=W[0];ne instanceof c.default?J.push(ne):ne instanceof l.default.Leaf&&Q.push(ne)}):(J=this.scroll.lines(j,F),Q=this.scroll.descendants(l.default.Leaf,j,F));var H=[J,Q].map(function(U){if(U.length===0)return{};for(var W=(0,a.bubbleFormats)(U.shift());Object.keys(W).length>0;){var ne=U.shift();if(ne==null)return W;W=X((0,a.bubbleFormats)(ne),W)}return W});return k.default.apply(k.default,H)}},{key:"getText",value:function(j,F){return this.getContents(j,F).filter(function(J){return typeof J.insert=="string"}).map(function(J){return J.insert}).join("")}},{key:"insertEmbed",value:function(j,F,J){return this.scroll.insertAt(j,F,J),this.update(new S.default().retain(j).insert(L({},F,J)))}},{key:"insertText",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F=F.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(j,F),Object.keys(Q).forEach(function(H){J.scroll.formatAt(j,F.length,H,Q[H])}),this.update(new S.default().retain(j).insert(F,(0,N.default)(Q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var j=this.scroll.children.head;return j.statics.blotName!==c.default.blotName||j.children.length>1?!1:j.children.head instanceof v.default}},{key:"removeFormat",value:function(j,F){var J=this.getText(j,F),Q=this.scroll.line(j+F),H=x(Q,2),U=H[0],W=H[1],ne=0,ae=new S.default;U!=null&&(U instanceof g.default?ne=U.newlineIndex(W)-W+1:ne=U.length()-W,ae=U.delta().slice(W,W+ne-1).insert(`
`));var me=this.getContents(j,F+ne),Te=me.diff(new S.default().insert(J).concat(ae)),De=new S.default().retain(j).concat(Te);return this.applyDelta(De)}},{key:"update",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Q=this.delta;if(F.length===1&&F[0].type==="characterData"&&F[0].target.data.match(q)&&l.default.find(F[0].target)){var H=l.default.find(F[0].target),U=(0,a.bubbleFormats)(H),W=H.offset(this.scroll),ne=F[0].oldValue.replace(f.default.CONTENTS,""),ae=new S.default().insert(ne),me=new S.default().insert(H.value()),Te=new S.default().retain(W).concat(ae.diff(me,J));j=Te.reduce(function(De,Pe){return Pe.insert?De.insert(Pe.insert,U):De.push(Pe)},new S.default),this.delta=Q.compose(j)}else this.delta=this.getDelta(),(!j||!(0,E.default)(Q.compose(j),this.delta))&&(j=Q.diff(this.delta,J));return j}}]),Z}();function X(Z,z){return Object.keys(z).reduce(function(j,F){return Z[F]==null||(z[F]===Z[F]?j[F]=z[F]:Array.isArray(z[F])?z[F].indexOf(Z[F])<0&&(j[F]=z[F].concat([Z[F]])):j[F]=[z[F],Z[F]]),j},{})}function ue(Z){return Z.reduce(function(z,j){if(j.insert===1){var F=(0,N.default)(j.attributes);return delete F.image,z.insert({image:j.attributes.image},F)}if(j.attributes!=null&&(j.attributes.list===!0||j.attributes.bullet===!0)&&(j=(0,N.default)(j),j.attributes.list?j.attributes.list="ordered":(j.attributes.list="bullet",delete j.attributes.bullet)),typeof j.insert=="string"){var J=j.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return z.insert(J,j.attributes)}return z.push(j)},new S.default)}C.default=V},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.Range=void 0;var _=function(){function R(E,I){var k=[],P=!0,L=!1,B=void 0;try{for(var q=E[Symbol.iterator](),V;!(P=(V=q.next()).done)&&(k.push(V.value),!(I&&k.length===I));P=!0);}catch(X){L=!0,B=X}finally{try{!P&&q.return&&q.return()}finally{if(L)throw B}}return k}return function(E,I){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return R(E,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function R(E,I){for(var k=0;k<I.length;k++){var P=I[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(E,P.key,P)}}return function(E,I,k){return I&&R(E.prototype,I),k&&R(E,k),E}}(),w=A(0),T=f(w),S=A(21),b=f(S),h=A(11),u=f(h),l=A(8),d=f(l),g=A(10),m=f(g);function f(R){return R&&R.__esModule?R:{default:R}}function a(R){if(Array.isArray(R)){for(var E=0,I=Array(R.length);E<R.length;E++)I[E]=R[E];return I}else return Array.from(R)}function c(R,E){if(!(R instanceof E))throw new TypeError("Cannot call a class as a function")}var s=(0,m.default)("quill:selection"),v=function R(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;c(this,R),this.index=E,this.length=I},y=function(){function R(E,I){var k=this;c(this,R),this.emitter=I,this.scroll=E,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=T.default.create("cursor",this),this.lastRange=this.savedRange=new v(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){k.mouseDown||setTimeout(k.update.bind(k,d.default.sources.USER),1)}),this.emitter.on(d.default.events.EDITOR_CHANGE,function(P,L){P===d.default.events.TEXT_CHANGE&&L.length()>0&&k.update(d.default.sources.SILENT)}),this.emitter.on(d.default.events.SCROLL_BEFORE_UPDATE,function(){if(!!k.hasFocus()){var P=k.getNativeRange();P!=null&&P.start.node!==k.cursor.textNode&&k.emitter.once(d.default.events.SCROLL_UPDATE,function(){try{k.setNativeRange(P.start.node,P.start.offset,P.end.node,P.end.offset)}catch{}})}}),this.emitter.on(d.default.events.SCROLL_OPTIMIZE,function(P,L){if(L.range){var B=L.range,q=B.startNode,V=B.startOffset,X=B.endNode,ue=B.endOffset;k.setNativeRange(q,V,X,ue)}}),this.update(d.default.sources.SILENT)}return x(R,[{key:"handleComposition",value:function(){var I=this;this.root.addEventListener("compositionstart",function(){I.composing=!0}),this.root.addEventListener("compositionend",function(){if(I.composing=!1,I.cursor.parent){var k=I.cursor.restore();if(!k)return;setTimeout(function(){I.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)},1)}})}},{key:"handleDragging",value:function(){var I=this;this.emitter.listenDOM("mousedown",document.body,function(){I.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){I.mouseDown=!1,I.update(d.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(I,k){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[I])){this.scroll.update();var P=this.getNativeRange();if(!(P==null||!P.native.collapsed||T.default.query(I,T.default.Scope.BLOCK))){if(P.start.node!==this.cursor.textNode){var L=T.default.find(P.start.node,!1);if(L==null)return;if(L instanceof T.default.Leaf){var B=L.split(P.start.offset);L.parent.insertBefore(this.cursor,B)}else L.insertBefore(this.cursor,P.start.node);this.cursor.attach()}this.cursor.format(I,k),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(I){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=this.scroll.length();I=Math.min(I,P-1),k=Math.min(I+k,P-1)-I;var L=void 0,B=this.scroll.leaf(I),q=_(B,2),V=q[0],X=q[1];if(V==null)return null;var ue=V.position(X,!0),Z=_(ue,2);L=Z[0],X=Z[1];var z=document.createRange();if(k>0){z.setStart(L,X);var j=this.scroll.leaf(I+k),F=_(j,2);if(V=F[0],X=F[1],V==null)return null;var J=V.position(X,!0),Q=_(J,2);return L=Q[0],X=Q[1],z.setEnd(L,X),z.getBoundingClientRect()}else{var H="left",U=void 0;return L instanceof Text?(X<L.data.length?(z.setStart(L,X),z.setEnd(L,X+1)):(z.setStart(L,X-1),z.setEnd(L,X),H="right"),U=z.getBoundingClientRect()):(U=V.domNode.getBoundingClientRect(),X>0&&(H="right")),{bottom:U.top+U.height,height:U.height,left:U[H],right:U[H],top:U.top,width:0}}}},{key:"getNativeRange",value:function(){var I=document.getSelection();if(I==null||I.rangeCount<=0)return null;var k=I.getRangeAt(0);if(k==null)return null;var P=this.normalizeNative(k);return s.info("getNativeRange",P),P}},{key:"getRange",value:function(){var I=this.getNativeRange();if(I==null)return[null,null];var k=this.normalizedToRange(I);return[k,I]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(I){var k=this,P=[[I.start.node,I.start.offset]];I.native.collapsed||P.push([I.end.node,I.end.offset]);var L=P.map(function(V){var X=_(V,2),ue=X[0],Z=X[1],z=T.default.find(ue,!0),j=z.offset(k.scroll);return Z===0?j:z instanceof T.default.Container?j+z.length():j+z.index(ue,Z)}),B=Math.min(Math.max.apply(Math,a(L)),this.scroll.length()-1),q=Math.min.apply(Math,[B].concat(a(L)));return new v(q,B-q)}},{key:"normalizeNative",value:function(I){if(!N(this.root,I.startContainer)||!I.collapsed&&!N(this.root,I.endContainer))return null;var k={start:{node:I.startContainer,offset:I.startOffset},end:{node:I.endContainer,offset:I.endOffset},native:I};return[k.start,k.end].forEach(function(P){for(var L=P.node,B=P.offset;!(L instanceof Text)&&L.childNodes.length>0;)if(L.childNodes.length>B)L=L.childNodes[B],B=0;else if(L.childNodes.length===B)L=L.lastChild,B=L instanceof Text?L.data.length:L.childNodes.length+1;else break;P.node=L,P.offset=B}),k}},{key:"rangeToNative",value:function(I){var k=this,P=I.collapsed?[I.index]:[I.index,I.index+I.length],L=[],B=this.scroll.length();return P.forEach(function(q,V){q=Math.min(B-1,q);var X=void 0,ue=k.scroll.leaf(q),Z=_(ue,2),z=Z[0],j=Z[1],F=z.position(j,V!==0),J=_(F,2);X=J[0],j=J[1],L.push(X,j)}),L.length<2&&(L=L.concat(L)),L}},{key:"scrollIntoView",value:function(I){var k=this.lastRange;if(k!=null){var P=this.getBounds(k.index,k.length);if(P!=null){var L=this.scroll.length()-1,B=this.scroll.line(Math.min(k.index,L)),q=_(B,1),V=q[0],X=V;if(k.length>0){var ue=this.scroll.line(Math.min(k.index+k.length,L)),Z=_(ue,1);X=Z[0]}if(!(V==null||X==null)){var z=I.getBoundingClientRect();P.top<z.top?I.scrollTop-=z.top-P.top:P.bottom>z.bottom&&(I.scrollTop+=P.bottom-z.bottom)}}}}},{key:"setNativeRange",value:function(I,k){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:I,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,B=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s.info("setNativeRange",I,k,P,L),!(I!=null&&(this.root.parentNode==null||I.parentNode==null||P.parentNode==null))){var q=document.getSelection();if(q!=null)if(I!=null){this.hasFocus()||this.root.focus();var V=(this.getNativeRange()||{}).native;if(V==null||B||I!==V.startContainer||k!==V.startOffset||P!==V.endContainer||L!==V.endOffset){I.tagName=="BR"&&(k=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode),P.tagName=="BR"&&(L=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode);var X=document.createRange();X.setStart(I,k),X.setEnd(P,L),q.removeAllRanges(),q.addRange(X)}}else q.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(I){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;if(typeof k=="string"&&(P=k,k=!1),s.info("setRange",I),I!=null){var L=this.rangeToNative(I);this.setNativeRange.apply(this,a(L).concat([k]))}else this.setNativeRange(null);this.update(P)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,k=this.lastRange,P=this.getRange(),L=_(P,2),B=L[0],q=L[1];if(this.lastRange=B,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,u.default)(k,this.lastRange)){var V;!this.composing&&q!=null&&q.native.collapsed&&q.start.node!==this.cursor.textNode&&this.cursor.restore();var X=[d.default.events.SELECTION_CHANGE,(0,b.default)(this.lastRange),(0,b.default)(k),I];if((V=this.emitter).emit.apply(V,[d.default.events.EDITOR_CHANGE].concat(X)),I!==d.default.sources.SILENT){var ue;(ue=this.emitter).emit.apply(ue,X)}}}}]),R}();function N(R,E){try{E.parentNode}catch{return!1}return E instanceof Text&&(E=E.parentNode),R.contains(E)}C.Range=v,C.default=y},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=A(0),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(){return b(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return _(g,[{key:"insertInto",value:function(f,a){f.children.length===0?x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,f,a):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g}(T.default.Embed);l.blotName="break",l.tagName="BR",C.default=l},function($,C,A){var _=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var d in l)l.hasOwnProperty(d)&&(u[d]=l[d])};return function(u,l){h(u,l);function d(){this.constructor=u}u.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(44),w=A(30),T=A(1),S=function(h){_(u,h);function u(l){var d=h.call(this,l)||this;return d.build(),d}return u.prototype.appendChild=function(l){this.insertBefore(l)},u.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(l){l.attach()})},u.prototype.build=function(){var l=this;this.children=new x.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(d){try{var g=b(d);l.insertBefore(g,l.children.head||void 0)}catch(m){if(m instanceof T.ParchmentError)return;throw m}})},u.prototype.deleteAt=function(l,d){if(l===0&&d===this.length())return this.remove();this.children.forEachAt(l,d,function(g,m,f){g.deleteAt(m,f)})},u.prototype.descendant=function(l,d){var g=this.children.find(d),m=g[0],f=g[1];return l.blotName==null&&l(m)||l.blotName!=null&&m instanceof l?[m,f]:m instanceof u?m.descendant(l,f):[null,-1]},u.prototype.descendants=function(l,d,g){d===void 0&&(d=0),g===void 0&&(g=Number.MAX_VALUE);var m=[],f=g;return this.children.forEachAt(d,g,function(a,c,s){(l.blotName==null&&l(a)||l.blotName!=null&&a instanceof l)&&m.push(a),a instanceof u&&(m=m.concat(a.descendants(l,c,f))),f-=s}),m},u.prototype.detach=function(){this.children.forEach(function(l){l.detach()}),h.prototype.detach.call(this)},u.prototype.formatAt=function(l,d,g,m){this.children.forEachAt(l,d,function(f,a,c){f.formatAt(a,c,g,m)})},u.prototype.insertAt=function(l,d,g){var m=this.children.find(l),f=m[0],a=m[1];if(f)f.insertAt(a,d,g);else{var c=g==null?T.create("text",d):T.create(d,g);this.appendChild(c)}},u.prototype.insertBefore=function(l,d){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return l instanceof g}))throw new T.ParchmentError("Cannot insert "+l.statics.blotName+" into "+this.statics.blotName);l.insertInto(this,d)},u.prototype.length=function(){return this.children.reduce(function(l,d){return l+d.length()},0)},u.prototype.moveChildren=function(l,d){this.children.forEach(function(g){l.insertBefore(g,d)})},u.prototype.optimize=function(l){if(h.prototype.optimize.call(this,l),this.children.length===0)if(this.statics.defaultChild!=null){var d=T.create(this.statics.defaultChild);this.appendChild(d),d.optimize(l)}else this.remove()},u.prototype.path=function(l,d){d===void 0&&(d=!1);var g=this.children.find(l,d),m=g[0],f=g[1],a=[[this,l]];return m instanceof u?a.concat(m.path(f,d)):(m!=null&&a.push([m,f]),a)},u.prototype.removeChild=function(l){this.children.remove(l)},u.prototype.replace=function(l){l instanceof u&&l.moveChildren(this),h.prototype.replace.call(this,l)},u.prototype.split=function(l,d){if(d===void 0&&(d=!1),!d){if(l===0)return this;if(l===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(l,this.length(),function(m,f,a){m=m.split(f,d),g.appendChild(m)}),g},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(l,d){var g=this,m=[],f=[];l.forEach(function(a){a.target===g.domNode&&a.type==="childList"&&(m.push.apply(m,a.addedNodes),f.push.apply(f,a.removedNodes))}),f.forEach(function(a){if(!(a.parentNode!=null&&a.tagName!=="IFRAME"&&document.body.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var c=T.find(a);c!=null&&(c.domNode.parentNode==null||c.domNode.parentNode===g.domNode)&&c.detach()}}),m.filter(function(a){return a.parentNode==g.domNode}).sort(function(a,c){return a===c?0:a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(a){var c=null;a.nextSibling!=null&&(c=T.find(a.nextSibling));var s=b(a);(s.next!=c||s.next==null)&&(s.parent!=null&&s.parent.removeChild(g),g.insertBefore(s,c||void 0))})},u}(w.default);function b(h){var u=T.find(h);if(u==null)try{u=T.create(h)}catch{u=T.create(T.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(d){u.domNode.appendChild(d)}),h.parentNode&&h.parentNode.replaceChild(u.domNode,h),u.attach()}return u}C.default=S},function($,C,A){var _=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var d in l)l.hasOwnProperty(d)&&(u[d]=l[d])};return function(u,l){h(u,l);function d(){this.constructor=u}u.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(12),w=A(31),T=A(17),S=A(1),b=function(h){_(u,h);function u(l){var d=h.call(this,l)||this;return d.attributes=new w.default(d.domNode),d}return u.formats=function(l){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return l.tagName.toLowerCase()},u.prototype.format=function(l,d){var g=S.query(l);g instanceof x.default?this.attributes.attribute(g,d):d&&g!=null&&(l!==this.statics.blotName||this.formats()[l]!==d)&&this.replaceWith(l,d)},u.prototype.formats=function(){var l=this.attributes.values(),d=this.statics.formats(this.domNode);return d!=null&&(l[this.statics.blotName]=d),l},u.prototype.replaceWith=function(l,d){var g=h.prototype.replaceWith.call(this,l,d);return this.attributes.copy(g),g},u.prototype.update=function(l,d){var g=this;h.prototype.update.call(this,l,d),l.some(function(m){return m.target===g.domNode&&m.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(l,d){var g=h.prototype.wrap.call(this,l,d);return g instanceof u&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},u}(T.default);C.default=b},function($,C,A){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(30),w=A(1),T=function(S){_(b,S);function b(){return S!==null&&S.apply(this,arguments)||this}return b.value=function(h){return!0},b.prototype.index=function(h,u){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},b.prototype.position=function(h,u){var l=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(l+=1),[this.parent.domNode,l]},b.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},b.scope=w.Scope.INLINE_BLOT,b}(x.default);C.default=T},function($,C,A){var _=A(11),x=A(3),w={attributes:{compose:function(S,b,h){typeof S!="object"&&(S={}),typeof b!="object"&&(b={});var u=x(!0,{},b);h||(u=Object.keys(u).reduce(function(d,g){return u[g]!=null&&(d[g]=u[g]),d},{}));for(var l in S)S[l]!==void 0&&b[l]===void 0&&(u[l]=S[l]);return Object.keys(u).length>0?u:void 0},diff:function(S,b){typeof S!="object"&&(S={}),typeof b!="object"&&(b={});var h=Object.keys(S).concat(Object.keys(b)).reduce(function(u,l){return _(S[l],b[l])||(u[l]=b[l]===void 0?null:b[l]),u},{});return Object.keys(h).length>0?h:void 0},transform:function(S,b,h){if(typeof S!="object")return b;if(typeof b=="object"){if(!h)return b;var u=Object.keys(b).reduce(function(l,d){return S[d]===void 0&&(l[d]=b[d]),l},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(S){return new T(S)},length:function(S){return typeof S.delete=="number"?S.delete:typeof S.retain=="number"?S.retain:typeof S.insert=="string"?S.insert.length:1}};function T(S){this.ops=S,this.index=0,this.offset=0}T.prototype.hasNext=function(){return this.peekLength()<1/0},T.prototype.next=function(S){S||(S=1/0);var b=this.ops[this.index];if(b){var h=this.offset,u=w.length(b);if(S>=u-h?(S=u-h,this.index+=1,this.offset=0):this.offset+=S,typeof b.delete=="number")return{delete:S};var l={};return b.attributes&&(l.attributes=b.attributes),typeof b.retain=="number"?l.retain=S:typeof b.insert=="string"?l.insert=b.insert.substr(h,S):l.insert=b.insert,l}else return{retain:1/0}},T.prototype.peek=function(){return this.ops[this.index]},T.prototype.peekLength=function(){return this.ops[this.index]?w.length(this.ops[this.index])-this.offset:1/0},T.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},T.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var S=this.offset,b=this.index,h=this.next(),u=this.ops.slice(this.index);return this.offset=S,this.index=b,[h].concat(u)}else return[]},$.exports=w},function($,C){var A=function(){function _(g,m){return m!=null&&g instanceof m}var x;try{x=Map}catch{x=function(){}}var w;try{w=Set}catch{w=function(){}}var T;try{T=Promise}catch{T=function(){}}function S(g,m,f,a,c){typeof m=="object"&&(f=m.depth,a=m.prototype,c=m.includeNonEnumerable,m=m.circular);var s=[],v=[],y=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof f>"u"&&(f=1/0);function N(R,E){if(R===null)return null;if(E===0)return R;var I,k;if(typeof R!="object")return R;if(_(R,x))I=new x;else if(_(R,w))I=new w;else if(_(R,T))I=new T(function(z,j){R.then(function(F){z(N(F,E-1))},function(F){j(N(F,E-1))})});else if(S.__isArray(R))I=[];else if(S.__isRegExp(R))I=new RegExp(R.source,d(R)),R.lastIndex&&(I.lastIndex=R.lastIndex);else if(S.__isDate(R))I=new Date(R.getTime());else{if(y&&Buffer.isBuffer(R))return Buffer.allocUnsafe?I=Buffer.allocUnsafe(R.length):I=new Buffer(R.length),R.copy(I),I;_(R,Error)?I=Object.create(R):typeof a>"u"?(k=Object.getPrototypeOf(R),I=Object.create(k)):(I=Object.create(a),k=a)}if(m){var P=s.indexOf(R);if(P!=-1)return v[P];s.push(R),v.push(I)}_(R,x)&&R.forEach(function(z,j){var F=N(j,E-1),J=N(z,E-1);I.set(F,J)}),_(R,w)&&R.forEach(function(z){var j=N(z,E-1);I.add(j)});for(var L in R){var B;k&&(B=Object.getOwnPropertyDescriptor(k,L)),!(B&&B.set==null)&&(I[L]=N(R[L],E-1))}if(Object.getOwnPropertySymbols)for(var q=Object.getOwnPropertySymbols(R),L=0;L<q.length;L++){var V=q[L],X=Object.getOwnPropertyDescriptor(R,V);X&&!X.enumerable&&!c||(I[V]=N(R[V],E-1),X.enumerable||Object.defineProperty(I,V,{enumerable:!1}))}if(c)for(var ue=Object.getOwnPropertyNames(R),L=0;L<ue.length;L++){var Z=ue[L],X=Object.getOwnPropertyDescriptor(R,Z);X&&X.enumerable||(I[Z]=N(R[Z],E-1),Object.defineProperty(I,Z,{enumerable:!1}))}return I}return N(g,f)}S.clonePrototype=function(m){if(m===null)return null;var f=function(){};return f.prototype=m,new f};function b(g){return Object.prototype.toString.call(g)}S.__objToStr=b;function h(g){return typeof g=="object"&&b(g)==="[object Date]"}S.__isDate=h;function u(g){return typeof g=="object"&&b(g)==="[object Array]"}S.__isArray=u;function l(g){return typeof g=="object"&&b(g)==="[object RegExp]"}S.__isRegExp=l;function d(g){var m="";return g.global&&(m+="g"),g.ignoreCase&&(m+="i"),g.multiline&&(m+="m"),m}return S.__getRegExpFlags=d,S}();typeof $=="object"&&$.exports&&($.exports=A)},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function I(k,P){var L=[],B=!0,q=!1,V=void 0;try{for(var X=k[Symbol.iterator](),ue;!(B=(ue=X.next()).done)&&(L.push(ue.value),!(P&&L.length===P));B=!0);}catch(Z){q=!0,V=Z}finally{try{!B&&X.return&&X.return()}finally{if(q)throw V}}return L}return function(k,P){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return I(k,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function I(k,P){for(var L=0;L<P.length;L++){var B=P[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(k,B.key,B)}}return function(k,P,L){return P&&I(k.prototype,P),L&&I(k,L),k}}(),w=function I(k,P,L){k===null&&(k=Function.prototype);var B=Object.getOwnPropertyDescriptor(k,P);if(B===void 0){var q=Object.getPrototypeOf(k);return q===null?void 0:I(q,P,L)}else{if("value"in B)return B.value;var V=B.get;return V===void 0?void 0:V.call(L)}},T=A(0),S=s(T),b=A(8),h=s(b),u=A(4),l=s(u),d=A(16),g=s(d),m=A(13),f=s(m),a=A(25),c=s(a);function s(I){return I&&I.__esModule?I:{default:I}}function v(I,k){if(!(I instanceof k))throw new TypeError("Cannot call a class as a function")}function y(I,k){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:I}function N(I,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);I.prototype=Object.create(k&&k.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(I,k):I.__proto__=k)}function R(I){return I instanceof l.default||I instanceof u.BlockEmbed}var E=function(I){N(k,I);function k(P,L){v(this,k);var B=y(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,P));return B.emitter=L.emitter,Array.isArray(L.whitelist)&&(B.whitelist=L.whitelist.reduce(function(q,V){return q[V]=!0,q},{})),B.domNode.addEventListener("DOMNodeInserted",function(){}),B.optimize(),B.enable(),B}return x(k,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(L,B){var q=this.line(L),V=_(q,2),X=V[0],ue=V[1],Z=this.line(L+B),z=_(Z,1),j=z[0];if(w(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,L,B),j!=null&&X!==j&&ue>0){if(X instanceof u.BlockEmbed||j instanceof u.BlockEmbed){this.optimize();return}if(X instanceof f.default){var F=X.newlineIndex(X.length(),!0);if(F>-1&&(X=X.split(F+1),X===j)){this.optimize();return}}else if(j instanceof f.default){var J=j.newlineIndex(0);J>-1&&j.split(J+1)}var Q=j.children.head instanceof g.default?null:j.children.head;X.moveChildren(j,Q),X.remove()}this.optimize()}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",L)}},{key:"formatAt",value:function(L,B,q,V){this.whitelist!=null&&!this.whitelist[q]||(w(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,L,B,q,V),this.optimize())}},{key:"insertAt",value:function(L,B,q){if(!(q!=null&&this.whitelist!=null&&!this.whitelist[B])){if(L>=this.length())if(q==null||S.default.query(B,S.default.Scope.BLOCK)==null){var V=S.default.create(this.statics.defaultChild);this.appendChild(V),q==null&&B.endsWith(`
`)&&(B=B.slice(0,-1)),V.insertAt(0,B,q)}else{var X=S.default.create(B,q);this.appendChild(X)}else w(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,L,B,q);this.optimize()}}},{key:"insertBefore",value:function(L,B){if(L.statics.scope===S.default.Scope.INLINE_BLOT){var q=S.default.create(this.statics.defaultChild);q.appendChild(L),L=q}w(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,L,B)}},{key:"leaf",value:function(L){return this.path(L).pop()||[null,-1]}},{key:"line",value:function(L){return L===this.length()?this.line(L-1):this.descendant(R,L)}},{key:"lines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,q=function V(X,ue,Z){var z=[],j=Z;return X.children.forEachAt(ue,Z,function(F,J,Q){R(F)?z.push(F):F instanceof S.default.Container&&(z=z.concat(V(F,J,j))),j-=Q}),z};return q(this,L,B)}},{key:"optimize",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(w(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,L,B),L.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,L,B))}},{key:"path",value:function(L){return w(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,L).slice(1)}},{key:"update",value:function(L){if(this.batch!==!0){var B=h.default.sources.USER;typeof L=="string"&&(B=L),Array.isArray(L)||(L=this.observer.takeRecords()),L.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,B,L),w(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this,L.concat([])),L.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,B,L)}}}]),k}(S.default.Scroll);E.blotName="scroll",E.className="ql-editor",E.tagName="DIV",E.defaultChild="block",E.allowedChildren=[l.default,u.BlockEmbed,c.default],C.default=E},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.SHORTKEY=C.default=void 0;var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},x=function(){function U(W,ne){var ae=[],me=!0,Te=!1,De=void 0;try{for(var Pe=W[Symbol.iterator](),Ie;!(me=(Ie=Pe.next()).done)&&(ae.push(Ie.value),!(ne&&ae.length===ne));me=!0);}catch(Y){Te=!0,De=Y}finally{try{!me&&Pe.return&&Pe.return()}finally{if(Te)throw De}}return ae}return function(W,ne){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return U(W,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function U(W,ne){for(var ae=0;ae<ne.length;ae++){var me=ne[ae];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(W,me.key,me)}}return function(W,ne,ae){return ne&&U(W.prototype,ne),ae&&U(W,ae),W}}(),T=A(21),S=I(T),b=A(11),h=I(b),u=A(3),l=I(u),d=A(2),g=I(d),m=A(20),f=I(m),a=A(0),c=I(a),s=A(5),v=I(s),y=A(10),N=I(y),R=A(9),E=I(R);function I(U){return U&&U.__esModule?U:{default:U}}function k(U,W,ne){return W in U?Object.defineProperty(U,W,{value:ne,enumerable:!0,configurable:!0,writable:!0}):U[W]=ne,U}function P(U,W){if(!(U instanceof W))throw new TypeError("Cannot call a class as a function")}function L(U,W){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:U}function B(U,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);U.prototype=Object.create(W&&W.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(U,W):U.__proto__=W)}var q=(0,N.default)("quill:keyboard"),V=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",X=function(U){B(W,U),w(W,null,[{key:"match",value:function(ae,me){return me=H(me),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Te){return!!me[Te]!==ae[Te]&&me[Te]!==null})?!1:me.key===(ae.which||ae.keyCode)}}]);function W(ne,ae){P(this,W);var me=L(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,ne,ae));return me.bindings={},Object.keys(me.options.bindings).forEach(function(Te){Te==="list autofill"&&ne.scroll.whitelist!=null&&!ne.scroll.whitelist.list||me.options.bindings[Te]&&me.addBinding(me.options.bindings[Te])}),me.addBinding({key:W.keys.ENTER,shiftKey:null},F),me.addBinding({key:W.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(me.addBinding({key:W.keys.BACKSPACE},{collapsed:!0},Z),me.addBinding({key:W.keys.DELETE},{collapsed:!0},z)):(me.addBinding({key:W.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Z),me.addBinding({key:W.keys.DELETE},{collapsed:!0,suffix:/^.?$/},z)),me.addBinding({key:W.keys.BACKSPACE},{collapsed:!1},j),me.addBinding({key:W.keys.DELETE},{collapsed:!1},j),me.addBinding({key:W.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Z),me.listen(),me}return w(W,[{key:"addBinding",value:function(ae){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},De=H(ae);if(De==null||De.key==null)return q.warn("Attempted to add invalid keyboard binding",De);typeof me=="function"&&(me={handler:me}),typeof Te=="function"&&(Te={handler:Te}),De=(0,l.default)(De,me,Te),this.bindings[De.key]=this.bindings[De.key]||[],this.bindings[De.key].push(De)}},{key:"listen",value:function(){var ae=this;this.quill.root.addEventListener("keydown",function(me){if(!me.defaultPrevented){var Te=me.which||me.keyCode,De=(ae.bindings[Te]||[]).filter(function(_e){return W.match(me,_e)});if(De.length!==0){var Pe=ae.quill.getSelection();if(!(Pe==null||!ae.quill.hasFocus())){var Ie=ae.quill.getLine(Pe.index),Y=x(Ie,2),le=Y[0],oe=Y[1],K=ae.quill.getLeaf(Pe.index),re=x(K,2),ge=re[0],be=re[1],pe=Pe.length===0?[ge,be]:ae.quill.getLeaf(Pe.index+Pe.length),ke=x(pe,2),Re=ke[0],je=ke[1],nt=ge instanceof c.default.Text?ge.value().slice(0,be):"",ut=Re instanceof c.default.Text?Re.value().slice(je):"",He={collapsed:Pe.length===0,empty:Pe.length===0&&le.length()<=1,format:ae.quill.getFormat(Pe),offset:oe,prefix:nt,suffix:ut},Ke=De.some(function(_e){if(_e.collapsed!=null&&_e.collapsed!==He.collapsed||_e.empty!=null&&_e.empty!==He.empty||_e.offset!=null&&_e.offset!==He.offset)return!1;if(Array.isArray(_e.format)){if(_e.format.every(function(Qe){return He.format[Qe]==null}))return!1}else if(_(_e.format)==="object"&&!Object.keys(_e.format).every(function(Qe){return _e.format[Qe]===!0?He.format[Qe]!=null:_e.format[Qe]===!1?He.format[Qe]==null:(0,h.default)(_e.format[Qe],He.format[Qe])}))return!1;return _e.prefix!=null&&!_e.prefix.test(He.prefix)||_e.suffix!=null&&!_e.suffix.test(He.suffix)?!1:_e.handler.call(ae,Pe,He)!==!0});Ke&&me.preventDefault()}}}})}}]),W}(E.default);X.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},X.DEFAULTS={bindings:{bold:Q("bold"),italic:Q("italic"),underline:Q("underline"),indent:{key:X.keys.TAB,format:["blockquote","indent","list"],handler:function(W,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","+1",v.default.sources.USER)}},outdent:{key:X.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(W,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","-1",v.default.sources.USER)}},"outdent backspace":{key:X.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(W,ne){ne.format.indent!=null?this.quill.format("indent","-1",v.default.sources.USER):ne.format.list!=null&&this.quill.format("list",!1,v.default.sources.USER)}},"indent code-block":J(!0),"outdent code-block":J(!1),"remove tab":{key:X.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(W){this.quill.deleteText(W.index-1,1,v.default.sources.USER)}},tab:{key:X.keys.TAB,handler:function(W){this.quill.history.cutoff();var ne=new g.default().retain(W.index).delete(W.length).insert("	");this.quill.updateContents(ne,v.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(W.index+1,v.default.sources.SILENT)}},"list empty enter":{key:X.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(W,ne){this.quill.format("list",!1,v.default.sources.USER),ne.format.indent&&this.quill.format("indent",!1,v.default.sources.USER)}},"checklist enter":{key:X.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(W){var ne=this.quill.getLine(W.index),ae=x(ne,2),me=ae[0],Te=ae[1],De=(0,l.default)({},me.formats(),{list:"checked"}),Pe=new g.default().retain(W.index).insert(`
`,De).retain(me.length()-Te-1).retain(1,{list:"unchecked"});this.quill.updateContents(Pe,v.default.sources.USER),this.quill.setSelection(W.index+1,v.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:X.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(W,ne){var ae=this.quill.getLine(W.index),me=x(ae,2),Te=me[0],De=me[1],Pe=new g.default().retain(W.index).insert(`
`,ne.format).retain(Te.length()-De-1).retain(1,{header:null});this.quill.updateContents(Pe,v.default.sources.USER),this.quill.setSelection(W.index+1,v.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(W,ne){var ae=ne.prefix.length,me=this.quill.getLine(W.index),Te=x(me,2),De=Te[0],Pe=Te[1];if(Pe>ae)return!0;var Ie=void 0;switch(ne.prefix.trim()){case"[]":case"[ ]":Ie="unchecked";break;case"[x]":Ie="checked";break;case"-":case"*":Ie="bullet";break;default:Ie="ordered"}this.quill.insertText(W.index," ",v.default.sources.USER),this.quill.history.cutoff();var Y=new g.default().retain(W.index-Pe).delete(ae+1).retain(De.length()-2-Pe).retain(1,{list:Ie});this.quill.updateContents(Y,v.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(W.index-ae,v.default.sources.SILENT)}},"code exit":{key:X.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(W){var ne=this.quill.getLine(W.index),ae=x(ne,2),me=ae[0],Te=ae[1],De=new g.default().retain(W.index+me.length()-Te-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(De,v.default.sources.USER)}},"embed left":ue(X.keys.LEFT,!1),"embed left shift":ue(X.keys.LEFT,!0),"embed right":ue(X.keys.RIGHT,!1),"embed right shift":ue(X.keys.RIGHT,!0)}};function ue(U,W){var ne,ae=U===X.keys.LEFT?"prefix":"suffix";return ne={key:U,shiftKey:W,altKey:null},k(ne,ae,/^$/),k(ne,"handler",function(Te){var De=Te.index;U===X.keys.RIGHT&&(De+=Te.length+1);var Pe=this.quill.getLeaf(De),Ie=x(Pe,1),Y=Ie[0];return Y instanceof c.default.Embed?(U===X.keys.LEFT?W?this.quill.setSelection(Te.index-1,Te.length+1,v.default.sources.USER):this.quill.setSelection(Te.index-1,v.default.sources.USER):W?this.quill.setSelection(Te.index,Te.length+1,v.default.sources.USER):this.quill.setSelection(Te.index+Te.length+1,v.default.sources.USER),!1):!0}),ne}function Z(U,W){if(!(U.index===0||this.quill.getLength()<=1)){var ne=this.quill.getLine(U.index),ae=x(ne,1),me=ae[0],Te={};if(W.offset===0){var De=this.quill.getLine(U.index-1),Pe=x(De,1),Ie=Pe[0];if(Ie!=null&&Ie.length()>1){var Y=me.formats(),le=this.quill.getFormat(U.index-1,1);Te=f.default.attributes.diff(Y,le)||{}}}var oe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(W.prefix)?2:1;this.quill.deleteText(U.index-oe,oe,v.default.sources.USER),Object.keys(Te).length>0&&this.quill.formatLine(U.index-oe,oe,Te,v.default.sources.USER),this.quill.focus()}}function z(U,W){var ne=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(W.suffix)?2:1;if(!(U.index>=this.quill.getLength()-ne)){var ae={},me=0,Te=this.quill.getLine(U.index),De=x(Te,1),Pe=De[0];if(W.offset>=Pe.length()-1){var Ie=this.quill.getLine(U.index+1),Y=x(Ie,1),le=Y[0];if(le){var oe=Pe.formats(),K=this.quill.getFormat(U.index,1);ae=f.default.attributes.diff(oe,K)||{},me=le.length()}}this.quill.deleteText(U.index,ne,v.default.sources.USER),Object.keys(ae).length>0&&this.quill.formatLine(U.index+me-1,ne,ae,v.default.sources.USER)}}function j(U){var W=this.quill.getLines(U),ne={};if(W.length>1){var ae=W[0].formats(),me=W[W.length-1].formats();ne=f.default.attributes.diff(me,ae)||{}}this.quill.deleteText(U,v.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(U.index,1,ne,v.default.sources.USER),this.quill.setSelection(U.index,v.default.sources.SILENT),this.quill.focus()}function F(U,W){var ne=this;U.length>0&&this.quill.scroll.deleteAt(U.index,U.length);var ae=Object.keys(W.format).reduce(function(me,Te){return c.default.query(Te,c.default.Scope.BLOCK)&&!Array.isArray(W.format[Te])&&(me[Te]=W.format[Te]),me},{});this.quill.insertText(U.index,`
`,ae,v.default.sources.USER),this.quill.setSelection(U.index+1,v.default.sources.SILENT),this.quill.focus(),Object.keys(W.format).forEach(function(me){ae[me]==null&&(Array.isArray(W.format[me])||me!=="link"&&ne.quill.format(me,W.format[me],v.default.sources.USER))})}function J(U){return{key:X.keys.TAB,shiftKey:!U,format:{"code-block":!0},handler:function(ne){var ae=c.default.query("code-block"),me=ne.index,Te=ne.length,De=this.quill.scroll.descendant(ae,me),Pe=x(De,2),Ie=Pe[0],Y=Pe[1];if(Ie!=null){var le=this.quill.getIndex(Ie),oe=Ie.newlineIndex(Y,!0)+1,K=Ie.newlineIndex(le+Y+Te),re=Ie.domNode.textContent.slice(oe,K).split(`
`);Y=0,re.forEach(function(ge,be){U?(Ie.insertAt(oe+Y,ae.TAB),Y+=ae.TAB.length,be===0?me+=ae.TAB.length:Te+=ae.TAB.length):ge.startsWith(ae.TAB)&&(Ie.deleteAt(oe+Y,ae.TAB.length),Y-=ae.TAB.length,be===0?me-=ae.TAB.length:Te-=ae.TAB.length),Y+=ge.length+1}),this.quill.update(v.default.sources.USER),this.quill.setSelection(me,Te,v.default.sources.SILENT)}}}}function Q(U){return{key:U[0].toUpperCase(),shortKey:!0,handler:function(ne,ae){this.quill.format(U,!ae.format[U],v.default.sources.USER)}}}function H(U){if(typeof U=="string"||typeof U=="number")return H({key:U});if((typeof U>"u"?"undefined":_(U))==="object"&&(U=(0,S.default)(U,!1)),typeof U.key=="string")if(X.keys[U.key.toUpperCase()]!=null)U.key=X.keys[U.key.toUpperCase()];else if(U.key.length===1)U.key=U.key.toUpperCase().charCodeAt(0);else return null;return U.shortKey&&(U[V]=U.shortKey,delete U.shortKey),U}C.default=X,C.SHORTKEY=V},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function f(a,c){var s=[],v=!0,y=!1,N=void 0;try{for(var R=a[Symbol.iterator](),E;!(v=(E=R.next()).done)&&(s.push(E.value),!(c&&s.length===c));v=!0);}catch(I){y=!0,N=I}finally{try{!v&&R.return&&R.return()}finally{if(y)throw N}}return s}return function(a,c){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return f(a,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function f(a,c,s){a===null&&(a=Function.prototype);var v=Object.getOwnPropertyDescriptor(a,c);if(v===void 0){var y=Object.getPrototypeOf(a);return y===null?void 0:f(y,c,s)}else{if("value"in v)return v.value;var N=v.get;return N===void 0?void 0:N.call(s)}},w=function(){function f(a,c){for(var s=0;s<c.length;s++){var v=c[s];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}return function(a,c,s){return c&&f(a.prototype,c),s&&f(a,s),a}}(),T=A(0),S=u(T),b=A(7),h=u(b);function u(f){return f&&f.__esModule?f:{default:f}}function l(f,a){if(!(f instanceof a))throw new TypeError("Cannot call a class as a function")}function d(f,a){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:f}function g(f,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);f.prototype=Object.create(a&&a.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(f,a):f.__proto__=a)}var m=function(f){g(a,f),w(a,null,[{key:"value",value:function(){}}]);function a(c,s){l(this,a);var v=d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));return v.selection=s,v.textNode=document.createTextNode(a.CONTENTS),v.domNode.appendChild(v.textNode),v._length=0,v}return w(a,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(s,v){if(this._length!==0)return x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"format",this).call(this,s,v);for(var y=this,N=0;y!=null&&y.statics.scope!==S.default.Scope.BLOCK_BLOT;)N+=y.offset(y.parent),y=y.parent;y!=null&&(this._length=a.CONTENTS.length,y.optimize(),y.formatAt(N,a.CONTENTS.length,s,v),this._length=0)}},{key:"index",value:function(s,v){return s===this.textNode?0:x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"index",this).call(this,s,v)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var s=this.textNode,v=this.selection.getNativeRange(),y=void 0,N=void 0,R=void 0;if(v!=null&&v.start.node===s&&v.end.node===s){var E=[s,v.start.offset,v.end.offset];y=E[0],N=E[1],R=E[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==a.CONTENTS){var I=this.textNode.data.split(a.CONTENTS).join("");this.next instanceof h.default?(y=this.next.domNode,this.next.insertAt(0,I),this.textNode.data=a.CONTENTS):(this.textNode.data=I,this.parent.insertBefore(S.default.create(this.textNode),this),this.textNode=document.createTextNode(a.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),N!=null){var k=[N,R].map(function(L){return Math.max(0,Math.min(y.data.length,L-1))}),P=_(k,2);return N=P[0],R=P[1],{startNode:y,startOffset:N,endNode:y,endOffset:R}}}}},{key:"update",value:function(s,v){var y=this;if(s.some(function(R){return R.type==="characterData"&&R.target===y.textNode})){var N=this.restore();N&&(v.range=N)}}},{key:"value",value:function(){return""}}]),a}(S.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\uFEFF",C.default=m},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(0),x=S(_),w=A(4),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(){return b(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(x.default.Container);l.allowedChildren=[T.default,w.BlockEmbed,l],C.default=l},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.ColorStyle=C.ColorClass=C.ColorAttributor=void 0;var _=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),x=function m(f,a,c){f===null&&(f=Function.prototype);var s=Object.getOwnPropertyDescriptor(f,a);if(s===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:m(v,a,c)}else{if("value"in s)return s.value;var y=s.get;return y===void 0?void 0:y.call(c)}},w=A(0),T=S(w);function S(m){return m&&m.__esModule?m:{default:m}}function b(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function h(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function u(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var l=function(m){u(f,m);function f(){return b(this,f),h(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return _(f,[{key:"value",value:function(c){var s=x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",this).call(this,c);return s.startsWith("rgb(")?(s=s.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+s.split(",").map(function(v){return("00"+parseInt(v).toString(16)).slice(-2)}).join("")):s}}]),f}(T.default.Attributor.Style),d=new T.default.Attributor.Class("color","ql-color",{scope:T.default.Scope.INLINE}),g=new l("color","color",{scope:T.default.Scope.INLINE});C.ColorAttributor=l,C.ColorClass=d,C.ColorStyle=g},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.sanitize=C.default=void 0;var _=function(){function g(m,f){for(var a=0;a<f.length;a++){var c=f[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,f,a){return f&&g(m.prototype,f),a&&g(m,a),m}}(),x=function g(m,f,a){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,f);if(c===void 0){var s=Object.getPrototypeOf(m);return s===null?void 0:g(s,f,a)}else{if("value"in c)return c.value;var v=c.get;return v===void 0?void 0:v.call(a)}},w=A(6),T=S(w);function S(g){return g&&g.__esModule?g:{default:g}}function b(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function h(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function u(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var l=function(g){u(m,g);function m(){return b(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return _(m,[{key:"format",value:function(a,c){if(a!==this.statics.blotName||!c)return x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,a,c);c=this.constructor.sanitize(c),this.domNode.setAttribute("href",c)}}],[{key:"create",value:function(a){var c=x(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,a);return a=this.sanitize(a),c.setAttribute("href",a),c.setAttribute("rel","noopener noreferrer"),c.setAttribute("target","_blank"),c}},{key:"formats",value:function(a){return a.getAttribute("href")}},{key:"sanitize",value:function(a){return d(a,this.PROTOCOL_WHITELIST)?a:this.SANITIZED_URL}}]),m}(T.default);l.blotName="link",l.tagName="A",l.SANITIZED_URL="about:blank",l.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function d(g,m){var f=document.createElement("a");f.href=g;var a=f.href.slice(0,f.href.indexOf(":"));return m.indexOf(a)>-1}C.default=l,C.sanitize=d},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},x=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),w=A(23),T=h(w),S=A(107),b=h(S);function h(m){return m&&m.__esModule?m:{default:m}}function u(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}var l=0;function d(m,f){m.setAttribute(f,m.getAttribute(f)!=="true")}var g=function(){function m(f){var a=this;u(this,m),this.select=f,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){a.togglePicker()}),this.label.addEventListener("keydown",function(c){switch(c.keyCode){case T.default.keys.ENTER:a.togglePicker();break;case T.default.keys.ESCAPE:a.escape(),c.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return x(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),d(this.label,"aria-expanded"),d(this.options,"aria-hidden")}},{key:"buildItem",value:function(a){var c=this,s=document.createElement("span");return s.tabIndex="0",s.setAttribute("role","button"),s.classList.add("ql-picker-item"),a.hasAttribute("value")&&s.setAttribute("data-value",a.getAttribute("value")),a.textContent&&s.setAttribute("data-label",a.textContent),s.addEventListener("click",function(){c.selectItem(s,!0)}),s.addEventListener("keydown",function(v){switch(v.keyCode){case T.default.keys.ENTER:c.selectItem(s,!0),v.preventDefault();break;case T.default.keys.ESCAPE:c.escape(),v.preventDefault();break}}),s}},{key:"buildLabel",value:function(){var a=document.createElement("span");return a.classList.add("ql-picker-label"),a.innerHTML=b.default,a.tabIndex="0",a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),this.container.appendChild(a),a}},{key:"buildOptions",value:function(){var a=this,c=document.createElement("span");c.classList.add("ql-picker-options"),c.setAttribute("aria-hidden","true"),c.tabIndex="-1",c.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",c.id),this.options=c,[].slice.call(this.select.options).forEach(function(s){var v=a.buildItem(s);c.appendChild(v),s.selected===!0&&a.selectItem(v)}),this.container.appendChild(c)}},{key:"buildPicker",value:function(){var a=this;[].slice.call(this.select.attributes).forEach(function(c){a.container.setAttribute(c.name,c.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var a=this;this.close(),setTimeout(function(){return a.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.container.querySelector(".ql-selected");if(a!==s&&(s!=null&&s.classList.remove("ql-selected"),a!=null&&(a.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(a.parentNode.children,a),a.hasAttribute("data-value")?this.label.setAttribute("data-value",a.getAttribute("data-value")):this.label.removeAttribute("data-value"),a.hasAttribute("data-label")?this.label.setAttribute("data-label",a.getAttribute("data-label")):this.label.removeAttribute("data-label"),c))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":_(Event))==="object"){var v=document.createEvent("Event");v.initEvent("change",!0,!0),this.select.dispatchEvent(v)}this.close()}}},{key:"update",value:function(){var a=void 0;if(this.select.selectedIndex>-1){var c=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];a=this.select.options[this.select.selectedIndex],this.selectItem(c)}else this.selectItem(null);var s=a!=null&&a!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",s)}}]),m}();C.default=g},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(0),x=q(_),w=A(5),T=q(w),S=A(4),b=q(S),h=A(16),u=q(h),l=A(25),d=q(l),g=A(24),m=q(g),f=A(35),a=q(f),c=A(6),s=q(c),v=A(22),y=q(v),N=A(7),R=q(N),E=A(55),I=q(E),k=A(42),P=q(k),L=A(23),B=q(L);function q(V){return V&&V.__esModule?V:{default:V}}T.default.register({"blots/block":b.default,"blots/block/embed":S.BlockEmbed,"blots/break":u.default,"blots/container":d.default,"blots/cursor":m.default,"blots/embed":a.default,"blots/inline":s.default,"blots/scroll":y.default,"blots/text":R.default,"modules/clipboard":I.default,"modules/history":P.default,"modules/keyboard":B.default}),x.default.register(b.default,u.default,m.default,s.default,y.default,R.default),C.default=T.default},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(1),x=function(){function w(T){this.domNode=T,this.domNode[_.DATA_KEY]={blot:this}}return Object.defineProperty(w.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),w.create=function(T){if(this.tagName==null)throw new _.ParchmentError("Blot definition missing tagName");var S;return Array.isArray(this.tagName)?(typeof T=="string"&&(T=T.toUpperCase(),parseInt(T).toString()===T&&(T=parseInt(T))),typeof T=="number"?S=document.createElement(this.tagName[T-1]):this.tagName.indexOf(T)>-1?S=document.createElement(T):S=document.createElement(this.tagName[0])):S=document.createElement(this.tagName),this.className&&S.classList.add(this.className),S},w.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},w.prototype.clone=function(){var T=this.domNode.cloneNode(!1);return _.create(T)},w.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[_.DATA_KEY]},w.prototype.deleteAt=function(T,S){var b=this.isolate(T,S);b.remove()},w.prototype.formatAt=function(T,S,b,h){var u=this.isolate(T,S);if(_.query(b,_.Scope.BLOT)!=null&&h)u.wrap(b,h);else if(_.query(b,_.Scope.ATTRIBUTE)!=null){var l=_.create(this.statics.scope);u.wrap(l),l.format(b,h)}},w.prototype.insertAt=function(T,S,b){var h=b==null?_.create("text",S):_.create(S,b),u=this.split(T);this.parent.insertBefore(h,u)},w.prototype.insertInto=function(T,S){S===void 0&&(S=null),this.parent!=null&&this.parent.children.remove(this);var b=null;T.children.insertBefore(this,S),S!=null&&(b=S.domNode),(this.domNode.parentNode!=T.domNode||this.domNode.nextSibling!=b)&&T.domNode.insertBefore(this.domNode,b),this.parent=T,this.attach()},w.prototype.isolate=function(T,S){var b=this.split(T);return b.split(S),b},w.prototype.length=function(){return 1},w.prototype.offset=function(T){return T===void 0&&(T=this.parent),this.parent==null||this==T?0:this.parent.children.offset(this)+this.parent.offset(T)},w.prototype.optimize=function(T){this.domNode[_.DATA_KEY]!=null&&delete this.domNode[_.DATA_KEY].mutations},w.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},w.prototype.replace=function(T){T.parent!=null&&(T.parent.insertBefore(this,T.next),T.remove())},w.prototype.replaceWith=function(T,S){var b=typeof T=="string"?_.create(T,S):T;return b.replace(this),b},w.prototype.split=function(T,S){return T===0?this:this.next},w.prototype.update=function(T,S){},w.prototype.wrap=function(T,S){var b=typeof T=="string"?_.create(T,S):T;return this.parent!=null&&this.parent.insertBefore(b,this.next),b.appendChild(this),b},w.blotName="abstract",w}();C.default=x},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(12),x=A(32),w=A(33),T=A(1),S=function(){function b(h){this.attributes={},this.domNode=h,this.build()}return b.prototype.attribute=function(h,u){u?h.add(this.domNode,u)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},b.prototype.build=function(){var h=this;this.attributes={};var u=_.default.keys(this.domNode),l=x.default.keys(this.domNode),d=w.default.keys(this.domNode);u.concat(l).concat(d).forEach(function(g){var m=T.query(g,T.Scope.ATTRIBUTE);m instanceof _.default&&(h.attributes[m.attrName]=m)})},b.prototype.copy=function(h){var u=this;Object.keys(this.attributes).forEach(function(l){var d=u.attributes[l].value(u.domNode);h.format(l,d)})},b.prototype.move=function(h){var u=this;this.copy(h),Object.keys(this.attributes).forEach(function(l){u.attributes[l].remove(u.domNode)}),this.attributes={}},b.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(u,l){return u[l]=h.attributes[l].value(h.domNode),u},{})},b}();C.default=S},function($,C,A){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(12);function w(S,b){var h=S.getAttribute("class")||"";return h.split(/\s+/).filter(function(u){return u.indexOf(b+"-")===0})}var T=function(S){_(b,S);function b(){return S!==null&&S.apply(this,arguments)||this}return b.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},b.prototype.add=function(h,u){return this.canAdd(h,u)?(this.remove(h),h.classList.add(this.keyName+"-"+u),!0):!1},b.prototype.remove=function(h){var u=w(h,this.keyName);u.forEach(function(l){h.classList.remove(l)}),h.classList.length===0&&h.removeAttribute("class")},b.prototype.value=function(h){var u=w(h,this.keyName)[0]||"",l=u.slice(this.keyName.length+1);return this.canAdd(h,l)?l:""},b}(x.default);C.default=T},function($,C,A){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(12);function w(S){var b=S.split("-"),h=b.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return b[0]+h}var T=function(S){_(b,S);function b(){return S!==null&&S.apply(this,arguments)||this}return b.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(u){var l=u.split(":");return l[0].trim()})},b.prototype.add=function(h,u){return this.canAdd(h,u)?(h.style[w(this.keyName)]=u,!0):!1},b.prototype.remove=function(h){h.style[w(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},b.prototype.value=function(h){var u=h.style[w(this.keyName)];return this.canAdd(h,u)?u:""},b}(x.default);C.default=T},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function T(S,b){for(var h=0;h<b.length;h++){var u=b[h];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(S,u.key,u)}}return function(S,b,h){return b&&T(S.prototype,b),h&&T(S,h),S}}();function x(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}var w=function(){function T(S,b){x(this,T),this.quill=S,this.options=b,this.modules={}}return _(T,[{key:"init",value:function(){var b=this;Object.keys(this.options.modules).forEach(function(h){b.modules[h]==null&&b.addModule(h)})}},{key:"addModule",value:function(b){var h=this.quill.constructor.import("modules/"+b);return this.modules[b]=new h(this.quill,this.options.modules[b]||{}),this.modules[b]}}]),T}();w.DEFAULTS={modules:{}},w.themes={default:w},C.default=w},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function f(a,c){for(var s=0;s<c.length;s++){var v=c[s];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}return function(a,c,s){return c&&f(a.prototype,c),s&&f(a,s),a}}(),x=function f(a,c,s){a===null&&(a=Function.prototype);var v=Object.getOwnPropertyDescriptor(a,c);if(v===void 0){var y=Object.getPrototypeOf(a);return y===null?void 0:f(y,c,s)}else{if("value"in v)return v.value;var N=v.get;return N===void 0?void 0:N.call(s)}},w=A(0),T=h(w),S=A(7),b=h(S);function h(f){return f&&f.__esModule?f:{default:f}}function u(f,a){if(!(f instanceof a))throw new TypeError("Cannot call a class as a function")}function l(f,a){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:f}function d(f,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);f.prototype=Object.create(a&&a.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(f,a):f.__proto__=a)}var g="\uFEFF",m=function(f){d(a,f);function a(c){u(this,a);var s=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));return s.contentNode=document.createElement("span"),s.contentNode.setAttribute("contenteditable",!1),[].slice.call(s.domNode.childNodes).forEach(function(v){s.contentNode.appendChild(v)}),s.leftGuard=document.createTextNode(g),s.rightGuard=document.createTextNode(g),s.domNode.appendChild(s.leftGuard),s.domNode.appendChild(s.contentNode),s.domNode.appendChild(s.rightGuard),s}return _(a,[{key:"index",value:function(s,v){return s===this.leftGuard?0:s===this.rightGuard?1:x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"index",this).call(this,s,v)}},{key:"restore",value:function(s){var v=void 0,y=void 0,N=s.data.split(g).join("");if(s===this.leftGuard)if(this.prev instanceof b.default){var R=this.prev.length();this.prev.insertAt(R,N),v={startNode:this.prev.domNode,startOffset:R+N.length}}else y=document.createTextNode(N),this.parent.insertBefore(T.default.create(y),this),v={startNode:y,startOffset:N.length};else s===this.rightGuard&&(this.next instanceof b.default?(this.next.insertAt(0,N),v={startNode:this.next.domNode,startOffset:N.length}):(y=document.createTextNode(N),this.parent.insertBefore(T.default.create(y),this.next),v={startNode:y,startOffset:N.length}));return s.data=g,v}},{key:"update",value:function(s,v){var y=this;s.forEach(function(N){if(N.type==="characterData"&&(N.target===y.leftGuard||N.target===y.rightGuard)){var R=y.restore(N.target);R&&(v.range=R)}})}}]),a}(T.default.Embed);C.default=m},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.AlignStyle=C.AlignClass=C.AlignAttribute=void 0;var _=A(0),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}var T={scope:x.default.Scope.BLOCK,whitelist:["right","center","justify"]},S=new x.default.Attributor.Attribute("align","align",T),b=new x.default.Attributor.Class("align","ql-align",T),h=new x.default.Attributor.Style("align","text-align",T);C.AlignAttribute=S,C.AlignClass=b,C.AlignStyle=h},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.BackgroundStyle=C.BackgroundClass=void 0;var _=A(0),x=T(_),w=A(26);function T(h){return h&&h.__esModule?h:{default:h}}var S=new x.default.Attributor.Class("background","ql-bg",{scope:x.default.Scope.INLINE}),b=new w.ColorAttributor("background","background-color",{scope:x.default.Scope.INLINE});C.BackgroundClass=S,C.BackgroundStyle=b},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.DirectionStyle=C.DirectionClass=C.DirectionAttribute=void 0;var _=A(0),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}var T={scope:x.default.Scope.BLOCK,whitelist:["rtl"]},S=new x.default.Attributor.Attribute("direction","dir",T),b=new x.default.Attributor.Class("direction","ql-direction",T),h=new x.default.Attributor.Style("direction","direction",T);C.DirectionAttribute=S,C.DirectionClass=b,C.DirectionStyle=h},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.FontClass=C.FontStyle=void 0;var _=function(){function f(a,c){for(var s=0;s<c.length;s++){var v=c[s];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}return function(a,c,s){return c&&f(a.prototype,c),s&&f(a,s),a}}(),x=function f(a,c,s){a===null&&(a=Function.prototype);var v=Object.getOwnPropertyDescriptor(a,c);if(v===void 0){var y=Object.getPrototypeOf(a);return y===null?void 0:f(y,c,s)}else{if("value"in v)return v.value;var N=v.get;return N===void 0?void 0:N.call(s)}},w=A(0),T=S(w);function S(f){return f&&f.__esModule?f:{default:f}}function b(f,a){if(!(f instanceof a))throw new TypeError("Cannot call a class as a function")}function h(f,a){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:f}function u(f,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);f.prototype=Object.create(a&&a.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(f,a):f.__proto__=a)}var l={scope:T.default.Scope.INLINE,whitelist:["serif","monospace"]},d=new T.default.Attributor.Class("font","ql-font",l),g=function(f){u(a,f);function a(){return b(this,a),h(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return _(a,[{key:"value",value:function(s){return x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"value",this).call(this,s).replace(/["']/g,"")}}]),a}(T.default.Attributor.Style),m=new g("font","font-family",l);C.FontStyle=m,C.FontClass=d},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.SizeStyle=C.SizeClass=void 0;var _=A(0),x=w(_);function w(b){return b&&b.__esModule?b:{default:b}}var T=new x.default.Attributor.Class("size","ql-size",{scope:x.default.Scope.INLINE,whitelist:["small","large","huge"]}),S=new x.default.Attributor.Style("size","font-size",{scope:x.default.Scope.INLINE,whitelist:["10px","18px","32px"]});C.SizeClass=T,C.SizeStyle=S},function($,C,A){$.exports={align:{"":A(76),center:A(77),right:A(78),justify:A(79)},background:A(80),blockquote:A(81),bold:A(82),clean:A(83),code:A(58),"code-block":A(58),color:A(84),direction:{"":A(85),rtl:A(86)},float:{center:A(87),full:A(88),left:A(89),right:A(90)},formula:A(91),header:{1:A(92),2:A(93)},italic:A(94),image:A(95),indent:{"+1":A(96),"-1":A(97)},link:A(98),list:{ordered:A(99),bullet:A(100),check:A(101)},script:{sub:A(102),super:A(103)},strike:A(104),underline:A(105),video:A(106)}},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.getLastChangeIndex=C.default=void 0;var _=function(){function c(s,v){for(var y=0;y<v.length;y++){var N=v[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(s,N.key,N)}}return function(s,v,y){return v&&c(s.prototype,v),y&&c(s,y),s}}(),x=A(0),w=u(x),T=A(5),S=u(T),b=A(9),h=u(b);function u(c){return c&&c.__esModule?c:{default:c}}function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function d(c,s){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:c}function g(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(c,s):c.__proto__=s)}var m=function(c){g(s,c);function s(v,y){l(this,s);var N=d(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,v,y));return N.lastRecorded=0,N.ignoreChange=!1,N.clear(),N.quill.on(S.default.events.EDITOR_CHANGE,function(R,E,I,k){R!==S.default.events.TEXT_CHANGE||N.ignoreChange||(!N.options.userOnly||k===S.default.sources.USER?N.record(E,I):N.transform(E))}),N.quill.keyboard.addBinding({key:"Z",shortKey:!0},N.undo.bind(N)),N.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},N.redo.bind(N)),/Win/i.test(navigator.platform)&&N.quill.keyboard.addBinding({key:"Y",shortKey:!0},N.redo.bind(N)),N}return _(s,[{key:"change",value:function(y,N){if(this.stack[y].length!==0){var R=this.stack[y].pop();this.stack[N].push(R),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(R[y],S.default.sources.USER),this.ignoreChange=!1;var E=a(R[y]);this.quill.setSelection(E)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(y,N){if(y.ops.length!==0){this.stack.redo=[];var R=this.quill.getContents().diff(N),E=Date.now();if(this.lastRecorded+this.options.delay>E&&this.stack.undo.length>0){var I=this.stack.undo.pop();R=R.compose(I.undo),y=I.redo.compose(y)}else this.lastRecorded=E;this.stack.undo.push({redo:y,undo:R}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(y){this.stack.undo.forEach(function(N){N.undo=y.transform(N.undo,!0),N.redo=y.transform(N.redo,!0)}),this.stack.redo.forEach(function(N){N.undo=y.transform(N.undo,!0),N.redo=y.transform(N.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),s}(h.default);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function f(c){var s=c.ops[c.ops.length-1];return s==null?!1:s.insert!=null?typeof s.insert=="string"&&s.insert.endsWith(`
`):s.attributes!=null?Object.keys(s.attributes).some(function(v){return w.default.query(v,w.default.Scope.BLOCK)!=null}):!1}function a(c){var s=c.reduce(function(y,N){return y+=N.delete||0,y},0),v=c.length()-s;return f(c)&&(v-=1),v}C.default=m,C.getLastChangeIndex=a},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BaseTooltip=void 0;var _=function(){function F(J,Q){for(var H=0;H<Q.length;H++){var U=Q[H];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(J,U.key,U)}}return function(J,Q,H){return Q&&F(J.prototype,Q),H&&F(J,H),J}}(),x=function F(J,Q,H){J===null&&(J=Function.prototype);var U=Object.getOwnPropertyDescriptor(J,Q);if(U===void 0){var W=Object.getPrototypeOf(J);return W===null?void 0:F(W,Q,H)}else{if("value"in U)return U.value;var ne=U.get;return ne===void 0?void 0:ne.call(H)}},w=A(3),T=E(w),S=A(2),b=E(S),h=A(8),u=E(h),l=A(23),d=E(l),g=A(34),m=E(g),f=A(59),a=E(f),c=A(60),s=E(c),v=A(28),y=E(v),N=A(61),R=E(N);function E(F){return F&&F.__esModule?F:{default:F}}function I(F,J){if(!(F instanceof J))throw new TypeError("Cannot call a class as a function")}function k(F,J){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:F}function P(F,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);F.prototype=Object.create(J&&J.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(F,J):F.__proto__=J)}var L=[!1,"center","right","justify"],B=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],q=[!1,"serif","monospace"],V=["1","2","3",!1],X=["small",!1,"large","huge"],ue=function(F){P(J,F);function J(Q,H){I(this,J);var U=k(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,Q,H)),W=function ne(ae){if(!document.body.contains(Q.root))return document.body.removeEventListener("click",ne);U.tooltip!=null&&!U.tooltip.root.contains(ae.target)&&document.activeElement!==U.tooltip.textbox&&!U.quill.hasFocus()&&U.tooltip.hide(),U.pickers!=null&&U.pickers.forEach(function(me){me.container.contains(ae.target)||me.close()})};return Q.emitter.listenDOM("click",document.body,W),U}return _(J,[{key:"addModule",value:function(H){var U=x(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"addModule",this).call(this,H);return H==="toolbar"&&this.extendToolbar(U),U}},{key:"buildButtons",value:function(H,U){H.forEach(function(W){var ne=W.getAttribute("class")||"";ne.split(/\s+/).forEach(function(ae){if(!!ae.startsWith("ql-")&&(ae=ae.slice(3),U[ae]!=null))if(ae==="direction")W.innerHTML=U[ae][""]+U[ae].rtl;else if(typeof U[ae]=="string")W.innerHTML=U[ae];else{var me=W.value||"";me!=null&&U[ae][me]&&(W.innerHTML=U[ae][me])}})})}},{key:"buildPickers",value:function(H,U){var W=this;this.pickers=H.map(function(ae){if(ae.classList.contains("ql-align"))return ae.querySelector("option")==null&&j(ae,L),new s.default(ae,U.align);if(ae.classList.contains("ql-background")||ae.classList.contains("ql-color")){var me=ae.classList.contains("ql-background")?"background":"color";return ae.querySelector("option")==null&&j(ae,B,me==="background"?"#ffffff":"#000000"),new a.default(ae,U[me])}else return ae.querySelector("option")==null&&(ae.classList.contains("ql-font")?j(ae,q):ae.classList.contains("ql-header")?j(ae,V):ae.classList.contains("ql-size")&&j(ae,X)),new y.default(ae)});var ne=function(){W.pickers.forEach(function(me){me.update()})};this.quill.on(u.default.events.EDITOR_CHANGE,ne)}}]),J}(m.default);ue.DEFAULTS=(0,T.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var J=this,Q=this.container.querySelector("input.ql-image[type=file]");Q==null&&(Q=document.createElement("input"),Q.setAttribute("type","file"),Q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Q.classList.add("ql-image"),Q.addEventListener("change",function(){if(Q.files!=null&&Q.files[0]!=null){var H=new FileReader;H.onload=function(U){var W=J.quill.getSelection(!0);J.quill.updateContents(new b.default().retain(W.index).delete(W.length).insert({image:U.target.result}),u.default.sources.USER),J.quill.setSelection(W.index+1,u.default.sources.SILENT),Q.value=""},H.readAsDataURL(Q.files[0])}}),this.container.appendChild(Q)),Q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Z=function(F){P(J,F);function J(Q,H){I(this,J);var U=k(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,Q,H));return U.textbox=U.root.querySelector('input[type="text"]'),U.listen(),U}return _(J,[{key:"listen",value:function(){var H=this;this.textbox.addEventListener("keydown",function(U){d.default.match(U,"enter")?(H.save(),U.preventDefault()):d.default.match(U,"escape")&&(H.cancel(),U.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),U!=null?this.textbox.value=U:H!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+H)||""),this.root.setAttribute("data-mode",H)}},{key:"restoreFocus",value:function(){var H=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=H}},{key:"save",value:function(){var H=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var U=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",H,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",H,u.default.sources.USER)),this.quill.root.scrollTop=U;break}case"video":H=z(H);case"formula":{if(!H)break;var W=this.quill.getSelection(!0);if(W!=null){var ne=W.index+W.length;this.quill.insertEmbed(ne,this.root.getAttribute("data-mode"),H,u.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ne+1," ",u.default.sources.USER),this.quill.setSelection(ne+2,u.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),J}(R.default);function z(F){var J=F.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||F.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return J?(J[1]||"https")+"://www.youtube.com/embed/"+J[2]+"?showinfo=0":(J=F.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(J[1]||"https")+"://player.vimeo.com/video/"+J[2]+"/":F}function j(F,J){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;J.forEach(function(H){var U=document.createElement("option");H===Q?U.setAttribute("selected","selected"):U.setAttribute("value",H),F.appendChild(U)})}C.BaseTooltip=Z,C.default=ue},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function x(){this.head=this.tail=null,this.length=0}return x.prototype.append=function(){for(var w=[],T=0;T<arguments.length;T++)w[T]=arguments[T];this.insertBefore(w[0],null),w.length>1&&this.append.apply(this,w.slice(1))},x.prototype.contains=function(w){for(var T,S=this.iterator();T=S();)if(T===w)return!0;return!1},x.prototype.insertBefore=function(w,T){!w||(w.next=T,T!=null?(w.prev=T.prev,T.prev!=null&&(T.prev.next=w),T.prev=w,T===this.head&&(this.head=w)):this.tail!=null?(this.tail.next=w,w.prev=this.tail,this.tail=w):(w.prev=null,this.head=this.tail=w),this.length+=1)},x.prototype.offset=function(w){for(var T=0,S=this.head;S!=null;){if(S===w)return T;T+=S.length(),S=S.next}return-1},x.prototype.remove=function(w){!this.contains(w)||(w.prev!=null&&(w.prev.next=w.next),w.next!=null&&(w.next.prev=w.prev),w===this.head&&(this.head=w.next),w===this.tail&&(this.tail=w.prev),this.length-=1)},x.prototype.iterator=function(w){return w===void 0&&(w=this.head),function(){var T=w;return w!=null&&(w=w.next),T}},x.prototype.find=function(w,T){T===void 0&&(T=!1);for(var S,b=this.iterator();S=b();){var h=S.length();if(w<h||T&&w===h&&(S.next==null||S.next.length()!==0))return[S,w];w-=h}return[null,0]},x.prototype.forEach=function(w){for(var T,S=this.iterator();T=S();)w(T)},x.prototype.forEachAt=function(w,T,S){if(!(T<=0))for(var b=this.find(w),h=b[0],u=b[1],l,d=w-u,g=this.iterator(h);(l=g())&&d<w+T;){var m=l.length();w>d?S(l,w-d,Math.min(T,d+m-w)):S(l,0,Math.min(m,w+T-d)),d+=m}},x.prototype.map=function(w){return this.reduce(function(T,S){return T.push(w(S)),T},[])},x.prototype.reduce=function(w,T){for(var S,b=this.iterator();S=b();)T=w(T,S);return T},x}();C.default=_},function($,C,A){var _=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var d in l)l.hasOwnProperty(d)&&(u[d]=l[d])};return function(u,l){h(u,l);function d(){this.constructor=u}u.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(17),w=A(1),T={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},S=100,b=function(h){_(u,h);function u(l){var d=h.call(this,l)||this;return d.scroll=d,d.observer=new MutationObserver(function(g){d.update(g)}),d.observer.observe(d.domNode,T),d.attach(),d}return u.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},u.prototype.deleteAt=function(l,d){this.update(),l===0&&d===this.length()?this.children.forEach(function(g){g.remove()}):h.prototype.deleteAt.call(this,l,d)},u.prototype.formatAt=function(l,d,g,m){this.update(),h.prototype.formatAt.call(this,l,d,g,m)},u.prototype.insertAt=function(l,d,g){this.update(),h.prototype.insertAt.call(this,l,d,g)},u.prototype.optimize=function(l,d){var g=this;l===void 0&&(l=[]),d===void 0&&(d={}),h.prototype.optimize.call(this,d);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)l.push(m.pop());for(var f=function(v,y){y===void 0&&(y=!0),!(v==null||v===g)&&v.domNode.parentNode!=null&&(v.domNode[w.DATA_KEY].mutations==null&&(v.domNode[w.DATA_KEY].mutations=[]),y&&f(v.parent))},a=function(v){v.domNode[w.DATA_KEY]==null||v.domNode[w.DATA_KEY].mutations==null||(v instanceof x.default&&v.children.forEach(a),v.optimize(d))},c=l,s=0;c.length>0;s+=1){if(s>=S)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(v){var y=w.find(v.target,!0);y!=null&&(y.domNode===v.target&&(v.type==="childList"?(f(w.find(v.previousSibling,!1)),[].forEach.call(v.addedNodes,function(N){var R=w.find(N,!1);f(R,!1),R instanceof x.default&&R.children.forEach(function(E){f(E,!1)})})):v.type==="attributes"&&f(y.prev)),f(y))}),this.children.forEach(a),c=[].slice.call(this.observer.takeRecords()),m=c.slice();m.length>0;)l.push(m.pop())}},u.prototype.update=function(l,d){var g=this;d===void 0&&(d={}),l=l||this.observer.takeRecords(),l.map(function(m){var f=w.find(m.target,!0);return f==null?null:f.domNode[w.DATA_KEY].mutations==null?(f.domNode[w.DATA_KEY].mutations=[m],f):(f.domNode[w.DATA_KEY].mutations.push(m),null)}).forEach(function(m){m==null||m===g||m.domNode[w.DATA_KEY]==null||m.update(m.domNode[w.DATA_KEY].mutations||[],d)}),this.domNode[w.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[w.DATA_KEY].mutations,d),this.optimize(l,d)},u.blotName="scroll",u.defaultChild="block",u.scope=w.Scope.BLOCK_BLOT,u.tagName="DIV",u}(x.default);C.default=b},function($,C,A){var _=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var l in u)u.hasOwnProperty(l)&&(h[l]=u[l])};return function(h,u){b(h,u);function l(){this.constructor=h}h.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(18),w=A(1);function T(b,h){if(Object.keys(b).length!==Object.keys(h).length)return!1;for(var u in b)if(b[u]!==h[u])return!1;return!0}var S=function(b){_(h,b);function h(){return b!==null&&b.apply(this,arguments)||this}return h.formats=function(u){if(u.tagName!==h.tagName)return b.formats.call(this,u)},h.prototype.format=function(u,l){var d=this;u===this.statics.blotName&&!l?(this.children.forEach(function(g){g instanceof x.default||(g=g.wrap(h.blotName,!0)),d.attributes.copy(g)}),this.unwrap()):b.prototype.format.call(this,u,l)},h.prototype.formatAt=function(u,l,d,g){if(this.formats()[d]!=null||w.query(d,w.Scope.ATTRIBUTE)){var m=this.isolate(u,l);m.format(d,g)}else b.prototype.formatAt.call(this,u,l,d,g)},h.prototype.optimize=function(u){b.prototype.optimize.call(this,u);var l=this.formats();if(Object.keys(l).length===0)return this.unwrap();var d=this.next;d instanceof h&&d.prev===this&&T(l,d.formats())&&(d.moveChildren(this),d.remove())},h.blotName="inline",h.scope=w.Scope.INLINE_BLOT,h.tagName="SPAN",h}(x.default);C.default=S},function($,C,A){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(18),w=A(1),T=function(S){_(b,S);function b(){return S!==null&&S.apply(this,arguments)||this}return b.formats=function(h){var u=w.query(b.blotName).tagName;if(h.tagName!==u)return S.formats.call(this,h)},b.prototype.format=function(h,u){w.query(h,w.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!u?this.replaceWith(b.blotName):S.prototype.format.call(this,h,u))},b.prototype.formatAt=function(h,u,l,d){w.query(l,w.Scope.BLOCK)!=null?this.format(l,d):S.prototype.formatAt.call(this,h,u,l,d)},b.prototype.insertAt=function(h,u,l){if(l==null||w.query(u,w.Scope.INLINE)!=null)S.prototype.insertAt.call(this,h,u,l);else{var d=this.split(h),g=w.create(u,l);d.parent.insertBefore(g,d)}},b.prototype.update=function(h,u){navigator.userAgent.match(/Trident/)?this.build():S.prototype.update.call(this,h,u)},b.blotName="block",b.scope=w.Scope.BLOCK_BLOT,b.tagName="P",b}(x.default);C.default=T},function($,C,A){var _=this&&this.__extends||function(){var T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,b){S.__proto__=b}||function(S,b){for(var h in b)b.hasOwnProperty(h)&&(S[h]=b[h])};return function(S,b){T(S,b);function h(){this.constructor=S}S.prototype=b===null?Object.create(b):(h.prototype=b.prototype,new h)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(19),w=function(T){_(S,T);function S(){return T!==null&&T.apply(this,arguments)||this}return S.formats=function(b){},S.prototype.format=function(b,h){T.prototype.formatAt.call(this,0,this.length(),b,h)},S.prototype.formatAt=function(b,h,u,l){b===0&&h===this.length()?this.format(u,l):T.prototype.formatAt.call(this,b,h,u,l)},S.prototype.formats=function(){return this.statics.formats(this.domNode)},S}(x.default);C.default=w},function($,C,A){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=A(19),w=A(1),T=function(S){_(b,S);function b(h){var u=S.call(this,h)||this;return u.text=u.statics.value(u.domNode),u}return b.create=function(h){return document.createTextNode(h)},b.value=function(h){var u=h.data;return u.normalize&&(u=u.normalize()),u},b.prototype.deleteAt=function(h,u){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+u)},b.prototype.index=function(h,u){return this.domNode===h?u:-1},b.prototype.insertAt=function(h,u,l){l==null?(this.text=this.text.slice(0,h)+u+this.text.slice(h),this.domNode.data=this.text):S.prototype.insertAt.call(this,h,u,l)},b.prototype.length=function(){return this.text.length},b.prototype.optimize=function(h){S.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof b&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},b.prototype.position=function(h,u){return[this.domNode,h]},b.prototype.split=function(h,u){if(u===void 0&&(u=!1),!u){if(h===0)return this;if(h===this.length())return this.next}var l=w.create(this.domNode.splitText(h));return this.parent.insertBefore(l,this.next),this.text=this.statics.value(this.domNode),l},b.prototype.update=function(h,u){var l=this;h.some(function(d){return d.type==="characterData"&&d.target===l.domNode})&&(this.text=this.statics.value(this.domNode))},b.prototype.value=function(){return this.text},b.blotName="text",b.scope=w.Scope.INLINE_BLOT,b}(x.default);C.default=T},function($,C,A){var _=document.createElement("div");if(_.classList.toggle("test-class",!1),_.classList.contains("test-class")){var x=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(w,T){return arguments.length>1&&!this.contains(w)==!T?T:x.call(this,w)}}String.prototype.startsWith||(String.prototype.startsWith=function(w,T){return T=T||0,this.substr(T,w.length)===w}),String.prototype.endsWith||(String.prototype.endsWith=function(w,T){var S=this.toString();(typeof T!="number"||!isFinite(T)||Math.floor(T)!==T||T>S.length)&&(T=S.length),T-=w.length;var b=S.indexOf(w,T);return b!==-1&&b===T}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(T){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof T!="function")throw new TypeError("predicate must be a function");for(var S=Object(this),b=S.length>>>0,h=arguments[1],u,l=0;l<b;l++)if(u=S[l],T.call(h,u,l,S))return u}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function($,C){var A=-1,_=1,x=0;function w(s,v,y){if(s==v)return s?[[x,s]]:[];(y<0||s.length<y)&&(y=null);var N=h(s,v),R=s.substring(0,N);s=s.substring(N),v=v.substring(N),N=u(s,v);var E=s.substring(s.length-N);s=s.substring(0,s.length-N),v=v.substring(0,v.length-N);var I=T(s,v);return R&&I.unshift([x,R]),E&&I.push([x,E]),d(I),y!=null&&(I=f(I,y)),I=a(I),I}function T(s,v){var y;if(!s)return[[_,v]];if(!v)return[[A,s]];var N=s.length>v.length?s:v,R=s.length>v.length?v:s,E=N.indexOf(R);if(E!=-1)return y=[[_,N.substring(0,E)],[x,R],[_,N.substring(E+R.length)]],s.length>v.length&&(y[0][0]=y[2][0]=A),y;if(R.length==1)return[[A,s],[_,v]];var I=l(s,v);if(I){var k=I[0],P=I[1],L=I[2],B=I[3],q=I[4],V=w(k,L),X=w(P,B);return V.concat([[x,q]],X)}return S(s,v)}function S(s,v){for(var y=s.length,N=v.length,R=Math.ceil((y+N)/2),E=R,I=2*R,k=new Array(I),P=new Array(I),L=0;L<I;L++)k[L]=-1,P[L]=-1;k[E+1]=0,P[E+1]=0;for(var B=y-N,q=B%2!=0,V=0,X=0,ue=0,Z=0,z=0;z<R;z++){for(var j=-z+V;j<=z-X;j+=2){var F=E+j,J;j==-z||j!=z&&k[F-1]<k[F+1]?J=k[F+1]:J=k[F-1]+1;for(var Q=J-j;J<y&&Q<N&&s.charAt(J)==v.charAt(Q);)J++,Q++;if(k[F]=J,J>y)X+=2;else if(Q>N)V+=2;else if(q){var H=E+B-j;if(H>=0&&H<I&&P[H]!=-1){var U=y-P[H];if(J>=U)return b(s,v,J,Q)}}}for(var W=-z+ue;W<=z-Z;W+=2){var H=E+W,U;W==-z||W!=z&&P[H-1]<P[H+1]?U=P[H+1]:U=P[H-1]+1;for(var ne=U-W;U<y&&ne<N&&s.charAt(y-U-1)==v.charAt(N-ne-1);)U++,ne++;if(P[H]=U,U>y)Z+=2;else if(ne>N)ue+=2;else if(!q){var F=E+B-W;if(F>=0&&F<I&&k[F]!=-1){var J=k[F],Q=E+J-F;if(U=y-U,J>=U)return b(s,v,J,Q)}}}}return[[A,s],[_,v]]}function b(s,v,y,N){var R=s.substring(0,y),E=v.substring(0,N),I=s.substring(y),k=v.substring(N),P=w(R,E),L=w(I,k);return P.concat(L)}function h(s,v){if(!s||!v||s.charAt(0)!=v.charAt(0))return 0;for(var y=0,N=Math.min(s.length,v.length),R=N,E=0;y<R;)s.substring(E,R)==v.substring(E,R)?(y=R,E=y):N=R,R=Math.floor((N-y)/2+y);return R}function u(s,v){if(!s||!v||s.charAt(s.length-1)!=v.charAt(v.length-1))return 0;for(var y=0,N=Math.min(s.length,v.length),R=N,E=0;y<R;)s.substring(s.length-R,s.length-E)==v.substring(v.length-R,v.length-E)?(y=R,E=y):N=R,R=Math.floor((N-y)/2+y);return R}function l(s,v){var y=s.length>v.length?s:v,N=s.length>v.length?v:s;if(y.length<4||N.length*2<y.length)return null;function R(X,ue,Z){for(var z=X.substring(Z,Z+Math.floor(X.length/4)),j=-1,F="",J,Q,H,U;(j=ue.indexOf(z,j+1))!=-1;){var W=h(X.substring(Z),ue.substring(j)),ne=u(X.substring(0,Z),ue.substring(0,j));F.length<ne+W&&(F=ue.substring(j-ne,j)+ue.substring(j,j+W),J=X.substring(0,Z-ne),Q=X.substring(Z+W),H=ue.substring(0,j-ne),U=ue.substring(j+W))}return F.length*2>=X.length?[J,Q,H,U,F]:null}var E=R(y,N,Math.ceil(y.length/4)),I=R(y,N,Math.ceil(y.length/2)),k;if(!E&&!I)return null;I?E?k=E[4].length>I[4].length?E:I:k=I:k=E;var P,L,B,q;s.length>v.length?(P=k[0],L=k[1],B=k[2],q=k[3]):(B=k[0],q=k[1],P=k[2],L=k[3]);var V=k[4];return[P,L,B,q,V]}function d(s){s.push([x,""]);for(var v=0,y=0,N=0,R="",E="",I;v<s.length;)switch(s[v][0]){case _:N++,E+=s[v][1],v++;break;case A:y++,R+=s[v][1],v++;break;case x:y+N>1?(y!==0&&N!==0&&(I=h(E,R),I!==0&&(v-y-N>0&&s[v-y-N-1][0]==x?s[v-y-N-1][1]+=E.substring(0,I):(s.splice(0,0,[x,E.substring(0,I)]),v++),E=E.substring(I),R=R.substring(I)),I=u(E,R),I!==0&&(s[v][1]=E.substring(E.length-I)+s[v][1],E=E.substring(0,E.length-I),R=R.substring(0,R.length-I))),y===0?s.splice(v-N,y+N,[_,E]):N===0?s.splice(v-y,y+N,[A,R]):s.splice(v-y-N,y+N,[A,R],[_,E]),v=v-y-N+(y?1:0)+(N?1:0)+1):v!==0&&s[v-1][0]==x?(s[v-1][1]+=s[v][1],s.splice(v,1)):v++,N=0,y=0,R="",E="";break}s[s.length-1][1]===""&&s.pop();var k=!1;for(v=1;v<s.length-1;)s[v-1][0]==x&&s[v+1][0]==x&&(s[v][1].substring(s[v][1].length-s[v-1][1].length)==s[v-1][1]?(s[v][1]=s[v-1][1]+s[v][1].substring(0,s[v][1].length-s[v-1][1].length),s[v+1][1]=s[v-1][1]+s[v+1][1],s.splice(v-1,1),k=!0):s[v][1].substring(0,s[v+1][1].length)==s[v+1][1]&&(s[v-1][1]+=s[v+1][1],s[v][1]=s[v][1].substring(s[v+1][1].length)+s[v+1][1],s.splice(v+1,1),k=!0)),v++;k&&d(s)}var g=w;g.INSERT=_,g.DELETE=A,g.EQUAL=x,$.exports=g;function m(s,v){if(v===0)return[x,s];for(var y=0,N=0;N<s.length;N++){var R=s[N];if(R[0]===A||R[0]===x){var E=y+R[1].length;if(v===E)return[N+1,s];if(v<E){s=s.slice();var I=v-y,k=[R[0],R[1].slice(0,I)],P=[R[0],R[1].slice(I)];return s.splice(N,1,k,P),[N+1,s]}else y=E}}throw new Error("cursor_pos is out of bounds!")}function f(s,v){var y=m(s,v),N=y[1],R=y[0],E=N[R],I=N[R+1];if(E==null)return s;if(E[0]!==x)return s;if(I!=null&&E[1]+I[1]===I[1]+E[1])return N.splice(R,2,I,E),c(N,R,2);if(I!=null&&I[1].indexOf(E[1])===0){N.splice(R,2,[I[0],E[1]],[0,E[1]]);var k=I[1].slice(E[1].length);return k.length>0&&N.splice(R+2,0,[I[0],k]),c(N,R,3)}else return s}function a(s){for(var v=!1,y=function(I){return I.charCodeAt(0)>=56320&&I.charCodeAt(0)<=57343},N=function(I){return I.charCodeAt(I.length-1)>=55296&&I.charCodeAt(I.length-1)<=56319},R=2;R<s.length;R+=1)s[R-2][0]===x&&N(s[R-2][1])&&s[R-1][0]===A&&y(s[R-1][1])&&s[R][0]===_&&y(s[R][1])&&(v=!0,s[R-1][1]=s[R-2][1].slice(-1)+s[R-1][1],s[R][1]=s[R-2][1].slice(-1)+s[R][1],s[R-2][1]=s[R-2][1].slice(0,-1));if(!v)return s;for(var E=[],R=0;R<s.length;R+=1)s[R][1].length>0&&E.push(s[R]);return E}function c(s,v,y){for(var N=v+y-1;N>=0&&N>=v-1;N--)if(N+1<s.length){var R=s[N],E=s[N+1];R[0]===E[1]&&s.splice(N,2,[R[0],R[1]+E[1]])}return s}},function($,C){C=$.exports=typeof Object.keys=="function"?Object.keys:A,C.shim=A;function A(_){var x=[];for(var w in _)x.push(w);return x}},function($,C){var A=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";C=$.exports=A?_:x,C.supported=_;function _(w){return Object.prototype.toString.call(w)=="[object Arguments]"}C.unsupported=x;function x(w){return w&&typeof w=="object"&&typeof w.length=="number"&&Object.prototype.hasOwnProperty.call(w,"callee")&&!Object.prototype.propertyIsEnumerable.call(w,"callee")||!1}},function($,C){var A=Object.prototype.hasOwnProperty,_="~";function x(){}Object.create&&(x.prototype=Object.create(null),new x().__proto__||(_=!1));function w(S,b,h){this.fn=S,this.context=b,this.once=h||!1}function T(){this._events=new x,this._eventsCount=0}T.prototype.eventNames=function(){var b=[],h,u;if(this._eventsCount===0)return b;for(u in h=this._events)A.call(h,u)&&b.push(_?u.slice(1):u);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(h)):b},T.prototype.listeners=function(b,h){var u=_?_+b:b,l=this._events[u];if(h)return!!l;if(!l)return[];if(l.fn)return[l.fn];for(var d=0,g=l.length,m=new Array(g);d<g;d++)m[d]=l[d].fn;return m},T.prototype.emit=function(b,h,u,l,d,g){var m=_?_+b:b;if(!this._events[m])return!1;var f=this._events[m],a=arguments.length,c,s;if(f.fn){switch(f.once&&this.removeListener(b,f.fn,void 0,!0),a){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,h),!0;case 3:return f.fn.call(f.context,h,u),!0;case 4:return f.fn.call(f.context,h,u,l),!0;case 5:return f.fn.call(f.context,h,u,l,d),!0;case 6:return f.fn.call(f.context,h,u,l,d,g),!0}for(s=1,c=new Array(a-1);s<a;s++)c[s-1]=arguments[s];f.fn.apply(f.context,c)}else{var v=f.length,y;for(s=0;s<v;s++)switch(f[s].once&&this.removeListener(b,f[s].fn,void 0,!0),a){case 1:f[s].fn.call(f[s].context);break;case 2:f[s].fn.call(f[s].context,h);break;case 3:f[s].fn.call(f[s].context,h,u);break;case 4:f[s].fn.call(f[s].context,h,u,l);break;default:if(!c)for(y=1,c=new Array(a-1);y<a;y++)c[y-1]=arguments[y];f[s].fn.apply(f[s].context,c)}}return!0},T.prototype.on=function(b,h,u){var l=new w(h,u||this),d=_?_+b:b;return this._events[d]?this._events[d].fn?this._events[d]=[this._events[d],l]:this._events[d].push(l):(this._events[d]=l,this._eventsCount++),this},T.prototype.once=function(b,h,u){var l=new w(h,u||this,!0),d=_?_+b:b;return this._events[d]?this._events[d].fn?this._events[d]=[this._events[d],l]:this._events[d].push(l):(this._events[d]=l,this._eventsCount++),this},T.prototype.removeListener=function(b,h,u,l){var d=_?_+b:b;if(!this._events[d])return this;if(!h)return--this._eventsCount===0?this._events=new x:delete this._events[d],this;var g=this._events[d];if(g.fn)g.fn===h&&(!l||g.once)&&(!u||g.context===u)&&(--this._eventsCount===0?this._events=new x:delete this._events[d]);else{for(var m=0,f=[],a=g.length;m<a;m++)(g[m].fn!==h||l&&!g[m].once||u&&g[m].context!==u)&&f.push(g[m]);f.length?this._events[d]=f.length===1?f[0]:f:--this._eventsCount===0?this._events=new x:delete this._events[d]}return this},T.prototype.removeAllListeners=function(b){var h;return b?(h=_?_+b:b,this._events[h]&&(--this._eventsCount===0?this._events=new x:delete this._events[h])):(this._events=new x,this._eventsCount=0),this},T.prototype.off=T.prototype.removeListener,T.prototype.addListener=T.prototype.on,T.prototype.setMaxListeners=function(){return this},T.prefixed=_,T.EventEmitter=T,typeof $<"u"&&($.exports=T)},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.matchText=C.matchSpacing=C.matchNewline=C.matchBlot=C.matchAttributor=C.default=void 0;var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},x=function(){function K(re,ge){var be=[],pe=!0,ke=!1,Re=void 0;try{for(var je=re[Symbol.iterator](),nt;!(pe=(nt=je.next()).done)&&(be.push(nt.value),!(ge&&be.length===ge));pe=!0);}catch(ut){ke=!0,Re=ut}finally{try{!pe&&je.return&&je.return()}finally{if(ke)throw Re}}return be}return function(re,ge){if(Array.isArray(re))return re;if(Symbol.iterator in Object(re))return K(re,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function K(re,ge){for(var be=0;be<ge.length;be++){var pe=ge[be];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(re,pe.key,pe)}}return function(re,ge,be){return ge&&K(re.prototype,ge),be&&K(re,be),re}}(),T=A(3),S=P(T),b=A(2),h=P(b),u=A(0),l=P(u),d=A(5),g=P(d),m=A(10),f=P(m),a=A(9),c=P(a),s=A(36),v=A(37),y=A(13),N=P(y),R=A(26),E=A(38),I=A(39),k=A(40);function P(K){return K&&K.__esModule?K:{default:K}}function L(K,re,ge){return re in K?Object.defineProperty(K,re,{value:ge,enumerable:!0,configurable:!0,writable:!0}):K[re]=ge,K}function B(K,re){if(!(K instanceof re))throw new TypeError("Cannot call a class as a function")}function q(K,re){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:K}function V(K,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);K.prototype=Object.create(re&&re.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(K,re):K.__proto__=re)}var X=(0,f.default)("quill:clipboard"),ue="__ql-matcher",Z=[[Node.TEXT_NODE,oe],[Node.TEXT_NODE,Ie],["br",Te],[Node.ELEMENT_NODE,Ie],[Node.ELEMENT_NODE,me],[Node.ELEMENT_NODE,Y],[Node.ELEMENT_NODE,ae],[Node.ELEMENT_NODE,le],["li",Pe],["b",ne.bind(ne,"bold")],["i",ne.bind(ne,"italic")],["style",De]],z=[s.AlignAttribute,E.DirectionAttribute].reduce(function(K,re){return K[re.keyName]=re,K},{}),j=[s.AlignStyle,v.BackgroundStyle,R.ColorStyle,E.DirectionStyle,I.FontStyle,k.SizeStyle].reduce(function(K,re){return K[re.keyName]=re,K},{}),F=function(K){V(re,K);function re(ge,be){B(this,re);var pe=q(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,ge,be));return pe.quill.root.addEventListener("paste",pe.onPaste.bind(pe)),pe.container=pe.quill.addContainer("ql-clipboard"),pe.container.setAttribute("contenteditable",!0),pe.container.setAttribute("tabindex",-1),pe.matchers=[],Z.concat(pe.options.matchers).forEach(function(ke){var Re=x(ke,2),je=Re[0],nt=Re[1];!be.matchVisual&&nt===Y||pe.addMatcher(je,nt)}),pe}return w(re,[{key:"addMatcher",value:function(be,pe){this.matchers.push([be,pe])}},{key:"convert",value:function(be){if(typeof be=="string")return this.container.innerHTML=be.replace(/\>\r?\n +\</g,"><"),this.convert();var pe=this.quill.getFormat(this.quill.selection.savedRange.index);if(pe[N.default.blotName]){var ke=this.container.innerText;return this.container.innerHTML="",new h.default().insert(ke,L({},N.default.blotName,pe[N.default.blotName]))}var Re=this.prepareMatching(),je=x(Re,2),nt=je[0],ut=je[1],He=W(this.container,nt,ut);return H(He,`
`)&&He.ops[He.ops.length-1].attributes==null&&(He=He.compose(new h.default().retain(He.length()-1).delete(1))),X.log("convert",this.container.innerHTML,He),this.container.innerHTML="",He}},{key:"dangerouslyPasteHTML",value:function(be,pe){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof be=="string")this.quill.setContents(this.convert(be),pe),this.quill.setSelection(0,g.default.sources.SILENT);else{var Re=this.convert(pe);this.quill.updateContents(new h.default().retain(be).concat(Re),ke),this.quill.setSelection(be+Re.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(be){var pe=this;if(!(be.defaultPrevented||!this.quill.isEnabled())){var ke=this.quill.getSelection(),Re=new h.default().retain(ke.index),je=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){Re=Re.concat(pe.convert()).delete(ke.length),pe.quill.updateContents(Re,g.default.sources.USER),pe.quill.setSelection(Re.length()-ke.length,g.default.sources.SILENT),pe.quill.scrollingContainer.scrollTop=je,pe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var be=this,pe=[],ke=[];return this.matchers.forEach(function(Re){var je=x(Re,2),nt=je[0],ut=je[1];switch(nt){case Node.TEXT_NODE:ke.push(ut);break;case Node.ELEMENT_NODE:pe.push(ut);break;default:[].forEach.call(be.container.querySelectorAll(nt),function(He){He[ue]=He[ue]||[],He[ue].push(ut)});break}}),[pe,ke]}}]),re}(c.default);F.DEFAULTS={matchers:[],matchVisual:!0};function J(K,re,ge){return(typeof re>"u"?"undefined":_(re))==="object"?Object.keys(re).reduce(function(be,pe){return J(be,pe,re[pe])},K):K.reduce(function(be,pe){return pe.attributes&&pe.attributes[re]?be.push(pe):be.insert(pe.insert,(0,S.default)({},L({},re,ge),pe.attributes))},new h.default)}function Q(K){if(K.nodeType!==Node.ELEMENT_NODE)return{};var re="__ql-computed-style";return K[re]||(K[re]=window.getComputedStyle(K))}function H(K,re){for(var ge="",be=K.ops.length-1;be>=0&&ge.length<re.length;--be){var pe=K.ops[be];if(typeof pe.insert!="string")break;ge=pe.insert+ge}return ge.slice(-1*re.length)===re}function U(K){if(K.childNodes.length===0)return!1;var re=Q(K);return["block","list-item"].indexOf(re.display)>-1}function W(K,re,ge){return K.nodeType===K.TEXT_NODE?ge.reduce(function(be,pe){return pe(K,be)},new h.default):K.nodeType===K.ELEMENT_NODE?[].reduce.call(K.childNodes||[],function(be,pe){var ke=W(pe,re,ge);return pe.nodeType===K.ELEMENT_NODE&&(ke=re.reduce(function(Re,je){return je(pe,Re)},ke),ke=(pe[ue]||[]).reduce(function(Re,je){return je(pe,Re)},ke)),be.concat(ke)},new h.default):new h.default}function ne(K,re,ge){return J(ge,K,!0)}function ae(K,re){var ge=l.default.Attributor.Attribute.keys(K),be=l.default.Attributor.Class.keys(K),pe=l.default.Attributor.Style.keys(K),ke={};return ge.concat(be).concat(pe).forEach(function(Re){var je=l.default.query(Re,l.default.Scope.ATTRIBUTE);je!=null&&(ke[je.attrName]=je.value(K),ke[je.attrName])||(je=z[Re],je!=null&&(je.attrName===Re||je.keyName===Re)&&(ke[je.attrName]=je.value(K)||void 0),je=j[Re],je!=null&&(je.attrName===Re||je.keyName===Re)&&(je=j[Re],ke[je.attrName]=je.value(K)||void 0))}),Object.keys(ke).length>0&&(re=J(re,ke)),re}function me(K,re){var ge=l.default.query(K);if(ge==null)return re;if(ge.prototype instanceof l.default.Embed){var be={},pe=ge.value(K);pe!=null&&(be[ge.blotName]=pe,re=new h.default().insert(be,ge.formats(K)))}else typeof ge.formats=="function"&&(re=J(re,ge.blotName,ge.formats(K)));return re}function Te(K,re){return H(re,`
`)||re.insert(`
`),re}function De(){return new h.default}function Pe(K,re){var ge=l.default.query(K);if(ge==null||ge.blotName!=="list-item"||!H(re,`
`))return re;for(var be=-1,pe=K.parentNode;!pe.classList.contains("ql-clipboard");)(l.default.query(pe)||{}).blotName==="list"&&(be+=1),pe=pe.parentNode;return be<=0?re:re.compose(new h.default().retain(re.length()-1).retain(1,{indent:be}))}function Ie(K,re){return H(re,`
`)||(U(K)||re.length()>0&&K.nextSibling&&U(K.nextSibling))&&re.insert(`
`),re}function Y(K,re){if(U(K)&&K.nextElementSibling!=null&&!H(re,`

`)){var ge=K.offsetHeight+parseFloat(Q(K).marginTop)+parseFloat(Q(K).marginBottom);K.nextElementSibling.offsetTop>K.offsetTop+ge*1.5&&re.insert(`
`)}return re}function le(K,re){var ge={},be=K.style||{};return be.fontStyle&&Q(K).fontStyle==="italic"&&(ge.italic=!0),be.fontWeight&&(Q(K).fontWeight.startsWith("bold")||parseInt(Q(K).fontWeight)>=700)&&(ge.bold=!0),Object.keys(ge).length>0&&(re=J(re,ge)),parseFloat(be.textIndent||0)>0&&(re=new h.default().insert("	").concat(re)),re}function oe(K,re){var ge=K.data;if(K.parentNode.tagName==="O:P")return re.insert(ge.trim());if(ge.trim().length===0&&K.parentNode.classList.contains("ql-clipboard"))return re;if(!Q(K.parentNode).whiteSpace.startsWith("pre")){var be=function(ke,Re){return Re=Re.replace(/[^\u00a0]/g,""),Re.length<1&&ke?" ":Re};ge=ge.replace(/\r\n/g," ").replace(/\n/g," "),ge=ge.replace(/\s\s+/g,be.bind(be,!0)),(K.previousSibling==null&&U(K.parentNode)||K.previousSibling!=null&&U(K.previousSibling))&&(ge=ge.replace(/^\s+/,be.bind(be,!1))),(K.nextSibling==null&&U(K.parentNode)||K.nextSibling!=null&&U(K.nextSibling))&&(ge=ge.replace(/\s+$/,be.bind(be,!1)))}return re.insert(ge)}C.default=F,C.matchAttributor=ae,C.matchBlot=me,C.matchNewline=Ie,C.matchSpacing=Y,C.matchText=oe},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=A(6),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(){return b(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return _(g,[{key:"optimize",value:function(f){x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,f),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return x(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g}(T.default);l.blotName="bold",l.tagName=["STRONG","B"],C.default=l},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.addControls=C.default=void 0;var _=function(){function k(P,L){var B=[],q=!0,V=!1,X=void 0;try{for(var ue=P[Symbol.iterator](),Z;!(q=(Z=ue.next()).done)&&(B.push(Z.value),!(L&&B.length===L));q=!0);}catch(z){V=!0,X=z}finally{try{!q&&ue.return&&ue.return()}finally{if(V)throw X}}return B}return function(P,L){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return k(P,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function k(P,L){for(var B=0;B<L.length;B++){var q=L[B];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(P,q.key,q)}}return function(P,L,B){return L&&k(P.prototype,L),B&&k(P,B),P}}(),w=A(2),T=f(w),S=A(0),b=f(S),h=A(5),u=f(h),l=A(10),d=f(l),g=A(9),m=f(g);function f(k){return k&&k.__esModule?k:{default:k}}function a(k,P,L){return P in k?Object.defineProperty(k,P,{value:L,enumerable:!0,configurable:!0,writable:!0}):k[P]=L,k}function c(k,P){if(!(k instanceof P))throw new TypeError("Cannot call a class as a function")}function s(k,P){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:k}function v(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);k.prototype=Object.create(P&&P.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(k,P):k.__proto__=P)}var y=(0,d.default)("quill:toolbar"),N=function(k){v(P,k);function P(L,B){c(this,P);var q=s(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,L,B));if(Array.isArray(q.options.container)){var V=document.createElement("div");E(V,q.options.container),L.container.parentNode.insertBefore(V,L.container),q.container=V}else typeof q.options.container=="string"?q.container=document.querySelector(q.options.container):q.container=q.options.container;if(!(q.container instanceof HTMLElement)){var X;return X=y.error("Container required for toolbar",q.options),s(q,X)}return q.container.classList.add("ql-toolbar"),q.controls=[],q.handlers={},Object.keys(q.options.handlers).forEach(function(ue){q.addHandler(ue,q.options.handlers[ue])}),[].forEach.call(q.container.querySelectorAll("button, select"),function(ue){q.attach(ue)}),q.quill.on(u.default.events.EDITOR_CHANGE,function(ue,Z){ue===u.default.events.SELECTION_CHANGE&&q.update(Z)}),q.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){var ue=q.quill.selection.getRange(),Z=_(ue,1),z=Z[0];q.update(z)}),q}return x(P,[{key:"addHandler",value:function(B,q){this.handlers[B]=q}},{key:"attach",value:function(B){var q=this,V=[].find.call(B.classList,function(ue){return ue.indexOf("ql-")===0});if(!!V){if(V=V.slice(3),B.tagName==="BUTTON"&&B.setAttribute("type","button"),this.handlers[V]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[V]==null){y.warn("ignoring attaching to disabled format",V,B);return}if(b.default.query(V)==null){y.warn("ignoring attaching to nonexistent format",V,B);return}}var X=B.tagName==="SELECT"?"change":"click";B.addEventListener(X,function(ue){var Z=void 0;if(B.tagName==="SELECT"){if(B.selectedIndex<0)return;var z=B.options[B.selectedIndex];z.hasAttribute("selected")?Z=!1:Z=z.value||!1}else B.classList.contains("ql-active")?Z=!1:Z=B.value||!B.hasAttribute("value"),ue.preventDefault();q.quill.focus();var j=q.quill.selection.getRange(),F=_(j,1),J=F[0];if(q.handlers[V]!=null)q.handlers[V].call(q,Z);else if(b.default.query(V).prototype instanceof b.default.Embed){if(Z=prompt("Enter "+V),!Z)return;q.quill.updateContents(new T.default().retain(J.index).delete(J.length).insert(a({},V,Z)),u.default.sources.USER)}else q.quill.format(V,Z,u.default.sources.USER);q.update(J)}),this.controls.push([V,B])}}},{key:"update",value:function(B){var q=B==null?{}:this.quill.getFormat(B);this.controls.forEach(function(V){var X=_(V,2),ue=X[0],Z=X[1];if(Z.tagName==="SELECT"){var z=void 0;if(B==null)z=null;else if(q[ue]==null)z=Z.querySelector("option[selected]");else if(!Array.isArray(q[ue])){var j=q[ue];typeof j=="string"&&(j=j.replace(/\"/g,'\\"')),z=Z.querySelector('option[value="'+j+'"]')}z==null?(Z.value="",Z.selectedIndex=-1):z.selected=!0}else if(B==null)Z.classList.remove("ql-active");else if(Z.hasAttribute("value")){var F=q[ue]===Z.getAttribute("value")||q[ue]!=null&&q[ue].toString()===Z.getAttribute("value")||q[ue]==null&&!Z.getAttribute("value");Z.classList.toggle("ql-active",F)}else Z.classList.toggle("ql-active",q[ue]!=null)})}}]),P}(m.default);N.DEFAULTS={};function R(k,P,L){var B=document.createElement("button");B.setAttribute("type","button"),B.classList.add("ql-"+P),L!=null&&(B.value=L),k.appendChild(B)}function E(k,P){Array.isArray(P[0])||(P=[P]),P.forEach(function(L){var B=document.createElement("span");B.classList.add("ql-formats"),L.forEach(function(q){if(typeof q=="string")R(B,q);else{var V=Object.keys(q)[0],X=q[V];Array.isArray(X)?I(B,V,X):R(B,V,X)}}),k.appendChild(B)})}function I(k,P,L){var B=document.createElement("select");B.classList.add("ql-"+P),L.forEach(function(q){var V=document.createElement("option");q!==!1?V.setAttribute("value",q):V.setAttribute("selected","selected"),B.appendChild(V)}),k.appendChild(B)}N.DEFAULTS={container:null,handlers:{clean:function(){var P=this,L=this.quill.getSelection();if(L!=null)if(L.length==0){var B=this.quill.getFormat();Object.keys(B).forEach(function(q){b.default.query(q,b.default.Scope.INLINE)!=null&&P.quill.format(q,!1)})}else this.quill.removeFormat(L,u.default.sources.USER)},direction:function(P){var L=this.quill.getFormat().align;P==="rtl"&&L==null?this.quill.format("align","right",u.default.sources.USER):!P&&L==="right"&&this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",P,u.default.sources.USER)},indent:function(P){var L=this.quill.getSelection(),B=this.quill.getFormat(L),q=parseInt(B.indent||0);if(P==="+1"||P==="-1"){var V=P==="+1"?1:-1;B.direction==="rtl"&&(V*=-1),this.quill.format("indent",q+V,u.default.sources.USER)}},link:function(P){P===!0&&(P=prompt("Enter link URL:")),this.quill.format("link",P,u.default.sources.USER)},list:function(P){var L=this.quill.getSelection(),B=this.quill.getFormat(L);P==="check"?B.list==="checked"||B.list==="unchecked"?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",P,u.default.sources.USER)}}},C.default=N,C.addControls=E},function($,C){$.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=A(28),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(m,f){b(this,g);var a=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m));return a.label.innerHTML=f,a.container.classList.add("ql-color-picker"),[].slice.call(a.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(c){c.classList.add("ql-primary")}),a}return _(g,[{key:"buildItem",value:function(f){var a=x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,f);return a.style.backgroundColor=f.getAttribute("value")||"",a}},{key:"selectItem",value:function(f,a){x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,f,a);var c=this.label.querySelector(".ql-color-label"),s=f&&f.getAttribute("data-value")||"";c&&(c.tagName==="line"?c.style.stroke=s:c.style.fill=s)}}]),g}(T.default);C.default=l},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=A(28),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(m,f){b(this,g);var a=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m));return a.container.classList.add("ql-icon-picker"),[].forEach.call(a.container.querySelectorAll(".ql-picker-item"),function(c){c.innerHTML=f[c.getAttribute("data-value")||""]}),a.defaultItem=a.container.querySelector(".ql-selected"),a.selectItem(a.defaultItem),a}return _(g,[{key:"selectItem",value:function(f,a){x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,f,a),f=f||this.defaultItem,this.label.innerHTML=f.innerHTML}}]),g}(T.default);C.default=l},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function T(S,b){for(var h=0;h<b.length;h++){var u=b[h];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(S,u.key,u)}}return function(S,b,h){return b&&T(S.prototype,b),h&&T(S,h),S}}();function x(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}var w=function(){function T(S,b){var h=this;x(this,T),this.quill=S,this.boundsContainer=b||document.body,this.root=S.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return _(T,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(b){var h=b.left+b.width/2-this.root.offsetWidth/2,u=b.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=u+"px",this.root.classList.remove("ql-flip");var l=this.boundsContainer.getBoundingClientRect(),d=this.root.getBoundingClientRect(),g=0;if(d.right>l.right&&(g=l.right-d.right,this.root.style.left=h+g+"px"),d.left<l.left&&(g=l.left-d.left,this.root.style.left=h+g+"px"),d.bottom>l.bottom){var m=d.bottom-d.top,f=b.bottom-b.top+m;this.root.style.top=u-f+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),T}();C.default=w},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function I(k,P){var L=[],B=!0,q=!1,V=void 0;try{for(var X=k[Symbol.iterator](),ue;!(B=(ue=X.next()).done)&&(L.push(ue.value),!(P&&L.length===P));B=!0);}catch(Z){q=!0,V=Z}finally{try{!B&&X.return&&X.return()}finally{if(q)throw V}}return L}return function(k,P){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return I(k,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function I(k,P,L){k===null&&(k=Function.prototype);var B=Object.getOwnPropertyDescriptor(k,P);if(B===void 0){var q=Object.getPrototypeOf(k);return q===null?void 0:I(q,P,L)}else{if("value"in B)return B.value;var V=B.get;return V===void 0?void 0:V.call(L)}},w=function(){function I(k,P){for(var L=0;L<P.length;L++){var B=P[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(k,B.key,B)}}return function(k,P,L){return P&&I(k.prototype,P),L&&I(k,L),k}}(),T=A(3),S=c(T),b=A(8),h=c(b),u=A(43),l=c(u),d=A(27),g=c(d),m=A(15),f=A(41),a=c(f);function c(I){return I&&I.__esModule?I:{default:I}}function s(I,k){if(!(I instanceof k))throw new TypeError("Cannot call a class as a function")}function v(I,k){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:I}function y(I,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);I.prototype=Object.create(k&&k.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(I,k):I.__proto__=k)}var N=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],R=function(I){y(k,I);function k(P,L){s(this,k),L.modules.toolbar!=null&&L.modules.toolbar.container==null&&(L.modules.toolbar.container=N);var B=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,P,L));return B.quill.container.classList.add("ql-snow"),B}return w(k,[{key:"extendToolbar",value:function(L){L.container.classList.add("ql-snow"),this.buildButtons([].slice.call(L.container.querySelectorAll("button")),a.default),this.buildPickers([].slice.call(L.container.querySelectorAll("select")),a.default),this.tooltip=new E(this.quill,this.options.bounds),L.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(B,q){L.handlers.link.call(L,!q.format.link)})}}]),k}(l.default);R.DEFAULTS=(0,S.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){if(k){var P=this.quill.getSelection();if(P==null||P.length==0)return;var L=this.quill.getText(P);/^\S+@\S+\.\S+$/.test(L)&&L.indexOf("mailto:")!==0&&(L="mailto:"+L);var B=this.quill.theme.tooltip;B.edit("link",L)}else this.quill.format("link",!1)}}}}});var E=function(I){y(k,I);function k(P,L){s(this,k);var B=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,P,L));return B.preview=B.root.querySelector("a.ql-preview"),B}return w(k,[{key:"listen",value:function(){var L=this;x(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(B){L.root.classList.contains("ql-editing")?L.save():L.edit("link",L.preview.textContent),B.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(B){if(L.linkRange!=null){var q=L.linkRange;L.restoreFocus(),L.quill.formatText(q,"link",!1,h.default.sources.USER),delete L.linkRange}B.preventDefault(),L.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(B,q,V){if(B!=null){if(B.length===0&&V===h.default.sources.USER){var X=L.quill.scroll.descendant(g.default,B.index),ue=_(X,2),Z=ue[0],z=ue[1];if(Z!=null){L.linkRange=new m.Range(B.index-z,Z.length());var j=g.default.formats(Z.domNode);L.preview.textContent=j,L.preview.setAttribute("href",j),L.show(),L.position(L.quill.getBounds(L.linkRange));return}}else delete L.linkRange;L.hide()}})}},{key:"show",value:function(){x(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),k}(u.BaseTooltip);E.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),C.default=R},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(29),x=pe(_),w=A(36),T=A(38),S=A(64),b=A(65),h=pe(b),u=A(66),l=pe(u),d=A(67),g=pe(d),m=A(37),f=A(26),a=A(39),c=A(40),s=A(56),v=pe(s),y=A(68),N=pe(y),R=A(27),E=pe(R),I=A(69),k=pe(I),P=A(70),L=pe(P),B=A(71),q=pe(B),V=A(72),X=pe(V),ue=A(73),Z=pe(ue),z=A(13),j=pe(z),F=A(74),J=pe(F),Q=A(75),H=pe(Q),U=A(57),W=pe(U),ne=A(41),ae=pe(ne),me=A(28),Te=pe(me),De=A(59),Pe=pe(De),Ie=A(60),Y=pe(Ie),le=A(61),oe=pe(le),K=A(108),re=pe(K),ge=A(62),be=pe(ge);function pe(ke){return ke&&ke.__esModule?ke:{default:ke}}x.default.register({"attributors/attribute/direction":T.DirectionAttribute,"attributors/class/align":w.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":T.DirectionClass,"attributors/class/font":a.FontClass,"attributors/class/size":c.SizeClass,"attributors/style/align":w.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":T.DirectionStyle,"attributors/style/font":a.FontStyle,"attributors/style/size":c.SizeStyle},!0),x.default.register({"formats/align":w.AlignClass,"formats/direction":T.DirectionClass,"formats/indent":S.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":a.FontClass,"formats/size":c.SizeClass,"formats/blockquote":h.default,"formats/code-block":j.default,"formats/header":l.default,"formats/list":g.default,"formats/bold":v.default,"formats/code":z.Code,"formats/italic":N.default,"formats/link":E.default,"formats/script":k.default,"formats/strike":L.default,"formats/underline":q.default,"formats/image":X.default,"formats/video":Z.default,"formats/list/item":d.ListItem,"modules/formula":J.default,"modules/syntax":H.default,"modules/toolbar":W.default,"themes/bubble":re.default,"themes/snow":be.default,"ui/icons":ae.default,"ui/picker":Te.default,"ui/icon-picker":Y.default,"ui/color-picker":Pe.default,"ui/tooltip":oe.default},!0),C.default=x.default},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.IndentClass=void 0;var _=function(){function g(m,f){for(var a=0;a<f.length;a++){var c=f[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,f,a){return f&&g(m.prototype,f),a&&g(m,a),m}}(),x=function g(m,f,a){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,f);if(c===void 0){var s=Object.getPrototypeOf(m);return s===null?void 0:g(s,f,a)}else{if("value"in c)return c.value;var v=c.get;return v===void 0?void 0:v.call(a)}},w=A(0),T=S(w);function S(g){return g&&g.__esModule?g:{default:g}}function b(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function h(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function u(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var l=function(g){u(m,g);function m(){return b(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return _(m,[{key:"add",value:function(a,c){if(c==="+1"||c==="-1"){var s=this.value(a)||0;c=c==="+1"?s+1:s-1}return c===0?(this.remove(a),!0):x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,a,c)}},{key:"canAdd",value:function(a,c){return x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,a,c)||x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,a,parseInt(c))}},{key:"value",value:function(a){return parseInt(x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,a))||void 0}}]),m}(T.default.Attributor.Class),d=new l("indent","ql-indent",{scope:T.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});C.IndentClass=d},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(4),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default);h.blotName="blockquote",h.tagName="blockquote",C.default=h},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function l(d,g){for(var m=0;m<g.length;m++){var f=g[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(d,f.key,f)}}return function(d,g,m){return g&&l(d.prototype,g),m&&l(d,m),d}}(),x=A(4),w=T(x);function T(l){return l&&l.__esModule?l:{default:l}}function S(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}function b(l,d){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:l}function h(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);l.prototype=Object.create(d&&d.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(l,d):l.__proto__=d)}var u=function(l){h(d,l);function d(){return S(this,d),b(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return _(d,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),d}(w.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],C.default=u},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.ListItem=void 0;var _=function(){function s(v,y){for(var N=0;N<y.length;N++){var R=y[N];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(v,R.key,R)}}return function(v,y,N){return y&&s(v.prototype,y),N&&s(v,N),v}}(),x=function s(v,y,N){v===null&&(v=Function.prototype);var R=Object.getOwnPropertyDescriptor(v,y);if(R===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:s(E,y,N)}else{if("value"in R)return R.value;var I=R.get;return I===void 0?void 0:I.call(N)}},w=A(0),T=l(w),S=A(4),b=l(S),h=A(25),u=l(h);function l(s){return s&&s.__esModule?s:{default:s}}function d(s,v,y){return v in s?Object.defineProperty(s,v,{value:y,enumerable:!0,configurable:!0,writable:!0}):s[v]=y,s}function g(s,v){if(!(s instanceof v))throw new TypeError("Cannot call a class as a function")}function m(s,v){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:s}function f(s,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);s.prototype=Object.create(v&&v.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(s,v):s.__proto__=v)}var a=function(s){f(v,s);function v(){return g(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return _(v,[{key:"format",value:function(N,R){N===c.blotName&&!R?this.replaceWith(T.default.create(this.statics.scope)):x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,N,R)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(N,R){return this.parent.isolate(this.offset(this.parent),this.length()),N===this.parent.statics.blotName?(this.parent.replaceWith(N,R),this):(this.parent.unwrap(),x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"replaceWith",this).call(this,N,R))}}],[{key:"formats",value:function(N){return N.tagName===this.tagName?void 0:x(v.__proto__||Object.getPrototypeOf(v),"formats",this).call(this,N)}}]),v}(b.default);a.blotName="list-item",a.tagName="LI";var c=function(s){f(v,s),_(v,null,[{key:"create",value:function(N){var R=N==="ordered"?"OL":"UL",E=x(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,R);return(N==="checked"||N==="unchecked")&&E.setAttribute("data-checked",N==="checked"),E}},{key:"formats",value:function(N){if(N.tagName==="OL")return"ordered";if(N.tagName==="UL")return N.hasAttribute("data-checked")?N.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function v(y){g(this,v);var N=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y)),R=function(I){if(I.target.parentNode===y){var k=N.statics.formats(y),P=T.default.find(I.target);k==="checked"?P.format("list","unchecked"):k==="unchecked"&&P.format("list","checked")}};return y.addEventListener("touchstart",R),y.addEventListener("mousedown",R),N}return _(v,[{key:"format",value:function(N,R){this.children.length>0&&this.children.tail.format(N,R)}},{key:"formats",value:function(){return d({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(N,R){if(N instanceof a)x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertBefore",this).call(this,N,R);else{var E=R==null?this.length():R.offset(this),I=this.split(E);I.parent.insertBefore(N,I)}}},{key:"optimize",value:function(N){x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,N);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&R.domNode.tagName===this.domNode.tagName&&R.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(R.moveChildren(this),R.remove())}},{key:"replace",value:function(N){if(N.statics.blotName!==this.statics.blotName){var R=T.default.create(this.statics.defaultChild);N.moveChildren(R),this.appendChild(R)}x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"replace",this).call(this,N)}}]),v}(u.default);c.blotName="list",c.scope=T.default.Scope.BLOCK_BLOT,c.tagName=["OL","UL"],c.defaultChild="list-item",c.allowedChildren=[a],C.ListItem=a,C.default=c},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(56),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default);h.blotName="italic",h.tagName=["EM","I"],C.default=h},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=A(6),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(){return b(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return _(g,null,[{key:"create",value:function(f){return f==="super"?document.createElement("sup"):f==="sub"?document.createElement("sub"):x(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,f)}},{key:"formats",value:function(f){if(f.tagName==="SUB")return"sub";if(f.tagName==="SUP")return"super"}}]),g}(T.default);l.blotName="script",l.tagName=["SUB","SUP"],C.default=l},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(6),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default);h.blotName="strike",h.tagName="S",C.default=h},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=A(6),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default);h.blotName="underline",h.tagName="U",C.default=h},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),x=function m(f,a,c){f===null&&(f=Function.prototype);var s=Object.getOwnPropertyDescriptor(f,a);if(s===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:m(v,a,c)}else{if("value"in s)return s.value;var y=s.get;return y===void 0?void 0:y.call(c)}},w=A(0),T=b(w),S=A(27);function b(m){return m&&m.__esModule?m:{default:m}}function h(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function u(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function l(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var d=["alt","height","width"],g=function(m){l(f,m);function f(){return h(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return _(f,[{key:"format",value:function(c,s){d.indexOf(c)>-1?s?this.domNode.setAttribute(c,s):this.domNode.removeAttribute(c):x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,c,s)}}],[{key:"create",value:function(c){var s=x(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,c);return typeof c=="string"&&s.setAttribute("src",this.sanitize(c)),s}},{key:"formats",value:function(c){return d.reduce(function(s,v){return c.hasAttribute(v)&&(s[v]=c.getAttribute(v)),s},{})}},{key:"match",value:function(c){return/\.(jpe?g|gif|png)$/.test(c)||/^data:image\/.+;base64/.test(c)}},{key:"sanitize",value:function(c){return(0,S.sanitize)(c,["http","https","data"])?c:"//:0"}},{key:"value",value:function(c){return c.getAttribute("src")}}]),f}(T.default.Embed);g.blotName="image",g.tagName="IMG",C.default=g},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),x=function m(f,a,c){f===null&&(f=Function.prototype);var s=Object.getOwnPropertyDescriptor(f,a);if(s===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:m(v,a,c)}else{if("value"in s)return s.value;var y=s.get;return y===void 0?void 0:y.call(c)}},w=A(4),T=A(27),S=b(T);function b(m){return m&&m.__esModule?m:{default:m}}function h(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function u(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function l(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var d=["height","width"],g=function(m){l(f,m);function f(){return h(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return _(f,[{key:"format",value:function(c,s){d.indexOf(c)>-1?s?this.domNode.setAttribute(c,s):this.domNode.removeAttribute(c):x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,c,s)}}],[{key:"create",value:function(c){var s=x(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,c);return s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen",!0),s.setAttribute("src",this.sanitize(c)),s}},{key:"formats",value:function(c){return d.reduce(function(s,v){return c.hasAttribute(v)&&(s[v]=c.getAttribute(v)),s},{})}},{key:"sanitize",value:function(c){return S.default.sanitize(c)}},{key:"value",value:function(c){return c.getAttribute("src")}}]),f}(w.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",C.default=g},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.FormulaBlot=void 0;var _=function(){function c(s,v){for(var y=0;y<v.length;y++){var N=v[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(s,N.key,N)}}return function(s,v,y){return v&&c(s.prototype,v),y&&c(s,y),s}}(),x=function c(s,v,y){s===null&&(s=Function.prototype);var N=Object.getOwnPropertyDescriptor(s,v);if(N===void 0){var R=Object.getPrototypeOf(s);return R===null?void 0:c(R,v,y)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(y)}},w=A(35),T=l(w),S=A(5),b=l(S),h=A(9),u=l(h);function l(c){return c&&c.__esModule?c:{default:c}}function d(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function g(c,s){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:c}function m(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(c,s):c.__proto__=s)}var f=function(c){m(s,c);function s(){return d(this,s),g(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return _(s,null,[{key:"create",value:function(y){var N=x(s.__proto__||Object.getPrototypeOf(s),"create",this).call(this,y);return typeof y=="string"&&(window.katex.render(y,N,{throwOnError:!1,errorColor:"#f00"}),N.setAttribute("data-value",y)),N}},{key:"value",value:function(y){return y.getAttribute("data-value")}}]),s}(T.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var a=function(c){m(s,c),_(s,null,[{key:"register",value:function(){b.default.register(f,!0)}}]);function s(){d(this,s);var v=g(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return v}return s}(u.default);C.FormulaBlot=f,C.default=a},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.CodeToken=C.CodeBlock=void 0;var _=function(){function y(N,R){for(var E=0;E<R.length;E++){var I=R[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}return function(N,R,E){return R&&y(N.prototype,R),E&&y(N,E),N}}(),x=function y(N,R,E){N===null&&(N=Function.prototype);var I=Object.getOwnPropertyDescriptor(N,R);if(I===void 0){var k=Object.getPrototypeOf(N);return k===null?void 0:y(k,R,E)}else{if("value"in I)return I.value;var P=I.get;return P===void 0?void 0:P.call(E)}},w=A(0),T=g(w),S=A(5),b=g(S),h=A(9),u=g(h),l=A(13),d=g(l);function g(y){return y&&y.__esModule?y:{default:y}}function m(y,N){if(!(y instanceof N))throw new TypeError("Cannot call a class as a function")}function f(y,N){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:y}function a(y,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);y.prototype=Object.create(N&&N.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(y,N):y.__proto__=N)}var c=function(y){a(N,y);function N(){return m(this,N),f(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return _(N,[{key:"replaceWith",value:function(E){this.domNode.textContent=this.domNode.textContent,this.attach(),x(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replaceWith",this).call(this,E)}},{key:"highlight",value:function(E){var I=this.domNode.textContent;this.cachedText!==I&&((I.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=E(I),this.domNode.normalize(),this.attach()),this.cachedText=I)}}]),N}(d.default);c.className="ql-syntax";var s=new T.default.Attributor.Class("token","hljs",{scope:T.default.Scope.INLINE}),v=function(y){a(N,y),_(N,null,[{key:"register",value:function(){b.default.register(s,!0),b.default.register(c,!0)}}]);function N(R,E){m(this,N);var I=f(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,R,E));if(typeof I.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var k=null;return I.quill.on(b.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(k),k=setTimeout(function(){I.highlight(),k=null},I.options.interval)}),I.highlight(),I}return _(N,[{key:"highlight",value:function(){var E=this;if(!this.quill.selection.composing){this.quill.update(b.default.sources.USER);var I=this.quill.getSelection();this.quill.scroll.descendants(c).forEach(function(k){k.highlight(E.options.highlight)}),this.quill.update(b.default.sources.SILENT),I!=null&&this.quill.setSelection(I,b.default.sources.SILENT)}}}]),N}(u.default);v.DEFAULTS={highlight:function(){return window.hljs==null?null:function(y){var N=window.hljs.highlightAuto(y);return N.value}}(),interval:1e3},C.CodeBlock=c,C.CodeToken=s,C.default=v},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function($,C){$.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function($,C){$.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function($,C){$.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function($,C){$.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function($,C,A){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BubbleTooltip=void 0;var _=function N(R,E,I){R===null&&(R=Function.prototype);var k=Object.getOwnPropertyDescriptor(R,E);if(k===void 0){var P=Object.getPrototypeOf(R);return P===null?void 0:N(P,E,I)}else{if("value"in k)return k.value;var L=k.get;return L===void 0?void 0:L.call(I)}},x=function(){function N(R,E){for(var I=0;I<E.length;I++){var k=E[I];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(R,k.key,k)}}return function(R,E,I){return E&&N(R.prototype,E),I&&N(R,I),R}}(),w=A(3),T=m(w),S=A(8),b=m(S),h=A(43),u=m(h),l=A(15),d=A(41),g=m(d);function m(N){return N&&N.__esModule?N:{default:N}}function f(N,R){if(!(N instanceof R))throw new TypeError("Cannot call a class as a function")}function a(N,R){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:N}function c(N,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);N.prototype=Object.create(R&&R.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(N,R):N.__proto__=R)}var s=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],v=function(N){c(R,N);function R(E,I){f(this,R),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=s);var k=a(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,E,I));return k.quill.container.classList.add("ql-bubble"),k}return x(R,[{key:"extendToolbar",value:function(I){this.tooltip=new y(this.quill,this.options.bounds),this.tooltip.root.appendChild(I.container),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),g.default)}}]),R}(u.default);v.DEFAULTS=(0,T.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){R?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var y=function(N){c(R,N);function R(E,I){f(this,R);var k=a(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,E,I));return k.quill.on(b.default.events.EDITOR_CHANGE,function(P,L,B,q){if(P===b.default.events.SELECTION_CHANGE)if(L!=null&&L.length>0&&q===b.default.sources.USER){k.show(),k.root.style.left="0px",k.root.style.width="",k.root.style.width=k.root.offsetWidth+"px";var V=k.quill.getLines(L.index,L.length);if(V.length===1)k.position(k.quill.getBounds(L));else{var X=V[V.length-1],ue=k.quill.getIndex(X),Z=Math.min(X.length()-1,L.index+L.length-ue),z=k.quill.getBounds(new l.Range(ue,Z));k.position(z)}}else document.activeElement!==k.textbox&&k.quill.hasFocus()&&k.hide()}),k}return x(R,[{key:"listen",value:function(){var I=this;_(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){I.root.classList.remove("ql-editing")}),this.quill.on(b.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!I.root.classList.contains("ql-hidden")){var k=I.quill.getSelection();k!=null&&I.position(I.quill.getBounds(k))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(I){var k=_(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"position",this).call(this,I),P=this.root.querySelector(".ql-tooltip-arrow");if(P.style.marginLeft="",k===0)return k;P.style.marginLeft=-1*k-P.offsetWidth/2+"px"}}]),R}(h.BaseTooltip);y.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),C.BubbleTooltip=y,C.default=v},function($,C,A){$.exports=A(63)}]).default})})(Au);const Eu=$s(Au.exports);var ku={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(Fe,de){(function($,C){Fe.exports=C()})(self,()=>(()=>{var $={582:(x,w,T)=>{T.d(w,{Z:()=>l});var S=T(81),b=T.n(S),h=T(645),u=T.n(h)()(b());u.push([x.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const l=u},645:x=>{x.exports=function(w){var T=[];return T.toString=function(){return this.map(function(S){var b="",h=S[5]!==void 0;return S[4]&&(b+="@supports (".concat(S[4],") {")),S[2]&&(b+="@media ".concat(S[2]," {")),h&&(b+="@layer".concat(S[5].length>0?" ".concat(S[5]):""," {")),b+=w(S),h&&(b+="}"),S[2]&&(b+="}"),S[4]&&(b+="}"),b}).join("")},T.i=function(S,b,h,u,l){typeof S=="string"&&(S=[[null,S,void 0]]);var d={};if(h)for(var g=0;g<this.length;g++){var m=this[g][0];m!=null&&(d[m]=!0)}for(var f=0;f<S.length;f++){var a=[].concat(S[f]);h&&d[a[0]]||(l!==void 0&&(a[5]===void 0||(a[1]="@layer".concat(a[5].length>0?" ".concat(a[5]):""," {").concat(a[1],"}")),a[5]=l),b&&(a[2]&&(a[1]="@media ".concat(a[2]," {").concat(a[1],"}")),a[2]=b),u&&(a[4]?(a[1]="@supports (".concat(a[4],") {").concat(a[1],"}"),a[4]=u):a[4]="".concat(u)),T.push(a))}},T}},81:x=>{x.exports=function(w){return w[1]}},465:(x,w,T)=>{x=T.nmd(x);var S="__lodash_hash_undefined__",b=9007199254740991,h="[object Arguments]",u="[object Boolean]",l="[object Date]",d="[object Function]",g="[object GeneratorFunction]",m="[object Map]",f="[object Number]",a="[object Object]",c="[object Promise]",s="[object RegExp]",v="[object Set]",y="[object String]",N="[object Symbol]",R="[object WeakMap]",E="[object ArrayBuffer]",I="[object DataView]",k="[object Float32Array]",P="[object Float64Array]",L="[object Int8Array]",B="[object Int16Array]",q="[object Int32Array]",V="[object Uint8Array]",X="[object Uint8ClampedArray]",ue="[object Uint16Array]",Z="[object Uint32Array]",z=/\w*$/,j=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,J={};J[h]=J["[object Array]"]=J[E]=J[I]=J[u]=J[l]=J[k]=J[P]=J[L]=J[B]=J[q]=J[m]=J[f]=J[a]=J[s]=J[v]=J[y]=J[N]=J[V]=J[X]=J[ue]=J[Z]=!0,J["[object Error]"]=J[d]=J[R]=!1;var Q=typeof T.g=="object"&&T.g&&T.g.Object===Object&&T.g,H=typeof self=="object"&&self&&self.Object===Object&&self,U=Q||H||Function("return this")(),W=w&&!w.nodeType&&w,ne=W&&x&&!x.nodeType&&x,ae=ne&&ne.exports===W;function me(ee,fe){return ee.set(fe[0],fe[1]),ee}function Te(ee,fe){return ee.add(fe),ee}function De(ee,fe,Ne,xe){var et=-1,qe=ee?ee.length:0;for(xe&&qe&&(Ne=ee[++et]);++et<qe;)Ne=fe(Ne,ee[et],et,ee);return Ne}function Pe(ee){var fe=!1;if(ee!=null&&typeof ee.toString!="function")try{fe=!!(ee+"")}catch{}return fe}function Ie(ee){var fe=-1,Ne=Array(ee.size);return ee.forEach(function(xe,et){Ne[++fe]=[et,xe]}),Ne}function Y(ee,fe){return function(Ne){return ee(fe(Ne))}}function le(ee){var fe=-1,Ne=Array(ee.size);return ee.forEach(function(xe){Ne[++fe]=xe}),Ne}var oe,K=Array.prototype,re=Function.prototype,ge=Object.prototype,be=U["__core-js_shared__"],pe=(oe=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||""))?"Symbol(src)_1."+oe:"",ke=re.toString,Re=ge.hasOwnProperty,je=ge.toString,nt=RegExp("^"+ke.call(Re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ut=ae?U.Buffer:void 0,He=U.Symbol,Ke=U.Uint8Array,_e=Y(Object.getPrototypeOf,Object),Qe=Object.create,zt=ge.propertyIsEnumerable,yn=K.splice,Kt=Object.getOwnPropertySymbols,bn=ut?ut.isBuffer:void 0,Qt=Y(Object.keys,Object),Wt=En(U,"DataView"),Rt=En(U,"Map"),en=En(U,"Promise"),St=En(U,"Set"),Gt=En(U,"WeakMap"),tn=En(Object,"create"),Ur=Pn(Wt),nn=Pn(Rt),In=Pn(en),or=Pn(St),Jr=Pn(Gt),sr=He?He.prototype:void 0,ni=sr?sr.valueOf:void 0;function pn(ee){var fe=-1,Ne=ee?ee.length:0;for(this.clear();++fe<Ne;){var xe=ee[fe];this.set(xe[0],xe[1])}}function Xt(ee){var fe=-1,Ne=ee?ee.length:0;for(this.clear();++fe<Ne;){var xe=ee[fe];this.set(xe[0],xe[1])}}function rn(ee){var fe=-1,Ne=ee?ee.length:0;for(this.clear();++fe<Ne;){var xe=ee[fe];this.set(xe[0],xe[1])}}function Yn(ee){this.__data__=new Xt(ee)}function Tn(ee,fe,Ne){var xe=ee[fe];Re.call(ee,fe)&&te(xe,Ne)&&(Ne!==void 0||fe in ee)||(ee[fe]=Ne)}function ri(ee,fe){for(var Ne=ee.length;Ne--;)if(te(ee[Ne][0],fe))return Ne;return-1}function _n(ee,fe,Ne,xe,et,qe,ct){var Ge;if(xe&&(Ge=qe?xe(ee,et,qe,ct):xe(ee)),Ge!==void 0)return Ge;if(!dt(ee))return ee;var mt=se(ee);if(mt){if(Ge=function(Ue){var at=Ue.length,Je=Ue.constructor(at);return at&&typeof Ue[0]=="string"&&Re.call(Ue,"index")&&(Je.index=Ue.index,Je.input=Ue.input),Je}(ee),!fe)return function(Ue,at){var Je=-1,Xe=Ue.length;for(at||(at=Array(Xe));++Je<Xe;)at[Je]=Ue[Je];return at}(ee,Ge)}else{var pt=ce(ee),Pt=pt==d||pt==g;if(Se(ee))return function(Ue,at){if(at)return Ue.slice();var Je=new Ue.constructor(Ue.length);return Ue.copy(Je),Je}(ee,fe);if(pt==a||pt==h||Pt&&!qe){if(Pe(ee))return qe?ee:{};if(Ge=function(Ue){return typeof Ue.constructor!="function"||lr(Ue)?{}:dt(at=_e(Ue))?Qe(at):{};var at}(Pt?{}:ee),!fe)return function(Ue,at){return Li(Ue,ii(Ue),at)}(ee,function(Ue,at){return Ue&&Li(at,st(at),Ue)}(Ge,ee))}else{if(!J[pt])return qe?ee:{};Ge=function(Ue,at,Je,Xe){var rt,Nt=Ue.constructor;switch(at){case E:return ar(Ue);case u:case l:return new Nt(+Ue);case I:return function(tt,_t){var vt=_t?ar(tt.buffer):tt.buffer;return new tt.constructor(vt,tt.byteOffset,tt.byteLength)}(Ue,Xe);case k:case P:case L:case B:case q:case V:case X:case ue:case Z:return function(tt,_t){var vt=_t?ar(tt.buffer):tt.buffer;return new tt.constructor(vt,tt.byteOffset,tt.length)}(Ue,Xe);case m:return function(tt,_t,vt){return De(_t?vt(Ie(tt),!0):Ie(tt),me,new tt.constructor)}(Ue,Xe,Je);case f:case y:return new Nt(Ue);case s:return function(tt){var _t=new tt.constructor(tt.source,z.exec(tt));return _t.lastIndex=tt.lastIndex,_t}(Ue);case v:return function(tt,_t,vt){return De(_t?vt(le(tt),!0):le(tt),Te,new tt.constructor)}(Ue,Xe,Je);case N:return rt=Ue,ni?Object(ni.call(rt)):{}}}(ee,pt,_n,fe)}}ct||(ct=new Yn);var Dt=ct.get(ee);if(Dt)return Dt;if(ct.set(ee,Ge),!mt)var sn=Ne?function(Ue){return function(at,Je,Xe){var rt=Je(at);return se(at)?rt:function(Nt,tt){for(var _t=-1,vt=tt.length,kt=Nt.length;++_t<vt;)Nt[kt+_t]=tt[_t];return Nt}(rt,Xe(at))}(Ue,st,ii)}(ee):st(ee);return function(Ue,at){for(var Je=-1,Xe=Ue?Ue.length:0;++Je<Xe&&at(Ue[Je],Je)!==!1;);}(sn||ee,function(Ue,at){sn&&(Ue=ee[at=Ue]),Tn(Ge,at,_n(Ue,fe,Ne,xe,at,ee,ct))}),Ge}function ar(ee){var fe=new ee.constructor(ee.byteLength);return new Ke(fe).set(new Ke(ee)),fe}function Li(ee,fe,Ne,xe){Ne||(Ne={});for(var et=-1,qe=fe.length;++et<qe;){var ct=fe[et],Ge=xe?xe(Ne[ct],ee[ct],ct,Ne,ee):void 0;Tn(Ne,ct,Ge===void 0?ee[ct]:Ge)}return Ne}function on(ee,fe){var Ne,xe,et=ee.__data__;return((xe=typeof(Ne=fe))=="string"||xe=="number"||xe=="symbol"||xe=="boolean"?Ne!=="__proto__":Ne===null)?et[typeof fe=="string"?"string":"hash"]:et.map}function En(ee,fe){var Ne=function(xe,et){return xe==null?void 0:xe[et]}(ee,fe);return function(xe){return!(!dt(xe)||(et=xe,pe&&pe in et))&&(Ce(xe)||Pe(xe)?nt:j).test(Pn(xe));var et}(Ne)?Ne:void 0}pn.prototype.clear=function(){this.__data__=tn?tn(null):{}},pn.prototype.delete=function(ee){return this.has(ee)&&delete this.__data__[ee]},pn.prototype.get=function(ee){var fe=this.__data__;if(tn){var Ne=fe[ee];return Ne===S?void 0:Ne}return Re.call(fe,ee)?fe[ee]:void 0},pn.prototype.has=function(ee){var fe=this.__data__;return tn?fe[ee]!==void 0:Re.call(fe,ee)},pn.prototype.set=function(ee,fe){return this.__data__[ee]=tn&&fe===void 0?S:fe,this},Xt.prototype.clear=function(){this.__data__=[]},Xt.prototype.delete=function(ee){var fe=this.__data__,Ne=ri(fe,ee);return!(Ne<0||(Ne==fe.length-1?fe.pop():yn.call(fe,Ne,1),0))},Xt.prototype.get=function(ee){var fe=this.__data__,Ne=ri(fe,ee);return Ne<0?void 0:fe[Ne][1]},Xt.prototype.has=function(ee){return ri(this.__data__,ee)>-1},Xt.prototype.set=function(ee,fe){var Ne=this.__data__,xe=ri(Ne,ee);return xe<0?Ne.push([ee,fe]):Ne[xe][1]=fe,this},rn.prototype.clear=function(){this.__data__={hash:new pn,map:new(Rt||Xt),string:new pn}},rn.prototype.delete=function(ee){return on(this,ee).delete(ee)},rn.prototype.get=function(ee){return on(this,ee).get(ee)},rn.prototype.has=function(ee){return on(this,ee).has(ee)},rn.prototype.set=function(ee,fe){return on(this,ee).set(ee,fe),this},Yn.prototype.clear=function(){this.__data__=new Xt},Yn.prototype.delete=function(ee){return this.__data__.delete(ee)},Yn.prototype.get=function(ee){return this.__data__.get(ee)},Yn.prototype.has=function(ee){return this.__data__.has(ee)},Yn.prototype.set=function(ee,fe){var Ne=this.__data__;if(Ne instanceof Xt){var xe=Ne.__data__;if(!Rt||xe.length<199)return xe.push([ee,fe]),this;Ne=this.__data__=new rn(xe)}return Ne.set(ee,fe),this};var ii=Kt?Y(Kt,Object):function(){return[]},ce=function(ee){return je.call(ee)};function Mi(ee,fe){return!!(fe=fe==null?b:fe)&&(typeof ee=="number"||F.test(ee))&&ee>-1&&ee%1==0&&ee<fe}function lr(ee){var fe=ee&&ee.constructor;return ee===(typeof fe=="function"&&fe.prototype||ge)}function Pn(ee){if(ee!=null){try{return ke.call(ee)}catch{}try{return ee+""}catch{}}return""}function te(ee,fe){return ee===fe||ee!=ee&&fe!=fe}(Wt&&ce(new Wt(new ArrayBuffer(1)))!=I||Rt&&ce(new Rt)!=m||en&&ce(en.resolve())!=c||St&&ce(new St)!=v||Gt&&ce(new Gt)!=R)&&(ce=function(ee){var fe=je.call(ee),Ne=fe==a?ee.constructor:void 0,xe=Ne?Pn(Ne):void 0;if(xe)switch(xe){case Ur:return I;case nn:return m;case In:return c;case or:return v;case Jr:return R}return fe});var se=Array.isArray;function ve(ee){return ee!=null&&function(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=b}(ee.length)&&!Ce(ee)}var Se=bn||function(){return!1};function Ce(ee){var fe=dt(ee)?je.call(ee):"";return fe==d||fe==g}function dt(ee){var fe=typeof ee;return!!ee&&(fe=="object"||fe=="function")}function st(ee){return ve(ee)?function(fe,Ne){var xe=se(fe)||function(Ge){return function(mt){return function(pt){return!!pt&&typeof pt=="object"}(mt)&&ve(mt)}(Ge)&&Re.call(Ge,"callee")&&(!zt.call(Ge,"callee")||je.call(Ge)==h)}(fe)?function(Ge,mt){for(var pt=-1,Pt=Array(Ge);++pt<Ge;)Pt[pt]=mt(pt);return Pt}(fe.length,String):[],et=xe.length,qe=!!et;for(var ct in fe)!Ne&&!Re.call(fe,ct)||qe&&(ct=="length"||Mi(ct,et))||xe.push(ct);return xe}(ee):function(fe){if(!lr(fe))return Qt(fe);var Ne=[];for(var xe in Object(fe))Re.call(fe,xe)&&xe!="constructor"&&Ne.push(xe);return Ne}(ee)}x.exports=function(ee){return _n(ee,!0,!0)}},307:(x,w,T)=>{x=T.nmd(x);var S="__lodash_hash_undefined__",b=9007199254740991,h="[object Arguments]",u="[object Array]",l="[object Boolean]",d="[object Date]",g="[object Error]",m="[object Function]",f="[object Map]",a="[object Number]",c="[object Object]",s="[object Promise]",v="[object RegExp]",y="[object Set]",N="[object String]",R="[object WeakMap]",E="[object ArrayBuffer]",I="[object DataView]",k=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[h]=L[u]=L[E]=L[l]=L[I]=L[d]=L[g]=L[m]=L[f]=L[a]=L[c]=L[v]=L[y]=L[N]=L[R]=!1;var B=typeof T.g=="object"&&T.g&&T.g.Object===Object&&T.g,q=typeof self=="object"&&self&&self.Object===Object&&self,V=B||q||Function("return this")(),X=w&&!w.nodeType&&w,ue=X&&x&&!x.nodeType&&x,Z=ue&&ue.exports===X,z=Z&&B.process,j=function(){try{return z&&z.binding&&z.binding("util")}catch{}}(),F=j&&j.isTypedArray;function J(se,ve){for(var Se=-1,Ce=se==null?0:se.length;++Se<Ce;)if(ve(se[Se],Se,se))return!0;return!1}function Q(se){var ve=-1,Se=Array(se.size);return se.forEach(function(Ce,dt){Se[++ve]=[dt,Ce]}),Se}function H(se){var ve=-1,Se=Array(se.size);return se.forEach(function(Ce){Se[++ve]=Ce}),Se}var U,W,ne,ae=Array.prototype,me=Function.prototype,Te=Object.prototype,De=V["__core-js_shared__"],Pe=me.toString,Ie=Te.hasOwnProperty,Y=(U=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",le=Te.toString,oe=RegExp("^"+Pe.call(Ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=Z?V.Buffer:void 0,re=V.Symbol,ge=V.Uint8Array,be=Te.propertyIsEnumerable,pe=ae.splice,ke=re?re.toStringTag:void 0,Re=Object.getOwnPropertySymbols,je=K?K.isBuffer:void 0,nt=(W=Object.keys,ne=Object,function(se){return W(ne(se))}),ut=rn(V,"DataView"),He=rn(V,"Map"),Ke=rn(V,"Promise"),_e=rn(V,"Set"),Qe=rn(V,"WeakMap"),zt=rn(Object,"create"),yn=_n(ut),Kt=_n(He),bn=_n(Ke),Qt=_n(_e),Wt=_n(Qe),Rt=re?re.prototype:void 0,en=Rt?Rt.valueOf:void 0;function St(se){var ve=-1,Se=se==null?0:se.length;for(this.clear();++ve<Se;){var Ce=se[ve];this.set(Ce[0],Ce[1])}}function Gt(se){var ve=-1,Se=se==null?0:se.length;for(this.clear();++ve<Se;){var Ce=se[ve];this.set(Ce[0],Ce[1])}}function tn(se){var ve=-1,Se=se==null?0:se.length;for(this.clear();++ve<Se;){var Ce=se[ve];this.set(Ce[0],Ce[1])}}function Ur(se){var ve=-1,Se=se==null?0:se.length;for(this.__data__=new tn;++ve<Se;)this.add(se[ve])}function nn(se){var ve=this.__data__=new Gt(se);this.size=ve.size}function In(se,ve){for(var Se=se.length;Se--;)if(ar(se[Se][0],ve))return Se;return-1}function or(se){return se==null?se===void 0?"[object Undefined]":"[object Null]":ke&&ke in Object(se)?function(ve){var Se=Ie.call(ve,ke),Ce=ve[ke];try{ve[ke]=void 0;var dt=!0}catch{}var st=le.call(ve);return dt&&(Se?ve[ke]=Ce:delete ve[ke]),st}(se):function(ve){return le.call(ve)}(se)}function Jr(se){return lr(se)&&or(se)==h}function sr(se,ve,Se,Ce,dt){return se===ve||(se==null||ve==null||!lr(se)&&!lr(ve)?se!=se&&ve!=ve:function(st,ee,fe,Ne,xe,et){var qe=on(st),ct=on(ee),Ge=qe?u:Tn(st),mt=ct?u:Tn(ee),pt=(Ge=Ge==h?c:Ge)==c,Pt=(mt=mt==h?c:mt)==c,Dt=Ge==mt;if(Dt&&En(st)){if(!En(ee))return!1;qe=!0,pt=!1}if(Dt&&!pt)return et||(et=new nn),qe||Pn(st)?ni(st,ee,fe,Ne,xe,et):function(Xe,rt,Nt,tt,_t,vt,kt){switch(Nt){case I:if(Xe.byteLength!=rt.byteLength||Xe.byteOffset!=rt.byteOffset)return!1;Xe=Xe.buffer,rt=rt.buffer;case E:return!(Xe.byteLength!=rt.byteLength||!vt(new ge(Xe),new ge(rt)));case l:case d:case a:return ar(+Xe,+rt);case g:return Xe.name==rt.name&&Xe.message==rt.message;case v:case N:return Xe==rt+"";case f:var jt=Q;case y:var Rn=1&tt;if(jt||(jt=H),Xe.size!=rt.size&&!Rn)return!1;var Jt=kt.get(Xe);if(Jt)return Jt==rt;tt|=2,kt.set(Xe,rt);var Ct=ni(jt(Xe),jt(rt),tt,_t,vt,kt);return kt.delete(Xe),Ct;case"[object Symbol]":if(en)return en.call(Xe)==en.call(rt)}return!1}(st,ee,Ge,fe,Ne,xe,et);if(!(1&fe)){var sn=pt&&Ie.call(st,"__wrapped__"),Ue=Pt&&Ie.call(ee,"__wrapped__");if(sn||Ue){var at=sn?st.value():st,Je=Ue?ee.value():ee;return et||(et=new nn),xe(at,Je,fe,Ne,et)}}return!!Dt&&(et||(et=new nn),function(Xe,rt,Nt,tt,_t,vt){var kt=1&Nt,jt=pn(Xe),Rn=jt.length;if(Rn!=pn(rt).length&&!kt)return!1;for(var Jt=Rn;Jt--;){var Ct=jt[Jt];if(!(kt?Ct in rt:Ie.call(rt,Ct)))return!1}var Fr=vt.get(Xe);if(Fr&&vt.get(rt))return Fr==rt;var wn=!0;vt.set(Xe,rt),vt.set(rt,Xe);for(var $r=kt;++Jt<Rn;){var ur=Xe[Ct=jt[Jt]],an=rt[Ct];if(tt)var On=kt?tt(an,ur,Ct,rt,Xe,vt):tt(ur,an,Ct,Xe,rt,vt);if(!(On===void 0?ur===an||_t(ur,an,Nt,tt,vt):On)){wn=!1;break}$r||($r=Ct=="constructor")}if(wn&&!$r){var ln=Xe.constructor,un=rt.constructor;ln==un||!("constructor"in Xe)||!("constructor"in rt)||typeof ln=="function"&&ln instanceof ln&&typeof un=="function"&&un instanceof un||(wn=!1)}return vt.delete(Xe),vt.delete(rt),wn}(st,ee,fe,Ne,xe,et))}(se,ve,Se,Ce,sr,dt))}function ni(se,ve,Se,Ce,dt,st){var ee=1&Se,fe=se.length,Ne=ve.length;if(fe!=Ne&&!(ee&&Ne>fe))return!1;var xe=st.get(se);if(xe&&st.get(ve))return xe==ve;var et=-1,qe=!0,ct=2&Se?new Ur:void 0;for(st.set(se,ve),st.set(ve,se);++et<fe;){var Ge=se[et],mt=ve[et];if(Ce)var pt=ee?Ce(mt,Ge,et,ve,se,st):Ce(Ge,mt,et,se,ve,st);if(pt!==void 0){if(pt)continue;qe=!1;break}if(ct){if(!J(ve,function(Pt,Dt){if(sn=Dt,!ct.has(sn)&&(Ge===Pt||dt(Ge,Pt,Se,Ce,st)))return ct.push(Dt);var sn})){qe=!1;break}}else if(Ge!==mt&&!dt(Ge,mt,Se,Ce,st)){qe=!1;break}}return st.delete(se),st.delete(ve),qe}function pn(se){return function(ve,Se,Ce){var dt=Se(ve);return on(ve)?dt:function(st,ee){for(var fe=-1,Ne=ee.length,xe=st.length;++fe<Ne;)st[xe+fe]=ee[fe];return st}(dt,Ce(ve))}(se,te,Yn)}function Xt(se,ve){var Se,Ce,dt=se.__data__;return((Ce=typeof(Se=ve))=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?Se!=="__proto__":Se===null)?dt[typeof ve=="string"?"string":"hash"]:dt.map}function rn(se,ve){var Se=function(Ce,dt){return Ce==null?void 0:Ce[dt]}(se,ve);return function(Ce){return!(!Mi(Ce)||function(dt){return!!Y&&Y in dt}(Ce))&&(ii(Ce)?oe:k).test(_n(Ce))}(Se)?Se:void 0}St.prototype.clear=function(){this.__data__=zt?zt(null):{},this.size=0},St.prototype.delete=function(se){var ve=this.has(se)&&delete this.__data__[se];return this.size-=ve?1:0,ve},St.prototype.get=function(se){var ve=this.__data__;if(zt){var Se=ve[se];return Se===S?void 0:Se}return Ie.call(ve,se)?ve[se]:void 0},St.prototype.has=function(se){var ve=this.__data__;return zt?ve[se]!==void 0:Ie.call(ve,se)},St.prototype.set=function(se,ve){var Se=this.__data__;return this.size+=this.has(se)?0:1,Se[se]=zt&&ve===void 0?S:ve,this},Gt.prototype.clear=function(){this.__data__=[],this.size=0},Gt.prototype.delete=function(se){var ve=this.__data__,Se=In(ve,se);return!(Se<0||(Se==ve.length-1?ve.pop():pe.call(ve,Se,1),--this.size,0))},Gt.prototype.get=function(se){var ve=this.__data__,Se=In(ve,se);return Se<0?void 0:ve[Se][1]},Gt.prototype.has=function(se){return In(this.__data__,se)>-1},Gt.prototype.set=function(se,ve){var Se=this.__data__,Ce=In(Se,se);return Ce<0?(++this.size,Se.push([se,ve])):Se[Ce][1]=ve,this},tn.prototype.clear=function(){this.size=0,this.__data__={hash:new St,map:new(He||Gt),string:new St}},tn.prototype.delete=function(se){var ve=Xt(this,se).delete(se);return this.size-=ve?1:0,ve},tn.prototype.get=function(se){return Xt(this,se).get(se)},tn.prototype.has=function(se){return Xt(this,se).has(se)},tn.prototype.set=function(se,ve){var Se=Xt(this,se),Ce=Se.size;return Se.set(se,ve),this.size+=Se.size==Ce?0:1,this},Ur.prototype.add=Ur.prototype.push=function(se){return this.__data__.set(se,S),this},Ur.prototype.has=function(se){return this.__data__.has(se)},nn.prototype.clear=function(){this.__data__=new Gt,this.size=0},nn.prototype.delete=function(se){var ve=this.__data__,Se=ve.delete(se);return this.size=ve.size,Se},nn.prototype.get=function(se){return this.__data__.get(se)},nn.prototype.has=function(se){return this.__data__.has(se)},nn.prototype.set=function(se,ve){var Se=this.__data__;if(Se instanceof Gt){var Ce=Se.__data__;if(!He||Ce.length<199)return Ce.push([se,ve]),this.size=++Se.size,this;Se=this.__data__=new tn(Ce)}return Se.set(se,ve),this.size=Se.size,this};var Yn=Re?function(se){return se==null?[]:(se=Object(se),function(ve,Se){for(var Ce=-1,dt=ve==null?0:ve.length,st=0,ee=[];++Ce<dt;){var fe=ve[Ce];Ne=fe,be.call(se,Ne)&&(ee[st++]=fe)}var Ne;return ee}(Re(se)))}:function(){return[]},Tn=or;function ri(se,ve){return!!(ve=ve==null?b:ve)&&(typeof se=="number"||P.test(se))&&se>-1&&se%1==0&&se<ve}function _n(se){if(se!=null){try{return Pe.call(se)}catch{}try{return se+""}catch{}}return""}function ar(se,ve){return se===ve||se!=se&&ve!=ve}(ut&&Tn(new ut(new ArrayBuffer(1)))!=I||He&&Tn(new He)!=f||Ke&&Tn(Ke.resolve())!=s||_e&&Tn(new _e)!=y||Qe&&Tn(new Qe)!=R)&&(Tn=function(se){var ve=or(se),Se=ve==c?se.constructor:void 0,Ce=Se?_n(Se):"";if(Ce)switch(Ce){case yn:return I;case Kt:return f;case bn:return s;case Qt:return y;case Wt:return R}return ve});var Li=Jr(function(){return arguments}())?Jr:function(se){return lr(se)&&Ie.call(se,"callee")&&!be.call(se,"callee")},on=Array.isArray,En=je||function(){return!1};function ii(se){if(!Mi(se))return!1;var ve=or(se);return ve==m||ve=="[object GeneratorFunction]"||ve=="[object AsyncFunction]"||ve=="[object Proxy]"}function ce(se){return typeof se=="number"&&se>-1&&se%1==0&&se<=b}function Mi(se){var ve=typeof se;return se!=null&&(ve=="object"||ve=="function")}function lr(se){return se!=null&&typeof se=="object"}var Pn=F?function(se){return function(ve){return se(ve)}}(F):function(se){return lr(se)&&ce(se.length)&&!!L[or(se)]};function te(se){return(ve=se)!=null&&ce(ve.length)&&!ii(ve)?function(Se,Ce){var dt=on(Se),st=!dt&&Li(Se),ee=!dt&&!st&&En(Se),fe=!dt&&!st&&!ee&&Pn(Se),Ne=dt||st||ee||fe,xe=Ne?function(ct,Ge){for(var mt=-1,pt=Array(ct);++mt<ct;)pt[mt]=Ge(mt);return pt}(Se.length,String):[],et=xe.length;for(var qe in Se)!Ce&&!Ie.call(Se,qe)||Ne&&(qe=="length"||ee&&(qe=="offset"||qe=="parent")||fe&&(qe=="buffer"||qe=="byteLength"||qe=="byteOffset")||ri(qe,et))||xe.push(qe);return xe}(se):function(Se){if(dt=(Ce=Se)&&Ce.constructor,Ce!==(typeof dt=="function"&&dt.prototype||Te))return nt(Se);var Ce,dt,st=[];for(var ee in Object(Se))Ie.call(Se,ee)&&ee!="constructor"&&st.push(ee);return st}(se);var ve}x.exports=function(se,ve){return sr(se,ve)}},210:function(x,w,T){var S=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(w,"__esModule",{value:!0});var b,h=S(T(465)),u=S(T(307));(function(l){l.compose=function(d,g,m){d===void 0&&(d={}),g===void 0&&(g={}),typeof d!="object"&&(d={}),typeof g!="object"&&(g={});var f=h.default(g);for(var a in m||(f=Object.keys(f).reduce(function(c,s){return f[s]!=null&&(c[s]=f[s]),c},{})),d)d[a]!==void 0&&g[a]===void 0&&(f[a]=d[a]);return Object.keys(f).length>0?f:void 0},l.diff=function(d,g){d===void 0&&(d={}),g===void 0&&(g={}),typeof d!="object"&&(d={}),typeof g!="object"&&(g={});var m=Object.keys(d).concat(Object.keys(g)).reduce(function(f,a){return u.default(d[a],g[a])||(f[a]=g[a]===void 0?null:g[a]),f},{});return Object.keys(m).length>0?m:void 0},l.invert=function(d,g){d===void 0&&(d={}),g===void 0&&(g={}),d=d||{};var m=Object.keys(g).reduce(function(f,a){return g[a]!==d[a]&&d[a]!==void 0&&(f[a]=g[a]),f},{});return Object.keys(d).reduce(function(f,a){return d[a]!==g[a]&&g[a]===void 0&&(f[a]=null),f},m)},l.transform=function(d,g,m){if(m===void 0&&(m=!1),typeof d!="object")return g;if(typeof g=="object"){if(!m)return g;var f=Object.keys(g).reduce(function(a,c){return d[c]===void 0&&(a[c]=g[c]),a},{});return Object.keys(f).length>0?f:void 0}}})(b||(b={})),w.default=b},895:function(x,w,T){var S=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}},b=S(T(103)),h=S(T(465)),u=S(T(307)),l=S(T(210)),d=S(T(430)),g=String.fromCharCode(0),m=function(){function f(a){Array.isArray(a)?this.ops=a:a!=null&&Array.isArray(a.ops)?this.ops=a.ops:this.ops=[]}return f.prototype.insert=function(a,c){var s={};return typeof a=="string"&&a.length===0?this:(s.insert=a,c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(s.attributes=c),this.push(s))},f.prototype.delete=function(a){return a<=0?this:this.push({delete:a})},f.prototype.retain=function(a,c){if(a<=0)return this;var s={retain:a};return c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(s.attributes=c),this.push(s)},f.prototype.push=function(a){var c=this.ops.length,s=this.ops[c-1];if(a=h.default(a),typeof s=="object"){if(typeof a.delete=="number"&&typeof s.delete=="number")return this.ops[c-1]={delete:s.delete+a.delete},this;if(typeof s.delete=="number"&&a.insert!=null&&(c-=1,typeof(s=this.ops[c-1])!="object"))return this.ops.unshift(a),this;if(u.default(a.attributes,s.attributes)){if(typeof a.insert=="string"&&typeof s.insert=="string")return this.ops[c-1]={insert:s.insert+a.insert},typeof a.attributes=="object"&&(this.ops[c-1].attributes=a.attributes),this;if(typeof a.retain=="number"&&typeof s.retain=="number")return this.ops[c-1]={retain:s.retain+a.retain},typeof a.attributes=="object"&&(this.ops[c-1].attributes=a.attributes),this}}return c===this.ops.length?this.ops.push(a):this.ops.splice(c,0,a),this},f.prototype.chop=function(){var a=this.ops[this.ops.length-1];return a&&a.retain&&!a.attributes&&this.ops.pop(),this},f.prototype.filter=function(a){return this.ops.filter(a)},f.prototype.forEach=function(a){this.ops.forEach(a)},f.prototype.map=function(a){return this.ops.map(a)},f.prototype.partition=function(a){var c=[],s=[];return this.forEach(function(v){(a(v)?c:s).push(v)}),[c,s]},f.prototype.reduce=function(a,c){return this.ops.reduce(a,c)},f.prototype.changeLength=function(){return this.reduce(function(a,c){return c.insert?a+d.default.length(c):c.delete?a-c.delete:a},0)},f.prototype.length=function(){return this.reduce(function(a,c){return a+d.default.length(c)},0)},f.prototype.slice=function(a,c){a===void 0&&(a=0),c===void 0&&(c=1/0);for(var s=[],v=d.default.iterator(this.ops),y=0;y<c&&v.hasNext();){var N=void 0;y<a?N=v.next(a-y):(N=v.next(c-y),s.push(N)),y+=d.default.length(N)}return new f(s)},f.prototype.compose=function(a){var c=d.default.iterator(this.ops),s=d.default.iterator(a.ops),v=[],y=s.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var N=y.retain;c.peekType()==="insert"&&c.peekLength()<=N;)N-=c.peekLength(),v.push(c.next());y.retain-N>0&&s.next(y.retain-N)}for(var R=new f(v);c.hasNext()||s.hasNext();)if(s.peekType()==="insert")R.push(s.next());else if(c.peekType()==="delete")R.push(c.next());else{var E=Math.min(c.peekLength(),s.peekLength()),I=c.next(E),k=s.next(E);if(typeof k.retain=="number"){var P={};typeof I.retain=="number"?P.retain=E:P.insert=I.insert;var L=l.default.compose(I.attributes,k.attributes,typeof I.retain=="number");if(L&&(P.attributes=L),R.push(P),!s.hasNext()&&u.default(R.ops[R.ops.length-1],P)){var B=new f(c.rest());return R.concat(B).chop()}}else typeof k.delete=="number"&&typeof I.retain=="number"&&R.push(k)}return R.chop()},f.prototype.concat=function(a){var c=new f(this.ops.slice());return a.ops.length>0&&(c.push(a.ops[0]),c.ops=c.ops.concat(a.ops.slice(1))),c},f.prototype.diff=function(a,c){if(this.ops===a.ops)return new f;var s=[this,a].map(function(E){return E.map(function(I){if(I.insert!=null)return typeof I.insert=="string"?I.insert:g;throw new Error("diff() called "+(E===a?"on":"with")+" non-document")}).join("")}),v=new f,y=b.default(s[0],s[1],c),N=d.default.iterator(this.ops),R=d.default.iterator(a.ops);return y.forEach(function(E){for(var I=E[1].length;I>0;){var k=0;switch(E[0]){case b.default.INSERT:k=Math.min(R.peekLength(),I),v.push(R.next(k));break;case b.default.DELETE:k=Math.min(I,N.peekLength()),N.next(k),v.delete(k);break;case b.default.EQUAL:k=Math.min(N.peekLength(),R.peekLength(),I);var P=N.next(k),L=R.next(k);u.default(P.insert,L.insert)?v.retain(k,l.default.diff(P.attributes,L.attributes)):v.push(L).delete(k)}I-=k}}),v.chop()},f.prototype.eachLine=function(a,c){c===void 0&&(c=`
`);for(var s=d.default.iterator(this.ops),v=new f,y=0;s.hasNext();){if(s.peekType()!=="insert")return;var N=s.peek(),R=d.default.length(N)-s.peekLength(),E=typeof N.insert=="string"?N.insert.indexOf(c,R)-R:-1;if(E<0)v.push(s.next());else if(E>0)v.push(s.next(E));else{if(a(v,s.next(1).attributes||{},y)===!1)return;y+=1,v=new f}}v.length()>0&&a(v,{},y)},f.prototype.invert=function(a){var c=new f;return this.reduce(function(s,v){if(v.insert)c.delete(d.default.length(v));else{if(v.retain&&v.attributes==null)return c.retain(v.retain),s+v.retain;if(v.delete||v.retain&&v.attributes){var y=v.delete||v.retain;return a.slice(s,s+y).forEach(function(N){v.delete?c.push(N):v.retain&&v.attributes&&c.retain(d.default.length(N),l.default.invert(v.attributes,N.attributes))}),s+y}}return s},0),c.chop()},f.prototype.transform=function(a,c){if(c===void 0&&(c=!1),c=!!c,typeof a=="number")return this.transformPosition(a,c);for(var s=a,v=d.default.iterator(this.ops),y=d.default.iterator(s.ops),N=new f;v.hasNext()||y.hasNext();)if(v.peekType()!=="insert"||!c&&y.peekType()==="insert")if(y.peekType()==="insert")N.push(y.next());else{var R=Math.min(v.peekLength(),y.peekLength()),E=v.next(R),I=y.next(R);if(E.delete)continue;I.delete?N.push(I):N.retain(R,l.default.transform(E.attributes,I.attributes,c))}else N.retain(d.default.length(v.next()));return N.chop()},f.prototype.transformPosition=function(a,c){c===void 0&&(c=!1),c=!!c;for(var s=d.default.iterator(this.ops),v=0;s.hasNext()&&v<=a;){var y=s.peekLength(),N=s.peekType();s.next(),N!=="delete"?(N==="insert"&&(v<a||!c)&&(a+=y),v+=y):a-=Math.min(y,a-v)}return a},f.Op=d.default,f.AttributeMap=l.default,f}();x.exports=m},977:function(x,w,T){var S=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(w,"__esModule",{value:!0});var b=S(T(430)),h=function(){function u(l){this.ops=l,this.index=0,this.offset=0}return u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(l){l||(l=1/0);var d=this.ops[this.index];if(d){var g=this.offset,m=b.default.length(d);if(l>=m-g?(l=m-g,this.index+=1,this.offset=0):this.offset+=l,typeof d.delete=="number")return{delete:l};var f={};return d.attributes&&(f.attributes=d.attributes),typeof d.retain=="number"?f.retain=l:typeof d.insert=="string"?f.insert=d.insert.substr(g,l):f.insert=d.insert,f}return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?b.default.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var l=this.offset,d=this.index,g=this.next(),m=this.ops.slice(this.index);return this.offset=l,this.index=d,[g].concat(m)}return[]},u}();w.default=h},430:function(x,w,T){var S=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(w,"__esModule",{value:!0});var b,h=S(T(977));(function(u){u.iterator=function(l){return new h.default(l)},u.length=function(l){return typeof l.delete=="number"?l.delete:typeof l.retain=="number"?l.retain:typeof l.insert=="string"?l.insert.length:1}})(b||(b={})),w.default=b},103:x=>{var w=-1;function T(c,s,v,y){if(c===s)return c?[[0,c]]:[];if(v!=null){var N=function(P,L,B){var q=typeof B=="number"?{index:B,length:0}:B.oldRange,V=typeof B=="number"?null:B.newRange,X=P.length,ue=L.length;if(q.length===0&&(V===null||V.length===0)){var Z=q.index,z=P.slice(0,Z),j=P.slice(Z),F=V?V.index:null,J=Z+ue-X;if((F===null||F===J)&&!(J<0||J>ue)){var Q=L.slice(0,J);if((W=L.slice(J))===j){var H=Math.min(Z,J);if((ae=z.slice(0,H))===(Te=Q.slice(0,H)))return f(ae,z.slice(H),Q.slice(H),j)}}if(F===null||F===Z){var U=Z,W=(Q=L.slice(0,U),L.slice(U));if(Q===z){var ne=Math.min(X-U,ue-U);if((me=j.slice(j.length-ne))===(De=W.slice(W.length-ne)))return f(z,j.slice(0,j.length-ne),W.slice(0,W.length-ne),me)}}}if(q.length>0&&V&&V.length===0){var ae=P.slice(0,q.index),me=P.slice(q.index+q.length);if(!(ue<(H=ae.length)+(ne=me.length))){var Te=L.slice(0,H),De=L.slice(ue-ne);if(ae===Te&&me===De)return f(ae,P.slice(H,X-ne),L.slice(H,ue-ne),me)}}return null}(c,s,v);if(N)return N}var R=b(c,s),E=c.substring(0,R);R=h(c=c.substring(R),s=s.substring(R));var I=c.substring(c.length-R),k=function(P,L){var B;if(!P)return[[1,L]];if(!L)return[[w,P]];var q=P.length>L.length?P:L,V=P.length>L.length?L:P,X=q.indexOf(V);if(X!==-1)return B=[[1,q.substring(0,X)],[0,V],[1,q.substring(X+V.length)]],P.length>L.length&&(B[0][0]=B[2][0]=w),B;if(V.length===1)return[[w,P],[1,L]];var ue=function(U,W){var ne=U.length>W.length?U:W,ae=U.length>W.length?W:U;if(ne.length<4||2*ae.length<ne.length)return null;function me(K,re,ge){for(var be,pe,ke,Re,je=K.substring(ge,ge+Math.floor(K.length/4)),nt=-1,ut="";(nt=re.indexOf(je,nt+1))!==-1;){var He=b(K.substring(ge),re.substring(nt)),Ke=h(K.substring(0,ge),re.substring(0,nt));ut.length<Ke+He&&(ut=re.substring(nt-Ke,nt)+re.substring(nt,nt+He),be=K.substring(0,ge-Ke),pe=K.substring(ge+He),ke=re.substring(0,nt-Ke),Re=re.substring(nt+He))}return 2*ut.length>=K.length?[be,pe,ke,Re,ut]:null}var Te,De,Pe,Ie,Y,le=me(ne,ae,Math.ceil(ne.length/4)),oe=me(ne,ae,Math.ceil(ne.length/2));return le||oe?(Te=oe?le&&le[4].length>oe[4].length?le:oe:le,U.length>W.length?(De=Te[0],Pe=Te[1],Ie=Te[2],Y=Te[3]):(Ie=Te[0],Y=Te[1],De=Te[2],Pe=Te[3]),[De,Pe,Ie,Y,Te[4]]):null}(P,L);if(ue){var Z=ue[0],z=ue[1],j=ue[2],F=ue[3],J=ue[4],Q=T(Z,j),H=T(z,F);return Q.concat([[0,J]],H)}return function(U,W){for(var ne=U.length,ae=W.length,me=Math.ceil((ne+ae)/2),Te=me,De=2*me,Pe=new Array(De),Ie=new Array(De),Y=0;Y<De;Y++)Pe[Y]=-1,Ie[Y]=-1;Pe[Te+1]=0,Ie[Te+1]=0;for(var le=ne-ae,oe=le%2!=0,K=0,re=0,ge=0,be=0,pe=0;pe<me;pe++){for(var ke=-pe+K;ke<=pe-re;ke+=2){for(var Re=Te+ke,je=(_e=ke===-pe||ke!==pe&&Pe[Re-1]<Pe[Re+1]?Pe[Re+1]:Pe[Re-1]+1)-ke;_e<ne&&je<ae&&U.charAt(_e)===W.charAt(je);)_e++,je++;if(Pe[Re]=_e,_e>ne)re+=2;else if(je>ae)K+=2;else if(oe&&(He=Te+le-ke)>=0&&He<De&&Ie[He]!==-1&&_e>=(ut=ne-Ie[He]))return S(U,W,_e,je)}for(var nt=-pe+ge;nt<=pe-be;nt+=2){for(var ut,He=Te+nt,Ke=(ut=nt===-pe||nt!==pe&&Ie[He-1]<Ie[He+1]?Ie[He+1]:Ie[He-1]+1)-nt;ut<ne&&Ke<ae&&U.charAt(ne-ut-1)===W.charAt(ae-Ke-1);)ut++,Ke++;if(Ie[He]=ut,ut>ne)be+=2;else if(Ke>ae)ge+=2;else if(!oe){var _e;if((Re=Te+le-nt)>=0&&Re<De&&Pe[Re]!==-1&&(je=Te+(_e=Pe[Re])-Re,_e>=(ut=ne-ut)))return S(U,W,_e,je)}}}return[[w,U],[1,W]]}(P,L)}(c=c.substring(0,c.length-R),s=s.substring(0,s.length-R));return E&&k.unshift([0,E]),I&&k.push([0,I]),u(k,y),k}function S(c,s,v,y){var N=c.substring(0,v),R=s.substring(0,y),E=c.substring(v),I=s.substring(y),k=T(N,R),P=T(E,I);return k.concat(P)}function b(c,s){if(!c||!s||c.charAt(0)!==s.charAt(0))return 0;for(var v=0,y=Math.min(c.length,s.length),N=y,R=0;v<N;)c.substring(R,N)==s.substring(R,N)?R=v=N:y=N,N=Math.floor((y-v)/2+v);return l(c.charCodeAt(N-1))&&N--,N}function h(c,s){if(!c||!s||c.slice(-1)!==s.slice(-1))return 0;for(var v=0,y=Math.min(c.length,s.length),N=y,R=0;v<N;)c.substring(c.length-N,c.length-R)==s.substring(s.length-N,s.length-R)?R=v=N:y=N,N=Math.floor((y-v)/2+v);return d(c.charCodeAt(c.length-N))&&N--,N}function u(c,s){c.push([0,""]);for(var v,y=0,N=0,R=0,E="",I="";y<c.length;)if(y<c.length-1&&!c[y][1])c.splice(y,1);else switch(c[y][0]){case 1:R++,I+=c[y][1],y++;break;case w:N++,E+=c[y][1],y++;break;case 0:var k=y-R-N-1;if(s){if(k>=0&&m(c[k][1])){var P=c[k][1].slice(-1);if(c[k][1]=c[k][1].slice(0,-1),E=P+E,I=P+I,!c[k][1]){c.splice(k,1),y--;var L=k-1;c[L]&&c[L][0]===1&&(R++,I=c[L][1]+I,L--),c[L]&&c[L][0]===w&&(N++,E=c[L][1]+E,L--),k=L}}g(c[y][1])&&(P=c[y][1].charAt(0),c[y][1]=c[y][1].slice(1),E+=P,I+=P)}if(y<c.length-1&&!c[y][1]){c.splice(y,1);break}if(E.length>0||I.length>0){E.length>0&&I.length>0&&((v=b(I,E))!==0&&(k>=0?c[k][1]+=I.substring(0,v):(c.splice(0,0,[0,I.substring(0,v)]),y++),I=I.substring(v),E=E.substring(v)),(v=h(I,E))!==0&&(c[y][1]=I.substring(I.length-v)+c[y][1],I=I.substring(0,I.length-v),E=E.substring(0,E.length-v)));var B=R+N;E.length===0&&I.length===0?(c.splice(y-B,B),y-=B):E.length===0?(c.splice(y-B,B,[1,I]),y=y-B+1):I.length===0?(c.splice(y-B,B,[w,E]),y=y-B+1):(c.splice(y-B,B,[w,E],[1,I]),y=y-B+2)}y!==0&&c[y-1][0]===0?(c[y-1][1]+=c[y][1],c.splice(y,1)):y++,R=0,N=0,E="",I=""}c[c.length-1][1]===""&&c.pop();var q=!1;for(y=1;y<c.length-1;)c[y-1][0]===0&&c[y+1][0]===0&&(c[y][1].substring(c[y][1].length-c[y-1][1].length)===c[y-1][1]?(c[y][1]=c[y-1][1]+c[y][1].substring(0,c[y][1].length-c[y-1][1].length),c[y+1][1]=c[y-1][1]+c[y+1][1],c.splice(y-1,1),q=!0):c[y][1].substring(0,c[y+1][1].length)==c[y+1][1]&&(c[y-1][1]+=c[y+1][1],c[y][1]=c[y][1].substring(c[y+1][1].length)+c[y+1][1],c.splice(y+1,1),q=!0)),y++;q&&u(c,s)}function l(c){return c>=55296&&c<=56319}function d(c){return c>=56320&&c<=57343}function g(c){return d(c.charCodeAt(0))}function m(c){return l(c.charCodeAt(c.length-1))}function f(c,s,v,y){return m(c)||g(y)?null:function(N){for(var R=[],E=0;E<N.length;E++)N[E][1].length>0&&R.push(N[E]);return R}([[0,c],[w,s],[1,v],[0,y]])}function a(c,s,v){return T(c,s,v,!0)}a.INSERT=1,a.DELETE=w,a.EQUAL=0,x.exports=a},165:function(x,w,T){var S,b;(b=typeof(S=function(){var h,u={};function l(m,f,a){var c=m.getClientRects();if(c.length===2){var s=m.getBoundingClientRect();return c[f][a]<s[a]}return!1}function d(m){if(!m||screen.deviceXDPI===screen.logicalXDPI)return m;if("length"in m)return Array.prototype.map.call(m,d);var f=screen.deviceXDPI/screen.logicalXDPI;return{top:m.top/f,bottom:m.bottom/f,left:m.left/f,right:m.right/f,width:m.width/f,height:m.height/f}}function g(m,f){var a,c=0,s=1024;if(s>=f.length)return Array.prototype.push.apply(m,f);for(;c<f.length;)a=Array.prototype.push.apply(m,Array.prototype.slice.call(f,c,c+s)),c+=s;return a}return u.isBroken=function(){if(h===void 0){var m=document.createElement("p"),f=document.createElement("span"),a=document.createTextNode("aa"),c=document.createTextNode("aa"),s=document.createElement("img");s.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var v=document.createRange();if(h={},m.appendChild(a),m.appendChild(f),f.appendChild(s),f.appendChild(c),document.body.appendChild(m),v.setStart(a,1),v.setEnd(f,0),h.getClientRects=h.getBoundingClientRect=v.getClientRects().length>1,h.getClientRects||(v.setEnd(c,1),h.getClientRects=h.getBoundingClientRect=v.getClientRects().length===2),!h.getBoundingClientRect){v.setEnd(v.startContainer,v.startOffset);var y=v.getBoundingClientRect();h.getBoundingClientRect=y.top===0&&y.left===0}if(document.body.removeChild(m),!h.getBoundingClientRect){var N=document.createElement("p");N.style.width="0px",N.style.fontSize="20px",N.style.whiteSpace="normal",N.style.wordBreak="normal";var R=document.createTextNode("m mm");N.appendChild(R),document.body.appendChild(N),v.setStart(R,1),v.setEnd(R,2),l(v,1,"left")?h.getBoundingClientRect=!0:(v.setStart(R,1),v.setEnd(R,3),l(v,0,"top")&&(h.getBoundingClientRect=!0)),document.body.removeChild(N)}var E=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();h.ieZoom=!!E&&E<=10}return h},u.getClientRects=function(m){var f=this.isBroken();if(f.ieZoom)return d(m.getClientRects());if(!f.getClientRects)return m.getClientRects();var a=[],c=[],s=m.endContainer,v=m.endOffset,y=document.createRange();function N(R){for(var E=0;R=R.previousSibling;)E++;return E}for(;s!==m.commonAncestorContainer;)y.setStart(s,0),y.setEnd(s,v),g(c,y.getClientRects()),v=N(s),s=s.parentNode;return(y=m.cloneRange()).setEnd(s,v),g(a,y.getClientRects()),g(a,c),a},u.getBoundingClientRect=function(m){var f=this.getClientRects(m);if(f.length===0)return null;var a,c=m.getBoundingClientRect(),s=this.isBroken();if(s.ieZoom)return d(c);if(!s.getBoundingClientRect)return c;if(c.width===0&&c.height===0)return f[0];for(var v=0,y=f.length;v<y;v++){var N=f[v];a?(a.left=Math.min(a.left,N.left),a.top=Math.min(a.top,N.top),a.right=Math.max(a.right,N.right),a.bottom=Math.max(a.bottom,N.bottom)):a={left:N.left,top:N.top,right:N.right,bottom:N.bottom}}return a&&(a.width=a.right-a.left,a.height=a.bottom-a.top),a},u})=="function"?S.call(w,T,w,x):S)===void 0||(x.exports=b)},33:(x,w,T)=>{T.r(w),T.d(w,{default:()=>L});var S=function(){if(typeof Map<"u")return Map;function B(q,V){var X=-1;return q.some(function(ue,Z){return ue[0]===V&&(X=Z,!0)}),X}return function(){function q(){this.__entries__=[]}return Object.defineProperty(q.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),q.prototype.get=function(V){var X=B(this.__entries__,V),ue=this.__entries__[X];return ue&&ue[1]},q.prototype.set=function(V,X){var ue=B(this.__entries__,V);~ue?this.__entries__[ue][1]=X:this.__entries__.push([V,X])},q.prototype.delete=function(V){var X=this.__entries__,ue=B(X,V);~ue&&X.splice(ue,1)},q.prototype.has=function(V){return!!~B(this.__entries__,V)},q.prototype.clear=function(){this.__entries__.splice(0)},q.prototype.forEach=function(V,X){X===void 0&&(X=null);for(var ue=0,Z=this.__entries__;ue<Z.length;ue++){var z=Z[ue];V.call(X,z[1],z[0])}},q}()}(),b=typeof window<"u"&&typeof document<"u"&&window.document===document,h=T.g!==void 0&&T.g.Math===Math?T.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),u=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(h):function(B){return setTimeout(function(){return B(Date.now())},1e3/60)},l=["top","right","bottom","left","width","height","size","weight"],d=typeof MutationObserver<"u",g=function(){function B(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(q,V){var X=!1,ue=!1,Z=0;function z(){X&&(X=!1,q()),ue&&F()}function j(){u(z)}function F(){var J=Date.now();if(X){if(J-Z<2)return;ue=!0}else X=!0,ue=!1,setTimeout(j,20);Z=J}return F}(this.refresh.bind(this))}return B.prototype.addObserver=function(q){~this.observers_.indexOf(q)||this.observers_.push(q),this.connected_||this.connect_()},B.prototype.removeObserver=function(q){var V=this.observers_,X=V.indexOf(q);~X&&V.splice(X,1),!V.length&&this.connected_&&this.disconnect_()},B.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},B.prototype.updateObservers_=function(){var q=this.observers_.filter(function(V){return V.gatherActive(),V.hasActive()});return q.forEach(function(V){return V.broadcastActive()}),q.length>0},B.prototype.connect_=function(){b&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),d?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},B.prototype.disconnect_=function(){b&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},B.prototype.onTransitionEnd_=function(q){var V=q.propertyName,X=V===void 0?"":V;l.some(function(ue){return!!~X.indexOf(ue)})&&this.refresh()},B.getInstance=function(){return this.instance_||(this.instance_=new B),this.instance_},B.instance_=null,B}(),m=function(B,q){for(var V=0,X=Object.keys(q);V<X.length;V++){var ue=X[V];Object.defineProperty(B,ue,{value:q[ue],enumerable:!1,writable:!1,configurable:!0})}return B},f=function(B){return B&&B.ownerDocument&&B.ownerDocument.defaultView||h},a=N(0,0,0,0);function c(B){return parseFloat(B)||0}function s(B){for(var q=[],V=1;V<arguments.length;V++)q[V-1]=arguments[V];return q.reduce(function(X,ue){return X+c(B["border-"+ue+"-width"])},0)}var v=typeof SVGGraphicsElement<"u"?function(B){return B instanceof f(B).SVGGraphicsElement}:function(B){return B instanceof f(B).SVGElement&&typeof B.getBBox=="function"};function y(B){return b?v(B)?function(q){var V=q.getBBox();return N(0,0,V.width,V.height)}(B):function(q){var V=q.clientWidth,X=q.clientHeight;if(!V&&!X)return a;var ue=f(q).getComputedStyle(q),Z=function(U){for(var W={},ne=0,ae=["top","right","bottom","left"];ne<ae.length;ne++){var me=ae[ne],Te=U["padding-"+me];W[me]=c(Te)}return W}(ue),z=Z.left+Z.right,j=Z.top+Z.bottom,F=c(ue.width),J=c(ue.height);if(ue.boxSizing==="border-box"&&(Math.round(F+z)!==V&&(F-=s(ue,"left","right")+z),Math.round(J+j)!==X&&(J-=s(ue,"top","bottom")+j)),!function(U){return U===f(U).document.documentElement}(q)){var Q=Math.round(F+z)-V,H=Math.round(J+j)-X;Math.abs(Q)!==1&&(F-=Q),Math.abs(H)!==1&&(J-=H)}return N(Z.left,Z.top,F,J)}(B):a}function N(B,q,V,X){return{x:B,y:q,width:V,height:X}}var R=function(){function B(q){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=N(0,0,0,0),this.target=q}return B.prototype.isActive=function(){var q=y(this.target);return this.contentRect_=q,q.width!==this.broadcastWidth||q.height!==this.broadcastHeight},B.prototype.broadcastRect=function(){var q=this.contentRect_;return this.broadcastWidth=q.width,this.broadcastHeight=q.height,q},B}(),E=function(B,q){var V,X,ue,Z,z,j,F,J=(X=(V=q).x,ue=V.y,Z=V.width,z=V.height,j=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,F=Object.create(j.prototype),m(F,{x:X,y:ue,width:Z,height:z,top:ue,right:X+Z,bottom:z+ue,left:X}),F);m(this,{target:B,contentRect:J})},I=function(){function B(q,V,X){if(this.activeObservations_=[],this.observations_=new S,typeof q!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=q,this.controller_=V,this.callbackCtx_=X}return B.prototype.observe=function(q){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(q instanceof f(q).Element))throw new TypeError('parameter 1 is not of type "Element".');var V=this.observations_;V.has(q)||(V.set(q,new R(q)),this.controller_.addObserver(this),this.controller_.refresh())}},B.prototype.unobserve=function(q){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(q instanceof f(q).Element))throw new TypeError('parameter 1 is not of type "Element".');var V=this.observations_;V.has(q)&&(V.delete(q),V.size||this.controller_.removeObserver(this))}},B.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},B.prototype.gatherActive=function(){var q=this;this.clearActive(),this.observations_.forEach(function(V){V.isActive()&&q.activeObservations_.push(V)})},B.prototype.broadcastActive=function(){if(this.hasActive()){var q=this.callbackCtx_,V=this.activeObservations_.map(function(X){return new E(X.target,X.broadcastRect())});this.callback_.call(q,V,q),this.clearActive()}},B.prototype.clearActive=function(){this.activeObservations_.splice(0)},B.prototype.hasActive=function(){return this.activeObservations_.length>0},B}(),k=typeof WeakMap<"u"?new WeakMap:new S,P=function B(q){if(!(this instanceof B))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var V=g.getInstance(),X=new I(q,V,this);k.set(this,X)};["observe","unobserve","disconnect"].forEach(function(B){P.prototype[B]=function(){var q;return(q=k.get(this))[B].apply(q,arguments)}});const L=h.ResizeObserver!==void 0?h.ResizeObserver:P},413:(x,w,T)=>{T.r(w),T.d(w,{default:()=>N});var S=T(379),b=T.n(S),h=T(795),u=T.n(h),l=T(569),d=T.n(l),g=T(565),m=T.n(g),f=T(216),a=T.n(f),c=T(589),s=T.n(c),v=T(582),y={};y.styleTagTransform=s(),y.setAttributes=m(),y.insert=d().bind(null,"head"),y.domAPI=u(),y.insertStyleElement=a(),b()(v.Z,y);const N=v.Z&&v.Z.locals?v.Z.locals:void 0},379:x=>{var w=[];function T(h){for(var u=-1,l=0;l<w.length;l++)if(w[l].identifier===h){u=l;break}return u}function S(h,u){for(var l={},d=[],g=0;g<h.length;g++){var m=h[g],f=u.base?m[0]+u.base:m[0],a=l[f]||0,c="".concat(f," ").concat(a);l[f]=a+1;var s=T(c),v={css:m[1],media:m[2],sourceMap:m[3],supports:m[4],layer:m[5]};if(s!==-1)w[s].references++,w[s].updater(v);else{var y=b(v,u);u.byIndex=g,w.splice(g,0,{identifier:c,updater:y,references:1})}d.push(c)}return d}function b(h,u){var l=u.domAPI(u);return l.update(h),function(d){if(d){if(d.css===h.css&&d.media===h.media&&d.sourceMap===h.sourceMap&&d.supports===h.supports&&d.layer===h.layer)return;l.update(h=d)}else l.remove()}}x.exports=function(h,u){var l=S(h=h||[],u=u||{});return function(d){d=d||[];for(var g=0;g<l.length;g++){var m=T(l[g]);w[m].references--}for(var f=S(d,u),a=0;a<l.length;a++){var c=T(l[a]);w[c].references===0&&(w[c].updater(),w.splice(c,1))}l=f}}},569:x=>{var w={};x.exports=function(T,S){var b=function(h){if(w[h]===void 0){var u=document.querySelector(h);if(window.HTMLIFrameElement&&u instanceof window.HTMLIFrameElement)try{u=u.contentDocument.head}catch{u=null}w[h]=u}return w[h]}(T);if(!b)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");b.appendChild(S)}},216:x=>{x.exports=function(w){var T=document.createElement("style");return w.setAttributes(T,w.attributes),w.insert(T,w.options),T}},565:(x,w,T)=>{x.exports=function(S){var b=T.nc;b&&S.setAttribute("nonce",b)}},795:x=>{x.exports=function(w){var T=w.insertStyleElement(w);return{update:function(S){(function(b,h,u){var l="";u.supports&&(l+="@supports (".concat(u.supports,") {")),u.media&&(l+="@media ".concat(u.media," {"));var d=u.layer!==void 0;d&&(l+="@layer".concat(u.layer.length>0?" ".concat(u.layer):""," {")),l+=u.css,d&&(l+="}"),u.media&&(l+="}"),u.supports&&(l+="}");var g=u.sourceMap;g&&typeof btoa<"u"&&(l+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(g))))," */")),h.styleTagTransform(l,b,h.options)})(T,w,S)},remove:function(){(function(S){if(S.parentNode===null)return!1;S.parentNode.removeChild(S)})(T)}}}},589:x=>{x.exports=function(w,T){if(T.styleSheet)T.styleSheet.cssText=w;else{for(;T.firstChild;)T.removeChild(T.firstChild);T.appendChild(document.createTextNode(w))}}},621:(x,w,T)=>{var S;(function(b){var h=/^\s+/,u=/\s+$/,l=0,d=b.round,g=b.min,m=b.max,f=b.random;function a(Y,le){if(le=le||{},(Y=Y||"")instanceof a)return Y;if(!(this instanceof a))return new a(Y,le);var oe=function(K){var re,ge,be,pe={r:0,g:0,b:0},ke=1,Re=null,je=null,nt=null,ut=!1,He=!1;return typeof K=="string"&&(K=function(Ke){Ke=Ke.replace(h,"").replace(u,"").toLowerCase();var _e,Qe=!1;if(z[Ke])Ke=z[Ke],Qe=!0;else if(Ke=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(_e=Pe.rgb.exec(Ke))?{r:_e[1],g:_e[2],b:_e[3]}:(_e=Pe.rgba.exec(Ke))?{r:_e[1],g:_e[2],b:_e[3],a:_e[4]}:(_e=Pe.hsl.exec(Ke))?{h:_e[1],s:_e[2],l:_e[3]}:(_e=Pe.hsla.exec(Ke))?{h:_e[1],s:_e[2],l:_e[3],a:_e[4]}:(_e=Pe.hsv.exec(Ke))?{h:_e[1],s:_e[2],v:_e[3]}:(_e=Pe.hsva.exec(Ke))?{h:_e[1],s:_e[2],v:_e[3],a:_e[4]}:(_e=Pe.hex8.exec(Ke))?{r:H(_e[1]),g:H(_e[2]),b:H(_e[3]),a:ae(_e[4]),format:Qe?"name":"hex8"}:(_e=Pe.hex6.exec(Ke))?{r:H(_e[1]),g:H(_e[2]),b:H(_e[3]),format:Qe?"name":"hex"}:(_e=Pe.hex4.exec(Ke))?{r:H(_e[1]+""+_e[1]),g:H(_e[2]+""+_e[2]),b:H(_e[3]+""+_e[3]),a:ae(_e[4]+""+_e[4]),format:Qe?"name":"hex8"}:!!(_e=Pe.hex3.exec(Ke))&&{r:H(_e[1]+""+_e[1]),g:H(_e[2]+""+_e[2]),b:H(_e[3]+""+_e[3]),format:Qe?"name":"hex"}}(K)),typeof K=="object"&&(Ie(K.r)&&Ie(K.g)&&Ie(K.b)?(re=K.r,ge=K.g,be=K.b,pe={r:255*J(re,255),g:255*J(ge,255),b:255*J(be,255)},ut=!0,He=String(K.r).substr(-1)==="%"?"prgb":"rgb"):Ie(K.h)&&Ie(K.s)&&Ie(K.v)?(Re=W(K.s),je=W(K.v),pe=function(Ke,_e,Qe){Ke=6*J(Ke,360),_e=J(_e,100),Qe=J(Qe,100);var zt=b.floor(Ke),yn=Ke-zt,Kt=Qe*(1-_e),bn=Qe*(1-yn*_e),Qt=Qe*(1-(1-yn)*_e),Wt=zt%6;return{r:255*[Qe,bn,Kt,Kt,Qt,Qe][Wt],g:255*[Qt,Qe,Qe,bn,Kt,Kt][Wt],b:255*[Kt,Kt,Qt,Qe,Qe,bn][Wt]}}(K.h,Re,je),ut=!0,He="hsv"):Ie(K.h)&&Ie(K.s)&&Ie(K.l)&&(Re=W(K.s),nt=W(K.l),pe=function(Ke,_e,Qe){var zt,yn,Kt;function bn(Rt,en,St){return St<0&&(St+=1),St>1&&(St-=1),St<1/6?Rt+6*(en-Rt)*St:St<.5?en:St<2/3?Rt+(en-Rt)*(2/3-St)*6:Rt}if(Ke=J(Ke,360),_e=J(_e,100),Qe=J(Qe,100),_e===0)zt=yn=Kt=Qe;else{var Qt=Qe<.5?Qe*(1+_e):Qe+_e-Qe*_e,Wt=2*Qe-Qt;zt=bn(Wt,Qt,Ke+1/3),yn=bn(Wt,Qt,Ke),Kt=bn(Wt,Qt,Ke-1/3)}return{r:255*zt,g:255*yn,b:255*Kt}}(K.h,Re,nt),ut=!0,He="hsl"),K.hasOwnProperty("a")&&(ke=K.a)),ke=F(ke),{ok:ut,format:K.format||He,r:g(255,m(pe.r,0)),g:g(255,m(pe.g,0)),b:g(255,m(pe.b,0)),a:ke}}(Y);this._originalInput=Y,this._r=oe.r,this._g=oe.g,this._b=oe.b,this._a=oe.a,this._roundA=d(100*this._a)/100,this._format=le.format||oe.format,this._gradientType=le.gradientType,this._r<1&&(this._r=d(this._r)),this._g<1&&(this._g=d(this._g)),this._b<1&&(this._b=d(this._b)),this._ok=oe.ok,this._tc_id=l++}function c(Y,le,oe){Y=J(Y,255),le=J(le,255),oe=J(oe,255);var K,re,ge=m(Y,le,oe),be=g(Y,le,oe),pe=(ge+be)/2;if(ge==be)K=re=0;else{var ke=ge-be;switch(re=pe>.5?ke/(2-ge-be):ke/(ge+be),ge){case Y:K=(le-oe)/ke+(le<oe?6:0);break;case le:K=(oe-Y)/ke+2;break;case oe:K=(Y-le)/ke+4}K/=6}return{h:K,s:re,l:pe}}function s(Y,le,oe){Y=J(Y,255),le=J(le,255),oe=J(oe,255);var K,re,ge=m(Y,le,oe),be=g(Y,le,oe),pe=ge,ke=ge-be;if(re=ge===0?0:ke/ge,ge==be)K=0;else{switch(ge){case Y:K=(le-oe)/ke+(le<oe?6:0);break;case le:K=(oe-Y)/ke+2;break;case oe:K=(Y-le)/ke+4}K/=6}return{h:K,s:re,v:pe}}function v(Y,le,oe,K){var re=[U(d(Y).toString(16)),U(d(le).toString(16)),U(d(oe).toString(16))];return K&&re[0].charAt(0)==re[0].charAt(1)&&re[1].charAt(0)==re[1].charAt(1)&&re[2].charAt(0)==re[2].charAt(1)?re[0].charAt(0)+re[1].charAt(0)+re[2].charAt(0):re.join("")}function y(Y,le,oe,K){return[U(ne(K)),U(d(Y).toString(16)),U(d(le).toString(16)),U(d(oe).toString(16))].join("")}function N(Y,le){le=le===0?0:le||10;var oe=a(Y).toHsl();return oe.s-=le/100,oe.s=Q(oe.s),a(oe)}function R(Y,le){le=le===0?0:le||10;var oe=a(Y).toHsl();return oe.s+=le/100,oe.s=Q(oe.s),a(oe)}function E(Y){return a(Y).desaturate(100)}function I(Y,le){le=le===0?0:le||10;var oe=a(Y).toHsl();return oe.l+=le/100,oe.l=Q(oe.l),a(oe)}function k(Y,le){le=le===0?0:le||10;var oe=a(Y).toRgb();return oe.r=m(0,g(255,oe.r-d(-le/100*255))),oe.g=m(0,g(255,oe.g-d(-le/100*255))),oe.b=m(0,g(255,oe.b-d(-le/100*255))),a(oe)}function P(Y,le){le=le===0?0:le||10;var oe=a(Y).toHsl();return oe.l-=le/100,oe.l=Q(oe.l),a(oe)}function L(Y,le){var oe=a(Y).toHsl(),K=(oe.h+le)%360;return oe.h=K<0?360+K:K,a(oe)}function B(Y){var le=a(Y).toHsl();return le.h=(le.h+180)%360,a(le)}function q(Y){var le=a(Y).toHsl(),oe=le.h;return[a(Y),a({h:(oe+120)%360,s:le.s,l:le.l}),a({h:(oe+240)%360,s:le.s,l:le.l})]}function V(Y){var le=a(Y).toHsl(),oe=le.h;return[a(Y),a({h:(oe+90)%360,s:le.s,l:le.l}),a({h:(oe+180)%360,s:le.s,l:le.l}),a({h:(oe+270)%360,s:le.s,l:le.l})]}function X(Y){var le=a(Y).toHsl(),oe=le.h;return[a(Y),a({h:(oe+72)%360,s:le.s,l:le.l}),a({h:(oe+216)%360,s:le.s,l:le.l})]}function ue(Y,le,oe){le=le||6,oe=oe||30;var K=a(Y).toHsl(),re=360/oe,ge=[a(Y)];for(K.h=(K.h-(re*le>>1)+720)%360;--le;)K.h=(K.h+re)%360,ge.push(a(K));return ge}function Z(Y,le){le=le||6;for(var oe=a(Y).toHsv(),K=oe.h,re=oe.s,ge=oe.v,be=[],pe=1/le;le--;)be.push(a({h:K,s:re,v:ge})),ge=(ge+pe)%1;return be}a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Y=this.toRgb();return(299*Y.r+587*Y.g+114*Y.b)/1e3},getLuminance:function(){var Y,le,oe,K=this.toRgb();return Y=K.r/255,le=K.g/255,oe=K.b/255,.2126*(Y<=.03928?Y/12.92:b.pow((Y+.055)/1.055,2.4))+.7152*(le<=.03928?le/12.92:b.pow((le+.055)/1.055,2.4))+.0722*(oe<=.03928?oe/12.92:b.pow((oe+.055)/1.055,2.4))},setAlpha:function(Y){return this._a=F(Y),this._roundA=d(100*this._a)/100,this},toHsv:function(){var Y=s(this._r,this._g,this._b);return{h:360*Y.h,s:Y.s,v:Y.v,a:this._a}},toHsvString:function(){var Y=s(this._r,this._g,this._b),le=d(360*Y.h),oe=d(100*Y.s),K=d(100*Y.v);return this._a==1?"hsv("+le+", "+oe+"%, "+K+"%)":"hsva("+le+", "+oe+"%, "+K+"%, "+this._roundA+")"},toHsl:function(){var Y=c(this._r,this._g,this._b);return{h:360*Y.h,s:Y.s,l:Y.l,a:this._a}},toHslString:function(){var Y=c(this._r,this._g,this._b),le=d(360*Y.h),oe=d(100*Y.s),K=d(100*Y.l);return this._a==1?"hsl("+le+", "+oe+"%, "+K+"%)":"hsla("+le+", "+oe+"%, "+K+"%, "+this._roundA+")"},toHex:function(Y){return v(this._r,this._g,this._b,Y)},toHexString:function(Y){return"#"+this.toHex(Y)},toHex8:function(Y){return function(le,oe,K,re,ge){var be=[U(d(le).toString(16)),U(d(oe).toString(16)),U(d(K).toString(16)),U(ne(re))];return ge&&be[0].charAt(0)==be[0].charAt(1)&&be[1].charAt(0)==be[1].charAt(1)&&be[2].charAt(0)==be[2].charAt(1)&&be[3].charAt(0)==be[3].charAt(1)?be[0].charAt(0)+be[1].charAt(0)+be[2].charAt(0)+be[3].charAt(0):be.join("")}(this._r,this._g,this._b,this._a,Y)},toHex8String:function(Y){return"#"+this.toHex8(Y)},toRgb:function(){return{r:d(this._r),g:d(this._g),b:d(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+d(this._r)+", "+d(this._g)+", "+d(this._b)+")":"rgba("+d(this._r)+", "+d(this._g)+", "+d(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:d(100*J(this._r,255))+"%",g:d(100*J(this._g,255))+"%",b:d(100*J(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+d(100*J(this._r,255))+"%, "+d(100*J(this._g,255))+"%, "+d(100*J(this._b,255))+"%)":"rgba("+d(100*J(this._r,255))+"%, "+d(100*J(this._g,255))+"%, "+d(100*J(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(j[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Y){var le="#"+y(this._r,this._g,this._b,this._a),oe=le,K=this._gradientType?"GradientType = 1, ":"";if(Y){var re=a(Y);oe="#"+y(re._r,re._g,re._b,re._a)}return"progid:DXImageTransform.Microsoft.gradient("+K+"startColorstr="+le+",endColorstr="+oe+")"},toString:function(Y){var le=!!Y;Y=Y||this._format;var oe=!1,K=this._a<1&&this._a>=0;return le||!K||Y!=="hex"&&Y!=="hex6"&&Y!=="hex3"&&Y!=="hex4"&&Y!=="hex8"&&Y!=="name"?(Y==="rgb"&&(oe=this.toRgbString()),Y==="prgb"&&(oe=this.toPercentageRgbString()),Y!=="hex"&&Y!=="hex6"||(oe=this.toHexString()),Y==="hex3"&&(oe=this.toHexString(!0)),Y==="hex4"&&(oe=this.toHex8String(!0)),Y==="hex8"&&(oe=this.toHex8String()),Y==="name"&&(oe=this.toName()),Y==="hsl"&&(oe=this.toHslString()),Y==="hsv"&&(oe=this.toHsvString()),oe||this.toHexString()):Y==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return a(this.toString())},_applyModification:function(Y,le){var oe=Y.apply(null,[this].concat([].slice.call(le)));return this._r=oe._r,this._g=oe._g,this._b=oe._b,this.setAlpha(oe._a),this},lighten:function(){return this._applyModification(I,arguments)},brighten:function(){return this._applyModification(k,arguments)},darken:function(){return this._applyModification(P,arguments)},desaturate:function(){return this._applyModification(N,arguments)},saturate:function(){return this._applyModification(R,arguments)},greyscale:function(){return this._applyModification(E,arguments)},spin:function(){return this._applyModification(L,arguments)},_applyCombination:function(Y,le){return Y.apply(null,[this].concat([].slice.call(le)))},analogous:function(){return this._applyCombination(ue,arguments)},complement:function(){return this._applyCombination(B,arguments)},monochromatic:function(){return this._applyCombination(Z,arguments)},splitcomplement:function(){return this._applyCombination(X,arguments)},triad:function(){return this._applyCombination(q,arguments)},tetrad:function(){return this._applyCombination(V,arguments)}},a.fromRatio=function(Y,le){if(typeof Y=="object"){var oe={};for(var K in Y)Y.hasOwnProperty(K)&&(oe[K]=K==="a"?Y[K]:W(Y[K]));Y=oe}return a(Y,le)},a.equals=function(Y,le){return!(!Y||!le)&&a(Y).toRgbString()==a(le).toRgbString()},a.random=function(){return a.fromRatio({r:f(),g:f(),b:f()})},a.mix=function(Y,le,oe){oe=oe===0?0:oe||50;var K=a(Y).toRgb(),re=a(le).toRgb(),ge=oe/100;return a({r:(re.r-K.r)*ge+K.r,g:(re.g-K.g)*ge+K.g,b:(re.b-K.b)*ge+K.b,a:(re.a-K.a)*ge+K.a})},a.readability=function(Y,le){var oe=a(Y),K=a(le);return(b.max(oe.getLuminance(),K.getLuminance())+.05)/(b.min(oe.getLuminance(),K.getLuminance())+.05)},a.isReadable=function(Y,le,oe){var K,re,ge,be,pe,ke=a.readability(Y,le);switch(re=!1,(ge=oe,(be=((ge=ge||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&be!=="AAA"&&(be="AA"),(pe=(ge.size||"small").toLowerCase())!=="small"&&pe!=="large"&&(pe="small"),K={level:be,size:pe}).level+K.size){case"AAsmall":case"AAAlarge":re=ke>=4.5;break;case"AAlarge":re=ke>=3;break;case"AAAsmall":re=ke>=7}return re},a.mostReadable=function(Y,le,oe){var K,re,ge,be,pe=null,ke=0;re=(oe=oe||{}).includeFallbackColors,ge=oe.level,be=oe.size;for(var Re=0;Re<le.length;Re++)(K=a.readability(Y,le[Re]))>ke&&(ke=K,pe=a(le[Re]));return a.isReadable(Y,pe,{level:ge,size:be})||!re?pe:(oe.includeFallbackColors=!1,a.mostReadable(Y,["#fff","#000"],oe))};var z=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},j=a.hexNames=function(Y){var le={};for(var oe in Y)Y.hasOwnProperty(oe)&&(le[Y[oe]]=oe);return le}(z);function F(Y){return Y=parseFloat(Y),(isNaN(Y)||Y<0||Y>1)&&(Y=1),Y}function J(Y,le){(function(K){return typeof K=="string"&&K.indexOf(".")!=-1&&parseFloat(K)===1})(Y)&&(Y="100%");var oe=function(K){return typeof K=="string"&&K.indexOf("%")!=-1}(Y);return Y=g(le,m(0,parseFloat(Y))),oe&&(Y=parseInt(Y*le,10)/100),b.abs(Y-le)<1e-6?1:Y%le/parseFloat(le)}function Q(Y){return g(1,m(0,Y))}function H(Y){return parseInt(Y,16)}function U(Y){return Y.length==1?"0"+Y:""+Y}function W(Y){return Y<=1&&(Y=100*Y+"%"),Y}function ne(Y){return b.round(255*parseFloat(Y)).toString(16)}function ae(Y){return H(Y)/255}var me,Te,De,Pe=(Te="[\\s|\\(]+("+(me="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+me+")[,|\\s]+("+me+")\\s*\\)?",De="[\\s|\\(]+("+me+")[,|\\s]+("+me+")[,|\\s]+("+me+")[,|\\s]+("+me+")\\s*\\)?",{CSS_UNIT:new RegExp(me),rgb:new RegExp("rgb"+Te),rgba:new RegExp("rgba"+De),hsl:new RegExp("hsl"+Te),hsla:new RegExp("hsla"+De),hsv:new RegExp("hsv"+Te),hsva:new RegExp("hsva"+De),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Ie(Y){return!!Pe.CSS_UNIT.exec(Y)}x.exports?x.exports=a:(S=function(){return a}.call(w,T,w,x))===void 0||(x.exports=S)})(Math)},607:function(x,w,T){var S=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(w,"__esModule",{value:!0}),w.Cursor=w.default=void 0;var b=S(T(678));w.default=b.default;var h=S(T(353));w.Cursor=h.default,T(413)},353:(x,w,T)=>{Object.defineProperty(w,"__esModule",{value:!0});var S=T(621),b=function(){function h(u,l,d){this.id=u,this.name=l,this.color=d,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return h.prototype.build=function(u){var l=document.createElement(h.CONTAINER_ELEMENT_TAG);l.classList.add(h.CURSOR_CLASS),l.id="ql-cursor-".concat(this.id),l.innerHTML=u.template;var d=l.getElementsByClassName(h.SELECTION_CLASS)[0],g=l.getElementsByClassName(h.CARET_CONTAINER_CLASS)[0],m=g.getElementsByClassName(h.CARET_CLASS)[0],f=l.getElementsByClassName(h.FLAG_CLASS)[0];return f.style.backgroundColor=this.color,m.style.backgroundColor=this.color,l.getElementsByClassName(h.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(u.hideDelayMs,"ms"),this._hideSpeedMs=u.hideSpeedMs,this._positionFlag=u.positionFlag,f.style.transitionDelay=this._hideDelay,f.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=l,this._selectionEl=d,this._caretEl=g,this._flagEl=f,g.addEventListener("mouseover",this._setHoverState),this._el},h.prototype.show=function(){this._el.classList.remove(h.HIDDEN_CLASS)},h.prototype.hide=function(){this._el.classList.add(h.HIDDEN_CLASS)},h.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},h.prototype.toggleNearCursor=function(u,l){var d=this._getCoordinates(),g=d.left,m=d.right,f=d.top,a=d.bottom,c=u>=g&&u<=m&&l>=f&&l<=a;return this._caretEl.classList.toggle(h.CONTAINER_HOVER_CLASS,c),c},h.prototype.toggleFlag=function(u){var l=this;this._caretEl.classList.toggle(h.CONTAINER_HOVER_CLASS,u)||(this._flagEl.classList.add(h.NO_DELAY_CLASS),setTimeout(function(){return l._flagEl.classList.remove(h.NO_DELAY_CLASS)},this._hideSpeedMs))},h.prototype.updateCaret=function(u,l){this._caretEl.style.top="".concat(u.top,"px"),this._caretEl.style.left="".concat(u.left,"px"),this._caretEl.style.height="".concat(u.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,u,l):this._updateCaretFlag(u,l)},h.prototype.updateSelection=function(u,l){var d=this;this._clearSelection(),u=u||[],u=Array.from(u),u=this._sanitize(u),(u=this._sortByDomPosition(u)).forEach(function(g){return d._addSelection(g,l)})},h.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},h.prototype._toggleOpenedCursor=function(u){var l=this.toggleNearCursor(u.clientX,u.clientY);this._caretEl.classList.toggle(h.CONTAINER_NO_POINTER_CLASS,l),l||document.removeEventListener("mousemove",this._toggleOpenedCursor)},h.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},h.prototype._updateCaretFlag=function(u,l){this._flagEl.style.width="";var d=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(h.FLAG_FLIPPED_CLASS),u.left>l.width-d.width&&this._flagEl.classList.add(h.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(u.left,"px"),this._flagEl.style.top="".concat(u.top,"px"),this._flagEl.style.width="".concat(Math.ceil(d.width),"px")},h.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},h.prototype._addSelection=function(u,l){var d=this._selectionBlock(u,l);this._selectionEl.appendChild(d)},h.prototype._selectionBlock=function(u,l){var d=document.createElement(h.SELECTION_ELEMENT_TAG);return d.classList.add(h.SELECTION_BLOCK_CLASS),d.style.top="".concat(u.top-l.top,"px"),d.style.left="".concat(u.left-l.left,"px"),d.style.width="".concat(u.width,"px"),d.style.height="".concat(u.height,"px"),d.style.backgroundColor=S(this.color).setAlpha(.3).toString(),d},h.prototype._sortByDomPosition=function(u){return u.sort(function(l,d){return l.top===d.top?l.left-d.left:l.top-d.top})},h.prototype._sanitize=function(u){var l=this,d=new Set;return u.filter(function(g){if(!g.width||!g.height)return!1;var m=l._serialize(g);return!d.has(m)&&(d.add(m),!0)})},h.prototype._serialize=function(u){return["top:".concat(u.top),"right:".concat(u.right),"bottom:".concat(u.bottom),"left:".concat(u.left)].join(";")},h.CONTAINER_ELEMENT_TAG="SPAN",h.SELECTION_ELEMENT_TAG="SPAN",h.CURSOR_CLASS="ql-cursor",h.SELECTION_CLASS="ql-cursor-selections",h.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",h.CARET_CLASS="ql-cursor-caret",h.CARET_CONTAINER_CLASS="ql-cursor-caret-container",h.CONTAINER_HOVER_CLASS="hover",h.CONTAINER_NO_POINTER_CLASS="no-pointer",h.FLAG_CLASS="ql-cursor-flag",h.FLAG_FLIPPED_CLASS="flag-flipped",h.NAME_CLASS="ql-cursor-name",h.HIDDEN_CLASS="hidden",h.NO_DELAY_CLASS="no-delay",h}();w.default=b},678:function(x,w,T){var S=this&&this.__createBinding||(Object.create?function(c,s,v,y){y===void 0&&(y=v),Object.defineProperty(c,y,{enumerable:!0,get:function(){return s[v]}})}:function(c,s,v,y){y===void 0&&(y=v),c[y]=s[v]}),b=this&&this.__setModuleDefault||(Object.create?function(c,s){Object.defineProperty(c,"default",{enumerable:!0,value:s})}:function(c,s){c.default=s}),h=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var s={};if(c!=null)for(var v in c)v!=="default"&&Object.prototype.hasOwnProperty.call(c,v)&&S(s,c,v);return b(s,c),s},u=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(w,"__esModule",{value:!0});var l=u(T(353)),d=h(T(165)),g=u(T(338)),m=u(T(33)),f=T(895),a=function(){function c(s,v){v===void 0&&(v={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=s,this.options=this._setDefaults(v),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return c.prototype.createCursor=function(s,v,y){var N=this._cursors[s];if(!N){N=new l.default(s,v,y),this._cursors[s]=N;var R=N.build(this.options);this._container.appendChild(R)}return N},c.prototype.moveCursor=function(s,v){var y=this._cursors[s];y&&(y.range=v,this._updateCursor(y))},c.prototype.removeCursor=function(s){var v=this._cursors[s];v&&(v.remove(),delete this._cursors[s])},c.prototype.update=function(){var s=this;this.cursors().forEach(function(v){return s._updateCursor(v)})},c.prototype.clearCursors=function(){var s=this;this.cursors().forEach(function(v){return s.removeCursor(v.id)})},c.prototype.toggleFlag=function(s,v){var y=this._cursors[s];y&&y.toggleFlag(v)},c.prototype.cursors=function(){var s=this;return Object.keys(this._cursors).map(function(v){return s._cursors[v]})},c.prototype._registerSelectionChangeListeners=function(){var s=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(v){s._currentSelection=v})},c.prototype._registerTextChangeListener=function(){var s=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(v){return s._handleTextChange(v)})},c.prototype._registerDomListeners=function(){var s=this,v=this.quill.container.getElementsByClassName("ql-editor")[0];v.addEventListener("scroll",function(){return s.update()}),v.addEventListener("touchstart",this._handleCursorTouch)},c.prototype._handleCursorTouch=function(s){var v=this;this.cursors().forEach(function(y){y.toggleNearCursor(s.pageX,s.pageY),setTimeout(function(){return y.toggleFlag(!1)},v.options.hideDelayMs)})},c.prototype._registerResizeObserver=function(){var s=this;if(!this._isObserving){var v=this.quill.container.getElementsByClassName("ql-editor")[0],y=new m.default(function(N){N[0].target.isConnected||(y.disconnect(),s._isObserving=!1),s.update()});y.observe(v),this._isObserving=!0}},c.prototype._updateCursor=function(s){if(this._registerResizeObserver(),!s.range)return s.hide();var v=this._indexWithinQuillBounds(s.range.index),y=this._indexWithinQuillBounds(s.range.index+s.range.length),N=this.quill.getLeaf(v),R=this.quill.getLeaf(y);if(!this._leafIsValid(N)||!this._leafIsValid(R))return s.hide();s.show();var E=this._boundsContainer.getBoundingClientRect(),I=this.quill.getBounds(y);s.updateCaret(I,E);var k=this._lineRanges(s,N,R).reduce(function(P,L){return P.concat(Array.from(d.getClientRects(L)))},[]);s.updateSelection(k,E)},c.prototype._indexWithinQuillBounds=function(s){var v=this.quill.getLength(),y=v?v-1:0;return s=Math.max(s,0),Math.min(s,y)},c.prototype._leafIsValid=function(s){return s&&s[0]&&s[0].domNode&&s[1]>=0},c.prototype._handleTextChange=function(s){var v=this;window.setTimeout(function(){v.options.transformOnTextChange&&v._transformCursors(s),v.options.selectionChangeSource&&(v._emitSelection(),v.update())})},c.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},c.prototype._setDefaults=function(s){return(s=Object.assign({},s)).template||(s.template=c.DEFAULTS.template),s.containerClass||(s.containerClass=c.DEFAULTS.containerClass),s.selectionChangeSource!==null&&(s.selectionChangeSource||(s.selectionChangeSource=c.DEFAULTS.selectionChangeSource)),s.hideDelayMs=Number.isInteger(s.hideDelayMs)?s.hideDelayMs:c.DEFAULTS.hideDelayMs,s.hideSpeedMs=Number.isInteger(s.hideSpeedMs)?s.hideSpeedMs:c.DEFAULTS.hideSpeedMs,s.transformOnTextChange=!!s.transformOnTextChange,s},c.prototype._lineRanges=function(s,v,y){var N=this.quill.getLines(s.range);return N.reduce(function(R,E,I){if(!E.children){var k=document.createRange();return k.selectNode(E.domNode),R.concat(k)}var P=I===0?v:E.path(0).pop(),L=P[0],B=P[1],q=I===N.length-1?y:E.path(E.length()-1).pop(),V=q[0],X=q[1],ue=document.createRange();return L.domNode.nodeType===Node.TEXT_NODE?ue.setStart(L.domNode,B):ue.setStartBefore(L.domNode),V.domNode.nodeType===Node.TEXT_NODE?ue.setEnd(V.domNode,X):ue.setEndAfter(V.domNode),R.concat(ue)},[])},c.prototype._transformCursors=function(s){var v=this;s=new f(s),this.cursors().filter(function(y){return y.range}).forEach(function(y){y.range.index=s.transformPosition(y.range.index),v._updateCursor(y)})},c.DEFAULTS={template:g.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},c}();w.default=a},338:function(x,w,T){var S=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(w,"__esModule",{value:!0});var b=S(T(353)),h=`
  <span class="`.concat(b.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(b.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(b.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(b.default.FLAG_CLASS,`">
    <small class="`).concat(b.default.NAME_CLASS,`"></small>
  </div>
`);w.default=h}},C={};function A(x){var w=C[x];if(w!==void 0)return w.exports;var T=C[x]={id:x,loaded:!1,exports:{}};return $[x].call(T.exports,T,T.exports,A),T.loaded=!0,T.exports}A.n=x=>{var w=x&&x.__esModule?()=>x.default:()=>x;return A.d(w,{a:w}),w},A.d=(x,w)=>{for(var T in w)A.o(w,T)&&!A.o(x,T)&&Object.defineProperty(x,T,{enumerable:!0,get:w[T]})},A.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),A.o=(x,w)=>Object.prototype.hasOwnProperty.call(x,w),A.r=x=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},A.nmd=x=>(x.paths=[],x.children||(x.children=[]),x),A.nc=void 0;var _=A(607);return _.default})())})(ku);const ud=$s(ku.exports);var it=globalThis&&globalThis.__classPrivateFieldSet||function(Fe,de,$){if(!de.has(Fe))throw new TypeError("attempted to set private field on non-instance");return de.set(Fe,$),$},Me=globalThis&&globalThis.__classPrivateFieldGet||function(Fe,de){if(!de.has(Fe))throw new TypeError("attempted to get private field on non-instance");return de.get(Fe)},gi,Ri,ir,no,Do,Rr,Dr,Cr,Lr,Mr,Br,jr,qr,Di,ro,mi,os,vi;const cd=function(Fe){var de=131,$=137,C=0;Fe+="x";var A=Math.floor(9007199254740991/$);for(let _=0;_<Fe.length;_++)C>A&&(C=Math.floor(C/$)),C=C*de+Fe.charCodeAt(_);return C},Be="0123456789abcdef".split(""),fd=[-2147483648,8388608,32768,128],rr=[24,16,8,0],is=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Vt=[];class hd{constructor(de=!1,$=!1){gi.set(this,void 0),Ri.set(this,void 0),ir.set(this,void 0),no.set(this,void 0),Do.set(this,void 0),Rr.set(this,void 0),Dr.set(this,void 0),Cr.set(this,void 0),Lr.set(this,void 0),Mr.set(this,void 0),Br.set(this,void 0),jr.set(this,void 0),qr.set(this,void 0),Di.set(this,void 0),ro.set(this,void 0),mi.set(this,void 0),os.set(this,0),vi.set(this,void 0),this.init(de,$)}init(de,$){$?(Vt[0]=Vt[16]=Vt[1]=Vt[2]=Vt[3]=Vt[4]=Vt[5]=Vt[6]=Vt[7]=Vt[8]=Vt[9]=Vt[10]=Vt[11]=Vt[12]=Vt[13]=Vt[14]=Vt[15]=0,it(this,Ri,Vt)):it(this,Ri,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),de?(it(this,Rr,3238371032),it(this,Dr,914150663),it(this,Cr,812702999),it(this,Lr,4144912697),it(this,Mr,4290775857),it(this,Br,1750603025),it(this,jr,1694076839),it(this,qr,3204075428)):(it(this,Rr,1779033703),it(this,Dr,3144134277),it(this,Cr,1013904242),it(this,Lr,2773480762),it(this,Mr,1359893119),it(this,Br,2600822924),it(this,jr,528734635),it(this,qr,1541459225)),it(this,gi,it(this,vi,it(this,ir,it(this,ro,0)))),it(this,no,it(this,Di,!1)),it(this,Do,!0),it(this,mi,de)}update(de){if(Me(this,no))return this;let $;de instanceof ArrayBuffer?$=new Uint8Array(de):$=de;let C=0;const A=$.length,_=Me(this,Ri);for(;C<A;){let x;if(Me(this,Di)&&(it(this,Di,!1),_[0]=Me(this,gi),_[16]=_[1]=_[2]=_[3]=_[4]=_[5]=_[6]=_[7]=_[8]=_[9]=_[10]=_[11]=_[12]=_[13]=_[14]=_[15]=0),typeof $!="string")for(x=Me(this,vi);C<A&&x<64;++C)_[x>>2]|=$[C]<<rr[x++&3];else for(x=Me(this,vi);C<A&&x<64;++C){let w=$.charCodeAt(C);w<128?_[x>>2]|=w<<rr[x++&3]:w<2048?(_[x>>2]|=(192|w>>6)<<rr[x++&3],_[x>>2]|=(128|w&63)<<rr[x++&3]):w<55296||w>=57344?(_[x>>2]|=(224|w>>12)<<rr[x++&3],_[x>>2]|=(128|w>>6&63)<<rr[x++&3],_[x>>2]|=(128|w&63)<<rr[x++&3]):(w=65536+((w&1023)<<10|$.charCodeAt(++C)&1023),_[x>>2]|=(240|w>>18)<<rr[x++&3],_[x>>2]|=(128|w>>12&63)<<rr[x++&3],_[x>>2]|=(128|w>>6&63)<<rr[x++&3],_[x>>2]|=(128|w&63)<<rr[x++&3])}it(this,os,x),it(this,ir,Me(this,ir)+(x-Me(this,vi))),x>=64?(it(this,gi,_[16]),it(this,vi,x-64),this.hash(),it(this,Di,!0)):it(this,vi,x)}return Me(this,ir)>4294967295&&(it(this,ro,Me(this,ro)+(Me(this,ir)/4294967296<<0)),it(this,ir,Me(this,ir)%4294967296)),this}finalize(){if(Me(this,no))return;it(this,no,!0);const de=Me(this,Ri),$=Me(this,os);de[16]=Me(this,gi),de[$>>2]|=fd[$&3],it(this,gi,de[16]),$>=56&&(Me(this,Di)||this.hash(),de[0]=Me(this,gi),de[16]=de[1]=de[2]=de[3]=de[4]=de[5]=de[6]=de[7]=de[8]=de[9]=de[10]=de[11]=de[12]=de[13]=de[14]=de[15]=0),de[14]=Me(this,ro)<<3|Me(this,ir)>>>29,de[15]=Me(this,ir)<<3,this.hash()}hash(){let de=Me(this,Rr),$=Me(this,Dr),C=Me(this,Cr),A=Me(this,Lr),_=Me(this,Mr),x=Me(this,Br),w=Me(this,jr),T=Me(this,qr);const S=Me(this,Ri);let b,h,u,l,d,g,m,f,a,c;for(let s=16;s<64;++s)l=S[s-15],b=(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3,l=S[s-2],h=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,S[s]=S[s-16]+b+S[s-7]+h<<0;c=$&C;for(let s=0;s<64;s+=4)Me(this,Do)?(Me(this,mi)?(m=300032,l=S[0]-1413257819,T=l-150054599<<0,A=l+24177077<<0):(m=704751109,l=S[0]-210244248,T=l-1521486534<<0,A=l+143694565<<0),it(this,Do,!1)):(b=(de>>>2|de<<30)^(de>>>13|de<<19)^(de>>>22|de<<10),h=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7),m=de&$,u=m^de&C^c,g=_&x^~_&w,l=T+h+g+is[s]+S[s],d=b+u,T=A+l<<0,A=l+d<<0),b=(A>>>2|A<<30)^(A>>>13|A<<19)^(A>>>22|A<<10),h=(T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7),f=A&de,u=f^A&$^m,g=T&_^~T&x,l=w+h+g+is[s+1]+S[s+1],d=b+u,w=C+l<<0,C=l+d<<0,b=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10),h=(w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7),a=C&A,u=a^C&de^f,g=w&T^~w&_,l=x+h+g+is[s+2]+S[s+2],d=b+u,x=$+l<<0,$=l+d<<0,b=($>>>2|$<<30)^($>>>13|$<<19)^($>>>22|$<<10),h=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),c=$&C,u=c^$&A^a,g=x&w^~x&T,l=_+h+g+is[s+3]+S[s+3],d=b+u,_=de+l<<0,de=l+d<<0;it(this,Rr,Me(this,Rr)+de<<0),it(this,Dr,Me(this,Dr)+$<<0),it(this,Cr,Me(this,Cr)+C<<0),it(this,Lr,Me(this,Lr)+A<<0),it(this,Mr,Me(this,Mr)+_<<0),it(this,Br,Me(this,Br)+x<<0),it(this,jr,Me(this,jr)+w<<0),it(this,qr,Me(this,qr)+T<<0)}hex(){this.finalize();const de=Me(this,Rr),$=Me(this,Dr),C=Me(this,Cr),A=Me(this,Lr),_=Me(this,Mr),x=Me(this,Br),w=Me(this,jr),T=Me(this,qr);let S=Be[de>>28&15]+Be[de>>24&15]+Be[de>>20&15]+Be[de>>16&15]+Be[de>>12&15]+Be[de>>8&15]+Be[de>>4&15]+Be[de&15]+Be[$>>28&15]+Be[$>>24&15]+Be[$>>20&15]+Be[$>>16&15]+Be[$>>12&15]+Be[$>>8&15]+Be[$>>4&15]+Be[$&15]+Be[C>>28&15]+Be[C>>24&15]+Be[C>>20&15]+Be[C>>16&15]+Be[C>>12&15]+Be[C>>8&15]+Be[C>>4&15]+Be[C&15]+Be[A>>28&15]+Be[A>>24&15]+Be[A>>20&15]+Be[A>>16&15]+Be[A>>12&15]+Be[A>>8&15]+Be[A>>4&15]+Be[A&15]+Be[_>>28&15]+Be[_>>24&15]+Be[_>>20&15]+Be[_>>16&15]+Be[_>>12&15]+Be[_>>8&15]+Be[_>>4&15]+Be[_&15]+Be[x>>28&15]+Be[x>>24&15]+Be[x>>20&15]+Be[x>>16&15]+Be[x>>12&15]+Be[x>>8&15]+Be[x>>4&15]+Be[x&15]+Be[w>>28&15]+Be[w>>24&15]+Be[w>>20&15]+Be[w>>16&15]+Be[w>>12&15]+Be[w>>8&15]+Be[w>>4&15]+Be[w&15];return Me(this,mi)||(S+=Be[T>>28&15]+Be[T>>24&15]+Be[T>>20&15]+Be[T>>16&15]+Be[T>>12&15]+Be[T>>8&15]+Be[T>>4&15]+Be[T&15]),S}toString(){return this.hex()}digest(){this.finalize();const de=Me(this,Rr),$=Me(this,Dr),C=Me(this,Cr),A=Me(this,Lr),_=Me(this,Mr),x=Me(this,Br),w=Me(this,jr),T=Me(this,qr),S=[de>>24&255,de>>16&255,de>>8&255,de&255,$>>24&255,$>>16&255,$>>8&255,$&255,C>>24&255,C>>16&255,C>>8&255,C&255,A>>24&255,A>>16&255,A>>8&255,A&255,_>>24&255,_>>16&255,_>>8&255,_&255,x>>24&255,x>>16&255,x>>8&255,x&255,w>>24&255,w>>16&255,w>>8&255,w&255];return Me(this,mi)||S.push(T>>24&255,T>>16&255,T>>8&255,T&255),S}array(){return this.digest()}arrayBuffer(){this.finalize();const de=new ArrayBuffer(Me(this,mi)?28:32),$=new DataView(de);return $.setUint32(0,Me(this,Rr)),$.setUint32(4,Me(this,Dr)),$.setUint32(8,Me(this,Cr)),$.setUint32(12,Me(this,Lr)),$.setUint32(16,Me(this,Mr)),$.setUint32(20,Me(this,Br)),$.setUint32(24,Me(this,jr)),Me(this,mi)||$.setUint32(28,Me(this,qr)),de}}gi=new WeakMap,Ri=new WeakMap,ir=new WeakMap,no=new WeakMap,Do=new WeakMap,Rr=new WeakMap,Dr=new WeakMap,Cr=new WeakMap,Lr=new WeakMap,Mr=new WeakMap,Br=new WeakMap,jr=new WeakMap,qr=new WeakMap,Di=new WeakMap,ro=new WeakMap,mi=new WeakMap,os=new WeakMap,vi=new WeakMap;function dd(Fe){const de=new hd;return de.update(Fe),parseInt(de.hex().substring(0,8),16)}const pd=function(Fe){var de="#";return Fe.forEach(function($){$<16&&(de+=0),de+=$.toString(16)}),de},gd=function(Fe,de,$){Fe/=360;var C=$<.5?$*(1+de):$+de-$*de,A=2*$-C;return[Fe+1/3,Fe,Fe-1/3].map(function(_){return _<0&&_++,_>1&&_--,_<1/6?_=A+(C-A)*6*_:_<.5?_=C:_<2/3?_=A+(C-A)*6*(2/3-_):_=A,Math.round(_*255)})};class md{constructor(de={}){const[$,C]=[de.lightness,de.saturation].map(function(A){return A=A!==void 0?A:[.35,.5,.65],Array.isArray(A)?A.concat():[A]});this.L=$,this.S=C,typeof de.hue=="number"&&(de.hue={min:de.hue,max:de.hue}),typeof de.hue=="object"&&!Array.isArray(de.hue)&&(de.hue=[de.hue]),typeof de.hue>"u"&&(de.hue=[]),this.hueRanges=de.hue.map(function(A){return{min:typeof A.min>"u"?0:A.min,max:typeof A.max>"u"?360:A.max}}),this.hash=dd,typeof de.hash=="function"&&(this.hash=de.hash),de.hash==="bkdr"&&(this.hash=cd)}hsl(de){var $,C,A,_=this.hash(de),x=727;if(this.hueRanges.length){const w=this.hueRanges[_%this.hueRanges.length];$=_/this.hueRanges.length%x*(w.max-w.min)/x+w.min}else $=_%359;return _=Math.ceil(_/360),C=this.S[_%this.S.length],_=Math.ceil(_/this.S.length),A=this.L[_%this.L.length],[$,C,A]}rgb(de){var $=this.hsl(de);return gd.apply(this,$)}hex(de){var $=this.rgb(de);return pd($)}}const Ci={isOnline:!1,showOffline:Fe=>{Ci.isOnline=!1,Fe.innerHTML='<span class="red"> </span>'},showOnline:Fe=>{Ci.isOnline=!0,Fe.innerHTML='<span class="green"> </span>'},statusListener:Fe=>de=>{Ci.isOnline&&de.value==yi.exports.StreamConnectionStatus.Disconnected?Ci.showOffline(Fe):!Ci.isOnline&&de.value==yi.exports.StreamConnectionStatus.Connected&&Ci.showOnline(Fe)}};function vd(Fe,de,$){const C=[];for(const{clientID:A,presence:_}of de)C.push($===A?`<b>${_.username}</b>`:_.username);Fe.innerHTML=JSON.stringify(C)}function wu(Fe,de,$){Fe.innerText=$.toJSON(),de.innerText=$.getRoot().content.toTestString()}const yd=document.getElementById("peers"),Ou=document.getElementById("document"),Su=document.getElementById("document-text"),bd=document.getElementById("network-status"),Td=new md,_d=`vanilla-quill-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`;function Fs(Fe){var C;const{embed:de,...$}=(C=Fe.attributes)!=null?C:{};return de?{insert:JSON.parse(de),attributes:$}:{insert:Fe.content||"",attributes:Fe.attributes}}async function Ed(){const Fe=new Js.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});await Fe.activate();const de=new Js.Document(_d,{enableDevtools:!0});de.subscribe("connection",T=>{Ci.statusListener(bd)(T)}),de.subscribe("presence",T=>{T.type!==yi.exports.DocEventType.PresenceChanged&&vd(yd,de.getPresences(),Fe.getID())}),await Fe.attach(de,{initialPresence:{username:Fe.getID().slice(-2),color:Td.hex(Fe.getID().slice(-2)),selection:void 0}}),de.update(T=>{T.content||(T.content=new Js.Text,T.content.edit(0,0,`
`))},"create content if not exists"),de.subscribe(T=>{T.type==="snapshot"&&w(),wu(Ou,Su,de)}),de.subscribe("$.content",T=>{T.type==="remote-change"&&x(T.value.operations),C()}),de.subscribe("others",T=>{T.type===yi.exports.DocEventType.Unwatched?_.removeCursor(T.value.clientID):T.type===yi.exports.DocEventType.PresenceChanged&&$(T.value)});function $(T){const{clientID:S,presence:b}=T;if(S===Fe.getID()||!b)return;const{username:h,color:u,selection:l}=b;if(!l)return;const d=de.getRoot().content.posRangeToIndexRange(l);_.createCursor(S,h,u),_.moveCursor(S,{index:d[0],length:d[1]-d[0]})}function C(){for(const T of de.getPresences())$(T)}await Fe.sync(),Eu.register("modules/cursors",ud);const A=new Eu("#editor",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],["clean"]],cursors:!0},theme:"snow"}),_=A.getModule("cursors");A.on("text-change",(T,S,b)=>{if(b==="api"||!T.ops)return;let h=0,u=0;console.log(`%c quill: ${JSON.stringify(T.ops)}`,"color: green");for(const l of T.ops)l.attributes!==void 0||l.insert!==void 0?(l.retain!==void 0&&(u=h+l.retain),console.log(`%c local: ${h}-${u}: ${l.insert} ${l.attributes?JSON.stringify(l.attributes):"{}"}`,"color: green"),de.update((d,g)=>{let m;l.attributes!==void 0&&l.insert===void 0?d.content.setStyle(h,u,l.attributes):l.insert!==void 0&&(u<h&&(u=h),typeof l.insert=="object"?m=d.content.edit(h,u," ",{embed:JSON.stringify(l.insert),...l.attributes}):m=d.content.edit(h,u,l.insert,l.attributes),h=u+l.insert.length),m&&g.set({selection:d.content.indexRangeToPosRange(m)})},`update style by ${Fe.getID()}`)):l.delete!==void 0?(u=h+l.delete,console.log(`%c local: ${h}-${u}: ''`,"color: green"),de.update((d,g)=>{const m=d.content.edit(h,u,"");m&&g.set({selection:d.content.indexRangeToPosRange(m)})},`update content by ${Fe.getID()}`)):l.retain!==void 0&&(h=u+l.retain,u=h)}).on("selection-change",(T,S,b)=>{if(!!T){if(b==="api"){const{selection:h}=de.getMyPresence();if(h){const[u,l]=de.getRoot().content.posRangeToIndexRange(h),{index:d,length:g}=T;if(u===d&&l===d+g)return}}de.update((h,u)=>{u.set({selection:h.content.indexRangeToPosRange([T.index,T.index+T.length])})},`update selection by ${Fe.getID()}`)}});function x(T){const S=[];let b=0;for(const h of T)if(h.type==="edit"){const u=h.from,l=h.to,d=u-b,g=l-u,{insert:m,attributes:f}=Fs(h.value);if(console.log(`%c remote: ${u}-${l}: ${m}`,"color: skyblue"),d&&S.push({retain:d}),g&&S.push({delete:g}),m){const a={insert:m};f&&(a.attributes=f),S.push(a)}b=l}else if(h.type==="style"){const u=h.from,l=h.to,d=u-b,g=l-u,{attributes:m}=Fs(h.value);if(console.log(`%c remote: ${u}-${l}: ${JSON.stringify(m)}`,"color: skyblue"),d&&S.push({retain:d}),m){const f={attributes:m};g&&(f.retain=g),S.push(f)}b=l}if(S.length){console.log(`%c to quill: ${JSON.stringify(S)}`,"color: green");const h={ops:S};A.updateContents(h,"api")}}function w(){const S={ops:de.getRoot().content.values().map(b=>Fs(b))};A.setContents(S,"api")}w(),C(),wu(Ou,Su,de)}Ed();
