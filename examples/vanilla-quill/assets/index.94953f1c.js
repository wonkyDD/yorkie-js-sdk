(function(){const fe=document.createElement("link").relList;if(fe&&fe.supports&&fe.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))C(O);new MutationObserver(O=>{for(const w of O)if(w.type==="childList")for(const k of w.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&C(k)}).observe(document,{childList:!0,subtree:!0});function z(O){const w={};return O.integrity&&(w.integrity=O.integrity),O.referrerpolicy&&(w.referrerPolicy=O.referrerpolicy),O.crossorigin==="use-credentials"?w.credentials="include":O.crossorigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function C(O){if(O.ep)return;O.ep=!0;const w=z(O);fetch(O.href,w)}})();var na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yo(Be){return Be&&Be.__esModule&&Object.prototype.hasOwnProperty.call(Be,"default")?Be.default:Be}var dr={exports:{}};(function(Be,fe){(function(z,C){C(fe)})(na,function(z){var C=Object.defineProperty,O=(r,e,t)=>e in r?C(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,w=(r,e,t)=>(O(r,typeof e!="symbol"?e+"":e,t),t),k;(function(r){r[r.Canceled=1]="Canceled",r[r.Unknown=2]="Unknown",r[r.InvalidArgument=3]="InvalidArgument",r[r.DeadlineExceeded=4]="DeadlineExceeded",r[r.NotFound=5]="NotFound",r[r.AlreadyExists=6]="AlreadyExists",r[r.PermissionDenied=7]="PermissionDenied",r[r.ResourceExhausted=8]="ResourceExhausted",r[r.FailedPrecondition=9]="FailedPrecondition",r[r.Aborted=10]="Aborted",r[r.OutOfRange=11]="OutOfRange",r[r.Unimplemented=12]="Unimplemented",r[r.Internal=13]="Internal",r[r.Unavailable=14]="Unavailable",r[r.DataLoss=15]="DataLoss",r[r.Unauthenticated=16]="Unauthenticated"})(k||(k={}));function S(r){const e=k[r];return typeof e!="string"?r.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class v extends Error{constructor(e,t=k.Unknown,n,i,h){super(A(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(n!=null?n:{}),this.details=i!=null?i:[],this.cause=h}static from(e,t=k.Unknown){return e instanceof v?e:e instanceof Error?e.name=="AbortError"?new v(e.message,k.Canceled):new v(e.message,t,void 0,void 0,e):new v(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===v.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,n=[];for(const i of this.details){if("getType"in i){t.findMessage(i.getType().typeName)&&n.push(i);continue}const h=t.findMessage(i.type);if(h)try{n.push(h.fromBinary(i.value))}catch{}}return n}}function A(r,e){return r.length?`[${S(e)}] ${r}`:`[${S(e)}]`}function y(r,e){if(!r)throw new Error(e)}const f=34028234663852886e22,a=-34028234663852886e22,l=4294967295,d=2147483647,p=-2147483648;function g(r){if(typeof r!="number")throw new Error("invalid int 32: "+typeof r);if(!Number.isInteger(r)||r>d||r<p)throw new Error("invalid int 32: "+r)}function c(r){if(typeof r!="number")throw new Error("invalid uint 32: "+typeof r);if(!Number.isInteger(r)||r>l||r<0)throw new Error("invalid uint 32: "+r)}function s(r){if(typeof r!="number")throw new Error("invalid float 32: "+typeof r);if(!!Number.isFinite(r)&&(r>f||r<a))throw new Error("invalid float 32: "+r)}const u=Symbol("@bufbuild/protobuf/enum-type");function o(r){const e=r[u];return y(e,"missing enum type on enum object"),e}function m(r,e,t,n){r[u]=T(e,t.map(i=>({no:i.no,name:i.name,localName:r[i.no]})))}function T(r,e,t){const n=Object.create(null),i=Object.create(null),h=[];for(const b of e){const P=I(b);h.push(P),n[b.name]=P,i[b.no]=P}return{typeName:r,values:h,findName(b){return n[b]},findNumber(b){return i[b]}}}function _(r,e,t){const n={};for(const i of e){const h=I(i);n[h.localName]=h.no,n[h.no]=h.localName}return m(n,r,e),n}function I(r){return"localName"in r?r:Object.assign(Object.assign({},r),{localName:r.name})}class D{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType(),i=n.runtime.bin,h=i.makeReadOptions(t);return i.readMessage(this,h.readerFactory(e),e.byteLength,h),this}fromJson(e,t){const n=this.getType(),i=n.runtime.json,h=i.makeReadOptions(t);return i.readMessage(n,e,h,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(n,t)}toBinary(e){const t=this.getType(),n=t.runtime.bin,i=n.makeWriteOptions(e),h=i.writerFactory();return n.writeMessage(this,h,i),h.finish()}toJson(e){const t=this.getType(),n=t.runtime.json,i=n.makeWriteOptions(e);return n.writeMessage(this,i)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function x(r,e,t,n){var i;const h=(i=n==null?void 0:n.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),b={[h]:function(P){r.util.initFields(this),r.util.initPartial(P,this)}}[h];return Object.setPrototypeOf(b.prototype,new D),Object.assign(b,{runtime:r,typeName:e,fields:r.util.newFieldList(t),fromBinary(P,U){return new b().fromBinary(P,U)},fromJson(P,U){return new b().fromJson(P,U)},fromJsonString(P,U){return new b().fromJsonString(P,U)},equals(P,U){return r.util.equals(b,P,U)}}),b}function E(){let r=0,e=0;for(let n=0;n<28;n+=7){let i=this.buf[this.pos++];if(r|=(i&127)<<n,(i&128)==0)return this.assertBounds(),[r,e]}let t=this.buf[this.pos++];if(r|=(t&15)<<28,e=(t&112)>>4,(t&128)==0)return this.assertBounds(),[r,e];for(let n=3;n<=31;n+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<n,(i&128)==0)return this.assertBounds(),[r,e]}throw new Error("invalid varint")}function N(r,e,t){for(let h=0;h<28;h=h+7){const b=r>>>h,P=!(b>>>7==0&&e==0),U=(P?b|128:b)&255;if(t.push(U),!P)return}const n=r>>>28&15|(e&7)<<4,i=e>>3!=0;if(t.push((i?n|128:n)&255),!!i){for(let h=3;h<31;h=h+7){const b=e>>>h,P=b>>>7!=0,U=(P?b|128:b)&255;if(t.push(U),!P)return}t.push(e>>>31&1)}}const R=4294967296;function L(r){const e=r[0]==="-";e&&(r=r.slice(1));const t=1e6;let n=0,i=0;function h(b,P){const U=Number(r.slice(b,P));i*=t,n=n*t+U,n>=R&&(i=i+(n/R|0),n=n%R)}return h(-24,-18),h(-18,-12),h(-12,-6),h(-6),e?Z(n,i):le(n,i)}function B(r,e){let t=le(r,e);const n=t.hi&2147483648;n&&(t=Z(t.lo,t.hi));const i=J(t.lo,t.hi);return n?"-"+i:i}function J(r,e){if({lo:r,hi:e}=Y(r,e),e<=2097151)return String(R*e+r);const t=r&16777215,n=(r>>>24|e<<8)&16777215,i=e>>16&65535;let h=t+n*6777216+i*6710656,b=n+i*8147497,P=i*2;const U=1e7;return h>=U&&(b+=Math.floor(h/U),h%=U),b>=U&&(P+=Math.floor(b/U),b%=U),P.toString()+V(b)+V(h)}function Y(r,e){return{lo:r>>>0,hi:e>>>0}}function le(r,e){return{lo:r|0,hi:e|0}}function Z(r,e){return e=~e,r?r=~r+1:e+=1,le(r,e)}const V=r=>{const e=String(r);return"0000000".slice(e.length)+e};function M(r,e){if(r>=0){for(;r>127;)e.push(r&127|128),r=r>>>7;e.push(r)}else{for(let t=0;t<9;t++)e.push(r&127|128),r=r>>7;e.push(1)}}function $(){let r=this.buf[this.pos++],e=r&127;if((r&128)==0)return this.assertBounds(),e;if(r=this.buf[this.pos++],e|=(r&127)<<7,(r&128)==0)return this.assertBounds(),e;if(r=this.buf[this.pos++],e|=(r&127)<<14,(r&128)==0)return this.assertBounds(),e;if(r=this.buf[this.pos++],e|=(r&127)<<21,(r&128)==0)return this.assertBounds(),e;r=this.buf[this.pos++],e|=(r&15)<<28;for(let t=5;(r&128)!==0&&t<10;t++)r=this.buf[this.pos++];if((r&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function F(){const r=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof r.getBigInt64=="function"&&typeof r.getBigUint64=="function"&&typeof r.setBigInt64=="function"&&typeof r.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),h=BigInt("9223372036854775807"),b=BigInt("0"),P=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(U){const K=typeof U=="bigint"?U:BigInt(U);if(K>h||K<i)throw new Error(`int64 invalid: ${U}`);return K},uParse(U){const K=typeof U=="bigint"?U:BigInt(U);if(K>P||K<b)throw new Error(`uint64 invalid: ${U}`);return K},enc(U){return r.setBigInt64(0,this.parse(U),!0),{lo:r.getInt32(0,!0),hi:r.getInt32(4,!0)}},uEnc(U){return r.setBigInt64(0,this.uParse(U),!0),{lo:r.getInt32(0,!0),hi:r.getInt32(4,!0)}},dec(U,K){return r.setInt32(0,U,!0),r.setInt32(4,K,!0),r.getBigInt64(0,!0)},uDec(U,K){return r.setInt32(0,U,!0),r.setInt32(4,K,!0),r.getBigUint64(0,!0)}}}const t=i=>y(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),n=i=>y(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),L(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),n(i),L(i)},dec(i,h){return B(i,h)},uDec(i,h){return J(i,h)}}}const X=F();var j;(function(r){r[r.DOUBLE=1]="DOUBLE",r[r.FLOAT=2]="FLOAT",r[r.INT64=3]="INT64",r[r.UINT64=4]="UINT64",r[r.INT32=5]="INT32",r[r.FIXED64=6]="FIXED64",r[r.FIXED32=7]="FIXED32",r[r.BOOL=8]="BOOL",r[r.STRING=9]="STRING",r[r.BYTES=12]="BYTES",r[r.UINT32=13]="UINT32",r[r.SFIXED32=15]="SFIXED32",r[r.SFIXED64=16]="SFIXED64",r[r.SINT32=17]="SINT32",r[r.SINT64=18]="SINT64"})(j||(j={}));var q;(function(r){r[r.BIGINT=0]="BIGINT",r[r.STRING=1]="STRING"})(q||(q={}));function W(r,e,t){if(e===t)return!0;if(r==j.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}switch(r){case j.UINT64:case j.FIXED64:case j.INT64:case j.SFIXED64:case j.SINT64:return e==t}return!1}function ne(r,e){switch(r){case j.BOOL:return!1;case j.UINT64:case j.FIXED64:case j.INT64:case j.SFIXED64:case j.SINT64:return e==0?X.zero:"0";case j.DOUBLE:case j.FLOAT:return 0;case j.BYTES:return new Uint8Array(0);case j.STRING:return"";default:return 0}}function oe(r,e){switch(r){case j.BOOL:return e===!1;case j.STRING:return e==="";case j.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var ue;(function(r){r[r.Varint=0]="Varint",r[r.Bit64=1]="Bit64",r[r.LengthDelimited=2]="LengthDelimited",r[r.StartGroup=3]="StartGroup",r[r.EndGroup=4]="EndGroup",r[r.Bit32=5]="Bit32"})(ue||(ue={}));class we{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),n=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],n),n+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(c(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return g(e),M(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){s(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){c(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){g(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return g(e),e=(e<<1^e>>31)>>>0,M(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=X.enc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=X.uEnc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=X.enc(e);return N(t.lo,t.hi,this.buf),this}sint64(e){let t=X.enc(e),n=t.hi>>31,i=t.lo<<1^n,h=(t.hi<<1|t.lo>>>31)^n;return N(i,h,this.buf),this}uint64(e){let t=X.uEnc(e);return N(t.lo,t.hi,this.buf),this}}class Ie{constructor(e,t){this.varint64=E,this.uint32=$,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t!=null?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=e&7;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case ue.Varint:for(;this.buf[this.pos++]&128;);break;case ue.Bit64:this.pos+=4;case ue.Bit32:this.pos+=4;break;case ue.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ue.StartGroup:for(;;){const[h,b]=this.tag();if(b===ue.EndGroup){if(t!==void 0&&h!==t)throw new Error("invalid end group tag");break}this.skip(b,h)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return X.dec(...this.varint64())}uint64(){return X.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(e&1);return e=(e>>>1|(t&1)<<31)^n,t=t>>>1^n,X.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return X.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return X.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Ee(r,e,t,n){let i;return{typeName:e,extendee:t,get field(){if(!i){const h=typeof n=="function"?n():n;h.name=e.split(".").pop(),h.jsonName=`[${e}]`,i=r.util.newFieldList([h]).list()[0]}return i},runtime:r}}function xe(r){const e=r.field.localName,t=Object.create(null);return t[e]=G(r),[t,()=>t[e]]}function G(r){const e=r.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return ne(e.T,e.L);case"message":const t=e.T,n=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}function ae(r,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=r.length-1;t>=0;--t)if(r[t].no==e.no)return[r[t]];return[]}return r.filter(t=>t.no===e.no)}let ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),H=[];for(let r=0;r<ie.length;r++)H[ie[r].charCodeAt(0)]=r;H["-".charCodeAt(0)]=ie.indexOf("+"),H["_".charCodeAt(0)]=ie.indexOf("/");const re={dec(r){let e=r.length*3/4;r[r.length-2]=="="?e-=2:r[r.length-1]=="="&&(e-=1);let t=new Uint8Array(e),n=0,i=0,h,b=0;for(let P=0;P<r.length;P++){if(h=H[r.charCodeAt(P)],h===void 0)switch(r[P]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:b=h,i=1;break;case 1:t[n++]=b<<2|(h&48)>>4,b=h,i=2;break;case 2:t[n++]=(b&15)<<4|(h&60)>>2,b=h,i=3;break;case 3:t[n++]=(b&3)<<6|h,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,n)},enc(r){let e="",t=0,n,i=0;for(let h=0;h<r.length;h++)switch(n=r[h],t){case 0:e+=ie[n>>2],i=(n&3)<<4,t=1;break;case 1:e+=ie[i|n>>4],i=(n&15)<<2,t=2;break;case 2:e+=ie[i|n>>6],e+=ie[n&63],t=0;break}return t&&(e+=ie[i],e+="=",t==1&&(e+="=")),e}};function ge(r,e,t){Oe(e,r);const n=e.runtime.bin.makeReadOptions(t),i=ae(r.getType().runtime.bin.listUnknownFields(r),e.field),[h,b]=xe(e);for(const P of i)e.runtime.bin.readField(h,n.readerFactory(P.data),e.field,P.wireType,n);return b()}function me(r,e,t,n){Oe(e,r);const i=e.runtime.bin.makeReadOptions(n),h=e.runtime.bin.makeWriteOptions(n);if(ce(r,e)){const K=r.getType().runtime.bin.listUnknownFields(r).filter(te=>te.no!=e.field.no);r.getType().runtime.bin.discardUnknownFields(r);for(const te of K)r.getType().runtime.bin.onUnknownField(r,te.no,te.wireType,te.data)}const b=h.writerFactory();let P=e.field;!P.opt&&!P.repeated&&(P.kind=="enum"||P.kind=="scalar")&&(P=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(P,t,b,h);const U=i.readerFactory(b.finish());for(;U.pos<U.len;){const[K,te]=U.tag(),ve=U.skip(te,K);r.getType().runtime.bin.onUnknownField(r,K,te,ve)}}function ce(r,e){const t=r.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(r).find(n=>n.no==e.field.no)}function Oe(r,e){y(r.extendee.typeName==e.getType().typeName,`extension ${r.typeName} can only be applied to message ${r.extendee.typeName}`)}function ke(r,e){const t=r.localName;if(r.repeated)return e[t].length>0;if(r.oneof)return e[r.oneof.localName].case===t;switch(r.kind){case"enum":case"scalar":return r.opt||r.req?e[t]!==void 0:r.kind=="enum"?e[t]!==r.T.values[0].no:!oe(r.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function Le(r,e){const t=r.localName,n=!r.opt&&!r.req;if(r.repeated)e[t]=[];else if(r.oneof)e[r.oneof.localName]={case:void 0};else switch(r.kind){case"map":e[t]={};break;case"enum":e[t]=n?r.T.values[0].no:void 0;break;case"scalar":e[t]=n?ne(r.T,r.L):void 0;break;case"message":e[t]=void 0;break}}function Ge(r,e){if(r===null||typeof r!="object"||!Object.getOwnPropertyNames(D.prototype).every(n=>n in r&&typeof r[n]=="function"))return!1;const t=r.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function nt(r,e){return Ge(e)||!r.fieldWrapper?e:r.fieldWrapper.wrapField(e)}j.DOUBLE,j.FLOAT,j.INT64,j.UINT64,j.INT32,j.UINT32,j.BOOL,j.STRING,j.BYTES;const Ue={ignoreUnknownFields:!1},Ke={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function be(r){return r?Object.assign(Object.assign({},Ue),r):Ue}function Xe(r){return r?Object.assign(Object.assign({},Ke),r):Ke}const Pt=Symbol(),Jt=Symbol();function Mt(){return{makeReadOptions:be,makeWriteOptions:Xe,readMessage(r,e,t,n){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${r.typeName} from JSON: ${At(e)}`);n=n!=null?n:new r;const i=new Map,h=t.typeRegistry;for(const[b,P]of Object.entries(e)){const U=r.fields.findJsonName(b);if(U){if(U.oneof){if(P===null&&U.kind=="scalar")continue;const K=i.get(U.oneof);if(K!==void 0)throw new Error(`cannot decode message ${r.typeName} from JSON: multiple keys for oneof "${U.oneof.name}" present: "${K}", "${b}"`);i.set(U.oneof,b)}Vt(n,P,U,t,r)}else{let K=!1;if((h==null?void 0:h.findExtension)&&b.startsWith("[")&&b.endsWith("]")){const te=h.findExtension(b.substring(1,b.length-1));if(te&&te.extendee.typeName==r.typeName){K=!0;const[ve,ye]=xe(te);Vt(ve,P,te.field,t,te),me(n,te,ye(),t)}}if(!K&&!t.ignoreUnknownFields)throw new Error(`cannot decode message ${r.typeName} from JSON: key "${b}" is unknown`)}}return n},writeMessage(r,e){const t=r.getType(),n={};let i;try{for(i of t.fields.byNumber()){if(!ke(i,r)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!Tt(i))continue}const b=i.oneof?r[i.oneof.localName].value:r[i.localName],P=Ft(i,b,e);P!==void 0&&(n[e.useProtoFieldName?i.name:i.jsonName]=P)}const h=e.typeRegistry;if(h!=null&&h.findExtensionFor)for(const b of t.runtime.bin.listUnknownFields(r)){const P=h.findExtensionFor(t.typeName,b.no);if(P&&ce(r,P)){const U=ge(r,P,e),K=Ft(P.field,U,e);K!==void 0&&(n[P.field.jsonName]=K)}}}catch(h){const b=i?`cannot encode field ${t.typeName}.${i.name} to JSON`:`cannot encode message ${t.typeName} to JSON`,P=h instanceof Error?h.message:String(h);throw new Error(b+(P.length>0?`: ${P}`:""))}return n},readScalar(r,e,t){return kt(r,e,t!=null?t:q.BIGINT,!0)},writeScalar(r,e,t){if(e!==void 0&&(t||oe(r,e)))return gn(r,e)},debug:At}}function At(r){if(r===null)return"null";switch(typeof r){case"object":return Array.isArray(r)?"array":"object";case"string":return r.length>100?"string":`"${r.split('"').join('\\"')}"`;default:return String(r)}}function Vt(r,e,t,n,i){let h=t.localName;if(t.repeated){if(y(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${At(e)}`);const b=r[h];for(const P of e){if(P===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${At(P)}`);switch(t.kind){case"message":b.push(t.T.fromJson(P,n));break;case"enum":const U=Ht(t.T,P,n.ignoreUnknownFields,!0);U!==Jt&&b.push(U);break;case"scalar":try{b.push(kt(t.T,P,t.L,!0))}catch(K){let te=`cannot decode field ${i.typeName}.${t.name} from JSON: ${At(P)}`;throw K instanceof Error&&K.message.length>0&&(te+=`: ${K.message}`),new Error(te)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: ${At(e)}`);const b=r[h];for(const[P,U]of Object.entries(e)){if(U===null)throw new Error(`cannot decode field ${i.typeName}.${t.name} from JSON: map value null`);let K;try{K=Kt(t.K,P)}catch(te){let ve=`cannot decode map key for field ${i.typeName}.${t.name} from JSON: ${At(e)}`;throw te instanceof Error&&te.message.length>0&&(ve+=`: ${te.message}`),new Error(ve)}switch(t.V.kind){case"message":b[K]=t.V.T.fromJson(U,n);break;case"enum":const te=Ht(t.V.T,U,n.ignoreUnknownFields,!0);te!==Jt&&(b[K]=te);break;case"scalar":try{b[K]=kt(t.V.T,U,q.BIGINT,!0)}catch(ve){let ye=`cannot decode map value for field ${i.typeName}.${t.name} from JSON: ${At(e)}`;throw ve instanceof Error&&ve.message.length>0&&(ye+=`: ${ve.message}`),new Error(ye)}break}}}else switch(t.oneof&&(r=r[t.oneof.localName]={case:h},h="value"),t.kind){case"message":const b=t.T;if(e===null&&b.typeName!="google.protobuf.Value")return;let P=r[h];Ge(P)?P.fromJson(e,n):(r[h]=P=b.fromJson(e,n),b.fieldWrapper&&!t.oneof&&(r[h]=b.fieldWrapper.unwrapField(P)));break;case"enum":const U=Ht(t.T,e,n.ignoreUnknownFields,!1);switch(U){case Pt:Le(t,r);break;case Jt:break;default:r[h]=U;break}break;case"scalar":try{const K=kt(t.T,e,t.L,!1);switch(K){case Pt:Le(t,r);break;default:r[h]=K;break}}catch(K){let te=`cannot decode field ${i.typeName}.${t.name} from JSON: ${At(e)}`;throw K instanceof Error&&K.message.length>0&&(te+=`: ${K.message}`),new Error(te)}break}}function Kt(r,e){if(r===j.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return kt(r,e,q.BIGINT,!0).toString()}function kt(r,e,t,n){if(e===null)return n?ne(r,t):Pt;switch(r){case j.DOUBLE:case j.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return r==j.FLOAT&&s(i),i;case j.INT32:case j.FIXED32:case j.SFIXED32:case j.SINT32:case j.UINT32:let h;if(typeof e=="number"?h=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(h=Number(e)),h===void 0)break;return r==j.UINT32||r==j.FIXED32?c(h):g(h),h;case j.INT64:case j.SFIXED64:case j.SINT64:if(typeof e!="number"&&typeof e!="string")break;const b=X.parse(e);return t?b.toString():b;case j.FIXED64:case j.UINT64:if(typeof e!="number"&&typeof e!="string")break;const P=X.uParse(e);return t?P.toString():P;case j.BOOL:if(typeof e!="boolean")break;return e;case j.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case j.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return re.dec(e)}throw new Error}function Ht(r,e,t,n){if(e===null)return r.typeName=="google.protobuf.NullValue"?0:n?r.values[0].no:Pt;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=r.findName(e);if(i!==void 0)return i.no;if(t)return Jt;break}throw new Error(`cannot decode enum ${r.typeName} from JSON: ${At(e)}`)}function Tt(r){return r.repeated||r.kind=="map"?!0:!(r.oneof||r.kind=="message"||r.opt||r.req)}function Ft(r,e,t){if(r.kind=="map"){y(typeof e=="object"&&e!=null);const n={},i=Object.entries(e);switch(r.V.kind){case"scalar":for(const[b,P]of i)n[b.toString()]=gn(r.V.T,P);break;case"message":for(const[b,P]of i)n[b.toString()]=P.toJson(t);break;case"enum":const h=r.V.T;for(const[b,P]of i)n[b.toString()]=Bt(h,P,t.enumAsInteger);break}return t.emitDefaultValues||i.length>0?n:void 0}if(r.repeated){y(Array.isArray(e));const n=[];switch(r.kind){case"scalar":for(let i=0;i<e.length;i++)n.push(gn(r.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)n.push(Bt(r.T,e[i],t.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)n.push(e[i].toJson(t));break}return t.emitDefaultValues||n.length>0?n:void 0}switch(r.kind){case"scalar":return gn(r.T,e);case"enum":return Bt(r.T,e,t.enumAsInteger);case"message":return nt(r.T,e).toJson(t)}}function Bt(r,e,t){var n;if(y(typeof e=="number"),r.typeName=="google.protobuf.NullValue")return null;if(t)return e;const i=r.findNumber(e);return(n=i==null?void 0:i.name)!==null&&n!==void 0?n:e}function gn(r,e){switch(r){case j.INT32:case j.SFIXED32:case j.SINT32:case j.FIXED32:case j.UINT32:return y(typeof e=="number"),e;case j.FLOAT:case j.DOUBLE:return y(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case j.STRING:return y(typeof e=="string"),e;case j.BOOL:return y(typeof e=="boolean"),e;case j.UINT64:case j.FIXED64:case j.INT64:case j.SFIXED64:case j.SINT64:return y(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case j.BYTES:return y(e instanceof Uint8Array),re.enc(e)}}const qt=Symbol("@bufbuild/protobuf/unknown-fields"),Vn={readUnknownFields:!0,readerFactory:r=>new Ie(r)},En={writeUnknownFields:!0,writerFactory:()=>new we};function Cr(r){return r?Object.assign(Object.assign({},Vn),r):Vn}function gr(r){return r?Object.assign(Object.assign({},En),r):En}function pr(){return{makeReadOptions:Cr,makeWriteOptions:gr,listUnknownFields(r){var e;return(e=r[qt])!==null&&e!==void 0?e:[]},discardUnknownFields(r){delete r[qt]},writeUnknownFields(r,e){const n=r[qt];if(n)for(const i of n)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(r,e,t,n){const i=r;Array.isArray(i[qt])||(i[qt]=[]),i[qt].push({no:e,wireType:t,data:n})},readMessage(r,e,t,n,i){const h=r.getType(),b=i?e.len:e.pos+t;let P,U;for(;e.pos<b&&([P,U]=e.tag(),!(i===!0&&U==ue.EndGroup));){const K=h.fields.find(P);if(!K){const te=e.skip(U,P);n.readUnknownFields&&this.onUnknownField(r,P,U,te);continue}tn(r,e,K,U,n)}if(i&&(U!=ue.EndGroup||P!==t))throw new Error("invalid end group tag")},readField:tn,writeMessage(r,e,t){const n=r.getType();for(const i of n.fields.byNumber()){if(!ke(i,r)){if(i.req)throw new Error(`cannot encode field ${n.typeName}.${i.name} to binary: required field not set`);continue}const h=i.oneof?r[i.oneof.localName].value:r[i.localName];Kn(i,h,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(r,e),e},writeField(r,e,t,n){e!==void 0&&Kn(r,e,t,n)}}}function tn(r,e,t,n,i){let{repeated:h,localName:b}=t;switch(t.oneof&&(r=r[t.oneof.localName],r.case!=b&&delete r.value,r.case=b,b="value"),t.kind){case"scalar":case"enum":const P=t.kind=="enum"?j.INT32:t.T;let U=Ut;if(t.kind=="scalar"&&t.L>0&&(U=xn),h){let ye=r[b];if(n==ue.LengthDelimited&&P!=j.STRING&&P!=j.BYTES){let Ne=e.uint32()+e.pos;for(;e.pos<Ne;)ye.push(U(e,P))}else ye.push(U(e,P))}else r[b]=U(e,P);break;case"message":const K=t.T;h?r[b].push(Ct(e,new K,i,t)):Ge(r[b])?Ct(e,r[b],i,t):(r[b]=Ct(e,new K,i,t),K.fieldWrapper&&!t.oneof&&!t.repeated&&(r[b]=K.fieldWrapper.unwrapField(r[b])));break;case"map":let[te,ve]=Wt(t,e,i);r[b][te]=ve;break}}function Ct(r,e,t,n){const i=e.getType().runtime.bin,h=n==null?void 0:n.delimited;return i.readMessage(e,r,h?n.no:r.uint32(),t,h),e}function Wt(r,e,t){const n=e.uint32(),i=e.pos+n;let h,b;for(;e.pos<i;){const[P]=e.tag();switch(P){case 1:h=Ut(e,r.K);break;case 2:switch(r.V.kind){case"scalar":b=Ut(e,r.V.T);break;case"enum":b=e.int32();break;case"message":b=Ct(e,new r.V.T,t,void 0);break}break}}if(h===void 0&&(h=ne(r.K,q.BIGINT)),typeof h!="string"&&typeof h!="number"&&(h=h.toString()),b===void 0)switch(r.V.kind){case"scalar":b=ne(r.V.T,q.BIGINT);break;case"enum":b=r.V.T.values[0].no;break;case"message":b=new r.V.T;break}return[h,b]}function xn(r,e){const t=Ut(r,e);return typeof t=="bigint"?t.toString():t}function Ut(r,e){switch(e){case j.STRING:return r.string();case j.BOOL:return r.bool();case j.DOUBLE:return r.double();case j.FLOAT:return r.float();case j.INT32:return r.int32();case j.INT64:return r.int64();case j.UINT64:return r.uint64();case j.FIXED64:return r.fixed64();case j.BYTES:return r.bytes();case j.FIXED32:return r.fixed32();case j.SFIXED32:return r.sfixed32();case j.SFIXED64:return r.sfixed64();case j.SINT64:return r.sint64();case j.UINT32:return r.uint32();case j.SINT32:return r.sint32()}}function Kn(r,e,t,n){y(e!==void 0);const i=r.repeated;switch(r.kind){case"scalar":case"enum":let h=r.kind=="enum"?j.INT32:r.T;if(i)if(y(Array.isArray(e)),r.packed)pn(t,h,r.no,e);else for(const b of e)Nn(t,h,r.no,b);else Nn(t,h,r.no,e);break;case"message":if(i){y(Array.isArray(e));for(const b of e)Hn(t,n,r,b)}else Hn(t,n,r,e);break;case"map":y(typeof e=="object"&&e!=null);for(const[b,P]of Object.entries(e))nn(t,n,r,b,P);break}}function nn(r,e,t,n,i){r.tag(t.no,ue.LengthDelimited),r.fork();let h=n;switch(t.K){case j.INT32:case j.FIXED32:case j.UINT32:case j.SFIXED32:case j.SINT32:h=Number.parseInt(n);break;case j.BOOL:y(n=="true"||n=="false"),h=n=="true";break}switch(Nn(r,t.K,1,h),t.V.kind){case"scalar":Nn(r,t.V.T,2,i);break;case"enum":Nn(r,j.INT32,2,i);break;case"message":y(i!==void 0),r.tag(2,ue.LengthDelimited).bytes(i.toBinary(e));break}r.join()}function Hn(r,e,t,n){const i=nt(t.T,n);t.delimited?r.tag(t.no,ue.StartGroup).raw(i.toBinary(e)).tag(t.no,ue.EndGroup):r.tag(t.no,ue.LengthDelimited).bytes(i.toBinary(e))}function Nn(r,e,t,n){y(n!==void 0);let[i,h]=rn(e);r.tag(t,i)[h](n)}function pn(r,e,t,n){if(!n.length)return;r.tag(t,ue.LengthDelimited).fork();let[,i]=rn(e);for(let h=0;h<n.length;h++)r[i](n[h]);r.join()}function rn(r){let e=ue.Varint;switch(r){case j.BYTES:case j.STRING:e=ue.LengthDelimited;break;case j.DOUBLE:case j.FIXED64:case j.SFIXED64:e=ue.Bit64;break;case j.FIXED32:case j.SFIXED32:case j.FLOAT:e=ue.Bit32;break}const t=j[r].toLowerCase();return[e,t]}function mr(){return{setEnumType:m,initPartial(r,e){if(r===void 0)return;const t=e.getType();for(const n of t.fields.byMember()){const i=n.localName,h=e,b=r;if(b[i]!=null)switch(n.kind){case"oneof":const P=b[i].case;if(P===void 0)continue;const U=n.findField(P);let K=b[i].value;U&&U.kind=="message"&&!Ge(K,U.T)?K=new U.T(K):U&&U.kind==="scalar"&&U.T===j.BYTES&&(K=In(K)),h[i]={case:P,value:K};break;case"scalar":case"enum":let te=b[i];n.T===j.BYTES&&(te=n.repeated?te.map(In):In(te)),h[i]=te;break;case"map":switch(n.V.kind){case"scalar":case"enum":if(n.V.T===j.BYTES)for(const[de,Ne]of Object.entries(b[i]))h[i][de]=In(Ne);else Object.assign(h[i],b[i]);break;case"message":const ye=n.V.T;for(const de of Object.keys(b[i])){let Ne=b[i][de];ye.fieldWrapper||(Ne=new ye(Ne)),h[i][de]=Ne}break}break;case"message":const ve=n.T;if(n.repeated)h[i]=b[i].map(ye=>Ge(ye,ve)?ye:new ve(ye));else{const ye=b[i];ve.fieldWrapper?ve.typeName==="google.protobuf.BytesValue"?h[i]=In(ye):h[i]=ye:h[i]=Ge(ye,ve)?ye:new ve(ye)}break}}},equals(r,e,t){return e===t?!0:!e||!t?!1:r.fields.byMember().every(n=>{const i=e[n.localName],h=t[n.localName];if(n.repeated){if(i.length!==h.length)return!1;switch(n.kind){case"message":return i.every((b,P)=>n.T.equals(b,h[P]));case"scalar":return i.every((b,P)=>W(n.T,b,h[P]));case"enum":return i.every((b,P)=>W(j.INT32,b,h[P]))}throw new Error(`repeated cannot contain ${n.kind}`)}switch(n.kind){case"message":return n.T.equals(i,h);case"enum":return W(j.INT32,i,h);case"scalar":return W(n.T,i,h);case"oneof":if(i.case!==h.case)return!1;const b=n.findField(i.case);if(b===void 0)return!0;switch(b.kind){case"message":return b.T.equals(i.value,h.value);case"enum":return W(j.INT32,i.value,h.value);case"scalar":return W(b.T,i.value,h.value)}throw new Error(`oneof cannot contain ${b.kind}`);case"map":const P=Object.keys(i).concat(Object.keys(h));switch(n.V.kind){case"message":const U=n.V.T;return P.every(te=>U.equals(i[te],h[te]));case"enum":return P.every(te=>W(j.INT32,i[te],h[te]));case"scalar":const K=n.V.T;return P.every(te=>W(K,i[te],h[te]))}break}})},clone(r){const e=r.getType(),t=new e,n=t;for(const i of e.fields.byMember()){const h=r[i.localName];let b;if(i.repeated)b=h.map(Gt);else if(i.kind=="map"){b=n[i.localName];for(const[P,U]of Object.entries(h))b[P]=Gt(U)}else i.kind=="oneof"?b=i.findField(h.case)?{case:h.case,value:Gt(h.value)}:{case:void 0}:b=Gt(h);n[i.localName]=b}for(const i of e.runtime.bin.listUnknownFields(r))e.runtime.bin.onUnknownField(n,i.no,i.wireType,i.data);return t}}}function Gt(r){if(r===void 0)return r;if(Ge(r))return r.clone();if(r instanceof Uint8Array){const e=new Uint8Array(r.byteLength);return e.set(r),e}return r}function In(r){return r instanceof Uint8Array?r:new Uint8Array(r)}function Pn(r,e,t){return{syntax:r,json:Mt(),bin:pr(),util:Object.assign(Object.assign({},mr()),{newFieldList:e,initFields:t}),makeMessageType(n,i,h){return x(this,n,i,h)},makeEnum:_,makeEnumType:T,getEnumType:o,makeExtension(n,i,h){return Ee(this,n,i,h)}}}class ln{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const n of this.list())t[n.jsonName]=t[n.name]=n;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const n of this.list())t[n.no]=n;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function yr(r,e){const t=_e(r);return e?t:he(ee(t))}function se(r){return yr(r,!1)}const pe=_e;function _e(r){let e=!1;const t=[];for(let n=0;n<r.length;n++){let i=r.charAt(n);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const Re=new Set(["constructor","toString","toJSON","valueOf"]),ot=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Qe=r=>`${r}$`,ee=r=>ot.has(r)?Qe(r):r,he=r=>Re.has(r)?Qe(r):r;class Se{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=se(e)}addField(e){y(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function Pe(r,e){var t,n,i,h,b,P;const U=[];let K;for(const te of typeof r=="function"?r():r){const ve=te;if(ve.localName=yr(te.name,te.oneof!==void 0),ve.jsonName=(t=te.jsonName)!==null&&t!==void 0?t:pe(te.name),ve.repeated=(n=te.repeated)!==null&&n!==void 0?n:!1,te.kind=="scalar"&&(ve.L=(i=te.L)!==null&&i!==void 0?i:q.BIGINT),ve.delimited=(h=te.delimited)!==null&&h!==void 0?h:!1,ve.req=(b=te.req)!==null&&b!==void 0?b:!1,ve.opt=(P=te.opt)!==null&&P!==void 0?P:!1,te.packed===void 0&&(e?ve.packed=te.kind=="enum"||te.kind=="scalar"&&te.T!=j.BYTES&&te.T!=j.STRING:ve.packed=!1),te.oneof!==void 0){const ye=typeof te.oneof=="string"?te.oneof:te.oneof.name;(!K||K.name!=ye)&&(K=new Se(ye)),ve.oneof=K,K.addField(ve)}U.push(ve)}return U}const Q=Pn("proto3",r=>new ln(r,e=>Pe(e,!0)),r=>{for(const e of r.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,n=r;if(e.repeated){n[t]=[];continue}switch(e.kind){case"oneof":n[t]={case:void 0};break;case"enum":n[t]=0;break;case"map":n[t]={};break;case"scalar":n[t]=ne(e.T,e.L);break}}});var We;(function(r){r[r.Unary=0]="Unary",r[r.ServerStreaming=1]="ServerStreaming",r[r.ClientStreaming=2]="ClientStreaming",r[r.BiDiStreaming=3]="BiDiStreaming"})(We||(We={}));var dt;(function(r){r[r.NoSideEffects=1]="NoSideEffects",r[r.Idempotent=2]="Idempotent"})(dt||(dt={}));class ze extends D{constructor(e){super(),this.seconds=X.zero,this.nanos=0,Q.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${Q.json.debug(e)}`);const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=X.parse(i/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?n="."+i.substring(0,3)+"Z":i.substring(6)==="000"?n="."+i.substring(0,6)+"Z":n="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return ze.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new ze({seconds:X.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new ze().fromBinary(e,t)}static fromJson(e,t){return new ze().fromJson(e,t)}static fromJsonString(e,t){return new ze().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(ze,e,t)}}ze.runtime=Q,ze.typeName="google.protobuf.Timestamp",ze.fields=Q.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class ht extends D{constructor(e){super(),this.seconds=X.zero,this.nanos=0,Q.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${Q.json.debug(e)}`);const n=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(n===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${Q.json.debug(e)}`);const i=Number(n[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${Q.json.debug(e)}`);if(this.seconds=X.parse(i),typeof n[2]=="string"){const h=n[2]+"0".repeat(9-n[2].length);this.nanos=parseInt(h),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let n=Math.abs(this.nanos).toString();n="0".repeat(9-n.length)+n,n.substring(3)==="000000"?n=n.substring(0,3):n.substring(6)==="000"&&(n=n.substring(0,6)),t+="."+n,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new ht().fromBinary(e,t)}static fromJson(e,t){return new ht().fromJson(e,t)}static fromJsonString(e,t){return new ht().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(ht,e,t)}}ht.runtime=Q,ht.typeName="google.protobuf.Duration",ht.fields=Q.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class at extends D{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),Q.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const n=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(n);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let b=i.fromBinary(this.value).toJson(e);return(n.startsWith("google.protobuf.")||b===null||Array.isArray(b)||typeof b!="object")&&(b={value:b}),b["@type"]=this.typeUrl,b}fromJson(e,t){var n;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const h=this.typeUrlToName(i),b=(n=t==null?void 0:t.typeRegistry)===null||n===void 0?void 0:n.findMessage(h);if(!b)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let P;if(h.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))P=b.fromJson(e.value,t);else{const U=Object.assign({},e);delete U["@type"],P=b.fromJson(U,t)}return this.packFrom(P),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(!!t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let n="";return typeof e=="string"?n=e:n=e.typeName,t===n}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw new Error(`invalid type url: ${e}`);return n}static pack(e){const t=new at;return t.packFrom(e),t}static fromBinary(e,t){return new at().fromBinary(e,t)}static fromJson(e,t){return new at().fromJson(e,t)}static fromJsonString(e,t){return new at().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(at,e,t)}}at.runtime=Q,at.typeName="google.protobuf.Any",at.fields=Q.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Ot extends D{constructor(e){super(),this.value=0,Q.util.initPartial(e,this)}toJson(e){return Q.json.writeScalar(j.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=Q.json.readScalar(j.DOUBLE,e)}catch(n){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ot().fromBinary(e,t)}static fromJson(e,t){return new Ot().fromJson(e,t)}static fromJsonString(e,t){return new Ot().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(Ot,e,t)}}Ot.runtime=Q,Ot.typeName="google.protobuf.DoubleValue",Ot.fields=Q.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Ot.fieldWrapper={wrapField(r){return new Ot({value:r})},unwrapField(r){return r.value}};class Et extends D{constructor(e){super(),this.value=0,Q.util.initPartial(e,this)}toJson(e){return Q.json.writeScalar(j.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=Q.json.readScalar(j.FLOAT,e)}catch(n){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Et().fromBinary(e,t)}static fromJson(e,t){return new Et().fromJson(e,t)}static fromJsonString(e,t){return new Et().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(Et,e,t)}}Et.runtime=Q,Et.typeName="google.protobuf.FloatValue",Et.fields=Q.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),Et.fieldWrapper={wrapField(r){return new Et({value:r})},unwrapField(r){return r.value}};class Rt extends D{constructor(e){super(),this.value=X.zero,Q.util.initPartial(e,this)}toJson(e){return Q.json.writeScalar(j.INT64,this.value,!0)}fromJson(e,t){try{this.value=Q.json.readScalar(j.INT64,e)}catch(n){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Rt().fromBinary(e,t)}static fromJson(e,t){return new Rt().fromJson(e,t)}static fromJsonString(e,t){return new Rt().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(Rt,e,t)}}Rt.runtime=Q,Rt.typeName="google.protobuf.Int64Value",Rt.fields=Q.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),Rt.fieldWrapper={wrapField(r){return new Rt({value:r})},unwrapField(r){return r.value}};class Me extends D{constructor(e){super(),this.value=X.zero,Q.util.initPartial(e,this)}toJson(e){return Q.json.writeScalar(j.UINT64,this.value,!0)}fromJson(e,t){try{this.value=Q.json.readScalar(j.UINT64,e)}catch(n){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Me().fromBinary(e,t)}static fromJson(e,t){return new Me().fromJson(e,t)}static fromJsonString(e,t){return new Me().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(Me,e,t)}}Me.runtime=Q,Me.typeName="google.protobuf.UInt64Value",Me.fields=Q.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),Me.fieldWrapper={wrapField(r){return new Me({value:r})},unwrapField(r){return r.value}};class et extends D{constructor(e){super(),this.value=0,Q.util.initPartial(e,this)}toJson(e){return Q.json.writeScalar(j.INT32,this.value,!0)}fromJson(e,t){try{this.value=Q.json.readScalar(j.INT32,e)}catch(n){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new et().fromBinary(e,t)}static fromJson(e,t){return new et().fromJson(e,t)}static fromJsonString(e,t){return new et().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(et,e,t)}}et.runtime=Q,et.typeName="google.protobuf.Int32Value",et.fields=Q.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),et.fieldWrapper={wrapField(r){return new et({value:r})},unwrapField(r){return r.value}};class ut extends D{constructor(e){super(),this.value=0,Q.util.initPartial(e,this)}toJson(e){return Q.json.writeScalar(j.UINT32,this.value,!0)}fromJson(e,t){try{this.value=Q.json.readScalar(j.UINT32,e)}catch(n){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new ut().fromBinary(e,t)}static fromJson(e,t){return new ut().fromJson(e,t)}static fromJsonString(e,t){return new ut().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(ut,e,t)}}ut.runtime=Q,ut.typeName="google.protobuf.UInt32Value",ut.fields=Q.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),ut.fieldWrapper={wrapField(r){return new ut({value:r})},unwrapField(r){return r.value}};class Ve extends D{constructor(e){super(),this.value=!1,Q.util.initPartial(e,this)}toJson(e){return Q.json.writeScalar(j.BOOL,this.value,!0)}fromJson(e,t){try{this.value=Q.json.readScalar(j.BOOL,e)}catch(n){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ve().fromBinary(e,t)}static fromJson(e,t){return new Ve().fromJson(e,t)}static fromJsonString(e,t){return new Ve().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(Ve,e,t)}}Ve.runtime=Q,Ve.typeName="google.protobuf.BoolValue",Ve.fields=Q.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),Ve.fieldWrapper={wrapField(r){return new Ve({value:r})},unwrapField(r){return r.value}};class He extends D{constructor(e){super(),this.value="",Q.util.initPartial(e,this)}toJson(e){return Q.json.writeScalar(j.STRING,this.value,!0)}fromJson(e,t){try{this.value=Q.json.readScalar(j.STRING,e)}catch(n){let i='cannot decode message google.protobuf.StringValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new He().fromBinary(e,t)}static fromJson(e,t){return new He().fromJson(e,t)}static fromJsonString(e,t){return new He().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(He,e,t)}}He.runtime=Q,He.typeName="google.protobuf.StringValue",He.fields=Q.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),He.fieldWrapper={wrapField(r){return new He({value:r})},unwrapField(r){return r.value}};class _t extends D{constructor(e){super(),this.value=new Uint8Array(0),Q.util.initPartial(e,this)}toJson(e){return Q.json.writeScalar(j.BYTES,this.value,!0)}fromJson(e,t){try{this.value=Q.json.readScalar(j.BYTES,e)}catch(n){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new _t().fromBinary(e,t)}static fromJson(e,t){return new _t().fromJson(e,t)}static fromJsonString(e,t){return new _t().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(_t,e,t)}}_t.runtime=Q,_t.typeName="google.protobuf.BytesValue",_t.fields=Q.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),_t.fieldWrapper={wrapField(r){return new _t({value:r})},unwrapField(r){return r.value}};function rt(r,e,t){try{const n=re.dec(r);return e?e.fromBinary(n,t):n}catch(n){throw v.from(n,k.DataLoss)}}function xt(r,e){const t={};for(const[n,i]of Object.entries(r.methods)){const h=e(Object.assign(Object.assign({},i),{localName:n,service:r}));h!=null&&(t[n]=h)}return t}function yt(r){let e,t=new Uint8Array(0);function n(i){const h=new Uint8Array(t.length+i.length);h.set(t),h.set(i,t.length),t=h}return new ReadableStream({start(){e=r.getReader()},async pull(i){let h;for(;;){if(h===void 0&&t.byteLength>=5){let U=0;for(let K=1;K<5;K++)U=(U<<8)+t[K];h={flags:t[0],length:U}}if(h!==void 0&&t.byteLength>=h.length+5)break;const P=await e.read();if(P.done)break;n(P.value)}if(h===void 0){if(t.byteLength==0){i.close();return}i.error(new v("premature end of stream",k.DataLoss));return}const b=t.subarray(5,5+h.length);t=t.subarray(5+h.length),i.enqueue({flags:h.flags,data:b})}})}function Xt(r,e){const t=new Uint8Array(e.length+5);t.set(e,5);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setUint8(0,r),n.setUint32(1,e.length),t}var Cn=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(h){t[h]=r[h]&&function(b){return new Promise(function(P,U){b=r[h](b),i(P,U,b.done,b.value)})}}function i(h,b,P,U){Promise.resolve(U).then(function(K){h({value:K,done:P})},b)}},mn=globalThis&&globalThis.__await||function(r){return this instanceof mn?(this.v=r,this):new mn(r)},Wn=globalThis&&globalThis.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,h=[];return i={},P("next"),P("throw"),P("return",b),i[Symbol.asyncIterator]=function(){return this},i;function b(de){return function(Ne){return Promise.resolve(Ne).then(de,ve)}}function P(de,Ne){n[de]&&(i[de]=function(Je){return new Promise(function($e,it){h.push([de,Je,$e,it])>1||U(de,Je)})},Ne&&(i[de]=Ne(i[de])))}function U(de,Ne){try{K(n[de](Ne))}catch(Je){ye(h[0][3],Je)}}function K(de){de.value instanceof mn?Promise.resolve(de.value.v).then(te,ve):ye(h[0][2],de)}function te(de){U("next",de)}function ve(de){U("throw",de)}function ye(de,Ne){de(Ne),h.shift(),h.length&&U(h[0][0],h[0][1])}},yn=globalThis&&globalThis.__asyncDelegator||function(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,h){e[i]=r[i]?function(b){return(t=!t)?{value:mn(r[i](b)),done:!1}:h?h(b):b}:h}};function bi(r){return Wn(this,arguments,function*(){yield mn(yield*yn(Cn(r)))})}var vr=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(h){t[h]=r[h]&&function(b){return new Promise(function(P,U){b=r[h](b),i(P,U,b.done,b.value)})}}function i(h,b,P,U){Promise.resolve(U).then(function(K){h({value:K,done:P})},b)}},Rn=globalThis&&globalThis.__await||function(r){return this instanceof Rn?(this.v=r,this):new Rn(r)},Rr=globalThis&&globalThis.__asyncDelegator||function(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,h){e[i]=r[i]?function(b){return(t=!t)?{value:Rn(r[i](b)),done:!1}:h?h(b):b}:h}},Dr=globalThis&&globalThis.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,h=[];return i={},P("next"),P("throw"),P("return",b),i[Symbol.asyncIterator]=function(){return this},i;function b(de){return function(Ne){return Promise.resolve(Ne).then(de,ve)}}function P(de,Ne){n[de]&&(i[de]=function(Je){return new Promise(function($e,it){h.push([de,Je,$e,it])>1||U(de,Je)})},Ne&&(i[de]=Ne(i[de])))}function U(de,Ne){try{K(n[de](Ne))}catch(Je){ye(h[0][3],Je)}}function K(de){de.value instanceof Rn?Promise.resolve(de.value.v).then(te,ve):ye(h[0][2],de)}function te(de){U("next",de)}function ve(de){U("throw",de)}function ye(de,Ne){de(Ne),h.shift(),h.length&&U(h[0][0],h[0][1])}};function wi(r,e){return xt(r,t=>{switch(t.kind){case We.Unary:return Lr(e,r,t);case We.ServerStreaming:return Mr(e,r,t);case We.ClientStreaming:return oa(e,r,t);case We.BiDiStreaming:return sa(e,r,t);default:return null}})}function Lr(r,e,t){return async function(n,i){var h,b;const P=await r.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,n,i==null?void 0:i.contextValues);return(h=i==null?void 0:i.onHeader)===null||h===void 0||h.call(i,P.header),(b=i==null?void 0:i.onTrailer)===null||b===void 0||b.call(i,P.trailer),P.message}}function Mr(r,e,t){return function(n,i){return vo(r.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,bi([n]),i==null?void 0:i.contextValues),i)}}function oa(r,e,t){return async function(n,i){var h,b,P,U,K,te;const ve=await r.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,n,i==null?void 0:i.contextValues);(K=i==null?void 0:i.onHeader)===null||K===void 0||K.call(i,ve.header);let ye;try{for(var de=!0,Ne=vr(ve.message),Je;Je=await Ne.next(),h=Je.done,!h;de=!0)U=Je.value,de=!1,ye=U}catch($e){b={error:$e}}finally{try{!de&&!h&&(P=Ne.return)&&await P.call(Ne)}finally{if(b)throw b.error}}if(!ye)throw new v("protocol error: missing response message",k.Internal);return(te=i==null?void 0:i.onTrailer)===null||te===void 0||te.call(i,ve.trailer),ye}}function sa(r,e,t){return function(n,i){return vo(r.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,n,i==null?void 0:i.contextValues),i)}}function vo(r,e){const t=function(){var n,i;return Dr(this,arguments,function*(){const h=yield Rn(r);(n=e==null?void 0:e.onHeader)===null||n===void 0||n.call(e,h.header),yield Rn(yield*Rr(vr(h.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,h.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function aa(...r){const e=new AbortController,t=r.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){n.apply(i);break}i.addEventListener("abort",n)}function n(){e.signal.aborted||e.abort(bo(this));for(const i of t)i.removeEventListener("abort",n)}return e}function la(r){const e=new AbortController,t=()=>{e.abort(new v("the operation timed out",k.DeadlineExceeded))};let n;return r!==void 0&&(r<=0?t():n=setTimeout(t,r)),{signal:e.signal,cleanup:()=>clearTimeout(n)}}function bo(r){if(!r.aborted)return;if(r.reason!==void 0)return r.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function wo(){return{get(r){return r.id in this?this[r.id]:r.defaultValue},set(r,e){return this[r.id]=e,this},delete(r){return delete this[r.id],this}}}const Ui=128;function To(r){const e=new Headers,t=new TextDecoder().decode(r).split(`\r
`);for(const n of t){if(n==="")continue;const i=n.indexOf(":");if(i>0){const h=n.substring(0,i).trim(),b=n.substring(i+1).trim();e.append(h,b)}}return e}const ua="Content-Type",ca="Grpc-Timeout",Ao="Grpc-Status",_o="Grpc-Message",fa="Grpc-Status-Details-Bin",ha="User-Agent",da="X-User-Agent",ga="X-Grpc-Web",pa="application/grpc-web+proto",ma="application/grpc-web+json";class Gn extends D{constructor(e){super(),this.code=0,this.message="",this.details=[],Q.util.initPartial(e,this)}static fromBinary(e,t){return new Gn().fromBinary(e,t)}static fromJson(e,t){return new Gn().fromJson(e,t)}static fromJsonString(e,t){return new Gn().fromJsonString(e,t)}static equals(e,t){return Q.util.equals(Gn,e,t)}}Gn.runtime=Q,Gn.typeName="google.rpc.Status",Gn.fields=Q.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:at,repeated:!0}]);const ya="0";function So(r){var e;const t=r.get(fa);if(t!=null){const i=rt(t,Gn);if(i.code==0)return;const h=new v(i.message,i.code,r);return h.details=i.details.map(b=>({type:b.typeUrl.substring(b.typeUrl.lastIndexOf("/")+1),value:b.value})),h}const n=r.get(Ao);if(n!=null){if(n===ya)return;const i=parseInt(n,10);return i in k?new v(decodeURIComponent((e=r.get(_o))!==null&&e!==void 0?e:""),i,r):new v(`invalid grpc-status: ${n}`,k.Internal,r)}}function Oo(r,e,t){const n=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return r.toString().replace(/\/?$/,`/${n}/${i}`)}function ko(r,e){return e instanceof r?e:new r(e)}function va(r,e){function t(n){return n.done===!0?n:{done:n.done,value:ko(r,n.value)}}return{[Symbol.asyncIterator](){const n=e[Symbol.asyncIterator](),i={next:()=>n.next().then(t)};return n.throw!==void 0&&(i.throw=h=>n.throw(h).then(t)),n.return!==void 0&&(i.return=h=>n.return(h).then(t)),i}}}function Eo(r,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((n,i)=>i(n),r))!==null&&t!==void 0?t:r}function ba(r){var e;const t=Object.assign({},r);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function xo(r,e,t,n){const i=e?No(r.I,n):Io(r.I,t);return{parse:(e?No(r.O,n):Io(r.O,t)).parse,serialize:i.serialize}}function No(r,e){return{parse(t){try{return r.fromBinary(t,e)}catch(n){const i=n instanceof Error?n.message:String(n);throw new v(`parse binary: ${i}`,k.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(n){const i=n instanceof Error?n.message:String(n);throw new v(`serialize binary: ${i}`,k.Internal)}}}}function Io(r,e){var t,n;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,h=(n=e==null?void 0:e.textDecoder)!==null&&n!==void 0?n:new TextDecoder,b=ba(e);return{parse(P){try{const U=h.decode(P);return r.fromJsonString(U,b)}catch(U){throw v.from(U,k.InvalidArgument)}},serialize(P){try{const U=P.toJsonString(b);return i.encode(U)}catch(U){throw v.from(U,k.Internal)}}}}function wa(r){const e=Eo(r.next,r.interceptors),[t,n,i]=Po(r),h=Object.assign(Object.assign({},r.req),{message:ko(r.req.method.I,r.req.message),signal:t});return e(h).then(b=>(i(),b),n)}function Ta(r){const e=Eo(r.next,r.interceptors),[t,n,i]=Po(r),h=Object.assign(Object.assign({},r.req),{message:va(r.req.method.I,r.req.message),signal:t});let b=!1;return t.addEventListener("abort",function(){var P,U;const K=r.req.message[Symbol.asyncIterator]();b||(P=K.throw)===null||P===void 0||P.call(K,this.reason).catch(()=>{}),(U=K.return)===null||U===void 0||U.call(K).catch(()=>{})}),e(h).then(P=>Object.assign(Object.assign({},P),{message:{[Symbol.asyncIterator](){const U=P.message[Symbol.asyncIterator]();return{next(){return U.next().then(K=>(K.done==!0&&(b=!0,i()),K),n)}}}}}),n)}function Po(r){const{signal:e,cleanup:t}=la(r.timeoutMs),n=aa(r.signal,e);return[n.signal,function(h){const b=v.from(e.aborted?bo(e):h);return n.abort(b),t(),Promise.reject(b)},function(){t(),n.abort()}]}function Aa(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Co(r,e){const t=So(r);if(t)throw e.forEach((n,i)=>{t.metadata.append(i,n)}),t}function Ro(r,e,t,n){const i=new Headers(t!=null?t:{});return i.set(ua,r?pa:ma),i.set(ga,"1"),i.set(da,"connect-es/1.4.0"),n&&i.set(ha,"connect-es/1.4.0"),e!==void 0&&i.set(ca,`${e}m`),i}function _a(r){switch(r){case 400:return k.Internal;case 401:return k.Unauthenticated;case 403:return k.PermissionDenied;case 404:return k.Unimplemented;case 429:return k.Unavailable;case 502:return k.Unavailable;case 503:return k.Unavailable;case 504:return k.Unavailable;default:return k.Unknown}}function Do(r,e){var t;if(r>=200&&r<300){const n=So(e);if(n)throw n;return{foundStatus:e.has(Ao)}}throw new v(decodeURIComponent((t=e.get(_o))!==null&&t!==void 0?t:`HTTP ${r}`),_a(r),e)}var br=globalThis&&globalThis.__await||function(r){return this instanceof br?(this.v=r,this):new br(r)},Sa=globalThis&&globalThis.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,h=[];return i={},P("next"),P("throw"),P("return",b),i[Symbol.asyncIterator]=function(){return this},i;function b(de){return function(Ne){return Promise.resolve(Ne).then(de,ve)}}function P(de,Ne){n[de]&&(i[de]=function(Je){return new Promise(function($e,it){h.push([de,Je,$e,it])>1||U(de,Je)})},Ne&&(i[de]=Ne(i[de])))}function U(de,Ne){try{K(n[de](Ne))}catch(Je){ye(h[0][3],Je)}}function K(de){de.value instanceof br?Promise.resolve(de.value.v).then(te,ve):ye(h[0][2],de)}function te(de){U("next",de)}function ve(de){U("throw",de)}function ye(de,Ne){de(Ne),h.shift(),h.length&&U(h[0][0],h[0][1])}};function Oa(r){var e;Aa();const t=(e=r.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(n,i,h,b,P,U,K){var te;const{serialize:ve,parse:ye}=xo(i,t,r.jsonOptions,r.binaryOptions);return b=b===void 0?r.defaultTimeoutMs:b<=0?void 0:b,await wa({interceptors:r.interceptors,signal:h,timeoutMs:b,req:{stream:!1,service:n,method:i,url:Oo(r.baseUrl,n,i),init:{method:"POST",credentials:(te=r.credentials)!==null&&te!==void 0?te:"same-origin",redirect:"error",mode:"cors"},header:Ro(t,b,P,!1),contextValues:K!=null?K:wo(),message:U},next:async de=>{var Ne;const $e=await((Ne=r.fetch)!==null&&Ne!==void 0?Ne:globalThis.fetch)(de.url,Object.assign(Object.assign({},de.init),{headers:de.header,signal:de.signal,body:Xt(0,ve(de.message))}));if(Do($e.status,$e.headers),!$e.body)throw"missing response body";const it=yt($e.body).getReader();let bt,lt;for(;;){const pt=await it.read();if(pt.done)break;const{flags:mt,data:wt}=pt.value;if(mt===Ui){if(bt!==void 0)throw"extra trailer";bt=To(wt);continue}if(lt!==void 0)throw"extra message";lt=ye(wt)}if(bt===void 0)throw"missing trailer";if(Co(bt,$e.headers),lt===void 0)throw"missing message";return{stream:!1,service:n,method:i,header:$e.headers,message:lt,trailer:bt}}})},async stream(n,i,h,b,P,U,K){var te;const{serialize:ve,parse:ye}=xo(i,t,r.jsonOptions,r.binaryOptions);function de(Je,$e,it,bt){return Sa(this,arguments,function*(){const pt=yt(Je).getReader();if($e){if(!(yield br(pt.read())).done)throw"extra data for trailers-only";return yield br(void 0)}let mt=!1;for(;;){const wt=yield br(pt.read());if(wt.done)break;const{flags:Er,data:xr}=wt.value;if((Er&Ui)===Ui){if(mt)throw"extra trailer";mt=!0;const yi=To(xr);Co(yi,bt),yi.forEach((fu,hu)=>it.set(hu,fu));continue}if(mt)throw"extra message";yield yield br(ye(xr))}if(!mt)throw"missing trailer"})}async function Ne(Je){if(i.kind!=We.ServerStreaming)throw"The fetch API does not support streaming request bodies";const $e=await Je[Symbol.asyncIterator]().next();if($e.done==!0)throw"missing request message";return Xt(0,ve($e.value))}return b=b===void 0?r.defaultTimeoutMs:b<=0?void 0:b,Ta({interceptors:r.interceptors,signal:h,timeoutMs:b,req:{stream:!0,service:n,method:i,url:Oo(r.baseUrl,n,i),init:{method:"POST",credentials:(te=r.credentials)!==null&&te!==void 0?te:"same-origin",redirect:"error",mode:"cors"},header:Ro(t,b,P,!1),contextValues:K!=null?K:wo(),message:U},next:async Je=>{var $e;const bt=await(($e=r.fetch)!==null&&$e!==void 0?$e:globalThis.fetch)(Je.url,Object.assign(Object.assign({},Je.init),{headers:Je.header,signal:Je.signal,body:await Ne(Je.message)})),{foundStatus:lt}=Do(bt.status,bt.headers);if(!bt.body)throw"missing response body";const pt=new Headers;return Object.assign(Object.assign({},Je),{header:bt.headers,trailer:pt,message:de(bt.body,lt,pt,bt.headers)})}})}}}const tt=Q.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),Ti=Q.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),ka=Q.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:un},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Hi}}]),Yn=Q.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:es},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Lo,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:je},{no:6,name:"is_removed",kind:"scalar",T:8}]),Lo=Q.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:Ai},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:$i,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Ki}]),Ai=Q.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),$i=Q.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:Mo,oneof:"body"},{no:2,name:"add",kind:"message",T:Bo,oneof:"body"},{no:3,name:"move",kind:"message",T:qo,oneof:"body"},{no:4,name:"remove",kind:"message",T:jo,oneof:"body"},{no:5,name:"edit",kind:"message",T:Fo,oneof:"body"},{no:6,name:"select",kind:"message",T:Ea,oneof:"body"},{no:7,name:"style",kind:"message",T:Uo,oneof:"body"},{no:8,name:"increase",kind:"message",T:$o,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:zo,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Jo,oneof:"body"}]),Mo=Q.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Zn},{no:4,name:"executed_at",kind:"message",T:je}],{localName:"Operation_Set"}),Bo=Q.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"prev_created_at",kind:"message",T:je},{no:3,name:"value",kind:"message",T:Zn},{no:4,name:"executed_at",kind:"message",T:je}],{localName:"Operation_Add"}),qo=Q.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"prev_created_at",kind:"message",T:je},{no:3,name:"created_at",kind:"message",T:je},{no:4,name:"executed_at",kind:"message",T:je}],{localName:"Operation_Move"}),jo=Q.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"created_at",kind:"message",T:je},{no:3,name:"executed_at",kind:"message",T:je}],{localName:"Operation_Remove"}),Fo=Q.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"from",kind:"message",T:wr},{no:3,name:"to",kind:"message",T:wr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:je}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:je},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),Ea=Q.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"from",kind:"message",T:wr},{no:3,name:"to",kind:"message",T:wr},{no:4,name:"executed_at",kind:"message",T:je}],{localName:"Operation_Select"}),Uo=Q.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"from",kind:"message",T:wr},{no:3,name:"to",kind:"message",T:wr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:je},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:je}}],{localName:"Operation_Style"}),$o=Q.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"value",kind:"message",T:Zn},{no:3,name:"executed_at",kind:"message",T:je}],{localName:"Operation_Increase"}),zo=Q.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"from",kind:"message",T:Yr},{no:3,name:"to",kind:"message",T:Yr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:je}},{no:5,name:"contents",kind:"message",T:Qo,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:je}],{localName:"Operation_TreeEdit"}),Jo=Q.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:je},{no:2,name:"from",kind:"message",T:Yr},{no:3,name:"to",kind:"message",T:Yr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:je},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:je}}],{localName:"Operation_TreeStyle"}),Zn=Q.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:je},{no:2,name:"moved_at",kind:"message",T:je},{no:3,name:"removed_at",kind:"message",T:je},{no:4,name:"type",kind:"enum",T:Q.getEnumType(tt)},{no:5,name:"value",kind:"scalar",T:12}]),un=Q.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:Vo,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Ko,oneof:"body"},{no:3,name:"primitive",kind:"message",T:Ho,oneof:"body"},{no:5,name:"text",kind:"message",T:Wo,oneof:"body"},{no:6,name:"counter",kind:"message",T:Go,oneof:"body"},{no:7,name:"tree",kind:"message",T:Yo,oneof:"body"}]),Vo=Q.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:Zo,repeated:!0},{no:2,name:"created_at",kind:"message",T:je},{no:3,name:"moved_at",kind:"message",T:je},{no:4,name:"removed_at",kind:"message",T:je}],{localName:"JSONElement_JSONObject"}),Ko=Q.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:zi,repeated:!0},{no:2,name:"created_at",kind:"message",T:je},{no:3,name:"moved_at",kind:"message",T:je},{no:4,name:"removed_at",kind:"message",T:je}],{localName:"JSONElement_JSONArray"}),Ho=Q.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:Q.getEnumType(tt)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:je},{no:4,name:"moved_at",kind:"message",T:je},{no:5,name:"removed_at",kind:"message",T:je}],{localName:"JSONElement_Primitive"}),Wo=Q.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:Xo,repeated:!0},{no:2,name:"created_at",kind:"message",T:je},{no:3,name:"moved_at",kind:"message",T:je},{no:4,name:"removed_at",kind:"message",T:je}],{localName:"JSONElement_Text"}),Go=Q.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:Q.getEnumType(tt)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:je},{no:4,name:"moved_at",kind:"message",T:je},{no:5,name:"removed_at",kind:"message",T:je}],{localName:"JSONElement_Counter"}),Yo=Q.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:Vi,repeated:!0},{no:2,name:"created_at",kind:"message",T:je},{no:3,name:"moved_at",kind:"message",T:je},{no:4,name:"removed_at",kind:"message",T:je}],{localName:"JSONElement_Tree"}),Zo=Q.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:un}]),zi=Q.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:zi},{no:2,name:"element",kind:"message",T:un}]),_i=Q.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:je},{no:3,name:"is_removed",kind:"scalar",T:8}]),Xo=Q.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:Ji},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:je},{no:4,name:"ins_prev_id",kind:"message",T:Ji},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:_i}}]),Ji=Q.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:je},{no:2,name:"offset",kind:"scalar",T:5}]),Vi=Q.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:Br},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:je},{no:5,name:"ins_prev_id",kind:"message",T:Br},{no:6,name:"ins_next_id",kind:"message",T:Br},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:_i}}]),Qo=Q.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:Vi,repeated:!0}]),Br=Q.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:je},{no:2,name:"offset",kind:"scalar",T:5}]),Yr=Q.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:Br},{no:2,name:"left_sibling_id",kind:"message",T:Br}]);Q.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:ze}]),Q.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:ze},{no:9,name:"updated_at",kind:"message",T:ze}]),Q.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:He},{no:2,name:"auth_webhook_url",kind:"message",T:He},{no:3,name:"auth_webhook_methods",kind:"message",T:xa},{no:4,name:"client_deactivate_threshold",kind:"message",T:He}]);const xa=Q.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"});Q.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:ze},{no:5,name:"accessed_at",kind:"message",T:ze},{no:6,name:"updated_at",kind:"message",T:ze}]);const Ki=Q.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:Q.getEnumType(Zr)},{no:2,name:"presence",kind:"message",T:Hi}]),Zr=Q.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),Hi=Q.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),es=Q.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),wr=Q.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:je},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),je=Q.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),Na=Q.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),Ia=Q.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:Q.getEnumType(Ti)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Na}]),Pa=Q.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),Ca=Q.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Ra=Q.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Da=Q.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),La=Q.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Yn}]),Ma=Q.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Yn}]),Ba=Q.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Yn},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),qa=Q.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:Yn}]),ja=Q.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),Fa=Q.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:Ua,oneof:"body"},{no:2,name:"event",kind:"message",T:Ia,oneof:"body"}]),Ua=Q.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),$a=Q.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Yn}]),za=Q.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Yn}]),Ja=Q.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Yn},{no:4,name:"push_only",kind:"scalar",T:8}]),Va=Q.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Yn}]),Ka=Q.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),Ha=Q.makeMessageType("yorkie.v1.BroadcastResponse",[]),Wa={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Pa,O:Ca,kind:We.Unary},deactivateClient:{name:"DeactivateClient",I:Ra,O:Da,kind:We.Unary},attachDocument:{name:"AttachDocument",I:La,O:Ma,kind:We.Unary},detachDocument:{name:"DetachDocument",I:Ba,O:qa,kind:We.Unary},removeDocument:{name:"RemoveDocument",I:$a,O:za,kind:We.Unary},pushPullChanges:{name:"PushPullChanges",I:Ja,O:Va,kind:We.Unary},watchDocument:{name:"WatchDocument",I:ja,O:Fa,kind:We.ServerStreaming},broadcast:{name:"Broadcast",I:Ka,O:Ha,kind:We.Unary}}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var cn=null;try{cn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ze(r,e,t){this.low=r|0,this.high=e|0,this.unsigned=!!t}Ze.prototype.__isLong__,Object.defineProperty(Ze.prototype,"__isLong__",{value:!0});function $t(r){return(r&&r.__isLong__)===!0}function ts(r){var e=Math.clz32(r&-r);return r?31-e:e}Ze.isLong=$t;var ns={},rs={};function Tr(r,e){var t,n,i;return e?(r>>>=0,(i=0<=r&&r<256)&&(n=rs[r],n)?n:(t=ct(r,0,!0),i&&(rs[r]=t),t)):(r|=0,(i=-128<=r&&r<128)&&(n=ns[r],n)?n:(t=ct(r,r<0?-1:0,!1),i&&(ns[r]=t),t))}Ze.fromInt=Tr;function fn(r,e){if(isNaN(r))return e?Xn:bn;if(e){if(r<0)return Xn;if(r>=os)return cs}else{if(r<=-ss)return Qt;if(r+1>=ss)return us}return r<0?fn(-r,e).neg():ct(r%qr|0,r/qr|0,e)}Ze.fromNumber=fn;function ct(r,e,t){return new Ze(r,e,t)}Ze.fromBits=ct;var Si=Math.pow;function Wi(r,e,t){if(r.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e?Xn:bn;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=r.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return Wi(r.substring(1),e,t).neg();for(var i=fn(Si(t,8)),h=bn,b=0;b<r.length;b+=8){var P=Math.min(8,r.length-b),U=parseInt(r.substring(b,b+P),t);if(P<8){var K=fn(Si(t,P));h=h.mul(K).add(fn(U))}else h=h.mul(i),h=h.add(fn(U))}return h.unsigned=e,h}Ze.fromString=Wi;function vn(r,e){return typeof r=="number"?fn(r,e):typeof r=="string"?Wi(r,e):ct(r.low,r.high,typeof e=="boolean"?e:r.unsigned)}Ze.fromValue=vn;var is=1<<16,Ga=1<<24,qr=is*is,os=qr*qr,ss=os/2,as=Tr(Ga),bn=Tr(0);Ze.ZERO=bn;var Xn=Tr(0,!0);Ze.UZERO=Xn;var jr=Tr(1);Ze.ONE=jr;var ls=Tr(1,!0);Ze.UONE=ls;var Gi=Tr(-1);Ze.NEG_ONE=Gi;var us=ct(-1,2147483647,!1);Ze.MAX_VALUE=us;var cs=ct(-1,-1,!0);Ze.MAX_UNSIGNED_VALUE=cs;var Qt=ct(0,-2147483648,!1);Ze.MIN_VALUE=Qt;var Ae=Ze.prototype;Ae.toInt=function(){return this.unsigned?this.low>>>0:this.low},Ae.toNumber=function(){return this.unsigned?(this.high>>>0)*qr+(this.low>>>0):this.high*qr+(this.low>>>0)},Ae.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Qt)){var t=fn(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var h=fn(Si(e,6),this.unsigned),b=this,P="";;){var U=b.div(h),K=b.sub(U.mul(h)).toInt()>>>0,te=K.toString(e);if(b=U,b.isZero())return te+P;for(;te.length<6;)te="0"+te;P=""+te+P}},Ae.getHighBits=function(){return this.high},Ae.getHighBitsUnsigned=function(){return this.high>>>0},Ae.getLowBits=function(){return this.low},Ae.getLowBitsUnsigned=function(){return this.low>>>0},Ae.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Qt)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},Ae.isZero=function(){return this.high===0&&this.low===0},Ae.eqz=Ae.isZero,Ae.isNegative=function(){return!this.unsigned&&this.high<0},Ae.isPositive=function(){return this.unsigned||this.high>=0},Ae.isOdd=function(){return(this.low&1)===1},Ae.isEven=function(){return(this.low&1)===0},Ae.equals=function(e){return $t(e)||(e=vn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},Ae.eq=Ae.equals,Ae.notEquals=function(e){return!this.eq(e)},Ae.neq=Ae.notEquals,Ae.ne=Ae.notEquals,Ae.lessThan=function(e){return this.comp(e)<0},Ae.lt=Ae.lessThan,Ae.lessThanOrEqual=function(e){return this.comp(e)<=0},Ae.lte=Ae.lessThanOrEqual,Ae.le=Ae.lessThanOrEqual,Ae.greaterThan=function(e){return this.comp(e)>0},Ae.gt=Ae.greaterThan,Ae.greaterThanOrEqual=function(e){return this.comp(e)>=0},Ae.gte=Ae.greaterThanOrEqual,Ae.ge=Ae.greaterThanOrEqual,Ae.compare=function(e){if($t(e)||(e=vn(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},Ae.comp=Ae.compare,Ae.negate=function(){return!this.unsigned&&this.eq(Qt)?Qt:this.not().add(jr)},Ae.neg=Ae.negate,Ae.add=function(e){$t(e)||(e=vn(e));var t=this.high>>>16,n=this.high&65535,i=this.low>>>16,h=this.low&65535,b=e.high>>>16,P=e.high&65535,U=e.low>>>16,K=e.low&65535,te=0,ve=0,ye=0,de=0;return de+=h+K,ye+=de>>>16,de&=65535,ye+=i+U,ve+=ye>>>16,ye&=65535,ve+=n+P,te+=ve>>>16,ve&=65535,te+=t+b,te&=65535,ct(ye<<16|de,te<<16|ve,this.unsigned)},Ae.subtract=function(e){return $t(e)||(e=vn(e)),this.add(e.neg())},Ae.sub=Ae.subtract,Ae.multiply=function(e){if(this.isZero())return this;if($t(e)||(e=vn(e)),cn){var t=cn.mul(this.low,this.high,e.low,e.high);return ct(t,cn.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Xn:bn;if(this.eq(Qt))return e.isOdd()?Qt:bn;if(e.eq(Qt))return this.isOdd()?Qt:bn;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(as)&&e.lt(as))return fn(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,h=this.low>>>16,b=this.low&65535,P=e.high>>>16,U=e.high&65535,K=e.low>>>16,te=e.low&65535,ve=0,ye=0,de=0,Ne=0;return Ne+=b*te,de+=Ne>>>16,Ne&=65535,de+=h*te,ye+=de>>>16,de&=65535,de+=b*K,ye+=de>>>16,de&=65535,ye+=i*te,ve+=ye>>>16,ye&=65535,ye+=h*K,ve+=ye>>>16,ye&=65535,ye+=b*U,ve+=ye>>>16,ye&=65535,ve+=n*te+i*K+h*U+b*P,ve&=65535,ct(de<<16|Ne,ve<<16|ye,this.unsigned)},Ae.mul=Ae.multiply,Ae.divide=function(e){if($t(e)||(e=vn(e)),e.isZero())throw Error("division by zero");if(cn){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?cn.div_u:cn.div_s)(this.low,this.high,e.low,e.high);return ct(t,cn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Xn:bn;var n,i,h;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Xn;if(e.gt(this.shru(1)))return ls;h=Xn}else{if(this.eq(Qt)){if(e.eq(jr)||e.eq(Gi))return Qt;if(e.eq(Qt))return jr;var b=this.shr(1);return n=b.div(e).shl(1),n.eq(bn)?e.isNegative()?jr:Gi:(i=this.sub(e.mul(n)),h=n.add(i.div(e)),h)}else if(e.eq(Qt))return this.unsigned?Xn:bn;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();h=bn}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var P=Math.ceil(Math.log(n)/Math.LN2),U=P<=48?1:Si(2,P-48),K=fn(n),te=K.mul(e);te.isNegative()||te.gt(i);)n-=U,K=fn(n,this.unsigned),te=K.mul(e);K.isZero()&&(K=jr),h=h.add(K),i=i.sub(te)}return h},Ae.div=Ae.divide,Ae.modulo=function(e){if($t(e)||(e=vn(e)),cn){var t=(this.unsigned?cn.rem_u:cn.rem_s)(this.low,this.high,e.low,e.high);return ct(t,cn.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},Ae.mod=Ae.modulo,Ae.rem=Ae.modulo,Ae.not=function(){return ct(~this.low,~this.high,this.unsigned)},Ae.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},Ae.clz=Ae.countLeadingZeros,Ae.countTrailingZeros=function(){return this.low?ts(this.low):ts(this.high)+32},Ae.ctz=Ae.countTrailingZeros,Ae.and=function(e){return $t(e)||(e=vn(e)),ct(this.low&e.low,this.high&e.high,this.unsigned)},Ae.or=function(e){return $t(e)||(e=vn(e)),ct(this.low|e.low,this.high|e.high,this.unsigned)},Ae.xor=function(e){return $t(e)||(e=vn(e)),ct(this.low^e.low,this.high^e.high,this.unsigned)},Ae.shiftLeft=function(e){return $t(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ct(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ct(0,this.low<<e-32,this.unsigned)},Ae.shl=Ae.shiftLeft,Ae.shiftRight=function(e){return $t(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ct(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ct(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},Ae.shr=Ae.shiftRight,Ae.shiftRightUnsigned=function(e){return $t(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ct(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?ct(this.high,0,this.unsigned):ct(this.high>>>e-32,0,this.unsigned)},Ae.shru=Ae.shiftRightUnsigned,Ae.shr_u=Ae.shiftRightUnsigned,Ae.rotateLeft=function(e){var t;return $t(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ct(this.high,this.low,this.unsigned):e<32?(t=32-e,ct(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,ct(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},Ae.rotl=Ae.rotateLeft,Ae.rotateRight=function(e){var t;return $t(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ct(this.high,this.low,this.unsigned):e<32?(t=32-e,ct(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,ct(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},Ae.rotr=Ae.rotateRight,Ae.toSigned=function(){return this.unsigned?ct(this.low,this.high,!1):this},Ae.toUnsigned=function(){return this.unsigned?this:ct(this.low,this.high,!0)},Ae.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},Ae.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},Ae.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},Ze.fromBytes=function(e,t,n){return n?Ze.fromBytesLE(e,t):Ze.fromBytesBE(e,t)},Ze.fromBytesLE=function(e,t){return new Ze(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Ze.fromBytesBE=function(e,t){return new Ze(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const Ya=Q.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);Q.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:ht}]),Q.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]),Q.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:Za,repeated:!0}]);const Za=Q.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});Q.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:Xa,repeated:!0}]);const Xa=Q.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});Q.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:Qa,repeated:!0}]);const Qa=Q.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});Q.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]),Q.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]),Q.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:el,repeated:!0}]);const el=Q.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});Q.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var st=(r=>(r.Ok="ok",r.ErrClientNotActivated="ErrClientNotActivated",r.ErrClientNotFound="ErrClientNotFound",r.ErrUnimplemented="ErrUnimplemented",r.Unsupported="unsupported",r.ErrDocumentNotAttached="ErrDocumentNotAttached",r.ErrDocumentNotDetached="ErrDocumentNotDetached",r.ErrDocumentRemoved="ErrDocumentRemoved",r.ErrInvalidObjectKey="ErrInvalidObjectKey",r.ErrInvalidArgument="ErrInvalidArgument",r))(st||{});class ft extends Error{constructor(e,t){super(t),w(this,"name","YorkieError"),w(this,"stack"),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function wn(r){if(r instanceof Map){const e=Array.from(r);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(r))}const fs=r=>r?Object.entries(r).length===0:!0,Fr=r=>{const e={};for(const[t,n]of Object.entries(r))e[t]=JSON.stringify(n);return e},Ur=r=>{const e={};for(const[t,n]of Object.entries(r))e[t]=JSON.parse(n);return e};var rr=(r=>(r.Put="put",r.Clear="clear",r))(rr||{});class Yi{constructor(e,t){w(this,"context"),w(this,"presence"),this.context=e,this.presence=t}set(e,t){for(const n of Object.keys(e))this.presence[n]=e[n];this.context.setPresenceChange({type:"put",presence:wn(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Oi="000000000000000000000000",tl="FFFFFFFFFFFFFFFFFFFFFFFF";class Yt{constructor(e,t,n){w(this,"lamport"),w(this,"delimiter"),w(this,"actorID"),this.lamport=e,this.delimiter=t,this.actorID=n}static of(e,t,n){return new Yt(e,t,n)}static fromStruct(e){return Yt.of(Ze.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Yt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Zi=0,nl=4294967295,rl=Ze.MAX_VALUE,Tn=new Yt(Ze.fromNumber(0),Zi,Oi);new Yt(Ze.fromNumber(1),Zi+1,Oi);const Xr=new Yt(rl,nl,tl);var zt=(r=>(r[r.Trivial=0]="Trivial",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal",r))(zt||{});let Ar=2;function Xi(r){Ar=r}const Te={trivial:(...r)=>{Ar>0||typeof console<"u"&&console.log("YORKIE T:",...r)},debug:(...r)=>{Ar>1||typeof console<"u"&&console.log("YORKIE D:",...r)},info:(...r)=>{Ar>2||typeof console<"u"&&console.log("YORKIE I:",...r)},warn:(...r)=>{Ar>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...r):console.log("YORKIE W:",...r))},error:(...r)=>{Ar>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...r):console.log("YORKIE E:",...r))},fatal:(r,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${r}`)},isEnabled:r=>Ar<=r};function Dn(r){return r.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Qr{constructor(e){w(this,"createdAt"),w(this,"movedAt"),w(this,"removedAt"),this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class ir extends Qr{constructor(e){super(e)}}class Qi{constructor(e,t){w(this,"strKey"),w(this,"value"),this.strKey=e,this.value=t}static of(e,t){return new Qi(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class ei{constructor(){w(this,"nodeMapByKey"),w(this,"nodeMapByCreatedAt"),this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new ei}set(e,t,n){let i;const h=this.nodeMapByKey.get(e);h!=null&&!h.isRemoved()&&h.remove(n)&&(i=h.getValue());const b=Qi.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),b),(h==null||n.after(h.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,b),t.setMovedAt(n)),i}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||Te.fatal(`fail to find ${e.toIDString()}`);const n=this.nodeMapByCreatedAt.get(e.toIDString());return n.remove(t),n.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){Te.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const n=this.nodeMapByKey.get(t.getStrKey());t===n&&this.nodeMapByKey.delete(n.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const n=this.nodeMapByKey.get(e);if(n!=null&&!!n.remove(t))return n.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class en extends ir{constructor(e,t){super(e),w(this,"memberNodes"),this.memberNodes=t}static create(e,t){if(!t)return new en(e,ei.create());const n=ei.create();for(const[i,h]of Object.entries(t))n.set(i,h.deepcopy(),h.getCreatedAt());return new en(e,n)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,n){return this.memberNodes.set(e,t,n)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,n]of this)e.push(`"${Dn(t)}":${n.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,n]of this){const{createdAt:i,value:h,type:b}=n.toJSForTest();e[t]={key:t,createdAt:i,value:h,type:b}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[i]of this)t.push(i);const n=[];for(const i of t.sort()){const h=(e=this.memberNodes.get(i))==null?void 0:e.getValue();n.push(`"${Dn(i)}":${h.toSortedJSON()}`)}return`{${n.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=en.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const n=t.getValue();if(e(n,this))return;n instanceof ir&&n.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var gt=(r=>(r.Local="local",r.Remote="remote",r.UndoRedo="undoredo",r))(gt||{});class An{constructor(e,t){w(this,"parentCreatedAt"),w(this,"executedAt"),this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class hs{constructor(e){w(this,"value"),w(this,"left"),w(this,"right"),w(this,"parent"),w(this,"weight"),this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class ti{constructor(e){w(this,"root"),this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&Te.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,n=e,i;for(;n;)(!i||i===n.getRight())&&(t+=n.getLength()+(n.hasLeft()?n.getLeftWeight():0)),i=n,n=n.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new ti(e.getLeft());t.root&&t.root.setParent();const n=new ti(e.getRight());if(n.root&&n.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(n.root),n.root&&n.root.setParent(t.root),this.root=t.root}else this.root=n.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const n of t)n.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Dt=(r=>(r[r.Null=0]="Null",r[r.Boolean=1]="Boolean",r[r.Integer=2]="Integer",r[r.Long=3]="Long",r[r.Double=4]="Double",r[r.String=5]="String",r[r.Bytes=6]="Bytes",r[r.Date=7]="Date",r))(Dt||{});class vt extends Qr{constructor(e,t){super(t),w(this,"valueType"),w(this,"value"),this.valueType=vt.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new vt(e,t)}static valueFromBytes(e,t){switch(e){case 0:return null;case 1:return!!t[0];case 2:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 4:{const n=new DataView(t.buffer);return t.forEach(function(i,h){n.setUint8(h,i)}),n.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(t);case 3:return Ze.fromBytesLE(Array.from(t));case 6:return t;case 7:return new Date(Ze.fromBytesLE(Array.from(t),!0).toNumber());default:throw new ft(st.ErrUnimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${Dn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=vt.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Ze)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return vt.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case 5:return new TextEncoder().encode(this.value);case 3:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case 6:return this.value;case 7:{const e=this.value,t=Ze.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new ft(st.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class ki extends hs{constructor(e){super(e),w(this,"prev"),w(this,"next"),this.value=e}static createAfter(e,t){const n=new ki(t),i=e.next;return e.next=n,n.prev=e,n.next=i,i&&(i.prev=n),n}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class ni{constructor(){w(this,"dummyHead"),w(this,"last"),w(this,"nodeMapByIndex"),w(this,"nodeMapByCreatedAt");const e=vt.of(0,Tn);e.setRemovedAt(Tn),this.dummyHead=new ki(e),this.last=this.dummyHead,this.nodeMapByIndex=new ti,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new ni}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let n=this.nodeMapByCreatedAt.get(e.toIDString());for(n||Te.fatal(`cant find the given node: ${e.toIDString()}`);n.getNext()&&n.getNext().getPositionedAt().after(t);)n=n.getNext();return n}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,n=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,n),h=ki.createAfter(i,t);i===this.last&&(this.last=h),this.nodeMapByIndex.insertAfter(i,h),this.nodeMapByCreatedAt.set(h.getCreatedAt().toIDString(),h)}moveAfter(e,t,n){const i=this.nodeMapByCreatedAt.get(e.toIDString());i||Te.fatal(`cant find the given node: ${e.toIDString()}`);const h=this.nodeMapByCreatedAt.get(t.toIDString());h||Te.fatal(`cant find the given node: ${t.toIDString()}`),i!==h&&(!h.getValue().getMovedAt()||n.after(h.getValue().getMovedAt()))&&(this.release(h),this.insertAfter(i.getCreatedAt(),h.getValue(),n),h.getValue().setMovedAt(n))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||Te.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,n]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||n>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const n=this.nodeMapByCreatedAt.get(e.toIDString()),i=n.isRemoved();return n.remove(t)&&!i&&this.nodeMapByIndex.splayNode(n),n.getValue()}deleteByIndex(e,t){const n=this.getByIndex(e);if(!!n)return n.remove(t)&&this.nodeMapByIndex.splayNode(n),n.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const n=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${n}}`):e.push(`[${n}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class on extends ir{constructor(e,t){super(e),w(this,"elements"),this.elements=t}static create(e,t){if(!t)return new on(e,ni.create());const n=ni.create();for(const i of t)n.insertAfter(n.getLastCreatedAt(),i.deepcopy());return new on(e,n)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,n){this.elements.moveAfter(e,t,n)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const n=t.getValue();if(e(n,this))return;n instanceof ir&&n.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{createdAt:n,value:i,type:h}=this.get(t).toJSForTest();e[t]={key:String(t),createdAt:n,value:i,type:h}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=on.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class or extends An{constructor(e,t,n){super(e,n),w(this,"createdAt"),this.createdAt=t}static create(e,t,n){return new or(e,t,n)}execute(e,t){var n;const i=e.findByCreatedAt(this.getParentCreatedAt());if(i||Te.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof ir||Te.fatal(`only object and array can execute remove: ${i}`),t===gt.UndoRedo){let K=i.getByID(this.createdAt);for(;K;){if(K.getRemovedAt())return;K=(n=e.findElementPairByCreatedAt(K.getCreatedAt()))==null?void 0:n.parent}}const h=i.subPathOf(this.createdAt),b=this.toReverseOperation(i),P=i.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(P),{opInfos:i instanceof on?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(h)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:h}],reverseOp:b}}toReverseOperation(e){if(e instanceof en){const t=e.subPathOf(this.createdAt);if(t!==void 0){const n=e.get(t);if(n!==void 0)return _r.create(t,n.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class _r extends An{constructor(e,t,n,i){super(n,i),w(this,"key"),w(this,"value"),this.key=e,this.value=t}static create(e,t,n,i){return new _r(e,t,n,i)}execute(e,t){var n;const i=e.findByCreatedAt(this.getParentCreatedAt());if(i||Te.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof en||Te.fatal("fail to execute, only object can execute set"),t===gt.UndoRedo){let K=i;for(;K;){if(K.getRemovedAt())return;K=(n=e.findElementPairByCreatedAt(K.getCreatedAt()))==null?void 0:n.parent}}const h=i.get(this.key),b=this.toReverseOperation(h),P=this.value.deepcopy(),U=i.set(this.key,P,this.getExecutedAt());return t===gt.UndoRedo&&e.findByCreatedAt(P.getCreatedAt())&&e.deregisterElement(P),e.registerElement(P,i),U&&e.registerRemovedElement(U),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:b}}toReverseOperation(e){let t=or.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=_r.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class ri extends An{constructor(e,t,n,i){super(e,i),w(this,"prevCreatedAt"),w(this,"value"),this.prevCreatedAt=t,this.value=n}static create(e,t,n,i){return new ri(e,t,n,i)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||Te.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof on||Te.fatal("fail to execute, only array can execute add");const n=t,i=this.value.deepcopy();return n.insertAfter(this.prevCreatedAt,i),e.registerElement(i,n),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(n.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class sr extends An{constructor(e,t,n,i){super(e,i),w(this,"prevCreatedAt"),w(this,"createdAt"),this.prevCreatedAt=t,this.createdAt=n}static create(e,t,n,i){return new sr(e,t,n,i)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||Te.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof on||Te.fatal("fail to execute, only array can execute move");const n=t,i=Number(n.subPathOf(this.createdAt));n.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const h=Number(n.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:h,previousIndex:i}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Sr{constructor(e,t,n,i){w(this,"key"),w(this,"value"),w(this,"updatedAt"),w(this,"_isRemoved"),this.key=e,this.value=t,this.updatedAt=n,this._isRemoved=i}static of(e,t,n,i){return new Sr(e,t,n,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Qn{constructor(){w(this,"nodeMapByKey"),w(this,"numberOfRemovedElement"),this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Qn}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,n){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&n.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||n.after(i.getUpdatedAt())){const h=Sr.of(e,t,n,!1);return this.nodeMapByKey.set(e,h),i!==void 0&&i.isRemoved()?[i,h]:[void 0,h]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,n,i){const h=Sr.of(e,t,n,i);this.nodeMapByKey.set(e,h),i&&this.numberOfRemovedElement++}remove(e,t){const n=this.nodeMapByKey.get(e),i=[];if(n===void 0||t.after(n.getUpdatedAt())){if(n===void 0){this.numberOfRemovedElement+=1;const P=Sr.of(e,"",t,!0);return this.nodeMapByKey.set(e,P),i.push(P),i}const h=n.isRemoved();h||(this.numberOfRemovedElement+=1),h&&i.push(n);const b=Sr.of(e,n.getValue(),t,!0);return this.nodeMapByKey.set(e,b),i.push(b),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Qn;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,n]of this.nodeMapByKey)n.isRemoved()||e.push(`"${Dn(t)}":"${Dn(n.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,n]of this.nodeMapByKey)n.isRemoved()||(e[t]=n.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class ii{constructor(e){w(this,"attributes"),w(this,"content"),this.attributes=Qn.create(),this.content=e}static create(e){return new ii(e)}get length(){return this.content.length}substring(e,t){const n=new ii(this.content.substring(e,t));return n.attributes=this.attributes.deepcopy(),n}setAttr(e,t,n){return this.attributes.set(e,t,n)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=Dn(this.content),t=this.attributes.toObject(),n=[];for(const[i,h]of Object.entries(t)){const b=JSON.parse(h),P=typeof b=="string"?`"${Dn(i)}":"${Dn(b)}"`:`"${Dn(i)}":${String(b)}`;n.push(P)}return n.sort(),n.length===0?`{"val":"${e}"}`:`{"attrs":{${n.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof Sr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class hn extends Qr{constructor(e,t){super(t),w(this,"rgaTreeSplit"),this.rgaTreeSplit=e}static create(e,t){return new hn(e,t)}edit(e,t,n,i,h){const b=t?ii.create(t):void 0;if(b&&i)for(const[ye,de]of Object.entries(i))b.setAttr(ye,de,n);const[P,U,K,te]=this.rgaTreeSplit.edit(e,n,b,h),ve=te.map(ye=>({...ye,value:ye.value?{attributes:Ur(ye.value.getAttributes()),content:ye.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[U,ve,K,[P,P]]}setStyle(e,t,n,i){const[,h]=this.rgaTreeSplit.findNodeWithSplit(e[1],n),[,b]=this.rgaTreeSplit.findNodeWithSplit(e[0],n),P=[],U=this.rgaTreeSplit.findBetween(b,h),K=new Map,te=[];for(const ye of U){const de=ye.getCreatedAt().getActorID(),Ne=i!=null&&i.size?i.has(de)?i.get(de):Tn:Xr;if(ye.canStyle(n,Ne)){const Je=K.get(de),$e=ye.getCreatedAt();(!Je||$e.after(Je))&&K.set(de,$e),te.push(ye)}}const ve=[];for(const ye of te){if(ye.isRemoved())continue;const[de,Ne]=this.rgaTreeSplit.findIndexesFromRange(ye.createPosRange());P.push({type:"style",actor:n.getActorID(),from:de,to:Ne,value:{attributes:Ur(t)}});for(const[Je,$e]of Object.entries(t)){const[it]=ye.getValue().setAttr(Je,$e,n);it!==void 0&&ve.push({parent:ye.getValue(),child:it})}}return[K,ve,P]}indexRangeToPosRange(e,t){const n=this.rgaTreeSplit.indexToPos(e);return e===t?[n,n]:[n,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const n=t.getValue();e.push({attributes:Ur(n.getAttributes()),content:n.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new hn(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const t of this.rgaTreeSplit){t.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:t});for(const n of t.getValue().getGCPairs())e.push(n)}return e}}class oi extends An{constructor(e,t,n,i,h,b,P){super(e,P),w(this,"fromPos"),w(this,"toPos"),w(this,"maxCreatedAtMapByActor"),w(this,"content"),w(this,"attributes"),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=i,this.content=h,this.attributes=b}static create(e,t,n,i,h,b,P){return new oi(e,t,n,i,h,b,P)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||Te.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof hn||Te.fatal("fail to execute, only Text can execute edit");const n=t,[,i,h]=n.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const b of h)e.registerGCPair(b);return{opInfos:i.map(({from:b,to:P,value:U})=>({type:"edit",from:b,to:P,value:U,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),i=this.content;return`${e}.EDIT(${t},${n},${i})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class si extends An{constructor(e,t,n,i,h,b){super(e,b),w(this,"fromPos"),w(this,"toPos"),w(this,"maxCreatedAtMapByActor"),w(this,"attributes"),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=i,this.attributes=h}static create(e,t,n,i,h,b){return new si(e,t,n,i,h,b)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||Te.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof hn||Te.fatal("fail to execute, only Text can execute edit");const n=t,[,i,h]=n.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const b of i)e.registerGCPair(b);return{opInfos:h.map(({from:b,to:P,value:U})=>({type:"style",from:b,to:P,value:U,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),i=this.attributes;return`${e}.STYL(${t},${n},${JSON.stringify(i)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const il=2,ol="root",er="text";function ai(r,e){let t=0;const n=r.children;for(let i=0;i<e;i++){const h=n[i];!h||h.isRemoved||(t+=h.paddedSize)}return t}class sl{constructor(e,t=[]){if(w(this,"type"),w(this,"parent"),w(this,"_children"),w(this,"size"),this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const n=t.updateDescendantsSize();t.isRemoved||(e+=n)}return this.size+=e,this.paddedSize}get isText(){return this.type===er}get paddedSize(){return this.size+(this.isText?0:il)}isAncestorOf(e){return al(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const n=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=n;const h=this.cloneText(e+t);return h.value=i,this.parent.insertAfterInternal(h,this),h}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const n=this.cloneElement(t);this.parent.insertAfterInternal(n,this),n.updateAncestorsSize();const i=this.children.slice(0,e),h=this.children.slice(e);this._children=i,n._children=h,this.size=this._children.reduce((b,P)=>b+P.paddedSize,0),n.size=n._children.reduce((b,P)=>b+P.paddedSize,0);for(const b of n._children)b.parent=n;return n}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const n=this._children.indexOf(t);if(n!==-1)return n;t=t.parent}return-1}}function al(r,e){if(r===e)return!1;for(;e.parent;){if(e.parent===r)return!0;e=e.parent}return!1}var Nt=(r=>(r.Start="Start",r.End="End",r.Text="Text",r))(Nt||{});function ds(r,e,t,n){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>r.size)throw new Error(`from is out of range: ${e} > ${r.size}`);if(t>r.size)throw new Error(`to is out of range: ${t} > ${r.size}`);if(e===t)return;let i=0;for(const h of r.children){if(e-h.paddedSize<i&&i<t){const b=h.isText?e-i:e-i-1,P=h.isText?t-i:t-i-1,U=!h.isText&&b<0,K=!h.isText&&P>h.size;(h.isText||U)&&n([h,h.isText?"Text":"Start"],K),ds(h,Math.max(0,b),Math.min(P,h.size),n),K&&n([h,"End"],K)}i+=h.paddedSize}}function gs(r,e,t=0){for(const n of r.children)gs(n,e,t+1);e(r,t)}function Ei(r,e,t=0){for(const n of r._children)Ei(n,e,t+1);e(r,t)}function eo(r,e,t=!0){if(e>r.size)throw new Error(`index is out of range: ${e} > ${r.size}`);if(r.isText)return{node:r,offset:e};let n=0,i=0;for(const h of r.children){if(t&&h.isText&&h.size>=e-i)return eo(h,e-i,t);if(e===i)return{node:r,offset:n};if(!t&&h.paddedSize===e-i)return{node:r,offset:n+1};if(h.paddedSize>e-i)return eo(h,e-i-1,t);i+=h.paddedSize,n+=1}return{node:r,offset:n}}function ps(r){return r.isText||r.children.length===0?r:ps(r.children[0])}function ll(r,e){if(r.size<e)throw new Error("unacceptable path");for(let t=0;t<r.children.length;t++){const n=r.children[t];if(n.size<e)e-=n.size;else{r=n;break}}return{node:r,offset:e}}class ul{constructor(e){w(this,"root"),this.root=e}tokensBetween(e,t,n){ds(this.root,e,t,n)}traverse(e){gs(this.root,e,0)}traverseAll(e){Ei(this.root,e,0)}findTreePos(e,t=!0){return eo(this.root,e,t)}treePosToPath(e){const t=[];let n=e.node;if(n.isText){const i=n.parent.findOffset(n);if(i===-1)throw new Error("invalid treePos");const h=ai(n.parent,i);t.push(h+e.offset),n=n.parent}else if(n.hasTextChild()){const i=ai(n,e.offset);t.push(i)}else t.push(e.offset);for(;n.parent;){const i=n.parent.findOffset(n);if(i===-1)throw new Error("invalid treePos");t.push(i),n=n.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let n=0;n<e.length-1;n++){const i=e[n];if(t=t.children[i],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return ll(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:n}=e;if(t.isText){if(t.size===n){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===n?t:ps(t.children[n])}indexOf(e){let{node:t}=e;const{offset:n}=e;let i=0,h=1;if(t.isText){i+=n;const b=t.parent,P=b.findOffset(t);if(P===-1)throw new Error("invalid pos");i+=ai(b,P),t=t.parent}else i+=ai(t,n);for(;t!=null&&t.parent;){const b=t.parent,P=b.findOffset(t);if(P===-1)throw new Error("invalid pos");i+=ai(b,P),h++,t=t.parent}return i+h-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const cl=(r,e)=>r===e?0:r<e?-1:1;class fl{constructor(e,t,n){w(this,"key"),w(this,"value"),w(this,"parent"),w(this,"left"),w(this,"right"),w(this,"isRed"),this.key=e,this.value=t,this.isRed=n}}class hl{constructor(e){w(this,"stack"),this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class ms{constructor(e){w(this,"root"),w(this,"comparator"),w(this,"counter"),this.comparator=typeof e<"u"?e:cl,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new hl(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const n=this.comparator(e,t.key);if(n>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(n<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,h=t;for(;i&&h===i.left;)h=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const n=this.comparator(e,t.key);if(n===0)return t;n<0?t=t.left:n>0&&(t=t.right)}}putInternal(e,t,n){if(!n)return this.counter+=1,new fl(e,t,!0);const i=this.comparator(e,n.key);return i<0?n.left=this.putInternal(e,t,n.left):i>0?n.right=this.putInternal(e,t,n.right):n.value=t,this.isRed(n.right)&&!this.isRed(n.left)&&(n=this.rotateLeft(n)),this.isRed(n.left)&&this.isRed(n.left.left)&&(n=this.rotateRight(n)),this.isRed(n.left)&&this.isRed(n.right)&&this.flipColors(n),n}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const n=this.min(e.right);e.value=n.value,e.key=n.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class _n{constructor(e,t){w(this,"parentID"),w(this,"leftSiblingID"),this.parentID=e,this.leftSiblingID=t}static of(e,t){return new _n(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:n}=e,i;return n.isText?(n.parent.children[0]===n&&t===0?i=n.parent:i=n,n=n.parent):t===0?i=n:i=n.children[t-1],_n.of(n.id,jt.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return _n.of(jt.of(Yt.fromStruct(e.parentID.createdAt),e.parentID.offset),jt.of(Yt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),n=this.getLeftSiblingID(),i=e.findFloorNode(t);let h=e.findFloorNode(n);if(!i||!h)throw new Error(`cannot find node of CRDTTreePos(${t.toTestString()}, ${n.toTestString()})`);return!n.equals(t)&&n.getOffset()>0&&n.getOffset()===h.id.getOffset()&&h.insPrevID&&(h=e.findFloorNode(h.insPrevID)),[i,h]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class jt{constructor(e,t){w(this,"createdAt"),w(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new jt(e,t)}static fromStruct(e){return jt.of(Yt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class sn extends sl{constructor(e,t,n,i,h){super(t),w(this,"id"),w(this,"removedAt"),w(this,"attrs"),w(this,"insPrevID"),w(this,"insNextID"),w(this,"_value",""),this.id=e,this.removedAt=h,i&&(this.attrs=i),typeof n=="string"?this.value=n:Array.isArray(n)&&(this._children=n)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,t,n,i){return new sn(e,t,n,i)}deepcopy(){var e;const t=new sn(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)==null?void 0:e.deepcopy(),t._children=this._children.map(n=>{const i=n.deepcopy();return i.parent=t,i}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&this.updateAncestorsSize()}cloneText(e){return new sn(jt.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new sn(jt.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,n){const i=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,n);if(i){if(i.insPrevID=this.id,this.insNextID){const h=e.findFloorNode(this.insNextID);h.insPrevID=i.id,i.insNextID=this.insNextID}this.insNextID=i.id,e.registerNode(i)}return i}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return this.isText?!1:!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,t){this.attrs||(this.attrs=new Qn);const n=new Array;for(const[i,h]of Object.entries(e))n.push(this.attrs.set(i,h,t));return n}purge(e){this.attrs&&this.attrs.purge(e)}getGCPairs(){const e=[];if(!this.attrs)return e;for(const t of this.attrs)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}function to(r){var e;if(r.isText){const n=r;return{type:n.type,value:n.value}}const t={type:r.type,children:r.children.map(to)};return r.attrs&&(t.attributes=Ur((e=r.attrs)==null?void 0:e.toObject())),t}function no(r){if(r.isText)return r.value;let e="";return r.attrs&&r.attrs.size()&&(e=" "+Array.from(r.attrs).filter(t=>!t.isRemoved()).sort((t,n)=>t.getKey().localeCompare(n.getKey())).map(t=>{const n=JSON.parse(t.getValue());return typeof n=="string"?`${t.getKey()}="${n}"`:`${t.getKey()}="${Dn(t.getValue())}"`}).join(" ")),`<${r.type}${e}>${r.children.map(t=>no(t)).join("")}</${r.type}>`}function ys(r){if(r.isText){const e=r;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:r.type,children:r.children.map(ys),size:r.size,isRemoved:r.isRemoved}}class dn extends Qr{constructor(e,t){super(t),w(this,"indexTree"),w(this,"nodeMapByID"),this.indexTree=new ul(e),this.nodeMapByID=new ms(jt.createComparator()),this.indexTree.traverseAll(n=>{this.nodeMapByID.put(n.id,n)})}static create(e,t){return new dn(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[n,i]=e.toTreeNodePair(this);let h=i;const b=n===h,P=h.parent&&!b?h.parent:n;if(h.isText&&h.split(this,e.getLeftSiblingID().getOffset()-h.id.getOffset()),t){const U=P.allChildren,K=b?0:U.indexOf(h)+1;for(let te=K;te<U.length;te++){const ve=U[te];if(!ve.id.getCreatedAt().after(t))break;h=ve}}return[P,h]}style(e,t,n,i){const[h,b]=this.findNodesAndSplitText(e[0],n),[P,U]=this.findNodesAndSplitText(e[1],n),K=[],te=t?Ur(t):{},ve=new Map,ye=[];return this.traverseInPosRange(h,b,P,U,([de])=>{const Ne=de.getCreatedAt().getActorID(),Je=i?i.has(Ne)?i.get(Ne):Tn:Xr;if(de.canStyle(n,Je)&&t){const $e=ve.get(Ne),it=de.getCreatedAt();(!$e||it.after($e))&&ve.set(Ne,it);const bt=de.setAttrs(t,n),lt=bt.reduce((wt,[,Er])=>(Er&&(wt[Er.getKey()]=te[Er.getKey()]),wt),{}),pt=de.parent,mt=de.prevSibling||de.parent;Object.keys(lt).length>0&&K.push({type:"style",from:this.toIndex(pt,mt),to:this.toIndex(de,de),fromPath:this.toPath(pt,mt),toPath:this.toPath(de,de),actor:n.getActorID(),value:lt});for(const[wt]of bt)wt&&ye.push({parent:de,child:wt})}}),[ve,ye,K]}removeStyle(e,t,n,i){const[h,b]=this.findNodesAndSplitText(e[0],n),[P,U]=this.findNodesAndSplitText(e[1],n),K=[],te=new Map,ve=[];return this.traverseInPosRange(h,b,P,U,([ye])=>{const de=ye.getCreatedAt().getActorID(),Ne=i?i.has(de)?i.get(de):Tn:Xr;if(ye.canStyle(n,Ne)&&t){const Je=te.get(de),$e=ye.getCreatedAt();(!Je||$e.after(Je))&&te.set(de,$e),ye.attrs||(ye.attrs=new Qn);for(const lt of t){const pt=ye.attrs.remove(lt,n);for(const mt of pt)ve.push({parent:ye,child:mt})}const it=ye.parent,bt=ye.prevSibling||ye.parent;K.push({actor:n.getActorID(),type:"removeStyle",from:this.toIndex(it,bt),to:this.toIndex(ye,ye),fromPath:this.toPath(it,bt),toPath:this.toPath(ye,ye),value:t})}}),[te,ve,K]}edit(e,t,n,i,h,b){const[P,U]=this.findNodesAndSplitText(e[0],i),[K,te]=this.findNodesAndSplitText(e[1],i),ve=this.toIndex(P,U),ye=this.toPath(P,U),de=[],Ne=[],Je=[],$e=new Map;this.traverseInPosRange(P,U,K,te,([lt,pt],mt)=>{if(pt===Nt.Start&&!mt)for(const xr of lt.children)Je.push(xr);const wt=lt.getCreatedAt().getActorID(),Er=b?b.has(wt)?b.get(wt):Tn:Xr;if(lt.canDelete(i,Er)||de.includes(lt.parent)){const xr=$e.get(wt),yi=lt.getCreatedAt();(!xr||yi.after(xr))&&$e.set(wt,yi),(pt===Nt.Text||pt===Nt.Start)&&de.push(lt),Ne.push([lt,pt])}});const it=this.makeDeletionChanges(Ne,i),bt=[];for(const lt of de)lt.remove(i),lt.isRemoved&&bt.push({parent:this,child:lt});for(const lt of Je)lt.removedAt||P.append(lt);if(n>0){let lt=0,pt=P,mt=U;for(;lt<n;)pt.split(this,pt.findOffset(mt)+1,h),mt=pt,pt=pt.parent,lt++;it.push({type:"content",from:ve,to:ve,fromPath:ye,toPath:ye,actor:i.getActorID()})}if(t!=null&&t.length){const lt=[];let pt=U;for(const mt of t)pt===P?P.insertAt(mt,0):P.insertAfter(mt,pt),pt=mt,Ei(mt,wt=>{P.isRemoved&&(wt.remove(i),bt.push({parent:this,child:wt})),this.nodeMapByID.put(wt.id,wt)}),mt.isRemoved||lt.push(mt);if(lt.length){const mt=lt.map(wt=>to(wt));it.length&&it[it.length-1].from===ve?it[it.length-1].value=mt:it.push({type:"content",from:ve,to:ve,fromPath:ye,toPath:ye,actor:i.getActorID(),value:mt})}}return[it,bt,$e]}editT(e,t,n,i,h){const b=this.findPos(e[0]),P=this.findPos(e[1]);this.edit([b,P],t,n,i,h)}move(e,t,n){throw new Error(`not implemented: ${e}, ${t}, ${n}`)}purge(e){var t;(t=e.parent)==null||t.removeChild(e),this.nodeMapByID.remove(e.id);const n=e.insPrevID,i=e.insNextID;if(n){const h=this.findFloorNode(n);h.insNextID=i}if(i){const h=this.findFloorNode(i);h.insPrevID=n}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(t=>{t.getRemovedAt()&&e.push({parent:this,child:t});for(const n of t.getGCPairs())e.push(n)}),e}findPos(e,t=!0){const n=this.indexTree.findTreePos(e,t);return _n.fromTreePos(n)}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return no(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),t=(n,i=void 0,h=void 0,b=0)=>{var P,U,K,te;let ve,ye,de;const Ne=n.isText?{node:n,offset:0}:i&&h?this.toTreePos(i,h):null;Ne&&(ve=this.indexTree.indexOf(Ne),ye=this.indexTree.treePosToPath(Ne),de=_n.fromTreePos(Ne).toStruct());const Je={type:n.type,parent:i==null?void 0:i.id.toTestString(),size:n.size,id:n.id.toTestString(),removedAt:(P=n.removedAt)==null?void 0:P.toTestString(),insPrev:(U=n.insPrevID)==null?void 0:U.toTestString(),insNext:(K=n.insNextID)==null?void 0:K.toTestString(),value:n.isText?n.value:void 0,isRemoved:n.isRemoved,children:[],depth:b,attributes:n.attrs?Ur((te=n.attrs)==null?void 0:te.toObject()):void 0,index:ve,path:ye,pos:de};for(let $e=0;$e<n.allChildren.length;$e++){const it=$e===0?n:n.allChildren[$e-1];Je.children.push(t(n.allChildren[$e],n,it,b+1))}return Je};return t(e)}getRootTreeNode(){return to(this.indexTree.getRoot())}toTestTreeNode(){return ys(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new dn(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.treePosToPath(n):[]}toIndex(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.indexOf(n):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,n]=e,i=this.findPos(t);return t===n?[i.toStruct(),i.toStruct()]:[i.toStruct(),this.findPos(n).toStruct()]}posRangeToPathRange(e){const[t,n]=this.findNodesAndSplitText(e[0]),[i,h]=this.findNodesAndSplitText(e[1]);return[this.toPath(t,n),this.toPath(i,h)]}posRangeToIndexRange(e){const[t,n]=this.findNodesAndSplitText(e[0]),[i,h]=this.findNodesAndSplitText(e[1]);return[this.toIndex(t,n),this.toIndex(i,h)]}traverseInPosRange(e,t,n,i,h){const b=this.toIndex(e,t),P=this.toIndex(n,i);return this.indexTree.tokensBetween(b,P,h)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let i;for(;e.isRemoved;)i=e,e=i.parent;const h=e.findOffset(i);return{node:e,offset:h}}if(e===t)return{node:e,offset:0};let n=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};n++}return{node:e,offset:n}}makeDeletionChanges(e,t){const n=[],i=[];let h=null,b=null;for(let P=0;P<e.length;P++){const U=e[P],K=e[P+1];h||(h=U),b=U;const te=this.findRightToken(U);(!te||!K||te[0]!==K[0]||te[1]!==K[1])&&(i.push([h,b]),h=null,b=null)}for(const P of i){const[U,K]=P,[te,ve]=this.findLeftToken(U),[ye,de]=K,Ne=ve===Nt.Start?te:te.parent,Je=de===Nt.Start?ye:ye.parent,$e=this.toIndex(Ne,te),it=this.toIndex(Je,ye);$e<it&&(n.length>0&&$e===n[n.length-1].to?(n[n.length-1].to=it,n[n.length-1].toPath=this.toPath(Je,ye)):n.push({type:"content",from:$e,to:it,fromPath:this.toPath(Ne,te),toPath:this.toPath(Je,ye),actor:t.getActorID()}))}return n.reverse()}findRightToken([e,t]){if(t===Nt.Start){const P=e.allChildren;return P.length>0?[P[0],P[0].isText?Nt.Text:Nt.Start]:[e,Nt.End]}const n=e.parent,i=n.allChildren,h=i.indexOf(e);if(n&&h===i.length-1)return[n,Nt.End];const b=i[h+1];return[b,b.isText?Nt.Text:Nt.Start]}findLeftToken([e,t]){if(t===Nt.End){const P=e.allChildren;if(P.length>0){const U=P[P.length-1];return[U,U.isText?Nt.Text:Nt.End]}return[e,Nt.Start]}const n=e.parent,i=n.allChildren,h=i.indexOf(e);if(n&&h===0)return[n,Nt.Start];const b=i[h-1];return[b,b.isText?Nt.Text:Nt.End]}}class li extends An{constructor(e,t,n,i,h,b,P){super(e,P),w(this,"fromPos"),w(this,"toPos"),w(this,"contents"),w(this,"splitLevel"),w(this,"maxCreatedAtMapByActor"),this.fromPos=t,this.toPos=n,this.contents=i,this.splitLevel=h,this.maxCreatedAtMapByActor=b}static create(e,t,n,i,h,b,P){return new li(e,t,n,i,h,b,P)}execute(e){var t;const n=e.findByCreatedAt(this.getParentCreatedAt());n||Te.fatal(`fail to find ${this.getParentCreatedAt()}`),n instanceof dn||Te.fatal("fail to execute, only Tree can execute edit");const i=this.getExecutedAt(),h=n,[b,P]=h.edit([this.fromPos,this.toPos],(t=this.contents)==null?void 0:t.map(U=>U.deepcopy()),this.splitLevel,i,(()=>{let U=i.getDelimiter();return this.contents!==void 0&&(U+=this.contents.length),()=>Yt.of(i.getLamport(),++U,i.getActorID())})(),this.maxCreatedAtMapByActor);for(const U of P)e.registerGCPair(U);return{opInfos:b.map(({from:U,to:K,value:te,splitLevel:ve,fromPath:ye,toPath:de})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:U,to:K,value:te,splitLevel:ve,fromPath:ye,toPath:de}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,i=this.contents||[];return`${e}.EDIT(${t},${n},${i.map(h=>no(h)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class ar{constructor(e,t,n,i){w(this,"clientSeq"),w(this,"serverSeq"),w(this,"lamport"),w(this,"actor"),this.clientSeq=e,this.serverSeq=i,this.lamport=t,this.actor=n}static of(e,t,n,i){return new ar(e,t,n,i)}next(){return new ar(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new ar(this.clientSeq,e,this.actor):new ar(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return Yt.of(this.lamport,e,this.actor)}setActor(e){return new ar(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const dl=new ar(0,Ze.fromInt(0,!0),Oi);class Or{constructor({id:e,operations:t,presenceChange:n,message:i}){w(this,"id"),w(this,"operations"),w(this,"presenceChange"),w(this,"message"),this.id=e,this.operations=t||[],this.presenceChange=n,this.message=i}static create({id:e,operations:t,presenceChange:n,message:i}){return new Or({id:e,operations:t,presenceChange:n,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,n){const i=[],h=[];for(const b of this.operations){const P=b.execute(e,n);if(!P)continue;const{opInfos:U,reverseOp:K}=P;i.push(...U),K&&h.unshift(K)}return this.presenceChange&&(this.presenceChange.type===rr.Put?t.set(this.id.getActorID(),wn(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:h}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:It.bytesToHex(It.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>It.bytesToHex(It.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:n,presenceChange:i,message:h}=e;return Or.create({id:It.bytesToChangeID(It.hexToBytes(t)),operations:n==null?void 0:n.map(b=>It.bytesToOperation(It.hexToBytes(b))),presenceChange:i,message:h})}}class xi{constructor(e,t,n,i,h,b){w(this,"documentKey"),w(this,"checkpoint"),w(this,"isRemoved"),w(this,"changes"),w(this,"snapshot"),w(this,"minSyncedTicket"),this.documentKey=e,this.checkpoint=t,this.isRemoved=n,this.changes=i,this.snapshot=h,this.minSyncedTicket=b}static create(e,t,n,i,h,b){return new xi(e,t,n,i,h,b)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class $r{constructor(e,t){w(this,"serverSeq"),w(this,"clientSeq"),this.serverSeq=e,this.clientSeq=t}static of(e,t){return new $r(e,t)}increaseClientSeq(e){return e===0?this:new $r(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,n=Math.max(this.clientSeq,e.clientSeq);return $r.of(t,n)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const gl=new $r(Ze.fromInt(0,!0),0);class Ln{constructor(e,t){w(this,"createdAt"),w(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new Ln(e,t)}static fromStruct(e){return Ln.of(Yt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new Ln(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const pl=Ln.of(Tn,0);class Sn{constructor(e,t){w(this,"id"),w(this,"relativeOffset"),this.id=e,this.relativeOffset=t}static of(e,t){return new Sn(e,t)}static fromStruct(e){const t=Ln.fromStruct(e.id);return Sn.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Ln.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class lr extends hs{constructor(e,t,n){super(t),w(this,"id"),w(this,"removedAt"),w(this,"prev"),w(this,"next"),w(this,"insPrev"),w(this,"insNext"),this.id=e,this.removedAt=n}static create(e,t){return new lr(e,t)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new lr(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){const n=!this.removedAt;return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))?n:!1}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Sn.of(this.id,0),Sn.of(this.id,this.getLength())]}deepcopy(){return new lr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}toIDString(){return this.id.toIDString()}}class zr{constructor(){w(this,"head"),w(this,"treeByIndex"),w(this,"treeByID"),this.head=lr.create(pl),this.treeByIndex=new ti,this.treeByID=new ms(lr.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new zr}edit(e,t,n,i){const[h,b]=this.findNodeWithSplit(e[1],t),[P,U]=this.findNodeWithSplit(e[0],t),K=this.findBetween(U,b),[te,ve,ye]=this.deleteNodes(K,t,i),de=b?b.getID():h.getID();let Ne=Sn.of(de,0);if(n){const $e=this.posToIndex(P.createPosRange()[1],!0),it=this.insertAfter(P,lr.create(Ln.of(t,0),n));te.length&&te[te.length-1].from===$e?te[te.length-1].value=n:te.push({actor:t.getActorID(),from:$e,to:$e,value:n}),Ne=Sn.of(it.getID(),it.getContentLength())}const Je=[];for(const[,$e]of ye)Je.push({parent:this,child:$e});return[Ne,ve,Je,te]}indexToPos(e){const[t,n]=this.treeByIndex.find(e),i=t;return Sn.of(i.getID(),n)}findIndexesFromRange(e){const[t,n]=e;return[this.posToIndex(t,!1),this.posToIndex(n,!0)]}posToIndex(e,t){const n=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(n):this.findFloorNode(n);i||Te.fatal(`the node of the given id should be found: ${n.toTestString()}`);const h=this.treeByIndex.indexOf(i),b=i.isRemoved()?0:n.getOffset()-i.getID().getOffset();return h+b}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new zr;let t=this.head.getNext(),n=e.head,i;for(;t;){if(i=e.insertAfter(n,t.deepcopy()),t.hasInsPrev()){const h=e.findNode(t.getInsPrevID());i.setInsPrev(h)}n=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const n=e.getNext();return t.setPrev(e),n&&n.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const n=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(n);const h=n.getOffset()-i.getID().getOffset();for(this.splitNode(i,h);i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||Te.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const n=[];let i=e;for(;i&&i!==t;)n.push(i),i=i.getNext();return n}splitNode(e,t){if(t>e.getContentLength()&&Te.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const n=e.split(t);this.treeByIndex.updateWeight(n),this.insertAfter(e,n);const i=e.getInsNext();return i&&i.setInsPrev(n),n.setInsPrev(e),n}deleteNodes(e,t,n){if(!e.length)return[[],new Map,new Map];const[i,h]=this.filterNodes(e,t,n),b=new Map,P=new Map,U=this.makeChanges(h,t);for(const K of i){const te=K.getCreatedAt().getActorID();(!b.has(te)||K.getID().getCreatedAt().after(b.get(te)))&&b.set(te,K.getID().getCreatedAt()),P.set(K.getID().toIDString(),K),K.remove(t)}return this.deleteIndexNodes(h),[U,b,P]}filterNodes(e,t,n){const i=!!n,h=[],b=[],[P,U]=this.findEdgesOfCandidates(e);b.push(P);for(const K of e){const te=K.getCreatedAt().getActorID(),ve=i?n.has(te)?n.get(te):Tn:Xr;K.canDelete(t,ve)?h.push(K):b.push(K)}return b.push(U),[h,b]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const n=[];let i,h;for(let b=0;b<e.length-1;b++){const P=e[b],U=e[b+1];P.getNext()!=U&&([i]=this.findIndexesFromRange(P.getNext().createPosRange()),U?[,h]=this.findIndexesFromRange(U.getPrev().createPosRange()):h=this.treeByIndex.length,i<h&&n.push({actor:t.getActorID(),from:i,to:h}))}return n.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const n=e[t],i=e[t+1];n.getNext()!=i&&this.treeByIndex.deleteRange(n,i)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const t=e.getPrev(),n=e.getNext(),i=e.getInsPrev(),h=e.getInsNext();t&&t.setNext(n),n&&n.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(h),h&&h.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const vs=r=>r<0?Math.ceil(r):Math.floor(r);var Mn=(r=>(r[r.IntegerCnt=0]="IntegerCnt",r[r.LongCnt=1]="LongCnt",r))(Mn||{});class an extends Qr{constructor(e,t,n){switch(super(n),w(this,"valueType"),w(this,"value"),this.valueType=e,e){case 0:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=Ze.fromNumber(t).toInt():this.value=vs(t):this.value=t.toInt();break;case 1:typeof t=="number"?this.value=Ze.fromNumber(t):this.value=t;break;default:throw new ft(st.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,t,n){return new an(e,t,n)}static valueFromBytes(e,t){switch(e){case 0:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 1:return Ze.fromBytesLE(Array.from(t));default:throw new ft(st.ErrUnimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=an.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ze?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!an.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new ft(st.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(n){if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`)}return t(this),t(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Dt.Long?this.value=this.value+e.getValue().toInt():this.value=Ze.fromNumber(this.value+vs(e.getValue())).toInt(),this}}class Jr extends An{constructor(e,t,n){super(e,n),w(this,"value"),this.value=t}static create(e,t,n){return new Jr(e,t,n)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||Te.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof an||Te.fatal("fail to execute, only Counter can execute increase");const n=t,i=this.value.deepcopy();return n.increase(i),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:i.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),n=e.getType()===Dt.Long?e.getValue().multiply(-1):e.getValue()*-1;return Jr.create(this.getParentCreatedAt(),vt.of(n,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class tr extends An{constructor(e,t,n,i,h,b,P){super(e,P),w(this,"fromPos"),w(this,"toPos"),w(this,"maxCreatedAtMapByActor"),w(this,"attributes"),w(this,"attributesToRemove"),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=i,this.attributes=h,this.attributesToRemove=b}static create(e,t,n,i,h,b){return new tr(e,t,n,i,h,new Array,b)}static createTreeRemoveStyleOperation(e,t,n,i,h,b){return new tr(e,t,n,i,new Map,h,b)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||Te.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof dn||Te.fatal("fail to execute, only Tree can execute edit");const n=t;let i,h;if(this.attributes.size){const b={};[...this.attributes].forEach(([P,U])=>b[P]=U),[,h,i]=n.style([this.fromPos,this.toPos],b,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const b=this.attributesToRemove;[,h,i]=n.removeStyle([this.fromPos,this.toPos],b,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const b of h)e.registerGCPair(b);return{opInfos:i.map(({from:b,to:P,value:U,fromPath:K,toPath:te})=>({type:"tree-style",from:b,to:P,value:this.attributes.size?{attributes:U}:{attributesToRemove:U},fromPath:K,toPath:te,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${n},${Object.entries(this.attributes||{}).map(([i,h])=>`${i}:"${h}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function ml(r){const e=new Hi,t=e.data;for(const[n,i]of Object.entries(r))t[n]=JSON.stringify(i);return e}function yl(r){if(r.type===rr.Put)return new Ki({type:Zr.PUT,presence:ml(r.presence)});if(r.type===rr.Clear)return new Ki({type:Zr.CLEAR});throw new ft(st.ErrUnimplemented,"unimplemented type")}function vl(r){return new es({serverSeq:r.getServerSeqAsString(),clientSeq:r.getClientSeq()})}function bs(r){return new Ai({clientSeq:r.getClientSeq(),lamport:r.getLamportAsString(),actorId:uo(r.getActorID())})}function qe(r){if(!!r)return new je({lamport:r.getLamportAsString(),delimiter:r.getDelimiter(),actorId:uo(r.getActorID())})}function ws(r){switch(r){case Dt.Null:return tt.NULL;case Dt.Boolean:return tt.BOOLEAN;case Dt.Integer:return tt.INTEGER;case Dt.Long:return tt.LONG;case Dt.Double:return tt.DOUBLE;case Dt.String:return tt.STRING;case Dt.Bytes:return tt.BYTES;case Dt.Date:return tt.DATE;default:throw new ft(st.Unsupported,`unsupported type: ${r}`)}}function Ts(r){switch(r){case Mn.IntegerCnt:return tt.INTEGER_CNT;case Mn.LongCnt:return tt.LONG_CNT;default:throw new ft(st.Unsupported,`unsupported type: ${r}`)}}function ro(r){if(r instanceof en)return new Zn({type:tt.JSON_OBJECT,createdAt:qe(r.getCreatedAt()),value:Bs(r)});if(r instanceof on)return new Zn({type:tt.JSON_ARRAY,createdAt:qe(r.getCreatedAt()),value:Hl(r)});if(r instanceof hn)return new Zn({type:tt.TEXT,createdAt:qe(r.getCreatedAt())});if(r instanceof vt)return new Zn({type:ws(r.getType()),createdAt:qe(r.getCreatedAt()),value:r.toBytes()});if(r instanceof an)return new Zn({type:Ts(r.getType()),createdAt:qe(r.getCreatedAt()),value:r.toBytes()});if(r instanceof dn)return new Zn({type:tt.TREE,createdAt:qe(r.getCreatedAt()),value:Gl(r)});throw new ft(st.ErrUnimplemented,"unimplemented element")}function bl(r){return new Ji({createdAt:qe(r.getCreatedAt()),offset:r.getOffset()})}function Ni(r){return new wr({createdAt:qe(r.getID().getCreatedAt()),offset:r.getID().getOffset(),relativeOffset:r.getRelativeOffset()})}function Ii(r){return new Yr({parentId:ui(r.getParentID()),leftSiblingId:ui(r.getLeftSiblingID())})}function ui(r){return new Br({createdAt:qe(r.getCreatedAt()),offset:r.getOffset()})}function As(r){const e=new $i;if(r instanceof _r){const t=r,n=new Mo;n.parentCreatedAt=qe(t.getParentCreatedAt()),n.key=t.getKey(),n.value=ro(t.getValue()),n.executedAt=qe(t.getExecutedAt()),e.body.case="set",e.body.value=n}else if(r instanceof ri){const t=r,n=new Bo;n.parentCreatedAt=qe(t.getParentCreatedAt()),n.prevCreatedAt=qe(t.getPrevCreatedAt()),n.value=ro(t.getValue()),n.executedAt=qe(t.getExecutedAt()),e.body.case="add",e.body.value=n}else if(r instanceof sr){const t=r,n=new qo;n.parentCreatedAt=qe(t.getParentCreatedAt()),n.prevCreatedAt=qe(t.getPrevCreatedAt()),n.createdAt=qe(t.getCreatedAt()),n.executedAt=qe(t.getExecutedAt()),e.body.case="move",e.body.value=n}else if(r instanceof or){const t=r,n=new jo;n.parentCreatedAt=qe(t.getParentCreatedAt()),n.createdAt=qe(t.getCreatedAt()),n.executedAt=qe(t.getExecutedAt()),e.body.case="remove",e.body.value=n}else if(r instanceof oi){const t=r,n=new Fo;n.parentCreatedAt=qe(t.getParentCreatedAt()),n.from=Ni(t.getFromPos()),n.to=Ni(t.getToPos());const i=n.createdAtMapByActor;for(const[b,P]of t.getMaxCreatedAtMapByActor())i[b]=qe(P);n.content=t.getContent();const h=n.attributes;for(const[b,P]of t.getAttributes())h[b]=P;n.executedAt=qe(t.getExecutedAt()),e.body.case="edit",e.body.value=n}else if(r instanceof si){const t=r,n=new Uo;n.parentCreatedAt=qe(t.getParentCreatedAt()),n.from=Ni(t.getFromPos()),n.to=Ni(t.getToPos());const i=n.createdAtMapByActor;for(const[b,P]of t.getMaxCreatedAtMapByActor())i[b]=qe(P);const h=n.attributes;for(const[b,P]of t.getAttributes())h[b]=P;n.executedAt=qe(t.getExecutedAt()),e.body.case="style",e.body.value=n}else if(r instanceof Jr){const t=r,n=new $o;n.parentCreatedAt=qe(t.getParentCreatedAt()),n.value=ro(t.getValue()),n.executedAt=qe(t.getExecutedAt()),e.body.case="increase",e.body.value=n}else if(r instanceof li){const t=r,n=new zo,i=n.createdAtMapByActor;for(const[h,b]of t.getMaxCreatedAtMapByActor())i[h]=qe(b);n.parentCreatedAt=qe(t.getParentCreatedAt()),n.from=Ii(t.getFromPos()),n.to=Ii(t.getToPos()),n.contents=kl(t.getContents()),n.splitLevel=t.getSplitLevel(),n.executedAt=qe(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=n}else if(r instanceof tr){const t=r,n=new Jo;n.parentCreatedAt=qe(t.getParentCreatedAt()),n.from=Ii(t.getFromPos()),n.to=Ii(t.getToPos());const i=n.createdAtMapByActor;for(const[b,P]of t.getMaxCreatedAtMapByActor())i[b]=qe(P);const h=t.getAttributesToRemove();if(h.length>0)n.attributesToRemove=h;else{const b=n.attributes;for(const[P,U]of t.getAttributes())b[P]=U}n.executedAt=qe(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=n}else throw new ft(st.ErrUnimplemented,"unimplemented operation");return e}function wl(r){const e=[];for(const t of r)e.push(As(t));return e}function Tl(r){const e=new Lo({id:bs(r.getID()),message:r.getMessage()});return r.hasOperations()&&(e.operations=wl(r.getOperations())),r.hasPresenceChange()&&(e.presenceChange=yl(r.getPresenceChange())),e}function Al(r){const e=[];for(const t of r)e.push(Tl(t));return e}function _l(r){const e=[];for(const t of r)e.push(new Zo({key:t.getStrKey(),element:io(t.getValue())}));return e}function Sl(r){const e=[];for(const t of r)e.push(new zi({element:io(t.getValue())}));return e}function Ol(r){const e=[];for(const t of r){const n=new Xo;n.id=bl(t.getID()),n.value=t.getValue().getContent(),n.removedAt=qe(t.getRemovedAt());const i=n.attributes,h=t.getValue().getAttrs();for(const b of h){const P=new _i;P.value=b.getValue(),P.updatedAt=qe(b.getUpdatedAt()),i[b.getKey()]=P}e.push(n)}return e}function kl(r){const e=[];if(!r||!r.length)return e;for(const t of r)e.push(new Qo({content:_s(t)}));return e}function El(r){const e={};for(const t of r)e[t.getKey()]=new _i({value:t.getValue(),updatedAt:qe(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function _s(r){if(!r)return[];const e=[];return Ei(r,(t,n)=>{const i=new Vi({id:ui(t.id),type:t.type,removedAt:qe(t.removedAt),depth:n});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=ui(t.insPrevID)),t.insNextID&&(i.insNextId=ui(t.insNextID)),t.attrs&&(i.attributes=El(t.attrs)),e.push(i)}),e}function xl(r){const e=new un;return e.body.case="jsonObject",e.body.value=new Vo({nodes:_l(r.getRHT()),createdAt:qe(r.getCreatedAt()),movedAt:qe(r.getMovedAt()),removedAt:qe(r.getRemovedAt())}),e}function Ss(r){const e=new un;return e.body.case="jsonArray",e.body.value=new Ko({nodes:Sl(r.getElements()),createdAt:qe(r.getCreatedAt()),movedAt:qe(r.getMovedAt()),removedAt:qe(r.getRemovedAt())}),e}function Nl(r){const e=new un;return e.body.case="primitive",e.body.value=new Ho({type:ws(r.getType()),value:r.toBytes(),createdAt:qe(r.getCreatedAt()),movedAt:qe(r.getMovedAt()),removedAt:qe(r.getRemovedAt())}),e}function Il(r){const e=new un;return e.body.case="text",e.body.value=new Wo({nodes:Ol(r.getRGATreeSplit()),createdAt:qe(r.getCreatedAt()),movedAt:qe(r.getMovedAt()),removedAt:qe(r.getRemovedAt())}),e}function Pl(r){const e=new un;return e.body.case="counter",e.body.value=new Go({type:Ts(r.getType()),value:r.toBytes(),createdAt:qe(r.getCreatedAt()),movedAt:qe(r.getMovedAt()),removedAt:qe(r.getRemovedAt())}),e}function Os(r){const e=new un;return e.body.case="tree",e.body.value=new Yo({nodes:_s(r.getRoot()),createdAt:qe(r.getCreatedAt()),movedAt:qe(r.getMovedAt()),removedAt:qe(r.getRemovedAt())}),e}function io(r){if(r instanceof en)return xl(r);if(r instanceof on)return Ss(r);if(r instanceof vt)return Nl(r);if(r instanceof hn)return Il(r);if(r instanceof an)return Pl(r);if(r instanceof dn)return Os(r);throw new ft(st.ErrUnimplemented,"unimplemented element")}function Cl(r){return new Yn({documentKey:r.getDocumentKey(),checkpoint:vl(r.getCheckpoint()),isRemoved:r.getIsRemoved(),changes:Al(r.getChanges()),snapshot:r.getSnapshot(),minSyncedTicket:qe(r.getMinSyncedTicket())})}function ks(r){const e=r.findDetails(Ya);for(const t of e)if(t.metadata.code)return t.metadata.code;return""}function Es(r){let e;return r.serverSeq&&(e=Ze.fromString(r.serverSeq,!0)),ar.of(r.clientSeq,Ze.fromString(r.lamport,!0),lo(r.actorId),e)}function Fe(r){if(!!r)return Yt.of(Ze.fromString(r.lamport,!0),r.delimiter,lo(r.actorId))}function oo(r){const e={};return Object.entries(r.data).forEach(([t,n])=>{e[t]=JSON.parse(n)}),e}function Rl(r){const e=r.type;if(e===Zr.PUT){const t=oo(r.presence);return{type:rr.Put,presence:t}}if(e===Zr.CLEAR)return{type:rr.Clear};throw new ft(st.Unsupported,`unsupported type: ${e}`)}function Dl(r){const e=new Map;return Object.entries(r).forEach(([t,n])=>{e.set(t,oo(n))}),e}function xs(r){switch(r){case tt.NULL:return Dt.Null;case tt.BOOLEAN:return Dt.Boolean;case tt.INTEGER:return Dt.Integer;case tt.LONG:return Dt.Long;case tt.DOUBLE:return Dt.Double;case tt.STRING:return Dt.String;case tt.BYTES:return Dt.Bytes;case tt.DATE:return Dt.Date}throw new ft(st.ErrUnimplemented,`unimplemented value type: ${r}`)}function Pi(r){switch(r){case tt.INTEGER_CNT:return Mn.IntegerCnt;case tt.LONG_CNT:return Mn.LongCnt}throw new ft(st.ErrUnimplemented,`unimplemented value type: ${r}`)}function so(r){switch(r.type){case tt.JSON_OBJECT:return r.value?Ms(r.value):en.create(Fe(r.createdAt));case tt.JSON_ARRAY:return r.value?Kl(r.value):on.create(Fe(r.createdAt));case tt.TEXT:return hn.create(zr.create(),Fe(r.createdAt));case tt.TREE:return Wl(r.value);case tt.NULL:case tt.BOOLEAN:case tt.INTEGER:case tt.LONG:case tt.DOUBLE:case tt.STRING:case tt.BYTES:case tt.DATE:return vt.of(vt.valueFromBytes(xs(r.type),r.value),Fe(r.createdAt));case tt.INTEGER_CNT:case tt.LONG_CNT:return an.create(Pi(r.type),an.valueFromBytes(Pi(r.type),r.value),Fe(r.createdAt))}}function Ci(r){return Sn.of(Ln.of(Fe(r.createdAt),r.offset),r.relativeOffset)}function Ns(r){return Ln.of(Fe(r.createdAt),r.offset)}function Ll(r){const e=ii.create(r.value);Object.entries(r.attributes).forEach(([n,i])=>{e.setAttr(n,i.value,Fe(i.updatedAt))});const t=lr.create(Ns(r.id),e);return t.remove(Fe(r.removedAt)),t}function Vr(r){return _n.of(ci(r.parentId),ci(r.leftSiblingId))}function ci(r){return jt.of(Fe(r.createdAt),r.offset)}function Ml(r){if(!r.length)return;const e=[];return r.forEach(t=>{const n=Is(t.content);e.push(n)}),e}function Is(r){if(r.length===0)return;const e=[];for(const n of r)e.push(ql(n));const t=e[e.length-1];for(let n=e.length-2;n>=0;n--){let i;for(let h=n+1;h<e.length;h++)if(r[n].depth-1===r[h].depth){i=e[h];break}i.prepend(e[n])}return t.updateDescendantsSize(),dn.create(t,Tn).getRoot()}function Bl(r){const e=Qn.create();for(const[t,n]of Object.entries(r))e.setInternal(t,n.value,Fe(n.updatedAt),n.isRemoved);return e}function ql(r){const e=ci(r.id),t=sn.create(e,r.type),n=Object.entries(r.attributes);return t.isText?t.value=r.value:n.length&&(t.attrs=Bl(r.attributes)),r.insPrevId&&(t.insPrevID=ci(r.insPrevId)),r.insNextId&&(t.insNextID=ci(r.insNextId)),t.removedAt=Fe(r.removedAt),t}function Ps(r){if(r.body.case==="set"){const e=r.body.value;return _r.create(e.key,so(e.value),Fe(e.parentCreatedAt),Fe(e.executedAt))}else if(r.body.case==="add"){const e=r.body.value;return ri.create(Fe(e.parentCreatedAt),Fe(e.prevCreatedAt),so(e.value),Fe(e.executedAt))}else if(r.body.case==="move"){const e=r.body.value;return sr.create(Fe(e.parentCreatedAt),Fe(e.prevCreatedAt),Fe(e.createdAt),Fe(e.executedAt))}else if(r.body.case==="remove"){const e=r.body.value;return or.create(Fe(e.parentCreatedAt),Fe(e.createdAt),Fe(e.executedAt))}else if(r.body.case==="edit"){const e=r.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,h])=>{t.set(i,Fe(h))});const n=new Map;return Object.entries(e.attributes).forEach(([i,h])=>{n.set(i,h)}),oi.create(Fe(e.parentCreatedAt),Ci(e.from),Ci(e.to),t,e.content,n,Fe(e.executedAt))}else if(r.body.case==="style"){const e=r.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,h])=>{t.set(i,Fe(h))});const n=new Map;return Object.entries(e.attributes).forEach(([i,h])=>{n.set(i,h)}),si.create(Fe(e.parentCreatedAt),Ci(e.from),Ci(e.to),t,n,Fe(e.executedAt))}else{if(r.body.case==="select")return;if(r.body.case==="increase"){const e=r.body.value;return Jr.create(Fe(e.parentCreatedAt),so(e.value),Fe(e.executedAt))}else if(r.body.case==="treeEdit"){const e=r.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([n,i])=>{t.set(n,Fe(i))}),li.create(Fe(e.parentCreatedAt),Vr(e.from),Vr(e.to),Ml(e.contents),e.splitLevel,t,Fe(e.executedAt))}else if(r.body.case==="treeStyle"){const e=r.body.value,t=new Map,n=e.attributesToRemove,i=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([h,b])=>{i.set(h,Fe(b))}),(n==null?void 0:n.length)>0?tr.createTreeRemoveStyleOperation(Fe(e.parentCreatedAt),Vr(e.from),Vr(e.to),i,n,Fe(e.executedAt)):(Object.entries(e.attributes).forEach(([h,b])=>{t.set(h,b)}),tr.create(Fe(e.parentCreatedAt),Vr(e.from),Vr(e.to),i,t,Fe(e.executedAt)))}else throw new ft(st.ErrUnimplemented,"unimplemented operation")}}function jl(r){const e=[];for(const t of r){const n=Ps(t);n&&e.push(n)}return e}function Cs(r){const e=[];for(const t of r)e.push(Or.create({id:Es(t.id),operations:jl(t.operations),presenceChange:t.presenceChange?Rl(t.presenceChange):void 0,message:t.message}));return e}function Fl(r){return $r.of(Ze.fromString(r.serverSeq,!0),r.clientSeq)}function Ul(r){return xi.create(r.documentKey,Fl(r.checkpoint),r.isRemoved,Cs(r.changes),r.snapshot,Fe(r.minSyncedTicket))}function Rs(r){const e=new ei;for(const n of r.nodes){const i=ao(n.element);e.set(n.key,i,i.getPositionedAt())}const t=new en(Fe(r.createdAt),e);return t.setMovedAt(Fe(r.movedAt)),t.setRemovedAt(Fe(r.removedAt)),t}function Ds(r){const e=new ni;for(const n of r.nodes)e.insert(ao(n.element));const t=new on(Fe(r.createdAt),e);return t.setMovedAt(Fe(r.movedAt)),t.setRemovedAt(Fe(r.removedAt)),t}function $l(r){const e=vt.of(vt.valueFromBytes(xs(r.type),r.value),Fe(r.createdAt));return e.setMovedAt(Fe(r.movedAt)),e.setRemovedAt(Fe(r.removedAt)),e}function zl(r){const e=new zr;let t=e.getHead();for(const i of r.nodes){const h=e.insertAfter(t,Ll(i));i.insPrevId&&h.setInsPrev(e.findNode(Ns(i.insPrevId))),t=h}const n=new hn(e,Fe(r.createdAt));return n.setMovedAt(Fe(r.movedAt)),n.setRemovedAt(Fe(r.removedAt)),n}function Jl(r){const e=an.create(Pi(r.type),an.valueFromBytes(Pi(r.type),r.value),Fe(r.createdAt));return e.setMovedAt(Fe(r.movedAt)),e.setRemovedAt(Fe(r.removedAt)),e}function Ls(r){const e=Is(r.nodes);return dn.create(e,Fe(r.createdAt))}function ao(r){if(r.body.case==="jsonObject")return Rs(r.body.value);if(r.body.case==="jsonArray")return Ds(r.body.value);if(r.body.case==="primitive")return $l(r.body.value);if(r.body.case==="text")return zl(r.body.value);if(r.body.case==="counter")return Jl(r.body.value);if(r.body.case==="tree")return Ls(r.body.value);throw new ft(st.ErrUnimplemented,"unimplemented element")}function Vl(r){if(!r)return{root:en.create(Tn),presences:new Map};const e=ka.fromBinary(r);return{root:ao(e.root),presences:Dl(e.presences)}}function Ms(r){if(!r)throw new Error("bytes is empty");const e=un.fromBinary(r);return Rs(e.body.value)}function Bs(r){return io(r).toBinary()}function Kl(r){if(!r)throw new Error("bytes is empty");const e=un.fromBinary(r);return Ds(e.body.value)}function Hl(r){return Ss(r).toBinary()}function Wl(r){if(!r)throw new Error("bytes is empty");const e=un.fromBinary(r);return Ls(e.body.value)}function Gl(r){return Os(r).toBinary()}function qs(r){return r?Array.from(r).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function lo(r){return qs(r)}function js(r){return new Uint8Array(r.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function uo(r){return js(r)}function Yl(r){const e=Ai.fromBinary(r);return Es(e)}function Zl(r){const e=$i.fromBinary(r);return Ps(e)}const It={fromPresence:oo,toChangePack:Cl,fromChangePack:Ul,fromChanges:Cs,objectToBytes:Bs,bytesToObject:Ms,bytesToSnapshot:Vl,bytesToHex:qs,hexToBytes:js,toHexString:lo,toUint8Array:uo,toOperation:As,toChangeID:bs,PbChangeID:Ai,bytesToChangeID:Yl,bytesToOperation:Zl};function Fs(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}class Xl{constructor(e,t,n,i){w(this,"reconnectStreamDelay"),w(this,"doc"),w(this,"docID"),w(this,"syncMode"),w(this,"remoteChangeEventReceived"),w(this,"watchStream"),w(this,"watchLoopTimerID"),w(this,"watchAbortController"),this.reconnectStreamDelay=e,this.doc=t,this.docID=n,this.syncMode=i,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===mi.RealtimeSyncOff?!1:this.syncMode===mi.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==mi.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const co=()=>{};class Ql{constructor(e){w(this,"finalized",!1),w(this,"observers",[]),w(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;e||Te.fatal("missing observer"),this.finalized&&Te.fatal("observable is finalized due to previous error"),typeof e=="object"?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=co),i.error===void 0&&(i.error=co),i.complete===void 0&&(i.complete=co);const h=Fs(),b=this.unsubscribeOne.bind(this,h);if(this.observers.push({subscriptionID:h,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(P){Te.warn(P)}return b}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(n=>n.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(n){Te.error(n)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function eu(r){const e=new Ql(r);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Kr{constructor(e,t,n,i){w(this,"id"),w(this,"delimiter"),w(this,"message"),w(this,"root"),w(this,"operations"),w(this,"presenceChange"),w(this,"previousPresence"),w(this,"reversePresenceKeys"),this.id=e,this.delimiter=Zi,this.root=t,this.operations=[],this.previousPresence=wn(n),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,n,i){return new Kr(e,t,n,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return Or.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const n of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(n):this.reversePresenceKeys.delete(n)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class fi{constructor(e){w(this,"rootObject"),w(this,"elementPairMapByCreatedAt"),w(this,"gcElementSetByCreatedAt"),w(this,"gcPairMap"),this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof hn||t instanceof dn)for(const n of t.getGCPairs())this.registerGCPair(n);return!1})}static create(){return new fi(en.create(Tn))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const n=[];for(;t.parent;){const i=t.element.getCreatedAt(),h=t.parent.subPathOf(i);h===void 0&&Te.fatal(`cant find the given element: ${i.toIDString()}`),n.unshift(h),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return n.unshift("$"),n}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof ir&&e.getDescendants((n,i)=>(this.registerElement(n,i),!1))}deregisterElement(e){let t=0;const n=i=>{const h=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(h),this.gcElementSetByCreatedAt.delete(h),t++};return n(e),e instanceof ir&&e.getDescendants(i=>(n(i),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const n=this.elementPairMapByCreatedAt.get(t);n.element instanceof ir&&n.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new fi(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const n of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(n);i.element.getRemovedAt()&&e.compare(i.element.getRemovedAt())>=0&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,n]of this.gcPairMap){const i=n.child.getRemovedAt();i!==void 0&&e.compare(i)>=0&&(n.parent.purge(n.child),this.gcPairMap.delete(n.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function Us(r,e){const t=new hi(r);return new Proxy(e,t.getHandlers())}class hi{constructor(e){w(this,"context"),w(this,"handlers"),this.context=e,this.handlers={set:(t,n,i)=>(Te.isEnabled(zt.Trivial)&&Te.trivial(`obj[${n}]=${JSON.stringify(i)}`),hi.setInternal(e,t,n,i),!0),get:(t,n)=>(Te.isEnabled(zt.Trivial)&&Te.trivial(`obj[${n}]`),n==="getID"?()=>t.getCreatedAt():n==="toJSON"||n==="toString"?()=>t.toJSON():n==="toJS"?()=>t.toJS():n==="toJSForTest"?()=>t.toJSForTest():kr(e,t.get(n))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,n)=>(Te.isEnabled(zt.Trivial)&&Te.trivial(`obj[${n}]`),hi.deleteInternal(e,t,n),!0)}}static setInternal(e,t,n,i){if(n.includes("."))throw new ft(st.ErrInvalidObjectKey,"key must not contain the '.'.");const h=e.issueTimeTicket(),b=Ri(e,i,h),P=t.set(n,b,h);e.registerElement(b,t),P&&e.registerRemovedElement(P),e.push(_r.create(n,b.deepcopy(),t.getCreatedAt(),h))}static buildObjectMembers(e,t){const n={};for(const[i,h]of Object.entries(t)){if(i.includes("."))throw new ft(st.ErrInvalidObjectKey,"key must not contain the '.'.");const b=e.issueTimeTicket(),P=Ri(e,h,b);n[i]=P}return n}static deleteInternal(e,t,n){const i=e.issueTimeTicket(),h=t.deleteByKey(n,i);!h||(e.push(or.create(t.getCreatedAt(),h.getCreatedAt(),i)),e.registerRemovedElement(h))}getHandlers(){return this.handlers}}function tu(r,e){const t=new St(r,e);return new Proxy(e,t.getHandlers())}function nu(r){return typeof r=="string"||r instanceof String?!isNaN(r):!1}function ru(r){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(r)}class St{constructor(e,t){w(this,"context"),w(this,"handlers"),w(this,"array"),this.context=e,this.array=t,this.handlers={get:(n,i,h)=>i==="getID"?()=>n.getCreatedAt():i==="getElementByID"?b=>{const P=n.getByID(b);if(!(!P||P.isRemoved()))return ur(e,P)}:i==="getElementByIndex"?b=>{const P=n.get(b);return ur(e,P)}:i==="getLast"?()=>ur(e,n.getLast()):i==="deleteByID"?b=>{const P=St.deleteInternalByID(e,n,b);return ur(e,P)}:i==="insertAfter"?(b,P)=>{const U=St.insertAfterInternal(e,n,b,P);return ur(e,U)}:i==="insertBefore"?(b,P)=>{const U=St.insertBeforeInternal(e,n,b,P);return ur(e,U)}:i==="moveBefore"?(b,P)=>{St.moveBeforeInternal(e,n,b,P)}:i==="moveAfter"?(b,P)=>{St.moveAfterInternal(e,n,b,P)}:i==="moveFront"?b=>{St.moveFrontInternal(e,n,b)}:i==="moveLast"?b=>{St.moveLastInternal(e,n,b)}:nu(i)?kr(e,n.get(Number(i))):i==="push"?b=>St.pushInternal(e,n,b):i==="splice"?(b,P,...U)=>St.splice(e,n,b,P,...U):i==="length"?n.length:typeof i=="symbol"&&i===Symbol.iterator?St.iteratorInternal.bind(this,e,n):i==="includes"?(b,P)=>St.includes(e,n,b,P):i==="indexOf"?(b,P)=>St.indexOf(e,n,b,P):i==="lastIndexOf"?(b,P)=>St.lastIndexOf(e,n,b,P):i==="toJSForTest"?()=>n.toJSForTest():i==="toTestString"?()=>St.toTestString(n):typeof i=="string"&&ru(i)?(...b)=>{const P=Array.from(n).map(U=>kr(e,U));return Array.prototype[i].apply(P,b)}:Reflect.get(n,i,h),deleteProperty:(n,i)=>(Te.isEnabled(zt.Trivial)&&Te.trivial(`array[${i}]`),St.deleteInternalByIndex(e,n,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const n of t)yield ur(e,n)}static buildArrayElements(e,t){const n=[];for(const i of t){const h=e.issueTimeTicket(),b=Ri(e,i,h);n.push(b)}return n}static pushInternal(e,t,n){return St.insertAfterInternal(e,t,t.getLastCreatedAt(),n),t.length}static moveBeforeInternal(e,t,n,i){const h=e.issueTimeTicket(),b=t.getPrevCreatedAt(n);t.moveAfter(b,i,h),e.push(sr.create(t.getCreatedAt(),b,i,h))}static moveAfterInternal(e,t,n,i){const h=e.issueTimeTicket();t.moveAfter(n,i,h),e.push(sr.create(t.getCreatedAt(),n,i,h))}static moveFrontInternal(e,t,n){const i=e.issueTimeTicket(),h=t.getHead();t.moveAfter(h.getCreatedAt(),n,i),e.push(sr.create(t.getCreatedAt(),h.getCreatedAt(),n,i))}static moveLastInternal(e,t,n){const i=e.issueTimeTicket(),h=t.getLastCreatedAt();t.moveAfter(h,n,i),e.push(sr.create(t.getCreatedAt(),h,n,i))}static insertAfterInternal(e,t,n,i){const h=e.issueTimeTicket(),b=Ri(e,i,h);return t.insertAfter(n,b),e.registerElement(b,t),e.push(ri.create(t.getCreatedAt(),n,b.deepcopy(),h)),b}static insertBeforeInternal(e,t,n,i){return St.insertAfterInternal(e,t,t.getPrevCreatedAt(n),i)}static deleteInternalByIndex(e,t,n){const i=e.issueTimeTicket(),h=t.deleteByIndex(n,i);if(!!h)return e.push(or.create(t.getCreatedAt(),h.getCreatedAt(),i)),e.registerRemovedElement(h),h}static deleteInternalByID(e,t,n){const i=e.issueTimeTicket(),h=t.delete(n,i);return e.push(or.create(t.getCreatedAt(),h.getCreatedAt(),i)),e.registerRemovedElement(h),h}static splice(e,t,n,i,...h){const b=t.length,P=n>=0?Math.min(n,b):Math.max(b+n,0),U=i===void 0?b:i<0?P:Math.min(P+i,b),K=[];for(let te=P;te<U;te++){const ve=St.deleteInternalByIndex(e,t,P);if(ve){const ye=ve.deepcopy();ye.setRemovedAt(),K.push(kr(e,ye))}}if(h){let te=P===0?t.getHead().getID():t.get(P-1).getID();for(const ve of h)te=St.insertAfterInternal(e,t,te,ve).getID()}return K}static includes(e,t,n,i){var h;const b=t.length,P=i===void 0?0:i<0?Math.max(i+b,0):i;if(P>=b)return!1;if(vt.isSupport(n))return Array.from(t).map(K=>kr(e,K)).includes(n,P);for(let U=P;U<b;U++)if(((h=t.get(U))==null?void 0:h.getID())===n.getID())return!0;return!1}static indexOf(e,t,n,i){var h;const b=t.length,P=i===void 0?0:i<0?Math.max(i+b,0):i;if(P>=b)return-1;if(vt.isSupport(n))return Array.from(t).map(K=>kr(e,K)).indexOf(n,P);for(let U=P;U<b;U++)if(((h=t.get(U))==null?void 0:h.getID())===n.getID())return U;return-1}static lastIndexOf(e,t,n,i){var h;const b=t.length,P=i===void 0||i>=b?b-1:i<0?i+b:i;if(P<0)return-1;if(vt.isSupport(n))return Array.from(t).map(K=>kr(e,K)).lastIndexOf(n,P);for(let U=P;U>0;U--)if(((h=t.get(U))==null?void 0:h.getID())===n.getID())return U;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class di{constructor(e,t){w(this,"context"),w(this,"text"),this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,n,i){if(!this.context||!this.text){Te.fatal("it is not initialized yet");return}if(e>t){Te.fatal("from should be less than or equal to to");return}const h=this.text.indexRangeToPosRange(e,t);Te.isEnabled(zt.Debug)&&Te.debug(`EDIT: f:${e}->${h[0].toTestString()}, t:${t}->${h[1].toTestString()} c:${n}`);const b=i?Fr(i):void 0,P=this.context.issueTimeTicket(),[U,,K,te]=this.text.edit(h,n,P,b);for(const ve of K)this.context.registerGCPair(ve);return this.context.push(new oi(this.text.getCreatedAt(),h[0],h[1],U,n,b?new Map(Object.entries(b)):new Map,P)),this.text.findIndexesFromRange(te)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,n){if(!this.context||!this.text)return Te.fatal("it is not initialized yet"),!1;if(e>t)return Te.fatal("from should be less than or equal to to"),!1;const i=this.text.indexRangeToPosRange(e,t);Te.isEnabled(zt.Debug)&&Te.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(n)}`);const h=Fr(n),b=this.context.issueTimeTicket(),[P,U]=this.text.setStyle(i,h,b);for(const K of U)this.context.registerGCPair(K);return this.context.push(new si(this.text.getCreatedAt(),i[0],i[1],P,new Map(Object.entries(h)),b)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){Te.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){Te.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([Sn.fromStruct(e[0]),Sn.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){Te.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){Te.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){return!this.context||!this.text?(Te.fatal("it is not initialized yet"),""):this.text.toString()}toJSON(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text){Te.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class gi{constructor(e,t){w(this,"valueType"),w(this,"value"),w(this,"context"),w(this,"counter"),this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){Te.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),n=vt.of(e,t);if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`);return this.counter.increase(n),this.context.push(Jr.create(this.counter.getCreatedAt(),n,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function fo(r,e,t){const{type:n}=r,i=t.issueTimeTicket();if(n===er){$s(r);const{value:h}=r,b=sn.create(jt.of(i,0),n,h);e.append(b)}else{const{children:h=[]}=r;let{attributes:b}=r,P;if(typeof b=="object"&&!fs(b)){b=Fr(b),P=new Qn;for(const[K,te]of Object.entries(b))P.set(K,te,i)}const U=sn.create(jt.of(i,0),n,void 0,P);e.append(U);for(const K of h)fo(K,U,t)}}function iu(r,e){const{type:t}=e,n=r.issueTimeTicket();let i;if(e.type===er){const{value:h}=e;i=sn.create(jt.of(n,0),t,h)}else if(e){const{children:h=[]}=e;let{attributes:b}=e,P;if(typeof b=="object"&&!fs(b)){b=Fr(b),P=new Qn;for(const[U,K]of Object.entries(b))P.set(U,K,n)}i=sn.create(jt.of(r.issueTimeTicket(),0),t,void 0,P);for(const U of h)fo(U,i,r)}return i}function $s(r){if(!r.value.length)throw new Error("text node cannot have empty value");return!0}function zs(r){if(!r.length)return!0;if(r[0].type===er)for(const t of r){const{type:n}=t;if(n!==er)throw new Error("element node and text node cannot be passed together");$s(t)}else for(const t of r){const{type:n}=t;if(n===er)throw new Error("element node and text node cannot be passed together")}return!0}class pi{constructor(e){w(this,"initialRoot"),w(this,"context"),w(this,"tree"),this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return sn.create(jt.of(e.issueTimeTicket(),0),ol);const t=sn.create(jt.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const n of this.initialRoot.children)fo(n,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[n,i]=this.tree.pathToPosRange(e),h=this.context.issueTimeTicket(),b=t?Fr(t):void 0,[P]=this.tree.style([n,i],b,h);this.context.push(tr.create(this.tree.getCreatedAt(),n,i,P,b?new Map(Object.entries(b)):new Map,h))}style(e,t,n){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const i=this.tree.findPos(e),h=this.tree.findPos(t),b=this.context.issueTimeTicket(),P=n?Fr(n):void 0,[U,K]=this.tree.style([i,h],P,b);for(const te of K)this.context.registerGCPair(te);this.context.push(tr.create(this.tree.getCreatedAt(),i,h,U,P?new Map(Object.entries(P)):new Map,b))}removeStyle(e,t,n){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const i=this.tree.findPos(e),h=this.tree.findPos(t),b=this.context.issueTimeTicket(),[P,U]=this.tree.removeStyle([i,h],n,b);for(const K of U)this.context.registerGCPair(K);this.context.push(tr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,h,P,n,b))}editInternal(e,t,n,i=0){var h;if(n.length!==0&&n[0]&&(zs(n),n[0].type!==er))for(const te of n){const{children:ve=[]}=te;zs(ve)}const b=this.context.getLastTimeTicket();let P=new Array;if(((h=n[0])==null?void 0:h.type)===er){let te="";for(const ve of n){const{value:ye}=ve;te+=ye}P.push(sn.create(jt.of(this.context.issueTimeTicket(),0),er,te))}else P=n.map(te=>te&&iu(this.context,te)).filter(te=>te);const[,U,K]=this.tree.edit([e,t],P.length?P.map(te=>te==null?void 0:te.deepcopy()):void 0,i,b,()=>this.context.issueTimeTicket());for(const te of U)this.context.registerGCPair(te);return this.context.push(li.create(this.tree.getCreatedAt(),e,t,P.length?P:void 0,i,K,b)),!0}editByPath(e,t,n,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const h=this.tree.pathToPos(e),b=this.tree.pathToPos(t);return this.editInternal(h,b,n?[n]:[],i)}editBulkByPath(e,t,n,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const h=this.tree.pathToPos(e),b=this.tree.pathToPos(t);return this.editInternal(h,b,n,i)}edit(e,t,n,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const h=this.tree.findPos(e),b=this.tree.findPos(t);return this.editInternal(h,b,n?[n]:[],i)}editBulk(e,t,n,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const h=this.tree.findPos(e),b=this.tree.findPos(t);return this.editInternal(h,b,n,i)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){Te.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],n=this.tree.indexRangeToPosRange(t);return[n[0].toStruct(),n[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){Te.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){Te.fatal("it is not initialized yet");return}const t=[_n.fromStruct(e[0]),_n.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree){Te.fatal("it is not initialized yet");return}const t=[_n.fromStruct(e[0]),_n.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function Js(r,e){return Us(r,e)}function ur(r,e){if(e){if(e instanceof vt)return e;if(e instanceof en)return Us(r,e);if(e instanceof on)return tu(r,e);if(e instanceof hn)return new di(r,e);if(e instanceof an){const t=new gi(Mn.IntegerCnt,0);return t.initialize(r,e),t}else if(e instanceof dn){const t=new pi;return t.initialize(r,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function kr(r,e){const t=ur(r,e);return t instanceof vt?t.getValue():t}function Ri(r,e,t){let n;if(vt.isSupport(e))n=vt.of(e,t);else if(Array.isArray(e))n=on.create(t,St.buildArrayElements(r,e));else if(typeof e=="object")e instanceof di?(n=hn.create(zr.create(),t),e.initialize(r,n)):e instanceof gi?(n=an.create(e.getValueType(),e.getValue(),t),e.initialize(r,n)):e instanceof pi?(n=dn.create(e.buildRoot(r),t),e.initialize(r,n)):n=en.create(t,hi.buildObjectMembers(r,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return n}const Vs=50;class ou{constructor(){w(this,"undoStack",[]),w(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Vs&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Vs&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const Ks="yorkie-devtools-panel",Hs="yorkie-devtools-sdk";let Hr="disconnected";const Ws=new Map,Di=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=Di);function Li(r,e){!((e==null?void 0:e.force)||Hr!=="disconnected")||window.postMessage({source:Hs,...r},"*")}function su(r){if(!r.isEnableDevtools()||typeof window>"u"||Ws.has(r.getKey()))return;Di.set(r.getKey(),[]);const e=r.subscribe("all",t=>{t.some(n=>n.type!==Zt.StatusChanged&&n.type!==Zt.Snapshot&&n.type!==Zt.LocalChange&&n.type!==Zt.RemoteChange&&n.type!==Zt.Initialized&&n.type!==Zt.Watched&&n.type!==Zt.Unwatched&&n.type!==Zt.PresenceChanged)||(Di.get(r.getKey()).push(t),Hr==="synced"&&Li({msg:"doc::sync::partial",docKey:r.getKey(),event:t}))});Ws.set(r.getKey(),[e]),Li({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var n;if(((n=t.data)==null?void 0:n.source)!==Ks)return;switch(t.data.msg){case"devtools::connect":if(Hr!=="disconnected")break;Hr="connected",Li({msg:"doc::available",docKey:r.getKey()}),Te.info(`[YD] Devtools connected. Doc: ${r.getKey()}`);break;case"devtools::disconnect":Hr="disconnected",Te.info(`[YD] Devtools disconnected. Doc: ${r.getKey()}`);break;case"devtools::subscribe":Hr="synced",Li({msg:"doc::sync::full",docKey:r.getKey(),events:Di.get(r.getKey())}),Te.info(`[YD] Devtools subscribed. Doc: ${r.getKey()}`);break}})}var nr=(r=>(r.Detached="detached",r.Attached="attached",r.Removed="removed",r))(nr||{}),Zt=(r=>(r.StatusChanged="status-changed",r.ConnectionChanged="connection-changed",r.SyncStatusChanged="sync-status-changed",r.Snapshot="snapshot",r.LocalChange="local-change",r.RemoteChange="remote-change",r.Initialized="initialized",r.Watched="watched",r.Unwatched="unwatched",r.PresenceChanged="presence-changed",r))(Zt||{}),Mi=(r=>(r.Connected="connected",r.Disconnected="disconnected",r))(Mi||{}),Bi=(r=>(r.Synced="synced",r.SyncFailed="sync-failed",r))(Bi||{});class ho{constructor(e,t){w(this,"key"),w(this,"status"),w(this,"opts"),w(this,"changeID"),w(this,"checkpoint"),w(this,"localChanges"),w(this,"root"),w(this,"clone"),w(this,"eventStream"),w(this,"eventStreamObserver"),w(this,"onlineClients"),w(this,"presences"),w(this,"history"),w(this,"internalHistory"),w(this,"isUpdating"),this.opts=t||{},this.key=e,this.status="detached",this.root=fi.create(),this.changeID=dl,this.checkpoint=gl,this.localChanges=[],this.eventStream=eu(n=>{this.eventStreamObserver=n}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new ou,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},su(this)}update(e,t){if(this.getStatus()==="removed")throw new ft(st.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const n=this.changeID.getActorID(),i=Kr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(n)||{},t);try{const h=Js(i,this.clone.root.getObject());this.presences.has(n)||this.clone.presences.set(n,{}),this.isUpdating=!0,e(h,new Yi(i,this.clone.presences.get(n)))}catch(h){throw this.clone=void 0,Te.error(h),h}finally{this.isUpdating=!1}if(i.hasChange()){Te.isEnabled(zt.Trivial)&&Te.trivial(`trying to update a local change: ${this.toJSON()}`);const h=i.getChange(),{opInfos:b,reverseOps:P}=h.execute(this.root,this.presences,gt.Local),U=i.getReversePresence();U&&P.push({type:"presence",value:U}),this.localChanges.push(h),P.length>0&&this.internalHistory.pushUndo(P),b.length>0&&this.internalHistory.clearRedo(),this.changeID=h.getID();const K=[];b.length>0&&K.push({type:"local-change",source:gt.Local,value:{message:h.getMessage()||"",operations:b,actor:n,clientSeq:h.getID().getClientSeq(),serverSeq:h.getID().getServerSeq()},rawChange:this.isEnableDevtools()?h.toStruct():void 0}),h.hasPresenceChange()&&K.push({type:"presence-changed",source:gt.Local,value:{clientID:n,presence:this.getPresence(n)}}),this.publish(K),Te.isEnabled(zt.Trivial)&&Te.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,n,i){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const P=t;return this.eventStream.subscribe(U=>{for(const K of U)K.type!=="initialized"&&K.type!=="watched"&&K.type!=="unwatched"&&K.type!=="presence-changed"||P(K)},n,i)}if(e==="my-presence"){const P=t;return this.eventStream.subscribe(U=>{for(const K of U)K.type!=="initialized"&&K.type!=="presence-changed"||K.type==="presence-changed"&&K.value.clientID!==this.changeID.getActorID()||P(K)},n,i)}if(e==="others"){const P=t;return this.eventStream.subscribe(U=>{for(const K of U)K.type!=="watched"&&K.type!=="unwatched"&&K.type!=="presence-changed"||K.value.clientID!==this.changeID.getActorID()&&P(K)},n,i)}if(e==="connection"){const P=t;return this.eventStream.subscribe(U=>{for(const K of U)K.type==="connection-changed"&&P(K)},n,i)}if(e==="status"){const P=t;return this.eventStream.subscribe(U=>{for(const K of U)K.type==="status-changed"&&P(K)},n,i)}if(e==="sync"){const P=t;return this.eventStream.subscribe(U=>{for(const K of U)K.type==="sync-status-changed"&&P(K)},n,i)}if(e==="all"){const P=t;return this.eventStream.subscribe(P,n,i)}const h=e,b=t;return this.eventStream.subscribe(P=>{for(const U of P){if(U.type!=="local-change"&&U.type!=="remote-change")continue;const K=[];for(const te of U.value.operations)this.isSameElementOrChildOf(te.path,h)&&K.push(te);K.length&&b({...U,value:{...U.value,operations:K}})}},n,i)}if(typeof e=="function"){const h=e,b=t,P=n;return this.eventStream.subscribe(U=>{for(const K of U)K.type!=="snapshot"&&K.type!=="local-change"&&K.type!=="remote-change"||h(K)},b,P)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const n=e.split(".");return t.split(".").every((h,b)=>h===n[b])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),gt.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();e.hasSnapshot()&&this.applyChanges(this.localChanges,gt.Remote),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),Te.isEnabled(zt.Trivial)&&Te.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:wn(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return xi.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Kr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Js(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t){const{root:n,presences:i}=It.bytesToSnapshot(t);this.root=new fi(n),this.presences=i,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:gt.Remote,value:{snapshot:this.isEnableDevtools()?It.bytesToHex(t):void 0,serverSeq:e.toString()}}])}applyChanges(e,t){Te.isEnabled(zt.Debug)&&Te.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),Te.isEnabled(zt.Trivial)&&Te.trivial(e.map(n=>`${n.getID().toTestString()}	${n.toTestString()}`).join(`
`));for(const n of e)this.applyChange(n,t);Te.isEnabled(zt.Debug)&&Te.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const n=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const b=e.getPresenceChange();switch(b.type){case rr.Put:n.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:b.presence}}:{type:"watched",source:gt.Remote,value:{clientID:i,presence:b.presence}});break;case rr.Clear:n.push({type:"unwatched",source:gt.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:h}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),h.length>0){const b=this.isEnableDevtools()?e.toStruct():void 0;n.push(t===gt.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:h},rawChange:b}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:h},rawChange:b})}n.length>0&&this.publish(n)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,n=new Set;for(const i of t)i!==this.changeID.getActorID()&&n.add(i);this.setOnlineClients(n),this.publish([{type:"initialized",source:gt.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:n}=e.body.value,i=[];if(t===Ti.DOCUMENT_WATCHED)this.addOnlineClient(n),this.hasPresence(n)&&i.push({type:"watched",source:gt.Remote,value:{clientID:n,presence:this.getPresence(n)}});else if(t===Ti.DOCUMENT_UNWATCHED){const h=this.getPresence(n);this.removeOnlineClient(n),h&&i.push({type:"unwatched",source:gt.Remote,value:{clientID:n,presence:h}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Oi),this.publish([{source:e==="removed"?gt.Remote:gt.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:n}=e.value;if(!t)return;this.applySnapshot(Ze.fromString(n),It.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=Or.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:n,presence:i}of e.value)t.add(n),this.presences.set(n,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:n}=e.value;this.addOnlineClient(t),this.presences.set(t,n);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:n}=e.value;this.presences.set(t,n)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new ft(st.ErrInvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let n=this.getRoot();for(const i of t)if(n=n[i],n===void 0)return;return n}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?wn(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?wn(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?wn(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:wn(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:wn(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,n)=>t.clientID>n.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=Kr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const K of e){if(!(K instanceof An)){new Yi(t,wn(this.clone.presences.get(this.changeID.getActorID()))).set(K.value,{addToHistory:!0});continue}const te=t.issueTimeTicket();K.setExecutedAt(te),t.push(K)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,gt.UndoRedo);const{opInfos:i,reverseOps:h}=n.execute(this.root,this.presences,gt.UndoRedo),b=t.getReversePresence();if(b&&h.push({type:"presence",value:b}),h.length>0&&this.internalHistory.pushRedo(h),!n.hasPresenceChange()&&i.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const P=this.changeID.getActorID(),U=[];i.length>0&&U.push({type:"local-change",source:gt.UndoRedo,value:{message:n.getMessage()||"",operations:i,actor:P,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&U.push({type:"presence-changed",source:gt.UndoRedo,value:{clientID:P,presence:this.getPresence(P)}}),this.publish(U)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=Kr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const K of e){if(!(K instanceof An)){new Yi(t,wn(this.clone.presences.get(this.changeID.getActorID()))).set(K.value,{addToHistory:!0});continue}const te=t.issueTimeTicket();K.setExecutedAt(te),t.push(K)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,gt.UndoRedo);const{opInfos:i,reverseOps:h}=n.execute(this.root,this.presences,gt.UndoRedo),b=t.getReversePresence();if(b&&h.push({type:"presence",value:b}),h.length>0&&this.internalHistory.pushUndo(h),!n.hasPresenceChange()&&i.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const P=this.changeID.getActorID(),U=[];i.length>0&&U.push({type:"local-change",source:gt.UndoRedo,value:{message:n.getMessage()||"",operations:i,actor:P,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&U.push({type:"presence-changed",source:gt.UndoRedo,value:{clientID:P,presence:this.getPresence(P)}}),this.publish(U)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function au(r,e){return t=>async n=>(r&&n.header.set("x-api-key",r),e&&n.header.set("authorization",e),await t(n))}const Gs={name:"yorkie-js-sdk",version:"0.4.27",description:"Yorkie JS SDK",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts",files:["dist"],scripts:{build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:examples":"npm run build --workspace examples","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"npm run build"},engines:{node:">=18.0.0",npm:">=7.1.0"},repository:{type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},author:{name:"hackerwins",email:"susukang98@gmail.com"},license:"Apache-2.0",bugs:{url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},homepage:"https://github.com/yorkie-team/yorkie-js-sdk#readme",devDependencies:{"@buf/googleapis_googleapis.connectrpc_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^4.7.4","typescript-transform-paths":"^3.3.1",vite:"^4.4.9","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5"},dependencies:{"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},husky:{hooks:{"pre-commit":"npm run lint"}},workspaces:["examples/*"]};function lu(){return r=>async e=>(e.header.set("x-yorkie-user-agent",Gs.name+"/"+Gs.version),await r(e))}var mi=(r=>(r.Manual="manual",r.Realtime="realtime",r.RealtimePushOnly="realtime-pushonly",r.RealtimeSyncOff="realtime-syncoff",r))(mi||{}),Ys=(r=>(r.Deactivated="deactivated",r.Activated="activated",r))(Ys||{}),Zs=(r=>(r.SyncLoop="SyncLoop",r.WatchLoop="WatchLoop",r))(Zs||{});const qi={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class go{constructor(e,t){w(this,"id"),w(this,"key"),w(this,"status"),w(this,"attachmentMap"),w(this,"apiKey"),w(this,"conditions"),w(this,"syncLoopDuration"),w(this,"reconnectStreamDelay"),w(this,"retrySyncLoopDelay"),w(this,"rpcClient"),w(this,"taskQueue"),w(this,"processing",!1),t=t||qi,this.key=t.key?t.key:Fs(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=t.syncLoopDuration||qi.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||qi.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||qi.retrySyncLoopDelay,this.rpcClient=wi(Wa,Oa({baseUrl:e,interceptors:[au(t.apiKey,t.token),lu()]})),this.taskQueue=[]}activate(){return this.isActive()?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),Te.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw Te.error(`[AC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}deactivate(){return this.status==="deactivated"?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.deactivateInternal(),Te.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw Te.error(`[DC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}attach(e,t={}){var i;if(!this.isActive())throw new ft(st.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==nr.Detached)throw new ft(st.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((h,b)=>b.set(t.initialPresence||{}));const n=(i=t.syncMode)!=null?i:"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:It.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async h=>{const b=It.fromChangePack(h.changePack);return e.applyChangePack(b),e.getStatus()===nr.Removed||(e.applyStatus(nr.Attached),this.attachmentMap.set(e.getKey(),new Xl(this.reconnectStreamDelay,e,h.documentId,n)),n!=="manual"&&await this.runWatchLoop(e.getKey()),Te.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(h=>{throw Te.error(`[AD] c:"${this.getKey()}" err :`,h),this.handleConnectError(h),h}))}detach(e,t={}){if(!this.isActive())throw new ft(st.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new ft(st.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return e.update((i,h)=>h.clear()),this.enqueueTask(async()=>{var i;return this.rpcClient.detachDocument({clientId:this.id,documentId:n.docID,changePack:It.toChangePack(e.createChangePack()),removeIfNotAttached:(i=t.removeIfNotAttached)!=null?i:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(h=>{const b=It.fromChangePack(h.changePack);return e.applyChangePack(b),e.getStatus()!==nr.Removed&&e.applyStatus(nr.Detached),this.detachInternal(e.getKey()),Te.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(h=>{throw Te.error(`[DD] c:"${this.getKey()}" err :`,h),this.handleConnectError(h),h})})}async changeSyncMode(e,t){if(!this.isActive())throw new ft(st.ErrClientNotActivated,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new ft(st.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const i=n.syncMode;return i===t?e:(n.changeSyncMode(t),t==="manual"?(n.cancelWatchStream(),e):(t==="realtime"&&(n.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new ft(st.ErrClientNotActivated,`${this.key} is not active`);if(e){const t=this.attachmentMap.get(e.getKey());if(!t)throw new ft(st.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(t,"realtime").catch(n=>{throw Te.error(`[SY] c:"${this.getKey()}" err :`,n),this.handleConnectError(n),n}))}return this.enqueueTask(async()=>{const t=[];for(const[,n]of this.attachmentMap)t.push(this.syncInternal(n,n.syncMode));return Promise.all(t).catch(n=>{throw Te.error(`[SY] c:"${this.getKey()}" err :`,n),this.handleConnectError(n),n})})}remove(e){if(!this.isActive())throw new ft(st.ErrClientNotActivated,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new ft(st.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const n=It.toChangePack(e.createChangePack());return n.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:n},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const h=It.fromChangePack(i.changePack);e.applyChangePack(h),this.detachInternal(e.getKey()),Te.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(i=>{throw Te.error(`[RD] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}runSyncLoop(){const e=()=>{if(!this.isActive()){Te.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const t=[];for(const[,n]of this.attachmentMap)n.needRealtimeSync()&&(n.remoteChangeEventReceived=!1,t.push(this.syncInternal(n,n.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(n=>{Te.error(`[SL] c:"${this.getKey()}" sync failed:`,n),this.handleConnectError(n)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};Te.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new ft(st.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,t.runWatchLoop(n=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new ft(st.ErrClientNotActivated,`${this.key} is not active`));const i=new AbortController,h=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:Zt.ConnectionChanged,value:Mi.Connected}]),Te.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((b,P)=>{(async()=>{try{for await(const K of h)this.handleWatchDocumentsResponse(t,K),K.body.case==="initialization"&&b([h,i])}catch(K){t.doc.resetOnlineClients(),t.doc.publish([{type:Zt.Initialized,source:gt.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:Zt.ConnectionChanged,value:Mi.Disconnected}]),Te.debug(`[WD] c:"${this.getKey()}" unwatches`),this.handleConnectError(K)?n():this.conditions.WatchLoop=!1,P(K)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Ti.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}deactivateInternal(){this.status="deactivated";for(const[e,t]of this.attachmentMap)this.detachInternal(e),t.doc.applyStatus(nr.Detached)}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:n,docID:i}=e,h=n.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:It.toChangePack(h),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${n.getKey()}`}}).then(b=>{const P=It.fromChangePack(b.changePack);if(P.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return n;n.applyChangePack(P),e.doc.publish([{type:Zt.SyncStatusChanged,value:Bi.Synced}]),n.getStatus()===nr.Removed&&this.detachInternal(n.getKey());const U=n.getKey(),K=P.getChangeSize();return Te.info(`[PP] c:"${this.getKey()}" sync d:"${U}", push:${h.getChangeSize()} pull:${K} cp:${P.getCheckpoint().toTestString()}`),n}).catch(b=>{throw n.publish([{type:Zt.SyncStatusChanged,value:Bi.SyncFailed}]),Te.error(`[PP] c:"${this.getKey()}" err :`,b),b})}handleConnectError(e){return e instanceof v?e.code===k.Canceled||e.code===k.Unknown||e.code===k.ResourceExhausted||e.code===k.Unavailable?!0:((ks(e)===st.ErrClientNotActivated||ks(e)===st.ErrClientNotFound)&&this.deactivateInternal(),!1):!1}enqueueTask(e){return new Promise((t,n)=>{this.taskQueue.push(()=>e().then(t).catch(n)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{Te.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const uu=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),cu={Client:go,Document:ho,Primitive:vt,Text:di,Counter:gi,Tree:pi,LogLevel:zt,setLogLevel:Xi,IntType:Mn.IntegerCnt,LongType:Mn.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:go,Document:ho,Primitive:vt,Text:di,Counter:gi,Tree:pi,LogLevel:zt,setLogLevel:Xi,IntType:Mn.IntegerCnt,LongType:Mn.LongCnt}),z.Change=Or,z.Client=go,z.ClientCondition=Zs,z.ClientStatus=Ys,z.Counter=gi,z.Devtools=uu,z.DocEventType=Zt,z.Document=ho,z.DocumentStatus=nr,z.DocumentSyncStatus=Bi,z.EventSourceDevPanel=Ks,z.EventSourceSDK=Hs,z.LogLevel=zt,z.OpSource=gt,z.Primitive=vt,z.StreamConnectionStatus=Mi,z.SyncMode=mi,z.Text=di,z.TimeTicket=Yt,z.Tree=pi,z.converter=It,z.default=cu,z.setLogLevel=Xi,Object.defineProperties(z,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(dr,dr.exports);const po=yo(dr.exports);var ra={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(Be,fe){(function(C,O){Be.exports=O()})(typeof self<"u"?self:na,function(){return function(z){var C={};function O(w){if(C[w])return C[w].exports;var k=C[w]={i:w,l:!1,exports:{}};return z[w].call(k.exports,k,k.exports,O),k.l=!0,k.exports}return O.m=z,O.c=C,O.d=function(w,k,S){O.o(w,k)||Object.defineProperty(w,k,{configurable:!1,enumerable:!0,get:S})},O.n=function(w){var k=w&&w.__esModule?function(){return w.default}:function(){return w};return O.d(k,"a",k),k},O.o=function(w,k){return Object.prototype.hasOwnProperty.call(w,k)},O.p="",O(O.s=109)}([function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(17),k=O(18),S=O(19),v=O(45),A=O(46),y=O(47),f=O(48),a=O(49),l=O(12),d=O(32),p=O(33),g=O(31),c=O(1),s={Scope:c.Scope,create:c.create,find:c.find,query:c.query,register:c.register,Container:w.default,Format:k.default,Leaf:S.default,Embed:f.default,Scroll:v.default,Block:y.default,Inline:A.default,Text:a.default,Attributor:{Attribute:l.default,Class:d.default,Style:p.default,Store:g.default}};C.default=s},function(z,C,O){var w=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,s){c.__proto__=s}||function(c,s){for(var u in s)s.hasOwnProperty(u)&&(c[u]=s[u])};return function(c,s){g(c,s);function u(){this.constructor=c}c.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=function(g){w(c,g);function c(s){var u=this;return s="[Parchment] "+s,u=g.call(this,s)||this,u.message=s,u.name=u.constructor.name,u}return c}(Error);C.ParchmentError=k;var S={},v={},A={},y={};C.DATA_KEY="__blot";var f;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(f=C.Scope||(C.Scope={}));function a(g,c){var s=d(g);if(s==null)throw new k("Unable to create "+g+" blot");var u=s,o=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:u.create(c);return new u(o,c)}C.create=a;function l(g,c){return c===void 0&&(c=!1),g==null?null:g[C.DATA_KEY]!=null?g[C.DATA_KEY].blot:c?l(g.parentNode,c):null}C.find=l;function d(g,c){c===void 0&&(c=f.ANY);var s;if(typeof g=="string")s=y[g]||S[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)s=y.text;else if(typeof g=="number")g&f.LEVEL&f.BLOCK?s=y.block:g&f.LEVEL&f.INLINE&&(s=y.inline);else if(g instanceof HTMLElement){var u=(g.getAttribute("class")||"").split(/\s+/);for(var o in u)if(s=v[u[o]],s)break;s=s||A[g.tagName]}return s==null?null:c&f.LEVEL&s.scope&&c&f.TYPE&s.scope?s:null}C.query=d;function p(){for(var g=[],c=0;c<arguments.length;c++)g[c]=arguments[c];if(g.length>1)return g.map(function(o){return p(o)});var s=g[0];if(typeof s.blotName!="string"&&typeof s.attrName!="string")throw new k("Invalid definition");if(s.blotName==="abstract")throw new k("Cannot register abstract class");if(y[s.blotName||s.attrName]=s,typeof s.keyName=="string")S[s.keyName]=s;else if(s.className!=null&&(v[s.className]=s),s.tagName!=null){Array.isArray(s.tagName)?s.tagName=s.tagName.map(function(o){return o.toUpperCase()}):s.tagName=s.tagName.toUpperCase();var u=Array.isArray(s.tagName)?s.tagName:[s.tagName];u.forEach(function(o){(A[o]==null||s.className==null)&&(A[o]=s)})}return s}C.register=p},function(z,C,O){var w=O(51),k=O(11),S=O(3),v=O(20),A=String.fromCharCode(0),y=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};y.prototype.insert=function(f,a){var l={};return f.length===0?this:(l.insert=f,a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(l.attributes=a),this.push(l))},y.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},y.prototype.retain=function(f,a){if(f<=0)return this;var l={retain:f};return a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(l.attributes=a),this.push(l)},y.prototype.push=function(f){var a=this.ops.length,l=this.ops[a-1];if(f=S(!0,{},f),typeof l=="object"){if(typeof f.delete=="number"&&typeof l.delete=="number")return this.ops[a-1]={delete:l.delete+f.delete},this;if(typeof l.delete=="number"&&f.insert!=null&&(a-=1,l=this.ops[a-1],typeof l!="object"))return this.ops.unshift(f),this;if(k(f.attributes,l.attributes)){if(typeof f.insert=="string"&&typeof l.insert=="string")return this.ops[a-1]={insert:l.insert+f.insert},typeof f.attributes=="object"&&(this.ops[a-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof l.retain=="number")return this.ops[a-1]={retain:l.retain+f.retain},typeof f.attributes=="object"&&(this.ops[a-1].attributes=f.attributes),this}}return a===this.ops.length?this.ops.push(f):this.ops.splice(a,0,f),this},y.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},y.prototype.filter=function(f){return this.ops.filter(f)},y.prototype.forEach=function(f){this.ops.forEach(f)},y.prototype.map=function(f){return this.ops.map(f)},y.prototype.partition=function(f){var a=[],l=[];return this.forEach(function(d){var p=f(d)?a:l;p.push(d)}),[a,l]},y.prototype.reduce=function(f,a){return this.ops.reduce(f,a)},y.prototype.changeLength=function(){return this.reduce(function(f,a){return a.insert?f+v.length(a):a.delete?f-a.delete:f},0)},y.prototype.length=function(){return this.reduce(function(f,a){return f+v.length(a)},0)},y.prototype.slice=function(f,a){f=f||0,typeof a!="number"&&(a=1/0);for(var l=[],d=v.iterator(this.ops),p=0;p<a&&d.hasNext();){var g;p<f?g=d.next(f-p):(g=d.next(a-p),l.push(g)),p+=v.length(g)}return new y(l)},y.prototype.compose=function(f){var a=v.iterator(this.ops),l=v.iterator(f.ops),d=[],p=l.peek();if(p!=null&&typeof p.retain=="number"&&p.attributes==null){for(var g=p.retain;a.peekType()==="insert"&&a.peekLength()<=g;)g-=a.peekLength(),d.push(a.next());p.retain-g>0&&l.next(p.retain-g)}for(var c=new y(d);a.hasNext()||l.hasNext();)if(l.peekType()==="insert")c.push(l.next());else if(a.peekType()==="delete")c.push(a.next());else{var s=Math.min(a.peekLength(),l.peekLength()),u=a.next(s),o=l.next(s);if(typeof o.retain=="number"){var m={};typeof u.retain=="number"?m.retain=s:m.insert=u.insert;var T=v.attributes.compose(u.attributes,o.attributes,typeof u.retain=="number");if(T&&(m.attributes=T),c.push(m),!l.hasNext()&&k(c.ops[c.ops.length-1],m)){var _=new y(a.rest());return c.concat(_).chop()}}else typeof o.delete=="number"&&typeof u.retain=="number"&&c.push(o)}return c.chop()},y.prototype.concat=function(f){var a=new y(this.ops.slice());return f.ops.length>0&&(a.push(f.ops[0]),a.ops=a.ops.concat(f.ops.slice(1))),a},y.prototype.diff=function(f,a){if(this.ops===f.ops)return new y;var l=[this,f].map(function(s){return s.map(function(u){if(u.insert!=null)return typeof u.insert=="string"?u.insert:A;var o=s===f?"on":"with";throw new Error("diff() called "+o+" non-document")}).join("")}),d=new y,p=w(l[0],l[1],a),g=v.iterator(this.ops),c=v.iterator(f.ops);return p.forEach(function(s){for(var u=s[1].length;u>0;){var o=0;switch(s[0]){case w.INSERT:o=Math.min(c.peekLength(),u),d.push(c.next(o));break;case w.DELETE:o=Math.min(u,g.peekLength()),g.next(o),d.delete(o);break;case w.EQUAL:o=Math.min(g.peekLength(),c.peekLength(),u);var m=g.next(o),T=c.next(o);k(m.insert,T.insert)?d.retain(o,v.attributes.diff(m.attributes,T.attributes)):d.push(T).delete(o);break}u-=o}}),d.chop()},y.prototype.eachLine=function(f,a){a=a||`
`;for(var l=v.iterator(this.ops),d=new y,p=0;l.hasNext();){if(l.peekType()!=="insert")return;var g=l.peek(),c=v.length(g)-l.peekLength(),s=typeof g.insert=="string"?g.insert.indexOf(a,c)-c:-1;if(s<0)d.push(l.next());else if(s>0)d.push(l.next(s));else{if(f(d,l.next(1).attributes||{},p)===!1)return;p+=1,d=new y}}d.length()>0&&f(d,{},p)},y.prototype.transform=function(f,a){if(a=!!a,typeof f=="number")return this.transformPosition(f,a);for(var l=v.iterator(this.ops),d=v.iterator(f.ops),p=new y;l.hasNext()||d.hasNext();)if(l.peekType()==="insert"&&(a||d.peekType()!=="insert"))p.retain(v.length(l.next()));else if(d.peekType()==="insert")p.push(d.next());else{var g=Math.min(l.peekLength(),d.peekLength()),c=l.next(g),s=d.next(g);if(c.delete)continue;s.delete?p.push(s):p.retain(g,v.attributes.transform(c.attributes,s.attributes,a))}return p.chop()},y.prototype.transformPosition=function(f,a){a=!!a;for(var l=v.iterator(this.ops),d=0;l.hasNext()&&d<=f;){var p=l.peekLength(),g=l.peekType();if(l.next(),g==="delete"){f-=Math.min(p,f-d);continue}else g==="insert"&&(d<f||!a)&&(f+=p);d+=p}return f},z.exports=y},function(z,C){var O=Object.prototype.hasOwnProperty,w=Object.prototype.toString,k=Object.defineProperty,S=Object.getOwnPropertyDescriptor,v=function(l){return typeof Array.isArray=="function"?Array.isArray(l):w.call(l)==="[object Array]"},A=function(l){if(!l||w.call(l)!=="[object Object]")return!1;var d=O.call(l,"constructor"),p=l.constructor&&l.constructor.prototype&&O.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!d&&!p)return!1;var g;for(g in l);return typeof g>"u"||O.call(l,g)},y=function(l,d){k&&d.name==="__proto__"?k(l,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):l[d.name]=d.newValue},f=function(l,d){if(d==="__proto__")if(O.call(l,d)){if(S)return S(l,d).value}else return;return l[d]};z.exports=function a(){var l,d,p,g,c,s,u=arguments[0],o=1,m=arguments.length,T=!1;for(typeof u=="boolean"&&(T=u,u=arguments[1]||{},o=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});o<m;++o)if(l=arguments[o],l!=null)for(d in l)p=f(u,d),g=f(l,d),u!==g&&(T&&g&&(A(g)||(c=v(g)))?(c?(c=!1,s=p&&v(p)?p:[]):s=p&&A(p)?p:{},y(u,{name:d,newValue:a(T,s,g)})):typeof g<"u"&&y(u,{name:d,newValue:g}));return u}},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BlockEmbed=C.bubbleFormats=void 0;var w=function(){function E(N,R){for(var L=0;L<R.length;L++){var B=R[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(N,B.key,B)}}return function(N,R,L){return R&&E(N.prototype,R),L&&E(N,L),N}}(),k=function E(N,R,L){N===null&&(N=Function.prototype);var B=Object.getOwnPropertyDescriptor(N,R);if(B===void 0){var J=Object.getPrototypeOf(N);return J===null?void 0:E(J,R,L)}else{if("value"in B)return B.value;var Y=B.get;return Y===void 0?void 0:Y.call(L)}},S=O(3),v=u(S),A=O(2),y=u(A),f=O(0),a=u(f),l=O(16),d=u(l),p=O(6),g=u(p),c=O(7),s=u(c);function u(E){return E&&E.__esModule?E:{default:E}}function o(E,N){if(!(E instanceof N))throw new TypeError("Cannot call a class as a function")}function m(E,N){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:E}function T(E,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);E.prototype=Object.create(N&&N.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(E,N):E.__proto__=N)}var _=1,I=function(E){T(N,E);function N(){return o(this,N),m(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return w(N,[{key:"attach",value:function(){k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"attach",this).call(this),this.attributes=new a.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new y.default().insert(this.value(),(0,v.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(L,B){var J=a.default.query(L,a.default.Scope.BLOCK_ATTRIBUTE);J!=null&&this.attributes.attribute(J,B)}},{key:"formatAt",value:function(L,B,J,Y){this.format(J,Y)}},{key:"insertAt",value:function(L,B,J){if(typeof B=="string"&&B.endsWith(`
`)){var Y=a.default.create(D.blotName);this.parent.insertBefore(Y,L===0?this:this.next),Y.insertAt(0,B.slice(0,-1))}else k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,L,B,J)}}]),N}(a.default.Embed);I.scope=a.default.Scope.BLOCK_BLOT;var D=function(E){T(N,E);function N(R){o(this,N);var L=m(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,R));return L.cache={},L}return w(N,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(a.default.Leaf).reduce(function(L,B){return B.length()===0?L:L.insert(B.value(),x(B))},new y.default).insert(`
`,x(this))),this.cache.delta}},{key:"deleteAt",value:function(L,B){k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,L,B),this.cache={}}},{key:"formatAt",value:function(L,B,J,Y){B<=0||(a.default.query(J,a.default.Scope.BLOCK)?L+B===this.length()&&this.format(J,Y):k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,L,Math.min(B,this.length()-L-1),J,Y),this.cache={})}},{key:"insertAt",value:function(L,B,J){if(J!=null)return k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,L,B,J);if(B.length!==0){var Y=B.split(`
`),le=Y.shift();le.length>0&&(L<this.length()-1||this.children.tail==null?k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,Math.min(L,this.length()-1),le):this.children.tail.insertAt(this.children.tail.length(),le),this.cache={});var Z=this;Y.reduce(function(V,M){return Z=Z.split(V,!0),Z.insertAt(0,M),M.length},L+le.length)}}},{key:"insertBefore",value:function(L,B){var J=this.children.head;k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,L,B),J instanceof d.default&&J.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"length",this).call(this)+_),this.cache.length}},{key:"moveChildren",value:function(L,B){k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"moveChildren",this).call(this,L,B),this.cache={}}},{key:"optimize",value:function(L){k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,L),this.cache={}}},{key:"path",value:function(L){return k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,L,!0)}},{key:"removeChild",value:function(L){k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"removeChild",this).call(this,L),this.cache={}}},{key:"split",value:function(L){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(B&&(L===0||L>=this.length()-_)){var J=this.clone();return L===0?(this.parent.insertBefore(J,this),this):(this.parent.insertBefore(J,this.next),J)}else{var Y=k(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"split",this).call(this,L,B);return this.cache={},Y}}}]),N}(a.default.Block);D.blotName="block",D.tagName="P",D.defaultChild="break",D.allowedChildren=[g.default,a.default.Embed,s.default];function x(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(N=(0,v.default)(N,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?N:x(E.parent,N)}C.bubbleFormats=x,C.BlockEmbed=I,C.default=D},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.overload=C.expandConfig=void 0;var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},k=function(){function Z(V,M){var $=[],F=!0,X=!1,j=void 0;try{for(var q=V[Symbol.iterator](),W;!(F=(W=q.next()).done)&&($.push(W.value),!(M&&$.length===M));F=!0);}catch(ne){X=!0,j=ne}finally{try{!F&&q.return&&q.return()}finally{if(X)throw j}}return $}return function(V,M){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return Z(V,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(){function Z(V,M){for(var $=0;$<M.length;$++){var F=M[$];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(V,F.key,F)}}return function(V,M,$){return M&&Z(V.prototype,M),$&&Z(V,$),V}}();O(50);var v=O(2),A=x(v),y=O(14),f=x(y),a=O(8),l=x(a),d=O(9),p=x(d),g=O(0),c=x(g),s=O(15),u=x(s),o=O(3),m=x(o),T=O(10),_=x(T),I=O(34),D=x(I);function x(Z){return Z&&Z.__esModule?Z:{default:Z}}function E(Z,V,M){return V in Z?Object.defineProperty(Z,V,{value:M,enumerable:!0,configurable:!0,writable:!0}):Z[V]=M,Z}function N(Z,V){if(!(Z instanceof V))throw new TypeError("Cannot call a class as a function")}var R=(0,_.default)("quill"),L=function(){S(Z,null,[{key:"debug",value:function(M){M===!0&&(M="log"),_.default.level(M)}},{key:"find",value:function(M){return M.__quill||c.default.find(M)}},{key:"import",value:function(M){return this.imports[M]==null&&R.error("Cannot import "+M+". Are you sure it was registered?"),this.imports[M]}},{key:"register",value:function(M,$){var F=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof M!="string"){var j=M.attrName||M.blotName;typeof j=="string"?this.register("formats/"+j,M,$):Object.keys(M).forEach(function(q){F.register(q,M[q],$)})}else this.imports[M]!=null&&!X&&R.warn("Overwriting "+M+" with",$),this.imports[M]=$,(M.startsWith("blots/")||M.startsWith("formats/"))&&$.blotName!=="abstract"?c.default.register($):M.startsWith("modules")&&typeof $.register=="function"&&$.register()}}]);function Z(V){var M=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(N(this,Z),this.options=B(V,$),this.container=this.options.container,this.container==null)return R.error("Invalid Quill container",V);this.options.debug&&Z.debug(this.options.debug);var F=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=c.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new u.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(j){j===l.default.events.TEXT_CHANGE&&M.root.classList.toggle("ql-blank",M.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(j,q){var W=M.selection.lastRange,ne=W&&W.length===0?W.index:void 0;J.call(M,function(){return M.editor.update(null,q,ne)},j)});var X=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+F+"<p><br></p></div>");this.setContents(X),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return S(Z,[{key:"addContainer",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof M=="string"){var F=M;M=document.createElement("div"),M.classList.add(F)}return this.container.insertBefore(M,$),M}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(M,$,F){var X=this,j=Y(M,$,F),q=k(j,4);return M=q[0],$=q[1],F=q[3],J.call(this,function(){return X.editor.deleteText(M,$)},F,M,-1*$)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(M),this.container.classList.toggle("ql-disabled",!M)}},{key:"focus",value:function(){var M=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=M,this.scrollIntoView()}},{key:"format",value:function(M,$){var F=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.default.sources.API;return J.call(this,function(){var j=F.getSelection(!0),q=new A.default;if(j==null)return q;if(c.default.query(M,c.default.Scope.BLOCK))q=F.editor.formatLine(j.index,j.length,E({},M,$));else{if(j.length===0)return F.selection.format(M,$),q;q=F.editor.formatText(j.index,j.length,E({},M,$))}return F.setSelection(j,l.default.sources.SILENT),q},X)}},{key:"formatLine",value:function(M,$,F,X,j){var q=this,W=void 0,ne=Y(M,$,F,X,j),oe=k(ne,4);return M=oe[0],$=oe[1],W=oe[2],j=oe[3],J.call(this,function(){return q.editor.formatLine(M,$,W)},j,M,0)}},{key:"formatText",value:function(M,$,F,X,j){var q=this,W=void 0,ne=Y(M,$,F,X,j),oe=k(ne,4);return M=oe[0],$=oe[1],W=oe[2],j=oe[3],J.call(this,function(){return q.editor.formatText(M,$,W)},j,M,0)}},{key:"getBounds",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=void 0;typeof M=="number"?F=this.selection.getBounds(M,$):F=this.selection.getBounds(M.index,M.length);var X=this.container.getBoundingClientRect();return{bottom:F.bottom-X.top,height:F.height,left:F.left-X.left,right:F.right-X.left,top:F.top-X.top,width:F.width}}},{key:"getContents",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,F=Y(M,$),X=k(F,2);return M=X[0],$=X[1],this.editor.getContents(M,$)}},{key:"getFormat",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof M=="number"?this.editor.getFormat(M,$):this.editor.getFormat(M.index,M.length)}},{key:"getIndex",value:function(M){return M.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(M){return this.scroll.leaf(M)}},{key:"getLine",value:function(M){return this.scroll.line(M)}},{key:"getLines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof M!="number"?this.scroll.lines(M.index,M.length):this.scroll.lines(M,$)}},{key:"getModule",value:function(M){return this.theme.modules[M]}},{key:"getSelection",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return M&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,F=Y(M,$),X=k(F,2);return M=X[0],$=X[1],this.editor.getText(M,$)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(M,$,F){var X=this,j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Z.sources.API;return J.call(this,function(){return X.editor.insertEmbed(M,$,F)},j,M)}},{key:"insertText",value:function(M,$,F,X,j){var q=this,W=void 0,ne=Y(M,0,F,X,j),oe=k(ne,4);return M=oe[0],W=oe[2],j=oe[3],J.call(this,function(){return q.editor.insertText(M,$,W)},j,M,$.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(M,$,F){this.clipboard.dangerouslyPasteHTML(M,$,F)}},{key:"removeFormat",value:function(M,$,F){var X=this,j=Y(M,$,F),q=k(j,4);return M=q[0],$=q[1],F=q[3],J.call(this,function(){return X.editor.removeFormat(M,$)},F,M)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(M){var $=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API;return J.call(this,function(){M=new A.default(M);var X=$.getLength(),j=$.editor.deleteText(0,X),q=$.editor.applyDelta(M),W=q.ops[q.ops.length-1];W!=null&&typeof W.insert=="string"&&W.insert[W.insert.length-1]===`
`&&($.editor.deleteText($.getLength()-1,1),q.delete(1));var ne=j.compose(q);return ne},F)}},{key:"setSelection",value:function(M,$,F){if(M==null)this.selection.setRange(null,$||Z.sources.API);else{var X=Y(M,$,F),j=k(X,4);M=j[0],$=j[1],F=j[3],this.selection.setRange(new s.Range(M,$),F),F!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API,F=new A.default().insert(M);return this.setContents(F,$)}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l.default.sources.USER,$=this.scroll.update(M);return this.selection.update(M),$}},{key:"updateContents",value:function(M){var $=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API;return J.call(this,function(){return M=new A.default(M),$.editor.applyDelta(M,F)},F,!0)}}]),Z}();L.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},L.events=l.default.events,L.sources=l.default.sources,L.version="1.3.7",L.imports={delta:A.default,parchment:c.default,"core/module":p.default,"core/theme":D.default};function B(Z,V){if(V=(0,m.default)(!0,{container:Z,modules:{clipboard:!0,keyboard:!0,history:!0}},V),!V.theme||V.theme===L.DEFAULTS.theme)V.theme=D.default;else if(V.theme=L.import("themes/"+V.theme),V.theme==null)throw new Error("Invalid theme "+V.theme+". Did you register it?");var M=(0,m.default)(!0,{},V.theme.DEFAULTS);[M,V].forEach(function(X){X.modules=X.modules||{},Object.keys(X.modules).forEach(function(j){X.modules[j]===!0&&(X.modules[j]={})})});var $=Object.keys(M.modules).concat(Object.keys(V.modules)),F=$.reduce(function(X,j){var q=L.import("modules/"+j);return q==null?R.error("Cannot load "+j+" module. Are you sure you registered it?"):X[j]=q.DEFAULTS||{},X},{});return V.modules!=null&&V.modules.toolbar&&V.modules.toolbar.constructor!==Object&&(V.modules.toolbar={container:V.modules.toolbar}),V=(0,m.default)(!0,{},L.DEFAULTS,{modules:F},M,V),["bounds","container","scrollingContainer"].forEach(function(X){typeof V[X]=="string"&&(V[X]=document.querySelector(V[X]))}),V.modules=Object.keys(V.modules).reduce(function(X,j){return V.modules[j]&&(X[j]=V.modules[j]),X},{}),V}function J(Z,V,M,$){if(this.options.strict&&!this.isEnabled()&&V===l.default.sources.USER)return new A.default;var F=M==null?null:this.getSelection(),X=this.editor.delta,j=Z();if(F!=null&&(M===!0&&(M=F.index),$==null?F=le(F,j,V):$!==0&&(F=le(F,M,$,V)),this.setSelection(F,l.default.sources.SILENT)),j.length()>0){var q,W=[l.default.events.TEXT_CHANGE,j,X,V];if((q=this.emitter).emit.apply(q,[l.default.events.EDITOR_CHANGE].concat(W)),V!==l.default.sources.SILENT){var ne;(ne=this.emitter).emit.apply(ne,W)}}return j}function Y(Z,V,M,$,F){var X={};return typeof Z.index=="number"&&typeof Z.length=="number"?typeof V!="number"?(F=$,$=M,M=V,V=Z.length,Z=Z.index):(V=Z.length,Z=Z.index):typeof V!="number"&&(F=$,$=M,M=V,V=0),(typeof M>"u"?"undefined":w(M))==="object"?(X=M,F=$):typeof M=="string"&&($!=null?X[M]=$:F=M),F=F||l.default.sources.API,[Z,V,X,F]}function le(Z,V,M,$){if(Z==null)return null;var F=void 0,X=void 0;if(V instanceof A.default){var j=[Z.index,Z.index+Z.length].map(function(oe){return V.transformPosition(oe,$!==l.default.sources.USER)}),q=k(j,2);F=q[0],X=q[1]}else{var W=[Z.index,Z.index+Z.length].map(function(oe){return oe<V||oe===V&&$===l.default.sources.USER?oe:M>=0?oe+M:Math.max(V,oe+M)}),ne=k(W,2);F=ne[0],X=ne[1]}return new s.Range(F,X-F)}C.expandConfig=B,C.overload=Y,C.default=L},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function g(c,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}return function(c,s,u){return s&&g(c.prototype,s),u&&g(c,u),c}}(),k=function g(c,s,u){c===null&&(c=Function.prototype);var o=Object.getOwnPropertyDescriptor(c,s);if(o===void 0){var m=Object.getPrototypeOf(c);return m===null?void 0:g(m,s,u)}else{if("value"in o)return o.value;var T=o.get;return T===void 0?void 0:T.call(u)}},S=O(7),v=f(S),A=O(0),y=f(A);function f(g){return g&&g.__esModule?g:{default:g}}function a(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}function l(g,c){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:g}function d(g,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);g.prototype=Object.create(c&&c.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(g,c):g.__proto__=c)}var p=function(g){d(c,g);function c(){return a(this,c),l(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return w(c,[{key:"formatAt",value:function(u,o,m,T){if(c.compare(this.statics.blotName,m)<0&&y.default.query(m,y.default.Scope.BLOT)){var _=this.isolate(u,o);T&&_.wrap(m,T)}else k(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"formatAt",this).call(this,u,o,m,T)}},{key:"optimize",value:function(u){if(k(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"optimize",this).call(this,u),this.parent instanceof c&&c.compare(this.statics.blotName,this.parent.statics.blotName)>0){var o=this.parent.isolate(this.offset(),this.length());this.moveChildren(o),o.wrap(this)}}}],[{key:"compare",value:function(u,o){var m=c.order.indexOf(u),T=c.order.indexOf(o);return m>=0||T>=0?m-T:u===o?0:u<o?-1:1}}]),c}(y.default.Inline);p.allowedChildren=[p,y.default.Embed,v.default],p.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],C.default=p},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(0),k=S(w);function S(a){return a&&a.__esModule?a:{default:a}}function v(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}function A(a,l){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:a}function y(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(a,l):a.__proto__=l)}var f=function(a){y(l,a);function l(){return v(this,l),A(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(k.default.Text);C.default=f},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function s(u,o){for(var m=0;m<o.length;m++){var T=o[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(u,T.key,T)}}return function(u,o,m){return o&&s(u.prototype,o),m&&s(u,m),u}}(),k=function s(u,o,m){u===null&&(u=Function.prototype);var T=Object.getOwnPropertyDescriptor(u,o);if(T===void 0){var _=Object.getPrototypeOf(u);return _===null?void 0:s(_,o,m)}else{if("value"in T)return T.value;var I=T.get;return I===void 0?void 0:I.call(m)}},S=O(54),v=f(S),A=O(10),y=f(A);function f(s){return s&&s.__esModule?s:{default:s}}function a(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}function l(s,u){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:s}function d(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(s,u):s.__proto__=u)}var p=(0,y.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(s){document.addEventListener(s,function(){for(var u=arguments.length,o=Array(u),m=0;m<u;m++)o[m]=arguments[m];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(T){if(T.__quill&&T.__quill.emitter){var _;(_=T.__quill.emitter).handleDOM.apply(_,o)}})})});var c=function(s){d(u,s);function u(){a(this,u);var o=l(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return o.listeners={},o.on("error",p.error),o}return w(u,[{key:"emit",value:function(){p.log.apply(p,arguments),k(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(m){for(var T=arguments.length,_=Array(T>1?T-1:0),I=1;I<T;I++)_[I-1]=arguments[I];(this.listeners[m.type]||[]).forEach(function(D){var x=D.node,E=D.handler;(m.target===x||x.contains(m.target))&&E.apply(void 0,[m].concat(_))})}},{key:"listenDOM",value:function(m,T,_){this.listeners[m]||(this.listeners[m]=[]),this.listeners[m].push({node:T,handler:_})}}]),u}(v.default);c.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},c.sources={API:"api",SILENT:"silent",USER:"user"},C.default=c},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});function w(S,v){if(!(S instanceof v))throw new TypeError("Cannot call a class as a function")}var k=function S(v){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};w(this,S),this.quill=v,this.options=A};k.DEFAULTS={},C.default=k},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=["error","warn","log","info"],k="warn";function S(A){if(w.indexOf(A)<=w.indexOf(k)){for(var y,f=arguments.length,a=Array(f>1?f-1:0),l=1;l<f;l++)a[l-1]=arguments[l];(y=console)[A].apply(y,a)}}function v(A){return w.reduce(function(y,f){return y[f]=S.bind(console,f,A),y},{})}S.level=v.level=function(A){k=A},C.default=v},function(z,C,O){var w=Array.prototype.slice,k=O(52),S=O(53),v=z.exports=function(a,l,d){return d||(d={}),a===l?!0:a instanceof Date&&l instanceof Date?a.getTime()===l.getTime():!a||!l||typeof a!="object"&&typeof l!="object"?d.strict?a===l:a==l:f(a,l,d)};function A(a){return a==null}function y(a){return!(!a||typeof a!="object"||typeof a.length!="number"||typeof a.copy!="function"||typeof a.slice!="function"||a.length>0&&typeof a[0]!="number")}function f(a,l,d){var p,g;if(A(a)||A(l)||a.prototype!==l.prototype)return!1;if(S(a))return S(l)?(a=w.call(a),l=w.call(l),v(a,l,d)):!1;if(y(a)){if(!y(l)||a.length!==l.length)return!1;for(p=0;p<a.length;p++)if(a[p]!==l[p])return!1;return!0}try{var c=k(a),s=k(l)}catch{return!1}if(c.length!=s.length)return!1;for(c.sort(),s.sort(),p=c.length-1;p>=0;p--)if(c[p]!=s[p])return!1;for(p=c.length-1;p>=0;p--)if(g=c[p],!v(a[g],l[g],d))return!1;return typeof a==typeof l}},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(1),k=function(){function S(v,A,y){y===void 0&&(y={}),this.attrName=v,this.keyName=A;var f=w.Scope.TYPE&w.Scope.ATTRIBUTE;y.scope!=null?this.scope=y.scope&w.Scope.LEVEL|f:this.scope=w.Scope.ATTRIBUTE,y.whitelist!=null&&(this.whitelist=y.whitelist)}return S.keys=function(v){return[].map.call(v.attributes,function(A){return A.name})},S.prototype.add=function(v,A){return this.canAdd(v,A)?(v.setAttribute(this.keyName,A),!0):!1},S.prototype.canAdd=function(v,A){var y=w.query(v,w.Scope.BLOT&(this.scope|w.Scope.TYPE));return y==null?!1:this.whitelist==null?!0:typeof A=="string"?this.whitelist.indexOf(A.replace(/["']/g,""))>-1:this.whitelist.indexOf(A)>-1},S.prototype.remove=function(v){v.removeAttribute(this.keyName)},S.prototype.value=function(v){var A=v.getAttribute(this.keyName);return this.canAdd(v,A)&&A?A:""},S}();C.default=k},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.Code=void 0;var w=function(){function I(D,x){var E=[],N=!0,R=!1,L=void 0;try{for(var B=D[Symbol.iterator](),J;!(N=(J=B.next()).done)&&(E.push(J.value),!(x&&E.length===x));N=!0);}catch(Y){R=!0,L=Y}finally{try{!N&&B.return&&B.return()}finally{if(R)throw L}}return E}return function(D,x){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return I(D,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(){function I(D,x){for(var E=0;E<x.length;E++){var N=x[E];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(D,N.key,N)}}return function(D,x,E){return x&&I(D.prototype,x),E&&I(D,E),D}}(),S=function I(D,x,E){D===null&&(D=Function.prototype);var N=Object.getOwnPropertyDescriptor(D,x);if(N===void 0){var R=Object.getPrototypeOf(D);return R===null?void 0:I(R,x,E)}else{if("value"in N)return N.value;var L=N.get;return L===void 0?void 0:L.call(E)}},v=O(2),A=s(v),y=O(0),f=s(y),a=O(4),l=s(a),d=O(6),p=s(d),g=O(7),c=s(g);function s(I){return I&&I.__esModule?I:{default:I}}function u(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}function o(I,D){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:I}function m(I,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);I.prototype=Object.create(D&&D.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(I,D):I.__proto__=D)}var T=function(I){m(D,I);function D(){return u(this,D),o(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return D}(p.default);T.blotName="code",T.tagName="CODE";var _=function(I){m(D,I);function D(){return u(this,D),o(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return k(D,[{key:"delta",value:function(){var E=this,N=this.domNode.textContent;return N.endsWith(`
`)&&(N=N.slice(0,-1)),N.split(`
`).reduce(function(R,L){return R.insert(L).insert(`
`,E.formats())},new A.default)}},{key:"format",value:function(E,N){if(!(E===this.statics.blotName&&N)){var R=this.descendant(c.default,this.length()-1),L=w(R,1),B=L[0];B!=null&&B.deleteAt(B.length()-1,1),S(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"format",this).call(this,E,N)}}},{key:"formatAt",value:function(E,N,R,L){if(N!==0&&!(f.default.query(R,f.default.Scope.BLOCK)==null||R===this.statics.blotName&&L===this.statics.formats(this.domNode))){var B=this.newlineIndex(E);if(!(B<0||B>=E+N)){var J=this.newlineIndex(E,!0)+1,Y=B-J+1,le=this.isolate(J,Y),Z=le.next;le.format(R,L),Z instanceof D&&Z.formatAt(0,E-J+N-Y,R,L)}}}},{key:"insertAt",value:function(E,N,R){if(R==null){var L=this.descendant(c.default,E),B=w(L,2),J=B[0],Y=B[1];J.insertAt(Y,N)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var R=this.domNode.textContent.slice(E).indexOf(`
`);return R>-1?E+R:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),S(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,E);var N=this.next;N!=null&&N.prev===this&&N.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===N.statics.formats(N.domNode)&&(N.optimize(E),N.moveChildren(this),N.remove())}},{key:"replace",value:function(E){S(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(N){var R=f.default.find(N);R==null?N.parentNode.removeChild(N):R instanceof f.default.Embed?R.remove():R.unwrap()})}}],[{key:"create",value:function(E){var N=S(D.__proto__||Object.getPrototypeOf(D),"create",this).call(this,E);return N.setAttribute("spellcheck",!1),N}},{key:"formats",value:function(){return!0}}]),D}(l.default);_.blotName="code-block",_.tagName="PRE",_.TAB="  ",C.Code=T,C.default=_},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},k=function(){function Z(V,M){var $=[],F=!0,X=!1,j=void 0;try{for(var q=V[Symbol.iterator](),W;!(F=(W=q.next()).done)&&($.push(W.value),!(M&&$.length===M));F=!0);}catch(ne){X=!0,j=ne}finally{try{!F&&q.return&&q.return()}finally{if(X)throw j}}return $}return function(V,M){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return Z(V,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(){function Z(V,M){for(var $=0;$<M.length;$++){var F=M[$];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(V,F.key,F)}}return function(V,M,$){return M&&Z(V.prototype,M),$&&Z(V,$),V}}(),v=O(2),A=N(v),y=O(20),f=N(y),a=O(0),l=N(a),d=O(13),p=N(d),g=O(24),c=N(g),s=O(4),u=N(s),o=O(16),m=N(o),T=O(21),_=N(T),I=O(11),D=N(I),x=O(3),E=N(x);function N(Z){return Z&&Z.__esModule?Z:{default:Z}}function R(Z,V,M){return V in Z?Object.defineProperty(Z,V,{value:M,enumerable:!0,configurable:!0,writable:!0}):Z[V]=M,Z}function L(Z,V){if(!(Z instanceof V))throw new TypeError("Cannot call a class as a function")}var B=/^[ -~]*$/,J=function(){function Z(V){L(this,Z),this.scroll=V,this.delta=this.getDelta()}return S(Z,[{key:"applyDelta",value:function(M){var $=this,F=!1;this.scroll.update();var X=this.scroll.length();return this.scroll.batchStart(),M=le(M),M.reduce(function(j,q){var W=q.retain||q.delete||q.insert.length||1,ne=q.attributes||{};if(q.insert!=null){if(typeof q.insert=="string"){var oe=q.insert;oe.endsWith(`
`)&&F&&(F=!1,oe=oe.slice(0,-1)),j>=X&&!oe.endsWith(`
`)&&(F=!0),$.scroll.insertAt(j,oe);var ue=$.scroll.line(j),we=k(ue,2),Ie=we[0],Ee=we[1],xe=(0,E.default)({},(0,s.bubbleFormats)(Ie));if(Ie instanceof u.default){var G=Ie.descendant(l.default.Leaf,Ee),ae=k(G,1),ie=ae[0];xe=(0,E.default)(xe,(0,s.bubbleFormats)(ie))}ne=f.default.attributes.diff(xe,ne)||{}}else if(w(q.insert)==="object"){var H=Object.keys(q.insert)[0];if(H==null)return j;$.scroll.insertAt(j,H,q.insert[H])}X+=W}return Object.keys(ne).forEach(function(re){$.scroll.formatAt(j,W,re,ne[re])}),j+W},0),M.reduce(function(j,q){return typeof q.delete=="number"?($.scroll.deleteAt(j,q.delete),j):j+(q.retain||q.insert.length||1)},0),this.scroll.batchEnd(),this.update(M)}},{key:"deleteText",value:function(M,$){return this.scroll.deleteAt(M,$),this.update(new A.default().retain(M).delete($))}},{key:"formatLine",value:function(M,$){var F=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(X).forEach(function(j){if(!(F.scroll.whitelist!=null&&!F.scroll.whitelist[j])){var q=F.scroll.lines(M,Math.max($,1)),W=$;q.forEach(function(ne){var oe=ne.length();if(!(ne instanceof p.default))ne.format(j,X[j]);else{var ue=M-ne.offset(F.scroll),we=ne.newlineIndex(ue+W)-ue+1;ne.formatAt(ue,we,j,X[j])}W-=oe})}}),this.scroll.optimize(),this.update(new A.default().retain(M).retain($,(0,_.default)(X)))}},{key:"formatText",value:function(M,$){var F=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(X).forEach(function(j){F.scroll.formatAt(M,$,j,X[j])}),this.update(new A.default().retain(M).retain($,(0,_.default)(X)))}},{key:"getContents",value:function(M,$){return this.delta.slice(M,M+$)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(M,$){return M.concat($.delta())},new A.default)}},{key:"getFormat",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=[],X=[];$===0?this.scroll.path(M).forEach(function(q){var W=k(q,1),ne=W[0];ne instanceof u.default?F.push(ne):ne instanceof l.default.Leaf&&X.push(ne)}):(F=this.scroll.lines(M,$),X=this.scroll.descendants(l.default.Leaf,M,$));var j=[F,X].map(function(q){if(q.length===0)return{};for(var W=(0,s.bubbleFormats)(q.shift());Object.keys(W).length>0;){var ne=q.shift();if(ne==null)return W;W=Y((0,s.bubbleFormats)(ne),W)}return W});return E.default.apply(E.default,j)}},{key:"getText",value:function(M,$){return this.getContents(M,$).filter(function(F){return typeof F.insert=="string"}).map(function(F){return F.insert}).join("")}},{key:"insertEmbed",value:function(M,$,F){return this.scroll.insertAt(M,$,F),this.update(new A.default().retain(M).insert(R({},$,F)))}},{key:"insertText",value:function(M,$){var F=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $=$.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(M,$),Object.keys(X).forEach(function(j){F.scroll.formatAt(M,$.length,j,X[j])}),this.update(new A.default().retain(M).insert($,(0,_.default)(X)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var M=this.scroll.children.head;return M.statics.blotName!==u.default.blotName||M.children.length>1?!1:M.children.head instanceof m.default}},{key:"removeFormat",value:function(M,$){var F=this.getText(M,$),X=this.scroll.line(M+$),j=k(X,2),q=j[0],W=j[1],ne=0,oe=new A.default;q!=null&&(q instanceof p.default?ne=q.newlineIndex(W)-W+1:ne=q.length()-W,oe=q.delta().slice(W,W+ne-1).insert(`
`));var ue=this.getContents(M,$+ne),we=ue.diff(new A.default().insert(F).concat(oe)),Ie=new A.default().retain(M).concat(we);return this.applyDelta(Ie)}},{key:"update",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,X=this.delta;if($.length===1&&$[0].type==="characterData"&&$[0].target.data.match(B)&&l.default.find($[0].target)){var j=l.default.find($[0].target),q=(0,s.bubbleFormats)(j),W=j.offset(this.scroll),ne=$[0].oldValue.replace(c.default.CONTENTS,""),oe=new A.default().insert(ne),ue=new A.default().insert(j.value()),we=new A.default().retain(W).concat(oe.diff(ue,F));M=we.reduce(function(Ie,Ee){return Ee.insert?Ie.insert(Ee.insert,q):Ie.push(Ee)},new A.default),this.delta=X.compose(M)}else this.delta=this.getDelta(),(!M||!(0,D.default)(X.compose(M),this.delta))&&(M=X.diff(this.delta,F));return M}}]),Z}();function Y(Z,V){return Object.keys(V).reduce(function(M,$){return Z[$]==null||(V[$]===Z[$]?M[$]=V[$]:Array.isArray(V[$])?V[$].indexOf(Z[$])<0&&(M[$]=V[$].concat([Z[$]])):M[$]=[V[$],Z[$]]),M},{})}function le(Z){return Z.reduce(function(V,M){if(M.insert===1){var $=(0,_.default)(M.attributes);return delete $.image,V.insert({image:M.attributes.image},$)}if(M.attributes!=null&&(M.attributes.list===!0||M.attributes.bullet===!0)&&(M=(0,_.default)(M),M.attributes.list?M.attributes.list="ordered":(M.attributes.list="bullet",delete M.attributes.bullet)),typeof M.insert=="string"){var F=M.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return V.insert(F,M.attributes)}return V.push(M)},new A.default)}C.default=J},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.Range=void 0;var w=function(){function I(D,x){var E=[],N=!0,R=!1,L=void 0;try{for(var B=D[Symbol.iterator](),J;!(N=(J=B.next()).done)&&(E.push(J.value),!(x&&E.length===x));N=!0);}catch(Y){R=!0,L=Y}finally{try{!N&&B.return&&B.return()}finally{if(R)throw L}}return E}return function(D,x){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return I(D,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(){function I(D,x){for(var E=0;E<x.length;E++){var N=x[E];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(D,N.key,N)}}return function(D,x,E){return x&&I(D.prototype,x),E&&I(D,E),D}}(),S=O(0),v=c(S),A=O(21),y=c(A),f=O(11),a=c(f),l=O(8),d=c(l),p=O(10),g=c(p);function c(I){return I&&I.__esModule?I:{default:I}}function s(I){if(Array.isArray(I)){for(var D=0,x=Array(I.length);D<I.length;D++)x[D]=I[D];return x}else return Array.from(I)}function u(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}var o=(0,g.default)("quill:selection"),m=function I(D){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;u(this,I),this.index=D,this.length=x},T=function(){function I(D,x){var E=this;u(this,I),this.emitter=x,this.scroll=D,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=v.default.create("cursor",this),this.lastRange=this.savedRange=new m(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,d.default.sources.USER),1)}),this.emitter.on(d.default.events.EDITOR_CHANGE,function(N,R){N===d.default.events.TEXT_CHANGE&&R.length()>0&&E.update(d.default.sources.SILENT)}),this.emitter.on(d.default.events.SCROLL_BEFORE_UPDATE,function(){if(!!E.hasFocus()){var N=E.getNativeRange();N!=null&&N.start.node!==E.cursor.textNode&&E.emitter.once(d.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(N.start.node,N.start.offset,N.end.node,N.end.offset)}catch{}})}}),this.emitter.on(d.default.events.SCROLL_OPTIMIZE,function(N,R){if(R.range){var L=R.range,B=L.startNode,J=L.startOffset,Y=L.endNode,le=L.endOffset;E.setNativeRange(B,J,Y,le)}}),this.update(d.default.sources.SILENT)}return k(I,[{key:"handleComposition",value:function(){var x=this;this.root.addEventListener("compositionstart",function(){x.composing=!0}),this.root.addEventListener("compositionend",function(){if(x.composing=!1,x.cursor.parent){var E=x.cursor.restore();if(!E)return;setTimeout(function(){x.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var x=this;this.emitter.listenDOM("mousedown",document.body,function(){x.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){x.mouseDown=!1,x.update(d.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(x,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[x])){this.scroll.update();var N=this.getNativeRange();if(!(N==null||!N.native.collapsed||v.default.query(x,v.default.Scope.BLOCK))){if(N.start.node!==this.cursor.textNode){var R=v.default.find(N.start.node,!1);if(R==null)return;if(R instanceof v.default.Leaf){var L=R.split(N.start.offset);R.parent.insertBefore(this.cursor,L)}else R.insertBefore(this.cursor,N.start.node);this.cursor.attach()}this.cursor.format(x,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(x){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=this.scroll.length();x=Math.min(x,N-1),E=Math.min(x+E,N-1)-x;var R=void 0,L=this.scroll.leaf(x),B=w(L,2),J=B[0],Y=B[1];if(J==null)return null;var le=J.position(Y,!0),Z=w(le,2);R=Z[0],Y=Z[1];var V=document.createRange();if(E>0){V.setStart(R,Y);var M=this.scroll.leaf(x+E),$=w(M,2);if(J=$[0],Y=$[1],J==null)return null;var F=J.position(Y,!0),X=w(F,2);return R=X[0],Y=X[1],V.setEnd(R,Y),V.getBoundingClientRect()}else{var j="left",q=void 0;return R instanceof Text?(Y<R.data.length?(V.setStart(R,Y),V.setEnd(R,Y+1)):(V.setStart(R,Y-1),V.setEnd(R,Y),j="right"),q=V.getBoundingClientRect()):(q=J.domNode.getBoundingClientRect(),Y>0&&(j="right")),{bottom:q.top+q.height,height:q.height,left:q[j],right:q[j],top:q.top,width:0}}}},{key:"getNativeRange",value:function(){var x=document.getSelection();if(x==null||x.rangeCount<=0)return null;var E=x.getRangeAt(0);if(E==null)return null;var N=this.normalizeNative(E);return o.info("getNativeRange",N),N}},{key:"getRange",value:function(){var x=this.getNativeRange();if(x==null)return[null,null];var E=this.normalizedToRange(x);return[E,x]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(x){var E=this,N=[[x.start.node,x.start.offset]];x.native.collapsed||N.push([x.end.node,x.end.offset]);var R=N.map(function(J){var Y=w(J,2),le=Y[0],Z=Y[1],V=v.default.find(le,!0),M=V.offset(E.scroll);return Z===0?M:V instanceof v.default.Container?M+V.length():M+V.index(le,Z)}),L=Math.min(Math.max.apply(Math,s(R)),this.scroll.length()-1),B=Math.min.apply(Math,[L].concat(s(R)));return new m(B,L-B)}},{key:"normalizeNative",value:function(x){if(!_(this.root,x.startContainer)||!x.collapsed&&!_(this.root,x.endContainer))return null;var E={start:{node:x.startContainer,offset:x.startOffset},end:{node:x.endContainer,offset:x.endOffset},native:x};return[E.start,E.end].forEach(function(N){for(var R=N.node,L=N.offset;!(R instanceof Text)&&R.childNodes.length>0;)if(R.childNodes.length>L)R=R.childNodes[L],L=0;else if(R.childNodes.length===L)R=R.lastChild,L=R instanceof Text?R.data.length:R.childNodes.length+1;else break;N.node=R,N.offset=L}),E}},{key:"rangeToNative",value:function(x){var E=this,N=x.collapsed?[x.index]:[x.index,x.index+x.length],R=[],L=this.scroll.length();return N.forEach(function(B,J){B=Math.min(L-1,B);var Y=void 0,le=E.scroll.leaf(B),Z=w(le,2),V=Z[0],M=Z[1],$=V.position(M,J!==0),F=w($,2);Y=F[0],M=F[1],R.push(Y,M)}),R.length<2&&(R=R.concat(R)),R}},{key:"scrollIntoView",value:function(x){var E=this.lastRange;if(E!=null){var N=this.getBounds(E.index,E.length);if(N!=null){var R=this.scroll.length()-1,L=this.scroll.line(Math.min(E.index,R)),B=w(L,1),J=B[0],Y=J;if(E.length>0){var le=this.scroll.line(Math.min(E.index+E.length,R)),Z=w(le,1);Y=Z[0]}if(!(J==null||Y==null)){var V=x.getBoundingClientRect();N.top<V.top?x.scrollTop-=V.top-N.top:N.bottom>V.bottom&&(x.scrollTop+=N.bottom-V.bottom)}}}}},{key:"setNativeRange",value:function(x,E){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(o.info("setNativeRange",x,E,N,R),!(x!=null&&(this.root.parentNode==null||x.parentNode==null||N.parentNode==null))){var B=document.getSelection();if(B!=null)if(x!=null){this.hasFocus()||this.root.focus();var J=(this.getNativeRange()||{}).native;if(J==null||L||x!==J.startContainer||E!==J.startOffset||N!==J.endContainer||R!==J.endOffset){x.tagName=="BR"&&(E=[].indexOf.call(x.parentNode.childNodes,x),x=x.parentNode),N.tagName=="BR"&&(R=[].indexOf.call(N.parentNode.childNodes,N),N=N.parentNode);var Y=document.createRange();Y.setStart(x,E),Y.setEnd(N,R),B.removeAllRanges(),B.addRange(Y)}}else B.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(x){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;if(typeof E=="string"&&(N=E,E=!1),o.info("setRange",x),x!=null){var R=this.rangeToNative(x);this.setNativeRange.apply(this,s(R).concat([E]))}else this.setNativeRange(null);this.update(N)}},{key:"update",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,E=this.lastRange,N=this.getRange(),R=w(N,2),L=R[0],B=R[1];if(this.lastRange=L,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,a.default)(E,this.lastRange)){var J;!this.composing&&B!=null&&B.native.collapsed&&B.start.node!==this.cursor.textNode&&this.cursor.restore();var Y=[d.default.events.SELECTION_CHANGE,(0,y.default)(this.lastRange),(0,y.default)(E),x];if((J=this.emitter).emit.apply(J,[d.default.events.EDITOR_CHANGE].concat(Y)),x!==d.default.sources.SILENT){var le;(le=this.emitter).emit.apply(le,Y)}}}}]),I}();function _(I,D){try{D.parentNode}catch{return!1}return D instanceof Text&&(D=D.parentNode),I.contains(D)}C.Range=m,C.default=T},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function d(p,g){for(var c=0;c<g.length;c++){var s=g[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(p,s.key,s)}}return function(p,g,c){return g&&d(p.prototype,g),c&&d(p,c),p}}(),k=function d(p,g,c){p===null&&(p=Function.prototype);var s=Object.getOwnPropertyDescriptor(p,g);if(s===void 0){var u=Object.getPrototypeOf(p);return u===null?void 0:d(u,g,c)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(c)}},S=O(0),v=A(S);function A(d){return d&&d.__esModule?d:{default:d}}function y(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function f(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function a(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var l=function(d){a(p,d);function p(){return y(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return w(p,[{key:"insertInto",value:function(c,s){c.children.length===0?k(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"insertInto",this).call(this,c,s):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),p}(v.default.Embed);l.blotName="break",l.tagName="BR",C.default=l},function(z,C,O){var w=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var d in l)l.hasOwnProperty(d)&&(a[d]=l[d])};return function(a,l){f(a,l);function d(){this.constructor=a}a.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(44),S=O(30),v=O(1),A=function(f){w(a,f);function a(l){var d=f.call(this,l)||this;return d.build(),d}return a.prototype.appendChild=function(l){this.insertBefore(l)},a.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(l){l.attach()})},a.prototype.build=function(){var l=this;this.children=new k.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(d){try{var p=y(d);l.insertBefore(p,l.children.head||void 0)}catch(g){if(g instanceof v.ParchmentError)return;throw g}})},a.prototype.deleteAt=function(l,d){if(l===0&&d===this.length())return this.remove();this.children.forEachAt(l,d,function(p,g,c){p.deleteAt(g,c)})},a.prototype.descendant=function(l,d){var p=this.children.find(d),g=p[0],c=p[1];return l.blotName==null&&l(g)||l.blotName!=null&&g instanceof l?[g,c]:g instanceof a?g.descendant(l,c):[null,-1]},a.prototype.descendants=function(l,d,p){d===void 0&&(d=0),p===void 0&&(p=Number.MAX_VALUE);var g=[],c=p;return this.children.forEachAt(d,p,function(s,u,o){(l.blotName==null&&l(s)||l.blotName!=null&&s instanceof l)&&g.push(s),s instanceof a&&(g=g.concat(s.descendants(l,u,c))),c-=o}),g},a.prototype.detach=function(){this.children.forEach(function(l){l.detach()}),f.prototype.detach.call(this)},a.prototype.formatAt=function(l,d,p,g){this.children.forEachAt(l,d,function(c,s,u){c.formatAt(s,u,p,g)})},a.prototype.insertAt=function(l,d,p){var g=this.children.find(l),c=g[0],s=g[1];if(c)c.insertAt(s,d,p);else{var u=p==null?v.create("text",d):v.create(d,p);this.appendChild(u)}},a.prototype.insertBefore=function(l,d){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(p){return l instanceof p}))throw new v.ParchmentError("Cannot insert "+l.statics.blotName+" into "+this.statics.blotName);l.insertInto(this,d)},a.prototype.length=function(){return this.children.reduce(function(l,d){return l+d.length()},0)},a.prototype.moveChildren=function(l,d){this.children.forEach(function(p){l.insertBefore(p,d)})},a.prototype.optimize=function(l){if(f.prototype.optimize.call(this,l),this.children.length===0)if(this.statics.defaultChild!=null){var d=v.create(this.statics.defaultChild);this.appendChild(d),d.optimize(l)}else this.remove()},a.prototype.path=function(l,d){d===void 0&&(d=!1);var p=this.children.find(l,d),g=p[0],c=p[1],s=[[this,l]];return g instanceof a?s.concat(g.path(c,d)):(g!=null&&s.push([g,c]),s)},a.prototype.removeChild=function(l){this.children.remove(l)},a.prototype.replace=function(l){l instanceof a&&l.moveChildren(this),f.prototype.replace.call(this,l)},a.prototype.split=function(l,d){if(d===void 0&&(d=!1),!d){if(l===0)return this;if(l===this.length())return this.next}var p=this.clone();return this.parent.insertBefore(p,this.next),this.children.forEachAt(l,this.length(),function(g,c,s){g=g.split(c,d),p.appendChild(g)}),p},a.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},a.prototype.update=function(l,d){var p=this,g=[],c=[];l.forEach(function(s){s.target===p.domNode&&s.type==="childList"&&(g.push.apply(g,s.addedNodes),c.push.apply(c,s.removedNodes))}),c.forEach(function(s){if(!(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var u=v.find(s);u!=null&&(u.domNode.parentNode==null||u.domNode.parentNode===p.domNode)&&u.detach()}}),g.filter(function(s){return s.parentNode==p.domNode}).sort(function(s,u){return s===u?0:s.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(s){var u=null;s.nextSibling!=null&&(u=v.find(s.nextSibling));var o=y(s);(o.next!=u||o.next==null)&&(o.parent!=null&&o.parent.removeChild(p),p.insertBefore(o,u||void 0))})},a}(S.default);function y(f){var a=v.find(f);if(a==null)try{a=v.create(f)}catch{a=v.create(v.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(d){a.domNode.appendChild(d)}),f.parentNode&&f.parentNode.replaceChild(a.domNode,f),a.attach()}return a}C.default=A},function(z,C,O){var w=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var d in l)l.hasOwnProperty(d)&&(a[d]=l[d])};return function(a,l){f(a,l);function d(){this.constructor=a}a.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(12),S=O(31),v=O(17),A=O(1),y=function(f){w(a,f);function a(l){var d=f.call(this,l)||this;return d.attributes=new S.default(d.domNode),d}return a.formats=function(l){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return l.tagName.toLowerCase()},a.prototype.format=function(l,d){var p=A.query(l);p instanceof k.default?this.attributes.attribute(p,d):d&&p!=null&&(l!==this.statics.blotName||this.formats()[l]!==d)&&this.replaceWith(l,d)},a.prototype.formats=function(){var l=this.attributes.values(),d=this.statics.formats(this.domNode);return d!=null&&(l[this.statics.blotName]=d),l},a.prototype.replaceWith=function(l,d){var p=f.prototype.replaceWith.call(this,l,d);return this.attributes.copy(p),p},a.prototype.update=function(l,d){var p=this;f.prototype.update.call(this,l,d),l.some(function(g){return g.target===p.domNode&&g.type==="attributes"})&&this.attributes.build()},a.prototype.wrap=function(l,d){var p=f.prototype.wrap.call(this,l,d);return p instanceof a&&p.statics.scope===this.statics.scope&&this.attributes.move(p),p},a}(v.default);C.default=y},function(z,C,O){var w=this&&this.__extends||function(){var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var a in f)f.hasOwnProperty(a)&&(y[a]=f[a])};return function(y,f){A(y,f);function a(){this.constructor=y}y.prototype=f===null?Object.create(f):(a.prototype=f.prototype,new a)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(30),S=O(1),v=function(A){w(y,A);function y(){return A!==null&&A.apply(this,arguments)||this}return y.value=function(f){return!0},y.prototype.index=function(f,a){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(a,1):-1},y.prototype.position=function(f,a){var l=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(l+=1),[this.parent.domNode,l]},y.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},y.scope=S.Scope.INLINE_BLOT,y}(k.default);C.default=v},function(z,C,O){var w=O(11),k=O(3),S={attributes:{compose:function(A,y,f){typeof A!="object"&&(A={}),typeof y!="object"&&(y={});var a=k(!0,{},y);f||(a=Object.keys(a).reduce(function(d,p){return a[p]!=null&&(d[p]=a[p]),d},{}));for(var l in A)A[l]!==void 0&&y[l]===void 0&&(a[l]=A[l]);return Object.keys(a).length>0?a:void 0},diff:function(A,y){typeof A!="object"&&(A={}),typeof y!="object"&&(y={});var f=Object.keys(A).concat(Object.keys(y)).reduce(function(a,l){return w(A[l],y[l])||(a[l]=y[l]===void 0?null:y[l]),a},{});return Object.keys(f).length>0?f:void 0},transform:function(A,y,f){if(typeof A!="object")return y;if(typeof y=="object"){if(!f)return y;var a=Object.keys(y).reduce(function(l,d){return A[d]===void 0&&(l[d]=y[d]),l},{});return Object.keys(a).length>0?a:void 0}}},iterator:function(A){return new v(A)},length:function(A){return typeof A.delete=="number"?A.delete:typeof A.retain=="number"?A.retain:typeof A.insert=="string"?A.insert.length:1}};function v(A){this.ops=A,this.index=0,this.offset=0}v.prototype.hasNext=function(){return this.peekLength()<1/0},v.prototype.next=function(A){A||(A=1/0);var y=this.ops[this.index];if(y){var f=this.offset,a=S.length(y);if(A>=a-f?(A=a-f,this.index+=1,this.offset=0):this.offset+=A,typeof y.delete=="number")return{delete:A};var l={};return y.attributes&&(l.attributes=y.attributes),typeof y.retain=="number"?l.retain=A:typeof y.insert=="string"?l.insert=y.insert.substr(f,A):l.insert=y.insert,l}else return{retain:1/0}},v.prototype.peek=function(){return this.ops[this.index]},v.prototype.peekLength=function(){return this.ops[this.index]?S.length(this.ops[this.index])-this.offset:1/0},v.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},v.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var A=this.offset,y=this.index,f=this.next(),a=this.ops.slice(this.index);return this.offset=A,this.index=y,[f].concat(a)}else return[]},z.exports=S},function(z,C){var O=function(){function w(p,g){return g!=null&&p instanceof g}var k;try{k=Map}catch{k=function(){}}var S;try{S=Set}catch{S=function(){}}var v;try{v=Promise}catch{v=function(){}}function A(p,g,c,s,u){typeof g=="object"&&(c=g.depth,s=g.prototype,u=g.includeNonEnumerable,g=g.circular);var o=[],m=[],T=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof c>"u"&&(c=1/0);function _(I,D){if(I===null)return null;if(D===0)return I;var x,E;if(typeof I!="object")return I;if(w(I,k))x=new k;else if(w(I,S))x=new S;else if(w(I,v))x=new v(function(V,M){I.then(function($){V(_($,D-1))},function($){M(_($,D-1))})});else if(A.__isArray(I))x=[];else if(A.__isRegExp(I))x=new RegExp(I.source,d(I)),I.lastIndex&&(x.lastIndex=I.lastIndex);else if(A.__isDate(I))x=new Date(I.getTime());else{if(T&&Buffer.isBuffer(I))return Buffer.allocUnsafe?x=Buffer.allocUnsafe(I.length):x=new Buffer(I.length),I.copy(x),x;w(I,Error)?x=Object.create(I):typeof s>"u"?(E=Object.getPrototypeOf(I),x=Object.create(E)):(x=Object.create(s),E=s)}if(g){var N=o.indexOf(I);if(N!=-1)return m[N];o.push(I),m.push(x)}w(I,k)&&I.forEach(function(V,M){var $=_(M,D-1),F=_(V,D-1);x.set($,F)}),w(I,S)&&I.forEach(function(V){var M=_(V,D-1);x.add(M)});for(var R in I){var L;E&&(L=Object.getOwnPropertyDescriptor(E,R)),!(L&&L.set==null)&&(x[R]=_(I[R],D-1))}if(Object.getOwnPropertySymbols)for(var B=Object.getOwnPropertySymbols(I),R=0;R<B.length;R++){var J=B[R],Y=Object.getOwnPropertyDescriptor(I,J);Y&&!Y.enumerable&&!u||(x[J]=_(I[J],D-1),Y.enumerable||Object.defineProperty(x,J,{enumerable:!1}))}if(u)for(var le=Object.getOwnPropertyNames(I),R=0;R<le.length;R++){var Z=le[R],Y=Object.getOwnPropertyDescriptor(I,Z);Y&&Y.enumerable||(x[Z]=_(I[Z],D-1),Object.defineProperty(x,Z,{enumerable:!1}))}return x}return _(p,c)}A.clonePrototype=function(g){if(g===null)return null;var c=function(){};return c.prototype=g,new c};function y(p){return Object.prototype.toString.call(p)}A.__objToStr=y;function f(p){return typeof p=="object"&&y(p)==="[object Date]"}A.__isDate=f;function a(p){return typeof p=="object"&&y(p)==="[object Array]"}A.__isArray=a;function l(p){return typeof p=="object"&&y(p)==="[object RegExp]"}A.__isRegExp=l;function d(p){var g="";return p.global&&(g+="g"),p.ignoreCase&&(g+="i"),p.multiline&&(g+="m"),g}return A.__getRegExpFlags=d,A}();typeof z=="object"&&z.exports&&(z.exports=O)},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function x(E,N){var R=[],L=!0,B=!1,J=void 0;try{for(var Y=E[Symbol.iterator](),le;!(L=(le=Y.next()).done)&&(R.push(le.value),!(N&&R.length===N));L=!0);}catch(Z){B=!0,J=Z}finally{try{!L&&Y.return&&Y.return()}finally{if(B)throw J}}return R}return function(E,N){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return x(E,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(){function x(E,N){for(var R=0;R<N.length;R++){var L=N[R];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,N,R){return N&&x(E.prototype,N),R&&x(E,R),E}}(),S=function x(E,N,R){E===null&&(E=Function.prototype);var L=Object.getOwnPropertyDescriptor(E,N);if(L===void 0){var B=Object.getPrototypeOf(E);return B===null?void 0:x(B,N,R)}else{if("value"in L)return L.value;var J=L.get;return J===void 0?void 0:J.call(R)}},v=O(0),A=o(v),y=O(8),f=o(y),a=O(4),l=o(a),d=O(16),p=o(d),g=O(13),c=o(g),s=O(25),u=o(s);function o(x){return x&&x.__esModule?x:{default:x}}function m(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function T(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function _(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}function I(x){return x instanceof l.default||x instanceof a.BlockEmbed}var D=function(x){_(E,x);function E(N,R){m(this,E);var L=T(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,N));return L.emitter=R.emitter,Array.isArray(R.whitelist)&&(L.whitelist=R.whitelist.reduce(function(B,J){return B[J]=!0,B},{})),L.domNode.addEventListener("DOMNodeInserted",function(){}),L.optimize(),L.enable(),L}return k(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(R,L){var B=this.line(R),J=w(B,2),Y=J[0],le=J[1],Z=this.line(R+L),V=w(Z,1),M=V[0];if(S(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,R,L),M!=null&&Y!==M&&le>0){if(Y instanceof a.BlockEmbed||M instanceof a.BlockEmbed){this.optimize();return}if(Y instanceof c.default){var $=Y.newlineIndex(Y.length(),!0);if($>-1&&(Y=Y.split($+1),Y===M)){this.optimize();return}}else if(M instanceof c.default){var F=M.newlineIndex(0);F>-1&&M.split(F+1)}var X=M.children.head instanceof p.default?null:M.children.head;Y.moveChildren(M,X),Y.remove()}this.optimize()}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",R)}},{key:"formatAt",value:function(R,L,B,J){this.whitelist!=null&&!this.whitelist[B]||(S(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,R,L,B,J),this.optimize())}},{key:"insertAt",value:function(R,L,B){if(!(B!=null&&this.whitelist!=null&&!this.whitelist[L])){if(R>=this.length())if(B==null||A.default.query(L,A.default.Scope.BLOCK)==null){var J=A.default.create(this.statics.defaultChild);this.appendChild(J),B==null&&L.endsWith(`
`)&&(L=L.slice(0,-1)),J.insertAt(0,L,B)}else{var Y=A.default.create(L,B);this.appendChild(Y)}else S(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,R,L,B);this.optimize()}}},{key:"insertBefore",value:function(R,L){if(R.statics.scope===A.default.Scope.INLINE_BLOT){var B=A.default.create(this.statics.defaultChild);B.appendChild(R),R=B}S(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,R,L)}},{key:"leaf",value:function(R){return this.path(R).pop()||[null,-1]}},{key:"line",value:function(R){return R===this.length()?this.line(R-1):this.descendant(I,R)}},{key:"lines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,B=function J(Y,le,Z){var V=[],M=Z;return Y.children.forEachAt(le,Z,function($,F,X){I($)?V.push($):$ instanceof A.default.Container&&(V=V.concat(J($,F,M))),M-=X}),V};return B(this,R,L)}},{key:"optimize",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(S(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,R,L),R.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,R,L))}},{key:"path",value:function(R){return S(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,R).slice(1)}},{key:"update",value:function(R){if(this.batch!==!0){var L=f.default.sources.USER;typeof R=="string"&&(L=R),Array.isArray(R)||(R=this.observer.takeRecords()),R.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,L,R),S(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,R.concat([])),R.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,L,R)}}}]),E}(A.default.Scroll);D.blotName="scroll",D.className="ql-editor",D.tagName="DIV",D.defaultChild="block",D.allowedChildren=[l.default,a.BlockEmbed,u.default],C.default=D},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.SHORTKEY=C.default=void 0;var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},k=function(){function q(W,ne){var oe=[],ue=!0,we=!1,Ie=void 0;try{for(var Ee=W[Symbol.iterator](),xe;!(ue=(xe=Ee.next()).done)&&(oe.push(xe.value),!(ne&&oe.length===ne));ue=!0);}catch(G){we=!0,Ie=G}finally{try{!ue&&Ee.return&&Ee.return()}finally{if(we)throw Ie}}return oe}return function(W,ne){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return q(W,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(){function q(W,ne){for(var oe=0;oe<ne.length;oe++){var ue=ne[oe];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(W,ue.key,ue)}}return function(W,ne,oe){return ne&&q(W.prototype,ne),oe&&q(W,oe),W}}(),v=O(21),A=x(v),y=O(11),f=x(y),a=O(3),l=x(a),d=O(2),p=x(d),g=O(20),c=x(g),s=O(0),u=x(s),o=O(5),m=x(o),T=O(10),_=x(T),I=O(9),D=x(I);function x(q){return q&&q.__esModule?q:{default:q}}function E(q,W,ne){return W in q?Object.defineProperty(q,W,{value:ne,enumerable:!0,configurable:!0,writable:!0}):q[W]=ne,q}function N(q,W){if(!(q instanceof W))throw new TypeError("Cannot call a class as a function")}function R(q,W){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:q}function L(q,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);q.prototype=Object.create(W&&W.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(q,W):q.__proto__=W)}var B=(0,_.default)("quill:keyboard"),J=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Y=function(q){L(W,q),S(W,null,[{key:"match",value:function(oe,ue){return ue=j(ue),["altKey","ctrlKey","metaKey","shiftKey"].some(function(we){return!!ue[we]!==oe[we]&&ue[we]!==null})?!1:ue.key===(oe.which||oe.keyCode)}}]);function W(ne,oe){N(this,W);var ue=R(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,ne,oe));return ue.bindings={},Object.keys(ue.options.bindings).forEach(function(we){we==="list autofill"&&ne.scroll.whitelist!=null&&!ne.scroll.whitelist.list||ue.options.bindings[we]&&ue.addBinding(ue.options.bindings[we])}),ue.addBinding({key:W.keys.ENTER,shiftKey:null},$),ue.addBinding({key:W.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ue.addBinding({key:W.keys.BACKSPACE},{collapsed:!0},Z),ue.addBinding({key:W.keys.DELETE},{collapsed:!0},V)):(ue.addBinding({key:W.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Z),ue.addBinding({key:W.keys.DELETE},{collapsed:!0,suffix:/^.?$/},V)),ue.addBinding({key:W.keys.BACKSPACE},{collapsed:!1},M),ue.addBinding({key:W.keys.DELETE},{collapsed:!1},M),ue.addBinding({key:W.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Z),ue.listen(),ue}return S(W,[{key:"addBinding",value:function(oe){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ie=j(oe);if(Ie==null||Ie.key==null)return B.warn("Attempted to add invalid keyboard binding",Ie);typeof ue=="function"&&(ue={handler:ue}),typeof we=="function"&&(we={handler:we}),Ie=(0,l.default)(Ie,ue,we),this.bindings[Ie.key]=this.bindings[Ie.key]||[],this.bindings[Ie.key].push(Ie)}},{key:"listen",value:function(){var oe=this;this.quill.root.addEventListener("keydown",function(ue){if(!ue.defaultPrevented){var we=ue.which||ue.keyCode,Ie=(oe.bindings[we]||[]).filter(function(be){return W.match(ue,be)});if(Ie.length!==0){var Ee=oe.quill.getSelection();if(!(Ee==null||!oe.quill.hasFocus())){var xe=oe.quill.getLine(Ee.index),G=k(xe,2),ae=G[0],ie=G[1],H=oe.quill.getLeaf(Ee.index),re=k(H,2),ge=re[0],me=re[1],ce=Ee.length===0?[ge,me]:oe.quill.getLeaf(Ee.index+Ee.length),Oe=k(ce,2),ke=Oe[0],Le=Oe[1],Ge=ge instanceof u.default.Text?ge.value().slice(0,me):"",nt=ke instanceof u.default.Text?ke.value().slice(Le):"",Ue={collapsed:Ee.length===0,empty:Ee.length===0&&ae.length()<=1,format:oe.quill.getFormat(Ee),offset:ie,prefix:Ge,suffix:nt},Ke=Ie.some(function(be){if(be.collapsed!=null&&be.collapsed!==Ue.collapsed||be.empty!=null&&be.empty!==Ue.empty||be.offset!=null&&be.offset!==Ue.offset)return!1;if(Array.isArray(be.format)){if(be.format.every(function(Xe){return Ue.format[Xe]==null}))return!1}else if(w(be.format)==="object"&&!Object.keys(be.format).every(function(Xe){return be.format[Xe]===!0?Ue.format[Xe]!=null:be.format[Xe]===!1?Ue.format[Xe]==null:(0,f.default)(be.format[Xe],Ue.format[Xe])}))return!1;return be.prefix!=null&&!be.prefix.test(Ue.prefix)||be.suffix!=null&&!be.suffix.test(Ue.suffix)?!1:be.handler.call(oe,Ee,Ue)!==!0});Ke&&ue.preventDefault()}}}})}}]),W}(D.default);Y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Y.DEFAULTS={bindings:{bold:X("bold"),italic:X("italic"),underline:X("underline"),indent:{key:Y.keys.TAB,format:["blockquote","indent","list"],handler:function(W,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","+1",m.default.sources.USER)}},outdent:{key:Y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(W,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","-1",m.default.sources.USER)}},"outdent backspace":{key:Y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(W,ne){ne.format.indent!=null?this.quill.format("indent","-1",m.default.sources.USER):ne.format.list!=null&&this.quill.format("list",!1,m.default.sources.USER)}},"indent code-block":F(!0),"outdent code-block":F(!1),"remove tab":{key:Y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(W){this.quill.deleteText(W.index-1,1,m.default.sources.USER)}},tab:{key:Y.keys.TAB,handler:function(W){this.quill.history.cutoff();var ne=new p.default().retain(W.index).delete(W.length).insert("	");this.quill.updateContents(ne,m.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(W.index+1,m.default.sources.SILENT)}},"list empty enter":{key:Y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(W,ne){this.quill.format("list",!1,m.default.sources.USER),ne.format.indent&&this.quill.format("indent",!1,m.default.sources.USER)}},"checklist enter":{key:Y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(W){var ne=this.quill.getLine(W.index),oe=k(ne,2),ue=oe[0],we=oe[1],Ie=(0,l.default)({},ue.formats(),{list:"checked"}),Ee=new p.default().retain(W.index).insert(`
`,Ie).retain(ue.length()-we-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ee,m.default.sources.USER),this.quill.setSelection(W.index+1,m.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(W,ne){var oe=this.quill.getLine(W.index),ue=k(oe,2),we=ue[0],Ie=ue[1],Ee=new p.default().retain(W.index).insert(`
`,ne.format).retain(we.length()-Ie-1).retain(1,{header:null});this.quill.updateContents(Ee,m.default.sources.USER),this.quill.setSelection(W.index+1,m.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(W,ne){var oe=ne.prefix.length,ue=this.quill.getLine(W.index),we=k(ue,2),Ie=we[0],Ee=we[1];if(Ee>oe)return!0;var xe=void 0;switch(ne.prefix.trim()){case"[]":case"[ ]":xe="unchecked";break;case"[x]":xe="checked";break;case"-":case"*":xe="bullet";break;default:xe="ordered"}this.quill.insertText(W.index," ",m.default.sources.USER),this.quill.history.cutoff();var G=new p.default().retain(W.index-Ee).delete(oe+1).retain(Ie.length()-2-Ee).retain(1,{list:xe});this.quill.updateContents(G,m.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(W.index-oe,m.default.sources.SILENT)}},"code exit":{key:Y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(W){var ne=this.quill.getLine(W.index),oe=k(ne,2),ue=oe[0],we=oe[1],Ie=new p.default().retain(W.index+ue.length()-we-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ie,m.default.sources.USER)}},"embed left":le(Y.keys.LEFT,!1),"embed left shift":le(Y.keys.LEFT,!0),"embed right":le(Y.keys.RIGHT,!1),"embed right shift":le(Y.keys.RIGHT,!0)}};function le(q,W){var ne,oe=q===Y.keys.LEFT?"prefix":"suffix";return ne={key:q,shiftKey:W,altKey:null},E(ne,oe,/^$/),E(ne,"handler",function(we){var Ie=we.index;q===Y.keys.RIGHT&&(Ie+=we.length+1);var Ee=this.quill.getLeaf(Ie),xe=k(Ee,1),G=xe[0];return G instanceof u.default.Embed?(q===Y.keys.LEFT?W?this.quill.setSelection(we.index-1,we.length+1,m.default.sources.USER):this.quill.setSelection(we.index-1,m.default.sources.USER):W?this.quill.setSelection(we.index,we.length+1,m.default.sources.USER):this.quill.setSelection(we.index+we.length+1,m.default.sources.USER),!1):!0}),ne}function Z(q,W){if(!(q.index===0||this.quill.getLength()<=1)){var ne=this.quill.getLine(q.index),oe=k(ne,1),ue=oe[0],we={};if(W.offset===0){var Ie=this.quill.getLine(q.index-1),Ee=k(Ie,1),xe=Ee[0];if(xe!=null&&xe.length()>1){var G=ue.formats(),ae=this.quill.getFormat(q.index-1,1);we=c.default.attributes.diff(G,ae)||{}}}var ie=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(W.prefix)?2:1;this.quill.deleteText(q.index-ie,ie,m.default.sources.USER),Object.keys(we).length>0&&this.quill.formatLine(q.index-ie,ie,we,m.default.sources.USER),this.quill.focus()}}function V(q,W){var ne=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(W.suffix)?2:1;if(!(q.index>=this.quill.getLength()-ne)){var oe={},ue=0,we=this.quill.getLine(q.index),Ie=k(we,1),Ee=Ie[0];if(W.offset>=Ee.length()-1){var xe=this.quill.getLine(q.index+1),G=k(xe,1),ae=G[0];if(ae){var ie=Ee.formats(),H=this.quill.getFormat(q.index,1);oe=c.default.attributes.diff(ie,H)||{},ue=ae.length()}}this.quill.deleteText(q.index,ne,m.default.sources.USER),Object.keys(oe).length>0&&this.quill.formatLine(q.index+ue-1,ne,oe,m.default.sources.USER)}}function M(q){var W=this.quill.getLines(q),ne={};if(W.length>1){var oe=W[0].formats(),ue=W[W.length-1].formats();ne=c.default.attributes.diff(ue,oe)||{}}this.quill.deleteText(q,m.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(q.index,1,ne,m.default.sources.USER),this.quill.setSelection(q.index,m.default.sources.SILENT),this.quill.focus()}function $(q,W){var ne=this;q.length>0&&this.quill.scroll.deleteAt(q.index,q.length);var oe=Object.keys(W.format).reduce(function(ue,we){return u.default.query(we,u.default.Scope.BLOCK)&&!Array.isArray(W.format[we])&&(ue[we]=W.format[we]),ue},{});this.quill.insertText(q.index,`
`,oe,m.default.sources.USER),this.quill.setSelection(q.index+1,m.default.sources.SILENT),this.quill.focus(),Object.keys(W.format).forEach(function(ue){oe[ue]==null&&(Array.isArray(W.format[ue])||ue!=="link"&&ne.quill.format(ue,W.format[ue],m.default.sources.USER))})}function F(q){return{key:Y.keys.TAB,shiftKey:!q,format:{"code-block":!0},handler:function(ne){var oe=u.default.query("code-block"),ue=ne.index,we=ne.length,Ie=this.quill.scroll.descendant(oe,ue),Ee=k(Ie,2),xe=Ee[0],G=Ee[1];if(xe!=null){var ae=this.quill.getIndex(xe),ie=xe.newlineIndex(G,!0)+1,H=xe.newlineIndex(ae+G+we),re=xe.domNode.textContent.slice(ie,H).split(`
`);G=0,re.forEach(function(ge,me){q?(xe.insertAt(ie+G,oe.TAB),G+=oe.TAB.length,me===0?ue+=oe.TAB.length:we+=oe.TAB.length):ge.startsWith(oe.TAB)&&(xe.deleteAt(ie+G,oe.TAB.length),G-=oe.TAB.length,me===0?ue-=oe.TAB.length:we-=oe.TAB.length),G+=ge.length+1}),this.quill.update(m.default.sources.USER),this.quill.setSelection(ue,we,m.default.sources.SILENT)}}}}function X(q){return{key:q[0].toUpperCase(),shortKey:!0,handler:function(ne,oe){this.quill.format(q,!oe.format[q],m.default.sources.USER)}}}function j(q){if(typeof q=="string"||typeof q=="number")return j({key:q});if((typeof q>"u"?"undefined":w(q))==="object"&&(q=(0,A.default)(q,!1)),typeof q.key=="string")if(Y.keys[q.key.toUpperCase()]!=null)q.key=Y.keys[q.key.toUpperCase()];else if(q.key.length===1)q.key=q.key.toUpperCase().charCodeAt(0);else return null;return q.shortKey&&(q[J]=q.shortKey,delete q.shortKey),q}C.default=Y,C.SHORTKEY=J},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function c(s,u){var o=[],m=!0,T=!1,_=void 0;try{for(var I=s[Symbol.iterator](),D;!(m=(D=I.next()).done)&&(o.push(D.value),!(u&&o.length===u));m=!0);}catch(x){T=!0,_=x}finally{try{!m&&I.return&&I.return()}finally{if(T)throw _}}return o}return function(s,u){if(Array.isArray(s))return s;if(Symbol.iterator in Object(s))return c(s,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function c(s,u,o){s===null&&(s=Function.prototype);var m=Object.getOwnPropertyDescriptor(s,u);if(m===void 0){var T=Object.getPrototypeOf(s);return T===null?void 0:c(T,u,o)}else{if("value"in m)return m.value;var _=m.get;return _===void 0?void 0:_.call(o)}},S=function(){function c(s,u){for(var o=0;o<u.length;o++){var m=u[o];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(s,m.key,m)}}return function(s,u,o){return u&&c(s.prototype,u),o&&c(s,o),s}}(),v=O(0),A=a(v),y=O(7),f=a(y);function a(c){return c&&c.__esModule?c:{default:c}}function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function d(c,s){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:c}function p(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(c,s):c.__proto__=s)}var g=function(c){p(s,c),S(s,null,[{key:"value",value:function(){}}]);function s(u,o){l(this,s);var m=d(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,u));return m.selection=o,m.textNode=document.createTextNode(s.CONTENTS),m.domNode.appendChild(m.textNode),m._length=0,m}return S(s,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(o,m){if(this._length!==0)return k(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"format",this).call(this,o,m);for(var T=this,_=0;T!=null&&T.statics.scope!==A.default.Scope.BLOCK_BLOT;)_+=T.offset(T.parent),T=T.parent;T!=null&&(this._length=s.CONTENTS.length,T.optimize(),T.formatAt(_,s.CONTENTS.length,o,m),this._length=0)}},{key:"index",value:function(o,m){return o===this.textNode?0:k(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"index",this).call(this,o,m)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){k(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var o=this.textNode,m=this.selection.getNativeRange(),T=void 0,_=void 0,I=void 0;if(m!=null&&m.start.node===o&&m.end.node===o){var D=[o,m.start.offset,m.end.offset];T=D[0],_=D[1],I=D[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==s.CONTENTS){var x=this.textNode.data.split(s.CONTENTS).join("");this.next instanceof f.default?(T=this.next.domNode,this.next.insertAt(0,x),this.textNode.data=s.CONTENTS):(this.textNode.data=x,this.parent.insertBefore(A.default.create(this.textNode),this),this.textNode=document.createTextNode(s.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),_!=null){var E=[_,I].map(function(R){return Math.max(0,Math.min(T.data.length,R-1))}),N=w(E,2);return _=N[0],I=N[1],{startNode:T,startOffset:_,endNode:T,endOffset:I}}}}},{key:"update",value:function(o,m){var T=this;if(o.some(function(I){return I.type==="characterData"&&I.target===T.textNode})){var _=this.restore();_&&(m.range=_)}}},{key:"value",value:function(){return""}}]),s}(A.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",C.default=g},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(0),k=A(w),S=O(4),v=A(S);function A(d){return d&&d.__esModule?d:{default:d}}function y(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function f(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function a(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var l=function(d){a(p,d);function p(){return y(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(k.default.Container);l.allowedChildren=[v.default,S.BlockEmbed,l],C.default=l},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.ColorStyle=C.ColorClass=C.ColorAttributor=void 0;var w=function(){function g(c,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}return function(c,s,u){return s&&g(c.prototype,s),u&&g(c,u),c}}(),k=function g(c,s,u){c===null&&(c=Function.prototype);var o=Object.getOwnPropertyDescriptor(c,s);if(o===void 0){var m=Object.getPrototypeOf(c);return m===null?void 0:g(m,s,u)}else{if("value"in o)return o.value;var T=o.get;return T===void 0?void 0:T.call(u)}},S=O(0),v=A(S);function A(g){return g&&g.__esModule?g:{default:g}}function y(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}function f(g,c){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:g}function a(g,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);g.prototype=Object.create(c&&c.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(g,c):g.__proto__=c)}var l=function(g){a(c,g);function c(){return y(this,c),f(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return w(c,[{key:"value",value:function(u){var o=k(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"value",this).call(this,u);return o.startsWith("rgb(")?(o=o.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+o.split(",").map(function(m){return("00"+parseInt(m).toString(16)).slice(-2)}).join("")):o}}]),c}(v.default.Attributor.Style),d=new v.default.Attributor.Class("color","ql-color",{scope:v.default.Scope.INLINE}),p=new l("color","color",{scope:v.default.Scope.INLINE});C.ColorAttributor=l,C.ColorClass=d,C.ColorStyle=p},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.sanitize=C.default=void 0;var w=function(){function p(g,c){for(var s=0;s<c.length;s++){var u=c[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(g,u.key,u)}}return function(g,c,s){return c&&p(g.prototype,c),s&&p(g,s),g}}(),k=function p(g,c,s){g===null&&(g=Function.prototype);var u=Object.getOwnPropertyDescriptor(g,c);if(u===void 0){var o=Object.getPrototypeOf(g);return o===null?void 0:p(o,c,s)}else{if("value"in u)return u.value;var m=u.get;return m===void 0?void 0:m.call(s)}},S=O(6),v=A(S);function A(p){return p&&p.__esModule?p:{default:p}}function y(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function f(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function a(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var l=function(p){a(g,p);function g(){return y(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return w(g,[{key:"format",value:function(s,u){if(s!==this.statics.blotName||!u)return k(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,s,u);u=this.constructor.sanitize(u),this.domNode.setAttribute("href",u)}}],[{key:"create",value:function(s){var u=k(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,s);return s=this.sanitize(s),u.setAttribute("href",s),u.setAttribute("rel","noopener noreferrer"),u.setAttribute("target","_blank"),u}},{key:"formats",value:function(s){return s.getAttribute("href")}},{key:"sanitize",value:function(s){return d(s,this.PROTOCOL_WHITELIST)?s:this.SANITIZED_URL}}]),g}(v.default);l.blotName="link",l.tagName="A",l.SANITIZED_URL="about:blank",l.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function d(p,g){var c=document.createElement("a");c.href=p;var s=c.href.slice(0,c.href.indexOf(":"));return g.indexOf(s)>-1}C.default=l,C.sanitize=d},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},k=function(){function g(c,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}return function(c,s,u){return s&&g(c.prototype,s),u&&g(c,u),c}}(),S=O(23),v=f(S),A=O(107),y=f(A);function f(g){return g&&g.__esModule?g:{default:g}}function a(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}var l=0;function d(g,c){g.setAttribute(c,g.getAttribute(c)!=="true")}var p=function(){function g(c){var s=this;a(this,g),this.select=c,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){s.togglePicker()}),this.label.addEventListener("keydown",function(u){switch(u.keyCode){case v.default.keys.ENTER:s.togglePicker();break;case v.default.keys.ESCAPE:s.escape(),u.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return k(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),d(this.label,"aria-expanded"),d(this.options,"aria-hidden")}},{key:"buildItem",value:function(s){var u=this,o=document.createElement("span");return o.tabIndex="0",o.setAttribute("role","button"),o.classList.add("ql-picker-item"),s.hasAttribute("value")&&o.setAttribute("data-value",s.getAttribute("value")),s.textContent&&o.setAttribute("data-label",s.textContent),o.addEventListener("click",function(){u.selectItem(o,!0)}),o.addEventListener("keydown",function(m){switch(m.keyCode){case v.default.keys.ENTER:u.selectItem(o,!0),m.preventDefault();break;case v.default.keys.ESCAPE:u.escape(),m.preventDefault();break}}),o}},{key:"buildLabel",value:function(){var s=document.createElement("span");return s.classList.add("ql-picker-label"),s.innerHTML=y.default,s.tabIndex="0",s.setAttribute("role","button"),s.setAttribute("aria-expanded","false"),this.container.appendChild(s),s}},{key:"buildOptions",value:function(){var s=this,u=document.createElement("span");u.classList.add("ql-picker-options"),u.setAttribute("aria-hidden","true"),u.tabIndex="-1",u.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",u.id),this.options=u,[].slice.call(this.select.options).forEach(function(o){var m=s.buildItem(o);u.appendChild(m),o.selected===!0&&s.selectItem(m)}),this.container.appendChild(u)}},{key:"buildPicker",value:function(){var s=this;[].slice.call(this.select.attributes).forEach(function(u){s.container.setAttribute(u.name,u.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var s=this;this.close(),setTimeout(function(){return s.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=this.container.querySelector(".ql-selected");if(s!==o&&(o!=null&&o.classList.remove("ql-selected"),s!=null&&(s.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(s.parentNode.children,s),s.hasAttribute("data-value")?this.label.setAttribute("data-value",s.getAttribute("data-value")):this.label.removeAttribute("data-value"),s.hasAttribute("data-label")?this.label.setAttribute("data-label",s.getAttribute("data-label")):this.label.removeAttribute("data-label"),u))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":w(Event))==="object"){var m=document.createEvent("Event");m.initEvent("change",!0,!0),this.select.dispatchEvent(m)}this.close()}}},{key:"update",value:function(){var s=void 0;if(this.select.selectedIndex>-1){var u=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];s=this.select.options[this.select.selectedIndex],this.selectItem(u)}else this.selectItem(null);var o=s!=null&&s!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",o)}}]),g}();C.default=p},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(0),k=B(w),S=O(5),v=B(S),A=O(4),y=B(A),f=O(16),a=B(f),l=O(25),d=B(l),p=O(24),g=B(p),c=O(35),s=B(c),u=O(6),o=B(u),m=O(22),T=B(m),_=O(7),I=B(_),D=O(55),x=B(D),E=O(42),N=B(E),R=O(23),L=B(R);function B(J){return J&&J.__esModule?J:{default:J}}v.default.register({"blots/block":y.default,"blots/block/embed":A.BlockEmbed,"blots/break":a.default,"blots/container":d.default,"blots/cursor":g.default,"blots/embed":s.default,"blots/inline":o.default,"blots/scroll":T.default,"blots/text":I.default,"modules/clipboard":x.default,"modules/history":N.default,"modules/keyboard":L.default}),k.default.register(y.default,a.default,g.default,o.default,T.default,I.default),C.default=v.default},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(1),k=function(){function S(v){this.domNode=v,this.domNode[w.DATA_KEY]={blot:this}}return Object.defineProperty(S.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),S.create=function(v){if(this.tagName==null)throw new w.ParchmentError("Blot definition missing tagName");var A;return Array.isArray(this.tagName)?(typeof v=="string"&&(v=v.toUpperCase(),parseInt(v).toString()===v&&(v=parseInt(v))),typeof v=="number"?A=document.createElement(this.tagName[v-1]):this.tagName.indexOf(v)>-1?A=document.createElement(v):A=document.createElement(this.tagName[0])):A=document.createElement(this.tagName),this.className&&A.classList.add(this.className),A},S.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},S.prototype.clone=function(){var v=this.domNode.cloneNode(!1);return w.create(v)},S.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[w.DATA_KEY]},S.prototype.deleteAt=function(v,A){var y=this.isolate(v,A);y.remove()},S.prototype.formatAt=function(v,A,y,f){var a=this.isolate(v,A);if(w.query(y,w.Scope.BLOT)!=null&&f)a.wrap(y,f);else if(w.query(y,w.Scope.ATTRIBUTE)!=null){var l=w.create(this.statics.scope);a.wrap(l),l.format(y,f)}},S.prototype.insertAt=function(v,A,y){var f=y==null?w.create("text",A):w.create(A,y),a=this.split(v);this.parent.insertBefore(f,a)},S.prototype.insertInto=function(v,A){A===void 0&&(A=null),this.parent!=null&&this.parent.children.remove(this);var y=null;v.children.insertBefore(this,A),A!=null&&(y=A.domNode),(this.domNode.parentNode!=v.domNode||this.domNode.nextSibling!=y)&&v.domNode.insertBefore(this.domNode,y),this.parent=v,this.attach()},S.prototype.isolate=function(v,A){var y=this.split(v);return y.split(A),y},S.prototype.length=function(){return 1},S.prototype.offset=function(v){return v===void 0&&(v=this.parent),this.parent==null||this==v?0:this.parent.children.offset(this)+this.parent.offset(v)},S.prototype.optimize=function(v){this.domNode[w.DATA_KEY]!=null&&delete this.domNode[w.DATA_KEY].mutations},S.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},S.prototype.replace=function(v){v.parent!=null&&(v.parent.insertBefore(this,v.next),v.remove())},S.prototype.replaceWith=function(v,A){var y=typeof v=="string"?w.create(v,A):v;return y.replace(this),y},S.prototype.split=function(v,A){return v===0?this:this.next},S.prototype.update=function(v,A){},S.prototype.wrap=function(v,A){var y=typeof v=="string"?w.create(v,A):v;return this.parent!=null&&this.parent.insertBefore(y,this.next),y.appendChild(this),y},S.blotName="abstract",S}();C.default=k},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(12),k=O(32),S=O(33),v=O(1),A=function(){function y(f){this.attributes={},this.domNode=f,this.build()}return y.prototype.attribute=function(f,a){a?f.add(this.domNode,a)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},y.prototype.build=function(){var f=this;this.attributes={};var a=w.default.keys(this.domNode),l=k.default.keys(this.domNode),d=S.default.keys(this.domNode);a.concat(l).concat(d).forEach(function(p){var g=v.query(p,v.Scope.ATTRIBUTE);g instanceof w.default&&(f.attributes[g.attrName]=g)})},y.prototype.copy=function(f){var a=this;Object.keys(this.attributes).forEach(function(l){var d=a.attributes[l].value(a.domNode);f.format(l,d)})},y.prototype.move=function(f){var a=this;this.copy(f),Object.keys(this.attributes).forEach(function(l){a.attributes[l].remove(a.domNode)}),this.attributes={}},y.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(a,l){return a[l]=f.attributes[l].value(f.domNode),a},{})},y}();C.default=A},function(z,C,O){var w=this&&this.__extends||function(){var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var a in f)f.hasOwnProperty(a)&&(y[a]=f[a])};return function(y,f){A(y,f);function a(){this.constructor=y}y.prototype=f===null?Object.create(f):(a.prototype=f.prototype,new a)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(12);function S(A,y){var f=A.getAttribute("class")||"";return f.split(/\s+/).filter(function(a){return a.indexOf(y+"-")===0})}var v=function(A){w(y,A);function y(){return A!==null&&A.apply(this,arguments)||this}return y.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(a){return a.split("-").slice(0,-1).join("-")})},y.prototype.add=function(f,a){return this.canAdd(f,a)?(this.remove(f),f.classList.add(this.keyName+"-"+a),!0):!1},y.prototype.remove=function(f){var a=S(f,this.keyName);a.forEach(function(l){f.classList.remove(l)}),f.classList.length===0&&f.removeAttribute("class")},y.prototype.value=function(f){var a=S(f,this.keyName)[0]||"",l=a.slice(this.keyName.length+1);return this.canAdd(f,l)?l:""},y}(k.default);C.default=v},function(z,C,O){var w=this&&this.__extends||function(){var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var a in f)f.hasOwnProperty(a)&&(y[a]=f[a])};return function(y,f){A(y,f);function a(){this.constructor=y}y.prototype=f===null?Object.create(f):(a.prototype=f.prototype,new a)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(12);function S(A){var y=A.split("-"),f=y.slice(1).map(function(a){return a[0].toUpperCase()+a.slice(1)}).join("");return y[0]+f}var v=function(A){w(y,A);function y(){return A!==null&&A.apply(this,arguments)||this}return y.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(a){var l=a.split(":");return l[0].trim()})},y.prototype.add=function(f,a){return this.canAdd(f,a)?(f.style[S(this.keyName)]=a,!0):!1},y.prototype.remove=function(f){f.style[S(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},y.prototype.value=function(f){var a=f.style[S(this.keyName)];return this.canAdd(f,a)?a:""},y}(k.default);C.default=v},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function v(A,y){for(var f=0;f<y.length;f++){var a=y[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}}return function(A,y,f){return y&&v(A.prototype,y),f&&v(A,f),A}}();function k(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")}var S=function(){function v(A,y){k(this,v),this.quill=A,this.options=y,this.modules={}}return w(v,[{key:"init",value:function(){var y=this;Object.keys(this.options.modules).forEach(function(f){y.modules[f]==null&&y.addModule(f)})}},{key:"addModule",value:function(y){var f=this.quill.constructor.import("modules/"+y);return this.modules[y]=new f(this.quill,this.options.modules[y]||{}),this.modules[y]}}]),v}();S.DEFAULTS={modules:{}},S.themes={default:S},C.default=S},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function c(s,u){for(var o=0;o<u.length;o++){var m=u[o];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(s,m.key,m)}}return function(s,u,o){return u&&c(s.prototype,u),o&&c(s,o),s}}(),k=function c(s,u,o){s===null&&(s=Function.prototype);var m=Object.getOwnPropertyDescriptor(s,u);if(m===void 0){var T=Object.getPrototypeOf(s);return T===null?void 0:c(T,u,o)}else{if("value"in m)return m.value;var _=m.get;return _===void 0?void 0:_.call(o)}},S=O(0),v=f(S),A=O(7),y=f(A);function f(c){return c&&c.__esModule?c:{default:c}}function a(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function l(c,s){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:c}function d(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(c,s):c.__proto__=s)}var p="\uFEFF",g=function(c){d(s,c);function s(u){a(this,s);var o=l(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,u));return o.contentNode=document.createElement("span"),o.contentNode.setAttribute("contenteditable",!1),[].slice.call(o.domNode.childNodes).forEach(function(m){o.contentNode.appendChild(m)}),o.leftGuard=document.createTextNode(p),o.rightGuard=document.createTextNode(p),o.domNode.appendChild(o.leftGuard),o.domNode.appendChild(o.contentNode),o.domNode.appendChild(o.rightGuard),o}return w(s,[{key:"index",value:function(o,m){return o===this.leftGuard?0:o===this.rightGuard?1:k(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"index",this).call(this,o,m)}},{key:"restore",value:function(o){var m=void 0,T=void 0,_=o.data.split(p).join("");if(o===this.leftGuard)if(this.prev instanceof y.default){var I=this.prev.length();this.prev.insertAt(I,_),m={startNode:this.prev.domNode,startOffset:I+_.length}}else T=document.createTextNode(_),this.parent.insertBefore(v.default.create(T),this),m={startNode:T,startOffset:_.length};else o===this.rightGuard&&(this.next instanceof y.default?(this.next.insertAt(0,_),m={startNode:this.next.domNode,startOffset:_.length}):(T=document.createTextNode(_),this.parent.insertBefore(v.default.create(T),this.next),m={startNode:T,startOffset:_.length}));return o.data=p,m}},{key:"update",value:function(o,m){var T=this;o.forEach(function(_){if(_.type==="characterData"&&(_.target===T.leftGuard||_.target===T.rightGuard)){var I=T.restore(_.target);I&&(m.range=I)}})}}]),s}(v.default.Embed);C.default=g},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.AlignStyle=C.AlignClass=C.AlignAttribute=void 0;var w=O(0),k=S(w);function S(a){return a&&a.__esModule?a:{default:a}}var v={scope:k.default.Scope.BLOCK,whitelist:["right","center","justify"]},A=new k.default.Attributor.Attribute("align","align",v),y=new k.default.Attributor.Class("align","ql-align",v),f=new k.default.Attributor.Style("align","text-align",v);C.AlignAttribute=A,C.AlignClass=y,C.AlignStyle=f},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.BackgroundStyle=C.BackgroundClass=void 0;var w=O(0),k=v(w),S=O(26);function v(f){return f&&f.__esModule?f:{default:f}}var A=new k.default.Attributor.Class("background","ql-bg",{scope:k.default.Scope.INLINE}),y=new S.ColorAttributor("background","background-color",{scope:k.default.Scope.INLINE});C.BackgroundClass=A,C.BackgroundStyle=y},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.DirectionStyle=C.DirectionClass=C.DirectionAttribute=void 0;var w=O(0),k=S(w);function S(a){return a&&a.__esModule?a:{default:a}}var v={scope:k.default.Scope.BLOCK,whitelist:["rtl"]},A=new k.default.Attributor.Attribute("direction","dir",v),y=new k.default.Attributor.Class("direction","ql-direction",v),f=new k.default.Attributor.Style("direction","direction",v);C.DirectionAttribute=A,C.DirectionClass=y,C.DirectionStyle=f},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.FontClass=C.FontStyle=void 0;var w=function(){function c(s,u){for(var o=0;o<u.length;o++){var m=u[o];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(s,m.key,m)}}return function(s,u,o){return u&&c(s.prototype,u),o&&c(s,o),s}}(),k=function c(s,u,o){s===null&&(s=Function.prototype);var m=Object.getOwnPropertyDescriptor(s,u);if(m===void 0){var T=Object.getPrototypeOf(s);return T===null?void 0:c(T,u,o)}else{if("value"in m)return m.value;var _=m.get;return _===void 0?void 0:_.call(o)}},S=O(0),v=A(S);function A(c){return c&&c.__esModule?c:{default:c}}function y(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function f(c,s){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:c}function a(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(c,s):c.__proto__=s)}var l={scope:v.default.Scope.INLINE,whitelist:["serif","monospace"]},d=new v.default.Attributor.Class("font","ql-font",l),p=function(c){a(s,c);function s(){return y(this,s),f(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return w(s,[{key:"value",value:function(o){return k(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"value",this).call(this,o).replace(/["']/g,"")}}]),s}(v.default.Attributor.Style),g=new p("font","font-family",l);C.FontStyle=g,C.FontClass=d},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.SizeStyle=C.SizeClass=void 0;var w=O(0),k=S(w);function S(y){return y&&y.__esModule?y:{default:y}}var v=new k.default.Attributor.Class("size","ql-size",{scope:k.default.Scope.INLINE,whitelist:["small","large","huge"]}),A=new k.default.Attributor.Style("size","font-size",{scope:k.default.Scope.INLINE,whitelist:["10px","18px","32px"]});C.SizeClass=v,C.SizeStyle=A},function(z,C,O){z.exports={align:{"":O(76),center:O(77),right:O(78),justify:O(79)},background:O(80),blockquote:O(81),bold:O(82),clean:O(83),code:O(58),"code-block":O(58),color:O(84),direction:{"":O(85),rtl:O(86)},float:{center:O(87),full:O(88),left:O(89),right:O(90)},formula:O(91),header:{1:O(92),2:O(93)},italic:O(94),image:O(95),indent:{"+1":O(96),"-1":O(97)},link:O(98),list:{ordered:O(99),bullet:O(100),check:O(101)},script:{sub:O(102),super:O(103)},strike:O(104),underline:O(105),video:O(106)}},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.getLastChangeIndex=C.default=void 0;var w=function(){function u(o,m){for(var T=0;T<m.length;T++){var _=m[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}return function(o,m,T){return m&&u(o.prototype,m),T&&u(o,T),o}}(),k=O(0),S=a(k),v=O(5),A=a(v),y=O(9),f=a(y);function a(u){return u&&u.__esModule?u:{default:u}}function l(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function d(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function p(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var g=function(u){p(o,u);function o(m,T){l(this,o);var _=d(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,m,T));return _.lastRecorded=0,_.ignoreChange=!1,_.clear(),_.quill.on(A.default.events.EDITOR_CHANGE,function(I,D,x,E){I!==A.default.events.TEXT_CHANGE||_.ignoreChange||(!_.options.userOnly||E===A.default.sources.USER?_.record(D,x):_.transform(D))}),_.quill.keyboard.addBinding({key:"Z",shortKey:!0},_.undo.bind(_)),_.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},_.redo.bind(_)),/Win/i.test(navigator.platform)&&_.quill.keyboard.addBinding({key:"Y",shortKey:!0},_.redo.bind(_)),_}return w(o,[{key:"change",value:function(T,_){if(this.stack[T].length!==0){var I=this.stack[T].pop();this.stack[_].push(I),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(I[T],A.default.sources.USER),this.ignoreChange=!1;var D=s(I[T]);this.quill.setSelection(D)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(T,_){if(T.ops.length!==0){this.stack.redo=[];var I=this.quill.getContents().diff(_),D=Date.now();if(this.lastRecorded+this.options.delay>D&&this.stack.undo.length>0){var x=this.stack.undo.pop();I=I.compose(x.undo),T=x.redo.compose(T)}else this.lastRecorded=D;this.stack.undo.push({redo:T,undo:I}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(T){this.stack.undo.forEach(function(_){_.undo=T.transform(_.undo,!0),_.redo=T.transform(_.redo,!0)}),this.stack.redo.forEach(function(_){_.undo=T.transform(_.undo,!0),_.redo=T.transform(_.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),o}(f.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function c(u){var o=u.ops[u.ops.length-1];return o==null?!1:o.insert!=null?typeof o.insert=="string"&&o.insert.endsWith(`
`):o.attributes!=null?Object.keys(o.attributes).some(function(m){return S.default.query(m,S.default.Scope.BLOCK)!=null}):!1}function s(u){var o=u.reduce(function(T,_){return T+=_.delete||0,T},0),m=u.length()-o;return c(u)&&(m-=1),m}C.default=g,C.getLastChangeIndex=s},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BaseTooltip=void 0;var w=function(){function $(F,X){for(var j=0;j<X.length;j++){var q=X[j];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(F,q.key,q)}}return function(F,X,j){return X&&$(F.prototype,X),j&&$(F,j),F}}(),k=function $(F,X,j){F===null&&(F=Function.prototype);var q=Object.getOwnPropertyDescriptor(F,X);if(q===void 0){var W=Object.getPrototypeOf(F);return W===null?void 0:$(W,X,j)}else{if("value"in q)return q.value;var ne=q.get;return ne===void 0?void 0:ne.call(j)}},S=O(3),v=D(S),A=O(2),y=D(A),f=O(8),a=D(f),l=O(23),d=D(l),p=O(34),g=D(p),c=O(59),s=D(c),u=O(60),o=D(u),m=O(28),T=D(m),_=O(61),I=D(_);function D($){return $&&$.__esModule?$:{default:$}}function x($,F){if(!($ instanceof F))throw new TypeError("Cannot call a class as a function")}function E($,F){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:$}function N($,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);$.prototype=Object.create(F&&F.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf($,F):$.__proto__=F)}var R=[!1,"center","right","justify"],L=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],B=[!1,"serif","monospace"],J=["1","2","3",!1],Y=["small",!1,"large","huge"],le=function($){N(F,$);function F(X,j){x(this,F);var q=E(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,X,j)),W=function ne(oe){if(!document.body.contains(X.root))return document.body.removeEventListener("click",ne);q.tooltip!=null&&!q.tooltip.root.contains(oe.target)&&document.activeElement!==q.tooltip.textbox&&!q.quill.hasFocus()&&q.tooltip.hide(),q.pickers!=null&&q.pickers.forEach(function(ue){ue.container.contains(oe.target)||ue.close()})};return X.emitter.listenDOM("click",document.body,W),q}return w(F,[{key:"addModule",value:function(j){var q=k(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"addModule",this).call(this,j);return j==="toolbar"&&this.extendToolbar(q),q}},{key:"buildButtons",value:function(j,q){j.forEach(function(W){var ne=W.getAttribute("class")||"";ne.split(/\s+/).forEach(function(oe){if(!!oe.startsWith("ql-")&&(oe=oe.slice(3),q[oe]!=null))if(oe==="direction")W.innerHTML=q[oe][""]+q[oe].rtl;else if(typeof q[oe]=="string")W.innerHTML=q[oe];else{var ue=W.value||"";ue!=null&&q[oe][ue]&&(W.innerHTML=q[oe][ue])}})})}},{key:"buildPickers",value:function(j,q){var W=this;this.pickers=j.map(function(oe){if(oe.classList.contains("ql-align"))return oe.querySelector("option")==null&&M(oe,R),new o.default(oe,q.align);if(oe.classList.contains("ql-background")||oe.classList.contains("ql-color")){var ue=oe.classList.contains("ql-background")?"background":"color";return oe.querySelector("option")==null&&M(oe,L,ue==="background"?"#ffffff":"#000000"),new s.default(oe,q[ue])}else return oe.querySelector("option")==null&&(oe.classList.contains("ql-font")?M(oe,B):oe.classList.contains("ql-header")?M(oe,J):oe.classList.contains("ql-size")&&M(oe,Y)),new T.default(oe)});var ne=function(){W.pickers.forEach(function(ue){ue.update()})};this.quill.on(a.default.events.EDITOR_CHANGE,ne)}}]),F}(g.default);le.DEFAULTS=(0,v.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var F=this,X=this.container.querySelector("input.ql-image[type=file]");X==null&&(X=document.createElement("input"),X.setAttribute("type","file"),X.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),X.classList.add("ql-image"),X.addEventListener("change",function(){if(X.files!=null&&X.files[0]!=null){var j=new FileReader;j.onload=function(q){var W=F.quill.getSelection(!0);F.quill.updateContents(new y.default().retain(W.index).delete(W.length).insert({image:q.target.result}),a.default.sources.USER),F.quill.setSelection(W.index+1,a.default.sources.SILENT),X.value=""},j.readAsDataURL(X.files[0])}}),this.container.appendChild(X)),X.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Z=function($){N(F,$);function F(X,j){x(this,F);var q=E(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,X,j));return q.textbox=q.root.querySelector('input[type="text"]'),q.listen(),q}return w(F,[{key:"listen",value:function(){var j=this;this.textbox.addEventListener("keydown",function(q){d.default.match(q,"enter")?(j.save(),q.preventDefault()):d.default.match(q,"escape")&&(j.cancel(),q.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),q!=null?this.textbox.value=q:j!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+j)||""),this.root.setAttribute("data-mode",j)}},{key:"restoreFocus",value:function(){var j=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=j}},{key:"save",value:function(){var j=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var q=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",j,a.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",j,a.default.sources.USER)),this.quill.root.scrollTop=q;break}case"video":j=V(j);case"formula":{if(!j)break;var W=this.quill.getSelection(!0);if(W!=null){var ne=W.index+W.length;this.quill.insertEmbed(ne,this.root.getAttribute("data-mode"),j,a.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ne+1," ",a.default.sources.USER),this.quill.setSelection(ne+2,a.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),F}(I.default);function V($){var F=$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return F?(F[1]||"https")+"://www.youtube.com/embed/"+F[2]+"?showinfo=0":(F=$.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(F[1]||"https")+"://player.vimeo.com/video/"+F[2]+"/":$}function M($,F){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;F.forEach(function(j){var q=document.createElement("option");j===X?q.setAttribute("selected","selected"):q.setAttribute("value",j),$.appendChild(q)})}C.BaseTooltip=Z,C.default=le},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function k(){this.head=this.tail=null,this.length=0}return k.prototype.append=function(){for(var S=[],v=0;v<arguments.length;v++)S[v]=arguments[v];this.insertBefore(S[0],null),S.length>1&&this.append.apply(this,S.slice(1))},k.prototype.contains=function(S){for(var v,A=this.iterator();v=A();)if(v===S)return!0;return!1},k.prototype.insertBefore=function(S,v){!S||(S.next=v,v!=null?(S.prev=v.prev,v.prev!=null&&(v.prev.next=S),v.prev=S,v===this.head&&(this.head=S)):this.tail!=null?(this.tail.next=S,S.prev=this.tail,this.tail=S):(S.prev=null,this.head=this.tail=S),this.length+=1)},k.prototype.offset=function(S){for(var v=0,A=this.head;A!=null;){if(A===S)return v;v+=A.length(),A=A.next}return-1},k.prototype.remove=function(S){!this.contains(S)||(S.prev!=null&&(S.prev.next=S.next),S.next!=null&&(S.next.prev=S.prev),S===this.head&&(this.head=S.next),S===this.tail&&(this.tail=S.prev),this.length-=1)},k.prototype.iterator=function(S){return S===void 0&&(S=this.head),function(){var v=S;return S!=null&&(S=S.next),v}},k.prototype.find=function(S,v){v===void 0&&(v=!1);for(var A,y=this.iterator();A=y();){var f=A.length();if(S<f||v&&S===f&&(A.next==null||A.next.length()!==0))return[A,S];S-=f}return[null,0]},k.prototype.forEach=function(S){for(var v,A=this.iterator();v=A();)S(v)},k.prototype.forEachAt=function(S,v,A){if(!(v<=0))for(var y=this.find(S),f=y[0],a=y[1],l,d=S-a,p=this.iterator(f);(l=p())&&d<S+v;){var g=l.length();S>d?A(l,S-d,Math.min(v,d+g-S)):A(l,0,Math.min(g,S+v-d)),d+=g}},k.prototype.map=function(S){return this.reduce(function(v,A){return v.push(S(A)),v},[])},k.prototype.reduce=function(S,v){for(var A,y=this.iterator();A=y();)v=S(v,A);return v},k}();C.default=w},function(z,C,O){var w=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var d in l)l.hasOwnProperty(d)&&(a[d]=l[d])};return function(a,l){f(a,l);function d(){this.constructor=a}a.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(17),S=O(1),v={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},A=100,y=function(f){w(a,f);function a(l){var d=f.call(this,l)||this;return d.scroll=d,d.observer=new MutationObserver(function(p){d.update(p)}),d.observer.observe(d.domNode,v),d.attach(),d}return a.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},a.prototype.deleteAt=function(l,d){this.update(),l===0&&d===this.length()?this.children.forEach(function(p){p.remove()}):f.prototype.deleteAt.call(this,l,d)},a.prototype.formatAt=function(l,d,p,g){this.update(),f.prototype.formatAt.call(this,l,d,p,g)},a.prototype.insertAt=function(l,d,p){this.update(),f.prototype.insertAt.call(this,l,d,p)},a.prototype.optimize=function(l,d){var p=this;l===void 0&&(l=[]),d===void 0&&(d={}),f.prototype.optimize.call(this,d);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)l.push(g.pop());for(var c=function(m,T){T===void 0&&(T=!0),!(m==null||m===p)&&m.domNode.parentNode!=null&&(m.domNode[S.DATA_KEY].mutations==null&&(m.domNode[S.DATA_KEY].mutations=[]),T&&c(m.parent))},s=function(m){m.domNode[S.DATA_KEY]==null||m.domNode[S.DATA_KEY].mutations==null||(m instanceof k.default&&m.children.forEach(s),m.optimize(d))},u=l,o=0;u.length>0;o+=1){if(o>=A)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach(function(m){var T=S.find(m.target,!0);T!=null&&(T.domNode===m.target&&(m.type==="childList"?(c(S.find(m.previousSibling,!1)),[].forEach.call(m.addedNodes,function(_){var I=S.find(_,!1);c(I,!1),I instanceof k.default&&I.children.forEach(function(D){c(D,!1)})})):m.type==="attributes"&&c(T.prev)),c(T))}),this.children.forEach(s),u=[].slice.call(this.observer.takeRecords()),g=u.slice();g.length>0;)l.push(g.pop())}},a.prototype.update=function(l,d){var p=this;d===void 0&&(d={}),l=l||this.observer.takeRecords(),l.map(function(g){var c=S.find(g.target,!0);return c==null?null:c.domNode[S.DATA_KEY].mutations==null?(c.domNode[S.DATA_KEY].mutations=[g],c):(c.domNode[S.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===p||g.domNode[S.DATA_KEY]==null||g.update(g.domNode[S.DATA_KEY].mutations||[],d)}),this.domNode[S.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[S.DATA_KEY].mutations,d),this.optimize(l,d)},a.blotName="scroll",a.defaultChild="block",a.scope=S.Scope.BLOCK_BLOT,a.tagName="DIV",a}(k.default);C.default=y},function(z,C,O){var w=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,a){f.__proto__=a}||function(f,a){for(var l in a)a.hasOwnProperty(l)&&(f[l]=a[l])};return function(f,a){y(f,a);function l(){this.constructor=f}f.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(18),S=O(1);function v(y,f){if(Object.keys(y).length!==Object.keys(f).length)return!1;for(var a in y)if(y[a]!==f[a])return!1;return!0}var A=function(y){w(f,y);function f(){return y!==null&&y.apply(this,arguments)||this}return f.formats=function(a){if(a.tagName!==f.tagName)return y.formats.call(this,a)},f.prototype.format=function(a,l){var d=this;a===this.statics.blotName&&!l?(this.children.forEach(function(p){p instanceof k.default||(p=p.wrap(f.blotName,!0)),d.attributes.copy(p)}),this.unwrap()):y.prototype.format.call(this,a,l)},f.prototype.formatAt=function(a,l,d,p){if(this.formats()[d]!=null||S.query(d,S.Scope.ATTRIBUTE)){var g=this.isolate(a,l);g.format(d,p)}else y.prototype.formatAt.call(this,a,l,d,p)},f.prototype.optimize=function(a){y.prototype.optimize.call(this,a);var l=this.formats();if(Object.keys(l).length===0)return this.unwrap();var d=this.next;d instanceof f&&d.prev===this&&v(l,d.formats())&&(d.moveChildren(this),d.remove())},f.blotName="inline",f.scope=S.Scope.INLINE_BLOT,f.tagName="SPAN",f}(k.default);C.default=A},function(z,C,O){var w=this&&this.__extends||function(){var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var a in f)f.hasOwnProperty(a)&&(y[a]=f[a])};return function(y,f){A(y,f);function a(){this.constructor=y}y.prototype=f===null?Object.create(f):(a.prototype=f.prototype,new a)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(18),S=O(1),v=function(A){w(y,A);function y(){return A!==null&&A.apply(this,arguments)||this}return y.formats=function(f){var a=S.query(y.blotName).tagName;if(f.tagName!==a)return A.formats.call(this,f)},y.prototype.format=function(f,a){S.query(f,S.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!a?this.replaceWith(y.blotName):A.prototype.format.call(this,f,a))},y.prototype.formatAt=function(f,a,l,d){S.query(l,S.Scope.BLOCK)!=null?this.format(l,d):A.prototype.formatAt.call(this,f,a,l,d)},y.prototype.insertAt=function(f,a,l){if(l==null||S.query(a,S.Scope.INLINE)!=null)A.prototype.insertAt.call(this,f,a,l);else{var d=this.split(f),p=S.create(a,l);d.parent.insertBefore(p,d)}},y.prototype.update=function(f,a){navigator.userAgent.match(/Trident/)?this.build():A.prototype.update.call(this,f,a)},y.blotName="block",y.scope=S.Scope.BLOCK_BLOT,y.tagName="P",y}(k.default);C.default=v},function(z,C,O){var w=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,y){A.__proto__=y}||function(A,y){for(var f in y)y.hasOwnProperty(f)&&(A[f]=y[f])};return function(A,y){v(A,y);function f(){this.constructor=A}A.prototype=y===null?Object.create(y):(f.prototype=y.prototype,new f)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(19),S=function(v){w(A,v);function A(){return v!==null&&v.apply(this,arguments)||this}return A.formats=function(y){},A.prototype.format=function(y,f){v.prototype.formatAt.call(this,0,this.length(),y,f)},A.prototype.formatAt=function(y,f,a,l){y===0&&f===this.length()?this.format(a,l):v.prototype.formatAt.call(this,y,f,a,l)},A.prototype.formats=function(){return this.statics.formats(this.domNode)},A}(k.default);C.default=S},function(z,C,O){var w=this&&this.__extends||function(){var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var a in f)f.hasOwnProperty(a)&&(y[a]=f[a])};return function(y,f){A(y,f);function a(){this.constructor=y}y.prototype=f===null?Object.create(f):(a.prototype=f.prototype,new a)}}();Object.defineProperty(C,"__esModule",{value:!0});var k=O(19),S=O(1),v=function(A){w(y,A);function y(f){var a=A.call(this,f)||this;return a.text=a.statics.value(a.domNode),a}return y.create=function(f){return document.createTextNode(f)},y.value=function(f){var a=f.data;return a.normalize&&(a=a.normalize()),a},y.prototype.deleteAt=function(f,a){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+a)},y.prototype.index=function(f,a){return this.domNode===f?a:-1},y.prototype.insertAt=function(f,a,l){l==null?(this.text=this.text.slice(0,f)+a+this.text.slice(f),this.domNode.data=this.text):A.prototype.insertAt.call(this,f,a,l)},y.prototype.length=function(){return this.text.length},y.prototype.optimize=function(f){A.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof y&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},y.prototype.position=function(f,a){return[this.domNode,f]},y.prototype.split=function(f,a){if(a===void 0&&(a=!1),!a){if(f===0)return this;if(f===this.length())return this.next}var l=S.create(this.domNode.splitText(f));return this.parent.insertBefore(l,this.next),this.text=this.statics.value(this.domNode),l},y.prototype.update=function(f,a){var l=this;f.some(function(d){return d.type==="characterData"&&d.target===l.domNode})&&(this.text=this.statics.value(this.domNode))},y.prototype.value=function(){return this.text},y.blotName="text",y.scope=S.Scope.INLINE_BLOT,y}(k.default);C.default=v},function(z,C,O){var w=document.createElement("div");if(w.classList.toggle("test-class",!1),w.classList.contains("test-class")){var k=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(S,v){return arguments.length>1&&!this.contains(S)==!v?v:k.call(this,S)}}String.prototype.startsWith||(String.prototype.startsWith=function(S,v){return v=v||0,this.substr(v,S.length)===S}),String.prototype.endsWith||(String.prototype.endsWith=function(S,v){var A=this.toString();(typeof v!="number"||!isFinite(v)||Math.floor(v)!==v||v>A.length)&&(v=A.length),v-=S.length;var y=A.indexOf(S,v);return y!==-1&&y===v}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(v){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof v!="function")throw new TypeError("predicate must be a function");for(var A=Object(this),y=A.length>>>0,f=arguments[1],a,l=0;l<y;l++)if(a=A[l],v.call(f,a,l,A))return a}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(z,C){var O=-1,w=1,k=0;function S(o,m,T){if(o==m)return o?[[k,o]]:[];(T<0||o.length<T)&&(T=null);var _=f(o,m),I=o.substring(0,_);o=o.substring(_),m=m.substring(_),_=a(o,m);var D=o.substring(o.length-_);o=o.substring(0,o.length-_),m=m.substring(0,m.length-_);var x=v(o,m);return I&&x.unshift([k,I]),D&&x.push([k,D]),d(x),T!=null&&(x=c(x,T)),x=s(x),x}function v(o,m){var T;if(!o)return[[w,m]];if(!m)return[[O,o]];var _=o.length>m.length?o:m,I=o.length>m.length?m:o,D=_.indexOf(I);if(D!=-1)return T=[[w,_.substring(0,D)],[k,I],[w,_.substring(D+I.length)]],o.length>m.length&&(T[0][0]=T[2][0]=O),T;if(I.length==1)return[[O,o],[w,m]];var x=l(o,m);if(x){var E=x[0],N=x[1],R=x[2],L=x[3],B=x[4],J=S(E,R),Y=S(N,L);return J.concat([[k,B]],Y)}return A(o,m)}function A(o,m){for(var T=o.length,_=m.length,I=Math.ceil((T+_)/2),D=I,x=2*I,E=new Array(x),N=new Array(x),R=0;R<x;R++)E[R]=-1,N[R]=-1;E[D+1]=0,N[D+1]=0;for(var L=T-_,B=L%2!=0,J=0,Y=0,le=0,Z=0,V=0;V<I;V++){for(var M=-V+J;M<=V-Y;M+=2){var $=D+M,F;M==-V||M!=V&&E[$-1]<E[$+1]?F=E[$+1]:F=E[$-1]+1;for(var X=F-M;F<T&&X<_&&o.charAt(F)==m.charAt(X);)F++,X++;if(E[$]=F,F>T)Y+=2;else if(X>_)J+=2;else if(B){var j=D+L-M;if(j>=0&&j<x&&N[j]!=-1){var q=T-N[j];if(F>=q)return y(o,m,F,X)}}}for(var W=-V+le;W<=V-Z;W+=2){var j=D+W,q;W==-V||W!=V&&N[j-1]<N[j+1]?q=N[j+1]:q=N[j-1]+1;for(var ne=q-W;q<T&&ne<_&&o.charAt(T-q-1)==m.charAt(_-ne-1);)q++,ne++;if(N[j]=q,q>T)Z+=2;else if(ne>_)le+=2;else if(!B){var $=D+L-W;if($>=0&&$<x&&E[$]!=-1){var F=E[$],X=D+F-$;if(q=T-q,F>=q)return y(o,m,F,X)}}}}return[[O,o],[w,m]]}function y(o,m,T,_){var I=o.substring(0,T),D=m.substring(0,_),x=o.substring(T),E=m.substring(_),N=S(I,D),R=S(x,E);return N.concat(R)}function f(o,m){if(!o||!m||o.charAt(0)!=m.charAt(0))return 0;for(var T=0,_=Math.min(o.length,m.length),I=_,D=0;T<I;)o.substring(D,I)==m.substring(D,I)?(T=I,D=T):_=I,I=Math.floor((_-T)/2+T);return I}function a(o,m){if(!o||!m||o.charAt(o.length-1)!=m.charAt(m.length-1))return 0;for(var T=0,_=Math.min(o.length,m.length),I=_,D=0;T<I;)o.substring(o.length-I,o.length-D)==m.substring(m.length-I,m.length-D)?(T=I,D=T):_=I,I=Math.floor((_-T)/2+T);return I}function l(o,m){var T=o.length>m.length?o:m,_=o.length>m.length?m:o;if(T.length<4||_.length*2<T.length)return null;function I(Y,le,Z){for(var V=Y.substring(Z,Z+Math.floor(Y.length/4)),M=-1,$="",F,X,j,q;(M=le.indexOf(V,M+1))!=-1;){var W=f(Y.substring(Z),le.substring(M)),ne=a(Y.substring(0,Z),le.substring(0,M));$.length<ne+W&&($=le.substring(M-ne,M)+le.substring(M,M+W),F=Y.substring(0,Z-ne),X=Y.substring(Z+W),j=le.substring(0,M-ne),q=le.substring(M+W))}return $.length*2>=Y.length?[F,X,j,q,$]:null}var D=I(T,_,Math.ceil(T.length/4)),x=I(T,_,Math.ceil(T.length/2)),E;if(!D&&!x)return null;x?D?E=D[4].length>x[4].length?D:x:E=x:E=D;var N,R,L,B;o.length>m.length?(N=E[0],R=E[1],L=E[2],B=E[3]):(L=E[0],B=E[1],N=E[2],R=E[3]);var J=E[4];return[N,R,L,B,J]}function d(o){o.push([k,""]);for(var m=0,T=0,_=0,I="",D="",x;m<o.length;)switch(o[m][0]){case w:_++,D+=o[m][1],m++;break;case O:T++,I+=o[m][1],m++;break;case k:T+_>1?(T!==0&&_!==0&&(x=f(D,I),x!==0&&(m-T-_>0&&o[m-T-_-1][0]==k?o[m-T-_-1][1]+=D.substring(0,x):(o.splice(0,0,[k,D.substring(0,x)]),m++),D=D.substring(x),I=I.substring(x)),x=a(D,I),x!==0&&(o[m][1]=D.substring(D.length-x)+o[m][1],D=D.substring(0,D.length-x),I=I.substring(0,I.length-x))),T===0?o.splice(m-_,T+_,[w,D]):_===0?o.splice(m-T,T+_,[O,I]):o.splice(m-T-_,T+_,[O,I],[w,D]),m=m-T-_+(T?1:0)+(_?1:0)+1):m!==0&&o[m-1][0]==k?(o[m-1][1]+=o[m][1],o.splice(m,1)):m++,_=0,T=0,I="",D="";break}o[o.length-1][1]===""&&o.pop();var E=!1;for(m=1;m<o.length-1;)o[m-1][0]==k&&o[m+1][0]==k&&(o[m][1].substring(o[m][1].length-o[m-1][1].length)==o[m-1][1]?(o[m][1]=o[m-1][1]+o[m][1].substring(0,o[m][1].length-o[m-1][1].length),o[m+1][1]=o[m-1][1]+o[m+1][1],o.splice(m-1,1),E=!0):o[m][1].substring(0,o[m+1][1].length)==o[m+1][1]&&(o[m-1][1]+=o[m+1][1],o[m][1]=o[m][1].substring(o[m+1][1].length)+o[m+1][1],o.splice(m+1,1),E=!0)),m++;E&&d(o)}var p=S;p.INSERT=w,p.DELETE=O,p.EQUAL=k,z.exports=p;function g(o,m){if(m===0)return[k,o];for(var T=0,_=0;_<o.length;_++){var I=o[_];if(I[0]===O||I[0]===k){var D=T+I[1].length;if(m===D)return[_+1,o];if(m<D){o=o.slice();var x=m-T,E=[I[0],I[1].slice(0,x)],N=[I[0],I[1].slice(x)];return o.splice(_,1,E,N),[_+1,o]}else T=D}}throw new Error("cursor_pos is out of bounds!")}function c(o,m){var T=g(o,m),_=T[1],I=T[0],D=_[I],x=_[I+1];if(D==null)return o;if(D[0]!==k)return o;if(x!=null&&D[1]+x[1]===x[1]+D[1])return _.splice(I,2,x,D),u(_,I,2);if(x!=null&&x[1].indexOf(D[1])===0){_.splice(I,2,[x[0],D[1]],[0,D[1]]);var E=x[1].slice(D[1].length);return E.length>0&&_.splice(I+2,0,[x[0],E]),u(_,I,3)}else return o}function s(o){for(var m=!1,T=function(x){return x.charCodeAt(0)>=56320&&x.charCodeAt(0)<=57343},_=function(x){return x.charCodeAt(x.length-1)>=55296&&x.charCodeAt(x.length-1)<=56319},I=2;I<o.length;I+=1)o[I-2][0]===k&&_(o[I-2][1])&&o[I-1][0]===O&&T(o[I-1][1])&&o[I][0]===w&&T(o[I][1])&&(m=!0,o[I-1][1]=o[I-2][1].slice(-1)+o[I-1][1],o[I][1]=o[I-2][1].slice(-1)+o[I][1],o[I-2][1]=o[I-2][1].slice(0,-1));if(!m)return o;for(var D=[],I=0;I<o.length;I+=1)o[I][1].length>0&&D.push(o[I]);return D}function u(o,m,T){for(var _=m+T-1;_>=0&&_>=m-1;_--)if(_+1<o.length){var I=o[_],D=o[_+1];I[0]===D[1]&&o.splice(_,2,[I[0],I[1]+D[1]])}return o}},function(z,C){C=z.exports=typeof Object.keys=="function"?Object.keys:O,C.shim=O;function O(w){var k=[];for(var S in w)k.push(S);return k}},function(z,C){var O=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";C=z.exports=O?w:k,C.supported=w;function w(S){return Object.prototype.toString.call(S)=="[object Arguments]"}C.unsupported=k;function k(S){return S&&typeof S=="object"&&typeof S.length=="number"&&Object.prototype.hasOwnProperty.call(S,"callee")&&!Object.prototype.propertyIsEnumerable.call(S,"callee")||!1}},function(z,C){var O=Object.prototype.hasOwnProperty,w="~";function k(){}Object.create&&(k.prototype=Object.create(null),new k().__proto__||(w=!1));function S(A,y,f){this.fn=A,this.context=y,this.once=f||!1}function v(){this._events=new k,this._eventsCount=0}v.prototype.eventNames=function(){var y=[],f,a;if(this._eventsCount===0)return y;for(a in f=this._events)O.call(f,a)&&y.push(w?a.slice(1):a);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(f)):y},v.prototype.listeners=function(y,f){var a=w?w+y:y,l=this._events[a];if(f)return!!l;if(!l)return[];if(l.fn)return[l.fn];for(var d=0,p=l.length,g=new Array(p);d<p;d++)g[d]=l[d].fn;return g},v.prototype.emit=function(y,f,a,l,d,p){var g=w?w+y:y;if(!this._events[g])return!1;var c=this._events[g],s=arguments.length,u,o;if(c.fn){switch(c.once&&this.removeListener(y,c.fn,void 0,!0),s){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,f),!0;case 3:return c.fn.call(c.context,f,a),!0;case 4:return c.fn.call(c.context,f,a,l),!0;case 5:return c.fn.call(c.context,f,a,l,d),!0;case 6:return c.fn.call(c.context,f,a,l,d,p),!0}for(o=1,u=new Array(s-1);o<s;o++)u[o-1]=arguments[o];c.fn.apply(c.context,u)}else{var m=c.length,T;for(o=0;o<m;o++)switch(c[o].once&&this.removeListener(y,c[o].fn,void 0,!0),s){case 1:c[o].fn.call(c[o].context);break;case 2:c[o].fn.call(c[o].context,f);break;case 3:c[o].fn.call(c[o].context,f,a);break;case 4:c[o].fn.call(c[o].context,f,a,l);break;default:if(!u)for(T=1,u=new Array(s-1);T<s;T++)u[T-1]=arguments[T];c[o].fn.apply(c[o].context,u)}}return!0},v.prototype.on=function(y,f,a){var l=new S(f,a||this),d=w?w+y:y;return this._events[d]?this._events[d].fn?this._events[d]=[this._events[d],l]:this._events[d].push(l):(this._events[d]=l,this._eventsCount++),this},v.prototype.once=function(y,f,a){var l=new S(f,a||this,!0),d=w?w+y:y;return this._events[d]?this._events[d].fn?this._events[d]=[this._events[d],l]:this._events[d].push(l):(this._events[d]=l,this._eventsCount++),this},v.prototype.removeListener=function(y,f,a,l){var d=w?w+y:y;if(!this._events[d])return this;if(!f)return--this._eventsCount===0?this._events=new k:delete this._events[d],this;var p=this._events[d];if(p.fn)p.fn===f&&(!l||p.once)&&(!a||p.context===a)&&(--this._eventsCount===0?this._events=new k:delete this._events[d]);else{for(var g=0,c=[],s=p.length;g<s;g++)(p[g].fn!==f||l&&!p[g].once||a&&p[g].context!==a)&&c.push(p[g]);c.length?this._events[d]=c.length===1?c[0]:c:--this._eventsCount===0?this._events=new k:delete this._events[d]}return this},v.prototype.removeAllListeners=function(y){var f;return y?(f=w?w+y:y,this._events[f]&&(--this._eventsCount===0?this._events=new k:delete this._events[f])):(this._events=new k,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prototype.setMaxListeners=function(){return this},v.prefixed=w,v.EventEmitter=v,typeof z<"u"&&(z.exports=v)},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.matchText=C.matchSpacing=C.matchNewline=C.matchBlot=C.matchAttributor=C.default=void 0;var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},k=function(){function H(re,ge){var me=[],ce=!0,Oe=!1,ke=void 0;try{for(var Le=re[Symbol.iterator](),Ge;!(ce=(Ge=Le.next()).done)&&(me.push(Ge.value),!(ge&&me.length===ge));ce=!0);}catch(nt){Oe=!0,ke=nt}finally{try{!ce&&Le.return&&Le.return()}finally{if(Oe)throw ke}}return me}return function(re,ge){if(Array.isArray(re))return re;if(Symbol.iterator in Object(re))return H(re,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(){function H(re,ge){for(var me=0;me<ge.length;me++){var ce=ge[me];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(re,ce.key,ce)}}return function(re,ge,me){return ge&&H(re.prototype,ge),me&&H(re,me),re}}(),v=O(3),A=N(v),y=O(2),f=N(y),a=O(0),l=N(a),d=O(5),p=N(d),g=O(10),c=N(g),s=O(9),u=N(s),o=O(36),m=O(37),T=O(13),_=N(T),I=O(26),D=O(38),x=O(39),E=O(40);function N(H){return H&&H.__esModule?H:{default:H}}function R(H,re,ge){return re in H?Object.defineProperty(H,re,{value:ge,enumerable:!0,configurable:!0,writable:!0}):H[re]=ge,H}function L(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}function B(H,re){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:H}function J(H,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);H.prototype=Object.create(re&&re.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(H,re):H.__proto__=re)}var Y=(0,c.default)("quill:clipboard"),le="__ql-matcher",Z=[[Node.TEXT_NODE,ie],[Node.TEXT_NODE,xe],["br",we],[Node.ELEMENT_NODE,xe],[Node.ELEMENT_NODE,ue],[Node.ELEMENT_NODE,G],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,ae],["li",Ee],["b",ne.bind(ne,"bold")],["i",ne.bind(ne,"italic")],["style",Ie]],V=[o.AlignAttribute,D.DirectionAttribute].reduce(function(H,re){return H[re.keyName]=re,H},{}),M=[o.AlignStyle,m.BackgroundStyle,I.ColorStyle,D.DirectionStyle,x.FontStyle,E.SizeStyle].reduce(function(H,re){return H[re.keyName]=re,H},{}),$=function(H){J(re,H);function re(ge,me){L(this,re);var ce=B(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,ge,me));return ce.quill.root.addEventListener("paste",ce.onPaste.bind(ce)),ce.container=ce.quill.addContainer("ql-clipboard"),ce.container.setAttribute("contenteditable",!0),ce.container.setAttribute("tabindex",-1),ce.matchers=[],Z.concat(ce.options.matchers).forEach(function(Oe){var ke=k(Oe,2),Le=ke[0],Ge=ke[1];!me.matchVisual&&Ge===G||ce.addMatcher(Le,Ge)}),ce}return S(re,[{key:"addMatcher",value:function(me,ce){this.matchers.push([me,ce])}},{key:"convert",value:function(me){if(typeof me=="string")return this.container.innerHTML=me.replace(/\>\r?\n +\</g,"><"),this.convert();var ce=this.quill.getFormat(this.quill.selection.savedRange.index);if(ce[_.default.blotName]){var Oe=this.container.innerText;return this.container.innerHTML="",new f.default().insert(Oe,R({},_.default.blotName,ce[_.default.blotName]))}var ke=this.prepareMatching(),Le=k(ke,2),Ge=Le[0],nt=Le[1],Ue=W(this.container,Ge,nt);return j(Ue,`
`)&&Ue.ops[Ue.ops.length-1].attributes==null&&(Ue=Ue.compose(new f.default().retain(Ue.length()-1).delete(1))),Y.log("convert",this.container.innerHTML,Ue),this.container.innerHTML="",Ue}},{key:"dangerouslyPasteHTML",value:function(me,ce){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof me=="string")this.quill.setContents(this.convert(me),ce),this.quill.setSelection(0,p.default.sources.SILENT);else{var ke=this.convert(ce);this.quill.updateContents(new f.default().retain(me).concat(ke),Oe),this.quill.setSelection(me+ke.length(),p.default.sources.SILENT)}}},{key:"onPaste",value:function(me){var ce=this;if(!(me.defaultPrevented||!this.quill.isEnabled())){var Oe=this.quill.getSelection(),ke=new f.default().retain(Oe.index),Le=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(p.default.sources.SILENT),setTimeout(function(){ke=ke.concat(ce.convert()).delete(Oe.length),ce.quill.updateContents(ke,p.default.sources.USER),ce.quill.setSelection(ke.length()-Oe.length,p.default.sources.SILENT),ce.quill.scrollingContainer.scrollTop=Le,ce.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var me=this,ce=[],Oe=[];return this.matchers.forEach(function(ke){var Le=k(ke,2),Ge=Le[0],nt=Le[1];switch(Ge){case Node.TEXT_NODE:Oe.push(nt);break;case Node.ELEMENT_NODE:ce.push(nt);break;default:[].forEach.call(me.container.querySelectorAll(Ge),function(Ue){Ue[le]=Ue[le]||[],Ue[le].push(nt)});break}}),[ce,Oe]}}]),re}(u.default);$.DEFAULTS={matchers:[],matchVisual:!0};function F(H,re,ge){return(typeof re>"u"?"undefined":w(re))==="object"?Object.keys(re).reduce(function(me,ce){return F(me,ce,re[ce])},H):H.reduce(function(me,ce){return ce.attributes&&ce.attributes[re]?me.push(ce):me.insert(ce.insert,(0,A.default)({},R({},re,ge),ce.attributes))},new f.default)}function X(H){if(H.nodeType!==Node.ELEMENT_NODE)return{};var re="__ql-computed-style";return H[re]||(H[re]=window.getComputedStyle(H))}function j(H,re){for(var ge="",me=H.ops.length-1;me>=0&&ge.length<re.length;--me){var ce=H.ops[me];if(typeof ce.insert!="string")break;ge=ce.insert+ge}return ge.slice(-1*re.length)===re}function q(H){if(H.childNodes.length===0)return!1;var re=X(H);return["block","list-item"].indexOf(re.display)>-1}function W(H,re,ge){return H.nodeType===H.TEXT_NODE?ge.reduce(function(me,ce){return ce(H,me)},new f.default):H.nodeType===H.ELEMENT_NODE?[].reduce.call(H.childNodes||[],function(me,ce){var Oe=W(ce,re,ge);return ce.nodeType===H.ELEMENT_NODE&&(Oe=re.reduce(function(ke,Le){return Le(ce,ke)},Oe),Oe=(ce[le]||[]).reduce(function(ke,Le){return Le(ce,ke)},Oe)),me.concat(Oe)},new f.default):new f.default}function ne(H,re,ge){return F(ge,H,!0)}function oe(H,re){var ge=l.default.Attributor.Attribute.keys(H),me=l.default.Attributor.Class.keys(H),ce=l.default.Attributor.Style.keys(H),Oe={};return ge.concat(me).concat(ce).forEach(function(ke){var Le=l.default.query(ke,l.default.Scope.ATTRIBUTE);Le!=null&&(Oe[Le.attrName]=Le.value(H),Oe[Le.attrName])||(Le=V[ke],Le!=null&&(Le.attrName===ke||Le.keyName===ke)&&(Oe[Le.attrName]=Le.value(H)||void 0),Le=M[ke],Le!=null&&(Le.attrName===ke||Le.keyName===ke)&&(Le=M[ke],Oe[Le.attrName]=Le.value(H)||void 0))}),Object.keys(Oe).length>0&&(re=F(re,Oe)),re}function ue(H,re){var ge=l.default.query(H);if(ge==null)return re;if(ge.prototype instanceof l.default.Embed){var me={},ce=ge.value(H);ce!=null&&(me[ge.blotName]=ce,re=new f.default().insert(me,ge.formats(H)))}else typeof ge.formats=="function"&&(re=F(re,ge.blotName,ge.formats(H)));return re}function we(H,re){return j(re,`
`)||re.insert(`
`),re}function Ie(){return new f.default}function Ee(H,re){var ge=l.default.query(H);if(ge==null||ge.blotName!=="list-item"||!j(re,`
`))return re;for(var me=-1,ce=H.parentNode;!ce.classList.contains("ql-clipboard");)(l.default.query(ce)||{}).blotName==="list"&&(me+=1),ce=ce.parentNode;return me<=0?re:re.compose(new f.default().retain(re.length()-1).retain(1,{indent:me}))}function xe(H,re){return j(re,`
`)||(q(H)||re.length()>0&&H.nextSibling&&q(H.nextSibling))&&re.insert(`
`),re}function G(H,re){if(q(H)&&H.nextElementSibling!=null&&!j(re,`

`)){var ge=H.offsetHeight+parseFloat(X(H).marginTop)+parseFloat(X(H).marginBottom);H.nextElementSibling.offsetTop>H.offsetTop+ge*1.5&&re.insert(`
`)}return re}function ae(H,re){var ge={},me=H.style||{};return me.fontStyle&&X(H).fontStyle==="italic"&&(ge.italic=!0),me.fontWeight&&(X(H).fontWeight.startsWith("bold")||parseInt(X(H).fontWeight)>=700)&&(ge.bold=!0),Object.keys(ge).length>0&&(re=F(re,ge)),parseFloat(me.textIndent||0)>0&&(re=new f.default().insert("	").concat(re)),re}function ie(H,re){var ge=H.data;if(H.parentNode.tagName==="O:P")return re.insert(ge.trim());if(ge.trim().length===0&&H.parentNode.classList.contains("ql-clipboard"))return re;if(!X(H.parentNode).whiteSpace.startsWith("pre")){var me=function(Oe,ke){return ke=ke.replace(/[^\u00a0]/g,""),ke.length<1&&Oe?" ":ke};ge=ge.replace(/\r\n/g," ").replace(/\n/g," "),ge=ge.replace(/\s\s+/g,me.bind(me,!0)),(H.previousSibling==null&&q(H.parentNode)||H.previousSibling!=null&&q(H.previousSibling))&&(ge=ge.replace(/^\s+/,me.bind(me,!1))),(H.nextSibling==null&&q(H.parentNode)||H.nextSibling!=null&&q(H.nextSibling))&&(ge=ge.replace(/\s+$/,me.bind(me,!1)))}return re.insert(ge)}C.default=$,C.matchAttributor=oe,C.matchBlot=ue,C.matchNewline=xe,C.matchSpacing=G,C.matchText=ie},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function d(p,g){for(var c=0;c<g.length;c++){var s=g[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(p,s.key,s)}}return function(p,g,c){return g&&d(p.prototype,g),c&&d(p,c),p}}(),k=function d(p,g,c){p===null&&(p=Function.prototype);var s=Object.getOwnPropertyDescriptor(p,g);if(s===void 0){var u=Object.getPrototypeOf(p);return u===null?void 0:d(u,g,c)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(c)}},S=O(6),v=A(S);function A(d){return d&&d.__esModule?d:{default:d}}function y(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function f(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function a(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var l=function(d){a(p,d);function p(){return y(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return w(p,[{key:"optimize",value:function(c){k(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"optimize",this).call(this,c),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return k(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),p}(v.default);l.blotName="bold",l.tagName=["STRONG","B"],C.default=l},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.addControls=C.default=void 0;var w=function(){function E(N,R){var L=[],B=!0,J=!1,Y=void 0;try{for(var le=N[Symbol.iterator](),Z;!(B=(Z=le.next()).done)&&(L.push(Z.value),!(R&&L.length===R));B=!0);}catch(V){J=!0,Y=V}finally{try{!B&&le.return&&le.return()}finally{if(J)throw Y}}return L}return function(N,R){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return E(N,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(){function E(N,R){for(var L=0;L<R.length;L++){var B=R[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(N,B.key,B)}}return function(N,R,L){return R&&E(N.prototype,R),L&&E(N,L),N}}(),S=O(2),v=c(S),A=O(0),y=c(A),f=O(5),a=c(f),l=O(10),d=c(l),p=O(9),g=c(p);function c(E){return E&&E.__esModule?E:{default:E}}function s(E,N,R){return N in E?Object.defineProperty(E,N,{value:R,enumerable:!0,configurable:!0,writable:!0}):E[N]=R,E}function u(E,N){if(!(E instanceof N))throw new TypeError("Cannot call a class as a function")}function o(E,N){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:E}function m(E,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);E.prototype=Object.create(N&&N.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(E,N):E.__proto__=N)}var T=(0,d.default)("quill:toolbar"),_=function(E){m(N,E);function N(R,L){u(this,N);var B=o(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,R,L));if(Array.isArray(B.options.container)){var J=document.createElement("div");D(J,B.options.container),R.container.parentNode.insertBefore(J,R.container),B.container=J}else typeof B.options.container=="string"?B.container=document.querySelector(B.options.container):B.container=B.options.container;if(!(B.container instanceof HTMLElement)){var Y;return Y=T.error("Container required for toolbar",B.options),o(B,Y)}return B.container.classList.add("ql-toolbar"),B.controls=[],B.handlers={},Object.keys(B.options.handlers).forEach(function(le){B.addHandler(le,B.options.handlers[le])}),[].forEach.call(B.container.querySelectorAll("button, select"),function(le){B.attach(le)}),B.quill.on(a.default.events.EDITOR_CHANGE,function(le,Z){le===a.default.events.SELECTION_CHANGE&&B.update(Z)}),B.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){var le=B.quill.selection.getRange(),Z=w(le,1),V=Z[0];B.update(V)}),B}return k(N,[{key:"addHandler",value:function(L,B){this.handlers[L]=B}},{key:"attach",value:function(L){var B=this,J=[].find.call(L.classList,function(le){return le.indexOf("ql-")===0});if(!!J){if(J=J.slice(3),L.tagName==="BUTTON"&&L.setAttribute("type","button"),this.handlers[J]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[J]==null){T.warn("ignoring attaching to disabled format",J,L);return}if(y.default.query(J)==null){T.warn("ignoring attaching to nonexistent format",J,L);return}}var Y=L.tagName==="SELECT"?"change":"click";L.addEventListener(Y,function(le){var Z=void 0;if(L.tagName==="SELECT"){if(L.selectedIndex<0)return;var V=L.options[L.selectedIndex];V.hasAttribute("selected")?Z=!1:Z=V.value||!1}else L.classList.contains("ql-active")?Z=!1:Z=L.value||!L.hasAttribute("value"),le.preventDefault();B.quill.focus();var M=B.quill.selection.getRange(),$=w(M,1),F=$[0];if(B.handlers[J]!=null)B.handlers[J].call(B,Z);else if(y.default.query(J).prototype instanceof y.default.Embed){if(Z=prompt("Enter "+J),!Z)return;B.quill.updateContents(new v.default().retain(F.index).delete(F.length).insert(s({},J,Z)),a.default.sources.USER)}else B.quill.format(J,Z,a.default.sources.USER);B.update(F)}),this.controls.push([J,L])}}},{key:"update",value:function(L){var B=L==null?{}:this.quill.getFormat(L);this.controls.forEach(function(J){var Y=w(J,2),le=Y[0],Z=Y[1];if(Z.tagName==="SELECT"){var V=void 0;if(L==null)V=null;else if(B[le]==null)V=Z.querySelector("option[selected]");else if(!Array.isArray(B[le])){var M=B[le];typeof M=="string"&&(M=M.replace(/\"/g,'\\"')),V=Z.querySelector('option[value="'+M+'"]')}V==null?(Z.value="",Z.selectedIndex=-1):V.selected=!0}else if(L==null)Z.classList.remove("ql-active");else if(Z.hasAttribute("value")){var $=B[le]===Z.getAttribute("value")||B[le]!=null&&B[le].toString()===Z.getAttribute("value")||B[le]==null&&!Z.getAttribute("value");Z.classList.toggle("ql-active",$)}else Z.classList.toggle("ql-active",B[le]!=null)})}}]),N}(g.default);_.DEFAULTS={};function I(E,N,R){var L=document.createElement("button");L.setAttribute("type","button"),L.classList.add("ql-"+N),R!=null&&(L.value=R),E.appendChild(L)}function D(E,N){Array.isArray(N[0])||(N=[N]),N.forEach(function(R){var L=document.createElement("span");L.classList.add("ql-formats"),R.forEach(function(B){if(typeof B=="string")I(L,B);else{var J=Object.keys(B)[0],Y=B[J];Array.isArray(Y)?x(L,J,Y):I(L,J,Y)}}),E.appendChild(L)})}function x(E,N,R){var L=document.createElement("select");L.classList.add("ql-"+N),R.forEach(function(B){var J=document.createElement("option");B!==!1?J.setAttribute("value",B):J.setAttribute("selected","selected"),L.appendChild(J)}),E.appendChild(L)}_.DEFAULTS={container:null,handlers:{clean:function(){var N=this,R=this.quill.getSelection();if(R!=null)if(R.length==0){var L=this.quill.getFormat();Object.keys(L).forEach(function(B){y.default.query(B,y.default.Scope.INLINE)!=null&&N.quill.format(B,!1)})}else this.quill.removeFormat(R,a.default.sources.USER)},direction:function(N){var R=this.quill.getFormat().align;N==="rtl"&&R==null?this.quill.format("align","right",a.default.sources.USER):!N&&R==="right"&&this.quill.format("align",!1,a.default.sources.USER),this.quill.format("direction",N,a.default.sources.USER)},indent:function(N){var R=this.quill.getSelection(),L=this.quill.getFormat(R),B=parseInt(L.indent||0);if(N==="+1"||N==="-1"){var J=N==="+1"?1:-1;L.direction==="rtl"&&(J*=-1),this.quill.format("indent",B+J,a.default.sources.USER)}},link:function(N){N===!0&&(N=prompt("Enter link URL:")),this.quill.format("link",N,a.default.sources.USER)},list:function(N){var R=this.quill.getSelection(),L=this.quill.getFormat(R);N==="check"?L.list==="checked"||L.list==="unchecked"?this.quill.format("list",!1,a.default.sources.USER):this.quill.format("list","unchecked",a.default.sources.USER):this.quill.format("list",N,a.default.sources.USER)}}},C.default=_,C.addControls=D},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function d(p,g){for(var c=0;c<g.length;c++){var s=g[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(p,s.key,s)}}return function(p,g,c){return g&&d(p.prototype,g),c&&d(p,c),p}}(),k=function d(p,g,c){p===null&&(p=Function.prototype);var s=Object.getOwnPropertyDescriptor(p,g);if(s===void 0){var u=Object.getPrototypeOf(p);return u===null?void 0:d(u,g,c)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(c)}},S=O(28),v=A(S);function A(d){return d&&d.__esModule?d:{default:d}}function y(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function f(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function a(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var l=function(d){a(p,d);function p(g,c){y(this,p);var s=f(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,g));return s.label.innerHTML=c,s.container.classList.add("ql-color-picker"),[].slice.call(s.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(u){u.classList.add("ql-primary")}),s}return w(p,[{key:"buildItem",value:function(c){var s=k(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"buildItem",this).call(this,c);return s.style.backgroundColor=c.getAttribute("value")||"",s}},{key:"selectItem",value:function(c,s){k(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,c,s);var u=this.label.querySelector(".ql-color-label"),o=c&&c.getAttribute("data-value")||"";u&&(u.tagName==="line"?u.style.stroke=o:u.style.fill=o)}}]),p}(v.default);C.default=l},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function d(p,g){for(var c=0;c<g.length;c++){var s=g[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(p,s.key,s)}}return function(p,g,c){return g&&d(p.prototype,g),c&&d(p,c),p}}(),k=function d(p,g,c){p===null&&(p=Function.prototype);var s=Object.getOwnPropertyDescriptor(p,g);if(s===void 0){var u=Object.getPrototypeOf(p);return u===null?void 0:d(u,g,c)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(c)}},S=O(28),v=A(S);function A(d){return d&&d.__esModule?d:{default:d}}function y(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function f(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function a(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var l=function(d){a(p,d);function p(g,c){y(this,p);var s=f(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,g));return s.container.classList.add("ql-icon-picker"),[].forEach.call(s.container.querySelectorAll(".ql-picker-item"),function(u){u.innerHTML=c[u.getAttribute("data-value")||""]}),s.defaultItem=s.container.querySelector(".ql-selected"),s.selectItem(s.defaultItem),s}return w(p,[{key:"selectItem",value:function(c,s){k(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,c,s),c=c||this.defaultItem,this.label.innerHTML=c.innerHTML}}]),p}(v.default);C.default=l},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function v(A,y){for(var f=0;f<y.length;f++){var a=y[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}}return function(A,y,f){return y&&v(A.prototype,y),f&&v(A,f),A}}();function k(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")}var S=function(){function v(A,y){var f=this;k(this,v),this.quill=A,this.boundsContainer=y||document.body,this.root=A.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return w(v,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(y){var f=y.left+y.width/2-this.root.offsetWidth/2,a=y.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=a+"px",this.root.classList.remove("ql-flip");var l=this.boundsContainer.getBoundingClientRect(),d=this.root.getBoundingClientRect(),p=0;if(d.right>l.right&&(p=l.right-d.right,this.root.style.left=f+p+"px"),d.left<l.left&&(p=l.left-d.left,this.root.style.left=f+p+"px"),d.bottom>l.bottom){var g=d.bottom-d.top,c=y.bottom-y.top+g;this.root.style.top=a-c+"px",this.root.classList.add("ql-flip")}return p}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),v}();C.default=S},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function x(E,N){var R=[],L=!0,B=!1,J=void 0;try{for(var Y=E[Symbol.iterator](),le;!(L=(le=Y.next()).done)&&(R.push(le.value),!(N&&R.length===N));L=!0);}catch(Z){B=!0,J=Z}finally{try{!L&&Y.return&&Y.return()}finally{if(B)throw J}}return R}return function(E,N){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return x(E,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function x(E,N,R){E===null&&(E=Function.prototype);var L=Object.getOwnPropertyDescriptor(E,N);if(L===void 0){var B=Object.getPrototypeOf(E);return B===null?void 0:x(B,N,R)}else{if("value"in L)return L.value;var J=L.get;return J===void 0?void 0:J.call(R)}},S=function(){function x(E,N){for(var R=0;R<N.length;R++){var L=N[R];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,N,R){return N&&x(E.prototype,N),R&&x(E,R),E}}(),v=O(3),A=u(v),y=O(8),f=u(y),a=O(43),l=u(a),d=O(27),p=u(d),g=O(15),c=O(41),s=u(c);function u(x){return x&&x.__esModule?x:{default:x}}function o(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function m(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function T(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var _=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],I=function(x){T(E,x);function E(N,R){o(this,E),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=_);var L=m(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,N,R));return L.quill.container.classList.add("ql-snow"),L}return S(E,[{key:"extendToolbar",value:function(R){R.container.classList.add("ql-snow"),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),s.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),s.default),this.tooltip=new D(this.quill,this.options.bounds),R.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(L,B){R.handlers.link.call(R,!B.format.link)})}}]),E}(l.default);I.DEFAULTS=(0,A.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var N=this.quill.getSelection();if(N==null||N.length==0)return;var R=this.quill.getText(N);/^\S+@\S+\.\S+$/.test(R)&&R.indexOf("mailto:")!==0&&(R="mailto:"+R);var L=this.quill.theme.tooltip;L.edit("link",R)}else this.quill.format("link",!1)}}}}});var D=function(x){T(E,x);function E(N,R){o(this,E);var L=m(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,N,R));return L.preview=L.root.querySelector("a.ql-preview"),L}return S(E,[{key:"listen",value:function(){var R=this;k(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(L){R.root.classList.contains("ql-editing")?R.save():R.edit("link",R.preview.textContent),L.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(L){if(R.linkRange!=null){var B=R.linkRange;R.restoreFocus(),R.quill.formatText(B,"link",!1,f.default.sources.USER),delete R.linkRange}L.preventDefault(),R.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(L,B,J){if(L!=null){if(L.length===0&&J===f.default.sources.USER){var Y=R.quill.scroll.descendant(p.default,L.index),le=w(Y,2),Z=le[0],V=le[1];if(Z!=null){R.linkRange=new g.Range(L.index-V,Z.length());var M=p.default.formats(Z.domNode);R.preview.textContent=M,R.preview.setAttribute("href",M),R.show(),R.position(R.quill.getBounds(R.linkRange));return}}else delete R.linkRange;R.hide()}})}},{key:"show",value:function(){k(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(a.BaseTooltip);D.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),C.default=I},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(29),k=ce(w),S=O(36),v=O(38),A=O(64),y=O(65),f=ce(y),a=O(66),l=ce(a),d=O(67),p=ce(d),g=O(37),c=O(26),s=O(39),u=O(40),o=O(56),m=ce(o),T=O(68),_=ce(T),I=O(27),D=ce(I),x=O(69),E=ce(x),N=O(70),R=ce(N),L=O(71),B=ce(L),J=O(72),Y=ce(J),le=O(73),Z=ce(le),V=O(13),M=ce(V),$=O(74),F=ce($),X=O(75),j=ce(X),q=O(57),W=ce(q),ne=O(41),oe=ce(ne),ue=O(28),we=ce(ue),Ie=O(59),Ee=ce(Ie),xe=O(60),G=ce(xe),ae=O(61),ie=ce(ae),H=O(108),re=ce(H),ge=O(62),me=ce(ge);function ce(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}k.default.register({"attributors/attribute/direction":v.DirectionAttribute,"attributors/class/align":S.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":c.ColorClass,"attributors/class/direction":v.DirectionClass,"attributors/class/font":s.FontClass,"attributors/class/size":u.SizeClass,"attributors/style/align":S.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":c.ColorStyle,"attributors/style/direction":v.DirectionStyle,"attributors/style/font":s.FontStyle,"attributors/style/size":u.SizeStyle},!0),k.default.register({"formats/align":S.AlignClass,"formats/direction":v.DirectionClass,"formats/indent":A.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":c.ColorStyle,"formats/font":s.FontClass,"formats/size":u.SizeClass,"formats/blockquote":f.default,"formats/code-block":M.default,"formats/header":l.default,"formats/list":p.default,"formats/bold":m.default,"formats/code":V.Code,"formats/italic":_.default,"formats/link":D.default,"formats/script":E.default,"formats/strike":R.default,"formats/underline":B.default,"formats/image":Y.default,"formats/video":Z.default,"formats/list/item":d.ListItem,"modules/formula":F.default,"modules/syntax":j.default,"modules/toolbar":W.default,"themes/bubble":re.default,"themes/snow":me.default,"ui/icons":oe.default,"ui/picker":we.default,"ui/icon-picker":G.default,"ui/color-picker":Ee.default,"ui/tooltip":ie.default},!0),C.default=k.default},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.IndentClass=void 0;var w=function(){function p(g,c){for(var s=0;s<c.length;s++){var u=c[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(g,u.key,u)}}return function(g,c,s){return c&&p(g.prototype,c),s&&p(g,s),g}}(),k=function p(g,c,s){g===null&&(g=Function.prototype);var u=Object.getOwnPropertyDescriptor(g,c);if(u===void 0){var o=Object.getPrototypeOf(g);return o===null?void 0:p(o,c,s)}else{if("value"in u)return u.value;var m=u.get;return m===void 0?void 0:m.call(s)}},S=O(0),v=A(S);function A(p){return p&&p.__esModule?p:{default:p}}function y(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function f(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function a(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var l=function(p){a(g,p);function g(){return y(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return w(g,[{key:"add",value:function(s,u){if(u==="+1"||u==="-1"){var o=this.value(s)||0;u=u==="+1"?o+1:o-1}return u===0?(this.remove(s),!0):k(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,s,u)}},{key:"canAdd",value:function(s,u){return k(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,s,u)||k(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,s,parseInt(u))}},{key:"value",value:function(s){return parseInt(k(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,s))||void 0}}]),g}(v.default.Attributor.Class),d=new l("indent","ql-indent",{scope:v.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});C.IndentClass=d},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(4),k=S(w);function S(a){return a&&a.__esModule?a:{default:a}}function v(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}function A(a,l){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:a}function y(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(a,l):a.__proto__=l)}var f=function(a){y(l,a);function l(){return v(this,l),A(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(k.default);f.blotName="blockquote",f.tagName="blockquote",C.default=f},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function l(d,p){for(var g=0;g<p.length;g++){var c=p[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(d,c.key,c)}}return function(d,p,g){return p&&l(d.prototype,p),g&&l(d,g),d}}(),k=O(4),S=v(k);function v(l){return l&&l.__esModule?l:{default:l}}function A(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}function y(l,d){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:l}function f(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);l.prototype=Object.create(d&&d.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(l,d):l.__proto__=d)}var a=function(l){f(d,l);function d(){return A(this,d),y(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return w(d,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),d}(S.default);a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],C.default=a},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.ListItem=void 0;var w=function(){function o(m,T){for(var _=0;_<T.length;_++){var I=T[_];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(m,I.key,I)}}return function(m,T,_){return T&&o(m.prototype,T),_&&o(m,_),m}}(),k=function o(m,T,_){m===null&&(m=Function.prototype);var I=Object.getOwnPropertyDescriptor(m,T);if(I===void 0){var D=Object.getPrototypeOf(m);return D===null?void 0:o(D,T,_)}else{if("value"in I)return I.value;var x=I.get;return x===void 0?void 0:x.call(_)}},S=O(0),v=l(S),A=O(4),y=l(A),f=O(25),a=l(f);function l(o){return o&&o.__esModule?o:{default:o}}function d(o,m,T){return m in o?Object.defineProperty(o,m,{value:T,enumerable:!0,configurable:!0,writable:!0}):o[m]=T,o}function p(o,m){if(!(o instanceof m))throw new TypeError("Cannot call a class as a function")}function g(o,m){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:o}function c(o,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);o.prototype=Object.create(m&&m.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(o,m):o.__proto__=m)}var s=function(o){c(m,o);function m(){return p(this,m),g(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return w(m,[{key:"format",value:function(_,I){_===u.blotName&&!I?this.replaceWith(v.default.create(this.statics.scope)):k(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,_,I)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():k(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(_,I){return this.parent.isolate(this.offset(this.parent),this.length()),_===this.parent.statics.blotName?(this.parent.replaceWith(_,I),this):(this.parent.unwrap(),k(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"replaceWith",this).call(this,_,I))}}],[{key:"formats",value:function(_){return _.tagName===this.tagName?void 0:k(m.__proto__||Object.getPrototypeOf(m),"formats",this).call(this,_)}}]),m}(y.default);s.blotName="list-item",s.tagName="LI";var u=function(o){c(m,o),w(m,null,[{key:"create",value:function(_){var I=_==="ordered"?"OL":"UL",D=k(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,I);return(_==="checked"||_==="unchecked")&&D.setAttribute("data-checked",_==="checked"),D}},{key:"formats",value:function(_){if(_.tagName==="OL")return"ordered";if(_.tagName==="UL")return _.hasAttribute("data-checked")?_.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function m(T){p(this,m);var _=g(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,T)),I=function(x){if(x.target.parentNode===T){var E=_.statics.formats(T),N=v.default.find(x.target);E==="checked"?N.format("list","unchecked"):E==="unchecked"&&N.format("list","checked")}};return T.addEventListener("touchstart",I),T.addEventListener("mousedown",I),_}return w(m,[{key:"format",value:function(_,I){this.children.length>0&&this.children.tail.format(_,I)}},{key:"formats",value:function(){return d({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(_,I){if(_ instanceof s)k(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertBefore",this).call(this,_,I);else{var D=I==null?this.length():I.offset(this),x=this.split(D);x.parent.insertBefore(_,x)}}},{key:"optimize",value:function(_){k(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,_);var I=this.next;I!=null&&I.prev===this&&I.statics.blotName===this.statics.blotName&&I.domNode.tagName===this.domNode.tagName&&I.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(I.moveChildren(this),I.remove())}},{key:"replace",value:function(_){if(_.statics.blotName!==this.statics.blotName){var I=v.default.create(this.statics.defaultChild);_.moveChildren(I),this.appendChild(I)}k(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"replace",this).call(this,_)}}]),m}(a.default);u.blotName="list",u.scope=v.default.Scope.BLOCK_BLOT,u.tagName=["OL","UL"],u.defaultChild="list-item",u.allowedChildren=[s],C.ListItem=s,C.default=u},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(56),k=S(w);function S(a){return a&&a.__esModule?a:{default:a}}function v(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}function A(a,l){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:a}function y(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(a,l):a.__proto__=l)}var f=function(a){y(l,a);function l(){return v(this,l),A(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(k.default);f.blotName="italic",f.tagName=["EM","I"],C.default=f},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function d(p,g){for(var c=0;c<g.length;c++){var s=g[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(p,s.key,s)}}return function(p,g,c){return g&&d(p.prototype,g),c&&d(p,c),p}}(),k=function d(p,g,c){p===null&&(p=Function.prototype);var s=Object.getOwnPropertyDescriptor(p,g);if(s===void 0){var u=Object.getPrototypeOf(p);return u===null?void 0:d(u,g,c)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(c)}},S=O(6),v=A(S);function A(d){return d&&d.__esModule?d:{default:d}}function y(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function f(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function a(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var l=function(d){a(p,d);function p(){return y(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return w(p,null,[{key:"create",value:function(c){return c==="super"?document.createElement("sup"):c==="sub"?document.createElement("sub"):k(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,c)}},{key:"formats",value:function(c){if(c.tagName==="SUB")return"sub";if(c.tagName==="SUP")return"super"}}]),p}(v.default);l.blotName="script",l.tagName=["SUB","SUP"],C.default=l},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(6),k=S(w);function S(a){return a&&a.__esModule?a:{default:a}}function v(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}function A(a,l){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:a}function y(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(a,l):a.__proto__=l)}var f=function(a){y(l,a);function l(){return v(this,l),A(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(k.default);f.blotName="strike",f.tagName="S",C.default=f},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=O(6),k=S(w);function S(a){return a&&a.__esModule?a:{default:a}}function v(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}function A(a,l){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:a}function y(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(a,l):a.__proto__=l)}var f=function(a){y(l,a);function l(){return v(this,l),A(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(k.default);f.blotName="underline",f.tagName="U",C.default=f},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function g(c,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}return function(c,s,u){return s&&g(c.prototype,s),u&&g(c,u),c}}(),k=function g(c,s,u){c===null&&(c=Function.prototype);var o=Object.getOwnPropertyDescriptor(c,s);if(o===void 0){var m=Object.getPrototypeOf(c);return m===null?void 0:g(m,s,u)}else{if("value"in o)return o.value;var T=o.get;return T===void 0?void 0:T.call(u)}},S=O(0),v=y(S),A=O(27);function y(g){return g&&g.__esModule?g:{default:g}}function f(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}function a(g,c){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:g}function l(g,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);g.prototype=Object.create(c&&c.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(g,c):g.__proto__=c)}var d=["alt","height","width"],p=function(g){l(c,g);function c(){return f(this,c),a(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return w(c,[{key:"format",value:function(u,o){d.indexOf(u)>-1?o?this.domNode.setAttribute(u,o):this.domNode.removeAttribute(u):k(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"format",this).call(this,u,o)}}],[{key:"create",value:function(u){var o=k(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this,u);return typeof u=="string"&&o.setAttribute("src",this.sanitize(u)),o}},{key:"formats",value:function(u){return d.reduce(function(o,m){return u.hasAttribute(m)&&(o[m]=u.getAttribute(m)),o},{})}},{key:"match",value:function(u){return/\.(jpe?g|gif|png)$/.test(u)||/^data:image\/.+;base64/.test(u)}},{key:"sanitize",value:function(u){return(0,A.sanitize)(u,["http","https","data"])?u:"//:0"}},{key:"value",value:function(u){return u.getAttribute("src")}}]),c}(v.default.Embed);p.blotName="image",p.tagName="IMG",C.default=p},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0});var w=function(){function g(c,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(c,o.key,o)}}return function(c,s,u){return s&&g(c.prototype,s),u&&g(c,u),c}}(),k=function g(c,s,u){c===null&&(c=Function.prototype);var o=Object.getOwnPropertyDescriptor(c,s);if(o===void 0){var m=Object.getPrototypeOf(c);return m===null?void 0:g(m,s,u)}else{if("value"in o)return o.value;var T=o.get;return T===void 0?void 0:T.call(u)}},S=O(4),v=O(27),A=y(v);function y(g){return g&&g.__esModule?g:{default:g}}function f(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}function a(g,c){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:g}function l(g,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);g.prototype=Object.create(c&&c.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(g,c):g.__proto__=c)}var d=["height","width"],p=function(g){l(c,g);function c(){return f(this,c),a(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return w(c,[{key:"format",value:function(u,o){d.indexOf(u)>-1?o?this.domNode.setAttribute(u,o):this.domNode.removeAttribute(u):k(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"format",this).call(this,u,o)}}],[{key:"create",value:function(u){var o=k(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this,u);return o.setAttribute("frameborder","0"),o.setAttribute("allowfullscreen",!0),o.setAttribute("src",this.sanitize(u)),o}},{key:"formats",value:function(u){return d.reduce(function(o,m){return u.hasAttribute(m)&&(o[m]=u.getAttribute(m)),o},{})}},{key:"sanitize",value:function(u){return A.default.sanitize(u)}},{key:"value",value:function(u){return u.getAttribute("src")}}]),c}(S.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",C.default=p},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.FormulaBlot=void 0;var w=function(){function u(o,m){for(var T=0;T<m.length;T++){var _=m[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}return function(o,m,T){return m&&u(o.prototype,m),T&&u(o,T),o}}(),k=function u(o,m,T){o===null&&(o=Function.prototype);var _=Object.getOwnPropertyDescriptor(o,m);if(_===void 0){var I=Object.getPrototypeOf(o);return I===null?void 0:u(I,m,T)}else{if("value"in _)return _.value;var D=_.get;return D===void 0?void 0:D.call(T)}},S=O(35),v=l(S),A=O(5),y=l(A),f=O(9),a=l(f);function l(u){return u&&u.__esModule?u:{default:u}}function d(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function p(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function g(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var c=function(u){g(o,u);function o(){return d(this,o),p(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return w(o,null,[{key:"create",value:function(T){var _=k(o.__proto__||Object.getPrototypeOf(o),"create",this).call(this,T);return typeof T=="string"&&(window.katex.render(T,_,{throwOnError:!1,errorColor:"#f00"}),_.setAttribute("data-value",T)),_}},{key:"value",value:function(T){return T.getAttribute("data-value")}}]),o}(v.default);c.blotName="formula",c.className="ql-formula",c.tagName="SPAN";var s=function(u){g(o,u),w(o,null,[{key:"register",value:function(){y.default.register(c,!0)}}]);function o(){d(this,o);var m=p(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return m}return o}(a.default);C.FormulaBlot=c,C.default=s},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.CodeToken=C.CodeBlock=void 0;var w=function(){function T(_,I){for(var D=0;D<I.length;D++){var x=I[D];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(_,x.key,x)}}return function(_,I,D){return I&&T(_.prototype,I),D&&T(_,D),_}}(),k=function T(_,I,D){_===null&&(_=Function.prototype);var x=Object.getOwnPropertyDescriptor(_,I);if(x===void 0){var E=Object.getPrototypeOf(_);return E===null?void 0:T(E,I,D)}else{if("value"in x)return x.value;var N=x.get;return N===void 0?void 0:N.call(D)}},S=O(0),v=p(S),A=O(5),y=p(A),f=O(9),a=p(f),l=O(13),d=p(l);function p(T){return T&&T.__esModule?T:{default:T}}function g(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function c(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function s(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var u=function(T){s(_,T);function _(){return g(this,_),c(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return w(_,[{key:"replaceWith",value:function(D){this.domNode.textContent=this.domNode.textContent,this.attach(),k(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"replaceWith",this).call(this,D)}},{key:"highlight",value:function(D){var x=this.domNode.textContent;this.cachedText!==x&&((x.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=D(x),this.domNode.normalize(),this.attach()),this.cachedText=x)}}]),_}(d.default);u.className="ql-syntax";var o=new v.default.Attributor.Class("token","hljs",{scope:v.default.Scope.INLINE}),m=function(T){s(_,T),w(_,null,[{key:"register",value:function(){y.default.register(o,!0),y.default.register(u,!0)}}]);function _(I,D){g(this,_);var x=c(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,I,D));if(typeof x.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return x.quill.on(y.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){x.highlight(),E=null},x.options.interval)}),x.highlight(),x}return w(_,[{key:"highlight",value:function(){var D=this;if(!this.quill.selection.composing){this.quill.update(y.default.sources.USER);var x=this.quill.getSelection();this.quill.scroll.descendants(u).forEach(function(E){E.highlight(D.options.highlight)}),this.quill.update(y.default.sources.SILENT),x!=null&&this.quill.setSelection(x,y.default.sources.SILENT)}}}]),_}(a.default);m.DEFAULTS={highlight:function(){return window.hljs==null?null:function(T){var _=window.hljs.highlightAuto(T);return _.value}}(),interval:1e3},C.CodeBlock=u,C.CodeToken=o,C.default=m},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(z,C){z.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(z,C){z.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(z,C){z.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(z,C){z.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(z,C,O){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BubbleTooltip=void 0;var w=function _(I,D,x){I===null&&(I=Function.prototype);var E=Object.getOwnPropertyDescriptor(I,D);if(E===void 0){var N=Object.getPrototypeOf(I);return N===null?void 0:_(N,D,x)}else{if("value"in E)return E.value;var R=E.get;return R===void 0?void 0:R.call(x)}},k=function(){function _(I,D){for(var x=0;x<D.length;x++){var E=D[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(I,E.key,E)}}return function(I,D,x){return D&&_(I.prototype,D),x&&_(I,x),I}}(),S=O(3),v=g(S),A=O(8),y=g(A),f=O(43),a=g(f),l=O(15),d=O(41),p=g(d);function g(_){return _&&_.__esModule?_:{default:_}}function c(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")}function s(_,I){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:_}function u(_,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);_.prototype=Object.create(I&&I.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(_,I):_.__proto__=I)}var o=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],m=function(_){u(I,_);function I(D,x){c(this,I),x.modules.toolbar!=null&&x.modules.toolbar.container==null&&(x.modules.toolbar.container=o);var E=s(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,D,x));return E.quill.container.classList.add("ql-bubble"),E}return k(I,[{key:"extendToolbar",value:function(x){this.tooltip=new T(this.quill,this.options.bounds),this.tooltip.root.appendChild(x.container),this.buildButtons([].slice.call(x.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(x.container.querySelectorAll("select")),p.default)}}]),I}(a.default);m.DEFAULTS=(0,v.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(I){I?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var T=function(_){u(I,_);function I(D,x){c(this,I);var E=s(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,D,x));return E.quill.on(y.default.events.EDITOR_CHANGE,function(N,R,L,B){if(N===y.default.events.SELECTION_CHANGE)if(R!=null&&R.length>0&&B===y.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var J=E.quill.getLines(R.index,R.length);if(J.length===1)E.position(E.quill.getBounds(R));else{var Y=J[J.length-1],le=E.quill.getIndex(Y),Z=Math.min(Y.length()-1,R.index+R.length-le),V=E.quill.getBounds(new l.Range(le,Z));E.position(V)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return k(I,[{key:"listen",value:function(){var x=this;w(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){x.root.classList.remove("ql-editing")}),this.quill.on(y.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!x.root.classList.contains("ql-hidden")){var E=x.quill.getSelection();E!=null&&x.position(x.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(x){var E=w(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"position",this).call(this,x),N=this.root.querySelector(".ql-tooltip-arrow");if(N.style.marginLeft="",E===0)return E;N.style.marginLeft=-1*E-N.offsetWidth/2+"px"}}]),I}(f.BaseTooltip);T.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),C.BubbleTooltip=T,C.default=m},function(z,C,O){z.exports=O(63)}]).default})})(ra);const Xs=yo(ra.exports);var ia={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(Be,fe){(function(z,C){Be.exports=C()})(self,()=>(()=>{var z={582:(k,S,v)=>{v.d(S,{Z:()=>l});var A=v(81),y=v.n(A),f=v(645),a=v.n(f)()(y());a.push([k.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const l=a},645:k=>{k.exports=function(S){var v=[];return v.toString=function(){return this.map(function(A){var y="",f=A[5]!==void 0;return A[4]&&(y+="@supports (".concat(A[4],") {")),A[2]&&(y+="@media ".concat(A[2]," {")),f&&(y+="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {")),y+=S(A),f&&(y+="}"),A[2]&&(y+="}"),A[4]&&(y+="}"),y}).join("")},v.i=function(A,y,f,a,l){typeof A=="string"&&(A=[[null,A,void 0]]);var d={};if(f)for(var p=0;p<this.length;p++){var g=this[p][0];g!=null&&(d[g]=!0)}for(var c=0;c<A.length;c++){var s=[].concat(A[c]);f&&d[s[0]]||(l!==void 0&&(s[5]===void 0||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=l),y&&(s[2]&&(s[1]="@media ".concat(s[2]," {").concat(s[1],"}")),s[2]=y),a&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=a):s[4]="".concat(a)),v.push(s))}},v}},81:k=>{k.exports=function(S){return S[1]}},465:(k,S,v)=>{k=v.nmd(k);var A="__lodash_hash_undefined__",y=9007199254740991,f="[object Arguments]",a="[object Boolean]",l="[object Date]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",c="[object Number]",s="[object Object]",u="[object Promise]",o="[object RegExp]",m="[object Set]",T="[object String]",_="[object Symbol]",I="[object WeakMap]",D="[object ArrayBuffer]",x="[object DataView]",E="[object Float32Array]",N="[object Float64Array]",R="[object Int8Array]",L="[object Int16Array]",B="[object Int32Array]",J="[object Uint8Array]",Y="[object Uint8ClampedArray]",le="[object Uint16Array]",Z="[object Uint32Array]",V=/\w*$/,M=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,F={};F[f]=F["[object Array]"]=F[D]=F[x]=F[a]=F[l]=F[E]=F[N]=F[R]=F[L]=F[B]=F[g]=F[c]=F[s]=F[o]=F[m]=F[T]=F[_]=F[J]=F[Y]=F[le]=F[Z]=!0,F["[object Error]"]=F[d]=F[I]=!1;var X=typeof v.g=="object"&&v.g&&v.g.Object===Object&&v.g,j=typeof self=="object"&&self&&self.Object===Object&&self,q=X||j||Function("return this")(),W=S&&!S.nodeType&&S,ne=W&&k&&!k.nodeType&&k,oe=ne&&ne.exports===W;function ue(ee,he){return ee.set(he[0],he[1]),ee}function we(ee,he){return ee.add(he),ee}function Ie(ee,he,Se,Pe){var Q=-1,We=ee?ee.length:0;for(Pe&&We&&(Se=ee[++Q]);++Q<We;)Se=he(Se,ee[Q],Q,ee);return Se}function Ee(ee){var he=!1;if(ee!=null&&typeof ee.toString!="function")try{he=!!(ee+"")}catch{}return he}function xe(ee){var he=-1,Se=Array(ee.size);return ee.forEach(function(Pe,Q){Se[++he]=[Q,Pe]}),Se}function G(ee,he){return function(Se){return ee(he(Se))}}function ae(ee){var he=-1,Se=Array(ee.size);return ee.forEach(function(Pe){Se[++he]=Pe}),Se}var ie,H=Array.prototype,re=Function.prototype,ge=Object.prototype,me=q["__core-js_shared__"],ce=(ie=/[^.]+$/.exec(me&&me.keys&&me.keys.IE_PROTO||""))?"Symbol(src)_1."+ie:"",Oe=re.toString,ke=ge.hasOwnProperty,Le=ge.toString,Ge=RegExp("^"+Oe.call(ke).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=oe?q.Buffer:void 0,Ue=q.Symbol,Ke=q.Uint8Array,be=G(Object.getPrototypeOf,Object),Xe=Object.create,Pt=ge.propertyIsEnumerable,Jt=H.splice,Mt=Object.getOwnPropertySymbols,At=nt?nt.isBuffer:void 0,Vt=G(Object.keys,Object),Kt=rn(q,"DataView"),kt=rn(q,"Map"),Ht=rn(q,"Promise"),Tt=rn(q,"Set"),Ft=rn(q,"WeakMap"),Bt=rn(Object,"create"),gn=ln(Kt),qt=ln(kt),Vn=ln(Ht),En=ln(Tt),Cr=ln(Ft),gr=Ue?Ue.prototype:void 0,pr=gr?gr.valueOf:void 0;function tn(ee){var he=-1,Se=ee?ee.length:0;for(this.clear();++he<Se;){var Pe=ee[he];this.set(Pe[0],Pe[1])}}function Ct(ee){var he=-1,Se=ee?ee.length:0;for(this.clear();++he<Se;){var Pe=ee[he];this.set(Pe[0],Pe[1])}}function Wt(ee){var he=-1,Se=ee?ee.length:0;for(this.clear();++he<Se;){var Pe=ee[he];this.set(Pe[0],Pe[1])}}function xn(ee){this.__data__=new Ct(ee)}function Ut(ee,he,Se){var Pe=ee[he];ke.call(ee,he)&&yr(Pe,Se)&&(Se!==void 0||he in ee)||(ee[he]=Se)}function Kn(ee,he){for(var Se=ee.length;Se--;)if(yr(ee[Se][0],he))return Se;return-1}function nn(ee,he,Se,Pe,Q,We,dt){var ze;if(Pe&&(ze=We?Pe(ee,Q,We,dt):Pe(ee)),ze!==void 0)return ze;if(!ot(ee))return ee;var ht=se(ee);if(ht){if(ze=function(Me){var et=Me.length,ut=Me.constructor(et);return et&&typeof Me[0]=="string"&&ke.call(Me,"index")&&(ut.index=Me.index,ut.input=Me.input),ut}(ee),!he)return function(Me,et){var ut=-1,Ve=Me.length;for(et||(et=Array(Ve));++ut<Ve;)et[ut]=Me[ut];return et}(ee,ze)}else{var at=Gt(ee),Ot=at==d||at==p;if(_e(ee))return function(Me,et){if(et)return Me.slice();var ut=new Me.constructor(Me.length);return Me.copy(ut),ut}(ee,he);if(at==s||at==f||Ot&&!We){if(Ee(ee))return We?ee:{};if(ze=function(Me){return typeof Me.constructor!="function"||Pn(Me)?{}:ot(et=be(Me))?Xe(et):{};var et}(Ot?{}:ee),!he)return function(Me,et){return Nn(Me,mr(Me),et)}(ee,function(Me,et){return Me&&Nn(et,Qe(et),Me)}(ze,ee))}else{if(!F[at])return We?ee:{};ze=function(Me,et,ut,Ve){var He,_t=Me.constructor;switch(et){case D:return Hn(Me);case a:case l:return new _t(+Me);case x:return function(rt,xt){var yt=xt?Hn(rt.buffer):rt.buffer;return new rt.constructor(yt,rt.byteOffset,rt.byteLength)}(Me,Ve);case E:case N:case R:case L:case B:case J:case Y:case le:case Z:return function(rt,xt){var yt=xt?Hn(rt.buffer):rt.buffer;return new rt.constructor(yt,rt.byteOffset,rt.length)}(Me,Ve);case g:return function(rt,xt,yt){return Ie(xt?yt(xe(rt),!0):xe(rt),ue,new rt.constructor)}(Me,Ve,ut);case c:case T:return new _t(Me);case o:return function(rt){var xt=new rt.constructor(rt.source,V.exec(rt));return xt.lastIndex=rt.lastIndex,xt}(Me);case m:return function(rt,xt,yt){return Ie(xt?yt(ae(rt),!0):ae(rt),we,new rt.constructor)}(Me,Ve,ut);case _:return He=Me,pr?Object(pr.call(He)):{}}}(ee,at,nn,he)}}dt||(dt=new xn);var Et=dt.get(ee);if(Et)return Et;if(dt.set(ee,ze),!ht)var Rt=Se?function(Me){return function(et,ut,Ve){var He=ut(et);return se(et)?He:function(_t,rt){for(var xt=-1,yt=rt.length,Xt=_t.length;++xt<yt;)_t[Xt+xt]=rt[xt];return _t}(He,Ve(et))}(Me,Qe,mr)}(ee):Qe(ee);return function(Me,et){for(var ut=-1,Ve=Me?Me.length:0;++ut<Ve&&et(Me[ut],ut)!==!1;);}(Rt||ee,function(Me,et){Rt&&(Me=ee[et=Me]),Ut(ze,et,nn(Me,he,Se,Pe,et,ee,dt))}),ze}function Hn(ee){var he=new ee.constructor(ee.byteLength);return new Ke(he).set(new Ke(ee)),he}function Nn(ee,he,Se,Pe){Se||(Se={});for(var Q=-1,We=he.length;++Q<We;){var dt=he[Q],ze=Pe?Pe(Se[dt],ee[dt],dt,Se,ee):void 0;Ut(Se,dt,ze===void 0?ee[dt]:ze)}return Se}function pn(ee,he){var Se,Pe,Q=ee.__data__;return((Pe=typeof(Se=he))=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?Se!=="__proto__":Se===null)?Q[typeof he=="string"?"string":"hash"]:Q.map}function rn(ee,he){var Se=function(Pe,Q){return Pe==null?void 0:Pe[Q]}(ee,he);return function(Pe){return!(!ot(Pe)||(Q=Pe,ce&&ce in Q))&&(Re(Pe)||Ee(Pe)?Ge:M).test(ln(Pe));var Q}(Se)?Se:void 0}tn.prototype.clear=function(){this.__data__=Bt?Bt(null):{}},tn.prototype.delete=function(ee){return this.has(ee)&&delete this.__data__[ee]},tn.prototype.get=function(ee){var he=this.__data__;if(Bt){var Se=he[ee];return Se===A?void 0:Se}return ke.call(he,ee)?he[ee]:void 0},tn.prototype.has=function(ee){var he=this.__data__;return Bt?he[ee]!==void 0:ke.call(he,ee)},tn.prototype.set=function(ee,he){return this.__data__[ee]=Bt&&he===void 0?A:he,this},Ct.prototype.clear=function(){this.__data__=[]},Ct.prototype.delete=function(ee){var he=this.__data__,Se=Kn(he,ee);return!(Se<0||(Se==he.length-1?he.pop():Jt.call(he,Se,1),0))},Ct.prototype.get=function(ee){var he=this.__data__,Se=Kn(he,ee);return Se<0?void 0:he[Se][1]},Ct.prototype.has=function(ee){return Kn(this.__data__,ee)>-1},Ct.prototype.set=function(ee,he){var Se=this.__data__,Pe=Kn(Se,ee);return Pe<0?Se.push([ee,he]):Se[Pe][1]=he,this},Wt.prototype.clear=function(){this.__data__={hash:new tn,map:new(kt||Ct),string:new tn}},Wt.prototype.delete=function(ee){return pn(this,ee).delete(ee)},Wt.prototype.get=function(ee){return pn(this,ee).get(ee)},Wt.prototype.has=function(ee){return pn(this,ee).has(ee)},Wt.prototype.set=function(ee,he){return pn(this,ee).set(ee,he),this},xn.prototype.clear=function(){this.__data__=new Ct},xn.prototype.delete=function(ee){return this.__data__.delete(ee)},xn.prototype.get=function(ee){return this.__data__.get(ee)},xn.prototype.has=function(ee){return this.__data__.has(ee)},xn.prototype.set=function(ee,he){var Se=this.__data__;if(Se instanceof Ct){var Pe=Se.__data__;if(!kt||Pe.length<199)return Pe.push([ee,he]),this;Se=this.__data__=new Wt(Pe)}return Se.set(ee,he),this};var mr=Mt?G(Mt,Object):function(){return[]},Gt=function(ee){return Le.call(ee)};function In(ee,he){return!!(he=he==null?y:he)&&(typeof ee=="number"||$.test(ee))&&ee>-1&&ee%1==0&&ee<he}function Pn(ee){var he=ee&&ee.constructor;return ee===(typeof he=="function"&&he.prototype||ge)}function ln(ee){if(ee!=null){try{return Oe.call(ee)}catch{}try{return ee+""}catch{}}return""}function yr(ee,he){return ee===he||ee!=ee&&he!=he}(Kt&&Gt(new Kt(new ArrayBuffer(1)))!=x||kt&&Gt(new kt)!=g||Ht&&Gt(Ht.resolve())!=u||Tt&&Gt(new Tt)!=m||Ft&&Gt(new Ft)!=I)&&(Gt=function(ee){var he=Le.call(ee),Se=he==s?ee.constructor:void 0,Pe=Se?ln(Se):void 0;if(Pe)switch(Pe){case gn:return x;case qt:return g;case Vn:return u;case En:return m;case Cr:return I}return he});var se=Array.isArray;function pe(ee){return ee!=null&&function(he){return typeof he=="number"&&he>-1&&he%1==0&&he<=y}(ee.length)&&!Re(ee)}var _e=At||function(){return!1};function Re(ee){var he=ot(ee)?Le.call(ee):"";return he==d||he==p}function ot(ee){var he=typeof ee;return!!ee&&(he=="object"||he=="function")}function Qe(ee){return pe(ee)?function(he,Se){var Pe=se(he)||function(ze){return function(ht){return function(at){return!!at&&typeof at=="object"}(ht)&&pe(ht)}(ze)&&ke.call(ze,"callee")&&(!Pt.call(ze,"callee")||Le.call(ze)==f)}(he)?function(ze,ht){for(var at=-1,Ot=Array(ze);++at<ze;)Ot[at]=ht(at);return Ot}(he.length,String):[],Q=Pe.length,We=!!Q;for(var dt in he)!Se&&!ke.call(he,dt)||We&&(dt=="length"||In(dt,Q))||Pe.push(dt);return Pe}(ee):function(he){if(!Pn(he))return Vt(he);var Se=[];for(var Pe in Object(he))ke.call(he,Pe)&&Pe!="constructor"&&Se.push(Pe);return Se}(ee)}k.exports=function(ee){return nn(ee,!0,!0)}},307:(k,S,v)=>{k=v.nmd(k);var A="__lodash_hash_undefined__",y=9007199254740991,f="[object Arguments]",a="[object Array]",l="[object Boolean]",d="[object Date]",p="[object Error]",g="[object Function]",c="[object Map]",s="[object Number]",u="[object Object]",o="[object Promise]",m="[object RegExp]",T="[object Set]",_="[object String]",I="[object WeakMap]",D="[object ArrayBuffer]",x="[object DataView]",E=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[f]=R[a]=R[D]=R[l]=R[x]=R[d]=R[p]=R[g]=R[c]=R[s]=R[u]=R[m]=R[T]=R[_]=R[I]=!1;var L=typeof v.g=="object"&&v.g&&v.g.Object===Object&&v.g,B=typeof self=="object"&&self&&self.Object===Object&&self,J=L||B||Function("return this")(),Y=S&&!S.nodeType&&S,le=Y&&k&&!k.nodeType&&k,Z=le&&le.exports===Y,V=Z&&L.process,M=function(){try{return V&&V.binding&&V.binding("util")}catch{}}(),$=M&&M.isTypedArray;function F(se,pe){for(var _e=-1,Re=se==null?0:se.length;++_e<Re;)if(pe(se[_e],_e,se))return!0;return!1}function X(se){var pe=-1,_e=Array(se.size);return se.forEach(function(Re,ot){_e[++pe]=[ot,Re]}),_e}function j(se){var pe=-1,_e=Array(se.size);return se.forEach(function(Re){_e[++pe]=Re}),_e}var q,W,ne,oe=Array.prototype,ue=Function.prototype,we=Object.prototype,Ie=J["__core-js_shared__"],Ee=ue.toString,xe=we.hasOwnProperty,G=(q=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",ae=we.toString,ie=RegExp("^"+Ee.call(xe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=Z?J.Buffer:void 0,re=J.Symbol,ge=J.Uint8Array,me=we.propertyIsEnumerable,ce=oe.splice,Oe=re?re.toStringTag:void 0,ke=Object.getOwnPropertySymbols,Le=H?H.isBuffer:void 0,Ge=(W=Object.keys,ne=Object,function(se){return W(ne(se))}),nt=Wt(J,"DataView"),Ue=Wt(J,"Map"),Ke=Wt(J,"Promise"),be=Wt(J,"Set"),Xe=Wt(J,"WeakMap"),Pt=Wt(Object,"create"),Jt=nn(nt),Mt=nn(Ue),At=nn(Ke),Vt=nn(be),Kt=nn(Xe),kt=re?re.prototype:void 0,Ht=kt?kt.valueOf:void 0;function Tt(se){var pe=-1,_e=se==null?0:se.length;for(this.clear();++pe<_e;){var Re=se[pe];this.set(Re[0],Re[1])}}function Ft(se){var pe=-1,_e=se==null?0:se.length;for(this.clear();++pe<_e;){var Re=se[pe];this.set(Re[0],Re[1])}}function Bt(se){var pe=-1,_e=se==null?0:se.length;for(this.clear();++pe<_e;){var Re=se[pe];this.set(Re[0],Re[1])}}function gn(se){var pe=-1,_e=se==null?0:se.length;for(this.__data__=new Bt;++pe<_e;)this.add(se[pe])}function qt(se){var pe=this.__data__=new Ft(se);this.size=pe.size}function Vn(se,pe){for(var _e=se.length;_e--;)if(Hn(se[_e][0],pe))return _e;return-1}function En(se){return se==null?se===void 0?"[object Undefined]":"[object Null]":Oe&&Oe in Object(se)?function(pe){var _e=xe.call(pe,Oe),Re=pe[Oe];try{pe[Oe]=void 0;var ot=!0}catch{}var Qe=ae.call(pe);return ot&&(_e?pe[Oe]=Re:delete pe[Oe]),Qe}(se):function(pe){return ae.call(pe)}(se)}function Cr(se){return Pn(se)&&En(se)==f}function gr(se,pe,_e,Re,ot){return se===pe||(se==null||pe==null||!Pn(se)&&!Pn(pe)?se!=se&&pe!=pe:function(Qe,ee,he,Se,Pe,Q){var We=pn(Qe),dt=pn(ee),ze=We?a:Ut(Qe),ht=dt?a:Ut(ee),at=(ze=ze==f?u:ze)==u,Ot=(ht=ht==f?u:ht)==u,Et=ze==ht;if(Et&&rn(Qe)){if(!rn(ee))return!1;We=!0,at=!1}if(Et&&!at)return Q||(Q=new qt),We||ln(Qe)?pr(Qe,ee,he,Se,Pe,Q):function(Ve,He,_t,rt,xt,yt,Xt){switch(_t){case x:if(Ve.byteLength!=He.byteLength||Ve.byteOffset!=He.byteOffset)return!1;Ve=Ve.buffer,He=He.buffer;case D:return!(Ve.byteLength!=He.byteLength||!yt(new ge(Ve),new ge(He)));case l:case d:case s:return Hn(+Ve,+He);case p:return Ve.name==He.name&&Ve.message==He.message;case m:case _:return Ve==He+"";case c:var Cn=X;case T:var mn=1&rt;if(Cn||(Cn=j),Ve.size!=He.size&&!mn)return!1;var Wn=Xt.get(Ve);if(Wn)return Wn==He;rt|=2,Xt.set(Ve,He);var yn=pr(Cn(Ve),Cn(He),rt,xt,yt,Xt);return Xt.delete(Ve),yn;case"[object Symbol]":if(Ht)return Ht.call(Ve)==Ht.call(He)}return!1}(Qe,ee,ze,he,Se,Pe,Q);if(!(1&he)){var Rt=at&&xe.call(Qe,"__wrapped__"),Me=Ot&&xe.call(ee,"__wrapped__");if(Rt||Me){var et=Rt?Qe.value():Qe,ut=Me?ee.value():ee;return Q||(Q=new qt),Pe(et,ut,he,Se,Q)}}return!!Et&&(Q||(Q=new qt),function(Ve,He,_t,rt,xt,yt){var Xt=1&_t,Cn=tn(Ve),mn=Cn.length;if(mn!=tn(He).length&&!Xt)return!1;for(var Wn=mn;Wn--;){var yn=Cn[Wn];if(!(Xt?yn in He:xe.call(He,yn)))return!1}var bi=yt.get(Ve);if(bi&&yt.get(He))return bi==He;var vr=!0;yt.set(Ve,He),yt.set(He,Ve);for(var Rn=Xt;++Wn<mn;){var Rr=Ve[yn=Cn[Wn]],Dr=He[yn];if(rt)var wi=Xt?rt(Dr,Rr,yn,He,Ve,yt):rt(Rr,Dr,yn,Ve,He,yt);if(!(wi===void 0?Rr===Dr||xt(Rr,Dr,_t,rt,yt):wi)){vr=!1;break}Rn||(Rn=yn=="constructor")}if(vr&&!Rn){var Lr=Ve.constructor,Mr=He.constructor;Lr==Mr||!("constructor"in Ve)||!("constructor"in He)||typeof Lr=="function"&&Lr instanceof Lr&&typeof Mr=="function"&&Mr instanceof Mr||(vr=!1)}return yt.delete(Ve),yt.delete(He),vr}(Qe,ee,he,Se,Pe,Q))}(se,pe,_e,Re,gr,ot))}function pr(se,pe,_e,Re,ot,Qe){var ee=1&_e,he=se.length,Se=pe.length;if(he!=Se&&!(ee&&Se>he))return!1;var Pe=Qe.get(se);if(Pe&&Qe.get(pe))return Pe==pe;var Q=-1,We=!0,dt=2&_e?new gn:void 0;for(Qe.set(se,pe),Qe.set(pe,se);++Q<he;){var ze=se[Q],ht=pe[Q];if(Re)var at=ee?Re(ht,ze,Q,pe,se,Qe):Re(ze,ht,Q,se,pe,Qe);if(at!==void 0){if(at)continue;We=!1;break}if(dt){if(!F(pe,function(Ot,Et){if(Rt=Et,!dt.has(Rt)&&(ze===Ot||ot(ze,Ot,_e,Re,Qe)))return dt.push(Et);var Rt})){We=!1;break}}else if(ze!==ht&&!ot(ze,ht,_e,Re,Qe)){We=!1;break}}return Qe.delete(se),Qe.delete(pe),We}function tn(se){return function(pe,_e,Re){var ot=_e(pe);return pn(pe)?ot:function(Qe,ee){for(var he=-1,Se=ee.length,Pe=Qe.length;++he<Se;)Qe[Pe+he]=ee[he];return Qe}(ot,Re(pe))}(se,yr,xn)}function Ct(se,pe){var _e,Re,ot=se.__data__;return((Re=typeof(_e=pe))=="string"||Re=="number"||Re=="symbol"||Re=="boolean"?_e!=="__proto__":_e===null)?ot[typeof pe=="string"?"string":"hash"]:ot.map}function Wt(se,pe){var _e=function(Re,ot){return Re==null?void 0:Re[ot]}(se,pe);return function(Re){return!(!In(Re)||function(ot){return!!G&&G in ot}(Re))&&(mr(Re)?ie:E).test(nn(Re))}(_e)?_e:void 0}Tt.prototype.clear=function(){this.__data__=Pt?Pt(null):{},this.size=0},Tt.prototype.delete=function(se){var pe=this.has(se)&&delete this.__data__[se];return this.size-=pe?1:0,pe},Tt.prototype.get=function(se){var pe=this.__data__;if(Pt){var _e=pe[se];return _e===A?void 0:_e}return xe.call(pe,se)?pe[se]:void 0},Tt.prototype.has=function(se){var pe=this.__data__;return Pt?pe[se]!==void 0:xe.call(pe,se)},Tt.prototype.set=function(se,pe){var _e=this.__data__;return this.size+=this.has(se)?0:1,_e[se]=Pt&&pe===void 0?A:pe,this},Ft.prototype.clear=function(){this.__data__=[],this.size=0},Ft.prototype.delete=function(se){var pe=this.__data__,_e=Vn(pe,se);return!(_e<0||(_e==pe.length-1?pe.pop():ce.call(pe,_e,1),--this.size,0))},Ft.prototype.get=function(se){var pe=this.__data__,_e=Vn(pe,se);return _e<0?void 0:pe[_e][1]},Ft.prototype.has=function(se){return Vn(this.__data__,se)>-1},Ft.prototype.set=function(se,pe){var _e=this.__data__,Re=Vn(_e,se);return Re<0?(++this.size,_e.push([se,pe])):_e[Re][1]=pe,this},Bt.prototype.clear=function(){this.size=0,this.__data__={hash:new Tt,map:new(Ue||Ft),string:new Tt}},Bt.prototype.delete=function(se){var pe=Ct(this,se).delete(se);return this.size-=pe?1:0,pe},Bt.prototype.get=function(se){return Ct(this,se).get(se)},Bt.prototype.has=function(se){return Ct(this,se).has(se)},Bt.prototype.set=function(se,pe){var _e=Ct(this,se),Re=_e.size;return _e.set(se,pe),this.size+=_e.size==Re?0:1,this},gn.prototype.add=gn.prototype.push=function(se){return this.__data__.set(se,A),this},gn.prototype.has=function(se){return this.__data__.has(se)},qt.prototype.clear=function(){this.__data__=new Ft,this.size=0},qt.prototype.delete=function(se){var pe=this.__data__,_e=pe.delete(se);return this.size=pe.size,_e},qt.prototype.get=function(se){return this.__data__.get(se)},qt.prototype.has=function(se){return this.__data__.has(se)},qt.prototype.set=function(se,pe){var _e=this.__data__;if(_e instanceof Ft){var Re=_e.__data__;if(!Ue||Re.length<199)return Re.push([se,pe]),this.size=++_e.size,this;_e=this.__data__=new Bt(Re)}return _e.set(se,pe),this.size=_e.size,this};var xn=ke?function(se){return se==null?[]:(se=Object(se),function(pe,_e){for(var Re=-1,ot=pe==null?0:pe.length,Qe=0,ee=[];++Re<ot;){var he=pe[Re];Se=he,me.call(se,Se)&&(ee[Qe++]=he)}var Se;return ee}(ke(se)))}:function(){return[]},Ut=En;function Kn(se,pe){return!!(pe=pe==null?y:pe)&&(typeof se=="number"||N.test(se))&&se>-1&&se%1==0&&se<pe}function nn(se){if(se!=null){try{return Ee.call(se)}catch{}try{return se+""}catch{}}return""}function Hn(se,pe){return se===pe||se!=se&&pe!=pe}(nt&&Ut(new nt(new ArrayBuffer(1)))!=x||Ue&&Ut(new Ue)!=c||Ke&&Ut(Ke.resolve())!=o||be&&Ut(new be)!=T||Xe&&Ut(new Xe)!=I)&&(Ut=function(se){var pe=En(se),_e=pe==u?se.constructor:void 0,Re=_e?nn(_e):"";if(Re)switch(Re){case Jt:return x;case Mt:return c;case At:return o;case Vt:return T;case Kt:return I}return pe});var Nn=Cr(function(){return arguments}())?Cr:function(se){return Pn(se)&&xe.call(se,"callee")&&!me.call(se,"callee")},pn=Array.isArray,rn=Le||function(){return!1};function mr(se){if(!In(se))return!1;var pe=En(se);return pe==g||pe=="[object GeneratorFunction]"||pe=="[object AsyncFunction]"||pe=="[object Proxy]"}function Gt(se){return typeof se=="number"&&se>-1&&se%1==0&&se<=y}function In(se){var pe=typeof se;return se!=null&&(pe=="object"||pe=="function")}function Pn(se){return se!=null&&typeof se=="object"}var ln=$?function(se){return function(pe){return se(pe)}}($):function(se){return Pn(se)&&Gt(se.length)&&!!R[En(se)]};function yr(se){return(pe=se)!=null&&Gt(pe.length)&&!mr(pe)?function(_e,Re){var ot=pn(_e),Qe=!ot&&Nn(_e),ee=!ot&&!Qe&&rn(_e),he=!ot&&!Qe&&!ee&&ln(_e),Se=ot||Qe||ee||he,Pe=Se?function(dt,ze){for(var ht=-1,at=Array(dt);++ht<dt;)at[ht]=ze(ht);return at}(_e.length,String):[],Q=Pe.length;for(var We in _e)!Re&&!xe.call(_e,We)||Se&&(We=="length"||ee&&(We=="offset"||We=="parent")||he&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||Kn(We,Q))||Pe.push(We);return Pe}(se):function(_e){if(ot=(Re=_e)&&Re.constructor,Re!==(typeof ot=="function"&&ot.prototype||we))return Ge(_e);var Re,ot,Qe=[];for(var ee in Object(_e))xe.call(_e,ee)&&ee!="constructor"&&Qe.push(ee);return Qe}(se);var pe}k.exports=function(se,pe){return gr(se,pe)}},210:function(k,S,v){var A=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(S,"__esModule",{value:!0});var y,f=A(v(465)),a=A(v(307));(function(l){l.compose=function(d,p,g){d===void 0&&(d={}),p===void 0&&(p={}),typeof d!="object"&&(d={}),typeof p!="object"&&(p={});var c=f.default(p);for(var s in g||(c=Object.keys(c).reduce(function(u,o){return c[o]!=null&&(u[o]=c[o]),u},{})),d)d[s]!==void 0&&p[s]===void 0&&(c[s]=d[s]);return Object.keys(c).length>0?c:void 0},l.diff=function(d,p){d===void 0&&(d={}),p===void 0&&(p={}),typeof d!="object"&&(d={}),typeof p!="object"&&(p={});var g=Object.keys(d).concat(Object.keys(p)).reduce(function(c,s){return a.default(d[s],p[s])||(c[s]=p[s]===void 0?null:p[s]),c},{});return Object.keys(g).length>0?g:void 0},l.invert=function(d,p){d===void 0&&(d={}),p===void 0&&(p={}),d=d||{};var g=Object.keys(p).reduce(function(c,s){return p[s]!==d[s]&&d[s]!==void 0&&(c[s]=p[s]),c},{});return Object.keys(d).reduce(function(c,s){return d[s]!==p[s]&&p[s]===void 0&&(c[s]=null),c},g)},l.transform=function(d,p,g){if(g===void 0&&(g=!1),typeof d!="object")return p;if(typeof p=="object"){if(!g)return p;var c=Object.keys(p).reduce(function(s,u){return d[u]===void 0&&(s[u]=p[u]),s},{});return Object.keys(c).length>0?c:void 0}}})(y||(y={})),S.default=y},895:function(k,S,v){var A=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}},y=A(v(103)),f=A(v(465)),a=A(v(307)),l=A(v(210)),d=A(v(430)),p=String.fromCharCode(0),g=function(){function c(s){Array.isArray(s)?this.ops=s:s!=null&&Array.isArray(s.ops)?this.ops=s.ops:this.ops=[]}return c.prototype.insert=function(s,u){var o={};return typeof s=="string"&&s.length===0?this:(o.insert=s,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(o.attributes=u),this.push(o))},c.prototype.delete=function(s){return s<=0?this:this.push({delete:s})},c.prototype.retain=function(s,u){if(s<=0)return this;var o={retain:s};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(o.attributes=u),this.push(o)},c.prototype.push=function(s){var u=this.ops.length,o=this.ops[u-1];if(s=f.default(s),typeof o=="object"){if(typeof s.delete=="number"&&typeof o.delete=="number")return this.ops[u-1]={delete:o.delete+s.delete},this;if(typeof o.delete=="number"&&s.insert!=null&&(u-=1,typeof(o=this.ops[u-1])!="object"))return this.ops.unshift(s),this;if(a.default(s.attributes,o.attributes)){if(typeof s.insert=="string"&&typeof o.insert=="string")return this.ops[u-1]={insert:o.insert+s.insert},typeof s.attributes=="object"&&(this.ops[u-1].attributes=s.attributes),this;if(typeof s.retain=="number"&&typeof o.retain=="number")return this.ops[u-1]={retain:o.retain+s.retain},typeof s.attributes=="object"&&(this.ops[u-1].attributes=s.attributes),this}}return u===this.ops.length?this.ops.push(s):this.ops.splice(u,0,s),this},c.prototype.chop=function(){var s=this.ops[this.ops.length-1];return s&&s.retain&&!s.attributes&&this.ops.pop(),this},c.prototype.filter=function(s){return this.ops.filter(s)},c.prototype.forEach=function(s){this.ops.forEach(s)},c.prototype.map=function(s){return this.ops.map(s)},c.prototype.partition=function(s){var u=[],o=[];return this.forEach(function(m){(s(m)?u:o).push(m)}),[u,o]},c.prototype.reduce=function(s,u){return this.ops.reduce(s,u)},c.prototype.changeLength=function(){return this.reduce(function(s,u){return u.insert?s+d.default.length(u):u.delete?s-u.delete:s},0)},c.prototype.length=function(){return this.reduce(function(s,u){return s+d.default.length(u)},0)},c.prototype.slice=function(s,u){s===void 0&&(s=0),u===void 0&&(u=1/0);for(var o=[],m=d.default.iterator(this.ops),T=0;T<u&&m.hasNext();){var _=void 0;T<s?_=m.next(s-T):(_=m.next(u-T),o.push(_)),T+=d.default.length(_)}return new c(o)},c.prototype.compose=function(s){var u=d.default.iterator(this.ops),o=d.default.iterator(s.ops),m=[],T=o.peek();if(T!=null&&typeof T.retain=="number"&&T.attributes==null){for(var _=T.retain;u.peekType()==="insert"&&u.peekLength()<=_;)_-=u.peekLength(),m.push(u.next());T.retain-_>0&&o.next(T.retain-_)}for(var I=new c(m);u.hasNext()||o.hasNext();)if(o.peekType()==="insert")I.push(o.next());else if(u.peekType()==="delete")I.push(u.next());else{var D=Math.min(u.peekLength(),o.peekLength()),x=u.next(D),E=o.next(D);if(typeof E.retain=="number"){var N={};typeof x.retain=="number"?N.retain=D:N.insert=x.insert;var R=l.default.compose(x.attributes,E.attributes,typeof x.retain=="number");if(R&&(N.attributes=R),I.push(N),!o.hasNext()&&a.default(I.ops[I.ops.length-1],N)){var L=new c(u.rest());return I.concat(L).chop()}}else typeof E.delete=="number"&&typeof x.retain=="number"&&I.push(E)}return I.chop()},c.prototype.concat=function(s){var u=new c(this.ops.slice());return s.ops.length>0&&(u.push(s.ops[0]),u.ops=u.ops.concat(s.ops.slice(1))),u},c.prototype.diff=function(s,u){if(this.ops===s.ops)return new c;var o=[this,s].map(function(D){return D.map(function(x){if(x.insert!=null)return typeof x.insert=="string"?x.insert:p;throw new Error("diff() called "+(D===s?"on":"with")+" non-document")}).join("")}),m=new c,T=y.default(o[0],o[1],u),_=d.default.iterator(this.ops),I=d.default.iterator(s.ops);return T.forEach(function(D){for(var x=D[1].length;x>0;){var E=0;switch(D[0]){case y.default.INSERT:E=Math.min(I.peekLength(),x),m.push(I.next(E));break;case y.default.DELETE:E=Math.min(x,_.peekLength()),_.next(E),m.delete(E);break;case y.default.EQUAL:E=Math.min(_.peekLength(),I.peekLength(),x);var N=_.next(E),R=I.next(E);a.default(N.insert,R.insert)?m.retain(E,l.default.diff(N.attributes,R.attributes)):m.push(R).delete(E)}x-=E}}),m.chop()},c.prototype.eachLine=function(s,u){u===void 0&&(u=`
`);for(var o=d.default.iterator(this.ops),m=new c,T=0;o.hasNext();){if(o.peekType()!=="insert")return;var _=o.peek(),I=d.default.length(_)-o.peekLength(),D=typeof _.insert=="string"?_.insert.indexOf(u,I)-I:-1;if(D<0)m.push(o.next());else if(D>0)m.push(o.next(D));else{if(s(m,o.next(1).attributes||{},T)===!1)return;T+=1,m=new c}}m.length()>0&&s(m,{},T)},c.prototype.invert=function(s){var u=new c;return this.reduce(function(o,m){if(m.insert)u.delete(d.default.length(m));else{if(m.retain&&m.attributes==null)return u.retain(m.retain),o+m.retain;if(m.delete||m.retain&&m.attributes){var T=m.delete||m.retain;return s.slice(o,o+T).forEach(function(_){m.delete?u.push(_):m.retain&&m.attributes&&u.retain(d.default.length(_),l.default.invert(m.attributes,_.attributes))}),o+T}}return o},0),u.chop()},c.prototype.transform=function(s,u){if(u===void 0&&(u=!1),u=!!u,typeof s=="number")return this.transformPosition(s,u);for(var o=s,m=d.default.iterator(this.ops),T=d.default.iterator(o.ops),_=new c;m.hasNext()||T.hasNext();)if(m.peekType()!=="insert"||!u&&T.peekType()==="insert")if(T.peekType()==="insert")_.push(T.next());else{var I=Math.min(m.peekLength(),T.peekLength()),D=m.next(I),x=T.next(I);if(D.delete)continue;x.delete?_.push(x):_.retain(I,l.default.transform(D.attributes,x.attributes,u))}else _.retain(d.default.length(m.next()));return _.chop()},c.prototype.transformPosition=function(s,u){u===void 0&&(u=!1),u=!!u;for(var o=d.default.iterator(this.ops),m=0;o.hasNext()&&m<=s;){var T=o.peekLength(),_=o.peekType();o.next(),_!=="delete"?(_==="insert"&&(m<s||!u)&&(s+=T),m+=T):s-=Math.min(T,s-m)}return s},c.Op=d.default,c.AttributeMap=l.default,c}();k.exports=g},977:function(k,S,v){var A=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(S,"__esModule",{value:!0});var y=A(v(430)),f=function(){function a(l){this.ops=l,this.index=0,this.offset=0}return a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(l){l||(l=1/0);var d=this.ops[this.index];if(d){var p=this.offset,g=y.default.length(d);if(l>=g-p?(l=g-p,this.index+=1,this.offset=0):this.offset+=l,typeof d.delete=="number")return{delete:l};var c={};return d.attributes&&(c.attributes=d.attributes),typeof d.retain=="number"?c.retain=l:typeof d.insert=="string"?c.insert=d.insert.substr(p,l):c.insert=d.insert,c}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?y.default.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var l=this.offset,d=this.index,p=this.next(),g=this.ops.slice(this.index);return this.offset=l,this.index=d,[p].concat(g)}return[]},a}();S.default=f},430:function(k,S,v){var A=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(S,"__esModule",{value:!0});var y,f=A(v(977));(function(a){a.iterator=function(l){return new f.default(l)},a.length=function(l){return typeof l.delete=="number"?l.delete:typeof l.retain=="number"?l.retain:typeof l.insert=="string"?l.insert.length:1}})(y||(y={})),S.default=y},103:k=>{var S=-1;function v(u,o,m,T){if(u===o)return u?[[0,u]]:[];if(m!=null){var _=function(N,R,L){var B=typeof L=="number"?{index:L,length:0}:L.oldRange,J=typeof L=="number"?null:L.newRange,Y=N.length,le=R.length;if(B.length===0&&(J===null||J.length===0)){var Z=B.index,V=N.slice(0,Z),M=N.slice(Z),$=J?J.index:null,F=Z+le-Y;if(($===null||$===F)&&!(F<0||F>le)){var X=R.slice(0,F);if((W=R.slice(F))===M){var j=Math.min(Z,F);if((oe=V.slice(0,j))===(we=X.slice(0,j)))return c(oe,V.slice(j),X.slice(j),M)}}if($===null||$===Z){var q=Z,W=(X=R.slice(0,q),R.slice(q));if(X===V){var ne=Math.min(Y-q,le-q);if((ue=M.slice(M.length-ne))===(Ie=W.slice(W.length-ne)))return c(V,M.slice(0,M.length-ne),W.slice(0,W.length-ne),ue)}}}if(B.length>0&&J&&J.length===0){var oe=N.slice(0,B.index),ue=N.slice(B.index+B.length);if(!(le<(j=oe.length)+(ne=ue.length))){var we=R.slice(0,j),Ie=R.slice(le-ne);if(oe===we&&ue===Ie)return c(oe,N.slice(j,Y-ne),R.slice(j,le-ne),ue)}}return null}(u,o,m);if(_)return _}var I=y(u,o),D=u.substring(0,I);I=f(u=u.substring(I),o=o.substring(I));var x=u.substring(u.length-I),E=function(N,R){var L;if(!N)return[[1,R]];if(!R)return[[S,N]];var B=N.length>R.length?N:R,J=N.length>R.length?R:N,Y=B.indexOf(J);if(Y!==-1)return L=[[1,B.substring(0,Y)],[0,J],[1,B.substring(Y+J.length)]],N.length>R.length&&(L[0][0]=L[2][0]=S),L;if(J.length===1)return[[S,N],[1,R]];var le=function(q,W){var ne=q.length>W.length?q:W,oe=q.length>W.length?W:q;if(ne.length<4||2*oe.length<ne.length)return null;function ue(H,re,ge){for(var me,ce,Oe,ke,Le=H.substring(ge,ge+Math.floor(H.length/4)),Ge=-1,nt="";(Ge=re.indexOf(Le,Ge+1))!==-1;){var Ue=y(H.substring(ge),re.substring(Ge)),Ke=f(H.substring(0,ge),re.substring(0,Ge));nt.length<Ke+Ue&&(nt=re.substring(Ge-Ke,Ge)+re.substring(Ge,Ge+Ue),me=H.substring(0,ge-Ke),ce=H.substring(ge+Ue),Oe=re.substring(0,Ge-Ke),ke=re.substring(Ge+Ue))}return 2*nt.length>=H.length?[me,ce,Oe,ke,nt]:null}var we,Ie,Ee,xe,G,ae=ue(ne,oe,Math.ceil(ne.length/4)),ie=ue(ne,oe,Math.ceil(ne.length/2));return ae||ie?(we=ie?ae&&ae[4].length>ie[4].length?ae:ie:ae,q.length>W.length?(Ie=we[0],Ee=we[1],xe=we[2],G=we[3]):(xe=we[0],G=we[1],Ie=we[2],Ee=we[3]),[Ie,Ee,xe,G,we[4]]):null}(N,R);if(le){var Z=le[0],V=le[1],M=le[2],$=le[3],F=le[4],X=v(Z,M),j=v(V,$);return X.concat([[0,F]],j)}return function(q,W){for(var ne=q.length,oe=W.length,ue=Math.ceil((ne+oe)/2),we=ue,Ie=2*ue,Ee=new Array(Ie),xe=new Array(Ie),G=0;G<Ie;G++)Ee[G]=-1,xe[G]=-1;Ee[we+1]=0,xe[we+1]=0;for(var ae=ne-oe,ie=ae%2!=0,H=0,re=0,ge=0,me=0,ce=0;ce<ue;ce++){for(var Oe=-ce+H;Oe<=ce-re;Oe+=2){for(var ke=we+Oe,Le=(be=Oe===-ce||Oe!==ce&&Ee[ke-1]<Ee[ke+1]?Ee[ke+1]:Ee[ke-1]+1)-Oe;be<ne&&Le<oe&&q.charAt(be)===W.charAt(Le);)be++,Le++;if(Ee[ke]=be,be>ne)re+=2;else if(Le>oe)H+=2;else if(ie&&(Ue=we+ae-Oe)>=0&&Ue<Ie&&xe[Ue]!==-1&&be>=(nt=ne-xe[Ue]))return A(q,W,be,Le)}for(var Ge=-ce+ge;Ge<=ce-me;Ge+=2){for(var nt,Ue=we+Ge,Ke=(nt=Ge===-ce||Ge!==ce&&xe[Ue-1]<xe[Ue+1]?xe[Ue+1]:xe[Ue-1]+1)-Ge;nt<ne&&Ke<oe&&q.charAt(ne-nt-1)===W.charAt(oe-Ke-1);)nt++,Ke++;if(xe[Ue]=nt,nt>ne)me+=2;else if(Ke>oe)ge+=2;else if(!ie){var be;if((ke=we+ae-Ge)>=0&&ke<Ie&&Ee[ke]!==-1&&(Le=we+(be=Ee[ke])-ke,be>=(nt=ne-nt)))return A(q,W,be,Le)}}}return[[S,q],[1,W]]}(N,R)}(u=u.substring(0,u.length-I),o=o.substring(0,o.length-I));return D&&E.unshift([0,D]),x&&E.push([0,x]),a(E,T),E}function A(u,o,m,T){var _=u.substring(0,m),I=o.substring(0,T),D=u.substring(m),x=o.substring(T),E=v(_,I),N=v(D,x);return E.concat(N)}function y(u,o){if(!u||!o||u.charAt(0)!==o.charAt(0))return 0;for(var m=0,T=Math.min(u.length,o.length),_=T,I=0;m<_;)u.substring(I,_)==o.substring(I,_)?I=m=_:T=_,_=Math.floor((T-m)/2+m);return l(u.charCodeAt(_-1))&&_--,_}function f(u,o){if(!u||!o||u.slice(-1)!==o.slice(-1))return 0;for(var m=0,T=Math.min(u.length,o.length),_=T,I=0;m<_;)u.substring(u.length-_,u.length-I)==o.substring(o.length-_,o.length-I)?I=m=_:T=_,_=Math.floor((T-m)/2+m);return d(u.charCodeAt(u.length-_))&&_--,_}function a(u,o){u.push([0,""]);for(var m,T=0,_=0,I=0,D="",x="";T<u.length;)if(T<u.length-1&&!u[T][1])u.splice(T,1);else switch(u[T][0]){case 1:I++,x+=u[T][1],T++;break;case S:_++,D+=u[T][1],T++;break;case 0:var E=T-I-_-1;if(o){if(E>=0&&g(u[E][1])){var N=u[E][1].slice(-1);if(u[E][1]=u[E][1].slice(0,-1),D=N+D,x=N+x,!u[E][1]){u.splice(E,1),T--;var R=E-1;u[R]&&u[R][0]===1&&(I++,x=u[R][1]+x,R--),u[R]&&u[R][0]===S&&(_++,D=u[R][1]+D,R--),E=R}}p(u[T][1])&&(N=u[T][1].charAt(0),u[T][1]=u[T][1].slice(1),D+=N,x+=N)}if(T<u.length-1&&!u[T][1]){u.splice(T,1);break}if(D.length>0||x.length>0){D.length>0&&x.length>0&&((m=y(x,D))!==0&&(E>=0?u[E][1]+=x.substring(0,m):(u.splice(0,0,[0,x.substring(0,m)]),T++),x=x.substring(m),D=D.substring(m)),(m=f(x,D))!==0&&(u[T][1]=x.substring(x.length-m)+u[T][1],x=x.substring(0,x.length-m),D=D.substring(0,D.length-m)));var L=I+_;D.length===0&&x.length===0?(u.splice(T-L,L),T-=L):D.length===0?(u.splice(T-L,L,[1,x]),T=T-L+1):x.length===0?(u.splice(T-L,L,[S,D]),T=T-L+1):(u.splice(T-L,L,[S,D],[1,x]),T=T-L+2)}T!==0&&u[T-1][0]===0?(u[T-1][1]+=u[T][1],u.splice(T,1)):T++,I=0,_=0,D="",x=""}u[u.length-1][1]===""&&u.pop();var B=!1;for(T=1;T<u.length-1;)u[T-1][0]===0&&u[T+1][0]===0&&(u[T][1].substring(u[T][1].length-u[T-1][1].length)===u[T-1][1]?(u[T][1]=u[T-1][1]+u[T][1].substring(0,u[T][1].length-u[T-1][1].length),u[T+1][1]=u[T-1][1]+u[T+1][1],u.splice(T-1,1),B=!0):u[T][1].substring(0,u[T+1][1].length)==u[T+1][1]&&(u[T-1][1]+=u[T+1][1],u[T][1]=u[T][1].substring(u[T+1][1].length)+u[T+1][1],u.splice(T+1,1),B=!0)),T++;B&&a(u,o)}function l(u){return u>=55296&&u<=56319}function d(u){return u>=56320&&u<=57343}function p(u){return d(u.charCodeAt(0))}function g(u){return l(u.charCodeAt(u.length-1))}function c(u,o,m,T){return g(u)||p(T)?null:function(_){for(var I=[],D=0;D<_.length;D++)_[D][1].length>0&&I.push(_[D]);return I}([[0,u],[S,o],[1,m],[0,T]])}function s(u,o,m){return v(u,o,m,!0)}s.INSERT=1,s.DELETE=S,s.EQUAL=0,k.exports=s},165:function(k,S,v){var A,y;(y=typeof(A=function(){var f,a={};function l(g,c,s){var u=g.getClientRects();if(u.length===2){var o=g.getBoundingClientRect();return u[c][s]<o[s]}return!1}function d(g){if(!g||screen.deviceXDPI===screen.logicalXDPI)return g;if("length"in g)return Array.prototype.map.call(g,d);var c=screen.deviceXDPI/screen.logicalXDPI;return{top:g.top/c,bottom:g.bottom/c,left:g.left/c,right:g.right/c,width:g.width/c,height:g.height/c}}function p(g,c){var s,u=0,o=1024;if(o>=c.length)return Array.prototype.push.apply(g,c);for(;u<c.length;)s=Array.prototype.push.apply(g,Array.prototype.slice.call(c,u,u+o)),u+=o;return s}return a.isBroken=function(){if(f===void 0){var g=document.createElement("p"),c=document.createElement("span"),s=document.createTextNode("aa"),u=document.createTextNode("aa"),o=document.createElement("img");o.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var m=document.createRange();if(f={},g.appendChild(s),g.appendChild(c),c.appendChild(o),c.appendChild(u),document.body.appendChild(g),m.setStart(s,1),m.setEnd(c,0),f.getClientRects=f.getBoundingClientRect=m.getClientRects().length>1,f.getClientRects||(m.setEnd(u,1),f.getClientRects=f.getBoundingClientRect=m.getClientRects().length===2),!f.getBoundingClientRect){m.setEnd(m.startContainer,m.startOffset);var T=m.getBoundingClientRect();f.getBoundingClientRect=T.top===0&&T.left===0}if(document.body.removeChild(g),!f.getBoundingClientRect){var _=document.createElement("p");_.style.width="0px",_.style.fontSize="20px",_.style.whiteSpace="normal",_.style.wordBreak="normal";var I=document.createTextNode("m mm");_.appendChild(I),document.body.appendChild(_),m.setStart(I,1),m.setEnd(I,2),l(m,1,"left")?f.getBoundingClientRect=!0:(m.setStart(I,1),m.setEnd(I,3),l(m,0,"top")&&(f.getBoundingClientRect=!0)),document.body.removeChild(_)}var D=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();f.ieZoom=!!D&&D<=10}return f},a.getClientRects=function(g){var c=this.isBroken();if(c.ieZoom)return d(g.getClientRects());if(!c.getClientRects)return g.getClientRects();var s=[],u=[],o=g.endContainer,m=g.endOffset,T=document.createRange();function _(I){for(var D=0;I=I.previousSibling;)D++;return D}for(;o!==g.commonAncestorContainer;)T.setStart(o,0),T.setEnd(o,m),p(u,T.getClientRects()),m=_(o),o=o.parentNode;return(T=g.cloneRange()).setEnd(o,m),p(s,T.getClientRects()),p(s,u),s},a.getBoundingClientRect=function(g){var c=this.getClientRects(g);if(c.length===0)return null;var s,u=g.getBoundingClientRect(),o=this.isBroken();if(o.ieZoom)return d(u);if(!o.getBoundingClientRect)return u;if(u.width===0&&u.height===0)return c[0];for(var m=0,T=c.length;m<T;m++){var _=c[m];s?(s.left=Math.min(s.left,_.left),s.top=Math.min(s.top,_.top),s.right=Math.max(s.right,_.right),s.bottom=Math.max(s.bottom,_.bottom)):s={left:_.left,top:_.top,right:_.right,bottom:_.bottom}}return s&&(s.width=s.right-s.left,s.height=s.bottom-s.top),s},a})=="function"?A.call(S,v,S,k):A)===void 0||(k.exports=y)},33:(k,S,v)=>{v.r(S),v.d(S,{default:()=>R});var A=function(){if(typeof Map<"u")return Map;function L(B,J){var Y=-1;return B.some(function(le,Z){return le[0]===J&&(Y=Z,!0)}),Y}return function(){function B(){this.__entries__=[]}return Object.defineProperty(B.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),B.prototype.get=function(J){var Y=L(this.__entries__,J),le=this.__entries__[Y];return le&&le[1]},B.prototype.set=function(J,Y){var le=L(this.__entries__,J);~le?this.__entries__[le][1]=Y:this.__entries__.push([J,Y])},B.prototype.delete=function(J){var Y=this.__entries__,le=L(Y,J);~le&&Y.splice(le,1)},B.prototype.has=function(J){return!!~L(this.__entries__,J)},B.prototype.clear=function(){this.__entries__.splice(0)},B.prototype.forEach=function(J,Y){Y===void 0&&(Y=null);for(var le=0,Z=this.__entries__;le<Z.length;le++){var V=Z[le];J.call(Y,V[1],V[0])}},B}()}(),y=typeof window<"u"&&typeof document<"u"&&window.document===document,f=v.g!==void 0&&v.g.Math===Math?v.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),a=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(f):function(L){return setTimeout(function(){return L(Date.now())},1e3/60)},l=["top","right","bottom","left","width","height","size","weight"],d=typeof MutationObserver<"u",p=function(){function L(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(B,J){var Y=!1,le=!1,Z=0;function V(){Y&&(Y=!1,B()),le&&$()}function M(){a(V)}function $(){var F=Date.now();if(Y){if(F-Z<2)return;le=!0}else Y=!0,le=!1,setTimeout(M,20);Z=F}return $}(this.refresh.bind(this))}return L.prototype.addObserver=function(B){~this.observers_.indexOf(B)||this.observers_.push(B),this.connected_||this.connect_()},L.prototype.removeObserver=function(B){var J=this.observers_,Y=J.indexOf(B);~Y&&J.splice(Y,1),!J.length&&this.connected_&&this.disconnect_()},L.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},L.prototype.updateObservers_=function(){var B=this.observers_.filter(function(J){return J.gatherActive(),J.hasActive()});return B.forEach(function(J){return J.broadcastActive()}),B.length>0},L.prototype.connect_=function(){y&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),d?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},L.prototype.disconnect_=function(){y&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},L.prototype.onTransitionEnd_=function(B){var J=B.propertyName,Y=J===void 0?"":J;l.some(function(le){return!!~Y.indexOf(le)})&&this.refresh()},L.getInstance=function(){return this.instance_||(this.instance_=new L),this.instance_},L.instance_=null,L}(),g=function(L,B){for(var J=0,Y=Object.keys(B);J<Y.length;J++){var le=Y[J];Object.defineProperty(L,le,{value:B[le],enumerable:!1,writable:!1,configurable:!0})}return L},c=function(L){return L&&L.ownerDocument&&L.ownerDocument.defaultView||f},s=_(0,0,0,0);function u(L){return parseFloat(L)||0}function o(L){for(var B=[],J=1;J<arguments.length;J++)B[J-1]=arguments[J];return B.reduce(function(Y,le){return Y+u(L["border-"+le+"-width"])},0)}var m=typeof SVGGraphicsElement<"u"?function(L){return L instanceof c(L).SVGGraphicsElement}:function(L){return L instanceof c(L).SVGElement&&typeof L.getBBox=="function"};function T(L){return y?m(L)?function(B){var J=B.getBBox();return _(0,0,J.width,J.height)}(L):function(B){var J=B.clientWidth,Y=B.clientHeight;if(!J&&!Y)return s;var le=c(B).getComputedStyle(B),Z=function(q){for(var W={},ne=0,oe=["top","right","bottom","left"];ne<oe.length;ne++){var ue=oe[ne],we=q["padding-"+ue];W[ue]=u(we)}return W}(le),V=Z.left+Z.right,M=Z.top+Z.bottom,$=u(le.width),F=u(le.height);if(le.boxSizing==="border-box"&&(Math.round($+V)!==J&&($-=o(le,"left","right")+V),Math.round(F+M)!==Y&&(F-=o(le,"top","bottom")+M)),!function(q){return q===c(q).document.documentElement}(B)){var X=Math.round($+V)-J,j=Math.round(F+M)-Y;Math.abs(X)!==1&&($-=X),Math.abs(j)!==1&&(F-=j)}return _(Z.left,Z.top,$,F)}(L):s}function _(L,B,J,Y){return{x:L,y:B,width:J,height:Y}}var I=function(){function L(B){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_(0,0,0,0),this.target=B}return L.prototype.isActive=function(){var B=T(this.target);return this.contentRect_=B,B.width!==this.broadcastWidth||B.height!==this.broadcastHeight},L.prototype.broadcastRect=function(){var B=this.contentRect_;return this.broadcastWidth=B.width,this.broadcastHeight=B.height,B},L}(),D=function(L,B){var J,Y,le,Z,V,M,$,F=(Y=(J=B).x,le=J.y,Z=J.width,V=J.height,M=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,$=Object.create(M.prototype),g($,{x:Y,y:le,width:Z,height:V,top:le,right:Y+Z,bottom:V+le,left:Y}),$);g(this,{target:L,contentRect:F})},x=function(){function L(B,J,Y){if(this.activeObservations_=[],this.observations_=new A,typeof B!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=B,this.controller_=J,this.callbackCtx_=Y}return L.prototype.observe=function(B){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(B instanceof c(B).Element))throw new TypeError('parameter 1 is not of type "Element".');var J=this.observations_;J.has(B)||(J.set(B,new I(B)),this.controller_.addObserver(this),this.controller_.refresh())}},L.prototype.unobserve=function(B){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(B instanceof c(B).Element))throw new TypeError('parameter 1 is not of type "Element".');var J=this.observations_;J.has(B)&&(J.delete(B),J.size||this.controller_.removeObserver(this))}},L.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},L.prototype.gatherActive=function(){var B=this;this.clearActive(),this.observations_.forEach(function(J){J.isActive()&&B.activeObservations_.push(J)})},L.prototype.broadcastActive=function(){if(this.hasActive()){var B=this.callbackCtx_,J=this.activeObservations_.map(function(Y){return new D(Y.target,Y.broadcastRect())});this.callback_.call(B,J,B),this.clearActive()}},L.prototype.clearActive=function(){this.activeObservations_.splice(0)},L.prototype.hasActive=function(){return this.activeObservations_.length>0},L}(),E=typeof WeakMap<"u"?new WeakMap:new A,N=function L(B){if(!(this instanceof L))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var J=p.getInstance(),Y=new x(B,J,this);E.set(this,Y)};["observe","unobserve","disconnect"].forEach(function(L){N.prototype[L]=function(){var B;return(B=E.get(this))[L].apply(B,arguments)}});const R=f.ResizeObserver!==void 0?f.ResizeObserver:N},413:(k,S,v)=>{v.r(S),v.d(S,{default:()=>_});var A=v(379),y=v.n(A),f=v(795),a=v.n(f),l=v(569),d=v.n(l),p=v(565),g=v.n(p),c=v(216),s=v.n(c),u=v(589),o=v.n(u),m=v(582),T={};T.styleTagTransform=o(),T.setAttributes=g(),T.insert=d().bind(null,"head"),T.domAPI=a(),T.insertStyleElement=s(),y()(m.Z,T);const _=m.Z&&m.Z.locals?m.Z.locals:void 0},379:k=>{var S=[];function v(f){for(var a=-1,l=0;l<S.length;l++)if(S[l].identifier===f){a=l;break}return a}function A(f,a){for(var l={},d=[],p=0;p<f.length;p++){var g=f[p],c=a.base?g[0]+a.base:g[0],s=l[c]||0,u="".concat(c," ").concat(s);l[c]=s+1;var o=v(u),m={css:g[1],media:g[2],sourceMap:g[3],supports:g[4],layer:g[5]};if(o!==-1)S[o].references++,S[o].updater(m);else{var T=y(m,a);a.byIndex=p,S.splice(p,0,{identifier:u,updater:T,references:1})}d.push(u)}return d}function y(f,a){var l=a.domAPI(a);return l.update(f),function(d){if(d){if(d.css===f.css&&d.media===f.media&&d.sourceMap===f.sourceMap&&d.supports===f.supports&&d.layer===f.layer)return;l.update(f=d)}else l.remove()}}k.exports=function(f,a){var l=A(f=f||[],a=a||{});return function(d){d=d||[];for(var p=0;p<l.length;p++){var g=v(l[p]);S[g].references--}for(var c=A(d,a),s=0;s<l.length;s++){var u=v(l[s]);S[u].references===0&&(S[u].updater(),S.splice(u,1))}l=c}}},569:k=>{var S={};k.exports=function(v,A){var y=function(f){if(S[f]===void 0){var a=document.querySelector(f);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch{a=null}S[f]=a}return S[f]}(v);if(!y)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");y.appendChild(A)}},216:k=>{k.exports=function(S){var v=document.createElement("style");return S.setAttributes(v,S.attributes),S.insert(v,S.options),v}},565:(k,S,v)=>{k.exports=function(A){var y=v.nc;y&&A.setAttribute("nonce",y)}},795:k=>{k.exports=function(S){var v=S.insertStyleElement(S);return{update:function(A){(function(y,f,a){var l="";a.supports&&(l+="@supports (".concat(a.supports,") {")),a.media&&(l+="@media ".concat(a.media," {"));var d=a.layer!==void 0;d&&(l+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),l+=a.css,d&&(l+="}"),a.media&&(l+="}"),a.supports&&(l+="}");var p=a.sourceMap;p&&typeof btoa<"u"&&(l+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(p))))," */")),f.styleTagTransform(l,y,f.options)})(v,S,A)},remove:function(){(function(A){if(A.parentNode===null)return!1;A.parentNode.removeChild(A)})(v)}}}},589:k=>{k.exports=function(S,v){if(v.styleSheet)v.styleSheet.cssText=S;else{for(;v.firstChild;)v.removeChild(v.firstChild);v.appendChild(document.createTextNode(S))}}},621:(k,S,v)=>{var A;(function(y){var f=/^\s+/,a=/\s+$/,l=0,d=y.round,p=y.min,g=y.max,c=y.random;function s(G,ae){if(ae=ae||{},(G=G||"")instanceof s)return G;if(!(this instanceof s))return new s(G,ae);var ie=function(H){var re,ge,me,ce={r:0,g:0,b:0},Oe=1,ke=null,Le=null,Ge=null,nt=!1,Ue=!1;return typeof H=="string"&&(H=function(Ke){Ke=Ke.replace(f,"").replace(a,"").toLowerCase();var be,Xe=!1;if(V[Ke])Ke=V[Ke],Xe=!0;else if(Ke=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(be=Ee.rgb.exec(Ke))?{r:be[1],g:be[2],b:be[3]}:(be=Ee.rgba.exec(Ke))?{r:be[1],g:be[2],b:be[3],a:be[4]}:(be=Ee.hsl.exec(Ke))?{h:be[1],s:be[2],l:be[3]}:(be=Ee.hsla.exec(Ke))?{h:be[1],s:be[2],l:be[3],a:be[4]}:(be=Ee.hsv.exec(Ke))?{h:be[1],s:be[2],v:be[3]}:(be=Ee.hsva.exec(Ke))?{h:be[1],s:be[2],v:be[3],a:be[4]}:(be=Ee.hex8.exec(Ke))?{r:j(be[1]),g:j(be[2]),b:j(be[3]),a:oe(be[4]),format:Xe?"name":"hex8"}:(be=Ee.hex6.exec(Ke))?{r:j(be[1]),g:j(be[2]),b:j(be[3]),format:Xe?"name":"hex"}:(be=Ee.hex4.exec(Ke))?{r:j(be[1]+""+be[1]),g:j(be[2]+""+be[2]),b:j(be[3]+""+be[3]),a:oe(be[4]+""+be[4]),format:Xe?"name":"hex8"}:!!(be=Ee.hex3.exec(Ke))&&{r:j(be[1]+""+be[1]),g:j(be[2]+""+be[2]),b:j(be[3]+""+be[3]),format:Xe?"name":"hex"}}(H)),typeof H=="object"&&(xe(H.r)&&xe(H.g)&&xe(H.b)?(re=H.r,ge=H.g,me=H.b,ce={r:255*F(re,255),g:255*F(ge,255),b:255*F(me,255)},nt=!0,Ue=String(H.r).substr(-1)==="%"?"prgb":"rgb"):xe(H.h)&&xe(H.s)&&xe(H.v)?(ke=W(H.s),Le=W(H.v),ce=function(Ke,be,Xe){Ke=6*F(Ke,360),be=F(be,100),Xe=F(Xe,100);var Pt=y.floor(Ke),Jt=Ke-Pt,Mt=Xe*(1-be),At=Xe*(1-Jt*be),Vt=Xe*(1-(1-Jt)*be),Kt=Pt%6;return{r:255*[Xe,At,Mt,Mt,Vt,Xe][Kt],g:255*[Vt,Xe,Xe,At,Mt,Mt][Kt],b:255*[Mt,Mt,Vt,Xe,Xe,At][Kt]}}(H.h,ke,Le),nt=!0,Ue="hsv"):xe(H.h)&&xe(H.s)&&xe(H.l)&&(ke=W(H.s),Ge=W(H.l),ce=function(Ke,be,Xe){var Pt,Jt,Mt;function At(kt,Ht,Tt){return Tt<0&&(Tt+=1),Tt>1&&(Tt-=1),Tt<1/6?kt+6*(Ht-kt)*Tt:Tt<.5?Ht:Tt<2/3?kt+(Ht-kt)*(2/3-Tt)*6:kt}if(Ke=F(Ke,360),be=F(be,100),Xe=F(Xe,100),be===0)Pt=Jt=Mt=Xe;else{var Vt=Xe<.5?Xe*(1+be):Xe+be-Xe*be,Kt=2*Xe-Vt;Pt=At(Kt,Vt,Ke+1/3),Jt=At(Kt,Vt,Ke),Mt=At(Kt,Vt,Ke-1/3)}return{r:255*Pt,g:255*Jt,b:255*Mt}}(H.h,ke,Ge),nt=!0,Ue="hsl"),H.hasOwnProperty("a")&&(Oe=H.a)),Oe=$(Oe),{ok:nt,format:H.format||Ue,r:p(255,g(ce.r,0)),g:p(255,g(ce.g,0)),b:p(255,g(ce.b,0)),a:Oe}}(G);this._originalInput=G,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=d(100*this._a)/100,this._format=ae.format||ie.format,this._gradientType=ae.gradientType,this._r<1&&(this._r=d(this._r)),this._g<1&&(this._g=d(this._g)),this._b<1&&(this._b=d(this._b)),this._ok=ie.ok,this._tc_id=l++}function u(G,ae,ie){G=F(G,255),ae=F(ae,255),ie=F(ie,255);var H,re,ge=g(G,ae,ie),me=p(G,ae,ie),ce=(ge+me)/2;if(ge==me)H=re=0;else{var Oe=ge-me;switch(re=ce>.5?Oe/(2-ge-me):Oe/(ge+me),ge){case G:H=(ae-ie)/Oe+(ae<ie?6:0);break;case ae:H=(ie-G)/Oe+2;break;case ie:H=(G-ae)/Oe+4}H/=6}return{h:H,s:re,l:ce}}function o(G,ae,ie){G=F(G,255),ae=F(ae,255),ie=F(ie,255);var H,re,ge=g(G,ae,ie),me=p(G,ae,ie),ce=ge,Oe=ge-me;if(re=ge===0?0:Oe/ge,ge==me)H=0;else{switch(ge){case G:H=(ae-ie)/Oe+(ae<ie?6:0);break;case ae:H=(ie-G)/Oe+2;break;case ie:H=(G-ae)/Oe+4}H/=6}return{h:H,s:re,v:ce}}function m(G,ae,ie,H){var re=[q(d(G).toString(16)),q(d(ae).toString(16)),q(d(ie).toString(16))];return H&&re[0].charAt(0)==re[0].charAt(1)&&re[1].charAt(0)==re[1].charAt(1)&&re[2].charAt(0)==re[2].charAt(1)?re[0].charAt(0)+re[1].charAt(0)+re[2].charAt(0):re.join("")}function T(G,ae,ie,H){return[q(ne(H)),q(d(G).toString(16)),q(d(ae).toString(16)),q(d(ie).toString(16))].join("")}function _(G,ae){ae=ae===0?0:ae||10;var ie=s(G).toHsl();return ie.s-=ae/100,ie.s=X(ie.s),s(ie)}function I(G,ae){ae=ae===0?0:ae||10;var ie=s(G).toHsl();return ie.s+=ae/100,ie.s=X(ie.s),s(ie)}function D(G){return s(G).desaturate(100)}function x(G,ae){ae=ae===0?0:ae||10;var ie=s(G).toHsl();return ie.l+=ae/100,ie.l=X(ie.l),s(ie)}function E(G,ae){ae=ae===0?0:ae||10;var ie=s(G).toRgb();return ie.r=g(0,p(255,ie.r-d(-ae/100*255))),ie.g=g(0,p(255,ie.g-d(-ae/100*255))),ie.b=g(0,p(255,ie.b-d(-ae/100*255))),s(ie)}function N(G,ae){ae=ae===0?0:ae||10;var ie=s(G).toHsl();return ie.l-=ae/100,ie.l=X(ie.l),s(ie)}function R(G,ae){var ie=s(G).toHsl(),H=(ie.h+ae)%360;return ie.h=H<0?360+H:H,s(ie)}function L(G){var ae=s(G).toHsl();return ae.h=(ae.h+180)%360,s(ae)}function B(G){var ae=s(G).toHsl(),ie=ae.h;return[s(G),s({h:(ie+120)%360,s:ae.s,l:ae.l}),s({h:(ie+240)%360,s:ae.s,l:ae.l})]}function J(G){var ae=s(G).toHsl(),ie=ae.h;return[s(G),s({h:(ie+90)%360,s:ae.s,l:ae.l}),s({h:(ie+180)%360,s:ae.s,l:ae.l}),s({h:(ie+270)%360,s:ae.s,l:ae.l})]}function Y(G){var ae=s(G).toHsl(),ie=ae.h;return[s(G),s({h:(ie+72)%360,s:ae.s,l:ae.l}),s({h:(ie+216)%360,s:ae.s,l:ae.l})]}function le(G,ae,ie){ae=ae||6,ie=ie||30;var H=s(G).toHsl(),re=360/ie,ge=[s(G)];for(H.h=(H.h-(re*ae>>1)+720)%360;--ae;)H.h=(H.h+re)%360,ge.push(s(H));return ge}function Z(G,ae){ae=ae||6;for(var ie=s(G).toHsv(),H=ie.h,re=ie.s,ge=ie.v,me=[],ce=1/ae;ae--;)me.push(s({h:H,s:re,v:ge})),ge=(ge+ce)%1;return me}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var G=this.toRgb();return(299*G.r+587*G.g+114*G.b)/1e3},getLuminance:function(){var G,ae,ie,H=this.toRgb();return G=H.r/255,ae=H.g/255,ie=H.b/255,.2126*(G<=.03928?G/12.92:y.pow((G+.055)/1.055,2.4))+.7152*(ae<=.03928?ae/12.92:y.pow((ae+.055)/1.055,2.4))+.0722*(ie<=.03928?ie/12.92:y.pow((ie+.055)/1.055,2.4))},setAlpha:function(G){return this._a=$(G),this._roundA=d(100*this._a)/100,this},toHsv:function(){var G=o(this._r,this._g,this._b);return{h:360*G.h,s:G.s,v:G.v,a:this._a}},toHsvString:function(){var G=o(this._r,this._g,this._b),ae=d(360*G.h),ie=d(100*G.s),H=d(100*G.v);return this._a==1?"hsv("+ae+", "+ie+"%, "+H+"%)":"hsva("+ae+", "+ie+"%, "+H+"%, "+this._roundA+")"},toHsl:function(){var G=u(this._r,this._g,this._b);return{h:360*G.h,s:G.s,l:G.l,a:this._a}},toHslString:function(){var G=u(this._r,this._g,this._b),ae=d(360*G.h),ie=d(100*G.s),H=d(100*G.l);return this._a==1?"hsl("+ae+", "+ie+"%, "+H+"%)":"hsla("+ae+", "+ie+"%, "+H+"%, "+this._roundA+")"},toHex:function(G){return m(this._r,this._g,this._b,G)},toHexString:function(G){return"#"+this.toHex(G)},toHex8:function(G){return function(ae,ie,H,re,ge){var me=[q(d(ae).toString(16)),q(d(ie).toString(16)),q(d(H).toString(16)),q(ne(re))];return ge&&me[0].charAt(0)==me[0].charAt(1)&&me[1].charAt(0)==me[1].charAt(1)&&me[2].charAt(0)==me[2].charAt(1)&&me[3].charAt(0)==me[3].charAt(1)?me[0].charAt(0)+me[1].charAt(0)+me[2].charAt(0)+me[3].charAt(0):me.join("")}(this._r,this._g,this._b,this._a,G)},toHex8String:function(G){return"#"+this.toHex8(G)},toRgb:function(){return{r:d(this._r),g:d(this._g),b:d(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+d(this._r)+", "+d(this._g)+", "+d(this._b)+")":"rgba("+d(this._r)+", "+d(this._g)+", "+d(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:d(100*F(this._r,255))+"%",g:d(100*F(this._g,255))+"%",b:d(100*F(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+d(100*F(this._r,255))+"%, "+d(100*F(this._g,255))+"%, "+d(100*F(this._b,255))+"%)":"rgba("+d(100*F(this._r,255))+"%, "+d(100*F(this._g,255))+"%, "+d(100*F(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(M[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(G){var ae="#"+T(this._r,this._g,this._b,this._a),ie=ae,H=this._gradientType?"GradientType = 1, ":"";if(G){var re=s(G);ie="#"+T(re._r,re._g,re._b,re._a)}return"progid:DXImageTransform.Microsoft.gradient("+H+"startColorstr="+ae+",endColorstr="+ie+")"},toString:function(G){var ae=!!G;G=G||this._format;var ie=!1,H=this._a<1&&this._a>=0;return ae||!H||G!=="hex"&&G!=="hex6"&&G!=="hex3"&&G!=="hex4"&&G!=="hex8"&&G!=="name"?(G==="rgb"&&(ie=this.toRgbString()),G==="prgb"&&(ie=this.toPercentageRgbString()),G!=="hex"&&G!=="hex6"||(ie=this.toHexString()),G==="hex3"&&(ie=this.toHexString(!0)),G==="hex4"&&(ie=this.toHex8String(!0)),G==="hex8"&&(ie=this.toHex8String()),G==="name"&&(ie=this.toName()),G==="hsl"&&(ie=this.toHslString()),G==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString()):G==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return s(this.toString())},_applyModification:function(G,ae){var ie=G.apply(null,[this].concat([].slice.call(ae)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(E,arguments)},darken:function(){return this._applyModification(N,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(I,arguments)},greyscale:function(){return this._applyModification(D,arguments)},spin:function(){return this._applyModification(R,arguments)},_applyCombination:function(G,ae){return G.apply(null,[this].concat([].slice.call(ae)))},analogous:function(){return this._applyCombination(le,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(Z,arguments)},splitcomplement:function(){return this._applyCombination(Y,arguments)},triad:function(){return this._applyCombination(B,arguments)},tetrad:function(){return this._applyCombination(J,arguments)}},s.fromRatio=function(G,ae){if(typeof G=="object"){var ie={};for(var H in G)G.hasOwnProperty(H)&&(ie[H]=H==="a"?G[H]:W(G[H]));G=ie}return s(G,ae)},s.equals=function(G,ae){return!(!G||!ae)&&s(G).toRgbString()==s(ae).toRgbString()},s.random=function(){return s.fromRatio({r:c(),g:c(),b:c()})},s.mix=function(G,ae,ie){ie=ie===0?0:ie||50;var H=s(G).toRgb(),re=s(ae).toRgb(),ge=ie/100;return s({r:(re.r-H.r)*ge+H.r,g:(re.g-H.g)*ge+H.g,b:(re.b-H.b)*ge+H.b,a:(re.a-H.a)*ge+H.a})},s.readability=function(G,ae){var ie=s(G),H=s(ae);return(y.max(ie.getLuminance(),H.getLuminance())+.05)/(y.min(ie.getLuminance(),H.getLuminance())+.05)},s.isReadable=function(G,ae,ie){var H,re,ge,me,ce,Oe=s.readability(G,ae);switch(re=!1,(ge=ie,(me=((ge=ge||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&me!=="AAA"&&(me="AA"),(ce=(ge.size||"small").toLowerCase())!=="small"&&ce!=="large"&&(ce="small"),H={level:me,size:ce}).level+H.size){case"AAsmall":case"AAAlarge":re=Oe>=4.5;break;case"AAlarge":re=Oe>=3;break;case"AAAsmall":re=Oe>=7}return re},s.mostReadable=function(G,ae,ie){var H,re,ge,me,ce=null,Oe=0;re=(ie=ie||{}).includeFallbackColors,ge=ie.level,me=ie.size;for(var ke=0;ke<ae.length;ke++)(H=s.readability(G,ae[ke]))>Oe&&(Oe=H,ce=s(ae[ke]));return s.isReadable(G,ce,{level:ge,size:me})||!re?ce:(ie.includeFallbackColors=!1,s.mostReadable(G,["#fff","#000"],ie))};var V=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=s.hexNames=function(G){var ae={};for(var ie in G)G.hasOwnProperty(ie)&&(ae[G[ie]]=ie);return ae}(V);function $(G){return G=parseFloat(G),(isNaN(G)||G<0||G>1)&&(G=1),G}function F(G,ae){(function(H){return typeof H=="string"&&H.indexOf(".")!=-1&&parseFloat(H)===1})(G)&&(G="100%");var ie=function(H){return typeof H=="string"&&H.indexOf("%")!=-1}(G);return G=p(ae,g(0,parseFloat(G))),ie&&(G=parseInt(G*ae,10)/100),y.abs(G-ae)<1e-6?1:G%ae/parseFloat(ae)}function X(G){return p(1,g(0,G))}function j(G){return parseInt(G,16)}function q(G){return G.length==1?"0"+G:""+G}function W(G){return G<=1&&(G=100*G+"%"),G}function ne(G){return y.round(255*parseFloat(G)).toString(16)}function oe(G){return j(G)/255}var ue,we,Ie,Ee=(we="[\\s|\\(]+("+(ue="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")\\s*\\)?",Ie="[\\s|\\(]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")\\s*\\)?",{CSS_UNIT:new RegExp(ue),rgb:new RegExp("rgb"+we),rgba:new RegExp("rgba"+Ie),hsl:new RegExp("hsl"+we),hsla:new RegExp("hsla"+Ie),hsv:new RegExp("hsv"+we),hsva:new RegExp("hsva"+Ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function xe(G){return!!Ee.CSS_UNIT.exec(G)}k.exports?k.exports=s:(A=function(){return s}.call(S,v,S,k))===void 0||(k.exports=A)})(Math)},607:function(k,S,v){var A=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(S,"__esModule",{value:!0}),S.Cursor=S.default=void 0;var y=A(v(678));S.default=y.default;var f=A(v(353));S.Cursor=f.default,v(413)},353:(k,S,v)=>{Object.defineProperty(S,"__esModule",{value:!0});var A=v(621),y=function(){function f(a,l,d){this.id=a,this.name=l,this.color=d,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return f.prototype.build=function(a){var l=document.createElement(f.CONTAINER_ELEMENT_TAG);l.classList.add(f.CURSOR_CLASS),l.id="ql-cursor-".concat(this.id),l.innerHTML=a.template;var d=l.getElementsByClassName(f.SELECTION_CLASS)[0],p=l.getElementsByClassName(f.CARET_CONTAINER_CLASS)[0],g=p.getElementsByClassName(f.CARET_CLASS)[0],c=l.getElementsByClassName(f.FLAG_CLASS)[0];return c.style.backgroundColor=this.color,g.style.backgroundColor=this.color,l.getElementsByClassName(f.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(a.hideDelayMs,"ms"),this._hideSpeedMs=a.hideSpeedMs,this._positionFlag=a.positionFlag,c.style.transitionDelay=this._hideDelay,c.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=l,this._selectionEl=d,this._caretEl=p,this._flagEl=c,p.addEventListener("mouseover",this._setHoverState),this._el},f.prototype.show=function(){this._el.classList.remove(f.HIDDEN_CLASS)},f.prototype.hide=function(){this._el.classList.add(f.HIDDEN_CLASS)},f.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},f.prototype.toggleNearCursor=function(a,l){var d=this._getCoordinates(),p=d.left,g=d.right,c=d.top,s=d.bottom,u=a>=p&&a<=g&&l>=c&&l<=s;return this._caretEl.classList.toggle(f.CONTAINER_HOVER_CLASS,u),u},f.prototype.toggleFlag=function(a){var l=this;this._caretEl.classList.toggle(f.CONTAINER_HOVER_CLASS,a)||(this._flagEl.classList.add(f.NO_DELAY_CLASS),setTimeout(function(){return l._flagEl.classList.remove(f.NO_DELAY_CLASS)},this._hideSpeedMs))},f.prototype.updateCaret=function(a,l){this._caretEl.style.top="".concat(a.top,"px"),this._caretEl.style.left="".concat(a.left,"px"),this._caretEl.style.height="".concat(a.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,a,l):this._updateCaretFlag(a,l)},f.prototype.updateSelection=function(a,l){var d=this;this._clearSelection(),a=a||[],a=Array.from(a),a=this._sanitize(a),(a=this._sortByDomPosition(a)).forEach(function(p){return d._addSelection(p,l)})},f.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},f.prototype._toggleOpenedCursor=function(a){var l=this.toggleNearCursor(a.clientX,a.clientY);this._caretEl.classList.toggle(f.CONTAINER_NO_POINTER_CLASS,l),l||document.removeEventListener("mousemove",this._toggleOpenedCursor)},f.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},f.prototype._updateCaretFlag=function(a,l){this._flagEl.style.width="";var d=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(f.FLAG_FLIPPED_CLASS),a.left>l.width-d.width&&this._flagEl.classList.add(f.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(a.left,"px"),this._flagEl.style.top="".concat(a.top,"px"),this._flagEl.style.width="".concat(Math.ceil(d.width),"px")},f.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},f.prototype._addSelection=function(a,l){var d=this._selectionBlock(a,l);this._selectionEl.appendChild(d)},f.prototype._selectionBlock=function(a,l){var d=document.createElement(f.SELECTION_ELEMENT_TAG);return d.classList.add(f.SELECTION_BLOCK_CLASS),d.style.top="".concat(a.top-l.top,"px"),d.style.left="".concat(a.left-l.left,"px"),d.style.width="".concat(a.width,"px"),d.style.height="".concat(a.height,"px"),d.style.backgroundColor=A(this.color).setAlpha(.3).toString(),d},f.prototype._sortByDomPosition=function(a){return a.sort(function(l,d){return l.top===d.top?l.left-d.left:l.top-d.top})},f.prototype._sanitize=function(a){var l=this,d=new Set;return a.filter(function(p){if(!p.width||!p.height)return!1;var g=l._serialize(p);return!d.has(g)&&(d.add(g),!0)})},f.prototype._serialize=function(a){return["top:".concat(a.top),"right:".concat(a.right),"bottom:".concat(a.bottom),"left:".concat(a.left)].join(";")},f.CONTAINER_ELEMENT_TAG="SPAN",f.SELECTION_ELEMENT_TAG="SPAN",f.CURSOR_CLASS="ql-cursor",f.SELECTION_CLASS="ql-cursor-selections",f.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",f.CARET_CLASS="ql-cursor-caret",f.CARET_CONTAINER_CLASS="ql-cursor-caret-container",f.CONTAINER_HOVER_CLASS="hover",f.CONTAINER_NO_POINTER_CLASS="no-pointer",f.FLAG_CLASS="ql-cursor-flag",f.FLAG_FLIPPED_CLASS="flag-flipped",f.NAME_CLASS="ql-cursor-name",f.HIDDEN_CLASS="hidden",f.NO_DELAY_CLASS="no-delay",f}();S.default=y},678:function(k,S,v){var A=this&&this.__createBinding||(Object.create?function(u,o,m,T){T===void 0&&(T=m),Object.defineProperty(u,T,{enumerable:!0,get:function(){return o[m]}})}:function(u,o,m,T){T===void 0&&(T=m),u[T]=o[m]}),y=this&&this.__setModuleDefault||(Object.create?function(u,o){Object.defineProperty(u,"default",{enumerable:!0,value:o})}:function(u,o){u.default=o}),f=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var o={};if(u!=null)for(var m in u)m!=="default"&&Object.prototype.hasOwnProperty.call(u,m)&&A(o,u,m);return y(o,u),o},a=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(S,"__esModule",{value:!0});var l=a(v(353)),d=f(v(165)),p=a(v(338)),g=a(v(33)),c=v(895),s=function(){function u(o,m){m===void 0&&(m={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=o,this.options=this._setDefaults(m),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return u.prototype.createCursor=function(o,m,T){var _=this._cursors[o];if(!_){_=new l.default(o,m,T),this._cursors[o]=_;var I=_.build(this.options);this._container.appendChild(I)}return _},u.prototype.moveCursor=function(o,m){var T=this._cursors[o];T&&(T.range=m,this._updateCursor(T))},u.prototype.removeCursor=function(o){var m=this._cursors[o];m&&(m.remove(),delete this._cursors[o])},u.prototype.update=function(){var o=this;this.cursors().forEach(function(m){return o._updateCursor(m)})},u.prototype.clearCursors=function(){var o=this;this.cursors().forEach(function(m){return o.removeCursor(m.id)})},u.prototype.toggleFlag=function(o,m){var T=this._cursors[o];T&&T.toggleFlag(m)},u.prototype.cursors=function(){var o=this;return Object.keys(this._cursors).map(function(m){return o._cursors[m]})},u.prototype._registerSelectionChangeListeners=function(){var o=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(m){o._currentSelection=m})},u.prototype._registerTextChangeListener=function(){var o=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(m){return o._handleTextChange(m)})},u.prototype._registerDomListeners=function(){var o=this,m=this.quill.container.getElementsByClassName("ql-editor")[0];m.addEventListener("scroll",function(){return o.update()}),m.addEventListener("touchstart",this._handleCursorTouch)},u.prototype._handleCursorTouch=function(o){var m=this;this.cursors().forEach(function(T){T.toggleNearCursor(o.pageX,o.pageY),setTimeout(function(){return T.toggleFlag(!1)},m.options.hideDelayMs)})},u.prototype._registerResizeObserver=function(){var o=this;if(!this._isObserving){var m=this.quill.container.getElementsByClassName("ql-editor")[0],T=new g.default(function(_){_[0].target.isConnected||(T.disconnect(),o._isObserving=!1),o.update()});T.observe(m),this._isObserving=!0}},u.prototype._updateCursor=function(o){if(this._registerResizeObserver(),!o.range)return o.hide();var m=this._indexWithinQuillBounds(o.range.index),T=this._indexWithinQuillBounds(o.range.index+o.range.length),_=this.quill.getLeaf(m),I=this.quill.getLeaf(T);if(!this._leafIsValid(_)||!this._leafIsValid(I))return o.hide();o.show();var D=this._boundsContainer.getBoundingClientRect(),x=this.quill.getBounds(T);o.updateCaret(x,D);var E=this._lineRanges(o,_,I).reduce(function(N,R){return N.concat(Array.from(d.getClientRects(R)))},[]);o.updateSelection(E,D)},u.prototype._indexWithinQuillBounds=function(o){var m=this.quill.getLength(),T=m?m-1:0;return o=Math.max(o,0),Math.min(o,T)},u.prototype._leafIsValid=function(o){return o&&o[0]&&o[0].domNode&&o[1]>=0},u.prototype._handleTextChange=function(o){var m=this;window.setTimeout(function(){m.options.transformOnTextChange&&m._transformCursors(o),m.options.selectionChangeSource&&(m._emitSelection(),m.update())})},u.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},u.prototype._setDefaults=function(o){return(o=Object.assign({},o)).template||(o.template=u.DEFAULTS.template),o.containerClass||(o.containerClass=u.DEFAULTS.containerClass),o.selectionChangeSource!==null&&(o.selectionChangeSource||(o.selectionChangeSource=u.DEFAULTS.selectionChangeSource)),o.hideDelayMs=Number.isInteger(o.hideDelayMs)?o.hideDelayMs:u.DEFAULTS.hideDelayMs,o.hideSpeedMs=Number.isInteger(o.hideSpeedMs)?o.hideSpeedMs:u.DEFAULTS.hideSpeedMs,o.transformOnTextChange=!!o.transformOnTextChange,o},u.prototype._lineRanges=function(o,m,T){var _=this.quill.getLines(o.range);return _.reduce(function(I,D,x){if(!D.children){var E=document.createRange();return E.selectNode(D.domNode),I.concat(E)}var N=x===0?m:D.path(0).pop(),R=N[0],L=N[1],B=x===_.length-1?T:D.path(D.length()-1).pop(),J=B[0],Y=B[1],le=document.createRange();return R.domNode.nodeType===Node.TEXT_NODE?le.setStart(R.domNode,L):le.setStartBefore(R.domNode),J.domNode.nodeType===Node.TEXT_NODE?le.setEnd(J.domNode,Y):le.setEndAfter(J.domNode),I.concat(le)},[])},u.prototype._transformCursors=function(o){var m=this;o=new c(o),this.cursors().filter(function(T){return T.range}).forEach(function(T){T.range.index=o.transformPosition(T.range.index),m._updateCursor(T)})},u.DEFAULTS={template:p.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},u}();S.default=s},338:function(k,S,v){var A=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(S,"__esModule",{value:!0});var y=A(v(353)),f=`
  <span class="`.concat(y.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(y.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(y.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(y.default.FLAG_CLASS,`">
    <small class="`).concat(y.default.NAME_CLASS,`"></small>
  </div>
`);S.default=f}},C={};function O(k){var S=C[k];if(S!==void 0)return S.exports;var v=C[k]={id:k,loaded:!1,exports:{}};return z[k].call(v.exports,v,v.exports,O),v.loaded=!0,v.exports}O.n=k=>{var S=k&&k.__esModule?()=>k.default:()=>k;return O.d(S,{a:S}),S},O.d=(k,S)=>{for(var v in S)O.o(S,v)&&!O.o(k,v)&&Object.defineProperty(k,v,{enumerable:!0,get:S[v]})},O.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),O.o=(k,S)=>Object.prototype.hasOwnProperty.call(k,S),O.r=k=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},O.nmd=k=>(k.paths=[],k.children||(k.children=[]),k),O.nc=void 0;var w=O(607);return w.default})())})(ia);const du=yo(ia.exports);var Ye=globalThis&&globalThis.__classPrivateFieldSet||function(Be,fe,z){if(!fe.has(Be))throw new TypeError("attempted to set private field on non-instance");return fe.set(Be,z),z},Ce=globalThis&&globalThis.__classPrivateFieldGet||function(Be,fe){if(!fe.has(Be))throw new TypeError("attempted to get private field on non-instance");return fe.get(Be)},cr,Nr,kn,Wr,vi,Bn,qn,jn,Fn,Un,$n,zn,Jn,Ir,Gr,fr,Fi,hr;const gu=function(Be){var fe=131,z=137,C=0;Be+="x";var O=Math.floor(9007199254740991/z);for(let w=0;w<Be.length;w++)C>O&&(C=Math.floor(C/z)),C=C*fe+Be.charCodeAt(w);return C},De="0123456789abcdef".split(""),pu=[-2147483648,8388608,32768,128],On=[24,16,8,0],ji=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Lt=[];class mu{constructor(fe=!1,z=!1){cr.set(this,void 0),Nr.set(this,void 0),kn.set(this,void 0),Wr.set(this,void 0),vi.set(this,void 0),Bn.set(this,void 0),qn.set(this,void 0),jn.set(this,void 0),Fn.set(this,void 0),Un.set(this,void 0),$n.set(this,void 0),zn.set(this,void 0),Jn.set(this,void 0),Ir.set(this,void 0),Gr.set(this,void 0),fr.set(this,void 0),Fi.set(this,0),hr.set(this,void 0),this.init(fe,z)}init(fe,z){z?(Lt[0]=Lt[16]=Lt[1]=Lt[2]=Lt[3]=Lt[4]=Lt[5]=Lt[6]=Lt[7]=Lt[8]=Lt[9]=Lt[10]=Lt[11]=Lt[12]=Lt[13]=Lt[14]=Lt[15]=0,Ye(this,Nr,Lt)):Ye(this,Nr,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),fe?(Ye(this,Bn,3238371032),Ye(this,qn,914150663),Ye(this,jn,812702999),Ye(this,Fn,4144912697),Ye(this,Un,4290775857),Ye(this,$n,1750603025),Ye(this,zn,1694076839),Ye(this,Jn,3204075428)):(Ye(this,Bn,1779033703),Ye(this,qn,3144134277),Ye(this,jn,1013904242),Ye(this,Fn,2773480762),Ye(this,Un,1359893119),Ye(this,$n,2600822924),Ye(this,zn,528734635),Ye(this,Jn,1541459225)),Ye(this,cr,Ye(this,hr,Ye(this,kn,Ye(this,Gr,0)))),Ye(this,Wr,Ye(this,Ir,!1)),Ye(this,vi,!0),Ye(this,fr,fe)}update(fe){if(Ce(this,Wr))return this;let z;fe instanceof ArrayBuffer?z=new Uint8Array(fe):z=fe;let C=0;const O=z.length,w=Ce(this,Nr);for(;C<O;){let k;if(Ce(this,Ir)&&(Ye(this,Ir,!1),w[0]=Ce(this,cr),w[16]=w[1]=w[2]=w[3]=w[4]=w[5]=w[6]=w[7]=w[8]=w[9]=w[10]=w[11]=w[12]=w[13]=w[14]=w[15]=0),typeof z!="string")for(k=Ce(this,hr);C<O&&k<64;++C)w[k>>2]|=z[C]<<On[k++&3];else for(k=Ce(this,hr);C<O&&k<64;++C){let S=z.charCodeAt(C);S<128?w[k>>2]|=S<<On[k++&3]:S<2048?(w[k>>2]|=(192|S>>6)<<On[k++&3],w[k>>2]|=(128|S&63)<<On[k++&3]):S<55296||S>=57344?(w[k>>2]|=(224|S>>12)<<On[k++&3],w[k>>2]|=(128|S>>6&63)<<On[k++&3],w[k>>2]|=(128|S&63)<<On[k++&3]):(S=65536+((S&1023)<<10|z.charCodeAt(++C)&1023),w[k>>2]|=(240|S>>18)<<On[k++&3],w[k>>2]|=(128|S>>12&63)<<On[k++&3],w[k>>2]|=(128|S>>6&63)<<On[k++&3],w[k>>2]|=(128|S&63)<<On[k++&3])}Ye(this,Fi,k),Ye(this,kn,Ce(this,kn)+(k-Ce(this,hr))),k>=64?(Ye(this,cr,w[16]),Ye(this,hr,k-64),this.hash(),Ye(this,Ir,!0)):Ye(this,hr,k)}return Ce(this,kn)>4294967295&&(Ye(this,Gr,Ce(this,Gr)+(Ce(this,kn)/4294967296<<0)),Ye(this,kn,Ce(this,kn)%4294967296)),this}finalize(){if(Ce(this,Wr))return;Ye(this,Wr,!0);const fe=Ce(this,Nr),z=Ce(this,Fi);fe[16]=Ce(this,cr),fe[z>>2]|=pu[z&3],Ye(this,cr,fe[16]),z>=56&&(Ce(this,Ir)||this.hash(),fe[0]=Ce(this,cr),fe[16]=fe[1]=fe[2]=fe[3]=fe[4]=fe[5]=fe[6]=fe[7]=fe[8]=fe[9]=fe[10]=fe[11]=fe[12]=fe[13]=fe[14]=fe[15]=0),fe[14]=Ce(this,Gr)<<3|Ce(this,kn)>>>29,fe[15]=Ce(this,kn)<<3,this.hash()}hash(){let fe=Ce(this,Bn),z=Ce(this,qn),C=Ce(this,jn),O=Ce(this,Fn),w=Ce(this,Un),k=Ce(this,$n),S=Ce(this,zn),v=Ce(this,Jn);const A=Ce(this,Nr);let y,f,a,l,d,p,g,c,s,u;for(let o=16;o<64;++o)l=A[o-15],y=(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3,l=A[o-2],f=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,A[o]=A[o-16]+y+A[o-7]+f<<0;u=z&C;for(let o=0;o<64;o+=4)Ce(this,vi)?(Ce(this,fr)?(g=300032,l=A[0]-1413257819,v=l-150054599<<0,O=l+24177077<<0):(g=704751109,l=A[0]-210244248,v=l-1521486534<<0,O=l+143694565<<0),Ye(this,vi,!1)):(y=(fe>>>2|fe<<30)^(fe>>>13|fe<<19)^(fe>>>22|fe<<10),f=(w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7),g=fe&z,a=g^fe&C^u,p=w&k^~w&S,l=v+f+p+ji[o]+A[o],d=y+a,v=O+l<<0,O=l+d<<0),y=(O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10),f=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),c=O&fe,a=c^O&z^g,p=v&w^~v&k,l=S+f+p+ji[o+1]+A[o+1],d=y+a,S=C+l<<0,C=l+d<<0,y=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10),f=(S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7),s=C&O,a=s^C&fe^c,p=S&v^~S&w,l=k+f+p+ji[o+2]+A[o+2],d=y+a,k=z+l<<0,z=l+d<<0,y=(z>>>2|z<<30)^(z>>>13|z<<19)^(z>>>22|z<<10),f=(k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7),u=z&C,a=u^z&O^s,p=k&S^~k&v,l=w+f+p+ji[o+3]+A[o+3],d=y+a,w=fe+l<<0,fe=l+d<<0;Ye(this,Bn,Ce(this,Bn)+fe<<0),Ye(this,qn,Ce(this,qn)+z<<0),Ye(this,jn,Ce(this,jn)+C<<0),Ye(this,Fn,Ce(this,Fn)+O<<0),Ye(this,Un,Ce(this,Un)+w<<0),Ye(this,$n,Ce(this,$n)+k<<0),Ye(this,zn,Ce(this,zn)+S<<0),Ye(this,Jn,Ce(this,Jn)+v<<0)}hex(){this.finalize();const fe=Ce(this,Bn),z=Ce(this,qn),C=Ce(this,jn),O=Ce(this,Fn),w=Ce(this,Un),k=Ce(this,$n),S=Ce(this,zn),v=Ce(this,Jn);let A=De[fe>>28&15]+De[fe>>24&15]+De[fe>>20&15]+De[fe>>16&15]+De[fe>>12&15]+De[fe>>8&15]+De[fe>>4&15]+De[fe&15]+De[z>>28&15]+De[z>>24&15]+De[z>>20&15]+De[z>>16&15]+De[z>>12&15]+De[z>>8&15]+De[z>>4&15]+De[z&15]+De[C>>28&15]+De[C>>24&15]+De[C>>20&15]+De[C>>16&15]+De[C>>12&15]+De[C>>8&15]+De[C>>4&15]+De[C&15]+De[O>>28&15]+De[O>>24&15]+De[O>>20&15]+De[O>>16&15]+De[O>>12&15]+De[O>>8&15]+De[O>>4&15]+De[O&15]+De[w>>28&15]+De[w>>24&15]+De[w>>20&15]+De[w>>16&15]+De[w>>12&15]+De[w>>8&15]+De[w>>4&15]+De[w&15]+De[k>>28&15]+De[k>>24&15]+De[k>>20&15]+De[k>>16&15]+De[k>>12&15]+De[k>>8&15]+De[k>>4&15]+De[k&15]+De[S>>28&15]+De[S>>24&15]+De[S>>20&15]+De[S>>16&15]+De[S>>12&15]+De[S>>8&15]+De[S>>4&15]+De[S&15];return Ce(this,fr)||(A+=De[v>>28&15]+De[v>>24&15]+De[v>>20&15]+De[v>>16&15]+De[v>>12&15]+De[v>>8&15]+De[v>>4&15]+De[v&15]),A}toString(){return this.hex()}digest(){this.finalize();const fe=Ce(this,Bn),z=Ce(this,qn),C=Ce(this,jn),O=Ce(this,Fn),w=Ce(this,Un),k=Ce(this,$n),S=Ce(this,zn),v=Ce(this,Jn),A=[fe>>24&255,fe>>16&255,fe>>8&255,fe&255,z>>24&255,z>>16&255,z>>8&255,z&255,C>>24&255,C>>16&255,C>>8&255,C&255,O>>24&255,O>>16&255,O>>8&255,O&255,w>>24&255,w>>16&255,w>>8&255,w&255,k>>24&255,k>>16&255,k>>8&255,k&255,S>>24&255,S>>16&255,S>>8&255,S&255];return Ce(this,fr)||A.push(v>>24&255,v>>16&255,v>>8&255,v&255),A}array(){return this.digest()}arrayBuffer(){this.finalize();const fe=new ArrayBuffer(Ce(this,fr)?28:32),z=new DataView(fe);return z.setUint32(0,Ce(this,Bn)),z.setUint32(4,Ce(this,qn)),z.setUint32(8,Ce(this,jn)),z.setUint32(12,Ce(this,Fn)),z.setUint32(16,Ce(this,Un)),z.setUint32(20,Ce(this,$n)),z.setUint32(24,Ce(this,zn)),Ce(this,fr)||z.setUint32(28,Ce(this,Jn)),fe}}cr=new WeakMap,Nr=new WeakMap,kn=new WeakMap,Wr=new WeakMap,vi=new WeakMap,Bn=new WeakMap,qn=new WeakMap,jn=new WeakMap,Fn=new WeakMap,Un=new WeakMap,$n=new WeakMap,zn=new WeakMap,Jn=new WeakMap,Ir=new WeakMap,Gr=new WeakMap,fr=new WeakMap,Fi=new WeakMap,hr=new WeakMap;function yu(Be){const fe=new mu;return fe.update(Be),parseInt(fe.hex().substring(0,8),16)}const vu=function(Be){var fe="#";return Be.forEach(function(z){z<16&&(fe+=0),fe+=z.toString(16)}),fe},bu=function(Be,fe,z){Be/=360;var C=z<.5?z*(1+fe):z+fe-z*fe,O=2*z-C;return[Be+1/3,Be,Be-1/3].map(function(w){return w<0&&w++,w>1&&w--,w<1/6?w=O+(C-O)*6*w:w<.5?w=C:w<2/3?w=O+(C-O)*6*(2/3-w):w=O,Math.round(w*255)})};class wu{constructor(fe={}){const[z,C]=[fe.lightness,fe.saturation].map(function(O){return O=O!==void 0?O:[.35,.5,.65],Array.isArray(O)?O.concat():[O]});this.L=z,this.S=C,typeof fe.hue=="number"&&(fe.hue={min:fe.hue,max:fe.hue}),typeof fe.hue=="object"&&!Array.isArray(fe.hue)&&(fe.hue=[fe.hue]),typeof fe.hue>"u"&&(fe.hue=[]),this.hueRanges=fe.hue.map(function(O){return{min:typeof O.min>"u"?0:O.min,max:typeof O.max>"u"?360:O.max}}),this.hash=yu,typeof fe.hash=="function"&&(this.hash=fe.hash),fe.hash==="bkdr"&&(this.hash=gu)}hsl(fe){var z,C,O,w=this.hash(fe),k=727;if(this.hueRanges.length){const S=this.hueRanges[w%this.hueRanges.length];z=w/this.hueRanges.length%k*(S.max-S.min)/k+S.min}else z=w%359;return w=Math.ceil(w/360),C=this.S[w%this.S.length],w=Math.ceil(w/this.S.length),O=this.L[w%this.L.length],[z,C,O]}rgb(fe){var z=this.hsl(fe);return bu.apply(this,z)}hex(fe){var z=this.rgb(fe);return vu(z)}}const Pr={isOnline:!1,showOffline:Be=>{Pr.isOnline=!1,Be.innerHTML='<span class="red"> </span>'},showOnline:Be=>{Pr.isOnline=!0,Be.innerHTML='<span class="green"> </span>'},statusListener:Be=>fe=>{Pr.isOnline&&fe.value==dr.exports.StreamConnectionStatus.Disconnected?Pr.showOffline(Be):!Pr.isOnline&&fe.value==dr.exports.StreamConnectionStatus.Connected&&Pr.showOnline(Be)}};function Tu(Be,fe,z){const C=[];for(const{clientID:O,presence:w}of fe)C.push(z===O?`<b>${w.username}</b>`:w.username);Be.innerHTML=JSON.stringify(C)}function Qs(Be,fe,z){Be.innerText=z.toJSON(),fe.innerText=z.getRoot().content.toTestString()}const Au=document.getElementById("peers"),ea=document.getElementById("document"),ta=document.getElementById("document-text"),_u=document.getElementById("network-status"),Su=new wu,Ou=`vanilla-quill-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`;function mo(Be){var C;const{embed:fe,...z}=(C=Be.attributes)!=null?C:{};return fe?{insert:JSON.parse(fe),attributes:z}:{insert:Be.content||"",attributes:Be.attributes}}async function ku(){const Be=new po.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});await Be.activate();const fe=new po.Document(Ou,{enableDevtools:!0});fe.subscribe("connection",v=>{Pr.statusListener(_u)(v)}),fe.subscribe("presence",v=>{v.type!==dr.exports.DocEventType.PresenceChanged&&Tu(Au,fe.getPresences(),Be.getID())}),await Be.attach(fe,{initialPresence:{username:Be.getID().slice(-2),color:Su.hex(Be.getID().slice(-2)),selection:void 0}}),fe.update(v=>{v.content||(v.content=new po.Text,v.content.edit(0,0,`
`))},"create content if not exists"),fe.subscribe(v=>{v.type==="snapshot"&&S(),Qs(ea,ta,fe)}),fe.subscribe("$.content",v=>{v.type==="remote-change"&&k(v.value.operations),C()}),fe.subscribe("others",v=>{v.type===dr.exports.DocEventType.Unwatched?w.removeCursor(v.value.clientID):v.type===dr.exports.DocEventType.PresenceChanged&&z(v.value)});function z(v){const{clientID:A,presence:y}=v;if(A===Be.getID()||!y)return;const{username:f,color:a,selection:l}=y;if(!l)return;const d=fe.getRoot().content.posRangeToIndexRange(l);w.createCursor(A,f,a),w.moveCursor(A,{index:d[0],length:d[1]-d[0]})}function C(){for(const v of fe.getPresences())z(v)}await Be.sync(),Xs.register("modules/cursors",du);const O=new Xs("#editor",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],["clean"]],cursors:!0},theme:"snow"}),w=O.getModule("cursors");O.on("text-change",(v,A,y)=>{if(y==="api"||!v.ops)return;let f=0,a=0;console.log(`%c quill: ${JSON.stringify(v.ops)}`,"color: green");for(const l of v.ops)l.attributes!==void 0||l.insert!==void 0?(l.retain!==void 0&&(a=f+l.retain),console.log(`%c local: ${f}-${a}: ${l.insert} ${l.attributes?JSON.stringify(l.attributes):"{}"}`,"color: green"),fe.update((d,p)=>{let g;l.attributes!==void 0&&l.insert===void 0?d.content.setStyle(f,a,l.attributes):l.insert!==void 0&&(a<f&&(a=f),typeof l.insert=="object"?g=d.content.edit(f,a," ",{embed:JSON.stringify(l.insert),...l.attributes}):g=d.content.edit(f,a,l.insert,l.attributes),f=a+l.insert.length),g&&p.set({selection:d.content.indexRangeToPosRange(g)})},`update style by ${Be.getID()}`)):l.delete!==void 0?(a=f+l.delete,console.log(`%c local: ${f}-${a}: ''`,"color: green"),fe.update((d,p)=>{const g=d.content.edit(f,a,"");g&&p.set({selection:d.content.indexRangeToPosRange(g)})},`update content by ${Be.getID()}`)):l.retain!==void 0&&(f=a+l.retain,a=f)}).on("selection-change",(v,A,y)=>{if(!!v){if(y==="api"){const{selection:f}=fe.getMyPresence();if(f){const[a,l]=fe.getRoot().content.posRangeToIndexRange(f),{index:d,length:p}=v;if(a===d&&l===d+p)return}}fe.update((f,a)=>{a.set({selection:f.content.indexRangeToPosRange([v.index,v.index+v.length])})},`update selection by ${Be.getID()}`)}});function k(v){const A=[];let y=0;for(const f of v)if(f.type==="edit"){const a=f.from,l=f.to,d=a-y,p=l-a,{insert:g,attributes:c}=mo(f.value);if(console.log(`%c remote: ${a}-${l}: ${g}`,"color: skyblue"),d&&A.push({retain:d}),p&&A.push({delete:p}),g){const s={insert:g};c&&(s.attributes=c),A.push(s)}y=l}else if(f.type==="style"){const a=f.from,l=f.to,d=a-y,p=l-a,{attributes:g}=mo(f.value);if(console.log(`%c remote: ${a}-${l}: ${JSON.stringify(g)}`,"color: skyblue"),d&&A.push({retain:d}),g){const c={attributes:g};p&&(c.retain=p),A.push(c)}y=l}if(A.length){console.log(`%c to quill: ${JSON.stringify(A)}`,"color: green");const f={ops:A};O.updateContents(f,"api")}}function S(){const A={ops:fe.getRoot().content.values().map(y=>mo(y))};O.setContents(A,"api")}S(),C(),Qs(ea,ta,fe)}ku();
