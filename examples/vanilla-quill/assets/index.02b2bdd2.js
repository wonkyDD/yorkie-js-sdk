(function(){const fe=document.createElement("link").relList;if(fe&&fe.supports&&fe.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))C(k);new MutationObserver(k=>{for(const b of k)if(b.type==="childList")for(const x of b.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&C(x)}).observe(document,{childList:!0,subtree:!0});function z(k){const b={};return k.integrity&&(b.integrity=k.integrity),k.referrerpolicy&&(b.referrerPolicy=k.referrerpolicy),k.crossorigin==="use-credentials"?b.credentials="include":k.crossorigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function C(k){if(k.ep)return;k.ep=!0;const b=z(k);fetch(k.href,b)}})();var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function po(qe){return qe&&qe.__esModule&&Object.prototype.hasOwnProperty.call(qe,"default")?qe.default:qe}var gr={exports:{}};(function(qe,fe){(function(z,C){C(fe)})(Ks,function(z){var C=Object.defineProperty,k=(r,e,t)=>e in r?C(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e,t)=>(k(r,typeof e!="symbol"?e+"":e,t),t),x;(function(r){r[r.Canceled=1]="Canceled",r[r.Unknown=2]="Unknown",r[r.InvalidArgument=3]="InvalidArgument",r[r.DeadlineExceeded=4]="DeadlineExceeded",r[r.NotFound=5]="NotFound",r[r.AlreadyExists=6]="AlreadyExists",r[r.PermissionDenied=7]="PermissionDenied",r[r.ResourceExhausted=8]="ResourceExhausted",r[r.FailedPrecondition=9]="FailedPrecondition",r[r.Aborted=10]="Aborted",r[r.OutOfRange=11]="OutOfRange",r[r.Unimplemented=12]="Unimplemented",r[r.Internal=13]="Internal",r[r.Unavailable=14]="Unavailable",r[r.DataLoss=15]="DataLoss",r[r.Unauthenticated=16]="Unauthenticated"})(x||(x={}));function T(r,e){if(!r)throw new Error(e)}const y=34028234663852886e22,O=-34028234663852886e22,m=4294967295,c=2147483647,l=-2147483648;function a(r){if(typeof r!="number")throw new Error("invalid int 32: "+typeof r);if(!Number.isInteger(r)||r>c||r<l)throw new Error("invalid int 32: "+r)}function h(r){if(typeof r!="number")throw new Error("invalid uint 32: "+typeof r);if(!Number.isInteger(r)||r>m||r<0)throw new Error("invalid uint 32: "+r)}function g(r){if(typeof r!="number")throw new Error("invalid float 32: "+typeof r);if(!!Number.isFinite(r)&&(r>y||r<O))throw new Error("invalid float 32: "+r)}const p=Symbol("@bufbuild/protobuf/enum-type");function f(r){const e=r[p];return T(e,"missing enum type on enum object"),e}function s(r,e,t,n){r[p]=u(e,t.map(i=>({no:i.no,name:i.name,localName:r[i.no]})))}function u(r,e,t){const n=Object.create(null),i=Object.create(null),d=[];for(const w of e){const R=v(w);d.push(R),n[w.name]=R,i[w.no]=R}return{typeName:r,values:d,findName(w){return n[w]},findNumber(w){return i[w]}}}function o(r,e,t){const n={};for(const i of e){const d=v(i);n[d.localName]=d.no,n[d.no]=d.localName}return s(n,r,e),n}function v(r){return"localName"in r?r:Object.assign(Object.assign({},r),{localName:r.name})}class A{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType(),i=n.runtime.bin,d=i.makeReadOptions(t);return i.readMessage(this,d.readerFactory(e),e.byteLength,d),this}fromJson(e,t){const n=this.getType(),i=n.runtime.json,d=i.makeReadOptions(t);return i.readMessage(n,e,d,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(n,t)}toBinary(e){const t=this.getType(),n=t.runtime.bin,i=n.makeWriteOptions(e),d=i.writerFactory();return n.writeMessage(this,d,i),d.finish()}toJson(e){const t=this.getType(),n=t.runtime.json,i=n.makeWriteOptions(e);return n.writeMessage(this,i)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function S(r,e,t,n){var i;const d=(i=n==null?void 0:n.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),w={[d]:function(R){r.util.initFields(this),r.util.initPartial(R,this)}}[d];return Object.setPrototypeOf(w.prototype,new A),Object.assign(w,{runtime:r,typeName:e,fields:r.util.newFieldList(t),fromBinary(R,F){return new w().fromBinary(R,F)},fromJson(R,F){return new w().fromJson(R,F)},fromJsonString(R,F){return new w().fromJsonString(R,F)},equals(R,F){return r.util.equals(w,R,F)}}),w}function P(r,e,t,n){return{syntax:r,json:e,bin:t,util:n,makeMessageType(i,d,w){return S(this,i,d,w)},makeEnum:o,makeEnumType:u,getEnumType:f}}var _;(function(r){r[r.DOUBLE=1]="DOUBLE",r[r.FLOAT=2]="FLOAT",r[r.INT64=3]="INT64",r[r.UINT64=4]="UINT64",r[r.INT32=5]="INT32",r[r.FIXED64=6]="FIXED64",r[r.FIXED32=7]="FIXED32",r[r.BOOL=8]="BOOL",r[r.STRING=9]="STRING",r[r.BYTES=12]="BYTES",r[r.UINT32=13]="UINT32",r[r.SFIXED32=15]="SFIXED32",r[r.SFIXED64=16]="SFIXED64",r[r.SINT32=17]="SINT32",r[r.SINT64=18]="SINT64"})(_||(_={}));var N;(function(r){r[r.BIGINT=0]="BIGINT",r[r.STRING=1]="STRING"})(N||(N={}));function E(){let r=0,e=0;for(let n=0;n<28;n+=7){let i=this.buf[this.pos++];if(r|=(i&127)<<n,(i&128)==0)return this.assertBounds(),[r,e]}let t=this.buf[this.pos++];if(r|=(t&15)<<28,e=(t&112)>>4,(t&128)==0)return this.assertBounds(),[r,e];for(let n=3;n<=31;n+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<n,(i&128)==0)return this.assertBounds(),[r,e]}throw new Error("invalid varint")}function I(r,e,t){for(let d=0;d<28;d=d+7){const w=r>>>d,R=!(w>>>7==0&&e==0),F=(R?w|128:w)&255;if(t.push(F),!R)return}const n=r>>>28&15|(e&7)<<4,i=e>>3!=0;if(t.push((i?n|128:n)&255),!!i){for(let d=3;d<31;d=d+7){const w=e>>>d,R=w>>>7!=0,F=(R?w|128:w)&255;if(t.push(F),!R)return}t.push(e>>>31&1)}}const D=4294967296;function L(r){const e=r[0]==="-";e&&(r=r.slice(1));const t=1e6;let n=0,i=0;function d(w,R){const F=Number(r.slice(w,R));i*=t,n=n*t+F,n>=D&&(i=i+(n/D|0),n=n%D)}return d(-24,-18),d(-18,-12),d(-12,-6),d(-6),e?Z(n,i):le(n,i)}function B(r,e){let t=le(r,e);const n=t.hi&2147483648;n&&(t=Z(t.lo,t.hi));const i=J(t.lo,t.hi);return n?"-"+i:i}function J(r,e){if({lo:r,hi:e}=W(r,e),e<=2097151)return String(D*e+r);const t=r&16777215,n=(r>>>24|e<<8)&16777215,i=e>>16&65535;let d=t+n*6777216+i*6710656,w=n+i*8147497,R=i*2;const F=1e7;return d>=F&&(w+=Math.floor(d/F),d%=F),w>=F&&(R+=Math.floor(w/F),w%=F),R.toString()+V(w)+V(d)}function W(r,e){return{lo:r>>>0,hi:e>>>0}}function le(r,e){return{lo:r|0,hi:e|0}}function Z(r,e){return e=~e,r?r=~r+1:e+=1,le(r,e)}const V=r=>{const e=String(r);return"0000000".slice(e.length)+e};function M(r,e){if(r>=0){for(;r>127;)e.push(r&127|128),r=r>>>7;e.push(r)}else{for(let t=0;t<9;t++)e.push(r&127|128),r=r>>7;e.push(1)}}function $(){let r=this.buf[this.pos++],e=r&127;if((r&128)==0)return this.assertBounds(),e;if(r=this.buf[this.pos++],e|=(r&127)<<7,(r&128)==0)return this.assertBounds(),e;if(r=this.buf[this.pos++],e|=(r&127)<<14,(r&128)==0)return this.assertBounds(),e;if(r=this.buf[this.pos++],e|=(r&127)<<21,(r&128)==0)return this.assertBounds(),e;r=this.buf[this.pos++],e|=(r&15)<<28;for(let t=5;(r&128)!==0&&t<10;t++)r=this.buf[this.pos++];if((r&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function j(){const r=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof r.getBigInt64=="function"&&typeof r.getBigUint64=="function"&&typeof r.setBigInt64=="function"&&typeof r.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),d=BigInt("9223372036854775807"),w=BigInt("0"),R=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(F){const U=typeof F=="bigint"?F:BigInt(F);if(U>d||U<i)throw new Error(`int64 invalid: ${F}`);return U},uParse(F){const U=typeof F=="bigint"?F:BigInt(F);if(U>R||U<w)throw new Error(`uint64 invalid: ${F}`);return U},enc(F){return r.setBigInt64(0,this.parse(F),!0),{lo:r.getInt32(0,!0),hi:r.getInt32(4,!0)}},uEnc(F){return r.setBigInt64(0,this.uParse(F),!0),{lo:r.getInt32(0,!0),hi:r.getInt32(4,!0)}},dec(F,U){return r.setInt32(0,F,!0),r.setInt32(4,U,!0),r.getBigInt64(0,!0)},uDec(F,U){return r.setInt32(0,F,!0),r.setInt32(4,U,!0),r.getBigUint64(0,!0)}}}const t=i=>T(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),n=i=>T(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),L(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),n(i),L(i)},dec(i,d){return B(i,d)},uDec(i,d){return J(i,d)}}}const X=j();var G;(function(r){r[r.Varint=0]="Varint",r[r.Bit64=1]="Bit64",r[r.LengthDelimited=2]="LengthDelimited",r[r.StartGroup=3]="StartGroup",r[r.EndGroup=4]="EndGroup",r[r.Bit32=5]="Bit32"})(G||(G={}));class q{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),n=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],n),n+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(h(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return a(e),M(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){g(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){h(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){a(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return a(e),e=(e<<1^e>>31)>>>0,M(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=X.enc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=X.uEnc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=X.enc(e);return I(t.lo,t.hi,this.buf),this}sint64(e){let t=X.enc(e),n=t.hi>>31,i=t.lo<<1^n,d=(t.hi<<1|t.lo>>>31)^n;return I(i,d,this.buf),this}uint64(e){let t=X.uEnc(e);return I(t.lo,t.hi,this.buf),this}}class Y{constructor(e,t){this.varint64=E,this.uint32=$,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t!=null?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=e&7;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case G.Varint:for(;this.buf[this.pos++]&128;);break;case G.Bit64:this.pos+=4;case G.Bit32:this.pos+=4;break;case G.LengthDelimited:let n=this.uint32();this.pos+=n;break;case G.StartGroup:let i;for(;(i=this.tag()[1])!==G.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return X.dec(...this.varint64())}uint64(){return X.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(e&1);return e=(e>>>1|(t&1)<<31)^n,t=t>>>1^n,X.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return X.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return X.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function ee(r,e){return e instanceof A||!r.fieldWrapper?e:r.fieldWrapper.wrapField(e)}_.DOUBLE,_.FLOAT,_.INT64,_.UINT64,_.INT32,_.UINT32,_.BOOL,_.STRING,_.BYTES;function re(r,e,t){if(e===t)return!0;if(r==_.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}switch(r){case _.UINT64:case _.FIXED64:case _.INT64:case _.SFIXED64:case _.SINT64:return e==t}return!1}function de(r,e){switch(r){case _.BOOL:return!1;case _.UINT64:case _.FIXED64:case _.INT64:case _.SFIXED64:case _.SINT64:return e==0?X.zero:"0";case _.DOUBLE:case _.FLOAT:return 0;case _.BYTES:return new Uint8Array(0);case _.STRING:return"";default:return 0}}function be(r,e){const t=e===void 0;let n=G.Varint,i=e===0;switch(r){case _.STRING:i=t||!e.length,n=G.LengthDelimited;break;case _.BOOL:i=e===!1;break;case _.DOUBLE:n=G.Bit64;break;case _.FLOAT:n=G.Bit32;break;case _.INT64:i=t||e==0;break;case _.UINT64:i=t||e==0;break;case _.FIXED64:i=t||e==0,n=G.Bit64;break;case _.BYTES:i=t||!e.byteLength,n=G.LengthDelimited;break;case _.FIXED32:n=G.Bit32;break;case _.SFIXED32:n=G.Bit32;break;case _.SFIXED64:i=t||e==0,n=G.Bit64;break;case _.SINT64:i=t||e==0;break}const d=_[r].toLowerCase();return[n,d,t||i]}const Ee=Symbol("@bufbuild/protobuf/unknown-fields"),xe={readUnknownFields:!0,readerFactory:r=>new Y(r)},Ie={writeUnknownFields:!0,writerFactory:()=>new q};function H(r){return r?Object.assign(Object.assign({},xe),r):xe}function se(r){return r?Object.assign(Object.assign({},Ie),r):Ie}function oe(){return{makeReadOptions:H,makeWriteOptions:se,listUnknownFields(r){var e;return(e=r[Ee])!==null&&e!==void 0?e:[]},discardUnknownFields(r){delete r[Ee]},writeUnknownFields(r,e){const n=r[Ee];if(n)for(const i of n)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(r,e,t,n){const i=r;Array.isArray(i[Ee])||(i[Ee]=[]),i[Ee].push({no:e,wireType:t,data:n})},readMessage(r,e,t,n,i){const d=r.getType(),w=i?e.len:e.pos+t;let R,F;for(;e.pos<w&&([R,F]=e.tag(),F!=G.EndGroup);){const U=d.fields.find(R);if(!U){const me=e.skip(F);n.readUnknownFields&&this.onUnknownField(r,R,F,me);continue}let ae=r,Ae=U.repeated,ie=U.localName;switch(U.oneof&&(ae=ae[U.oneof.localName],ae.case!=ie&&delete ae.value,ae.case=ie,ie="value"),U.kind){case"scalar":case"enum":const me=U.kind=="enum"?_.INT32:U.T;let Ne=ve;if(U.kind=="scalar"&&U.L>0&&(Ne=pe),Ae){let gt=ae[ie];if(F==G.LengthDelimited&&me!=_.STRING&&me!=_.BYTES){let st=e.uint32()+e.pos;for(;e.pos<st;)gt.push(Ne(e,me))}else gt.push(Ne(e,me))}else ae[ie]=Ne(e,me);break;case"message":const Le=U.T;Ae?ae[ie].push(K(e,new Le,n,U)):ae[ie]instanceof A?K(e,ae[ie],n,U):(ae[ie]=K(e,new Le,n,U),Le.fieldWrapper&&!U.oneof&&!U.repeated&&(ae[ie]=Le.fieldWrapper.unwrapField(ae[ie])));break;case"map":let[Me,nt]=te(U,e,n);ae[ie][Me]=nt;break}}if(i&&(F!=G.EndGroup||R!==t))throw new Error("invalid end group tag")}}}function K(r,e,t,n){const i=e.getType().runtime.bin,d=n==null?void 0:n.delimited;return i.readMessage(e,r,d?n==null?void 0:n.no:r.uint32(),t,d),e}function te(r,e,t){const n=e.uint32(),i=e.pos+n;let d,w;for(;e.pos<i;){let[R]=e.tag();switch(R){case 1:d=ve(e,r.K);break;case 2:switch(r.V.kind){case"scalar":w=ve(e,r.V.T);break;case"enum":w=e.int32();break;case"message":w=K(e,new r.V.T,t,void 0);break}break}}if(d===void 0){let R=de(r.K,N.BIGINT);d=r.K==_.BOOL?R.toString():R}if(typeof d!="string"&&typeof d!="number"&&(d=d.toString()),w===void 0)switch(r.V.kind){case"scalar":w=de(r.V.T,N.BIGINT);break;case"enum":w=0;break;case"message":w=new r.V.T;break}return[d,w]}function pe(r,e){const t=ve(r,e);return typeof t=="bigint"?t.toString():t}function ve(r,e){switch(e){case _.STRING:return r.string();case _.BOOL:return r.bool();case _.DOUBLE:return r.double();case _.FLOAT:return r.float();case _.INT32:return r.int32();case _.INT64:return r.int64();case _.UINT64:return r.uint64();case _.FIXED64:return r.fixed64();case _.BYTES:return r.bytes();case _.FIXED32:return r.fixed32();case _.SFIXED32:return r.sfixed32();case _.SFIXED64:return r.sfixed64();case _.SINT64:return r.sint64();case _.UINT32:return r.uint32();case _.SINT32:return r.sint32()}}function he(r,e,t,n,i){r.tag(t.no,G.LengthDelimited),r.fork();let d=n;switch(t.K){case _.INT32:case _.FIXED32:case _.UINT32:case _.SFIXED32:case _.SINT32:d=Number.parseInt(n);break;case _.BOOL:T(n=="true"||n=="false"),d=n=="true";break}switch(ke(r,t.K,1,d,!0),t.V.kind){case"scalar":ke(r,t.V.T,2,i,!0);break;case"enum":ke(r,_.INT32,2,i,!0);break;case"message":r.tag(2,G.LengthDelimited).bytes(i.toBinary(e));break}r.join()}function Se(r,e,t,n){if(n!==void 0){const i=ee(t.T,n);t!=null&&t.delimited?r.tag(t.no,G.StartGroup).raw(i.toBinary(e)).tag(t.no,G.EndGroup):r.tag(t.no,G.LengthDelimited).bytes(i.toBinary(e))}}function ke(r,e,t,n,i){let[d,w,R]=be(e,n);(!R||i)&&r.tag(t,d)[w](n)}function Be(r,e,t,n){if(!n.length)return;r.tag(t,G.LengthDelimited).fork();let[,i]=be(e);for(let d=0;d<n.length;d++)r[i](n[d]);r.join()}function et(){return Object.assign(Object.assign({},oe()),{writeMessage(r,e,t){const n=r.getType();for(const i of n.fields.byNumber()){let d,w=i.repeated,R=i.localName;if(i.oneof){const F=r[i.oneof.localName];if(F.case!==R)continue;d=F.value}else d=r[R];switch(i.kind){case"scalar":case"enum":let F=i.kind=="enum"?_.INT32:i.T;if(w)if(i.packed)Be(e,F,i.no,d);else for(const U of d)ke(e,F,i.no,U,!0);else d!==void 0&&ke(e,F,i.no,d,!!i.oneof||i.opt);break;case"message":if(w)for(const U of d)Se(e,t,i,U);else Se(e,t,i,d);break;case"map":for(const[U,ae]of Object.entries(d))he(e,t,i,U,ae);break}}return t.writeUnknownFields&&this.writeUnknownFields(r,e),e}})}let Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Fe=[];for(let r=0;r<Ke.length;r++)Fe[Ke[r].charCodeAt(0)]=r;Fe["-".charCodeAt(0)]=Ke.indexOf("+"),Fe["_".charCodeAt(0)]=Ke.indexOf("/");const Je={dec(r){let e=r.length*3/4;r[r.length-2]=="="?e-=2:r[r.length-1]=="="&&(e-=1);let t=new Uint8Array(e),n=0,i=0,d,w=0;for(let R=0;R<r.length;R++){if(d=Fe[r.charCodeAt(R)],d===void 0)switch(r[R]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:w=d,i=1;break;case 1:t[n++]=w<<2|(d&48)>>4,w=d,i=2;break;case 2:t[n++]=(w&15)<<4|(d&60)>>2,w=d,i=3;break;case 3:t[n++]=(w&3)<<6|d,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,n)},enc(r){let e="",t=0,n,i=0;for(let d=0;d<r.length;d++)switch(n=r[d],t){case 0:e+=Ke[n>>2],i=(n&3)<<4,t=1;break;case 1:e+=Ke[i|n>>4],i=(n&15)<<2,t=2;break;case 2:e+=Ke[i|n>>6],e+=Ke[n&63],t=0;break}return t&&(e+=Ke[i],e+="=",t==1&&(e+="=")),e}},ye={ignoreUnknownFields:!1},Ge={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function $t(r){return r?Object.assign(Object.assign({},ye),r):ye}function fn(r){return r?Object.assign(Object.assign({},Ge),r):Ge}function Bt(r){const e=r(zt,Qt);return{makeReadOptions:$t,makeWriteOptions:fn,readMessage(t,n,i,d){if(n==null||Array.isArray(n)||typeof n!="object")throw new Error(`cannot decode message ${t.typeName} from JSON: ${this.debug(n)}`);d=d!=null?d:new t;const w={};for(const[R,F]of Object.entries(n)){const U=t.fields.findJsonName(R);if(!U){if(!i.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${R}" is unknown`);continue}let ae=U.localName,Ae=d;if(U.oneof){if(F===null&&U.kind=="scalar")continue;const ie=w[U.oneof.localName];if(ie)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${U.oneof.name}" present: "${ie}", "${R}"`);w[U.oneof.localName]=R,Ae=Ae[U.oneof.localName]={case:ae},ae="value"}if(U.repeated){if(F===null)continue;if(!Array.isArray(F))throw new Error(`cannot decode field ${t.typeName}.${U.name} from JSON: ${this.debug(F)}`);const ie=Ae[ae];for(const me of F){if(me===null)throw new Error(`cannot decode field ${t.typeName}.${U.name} from JSON: ${this.debug(me)}`);let Ne;switch(U.kind){case"message":Ne=U.T.fromJson(me,i);break;case"enum":if(Ne=qt(U.T,me,i.ignoreUnknownFields),Ne===void 0)continue;break;case"scalar":try{Ne=Dt(U.T,me,U.L)}catch(Le){let Me=`cannot decode field ${t.typeName}.${U.name} from JSON: ${this.debug(me)}`;throw Le instanceof Error&&Le.message.length>0&&(Me+=`: ${Le.message}`),new Error(Me)}break}ie.push(Ne)}}else if(U.kind=="map"){if(F===null)continue;if(Array.isArray(F)||typeof F!="object")throw new Error(`cannot decode field ${t.typeName}.${U.name} from JSON: ${this.debug(F)}`);const ie=Ae[ae];for(const[me,Ne]of Object.entries(F)){if(Ne===null)throw new Error(`cannot decode field ${t.typeName}.${U.name} from JSON: map value null`);let Le;switch(U.V.kind){case"message":Le=U.V.T.fromJson(Ne,i);break;case"enum":if(Le=qt(U.V.T,Ne,i.ignoreUnknownFields),Le===void 0)continue;break;case"scalar":try{Le=Dt(U.V.T,Ne,N.BIGINT)}catch(Me){let nt=`cannot decode map value for field ${t.typeName}.${U.name} from JSON: ${this.debug(F)}`;throw Me instanceof Error&&Me.message.length>0&&(nt+=`: ${Me.message}`),new Error(nt)}break}try{ie[Dt(U.K,U.K==_.BOOL?me=="true"?!0:me=="false"?!1:me:me,N.BIGINT).toString()]=Le}catch(Me){let nt=`cannot decode map key for field ${t.typeName}.${U.name} from JSON: ${this.debug(F)}`;throw Me instanceof Error&&Me.message.length>0&&(nt+=`: ${Me.message}`),new Error(nt)}}}else switch(U.kind){case"message":const ie=U.T;if(F===null&&ie.typeName!="google.protobuf.Value"){if(U.oneof)throw new Error(`cannot decode field ${t.typeName}.${U.name} from JSON: null is invalid for oneof field "${R}"`);continue}Ae[ae]instanceof A?Ae[ae].fromJson(F,i):(Ae[ae]=ie.fromJson(F,i),ie.fieldWrapper&&!U.oneof&&(Ae[ae]=ie.fieldWrapper.unwrapField(Ae[ae])));break;case"enum":const me=qt(U.T,F,i.ignoreUnknownFields);me!==void 0&&(Ae[ae]=me);break;case"scalar":try{Ae[ae]=Dt(U.T,F,U.L)}catch(Ne){let Le=`cannot decode field ${t.typeName}.${U.name} from JSON: ${this.debug(F)}`;throw Ne instanceof Error&&Ne.message.length>0&&(Le+=`: ${Ne.message}`),new Error(Le)}break}}return d},writeMessage(t,n){const i=t.getType(),d={};let w;try{for(const R of i.fields.byMember()){let F;if(R.kind=="oneof"){const U=t[R.localName];if(U.value===void 0)continue;if(w=R.findField(U.case),!w)throw"oneof case not found: "+U.case;F=e(w,U.value,n)}else w=R,F=e(w,t[w.localName],n);F!==void 0&&(d[n.useProtoFieldName?w.name:w.jsonName]=F)}}catch(R){const F=w?`cannot encode field ${i.typeName}.${w.name} to JSON`:`cannot encode message ${i.typeName} to JSON`,U=R instanceof Error?R.message:String(R);throw new Error(F+(U.length>0?`: ${U}`:""))}return d},readScalar:Dt,writeScalar:Qt,debug:Xt}}function Xt(r){if(r===null)return"null";switch(typeof r){case"object":return Array.isArray(r)?"array":"object";case"string":return r.length>100?"string":`"${r.split('"').join('\\"')}"`;default:return String(r)}}function Dt(r,e,t){switch(r){case _.DOUBLE:case _.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const n=Number(e);if(Number.isNaN(n)||!Number.isFinite(n))break;return r==_.FLOAT&&g(n),n;case _.INT32:case _.FIXED32:case _.SFIXED32:case _.SINT32:case _.UINT32:if(e===null)return 0;let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return r==_.UINT32?h(i):a(i),i;case _.INT64:case _.SFIXED64:case _.SINT64:if(e===null)return X.zero;if(typeof e!="number"&&typeof e!="string")break;const d=X.parse(e);return t?d.toString():d;case _.FIXED64:case _.UINT64:if(e===null)return X.zero;if(typeof e!="number"&&typeof e!="string")break;const w=X.uParse(e);return t?w.toString():w;case _.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case _.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case _.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return Je.dec(e)}throw new Error}function qt(r,e,t){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const n=r.findName(e);if(n||t)return n==null?void 0:n.no;break}throw new Error(`cannot decode enum ${r.typeName} from JSON: ${Xt(e)}`)}function zt(r,e,t,n){var i;if(e===void 0)return e;if(e===0&&!t)return;if(n)return e;if(r.typeName=="google.protobuf.NullValue")return null;const d=r.findNumber(e);return(i=d==null?void 0:d.name)!==null&&i!==void 0?i:e}function Qt(r,e,t){if(e!==void 0)switch(r){case _.INT32:case _.SFIXED32:case _.SINT32:case _.FIXED32:case _.UINT32:return T(typeof e=="number"),e!=0||t?e:void 0;case _.FLOAT:case _.DOUBLE:return T(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||t?e:void 0;case _.STRING:return T(typeof e=="string"),e.length>0||t?e:void 0;case _.BOOL:return T(typeof e=="boolean"),e||t?e:void 0;case _.UINT64:case _.FIXED64:case _.INT64:case _.SFIXED64:case _.SINT64:return T(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),t||e!=0?e.toString(10):void 0;case _.BYTES:return T(e instanceof Uint8Array),t||e.byteLength>0?Je.enc(e):void 0}}function At(){return Bt((r,e)=>function(n,i,d){if(n.kind=="map"){const w={};switch(n.V.kind){case"scalar":for(const[F,U]of Object.entries(i)){const ae=e(n.V.T,U,!0);T(ae!==void 0),w[F.toString()]=ae}break;case"message":for(const[F,U]of Object.entries(i))w[F.toString()]=U.toJson(d);break;case"enum":const R=n.V.T;for(const[F,U]of Object.entries(i)){T(U===void 0||typeof U=="number");const ae=r(R,U,!0,d.enumAsInteger);T(ae!==void 0),w[F.toString()]=ae}break}return d.emitDefaultValues||Object.keys(w).length>0?w:void 0}else if(n.repeated){const w=[];switch(n.kind){case"scalar":for(let R=0;R<i.length;R++)w.push(e(n.T,i[R],!0));break;case"enum":for(let R=0;R<i.length;R++)w.push(r(n.T,i[R],!0,d.enumAsInteger));break;case"message":for(let R=0;R<i.length;R++)w.push(ee(n.T,i[R]).toJson(d));break}return d.emitDefaultValues||w.length>0?w:void 0}else switch(n.kind){case"scalar":return e(n.T,i,!!n.oneof||n.opt||d.emitDefaultValues);case"enum":return r(n.T,i,!!n.oneof||n.opt||d.emitDefaultValues,d.enumAsInteger);case"message":return i!==void 0?ee(n.T,i).toJson(d):void 0}})}function Kt(){return{setEnumType:s,initPartial(r,e){if(r===void 0)return;const t=e.getType();for(const n of t.fields.byMember()){const i=n.localName,d=e,w=r;if(w[i]!==void 0)switch(n.kind){case"oneof":const R=w[i].case;if(R===void 0)continue;const F=n.findField(R);let U=w[i].value;F&&F.kind=="message"&&!(U instanceof F.T)?U=new F.T(U):F&&F.kind==="scalar"&&F.T===_.BYTES&&(U=hn(U)),d[i]={case:R,value:U};break;case"scalar":case"enum":let ae=w[i];n.T===_.BYTES&&(ae=n.repeated?ae.map(hn):hn(ae)),d[i]=ae;break;case"map":switch(n.V.kind){case"scalar":case"enum":if(n.V.T===_.BYTES)for(const[me,Ne]of Object.entries(w[i]))d[i][me]=hn(Ne);else Object.assign(d[i],w[i]);break;case"message":const ie=n.V.T;for(const me of Object.keys(w[i])){let Ne=w[i][me];ie.fieldWrapper||(Ne=new ie(Ne)),d[i][me]=Ne}break}break;case"message":const Ae=n.T;if(n.repeated)d[i]=w[i].map(ie=>ie instanceof Ae?ie:new Ae(ie));else if(w[i]!==void 0){const ie=w[i];Ae.fieldWrapper?Ae.typeName==="google.protobuf.BytesValue"?d[i]=hn(ie):d[i]=ie:d[i]=ie instanceof Ae?ie:new Ae(ie)}break}}},equals(r,e,t){return e===t?!0:!e||!t?!1:r.fields.byMember().every(n=>{const i=e[n.localName],d=t[n.localName];if(n.repeated){if(i.length!==d.length)return!1;switch(n.kind){case"message":return i.every((w,R)=>n.T.equals(w,d[R]));case"scalar":return i.every((w,R)=>re(n.T,w,d[R]));case"enum":return i.every((w,R)=>re(_.INT32,w,d[R]))}throw new Error(`repeated cannot contain ${n.kind}`)}switch(n.kind){case"message":return n.T.equals(i,d);case"enum":return re(_.INT32,i,d);case"scalar":return re(n.T,i,d);case"oneof":if(i.case!==d.case)return!1;const w=n.findField(i.case);if(w===void 0)return!0;switch(w.kind){case"message":return w.T.equals(i.value,d.value);case"enum":return re(_.INT32,i.value,d.value);case"scalar":return re(w.T,i.value,d.value)}throw new Error(`oneof cannot contain ${w.kind}`);case"map":const R=Object.keys(i).concat(Object.keys(d));switch(n.V.kind){case"message":const F=n.V.T;return R.every(ae=>F.equals(i[ae],d[ae]));case"enum":return R.every(ae=>re(_.INT32,i[ae],d[ae]));case"scalar":const U=n.V.T;return R.every(ae=>re(U,i[ae],d[ae]))}break}})},clone(r){const e=r.getType(),t=new e,n=t;for(const i of e.fields.byMember()){const d=r[i.localName];let w;if(i.repeated)w=d.map(Lt);else if(i.kind=="map"){w=n[i.localName];for(const[R,F]of Object.entries(d))w[R]=Lt(F)}else i.kind=="oneof"?w=i.findField(d.case)?{case:d.case,value:Lt(d.value)}:{case:void 0}:w=Lt(d);n[i.localName]=w}return t}}}function Lt(r){if(r===void 0)return r;if(r instanceof A)return r.clone();if(r instanceof Uint8Array){const e=new Uint8Array(r.byteLength);return e.set(r),e}return r}function hn(r){return r instanceof Uint8Array?r:new Uint8Array(r)}class dn{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const n of this.list())t[n.jsonName]=t[n.name]=n;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const n of this.list())t[n.no]=n;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function Vn(r,e){const t=nr(r);return e?t:Cn(Ht(t))}function Kn(r){return Vn(r,!1)}const Pr=nr;function nr(r){let e=!1;const t=[];for(let n=0;n<r.length;n++){let i=r.charAt(n);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const pr=new Set(["constructor","toString","toJSON","valueOf"]),gn=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),jt=r=>`${r}$`,Ht=r=>gn.has(r)?jt(r):r,Cn=r=>pr.has(r)?jt(r):r;class on{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Kn(e)}addField(e){T(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}const ue=P("proto3",At(),et(),Object.assign(Object.assign({},Kt()),{newFieldList(r){return new dn(r,sn)},initFields(r){for(const e of r.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,n=r;if(e.repeated){n[t]=[];continue}switch(e.kind){case"oneof":n[t]={case:void 0};break;case"enum":n[t]=0;break;case"map":n[t]={};break;case"scalar":n[t]=de(e.T,e.L);break}}}}));function sn(r){var e,t,n,i;const d=[];let w;for(const R of typeof r=="function"?r():r){const F=R;if(F.localName=Vn(R.name,R.oneof!==void 0),F.jsonName=(e=R.jsonName)!==null&&e!==void 0?e:Pr(R.name),F.repeated=(t=R.repeated)!==null&&t!==void 0?t:!1,R.kind=="scalar"&&(F.L=(n=R.L)!==null&&n!==void 0?n:N.BIGINT),R.oneof!==void 0){const U=typeof R.oneof=="string"?R.oneof:R.oneof.name;(!w||w.name!=U)&&(w=new on(U)),F.oneof=w,w.addField(F)}R.kind=="message"&&(F.delimited=!1),F.packed=(i=R.packed)!==null&&i!==void 0?i:R.kind=="enum"||R.kind=="scalar"&&R.T!=_.BYTES&&R.T!=_.STRING,d.push(F)}return d}var Ot;(function(r){r[r.Unary=0]="Unary",r[r.ServerStreaming=1]="ServerStreaming",r[r.ClientStreaming=2]="ClientStreaming",r[r.BiDiStreaming=3]="BiDiStreaming"})(Ot||(Ot={}));var vr;(function(r){r[r.NoSideEffects=1]="NoSideEffects",r[r.Idempotent=2]="Idempotent"})(vr||(vr={}));class vt extends A{constructor(e){super(),this.seconds=X.zero,this.nanos=0,ue.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${ue.json.debug(e)}`);const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=X.parse(i/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?n="."+i.substring(0,3)+"Z":i.substring(6)==="000"?n="."+i.substring(0,6)+"Z":n="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return vt.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new vt({seconds:X.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new vt().fromBinary(e,t)}static fromJson(e,t){return new vt().fromJson(e,t)}static fromJsonString(e,t){return new vt().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(vt,e,t)}}vt.runtime=ue,vt.typeName="google.protobuf.Timestamp",vt.fields=ue.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class kt extends A{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),ue.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const n=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(n);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let w=i.fromBinary(this.value).toJson(e);return(n.startsWith("google.protobuf.")||w===null||Array.isArray(w)||typeof w!="object")&&(w={value:w}),w["@type"]=this.typeUrl,w}fromJson(e,t){var n;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const d=this.typeUrlToName(i),w=(n=t==null?void 0:t.typeRegistry)===null||n===void 0?void 0:n.findMessage(d);if(!w)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let R;if(d.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))R=w.fromJson(e.value,t);else{const F=Object.assign({},e);delete F["@type"],R=w.fromJson(F,t)}return this.packFrom(R),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(!!t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let n="";return typeof e=="string"?n=e:n=e.typeName,t===n}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw new Error(`invalid type url: ${e}`);return n}static pack(e){const t=new kt;return t.packFrom(e),t}static fromBinary(e,t){return new kt().fromBinary(e,t)}static fromJson(e,t){return new kt().fromJson(e,t)}static fromJsonString(e,t){return new kt().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(kt,e,t)}}kt.runtime=ue,kt.typeName="google.protobuf.Any",kt.fields=ue.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Jt extends A{constructor(e){super(),this.value=0,ue.util.initPartial(e,this)}toJson(e){return ue.json.writeScalar(_.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=ue.json.readScalar(_.DOUBLE,e)}catch(n){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Jt().fromBinary(e,t)}static fromJson(e,t){return new Jt().fromJson(e,t)}static fromJsonString(e,t){return new Jt().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(Jt,e,t)}}Jt.runtime=ue,Jt.typeName="google.protobuf.DoubleValue",Jt.fields=ue.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Jt.fieldWrapper={wrapField(r){return new Jt({value:r})},unwrapField(r){return r.value}};class Et extends A{constructor(e){super(),this.value=0,ue.util.initPartial(e,this)}toJson(e){return ue.json.writeScalar(_.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=ue.json.readScalar(_.FLOAT,e)}catch(n){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Et().fromBinary(e,t)}static fromJson(e,t){return new Et().fromJson(e,t)}static fromJsonString(e,t){return new Et().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(Et,e,t)}}Et.runtime=ue,Et.typeName="google.protobuf.FloatValue",Et.fields=ue.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),Et.fieldWrapper={wrapField(r){return new Et({value:r})},unwrapField(r){return r.value}};class Wt extends A{constructor(e){super(),this.value=X.zero,ue.util.initPartial(e,this)}toJson(e){return ue.json.writeScalar(_.INT64,this.value,!0)}fromJson(e,t){try{this.value=ue.json.readScalar(_.INT64,e)}catch(n){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Wt().fromBinary(e,t)}static fromJson(e,t){return new Wt().fromJson(e,t)}static fromJsonString(e,t){return new Wt().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(Wt,e,t)}}Wt.runtime=ue,Wt.typeName="google.protobuf.Int64Value",Wt.fields=ue.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),Wt.fieldWrapper={wrapField(r){return new Wt({value:r})},unwrapField(r){return r.value}};class Ct extends A{constructor(e){super(),this.value=X.zero,ue.util.initPartial(e,this)}toJson(e){return ue.json.writeScalar(_.UINT64,this.value,!0)}fromJson(e,t){try{this.value=ue.json.readScalar(_.UINT64,e)}catch(n){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Ct().fromBinary(e,t)}static fromJson(e,t){return new Ct().fromJson(e,t)}static fromJsonString(e,t){return new Ct().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(Ct,e,t)}}Ct.runtime=ue,Ct.typeName="google.protobuf.UInt64Value",Ct.fields=ue.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),Ct.fieldWrapper={wrapField(r){return new Ct({value:r})},unwrapField(r){return r.value}};class xt extends A{constructor(e){super(),this.value=0,ue.util.initPartial(e,this)}toJson(e){return ue.json.writeScalar(_.INT32,this.value,!0)}fromJson(e,t){try{this.value=ue.json.readScalar(_.INT32,e)}catch(n){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new xt().fromBinary(e,t)}static fromJson(e,t){return new xt().fromJson(e,t)}static fromJsonString(e,t){return new xt().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(xt,e,t)}}xt.runtime=ue,xt.typeName="google.protobuf.Int32Value",xt.fields=ue.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),xt.fieldWrapper={wrapField(r){return new xt({value:r})},unwrapField(r){return r.value}};class Gt extends A{constructor(e){super(),this.value=0,ue.util.initPartial(e,this)}toJson(e){return ue.json.writeScalar(_.UINT32,this.value,!0)}fromJson(e,t){try{this.value=ue.json.readScalar(_.UINT32,e)}catch(n){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new Gt().fromBinary(e,t)}static fromJson(e,t){return new Gt().fromJson(e,t)}static fromJsonString(e,t){return new Gt().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(Gt,e,t)}}Gt.runtime=ue,Gt.typeName="google.protobuf.UInt32Value",Gt.fields=ue.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),Gt.fieldWrapper={wrapField(r){return new Gt({value:r})},unwrapField(r){return r.value}};class ne extends A{constructor(e){super(),this.value=!1,ue.util.initPartial(e,this)}toJson(e){return ue.json.writeScalar(_.BOOL,this.value,!0)}fromJson(e,t){try{this.value=ue.json.readScalar(_.BOOL,e)}catch(n){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new ne().fromBinary(e,t)}static fromJson(e,t){return new ne().fromJson(e,t)}static fromJsonString(e,t){return new ne().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(ne,e,t)}}ne.runtime=ue,ne.typeName="google.protobuf.BoolValue",ne.fields=ue.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),ne.fieldWrapper={wrapField(r){return new ne({value:r})},unwrapField(r){return r.value}};class ce extends A{constructor(e){super(),this.value="",ue.util.initPartial(e,this)}toJson(e){return ue.json.writeScalar(_.STRING,this.value,!0)}fromJson(e,t){try{this.value=ue.json.readScalar(_.STRING,e)}catch(n){let i='cannot decode message google.protobuf.StringValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new ce().fromBinary(e,t)}static fromJson(e,t){return new ce().fromJson(e,t)}static fromJsonString(e,t){return new ce().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(ce,e,t)}}ce.runtime=ue,ce.typeName="google.protobuf.StringValue",ce.fields=ue.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),ce.fieldWrapper={wrapField(r){return new ce({value:r})},unwrapField(r){return r.value}};class we extends A{constructor(e){super(),this.value=new Uint8Array(0),ue.util.initPartial(e,this)}toJson(e){return ue.json.writeScalar(_.BYTES,this.value,!0)}fromJson(e,t){try{this.value=ue.json.readScalar(_.BYTES,e)}catch(n){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw n instanceof Error&&n.message.length>0&&(i+=`: ${n.message}`),new Error(i)}return this}static fromBinary(e,t){return new we().fromBinary(e,t)}static fromJson(e,t){return new we().fromJson(e,t)}static fromJsonString(e,t){return new we().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(we,e,t)}}we.runtime=ue,we.typeName="google.protobuf.BytesValue",we.fields=ue.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),we.fieldWrapper={wrapField(r){return new we({value:r})},unwrapField(r){return r.value}};function Re(r){const e=x[r];return typeof e!="string"?r.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class ze extends Error{constructor(e,t=x.Unknown,n,i,d){super(Ze(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(n!=null?n:{}),this.details=i!=null?i:[],this.cause=d}static from(e,t=x.Unknown){return e instanceof ze?e:e instanceof Error?e.name=="AbortError"?new ze(e.message,x.Canceled):new ze(e.message,t,void 0,void 0,e):new ze(String(e),t,void 0,void 0,e)}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,n=[];for(const i of this.details){if(i instanceof A){t.findMessage(i.getType().typeName)&&n.push(i);continue}const d=t.findMessage(i.type);if(d)try{n.push(d.fromBinary(i.value))}catch{}}return n}}function Ze(r,e){return r.length?`[${Re(e)}] ${r}`:`[${Re(e)}]`}function Q(r,e,t){try{const n=Je.dec(r);return e?e.fromBinary(n,t):n}catch(n){throw ze.from(n,x.DataLoss)}}function ge(r,e){const t={};for(const[n,i]of Object.entries(r.methods)){const d=e(Object.assign(Object.assign({},i),{localName:n,service:r}));d!=null&&(t[n]=d)}return t}function Oe(r){let e,t=new Uint8Array(0);function n(i){const d=new Uint8Array(t.length+i.length);d.set(t),d.set(i,t.length),t=d}return new ReadableStream({start(){e=r.getReader()},async pull(i){let d;for(;;){if(d===void 0&&t.byteLength>=5){let F=0;for(let U=1;U<5;U++)F=(F<<8)+t[U];d={flags:t[0],length:F}}if(d!==void 0&&t.byteLength>=d.length+5)break;const R=await e.read();if(R.done)break;n(R.value)}if(d===void 0){if(t.byteLength==0){i.close();return}i.error(new ze("premature end of stream",x.DataLoss));return}const w=t.subarray(5,5+d.length);t=t.subarray(5+d.length),i.enqueue({flags:d.flags,data:w})}})}function Pe(r,e){const t=new Uint8Array(e.length+5);t.set(e,5);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setUint8(0,r),n.setUint32(1,e.length),t}var Ye=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(d){t[d]=r[d]&&function(w){return new Promise(function(R,F){w=r[d](w),i(R,F,w.done,w.value)})}}function i(d,w,R,F){Promise.resolve(F).then(function(U){d({value:U,done:R})},w)}},it=globalThis&&globalThis.__await||function(r){return this instanceof it?(this.v=r,this):new it(r)},ft=globalThis&&globalThis.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,d=[];return i={},w("next"),w("throw"),w("return"),i[Symbol.asyncIterator]=function(){return this},i;function w(ie){n[ie]&&(i[ie]=function(me){return new Promise(function(Ne,Le){d.push([ie,me,Ne,Le])>1||R(ie,me)})})}function R(ie,me){try{F(n[ie](me))}catch(Ne){Ae(d[0][3],Ne)}}function F(ie){ie.value instanceof it?Promise.resolve(ie.value.v).then(U,ae):Ae(d[0][2],ie)}function U(ie){R("next",ie)}function ae(ie){R("throw",ie)}function Ae(ie,me){ie(me),d.shift(),d.length&&R(d[0][0],d[0][1])}},tt=globalThis&&globalThis.__asyncDelegator||function(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,d){e[i]=r[i]?function(w){return(t=!t)?{value:it(r[i](w)),done:!1}:d?d(w):w}:d}};function _t(r){return ft(this,arguments,function*(){yield it(yield*tt(Ye(r)))})}var mt=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(d){t[d]=r[d]&&function(w){return new Promise(function(R,F){w=r[d](w),i(R,F,w.done,w.value)})}}function i(d,w,R,F){Promise.resolve(F).then(function(U){d({value:U,done:R})},w)}},Ft=globalThis&&globalThis.__await||function(r){return this instanceof Ft?(this.v=r,this):new Ft(r)},An=globalThis&&globalThis.__asyncDelegator||function(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,d){e[i]=r[i]?function(w){return(t=!t)?{value:Ft(r[i](w)),done:!1}:d?d(w):w}:d}},Rn=globalThis&&globalThis.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,d=[];return i={},w("next"),w("throw"),w("return"),i[Symbol.asyncIterator]=function(){return this},i;function w(ie){n[ie]&&(i[ie]=function(me){return new Promise(function(Ne,Le){d.push([ie,me,Ne,Le])>1||R(ie,me)})})}function R(ie,me){try{F(n[ie](me))}catch(Ne){Ae(d[0][3],Ne)}}function F(ie){ie.value instanceof Ft?Promise.resolve(ie.value.v).then(U,ae):Ae(d[0][2],ie)}function U(ie){R("next",ie)}function ae(ie){R("throw",ie)}function Ae(ie,me){ie(me),d.shift(),d.length&&R(d[0][0],d[0][1])}};function Ve(r,e){return ge(r,t=>{switch(t.kind){case Ot.Unary:return at(e,r,t);case Ot.ServerStreaming:return Tt(e,r,t);case Ot.ClientStreaming:return Xe(e,r,t);case Ot.BiDiStreaming:return ot(e,r,t);default:return null}})}function at(r,e,t){return async function(n,i){var d,w;const R=await r.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,n,i==null?void 0:i.contextValues);return(d=i==null?void 0:i.onHeader)===null||d===void 0||d.call(i,R.header),(w=i==null?void 0:i.onTrailer)===null||w===void 0||w.call(i,R.trailer),R.message}}function Tt(r,e,t){return function(n,i){return en(r.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,_t([n]),i==null?void 0:i.contextValues),i)}}function Xe(r,e,t){return async function(n,i){var d,w,R,F,U,ae;const Ae=await r.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,n,i==null?void 0:i.contextValues);(U=i==null?void 0:i.onHeader)===null||U===void 0||U.call(i,Ae.header);let ie;try{for(var me=!0,Ne=mt(Ae.message),Le;Le=await Ne.next(),d=Le.done,!d;me=!0)F=Le.value,me=!1,ie=F}catch(Me){w={error:Me}}finally{try{!me&&!d&&(R=Ne.return)&&await R.call(Ne)}finally{if(w)throw w.error}}if(!ie)throw new ze("protocol error: missing response message",x.Internal);return(ae=i==null?void 0:i.onTrailer)===null||ae===void 0||ae.call(i,Ae.trailer),ie}}function ot(r,e,t){return function(n,i){return en(r.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,n,i==null?void 0:i.contextValues),i)}}function en(r,e){const t=function(){var n,i;return Rn(this,arguments,function*(){const d=yield Ft(r);(n=e==null?void 0:e.onHeader)===null||n===void 0||n.call(e,d.header),yield Ft(yield*An(mt(d.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,d.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function rt(...r){const e=new AbortController,t=r.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){n.apply(i);break}i.addEventListener("abort",n)}function n(){e.signal.aborted||e.abort(yt(this));for(const i of t)i.removeEventListener("abort",n)}return e}function Nt(r){const e=new AbortController,t=()=>{e.abort(new ze("the operation timed out",x.DeadlineExceeded))};let n;return r!==void 0&&(r<=0?t():n=setTimeout(t,r)),{signal:e.signal,cleanup:()=>clearTimeout(n)}}function yt(r){if(!r.aborted)return;if(r.reason!==void 0)return r.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function tn(){return{get(r){return r.id in this?this[r.id]:r.defaultValue},set(r,e){return this[r.id]=e,this},delete(r){return delete this[r.id],this}}}const pn=128;function rr(r){const e=new Headers,t=new TextDecoder().decode(r).split(`\r
`);for(const n of t){if(n==="")continue;const i=n.indexOf(":");if(i>0){const d=n.substring(0,i).trim(),w=n.substring(i+1).trim();e.append(d,w)}}return e}const Hn="Content-Type",_n="Grpc-Timeout",Gr="Grpc-Status",mr="Grpc-Message",Yr="Grpc-Status-Details-Bin",Cr="User-Agent",Rr="X-User-Agent",wi="X-Grpc-Web",Dr="application/grpc-web+proto",Lr="application/grpc-web+json";class Wn extends A{constructor(e){super(),this.code=0,this.message="",this.details=[],ue.util.initPartial(e,this)}static fromBinary(e,t){return new Wn().fromBinary(e,t)}static fromJson(e,t){return new Wn().fromJson(e,t)}static fromJsonString(e,t){return new Wn().fromJsonString(e,t)}static equals(e,t){return ue.util.equals(Wn,e,t)}}Wn.runtime=ue,Wn.typeName="google.rpc.Status",Wn.fields=ue.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:kt,repeated:!0}]);const Gs="0";function vo(r){var e;const t=r.get(Yr);if(t!=null){const i=Q(t,Wn);if(i.code==0)return;const d=new ze(i.message,i.code,r);return d.details=i.details.map(w=>({type:w.typeUrl.substring(w.typeUrl.lastIndexOf("/")+1),value:w.value})),d}const n=r.get(Gr);if(n!=null){if(n===Gs)return;const i=parseInt(n,10);return i in x?new ze(decodeURIComponent((e=r.get(mr))!==null&&e!==void 0?e:""),i,r):new ze(`invalid grpc-status: ${n}`,x.Internal,r)}}function mo(r,e,t){const n=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return r.toString().replace(/\/?$/,`/${n}/${i}`)}function yo(r,e){return e instanceof A?e:new r(e)}function Ys(r,e){function t(n){return n.done===!0?n:{done:n.done,value:yo(r,n.value)}}return{[Symbol.asyncIterator](){const n=e[Symbol.asyncIterator](),i={next:()=>n.next().then(t)};return n.throw!==void 0&&(i.throw=d=>n.throw(d).then(t)),n.return!==void 0&&(i.return=d=>n.return(d).then(t)),i}}}function Zs(r){var e;const t=Object.assign({},r);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function bo(r,e,t,n){const i=e?wo(r.I,n):Ao(r.I,t);return{parse:(e?wo(r.O,n):Ao(r.O,t)).parse,serialize:i.serialize}}function wo(r,e){return{parse(t){try{return r.fromBinary(t,e)}catch(n){const i=n instanceof Error?n.message:String(n);throw new ze(`parse binary: ${i}`,x.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(n){const i=n instanceof Error?n.message:String(n);throw new ze(`serialize binary: ${i}`,x.Internal)}}}}function Ao(r,e){var t,n;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,d=(n=e==null?void 0:e.textDecoder)!==null&&n!==void 0?n:new TextDecoder,w=Zs(e);return{parse(R){try{const F=d.decode(R);return r.fromJsonString(F,w)}catch(F){throw ze.from(F,x.InvalidArgument)}},serialize(R){try{const F=R.toJsonString(w);return i.encode(F)}catch(F){throw ze.from(F,x.Internal)}}}}function Xs(r){const e=To(r.next,r.interceptors),[t,n,i]=_o(r),d=Object.assign(Object.assign({},r.req),{message:yo(r.req.method.I,r.req.message),signal:t});return e(d).then(w=>(i(),w),n)}function Qs(r){const e=To(r.next,r.interceptors),[t,n,i]=_o(r),d=Object.assign(Object.assign({},r.req),{message:Ys(r.req.method.I,r.req.message),signal:t});let w=!1;return t.addEventListener("abort",function(){var R,F;const U=r.req.message[Symbol.asyncIterator]();w||(R=U.throw)===null||R===void 0||R.call(U,this.reason).catch(()=>{}),(F=U.return)===null||F===void 0||F.call(U).catch(()=>{})}),e(d).then(R=>Object.assign(Object.assign({},R),{message:{[Symbol.asyncIterator](){const F=R.message[Symbol.asyncIterator]();return{next(){return F.next().then(U=>(U.done==!0&&(w=!0,i()),U),n)}}}}}),n)}function _o(r){const{signal:e,cleanup:t}=Nt(r.timeoutMs),n=rt(r.signal,e);return[n.signal,function(d){const w=ze.from(e.aborted?yt(e):d);return n.abort(w),t(),Promise.reject(w)},function(){t(),n.abort()}]}function To(r,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((n,i)=>i(n),r))!==null&&t!==void 0?t:r}function ea(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Oo(r,e){const t=vo(r);if(t)throw e.forEach((n,i)=>{t.metadata.append(i,n)}),t}function So(r,e,t,n){const i=new Headers(t!=null?t:{});return i.set(Hn,r?Dr:Lr),i.set(wi,"1"),i.set(Rr,"connect-es/1.2.0"),n&&i.set(Cr,"connect-es/1.2.0"),e!==void 0&&i.set(_n,`${e}m`),i}function ta(r){switch(r){case 400:return x.Internal;case 401:return x.Unauthenticated;case 403:return x.PermissionDenied;case 404:return x.Unimplemented;case 429:return x.Unavailable;case 502:return x.Unavailable;case 503:return x.Unavailable;case 504:return x.Unavailable;default:return x.Unknown}}function ko(r,e){var t;if(r>=200&&r<300){const n=vo(e);if(n)throw n;return{foundStatus:e.has(Gr)}}throw new ze(decodeURIComponent((t=e.get(mr))!==null&&t!==void 0?t:`HTTP ${r}`),ta(r),e)}var yr=globalThis&&globalThis.__await||function(r){return this instanceof yr?(this.v=r,this):new yr(r)},na=globalThis&&globalThis.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,d=[];return i={},w("next"),w("throw"),w("return"),i[Symbol.asyncIterator]=function(){return this},i;function w(ie){n[ie]&&(i[ie]=function(me){return new Promise(function(Ne,Le){d.push([ie,me,Ne,Le])>1||R(ie,me)})})}function R(ie,me){try{F(n[ie](me))}catch(Ne){Ae(d[0][3],Ne)}}function F(ie){ie.value instanceof yr?Promise.resolve(ie.value.v).then(U,ae):Ae(d[0][2],ie)}function U(ie){R("next",ie)}function ae(ie){R("throw",ie)}function Ae(ie,me){ie(me),d.shift(),d.length&&R(d[0][0],d[0][1])}};function ra(r){var e;ea();const t=(e=r.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(n,i,d,w,R,F,U){var ae;const{serialize:Ae,parse:ie}=bo(i,t,r.jsonOptions,r.binaryOptions);return w=w===void 0?r.defaultTimeoutMs:w<=0?void 0:w,await Xs({interceptors:r.interceptors,signal:d,timeoutMs:w,req:{stream:!1,service:n,method:i,url:mo(r.baseUrl,n,i),init:{method:"POST",credentials:(ae=r.credentials)!==null&&ae!==void 0?ae:"same-origin",redirect:"error",mode:"cors"},header:So(t,w,R,!1),contextValues:U!=null?U:tn(),message:F},next:async me=>{var Ne;const Me=await((Ne=r.fetch)!==null&&Ne!==void 0?Ne:globalThis.fetch)(me.url,Object.assign(Object.assign({},me.init),{headers:me.header,signal:me.signal,body:Pe(0,Ae(me.message))}));if(ko(Me.status,Me.headers),!Me.body)throw"missing response body";const nt=Oe(Me.body).getReader();let gt,st;for(;;){const ht=await nt.read();if(ht.done)break;const{flags:pt,data:wt}=ht.value;if(pt===pn){if(gt!==void 0)throw"extra trailer";gt=rr(wt);continue}if(st!==void 0)throw"extra message";st=ie(wt)}if(gt===void 0)throw"missing trailer";if(Oo(gt,Me.headers),st===void 0)throw"missing message";return{stream:!1,header:Me.headers,message:st,trailer:gt}}})},async stream(n,i,d,w,R,F,U){var ae;const{serialize:Ae,parse:ie}=bo(i,t,r.jsonOptions,r.binaryOptions);function me(Le,Me,nt,gt){return na(this,arguments,function*(){const ht=Oe(Le).getReader();if(Me){if(!(yield yr(ht.read())).done)throw"extra data for trailers-only";return yield yr(void 0)}let pt=!1;for(;;){const wt=yield yr(ht.read());if(wt.done)break;const{flags:kr,data:Er}=wt.value;if((kr&pn)===pn){if(pt)throw"extra trailer";pt=!0;const yi=rr(Er);Oo(yi,gt),yi.forEach((jl,Fl)=>nt.set(Fl,jl));continue}if(pt)throw"extra message";yield yield yr(ie(Er))}if(!pt)throw"missing trailer"})}async function Ne(Le){if(i.kind!=Ot.ServerStreaming)throw"The fetch API does not support streaming request bodies";const Me=await Le[Symbol.asyncIterator]().next();if(Me.done==!0)throw"missing request message";return Pe(0,Ae(Me.value))}return w=w===void 0?r.defaultTimeoutMs:w<=0?void 0:w,Qs({interceptors:r.interceptors,signal:d,timeoutMs:w,req:{stream:!0,service:n,method:i,url:mo(r.baseUrl,n,i),init:{method:"POST",credentials:(ae=r.credentials)!==null&&ae!==void 0?ae:"same-origin",redirect:"error",mode:"cors"},header:So(t,w,R,!1),contextValues:U!=null?U:tn(),message:F},next:async Le=>{var Me;const gt=await((Me=r.fetch)!==null&&Me!==void 0?Me:globalThis.fetch)(Le.url,Object.assign(Object.assign({},Le.init),{headers:Le.header,signal:Le.signal,body:await Ne(Le.message)})),{foundStatus:st}=ko(gt.status,gt.headers);if(!gt.body)throw"missing response body";const ht=new Headers;return Object.assign(Object.assign({},Le),{header:gt.headers,trailer:ht,message:me(gt.body,st,ht,gt.headers)})}})}}}const Qe=ue.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),Ai=ue.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),ia=ue.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:vn},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Ki}}]),Gn=ue.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Ko},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Eo,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:Ue},{no:6,name:"is_removed",kind:"scalar",T:8}]),Eo=ue.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:_i},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Ui,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Vi}]),_i=ue.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),Ui=ue.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:xo,oneof:"body"},{no:2,name:"add",kind:"message",T:No,oneof:"body"},{no:3,name:"move",kind:"message",T:Io,oneof:"body"},{no:4,name:"remove",kind:"message",T:Po,oneof:"body"},{no:5,name:"edit",kind:"message",T:Co,oneof:"body"},{no:6,name:"select",kind:"message",T:oa,oneof:"body"},{no:7,name:"style",kind:"message",T:Ro,oneof:"body"},{no:8,name:"increase",kind:"message",T:Do,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Lo,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Mo,oneof:"body"}]),xo=ue.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Yn},{no:4,name:"executed_at",kind:"message",T:Ue}],{localName:"Operation_Set"}),No=ue.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"prev_created_at",kind:"message",T:Ue},{no:3,name:"value",kind:"message",T:Yn},{no:4,name:"executed_at",kind:"message",T:Ue}],{localName:"Operation_Add"}),Io=ue.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"prev_created_at",kind:"message",T:Ue},{no:3,name:"created_at",kind:"message",T:Ue},{no:4,name:"executed_at",kind:"message",T:Ue}],{localName:"Operation_Move"}),Po=ue.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"created_at",kind:"message",T:Ue},{no:3,name:"executed_at",kind:"message",T:Ue}],{localName:"Operation_Remove"}),Co=ue.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"from",kind:"message",T:br},{no:3,name:"to",kind:"message",T:br},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:Ue}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:Ue},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),oa=ue.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"from",kind:"message",T:br},{no:3,name:"to",kind:"message",T:br},{no:4,name:"executed_at",kind:"message",T:Ue}],{localName:"Operation_Select"}),Ro=ue.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"from",kind:"message",T:br},{no:3,name:"to",kind:"message",T:br},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:Ue},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:Ue}}],{localName:"Operation_Style"}),Do=ue.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"value",kind:"message",T:Yn},{no:3,name:"executed_at",kind:"message",T:Ue}],{localName:"Operation_Increase"}),Lo=ue.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"from",kind:"message",T:Zr},{no:3,name:"to",kind:"message",T:Zr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:Ue}},{no:5,name:"contents",kind:"message",T:Vo,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:Ue}],{localName:"Operation_TreeEdit"}),Mo=ue.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:Ue},{no:2,name:"from",kind:"message",T:Zr},{no:3,name:"to",kind:"message",T:Zr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:Ue},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:Ue}}],{localName:"Operation_TreeStyle"}),Yn=ue.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:Ue},{no:2,name:"moved_at",kind:"message",T:Ue},{no:3,name:"removed_at",kind:"message",T:Ue},{no:4,name:"type",kind:"enum",T:ue.getEnumType(Qe)},{no:5,name:"value",kind:"scalar",T:12}]),vn=ue.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:Bo,oneof:"body"},{no:2,name:"json_array",kind:"message",T:qo,oneof:"body"},{no:3,name:"primitive",kind:"message",T:jo,oneof:"body"},{no:5,name:"text",kind:"message",T:Fo,oneof:"body"},{no:6,name:"counter",kind:"message",T:Uo,oneof:"body"},{no:7,name:"tree",kind:"message",T:$o,oneof:"body"}]),Bo=ue.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:zo,repeated:!0},{no:2,name:"created_at",kind:"message",T:Ue},{no:3,name:"moved_at",kind:"message",T:Ue},{no:4,name:"removed_at",kind:"message",T:Ue}],{localName:"JSONElement_JSONObject"}),qo=ue.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:$i,repeated:!0},{no:2,name:"created_at",kind:"message",T:Ue},{no:3,name:"moved_at",kind:"message",T:Ue},{no:4,name:"removed_at",kind:"message",T:Ue}],{localName:"JSONElement_JSONArray"}),jo=ue.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:ue.getEnumType(Qe)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:Ue},{no:4,name:"moved_at",kind:"message",T:Ue},{no:5,name:"removed_at",kind:"message",T:Ue}],{localName:"JSONElement_Primitive"}),Fo=ue.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:Jo,repeated:!0},{no:2,name:"created_at",kind:"message",T:Ue},{no:3,name:"moved_at",kind:"message",T:Ue},{no:4,name:"removed_at",kind:"message",T:Ue}],{localName:"JSONElement_Text"}),Uo=ue.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:ue.getEnumType(Qe)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:Ue},{no:4,name:"moved_at",kind:"message",T:Ue},{no:5,name:"removed_at",kind:"message",T:Ue}],{localName:"JSONElement_Counter"}),$o=ue.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:Ji,repeated:!0},{no:2,name:"created_at",kind:"message",T:Ue},{no:3,name:"moved_at",kind:"message",T:Ue},{no:4,name:"removed_at",kind:"message",T:Ue}],{localName:"JSONElement_Tree"}),zo=ue.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:vn}]),$i=ue.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:$i},{no:2,name:"element",kind:"message",T:vn}]),Ti=ue.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:Ue},{no:3,name:"is_removed",kind:"scalar",T:8}]),Jo=ue.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:zi},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:Ue},{no:4,name:"ins_prev_id",kind:"message",T:zi},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ti}}]),zi=ue.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:Ue},{no:2,name:"offset",kind:"scalar",T:5}]),Ji=ue.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:Mr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:Ue},{no:5,name:"ins_prev_id",kind:"message",T:Mr},{no:6,name:"ins_next_id",kind:"message",T:Mr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Ti}}]),Vo=ue.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:Ji,repeated:!0}]),Mr=ue.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:Ue},{no:2,name:"offset",kind:"scalar",T:5}]),Zr=ue.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:Mr},{no:2,name:"left_sibling_id",kind:"message",T:Mr}]);ue.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:vt}]),ue.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:vt},{no:9,name:"updated_at",kind:"message",T:vt}]),ue.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:ce},{no:2,name:"auth_webhook_url",kind:"message",T:ce},{no:3,name:"auth_webhook_methods",kind:"message",T:sa},{no:4,name:"client_deactivate_threshold",kind:"message",T:ce}]);const sa=ue.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"});ue.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:vt},{no:5,name:"accessed_at",kind:"message",T:vt},{no:6,name:"updated_at",kind:"message",T:vt}]);const Vi=ue.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:ue.getEnumType(Xr)},{no:2,name:"presence",kind:"message",T:Ki}]),Xr=ue.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),Ki=ue.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),Ko=ue.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),br=ue.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:Ue},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),Ue=ue.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),aa=ue.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),la=ue.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:ue.getEnumType(Ai)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:aa}]),ua=ue.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),ca=ue.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),fa=ue.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),ha=ue.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),da=ue.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Gn}]),ga=ue.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Gn}]),pa=ue.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Gn},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),va=ue.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:Gn}]),ma=ue.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),ya=ue.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:ba,oneof:"body"},{no:2,name:"event",kind:"message",T:la,oneof:"body"}]),ba=ue.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),wa=ue.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Gn}]),Aa=ue.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Gn}]),_a=ue.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Gn},{no:4,name:"push_only",kind:"scalar",T:8}]),Ta=ue.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Gn}]),Oa=ue.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),Sa=ue.makeMessageType("yorkie.v1.BroadcastResponse",[]),ka={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:ua,O:ca,kind:Ot.Unary},deactivateClient:{name:"DeactivateClient",I:fa,O:ha,kind:Ot.Unary},attachDocument:{name:"AttachDocument",I:da,O:ga,kind:Ot.Unary},detachDocument:{name:"DetachDocument",I:pa,O:va,kind:Ot.Unary},removeDocument:{name:"RemoveDocument",I:wa,O:Aa,kind:Ot.Unary},pushPullChanges:{name:"PushPullChanges",I:_a,O:Ta,kind:Ot.Unary},watchDocument:{name:"WatchDocument",I:ma,O:ya,kind:Ot.ServerStreaming},broadcast:{name:"Broadcast",I:Oa,O:Sa,kind:Ot.Unary}}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var mn=null;try{mn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function We(r,e,t){this.low=r|0,this.high=e|0,this.unsigned=!!t}We.prototype.__isLong__,Object.defineProperty(We.prototype,"__isLong__",{value:!0});function Vt(r){return(r&&r.__isLong__)===!0}function Ho(r){var e=Math.clz32(r&-r);return r?31-e:e}We.isLong=Vt;var Wo={},Go={};function wr(r,e){var t,n,i;return e?(r>>>=0,(i=0<=r&&r<256)&&(n=Go[r],n)?n:(t=ut(r,0,!0),i&&(Go[r]=t),t)):(r|=0,(i=-128<=r&&r<128)&&(n=Wo[r],n)?n:(t=ut(r,r<0?-1:0,!1),i&&(Wo[r]=t),t))}We.fromInt=wr;function yn(r,e){if(isNaN(r))return e?Zn:On;if(e){if(r<0)return Zn;if(r>=Zo)return ns}else{if(r<=-Xo)return nn;if(r+1>=Xo)return ts}return r<0?yn(-r,e).neg():ut(r%Br|0,r/Br|0,e)}We.fromNumber=yn;function ut(r,e,t){return new We(r,e,t)}We.fromBits=ut;var Oi=Math.pow;function Hi(r,e,t){if(r.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e?Zn:On;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=r.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return Hi(r.substring(1),e,t).neg();for(var i=yn(Oi(t,8)),d=On,w=0;w<r.length;w+=8){var R=Math.min(8,r.length-w),F=parseInt(r.substring(w,w+R),t);if(R<8){var U=yn(Oi(t,R));d=d.mul(U).add(yn(F))}else d=d.mul(i),d=d.add(yn(F))}return d.unsigned=e,d}We.fromString=Hi;function Tn(r,e){return typeof r=="number"?yn(r,e):typeof r=="string"?Hi(r,e):ut(r.low,r.high,typeof e=="boolean"?e:r.unsigned)}We.fromValue=Tn;var Yo=1<<16,Ea=1<<24,Br=Yo*Yo,Zo=Br*Br,Xo=Zo/2,Qo=wr(Ea),On=wr(0);We.ZERO=On;var Zn=wr(0,!0);We.UZERO=Zn;var qr=wr(1);We.ONE=qr;var es=wr(1,!0);We.UONE=es;var Wi=wr(-1);We.NEG_ONE=Wi;var ts=ut(-1,2147483647,!1);We.MAX_VALUE=ts;var ns=ut(-1,-1,!0);We.MAX_UNSIGNED_VALUE=ns;var nn=ut(0,-2147483648,!1);We.MIN_VALUE=nn;var Te=We.prototype;Te.toInt=function(){return this.unsigned?this.low>>>0:this.low},Te.toNumber=function(){return this.unsigned?(this.high>>>0)*Br+(this.low>>>0):this.high*Br+(this.low>>>0)},Te.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nn)){var t=yn(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var d=yn(Oi(e,6),this.unsigned),w=this,R="";;){var F=w.div(d),U=w.sub(F.mul(d)).toInt()>>>0,ae=U.toString(e);if(w=F,w.isZero())return ae+R;for(;ae.length<6;)ae="0"+ae;R=""+ae+R}},Te.getHighBits=function(){return this.high},Te.getHighBitsUnsigned=function(){return this.high>>>0},Te.getLowBits=function(){return this.low},Te.getLowBitsUnsigned=function(){return this.low>>>0},Te.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nn)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},Te.isZero=function(){return this.high===0&&this.low===0},Te.eqz=Te.isZero,Te.isNegative=function(){return!this.unsigned&&this.high<0},Te.isPositive=function(){return this.unsigned||this.high>=0},Te.isOdd=function(){return(this.low&1)===1},Te.isEven=function(){return(this.low&1)===0},Te.equals=function(e){return Vt(e)||(e=Tn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},Te.eq=Te.equals,Te.notEquals=function(e){return!this.eq(e)},Te.neq=Te.notEquals,Te.ne=Te.notEquals,Te.lessThan=function(e){return this.comp(e)<0},Te.lt=Te.lessThan,Te.lessThanOrEqual=function(e){return this.comp(e)<=0},Te.lte=Te.lessThanOrEqual,Te.le=Te.lessThanOrEqual,Te.greaterThan=function(e){return this.comp(e)>0},Te.gt=Te.greaterThan,Te.greaterThanOrEqual=function(e){return this.comp(e)>=0},Te.gte=Te.greaterThanOrEqual,Te.ge=Te.greaterThanOrEqual,Te.compare=function(e){if(Vt(e)||(e=Tn(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},Te.comp=Te.compare,Te.negate=function(){return!this.unsigned&&this.eq(nn)?nn:this.not().add(qr)},Te.neg=Te.negate,Te.add=function(e){Vt(e)||(e=Tn(e));var t=this.high>>>16,n=this.high&65535,i=this.low>>>16,d=this.low&65535,w=e.high>>>16,R=e.high&65535,F=e.low>>>16,U=e.low&65535,ae=0,Ae=0,ie=0,me=0;return me+=d+U,ie+=me>>>16,me&=65535,ie+=i+F,Ae+=ie>>>16,ie&=65535,Ae+=n+R,ae+=Ae>>>16,Ae&=65535,ae+=t+w,ae&=65535,ut(ie<<16|me,ae<<16|Ae,this.unsigned)},Te.subtract=function(e){return Vt(e)||(e=Tn(e)),this.add(e.neg())},Te.sub=Te.subtract,Te.multiply=function(e){if(this.isZero())return this;if(Vt(e)||(e=Tn(e)),mn){var t=mn.mul(this.low,this.high,e.low,e.high);return ut(t,mn.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Zn:On;if(this.eq(nn))return e.isOdd()?nn:On;if(e.eq(nn))return this.isOdd()?nn:On;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Qo)&&e.lt(Qo))return yn(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,d=this.low>>>16,w=this.low&65535,R=e.high>>>16,F=e.high&65535,U=e.low>>>16,ae=e.low&65535,Ae=0,ie=0,me=0,Ne=0;return Ne+=w*ae,me+=Ne>>>16,Ne&=65535,me+=d*ae,ie+=me>>>16,me&=65535,me+=w*U,ie+=me>>>16,me&=65535,ie+=i*ae,Ae+=ie>>>16,ie&=65535,ie+=d*U,Ae+=ie>>>16,ie&=65535,ie+=w*F,Ae+=ie>>>16,ie&=65535,Ae+=n*ae+i*U+d*F+w*R,Ae&=65535,ut(me<<16|Ne,Ae<<16|ie,this.unsigned)},Te.mul=Te.multiply,Te.divide=function(e){if(Vt(e)||(e=Tn(e)),e.isZero())throw Error("division by zero");if(mn){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?mn.div_u:mn.div_s)(this.low,this.high,e.low,e.high);return ut(t,mn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Zn:On;var n,i,d;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Zn;if(e.gt(this.shru(1)))return es;d=Zn}else{if(this.eq(nn)){if(e.eq(qr)||e.eq(Wi))return nn;if(e.eq(nn))return qr;var w=this.shr(1);return n=w.div(e).shl(1),n.eq(On)?e.isNegative()?qr:Wi:(i=this.sub(e.mul(n)),d=n.add(i.div(e)),d)}else if(e.eq(nn))return this.unsigned?Zn:On;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();d=On}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var R=Math.ceil(Math.log(n)/Math.LN2),F=R<=48?1:Oi(2,R-48),U=yn(n),ae=U.mul(e);ae.isNegative()||ae.gt(i);)n-=F,U=yn(n,this.unsigned),ae=U.mul(e);U.isZero()&&(U=qr),d=d.add(U),i=i.sub(ae)}return d},Te.div=Te.divide,Te.modulo=function(e){if(Vt(e)||(e=Tn(e)),mn){var t=(this.unsigned?mn.rem_u:mn.rem_s)(this.low,this.high,e.low,e.high);return ut(t,mn.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},Te.mod=Te.modulo,Te.rem=Te.modulo,Te.not=function(){return ut(~this.low,~this.high,this.unsigned)},Te.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},Te.clz=Te.countLeadingZeros,Te.countTrailingZeros=function(){return this.low?Ho(this.low):Ho(this.high)+32},Te.ctz=Te.countTrailingZeros,Te.and=function(e){return Vt(e)||(e=Tn(e)),ut(this.low&e.low,this.high&e.high,this.unsigned)},Te.or=function(e){return Vt(e)||(e=Tn(e)),ut(this.low|e.low,this.high|e.high,this.unsigned)},Te.xor=function(e){return Vt(e)||(e=Tn(e)),ut(this.low^e.low,this.high^e.high,this.unsigned)},Te.shiftLeft=function(e){return Vt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ut(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ut(0,this.low<<e-32,this.unsigned)},Te.shl=Te.shiftLeft,Te.shiftRight=function(e){return Vt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ut(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ut(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},Te.shr=Te.shiftRight,Te.shiftRightUnsigned=function(e){return Vt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ut(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?ut(this.high,0,this.unsigned):ut(this.high>>>e-32,0,this.unsigned)},Te.shru=Te.shiftRightUnsigned,Te.shr_u=Te.shiftRightUnsigned,Te.rotateLeft=function(e){var t;return Vt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ut(this.high,this.low,this.unsigned):e<32?(t=32-e,ut(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,ut(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},Te.rotl=Te.rotateLeft,Te.rotateRight=function(e){var t;return Vt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ut(this.high,this.low,this.unsigned):e<32?(t=32-e,ut(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,ut(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},Te.rotr=Te.rotateRight,Te.toSigned=function(){return this.unsigned?ut(this.low,this.high,!1):this},Te.toUnsigned=function(){return this.unsigned?this:ut(this.low,this.high,!0)},Te.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},Te.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},Te.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},We.fromBytes=function(e,t,n){return n?We.fromBytesLE(e,t):We.fromBytesBE(e,t)},We.fromBytesLE=function(e,t){return new We(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},We.fromBytesBE=function(e,t){return new We(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var lt=(r=>(r.Ok="ok",r.ClientNotActive="client-not-active",r.Unimplemented="unimplemented",r.Unsupported="unsupported",r.DocumentNotAttached="document-not-attached",r.DocumentNotDetached="document-not-detached",r.DocumentRemoved="document-removed",r.InvalidObjectKey="invalid-object-key",r.InvalidArgument="invalid-argument",r))(lt||{});class ct extends Error{constructor(e,t){super(t),b(this,"name","YorkieError"),b(this,"stack"),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function Sn(r){if(r instanceof Map){const e=Array.from(r);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(r))}const rs=r=>r?Object.entries(r).length===0:!0,jr=r=>{const e={};for(const[t,n]of Object.entries(r))e[t]=JSON.stringify(n);return e},Fr=r=>{const e={};for(const[t,n]of Object.entries(r))e[t]=JSON.parse(n);return e};var ir=(r=>(r.Put="put",r.Clear="clear",r))(ir||{});class Gi{constructor(e,t){b(this,"context"),b(this,"presence"),this.context=e,this.presence=t}set(e,t){for(const n of Object.keys(e))this.presence[n]=e[n];this.context.setPresenceChange({type:"put",presence:Sn(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Si="000000000000000000000000",xa="FFFFFFFFFFFFFFFFFFFFFFFF";class Yt{constructor(e,t,n){b(this,"lamport"),b(this,"delimiter"),b(this,"actorID"),this.lamport=e,this.delimiter=t,this.actorID=n}static of(e,t,n){return new Yt(e,t,n)}static fromStruct(e){return Yt.of(We.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Yt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Yi=0,Na=4294967295,Ia=We.MAX_VALUE,kn=new Yt(We.fromNumber(0),Yi,Si);new Yt(We.fromNumber(1),Yi+1,Si);const Qr=new Yt(Ia,Na,xa);var an=(r=>(r[r.Trivial=0]="Trivial",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal",r))(an||{});let Ar=2;function Pa(r){Ar=r}const _e={trivial:(...r)=>{Ar>0||typeof console<"u"&&console.log("YORKIE T:",...r)},debug:(...r)=>{Ar>1||typeof console<"u"&&console.log("YORKIE D:",...r)},info:(...r)=>{Ar>2||typeof console<"u"&&console.log("YORKIE I:",...r)},warn:(...r)=>{Ar>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...r):console.log("YORKIE W:",...r))},error:(...r)=>{Ar>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...r):console.log("YORKIE E:",...r))},fatal:(r,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${r}`)},isEnabled:r=>Ar<=r};function Dn(r){return r.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class ei{constructor(e){b(this,"createdAt"),b(this,"movedAt"),b(this,"removedAt"),this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class or extends ei{constructor(e){super(e)}}class Zi{constructor(e,t){b(this,"strKey"),b(this,"value"),this.strKey=e,this.value=t}static of(e,t){return new Zi(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class ti{constructor(){b(this,"nodeMapByKey"),b(this,"nodeMapByCreatedAt"),this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new ti}set(e,t,n){let i;const d=this.nodeMapByKey.get(e);d!=null&&!d.isRemoved()&&d.remove(n)&&(i=d.getValue());const w=Zi.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),w),(d==null||n.after(d.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,w),t.setMovedAt(n)),i}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||_e.fatal(`fail to find ${e.toIDString()}`);const n=this.nodeMapByCreatedAt.get(e.toIDString());return n.remove(t),n.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){_e.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const n=this.nodeMapByKey.get(t.getStrKey());t===n&&this.nodeMapByKey.delete(n.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const n=this.nodeMapByKey.get(e);if(n!=null&&!!n.remove(t))return n.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class rn extends or{constructor(e,t){super(e),b(this,"memberNodes"),this.memberNodes=t}static create(e,t){if(!t)return new rn(e,ti.create());const n=ti.create();for(const[i,d]of Object.entries(t))n.set(i,d.deepcopy(),d.getCreatedAt());return new rn(e,n)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,n){return this.memberNodes.set(e,t,n)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,n]of this)e.push(`"${Dn(t)}":${n.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,n]of this){const{createdAt:i,value:d,type:w}=n.toJSForTest();e[t]={key:t,createdAt:i,value:d,type:w}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[i]of this)t.push(i);const n=[];for(const i of t.sort()){const d=(e=this.memberNodes.get(i))==null?void 0:e.getValue();n.push(`"${Dn(i)}":${d.toSortedJSON()}`)}return`{${n.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=rn.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const n=t.getValue();if(e(n,this))return;n instanceof or&&n.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var dt=(r=>(r.Local="local",r.Remote="remote",r.UndoRedo="undoredo",r))(dt||{});class En{constructor(e,t){b(this,"parentCreatedAt"),b(this,"executedAt"),this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class is{constructor(e){b(this,"value"),b(this,"left"),b(this,"right"),b(this,"parent"),b(this,"weight"),this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class ni{constructor(e){b(this,"root"),this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&_e.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,n=e,i;for(;n;)(!i||i===n.getRight())&&(t+=n.getLength()+(n.hasLeft()?n.getLeftWeight():0)),i=n,n=n.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new ni(e.getLeft());t.root&&t.root.setParent();const n=new ni(e.getRight());if(n.root&&n.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(n.root),n.root&&n.root.setParent(t.root),this.root=t.root}else this.root=n.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const n of t)n.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Rt=(r=>(r[r.Null=0]="Null",r[r.Boolean=1]="Boolean",r[r.Integer=2]="Integer",r[r.Long=3]="Long",r[r.Double=4]="Double",r[r.String=5]="String",r[r.Bytes=6]="Bytes",r[r.Date=7]="Date",r))(Rt||{});class bt extends ei{constructor(e,t){super(t),b(this,"valueType"),b(this,"value"),this.valueType=bt.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new bt(e,t)}static valueFromBytes(e,t){switch(e){case 0:return null;case 1:return!!t[0];case 2:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 4:{const n=new DataView(t.buffer);return t.forEach(function(i,d){n.setUint8(d,i)}),n.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(t);case 3:return We.fromBytesLE(Array.from(t));case 6:return t;case 7:return new Date(We.fromBytesLE(Array.from(t),!0).toNumber());default:throw new ct(lt.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${Dn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=bt.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof We)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return bt.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case 5:return new TextEncoder().encode(this.value);case 3:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case 6:return this.value;case 7:{const e=this.value,t=We.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new ct(lt.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class ki extends is{constructor(e){super(e),b(this,"prev"),b(this,"next"),this.value=e}static createAfter(e,t){const n=new ki(t),i=e.next;return e.next=n,n.prev=e,n.next=i,i&&(i.prev=n),n}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class ri{constructor(){b(this,"dummyHead"),b(this,"last"),b(this,"nodeMapByIndex"),b(this,"nodeMapByCreatedAt");const e=bt.of(0,kn);e.setRemovedAt(kn),this.dummyHead=new ki(e),this.last=this.dummyHead,this.nodeMapByIndex=new ni,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new ri}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let n=this.nodeMapByCreatedAt.get(e.toIDString());for(n||_e.fatal(`cant find the given node: ${e.toIDString()}`);n.getNext()&&n.getNext().getPositionedAt().after(t);)n=n.getNext();return n}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,n=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,n),d=ki.createAfter(i,t);i===this.last&&(this.last=d),this.nodeMapByIndex.insertAfter(i,d),this.nodeMapByCreatedAt.set(d.getCreatedAt().toIDString(),d)}moveAfter(e,t,n){const i=this.nodeMapByCreatedAt.get(e.toIDString());i||_e.fatal(`cant find the given node: ${e.toIDString()}`);const d=this.nodeMapByCreatedAt.get(t.toIDString());d||_e.fatal(`cant find the given node: ${t.toIDString()}`),i!==d&&(!d.getValue().getMovedAt()||n.after(d.getValue().getMovedAt()))&&(this.release(d),this.insertAfter(i.getCreatedAt(),d.getValue(),n),d.getValue().setMovedAt(n))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||_e.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,n]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||n>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const n=this.nodeMapByCreatedAt.get(e.toIDString()),i=n.isRemoved();return n.remove(t)&&!i&&this.nodeMapByIndex.splayNode(n),n.getValue()}deleteByIndex(e,t){const n=this.getByIndex(e);if(!!n)return n.remove(t)&&this.nodeMapByIndex.splayNode(n),n.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const n=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${n}}`):e.push(`[${n}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class ln extends or{constructor(e,t){super(e),b(this,"elements"),this.elements=t}static create(e,t){if(!t)return new ln(e,ri.create());const n=ri.create();for(const i of t)n.insertAfter(n.getLastCreatedAt(),i.deepcopy());return new ln(e,n)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,n){this.elements.moveAfter(e,t,n)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const n=t.getValue();if(e(n,this))return;n instanceof or&&n.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{createdAt:n,value:i,type:d}=this.get(t).toJSForTest();e[t]={key:String(t),createdAt:n,value:i,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=ln.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class sr extends En{constructor(e,t,n){super(e,n),b(this,"createdAt"),this.createdAt=t}static create(e,t,n){return new sr(e,t,n)}execute(e,t){var n;const i=e.findByCreatedAt(this.getParentCreatedAt());if(i||_e.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof or||_e.fatal(`only object and array can execute remove: ${i}`),t===dt.UndoRedo){let U=i.getByID(this.createdAt);for(;U;){if(U.getRemovedAt())return;U=(n=e.findElementPairByCreatedAt(U.getCreatedAt()))==null?void 0:n.parent}}const d=i.subPathOf(this.createdAt),w=this.toReverseOperation(i),R=i.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(R),{opInfos:i instanceof ln?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(d)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:d}],reverseOp:w}}toReverseOperation(e){if(e instanceof rn){const t=e.subPathOf(this.createdAt);if(t!==void 0){const n=e.get(t);if(n!==void 0)return _r.create(t,n.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class _r extends En{constructor(e,t,n,i){super(n,i),b(this,"key"),b(this,"value"),this.key=e,this.value=t}static create(e,t,n,i){return new _r(e,t,n,i)}execute(e,t){var n;const i=e.findByCreatedAt(this.getParentCreatedAt());if(i||_e.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof rn||_e.fatal("fail to execute, only object can execute set"),t===dt.UndoRedo){let U=i;for(;U;){if(U.getRemovedAt())return;U=(n=e.findElementPairByCreatedAt(U.getCreatedAt()))==null?void 0:n.parent}}const d=i.get(this.key),w=this.toReverseOperation(d),R=this.value.deepcopy(),F=i.set(this.key,R,this.getExecutedAt());return t===dt.UndoRedo&&e.findByCreatedAt(R.getCreatedAt())&&e.deregisterElement(R),e.registerElement(R,i),F&&e.registerRemovedElement(F),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:w}}toReverseOperation(e){let t=sr.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=_r.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class ii extends En{constructor(e,t,n,i){super(e,i),b(this,"prevCreatedAt"),b(this,"value"),this.prevCreatedAt=t,this.value=n}static create(e,t,n,i){return new ii(e,t,n,i)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||_e.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof ln||_e.fatal("fail to execute, only array can execute add");const n=t,i=this.value.deepcopy();return n.insertAfter(this.prevCreatedAt,i),e.registerElement(i,n),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(n.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class ar extends En{constructor(e,t,n,i){super(e,i),b(this,"prevCreatedAt"),b(this,"createdAt"),this.prevCreatedAt=t,this.createdAt=n}static create(e,t,n,i){return new ar(e,t,n,i)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||_e.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof ln||_e.fatal("fail to execute, only array can execute move");const n=t,i=Number(n.subPathOf(this.createdAt));n.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const d=Number(n.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:d,previousIndex:i}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Tr{constructor(e,t,n,i){b(this,"key"),b(this,"value"),b(this,"updatedAt"),b(this,"_isRemoved"),this.key=e,this.value=t,this.updatedAt=n,this._isRemoved=i}static of(e,t,n,i){return new Tr(e,t,n,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Xn{constructor(){b(this,"nodeMapByKey"),b(this,"numberOfRemovedElement"),this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Xn}getNodeMapByKey(){return this.nodeMapByKey}set(e,t,n){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&n.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||n.after(i.getUpdatedAt())){const d=Tr.of(e,t,n,!1);return this.nodeMapByKey.set(e,d),i!==void 0&&i.isRemoved()?[i,d]:[void 0,d]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}setInternal(e,t,n,i){const d=Tr.of(e,t,n,i);this.nodeMapByKey.set(e,d),i&&this.numberOfRemovedElement++}remove(e,t){const n=this.nodeMapByKey.get(e),i=[];if(n===void 0||t.after(n.getUpdatedAt())){if(n===void 0){this.numberOfRemovedElement+=1;const R=Tr.of(e,"",t,!0);return this.nodeMapByKey.set(e,R),i.push(R),i}const d=n.isRemoved();d||(this.numberOfRemovedElement+=1),d&&i.push(n);const w=Tr.of(e,n.getValue(),t,!0);return this.nodeMapByKey.set(e,w),i.push(w),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Xn;for(const[,t]of this.nodeMapByKey)e.setInternal(t.getKey(),t.getValue(),t.getUpdatedAt(),t.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,n]of this.nodeMapByKey)n.isRemoved()||e.push(`"${Dn(t)}":"${Dn(n.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,n]of this.nodeMapByKey)n.isRemoved()||(e[t]=n.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class oi{constructor(e){b(this,"attributes"),b(this,"content"),this.attributes=Xn.create(),this.content=e}static create(e){return new oi(e)}get length(){return this.content.length}substring(e,t){const n=new oi(this.content.substring(e,t));return n.attributes=this.attributes.deepcopy(),n}setAttr(e,t,n){return this.attributes.set(e,t,n)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=Dn(this.content),t=this.attributes.toObject(),n=[];for(const[i,d]of Object.entries(t)){const w=JSON.parse(d),R=typeof w=="string"?`"${Dn(i)}":"${Dn(w)}"`:`"${Dn(i)}":${String(w)}`;n.push(R)}return n.sort(),n.length===0?`{"val":"${e}"}`:`{"attrs":{${n.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof Tr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class bn extends ei{constructor(e,t){super(t),b(this,"rgaTreeSplit"),this.rgaTreeSplit=e}static create(e,t){return new bn(e,t)}edit(e,t,n,i,d){const w=t?oi.create(t):void 0;if(w&&i)for(const[ie,me]of Object.entries(i))w.setAttr(ie,me,n);const[R,F,U,ae]=this.rgaTreeSplit.edit(e,n,w,d),Ae=ae.map(ie=>({...ie,value:ie.value?{attributes:Fr(ie.value.getAttributes()),content:ie.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[F,Ae,U,[R,R]]}setStyle(e,t,n,i){const[,d]=this.rgaTreeSplit.findNodeWithSplit(e[1],n),[,w]=this.rgaTreeSplit.findNodeWithSplit(e[0],n),R=[],F=this.rgaTreeSplit.findBetween(w,d),U=new Map,ae=[];for(const ie of F){const me=ie.getCreatedAt().getActorID(),Ne=i!=null&&i.size?i.has(me)?i.get(me):kn:Qr;if(ie.canStyle(n,Ne)){const Le=U.get(me),Me=ie.getCreatedAt();(!Le||Me.after(Le))&&U.set(me,Me),ae.push(ie)}}const Ae=[];for(const ie of ae){if(ie.isRemoved())continue;const[me,Ne]=this.rgaTreeSplit.findIndexesFromRange(ie.createPosRange());R.push({type:"style",actor:n.getActorID(),from:me,to:Ne,value:{attributes:Fr(t)}});for(const[Le,Me]of Object.entries(t)){const[nt]=ie.getValue().setAttr(Le,Me,n);nt!==void 0&&Ae.push({parent:ie.getValue(),child:nt})}}return[U,Ae,R]}indexRangeToPosRange(e,t){const n=this.rgaTreeSplit.indexToPos(e);return e===t?[n,n]:[n,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const n=t.getValue();e.push({attributes:Fr(n.getAttributes()),content:n.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new bn(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const t of this.rgaTreeSplit){t.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:t});for(const n of t.getValue().getGCPairs())e.push(n)}return e}}class si extends En{constructor(e,t,n,i,d,w,R){super(e,R),b(this,"fromPos"),b(this,"toPos"),b(this,"maxCreatedAtMapByActor"),b(this,"content"),b(this,"attributes"),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=i,this.content=d,this.attributes=w}static create(e,t,n,i,d,w,R){return new si(e,t,n,i,d,w,R)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||_e.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof bn||_e.fatal("fail to execute, only Text can execute edit");const n=t,[,i,d]=n.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const w of d)e.registerGCPair(w);return{opInfos:i.map(({from:w,to:R,value:F})=>({type:"edit",from:w,to:R,value:F,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),i=this.content;return`${e}.EDIT(${t},${n},${i})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class ai extends En{constructor(e,t,n,i,d,w){super(e,w),b(this,"fromPos"),b(this,"toPos"),b(this,"maxCreatedAtMapByActor"),b(this,"attributes"),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=i,this.attributes=d}static create(e,t,n,i,d,w){return new ai(e,t,n,i,d,w)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||_e.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof bn||_e.fatal("fail to execute, only Text can execute edit");const n=t,[,i,d]=n.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const w of i)e.registerGCPair(w);return{opInfos:d.map(({from:w,to:R,value:F})=>({type:"style",from:w,to:R,value:F,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),i=this.attributes;return`${e}.STYL(${t},${n},${JSON.stringify(i)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const Ca=2,Ra="root",Qn="text";function li(r,e){let t=0;const n=r.children;for(let i=0;i<e;i++){const d=n[i];!d||d.isRemoved||(t+=d.paddedSize)}return t}class Da{constructor(e,t=[]){if(b(this,"type"),b(this,"parent"),b(this,"_children"),b(this,"size"),this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*t,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const t of this._children){const n=t.updateDescendantsSize();t.isRemoved||(e+=n)}return this.size+=e,this.paddedSize}get isText(){return this.type===Qn}get paddedSize(){return this.size+(this.isText?0:Ca)}isAncestorOf(e){return La(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}get prevSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e-1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const n=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=n;const d=this.cloneText(e+t);return d.value=i,this.parent.insertAfterInternal(d,this),d}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const n=this.cloneElement(t);this.parent.insertAfterInternal(n,this),n.updateAncestorsSize();const i=this.children.slice(0,e),d=this.children.slice(e);this._children=i,n._children=d,this.size=this._children.reduce((w,R)=>w+R.paddedSize,0),n.size=n._children.reduce((w,R)=>w+R.paddedSize,0);for(const w of n._children)w.parent=n;return n}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const n=this._children.indexOf(t);if(n!==-1)return n;t=t.parent}return-1}}function La(r,e){if(r===e)return!1;for(;e.parent;){if(e.parent===r)return!0;e=e.parent}return!1}var It=(r=>(r.Start="Start",r.End="End",r.Text="Text",r))(It||{});function os(r,e,t,n){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>r.size)throw new Error(`from is out of range: ${e} > ${r.size}`);if(t>r.size)throw new Error(`to is out of range: ${t} > ${r.size}`);if(e===t)return;let i=0;for(const d of r.children){if(e-d.paddedSize<i&&i<t){const w=d.isText?e-i:e-i-1,R=d.isText?t-i:t-i-1,F=!d.isText&&w<0,U=!d.isText&&R>d.size;(d.isText||F)&&n([d,d.isText?"Text":"Start"],U),os(d,Math.max(0,w),Math.min(R,d.size),n),U&&n([d,"End"],U)}i+=d.paddedSize}}function ss(r,e,t=0){for(const n of r.children)ss(n,e,t+1);e(r,t)}function Ei(r,e,t=0){for(const n of r._children)Ei(n,e,t+1);e(r,t)}function Xi(r,e,t=!0){if(e>r.size)throw new Error(`index is out of range: ${e} > ${r.size}`);if(r.isText)return{node:r,offset:e};let n=0,i=0;for(const d of r.children){if(t&&d.isText&&d.size>=e-i)return Xi(d,e-i,t);if(e===i)return{node:r,offset:n};if(!t&&d.paddedSize===e-i)return{node:r,offset:n+1};if(d.paddedSize>e-i)return Xi(d,e-i-1,t);i+=d.paddedSize,n+=1}return{node:r,offset:n}}function as(r){return r.isText||r.children.length===0?r:as(r.children[0])}function Ma(r,e){if(r.size<e)throw new Error("unacceptable path");for(let t=0;t<r.children.length;t++){const n=r.children[t];if(n.size<e)e-=n.size;else{r=n;break}}return{node:r,offset:e}}class Ba{constructor(e){b(this,"root"),this.root=e}tokensBetween(e,t,n){os(this.root,e,t,n)}traverse(e){ss(this.root,e,0)}traverseAll(e){Ei(this.root,e,0)}findTreePos(e,t=!0){return Xi(this.root,e,t)}treePosToPath(e){const t=[];let n=e.node;if(n.isText){const i=n.parent.findOffset(n);if(i===-1)throw new Error("invalid treePos");const d=li(n.parent,i);t.push(d+e.offset),n=n.parent}else if(n.hasTextChild()){const i=li(n,e.offset);t.push(i)}else t.push(e.offset);for(;n.parent;){const i=n.parent.findOffset(n);if(i===-1)throw new Error("invalid treePos");t.push(i),n=n.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let n=0;n<e.length-1;n++){const i=e[n];if(t=t.children[i],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return Ma(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:n}=e;if(t.isText){if(t.size===n){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===n?t:as(t.children[n])}indexOf(e){let{node:t}=e;const{offset:n}=e;let i=0,d=1;if(t.isText){i+=n;const w=t.parent,R=w.findOffset(t);if(R===-1)throw new Error("invalid pos");i+=li(w,R),t=t.parent}else i+=li(t,n);for(;t!=null&&t.parent;){const w=t.parent,R=w.findOffset(t);if(R===-1)throw new Error("invalid pos");i+=li(w,R),d++,t=t.parent}return i+d-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const qa=(r,e)=>r===e?0:r<e?-1:1;class ja{constructor(e,t,n){b(this,"key"),b(this,"value"),b(this,"parent"),b(this,"left"),b(this,"right"),b(this,"isRed"),this.key=e,this.value=t,this.isRed=n}}class Fa{constructor(e){b(this,"stack"),this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class ls{constructor(e){b(this,"root"),b(this,"comparator"),b(this,"counter"),this.comparator=typeof e<"u"?e:qa,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new Fa(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const n=this.comparator(e,t.key);if(n>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(n<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,d=t;for(;i&&d===i.left;)d=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const n=this.comparator(e,t.key);if(n===0)return t;n<0?t=t.left:n>0&&(t=t.right)}}putInternal(e,t,n){if(!n)return this.counter+=1,new ja(e,t,!0);const i=this.comparator(e,n.key);return i<0?n.left=this.putInternal(e,t,n.left):i>0?n.right=this.putInternal(e,t,n.right):n.value=t,this.isRed(n.right)&&!this.isRed(n.left)&&(n=this.rotateLeft(n)),this.isRed(n.left)&&this.isRed(n.left.left)&&(n=this.rotateRight(n)),this.isRed(n.left)&&this.isRed(n.right)&&this.flipColors(n),n}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const n=this.min(e.right);e.value=n.value,e.key=n.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class xn{constructor(e,t){b(this,"parentID"),b(this,"leftSiblingID"),this.parentID=e,this.leftSiblingID=t}static of(e,t){return new xn(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:n}=e,i;return n.isText?(n.parent.children[0]===n&&t===0?i=n.parent:i=n,n=n.parent):t===0?i=n:i=n.children[t-1],xn.of(n.id,Ut.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return xn.of(Ut.of(Yt.fromStruct(e.parentID.createdAt),e.parentID.offset),Ut.of(Yt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const t=this.getParentID(),n=this.getLeftSiblingID(),i=e.findFloorNode(t);let d=e.findFloorNode(n);if(!i||!d)throw new Error(`cannot find node of CRDTTreePos(${t.toTestString()}, ${n.toTestString()})`);return!n.equals(t)&&n.getOffset()>0&&n.getOffset()===d.id.getOffset()&&d.insPrevID&&(d=e.findFloorNode(d.insPrevID)),[i,d]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ut{constructor(e,t){b(this,"createdAt"),b(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new Ut(e,t)}static fromStruct(e){return Ut.of(Yt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class un extends Da{constructor(e,t,n,i,d){super(t),b(this,"id"),b(this,"removedAt"),b(this,"attrs"),b(this,"insPrevID"),b(this,"insNextID"),b(this,"_value",""),this.id=e,this.removedAt=d,i&&(this.attrs=i),typeof n=="string"?this.value=n:Array.isArray(n)&&(this._children=n)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,t,n,i){return new un(e,t,n,i)}deepcopy(){var e;const t=new un(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)==null?void 0:e.deepcopy(),t._children=this._children.map(n=>{const i=n.deepcopy();return i.parent=t,i}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&this.updateAncestorsSize()}cloneText(e){return new un(Ut.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new un(Ut.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,n){const i=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,n);if(i){if(i.insPrevID=this.id,this.insNextID){const d=e.findFloorNode(this.insNextID);d.insPrevID=i.id,i.insNextID=this.insNextID}this.insNextID=i.id,e.registerNode(i)}return i}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return this.isText?!1:!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,t){this.attrs||(this.attrs=new Xn);const n=new Array;for(const[i,d]of Object.entries(e))n.push(this.attrs.set(i,d,t));return n}purge(e){this.attrs&&this.attrs.purge(e)}getGCPairs(){const e=[];if(!this.attrs)return e;for(const t of this.attrs)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}function Qi(r){var e;if(r.isText){const n=r;return{type:n.type,value:n.value}}const t={type:r.type,children:r.children.map(Qi)};return r.attrs&&(t.attributes=Fr((e=r.attrs)==null?void 0:e.toObject())),t}function eo(r){if(r.isText)return r.value;let e="";return r.attrs&&r.attrs.size()&&(e=" "+Array.from(r.attrs).filter(t=>!t.isRemoved()).sort((t,n)=>t.getKey().localeCompare(n.getKey())).map(t=>{const n=JSON.parse(t.getValue());return typeof n=="string"?`${t.getKey()}="${n}"`:`${t.getKey()}="${Dn(t.getValue())}"`}).join(" ")),`<${r.type}${e}>${r.children.map(t=>eo(t)).join("")}</${r.type}>`}function us(r){if(r.isText){const e=r;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:r.type,children:r.children.map(us),size:r.size,isRemoved:r.isRemoved}}class wn extends ei{constructor(e,t){super(t),b(this,"indexTree"),b(this,"nodeMapByID"),this.indexTree=new Ba(e),this.nodeMapByID=new ls(Ut.createComparator()),this.indexTree.traverseAll(n=>{this.nodeMapByID.put(n.id,n)})}static create(e,t){return new wn(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[n,i]=e.toTreeNodePair(this);let d=i;const w=n===d,R=d.parent&&!w?d.parent:n;if(d.isText&&d.split(this,e.getLeftSiblingID().getOffset()-d.id.getOffset()),t){const F=R.allChildren,U=w?0:F.indexOf(d)+1;for(let ae=U;ae<F.length;ae++){const Ae=F[ae];if(!Ae.id.getCreatedAt().after(t))break;d=Ae}}return[R,d]}style(e,t,n,i){const[d,w]=this.findNodesAndSplitText(e[0],n),[R,F]=this.findNodesAndSplitText(e[1],n),U=[],ae=t?Fr(t):{},Ae=new Map,ie=[];return this.traverseInPosRange(d,w,R,F,([me])=>{const Ne=me.getCreatedAt().getActorID(),Le=i?i.has(Ne)?i.get(Ne):kn:Qr;if(me.canStyle(n,Le)&&t){const Me=Ae.get(Ne),nt=me.getCreatedAt();(!Me||nt.after(Me))&&Ae.set(Ne,nt);const gt=me.setAttrs(t,n),st=gt.reduce((wt,[,kr])=>(kr&&(wt[kr.getKey()]=ae[kr.getKey()]),wt),{}),ht=me.parent,pt=me.prevSibling||me.parent;Object.keys(st).length>0&&U.push({type:"style",from:this.toIndex(ht,pt),to:this.toIndex(me,me),fromPath:this.toPath(ht,pt),toPath:this.toPath(me,me),actor:n.getActorID(),value:st});for(const[wt]of gt)wt&&ie.push({parent:me,child:wt})}}),[Ae,ie,U]}removeStyle(e,t,n,i){const[d,w]=this.findNodesAndSplitText(e[0],n),[R,F]=this.findNodesAndSplitText(e[1],n),U=[],ae=new Map,Ae=[];return this.traverseInPosRange(d,w,R,F,([ie])=>{const me=ie.getCreatedAt().getActorID(),Ne=i?i.has(me)?i.get(me):kn:Qr;if(ie.canStyle(n,Ne)&&t){const Le=ae.get(me),Me=ie.getCreatedAt();(!Le||Me.after(Le))&&ae.set(me,Me),ie.attrs||(ie.attrs=new Xn);for(const st of t){const ht=ie.attrs.remove(st,n);for(const pt of ht)Ae.push({parent:ie,child:pt})}const nt=ie.parent,gt=ie.prevSibling||ie.parent;U.push({actor:n.getActorID(),type:"removeStyle",from:this.toIndex(nt,gt),to:this.toIndex(ie,ie),fromPath:this.toPath(nt,gt),toPath:this.toPath(ie,ie),value:t})}}),[ae,Ae,U]}edit(e,t,n,i,d,w){const[R,F]=this.findNodesAndSplitText(e[0],i),[U,ae]=this.findNodesAndSplitText(e[1],i),Ae=this.toIndex(R,F),ie=this.toPath(R,F),me=[],Ne=[],Le=[],Me=new Map;this.traverseInPosRange(R,F,U,ae,([st,ht],pt)=>{if(ht===It.Start&&!pt)for(const Er of st.children)Le.push(Er);const wt=st.getCreatedAt().getActorID(),kr=w?w.has(wt)?w.get(wt):kn:Qr;if(st.canDelete(i,kr)||me.includes(st.parent)){const Er=Me.get(wt),yi=st.getCreatedAt();(!Er||yi.after(Er))&&Me.set(wt,yi),(ht===It.Text||ht===It.Start)&&me.push(st),Ne.push([st,ht])}});const nt=this.makeDeletionChanges(Ne,i),gt=[];for(const st of me)st.remove(i),st.isRemoved&&gt.push({parent:this,child:st});for(const st of Le)st.removedAt||R.append(st);if(n>0){let st=0,ht=R,pt=F;for(;st<n;)ht.split(this,ht.findOffset(pt)+1,d),pt=ht,ht=ht.parent,st++;nt.push({type:"content",from:Ae,to:Ae,fromPath:ie,toPath:ie,actor:i.getActorID()})}if(t!=null&&t.length){const st=[];let ht=F;for(const pt of t)ht===R?R.insertAt(pt,0):R.insertAfter(pt,ht),ht=pt,Ei(pt,wt=>{R.isRemoved&&(wt.remove(i),gt.push({parent:this,child:wt})),this.nodeMapByID.put(wt.id,wt)}),pt.isRemoved||st.push(pt);if(st.length){const pt=st.map(wt=>Qi(wt));nt.length&&nt[nt.length-1].from===Ae?nt[nt.length-1].value=pt:nt.push({type:"content",from:Ae,to:Ae,fromPath:ie,toPath:ie,actor:i.getActorID(),value:pt})}}return[nt,gt,Me]}editT(e,t,n,i,d){const w=this.findPos(e[0]),R=this.findPos(e[1]);this.edit([w,R],t,n,i,d)}move(e,t,n){throw new Error(`not implemented: ${e}, ${t}, ${n}`)}purge(e){var t;(t=e.parent)==null||t.removeChild(e),this.nodeMapByID.remove(e.id);const n=e.insPrevID,i=e.insNextID;if(n){const d=this.findFloorNode(n);d.insNextID=i}if(i){const d=this.findFloorNode(i);d.insPrevID=n}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(t=>{t.getRemovedAt()&&e.push({parent:this,child:t});for(const n of t.getGCPairs())e.push(n)}),e}findPos(e,t=!0){const n=this.indexTree.findTreePos(e,t);return xn.fromTreePos(n)}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return eo(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),t=(n,i=void 0,d=void 0,w=0)=>{var R,F,U,ae;let Ae,ie,me;const Ne=n.isText?{node:n,offset:0}:i&&d?this.toTreePos(i,d):null;Ne&&(Ae=this.indexTree.indexOf(Ne),ie=this.indexTree.treePosToPath(Ne),me=xn.fromTreePos(Ne).toStruct());const Le={type:n.type,parent:i==null?void 0:i.id.toTestString(),size:n.size,id:n.id.toTestString(),removedAt:(R=n.removedAt)==null?void 0:R.toTestString(),insPrev:(F=n.insPrevID)==null?void 0:F.toTestString(),insNext:(U=n.insNextID)==null?void 0:U.toTestString(),value:n.isText?n.value:void 0,isRemoved:n.isRemoved,children:[],depth:w,attributes:n.attrs?Fr((ae=n.attrs)==null?void 0:ae.toObject()):void 0,index:Ae,path:ie,pos:me};for(let Me=0;Me<n.allChildren.length;Me++){const nt=Me===0?n:n.allChildren[Me-1];Le.children.push(t(n.allChildren[Me],n,nt,w+1))}return Le};return t(e)}getRootTreeNode(){return Qi(this.indexTree.getRoot())}toTestTreeNode(){return us(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new wn(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.treePosToPath(n):[]}toIndex(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.indexOf(n):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,n]=e,i=this.findPos(t);return t===n?[i.toStruct(),i.toStruct()]:[i.toStruct(),this.findPos(n).toStruct()]}posRangeToPathRange(e){const[t,n]=this.findNodesAndSplitText(e[0]),[i,d]=this.findNodesAndSplitText(e[1]);return[this.toPath(t,n),this.toPath(i,d)]}posRangeToIndexRange(e){const[t,n]=this.findNodesAndSplitText(e[0]),[i,d]=this.findNodesAndSplitText(e[1]);return[this.toIndex(t,n),this.toIndex(i,d)]}traverseInPosRange(e,t,n,i,d){const w=this.toIndex(e,t),R=this.toIndex(n,i);return this.indexTree.tokensBetween(w,R,d)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let i;for(;e.isRemoved;)i=e,e=i.parent;const d=e.findOffset(i);return{node:e,offset:d}}if(e===t)return{node:e,offset:0};let n=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};n++}return{node:e,offset:n}}makeDeletionChanges(e,t){const n=[],i=[];let d=null,w=null;for(let R=0;R<e.length;R++){const F=e[R],U=e[R+1];d||(d=F),w=F;const ae=this.findRightToken(F);(!ae||!U||ae[0]!==U[0]||ae[1]!==U[1])&&(i.push([d,w]),d=null,w=null)}for(const R of i){const[F,U]=R,[ae,Ae]=this.findLeftToken(F),[ie,me]=U,Ne=Ae===It.Start?ae:ae.parent,Le=me===It.Start?ie:ie.parent,Me=this.toIndex(Ne,ae),nt=this.toIndex(Le,ie);Me<nt&&(n.length>0&&Me===n[n.length-1].to?(n[n.length-1].to=nt,n[n.length-1].toPath=this.toPath(Le,ie)):n.push({type:"content",from:Me,to:nt,fromPath:this.toPath(Ne,ae),toPath:this.toPath(Le,ie),actor:t.getActorID()}))}return n.reverse()}findRightToken([e,t]){if(t===It.Start){const R=e.allChildren;return R.length>0?[R[0],R[0].isText?It.Text:It.Start]:[e,It.End]}const n=e.parent,i=n.allChildren,d=i.indexOf(e);if(n&&d===i.length-1)return[n,It.End];const w=i[d+1];return[w,w.isText?It.Text:It.Start]}findLeftToken([e,t]){if(t===It.End){const R=e.allChildren;if(R.length>0){const F=R[R.length-1];return[F,F.isText?It.Text:It.End]}return[e,It.Start]}const n=e.parent,i=n.allChildren,d=i.indexOf(e);if(n&&d===0)return[n,It.Start];const w=i[d-1];return[w,w.isText?It.Text:It.End]}}class ui extends En{constructor(e,t,n,i,d,w,R){super(e,R),b(this,"fromPos"),b(this,"toPos"),b(this,"contents"),b(this,"splitLevel"),b(this,"maxCreatedAtMapByActor"),this.fromPos=t,this.toPos=n,this.contents=i,this.splitLevel=d,this.maxCreatedAtMapByActor=w}static create(e,t,n,i,d,w,R){return new ui(e,t,n,i,d,w,R)}execute(e){var t;const n=e.findByCreatedAt(this.getParentCreatedAt());n||_e.fatal(`fail to find ${this.getParentCreatedAt()}`),n instanceof wn||_e.fatal("fail to execute, only Tree can execute edit");const i=this.getExecutedAt(),d=n,[w,R]=d.edit([this.fromPos,this.toPos],(t=this.contents)==null?void 0:t.map(F=>F.deepcopy()),this.splitLevel,i,(()=>{let F=i.getDelimiter();return this.contents!==void 0&&(F+=this.contents.length),()=>Yt.of(i.getLamport(),++F,i.getActorID())})(),this.maxCreatedAtMapByActor);for(const F of R)e.registerGCPair(F);return{opInfos:w.map(({from:F,to:U,value:ae,splitLevel:Ae,fromPath:ie,toPath:me})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:F,to:U,value:ae,splitLevel:Ae,fromPath:ie,toPath:me}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,i=this.contents||[];return`${e}.EDIT(${t},${n},${i.map(d=>eo(d)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class lr{constructor(e,t,n,i){b(this,"clientSeq"),b(this,"serverSeq"),b(this,"lamport"),b(this,"actor"),this.clientSeq=e,this.serverSeq=i,this.lamport=t,this.actor=n}static of(e,t,n,i){return new lr(e,t,n,i)}next(){return new lr(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new lr(this.clientSeq,e,this.actor):new lr(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return Yt.of(this.lamport,e,this.actor)}setActor(e){return new lr(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Ua=new lr(0,We.fromInt(0,!0),Si);class Or{constructor({id:e,operations:t,presenceChange:n,message:i}){b(this,"id"),b(this,"operations"),b(this,"presenceChange"),b(this,"message"),this.id=e,this.operations=t||[],this.presenceChange=n,this.message=i}static create({id:e,operations:t,presenceChange:n,message:i}){return new Or({id:e,operations:t,presenceChange:n,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,n){const i=[],d=[];for(const w of this.operations){const R=w.execute(e,n);if(!R)continue;const{opInfos:F,reverseOp:U}=R;i.push(...F),U&&d.unshift(U)}return this.presenceChange&&(this.presenceChange.type===ir.Put?t.set(this.id.getActorID(),Sn(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:d}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:Pt.bytesToHex(Pt.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>Pt.bytesToHex(Pt.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:n,presenceChange:i,message:d}=e;return Or.create({id:Pt.bytesToChangeID(Pt.hexToBytes(t)),operations:n==null?void 0:n.map(w=>Pt.bytesToOperation(Pt.hexToBytes(w))),presenceChange:i,message:d})}}class xi{constructor(e,t,n,i,d,w){b(this,"documentKey"),b(this,"checkpoint"),b(this,"isRemoved"),b(this,"changes"),b(this,"snapshot"),b(this,"minSyncedTicket"),this.documentKey=e,this.checkpoint=t,this.isRemoved=n,this.changes=i,this.snapshot=d,this.minSyncedTicket=w}static create(e,t,n,i,d,w){return new xi(e,t,n,i,d,w)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Ur{constructor(e,t){b(this,"serverSeq"),b(this,"clientSeq"),this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Ur(e,t)}increaseClientSeq(e){return e===0?this:new Ur(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,n=Math.max(this.clientSeq,e.clientSeq);return Ur.of(t,n)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const $a=new Ur(We.fromInt(0,!0),0);class Ln{constructor(e,t){b(this,"createdAt"),b(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new Ln(e,t)}static fromStruct(e){return Ln.of(Yt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new Ln(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const za=Ln.of(kn,0);class Nn{constructor(e,t){b(this,"id"),b(this,"relativeOffset"),this.id=e,this.relativeOffset=t}static of(e,t){return new Nn(e,t)}static fromStruct(e){const t=Ln.fromStruct(e.id);return Nn.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Ln.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class ur extends is{constructor(e,t,n){super(t),b(this,"id"),b(this,"removedAt"),b(this,"prev"),b(this,"next"),b(this,"insPrev"),b(this,"insNext"),this.id=e,this.removedAt=n}static create(e,t){return new ur(e,t)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new ur(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){const n=!this.removedAt;return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))?n:!1}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Nn.of(this.id,0),Nn.of(this.id,this.getLength())]}deepcopy(){return new ur(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}toIDString(){return this.id.toIDString()}}class $r{constructor(){b(this,"head"),b(this,"treeByIndex"),b(this,"treeByID"),this.head=ur.create(za),this.treeByIndex=new ni,this.treeByID=new ls(ur.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new $r}edit(e,t,n,i){const[d,w]=this.findNodeWithSplit(e[1],t),[R,F]=this.findNodeWithSplit(e[0],t),U=this.findBetween(F,w),[ae,Ae,ie]=this.deleteNodes(U,t,i),me=w?w.getID():d.getID();let Ne=Nn.of(me,0);if(n){const Me=this.posToIndex(R.createPosRange()[1],!0),nt=this.insertAfter(R,ur.create(Ln.of(t,0),n));ae.length&&ae[ae.length-1].from===Me?ae[ae.length-1].value=n:ae.push({actor:t.getActorID(),from:Me,to:Me,value:n}),Ne=Nn.of(nt.getID(),nt.getContentLength())}const Le=[];for(const[,Me]of ie)Le.push({parent:this,child:Me});return[Ne,Ae,Le,ae]}indexToPos(e){const[t,n]=this.treeByIndex.find(e),i=t;return Nn.of(i.getID(),n)}findIndexesFromRange(e){const[t,n]=e;return[this.posToIndex(t,!1),this.posToIndex(n,!0)]}posToIndex(e,t){const n=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(n):this.findFloorNode(n);i||_e.fatal(`the node of the given id should be found: ${n.toTestString()}`);const d=this.treeByIndex.indexOf(i),w=i.isRemoved()?0:n.getOffset()-i.getID().getOffset();return d+w}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new $r;let t=this.head.getNext(),n=e.head,i;for(;t;){if(i=e.insertAfter(n,t.deepcopy()),t.hasInsPrev()){const d=e.findNode(t.getInsPrevID());i.setInsPrev(d)}n=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const n=e.getNext();return t.setPrev(e),n&&n.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const n=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(n);const d=n.getOffset()-i.getID().getOffset();for(this.splitNode(i,d);i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||_e.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const n=[];let i=e;for(;i&&i!==t;)n.push(i),i=i.getNext();return n}splitNode(e,t){if(t>e.getContentLength()&&_e.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const n=e.split(t);this.treeByIndex.updateWeight(n),this.insertAfter(e,n);const i=e.getInsNext();return i&&i.setInsPrev(n),n.setInsPrev(e),n}deleteNodes(e,t,n){if(!e.length)return[[],new Map,new Map];const[i,d]=this.filterNodes(e,t,n),w=new Map,R=new Map,F=this.makeChanges(d,t);for(const U of i){const ae=U.getCreatedAt().getActorID();(!w.has(ae)||U.getID().getCreatedAt().after(w.get(ae)))&&w.set(ae,U.getID().getCreatedAt()),R.set(U.getID().toIDString(),U),U.remove(t)}return this.deleteIndexNodes(d),[F,w,R]}filterNodes(e,t,n){const i=!!n,d=[],w=[],[R,F]=this.findEdgesOfCandidates(e);w.push(R);for(const U of e){const ae=U.getCreatedAt().getActorID(),Ae=i?n.has(ae)?n.get(ae):kn:Qr;U.canDelete(t,Ae)?d.push(U):w.push(U)}return w.push(F),[d,w]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const n=[];let i,d;for(let w=0;w<e.length-1;w++){const R=e[w],F=e[w+1];R.getNext()!=F&&([i]=this.findIndexesFromRange(R.getNext().createPosRange()),F?[,d]=this.findIndexesFromRange(F.getPrev().createPosRange()):d=this.treeByIndex.length,i<d&&n.push({actor:t.getActorID(),from:i,to:d}))}return n.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const n=e[t],i=e[t+1];n.getNext()!=i&&this.treeByIndex.deleteRange(n,i)}}purge(e){const t=e.getPrev(),n=e.getNext(),i=e.getInsPrev(),d=e.getInsNext();t&&t.setNext(n),n&&n.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(d),d&&d.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const cs=r=>r<0?Math.ceil(r):Math.floor(r);var Mn=(r=>(r[r.IntegerCnt=0]="IntegerCnt",r[r.LongCnt=1]="LongCnt",r))(Mn||{});class cn extends ei{constructor(e,t,n){switch(super(n),b(this,"valueType"),b(this,"value"),this.valueType=e,e){case 0:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=We.fromNumber(t).toInt():this.value=cs(t):this.value=t.toInt();break;case 1:typeof t=="number"?this.value=We.fromNumber(t):this.value=t;break;default:throw new ct(lt.Unimplemented,`unimplemented type: ${e}`)}}static create(e,t,n){return new cn(e,t,n)}static valueFromBytes(e,t){switch(e){case 0:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 1:return We.fromBytesLE(Array.from(t));default:throw new ct(lt.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=cn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof We?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!cn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new ct(lt.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(n){if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`)}return t(this),t(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Rt.Long?this.value=this.value+e.getValue().toInt():this.value=We.fromNumber(this.value+cs(e.getValue())).toInt(),this}}class zr extends En{constructor(e,t,n){super(e,n),b(this,"value"),this.value=t}static create(e,t,n){return new zr(e,t,n)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||_e.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof cn||_e.fatal("fail to execute, only Counter can execute increase");const n=t,i=this.value.deepcopy();return n.increase(i),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:i.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),n=e.getType()===Rt.Long?e.getValue().multiply(-1):e.getValue()*-1;return zr.create(this.getParentCreatedAt(),bt.of(n,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class er extends En{constructor(e,t,n,i,d,w,R){super(e,R),b(this,"fromPos"),b(this,"toPos"),b(this,"maxCreatedAtMapByActor"),b(this,"attributes"),b(this,"attributesToRemove"),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=i,this.attributes=d,this.attributesToRemove=w}static create(e,t,n,i,d,w){return new er(e,t,n,i,d,new Array,w)}static createTreeRemoveStyleOperation(e,t,n,i,d,w){return new er(e,t,n,i,new Map,d,w)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||_e.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof wn||_e.fatal("fail to execute, only Tree can execute edit");const n=t;let i,d;if(this.attributes.size){const w={};[...this.attributes].forEach(([R,F])=>w[R]=F),[,d,i]=n.style([this.fromPos,this.toPos],w,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const w=this.attributesToRemove;[,d,i]=n.removeStyle([this.fromPos,this.toPos],w,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const w of d)e.registerGCPair(w);return{opInfos:i.map(({from:w,to:R,value:F,fromPath:U,toPath:ae})=>({type:"tree-style",from:w,to:R,value:this.attributes.size?{attributes:F}:{attributesToRemove:F},fromPath:U,toPath:ae,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${n},${Object.entries(this.attributes||{}).map(([i,d])=>`${i}:"${d}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function Ja(r){const e=new Ki,t=e.data;for(const[n,i]of Object.entries(r))t[n]=JSON.stringify(i);return e}function Va(r){if(r.type===ir.Put)return new Vi({type:Xr.PUT,presence:Ja(r.presence)});if(r.type===ir.Clear)return new Vi({type:Xr.CLEAR});throw new ct(lt.Unimplemented,"unimplemented type")}function Ka(r){return new Ko({serverSeq:r.getServerSeqAsString(),clientSeq:r.getClientSeq()})}function fs(r){return new _i({clientSeq:r.getClientSeq(),lamport:r.getLamportAsString(),actorId:ao(r.getActorID())})}function je(r){if(!!r)return new Ue({lamport:r.getLamportAsString(),delimiter:r.getDelimiter(),actorId:ao(r.getActorID())})}function hs(r){switch(r){case Rt.Null:return Qe.NULL;case Rt.Boolean:return Qe.BOOLEAN;case Rt.Integer:return Qe.INTEGER;case Rt.Long:return Qe.LONG;case Rt.Double:return Qe.DOUBLE;case Rt.String:return Qe.STRING;case Rt.Bytes:return Qe.BYTES;case Rt.Date:return Qe.DATE;default:throw new ct(lt.Unsupported,`unsupported type: ${r}`)}}function ds(r){switch(r){case Mn.IntegerCnt:return Qe.INTEGER_CNT;case Mn.LongCnt:return Qe.LONG_CNT;default:throw new ct(lt.Unsupported,`unsupported type: ${r}`)}}function to(r){if(r instanceof rn)return new Yn({type:Qe.JSON_OBJECT,createdAt:je(r.getCreatedAt()),value:xs(r)});if(r instanceof ln)return new Yn({type:Qe.JSON_ARRAY,createdAt:je(r.getCreatedAt()),value:Al(r)});if(r instanceof bn)return new Yn({type:Qe.TEXT,createdAt:je(r.getCreatedAt())});if(r instanceof bt)return new Yn({type:hs(r.getType()),createdAt:je(r.getCreatedAt()),value:r.toBytes()});if(r instanceof cn)return new Yn({type:ds(r.getType()),createdAt:je(r.getCreatedAt()),value:r.toBytes()});if(r instanceof wn)return new Yn({type:Qe.TREE,createdAt:je(r.getCreatedAt()),value:Tl(r)});throw new ct(lt.Unimplemented,"unimplemented element")}function Ha(r){return new zi({createdAt:je(r.getCreatedAt()),offset:r.getOffset()})}function Ni(r){return new br({createdAt:je(r.getID().getCreatedAt()),offset:r.getID().getOffset(),relativeOffset:r.getRelativeOffset()})}function Ii(r){return new Zr({parentId:ci(r.getParentID()),leftSiblingId:ci(r.getLeftSiblingID())})}function ci(r){return new Mr({createdAt:je(r.getCreatedAt()),offset:r.getOffset()})}function gs(r){const e=new Ui;if(r instanceof _r){const t=r,n=new xo;n.parentCreatedAt=je(t.getParentCreatedAt()),n.key=t.getKey(),n.value=to(t.getValue()),n.executedAt=je(t.getExecutedAt()),e.body.case="set",e.body.value=n}else if(r instanceof ii){const t=r,n=new No;n.parentCreatedAt=je(t.getParentCreatedAt()),n.prevCreatedAt=je(t.getPrevCreatedAt()),n.value=to(t.getValue()),n.executedAt=je(t.getExecutedAt()),e.body.case="add",e.body.value=n}else if(r instanceof ar){const t=r,n=new Io;n.parentCreatedAt=je(t.getParentCreatedAt()),n.prevCreatedAt=je(t.getPrevCreatedAt()),n.createdAt=je(t.getCreatedAt()),n.executedAt=je(t.getExecutedAt()),e.body.case="move",e.body.value=n}else if(r instanceof sr){const t=r,n=new Po;n.parentCreatedAt=je(t.getParentCreatedAt()),n.createdAt=je(t.getCreatedAt()),n.executedAt=je(t.getExecutedAt()),e.body.case="remove",e.body.value=n}else if(r instanceof si){const t=r,n=new Co;n.parentCreatedAt=je(t.getParentCreatedAt()),n.from=Ni(t.getFromPos()),n.to=Ni(t.getToPos());const i=n.createdAtMapByActor;for(const[w,R]of t.getMaxCreatedAtMapByActor())i[w]=je(R);n.content=t.getContent();const d=n.attributes;for(const[w,R]of t.getAttributes())d[w]=R;n.executedAt=je(t.getExecutedAt()),e.body.case="edit",e.body.value=n}else if(r instanceof ai){const t=r,n=new Ro;n.parentCreatedAt=je(t.getParentCreatedAt()),n.from=Ni(t.getFromPos()),n.to=Ni(t.getToPos());const i=n.createdAtMapByActor;for(const[w,R]of t.getMaxCreatedAtMapByActor())i[w]=je(R);const d=n.attributes;for(const[w,R]of t.getAttributes())d[w]=R;n.executedAt=je(t.getExecutedAt()),e.body.case="style",e.body.value=n}else if(r instanceof zr){const t=r,n=new Do;n.parentCreatedAt=je(t.getParentCreatedAt()),n.value=to(t.getValue()),n.executedAt=je(t.getExecutedAt()),e.body.case="increase",e.body.value=n}else if(r instanceof ui){const t=r,n=new Lo,i=n.createdAtMapByActor;for(const[d,w]of t.getMaxCreatedAtMapByActor())i[d]=je(w);n.parentCreatedAt=je(t.getParentCreatedAt()),n.from=Ii(t.getFromPos()),n.to=Ii(t.getToPos()),n.contents=el(t.getContents()),n.splitLevel=t.getSplitLevel(),n.executedAt=je(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=n}else if(r instanceof er){const t=r,n=new Mo;n.parentCreatedAt=je(t.getParentCreatedAt()),n.from=Ii(t.getFromPos()),n.to=Ii(t.getToPos());const i=n.createdAtMapByActor;for(const[w,R]of t.getMaxCreatedAtMapByActor())i[w]=je(R);const d=t.getAttributesToRemove();if(d.length>0)n.attributesToRemove=d;else{const w=n.attributes;for(const[R,F]of t.getAttributes())w[R]=F}n.executedAt=je(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=n}else throw new ct(lt.Unimplemented,"unimplemented operation");return e}function Wa(r){const e=[];for(const t of r)e.push(gs(t));return e}function Ga(r){const e=new Eo({id:fs(r.getID()),message:r.getMessage()});return r.hasOperations()&&(e.operations=Wa(r.getOperations())),r.hasPresenceChange()&&(e.presenceChange=Va(r.getPresenceChange())),e}function Ya(r){const e=[];for(const t of r)e.push(Ga(t));return e}function Za(r){const e=[];for(const t of r)e.push(new zo({key:t.getStrKey(),element:no(t.getValue())}));return e}function Xa(r){const e=[];for(const t of r)e.push(new $i({element:no(t.getValue())}));return e}function Qa(r){const e=[];for(const t of r){const n=new Jo;n.id=Ha(t.getID()),n.value=t.getValue().getContent(),n.removedAt=je(t.getRemovedAt());const i=n.attributes,d=t.getValue().getAttrs();for(const w of d){const R=new Ti;R.value=w.getValue(),R.updatedAt=je(w.getUpdatedAt()),i[w.getKey()]=R}e.push(n)}return e}function el(r){const e=[];if(!r||!r.length)return e;for(const t of r)e.push(new Vo({content:ps(t)}));return e}function tl(r){const e={};for(const t of r)e[t.getKey()]=new Ti({value:t.getValue(),updatedAt:je(t.getUpdatedAt()),isRemoved:t.isRemoved()});return e}function ps(r){if(!r)return[];const e=[];return Ei(r,(t,n)=>{const i=new Ji({id:ci(t.id),type:t.type,removedAt:je(t.removedAt),depth:n});t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=ci(t.insPrevID)),t.insNextID&&(i.insNextId=ci(t.insNextID)),t.attrs&&(i.attributes=tl(t.attrs)),e.push(i)}),e}function nl(r){const e=new vn;return e.body.case="jsonObject",e.body.value=new Bo({nodes:Za(r.getRHT()),createdAt:je(r.getCreatedAt()),movedAt:je(r.getMovedAt()),removedAt:je(r.getRemovedAt())}),e}function vs(r){const e=new vn;return e.body.case="jsonArray",e.body.value=new qo({nodes:Xa(r.getElements()),createdAt:je(r.getCreatedAt()),movedAt:je(r.getMovedAt()),removedAt:je(r.getRemovedAt())}),e}function rl(r){const e=new vn;return e.body.case="primitive",e.body.value=new jo({type:hs(r.getType()),value:r.toBytes(),createdAt:je(r.getCreatedAt()),movedAt:je(r.getMovedAt()),removedAt:je(r.getRemovedAt())}),e}function il(r){const e=new vn;return e.body.case="text",e.body.value=new Fo({nodes:Qa(r.getRGATreeSplit()),createdAt:je(r.getCreatedAt()),movedAt:je(r.getMovedAt()),removedAt:je(r.getRemovedAt())}),e}function ol(r){const e=new vn;return e.body.case="counter",e.body.value=new Uo({type:ds(r.getType()),value:r.toBytes(),createdAt:je(r.getCreatedAt()),movedAt:je(r.getMovedAt()),removedAt:je(r.getRemovedAt())}),e}function ms(r){const e=new vn;return e.body.case="tree",e.body.value=new $o({nodes:ps(r.getRoot()),createdAt:je(r.getCreatedAt()),movedAt:je(r.getMovedAt()),removedAt:je(r.getRemovedAt())}),e}function no(r){if(r instanceof rn)return nl(r);if(r instanceof ln)return vs(r);if(r instanceof bt)return rl(r);if(r instanceof bn)return il(r);if(r instanceof cn)return ol(r);if(r instanceof wn)return ms(r);throw new ct(lt.Unimplemented,"unimplemented element")}function sl(r){return new Gn({documentKey:r.getDocumentKey(),checkpoint:Ka(r.getCheckpoint()),isRemoved:r.getIsRemoved(),changes:Ya(r.getChanges()),snapshot:r.getSnapshot(),minSyncedTicket:je(r.getMinSyncedTicket())})}function ys(r){let e;return r.serverSeq&&(e=We.fromString(r.serverSeq,!0)),lr.of(r.clientSeq,We.fromString(r.lamport,!0),so(r.actorId),e)}function $e(r){if(!!r)return Yt.of(We.fromString(r.lamport,!0),r.delimiter,so(r.actorId))}function ro(r){const e={};return Object.entries(r.data).forEach(([t,n])=>{e[t]=JSON.parse(n)}),e}function al(r){const e=r.type;if(e===Xr.PUT){const t=ro(r.presence);return{type:ir.Put,presence:t}}if(e===Xr.CLEAR)return{type:ir.Clear};throw new ct(lt.Unsupported,`unsupported type: ${e}`)}function ll(r){const e=new Map;return Object.entries(r).forEach(([t,n])=>{e.set(t,ro(n))}),e}function bs(r){switch(r){case Qe.NULL:return Rt.Null;case Qe.BOOLEAN:return Rt.Boolean;case Qe.INTEGER:return Rt.Integer;case Qe.LONG:return Rt.Long;case Qe.DOUBLE:return Rt.Double;case Qe.STRING:return Rt.String;case Qe.BYTES:return Rt.Bytes;case Qe.DATE:return Rt.Date}throw new ct(lt.Unimplemented,`unimplemented value type: ${r}`)}function Pi(r){switch(r){case Qe.INTEGER_CNT:return Mn.IntegerCnt;case Qe.LONG_CNT:return Mn.LongCnt}throw new ct(lt.Unimplemented,`unimplemented value type: ${r}`)}function io(r){switch(r.type){case Qe.JSON_OBJECT:return r.value?Es(r.value):rn.create($e(r.createdAt));case Qe.JSON_ARRAY:return r.value?wl(r.value):ln.create($e(r.createdAt));case Qe.TEXT:return bn.create($r.create(),$e(r.createdAt));case Qe.TREE:return _l(r.value);case Qe.NULL:case Qe.BOOLEAN:case Qe.INTEGER:case Qe.LONG:case Qe.DOUBLE:case Qe.STRING:case Qe.BYTES:case Qe.DATE:return bt.of(bt.valueFromBytes(bs(r.type),r.value),$e(r.createdAt));case Qe.INTEGER_CNT:case Qe.LONG_CNT:return cn.create(Pi(r.type),cn.valueFromBytes(Pi(r.type),r.value),$e(r.createdAt))}}function Ci(r){return Nn.of(Ln.of($e(r.createdAt),r.offset),r.relativeOffset)}function ws(r){return Ln.of($e(r.createdAt),r.offset)}function ul(r){const e=oi.create(r.value);Object.entries(r.attributes).forEach(([n,i])=>{e.setAttr(n,i.value,$e(i.updatedAt))});const t=ur.create(ws(r.id),e);return t.remove($e(r.removedAt)),t}function Jr(r){return xn.of(fi(r.parentId),fi(r.leftSiblingId))}function fi(r){return Ut.of($e(r.createdAt),r.offset)}function cl(r){if(!r.length)return;const e=[];return r.forEach(t=>{const n=As(t.content);e.push(n)}),e}function As(r){if(r.length===0)return;const e=[];for(const n of r)e.push(hl(n));const t=e[e.length-1];for(let n=e.length-2;n>=0;n--){let i;for(let d=n+1;d<e.length;d++)if(r[n].depth-1===r[d].depth){i=e[d];break}i.prepend(e[n])}return t.updateDescendantsSize(),wn.create(t,kn).getRoot()}function fl(r){const e=Xn.create();for(const[t,n]of Object.entries(r))e.setInternal(t,n.value,$e(n.updatedAt),n.isRemoved);return e}function hl(r){const e=fi(r.id),t=un.create(e,r.type),n=Object.entries(r.attributes);return t.isText?t.value=r.value:n.length&&(t.attrs=fl(r.attributes)),r.insPrevId&&(t.insPrevID=fi(r.insPrevId)),r.insNextId&&(t.insNextID=fi(r.insNextId)),t.removedAt=$e(r.removedAt),t}function _s(r){if(r.body.case==="set"){const e=r.body.value;return _r.create(e.key,io(e.value),$e(e.parentCreatedAt),$e(e.executedAt))}else if(r.body.case==="add"){const e=r.body.value;return ii.create($e(e.parentCreatedAt),$e(e.prevCreatedAt),io(e.value),$e(e.executedAt))}else if(r.body.case==="move"){const e=r.body.value;return ar.create($e(e.parentCreatedAt),$e(e.prevCreatedAt),$e(e.createdAt),$e(e.executedAt))}else if(r.body.case==="remove"){const e=r.body.value;return sr.create($e(e.parentCreatedAt),$e(e.createdAt),$e(e.executedAt))}else if(r.body.case==="edit"){const e=r.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,d])=>{t.set(i,$e(d))});const n=new Map;return Object.entries(e.attributes).forEach(([i,d])=>{n.set(i,d)}),si.create($e(e.parentCreatedAt),Ci(e.from),Ci(e.to),t,e.content,n,$e(e.executedAt))}else if(r.body.case==="style"){const e=r.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,d])=>{t.set(i,$e(d))});const n=new Map;return Object.entries(e.attributes).forEach(([i,d])=>{n.set(i,d)}),ai.create($e(e.parentCreatedAt),Ci(e.from),Ci(e.to),t,n,$e(e.executedAt))}else{if(r.body.case==="select")return;if(r.body.case==="increase"){const e=r.body.value;return zr.create($e(e.parentCreatedAt),io(e.value),$e(e.executedAt))}else if(r.body.case==="treeEdit"){const e=r.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([n,i])=>{t.set(n,$e(i))}),ui.create($e(e.parentCreatedAt),Jr(e.from),Jr(e.to),cl(e.contents),e.splitLevel,t,$e(e.executedAt))}else if(r.body.case==="treeStyle"){const e=r.body.value,t=new Map,n=e.attributesToRemove,i=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([d,w])=>{i.set(d,$e(w))}),(n==null?void 0:n.length)>0?er.createTreeRemoveStyleOperation($e(e.parentCreatedAt),Jr(e.from),Jr(e.to),i,n,$e(e.executedAt)):(Object.entries(e.attributes).forEach(([d,w])=>{t.set(d,w)}),er.create($e(e.parentCreatedAt),Jr(e.from),Jr(e.to),i,t,$e(e.executedAt)))}else throw new ct(lt.Unimplemented,"unimplemented operation")}}function dl(r){const e=[];for(const t of r){const n=_s(t);n&&e.push(n)}return e}function Ts(r){const e=[];for(const t of r)e.push(Or.create({id:ys(t.id),operations:dl(t.operations),presenceChange:t.presenceChange?al(t.presenceChange):void 0,message:t.message}));return e}function gl(r){return Ur.of(We.fromString(r.serverSeq,!0),r.clientSeq)}function pl(r){return xi.create(r.documentKey,gl(r.checkpoint),r.isRemoved,Ts(r.changes),r.snapshot,$e(r.minSyncedTicket))}function Os(r){const e=new ti;for(const n of r.nodes){const i=oo(n.element);e.set(n.key,i,i.getPositionedAt())}const t=new rn($e(r.createdAt),e);return t.setMovedAt($e(r.movedAt)),t.setRemovedAt($e(r.removedAt)),t}function Ss(r){const e=new ri;for(const n of r.nodes)e.insert(oo(n.element));const t=new ln($e(r.createdAt),e);return t.setMovedAt($e(r.movedAt)),t.setRemovedAt($e(r.removedAt)),t}function vl(r){const e=bt.of(bt.valueFromBytes(bs(r.type),r.value),$e(r.createdAt));return e.setMovedAt($e(r.movedAt)),e.setRemovedAt($e(r.removedAt)),e}function ml(r){const e=new $r;let t=e.getHead();for(const i of r.nodes){const d=e.insertAfter(t,ul(i));i.insPrevId&&d.setInsPrev(e.findNode(ws(i.insPrevId))),t=d}const n=new bn(e,$e(r.createdAt));return n.setMovedAt($e(r.movedAt)),n.setRemovedAt($e(r.removedAt)),n}function yl(r){const e=cn.create(Pi(r.type),cn.valueFromBytes(Pi(r.type),r.value),$e(r.createdAt));return e.setMovedAt($e(r.movedAt)),e.setRemovedAt($e(r.removedAt)),e}function ks(r){const e=As(r.nodes);return wn.create(e,$e(r.createdAt))}function oo(r){if(r.body.case==="jsonObject")return Os(r.body.value);if(r.body.case==="jsonArray")return Ss(r.body.value);if(r.body.case==="primitive")return vl(r.body.value);if(r.body.case==="text")return ml(r.body.value);if(r.body.case==="counter")return yl(r.body.value);if(r.body.case==="tree")return ks(r.body.value);throw new ct(lt.Unimplemented,"unimplemented element")}function bl(r){if(!r)return{root:rn.create(kn),presences:new Map};const e=ia.fromBinary(r);return{root:oo(e.root),presences:ll(e.presences)}}function Es(r){if(!r)throw new Error("bytes is empty");const e=vn.fromBinary(r);return Os(e.body.value)}function xs(r){return no(r).toBinary()}function wl(r){if(!r)throw new Error("bytes is empty");const e=vn.fromBinary(r);return Ss(e.body.value)}function Al(r){return vs(r).toBinary()}function _l(r){if(!r)throw new Error("bytes is empty");const e=vn.fromBinary(r);return ks(e.body.value)}function Tl(r){return ms(r).toBinary()}function Ns(r){return r?Array.from(r).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function so(r){return Ns(r)}function Is(r){return new Uint8Array(r.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function ao(r){return Is(r)}function Ol(r){const e=_i.fromBinary(r);return ys(e)}function Sl(r){const e=Ui.fromBinary(r);return _s(e)}const Pt={fromPresence:ro,toChangePack:sl,fromChangePack:pl,fromChanges:Ts,objectToBytes:xs,bytesToObject:Es,bytesToSnapshot:bl,bytesToHex:Ns,hexToBytes:Is,toHexString:so,toUint8Array:ao,toOperation:gs,toChangeID:fs,PbChangeID:_i,bytesToChangeID:Ol,bytesToOperation:Sl};function Ps(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}class kl{constructor(e,t,n,i){b(this,"reconnectStreamDelay"),b(this,"doc"),b(this,"docID"),b(this,"syncMode"),b(this,"remoteChangeEventReceived"),b(this,"watchStream"),b(this,"watchLoopTimerID"),b(this,"watchAbortController"),this.reconnectStreamDelay=e,this.doc=t,this.docID=n,this.syncMode=i,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===mi.RealtimeSyncOff?!1:this.syncMode===mi.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==mi.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const lo=()=>{};class El{constructor(e){b(this,"finalized",!1),b(this,"observers",[]),b(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;e||_e.fatal("missing observer"),this.finalized&&_e.fatal("observable is finalized due to previous error"),typeof e=="object"?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=lo),i.error===void 0&&(i.error=lo),i.complete===void 0&&(i.complete=lo);const d=Ps(),w=this.unsubscribeOne.bind(this,d);if(this.observers.push({subscriptionID:d,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(R){_e.warn(R)}return w}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(n=>n.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(n){_e.error(n)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function xl(r){const e=new El(r);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Vr{constructor(e,t,n,i){b(this,"id"),b(this,"delimiter"),b(this,"message"),b(this,"root"),b(this,"operations"),b(this,"presenceChange"),b(this,"previousPresence"),b(this,"reversePresenceKeys"),this.id=e,this.delimiter=Yi,this.root=t,this.operations=[],this.previousPresence=Sn(n),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,n,i){return new Vr(e,t,n,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return Or.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const n of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(n):this.reversePresenceKeys.delete(n)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class hi{constructor(e){b(this,"rootObject"),b(this,"elementPairMapByCreatedAt"),b(this,"gcElementSetByCreatedAt"),b(this,"gcPairMap"),this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof bn||t instanceof wn)for(const n of t.getGCPairs())this.registerGCPair(n);return!1})}static create(){return new hi(rn.create(kn))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const n=[];for(;t.parent;){const i=t.element.getCreatedAt(),d=t.parent.subPathOf(i);d===void 0&&_e.fatal(`cant find the given element: ${i.toIDString()}`),n.unshift(d),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return n.unshift("$"),n}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof or&&e.getDescendants((n,i)=>(this.registerElement(n,i),!1))}deregisterElement(e){let t=0;const n=i=>{const d=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(d),this.gcElementSetByCreatedAt.delete(d),t++};return n(e),e instanceof or&&e.getDescendants(i=>(n(i),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const n=this.elementPairMapByCreatedAt.get(t);n.element instanceof or&&n.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new hi(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const n of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(n);i.element.getRemovedAt()&&e.compare(i.element.getRemovedAt())>=0&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,n]of this.gcPairMap){const i=n.child.getRemovedAt();i!==void 0&&e.compare(i)>=0&&(n.parent.purge(n.child),this.gcPairMap.delete(n.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function Cs(r,e){const t=new di(r);return new Proxy(e,t.getHandlers())}class di{constructor(e){b(this,"context"),b(this,"handlers"),this.context=e,this.handlers={set:(t,n,i)=>(_e.isEnabled(an.Trivial)&&_e.trivial(`obj[${n}]=${JSON.stringify(i)}`),di.setInternal(e,t,n,i),!0),get:(t,n)=>(_e.isEnabled(an.Trivial)&&_e.trivial(`obj[${n}]`),n==="getID"?()=>t.getCreatedAt():n==="toJSON"||n==="toString"?()=>t.toJSON():n==="toJS"?()=>t.toJS():n==="toJSForTest"?()=>t.toJSForTest():Sr(e,t.get(n))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,n)=>(_e.isEnabled(an.Trivial)&&_e.trivial(`obj[${n}]`),di.deleteInternal(e,t,n),!0)}}static setInternal(e,t,n,i){if(n.includes("."))throw new ct(lt.InvalidObjectKey,"key must not contain the '.'.");const d=e.issueTimeTicket(),w=Ri(e,i,d),R=t.set(n,w,d);e.registerElement(w,t),R&&e.registerRemovedElement(R),e.push(_r.create(n,w.deepcopy(),t.getCreatedAt(),d))}static buildObjectMembers(e,t){const n={};for(const[i,d]of Object.entries(t)){if(i.includes("."))throw new ct(lt.InvalidObjectKey,"key must not contain the '.'.");const w=e.issueTimeTicket(),R=Ri(e,d,w);n[i]=R}return n}static deleteInternal(e,t,n){const i=e.issueTimeTicket(),d=t.deleteByKey(n,i);!d||(e.push(sr.create(t.getCreatedAt(),d.getCreatedAt(),i)),e.registerRemovedElement(d))}getHandlers(){return this.handlers}}function Nl(r,e){const t=new St(r,e);return new Proxy(e,t.getHandlers())}function Il(r){return typeof r=="string"||r instanceof String?!isNaN(r):!1}function Pl(r){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(r)}class St{constructor(e,t){b(this,"context"),b(this,"handlers"),b(this,"array"),this.context=e,this.array=t,this.handlers={get:(n,i,d)=>i==="getID"?()=>n.getCreatedAt():i==="getElementByID"?w=>{const R=n.getByID(w);if(!(!R||R.isRemoved()))return cr(e,R)}:i==="getElementByIndex"?w=>{const R=n.get(w);return cr(e,R)}:i==="getLast"?()=>cr(e,n.getLast()):i==="deleteByID"?w=>{const R=St.deleteInternalByID(e,n,w);return cr(e,R)}:i==="insertAfter"?(w,R)=>{const F=St.insertAfterInternal(e,n,w,R);return cr(e,F)}:i==="insertBefore"?(w,R)=>{const F=St.insertBeforeInternal(e,n,w,R);return cr(e,F)}:i==="moveBefore"?(w,R)=>{St.moveBeforeInternal(e,n,w,R)}:i==="moveAfter"?(w,R)=>{St.moveAfterInternal(e,n,w,R)}:i==="moveFront"?w=>{St.moveFrontInternal(e,n,w)}:i==="moveLast"?w=>{St.moveLastInternal(e,n,w)}:Il(i)?Sr(e,n.get(Number(i))):i==="push"?w=>St.pushInternal(e,n,w):i==="splice"?(w,R,...F)=>St.splice(e,n,w,R,...F):i==="length"?n.length:typeof i=="symbol"&&i===Symbol.iterator?St.iteratorInternal.bind(this,e,n):i==="includes"?(w,R)=>St.includes(e,n,w,R):i==="indexOf"?(w,R)=>St.indexOf(e,n,w,R):i==="lastIndexOf"?(w,R)=>St.lastIndexOf(e,n,w,R):i==="toJSForTest"?()=>n.toJSForTest():i==="toTestString"?()=>St.toTestString(n):typeof i=="string"&&Pl(i)?(...w)=>{const R=Array.from(n).map(F=>Sr(e,F));return Array.prototype[i].apply(R,w)}:Reflect.get(n,i,d),deleteProperty:(n,i)=>(_e.isEnabled(an.Trivial)&&_e.trivial(`array[${i}]`),St.deleteInternalByIndex(e,n,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const n of t)yield cr(e,n)}static buildArrayElements(e,t){const n=[];for(const i of t){const d=e.issueTimeTicket(),w=Ri(e,i,d);n.push(w)}return n}static pushInternal(e,t,n){return St.insertAfterInternal(e,t,t.getLastCreatedAt(),n),t.length}static moveBeforeInternal(e,t,n,i){const d=e.issueTimeTicket(),w=t.getPrevCreatedAt(n);t.moveAfter(w,i,d),e.push(ar.create(t.getCreatedAt(),w,i,d))}static moveAfterInternal(e,t,n,i){const d=e.issueTimeTicket();t.moveAfter(n,i,d),e.push(ar.create(t.getCreatedAt(),n,i,d))}static moveFrontInternal(e,t,n){const i=e.issueTimeTicket(),d=t.getHead();t.moveAfter(d.getCreatedAt(),n,i),e.push(ar.create(t.getCreatedAt(),d.getCreatedAt(),n,i))}static moveLastInternal(e,t,n){const i=e.issueTimeTicket(),d=t.getLastCreatedAt();t.moveAfter(d,n,i),e.push(ar.create(t.getCreatedAt(),d,n,i))}static insertAfterInternal(e,t,n,i){const d=e.issueTimeTicket(),w=Ri(e,i,d);return t.insertAfter(n,w),e.registerElement(w,t),e.push(ii.create(t.getCreatedAt(),n,w.deepcopy(),d)),w}static insertBeforeInternal(e,t,n,i){return St.insertAfterInternal(e,t,t.getPrevCreatedAt(n),i)}static deleteInternalByIndex(e,t,n){const i=e.issueTimeTicket(),d=t.deleteByIndex(n,i);if(!!d)return e.push(sr.create(t.getCreatedAt(),d.getCreatedAt(),i)),e.registerRemovedElement(d),d}static deleteInternalByID(e,t,n){const i=e.issueTimeTicket(),d=t.delete(n,i);return e.push(sr.create(t.getCreatedAt(),d.getCreatedAt(),i)),e.registerRemovedElement(d),d}static splice(e,t,n,i,...d){const w=t.length,R=n>=0?Math.min(n,w):Math.max(w+n,0),F=i===void 0?w:i<0?R:Math.min(R+i,w),U=[];for(let ae=R;ae<F;ae++){const Ae=St.deleteInternalByIndex(e,t,R);if(Ae){const ie=Ae.deepcopy();ie.setRemovedAt(),U.push(Sr(e,ie))}}if(d){let ae=R===0?t.getHead().getID():t.get(R-1).getID();for(const Ae of d)ae=St.insertAfterInternal(e,t,ae,Ae).getID()}return U}static includes(e,t,n,i){var d;const w=t.length,R=i===void 0?0:i<0?Math.max(i+w,0):i;if(R>=w)return!1;if(bt.isSupport(n))return Array.from(t).map(U=>Sr(e,U)).includes(n,R);for(let F=R;F<w;F++)if(((d=t.get(F))==null?void 0:d.getID())===n.getID())return!0;return!1}static indexOf(e,t,n,i){var d;const w=t.length,R=i===void 0?0:i<0?Math.max(i+w,0):i;if(R>=w)return-1;if(bt.isSupport(n))return Array.from(t).map(U=>Sr(e,U)).indexOf(n,R);for(let F=R;F<w;F++)if(((d=t.get(F))==null?void 0:d.getID())===n.getID())return F;return-1}static lastIndexOf(e,t,n,i){var d;const w=t.length,R=i===void 0||i>=w?w-1:i<0?i+w:i;if(R<0)return-1;if(bt.isSupport(n))return Array.from(t).map(U=>Sr(e,U)).lastIndexOf(n,R);for(let F=R;F>0;F--)if(((d=t.get(F))==null?void 0:d.getID())===n.getID())return F;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class gi{constructor(e,t){b(this,"context"),b(this,"text"),this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,n,i){if(!this.context||!this.text){_e.fatal("it is not initialized yet");return}if(e>t){_e.fatal("from should be less than or equal to to");return}const d=this.text.indexRangeToPosRange(e,t);_e.isEnabled(an.Debug)&&_e.debug(`EDIT: f:${e}->${d[0].toTestString()}, t:${t}->${d[1].toTestString()} c:${n}`);const w=i?jr(i):void 0,R=this.context.issueTimeTicket(),[F,,U,ae]=this.text.edit(d,n,R,w);for(const Ae of U)this.context.registerGCPair(Ae);return this.context.push(new si(this.text.getCreatedAt(),d[0],d[1],F,n,w?new Map(Object.entries(w)):new Map,R)),this.text.findIndexesFromRange(ae)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,n){if(!this.context||!this.text)return _e.fatal("it is not initialized yet"),!1;if(e>t)return _e.fatal("from should be less than or equal to to"),!1;const i=this.text.indexRangeToPosRange(e,t);_e.isEnabled(an.Debug)&&_e.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(n)}`);const d=jr(n),w=this.context.issueTimeTicket(),[R,F]=this.text.setStyle(i,d,w);for(const U of F)this.context.registerGCPair(U);return this.context.push(new ai(this.text.getCreatedAt(),i[0],i[1],R,new Map(Object.entries(d)),w)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){_e.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){_e.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([Nn.fromStruct(e[0]),Nn.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){_e.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){_e.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(_e.fatal("it is not initialized yet"),""):this.text.toString()}toJSON(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text){_e.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class pi{constructor(e,t){b(this,"valueType"),b(this,"value"),b(this,"context"),b(this,"counter"),this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){_e.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),n=bt.of(e,t);if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`);return this.counter.increase(n),this.context.push(zr.create(this.counter.getCreatedAt(),n,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function uo(r,e,t){const{type:n}=r,i=t.issueTimeTicket();if(n===Qn){Rs(r);const{value:d}=r,w=un.create(Ut.of(i,0),n,d);e.append(w)}else{const{children:d=[]}=r;let{attributes:w}=r,R;if(typeof w=="object"&&!rs(w)){w=jr(w),R=new Xn;for(const[U,ae]of Object.entries(w))R.set(U,ae,i)}const F=un.create(Ut.of(i,0),n,void 0,R);e.append(F);for(const U of d)uo(U,F,t)}}function Cl(r,e){const{type:t}=e,n=r.issueTimeTicket();let i;if(e.type===Qn){const{value:d}=e;i=un.create(Ut.of(n,0),t,d)}else if(e){const{children:d=[]}=e;let{attributes:w}=e,R;if(typeof w=="object"&&!rs(w)){w=jr(w),R=new Xn;for(const[F,U]of Object.entries(w))R.set(F,U,n)}i=un.create(Ut.of(r.issueTimeTicket(),0),t,void 0,R);for(const F of d)uo(F,i,r)}return i}function Rs(r){if(!r.value.length)throw new Error("text node cannot have empty value");return!0}function Ds(r){if(!r.length)return!0;if(r[0].type===Qn)for(const t of r){const{type:n}=t;if(n!==Qn)throw new Error("element node and text node cannot be passed together");Rs(t)}else for(const t of r){const{type:n}=t;if(n===Qn)throw new Error("element node and text node cannot be passed together")}return!0}class vi{constructor(e){b(this,"initialRoot"),b(this,"context"),b(this,"tree"),this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return un.create(Ut.of(e.issueTimeTicket(),0),Ra);const t=un.create(Ut.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const n of this.initialRoot.children)uo(n,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[n,i]=this.tree.pathToPosRange(e),d=this.context.issueTimeTicket(),w=t?jr(t):void 0,[R]=this.tree.style([n,i],w,d);this.context.push(er.create(this.tree.getCreatedAt(),n,i,R,w?new Map(Object.entries(w)):new Map,d))}style(e,t,n){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const i=this.tree.findPos(e),d=this.tree.findPos(t),w=this.context.issueTimeTicket(),R=n?jr(n):void 0,[F,U]=this.tree.style([i,d],R,w);for(const ae of U)this.context.registerGCPair(ae);this.context.push(er.create(this.tree.getCreatedAt(),i,d,F,R?new Map(Object.entries(R)):new Map,w))}removeStyle(e,t,n){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const i=this.tree.findPos(e),d=this.tree.findPos(t),w=this.context.issueTimeTicket(),[R,F]=this.tree.removeStyle([i,d],n,w);for(const U of F)this.context.registerGCPair(U);this.context.push(er.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,d,R,n,w))}editInternal(e,t,n,i=0){var d;if(n.length!==0&&n[0]&&(Ds(n),n[0].type!==Qn))for(const ae of n){const{children:Ae=[]}=ae;Ds(Ae)}const w=this.context.getLastTimeTicket();let R=new Array;if(((d=n[0])==null?void 0:d.type)===Qn){let ae="";for(const Ae of n){const{value:ie}=Ae;ae+=ie}R.push(un.create(Ut.of(this.context.issueTimeTicket(),0),Qn,ae))}else R=n.map(ae=>ae&&Cl(this.context,ae)).filter(ae=>ae);const[,F,U]=this.tree.edit([e,t],R.length?R.map(ae=>ae==null?void 0:ae.deepcopy()):void 0,i,w,()=>this.context.issueTimeTicket());for(const ae of F)this.context.registerGCPair(ae);return this.context.push(ui.create(this.tree.getCreatedAt(),e,t,R.length?R:void 0,i,U,w)),!0}editByPath(e,t,n,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const d=this.tree.pathToPos(e),w=this.tree.pathToPos(t);return this.editInternal(d,w,n?[n]:[],i)}editBulkByPath(e,t,n,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const d=this.tree.pathToPos(e),w=this.tree.pathToPos(t);return this.editInternal(d,w,n,i)}edit(e,t,n,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const d=this.tree.findPos(e),w=this.tree.findPos(t);return this.editInternal(d,w,n?[n]:[],i)}editBulk(e,t,n,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const d=this.tree.findPos(e),w=this.tree.findPos(t);return this.editInternal(d,w,n,i)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){_e.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],n=this.tree.indexRangeToPosRange(t);return[n[0].toStruct(),n[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){_e.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){_e.fatal("it is not initialized yet");return}const t=[xn.fromStruct(e[0]),xn.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree){_e.fatal("it is not initialized yet");return}const t=[xn.fromStruct(e[0]),xn.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function Ls(r,e){return Cs(r,e)}function cr(r,e){if(e){if(e instanceof bt)return e;if(e instanceof rn)return Cs(r,e);if(e instanceof ln)return Nl(r,e);if(e instanceof bn)return new gi(r,e);if(e instanceof cn){const t=new pi(Mn.IntegerCnt,0);return t.initialize(r,e),t}else if(e instanceof wn){const t=new vi;return t.initialize(r,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Sr(r,e){const t=cr(r,e);return t instanceof bt?t.getValue():t}function Ri(r,e,t){let n;if(bt.isSupport(e))n=bt.of(e,t);else if(Array.isArray(e))n=ln.create(t,St.buildArrayElements(r,e));else if(typeof e=="object")e instanceof gi?(n=bn.create($r.create(),t),e.initialize(r,n)):e instanceof pi?(n=cn.create(e.getValueType(),e.getValue(),t),e.initialize(r,n)):e instanceof vi?(n=wn.create(e.buildRoot(r),t),e.initialize(r,n)):n=rn.create(t,di.buildObjectMembers(r,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return n}const Ms=50;class Rl{constructor(){b(this,"undoStack",[]),b(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Ms&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Ms&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const Bs="yorkie-devtools-panel",qs="yorkie-devtools-sdk";let Kr="disconnected";const js=new Map,Di=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=Di);function Li(r,e){!((e==null?void 0:e.force)||Kr!=="disconnected")||window.postMessage({source:qs,...r},"*")}function Dl(r){if(!r.isEnableDevtools()||typeof window>"u"||js.has(r.getKey()))return;Di.set(r.getKey(),[]);const e=r.subscribe("all",t=>{t.some(n=>n.type!==Zt.StatusChanged&&n.type!==Zt.Snapshot&&n.type!==Zt.LocalChange&&n.type!==Zt.RemoteChange&&n.type!==Zt.Initialized&&n.type!==Zt.Watched&&n.type!==Zt.Unwatched&&n.type!==Zt.PresenceChanged)||(Di.get(r.getKey()).push(t),Kr==="synced"&&Li({msg:"doc::sync::partial",docKey:r.getKey(),event:t}))});js.set(r.getKey(),[e]),Li({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var n;if(((n=t.data)==null?void 0:n.source)!==Bs)return;switch(t.data.msg){case"devtools::connect":if(Kr!=="disconnected")break;Kr="connected",Li({msg:"doc::available",docKey:r.getKey()}),_e.info(`[YD] Devtools connected. Doc: ${r.getKey()}`);break;case"devtools::disconnect":Kr="disconnected",_e.info(`[YD] Devtools disconnected. Doc: ${r.getKey()}`);break;case"devtools::subscribe":Kr="synced",Li({msg:"doc::sync::full",docKey:r.getKey(),events:Di.get(r.getKey())}),_e.info(`[YD] Devtools subscribed. Doc: ${r.getKey()}`);break}})}var tr=(r=>(r.Detached="detached",r.Attached="attached",r.Removed="removed",r))(tr||{}),Zt=(r=>(r.StatusChanged="status-changed",r.ConnectionChanged="connection-changed",r.SyncStatusChanged="sync-status-changed",r.Snapshot="snapshot",r.LocalChange="local-change",r.RemoteChange="remote-change",r.Initialized="initialized",r.Watched="watched",r.Unwatched="unwatched",r.PresenceChanged="presence-changed",r))(Zt||{}),Mi=(r=>(r.Connected="connected",r.Disconnected="disconnected",r))(Mi||{}),Bi=(r=>(r.Synced="synced",r.SyncFailed="sync-failed",r))(Bi||{});class co{constructor(e,t){b(this,"key"),b(this,"status"),b(this,"opts"),b(this,"changeID"),b(this,"checkpoint"),b(this,"localChanges"),b(this,"root"),b(this,"clone"),b(this,"eventStream"),b(this,"eventStreamObserver"),b(this,"onlineClients"),b(this,"presences"),b(this,"history"),b(this,"internalHistory"),b(this,"isUpdating"),this.opts=t||{},this.key=e,this.status="detached",this.root=hi.create(),this.changeID=Ua,this.checkpoint=$a,this.localChanges=[],this.eventStream=xl(n=>{this.eventStreamObserver=n}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new Rl,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},Dl(this)}update(e,t){if(this.getStatus()==="removed")throw new ct(lt.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const n=this.changeID.getActorID(),i=Vr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(n)||{},t);try{const d=Ls(i,this.clone.root.getObject());this.presences.has(n)||this.clone.presences.set(n,{}),this.isUpdating=!0,e(d,new Gi(i,this.clone.presences.get(n)))}catch(d){throw this.clone=void 0,_e.error(d),d}finally{this.isUpdating=!1}if(i.hasChange()){_e.isEnabled(an.Trivial)&&_e.trivial(`trying to update a local change: ${this.toJSON()}`);const d=i.getChange(),{opInfos:w,reverseOps:R}=d.execute(this.root,this.presences,dt.Local),F=i.getReversePresence();F&&R.push({type:"presence",value:F}),this.localChanges.push(d),R.length>0&&this.internalHistory.pushUndo(R),w.length>0&&this.internalHistory.clearRedo(),this.changeID=d.getID();const U=[];w.length>0&&U.push({type:"local-change",source:dt.Local,value:{message:d.getMessage()||"",operations:w,actor:n,clientSeq:d.getID().getClientSeq(),serverSeq:d.getID().getServerSeq()},rawChange:this.isEnableDevtools()?d.toStruct():void 0}),d.hasPresenceChange()&&U.push({type:"presence-changed",source:dt.Local,value:{clientID:n,presence:this.getPresence(n)}}),this.publish(U),_e.isEnabled(an.Trivial)&&_e.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,n,i){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const R=t;return this.eventStream.subscribe(F=>{for(const U of F)U.type!=="initialized"&&U.type!=="watched"&&U.type!=="unwatched"&&U.type!=="presence-changed"||R(U)},n,i)}if(e==="my-presence"){const R=t;return this.eventStream.subscribe(F=>{for(const U of F)U.type!=="initialized"&&U.type!=="presence-changed"||U.type==="presence-changed"&&U.value.clientID!==this.changeID.getActorID()||R(U)},n,i)}if(e==="others"){const R=t;return this.eventStream.subscribe(F=>{for(const U of F)U.type!=="watched"&&U.type!=="unwatched"&&U.type!=="presence-changed"||U.value.clientID!==this.changeID.getActorID()&&R(U)},n,i)}if(e==="connection"){const R=t;return this.eventStream.subscribe(F=>{for(const U of F)U.type==="connection-changed"&&R(U)},n,i)}if(e==="status"){const R=t;return this.eventStream.subscribe(F=>{for(const U of F)U.type==="status-changed"&&R(U)},n,i)}if(e==="sync"){const R=t;return this.eventStream.subscribe(F=>{for(const U of F)U.type==="sync-status-changed"&&R(U)},n,i)}if(e==="all"){const R=t;return this.eventStream.subscribe(R,n,i)}const d=e,w=t;return this.eventStream.subscribe(R=>{for(const F of R){if(F.type!=="local-change"&&F.type!=="remote-change")continue;const U=[];for(const ae of F.value.operations)this.isSameElementOrChildOf(ae.path,d)&&U.push(ae);U.length&&w({...F,value:{...F.value,operations:U}})}},n,i)}if(typeof e=="function"){const d=e,w=t,R=n;return this.eventStream.subscribe(F=>{for(const U of F)U.type!=="snapshot"&&U.type!=="local-change"&&U.type!=="remote-change"||d(U)},w,R)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const n=e.split(".");return t.split(".").every((d,w)=>d===n[w])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),dt.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),_e.isEnabled(an.Trivial)&&_e.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Sn(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return xi.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Vr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Ls(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t){const{root:n,presences:i}=Pt.bytesToSnapshot(t);this.root=new hi(n),this.presences=i,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:dt.Remote,value:{snapshot:this.isEnableDevtools()?Pt.bytesToHex(t):void 0,serverSeq:e.toString()}}])}applyChanges(e,t){_e.isEnabled(an.Debug)&&_e.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),_e.isEnabled(an.Trivial)&&_e.trivial(e.map(n=>`${n.getID().toTestString()}	${n.toTestString()}`).join(`
`));for(const n of e)this.applyChange(n,t);_e.isEnabled(an.Debug)&&_e.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const n=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const w=e.getPresenceChange();switch(w.type){case ir.Put:n.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:w.presence}}:{type:"watched",source:dt.Remote,value:{clientID:i,presence:w.presence}});break;case ir.Clear:n.push({type:"unwatched",source:dt.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:d}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),d.length>0){const w=this.isEnableDevtools()?e.toStruct():void 0;n.push(t===dt.Remote?{type:"remote-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:d},rawChange:w}:{type:"local-change",source:t,value:{actor:i,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:d},rawChange:w})}n.length>0&&this.publish(n)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,n=new Set;for(const i of t)i!==this.changeID.getActorID()&&n.add(i);this.setOnlineClients(n),this.publish([{type:"initialized",source:dt.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:n}=e.body.value,i=[];if(t===Ai.DOCUMENT_WATCHED)this.addOnlineClient(n),this.hasPresence(n)&&i.push({type:"watched",source:dt.Remote,value:{clientID:n,presence:this.getPresence(n)}});else if(t===Ai.DOCUMENT_UNWATCHED){const d=this.getPresence(n);this.removeOnlineClient(n),d&&i.push({type:"unwatched",source:dt.Remote,value:{clientID:n,presence:d}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Si),this.publish([{source:e==="removed"?dt.Remote:dt.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:n}=e.value;if(!t)return;this.applySnapshot(We.fromString(n),Pt.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=Or.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:n,presence:i}of e.value)t.add(n),this.presences.set(n,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:n}=e.value;this.addOnlineClient(t),this.presences.set(t,n);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:n}=e.value;this.presences.set(t,n)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new ct(lt.InvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let n=this.getRoot();for(const i of t)if(n=n[i],n===void 0)return;return n}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Sn(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Sn(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Sn(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Sn(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Sn(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,n)=>t.clientID>n.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=Vr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const U of e){if(!(U instanceof En)){new Gi(t,Sn(this.clone.presences.get(this.changeID.getActorID()))).set(U.value,{addToHistory:!0});continue}const ae=t.issueTimeTicket();U.setExecutedAt(ae),t.push(U)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,dt.UndoRedo);const{opInfos:i,reverseOps:d}=n.execute(this.root,this.presences,dt.UndoRedo),w=t.getReversePresence();if(w&&d.push({type:"presence",value:w}),d.length>0&&this.internalHistory.pushRedo(d),!n.hasPresenceChange()&&i.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const R=this.changeID.getActorID(),F=[];i.length>0&&F.push({type:"local-change",source:dt.UndoRedo,value:{message:n.getMessage()||"",operations:i,actor:R,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&F.push({type:"presence-changed",source:dt.UndoRedo,value:{clientID:R,presence:this.getPresence(R)}}),this.publish(F)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=Vr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const U of e){if(!(U instanceof En)){new Gi(t,Sn(this.clone.presences.get(this.changeID.getActorID()))).set(U.value,{addToHistory:!0});continue}const ae=t.issueTimeTicket();U.setExecutedAt(ae),t.push(U)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,dt.UndoRedo);const{opInfos:i,reverseOps:d}=n.execute(this.root,this.presences,dt.UndoRedo),w=t.getReversePresence();if(w&&d.push({type:"presence",value:w}),d.length>0&&this.internalHistory.pushUndo(d),!n.hasPresenceChange()&&i.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const R=this.changeID.getActorID(),F=[];i.length>0&&F.push({type:"local-change",source:dt.UndoRedo,value:{message:n.getMessage()||"",operations:i,actor:R,clientSeq:n.getID().getClientSeq(),serverSeq:n.getID().getServerSeq()},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&F.push({type:"presence-changed",source:dt.UndoRedo,value:{clientID:R,presence:this.getPresence(R)}}),this.publish(F)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function Ll(r,e){return t=>async n=>(r&&n.header.set("x-api-key",r),e&&n.header.set("authorization",e),await t(n))}const Fs={name:"yorkie-js-sdk",version:"0.4.25",description:"Yorkie JS SDK",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts",files:["dist"],scripts:{build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:examples":"npm run build --workspace examples","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"npm run build"},engines:{node:">=18.0.0",npm:">=7.1.0"},repository:{type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},author:{name:"hackerwins",email:"susukang98@gmail.com"},license:"Apache-2.0",bugs:{url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},homepage:"https://github.com/yorkie-team/yorkie-js-sdk#readme",devDependencies:{"@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.2.0","@types/google-protobuf":"^3.15.5","@types/jsdom":"^21.1.3","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",jsdom:"^22.1.0",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^4.7.4","typescript-transform-paths":"^3.3.1",vite:"^4.4.9","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5","vitest-environment-custom-jsdom":"file:test/vitest/env"},dependencies:{"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.2.0","@connectrpc/connect-web":"^1.2.0",long:"^5.2.0"},husky:{hooks:{"pre-commit":"npm run lint"}},workspaces:["examples/*"]};function Ml(){return r=>async e=>(e.header.set("x-yorkie-user-agent",Fs.name+"/"+Fs.version),await r(e))}var mi=(r=>(r.Manual="manual",r.Realtime="realtime",r.RealtimePushOnly="realtime-pushonly",r.RealtimeSyncOff="realtime-syncoff",r))(mi||{}),Us=(r=>(r.Deactivated="deactivated",r.Activated="activated",r))(Us||{});const qi={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class fo{constructor(e,t){b(this,"id"),b(this,"key"),b(this,"status"),b(this,"attachmentMap"),b(this,"apiKey"),b(this,"syncLoopDuration"),b(this,"reconnectStreamDelay"),b(this,"retrySyncLoopDelay"),b(this,"rpcClient"),t=t||qi,this.key=t.key?t.key:Ps(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.syncLoopDuration=t.syncLoopDuration||qi.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||qi.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||qi.retrySyncLoopDelay,this.rpcClient=Ve(ka,ra({baseUrl:e,interceptors:[Ll(t.apiKey,t.token),Ml()]}))}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),_e.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw _e.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){return this.status==="deactivated"?Promise.resolve():this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{for(const[e,t]of this.attachmentMap)t.doc.applyStatus(tr.Detached),this.detachInternal(e);this.status="deactivated",_e.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw _e.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,t={}){var i;if(!this.isActive())throw new ct(lt.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==tr.Detached)throw new ct(lt.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((d,w)=>w.set(t.initialPresence||{}));const n=(i=t.syncMode)!=null?i:"realtime";return this.rpcClient.attachDocument({clientId:this.id,changePack:Pt.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async d=>{const w=Pt.fromChangePack(d.changePack);return e.applyChangePack(w),e.getStatus()===tr.Removed||(e.applyStatus(tr.Attached),this.attachmentMap.set(e.getKey(),new kl(this.reconnectStreamDelay,e,d.documentId,n)),n!=="manual"&&await this.runWatchLoop(e.getKey()),_e.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(d=>{throw _e.error(`[AD] c:"${this.getKey()}" err :`,d),d})}detach(e,t={}){var i;if(!this.isActive())throw new ct(lt.ClientNotActive,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new ct(lt.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((d,w)=>w.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:n.docID,changePack:Pt.toChangePack(e.createChangePack()),removeIfNotAttached:(i=t.removeIfNotAttached)!=null?i:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(d=>{const w=Pt.fromChangePack(d.changePack);return e.applyChangePack(w),e.getStatus()!==tr.Removed&&e.applyStatus(tr.Detached),this.detachInternal(e.getKey()),_e.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(d=>{throw _e.error(`[DD] c:"${this.getKey()}" err :`,d),d})}async changeSyncMode(e,t){if(!this.isActive())throw new ct(lt.ClientNotActive,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new ct(lt.DocumentNotAttached,`${e.getKey()} is not attached`);const i=n.syncMode;return i===t?e:(n.changeSyncMode(t),t==="manual"?(n.cancelWatchStream(),e):(t==="realtime"&&(n.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new ct(lt.ClientNotActive,`${this.key} is not active`);const t=[];if(e){const n=this.attachmentMap.get(e.getKey());if(!n)throw new ct(lt.DocumentNotAttached,`${e.getKey()} is not attached`);t.push(this.syncInternal(n,"realtime"))}else this.attachmentMap.forEach(n=>{t.push(this.syncInternal(n,n.syncMode))});return Promise.all(t)}remove(e){if(!this.isActive())throw new ct(lt.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new ct(lt.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const n=Pt.toChangePack(e.createChangePack());return n.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:n},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const d=Pt.fromChangePack(i.changePack);e.applyChangePack(d),this.detachInternal(e.getKey()),_e.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(i=>{throw _e.error(`[RD] c:"${this.getKey()}" err :`,i),i})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){_e.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const t=[];for(const[,n]of this.attachmentMap)n.needRealtimeSync()&&(n.remoteChangeEventReceived=!1,t.push(this.syncInternal(n,n.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(n=>{_e.error(`[SL] c:"${this.getKey()}" sync failed:`,n),setTimeout(e,this.retrySyncLoopDelay)})};_e.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new ct(lt.DocumentNotAttached,`${e} is not attached`);return t.runWatchLoop(n=>{if(!this.isActive())return Promise.reject(new ct(lt.ClientNotActive,`${this.key} is not active`));const i=new AbortController,d=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:Zt.ConnectionChanged,value:Mi.Connected}]),_e.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((w,R)=>{(async()=>{try{for await(const U of d)this.handleWatchDocumentsResponse(t,U),U.body.case==="initialization"&&w([d,i])}catch(U){t.doc.resetOnlineClients(),t.doc.publish([{type:Zt.Initialized,source:dt.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:Zt.ConnectionChanged,value:Mi.Disconnected}]),_e.debug(`[WD] c:"${this.getKey()}" unwatches`),U instanceof ze&&U.code!=x.Canceled&&n(),R(U)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Ai.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),_e.debug(`[WD] c:"${this.getKey()}" unwatches`),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:n,docID:i}=e,d=n.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:Pt.toChangePack(d),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${n.getKey()}`}}).then(w=>{const R=Pt.fromChangePack(w.changePack);if(R.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return n;n.applyChangePack(R),e.doc.publish([{type:Zt.SyncStatusChanged,value:Bi.Synced}]),n.getStatus()===tr.Removed&&this.detachInternal(n.getKey());const F=n.getKey(),U=R.getChangeSize();return _e.info(`[PP] c:"${this.getKey()}" sync d:"${F}", push:${d.getChangeSize()} pull:${U} cp:${R.getCheckpoint().toTestString()}`),n}).catch(w=>{throw n.publish([{type:Zt.SyncStatusChanged,value:Bi.SyncFailed}]),_e.error(`[PP] c:"${this.getKey()}" err :`,w),w})}}const Bl=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ql={Client:fo,Document:co,Primitive:bt,Text:gi,Counter:pi,Tree:vi,IntType:Mn.IntegerCnt,LongType:Mn.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:fo,Document:co,Primitive:bt,Text:gi,Counter:pi,Tree:vi,IntType:Mn.IntegerCnt,LongType:Mn.LongCnt}),z.Change=Or,z.Client=fo,z.ClientStatus=Us,z.Counter=pi,z.Devtools=Bl,z.DocEventType=Zt,z.Document=co,z.DocumentStatus=tr,z.DocumentSyncStatus=Bi,z.EventSourceDevPanel=Bs,z.EventSourceSDK=qs,z.OpSource=dt,z.Primitive=bt,z.StreamConnectionStatus=Mi,z.SyncMode=mi,z.Text=gi,z.TimeTicket=Yt,z.Tree=vi,z.converter=Pt,z.default=ql,z.setLogLevel=Pa,Object.defineProperties(z,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(gr,gr.exports);const ho=po(gr.exports);var Hs={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(qe,fe){(function(C,k){qe.exports=k()})(typeof self<"u"?self:Ks,function(){return function(z){var C={};function k(b){if(C[b])return C[b].exports;var x=C[b]={i:b,l:!1,exports:{}};return z[b].call(x.exports,x,x.exports,k),x.l=!0,x.exports}return k.m=z,k.c=C,k.d=function(b,x,T){k.o(b,x)||Object.defineProperty(b,x,{configurable:!1,enumerable:!0,get:T})},k.n=function(b){var x=b&&b.__esModule?function(){return b.default}:function(){return b};return k.d(x,"a",x),x},k.o=function(b,x){return Object.prototype.hasOwnProperty.call(b,x)},k.p="",k(k.s=109)}([function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(17),x=k(18),T=k(19),y=k(45),O=k(46),m=k(47),c=k(48),l=k(49),a=k(12),h=k(32),g=k(33),p=k(31),f=k(1),s={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:b.default,Format:x.default,Leaf:T.default,Embed:c.default,Scroll:y.default,Block:m.default,Inline:O.default,Text:l.default,Attributor:{Attribute:a.default,Class:h.default,Style:g.default,Store:p.default}};C.default=s},function(z,C,k){var b=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,s){f.__proto__=s}||function(f,s){for(var u in s)s.hasOwnProperty(u)&&(f[u]=s[u])};return function(f,s){p(f,s);function u(){this.constructor=f}f.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=function(p){b(f,p);function f(s){var u=this;return s="[Parchment] "+s,u=p.call(this,s)||this,u.message=s,u.name=u.constructor.name,u}return f}(Error);C.ParchmentError=x;var T={},y={},O={},m={};C.DATA_KEY="__blot";var c;(function(p){p[p.TYPE=3]="TYPE",p[p.LEVEL=12]="LEVEL",p[p.ATTRIBUTE=13]="ATTRIBUTE",p[p.BLOT=14]="BLOT",p[p.INLINE=7]="INLINE",p[p.BLOCK=11]="BLOCK",p[p.BLOCK_BLOT=10]="BLOCK_BLOT",p[p.INLINE_BLOT=6]="INLINE_BLOT",p[p.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",p[p.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",p[p.ANY=15]="ANY"})(c=C.Scope||(C.Scope={}));function l(p,f){var s=h(p);if(s==null)throw new x("Unable to create "+p+" blot");var u=s,o=p instanceof Node||p.nodeType===Node.TEXT_NODE?p:u.create(f);return new u(o,f)}C.create=l;function a(p,f){return f===void 0&&(f=!1),p==null?null:p[C.DATA_KEY]!=null?p[C.DATA_KEY].blot:f?a(p.parentNode,f):null}C.find=a;function h(p,f){f===void 0&&(f=c.ANY);var s;if(typeof p=="string")s=m[p]||T[p];else if(p instanceof Text||p.nodeType===Node.TEXT_NODE)s=m.text;else if(typeof p=="number")p&c.LEVEL&c.BLOCK?s=m.block:p&c.LEVEL&c.INLINE&&(s=m.inline);else if(p instanceof HTMLElement){var u=(p.getAttribute("class")||"").split(/\s+/);for(var o in u)if(s=y[u[o]],s)break;s=s||O[p.tagName]}return s==null?null:f&c.LEVEL&s.scope&&f&c.TYPE&s.scope?s:null}C.query=h;function g(){for(var p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];if(p.length>1)return p.map(function(o){return g(o)});var s=p[0];if(typeof s.blotName!="string"&&typeof s.attrName!="string")throw new x("Invalid definition");if(s.blotName==="abstract")throw new x("Cannot register abstract class");if(m[s.blotName||s.attrName]=s,typeof s.keyName=="string")T[s.keyName]=s;else if(s.className!=null&&(y[s.className]=s),s.tagName!=null){Array.isArray(s.tagName)?s.tagName=s.tagName.map(function(o){return o.toUpperCase()}):s.tagName=s.tagName.toUpperCase();var u=Array.isArray(s.tagName)?s.tagName:[s.tagName];u.forEach(function(o){(O[o]==null||s.className==null)&&(O[o]=s)})}return s}C.register=g},function(z,C,k){var b=k(51),x=k(11),T=k(3),y=k(20),O=String.fromCharCode(0),m=function(c){Array.isArray(c)?this.ops=c:c!=null&&Array.isArray(c.ops)?this.ops=c.ops:this.ops=[]};m.prototype.insert=function(c,l){var a={};return c.length===0?this:(a.insert=c,l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(a.attributes=l),this.push(a))},m.prototype.delete=function(c){return c<=0?this:this.push({delete:c})},m.prototype.retain=function(c,l){if(c<=0)return this;var a={retain:c};return l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(a.attributes=l),this.push(a)},m.prototype.push=function(c){var l=this.ops.length,a=this.ops[l-1];if(c=T(!0,{},c),typeof a=="object"){if(typeof c.delete=="number"&&typeof a.delete=="number")return this.ops[l-1]={delete:a.delete+c.delete},this;if(typeof a.delete=="number"&&c.insert!=null&&(l-=1,a=this.ops[l-1],typeof a!="object"))return this.ops.unshift(c),this;if(x(c.attributes,a.attributes)){if(typeof c.insert=="string"&&typeof a.insert=="string")return this.ops[l-1]={insert:a.insert+c.insert},typeof c.attributes=="object"&&(this.ops[l-1].attributes=c.attributes),this;if(typeof c.retain=="number"&&typeof a.retain=="number")return this.ops[l-1]={retain:a.retain+c.retain},typeof c.attributes=="object"&&(this.ops[l-1].attributes=c.attributes),this}}return l===this.ops.length?this.ops.push(c):this.ops.splice(l,0,c),this},m.prototype.chop=function(){var c=this.ops[this.ops.length-1];return c&&c.retain&&!c.attributes&&this.ops.pop(),this},m.prototype.filter=function(c){return this.ops.filter(c)},m.prototype.forEach=function(c){this.ops.forEach(c)},m.prototype.map=function(c){return this.ops.map(c)},m.prototype.partition=function(c){var l=[],a=[];return this.forEach(function(h){var g=c(h)?l:a;g.push(h)}),[l,a]},m.prototype.reduce=function(c,l){return this.ops.reduce(c,l)},m.prototype.changeLength=function(){return this.reduce(function(c,l){return l.insert?c+y.length(l):l.delete?c-l.delete:c},0)},m.prototype.length=function(){return this.reduce(function(c,l){return c+y.length(l)},0)},m.prototype.slice=function(c,l){c=c||0,typeof l!="number"&&(l=1/0);for(var a=[],h=y.iterator(this.ops),g=0;g<l&&h.hasNext();){var p;g<c?p=h.next(c-g):(p=h.next(l-g),a.push(p)),g+=y.length(p)}return new m(a)},m.prototype.compose=function(c){var l=y.iterator(this.ops),a=y.iterator(c.ops),h=[],g=a.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var p=g.retain;l.peekType()==="insert"&&l.peekLength()<=p;)p-=l.peekLength(),h.push(l.next());g.retain-p>0&&a.next(g.retain-p)}for(var f=new m(h);l.hasNext()||a.hasNext();)if(a.peekType()==="insert")f.push(a.next());else if(l.peekType()==="delete")f.push(l.next());else{var s=Math.min(l.peekLength(),a.peekLength()),u=l.next(s),o=a.next(s);if(typeof o.retain=="number"){var v={};typeof u.retain=="number"?v.retain=s:v.insert=u.insert;var A=y.attributes.compose(u.attributes,o.attributes,typeof u.retain=="number");if(A&&(v.attributes=A),f.push(v),!a.hasNext()&&x(f.ops[f.ops.length-1],v)){var S=new m(l.rest());return f.concat(S).chop()}}else typeof o.delete=="number"&&typeof u.retain=="number"&&f.push(o)}return f.chop()},m.prototype.concat=function(c){var l=new m(this.ops.slice());return c.ops.length>0&&(l.push(c.ops[0]),l.ops=l.ops.concat(c.ops.slice(1))),l},m.prototype.diff=function(c,l){if(this.ops===c.ops)return new m;var a=[this,c].map(function(s){return s.map(function(u){if(u.insert!=null)return typeof u.insert=="string"?u.insert:O;var o=s===c?"on":"with";throw new Error("diff() called "+o+" non-document")}).join("")}),h=new m,g=b(a[0],a[1],l),p=y.iterator(this.ops),f=y.iterator(c.ops);return g.forEach(function(s){for(var u=s[1].length;u>0;){var o=0;switch(s[0]){case b.INSERT:o=Math.min(f.peekLength(),u),h.push(f.next(o));break;case b.DELETE:o=Math.min(u,p.peekLength()),p.next(o),h.delete(o);break;case b.EQUAL:o=Math.min(p.peekLength(),f.peekLength(),u);var v=p.next(o),A=f.next(o);x(v.insert,A.insert)?h.retain(o,y.attributes.diff(v.attributes,A.attributes)):h.push(A).delete(o);break}u-=o}}),h.chop()},m.prototype.eachLine=function(c,l){l=l||`
`;for(var a=y.iterator(this.ops),h=new m,g=0;a.hasNext();){if(a.peekType()!=="insert")return;var p=a.peek(),f=y.length(p)-a.peekLength(),s=typeof p.insert=="string"?p.insert.indexOf(l,f)-f:-1;if(s<0)h.push(a.next());else if(s>0)h.push(a.next(s));else{if(c(h,a.next(1).attributes||{},g)===!1)return;g+=1,h=new m}}h.length()>0&&c(h,{},g)},m.prototype.transform=function(c,l){if(l=!!l,typeof c=="number")return this.transformPosition(c,l);for(var a=y.iterator(this.ops),h=y.iterator(c.ops),g=new m;a.hasNext()||h.hasNext();)if(a.peekType()==="insert"&&(l||h.peekType()!=="insert"))g.retain(y.length(a.next()));else if(h.peekType()==="insert")g.push(h.next());else{var p=Math.min(a.peekLength(),h.peekLength()),f=a.next(p),s=h.next(p);if(f.delete)continue;s.delete?g.push(s):g.retain(p,y.attributes.transform(f.attributes,s.attributes,l))}return g.chop()},m.prototype.transformPosition=function(c,l){l=!!l;for(var a=y.iterator(this.ops),h=0;a.hasNext()&&h<=c;){var g=a.peekLength(),p=a.peekType();if(a.next(),p==="delete"){c-=Math.min(g,c-h);continue}else p==="insert"&&(h<c||!l)&&(c+=g);h+=g}return c},z.exports=m},function(z,C){var k=Object.prototype.hasOwnProperty,b=Object.prototype.toString,x=Object.defineProperty,T=Object.getOwnPropertyDescriptor,y=function(a){return typeof Array.isArray=="function"?Array.isArray(a):b.call(a)==="[object Array]"},O=function(a){if(!a||b.call(a)!=="[object Object]")return!1;var h=k.call(a,"constructor"),g=a.constructor&&a.constructor.prototype&&k.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!h&&!g)return!1;var p;for(p in a);return typeof p>"u"||k.call(a,p)},m=function(a,h){x&&h.name==="__proto__"?x(a,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):a[h.name]=h.newValue},c=function(a,h){if(h==="__proto__")if(k.call(a,h)){if(T)return T(a,h).value}else return;return a[h]};z.exports=function l(){var a,h,g,p,f,s,u=arguments[0],o=1,v=arguments.length,A=!1;for(typeof u=="boolean"&&(A=u,u=arguments[1]||{},o=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});o<v;++o)if(a=arguments[o],a!=null)for(h in a)g=c(u,h),p=c(a,h),u!==p&&(A&&p&&(O(p)||(f=y(p)))?(f?(f=!1,s=g&&y(g)?g:[]):s=g&&O(g)?g:{},m(u,{name:h,newValue:l(A,s,p)})):typeof p<"u"&&m(u,{name:h,newValue:p}));return u}},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BlockEmbed=C.bubbleFormats=void 0;var b=function(){function E(I,D){for(var L=0;L<D.length;L++){var B=D[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(I,B.key,B)}}return function(I,D,L){return D&&E(I.prototype,D),L&&E(I,L),I}}(),x=function E(I,D,L){I===null&&(I=Function.prototype);var B=Object.getOwnPropertyDescriptor(I,D);if(B===void 0){var J=Object.getPrototypeOf(I);return J===null?void 0:E(J,D,L)}else{if("value"in B)return B.value;var W=B.get;return W===void 0?void 0:W.call(L)}},T=k(3),y=u(T),O=k(2),m=u(O),c=k(0),l=u(c),a=k(16),h=u(a),g=k(6),p=u(g),f=k(7),s=u(f);function u(E){return E&&E.__esModule?E:{default:E}}function o(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function v(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function A(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var S=1,P=function(E){A(I,E);function I(){return o(this,I),v(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return b(I,[{key:"attach",value:function(){x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"attach",this).call(this),this.attributes=new l.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new m.default().insert(this.value(),(0,y.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(L,B){var J=l.default.query(L,l.default.Scope.BLOCK_ATTRIBUTE);J!=null&&this.attributes.attribute(J,B)}},{key:"formatAt",value:function(L,B,J,W){this.format(J,W)}},{key:"insertAt",value:function(L,B,J){if(typeof B=="string"&&B.endsWith(`
`)){var W=l.default.create(_.blotName);this.parent.insertBefore(W,L===0?this:this.next),W.insertAt(0,B.slice(0,-1))}else x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,L,B,J)}}]),I}(l.default.Embed);P.scope=l.default.Scope.BLOCK_BLOT;var _=function(E){A(I,E);function I(D){o(this,I);var L=v(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,D));return L.cache={},L}return b(I,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(l.default.Leaf).reduce(function(L,B){return B.length()===0?L:L.insert(B.value(),N(B))},new m.default).insert(`
`,N(this))),this.cache.delta}},{key:"deleteAt",value:function(L,B){x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"deleteAt",this).call(this,L,B),this.cache={}}},{key:"formatAt",value:function(L,B,J,W){B<=0||(l.default.query(J,l.default.Scope.BLOCK)?L+B===this.length()&&this.format(J,W):x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"formatAt",this).call(this,L,Math.min(B,this.length()-L-1),J,W),this.cache={})}},{key:"insertAt",value:function(L,B,J){if(J!=null)return x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,L,B,J);if(B.length!==0){var W=B.split(`
`),le=W.shift();le.length>0&&(L<this.length()-1||this.children.tail==null?x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertAt",this).call(this,Math.min(L,this.length()-1),le):this.children.tail.insertAt(this.children.tail.length(),le),this.cache={});var Z=this;W.reduce(function(V,M){return Z=Z.split(V,!0),Z.insertAt(0,M),M.length},L+le.length)}}},{key:"insertBefore",value:function(L,B){var J=this.children.head;x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"insertBefore",this).call(this,L,B),J instanceof h.default&&J.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(L,B){x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"moveChildren",this).call(this,L,B),this.cache={}}},{key:"optimize",value:function(L){x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,L),this.cache={}}},{key:"path",value:function(L){return x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"path",this).call(this,L,!0)}},{key:"removeChild",value:function(L){x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"removeChild",this).call(this,L),this.cache={}}},{key:"split",value:function(L){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(B&&(L===0||L>=this.length()-S)){var J=this.clone();return L===0?(this.parent.insertBefore(J,this),this):(this.parent.insertBefore(J,this.next),J)}else{var W=x(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"split",this).call(this,L,B);return this.cache={},W}}}]),I}(l.default.Block);_.blotName="block",_.tagName="P",_.defaultChild="break",_.allowedChildren=[p.default,l.default.Embed,s.default];function N(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(I=(0,y.default)(I,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?I:N(E.parent,I)}C.bubbleFormats=N,C.BlockEmbed=P,C.default=_},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.overload=C.expandConfig=void 0;var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},x=function(){function Z(V,M){var $=[],j=!0,X=!1,G=void 0;try{for(var q=V[Symbol.iterator](),Y;!(j=(Y=q.next()).done)&&($.push(Y.value),!(M&&$.length===M));j=!0);}catch(ee){X=!0,G=ee}finally{try{!j&&q.return&&q.return()}finally{if(X)throw G}}return $}return function(V,M){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return Z(V,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T=function(){function Z(V,M){for(var $=0;$<M.length;$++){var j=M[$];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(V,j.key,j)}}return function(V,M,$){return M&&Z(V.prototype,M),$&&Z(V,$),V}}();k(50);var y=k(2),O=N(y),m=k(14),c=N(m),l=k(8),a=N(l),h=k(9),g=N(h),p=k(0),f=N(p),s=k(15),u=N(s),o=k(3),v=N(o),A=k(10),S=N(A),P=k(34),_=N(P);function N(Z){return Z&&Z.__esModule?Z:{default:Z}}function E(Z,V,M){return V in Z?Object.defineProperty(Z,V,{value:M,enumerable:!0,configurable:!0,writable:!0}):Z[V]=M,Z}function I(Z,V){if(!(Z instanceof V))throw new TypeError("Cannot call a class as a function")}var D=(0,S.default)("quill"),L=function(){T(Z,null,[{key:"debug",value:function(M){M===!0&&(M="log"),S.default.level(M)}},{key:"find",value:function(M){return M.__quill||f.default.find(M)}},{key:"import",value:function(M){return this.imports[M]==null&&D.error("Cannot import "+M+". Are you sure it was registered?"),this.imports[M]}},{key:"register",value:function(M,$){var j=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof M!="string"){var G=M.attrName||M.blotName;typeof G=="string"?this.register("formats/"+G,M,$):Object.keys(M).forEach(function(q){j.register(q,M[q],$)})}else this.imports[M]!=null&&!X&&D.warn("Overwriting "+M+" with",$),this.imports[M]=$,(M.startsWith("blots/")||M.startsWith("formats/"))&&$.blotName!=="abstract"?f.default.register($):M.startsWith("modules")&&typeof $.register=="function"&&$.register()}}]);function Z(V){var M=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(I(this,Z),this.options=B(V,$),this.container=this.options.container,this.container==null)return D.error("Invalid Quill container",V);this.options.debug&&Z.debug(this.options.debug);var j=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new a.default,this.scroll=f.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new c.default(this.scroll),this.selection=new u.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(a.default.events.EDITOR_CHANGE,function(G){G===a.default.events.TEXT_CHANGE&&M.root.classList.toggle("ql-blank",M.editor.isBlank())}),this.emitter.on(a.default.events.SCROLL_UPDATE,function(G,q){var Y=M.selection.lastRange,ee=Y&&Y.length===0?Y.index:void 0;J.call(M,function(){return M.editor.update(null,q,ee)},G)});var X=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+j+"<p><br></p></div>");this.setContents(X),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return T(Z,[{key:"addContainer",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof M=="string"){var j=M;M=document.createElement("div"),M.classList.add(j)}return this.container.insertBefore(M,$),M}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(M,$,j){var X=this,G=W(M,$,j),q=x(G,4);return M=q[0],$=q[1],j=q[3],J.call(this,function(){return X.editor.deleteText(M,$)},j,M,-1*$)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(M),this.container.classList.toggle("ql-disabled",!M)}},{key:"focus",value:function(){var M=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=M,this.scrollIntoView()}},{key:"format",value:function(M,$){var j=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.default.sources.API;return J.call(this,function(){var G=j.getSelection(!0),q=new O.default;if(G==null)return q;if(f.default.query(M,f.default.Scope.BLOCK))q=j.editor.formatLine(G.index,G.length,E({},M,$));else{if(G.length===0)return j.selection.format(M,$),q;q=j.editor.formatText(G.index,G.length,E({},M,$))}return j.setSelection(G,a.default.sources.SILENT),q},X)}},{key:"formatLine",value:function(M,$,j,X,G){var q=this,Y=void 0,ee=W(M,$,j,X,G),re=x(ee,4);return M=re[0],$=re[1],Y=re[2],G=re[3],J.call(this,function(){return q.editor.formatLine(M,$,Y)},G,M,0)}},{key:"formatText",value:function(M,$,j,X,G){var q=this,Y=void 0,ee=W(M,$,j,X,G),re=x(ee,4);return M=re[0],$=re[1],Y=re[2],G=re[3],J.call(this,function(){return q.editor.formatText(M,$,Y)},G,M,0)}},{key:"getBounds",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=void 0;typeof M=="number"?j=this.selection.getBounds(M,$):j=this.selection.getBounds(M.index,M.length);var X=this.container.getBoundingClientRect();return{bottom:j.bottom-X.top,height:j.height,left:j.left-X.left,right:j.right-X.left,top:j.top-X.top,width:j.width}}},{key:"getContents",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,j=W(M,$),X=x(j,2);return M=X[0],$=X[1],this.editor.getContents(M,$)}},{key:"getFormat",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof M=="number"?this.editor.getFormat(M,$):this.editor.getFormat(M.index,M.length)}},{key:"getIndex",value:function(M){return M.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(M){return this.scroll.leaf(M)}},{key:"getLine",value:function(M){return this.scroll.line(M)}},{key:"getLines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof M!="number"?this.scroll.lines(M.index,M.length):this.scroll.lines(M,$)}},{key:"getModule",value:function(M){return this.theme.modules[M]}},{key:"getSelection",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return M&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,j=W(M,$),X=x(j,2);return M=X[0],$=X[1],this.editor.getText(M,$)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(M,$,j){var X=this,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Z.sources.API;return J.call(this,function(){return X.editor.insertEmbed(M,$,j)},G,M)}},{key:"insertText",value:function(M,$,j,X,G){var q=this,Y=void 0,ee=W(M,0,j,X,G),re=x(ee,4);return M=re[0],Y=re[2],G=re[3],J.call(this,function(){return q.editor.insertText(M,$,Y)},G,M,$.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(M,$,j){this.clipboard.dangerouslyPasteHTML(M,$,j)}},{key:"removeFormat",value:function(M,$,j){var X=this,G=W(M,$,j),q=x(G,4);return M=q[0],$=q[1],j=q[3],J.call(this,function(){return X.editor.removeFormat(M,$)},j,M)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(M){var $=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return J.call(this,function(){M=new O.default(M);var X=$.getLength(),G=$.editor.deleteText(0,X),q=$.editor.applyDelta(M),Y=q.ops[q.ops.length-1];Y!=null&&typeof Y.insert=="string"&&Y.insert[Y.insert.length-1]===`
`&&($.editor.deleteText($.getLength()-1,1),q.delete(1));var ee=G.compose(q);return ee},j)}},{key:"setSelection",value:function(M,$,j){if(M==null)this.selection.setRange(null,$||Z.sources.API);else{var X=W(M,$,j),G=x(X,4);M=G[0],$=G[1],j=G[3],this.selection.setRange(new s.Range(M,$),j),j!==a.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API,j=new O.default().insert(M);return this.setContents(j,$)}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.default.sources.USER,$=this.scroll.update(M);return this.selection.update(M),$}},{key:"updateContents",value:function(M){var $=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return J.call(this,function(){return M=new O.default(M),$.editor.applyDelta(M,j)},j,!0)}}]),Z}();L.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},L.events=a.default.events,L.sources=a.default.sources,L.version="1.3.7",L.imports={delta:O.default,parchment:f.default,"core/module":g.default,"core/theme":_.default};function B(Z,V){if(V=(0,v.default)(!0,{container:Z,modules:{clipboard:!0,keyboard:!0,history:!0}},V),!V.theme||V.theme===L.DEFAULTS.theme)V.theme=_.default;else if(V.theme=L.import("themes/"+V.theme),V.theme==null)throw new Error("Invalid theme "+V.theme+". Did you register it?");var M=(0,v.default)(!0,{},V.theme.DEFAULTS);[M,V].forEach(function(X){X.modules=X.modules||{},Object.keys(X.modules).forEach(function(G){X.modules[G]===!0&&(X.modules[G]={})})});var $=Object.keys(M.modules).concat(Object.keys(V.modules)),j=$.reduce(function(X,G){var q=L.import("modules/"+G);return q==null?D.error("Cannot load "+G+" module. Are you sure you registered it?"):X[G]=q.DEFAULTS||{},X},{});return V.modules!=null&&V.modules.toolbar&&V.modules.toolbar.constructor!==Object&&(V.modules.toolbar={container:V.modules.toolbar}),V=(0,v.default)(!0,{},L.DEFAULTS,{modules:j},M,V),["bounds","container","scrollingContainer"].forEach(function(X){typeof V[X]=="string"&&(V[X]=document.querySelector(V[X]))}),V.modules=Object.keys(V.modules).reduce(function(X,G){return V.modules[G]&&(X[G]=V.modules[G]),X},{}),V}function J(Z,V,M,$){if(this.options.strict&&!this.isEnabled()&&V===a.default.sources.USER)return new O.default;var j=M==null?null:this.getSelection(),X=this.editor.delta,G=Z();if(j!=null&&(M===!0&&(M=j.index),$==null?j=le(j,G,V):$!==0&&(j=le(j,M,$,V)),this.setSelection(j,a.default.sources.SILENT)),G.length()>0){var q,Y=[a.default.events.TEXT_CHANGE,G,X,V];if((q=this.emitter).emit.apply(q,[a.default.events.EDITOR_CHANGE].concat(Y)),V!==a.default.sources.SILENT){var ee;(ee=this.emitter).emit.apply(ee,Y)}}return G}function W(Z,V,M,$,j){var X={};return typeof Z.index=="number"&&typeof Z.length=="number"?typeof V!="number"?(j=$,$=M,M=V,V=Z.length,Z=Z.index):(V=Z.length,Z=Z.index):typeof V!="number"&&(j=$,$=M,M=V,V=0),(typeof M>"u"?"undefined":b(M))==="object"?(X=M,j=$):typeof M=="string"&&($!=null?X[M]=$:j=M),j=j||a.default.sources.API,[Z,V,X,j]}function le(Z,V,M,$){if(Z==null)return null;var j=void 0,X=void 0;if(V instanceof O.default){var G=[Z.index,Z.index+Z.length].map(function(re){return V.transformPosition(re,$!==a.default.sources.USER)}),q=x(G,2);j=q[0],X=q[1]}else{var Y=[Z.index,Z.index+Z.length].map(function(re){return re<V||re===V&&$===a.default.sources.USER?re:M>=0?re+M:Math.max(V,re+M)}),ee=x(Y,2);j=ee[0],X=ee[1]}return new s.Range(j,X-j)}C.expandConfig=B,C.overload=W,C.default=L},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function p(f,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}return function(f,s,u){return s&&p(f.prototype,s),u&&p(f,u),f}}(),x=function p(f,s,u){f===null&&(f=Function.prototype);var o=Object.getOwnPropertyDescriptor(f,s);if(o===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:p(v,s,u)}else{if("value"in o)return o.value;var A=o.get;return A===void 0?void 0:A.call(u)}},T=k(7),y=c(T),O=k(0),m=c(O);function c(p){return p&&p.__esModule?p:{default:p}}function l(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}function a(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:p}function h(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);p.prototype=Object.create(f&&f.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(p,f):p.__proto__=f)}var g=function(p){h(f,p);function f(){return l(this,f),a(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return b(f,[{key:"formatAt",value:function(u,o,v,A){if(f.compare(this.statics.blotName,v)<0&&m.default.query(v,m.default.Scope.BLOT)){var S=this.isolate(u,o);A&&S.wrap(v,A)}else x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"formatAt",this).call(this,u,o,v,A)}},{key:"optimize",value:function(u){if(x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"optimize",this).call(this,u),this.parent instanceof f&&f.compare(this.statics.blotName,this.parent.statics.blotName)>0){var o=this.parent.isolate(this.offset(),this.length());this.moveChildren(o),o.wrap(this)}}}],[{key:"compare",value:function(u,o){var v=f.order.indexOf(u),A=f.order.indexOf(o);return v>=0||A>=0?v-A:u===o?0:u<o?-1:1}}]),f}(m.default.Inline);g.allowedChildren=[g,m.default.Embed,y.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],C.default=g},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(0),x=T(b);function T(l){return l&&l.__esModule?l:{default:l}}function y(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function O(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function m(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var c=function(l){m(a,l);function a(){return y(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default.Text);C.default=c},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function s(u,o){for(var v=0;v<o.length;v++){var A=o[v];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(u,A.key,A)}}return function(u,o,v){return o&&s(u.prototype,o),v&&s(u,v),u}}(),x=function s(u,o,v){u===null&&(u=Function.prototype);var A=Object.getOwnPropertyDescriptor(u,o);if(A===void 0){var S=Object.getPrototypeOf(u);return S===null?void 0:s(S,o,v)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(v)}},T=k(54),y=c(T),O=k(10),m=c(O);function c(s){return s&&s.__esModule?s:{default:s}}function l(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}function a(s,u){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:s}function h(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(s,u):s.__proto__=u)}var g=(0,m.default)("quill:events"),p=["selectionchange","mousedown","mouseup","click"];p.forEach(function(s){document.addEventListener(s,function(){for(var u=arguments.length,o=Array(u),v=0;v<u;v++)o[v]=arguments[v];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(A){if(A.__quill&&A.__quill.emitter){var S;(S=A.__quill.emitter).handleDOM.apply(S,o)}})})});var f=function(s){h(u,s);function u(){l(this,u);var o=a(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return o.listeners={},o.on("error",g.error),o}return b(u,[{key:"emit",value:function(){g.log.apply(g,arguments),x(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(v){for(var A=arguments.length,S=Array(A>1?A-1:0),P=1;P<A;P++)S[P-1]=arguments[P];(this.listeners[v.type]||[]).forEach(function(_){var N=_.node,E=_.handler;(v.target===N||N.contains(v.target))&&E.apply(void 0,[v].concat(S))})}},{key:"listenDOM",value:function(v,A,S){this.listeners[v]||(this.listeners[v]=[]),this.listeners[v].push({node:A,handler:S})}}]),u}(y.default);f.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},f.sources={API:"api",SILENT:"silent",USER:"user"},C.default=f},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});function b(T,y){if(!(T instanceof y))throw new TypeError("Cannot call a class as a function")}var x=function T(y){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b(this,T),this.quill=y,this.options=O};x.DEFAULTS={},C.default=x},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=["error","warn","log","info"],x="warn";function T(O){if(b.indexOf(O)<=b.indexOf(x)){for(var m,c=arguments.length,l=Array(c>1?c-1:0),a=1;a<c;a++)l[a-1]=arguments[a];(m=console)[O].apply(m,l)}}function y(O){return b.reduce(function(m,c){return m[c]=T.bind(console,c,O),m},{})}T.level=y.level=function(O){x=O},C.default=y},function(z,C,k){var b=Array.prototype.slice,x=k(52),T=k(53),y=z.exports=function(l,a,h){return h||(h={}),l===a?!0:l instanceof Date&&a instanceof Date?l.getTime()===a.getTime():!l||!a||typeof l!="object"&&typeof a!="object"?h.strict?l===a:l==a:c(l,a,h)};function O(l){return l==null}function m(l){return!(!l||typeof l!="object"||typeof l.length!="number"||typeof l.copy!="function"||typeof l.slice!="function"||l.length>0&&typeof l[0]!="number")}function c(l,a,h){var g,p;if(O(l)||O(a)||l.prototype!==a.prototype)return!1;if(T(l))return T(a)?(l=b.call(l),a=b.call(a),y(l,a,h)):!1;if(m(l)){if(!m(a)||l.length!==a.length)return!1;for(g=0;g<l.length;g++)if(l[g]!==a[g])return!1;return!0}try{var f=x(l),s=x(a)}catch{return!1}if(f.length!=s.length)return!1;for(f.sort(),s.sort(),g=f.length-1;g>=0;g--)if(f[g]!=s[g])return!1;for(g=f.length-1;g>=0;g--)if(p=f[g],!y(l[p],a[p],h))return!1;return typeof l==typeof a}},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(1),x=function(){function T(y,O,m){m===void 0&&(m={}),this.attrName=y,this.keyName=O;var c=b.Scope.TYPE&b.Scope.ATTRIBUTE;m.scope!=null?this.scope=m.scope&b.Scope.LEVEL|c:this.scope=b.Scope.ATTRIBUTE,m.whitelist!=null&&(this.whitelist=m.whitelist)}return T.keys=function(y){return[].map.call(y.attributes,function(O){return O.name})},T.prototype.add=function(y,O){return this.canAdd(y,O)?(y.setAttribute(this.keyName,O),!0):!1},T.prototype.canAdd=function(y,O){var m=b.query(y,b.Scope.BLOT&(this.scope|b.Scope.TYPE));return m==null?!1:this.whitelist==null?!0:typeof O=="string"?this.whitelist.indexOf(O.replace(/["']/g,""))>-1:this.whitelist.indexOf(O)>-1},T.prototype.remove=function(y){y.removeAttribute(this.keyName)},T.prototype.value=function(y){var O=y.getAttribute(this.keyName);return this.canAdd(y,O)&&O?O:""},T}();C.default=x},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.Code=void 0;var b=function(){function P(_,N){var E=[],I=!0,D=!1,L=void 0;try{for(var B=_[Symbol.iterator](),J;!(I=(J=B.next()).done)&&(E.push(J.value),!(N&&E.length===N));I=!0);}catch(W){D=!0,L=W}finally{try{!I&&B.return&&B.return()}finally{if(D)throw L}}return E}return function(_,N){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return P(_,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function P(_,N){for(var E=0;E<N.length;E++){var I=N[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,N,E){return N&&P(_.prototype,N),E&&P(_,E),_}}(),T=function P(_,N,E){_===null&&(_=Function.prototype);var I=Object.getOwnPropertyDescriptor(_,N);if(I===void 0){var D=Object.getPrototypeOf(_);return D===null?void 0:P(D,N,E)}else{if("value"in I)return I.value;var L=I.get;return L===void 0?void 0:L.call(E)}},y=k(2),O=s(y),m=k(0),c=s(m),l=k(4),a=s(l),h=k(6),g=s(h),p=k(7),f=s(p);function s(P){return P&&P.__esModule?P:{default:P}}function u(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}function o(P,_){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:P}function v(P,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(P,_):P.__proto__=_)}var A=function(P){v(_,P);function _(){return u(this,_),o(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return _}(g.default);A.blotName="code",A.tagName="CODE";var S=function(P){v(_,P);function _(){return u(this,_),o(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return x(_,[{key:"delta",value:function(){var E=this,I=this.domNode.textContent;return I.endsWith(`
`)&&(I=I.slice(0,-1)),I.split(`
`).reduce(function(D,L){return D.insert(L).insert(`
`,E.formats())},new O.default)}},{key:"format",value:function(E,I){if(!(E===this.statics.blotName&&I)){var D=this.descendant(f.default,this.length()-1),L=b(D,1),B=L[0];B!=null&&B.deleteAt(B.length()-1,1),T(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,E,I)}}},{key:"formatAt",value:function(E,I,D,L){if(I!==0&&!(c.default.query(D,c.default.Scope.BLOCK)==null||D===this.statics.blotName&&L===this.statics.formats(this.domNode))){var B=this.newlineIndex(E);if(!(B<0||B>=E+I)){var J=this.newlineIndex(E,!0)+1,W=B-J+1,le=this.isolate(J,W),Z=le.next;le.format(D,L),Z instanceof _&&Z.formatAt(0,E-J+I-W,D,L)}}}},{key:"insertAt",value:function(E,I,D){if(D==null){var L=this.descendant(f.default,E),B=b(L,2),J=B[0],W=B[1];J.insertAt(W,I)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(I)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var D=this.domNode.textContent.slice(E).indexOf(`
`);return D>-1?E+D:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(c.default.create("text",`
`)),T(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,E);var I=this.next;I!=null&&I.prev===this&&I.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===I.statics.formats(I.domNode)&&(I.optimize(E),I.moveChildren(this),I.remove())}},{key:"replace",value:function(E){T(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(I){var D=c.default.find(I);D==null?I.parentNode.removeChild(I):D instanceof c.default.Embed?D.remove():D.unwrap()})}}],[{key:"create",value:function(E){var I=T(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,E);return I.setAttribute("spellcheck",!1),I}},{key:"formats",value:function(){return!0}}]),_}(a.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",C.Code=A,C.default=S},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},x=function(){function Z(V,M){var $=[],j=!0,X=!1,G=void 0;try{for(var q=V[Symbol.iterator](),Y;!(j=(Y=q.next()).done)&&($.push(Y.value),!(M&&$.length===M));j=!0);}catch(ee){X=!0,G=ee}finally{try{!j&&q.return&&q.return()}finally{if(X)throw G}}return $}return function(V,M){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return Z(V,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T=function(){function Z(V,M){for(var $=0;$<M.length;$++){var j=M[$];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(V,j.key,j)}}return function(V,M,$){return M&&Z(V.prototype,M),$&&Z(V,$),V}}(),y=k(2),O=I(y),m=k(20),c=I(m),l=k(0),a=I(l),h=k(13),g=I(h),p=k(24),f=I(p),s=k(4),u=I(s),o=k(16),v=I(o),A=k(21),S=I(A),P=k(11),_=I(P),N=k(3),E=I(N);function I(Z){return Z&&Z.__esModule?Z:{default:Z}}function D(Z,V,M){return V in Z?Object.defineProperty(Z,V,{value:M,enumerable:!0,configurable:!0,writable:!0}):Z[V]=M,Z}function L(Z,V){if(!(Z instanceof V))throw new TypeError("Cannot call a class as a function")}var B=/^[ -~]*$/,J=function(){function Z(V){L(this,Z),this.scroll=V,this.delta=this.getDelta()}return T(Z,[{key:"applyDelta",value:function(M){var $=this,j=!1;this.scroll.update();var X=this.scroll.length();return this.scroll.batchStart(),M=le(M),M.reduce(function(G,q){var Y=q.retain||q.delete||q.insert.length||1,ee=q.attributes||{};if(q.insert!=null){if(typeof q.insert=="string"){var re=q.insert;re.endsWith(`
`)&&j&&(j=!1,re=re.slice(0,-1)),G>=X&&!re.endsWith(`
`)&&(j=!0),$.scroll.insertAt(G,re);var de=$.scroll.line(G),be=x(de,2),Ee=be[0],xe=be[1],Ie=(0,E.default)({},(0,s.bubbleFormats)(Ee));if(Ee instanceof u.default){var H=Ee.descendant(a.default.Leaf,xe),se=x(H,1),oe=se[0];Ie=(0,E.default)(Ie,(0,s.bubbleFormats)(oe))}ee=c.default.attributes.diff(Ie,ee)||{}}else if(b(q.insert)==="object"){var K=Object.keys(q.insert)[0];if(K==null)return G;$.scroll.insertAt(G,K,q.insert[K])}X+=Y}return Object.keys(ee).forEach(function(te){$.scroll.formatAt(G,Y,te,ee[te])}),G+Y},0),M.reduce(function(G,q){return typeof q.delete=="number"?($.scroll.deleteAt(G,q.delete),G):G+(q.retain||q.insert.length||1)},0),this.scroll.batchEnd(),this.update(M)}},{key:"deleteText",value:function(M,$){return this.scroll.deleteAt(M,$),this.update(new O.default().retain(M).delete($))}},{key:"formatLine",value:function(M,$){var j=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(X).forEach(function(G){if(!(j.scroll.whitelist!=null&&!j.scroll.whitelist[G])){var q=j.scroll.lines(M,Math.max($,1)),Y=$;q.forEach(function(ee){var re=ee.length();if(!(ee instanceof g.default))ee.format(G,X[G]);else{var de=M-ee.offset(j.scroll),be=ee.newlineIndex(de+Y)-de+1;ee.formatAt(de,be,G,X[G])}Y-=re})}}),this.scroll.optimize(),this.update(new O.default().retain(M).retain($,(0,S.default)(X)))}},{key:"formatText",value:function(M,$){var j=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(X).forEach(function(G){j.scroll.formatAt(M,$,G,X[G])}),this.update(new O.default().retain(M).retain($,(0,S.default)(X)))}},{key:"getContents",value:function(M,$){return this.delta.slice(M,M+$)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(M,$){return M.concat($.delta())},new O.default)}},{key:"getFormat",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=[],X=[];$===0?this.scroll.path(M).forEach(function(q){var Y=x(q,1),ee=Y[0];ee instanceof u.default?j.push(ee):ee instanceof a.default.Leaf&&X.push(ee)}):(j=this.scroll.lines(M,$),X=this.scroll.descendants(a.default.Leaf,M,$));var G=[j,X].map(function(q){if(q.length===0)return{};for(var Y=(0,s.bubbleFormats)(q.shift());Object.keys(Y).length>0;){var ee=q.shift();if(ee==null)return Y;Y=W((0,s.bubbleFormats)(ee),Y)}return Y});return E.default.apply(E.default,G)}},{key:"getText",value:function(M,$){return this.getContents(M,$).filter(function(j){return typeof j.insert=="string"}).map(function(j){return j.insert}).join("")}},{key:"insertEmbed",value:function(M,$,j){return this.scroll.insertAt(M,$,j),this.update(new O.default().retain(M).insert(D({},$,j)))}},{key:"insertText",value:function(M,$){var j=this,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $=$.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(M,$),Object.keys(X).forEach(function(G){j.scroll.formatAt(M,$.length,G,X[G])}),this.update(new O.default().retain(M).insert($,(0,S.default)(X)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var M=this.scroll.children.head;return M.statics.blotName!==u.default.blotName||M.children.length>1?!1:M.children.head instanceof v.default}},{key:"removeFormat",value:function(M,$){var j=this.getText(M,$),X=this.scroll.line(M+$),G=x(X,2),q=G[0],Y=G[1],ee=0,re=new O.default;q!=null&&(q instanceof g.default?ee=q.newlineIndex(Y)-Y+1:ee=q.length()-Y,re=q.delta().slice(Y,Y+ee-1).insert(`
`));var de=this.getContents(M,$+ee),be=de.diff(new O.default().insert(j).concat(re)),Ee=new O.default().retain(M).concat(be);return this.applyDelta(Ee)}},{key:"update",value:function(M){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,X=this.delta;if($.length===1&&$[0].type==="characterData"&&$[0].target.data.match(B)&&a.default.find($[0].target)){var G=a.default.find($[0].target),q=(0,s.bubbleFormats)(G),Y=G.offset(this.scroll),ee=$[0].oldValue.replace(f.default.CONTENTS,""),re=new O.default().insert(ee),de=new O.default().insert(G.value()),be=new O.default().retain(Y).concat(re.diff(de,j));M=be.reduce(function(Ee,xe){return xe.insert?Ee.insert(xe.insert,q):Ee.push(xe)},new O.default),this.delta=X.compose(M)}else this.delta=this.getDelta(),(!M||!(0,_.default)(X.compose(M),this.delta))&&(M=X.diff(this.delta,j));return M}}]),Z}();function W(Z,V){return Object.keys(V).reduce(function(M,$){return Z[$]==null||(V[$]===Z[$]?M[$]=V[$]:Array.isArray(V[$])?V[$].indexOf(Z[$])<0&&(M[$]=V[$].concat([Z[$]])):M[$]=[V[$],Z[$]]),M},{})}function le(Z){return Z.reduce(function(V,M){if(M.insert===1){var $=(0,S.default)(M.attributes);return delete $.image,V.insert({image:M.attributes.image},$)}if(M.attributes!=null&&(M.attributes.list===!0||M.attributes.bullet===!0)&&(M=(0,S.default)(M),M.attributes.list?M.attributes.list="ordered":(M.attributes.list="bullet",delete M.attributes.bullet)),typeof M.insert=="string"){var j=M.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return V.insert(j,M.attributes)}return V.push(M)},new O.default)}C.default=J},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.Range=void 0;var b=function(){function P(_,N){var E=[],I=!0,D=!1,L=void 0;try{for(var B=_[Symbol.iterator](),J;!(I=(J=B.next()).done)&&(E.push(J.value),!(N&&E.length===N));I=!0);}catch(W){D=!0,L=W}finally{try{!I&&B.return&&B.return()}finally{if(D)throw L}}return E}return function(_,N){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return P(_,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function P(_,N){for(var E=0;E<N.length;E++){var I=N[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,N,E){return N&&P(_.prototype,N),E&&P(_,E),_}}(),T=k(0),y=f(T),O=k(21),m=f(O),c=k(11),l=f(c),a=k(8),h=f(a),g=k(10),p=f(g);function f(P){return P&&P.__esModule?P:{default:P}}function s(P){if(Array.isArray(P)){for(var _=0,N=Array(P.length);_<P.length;_++)N[_]=P[_];return N}else return Array.from(P)}function u(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}var o=(0,p.default)("quill:selection"),v=function P(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;u(this,P),this.index=_,this.length=N},A=function(){function P(_,N){var E=this;u(this,P),this.emitter=N,this.scroll=_,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=y.default.create("cursor",this),this.lastRange=this.savedRange=new v(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,h.default.sources.USER),1)}),this.emitter.on(h.default.events.EDITOR_CHANGE,function(I,D){I===h.default.events.TEXT_CHANGE&&D.length()>0&&E.update(h.default.sources.SILENT)}),this.emitter.on(h.default.events.SCROLL_BEFORE_UPDATE,function(){if(!!E.hasFocus()){var I=E.getNativeRange();I!=null&&I.start.node!==E.cursor.textNode&&E.emitter.once(h.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(I.start.node,I.start.offset,I.end.node,I.end.offset)}catch{}})}}),this.emitter.on(h.default.events.SCROLL_OPTIMIZE,function(I,D){if(D.range){var L=D.range,B=L.startNode,J=L.startOffset,W=L.endNode,le=L.endOffset;E.setNativeRange(B,J,W,le)}}),this.update(h.default.sources.SILENT)}return x(P,[{key:"handleComposition",value:function(){var N=this;this.root.addEventListener("compositionstart",function(){N.composing=!0}),this.root.addEventListener("compositionend",function(){if(N.composing=!1,N.cursor.parent){var E=N.cursor.restore();if(!E)return;setTimeout(function(){N.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var N=this;this.emitter.listenDOM("mousedown",document.body,function(){N.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){N.mouseDown=!1,N.update(h.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(N,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[N])){this.scroll.update();var I=this.getNativeRange();if(!(I==null||!I.native.collapsed||y.default.query(N,y.default.Scope.BLOCK))){if(I.start.node!==this.cursor.textNode){var D=y.default.find(I.start.node,!1);if(D==null)return;if(D instanceof y.default.Leaf){var L=D.split(I.start.offset);D.parent.insertBefore(this.cursor,L)}else D.insertBefore(this.cursor,I.start.node);this.cursor.attach()}this.cursor.format(N,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(N){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=this.scroll.length();N=Math.min(N,I-1),E=Math.min(N+E,I-1)-N;var D=void 0,L=this.scroll.leaf(N),B=b(L,2),J=B[0],W=B[1];if(J==null)return null;var le=J.position(W,!0),Z=b(le,2);D=Z[0],W=Z[1];var V=document.createRange();if(E>0){V.setStart(D,W);var M=this.scroll.leaf(N+E),$=b(M,2);if(J=$[0],W=$[1],J==null)return null;var j=J.position(W,!0),X=b(j,2);return D=X[0],W=X[1],V.setEnd(D,W),V.getBoundingClientRect()}else{var G="left",q=void 0;return D instanceof Text?(W<D.data.length?(V.setStart(D,W),V.setEnd(D,W+1)):(V.setStart(D,W-1),V.setEnd(D,W),G="right"),q=V.getBoundingClientRect()):(q=J.domNode.getBoundingClientRect(),W>0&&(G="right")),{bottom:q.top+q.height,height:q.height,left:q[G],right:q[G],top:q.top,width:0}}}},{key:"getNativeRange",value:function(){var N=document.getSelection();if(N==null||N.rangeCount<=0)return null;var E=N.getRangeAt(0);if(E==null)return null;var I=this.normalizeNative(E);return o.info("getNativeRange",I),I}},{key:"getRange",value:function(){var N=this.getNativeRange();if(N==null)return[null,null];var E=this.normalizedToRange(N);return[E,N]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(N){var E=this,I=[[N.start.node,N.start.offset]];N.native.collapsed||I.push([N.end.node,N.end.offset]);var D=I.map(function(J){var W=b(J,2),le=W[0],Z=W[1],V=y.default.find(le,!0),M=V.offset(E.scroll);return Z===0?M:V instanceof y.default.Container?M+V.length():M+V.index(le,Z)}),L=Math.min(Math.max.apply(Math,s(D)),this.scroll.length()-1),B=Math.min.apply(Math,[L].concat(s(D)));return new v(B,L-B)}},{key:"normalizeNative",value:function(N){if(!S(this.root,N.startContainer)||!N.collapsed&&!S(this.root,N.endContainer))return null;var E={start:{node:N.startContainer,offset:N.startOffset},end:{node:N.endContainer,offset:N.endOffset},native:N};return[E.start,E.end].forEach(function(I){for(var D=I.node,L=I.offset;!(D instanceof Text)&&D.childNodes.length>0;)if(D.childNodes.length>L)D=D.childNodes[L],L=0;else if(D.childNodes.length===L)D=D.lastChild,L=D instanceof Text?D.data.length:D.childNodes.length+1;else break;I.node=D,I.offset=L}),E}},{key:"rangeToNative",value:function(N){var E=this,I=N.collapsed?[N.index]:[N.index,N.index+N.length],D=[],L=this.scroll.length();return I.forEach(function(B,J){B=Math.min(L-1,B);var W=void 0,le=E.scroll.leaf(B),Z=b(le,2),V=Z[0],M=Z[1],$=V.position(M,J!==0),j=b($,2);W=j[0],M=j[1],D.push(W,M)}),D.length<2&&(D=D.concat(D)),D}},{key:"scrollIntoView",value:function(N){var E=this.lastRange;if(E!=null){var I=this.getBounds(E.index,E.length);if(I!=null){var D=this.scroll.length()-1,L=this.scroll.line(Math.min(E.index,D)),B=b(L,1),J=B[0],W=J;if(E.length>0){var le=this.scroll.line(Math.min(E.index+E.length,D)),Z=b(le,1);W=Z[0]}if(!(J==null||W==null)){var V=N.getBoundingClientRect();I.top<V.top?N.scrollTop-=V.top-I.top:I.bottom>V.bottom&&(N.scrollTop+=I.bottom-V.bottom)}}}}},{key:"setNativeRange",value:function(N,E){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:N,D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(o.info("setNativeRange",N,E,I,D),!(N!=null&&(this.root.parentNode==null||N.parentNode==null||I.parentNode==null))){var B=document.getSelection();if(B!=null)if(N!=null){this.hasFocus()||this.root.focus();var J=(this.getNativeRange()||{}).native;if(J==null||L||N!==J.startContainer||E!==J.startOffset||I!==J.endContainer||D!==J.endOffset){N.tagName=="BR"&&(E=[].indexOf.call(N.parentNode.childNodes,N),N=N.parentNode),I.tagName=="BR"&&(D=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode);var W=document.createRange();W.setStart(N,E),W.setEnd(I,D),B.removeAllRanges(),B.addRange(W)}}else B.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(N){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.default.sources.API;if(typeof E=="string"&&(I=E,E=!1),o.info("setRange",N),N!=null){var D=this.rangeToNative(N);this.setNativeRange.apply(this,s(D).concat([E]))}else this.setNativeRange(null);this.update(I)}},{key:"update",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h.default.sources.USER,E=this.lastRange,I=this.getRange(),D=b(I,2),L=D[0],B=D[1];if(this.lastRange=L,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,l.default)(E,this.lastRange)){var J;!this.composing&&B!=null&&B.native.collapsed&&B.start.node!==this.cursor.textNode&&this.cursor.restore();var W=[h.default.events.SELECTION_CHANGE,(0,m.default)(this.lastRange),(0,m.default)(E),N];if((J=this.emitter).emit.apply(J,[h.default.events.EDITOR_CHANGE].concat(W)),N!==h.default.sources.SILENT){var le;(le=this.emitter).emit.apply(le,W)}}}}]),P}();function S(P,_){try{_.parentNode}catch{return!1}return _ instanceof Text&&(_=_.parentNode),P.contains(_)}C.Range=v,C.default=A},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function h(g,p){for(var f=0;f<p.length;f++){var s=p[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,s.key,s)}}return function(g,p,f){return p&&h(g.prototype,p),f&&h(g,f),g}}(),x=function h(g,p,f){g===null&&(g=Function.prototype);var s=Object.getOwnPropertyDescriptor(g,p);if(s===void 0){var u=Object.getPrototypeOf(g);return u===null?void 0:h(u,p,f)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(f)}},T=k(0),y=O(T);function O(h){return h&&h.__esModule?h:{default:h}}function m(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function c(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function l(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var a=function(h){l(g,h);function g(){return m(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return b(g,[{key:"insertInto",value:function(f,s){f.children.length===0?x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,f,s):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g}(y.default.Embed);a.blotName="break",a.tagName="BR",C.default=a},function(z,C,k){var b=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var h in a)a.hasOwnProperty(h)&&(l[h]=a[h])};return function(l,a){c(l,a);function h(){this.constructor=l}l.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(44),T=k(30),y=k(1),O=function(c){b(l,c);function l(a){var h=c.call(this,a)||this;return h.build(),h}return l.prototype.appendChild=function(a){this.insertBefore(a)},l.prototype.attach=function(){c.prototype.attach.call(this),this.children.forEach(function(a){a.attach()})},l.prototype.build=function(){var a=this;this.children=new x.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(h){try{var g=m(h);a.insertBefore(g,a.children.head||void 0)}catch(p){if(p instanceof y.ParchmentError)return;throw p}})},l.prototype.deleteAt=function(a,h){if(a===0&&h===this.length())return this.remove();this.children.forEachAt(a,h,function(g,p,f){g.deleteAt(p,f)})},l.prototype.descendant=function(a,h){var g=this.children.find(h),p=g[0],f=g[1];return a.blotName==null&&a(p)||a.blotName!=null&&p instanceof a?[p,f]:p instanceof l?p.descendant(a,f):[null,-1]},l.prototype.descendants=function(a,h,g){h===void 0&&(h=0),g===void 0&&(g=Number.MAX_VALUE);var p=[],f=g;return this.children.forEachAt(h,g,function(s,u,o){(a.blotName==null&&a(s)||a.blotName!=null&&s instanceof a)&&p.push(s),s instanceof l&&(p=p.concat(s.descendants(a,u,f))),f-=o}),p},l.prototype.detach=function(){this.children.forEach(function(a){a.detach()}),c.prototype.detach.call(this)},l.prototype.formatAt=function(a,h,g,p){this.children.forEachAt(a,h,function(f,s,u){f.formatAt(s,u,g,p)})},l.prototype.insertAt=function(a,h,g){var p=this.children.find(a),f=p[0],s=p[1];if(f)f.insertAt(s,h,g);else{var u=g==null?y.create("text",h):y.create(h,g);this.appendChild(u)}},l.prototype.insertBefore=function(a,h){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return a instanceof g}))throw new y.ParchmentError("Cannot insert "+a.statics.blotName+" into "+this.statics.blotName);a.insertInto(this,h)},l.prototype.length=function(){return this.children.reduce(function(a,h){return a+h.length()},0)},l.prototype.moveChildren=function(a,h){this.children.forEach(function(g){a.insertBefore(g,h)})},l.prototype.optimize=function(a){if(c.prototype.optimize.call(this,a),this.children.length===0)if(this.statics.defaultChild!=null){var h=y.create(this.statics.defaultChild);this.appendChild(h),h.optimize(a)}else this.remove()},l.prototype.path=function(a,h){h===void 0&&(h=!1);var g=this.children.find(a,h),p=g[0],f=g[1],s=[[this,a]];return p instanceof l?s.concat(p.path(f,h)):(p!=null&&s.push([p,f]),s)},l.prototype.removeChild=function(a){this.children.remove(a)},l.prototype.replace=function(a){a instanceof l&&a.moveChildren(this),c.prototype.replace.call(this,a)},l.prototype.split=function(a,h){if(h===void 0&&(h=!1),!h){if(a===0)return this;if(a===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(a,this.length(),function(p,f,s){p=p.split(f,h),g.appendChild(p)}),g},l.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},l.prototype.update=function(a,h){var g=this,p=[],f=[];a.forEach(function(s){s.target===g.domNode&&s.type==="childList"&&(p.push.apply(p,s.addedNodes),f.push.apply(f,s.removedNodes))}),f.forEach(function(s){if(!(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var u=y.find(s);u!=null&&(u.domNode.parentNode==null||u.domNode.parentNode===g.domNode)&&u.detach()}}),p.filter(function(s){return s.parentNode==g.domNode}).sort(function(s,u){return s===u?0:s.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(s){var u=null;s.nextSibling!=null&&(u=y.find(s.nextSibling));var o=m(s);(o.next!=u||o.next==null)&&(o.parent!=null&&o.parent.removeChild(g),g.insertBefore(o,u||void 0))})},l}(T.default);function m(c){var l=y.find(c);if(l==null)try{l=y.create(c)}catch{l=y.create(y.Scope.INLINE),[].slice.call(c.childNodes).forEach(function(h){l.domNode.appendChild(h)}),c.parentNode&&c.parentNode.replaceChild(l.domNode,c),l.attach()}return l}C.default=O},function(z,C,k){var b=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var h in a)a.hasOwnProperty(h)&&(l[h]=a[h])};return function(l,a){c(l,a);function h(){this.constructor=l}l.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(12),T=k(31),y=k(17),O=k(1),m=function(c){b(l,c);function l(a){var h=c.call(this,a)||this;return h.attributes=new T.default(h.domNode),h}return l.formats=function(a){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()},l.prototype.format=function(a,h){var g=O.query(a);g instanceof x.default?this.attributes.attribute(g,h):h&&g!=null&&(a!==this.statics.blotName||this.formats()[a]!==h)&&this.replaceWith(a,h)},l.prototype.formats=function(){var a=this.attributes.values(),h=this.statics.formats(this.domNode);return h!=null&&(a[this.statics.blotName]=h),a},l.prototype.replaceWith=function(a,h){var g=c.prototype.replaceWith.call(this,a,h);return this.attributes.copy(g),g},l.prototype.update=function(a,h){var g=this;c.prototype.update.call(this,a,h),a.some(function(p){return p.target===g.domNode&&p.type==="attributes"})&&this.attributes.build()},l.prototype.wrap=function(a,h){var g=c.prototype.wrap.call(this,a,h);return g instanceof l&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},l}(y.default);C.default=m},function(z,C,k){var b=this&&this.__extends||function(){var O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,c){m.__proto__=c}||function(m,c){for(var l in c)c.hasOwnProperty(l)&&(m[l]=c[l])};return function(m,c){O(m,c);function l(){this.constructor=m}m.prototype=c===null?Object.create(c):(l.prototype=c.prototype,new l)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(30),T=k(1),y=function(O){b(m,O);function m(){return O!==null&&O.apply(this,arguments)||this}return m.value=function(c){return!0},m.prototype.index=function(c,l){return this.domNode===c||this.domNode.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(l,1):-1},m.prototype.position=function(c,l){var a=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return c>0&&(a+=1),[this.parent.domNode,a]},m.prototype.value=function(){var c;return c={},c[this.statics.blotName]=this.statics.value(this.domNode)||!0,c},m.scope=T.Scope.INLINE_BLOT,m}(x.default);C.default=y},function(z,C,k){var b=k(11),x=k(3),T={attributes:{compose:function(O,m,c){typeof O!="object"&&(O={}),typeof m!="object"&&(m={});var l=x(!0,{},m);c||(l=Object.keys(l).reduce(function(h,g){return l[g]!=null&&(h[g]=l[g]),h},{}));for(var a in O)O[a]!==void 0&&m[a]===void 0&&(l[a]=O[a]);return Object.keys(l).length>0?l:void 0},diff:function(O,m){typeof O!="object"&&(O={}),typeof m!="object"&&(m={});var c=Object.keys(O).concat(Object.keys(m)).reduce(function(l,a){return b(O[a],m[a])||(l[a]=m[a]===void 0?null:m[a]),l},{});return Object.keys(c).length>0?c:void 0},transform:function(O,m,c){if(typeof O!="object")return m;if(typeof m=="object"){if(!c)return m;var l=Object.keys(m).reduce(function(a,h){return O[h]===void 0&&(a[h]=m[h]),a},{});return Object.keys(l).length>0?l:void 0}}},iterator:function(O){return new y(O)},length:function(O){return typeof O.delete=="number"?O.delete:typeof O.retain=="number"?O.retain:typeof O.insert=="string"?O.insert.length:1}};function y(O){this.ops=O,this.index=0,this.offset=0}y.prototype.hasNext=function(){return this.peekLength()<1/0},y.prototype.next=function(O){O||(O=1/0);var m=this.ops[this.index];if(m){var c=this.offset,l=T.length(m);if(O>=l-c?(O=l-c,this.index+=1,this.offset=0):this.offset+=O,typeof m.delete=="number")return{delete:O};var a={};return m.attributes&&(a.attributes=m.attributes),typeof m.retain=="number"?a.retain=O:typeof m.insert=="string"?a.insert=m.insert.substr(c,O):a.insert=m.insert,a}else return{retain:1/0}},y.prototype.peek=function(){return this.ops[this.index]},y.prototype.peekLength=function(){return this.ops[this.index]?T.length(this.ops[this.index])-this.offset:1/0},y.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},y.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var O=this.offset,m=this.index,c=this.next(),l=this.ops.slice(this.index);return this.offset=O,this.index=m,[c].concat(l)}else return[]},z.exports=T},function(z,C){var k=function(){function b(g,p){return p!=null&&g instanceof p}var x;try{x=Map}catch{x=function(){}}var T;try{T=Set}catch{T=function(){}}var y;try{y=Promise}catch{y=function(){}}function O(g,p,f,s,u){typeof p=="object"&&(f=p.depth,s=p.prototype,u=p.includeNonEnumerable,p=p.circular);var o=[],v=[],A=typeof Buffer<"u";typeof p>"u"&&(p=!0),typeof f>"u"&&(f=1/0);function S(P,_){if(P===null)return null;if(_===0)return P;var N,E;if(typeof P!="object")return P;if(b(P,x))N=new x;else if(b(P,T))N=new T;else if(b(P,y))N=new y(function(V,M){P.then(function($){V(S($,_-1))},function($){M(S($,_-1))})});else if(O.__isArray(P))N=[];else if(O.__isRegExp(P))N=new RegExp(P.source,h(P)),P.lastIndex&&(N.lastIndex=P.lastIndex);else if(O.__isDate(P))N=new Date(P.getTime());else{if(A&&Buffer.isBuffer(P))return Buffer.allocUnsafe?N=Buffer.allocUnsafe(P.length):N=new Buffer(P.length),P.copy(N),N;b(P,Error)?N=Object.create(P):typeof s>"u"?(E=Object.getPrototypeOf(P),N=Object.create(E)):(N=Object.create(s),E=s)}if(p){var I=o.indexOf(P);if(I!=-1)return v[I];o.push(P),v.push(N)}b(P,x)&&P.forEach(function(V,M){var $=S(M,_-1),j=S(V,_-1);N.set($,j)}),b(P,T)&&P.forEach(function(V){var M=S(V,_-1);N.add(M)});for(var D in P){var L;E&&(L=Object.getOwnPropertyDescriptor(E,D)),!(L&&L.set==null)&&(N[D]=S(P[D],_-1))}if(Object.getOwnPropertySymbols)for(var B=Object.getOwnPropertySymbols(P),D=0;D<B.length;D++){var J=B[D],W=Object.getOwnPropertyDescriptor(P,J);W&&!W.enumerable&&!u||(N[J]=S(P[J],_-1),W.enumerable||Object.defineProperty(N,J,{enumerable:!1}))}if(u)for(var le=Object.getOwnPropertyNames(P),D=0;D<le.length;D++){var Z=le[D],W=Object.getOwnPropertyDescriptor(P,Z);W&&W.enumerable||(N[Z]=S(P[Z],_-1),Object.defineProperty(N,Z,{enumerable:!1}))}return N}return S(g,f)}O.clonePrototype=function(p){if(p===null)return null;var f=function(){};return f.prototype=p,new f};function m(g){return Object.prototype.toString.call(g)}O.__objToStr=m;function c(g){return typeof g=="object"&&m(g)==="[object Date]"}O.__isDate=c;function l(g){return typeof g=="object"&&m(g)==="[object Array]"}O.__isArray=l;function a(g){return typeof g=="object"&&m(g)==="[object RegExp]"}O.__isRegExp=a;function h(g){var p="";return g.global&&(p+="g"),g.ignoreCase&&(p+="i"),g.multiline&&(p+="m"),p}return O.__getRegExpFlags=h,O}();typeof z=="object"&&z.exports&&(z.exports=k)},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function N(E,I){var D=[],L=!0,B=!1,J=void 0;try{for(var W=E[Symbol.iterator](),le;!(L=(le=W.next()).done)&&(D.push(le.value),!(I&&D.length===I));L=!0);}catch(Z){B=!0,J=Z}finally{try{!L&&W.return&&W.return()}finally{if(B)throw J}}return D}return function(E,I){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return N(E,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function N(E,I){for(var D=0;D<I.length;D++){var L=I[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,I,D){return I&&N(E.prototype,I),D&&N(E,D),E}}(),T=function N(E,I,D){E===null&&(E=Function.prototype);var L=Object.getOwnPropertyDescriptor(E,I);if(L===void 0){var B=Object.getPrototypeOf(E);return B===null?void 0:N(B,I,D)}else{if("value"in L)return L.value;var J=L.get;return J===void 0?void 0:J.call(D)}},y=k(0),O=o(y),m=k(8),c=o(m),l=k(4),a=o(l),h=k(16),g=o(h),p=k(13),f=o(p),s=k(25),u=o(s);function o(N){return N&&N.__esModule?N:{default:N}}function v(N,E){if(!(N instanceof E))throw new TypeError("Cannot call a class as a function")}function A(N,E){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:N}function S(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);N.prototype=Object.create(E&&E.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(N,E):N.__proto__=E)}function P(N){return N instanceof a.default||N instanceof l.BlockEmbed}var _=function(N){S(E,N);function E(I,D){v(this,E);var L=A(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I));return L.emitter=D.emitter,Array.isArray(D.whitelist)&&(L.whitelist=D.whitelist.reduce(function(B,J){return B[J]=!0,B},{})),L.domNode.addEventListener("DOMNodeInserted",function(){}),L.optimize(),L.enable(),L}return x(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(D,L){var B=this.line(D),J=b(B,2),W=J[0],le=J[1],Z=this.line(D+L),V=b(Z,1),M=V[0];if(T(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,D,L),M!=null&&W!==M&&le>0){if(W instanceof l.BlockEmbed||M instanceof l.BlockEmbed){this.optimize();return}if(W instanceof f.default){var $=W.newlineIndex(W.length(),!0);if($>-1&&(W=W.split($+1),W===M)){this.optimize();return}}else if(M instanceof f.default){var j=M.newlineIndex(0);j>-1&&M.split(j+1)}var X=M.children.head instanceof g.default?null:M.children.head;W.moveChildren(M,X),W.remove()}this.optimize()}},{key:"enable",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",D)}},{key:"formatAt",value:function(D,L,B,J){this.whitelist!=null&&!this.whitelist[B]||(T(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,D,L,B,J),this.optimize())}},{key:"insertAt",value:function(D,L,B){if(!(B!=null&&this.whitelist!=null&&!this.whitelist[L])){if(D>=this.length())if(B==null||O.default.query(L,O.default.Scope.BLOCK)==null){var J=O.default.create(this.statics.defaultChild);this.appendChild(J),B==null&&L.endsWith(`
`)&&(L=L.slice(0,-1)),J.insertAt(0,L,B)}else{var W=O.default.create(L,B);this.appendChild(W)}else T(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,D,L,B);this.optimize()}}},{key:"insertBefore",value:function(D,L){if(D.statics.scope===O.default.Scope.INLINE_BLOT){var B=O.default.create(this.statics.defaultChild);B.appendChild(D),D=B}T(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,D,L)}},{key:"leaf",value:function(D){return this.path(D).pop()||[null,-1]}},{key:"line",value:function(D){return D===this.length()?this.line(D-1):this.descendant(P,D)}},{key:"lines",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,B=function J(W,le,Z){var V=[],M=Z;return W.children.forEachAt(le,Z,function($,j,X){P($)?V.push($):$ instanceof O.default.Container&&(V=V.concat(J($,j,M))),M-=X}),V};return B(this,D,L)}},{key:"optimize",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(T(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,D,L),D.length>0&&this.emitter.emit(c.default.events.SCROLL_OPTIMIZE,D,L))}},{key:"path",value:function(D){return T(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,D).slice(1)}},{key:"update",value:function(D){if(this.batch!==!0){var L=c.default.sources.USER;typeof D=="string"&&(L=D),Array.isArray(D)||(D=this.observer.takeRecords()),D.length>0&&this.emitter.emit(c.default.events.SCROLL_BEFORE_UPDATE,L,D),T(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,D.concat([])),D.length>0&&this.emitter.emit(c.default.events.SCROLL_UPDATE,L,D)}}}]),E}(O.default.Scroll);_.blotName="scroll",_.className="ql-editor",_.tagName="DIV",_.defaultChild="block",_.allowedChildren=[a.default,l.BlockEmbed,u.default],C.default=_},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.SHORTKEY=C.default=void 0;var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},x=function(){function q(Y,ee){var re=[],de=!0,be=!1,Ee=void 0;try{for(var xe=Y[Symbol.iterator](),Ie;!(de=(Ie=xe.next()).done)&&(re.push(Ie.value),!(ee&&re.length===ee));de=!0);}catch(H){be=!0,Ee=H}finally{try{!de&&xe.return&&xe.return()}finally{if(be)throw Ee}}return re}return function(Y,ee){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return q(Y,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T=function(){function q(Y,ee){for(var re=0;re<ee.length;re++){var de=ee[re];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(Y,de.key,de)}}return function(Y,ee,re){return ee&&q(Y.prototype,ee),re&&q(Y,re),Y}}(),y=k(21),O=N(y),m=k(11),c=N(m),l=k(3),a=N(l),h=k(2),g=N(h),p=k(20),f=N(p),s=k(0),u=N(s),o=k(5),v=N(o),A=k(10),S=N(A),P=k(9),_=N(P);function N(q){return q&&q.__esModule?q:{default:q}}function E(q,Y,ee){return Y in q?Object.defineProperty(q,Y,{value:ee,enumerable:!0,configurable:!0,writable:!0}):q[Y]=ee,q}function I(q,Y){if(!(q instanceof Y))throw new TypeError("Cannot call a class as a function")}function D(q,Y){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:q}function L(q,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);q.prototype=Object.create(Y&&Y.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(q,Y):q.__proto__=Y)}var B=(0,S.default)("quill:keyboard"),J=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",W=function(q){L(Y,q),T(Y,null,[{key:"match",value:function(re,de){return de=G(de),["altKey","ctrlKey","metaKey","shiftKey"].some(function(be){return!!de[be]!==re[be]&&de[be]!==null})?!1:de.key===(re.which||re.keyCode)}}]);function Y(ee,re){I(this,Y);var de=D(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,ee,re));return de.bindings={},Object.keys(de.options.bindings).forEach(function(be){be==="list autofill"&&ee.scroll.whitelist!=null&&!ee.scroll.whitelist.list||de.options.bindings[be]&&de.addBinding(de.options.bindings[be])}),de.addBinding({key:Y.keys.ENTER,shiftKey:null},$),de.addBinding({key:Y.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(de.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0},Z),de.addBinding({key:Y.keys.DELETE},{collapsed:!0},V)):(de.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Z),de.addBinding({key:Y.keys.DELETE},{collapsed:!0,suffix:/^.?$/},V)),de.addBinding({key:Y.keys.BACKSPACE},{collapsed:!1},M),de.addBinding({key:Y.keys.DELETE},{collapsed:!1},M),de.addBinding({key:Y.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Z),de.listen(),de}return T(Y,[{key:"addBinding",value:function(re){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ee=G(re);if(Ee==null||Ee.key==null)return B.warn("Attempted to add invalid keyboard binding",Ee);typeof de=="function"&&(de={handler:de}),typeof be=="function"&&(be={handler:be}),Ee=(0,a.default)(Ee,de,be),this.bindings[Ee.key]=this.bindings[Ee.key]||[],this.bindings[Ee.key].push(Ee)}},{key:"listen",value:function(){var re=this;this.quill.root.addEventListener("keydown",function(de){if(!de.defaultPrevented){var be=de.which||de.keyCode,Ee=(re.bindings[be]||[]).filter(function(ye){return Y.match(de,ye)});if(Ee.length!==0){var xe=re.quill.getSelection();if(!(xe==null||!re.quill.hasFocus())){var Ie=re.quill.getLine(xe.index),H=x(Ie,2),se=H[0],oe=H[1],K=re.quill.getLeaf(xe.index),te=x(K,2),pe=te[0],ve=te[1],he=xe.length===0?[pe,ve]:re.quill.getLeaf(xe.index+xe.length),Se=x(he,2),ke=Se[0],Be=Se[1],et=pe instanceof u.default.Text?pe.value().slice(0,ve):"",Ke=ke instanceof u.default.Text?ke.value().slice(Be):"",Fe={collapsed:xe.length===0,empty:xe.length===0&&se.length()<=1,format:re.quill.getFormat(xe),offset:oe,prefix:et,suffix:Ke},Je=Ee.some(function(ye){if(ye.collapsed!=null&&ye.collapsed!==Fe.collapsed||ye.empty!=null&&ye.empty!==Fe.empty||ye.offset!=null&&ye.offset!==Fe.offset)return!1;if(Array.isArray(ye.format)){if(ye.format.every(function(Ge){return Fe.format[Ge]==null}))return!1}else if(b(ye.format)==="object"&&!Object.keys(ye.format).every(function(Ge){return ye.format[Ge]===!0?Fe.format[Ge]!=null:ye.format[Ge]===!1?Fe.format[Ge]==null:(0,c.default)(ye.format[Ge],Fe.format[Ge])}))return!1;return ye.prefix!=null&&!ye.prefix.test(Fe.prefix)||ye.suffix!=null&&!ye.suffix.test(Fe.suffix)?!1:ye.handler.call(re,xe,Fe)!==!0});Je&&de.preventDefault()}}}})}}]),Y}(_.default);W.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},W.DEFAULTS={bindings:{bold:X("bold"),italic:X("italic"),underline:X("underline"),indent:{key:W.keys.TAB,format:["blockquote","indent","list"],handler:function(Y,ee){if(ee.collapsed&&ee.offset!==0)return!0;this.quill.format("indent","+1",v.default.sources.USER)}},outdent:{key:W.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Y,ee){if(ee.collapsed&&ee.offset!==0)return!0;this.quill.format("indent","-1",v.default.sources.USER)}},"outdent backspace":{key:W.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Y,ee){ee.format.indent!=null?this.quill.format("indent","-1",v.default.sources.USER):ee.format.list!=null&&this.quill.format("list",!1,v.default.sources.USER)}},"indent code-block":j(!0),"outdent code-block":j(!1),"remove tab":{key:W.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Y){this.quill.deleteText(Y.index-1,1,v.default.sources.USER)}},tab:{key:W.keys.TAB,handler:function(Y){this.quill.history.cutoff();var ee=new g.default().retain(Y.index).delete(Y.length).insert("	");this.quill.updateContents(ee,v.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index+1,v.default.sources.SILENT)}},"list empty enter":{key:W.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Y,ee){this.quill.format("list",!1,v.default.sources.USER),ee.format.indent&&this.quill.format("indent",!1,v.default.sources.USER)}},"checklist enter":{key:W.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Y){var ee=this.quill.getLine(Y.index),re=x(ee,2),de=re[0],be=re[1],Ee=(0,a.default)({},de.formats(),{list:"checked"}),xe=new g.default().retain(Y.index).insert(`
`,Ee).retain(de.length()-be-1).retain(1,{list:"unchecked"});this.quill.updateContents(xe,v.default.sources.USER),this.quill.setSelection(Y.index+1,v.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:W.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Y,ee){var re=this.quill.getLine(Y.index),de=x(re,2),be=de[0],Ee=de[1],xe=new g.default().retain(Y.index).insert(`
`,ee.format).retain(be.length()-Ee-1).retain(1,{header:null});this.quill.updateContents(xe,v.default.sources.USER),this.quill.setSelection(Y.index+1,v.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Y,ee){var re=ee.prefix.length,de=this.quill.getLine(Y.index),be=x(de,2),Ee=be[0],xe=be[1];if(xe>re)return!0;var Ie=void 0;switch(ee.prefix.trim()){case"[]":case"[ ]":Ie="unchecked";break;case"[x]":Ie="checked";break;case"-":case"*":Ie="bullet";break;default:Ie="ordered"}this.quill.insertText(Y.index," ",v.default.sources.USER),this.quill.history.cutoff();var H=new g.default().retain(Y.index-xe).delete(re+1).retain(Ee.length()-2-xe).retain(1,{list:Ie});this.quill.updateContents(H,v.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index-re,v.default.sources.SILENT)}},"code exit":{key:W.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Y){var ee=this.quill.getLine(Y.index),re=x(ee,2),de=re[0],be=re[1],Ee=new g.default().retain(Y.index+de.length()-be-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ee,v.default.sources.USER)}},"embed left":le(W.keys.LEFT,!1),"embed left shift":le(W.keys.LEFT,!0),"embed right":le(W.keys.RIGHT,!1),"embed right shift":le(W.keys.RIGHT,!0)}};function le(q,Y){var ee,re=q===W.keys.LEFT?"prefix":"suffix";return ee={key:q,shiftKey:Y,altKey:null},E(ee,re,/^$/),E(ee,"handler",function(be){var Ee=be.index;q===W.keys.RIGHT&&(Ee+=be.length+1);var xe=this.quill.getLeaf(Ee),Ie=x(xe,1),H=Ie[0];return H instanceof u.default.Embed?(q===W.keys.LEFT?Y?this.quill.setSelection(be.index-1,be.length+1,v.default.sources.USER):this.quill.setSelection(be.index-1,v.default.sources.USER):Y?this.quill.setSelection(be.index,be.length+1,v.default.sources.USER):this.quill.setSelection(be.index+be.length+1,v.default.sources.USER),!1):!0}),ee}function Z(q,Y){if(!(q.index===0||this.quill.getLength()<=1)){var ee=this.quill.getLine(q.index),re=x(ee,1),de=re[0],be={};if(Y.offset===0){var Ee=this.quill.getLine(q.index-1),xe=x(Ee,1),Ie=xe[0];if(Ie!=null&&Ie.length()>1){var H=de.formats(),se=this.quill.getFormat(q.index-1,1);be=f.default.attributes.diff(H,se)||{}}}var oe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Y.prefix)?2:1;this.quill.deleteText(q.index-oe,oe,v.default.sources.USER),Object.keys(be).length>0&&this.quill.formatLine(q.index-oe,oe,be,v.default.sources.USER),this.quill.focus()}}function V(q,Y){var ee=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Y.suffix)?2:1;if(!(q.index>=this.quill.getLength()-ee)){var re={},de=0,be=this.quill.getLine(q.index),Ee=x(be,1),xe=Ee[0];if(Y.offset>=xe.length()-1){var Ie=this.quill.getLine(q.index+1),H=x(Ie,1),se=H[0];if(se){var oe=xe.formats(),K=this.quill.getFormat(q.index,1);re=f.default.attributes.diff(oe,K)||{},de=se.length()}}this.quill.deleteText(q.index,ee,v.default.sources.USER),Object.keys(re).length>0&&this.quill.formatLine(q.index+de-1,ee,re,v.default.sources.USER)}}function M(q){var Y=this.quill.getLines(q),ee={};if(Y.length>1){var re=Y[0].formats(),de=Y[Y.length-1].formats();ee=f.default.attributes.diff(de,re)||{}}this.quill.deleteText(q,v.default.sources.USER),Object.keys(ee).length>0&&this.quill.formatLine(q.index,1,ee,v.default.sources.USER),this.quill.setSelection(q.index,v.default.sources.SILENT),this.quill.focus()}function $(q,Y){var ee=this;q.length>0&&this.quill.scroll.deleteAt(q.index,q.length);var re=Object.keys(Y.format).reduce(function(de,be){return u.default.query(be,u.default.Scope.BLOCK)&&!Array.isArray(Y.format[be])&&(de[be]=Y.format[be]),de},{});this.quill.insertText(q.index,`
`,re,v.default.sources.USER),this.quill.setSelection(q.index+1,v.default.sources.SILENT),this.quill.focus(),Object.keys(Y.format).forEach(function(de){re[de]==null&&(Array.isArray(Y.format[de])||de!=="link"&&ee.quill.format(de,Y.format[de],v.default.sources.USER))})}function j(q){return{key:W.keys.TAB,shiftKey:!q,format:{"code-block":!0},handler:function(ee){var re=u.default.query("code-block"),de=ee.index,be=ee.length,Ee=this.quill.scroll.descendant(re,de),xe=x(Ee,2),Ie=xe[0],H=xe[1];if(Ie!=null){var se=this.quill.getIndex(Ie),oe=Ie.newlineIndex(H,!0)+1,K=Ie.newlineIndex(se+H+be),te=Ie.domNode.textContent.slice(oe,K).split(`
`);H=0,te.forEach(function(pe,ve){q?(Ie.insertAt(oe+H,re.TAB),H+=re.TAB.length,ve===0?de+=re.TAB.length:be+=re.TAB.length):pe.startsWith(re.TAB)&&(Ie.deleteAt(oe+H,re.TAB.length),H-=re.TAB.length,ve===0?de-=re.TAB.length:be-=re.TAB.length),H+=pe.length+1}),this.quill.update(v.default.sources.USER),this.quill.setSelection(de,be,v.default.sources.SILENT)}}}}function X(q){return{key:q[0].toUpperCase(),shortKey:!0,handler:function(ee,re){this.quill.format(q,!re.format[q],v.default.sources.USER)}}}function G(q){if(typeof q=="string"||typeof q=="number")return G({key:q});if((typeof q>"u"?"undefined":b(q))==="object"&&(q=(0,O.default)(q,!1)),typeof q.key=="string")if(W.keys[q.key.toUpperCase()]!=null)q.key=W.keys[q.key.toUpperCase()];else if(q.key.length===1)q.key=q.key.toUpperCase().charCodeAt(0);else return null;return q.shortKey&&(q[J]=q.shortKey,delete q.shortKey),q}C.default=W,C.SHORTKEY=J},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function f(s,u){var o=[],v=!0,A=!1,S=void 0;try{for(var P=s[Symbol.iterator](),_;!(v=(_=P.next()).done)&&(o.push(_.value),!(u&&o.length===u));v=!0);}catch(N){A=!0,S=N}finally{try{!v&&P.return&&P.return()}finally{if(A)throw S}}return o}return function(s,u){if(Array.isArray(s))return s;if(Symbol.iterator in Object(s))return f(s,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function f(s,u,o){s===null&&(s=Function.prototype);var v=Object.getOwnPropertyDescriptor(s,u);if(v===void 0){var A=Object.getPrototypeOf(s);return A===null?void 0:f(A,u,o)}else{if("value"in v)return v.value;var S=v.get;return S===void 0?void 0:S.call(o)}},T=function(){function f(s,u){for(var o=0;o<u.length;o++){var v=u[o];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}return function(s,u,o){return u&&f(s.prototype,u),o&&f(s,o),s}}(),y=k(0),O=l(y),m=k(7),c=l(m);function l(f){return f&&f.__esModule?f:{default:f}}function a(f,s){if(!(f instanceof s))throw new TypeError("Cannot call a class as a function")}function h(f,s){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:f}function g(f,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);f.prototype=Object.create(s&&s.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(f,s):f.__proto__=s)}var p=function(f){g(s,f),T(s,null,[{key:"value",value:function(){}}]);function s(u,o){a(this,s);var v=h(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,u));return v.selection=o,v.textNode=document.createTextNode(s.CONTENTS),v.domNode.appendChild(v.textNode),v._length=0,v}return T(s,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(o,v){if(this._length!==0)return x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"format",this).call(this,o,v);for(var A=this,S=0;A!=null&&A.statics.scope!==O.default.Scope.BLOCK_BLOT;)S+=A.offset(A.parent),A=A.parent;A!=null&&(this._length=s.CONTENTS.length,A.optimize(),A.formatAt(S,s.CONTENTS.length,o,v),this._length=0)}},{key:"index",value:function(o,v){return o===this.textNode?0:x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"index",this).call(this,o,v)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var o=this.textNode,v=this.selection.getNativeRange(),A=void 0,S=void 0,P=void 0;if(v!=null&&v.start.node===o&&v.end.node===o){var _=[o,v.start.offset,v.end.offset];A=_[0],S=_[1],P=_[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==s.CONTENTS){var N=this.textNode.data.split(s.CONTENTS).join("");this.next instanceof c.default?(A=this.next.domNode,this.next.insertAt(0,N),this.textNode.data=s.CONTENTS):(this.textNode.data=N,this.parent.insertBefore(O.default.create(this.textNode),this),this.textNode=document.createTextNode(s.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var E=[S,P].map(function(D){return Math.max(0,Math.min(A.data.length,D-1))}),I=b(E,2);return S=I[0],P=I[1],{startNode:A,startOffset:S,endNode:A,endOffset:P}}}}},{key:"update",value:function(o,v){var A=this;if(o.some(function(P){return P.type==="characterData"&&P.target===A.textNode})){var S=this.restore();S&&(v.range=S)}}},{key:"value",value:function(){return""}}]),s}(O.default.Embed);p.blotName="cursor",p.className="ql-cursor",p.tagName="span",p.CONTENTS="\uFEFF",C.default=p},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(0),x=O(b),T=k(4),y=O(T);function O(h){return h&&h.__esModule?h:{default:h}}function m(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function c(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function l(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var a=function(h){l(g,h);function g(){return m(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(x.default.Container);a.allowedChildren=[y.default,T.BlockEmbed,a],C.default=a},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.ColorStyle=C.ColorClass=C.ColorAttributor=void 0;var b=function(){function p(f,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}return function(f,s,u){return s&&p(f.prototype,s),u&&p(f,u),f}}(),x=function p(f,s,u){f===null&&(f=Function.prototype);var o=Object.getOwnPropertyDescriptor(f,s);if(o===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:p(v,s,u)}else{if("value"in o)return o.value;var A=o.get;return A===void 0?void 0:A.call(u)}},T=k(0),y=O(T);function O(p){return p&&p.__esModule?p:{default:p}}function m(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}function c(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:p}function l(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);p.prototype=Object.create(f&&f.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(p,f):p.__proto__=f)}var a=function(p){l(f,p);function f(){return m(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return b(f,[{key:"value",value:function(u){var o=x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",this).call(this,u);return o.startsWith("rgb(")?(o=o.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+o.split(",").map(function(v){return("00"+parseInt(v).toString(16)).slice(-2)}).join("")):o}}]),f}(y.default.Attributor.Style),h=new y.default.Attributor.Class("color","ql-color",{scope:y.default.Scope.INLINE}),g=new a("color","color",{scope:y.default.Scope.INLINE});C.ColorAttributor=a,C.ColorClass=h,C.ColorStyle=g},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.sanitize=C.default=void 0;var b=function(){function g(p,f){for(var s=0;s<f.length;s++){var u=f[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}return function(p,f,s){return f&&g(p.prototype,f),s&&g(p,s),p}}(),x=function g(p,f,s){p===null&&(p=Function.prototype);var u=Object.getOwnPropertyDescriptor(p,f);if(u===void 0){var o=Object.getPrototypeOf(p);return o===null?void 0:g(o,f,s)}else{if("value"in u)return u.value;var v=u.get;return v===void 0?void 0:v.call(s)}},T=k(6),y=O(T);function O(g){return g&&g.__esModule?g:{default:g}}function m(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function c(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function l(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var a=function(g){l(p,g);function p(){return m(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return b(p,[{key:"format",value:function(s,u){if(s!==this.statics.blotName||!u)return x(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,s,u);u=this.constructor.sanitize(u),this.domNode.setAttribute("href",u)}}],[{key:"create",value:function(s){var u=x(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,s);return s=this.sanitize(s),u.setAttribute("href",s),u.setAttribute("rel","noopener noreferrer"),u.setAttribute("target","_blank"),u}},{key:"formats",value:function(s){return s.getAttribute("href")}},{key:"sanitize",value:function(s){return h(s,this.PROTOCOL_WHITELIST)?s:this.SANITIZED_URL}}]),p}(y.default);a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function h(g,p){var f=document.createElement("a");f.href=g;var s=f.href.slice(0,f.href.indexOf(":"));return p.indexOf(s)>-1}C.default=a,C.sanitize=h},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},x=function(){function p(f,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}return function(f,s,u){return s&&p(f.prototype,s),u&&p(f,u),f}}(),T=k(23),y=c(T),O=k(107),m=c(O);function c(p){return p&&p.__esModule?p:{default:p}}function l(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}var a=0;function h(p,f){p.setAttribute(f,p.getAttribute(f)!=="true")}var g=function(){function p(f){var s=this;l(this,p),this.select=f,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){s.togglePicker()}),this.label.addEventListener("keydown",function(u){switch(u.keyCode){case y.default.keys.ENTER:s.togglePicker();break;case y.default.keys.ESCAPE:s.escape(),u.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return x(p,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),h(this.label,"aria-expanded"),h(this.options,"aria-hidden")}},{key:"buildItem",value:function(s){var u=this,o=document.createElement("span");return o.tabIndex="0",o.setAttribute("role","button"),o.classList.add("ql-picker-item"),s.hasAttribute("value")&&o.setAttribute("data-value",s.getAttribute("value")),s.textContent&&o.setAttribute("data-label",s.textContent),o.addEventListener("click",function(){u.selectItem(o,!0)}),o.addEventListener("keydown",function(v){switch(v.keyCode){case y.default.keys.ENTER:u.selectItem(o,!0),v.preventDefault();break;case y.default.keys.ESCAPE:u.escape(),v.preventDefault();break}}),o}},{key:"buildLabel",value:function(){var s=document.createElement("span");return s.classList.add("ql-picker-label"),s.innerHTML=m.default,s.tabIndex="0",s.setAttribute("role","button"),s.setAttribute("aria-expanded","false"),this.container.appendChild(s),s}},{key:"buildOptions",value:function(){var s=this,u=document.createElement("span");u.classList.add("ql-picker-options"),u.setAttribute("aria-hidden","true"),u.tabIndex="-1",u.id="ql-picker-options-"+a,a+=1,this.label.setAttribute("aria-controls",u.id),this.options=u,[].slice.call(this.select.options).forEach(function(o){var v=s.buildItem(o);u.appendChild(v),o.selected===!0&&s.selectItem(v)}),this.container.appendChild(u)}},{key:"buildPicker",value:function(){var s=this;[].slice.call(this.select.attributes).forEach(function(u){s.container.setAttribute(u.name,u.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var s=this;this.close(),setTimeout(function(){return s.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=this.container.querySelector(".ql-selected");if(s!==o&&(o!=null&&o.classList.remove("ql-selected"),s!=null&&(s.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(s.parentNode.children,s),s.hasAttribute("data-value")?this.label.setAttribute("data-value",s.getAttribute("data-value")):this.label.removeAttribute("data-value"),s.hasAttribute("data-label")?this.label.setAttribute("data-label",s.getAttribute("data-label")):this.label.removeAttribute("data-label"),u))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":b(Event))==="object"){var v=document.createEvent("Event");v.initEvent("change",!0,!0),this.select.dispatchEvent(v)}this.close()}}},{key:"update",value:function(){var s=void 0;if(this.select.selectedIndex>-1){var u=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];s=this.select.options[this.select.selectedIndex],this.selectItem(u)}else this.selectItem(null);var o=s!=null&&s!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",o)}}]),p}();C.default=g},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(0),x=B(b),T=k(5),y=B(T),O=k(4),m=B(O),c=k(16),l=B(c),a=k(25),h=B(a),g=k(24),p=B(g),f=k(35),s=B(f),u=k(6),o=B(u),v=k(22),A=B(v),S=k(7),P=B(S),_=k(55),N=B(_),E=k(42),I=B(E),D=k(23),L=B(D);function B(J){return J&&J.__esModule?J:{default:J}}y.default.register({"blots/block":m.default,"blots/block/embed":O.BlockEmbed,"blots/break":l.default,"blots/container":h.default,"blots/cursor":p.default,"blots/embed":s.default,"blots/inline":o.default,"blots/scroll":A.default,"blots/text":P.default,"modules/clipboard":N.default,"modules/history":I.default,"modules/keyboard":L.default}),x.default.register(m.default,l.default,p.default,o.default,A.default,P.default),C.default=y.default},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(1),x=function(){function T(y){this.domNode=y,this.domNode[b.DATA_KEY]={blot:this}}return Object.defineProperty(T.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),T.create=function(y){if(this.tagName==null)throw new b.ParchmentError("Blot definition missing tagName");var O;return Array.isArray(this.tagName)?(typeof y=="string"&&(y=y.toUpperCase(),parseInt(y).toString()===y&&(y=parseInt(y))),typeof y=="number"?O=document.createElement(this.tagName[y-1]):this.tagName.indexOf(y)>-1?O=document.createElement(y):O=document.createElement(this.tagName[0])):O=document.createElement(this.tagName),this.className&&O.classList.add(this.className),O},T.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},T.prototype.clone=function(){var y=this.domNode.cloneNode(!1);return b.create(y)},T.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[b.DATA_KEY]},T.prototype.deleteAt=function(y,O){var m=this.isolate(y,O);m.remove()},T.prototype.formatAt=function(y,O,m,c){var l=this.isolate(y,O);if(b.query(m,b.Scope.BLOT)!=null&&c)l.wrap(m,c);else if(b.query(m,b.Scope.ATTRIBUTE)!=null){var a=b.create(this.statics.scope);l.wrap(a),a.format(m,c)}},T.prototype.insertAt=function(y,O,m){var c=m==null?b.create("text",O):b.create(O,m),l=this.split(y);this.parent.insertBefore(c,l)},T.prototype.insertInto=function(y,O){O===void 0&&(O=null),this.parent!=null&&this.parent.children.remove(this);var m=null;y.children.insertBefore(this,O),O!=null&&(m=O.domNode),(this.domNode.parentNode!=y.domNode||this.domNode.nextSibling!=m)&&y.domNode.insertBefore(this.domNode,m),this.parent=y,this.attach()},T.prototype.isolate=function(y,O){var m=this.split(y);return m.split(O),m},T.prototype.length=function(){return 1},T.prototype.offset=function(y){return y===void 0&&(y=this.parent),this.parent==null||this==y?0:this.parent.children.offset(this)+this.parent.offset(y)},T.prototype.optimize=function(y){this.domNode[b.DATA_KEY]!=null&&delete this.domNode[b.DATA_KEY].mutations},T.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},T.prototype.replace=function(y){y.parent!=null&&(y.parent.insertBefore(this,y.next),y.remove())},T.prototype.replaceWith=function(y,O){var m=typeof y=="string"?b.create(y,O):y;return m.replace(this),m},T.prototype.split=function(y,O){return y===0?this:this.next},T.prototype.update=function(y,O){},T.prototype.wrap=function(y,O){var m=typeof y=="string"?b.create(y,O):y;return this.parent!=null&&this.parent.insertBefore(m,this.next),m.appendChild(this),m},T.blotName="abstract",T}();C.default=x},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(12),x=k(32),T=k(33),y=k(1),O=function(){function m(c){this.attributes={},this.domNode=c,this.build()}return m.prototype.attribute=function(c,l){l?c.add(this.domNode,l)&&(c.value(this.domNode)!=null?this.attributes[c.attrName]=c:delete this.attributes[c.attrName]):(c.remove(this.domNode),delete this.attributes[c.attrName])},m.prototype.build=function(){var c=this;this.attributes={};var l=b.default.keys(this.domNode),a=x.default.keys(this.domNode),h=T.default.keys(this.domNode);l.concat(a).concat(h).forEach(function(g){var p=y.query(g,y.Scope.ATTRIBUTE);p instanceof b.default&&(c.attributes[p.attrName]=p)})},m.prototype.copy=function(c){var l=this;Object.keys(this.attributes).forEach(function(a){var h=l.attributes[a].value(l.domNode);c.format(a,h)})},m.prototype.move=function(c){var l=this;this.copy(c),Object.keys(this.attributes).forEach(function(a){l.attributes[a].remove(l.domNode)}),this.attributes={}},m.prototype.values=function(){var c=this;return Object.keys(this.attributes).reduce(function(l,a){return l[a]=c.attributes[a].value(c.domNode),l},{})},m}();C.default=O},function(z,C,k){var b=this&&this.__extends||function(){var O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,c){m.__proto__=c}||function(m,c){for(var l in c)c.hasOwnProperty(l)&&(m[l]=c[l])};return function(m,c){O(m,c);function l(){this.constructor=m}m.prototype=c===null?Object.create(c):(l.prototype=c.prototype,new l)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(12);function T(O,m){var c=O.getAttribute("class")||"";return c.split(/\s+/).filter(function(l){return l.indexOf(m+"-")===0})}var y=function(O){b(m,O);function m(){return O!==null&&O.apply(this,arguments)||this}return m.keys=function(c){return(c.getAttribute("class")||"").split(/\s+/).map(function(l){return l.split("-").slice(0,-1).join("-")})},m.prototype.add=function(c,l){return this.canAdd(c,l)?(this.remove(c),c.classList.add(this.keyName+"-"+l),!0):!1},m.prototype.remove=function(c){var l=T(c,this.keyName);l.forEach(function(a){c.classList.remove(a)}),c.classList.length===0&&c.removeAttribute("class")},m.prototype.value=function(c){var l=T(c,this.keyName)[0]||"",a=l.slice(this.keyName.length+1);return this.canAdd(c,a)?a:""},m}(x.default);C.default=y},function(z,C,k){var b=this&&this.__extends||function(){var O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,c){m.__proto__=c}||function(m,c){for(var l in c)c.hasOwnProperty(l)&&(m[l]=c[l])};return function(m,c){O(m,c);function l(){this.constructor=m}m.prototype=c===null?Object.create(c):(l.prototype=c.prototype,new l)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(12);function T(O){var m=O.split("-"),c=m.slice(1).map(function(l){return l[0].toUpperCase()+l.slice(1)}).join("");return m[0]+c}var y=function(O){b(m,O);function m(){return O!==null&&O.apply(this,arguments)||this}return m.keys=function(c){return(c.getAttribute("style")||"").split(";").map(function(l){var a=l.split(":");return a[0].trim()})},m.prototype.add=function(c,l){return this.canAdd(c,l)?(c.style[T(this.keyName)]=l,!0):!1},m.prototype.remove=function(c){c.style[T(this.keyName)]="",c.getAttribute("style")||c.removeAttribute("style")},m.prototype.value=function(c){var l=c.style[T(this.keyName)];return this.canAdd(c,l)?l:""},m}(x.default);C.default=y},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function y(O,m){for(var c=0;c<m.length;c++){var l=m[c];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(O,l.key,l)}}return function(O,m,c){return m&&y(O.prototype,m),c&&y(O,c),O}}();function x(y,O){if(!(y instanceof O))throw new TypeError("Cannot call a class as a function")}var T=function(){function y(O,m){x(this,y),this.quill=O,this.options=m,this.modules={}}return b(y,[{key:"init",value:function(){var m=this;Object.keys(this.options.modules).forEach(function(c){m.modules[c]==null&&m.addModule(c)})}},{key:"addModule",value:function(m){var c=this.quill.constructor.import("modules/"+m);return this.modules[m]=new c(this.quill,this.options.modules[m]||{}),this.modules[m]}}]),y}();T.DEFAULTS={modules:{}},T.themes={default:T},C.default=T},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function f(s,u){for(var o=0;o<u.length;o++){var v=u[o];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}return function(s,u,o){return u&&f(s.prototype,u),o&&f(s,o),s}}(),x=function f(s,u,o){s===null&&(s=Function.prototype);var v=Object.getOwnPropertyDescriptor(s,u);if(v===void 0){var A=Object.getPrototypeOf(s);return A===null?void 0:f(A,u,o)}else{if("value"in v)return v.value;var S=v.get;return S===void 0?void 0:S.call(o)}},T=k(0),y=c(T),O=k(7),m=c(O);function c(f){return f&&f.__esModule?f:{default:f}}function l(f,s){if(!(f instanceof s))throw new TypeError("Cannot call a class as a function")}function a(f,s){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:f}function h(f,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);f.prototype=Object.create(s&&s.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(f,s):f.__proto__=s)}var g="\uFEFF",p=function(f){h(s,f);function s(u){l(this,s);var o=a(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,u));return o.contentNode=document.createElement("span"),o.contentNode.setAttribute("contenteditable",!1),[].slice.call(o.domNode.childNodes).forEach(function(v){o.contentNode.appendChild(v)}),o.leftGuard=document.createTextNode(g),o.rightGuard=document.createTextNode(g),o.domNode.appendChild(o.leftGuard),o.domNode.appendChild(o.contentNode),o.domNode.appendChild(o.rightGuard),o}return b(s,[{key:"index",value:function(o,v){return o===this.leftGuard?0:o===this.rightGuard?1:x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"index",this).call(this,o,v)}},{key:"restore",value:function(o){var v=void 0,A=void 0,S=o.data.split(g).join("");if(o===this.leftGuard)if(this.prev instanceof m.default){var P=this.prev.length();this.prev.insertAt(P,S),v={startNode:this.prev.domNode,startOffset:P+S.length}}else A=document.createTextNode(S),this.parent.insertBefore(y.default.create(A),this),v={startNode:A,startOffset:S.length};else o===this.rightGuard&&(this.next instanceof m.default?(this.next.insertAt(0,S),v={startNode:this.next.domNode,startOffset:S.length}):(A=document.createTextNode(S),this.parent.insertBefore(y.default.create(A),this.next),v={startNode:A,startOffset:S.length}));return o.data=g,v}},{key:"update",value:function(o,v){var A=this;o.forEach(function(S){if(S.type==="characterData"&&(S.target===A.leftGuard||S.target===A.rightGuard)){var P=A.restore(S.target);P&&(v.range=P)}})}}]),s}(y.default.Embed);C.default=p},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.AlignStyle=C.AlignClass=C.AlignAttribute=void 0;var b=k(0),x=T(b);function T(l){return l&&l.__esModule?l:{default:l}}var y={scope:x.default.Scope.BLOCK,whitelist:["right","center","justify"]},O=new x.default.Attributor.Attribute("align","align",y),m=new x.default.Attributor.Class("align","ql-align",y),c=new x.default.Attributor.Style("align","text-align",y);C.AlignAttribute=O,C.AlignClass=m,C.AlignStyle=c},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.BackgroundStyle=C.BackgroundClass=void 0;var b=k(0),x=y(b),T=k(26);function y(c){return c&&c.__esModule?c:{default:c}}var O=new x.default.Attributor.Class("background","ql-bg",{scope:x.default.Scope.INLINE}),m=new T.ColorAttributor("background","background-color",{scope:x.default.Scope.INLINE});C.BackgroundClass=O,C.BackgroundStyle=m},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.DirectionStyle=C.DirectionClass=C.DirectionAttribute=void 0;var b=k(0),x=T(b);function T(l){return l&&l.__esModule?l:{default:l}}var y={scope:x.default.Scope.BLOCK,whitelist:["rtl"]},O=new x.default.Attributor.Attribute("direction","dir",y),m=new x.default.Attributor.Class("direction","ql-direction",y),c=new x.default.Attributor.Style("direction","direction",y);C.DirectionAttribute=O,C.DirectionClass=m,C.DirectionStyle=c},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.FontClass=C.FontStyle=void 0;var b=function(){function f(s,u){for(var o=0;o<u.length;o++){var v=u[o];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}return function(s,u,o){return u&&f(s.prototype,u),o&&f(s,o),s}}(),x=function f(s,u,o){s===null&&(s=Function.prototype);var v=Object.getOwnPropertyDescriptor(s,u);if(v===void 0){var A=Object.getPrototypeOf(s);return A===null?void 0:f(A,u,o)}else{if("value"in v)return v.value;var S=v.get;return S===void 0?void 0:S.call(o)}},T=k(0),y=O(T);function O(f){return f&&f.__esModule?f:{default:f}}function m(f,s){if(!(f instanceof s))throw new TypeError("Cannot call a class as a function")}function c(f,s){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:f}function l(f,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);f.prototype=Object.create(s&&s.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(f,s):f.__proto__=s)}var a={scope:y.default.Scope.INLINE,whitelist:["serif","monospace"]},h=new y.default.Attributor.Class("font","ql-font",a),g=function(f){l(s,f);function s(){return m(this,s),c(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return b(s,[{key:"value",value:function(o){return x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"value",this).call(this,o).replace(/["']/g,"")}}]),s}(y.default.Attributor.Style),p=new g("font","font-family",a);C.FontStyle=p,C.FontClass=h},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.SizeStyle=C.SizeClass=void 0;var b=k(0),x=T(b);function T(m){return m&&m.__esModule?m:{default:m}}var y=new x.default.Attributor.Class("size","ql-size",{scope:x.default.Scope.INLINE,whitelist:["small","large","huge"]}),O=new x.default.Attributor.Style("size","font-size",{scope:x.default.Scope.INLINE,whitelist:["10px","18px","32px"]});C.SizeClass=y,C.SizeStyle=O},function(z,C,k){z.exports={align:{"":k(76),center:k(77),right:k(78),justify:k(79)},background:k(80),blockquote:k(81),bold:k(82),clean:k(83),code:k(58),"code-block":k(58),color:k(84),direction:{"":k(85),rtl:k(86)},float:{center:k(87),full:k(88),left:k(89),right:k(90)},formula:k(91),header:{1:k(92),2:k(93)},italic:k(94),image:k(95),indent:{"+1":k(96),"-1":k(97)},link:k(98),list:{ordered:k(99),bullet:k(100),check:k(101)},script:{sub:k(102),super:k(103)},strike:k(104),underline:k(105),video:k(106)}},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.getLastChangeIndex=C.default=void 0;var b=function(){function u(o,v){for(var A=0;A<v.length;A++){var S=v[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(o,S.key,S)}}return function(o,v,A){return v&&u(o.prototype,v),A&&u(o,A),o}}(),x=k(0),T=l(x),y=k(5),O=l(y),m=k(9),c=l(m);function l(u){return u&&u.__esModule?u:{default:u}}function a(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function h(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function g(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var p=function(u){g(o,u);function o(v,A){a(this,o);var S=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,v,A));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(O.default.events.EDITOR_CHANGE,function(P,_,N,E){P!==O.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||E===O.default.sources.USER?S.record(_,N):S.transform(_))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return b(o,[{key:"change",value:function(A,S){if(this.stack[A].length!==0){var P=this.stack[A].pop();this.stack[S].push(P),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(P[A],O.default.sources.USER),this.ignoreChange=!1;var _=s(P[A]);this.quill.setSelection(_)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(A,S){if(A.ops.length!==0){this.stack.redo=[];var P=this.quill.getContents().diff(S),_=Date.now();if(this.lastRecorded+this.options.delay>_&&this.stack.undo.length>0){var N=this.stack.undo.pop();P=P.compose(N.undo),A=N.redo.compose(A)}else this.lastRecorded=_;this.stack.undo.push({redo:A,undo:P}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(A){this.stack.undo.forEach(function(S){S.undo=A.transform(S.undo,!0),S.redo=A.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=A.transform(S.undo,!0),S.redo=A.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),o}(c.default);p.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function f(u){var o=u.ops[u.ops.length-1];return o==null?!1:o.insert!=null?typeof o.insert=="string"&&o.insert.endsWith(`
`):o.attributes!=null?Object.keys(o.attributes).some(function(v){return T.default.query(v,T.default.Scope.BLOCK)!=null}):!1}function s(u){var o=u.reduce(function(A,S){return A+=S.delete||0,A},0),v=u.length()-o;return f(u)&&(v-=1),v}C.default=p,C.getLastChangeIndex=s},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BaseTooltip=void 0;var b=function(){function $(j,X){for(var G=0;G<X.length;G++){var q=X[G];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(j,q.key,q)}}return function(j,X,G){return X&&$(j.prototype,X),G&&$(j,G),j}}(),x=function $(j,X,G){j===null&&(j=Function.prototype);var q=Object.getOwnPropertyDescriptor(j,X);if(q===void 0){var Y=Object.getPrototypeOf(j);return Y===null?void 0:$(Y,X,G)}else{if("value"in q)return q.value;var ee=q.get;return ee===void 0?void 0:ee.call(G)}},T=k(3),y=_(T),O=k(2),m=_(O),c=k(8),l=_(c),a=k(23),h=_(a),g=k(34),p=_(g),f=k(59),s=_(f),u=k(60),o=_(u),v=k(28),A=_(v),S=k(61),P=_(S);function _($){return $&&$.__esModule?$:{default:$}}function N($,j){if(!($ instanceof j))throw new TypeError("Cannot call a class as a function")}function E($,j){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:$}function I($,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);$.prototype=Object.create(j&&j.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf($,j):$.__proto__=j)}var D=[!1,"center","right","justify"],L=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],B=[!1,"serif","monospace"],J=["1","2","3",!1],W=["small",!1,"large","huge"],le=function($){I(j,$);function j(X,G){N(this,j);var q=E(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,X,G)),Y=function ee(re){if(!document.body.contains(X.root))return document.body.removeEventListener("click",ee);q.tooltip!=null&&!q.tooltip.root.contains(re.target)&&document.activeElement!==q.tooltip.textbox&&!q.quill.hasFocus()&&q.tooltip.hide(),q.pickers!=null&&q.pickers.forEach(function(de){de.container.contains(re.target)||de.close()})};return X.emitter.listenDOM("click",document.body,Y),q}return b(j,[{key:"addModule",value:function(G){var q=x(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"addModule",this).call(this,G);return G==="toolbar"&&this.extendToolbar(q),q}},{key:"buildButtons",value:function(G,q){G.forEach(function(Y){var ee=Y.getAttribute("class")||"";ee.split(/\s+/).forEach(function(re){if(!!re.startsWith("ql-")&&(re=re.slice(3),q[re]!=null))if(re==="direction")Y.innerHTML=q[re][""]+q[re].rtl;else if(typeof q[re]=="string")Y.innerHTML=q[re];else{var de=Y.value||"";de!=null&&q[re][de]&&(Y.innerHTML=q[re][de])}})})}},{key:"buildPickers",value:function(G,q){var Y=this;this.pickers=G.map(function(re){if(re.classList.contains("ql-align"))return re.querySelector("option")==null&&M(re,D),new o.default(re,q.align);if(re.classList.contains("ql-background")||re.classList.contains("ql-color")){var de=re.classList.contains("ql-background")?"background":"color";return re.querySelector("option")==null&&M(re,L,de==="background"?"#ffffff":"#000000"),new s.default(re,q[de])}else return re.querySelector("option")==null&&(re.classList.contains("ql-font")?M(re,B):re.classList.contains("ql-header")?M(re,J):re.classList.contains("ql-size")&&M(re,W)),new A.default(re)});var ee=function(){Y.pickers.forEach(function(de){de.update()})};this.quill.on(l.default.events.EDITOR_CHANGE,ee)}}]),j}(p.default);le.DEFAULTS=(0,y.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var j=this,X=this.container.querySelector("input.ql-image[type=file]");X==null&&(X=document.createElement("input"),X.setAttribute("type","file"),X.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),X.classList.add("ql-image"),X.addEventListener("change",function(){if(X.files!=null&&X.files[0]!=null){var G=new FileReader;G.onload=function(q){var Y=j.quill.getSelection(!0);j.quill.updateContents(new m.default().retain(Y.index).delete(Y.length).insert({image:q.target.result}),l.default.sources.USER),j.quill.setSelection(Y.index+1,l.default.sources.SILENT),X.value=""},G.readAsDataURL(X.files[0])}}),this.container.appendChild(X)),X.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Z=function($){I(j,$);function j(X,G){N(this,j);var q=E(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,X,G));return q.textbox=q.root.querySelector('input[type="text"]'),q.listen(),q}return b(j,[{key:"listen",value:function(){var G=this;this.textbox.addEventListener("keydown",function(q){h.default.match(q,"enter")?(G.save(),q.preventDefault()):h.default.match(q,"escape")&&(G.cancel(),q.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),q!=null?this.textbox.value=q:G!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+G)||""),this.root.setAttribute("data-mode",G)}},{key:"restoreFocus",value:function(){var G=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=G}},{key:"save",value:function(){var G=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var q=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",G,l.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",G,l.default.sources.USER)),this.quill.root.scrollTop=q;break}case"video":G=V(G);case"formula":{if(!G)break;var Y=this.quill.getSelection(!0);if(Y!=null){var ee=Y.index+Y.length;this.quill.insertEmbed(ee,this.root.getAttribute("data-mode"),G,l.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ee+1," ",l.default.sources.USER),this.quill.setSelection(ee+2,l.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),j}(P.default);function V($){var j=$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return j?(j[1]||"https")+"://www.youtube.com/embed/"+j[2]+"?showinfo=0":(j=$.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(j[1]||"https")+"://player.vimeo.com/video/"+j[2]+"/":$}function M($,j){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;j.forEach(function(G){var q=document.createElement("option");G===X?q.setAttribute("selected","selected"):q.setAttribute("value",G),$.appendChild(q)})}C.BaseTooltip=Z,C.default=le},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function x(){this.head=this.tail=null,this.length=0}return x.prototype.append=function(){for(var T=[],y=0;y<arguments.length;y++)T[y]=arguments[y];this.insertBefore(T[0],null),T.length>1&&this.append.apply(this,T.slice(1))},x.prototype.contains=function(T){for(var y,O=this.iterator();y=O();)if(y===T)return!0;return!1},x.prototype.insertBefore=function(T,y){!T||(T.next=y,y!=null?(T.prev=y.prev,y.prev!=null&&(y.prev.next=T),y.prev=T,y===this.head&&(this.head=T)):this.tail!=null?(this.tail.next=T,T.prev=this.tail,this.tail=T):(T.prev=null,this.head=this.tail=T),this.length+=1)},x.prototype.offset=function(T){for(var y=0,O=this.head;O!=null;){if(O===T)return y;y+=O.length(),O=O.next}return-1},x.prototype.remove=function(T){!this.contains(T)||(T.prev!=null&&(T.prev.next=T.next),T.next!=null&&(T.next.prev=T.prev),T===this.head&&(this.head=T.next),T===this.tail&&(this.tail=T.prev),this.length-=1)},x.prototype.iterator=function(T){return T===void 0&&(T=this.head),function(){var y=T;return T!=null&&(T=T.next),y}},x.prototype.find=function(T,y){y===void 0&&(y=!1);for(var O,m=this.iterator();O=m();){var c=O.length();if(T<c||y&&T===c&&(O.next==null||O.next.length()!==0))return[O,T];T-=c}return[null,0]},x.prototype.forEach=function(T){for(var y,O=this.iterator();y=O();)T(y)},x.prototype.forEachAt=function(T,y,O){if(!(y<=0))for(var m=this.find(T),c=m[0],l=m[1],a,h=T-l,g=this.iterator(c);(a=g())&&h<T+y;){var p=a.length();T>h?O(a,T-h,Math.min(y,h+p-T)):O(a,0,Math.min(p,T+y-h)),h+=p}},x.prototype.map=function(T){return this.reduce(function(y,O){return y.push(T(O)),y},[])},x.prototype.reduce=function(T,y){for(var O,m=this.iterator();O=m();)y=T(y,O);return y},x}();C.default=b},function(z,C,k){var b=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var h in a)a.hasOwnProperty(h)&&(l[h]=a[h])};return function(l,a){c(l,a);function h(){this.constructor=l}l.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(17),T=k(1),y={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},O=100,m=function(c){b(l,c);function l(a){var h=c.call(this,a)||this;return h.scroll=h,h.observer=new MutationObserver(function(g){h.update(g)}),h.observer.observe(h.domNode,y),h.attach(),h}return l.prototype.detach=function(){c.prototype.detach.call(this),this.observer.disconnect()},l.prototype.deleteAt=function(a,h){this.update(),a===0&&h===this.length()?this.children.forEach(function(g){g.remove()}):c.prototype.deleteAt.call(this,a,h)},l.prototype.formatAt=function(a,h,g,p){this.update(),c.prototype.formatAt.call(this,a,h,g,p)},l.prototype.insertAt=function(a,h,g){this.update(),c.prototype.insertAt.call(this,a,h,g)},l.prototype.optimize=function(a,h){var g=this;a===void 0&&(a=[]),h===void 0&&(h={}),c.prototype.optimize.call(this,h);for(var p=[].slice.call(this.observer.takeRecords());p.length>0;)a.push(p.pop());for(var f=function(v,A){A===void 0&&(A=!0),!(v==null||v===g)&&v.domNode.parentNode!=null&&(v.domNode[T.DATA_KEY].mutations==null&&(v.domNode[T.DATA_KEY].mutations=[]),A&&f(v.parent))},s=function(v){v.domNode[T.DATA_KEY]==null||v.domNode[T.DATA_KEY].mutations==null||(v instanceof x.default&&v.children.forEach(s),v.optimize(h))},u=a,o=0;u.length>0;o+=1){if(o>=O)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach(function(v){var A=T.find(v.target,!0);A!=null&&(A.domNode===v.target&&(v.type==="childList"?(f(T.find(v.previousSibling,!1)),[].forEach.call(v.addedNodes,function(S){var P=T.find(S,!1);f(P,!1),P instanceof x.default&&P.children.forEach(function(_){f(_,!1)})})):v.type==="attributes"&&f(A.prev)),f(A))}),this.children.forEach(s),u=[].slice.call(this.observer.takeRecords()),p=u.slice();p.length>0;)a.push(p.pop())}},l.prototype.update=function(a,h){var g=this;h===void 0&&(h={}),a=a||this.observer.takeRecords(),a.map(function(p){var f=T.find(p.target,!0);return f==null?null:f.domNode[T.DATA_KEY].mutations==null?(f.domNode[T.DATA_KEY].mutations=[p],f):(f.domNode[T.DATA_KEY].mutations.push(p),null)}).forEach(function(p){p==null||p===g||p.domNode[T.DATA_KEY]==null||p.update(p.domNode[T.DATA_KEY].mutations||[],h)}),this.domNode[T.DATA_KEY].mutations!=null&&c.prototype.update.call(this,this.domNode[T.DATA_KEY].mutations,h),this.optimize(a,h)},l.blotName="scroll",l.defaultChild="block",l.scope=T.Scope.BLOCK_BLOT,l.tagName="DIV",l}(x.default);C.default=m},function(z,C,k){var b=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var a in l)l.hasOwnProperty(a)&&(c[a]=l[a])};return function(c,l){m(c,l);function a(){this.constructor=c}c.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(18),T=k(1);function y(m,c){if(Object.keys(m).length!==Object.keys(c).length)return!1;for(var l in m)if(m[l]!==c[l])return!1;return!0}var O=function(m){b(c,m);function c(){return m!==null&&m.apply(this,arguments)||this}return c.formats=function(l){if(l.tagName!==c.tagName)return m.formats.call(this,l)},c.prototype.format=function(l,a){var h=this;l===this.statics.blotName&&!a?(this.children.forEach(function(g){g instanceof x.default||(g=g.wrap(c.blotName,!0)),h.attributes.copy(g)}),this.unwrap()):m.prototype.format.call(this,l,a)},c.prototype.formatAt=function(l,a,h,g){if(this.formats()[h]!=null||T.query(h,T.Scope.ATTRIBUTE)){var p=this.isolate(l,a);p.format(h,g)}else m.prototype.formatAt.call(this,l,a,h,g)},c.prototype.optimize=function(l){m.prototype.optimize.call(this,l);var a=this.formats();if(Object.keys(a).length===0)return this.unwrap();var h=this.next;h instanceof c&&h.prev===this&&y(a,h.formats())&&(h.moveChildren(this),h.remove())},c.blotName="inline",c.scope=T.Scope.INLINE_BLOT,c.tagName="SPAN",c}(x.default);C.default=O},function(z,C,k){var b=this&&this.__extends||function(){var O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,c){m.__proto__=c}||function(m,c){for(var l in c)c.hasOwnProperty(l)&&(m[l]=c[l])};return function(m,c){O(m,c);function l(){this.constructor=m}m.prototype=c===null?Object.create(c):(l.prototype=c.prototype,new l)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(18),T=k(1),y=function(O){b(m,O);function m(){return O!==null&&O.apply(this,arguments)||this}return m.formats=function(c){var l=T.query(m.blotName).tagName;if(c.tagName!==l)return O.formats.call(this,c)},m.prototype.format=function(c,l){T.query(c,T.Scope.BLOCK)!=null&&(c===this.statics.blotName&&!l?this.replaceWith(m.blotName):O.prototype.format.call(this,c,l))},m.prototype.formatAt=function(c,l,a,h){T.query(a,T.Scope.BLOCK)!=null?this.format(a,h):O.prototype.formatAt.call(this,c,l,a,h)},m.prototype.insertAt=function(c,l,a){if(a==null||T.query(l,T.Scope.INLINE)!=null)O.prototype.insertAt.call(this,c,l,a);else{var h=this.split(c),g=T.create(l,a);h.parent.insertBefore(g,h)}},m.prototype.update=function(c,l){navigator.userAgent.match(/Trident/)?this.build():O.prototype.update.call(this,c,l)},m.blotName="block",m.scope=T.Scope.BLOCK_BLOT,m.tagName="P",m}(x.default);C.default=y},function(z,C,k){var b=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,m){O.__proto__=m}||function(O,m){for(var c in m)m.hasOwnProperty(c)&&(O[c]=m[c])};return function(O,m){y(O,m);function c(){this.constructor=O}O.prototype=m===null?Object.create(m):(c.prototype=m.prototype,new c)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(19),T=function(y){b(O,y);function O(){return y!==null&&y.apply(this,arguments)||this}return O.formats=function(m){},O.prototype.format=function(m,c){y.prototype.formatAt.call(this,0,this.length(),m,c)},O.prototype.formatAt=function(m,c,l,a){m===0&&c===this.length()?this.format(l,a):y.prototype.formatAt.call(this,m,c,l,a)},O.prototype.formats=function(){return this.statics.formats(this.domNode)},O}(x.default);C.default=T},function(z,C,k){var b=this&&this.__extends||function(){var O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,c){m.__proto__=c}||function(m,c){for(var l in c)c.hasOwnProperty(l)&&(m[l]=c[l])};return function(m,c){O(m,c);function l(){this.constructor=m}m.prototype=c===null?Object.create(c):(l.prototype=c.prototype,new l)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(19),T=k(1),y=function(O){b(m,O);function m(c){var l=O.call(this,c)||this;return l.text=l.statics.value(l.domNode),l}return m.create=function(c){return document.createTextNode(c)},m.value=function(c){var l=c.data;return l.normalize&&(l=l.normalize()),l},m.prototype.deleteAt=function(c,l){this.domNode.data=this.text=this.text.slice(0,c)+this.text.slice(c+l)},m.prototype.index=function(c,l){return this.domNode===c?l:-1},m.prototype.insertAt=function(c,l,a){a==null?(this.text=this.text.slice(0,c)+l+this.text.slice(c),this.domNode.data=this.text):O.prototype.insertAt.call(this,c,l,a)},m.prototype.length=function(){return this.text.length},m.prototype.optimize=function(c){O.prototype.optimize.call(this,c),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof m&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},m.prototype.position=function(c,l){return[this.domNode,c]},m.prototype.split=function(c,l){if(l===void 0&&(l=!1),!l){if(c===0)return this;if(c===this.length())return this.next}var a=T.create(this.domNode.splitText(c));return this.parent.insertBefore(a,this.next),this.text=this.statics.value(this.domNode),a},m.prototype.update=function(c,l){var a=this;c.some(function(h){return h.type==="characterData"&&h.target===a.domNode})&&(this.text=this.statics.value(this.domNode))},m.prototype.value=function(){return this.text},m.blotName="text",m.scope=T.Scope.INLINE_BLOT,m}(x.default);C.default=y},function(z,C,k){var b=document.createElement("div");if(b.classList.toggle("test-class",!1),b.classList.contains("test-class")){var x=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(T,y){return arguments.length>1&&!this.contains(T)==!y?y:x.call(this,T)}}String.prototype.startsWith||(String.prototype.startsWith=function(T,y){return y=y||0,this.substr(y,T.length)===T}),String.prototype.endsWith||(String.prototype.endsWith=function(T,y){var O=this.toString();(typeof y!="number"||!isFinite(y)||Math.floor(y)!==y||y>O.length)&&(y=O.length),y-=T.length;var m=O.indexOf(T,y);return m!==-1&&m===y}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(y){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof y!="function")throw new TypeError("predicate must be a function");for(var O=Object(this),m=O.length>>>0,c=arguments[1],l,a=0;a<m;a++)if(l=O[a],y.call(c,l,a,O))return l}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(z,C){var k=-1,b=1,x=0;function T(o,v,A){if(o==v)return o?[[x,o]]:[];(A<0||o.length<A)&&(A=null);var S=c(o,v),P=o.substring(0,S);o=o.substring(S),v=v.substring(S),S=l(o,v);var _=o.substring(o.length-S);o=o.substring(0,o.length-S),v=v.substring(0,v.length-S);var N=y(o,v);return P&&N.unshift([x,P]),_&&N.push([x,_]),h(N),A!=null&&(N=f(N,A)),N=s(N),N}function y(o,v){var A;if(!o)return[[b,v]];if(!v)return[[k,o]];var S=o.length>v.length?o:v,P=o.length>v.length?v:o,_=S.indexOf(P);if(_!=-1)return A=[[b,S.substring(0,_)],[x,P],[b,S.substring(_+P.length)]],o.length>v.length&&(A[0][0]=A[2][0]=k),A;if(P.length==1)return[[k,o],[b,v]];var N=a(o,v);if(N){var E=N[0],I=N[1],D=N[2],L=N[3],B=N[4],J=T(E,D),W=T(I,L);return J.concat([[x,B]],W)}return O(o,v)}function O(o,v){for(var A=o.length,S=v.length,P=Math.ceil((A+S)/2),_=P,N=2*P,E=new Array(N),I=new Array(N),D=0;D<N;D++)E[D]=-1,I[D]=-1;E[_+1]=0,I[_+1]=0;for(var L=A-S,B=L%2!=0,J=0,W=0,le=0,Z=0,V=0;V<P;V++){for(var M=-V+J;M<=V-W;M+=2){var $=_+M,j;M==-V||M!=V&&E[$-1]<E[$+1]?j=E[$+1]:j=E[$-1]+1;for(var X=j-M;j<A&&X<S&&o.charAt(j)==v.charAt(X);)j++,X++;if(E[$]=j,j>A)W+=2;else if(X>S)J+=2;else if(B){var G=_+L-M;if(G>=0&&G<N&&I[G]!=-1){var q=A-I[G];if(j>=q)return m(o,v,j,X)}}}for(var Y=-V+le;Y<=V-Z;Y+=2){var G=_+Y,q;Y==-V||Y!=V&&I[G-1]<I[G+1]?q=I[G+1]:q=I[G-1]+1;for(var ee=q-Y;q<A&&ee<S&&o.charAt(A-q-1)==v.charAt(S-ee-1);)q++,ee++;if(I[G]=q,q>A)Z+=2;else if(ee>S)le+=2;else if(!B){var $=_+L-Y;if($>=0&&$<N&&E[$]!=-1){var j=E[$],X=_+j-$;if(q=A-q,j>=q)return m(o,v,j,X)}}}}return[[k,o],[b,v]]}function m(o,v,A,S){var P=o.substring(0,A),_=v.substring(0,S),N=o.substring(A),E=v.substring(S),I=T(P,_),D=T(N,E);return I.concat(D)}function c(o,v){if(!o||!v||o.charAt(0)!=v.charAt(0))return 0;for(var A=0,S=Math.min(o.length,v.length),P=S,_=0;A<P;)o.substring(_,P)==v.substring(_,P)?(A=P,_=A):S=P,P=Math.floor((S-A)/2+A);return P}function l(o,v){if(!o||!v||o.charAt(o.length-1)!=v.charAt(v.length-1))return 0;for(var A=0,S=Math.min(o.length,v.length),P=S,_=0;A<P;)o.substring(o.length-P,o.length-_)==v.substring(v.length-P,v.length-_)?(A=P,_=A):S=P,P=Math.floor((S-A)/2+A);return P}function a(o,v){var A=o.length>v.length?o:v,S=o.length>v.length?v:o;if(A.length<4||S.length*2<A.length)return null;function P(W,le,Z){for(var V=W.substring(Z,Z+Math.floor(W.length/4)),M=-1,$="",j,X,G,q;(M=le.indexOf(V,M+1))!=-1;){var Y=c(W.substring(Z),le.substring(M)),ee=l(W.substring(0,Z),le.substring(0,M));$.length<ee+Y&&($=le.substring(M-ee,M)+le.substring(M,M+Y),j=W.substring(0,Z-ee),X=W.substring(Z+Y),G=le.substring(0,M-ee),q=le.substring(M+Y))}return $.length*2>=W.length?[j,X,G,q,$]:null}var _=P(A,S,Math.ceil(A.length/4)),N=P(A,S,Math.ceil(A.length/2)),E;if(!_&&!N)return null;N?_?E=_[4].length>N[4].length?_:N:E=N:E=_;var I,D,L,B;o.length>v.length?(I=E[0],D=E[1],L=E[2],B=E[3]):(L=E[0],B=E[1],I=E[2],D=E[3]);var J=E[4];return[I,D,L,B,J]}function h(o){o.push([x,""]);for(var v=0,A=0,S=0,P="",_="",N;v<o.length;)switch(o[v][0]){case b:S++,_+=o[v][1],v++;break;case k:A++,P+=o[v][1],v++;break;case x:A+S>1?(A!==0&&S!==0&&(N=c(_,P),N!==0&&(v-A-S>0&&o[v-A-S-1][0]==x?o[v-A-S-1][1]+=_.substring(0,N):(o.splice(0,0,[x,_.substring(0,N)]),v++),_=_.substring(N),P=P.substring(N)),N=l(_,P),N!==0&&(o[v][1]=_.substring(_.length-N)+o[v][1],_=_.substring(0,_.length-N),P=P.substring(0,P.length-N))),A===0?o.splice(v-S,A+S,[b,_]):S===0?o.splice(v-A,A+S,[k,P]):o.splice(v-A-S,A+S,[k,P],[b,_]),v=v-A-S+(A?1:0)+(S?1:0)+1):v!==0&&o[v-1][0]==x?(o[v-1][1]+=o[v][1],o.splice(v,1)):v++,S=0,A=0,P="",_="";break}o[o.length-1][1]===""&&o.pop();var E=!1;for(v=1;v<o.length-1;)o[v-1][0]==x&&o[v+1][0]==x&&(o[v][1].substring(o[v][1].length-o[v-1][1].length)==o[v-1][1]?(o[v][1]=o[v-1][1]+o[v][1].substring(0,o[v][1].length-o[v-1][1].length),o[v+1][1]=o[v-1][1]+o[v+1][1],o.splice(v-1,1),E=!0):o[v][1].substring(0,o[v+1][1].length)==o[v+1][1]&&(o[v-1][1]+=o[v+1][1],o[v][1]=o[v][1].substring(o[v+1][1].length)+o[v+1][1],o.splice(v+1,1),E=!0)),v++;E&&h(o)}var g=T;g.INSERT=b,g.DELETE=k,g.EQUAL=x,z.exports=g;function p(o,v){if(v===0)return[x,o];for(var A=0,S=0;S<o.length;S++){var P=o[S];if(P[0]===k||P[0]===x){var _=A+P[1].length;if(v===_)return[S+1,o];if(v<_){o=o.slice();var N=v-A,E=[P[0],P[1].slice(0,N)],I=[P[0],P[1].slice(N)];return o.splice(S,1,E,I),[S+1,o]}else A=_}}throw new Error("cursor_pos is out of bounds!")}function f(o,v){var A=p(o,v),S=A[1],P=A[0],_=S[P],N=S[P+1];if(_==null)return o;if(_[0]!==x)return o;if(N!=null&&_[1]+N[1]===N[1]+_[1])return S.splice(P,2,N,_),u(S,P,2);if(N!=null&&N[1].indexOf(_[1])===0){S.splice(P,2,[N[0],_[1]],[0,_[1]]);var E=N[1].slice(_[1].length);return E.length>0&&S.splice(P+2,0,[N[0],E]),u(S,P,3)}else return o}function s(o){for(var v=!1,A=function(N){return N.charCodeAt(0)>=56320&&N.charCodeAt(0)<=57343},S=function(N){return N.charCodeAt(N.length-1)>=55296&&N.charCodeAt(N.length-1)<=56319},P=2;P<o.length;P+=1)o[P-2][0]===x&&S(o[P-2][1])&&o[P-1][0]===k&&A(o[P-1][1])&&o[P][0]===b&&A(o[P][1])&&(v=!0,o[P-1][1]=o[P-2][1].slice(-1)+o[P-1][1],o[P][1]=o[P-2][1].slice(-1)+o[P][1],o[P-2][1]=o[P-2][1].slice(0,-1));if(!v)return o;for(var _=[],P=0;P<o.length;P+=1)o[P][1].length>0&&_.push(o[P]);return _}function u(o,v,A){for(var S=v+A-1;S>=0&&S>=v-1;S--)if(S+1<o.length){var P=o[S],_=o[S+1];P[0]===_[1]&&o.splice(S,2,[P[0],P[1]+_[1]])}return o}},function(z,C){C=z.exports=typeof Object.keys=="function"?Object.keys:k,C.shim=k;function k(b){var x=[];for(var T in b)x.push(T);return x}},function(z,C){var k=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";C=z.exports=k?b:x,C.supported=b;function b(T){return Object.prototype.toString.call(T)=="[object Arguments]"}C.unsupported=x;function x(T){return T&&typeof T=="object"&&typeof T.length=="number"&&Object.prototype.hasOwnProperty.call(T,"callee")&&!Object.prototype.propertyIsEnumerable.call(T,"callee")||!1}},function(z,C){var k=Object.prototype.hasOwnProperty,b="~";function x(){}Object.create&&(x.prototype=Object.create(null),new x().__proto__||(b=!1));function T(O,m,c){this.fn=O,this.context=m,this.once=c||!1}function y(){this._events=new x,this._eventsCount=0}y.prototype.eventNames=function(){var m=[],c,l;if(this._eventsCount===0)return m;for(l in c=this._events)k.call(c,l)&&m.push(b?l.slice(1):l);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(c)):m},y.prototype.listeners=function(m,c){var l=b?b+m:m,a=this._events[l];if(c)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var h=0,g=a.length,p=new Array(g);h<g;h++)p[h]=a[h].fn;return p},y.prototype.emit=function(m,c,l,a,h,g){var p=b?b+m:m;if(!this._events[p])return!1;var f=this._events[p],s=arguments.length,u,o;if(f.fn){switch(f.once&&this.removeListener(m,f.fn,void 0,!0),s){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,c),!0;case 3:return f.fn.call(f.context,c,l),!0;case 4:return f.fn.call(f.context,c,l,a),!0;case 5:return f.fn.call(f.context,c,l,a,h),!0;case 6:return f.fn.call(f.context,c,l,a,h,g),!0}for(o=1,u=new Array(s-1);o<s;o++)u[o-1]=arguments[o];f.fn.apply(f.context,u)}else{var v=f.length,A;for(o=0;o<v;o++)switch(f[o].once&&this.removeListener(m,f[o].fn,void 0,!0),s){case 1:f[o].fn.call(f[o].context);break;case 2:f[o].fn.call(f[o].context,c);break;case 3:f[o].fn.call(f[o].context,c,l);break;case 4:f[o].fn.call(f[o].context,c,l,a);break;default:if(!u)for(A=1,u=new Array(s-1);A<s;A++)u[A-1]=arguments[A];f[o].fn.apply(f[o].context,u)}}return!0},y.prototype.on=function(m,c,l){var a=new T(c,l||this),h=b?b+m:m;return this._events[h]?this._events[h].fn?this._events[h]=[this._events[h],a]:this._events[h].push(a):(this._events[h]=a,this._eventsCount++),this},y.prototype.once=function(m,c,l){var a=new T(c,l||this,!0),h=b?b+m:m;return this._events[h]?this._events[h].fn?this._events[h]=[this._events[h],a]:this._events[h].push(a):(this._events[h]=a,this._eventsCount++),this},y.prototype.removeListener=function(m,c,l,a){var h=b?b+m:m;if(!this._events[h])return this;if(!c)return--this._eventsCount===0?this._events=new x:delete this._events[h],this;var g=this._events[h];if(g.fn)g.fn===c&&(!a||g.once)&&(!l||g.context===l)&&(--this._eventsCount===0?this._events=new x:delete this._events[h]);else{for(var p=0,f=[],s=g.length;p<s;p++)(g[p].fn!==c||a&&!g[p].once||l&&g[p].context!==l)&&f.push(g[p]);f.length?this._events[h]=f.length===1?f[0]:f:--this._eventsCount===0?this._events=new x:delete this._events[h]}return this},y.prototype.removeAllListeners=function(m){var c;return m?(c=b?b+m:m,this._events[c]&&(--this._eventsCount===0?this._events=new x:delete this._events[c])):(this._events=new x,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prototype.setMaxListeners=function(){return this},y.prefixed=b,y.EventEmitter=y,typeof z<"u"&&(z.exports=y)},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.matchText=C.matchSpacing=C.matchNewline=C.matchBlot=C.matchAttributor=C.default=void 0;var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},x=function(){function K(te,pe){var ve=[],he=!0,Se=!1,ke=void 0;try{for(var Be=te[Symbol.iterator](),et;!(he=(et=Be.next()).done)&&(ve.push(et.value),!(pe&&ve.length===pe));he=!0);}catch(Ke){Se=!0,ke=Ke}finally{try{!he&&Be.return&&Be.return()}finally{if(Se)throw ke}}return ve}return function(te,pe){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return K(te,pe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T=function(){function K(te,pe){for(var ve=0;ve<pe.length;ve++){var he=pe[ve];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(te,he.key,he)}}return function(te,pe,ve){return pe&&K(te.prototype,pe),ve&&K(te,ve),te}}(),y=k(3),O=I(y),m=k(2),c=I(m),l=k(0),a=I(l),h=k(5),g=I(h),p=k(10),f=I(p),s=k(9),u=I(s),o=k(36),v=k(37),A=k(13),S=I(A),P=k(26),_=k(38),N=k(39),E=k(40);function I(K){return K&&K.__esModule?K:{default:K}}function D(K,te,pe){return te in K?Object.defineProperty(K,te,{value:pe,enumerable:!0,configurable:!0,writable:!0}):K[te]=pe,K}function L(K,te){if(!(K instanceof te))throw new TypeError("Cannot call a class as a function")}function B(K,te){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:K}function J(K,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);K.prototype=Object.create(te&&te.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(K,te):K.__proto__=te)}var W=(0,f.default)("quill:clipboard"),le="__ql-matcher",Z=[[Node.TEXT_NODE,oe],[Node.TEXT_NODE,Ie],["br",be],[Node.ELEMENT_NODE,Ie],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,H],[Node.ELEMENT_NODE,re],[Node.ELEMENT_NODE,se],["li",xe],["b",ee.bind(ee,"bold")],["i",ee.bind(ee,"italic")],["style",Ee]],V=[o.AlignAttribute,_.DirectionAttribute].reduce(function(K,te){return K[te.keyName]=te,K},{}),M=[o.AlignStyle,v.BackgroundStyle,P.ColorStyle,_.DirectionStyle,N.FontStyle,E.SizeStyle].reduce(function(K,te){return K[te.keyName]=te,K},{}),$=function(K){J(te,K);function te(pe,ve){L(this,te);var he=B(this,(te.__proto__||Object.getPrototypeOf(te)).call(this,pe,ve));return he.quill.root.addEventListener("paste",he.onPaste.bind(he)),he.container=he.quill.addContainer("ql-clipboard"),he.container.setAttribute("contenteditable",!0),he.container.setAttribute("tabindex",-1),he.matchers=[],Z.concat(he.options.matchers).forEach(function(Se){var ke=x(Se,2),Be=ke[0],et=ke[1];!ve.matchVisual&&et===H||he.addMatcher(Be,et)}),he}return T(te,[{key:"addMatcher",value:function(ve,he){this.matchers.push([ve,he])}},{key:"convert",value:function(ve){if(typeof ve=="string")return this.container.innerHTML=ve.replace(/\>\r?\n +\</g,"><"),this.convert();var he=this.quill.getFormat(this.quill.selection.savedRange.index);if(he[S.default.blotName]){var Se=this.container.innerText;return this.container.innerHTML="",new c.default().insert(Se,D({},S.default.blotName,he[S.default.blotName]))}var ke=this.prepareMatching(),Be=x(ke,2),et=Be[0],Ke=Be[1],Fe=Y(this.container,et,Ke);return G(Fe,`
`)&&Fe.ops[Fe.ops.length-1].attributes==null&&(Fe=Fe.compose(new c.default().retain(Fe.length()-1).delete(1))),W.log("convert",this.container.innerHTML,Fe),this.container.innerHTML="",Fe}},{key:"dangerouslyPasteHTML",value:function(ve,he){var Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof ve=="string")this.quill.setContents(this.convert(ve),he),this.quill.setSelection(0,g.default.sources.SILENT);else{var ke=this.convert(he);this.quill.updateContents(new c.default().retain(ve).concat(ke),Se),this.quill.setSelection(ve+ke.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(ve){var he=this;if(!(ve.defaultPrevented||!this.quill.isEnabled())){var Se=this.quill.getSelection(),ke=new c.default().retain(Se.index),Be=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){ke=ke.concat(he.convert()).delete(Se.length),he.quill.updateContents(ke,g.default.sources.USER),he.quill.setSelection(ke.length()-Se.length,g.default.sources.SILENT),he.quill.scrollingContainer.scrollTop=Be,he.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ve=this,he=[],Se=[];return this.matchers.forEach(function(ke){var Be=x(ke,2),et=Be[0],Ke=Be[1];switch(et){case Node.TEXT_NODE:Se.push(Ke);break;case Node.ELEMENT_NODE:he.push(Ke);break;default:[].forEach.call(ve.container.querySelectorAll(et),function(Fe){Fe[le]=Fe[le]||[],Fe[le].push(Ke)});break}}),[he,Se]}}]),te}(u.default);$.DEFAULTS={matchers:[],matchVisual:!0};function j(K,te,pe){return(typeof te>"u"?"undefined":b(te))==="object"?Object.keys(te).reduce(function(ve,he){return j(ve,he,te[he])},K):K.reduce(function(ve,he){return he.attributes&&he.attributes[te]?ve.push(he):ve.insert(he.insert,(0,O.default)({},D({},te,pe),he.attributes))},new c.default)}function X(K){if(K.nodeType!==Node.ELEMENT_NODE)return{};var te="__ql-computed-style";return K[te]||(K[te]=window.getComputedStyle(K))}function G(K,te){for(var pe="",ve=K.ops.length-1;ve>=0&&pe.length<te.length;--ve){var he=K.ops[ve];if(typeof he.insert!="string")break;pe=he.insert+pe}return pe.slice(-1*te.length)===te}function q(K){if(K.childNodes.length===0)return!1;var te=X(K);return["block","list-item"].indexOf(te.display)>-1}function Y(K,te,pe){return K.nodeType===K.TEXT_NODE?pe.reduce(function(ve,he){return he(K,ve)},new c.default):K.nodeType===K.ELEMENT_NODE?[].reduce.call(K.childNodes||[],function(ve,he){var Se=Y(he,te,pe);return he.nodeType===K.ELEMENT_NODE&&(Se=te.reduce(function(ke,Be){return Be(he,ke)},Se),Se=(he[le]||[]).reduce(function(ke,Be){return Be(he,ke)},Se)),ve.concat(Se)},new c.default):new c.default}function ee(K,te,pe){return j(pe,K,!0)}function re(K,te){var pe=a.default.Attributor.Attribute.keys(K),ve=a.default.Attributor.Class.keys(K),he=a.default.Attributor.Style.keys(K),Se={};return pe.concat(ve).concat(he).forEach(function(ke){var Be=a.default.query(ke,a.default.Scope.ATTRIBUTE);Be!=null&&(Se[Be.attrName]=Be.value(K),Se[Be.attrName])||(Be=V[ke],Be!=null&&(Be.attrName===ke||Be.keyName===ke)&&(Se[Be.attrName]=Be.value(K)||void 0),Be=M[ke],Be!=null&&(Be.attrName===ke||Be.keyName===ke)&&(Be=M[ke],Se[Be.attrName]=Be.value(K)||void 0))}),Object.keys(Se).length>0&&(te=j(te,Se)),te}function de(K,te){var pe=a.default.query(K);if(pe==null)return te;if(pe.prototype instanceof a.default.Embed){var ve={},he=pe.value(K);he!=null&&(ve[pe.blotName]=he,te=new c.default().insert(ve,pe.formats(K)))}else typeof pe.formats=="function"&&(te=j(te,pe.blotName,pe.formats(K)));return te}function be(K,te){return G(te,`
`)||te.insert(`
`),te}function Ee(){return new c.default}function xe(K,te){var pe=a.default.query(K);if(pe==null||pe.blotName!=="list-item"||!G(te,`
`))return te;for(var ve=-1,he=K.parentNode;!he.classList.contains("ql-clipboard");)(a.default.query(he)||{}).blotName==="list"&&(ve+=1),he=he.parentNode;return ve<=0?te:te.compose(new c.default().retain(te.length()-1).retain(1,{indent:ve}))}function Ie(K,te){return G(te,`
`)||(q(K)||te.length()>0&&K.nextSibling&&q(K.nextSibling))&&te.insert(`
`),te}function H(K,te){if(q(K)&&K.nextElementSibling!=null&&!G(te,`

`)){var pe=K.offsetHeight+parseFloat(X(K).marginTop)+parseFloat(X(K).marginBottom);K.nextElementSibling.offsetTop>K.offsetTop+pe*1.5&&te.insert(`
`)}return te}function se(K,te){var pe={},ve=K.style||{};return ve.fontStyle&&X(K).fontStyle==="italic"&&(pe.italic=!0),ve.fontWeight&&(X(K).fontWeight.startsWith("bold")||parseInt(X(K).fontWeight)>=700)&&(pe.bold=!0),Object.keys(pe).length>0&&(te=j(te,pe)),parseFloat(ve.textIndent||0)>0&&(te=new c.default().insert("	").concat(te)),te}function oe(K,te){var pe=K.data;if(K.parentNode.tagName==="O:P")return te.insert(pe.trim());if(pe.trim().length===0&&K.parentNode.classList.contains("ql-clipboard"))return te;if(!X(K.parentNode).whiteSpace.startsWith("pre")){var ve=function(Se,ke){return ke=ke.replace(/[^\u00a0]/g,""),ke.length<1&&Se?" ":ke};pe=pe.replace(/\r\n/g," ").replace(/\n/g," "),pe=pe.replace(/\s\s+/g,ve.bind(ve,!0)),(K.previousSibling==null&&q(K.parentNode)||K.previousSibling!=null&&q(K.previousSibling))&&(pe=pe.replace(/^\s+/,ve.bind(ve,!1))),(K.nextSibling==null&&q(K.parentNode)||K.nextSibling!=null&&q(K.nextSibling))&&(pe=pe.replace(/\s+$/,ve.bind(ve,!1)))}return te.insert(pe)}C.default=$,C.matchAttributor=re,C.matchBlot=de,C.matchNewline=Ie,C.matchSpacing=H,C.matchText=oe},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function h(g,p){for(var f=0;f<p.length;f++){var s=p[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,s.key,s)}}return function(g,p,f){return p&&h(g.prototype,p),f&&h(g,f),g}}(),x=function h(g,p,f){g===null&&(g=Function.prototype);var s=Object.getOwnPropertyDescriptor(g,p);if(s===void 0){var u=Object.getPrototypeOf(g);return u===null?void 0:h(u,p,f)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(f)}},T=k(6),y=O(T);function O(h){return h&&h.__esModule?h:{default:h}}function m(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function c(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function l(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var a=function(h){l(g,h);function g(){return m(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return b(g,[{key:"optimize",value:function(f){x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,f),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return x(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g}(y.default);a.blotName="bold",a.tagName=["STRONG","B"],C.default=a},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.addControls=C.default=void 0;var b=function(){function E(I,D){var L=[],B=!0,J=!1,W=void 0;try{for(var le=I[Symbol.iterator](),Z;!(B=(Z=le.next()).done)&&(L.push(Z.value),!(D&&L.length===D));B=!0);}catch(V){J=!0,W=V}finally{try{!B&&le.return&&le.return()}finally{if(J)throw W}}return L}return function(I,D){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return E(I,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function E(I,D){for(var L=0;L<D.length;L++){var B=D[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(I,B.key,B)}}return function(I,D,L){return D&&E(I.prototype,D),L&&E(I,L),I}}(),T=k(2),y=f(T),O=k(0),m=f(O),c=k(5),l=f(c),a=k(10),h=f(a),g=k(9),p=f(g);function f(E){return E&&E.__esModule?E:{default:E}}function s(E,I,D){return I in E?Object.defineProperty(E,I,{value:D,enumerable:!0,configurable:!0,writable:!0}):E[I]=D,E}function u(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function o(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function v(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var A=(0,h.default)("quill:toolbar"),S=function(E){v(I,E);function I(D,L){u(this,I);var B=o(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,D,L));if(Array.isArray(B.options.container)){var J=document.createElement("div");_(J,B.options.container),D.container.parentNode.insertBefore(J,D.container),B.container=J}else typeof B.options.container=="string"?B.container=document.querySelector(B.options.container):B.container=B.options.container;if(!(B.container instanceof HTMLElement)){var W;return W=A.error("Container required for toolbar",B.options),o(B,W)}return B.container.classList.add("ql-toolbar"),B.controls=[],B.handlers={},Object.keys(B.options.handlers).forEach(function(le){B.addHandler(le,B.options.handlers[le])}),[].forEach.call(B.container.querySelectorAll("button, select"),function(le){B.attach(le)}),B.quill.on(l.default.events.EDITOR_CHANGE,function(le,Z){le===l.default.events.SELECTION_CHANGE&&B.update(Z)}),B.quill.on(l.default.events.SCROLL_OPTIMIZE,function(){var le=B.quill.selection.getRange(),Z=b(le,1),V=Z[0];B.update(V)}),B}return x(I,[{key:"addHandler",value:function(L,B){this.handlers[L]=B}},{key:"attach",value:function(L){var B=this,J=[].find.call(L.classList,function(le){return le.indexOf("ql-")===0});if(!!J){if(J=J.slice(3),L.tagName==="BUTTON"&&L.setAttribute("type","button"),this.handlers[J]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[J]==null){A.warn("ignoring attaching to disabled format",J,L);return}if(m.default.query(J)==null){A.warn("ignoring attaching to nonexistent format",J,L);return}}var W=L.tagName==="SELECT"?"change":"click";L.addEventListener(W,function(le){var Z=void 0;if(L.tagName==="SELECT"){if(L.selectedIndex<0)return;var V=L.options[L.selectedIndex];V.hasAttribute("selected")?Z=!1:Z=V.value||!1}else L.classList.contains("ql-active")?Z=!1:Z=L.value||!L.hasAttribute("value"),le.preventDefault();B.quill.focus();var M=B.quill.selection.getRange(),$=b(M,1),j=$[0];if(B.handlers[J]!=null)B.handlers[J].call(B,Z);else if(m.default.query(J).prototype instanceof m.default.Embed){if(Z=prompt("Enter "+J),!Z)return;B.quill.updateContents(new y.default().retain(j.index).delete(j.length).insert(s({},J,Z)),l.default.sources.USER)}else B.quill.format(J,Z,l.default.sources.USER);B.update(j)}),this.controls.push([J,L])}}},{key:"update",value:function(L){var B=L==null?{}:this.quill.getFormat(L);this.controls.forEach(function(J){var W=b(J,2),le=W[0],Z=W[1];if(Z.tagName==="SELECT"){var V=void 0;if(L==null)V=null;else if(B[le]==null)V=Z.querySelector("option[selected]");else if(!Array.isArray(B[le])){var M=B[le];typeof M=="string"&&(M=M.replace(/\"/g,'\\"')),V=Z.querySelector('option[value="'+M+'"]')}V==null?(Z.value="",Z.selectedIndex=-1):V.selected=!0}else if(L==null)Z.classList.remove("ql-active");else if(Z.hasAttribute("value")){var $=B[le]===Z.getAttribute("value")||B[le]!=null&&B[le].toString()===Z.getAttribute("value")||B[le]==null&&!Z.getAttribute("value");Z.classList.toggle("ql-active",$)}else Z.classList.toggle("ql-active",B[le]!=null)})}}]),I}(p.default);S.DEFAULTS={};function P(E,I,D){var L=document.createElement("button");L.setAttribute("type","button"),L.classList.add("ql-"+I),D!=null&&(L.value=D),E.appendChild(L)}function _(E,I){Array.isArray(I[0])||(I=[I]),I.forEach(function(D){var L=document.createElement("span");L.classList.add("ql-formats"),D.forEach(function(B){if(typeof B=="string")P(L,B);else{var J=Object.keys(B)[0],W=B[J];Array.isArray(W)?N(L,J,W):P(L,J,W)}}),E.appendChild(L)})}function N(E,I,D){var L=document.createElement("select");L.classList.add("ql-"+I),D.forEach(function(B){var J=document.createElement("option");B!==!1?J.setAttribute("value",B):J.setAttribute("selected","selected"),L.appendChild(J)}),E.appendChild(L)}S.DEFAULTS={container:null,handlers:{clean:function(){var I=this,D=this.quill.getSelection();if(D!=null)if(D.length==0){var L=this.quill.getFormat();Object.keys(L).forEach(function(B){m.default.query(B,m.default.Scope.INLINE)!=null&&I.quill.format(B,!1)})}else this.quill.removeFormat(D,l.default.sources.USER)},direction:function(I){var D=this.quill.getFormat().align;I==="rtl"&&D==null?this.quill.format("align","right",l.default.sources.USER):!I&&D==="right"&&this.quill.format("align",!1,l.default.sources.USER),this.quill.format("direction",I,l.default.sources.USER)},indent:function(I){var D=this.quill.getSelection(),L=this.quill.getFormat(D),B=parseInt(L.indent||0);if(I==="+1"||I==="-1"){var J=I==="+1"?1:-1;L.direction==="rtl"&&(J*=-1),this.quill.format("indent",B+J,l.default.sources.USER)}},link:function(I){I===!0&&(I=prompt("Enter link URL:")),this.quill.format("link",I,l.default.sources.USER)},list:function(I){var D=this.quill.getSelection(),L=this.quill.getFormat(D);I==="check"?L.list==="checked"||L.list==="unchecked"?this.quill.format("list",!1,l.default.sources.USER):this.quill.format("list","unchecked",l.default.sources.USER):this.quill.format("list",I,l.default.sources.USER)}}},C.default=S,C.addControls=_},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function h(g,p){for(var f=0;f<p.length;f++){var s=p[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,s.key,s)}}return function(g,p,f){return p&&h(g.prototype,p),f&&h(g,f),g}}(),x=function h(g,p,f){g===null&&(g=Function.prototype);var s=Object.getOwnPropertyDescriptor(g,p);if(s===void 0){var u=Object.getPrototypeOf(g);return u===null?void 0:h(u,p,f)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(f)}},T=k(28),y=O(T);function O(h){return h&&h.__esModule?h:{default:h}}function m(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function c(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function l(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var a=function(h){l(g,h);function g(p,f){m(this,g);var s=c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,p));return s.label.innerHTML=f,s.container.classList.add("ql-color-picker"),[].slice.call(s.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(u){u.classList.add("ql-primary")}),s}return b(g,[{key:"buildItem",value:function(f){var s=x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,f);return s.style.backgroundColor=f.getAttribute("value")||"",s}},{key:"selectItem",value:function(f,s){x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,f,s);var u=this.label.querySelector(".ql-color-label"),o=f&&f.getAttribute("data-value")||"";u&&(u.tagName==="line"?u.style.stroke=o:u.style.fill=o)}}]),g}(y.default);C.default=a},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function h(g,p){for(var f=0;f<p.length;f++){var s=p[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,s.key,s)}}return function(g,p,f){return p&&h(g.prototype,p),f&&h(g,f),g}}(),x=function h(g,p,f){g===null&&(g=Function.prototype);var s=Object.getOwnPropertyDescriptor(g,p);if(s===void 0){var u=Object.getPrototypeOf(g);return u===null?void 0:h(u,p,f)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(f)}},T=k(28),y=O(T);function O(h){return h&&h.__esModule?h:{default:h}}function m(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function c(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function l(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var a=function(h){l(g,h);function g(p,f){m(this,g);var s=c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,p));return s.container.classList.add("ql-icon-picker"),[].forEach.call(s.container.querySelectorAll(".ql-picker-item"),function(u){u.innerHTML=f[u.getAttribute("data-value")||""]}),s.defaultItem=s.container.querySelector(".ql-selected"),s.selectItem(s.defaultItem),s}return b(g,[{key:"selectItem",value:function(f,s){x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,f,s),f=f||this.defaultItem,this.label.innerHTML=f.innerHTML}}]),g}(y.default);C.default=a},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function y(O,m){for(var c=0;c<m.length;c++){var l=m[c];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(O,l.key,l)}}return function(O,m,c){return m&&y(O.prototype,m),c&&y(O,c),O}}();function x(y,O){if(!(y instanceof O))throw new TypeError("Cannot call a class as a function")}var T=function(){function y(O,m){var c=this;x(this,y),this.quill=O,this.boundsContainer=m||document.body,this.root=O.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){c.root.style.marginTop=-1*c.quill.root.scrollTop+"px"}),this.hide()}return b(y,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(m){var c=m.left+m.width/2-this.root.offsetWidth/2,l=m.bottom+this.quill.root.scrollTop;this.root.style.left=c+"px",this.root.style.top=l+"px",this.root.classList.remove("ql-flip");var a=this.boundsContainer.getBoundingClientRect(),h=this.root.getBoundingClientRect(),g=0;if(h.right>a.right&&(g=a.right-h.right,this.root.style.left=c+g+"px"),h.left<a.left&&(g=a.left-h.left,this.root.style.left=c+g+"px"),h.bottom>a.bottom){var p=h.bottom-h.top,f=m.bottom-m.top+p;this.root.style.top=l-f+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),y}();C.default=T},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function N(E,I){var D=[],L=!0,B=!1,J=void 0;try{for(var W=E[Symbol.iterator](),le;!(L=(le=W.next()).done)&&(D.push(le.value),!(I&&D.length===I));L=!0);}catch(Z){B=!0,J=Z}finally{try{!L&&W.return&&W.return()}finally{if(B)throw J}}return D}return function(E,I){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return N(E,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function N(E,I,D){E===null&&(E=Function.prototype);var L=Object.getOwnPropertyDescriptor(E,I);if(L===void 0){var B=Object.getPrototypeOf(E);return B===null?void 0:N(B,I,D)}else{if("value"in L)return L.value;var J=L.get;return J===void 0?void 0:J.call(D)}},T=function(){function N(E,I){for(var D=0;D<I.length;D++){var L=I[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,I,D){return I&&N(E.prototype,I),D&&N(E,D),E}}(),y=k(3),O=u(y),m=k(8),c=u(m),l=k(43),a=u(l),h=k(27),g=u(h),p=k(15),f=k(41),s=u(f);function u(N){return N&&N.__esModule?N:{default:N}}function o(N,E){if(!(N instanceof E))throw new TypeError("Cannot call a class as a function")}function v(N,E){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:N}function A(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);N.prototype=Object.create(E&&E.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(N,E):N.__proto__=E)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],P=function(N){A(E,N);function E(I,D){o(this,E),D.modules.toolbar!=null&&D.modules.toolbar.container==null&&(D.modules.toolbar.container=S);var L=v(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I,D));return L.quill.container.classList.add("ql-snow"),L}return T(E,[{key:"extendToolbar",value:function(D){D.container.classList.add("ql-snow"),this.buildButtons([].slice.call(D.container.querySelectorAll("button")),s.default),this.buildPickers([].slice.call(D.container.querySelectorAll("select")),s.default),this.tooltip=new _(this.quill,this.options.bounds),D.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(L,B){D.handlers.link.call(D,!B.format.link)})}}]),E}(a.default);P.DEFAULTS=(0,O.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var I=this.quill.getSelection();if(I==null||I.length==0)return;var D=this.quill.getText(I);/^\S+@\S+\.\S+$/.test(D)&&D.indexOf("mailto:")!==0&&(D="mailto:"+D);var L=this.quill.theme.tooltip;L.edit("link",D)}else this.quill.format("link",!1)}}}}});var _=function(N){A(E,N);function E(I,D){o(this,E);var L=v(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I,D));return L.preview=L.root.querySelector("a.ql-preview"),L}return T(E,[{key:"listen",value:function(){var D=this;x(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(L){D.root.classList.contains("ql-editing")?D.save():D.edit("link",D.preview.textContent),L.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(L){if(D.linkRange!=null){var B=D.linkRange;D.restoreFocus(),D.quill.formatText(B,"link",!1,c.default.sources.USER),delete D.linkRange}L.preventDefault(),D.hide()}),this.quill.on(c.default.events.SELECTION_CHANGE,function(L,B,J){if(L!=null){if(L.length===0&&J===c.default.sources.USER){var W=D.quill.scroll.descendant(g.default,L.index),le=b(W,2),Z=le[0],V=le[1];if(Z!=null){D.linkRange=new p.Range(L.index-V,Z.length());var M=g.default.formats(Z.domNode);D.preview.textContent=M,D.preview.setAttribute("href",M),D.show(),D.position(D.quill.getBounds(D.linkRange));return}}else delete D.linkRange;D.hide()}})}},{key:"show",value:function(){x(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(l.BaseTooltip);_.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),C.default=P},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(29),x=he(b),T=k(36),y=k(38),O=k(64),m=k(65),c=he(m),l=k(66),a=he(l),h=k(67),g=he(h),p=k(37),f=k(26),s=k(39),u=k(40),o=k(56),v=he(o),A=k(68),S=he(A),P=k(27),_=he(P),N=k(69),E=he(N),I=k(70),D=he(I),L=k(71),B=he(L),J=k(72),W=he(J),le=k(73),Z=he(le),V=k(13),M=he(V),$=k(74),j=he($),X=k(75),G=he(X),q=k(57),Y=he(q),ee=k(41),re=he(ee),de=k(28),be=he(de),Ee=k(59),xe=he(Ee),Ie=k(60),H=he(Ie),se=k(61),oe=he(se),K=k(108),te=he(K),pe=k(62),ve=he(pe);function he(Se){return Se&&Se.__esModule?Se:{default:Se}}x.default.register({"attributors/attribute/direction":y.DirectionAttribute,"attributors/class/align":T.AlignClass,"attributors/class/background":p.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":y.DirectionClass,"attributors/class/font":s.FontClass,"attributors/class/size":u.SizeClass,"attributors/style/align":T.AlignStyle,"attributors/style/background":p.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":y.DirectionStyle,"attributors/style/font":s.FontStyle,"attributors/style/size":u.SizeStyle},!0),x.default.register({"formats/align":T.AlignClass,"formats/direction":y.DirectionClass,"formats/indent":O.IndentClass,"formats/background":p.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":s.FontClass,"formats/size":u.SizeClass,"formats/blockquote":c.default,"formats/code-block":M.default,"formats/header":a.default,"formats/list":g.default,"formats/bold":v.default,"formats/code":V.Code,"formats/italic":S.default,"formats/link":_.default,"formats/script":E.default,"formats/strike":D.default,"formats/underline":B.default,"formats/image":W.default,"formats/video":Z.default,"formats/list/item":h.ListItem,"modules/formula":j.default,"modules/syntax":G.default,"modules/toolbar":Y.default,"themes/bubble":te.default,"themes/snow":ve.default,"ui/icons":re.default,"ui/picker":be.default,"ui/icon-picker":H.default,"ui/color-picker":xe.default,"ui/tooltip":oe.default},!0),C.default=x.default},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.IndentClass=void 0;var b=function(){function g(p,f){for(var s=0;s<f.length;s++){var u=f[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}return function(p,f,s){return f&&g(p.prototype,f),s&&g(p,s),p}}(),x=function g(p,f,s){p===null&&(p=Function.prototype);var u=Object.getOwnPropertyDescriptor(p,f);if(u===void 0){var o=Object.getPrototypeOf(p);return o===null?void 0:g(o,f,s)}else{if("value"in u)return u.value;var v=u.get;return v===void 0?void 0:v.call(s)}},T=k(0),y=O(T);function O(g){return g&&g.__esModule?g:{default:g}}function m(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function c(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function l(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var a=function(g){l(p,g);function p(){return m(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return b(p,[{key:"add",value:function(s,u){if(u==="+1"||u==="-1"){var o=this.value(s)||0;u=u==="+1"?o+1:o-1}return u===0?(this.remove(s),!0):x(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"add",this).call(this,s,u)}},{key:"canAdd",value:function(s,u){return x(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"canAdd",this).call(this,s,u)||x(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"canAdd",this).call(this,s,parseInt(u))}},{key:"value",value:function(s){return parseInt(x(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"value",this).call(this,s))||void 0}}]),p}(y.default.Attributor.Class),h=new a("indent","ql-indent",{scope:y.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});C.IndentClass=h},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(4),x=T(b);function T(l){return l&&l.__esModule?l:{default:l}}function y(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function O(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function m(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var c=function(l){m(a,l);function a(){return y(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default);c.blotName="blockquote",c.tagName="blockquote",C.default=c},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function a(h,g){for(var p=0;p<g.length;p++){var f=g[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}return function(h,g,p){return g&&a(h.prototype,g),p&&a(h,p),h}}(),x=k(4),T=y(x);function y(a){return a&&a.__esModule?a:{default:a}}function O(a,h){if(!(a instanceof h))throw new TypeError("Cannot call a class as a function")}function m(a,h){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:a}function c(a,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);a.prototype=Object.create(h&&h.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(a,h):a.__proto__=h)}var l=function(a){c(h,a);function h(){return O(this,h),m(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return b(h,null,[{key:"formats",value:function(p){return this.tagName.indexOf(p.tagName)+1}}]),h}(T.default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],C.default=l},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.ListItem=void 0;var b=function(){function o(v,A){for(var S=0;S<A.length;S++){var P=A[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(v,P.key,P)}}return function(v,A,S){return A&&o(v.prototype,A),S&&o(v,S),v}}(),x=function o(v,A,S){v===null&&(v=Function.prototype);var P=Object.getOwnPropertyDescriptor(v,A);if(P===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:o(_,A,S)}else{if("value"in P)return P.value;var N=P.get;return N===void 0?void 0:N.call(S)}},T=k(0),y=a(T),O=k(4),m=a(O),c=k(25),l=a(c);function a(o){return o&&o.__esModule?o:{default:o}}function h(o,v,A){return v in o?Object.defineProperty(o,v,{value:A,enumerable:!0,configurable:!0,writable:!0}):o[v]=A,o}function g(o,v){if(!(o instanceof v))throw new TypeError("Cannot call a class as a function")}function p(o,v){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:o}function f(o,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);o.prototype=Object.create(v&&v.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(o,v):o.__proto__=v)}var s=function(o){f(v,o);function v(){return g(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return b(v,[{key:"format",value:function(S,P){S===u.blotName&&!P?this.replaceWith(y.default.create(this.statics.scope)):x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,S,P)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,P){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,P),this):(this.parent.unwrap(),x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"replaceWith",this).call(this,S,P))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:x(v.__proto__||Object.getPrototypeOf(v),"formats",this).call(this,S)}}]),v}(m.default);s.blotName="list-item",s.tagName="LI";var u=function(o){f(v,o),b(v,null,[{key:"create",value:function(S){var P=S==="ordered"?"OL":"UL",_=x(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,P);return(S==="checked"||S==="unchecked")&&_.setAttribute("data-checked",S==="checked"),_}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function v(A){g(this,v);var S=p(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,A)),P=function(N){if(N.target.parentNode===A){var E=S.statics.formats(A),I=y.default.find(N.target);E==="checked"?I.format("list","unchecked"):E==="unchecked"&&I.format("list","checked")}};return A.addEventListener("touchstart",P),A.addEventListener("mousedown",P),S}return b(v,[{key:"format",value:function(S,P){this.children.length>0&&this.children.tail.format(S,P)}},{key:"formats",value:function(){return h({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,P){if(S instanceof s)x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertBefore",this).call(this,S,P);else{var _=P==null?this.length():P.offset(this),N=this.split(_);N.parent.insertBefore(S,N)}}},{key:"optimize",value:function(S){x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,S);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&P.domNode.tagName===this.domNode.tagName&&P.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(P.moveChildren(this),P.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var P=y.default.create(this.statics.defaultChild);S.moveChildren(P),this.appendChild(P)}x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"replace",this).call(this,S)}}]),v}(l.default);u.blotName="list",u.scope=y.default.Scope.BLOCK_BLOT,u.tagName=["OL","UL"],u.defaultChild="list-item",u.allowedChildren=[s],C.ListItem=s,C.default=u},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(56),x=T(b);function T(l){return l&&l.__esModule?l:{default:l}}function y(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function O(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function m(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var c=function(l){m(a,l);function a(){return y(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default);c.blotName="italic",c.tagName=["EM","I"],C.default=c},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function h(g,p){for(var f=0;f<p.length;f++){var s=p[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,s.key,s)}}return function(g,p,f){return p&&h(g.prototype,p),f&&h(g,f),g}}(),x=function h(g,p,f){g===null&&(g=Function.prototype);var s=Object.getOwnPropertyDescriptor(g,p);if(s===void 0){var u=Object.getPrototypeOf(g);return u===null?void 0:h(u,p,f)}else{if("value"in s)return s.value;var o=s.get;return o===void 0?void 0:o.call(f)}},T=k(6),y=O(T);function O(h){return h&&h.__esModule?h:{default:h}}function m(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function c(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function l(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var a=function(h){l(g,h);function g(){return m(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return b(g,null,[{key:"create",value:function(f){return f==="super"?document.createElement("sup"):f==="sub"?document.createElement("sub"):x(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,f)}},{key:"formats",value:function(f){if(f.tagName==="SUB")return"sub";if(f.tagName==="SUP")return"super"}}]),g}(y.default);a.blotName="script",a.tagName=["SUB","SUP"],C.default=a},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(6),x=T(b);function T(l){return l&&l.__esModule?l:{default:l}}function y(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function O(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function m(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var c=function(l){m(a,l);function a(){return y(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default);c.blotName="strike",c.tagName="S",C.default=c},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=k(6),x=T(b);function T(l){return l&&l.__esModule?l:{default:l}}function y(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function O(l,a){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:l}function m(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(l,a):l.__proto__=a)}var c=function(l){m(a,l);function a(){return y(this,a),O(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default);c.blotName="underline",c.tagName="U",C.default=c},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function p(f,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}return function(f,s,u){return s&&p(f.prototype,s),u&&p(f,u),f}}(),x=function p(f,s,u){f===null&&(f=Function.prototype);var o=Object.getOwnPropertyDescriptor(f,s);if(o===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:p(v,s,u)}else{if("value"in o)return o.value;var A=o.get;return A===void 0?void 0:A.call(u)}},T=k(0),y=m(T),O=k(27);function m(p){return p&&p.__esModule?p:{default:p}}function c(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}function l(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:p}function a(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);p.prototype=Object.create(f&&f.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(p,f):p.__proto__=f)}var h=["alt","height","width"],g=function(p){a(f,p);function f(){return c(this,f),l(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return b(f,[{key:"format",value:function(u,o){h.indexOf(u)>-1?o?this.domNode.setAttribute(u,o):this.domNode.removeAttribute(u):x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,u,o)}}],[{key:"create",value:function(u){var o=x(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,u);return typeof u=="string"&&o.setAttribute("src",this.sanitize(u)),o}},{key:"formats",value:function(u){return h.reduce(function(o,v){return u.hasAttribute(v)&&(o[v]=u.getAttribute(v)),o},{})}},{key:"match",value:function(u){return/\.(jpe?g|gif|png)$/.test(u)||/^data:image\/.+;base64/.test(u)}},{key:"sanitize",value:function(u){return(0,O.sanitize)(u,["http","https","data"])?u:"//:0"}},{key:"value",value:function(u){return u.getAttribute("src")}}]),f}(y.default.Embed);g.blotName="image",g.tagName="IMG",C.default=g},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0});var b=function(){function p(f,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}return function(f,s,u){return s&&p(f.prototype,s),u&&p(f,u),f}}(),x=function p(f,s,u){f===null&&(f=Function.prototype);var o=Object.getOwnPropertyDescriptor(f,s);if(o===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:p(v,s,u)}else{if("value"in o)return o.value;var A=o.get;return A===void 0?void 0:A.call(u)}},T=k(4),y=k(27),O=m(y);function m(p){return p&&p.__esModule?p:{default:p}}function c(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}function l(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:p}function a(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);p.prototype=Object.create(f&&f.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(p,f):p.__proto__=f)}var h=["height","width"],g=function(p){a(f,p);function f(){return c(this,f),l(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return b(f,[{key:"format",value:function(u,o){h.indexOf(u)>-1?o?this.domNode.setAttribute(u,o):this.domNode.removeAttribute(u):x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,u,o)}}],[{key:"create",value:function(u){var o=x(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,u);return o.setAttribute("frameborder","0"),o.setAttribute("allowfullscreen",!0),o.setAttribute("src",this.sanitize(u)),o}},{key:"formats",value:function(u){return h.reduce(function(o,v){return u.hasAttribute(v)&&(o[v]=u.getAttribute(v)),o},{})}},{key:"sanitize",value:function(u){return O.default.sanitize(u)}},{key:"value",value:function(u){return u.getAttribute("src")}}]),f}(T.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",C.default=g},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.FormulaBlot=void 0;var b=function(){function u(o,v){for(var A=0;A<v.length;A++){var S=v[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(o,S.key,S)}}return function(o,v,A){return v&&u(o.prototype,v),A&&u(o,A),o}}(),x=function u(o,v,A){o===null&&(o=Function.prototype);var S=Object.getOwnPropertyDescriptor(o,v);if(S===void 0){var P=Object.getPrototypeOf(o);return P===null?void 0:u(P,v,A)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(A)}},T=k(35),y=a(T),O=k(5),m=a(O),c=k(9),l=a(c);function a(u){return u&&u.__esModule?u:{default:u}}function h(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function g(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function p(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var f=function(u){p(o,u);function o(){return h(this,o),g(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return b(o,null,[{key:"create",value:function(A){var S=x(o.__proto__||Object.getPrototypeOf(o),"create",this).call(this,A);return typeof A=="string"&&(window.katex.render(A,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",A)),S}},{key:"value",value:function(A){return A.getAttribute("data-value")}}]),o}(y.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var s=function(u){p(o,u),b(o,null,[{key:"register",value:function(){m.default.register(f,!0)}}]);function o(){h(this,o);var v=g(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return v}return o}(l.default);C.FormulaBlot=f,C.default=s},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.CodeToken=C.CodeBlock=void 0;var b=function(){function A(S,P){for(var _=0;_<P.length;_++){var N=P[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}return function(S,P,_){return P&&A(S.prototype,P),_&&A(S,_),S}}(),x=function A(S,P,_){S===null&&(S=Function.prototype);var N=Object.getOwnPropertyDescriptor(S,P);if(N===void 0){var E=Object.getPrototypeOf(S);return E===null?void 0:A(E,P,_)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(_)}},T=k(0),y=g(T),O=k(5),m=g(O),c=k(9),l=g(c),a=k(13),h=g(a);function g(A){return A&&A.__esModule?A:{default:A}}function p(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function f(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:A}function s(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}var u=function(A){s(S,A);function S(){return p(this,S),f(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return b(S,[{key:"replaceWith",value:function(_){this.domNode.textContent=this.domNode.textContent,this.attach(),x(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,_)}},{key:"highlight",value:function(_){var N=this.domNode.textContent;this.cachedText!==N&&((N.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=_(N),this.domNode.normalize(),this.attach()),this.cachedText=N)}}]),S}(h.default);u.className="ql-syntax";var o=new y.default.Attributor.Class("token","hljs",{scope:y.default.Scope.INLINE}),v=function(A){s(S,A),b(S,null,[{key:"register",value:function(){m.default.register(o,!0),m.default.register(u,!0)}}]);function S(P,_){p(this,S);var N=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P,_));if(typeof N.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return N.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){N.highlight(),E=null},N.options.interval)}),N.highlight(),N}return b(S,[{key:"highlight",value:function(){var _=this;if(!this.quill.selection.composing){this.quill.update(m.default.sources.USER);var N=this.quill.getSelection();this.quill.scroll.descendants(u).forEach(function(E){E.highlight(_.options.highlight)}),this.quill.update(m.default.sources.SILENT),N!=null&&this.quill.setSelection(N,m.default.sources.SILENT)}}}]),S}(l.default);v.DEFAULTS={highlight:function(){return window.hljs==null?null:function(A){var S=window.hljs.highlightAuto(A);return S.value}}(),interval:1e3},C.CodeBlock=u,C.CodeToken=o,C.default=v},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(z,C){z.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(z,C){z.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(z,C){z.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(z,C){z.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(z,C){z.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(z,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BubbleTooltip=void 0;var b=function S(P,_,N){P===null&&(P=Function.prototype);var E=Object.getOwnPropertyDescriptor(P,_);if(E===void 0){var I=Object.getPrototypeOf(P);return I===null?void 0:S(I,_,N)}else{if("value"in E)return E.value;var D=E.get;return D===void 0?void 0:D.call(N)}},x=function(){function S(P,_){for(var N=0;N<_.length;N++){var E=_[N];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,E.key,E)}}return function(P,_,N){return _&&S(P.prototype,_),N&&S(P,N),P}}(),T=k(3),y=p(T),O=k(8),m=p(O),c=k(43),l=p(c),a=k(15),h=k(41),g=p(h);function p(S){return S&&S.__esModule?S:{default:S}}function f(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")}function s(S,P){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:S}function u(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(S,P):S.__proto__=P)}var o=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],v=function(S){u(P,S);function P(_,N){f(this,P),N.modules.toolbar!=null&&N.modules.toolbar.container==null&&(N.modules.toolbar.container=o);var E=s(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,_,N));return E.quill.container.classList.add("ql-bubble"),E}return x(P,[{key:"extendToolbar",value:function(N){this.tooltip=new A(this.quill,this.options.bounds),this.tooltip.root.appendChild(N.container),this.buildButtons([].slice.call(N.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(N.container.querySelectorAll("select")),g.default)}}]),P}(l.default);v.DEFAULTS=(0,y.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){P?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var A=function(S){u(P,S);function P(_,N){f(this,P);var E=s(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,_,N));return E.quill.on(m.default.events.EDITOR_CHANGE,function(I,D,L,B){if(I===m.default.events.SELECTION_CHANGE)if(D!=null&&D.length>0&&B===m.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var J=E.quill.getLines(D.index,D.length);if(J.length===1)E.position(E.quill.getBounds(D));else{var W=J[J.length-1],le=E.quill.getIndex(W),Z=Math.min(W.length()-1,D.index+D.length-le),V=E.quill.getBounds(new a.Range(le,Z));E.position(V)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return x(P,[{key:"listen",value:function(){var N=this;b(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){N.root.classList.remove("ql-editing")}),this.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!N.root.classList.contains("ql-hidden")){var E=N.quill.getSelection();E!=null&&N.position(N.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(N){var E=b(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"position",this).call(this,N),I=this.root.querySelector(".ql-tooltip-arrow");if(I.style.marginLeft="",E===0)return E;I.style.marginLeft=-1*E-I.offsetWidth/2+"px"}}]),P}(c.BaseTooltip);A.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),C.BubbleTooltip=A,C.default=v},function(z,C,k){z.exports=k(63)}]).default})})(Hs);const $s=po(Hs.exports);var Ws={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(qe,fe){(function(z,C){qe.exports=C()})(self,()=>(()=>{var z={582:(x,T,y)=>{y.d(T,{Z:()=>a});var O=y(81),m=y.n(O),c=y(645),l=y.n(c)()(m());l.push([x.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const a=l},645:x=>{x.exports=function(T){var y=[];return y.toString=function(){return this.map(function(O){var m="",c=O[5]!==void 0;return O[4]&&(m+="@supports (".concat(O[4],") {")),O[2]&&(m+="@media ".concat(O[2]," {")),c&&(m+="@layer".concat(O[5].length>0?" ".concat(O[5]):""," {")),m+=T(O),c&&(m+="}"),O[2]&&(m+="}"),O[4]&&(m+="}"),m}).join("")},y.i=function(O,m,c,l,a){typeof O=="string"&&(O=[[null,O,void 0]]);var h={};if(c)for(var g=0;g<this.length;g++){var p=this[g][0];p!=null&&(h[p]=!0)}for(var f=0;f<O.length;f++){var s=[].concat(O[f]);c&&h[s[0]]||(a!==void 0&&(s[5]===void 0||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=a),m&&(s[2]&&(s[1]="@media ".concat(s[2]," {").concat(s[1],"}")),s[2]=m),l&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=l):s[4]="".concat(l)),y.push(s))}},y}},81:x=>{x.exports=function(T){return T[1]}},465:(x,T,y)=>{x=y.nmd(x);var O="__lodash_hash_undefined__",m=9007199254740991,c="[object Arguments]",l="[object Boolean]",a="[object Date]",h="[object Function]",g="[object GeneratorFunction]",p="[object Map]",f="[object Number]",s="[object Object]",u="[object Promise]",o="[object RegExp]",v="[object Set]",A="[object String]",S="[object Symbol]",P="[object WeakMap]",_="[object ArrayBuffer]",N="[object DataView]",E="[object Float32Array]",I="[object Float64Array]",D="[object Int8Array]",L="[object Int16Array]",B="[object Int32Array]",J="[object Uint8Array]",W="[object Uint8ClampedArray]",le="[object Uint16Array]",Z="[object Uint32Array]",V=/\w*$/,M=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,j={};j[c]=j["[object Array]"]=j[_]=j[N]=j[l]=j[a]=j[E]=j[I]=j[D]=j[L]=j[B]=j[p]=j[f]=j[s]=j[o]=j[v]=j[A]=j[S]=j[J]=j[W]=j[le]=j[Z]=!0,j["[object Error]"]=j[h]=j[P]=!1;var X=typeof y.g=="object"&&y.g&&y.g.Object===Object&&y.g,G=typeof self=="object"&&self&&self.Object===Object&&self,q=X||G||Function("return this")(),Y=T&&!T.nodeType&&T,ee=Y&&x&&!x.nodeType&&x,re=ee&&ee.exports===Y;function de(Q,ge){return Q.set(ge[0],ge[1]),Q}function be(Q,ge){return Q.add(ge),Q}function Ee(Q,ge,Oe,Pe){var Ye=-1,it=Q?Q.length:0;for(Pe&&it&&(Oe=Q[++Ye]);++Ye<it;)Oe=ge(Oe,Q[Ye],Ye,Q);return Oe}function xe(Q){var ge=!1;if(Q!=null&&typeof Q.toString!="function")try{ge=!!(Q+"")}catch{}return ge}function Ie(Q){var ge=-1,Oe=Array(Q.size);return Q.forEach(function(Pe,Ye){Oe[++ge]=[Ye,Pe]}),Oe}function H(Q,ge){return function(Oe){return Q(ge(Oe))}}function se(Q){var ge=-1,Oe=Array(Q.size);return Q.forEach(function(Pe){Oe[++ge]=Pe}),Oe}var oe,K=Array.prototype,te=Function.prototype,pe=Object.prototype,ve=q["__core-js_shared__"],he=(oe=/[^.]+$/.exec(ve&&ve.keys&&ve.keys.IE_PROTO||""))?"Symbol(src)_1."+oe:"",Se=te.toString,ke=pe.hasOwnProperty,Be=pe.toString,et=RegExp("^"+Se.call(ke).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=re?q.Buffer:void 0,Fe=q.Symbol,Je=q.Uint8Array,ye=H(Object.getPrototypeOf,Object),Ge=Object.create,$t=pe.propertyIsEnumerable,fn=K.splice,Bt=Object.getOwnPropertySymbols,Xt=Ke?Ke.isBuffer:void 0,Dt=H(Object.keys,Object),qt=kt(q,"DataView"),zt=kt(q,"Map"),Qt=kt(q,"Promise"),At=kt(q,"Set"),Kt=kt(q,"WeakMap"),Lt=kt(Object,"create"),hn=xt(qt),dn=xt(zt),Vn=xt(Qt),Kn=xt(At),Pr=xt(Kt),nr=Fe?Fe.prototype:void 0,pr=nr?nr.valueOf:void 0;function gn(Q){var ge=-1,Oe=Q?Q.length:0;for(this.clear();++ge<Oe;){var Pe=Q[ge];this.set(Pe[0],Pe[1])}}function jt(Q){var ge=-1,Oe=Q?Q.length:0;for(this.clear();++ge<Oe;){var Pe=Q[ge];this.set(Pe[0],Pe[1])}}function Ht(Q){var ge=-1,Oe=Q?Q.length:0;for(this.clear();++ge<Oe;){var Pe=Q[ge];this.set(Pe[0],Pe[1])}}function Cn(Q){this.__data__=new jt(Q)}function on(Q,ge,Oe){var Pe=Q[ge];ke.call(Q,ge)&&Gt(Pe,Oe)&&(Oe!==void 0||ge in Q)||(Q[ge]=Oe)}function ue(Q,ge){for(var Oe=Q.length;Oe--;)if(Gt(Q[Oe][0],ge))return Oe;return-1}function sn(Q,ge,Oe,Pe,Ye,it,ft){var tt;if(Pe&&(tt=it?Pe(Q,Ye,it,ft):Pe(Q)),tt!==void 0)return tt;if(!ze(Q))return Q;var _t=ne(Q);if(_t){if(tt=function(Ve){var at=Ve.length,Tt=Ve.constructor(at);return at&&typeof Ve[0]=="string"&&ke.call(Ve,"index")&&(Tt.index=Ve.index,Tt.input=Ve.input),Tt}(Q),!ge)return function(Ve,at){var Tt=-1,Xe=Ve.length;for(at||(at=Array(Xe));++Tt<Xe;)at[Tt]=Ve[Tt];return at}(Q,tt)}else{var mt=Et(Q),Ft=mt==h||mt==g;if(we(Q))return function(Ve,at){if(at)return Ve.slice();var Tt=new Ve.constructor(Ve.length);return Ve.copy(Tt),Tt}(Q,ge);if(mt==s||mt==c||Ft&&!it){if(xe(Q))return it?Q:{};if(tt=function(Ve){return typeof Ve.constructor!="function"||Ct(Ve)?{}:ze(at=ye(Ve))?Ge(at):{};var at}(Ft?{}:Q),!ge)return function(Ve,at){return vr(Ve,Jt(Ve),at)}(Q,function(Ve,at){return Ve&&vr(at,Ze(at),Ve)}(tt,Q))}else{if(!j[mt])return it?Q:{};tt=function(Ve,at,Tt,Xe){var ot,en=Ve.constructor;switch(at){case _:return Ot(Ve);case l:case a:return new en(+Ve);case N:return function(rt,Nt){var yt=Nt?Ot(rt.buffer):rt.buffer;return new rt.constructor(yt,rt.byteOffset,rt.byteLength)}(Ve,Xe);case E:case I:case D:case L:case B:case J:case W:case le:case Z:return function(rt,Nt){var yt=Nt?Ot(rt.buffer):rt.buffer;return new rt.constructor(yt,rt.byteOffset,rt.length)}(Ve,Xe);case p:return function(rt,Nt,yt){return Ee(Nt?yt(Ie(rt),!0):Ie(rt),de,new rt.constructor)}(Ve,Xe,Tt);case f:case A:return new en(Ve);case o:return function(rt){var Nt=new rt.constructor(rt.source,V.exec(rt));return Nt.lastIndex=rt.lastIndex,Nt}(Ve);case v:return function(rt,Nt,yt){return Ee(Nt?yt(se(rt),!0):se(rt),be,new rt.constructor)}(Ve,Xe,Tt);case S:return ot=Ve,pr?Object(pr.call(ot)):{}}}(Q,mt,sn,ge)}}ft||(ft=new Cn);var An=ft.get(Q);if(An)return An;if(ft.set(Q,tt),!_t)var Rn=Oe?function(Ve){return function(at,Tt,Xe){var ot=Tt(at);return ne(at)?ot:function(en,rt){for(var Nt=-1,yt=rt.length,tn=en.length;++Nt<yt;)en[tn+Nt]=rt[Nt];return en}(ot,Xe(at))}(Ve,Ze,Jt)}(Q):Ze(Q);return function(Ve,at){for(var Tt=-1,Xe=Ve?Ve.length:0;++Tt<Xe&&at(Ve[Tt],Tt)!==!1;);}(Rn||Q,function(Ve,at){Rn&&(Ve=Q[at=Ve]),on(tt,at,sn(Ve,ge,Oe,Pe,at,Q,ft))}),tt}function Ot(Q){var ge=new Q.constructor(Q.byteLength);return new Je(ge).set(new Je(Q)),ge}function vr(Q,ge,Oe,Pe){Oe||(Oe={});for(var Ye=-1,it=ge.length;++Ye<it;){var ft=ge[Ye],tt=Pe?Pe(Oe[ft],Q[ft],ft,Oe,Q):void 0;on(Oe,ft,tt===void 0?Q[ft]:tt)}return Oe}function vt(Q,ge){var Oe,Pe,Ye=Q.__data__;return((Pe=typeof(Oe=ge))=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?Oe!=="__proto__":Oe===null)?Ye[typeof ge=="string"?"string":"hash"]:Ye.map}function kt(Q,ge){var Oe=function(Pe,Ye){return Pe==null?void 0:Pe[Ye]}(Q,ge);return function(Pe){return!(!ze(Pe)||(Ye=Pe,he&&he in Ye))&&(Re(Pe)||xe(Pe)?et:M).test(xt(Pe));var Ye}(Oe)?Oe:void 0}gn.prototype.clear=function(){this.__data__=Lt?Lt(null):{}},gn.prototype.delete=function(Q){return this.has(Q)&&delete this.__data__[Q]},gn.prototype.get=function(Q){var ge=this.__data__;if(Lt){var Oe=ge[Q];return Oe===O?void 0:Oe}return ke.call(ge,Q)?ge[Q]:void 0},gn.prototype.has=function(Q){var ge=this.__data__;return Lt?ge[Q]!==void 0:ke.call(ge,Q)},gn.prototype.set=function(Q,ge){return this.__data__[Q]=Lt&&ge===void 0?O:ge,this},jt.prototype.clear=function(){this.__data__=[]},jt.prototype.delete=function(Q){var ge=this.__data__,Oe=ue(ge,Q);return!(Oe<0||(Oe==ge.length-1?ge.pop():fn.call(ge,Oe,1),0))},jt.prototype.get=function(Q){var ge=this.__data__,Oe=ue(ge,Q);return Oe<0?void 0:ge[Oe][1]},jt.prototype.has=function(Q){return ue(this.__data__,Q)>-1},jt.prototype.set=function(Q,ge){var Oe=this.__data__,Pe=ue(Oe,Q);return Pe<0?Oe.push([Q,ge]):Oe[Pe][1]=ge,this},Ht.prototype.clear=function(){this.__data__={hash:new gn,map:new(zt||jt),string:new gn}},Ht.prototype.delete=function(Q){return vt(this,Q).delete(Q)},Ht.prototype.get=function(Q){return vt(this,Q).get(Q)},Ht.prototype.has=function(Q){return vt(this,Q).has(Q)},Ht.prototype.set=function(Q,ge){return vt(this,Q).set(Q,ge),this},Cn.prototype.clear=function(){this.__data__=new jt},Cn.prototype.delete=function(Q){return this.__data__.delete(Q)},Cn.prototype.get=function(Q){return this.__data__.get(Q)},Cn.prototype.has=function(Q){return this.__data__.has(Q)},Cn.prototype.set=function(Q,ge){var Oe=this.__data__;if(Oe instanceof jt){var Pe=Oe.__data__;if(!zt||Pe.length<199)return Pe.push([Q,ge]),this;Oe=this.__data__=new Ht(Pe)}return Oe.set(Q,ge),this};var Jt=Bt?H(Bt,Object):function(){return[]},Et=function(Q){return Be.call(Q)};function Wt(Q,ge){return!!(ge=ge==null?m:ge)&&(typeof Q=="number"||$.test(Q))&&Q>-1&&Q%1==0&&Q<ge}function Ct(Q){var ge=Q&&Q.constructor;return Q===(typeof ge=="function"&&ge.prototype||pe)}function xt(Q){if(Q!=null){try{return Se.call(Q)}catch{}try{return Q+""}catch{}}return""}function Gt(Q,ge){return Q===ge||Q!=Q&&ge!=ge}(qt&&Et(new qt(new ArrayBuffer(1)))!=N||zt&&Et(new zt)!=p||Qt&&Et(Qt.resolve())!=u||At&&Et(new At)!=v||Kt&&Et(new Kt)!=P)&&(Et=function(Q){var ge=Be.call(Q),Oe=ge==s?Q.constructor:void 0,Pe=Oe?xt(Oe):void 0;if(Pe)switch(Pe){case hn:return N;case dn:return p;case Vn:return u;case Kn:return v;case Pr:return P}return ge});var ne=Array.isArray;function ce(Q){return Q!=null&&function(ge){return typeof ge=="number"&&ge>-1&&ge%1==0&&ge<=m}(Q.length)&&!Re(Q)}var we=Xt||function(){return!1};function Re(Q){var ge=ze(Q)?Be.call(Q):"";return ge==h||ge==g}function ze(Q){var ge=typeof Q;return!!Q&&(ge=="object"||ge=="function")}function Ze(Q){return ce(Q)?function(ge,Oe){var Pe=ne(ge)||function(tt){return function(_t){return function(mt){return!!mt&&typeof mt=="object"}(_t)&&ce(_t)}(tt)&&ke.call(tt,"callee")&&(!$t.call(tt,"callee")||Be.call(tt)==c)}(ge)?function(tt,_t){for(var mt=-1,Ft=Array(tt);++mt<tt;)Ft[mt]=_t(mt);return Ft}(ge.length,String):[],Ye=Pe.length,it=!!Ye;for(var ft in ge)!Oe&&!ke.call(ge,ft)||it&&(ft=="length"||Wt(ft,Ye))||Pe.push(ft);return Pe}(Q):function(ge){if(!Ct(ge))return Dt(ge);var Oe=[];for(var Pe in Object(ge))ke.call(ge,Pe)&&Pe!="constructor"&&Oe.push(Pe);return Oe}(Q)}x.exports=function(Q){return sn(Q,!0,!0)}},307:(x,T,y)=>{x=y.nmd(x);var O="__lodash_hash_undefined__",m=9007199254740991,c="[object Arguments]",l="[object Array]",a="[object Boolean]",h="[object Date]",g="[object Error]",p="[object Function]",f="[object Map]",s="[object Number]",u="[object Object]",o="[object Promise]",v="[object RegExp]",A="[object Set]",S="[object String]",P="[object WeakMap]",_="[object ArrayBuffer]",N="[object DataView]",E=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,D={};D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D[c]=D[l]=D[_]=D[a]=D[N]=D[h]=D[g]=D[p]=D[f]=D[s]=D[u]=D[v]=D[A]=D[S]=D[P]=!1;var L=typeof y.g=="object"&&y.g&&y.g.Object===Object&&y.g,B=typeof self=="object"&&self&&self.Object===Object&&self,J=L||B||Function("return this")(),W=T&&!T.nodeType&&T,le=W&&x&&!x.nodeType&&x,Z=le&&le.exports===W,V=Z&&L.process,M=function(){try{return V&&V.binding&&V.binding("util")}catch{}}(),$=M&&M.isTypedArray;function j(ne,ce){for(var we=-1,Re=ne==null?0:ne.length;++we<Re;)if(ce(ne[we],we,ne))return!0;return!1}function X(ne){var ce=-1,we=Array(ne.size);return ne.forEach(function(Re,ze){we[++ce]=[ze,Re]}),we}function G(ne){var ce=-1,we=Array(ne.size);return ne.forEach(function(Re){we[++ce]=Re}),we}var q,Y,ee,re=Array.prototype,de=Function.prototype,be=Object.prototype,Ee=J["__core-js_shared__"],xe=de.toString,Ie=be.hasOwnProperty,H=(q=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",se=be.toString,oe=RegExp("^"+xe.call(Ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=Z?J.Buffer:void 0,te=J.Symbol,pe=J.Uint8Array,ve=be.propertyIsEnumerable,he=re.splice,Se=te?te.toStringTag:void 0,ke=Object.getOwnPropertySymbols,Be=K?K.isBuffer:void 0,et=(Y=Object.keys,ee=Object,function(ne){return Y(ee(ne))}),Ke=Ht(J,"DataView"),Fe=Ht(J,"Map"),Je=Ht(J,"Promise"),ye=Ht(J,"Set"),Ge=Ht(J,"WeakMap"),$t=Ht(Object,"create"),fn=sn(Ke),Bt=sn(Fe),Xt=sn(Je),Dt=sn(ye),qt=sn(Ge),zt=te?te.prototype:void 0,Qt=zt?zt.valueOf:void 0;function At(ne){var ce=-1,we=ne==null?0:ne.length;for(this.clear();++ce<we;){var Re=ne[ce];this.set(Re[0],Re[1])}}function Kt(ne){var ce=-1,we=ne==null?0:ne.length;for(this.clear();++ce<we;){var Re=ne[ce];this.set(Re[0],Re[1])}}function Lt(ne){var ce=-1,we=ne==null?0:ne.length;for(this.clear();++ce<we;){var Re=ne[ce];this.set(Re[0],Re[1])}}function hn(ne){var ce=-1,we=ne==null?0:ne.length;for(this.__data__=new Lt;++ce<we;)this.add(ne[ce])}function dn(ne){var ce=this.__data__=new Kt(ne);this.size=ce.size}function Vn(ne,ce){for(var we=ne.length;we--;)if(Ot(ne[we][0],ce))return we;return-1}function Kn(ne){return ne==null?ne===void 0?"[object Undefined]":"[object Null]":Se&&Se in Object(ne)?function(ce){var we=Ie.call(ce,Se),Re=ce[Se];try{ce[Se]=void 0;var ze=!0}catch{}var Ze=se.call(ce);return ze&&(we?ce[Se]=Re:delete ce[Se]),Ze}(ne):function(ce){return se.call(ce)}(ne)}function Pr(ne){return Ct(ne)&&Kn(ne)==c}function nr(ne,ce,we,Re,ze){return ne===ce||(ne==null||ce==null||!Ct(ne)&&!Ct(ce)?ne!=ne&&ce!=ce:function(Ze,Q,ge,Oe,Pe,Ye){var it=vt(Ze),ft=vt(Q),tt=it?l:on(Ze),_t=ft?l:on(Q),mt=(tt=tt==c?u:tt)==u,Ft=(_t=_t==c?u:_t)==u,An=tt==_t;if(An&&kt(Ze)){if(!kt(Q))return!1;it=!0,mt=!1}if(An&&!mt)return Ye||(Ye=new dn),it||xt(Ze)?pr(Ze,Q,ge,Oe,Pe,Ye):function(Xe,ot,en,rt,Nt,yt,tn){switch(en){case N:if(Xe.byteLength!=ot.byteLength||Xe.byteOffset!=ot.byteOffset)return!1;Xe=Xe.buffer,ot=ot.buffer;case _:return!(Xe.byteLength!=ot.byteLength||!yt(new pe(Xe),new pe(ot)));case a:case h:case s:return Ot(+Xe,+ot);case g:return Xe.name==ot.name&&Xe.message==ot.message;case v:case S:return Xe==ot+"";case f:var pn=X;case A:var rr=1&rt;if(pn||(pn=G),Xe.size!=ot.size&&!rr)return!1;var Hn=tn.get(Xe);if(Hn)return Hn==ot;rt|=2,tn.set(Xe,ot);var _n=pr(pn(Xe),pn(ot),rt,Nt,yt,tn);return tn.delete(Xe),_n;case"[object Symbol]":if(Qt)return Qt.call(Xe)==Qt.call(ot)}return!1}(Ze,Q,tt,ge,Oe,Pe,Ye);if(!(1&ge)){var Rn=mt&&Ie.call(Ze,"__wrapped__"),Ve=Ft&&Ie.call(Q,"__wrapped__");if(Rn||Ve){var at=Rn?Ze.value():Ze,Tt=Ve?Q.value():Q;return Ye||(Ye=new dn),Pe(at,Tt,ge,Oe,Ye)}}return!!An&&(Ye||(Ye=new dn),function(Xe,ot,en,rt,Nt,yt){var tn=1&en,pn=gn(Xe),rr=pn.length;if(rr!=gn(ot).length&&!tn)return!1;for(var Hn=rr;Hn--;){var _n=pn[Hn];if(!(tn?_n in ot:Ie.call(ot,_n)))return!1}var Gr=yt.get(Xe);if(Gr&&yt.get(ot))return Gr==ot;var mr=!0;yt.set(Xe,ot),yt.set(ot,Xe);for(var Yr=tn;++Hn<rr;){var Cr=Xe[_n=pn[Hn]],Rr=ot[_n];if(rt)var wi=tn?rt(Rr,Cr,_n,ot,Xe,yt):rt(Cr,Rr,_n,Xe,ot,yt);if(!(wi===void 0?Cr===Rr||Nt(Cr,Rr,en,rt,yt):wi)){mr=!1;break}Yr||(Yr=_n=="constructor")}if(mr&&!Yr){var Dr=Xe.constructor,Lr=ot.constructor;Dr==Lr||!("constructor"in Xe)||!("constructor"in ot)||typeof Dr=="function"&&Dr instanceof Dr&&typeof Lr=="function"&&Lr instanceof Lr||(mr=!1)}return yt.delete(Xe),yt.delete(ot),mr}(Ze,Q,ge,Oe,Pe,Ye))}(ne,ce,we,Re,nr,ze))}function pr(ne,ce,we,Re,ze,Ze){var Q=1&we,ge=ne.length,Oe=ce.length;if(ge!=Oe&&!(Q&&Oe>ge))return!1;var Pe=Ze.get(ne);if(Pe&&Ze.get(ce))return Pe==ce;var Ye=-1,it=!0,ft=2&we?new hn:void 0;for(Ze.set(ne,ce),Ze.set(ce,ne);++Ye<ge;){var tt=ne[Ye],_t=ce[Ye];if(Re)var mt=Q?Re(_t,tt,Ye,ce,ne,Ze):Re(tt,_t,Ye,ne,ce,Ze);if(mt!==void 0){if(mt)continue;it=!1;break}if(ft){if(!j(ce,function(Ft,An){if(Rn=An,!ft.has(Rn)&&(tt===Ft||ze(tt,Ft,we,Re,Ze)))return ft.push(An);var Rn})){it=!1;break}}else if(tt!==_t&&!ze(tt,_t,we,Re,Ze)){it=!1;break}}return Ze.delete(ne),Ze.delete(ce),it}function gn(ne){return function(ce,we,Re){var ze=we(ce);return vt(ce)?ze:function(Ze,Q){for(var ge=-1,Oe=Q.length,Pe=Ze.length;++ge<Oe;)Ze[Pe+ge]=Q[ge];return Ze}(ze,Re(ce))}(ne,Gt,Cn)}function jt(ne,ce){var we,Re,ze=ne.__data__;return((Re=typeof(we=ce))=="string"||Re=="number"||Re=="symbol"||Re=="boolean"?we!=="__proto__":we===null)?ze[typeof ce=="string"?"string":"hash"]:ze.map}function Ht(ne,ce){var we=function(Re,ze){return Re==null?void 0:Re[ze]}(ne,ce);return function(Re){return!(!Wt(Re)||function(ze){return!!H&&H in ze}(Re))&&(Jt(Re)?oe:E).test(sn(Re))}(we)?we:void 0}At.prototype.clear=function(){this.__data__=$t?$t(null):{},this.size=0},At.prototype.delete=function(ne){var ce=this.has(ne)&&delete this.__data__[ne];return this.size-=ce?1:0,ce},At.prototype.get=function(ne){var ce=this.__data__;if($t){var we=ce[ne];return we===O?void 0:we}return Ie.call(ce,ne)?ce[ne]:void 0},At.prototype.has=function(ne){var ce=this.__data__;return $t?ce[ne]!==void 0:Ie.call(ce,ne)},At.prototype.set=function(ne,ce){var we=this.__data__;return this.size+=this.has(ne)?0:1,we[ne]=$t&&ce===void 0?O:ce,this},Kt.prototype.clear=function(){this.__data__=[],this.size=0},Kt.prototype.delete=function(ne){var ce=this.__data__,we=Vn(ce,ne);return!(we<0||(we==ce.length-1?ce.pop():he.call(ce,we,1),--this.size,0))},Kt.prototype.get=function(ne){var ce=this.__data__,we=Vn(ce,ne);return we<0?void 0:ce[we][1]},Kt.prototype.has=function(ne){return Vn(this.__data__,ne)>-1},Kt.prototype.set=function(ne,ce){var we=this.__data__,Re=Vn(we,ne);return Re<0?(++this.size,we.push([ne,ce])):we[Re][1]=ce,this},Lt.prototype.clear=function(){this.size=0,this.__data__={hash:new At,map:new(Fe||Kt),string:new At}},Lt.prototype.delete=function(ne){var ce=jt(this,ne).delete(ne);return this.size-=ce?1:0,ce},Lt.prototype.get=function(ne){return jt(this,ne).get(ne)},Lt.prototype.has=function(ne){return jt(this,ne).has(ne)},Lt.prototype.set=function(ne,ce){var we=jt(this,ne),Re=we.size;return we.set(ne,ce),this.size+=we.size==Re?0:1,this},hn.prototype.add=hn.prototype.push=function(ne){return this.__data__.set(ne,O),this},hn.prototype.has=function(ne){return this.__data__.has(ne)},dn.prototype.clear=function(){this.__data__=new Kt,this.size=0},dn.prototype.delete=function(ne){var ce=this.__data__,we=ce.delete(ne);return this.size=ce.size,we},dn.prototype.get=function(ne){return this.__data__.get(ne)},dn.prototype.has=function(ne){return this.__data__.has(ne)},dn.prototype.set=function(ne,ce){var we=this.__data__;if(we instanceof Kt){var Re=we.__data__;if(!Fe||Re.length<199)return Re.push([ne,ce]),this.size=++we.size,this;we=this.__data__=new Lt(Re)}return we.set(ne,ce),this.size=we.size,this};var Cn=ke?function(ne){return ne==null?[]:(ne=Object(ne),function(ce,we){for(var Re=-1,ze=ce==null?0:ce.length,Ze=0,Q=[];++Re<ze;){var ge=ce[Re];Oe=ge,ve.call(ne,Oe)&&(Q[Ze++]=ge)}var Oe;return Q}(ke(ne)))}:function(){return[]},on=Kn;function ue(ne,ce){return!!(ce=ce==null?m:ce)&&(typeof ne=="number"||I.test(ne))&&ne>-1&&ne%1==0&&ne<ce}function sn(ne){if(ne!=null){try{return xe.call(ne)}catch{}try{return ne+""}catch{}}return""}function Ot(ne,ce){return ne===ce||ne!=ne&&ce!=ce}(Ke&&on(new Ke(new ArrayBuffer(1)))!=N||Fe&&on(new Fe)!=f||Je&&on(Je.resolve())!=o||ye&&on(new ye)!=A||Ge&&on(new Ge)!=P)&&(on=function(ne){var ce=Kn(ne),we=ce==u?ne.constructor:void 0,Re=we?sn(we):"";if(Re)switch(Re){case fn:return N;case Bt:return f;case Xt:return o;case Dt:return A;case qt:return P}return ce});var vr=Pr(function(){return arguments}())?Pr:function(ne){return Ct(ne)&&Ie.call(ne,"callee")&&!ve.call(ne,"callee")},vt=Array.isArray,kt=Be||function(){return!1};function Jt(ne){if(!Wt(ne))return!1;var ce=Kn(ne);return ce==p||ce=="[object GeneratorFunction]"||ce=="[object AsyncFunction]"||ce=="[object Proxy]"}function Et(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=m}function Wt(ne){var ce=typeof ne;return ne!=null&&(ce=="object"||ce=="function")}function Ct(ne){return ne!=null&&typeof ne=="object"}var xt=$?function(ne){return function(ce){return ne(ce)}}($):function(ne){return Ct(ne)&&Et(ne.length)&&!!D[Kn(ne)]};function Gt(ne){return(ce=ne)!=null&&Et(ce.length)&&!Jt(ce)?function(we,Re){var ze=vt(we),Ze=!ze&&vr(we),Q=!ze&&!Ze&&kt(we),ge=!ze&&!Ze&&!Q&&xt(we),Oe=ze||Ze||Q||ge,Pe=Oe?function(ft,tt){for(var _t=-1,mt=Array(ft);++_t<ft;)mt[_t]=tt(_t);return mt}(we.length,String):[],Ye=Pe.length;for(var it in we)!Re&&!Ie.call(we,it)||Oe&&(it=="length"||Q&&(it=="offset"||it=="parent")||ge&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||ue(it,Ye))||Pe.push(it);return Pe}(ne):function(we){if(ze=(Re=we)&&Re.constructor,Re!==(typeof ze=="function"&&ze.prototype||be))return et(we);var Re,ze,Ze=[];for(var Q in Object(we))Ie.call(we,Q)&&Q!="constructor"&&Ze.push(Q);return Ze}(ne);var ce}x.exports=function(ne,ce){return nr(ne,ce)}},210:function(x,T,y){var O=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(T,"__esModule",{value:!0});var m,c=O(y(465)),l=O(y(307));(function(a){a.compose=function(h,g,p){h===void 0&&(h={}),g===void 0&&(g={}),typeof h!="object"&&(h={}),typeof g!="object"&&(g={});var f=c.default(g);for(var s in p||(f=Object.keys(f).reduce(function(u,o){return f[o]!=null&&(u[o]=f[o]),u},{})),h)h[s]!==void 0&&g[s]===void 0&&(f[s]=h[s]);return Object.keys(f).length>0?f:void 0},a.diff=function(h,g){h===void 0&&(h={}),g===void 0&&(g={}),typeof h!="object"&&(h={}),typeof g!="object"&&(g={});var p=Object.keys(h).concat(Object.keys(g)).reduce(function(f,s){return l.default(h[s],g[s])||(f[s]=g[s]===void 0?null:g[s]),f},{});return Object.keys(p).length>0?p:void 0},a.invert=function(h,g){h===void 0&&(h={}),g===void 0&&(g={}),h=h||{};var p=Object.keys(g).reduce(function(f,s){return g[s]!==h[s]&&h[s]!==void 0&&(f[s]=g[s]),f},{});return Object.keys(h).reduce(function(f,s){return h[s]!==g[s]&&g[s]===void 0&&(f[s]=null),f},p)},a.transform=function(h,g,p){if(p===void 0&&(p=!1),typeof h!="object")return g;if(typeof g=="object"){if(!p)return g;var f=Object.keys(g).reduce(function(s,u){return h[u]===void 0&&(s[u]=g[u]),s},{});return Object.keys(f).length>0?f:void 0}}})(m||(m={})),T.default=m},895:function(x,T,y){var O=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}},m=O(y(103)),c=O(y(465)),l=O(y(307)),a=O(y(210)),h=O(y(430)),g=String.fromCharCode(0),p=function(){function f(s){Array.isArray(s)?this.ops=s:s!=null&&Array.isArray(s.ops)?this.ops=s.ops:this.ops=[]}return f.prototype.insert=function(s,u){var o={};return typeof s=="string"&&s.length===0?this:(o.insert=s,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(o.attributes=u),this.push(o))},f.prototype.delete=function(s){return s<=0?this:this.push({delete:s})},f.prototype.retain=function(s,u){if(s<=0)return this;var o={retain:s};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(o.attributes=u),this.push(o)},f.prototype.push=function(s){var u=this.ops.length,o=this.ops[u-1];if(s=c.default(s),typeof o=="object"){if(typeof s.delete=="number"&&typeof o.delete=="number")return this.ops[u-1]={delete:o.delete+s.delete},this;if(typeof o.delete=="number"&&s.insert!=null&&(u-=1,typeof(o=this.ops[u-1])!="object"))return this.ops.unshift(s),this;if(l.default(s.attributes,o.attributes)){if(typeof s.insert=="string"&&typeof o.insert=="string")return this.ops[u-1]={insert:o.insert+s.insert},typeof s.attributes=="object"&&(this.ops[u-1].attributes=s.attributes),this;if(typeof s.retain=="number"&&typeof o.retain=="number")return this.ops[u-1]={retain:o.retain+s.retain},typeof s.attributes=="object"&&(this.ops[u-1].attributes=s.attributes),this}}return u===this.ops.length?this.ops.push(s):this.ops.splice(u,0,s),this},f.prototype.chop=function(){var s=this.ops[this.ops.length-1];return s&&s.retain&&!s.attributes&&this.ops.pop(),this},f.prototype.filter=function(s){return this.ops.filter(s)},f.prototype.forEach=function(s){this.ops.forEach(s)},f.prototype.map=function(s){return this.ops.map(s)},f.prototype.partition=function(s){var u=[],o=[];return this.forEach(function(v){(s(v)?u:o).push(v)}),[u,o]},f.prototype.reduce=function(s,u){return this.ops.reduce(s,u)},f.prototype.changeLength=function(){return this.reduce(function(s,u){return u.insert?s+h.default.length(u):u.delete?s-u.delete:s},0)},f.prototype.length=function(){return this.reduce(function(s,u){return s+h.default.length(u)},0)},f.prototype.slice=function(s,u){s===void 0&&(s=0),u===void 0&&(u=1/0);for(var o=[],v=h.default.iterator(this.ops),A=0;A<u&&v.hasNext();){var S=void 0;A<s?S=v.next(s-A):(S=v.next(u-A),o.push(S)),A+=h.default.length(S)}return new f(o)},f.prototype.compose=function(s){var u=h.default.iterator(this.ops),o=h.default.iterator(s.ops),v=[],A=o.peek();if(A!=null&&typeof A.retain=="number"&&A.attributes==null){for(var S=A.retain;u.peekType()==="insert"&&u.peekLength()<=S;)S-=u.peekLength(),v.push(u.next());A.retain-S>0&&o.next(A.retain-S)}for(var P=new f(v);u.hasNext()||o.hasNext();)if(o.peekType()==="insert")P.push(o.next());else if(u.peekType()==="delete")P.push(u.next());else{var _=Math.min(u.peekLength(),o.peekLength()),N=u.next(_),E=o.next(_);if(typeof E.retain=="number"){var I={};typeof N.retain=="number"?I.retain=_:I.insert=N.insert;var D=a.default.compose(N.attributes,E.attributes,typeof N.retain=="number");if(D&&(I.attributes=D),P.push(I),!o.hasNext()&&l.default(P.ops[P.ops.length-1],I)){var L=new f(u.rest());return P.concat(L).chop()}}else typeof E.delete=="number"&&typeof N.retain=="number"&&P.push(E)}return P.chop()},f.prototype.concat=function(s){var u=new f(this.ops.slice());return s.ops.length>0&&(u.push(s.ops[0]),u.ops=u.ops.concat(s.ops.slice(1))),u},f.prototype.diff=function(s,u){if(this.ops===s.ops)return new f;var o=[this,s].map(function(_){return _.map(function(N){if(N.insert!=null)return typeof N.insert=="string"?N.insert:g;throw new Error("diff() called "+(_===s?"on":"with")+" non-document")}).join("")}),v=new f,A=m.default(o[0],o[1],u),S=h.default.iterator(this.ops),P=h.default.iterator(s.ops);return A.forEach(function(_){for(var N=_[1].length;N>0;){var E=0;switch(_[0]){case m.default.INSERT:E=Math.min(P.peekLength(),N),v.push(P.next(E));break;case m.default.DELETE:E=Math.min(N,S.peekLength()),S.next(E),v.delete(E);break;case m.default.EQUAL:E=Math.min(S.peekLength(),P.peekLength(),N);var I=S.next(E),D=P.next(E);l.default(I.insert,D.insert)?v.retain(E,a.default.diff(I.attributes,D.attributes)):v.push(D).delete(E)}N-=E}}),v.chop()},f.prototype.eachLine=function(s,u){u===void 0&&(u=`
`);for(var o=h.default.iterator(this.ops),v=new f,A=0;o.hasNext();){if(o.peekType()!=="insert")return;var S=o.peek(),P=h.default.length(S)-o.peekLength(),_=typeof S.insert=="string"?S.insert.indexOf(u,P)-P:-1;if(_<0)v.push(o.next());else if(_>0)v.push(o.next(_));else{if(s(v,o.next(1).attributes||{},A)===!1)return;A+=1,v=new f}}v.length()>0&&s(v,{},A)},f.prototype.invert=function(s){var u=new f;return this.reduce(function(o,v){if(v.insert)u.delete(h.default.length(v));else{if(v.retain&&v.attributes==null)return u.retain(v.retain),o+v.retain;if(v.delete||v.retain&&v.attributes){var A=v.delete||v.retain;return s.slice(o,o+A).forEach(function(S){v.delete?u.push(S):v.retain&&v.attributes&&u.retain(h.default.length(S),a.default.invert(v.attributes,S.attributes))}),o+A}}return o},0),u.chop()},f.prototype.transform=function(s,u){if(u===void 0&&(u=!1),u=!!u,typeof s=="number")return this.transformPosition(s,u);for(var o=s,v=h.default.iterator(this.ops),A=h.default.iterator(o.ops),S=new f;v.hasNext()||A.hasNext();)if(v.peekType()!=="insert"||!u&&A.peekType()==="insert")if(A.peekType()==="insert")S.push(A.next());else{var P=Math.min(v.peekLength(),A.peekLength()),_=v.next(P),N=A.next(P);if(_.delete)continue;N.delete?S.push(N):S.retain(P,a.default.transform(_.attributes,N.attributes,u))}else S.retain(h.default.length(v.next()));return S.chop()},f.prototype.transformPosition=function(s,u){u===void 0&&(u=!1),u=!!u;for(var o=h.default.iterator(this.ops),v=0;o.hasNext()&&v<=s;){var A=o.peekLength(),S=o.peekType();o.next(),S!=="delete"?(S==="insert"&&(v<s||!u)&&(s+=A),v+=A):s-=Math.min(A,s-v)}return s},f.Op=h.default,f.AttributeMap=a.default,f}();x.exports=p},977:function(x,T,y){var O=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(T,"__esModule",{value:!0});var m=O(y(430)),c=function(){function l(a){this.ops=a,this.index=0,this.offset=0}return l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(a){a||(a=1/0);var h=this.ops[this.index];if(h){var g=this.offset,p=m.default.length(h);if(a>=p-g?(a=p-g,this.index+=1,this.offset=0):this.offset+=a,typeof h.delete=="number")return{delete:a};var f={};return h.attributes&&(f.attributes=h.attributes),typeof h.retain=="number"?f.retain=a:typeof h.insert=="string"?f.insert=h.insert.substr(g,a):f.insert=h.insert,f}return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?m.default.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var a=this.offset,h=this.index,g=this.next(),p=this.ops.slice(this.index);return this.offset=a,this.index=h,[g].concat(p)}return[]},l}();T.default=c},430:function(x,T,y){var O=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(T,"__esModule",{value:!0});var m,c=O(y(977));(function(l){l.iterator=function(a){return new c.default(a)},l.length=function(a){return typeof a.delete=="number"?a.delete:typeof a.retain=="number"?a.retain:typeof a.insert=="string"?a.insert.length:1}})(m||(m={})),T.default=m},103:x=>{var T=-1;function y(u,o,v,A){if(u===o)return u?[[0,u]]:[];if(v!=null){var S=function(I,D,L){var B=typeof L=="number"?{index:L,length:0}:L.oldRange,J=typeof L=="number"?null:L.newRange,W=I.length,le=D.length;if(B.length===0&&(J===null||J.length===0)){var Z=B.index,V=I.slice(0,Z),M=I.slice(Z),$=J?J.index:null,j=Z+le-W;if(($===null||$===j)&&!(j<0||j>le)){var X=D.slice(0,j);if((Y=D.slice(j))===M){var G=Math.min(Z,j);if((re=V.slice(0,G))===(be=X.slice(0,G)))return f(re,V.slice(G),X.slice(G),M)}}if($===null||$===Z){var q=Z,Y=(X=D.slice(0,q),D.slice(q));if(X===V){var ee=Math.min(W-q,le-q);if((de=M.slice(M.length-ee))===(Ee=Y.slice(Y.length-ee)))return f(V,M.slice(0,M.length-ee),Y.slice(0,Y.length-ee),de)}}}if(B.length>0&&J&&J.length===0){var re=I.slice(0,B.index),de=I.slice(B.index+B.length);if(!(le<(G=re.length)+(ee=de.length))){var be=D.slice(0,G),Ee=D.slice(le-ee);if(re===be&&de===Ee)return f(re,I.slice(G,W-ee),D.slice(G,le-ee),de)}}return null}(u,o,v);if(S)return S}var P=m(u,o),_=u.substring(0,P);P=c(u=u.substring(P),o=o.substring(P));var N=u.substring(u.length-P),E=function(I,D){var L;if(!I)return[[1,D]];if(!D)return[[T,I]];var B=I.length>D.length?I:D,J=I.length>D.length?D:I,W=B.indexOf(J);if(W!==-1)return L=[[1,B.substring(0,W)],[0,J],[1,B.substring(W+J.length)]],I.length>D.length&&(L[0][0]=L[2][0]=T),L;if(J.length===1)return[[T,I],[1,D]];var le=function(q,Y){var ee=q.length>Y.length?q:Y,re=q.length>Y.length?Y:q;if(ee.length<4||2*re.length<ee.length)return null;function de(K,te,pe){for(var ve,he,Se,ke,Be=K.substring(pe,pe+Math.floor(K.length/4)),et=-1,Ke="";(et=te.indexOf(Be,et+1))!==-1;){var Fe=m(K.substring(pe),te.substring(et)),Je=c(K.substring(0,pe),te.substring(0,et));Ke.length<Je+Fe&&(Ke=te.substring(et-Je,et)+te.substring(et,et+Fe),ve=K.substring(0,pe-Je),he=K.substring(pe+Fe),Se=te.substring(0,et-Je),ke=te.substring(et+Fe))}return 2*Ke.length>=K.length?[ve,he,Se,ke,Ke]:null}var be,Ee,xe,Ie,H,se=de(ee,re,Math.ceil(ee.length/4)),oe=de(ee,re,Math.ceil(ee.length/2));return se||oe?(be=oe?se&&se[4].length>oe[4].length?se:oe:se,q.length>Y.length?(Ee=be[0],xe=be[1],Ie=be[2],H=be[3]):(Ie=be[0],H=be[1],Ee=be[2],xe=be[3]),[Ee,xe,Ie,H,be[4]]):null}(I,D);if(le){var Z=le[0],V=le[1],M=le[2],$=le[3],j=le[4],X=y(Z,M),G=y(V,$);return X.concat([[0,j]],G)}return function(q,Y){for(var ee=q.length,re=Y.length,de=Math.ceil((ee+re)/2),be=de,Ee=2*de,xe=new Array(Ee),Ie=new Array(Ee),H=0;H<Ee;H++)xe[H]=-1,Ie[H]=-1;xe[be+1]=0,Ie[be+1]=0;for(var se=ee-re,oe=se%2!=0,K=0,te=0,pe=0,ve=0,he=0;he<de;he++){for(var Se=-he+K;Se<=he-te;Se+=2){for(var ke=be+Se,Be=(ye=Se===-he||Se!==he&&xe[ke-1]<xe[ke+1]?xe[ke+1]:xe[ke-1]+1)-Se;ye<ee&&Be<re&&q.charAt(ye)===Y.charAt(Be);)ye++,Be++;if(xe[ke]=ye,ye>ee)te+=2;else if(Be>re)K+=2;else if(oe&&(Fe=be+se-Se)>=0&&Fe<Ee&&Ie[Fe]!==-1&&ye>=(Ke=ee-Ie[Fe]))return O(q,Y,ye,Be)}for(var et=-he+pe;et<=he-ve;et+=2){for(var Ke,Fe=be+et,Je=(Ke=et===-he||et!==he&&Ie[Fe-1]<Ie[Fe+1]?Ie[Fe+1]:Ie[Fe-1]+1)-et;Ke<ee&&Je<re&&q.charAt(ee-Ke-1)===Y.charAt(re-Je-1);)Ke++,Je++;if(Ie[Fe]=Ke,Ke>ee)ve+=2;else if(Je>re)pe+=2;else if(!oe){var ye;if((ke=be+se-et)>=0&&ke<Ee&&xe[ke]!==-1&&(Be=be+(ye=xe[ke])-ke,ye>=(Ke=ee-Ke)))return O(q,Y,ye,Be)}}}return[[T,q],[1,Y]]}(I,D)}(u=u.substring(0,u.length-P),o=o.substring(0,o.length-P));return _&&E.unshift([0,_]),N&&E.push([0,N]),l(E,A),E}function O(u,o,v,A){var S=u.substring(0,v),P=o.substring(0,A),_=u.substring(v),N=o.substring(A),E=y(S,P),I=y(_,N);return E.concat(I)}function m(u,o){if(!u||!o||u.charAt(0)!==o.charAt(0))return 0;for(var v=0,A=Math.min(u.length,o.length),S=A,P=0;v<S;)u.substring(P,S)==o.substring(P,S)?P=v=S:A=S,S=Math.floor((A-v)/2+v);return a(u.charCodeAt(S-1))&&S--,S}function c(u,o){if(!u||!o||u.slice(-1)!==o.slice(-1))return 0;for(var v=0,A=Math.min(u.length,o.length),S=A,P=0;v<S;)u.substring(u.length-S,u.length-P)==o.substring(o.length-S,o.length-P)?P=v=S:A=S,S=Math.floor((A-v)/2+v);return h(u.charCodeAt(u.length-S))&&S--,S}function l(u,o){u.push([0,""]);for(var v,A=0,S=0,P=0,_="",N="";A<u.length;)if(A<u.length-1&&!u[A][1])u.splice(A,1);else switch(u[A][0]){case 1:P++,N+=u[A][1],A++;break;case T:S++,_+=u[A][1],A++;break;case 0:var E=A-P-S-1;if(o){if(E>=0&&p(u[E][1])){var I=u[E][1].slice(-1);if(u[E][1]=u[E][1].slice(0,-1),_=I+_,N=I+N,!u[E][1]){u.splice(E,1),A--;var D=E-1;u[D]&&u[D][0]===1&&(P++,N=u[D][1]+N,D--),u[D]&&u[D][0]===T&&(S++,_=u[D][1]+_,D--),E=D}}g(u[A][1])&&(I=u[A][1].charAt(0),u[A][1]=u[A][1].slice(1),_+=I,N+=I)}if(A<u.length-1&&!u[A][1]){u.splice(A,1);break}if(_.length>0||N.length>0){_.length>0&&N.length>0&&((v=m(N,_))!==0&&(E>=0?u[E][1]+=N.substring(0,v):(u.splice(0,0,[0,N.substring(0,v)]),A++),N=N.substring(v),_=_.substring(v)),(v=c(N,_))!==0&&(u[A][1]=N.substring(N.length-v)+u[A][1],N=N.substring(0,N.length-v),_=_.substring(0,_.length-v)));var L=P+S;_.length===0&&N.length===0?(u.splice(A-L,L),A-=L):_.length===0?(u.splice(A-L,L,[1,N]),A=A-L+1):N.length===0?(u.splice(A-L,L,[T,_]),A=A-L+1):(u.splice(A-L,L,[T,_],[1,N]),A=A-L+2)}A!==0&&u[A-1][0]===0?(u[A-1][1]+=u[A][1],u.splice(A,1)):A++,P=0,S=0,_="",N=""}u[u.length-1][1]===""&&u.pop();var B=!1;for(A=1;A<u.length-1;)u[A-1][0]===0&&u[A+1][0]===0&&(u[A][1].substring(u[A][1].length-u[A-1][1].length)===u[A-1][1]?(u[A][1]=u[A-1][1]+u[A][1].substring(0,u[A][1].length-u[A-1][1].length),u[A+1][1]=u[A-1][1]+u[A+1][1],u.splice(A-1,1),B=!0):u[A][1].substring(0,u[A+1][1].length)==u[A+1][1]&&(u[A-1][1]+=u[A+1][1],u[A][1]=u[A][1].substring(u[A+1][1].length)+u[A+1][1],u.splice(A+1,1),B=!0)),A++;B&&l(u,o)}function a(u){return u>=55296&&u<=56319}function h(u){return u>=56320&&u<=57343}function g(u){return h(u.charCodeAt(0))}function p(u){return a(u.charCodeAt(u.length-1))}function f(u,o,v,A){return p(u)||g(A)?null:function(S){for(var P=[],_=0;_<S.length;_++)S[_][1].length>0&&P.push(S[_]);return P}([[0,u],[T,o],[1,v],[0,A]])}function s(u,o,v){return y(u,o,v,!0)}s.INSERT=1,s.DELETE=T,s.EQUAL=0,x.exports=s},165:function(x,T,y){var O,m;(m=typeof(O=function(){var c,l={};function a(p,f,s){var u=p.getClientRects();if(u.length===2){var o=p.getBoundingClientRect();return u[f][s]<o[s]}return!1}function h(p){if(!p||screen.deviceXDPI===screen.logicalXDPI)return p;if("length"in p)return Array.prototype.map.call(p,h);var f=screen.deviceXDPI/screen.logicalXDPI;return{top:p.top/f,bottom:p.bottom/f,left:p.left/f,right:p.right/f,width:p.width/f,height:p.height/f}}function g(p,f){var s,u=0,o=1024;if(o>=f.length)return Array.prototype.push.apply(p,f);for(;u<f.length;)s=Array.prototype.push.apply(p,Array.prototype.slice.call(f,u,u+o)),u+=o;return s}return l.isBroken=function(){if(c===void 0){var p=document.createElement("p"),f=document.createElement("span"),s=document.createTextNode("aa"),u=document.createTextNode("aa"),o=document.createElement("img");o.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var v=document.createRange();if(c={},p.appendChild(s),p.appendChild(f),f.appendChild(o),f.appendChild(u),document.body.appendChild(p),v.setStart(s,1),v.setEnd(f,0),c.getClientRects=c.getBoundingClientRect=v.getClientRects().length>1,c.getClientRects||(v.setEnd(u,1),c.getClientRects=c.getBoundingClientRect=v.getClientRects().length===2),!c.getBoundingClientRect){v.setEnd(v.startContainer,v.startOffset);var A=v.getBoundingClientRect();c.getBoundingClientRect=A.top===0&&A.left===0}if(document.body.removeChild(p),!c.getBoundingClientRect){var S=document.createElement("p");S.style.width="0px",S.style.fontSize="20px",S.style.whiteSpace="normal",S.style.wordBreak="normal";var P=document.createTextNode("m mm");S.appendChild(P),document.body.appendChild(S),v.setStart(P,1),v.setEnd(P,2),a(v,1,"left")?c.getBoundingClientRect=!0:(v.setStart(P,1),v.setEnd(P,3),a(v,0,"top")&&(c.getBoundingClientRect=!0)),document.body.removeChild(S)}var _=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();c.ieZoom=!!_&&_<=10}return c},l.getClientRects=function(p){var f=this.isBroken();if(f.ieZoom)return h(p.getClientRects());if(!f.getClientRects)return p.getClientRects();var s=[],u=[],o=p.endContainer,v=p.endOffset,A=document.createRange();function S(P){for(var _=0;P=P.previousSibling;)_++;return _}for(;o!==p.commonAncestorContainer;)A.setStart(o,0),A.setEnd(o,v),g(u,A.getClientRects()),v=S(o),o=o.parentNode;return(A=p.cloneRange()).setEnd(o,v),g(s,A.getClientRects()),g(s,u),s},l.getBoundingClientRect=function(p){var f=this.getClientRects(p);if(f.length===0)return null;var s,u=p.getBoundingClientRect(),o=this.isBroken();if(o.ieZoom)return h(u);if(!o.getBoundingClientRect)return u;if(u.width===0&&u.height===0)return f[0];for(var v=0,A=f.length;v<A;v++){var S=f[v];s?(s.left=Math.min(s.left,S.left),s.top=Math.min(s.top,S.top),s.right=Math.max(s.right,S.right),s.bottom=Math.max(s.bottom,S.bottom)):s={left:S.left,top:S.top,right:S.right,bottom:S.bottom}}return s&&(s.width=s.right-s.left,s.height=s.bottom-s.top),s},l})=="function"?O.call(T,y,T,x):O)===void 0||(x.exports=m)},33:(x,T,y)=>{y.r(T),y.d(T,{default:()=>D});var O=function(){if(typeof Map<"u")return Map;function L(B,J){var W=-1;return B.some(function(le,Z){return le[0]===J&&(W=Z,!0)}),W}return function(){function B(){this.__entries__=[]}return Object.defineProperty(B.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),B.prototype.get=function(J){var W=L(this.__entries__,J),le=this.__entries__[W];return le&&le[1]},B.prototype.set=function(J,W){var le=L(this.__entries__,J);~le?this.__entries__[le][1]=W:this.__entries__.push([J,W])},B.prototype.delete=function(J){var W=this.__entries__,le=L(W,J);~le&&W.splice(le,1)},B.prototype.has=function(J){return!!~L(this.__entries__,J)},B.prototype.clear=function(){this.__entries__.splice(0)},B.prototype.forEach=function(J,W){W===void 0&&(W=null);for(var le=0,Z=this.__entries__;le<Z.length;le++){var V=Z[le];J.call(W,V[1],V[0])}},B}()}(),m=typeof window<"u"&&typeof document<"u"&&window.document===document,c=y.g!==void 0&&y.g.Math===Math?y.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),l=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(c):function(L){return setTimeout(function(){return L(Date.now())},1e3/60)},a=["top","right","bottom","left","width","height","size","weight"],h=typeof MutationObserver<"u",g=function(){function L(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(B,J){var W=!1,le=!1,Z=0;function V(){W&&(W=!1,B()),le&&$()}function M(){l(V)}function $(){var j=Date.now();if(W){if(j-Z<2)return;le=!0}else W=!0,le=!1,setTimeout(M,20);Z=j}return $}(this.refresh.bind(this))}return L.prototype.addObserver=function(B){~this.observers_.indexOf(B)||this.observers_.push(B),this.connected_||this.connect_()},L.prototype.removeObserver=function(B){var J=this.observers_,W=J.indexOf(B);~W&&J.splice(W,1),!J.length&&this.connected_&&this.disconnect_()},L.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},L.prototype.updateObservers_=function(){var B=this.observers_.filter(function(J){return J.gatherActive(),J.hasActive()});return B.forEach(function(J){return J.broadcastActive()}),B.length>0},L.prototype.connect_=function(){m&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),h?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},L.prototype.disconnect_=function(){m&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},L.prototype.onTransitionEnd_=function(B){var J=B.propertyName,W=J===void 0?"":J;a.some(function(le){return!!~W.indexOf(le)})&&this.refresh()},L.getInstance=function(){return this.instance_||(this.instance_=new L),this.instance_},L.instance_=null,L}(),p=function(L,B){for(var J=0,W=Object.keys(B);J<W.length;J++){var le=W[J];Object.defineProperty(L,le,{value:B[le],enumerable:!1,writable:!1,configurable:!0})}return L},f=function(L){return L&&L.ownerDocument&&L.ownerDocument.defaultView||c},s=S(0,0,0,0);function u(L){return parseFloat(L)||0}function o(L){for(var B=[],J=1;J<arguments.length;J++)B[J-1]=arguments[J];return B.reduce(function(W,le){return W+u(L["border-"+le+"-width"])},0)}var v=typeof SVGGraphicsElement<"u"?function(L){return L instanceof f(L).SVGGraphicsElement}:function(L){return L instanceof f(L).SVGElement&&typeof L.getBBox=="function"};function A(L){return m?v(L)?function(B){var J=B.getBBox();return S(0,0,J.width,J.height)}(L):function(B){var J=B.clientWidth,W=B.clientHeight;if(!J&&!W)return s;var le=f(B).getComputedStyle(B),Z=function(q){for(var Y={},ee=0,re=["top","right","bottom","left"];ee<re.length;ee++){var de=re[ee],be=q["padding-"+de];Y[de]=u(be)}return Y}(le),V=Z.left+Z.right,M=Z.top+Z.bottom,$=u(le.width),j=u(le.height);if(le.boxSizing==="border-box"&&(Math.round($+V)!==J&&($-=o(le,"left","right")+V),Math.round(j+M)!==W&&(j-=o(le,"top","bottom")+M)),!function(q){return q===f(q).document.documentElement}(B)){var X=Math.round($+V)-J,G=Math.round(j+M)-W;Math.abs(X)!==1&&($-=X),Math.abs(G)!==1&&(j-=G)}return S(Z.left,Z.top,$,j)}(L):s}function S(L,B,J,W){return{x:L,y:B,width:J,height:W}}var P=function(){function L(B){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=S(0,0,0,0),this.target=B}return L.prototype.isActive=function(){var B=A(this.target);return this.contentRect_=B,B.width!==this.broadcastWidth||B.height!==this.broadcastHeight},L.prototype.broadcastRect=function(){var B=this.contentRect_;return this.broadcastWidth=B.width,this.broadcastHeight=B.height,B},L}(),_=function(L,B){var J,W,le,Z,V,M,$,j=(W=(J=B).x,le=J.y,Z=J.width,V=J.height,M=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,$=Object.create(M.prototype),p($,{x:W,y:le,width:Z,height:V,top:le,right:W+Z,bottom:V+le,left:W}),$);p(this,{target:L,contentRect:j})},N=function(){function L(B,J,W){if(this.activeObservations_=[],this.observations_=new O,typeof B!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=B,this.controller_=J,this.callbackCtx_=W}return L.prototype.observe=function(B){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(B instanceof f(B).Element))throw new TypeError('parameter 1 is not of type "Element".');var J=this.observations_;J.has(B)||(J.set(B,new P(B)),this.controller_.addObserver(this),this.controller_.refresh())}},L.prototype.unobserve=function(B){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(B instanceof f(B).Element))throw new TypeError('parameter 1 is not of type "Element".');var J=this.observations_;J.has(B)&&(J.delete(B),J.size||this.controller_.removeObserver(this))}},L.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},L.prototype.gatherActive=function(){var B=this;this.clearActive(),this.observations_.forEach(function(J){J.isActive()&&B.activeObservations_.push(J)})},L.prototype.broadcastActive=function(){if(this.hasActive()){var B=this.callbackCtx_,J=this.activeObservations_.map(function(W){return new _(W.target,W.broadcastRect())});this.callback_.call(B,J,B),this.clearActive()}},L.prototype.clearActive=function(){this.activeObservations_.splice(0)},L.prototype.hasActive=function(){return this.activeObservations_.length>0},L}(),E=typeof WeakMap<"u"?new WeakMap:new O,I=function L(B){if(!(this instanceof L))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var J=g.getInstance(),W=new N(B,J,this);E.set(this,W)};["observe","unobserve","disconnect"].forEach(function(L){I.prototype[L]=function(){var B;return(B=E.get(this))[L].apply(B,arguments)}});const D=c.ResizeObserver!==void 0?c.ResizeObserver:I},413:(x,T,y)=>{y.r(T),y.d(T,{default:()=>S});var O=y(379),m=y.n(O),c=y(795),l=y.n(c),a=y(569),h=y.n(a),g=y(565),p=y.n(g),f=y(216),s=y.n(f),u=y(589),o=y.n(u),v=y(582),A={};A.styleTagTransform=o(),A.setAttributes=p(),A.insert=h().bind(null,"head"),A.domAPI=l(),A.insertStyleElement=s(),m()(v.Z,A);const S=v.Z&&v.Z.locals?v.Z.locals:void 0},379:x=>{var T=[];function y(c){for(var l=-1,a=0;a<T.length;a++)if(T[a].identifier===c){l=a;break}return l}function O(c,l){for(var a={},h=[],g=0;g<c.length;g++){var p=c[g],f=l.base?p[0]+l.base:p[0],s=a[f]||0,u="".concat(f," ").concat(s);a[f]=s+1;var o=y(u),v={css:p[1],media:p[2],sourceMap:p[3],supports:p[4],layer:p[5]};if(o!==-1)T[o].references++,T[o].updater(v);else{var A=m(v,l);l.byIndex=g,T.splice(g,0,{identifier:u,updater:A,references:1})}h.push(u)}return h}function m(c,l){var a=l.domAPI(l);return a.update(c),function(h){if(h){if(h.css===c.css&&h.media===c.media&&h.sourceMap===c.sourceMap&&h.supports===c.supports&&h.layer===c.layer)return;a.update(c=h)}else a.remove()}}x.exports=function(c,l){var a=O(c=c||[],l=l||{});return function(h){h=h||[];for(var g=0;g<a.length;g++){var p=y(a[g]);T[p].references--}for(var f=O(h,l),s=0;s<a.length;s++){var u=y(a[s]);T[u].references===0&&(T[u].updater(),T.splice(u,1))}a=f}}},569:x=>{var T={};x.exports=function(y,O){var m=function(c){if(T[c]===void 0){var l=document.querySelector(c);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch{l=null}T[c]=l}return T[c]}(y);if(!m)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");m.appendChild(O)}},216:x=>{x.exports=function(T){var y=document.createElement("style");return T.setAttributes(y,T.attributes),T.insert(y,T.options),y}},565:(x,T,y)=>{x.exports=function(O){var m=y.nc;m&&O.setAttribute("nonce",m)}},795:x=>{x.exports=function(T){var y=T.insertStyleElement(T);return{update:function(O){(function(m,c,l){var a="";l.supports&&(a+="@supports (".concat(l.supports,") {")),l.media&&(a+="@media ".concat(l.media," {"));var h=l.layer!==void 0;h&&(a+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),a+=l.css,h&&(a+="}"),l.media&&(a+="}"),l.supports&&(a+="}");var g=l.sourceMap;g&&typeof btoa<"u"&&(a+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(g))))," */")),c.styleTagTransform(a,m,c.options)})(y,T,O)},remove:function(){(function(O){if(O.parentNode===null)return!1;O.parentNode.removeChild(O)})(y)}}}},589:x=>{x.exports=function(T,y){if(y.styleSheet)y.styleSheet.cssText=T;else{for(;y.firstChild;)y.removeChild(y.firstChild);y.appendChild(document.createTextNode(T))}}},621:(x,T,y)=>{var O;(function(m){var c=/^\s+/,l=/\s+$/,a=0,h=m.round,g=m.min,p=m.max,f=m.random;function s(H,se){if(se=se||{},(H=H||"")instanceof s)return H;if(!(this instanceof s))return new s(H,se);var oe=function(K){var te,pe,ve,he={r:0,g:0,b:0},Se=1,ke=null,Be=null,et=null,Ke=!1,Fe=!1;return typeof K=="string"&&(K=function(Je){Je=Je.replace(c,"").replace(l,"").toLowerCase();var ye,Ge=!1;if(V[Je])Je=V[Je],Ge=!0;else if(Je=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ye=xe.rgb.exec(Je))?{r:ye[1],g:ye[2],b:ye[3]}:(ye=xe.rgba.exec(Je))?{r:ye[1],g:ye[2],b:ye[3],a:ye[4]}:(ye=xe.hsl.exec(Je))?{h:ye[1],s:ye[2],l:ye[3]}:(ye=xe.hsla.exec(Je))?{h:ye[1],s:ye[2],l:ye[3],a:ye[4]}:(ye=xe.hsv.exec(Je))?{h:ye[1],s:ye[2],v:ye[3]}:(ye=xe.hsva.exec(Je))?{h:ye[1],s:ye[2],v:ye[3],a:ye[4]}:(ye=xe.hex8.exec(Je))?{r:G(ye[1]),g:G(ye[2]),b:G(ye[3]),a:re(ye[4]),format:Ge?"name":"hex8"}:(ye=xe.hex6.exec(Je))?{r:G(ye[1]),g:G(ye[2]),b:G(ye[3]),format:Ge?"name":"hex"}:(ye=xe.hex4.exec(Je))?{r:G(ye[1]+""+ye[1]),g:G(ye[2]+""+ye[2]),b:G(ye[3]+""+ye[3]),a:re(ye[4]+""+ye[4]),format:Ge?"name":"hex8"}:!!(ye=xe.hex3.exec(Je))&&{r:G(ye[1]+""+ye[1]),g:G(ye[2]+""+ye[2]),b:G(ye[3]+""+ye[3]),format:Ge?"name":"hex"}}(K)),typeof K=="object"&&(Ie(K.r)&&Ie(K.g)&&Ie(K.b)?(te=K.r,pe=K.g,ve=K.b,he={r:255*j(te,255),g:255*j(pe,255),b:255*j(ve,255)},Ke=!0,Fe=String(K.r).substr(-1)==="%"?"prgb":"rgb"):Ie(K.h)&&Ie(K.s)&&Ie(K.v)?(ke=Y(K.s),Be=Y(K.v),he=function(Je,ye,Ge){Je=6*j(Je,360),ye=j(ye,100),Ge=j(Ge,100);var $t=m.floor(Je),fn=Je-$t,Bt=Ge*(1-ye),Xt=Ge*(1-fn*ye),Dt=Ge*(1-(1-fn)*ye),qt=$t%6;return{r:255*[Ge,Xt,Bt,Bt,Dt,Ge][qt],g:255*[Dt,Ge,Ge,Xt,Bt,Bt][qt],b:255*[Bt,Bt,Dt,Ge,Ge,Xt][qt]}}(K.h,ke,Be),Ke=!0,Fe="hsv"):Ie(K.h)&&Ie(K.s)&&Ie(K.l)&&(ke=Y(K.s),et=Y(K.l),he=function(Je,ye,Ge){var $t,fn,Bt;function Xt(zt,Qt,At){return At<0&&(At+=1),At>1&&(At-=1),At<1/6?zt+6*(Qt-zt)*At:At<.5?Qt:At<2/3?zt+(Qt-zt)*(2/3-At)*6:zt}if(Je=j(Je,360),ye=j(ye,100),Ge=j(Ge,100),ye===0)$t=fn=Bt=Ge;else{var Dt=Ge<.5?Ge*(1+ye):Ge+ye-Ge*ye,qt=2*Ge-Dt;$t=Xt(qt,Dt,Je+1/3),fn=Xt(qt,Dt,Je),Bt=Xt(qt,Dt,Je-1/3)}return{r:255*$t,g:255*fn,b:255*Bt}}(K.h,ke,et),Ke=!0,Fe="hsl"),K.hasOwnProperty("a")&&(Se=K.a)),Se=$(Se),{ok:Ke,format:K.format||Fe,r:g(255,p(he.r,0)),g:g(255,p(he.g,0)),b:g(255,p(he.b,0)),a:Se}}(H);this._originalInput=H,this._r=oe.r,this._g=oe.g,this._b=oe.b,this._a=oe.a,this._roundA=h(100*this._a)/100,this._format=se.format||oe.format,this._gradientType=se.gradientType,this._r<1&&(this._r=h(this._r)),this._g<1&&(this._g=h(this._g)),this._b<1&&(this._b=h(this._b)),this._ok=oe.ok,this._tc_id=a++}function u(H,se,oe){H=j(H,255),se=j(se,255),oe=j(oe,255);var K,te,pe=p(H,se,oe),ve=g(H,se,oe),he=(pe+ve)/2;if(pe==ve)K=te=0;else{var Se=pe-ve;switch(te=he>.5?Se/(2-pe-ve):Se/(pe+ve),pe){case H:K=(se-oe)/Se+(se<oe?6:0);break;case se:K=(oe-H)/Se+2;break;case oe:K=(H-se)/Se+4}K/=6}return{h:K,s:te,l:he}}function o(H,se,oe){H=j(H,255),se=j(se,255),oe=j(oe,255);var K,te,pe=p(H,se,oe),ve=g(H,se,oe),he=pe,Se=pe-ve;if(te=pe===0?0:Se/pe,pe==ve)K=0;else{switch(pe){case H:K=(se-oe)/Se+(se<oe?6:0);break;case se:K=(oe-H)/Se+2;break;case oe:K=(H-se)/Se+4}K/=6}return{h:K,s:te,v:he}}function v(H,se,oe,K){var te=[q(h(H).toString(16)),q(h(se).toString(16)),q(h(oe).toString(16))];return K&&te[0].charAt(0)==te[0].charAt(1)&&te[1].charAt(0)==te[1].charAt(1)&&te[2].charAt(0)==te[2].charAt(1)?te[0].charAt(0)+te[1].charAt(0)+te[2].charAt(0):te.join("")}function A(H,se,oe,K){return[q(ee(K)),q(h(H).toString(16)),q(h(se).toString(16)),q(h(oe).toString(16))].join("")}function S(H,se){se=se===0?0:se||10;var oe=s(H).toHsl();return oe.s-=se/100,oe.s=X(oe.s),s(oe)}function P(H,se){se=se===0?0:se||10;var oe=s(H).toHsl();return oe.s+=se/100,oe.s=X(oe.s),s(oe)}function _(H){return s(H).desaturate(100)}function N(H,se){se=se===0?0:se||10;var oe=s(H).toHsl();return oe.l+=se/100,oe.l=X(oe.l),s(oe)}function E(H,se){se=se===0?0:se||10;var oe=s(H).toRgb();return oe.r=p(0,g(255,oe.r-h(-se/100*255))),oe.g=p(0,g(255,oe.g-h(-se/100*255))),oe.b=p(0,g(255,oe.b-h(-se/100*255))),s(oe)}function I(H,se){se=se===0?0:se||10;var oe=s(H).toHsl();return oe.l-=se/100,oe.l=X(oe.l),s(oe)}function D(H,se){var oe=s(H).toHsl(),K=(oe.h+se)%360;return oe.h=K<0?360+K:K,s(oe)}function L(H){var se=s(H).toHsl();return se.h=(se.h+180)%360,s(se)}function B(H){var se=s(H).toHsl(),oe=se.h;return[s(H),s({h:(oe+120)%360,s:se.s,l:se.l}),s({h:(oe+240)%360,s:se.s,l:se.l})]}function J(H){var se=s(H).toHsl(),oe=se.h;return[s(H),s({h:(oe+90)%360,s:se.s,l:se.l}),s({h:(oe+180)%360,s:se.s,l:se.l}),s({h:(oe+270)%360,s:se.s,l:se.l})]}function W(H){var se=s(H).toHsl(),oe=se.h;return[s(H),s({h:(oe+72)%360,s:se.s,l:se.l}),s({h:(oe+216)%360,s:se.s,l:se.l})]}function le(H,se,oe){se=se||6,oe=oe||30;var K=s(H).toHsl(),te=360/oe,pe=[s(H)];for(K.h=(K.h-(te*se>>1)+720)%360;--se;)K.h=(K.h+te)%360,pe.push(s(K));return pe}function Z(H,se){se=se||6;for(var oe=s(H).toHsv(),K=oe.h,te=oe.s,pe=oe.v,ve=[],he=1/se;se--;)ve.push(s({h:K,s:te,v:pe})),pe=(pe+he)%1;return ve}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var H=this.toRgb();return(299*H.r+587*H.g+114*H.b)/1e3},getLuminance:function(){var H,se,oe,K=this.toRgb();return H=K.r/255,se=K.g/255,oe=K.b/255,.2126*(H<=.03928?H/12.92:m.pow((H+.055)/1.055,2.4))+.7152*(se<=.03928?se/12.92:m.pow((se+.055)/1.055,2.4))+.0722*(oe<=.03928?oe/12.92:m.pow((oe+.055)/1.055,2.4))},setAlpha:function(H){return this._a=$(H),this._roundA=h(100*this._a)/100,this},toHsv:function(){var H=o(this._r,this._g,this._b);return{h:360*H.h,s:H.s,v:H.v,a:this._a}},toHsvString:function(){var H=o(this._r,this._g,this._b),se=h(360*H.h),oe=h(100*H.s),K=h(100*H.v);return this._a==1?"hsv("+se+", "+oe+"%, "+K+"%)":"hsva("+se+", "+oe+"%, "+K+"%, "+this._roundA+")"},toHsl:function(){var H=u(this._r,this._g,this._b);return{h:360*H.h,s:H.s,l:H.l,a:this._a}},toHslString:function(){var H=u(this._r,this._g,this._b),se=h(360*H.h),oe=h(100*H.s),K=h(100*H.l);return this._a==1?"hsl("+se+", "+oe+"%, "+K+"%)":"hsla("+se+", "+oe+"%, "+K+"%, "+this._roundA+")"},toHex:function(H){return v(this._r,this._g,this._b,H)},toHexString:function(H){return"#"+this.toHex(H)},toHex8:function(H){return function(se,oe,K,te,pe){var ve=[q(h(se).toString(16)),q(h(oe).toString(16)),q(h(K).toString(16)),q(ee(te))];return pe&&ve[0].charAt(0)==ve[0].charAt(1)&&ve[1].charAt(0)==ve[1].charAt(1)&&ve[2].charAt(0)==ve[2].charAt(1)&&ve[3].charAt(0)==ve[3].charAt(1)?ve[0].charAt(0)+ve[1].charAt(0)+ve[2].charAt(0)+ve[3].charAt(0):ve.join("")}(this._r,this._g,this._b,this._a,H)},toHex8String:function(H){return"#"+this.toHex8(H)},toRgb:function(){return{r:h(this._r),g:h(this._g),b:h(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+h(this._r)+", "+h(this._g)+", "+h(this._b)+")":"rgba("+h(this._r)+", "+h(this._g)+", "+h(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:h(100*j(this._r,255))+"%",g:h(100*j(this._g,255))+"%",b:h(100*j(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+h(100*j(this._r,255))+"%, "+h(100*j(this._g,255))+"%, "+h(100*j(this._b,255))+"%)":"rgba("+h(100*j(this._r,255))+"%, "+h(100*j(this._g,255))+"%, "+h(100*j(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(M[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(H){var se="#"+A(this._r,this._g,this._b,this._a),oe=se,K=this._gradientType?"GradientType = 1, ":"";if(H){var te=s(H);oe="#"+A(te._r,te._g,te._b,te._a)}return"progid:DXImageTransform.Microsoft.gradient("+K+"startColorstr="+se+",endColorstr="+oe+")"},toString:function(H){var se=!!H;H=H||this._format;var oe=!1,K=this._a<1&&this._a>=0;return se||!K||H!=="hex"&&H!=="hex6"&&H!=="hex3"&&H!=="hex4"&&H!=="hex8"&&H!=="name"?(H==="rgb"&&(oe=this.toRgbString()),H==="prgb"&&(oe=this.toPercentageRgbString()),H!=="hex"&&H!=="hex6"||(oe=this.toHexString()),H==="hex3"&&(oe=this.toHexString(!0)),H==="hex4"&&(oe=this.toHex8String(!0)),H==="hex8"&&(oe=this.toHex8String()),H==="name"&&(oe=this.toName()),H==="hsl"&&(oe=this.toHslString()),H==="hsv"&&(oe=this.toHsvString()),oe||this.toHexString()):H==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return s(this.toString())},_applyModification:function(H,se){var oe=H.apply(null,[this].concat([].slice.call(se)));return this._r=oe._r,this._g=oe._g,this._b=oe._b,this.setAlpha(oe._a),this},lighten:function(){return this._applyModification(N,arguments)},brighten:function(){return this._applyModification(E,arguments)},darken:function(){return this._applyModification(I,arguments)},desaturate:function(){return this._applyModification(S,arguments)},saturate:function(){return this._applyModification(P,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(D,arguments)},_applyCombination:function(H,se){return H.apply(null,[this].concat([].slice.call(se)))},analogous:function(){return this._applyCombination(le,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(Z,arguments)},splitcomplement:function(){return this._applyCombination(W,arguments)},triad:function(){return this._applyCombination(B,arguments)},tetrad:function(){return this._applyCombination(J,arguments)}},s.fromRatio=function(H,se){if(typeof H=="object"){var oe={};for(var K in H)H.hasOwnProperty(K)&&(oe[K]=K==="a"?H[K]:Y(H[K]));H=oe}return s(H,se)},s.equals=function(H,se){return!(!H||!se)&&s(H).toRgbString()==s(se).toRgbString()},s.random=function(){return s.fromRatio({r:f(),g:f(),b:f()})},s.mix=function(H,se,oe){oe=oe===0?0:oe||50;var K=s(H).toRgb(),te=s(se).toRgb(),pe=oe/100;return s({r:(te.r-K.r)*pe+K.r,g:(te.g-K.g)*pe+K.g,b:(te.b-K.b)*pe+K.b,a:(te.a-K.a)*pe+K.a})},s.readability=function(H,se){var oe=s(H),K=s(se);return(m.max(oe.getLuminance(),K.getLuminance())+.05)/(m.min(oe.getLuminance(),K.getLuminance())+.05)},s.isReadable=function(H,se,oe){var K,te,pe,ve,he,Se=s.readability(H,se);switch(te=!1,(pe=oe,(ve=((pe=pe||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ve!=="AAA"&&(ve="AA"),(he=(pe.size||"small").toLowerCase())!=="small"&&he!=="large"&&(he="small"),K={level:ve,size:he}).level+K.size){case"AAsmall":case"AAAlarge":te=Se>=4.5;break;case"AAlarge":te=Se>=3;break;case"AAAsmall":te=Se>=7}return te},s.mostReadable=function(H,se,oe){var K,te,pe,ve,he=null,Se=0;te=(oe=oe||{}).includeFallbackColors,pe=oe.level,ve=oe.size;for(var ke=0;ke<se.length;ke++)(K=s.readability(H,se[ke]))>Se&&(Se=K,he=s(se[ke]));return s.isReadable(H,he,{level:pe,size:ve})||!te?he:(oe.includeFallbackColors=!1,s.mostReadable(H,["#fff","#000"],oe))};var V=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=s.hexNames=function(H){var se={};for(var oe in H)H.hasOwnProperty(oe)&&(se[H[oe]]=oe);return se}(V);function $(H){return H=parseFloat(H),(isNaN(H)||H<0||H>1)&&(H=1),H}function j(H,se){(function(K){return typeof K=="string"&&K.indexOf(".")!=-1&&parseFloat(K)===1})(H)&&(H="100%");var oe=function(K){return typeof K=="string"&&K.indexOf("%")!=-1}(H);return H=g(se,p(0,parseFloat(H))),oe&&(H=parseInt(H*se,10)/100),m.abs(H-se)<1e-6?1:H%se/parseFloat(se)}function X(H){return g(1,p(0,H))}function G(H){return parseInt(H,16)}function q(H){return H.length==1?"0"+H:""+H}function Y(H){return H<=1&&(H=100*H+"%"),H}function ee(H){return m.round(255*parseFloat(H)).toString(16)}function re(H){return G(H)/255}var de,be,Ee,xe=(be="[\\s|\\(]+("+(de="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+de+")[,|\\s]+("+de+")\\s*\\)?",Ee="[\\s|\\(]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")\\s*\\)?",{CSS_UNIT:new RegExp(de),rgb:new RegExp("rgb"+be),rgba:new RegExp("rgba"+Ee),hsl:new RegExp("hsl"+be),hsla:new RegExp("hsla"+Ee),hsv:new RegExp("hsv"+be),hsva:new RegExp("hsva"+Ee),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Ie(H){return!!xe.CSS_UNIT.exec(H)}x.exports?x.exports=s:(O=function(){return s}.call(T,y,T,x))===void 0||(x.exports=O)})(Math)},607:function(x,T,y){var O=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(T,"__esModule",{value:!0}),T.Cursor=T.default=void 0;var m=O(y(678));T.default=m.default;var c=O(y(353));T.Cursor=c.default,y(413)},353:(x,T,y)=>{Object.defineProperty(T,"__esModule",{value:!0});var O=y(621),m=function(){function c(l,a,h){this.id=l,this.name=a,this.color=h,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return c.prototype.build=function(l){var a=document.createElement(c.CONTAINER_ELEMENT_TAG);a.classList.add(c.CURSOR_CLASS),a.id="ql-cursor-".concat(this.id),a.innerHTML=l.template;var h=a.getElementsByClassName(c.SELECTION_CLASS)[0],g=a.getElementsByClassName(c.CARET_CONTAINER_CLASS)[0],p=g.getElementsByClassName(c.CARET_CLASS)[0],f=a.getElementsByClassName(c.FLAG_CLASS)[0];return f.style.backgroundColor=this.color,p.style.backgroundColor=this.color,a.getElementsByClassName(c.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(l.hideDelayMs,"ms"),this._hideSpeedMs=l.hideSpeedMs,this._positionFlag=l.positionFlag,f.style.transitionDelay=this._hideDelay,f.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=a,this._selectionEl=h,this._caretEl=g,this._flagEl=f,g.addEventListener("mouseover",this._setHoverState),this._el},c.prototype.show=function(){this._el.classList.remove(c.HIDDEN_CLASS)},c.prototype.hide=function(){this._el.classList.add(c.HIDDEN_CLASS)},c.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},c.prototype.toggleNearCursor=function(l,a){var h=this._getCoordinates(),g=h.left,p=h.right,f=h.top,s=h.bottom,u=l>=g&&l<=p&&a>=f&&a<=s;return this._caretEl.classList.toggle(c.CONTAINER_HOVER_CLASS,u),u},c.prototype.toggleFlag=function(l){var a=this;this._caretEl.classList.toggle(c.CONTAINER_HOVER_CLASS,l)||(this._flagEl.classList.add(c.NO_DELAY_CLASS),setTimeout(function(){return a._flagEl.classList.remove(c.NO_DELAY_CLASS)},this._hideSpeedMs))},c.prototype.updateCaret=function(l,a){this._caretEl.style.top="".concat(l.top,"px"),this._caretEl.style.left="".concat(l.left,"px"),this._caretEl.style.height="".concat(l.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,l,a):this._updateCaretFlag(l,a)},c.prototype.updateSelection=function(l,a){var h=this;this._clearSelection(),l=l||[],l=Array.from(l),l=this._sanitize(l),(l=this._sortByDomPosition(l)).forEach(function(g){return h._addSelection(g,a)})},c.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},c.prototype._toggleOpenedCursor=function(l){var a=this.toggleNearCursor(l.clientX,l.clientY);this._caretEl.classList.toggle(c.CONTAINER_NO_POINTER_CLASS,a),a||document.removeEventListener("mousemove",this._toggleOpenedCursor)},c.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},c.prototype._updateCaretFlag=function(l,a){this._flagEl.style.width="";var h=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(c.FLAG_FLIPPED_CLASS),l.left>a.width-h.width&&this._flagEl.classList.add(c.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(l.left,"px"),this._flagEl.style.top="".concat(l.top,"px"),this._flagEl.style.width="".concat(Math.ceil(h.width),"px")},c.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},c.prototype._addSelection=function(l,a){var h=this._selectionBlock(l,a);this._selectionEl.appendChild(h)},c.prototype._selectionBlock=function(l,a){var h=document.createElement(c.SELECTION_ELEMENT_TAG);return h.classList.add(c.SELECTION_BLOCK_CLASS),h.style.top="".concat(l.top-a.top,"px"),h.style.left="".concat(l.left-a.left,"px"),h.style.width="".concat(l.width,"px"),h.style.height="".concat(l.height,"px"),h.style.backgroundColor=O(this.color).setAlpha(.3).toString(),h},c.prototype._sortByDomPosition=function(l){return l.sort(function(a,h){return a.top===h.top?a.left-h.left:a.top-h.top})},c.prototype._sanitize=function(l){var a=this,h=new Set;return l.filter(function(g){if(!g.width||!g.height)return!1;var p=a._serialize(g);return!h.has(p)&&(h.add(p),!0)})},c.prototype._serialize=function(l){return["top:".concat(l.top),"right:".concat(l.right),"bottom:".concat(l.bottom),"left:".concat(l.left)].join(";")},c.CONTAINER_ELEMENT_TAG="SPAN",c.SELECTION_ELEMENT_TAG="SPAN",c.CURSOR_CLASS="ql-cursor",c.SELECTION_CLASS="ql-cursor-selections",c.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",c.CARET_CLASS="ql-cursor-caret",c.CARET_CONTAINER_CLASS="ql-cursor-caret-container",c.CONTAINER_HOVER_CLASS="hover",c.CONTAINER_NO_POINTER_CLASS="no-pointer",c.FLAG_CLASS="ql-cursor-flag",c.FLAG_FLIPPED_CLASS="flag-flipped",c.NAME_CLASS="ql-cursor-name",c.HIDDEN_CLASS="hidden",c.NO_DELAY_CLASS="no-delay",c}();T.default=m},678:function(x,T,y){var O=this&&this.__createBinding||(Object.create?function(u,o,v,A){A===void 0&&(A=v),Object.defineProperty(u,A,{enumerable:!0,get:function(){return o[v]}})}:function(u,o,v,A){A===void 0&&(A=v),u[A]=o[v]}),m=this&&this.__setModuleDefault||(Object.create?function(u,o){Object.defineProperty(u,"default",{enumerable:!0,value:o})}:function(u,o){u.default=o}),c=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var o={};if(u!=null)for(var v in u)v!=="default"&&Object.prototype.hasOwnProperty.call(u,v)&&O(o,u,v);return m(o,u),o},l=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(T,"__esModule",{value:!0});var a=l(y(353)),h=c(y(165)),g=l(y(338)),p=l(y(33)),f=y(895),s=function(){function u(o,v){v===void 0&&(v={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=o,this.options=this._setDefaults(v),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return u.prototype.createCursor=function(o,v,A){var S=this._cursors[o];if(!S){S=new a.default(o,v,A),this._cursors[o]=S;var P=S.build(this.options);this._container.appendChild(P)}return S},u.prototype.moveCursor=function(o,v){var A=this._cursors[o];A&&(A.range=v,this._updateCursor(A))},u.prototype.removeCursor=function(o){var v=this._cursors[o];v&&(v.remove(),delete this._cursors[o])},u.prototype.update=function(){var o=this;this.cursors().forEach(function(v){return o._updateCursor(v)})},u.prototype.clearCursors=function(){var o=this;this.cursors().forEach(function(v){return o.removeCursor(v.id)})},u.prototype.toggleFlag=function(o,v){var A=this._cursors[o];A&&A.toggleFlag(v)},u.prototype.cursors=function(){var o=this;return Object.keys(this._cursors).map(function(v){return o._cursors[v]})},u.prototype._registerSelectionChangeListeners=function(){var o=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(v){o._currentSelection=v})},u.prototype._registerTextChangeListener=function(){var o=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(v){return o._handleTextChange(v)})},u.prototype._registerDomListeners=function(){var o=this,v=this.quill.container.getElementsByClassName("ql-editor")[0];v.addEventListener("scroll",function(){return o.update()}),v.addEventListener("touchstart",this._handleCursorTouch)},u.prototype._handleCursorTouch=function(o){var v=this;this.cursors().forEach(function(A){A.toggleNearCursor(o.pageX,o.pageY),setTimeout(function(){return A.toggleFlag(!1)},v.options.hideDelayMs)})},u.prototype._registerResizeObserver=function(){var o=this;if(!this._isObserving){var v=this.quill.container.getElementsByClassName("ql-editor")[0],A=new p.default(function(S){S[0].target.isConnected||(A.disconnect(),o._isObserving=!1),o.update()});A.observe(v),this._isObserving=!0}},u.prototype._updateCursor=function(o){if(this._registerResizeObserver(),!o.range)return o.hide();var v=this._indexWithinQuillBounds(o.range.index),A=this._indexWithinQuillBounds(o.range.index+o.range.length),S=this.quill.getLeaf(v),P=this.quill.getLeaf(A);if(!this._leafIsValid(S)||!this._leafIsValid(P))return o.hide();o.show();var _=this._boundsContainer.getBoundingClientRect(),N=this.quill.getBounds(A);o.updateCaret(N,_);var E=this._lineRanges(o,S,P).reduce(function(I,D){return I.concat(Array.from(h.getClientRects(D)))},[]);o.updateSelection(E,_)},u.prototype._indexWithinQuillBounds=function(o){var v=this.quill.getLength(),A=v?v-1:0;return o=Math.max(o,0),Math.min(o,A)},u.prototype._leafIsValid=function(o){return o&&o[0]&&o[0].domNode&&o[1]>=0},u.prototype._handleTextChange=function(o){var v=this;window.setTimeout(function(){v.options.transformOnTextChange&&v._transformCursors(o),v.options.selectionChangeSource&&(v._emitSelection(),v.update())})},u.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},u.prototype._setDefaults=function(o){return(o=Object.assign({},o)).template||(o.template=u.DEFAULTS.template),o.containerClass||(o.containerClass=u.DEFAULTS.containerClass),o.selectionChangeSource!==null&&(o.selectionChangeSource||(o.selectionChangeSource=u.DEFAULTS.selectionChangeSource)),o.hideDelayMs=Number.isInteger(o.hideDelayMs)?o.hideDelayMs:u.DEFAULTS.hideDelayMs,o.hideSpeedMs=Number.isInteger(o.hideSpeedMs)?o.hideSpeedMs:u.DEFAULTS.hideSpeedMs,o.transformOnTextChange=!!o.transformOnTextChange,o},u.prototype._lineRanges=function(o,v,A){var S=this.quill.getLines(o.range);return S.reduce(function(P,_,N){if(!_.children){var E=document.createRange();return E.selectNode(_.domNode),P.concat(E)}var I=N===0?v:_.path(0).pop(),D=I[0],L=I[1],B=N===S.length-1?A:_.path(_.length()-1).pop(),J=B[0],W=B[1],le=document.createRange();return D.domNode.nodeType===Node.TEXT_NODE?le.setStart(D.domNode,L):le.setStartBefore(D.domNode),J.domNode.nodeType===Node.TEXT_NODE?le.setEnd(J.domNode,W):le.setEndAfter(J.domNode),P.concat(le)},[])},u.prototype._transformCursors=function(o){var v=this;o=new f(o),this.cursors().filter(function(A){return A.range}).forEach(function(A){A.range.index=o.transformPosition(A.range.index),v._updateCursor(A)})},u.DEFAULTS={template:g.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},u}();T.default=s},338:function(x,T,y){var O=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(T,"__esModule",{value:!0});var m=O(y(353)),c=`
  <span class="`.concat(m.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(m.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(m.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(m.default.FLAG_CLASS,`">
    <small class="`).concat(m.default.NAME_CLASS,`"></small>
  </div>
`);T.default=c}},C={};function k(x){var T=C[x];if(T!==void 0)return T.exports;var y=C[x]={id:x,loaded:!1,exports:{}};return z[x].call(y.exports,y,y.exports,k),y.loaded=!0,y.exports}k.n=x=>{var T=x&&x.__esModule?()=>x.default:()=>x;return k.d(T,{a:T}),T},k.d=(x,T)=>{for(var y in T)k.o(T,y)&&!k.o(x,y)&&Object.defineProperty(x,y,{enumerable:!0,get:T[y]})},k.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),k.o=(x,T)=>Object.prototype.hasOwnProperty.call(x,T),k.r=x=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},k.nmd=x=>(x.paths=[],x.children||(x.children=[]),x),k.nc=void 0;var b=k(607);return b.default})())})(Ws);const Ul=po(Ws.exports);var He=globalThis&&globalThis.__classPrivateFieldSet||function(qe,fe,z){if(!fe.has(qe))throw new TypeError("attempted to set private field on non-instance");return fe.set(qe,z),z},Ce=globalThis&&globalThis.__classPrivateFieldGet||function(qe,fe){if(!fe.has(qe))throw new TypeError("attempted to get private field on non-instance");return fe.get(qe)},fr,xr,Pn,Hr,bi,Bn,qn,jn,Fn,Un,$n,zn,Jn,Nr,Wr,hr,Fi,dr;const $l=function(qe){var fe=131,z=137,C=0;qe+="x";var k=Math.floor(9007199254740991/z);for(let b=0;b<qe.length;b++)C>k&&(C=Math.floor(C/z)),C=C*fe+qe.charCodeAt(b);return C},De="0123456789abcdef".split(""),zl=[-2147483648,8388608,32768,128],In=[24,16,8,0],ji=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Mt=[];class Jl{constructor(fe=!1,z=!1){fr.set(this,void 0),xr.set(this,void 0),Pn.set(this,void 0),Hr.set(this,void 0),bi.set(this,void 0),Bn.set(this,void 0),qn.set(this,void 0),jn.set(this,void 0),Fn.set(this,void 0),Un.set(this,void 0),$n.set(this,void 0),zn.set(this,void 0),Jn.set(this,void 0),Nr.set(this,void 0),Wr.set(this,void 0),hr.set(this,void 0),Fi.set(this,0),dr.set(this,void 0),this.init(fe,z)}init(fe,z){z?(Mt[0]=Mt[16]=Mt[1]=Mt[2]=Mt[3]=Mt[4]=Mt[5]=Mt[6]=Mt[7]=Mt[8]=Mt[9]=Mt[10]=Mt[11]=Mt[12]=Mt[13]=Mt[14]=Mt[15]=0,He(this,xr,Mt)):He(this,xr,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),fe?(He(this,Bn,3238371032),He(this,qn,914150663),He(this,jn,812702999),He(this,Fn,4144912697),He(this,Un,4290775857),He(this,$n,1750603025),He(this,zn,1694076839),He(this,Jn,3204075428)):(He(this,Bn,1779033703),He(this,qn,3144134277),He(this,jn,1013904242),He(this,Fn,2773480762),He(this,Un,1359893119),He(this,$n,2600822924),He(this,zn,528734635),He(this,Jn,1541459225)),He(this,fr,He(this,dr,He(this,Pn,He(this,Wr,0)))),He(this,Hr,He(this,Nr,!1)),He(this,bi,!0),He(this,hr,fe)}update(fe){if(Ce(this,Hr))return this;let z;fe instanceof ArrayBuffer?z=new Uint8Array(fe):z=fe;let C=0;const k=z.length,b=Ce(this,xr);for(;C<k;){let x;if(Ce(this,Nr)&&(He(this,Nr,!1),b[0]=Ce(this,fr),b[16]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=b[9]=b[10]=b[11]=b[12]=b[13]=b[14]=b[15]=0),typeof z!="string")for(x=Ce(this,dr);C<k&&x<64;++C)b[x>>2]|=z[C]<<In[x++&3];else for(x=Ce(this,dr);C<k&&x<64;++C){let T=z.charCodeAt(C);T<128?b[x>>2]|=T<<In[x++&3]:T<2048?(b[x>>2]|=(192|T>>6)<<In[x++&3],b[x>>2]|=(128|T&63)<<In[x++&3]):T<55296||T>=57344?(b[x>>2]|=(224|T>>12)<<In[x++&3],b[x>>2]|=(128|T>>6&63)<<In[x++&3],b[x>>2]|=(128|T&63)<<In[x++&3]):(T=65536+((T&1023)<<10|z.charCodeAt(++C)&1023),b[x>>2]|=(240|T>>18)<<In[x++&3],b[x>>2]|=(128|T>>12&63)<<In[x++&3],b[x>>2]|=(128|T>>6&63)<<In[x++&3],b[x>>2]|=(128|T&63)<<In[x++&3])}He(this,Fi,x),He(this,Pn,Ce(this,Pn)+(x-Ce(this,dr))),x>=64?(He(this,fr,b[16]),He(this,dr,x-64),this.hash(),He(this,Nr,!0)):He(this,dr,x)}return Ce(this,Pn)>4294967295&&(He(this,Wr,Ce(this,Wr)+(Ce(this,Pn)/4294967296<<0)),He(this,Pn,Ce(this,Pn)%4294967296)),this}finalize(){if(Ce(this,Hr))return;He(this,Hr,!0);const fe=Ce(this,xr),z=Ce(this,Fi);fe[16]=Ce(this,fr),fe[z>>2]|=zl[z&3],He(this,fr,fe[16]),z>=56&&(Ce(this,Nr)||this.hash(),fe[0]=Ce(this,fr),fe[16]=fe[1]=fe[2]=fe[3]=fe[4]=fe[5]=fe[6]=fe[7]=fe[8]=fe[9]=fe[10]=fe[11]=fe[12]=fe[13]=fe[14]=fe[15]=0),fe[14]=Ce(this,Wr)<<3|Ce(this,Pn)>>>29,fe[15]=Ce(this,Pn)<<3,this.hash()}hash(){let fe=Ce(this,Bn),z=Ce(this,qn),C=Ce(this,jn),k=Ce(this,Fn),b=Ce(this,Un),x=Ce(this,$n),T=Ce(this,zn),y=Ce(this,Jn);const O=Ce(this,xr);let m,c,l,a,h,g,p,f,s,u;for(let o=16;o<64;++o)a=O[o-15],m=(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,a=O[o-2],c=(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,O[o]=O[o-16]+m+O[o-7]+c<<0;u=z&C;for(let o=0;o<64;o+=4)Ce(this,bi)?(Ce(this,hr)?(p=300032,a=O[0]-1413257819,y=a-150054599<<0,k=a+24177077<<0):(p=704751109,a=O[0]-210244248,y=a-1521486534<<0,k=a+143694565<<0),He(this,bi,!1)):(m=(fe>>>2|fe<<30)^(fe>>>13|fe<<19)^(fe>>>22|fe<<10),c=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),p=fe&z,l=p^fe&C^u,g=b&x^~b&T,a=y+c+g+ji[o]+O[o],h=m+l,y=k+a<<0,k=a+h<<0),m=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),c=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),f=k&fe,l=f^k&z^p,g=y&b^~y&x,a=T+c+g+ji[o+1]+O[o+1],h=m+l,T=C+a<<0,C=a+h<<0,m=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10),c=(T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7),s=C&k,l=s^C&fe^f,g=T&y^~T&b,a=x+c+g+ji[o+2]+O[o+2],h=m+l,x=z+a<<0,z=a+h<<0,m=(z>>>2|z<<30)^(z>>>13|z<<19)^(z>>>22|z<<10),c=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),u=z&C,l=u^z&k^s,g=x&T^~x&y,a=b+c+g+ji[o+3]+O[o+3],h=m+l,b=fe+a<<0,fe=a+h<<0;He(this,Bn,Ce(this,Bn)+fe<<0),He(this,qn,Ce(this,qn)+z<<0),He(this,jn,Ce(this,jn)+C<<0),He(this,Fn,Ce(this,Fn)+k<<0),He(this,Un,Ce(this,Un)+b<<0),He(this,$n,Ce(this,$n)+x<<0),He(this,zn,Ce(this,zn)+T<<0),He(this,Jn,Ce(this,Jn)+y<<0)}hex(){this.finalize();const fe=Ce(this,Bn),z=Ce(this,qn),C=Ce(this,jn),k=Ce(this,Fn),b=Ce(this,Un),x=Ce(this,$n),T=Ce(this,zn),y=Ce(this,Jn);let O=De[fe>>28&15]+De[fe>>24&15]+De[fe>>20&15]+De[fe>>16&15]+De[fe>>12&15]+De[fe>>8&15]+De[fe>>4&15]+De[fe&15]+De[z>>28&15]+De[z>>24&15]+De[z>>20&15]+De[z>>16&15]+De[z>>12&15]+De[z>>8&15]+De[z>>4&15]+De[z&15]+De[C>>28&15]+De[C>>24&15]+De[C>>20&15]+De[C>>16&15]+De[C>>12&15]+De[C>>8&15]+De[C>>4&15]+De[C&15]+De[k>>28&15]+De[k>>24&15]+De[k>>20&15]+De[k>>16&15]+De[k>>12&15]+De[k>>8&15]+De[k>>4&15]+De[k&15]+De[b>>28&15]+De[b>>24&15]+De[b>>20&15]+De[b>>16&15]+De[b>>12&15]+De[b>>8&15]+De[b>>4&15]+De[b&15]+De[x>>28&15]+De[x>>24&15]+De[x>>20&15]+De[x>>16&15]+De[x>>12&15]+De[x>>8&15]+De[x>>4&15]+De[x&15]+De[T>>28&15]+De[T>>24&15]+De[T>>20&15]+De[T>>16&15]+De[T>>12&15]+De[T>>8&15]+De[T>>4&15]+De[T&15];return Ce(this,hr)||(O+=De[y>>28&15]+De[y>>24&15]+De[y>>20&15]+De[y>>16&15]+De[y>>12&15]+De[y>>8&15]+De[y>>4&15]+De[y&15]),O}toString(){return this.hex()}digest(){this.finalize();const fe=Ce(this,Bn),z=Ce(this,qn),C=Ce(this,jn),k=Ce(this,Fn),b=Ce(this,Un),x=Ce(this,$n),T=Ce(this,zn),y=Ce(this,Jn),O=[fe>>24&255,fe>>16&255,fe>>8&255,fe&255,z>>24&255,z>>16&255,z>>8&255,z&255,C>>24&255,C>>16&255,C>>8&255,C&255,k>>24&255,k>>16&255,k>>8&255,k&255,b>>24&255,b>>16&255,b>>8&255,b&255,x>>24&255,x>>16&255,x>>8&255,x&255,T>>24&255,T>>16&255,T>>8&255,T&255];return Ce(this,hr)||O.push(y>>24&255,y>>16&255,y>>8&255,y&255),O}array(){return this.digest()}arrayBuffer(){this.finalize();const fe=new ArrayBuffer(Ce(this,hr)?28:32),z=new DataView(fe);return z.setUint32(0,Ce(this,Bn)),z.setUint32(4,Ce(this,qn)),z.setUint32(8,Ce(this,jn)),z.setUint32(12,Ce(this,Fn)),z.setUint32(16,Ce(this,Un)),z.setUint32(20,Ce(this,$n)),z.setUint32(24,Ce(this,zn)),Ce(this,hr)||z.setUint32(28,Ce(this,Jn)),fe}}fr=new WeakMap,xr=new WeakMap,Pn=new WeakMap,Hr=new WeakMap,bi=new WeakMap,Bn=new WeakMap,qn=new WeakMap,jn=new WeakMap,Fn=new WeakMap,Un=new WeakMap,$n=new WeakMap,zn=new WeakMap,Jn=new WeakMap,Nr=new WeakMap,Wr=new WeakMap,hr=new WeakMap,Fi=new WeakMap,dr=new WeakMap;function Vl(qe){const fe=new Jl;return fe.update(qe),parseInt(fe.hex().substring(0,8),16)}const Kl=function(qe){var fe="#";return qe.forEach(function(z){z<16&&(fe+=0),fe+=z.toString(16)}),fe},Hl=function(qe,fe,z){qe/=360;var C=z<.5?z*(1+fe):z+fe-z*fe,k=2*z-C;return[qe+1/3,qe,qe-1/3].map(function(b){return b<0&&b++,b>1&&b--,b<1/6?b=k+(C-k)*6*b:b<.5?b=C:b<2/3?b=k+(C-k)*6*(2/3-b):b=k,Math.round(b*255)})};class Wl{constructor(fe={}){const[z,C]=[fe.lightness,fe.saturation].map(function(k){return k=k!==void 0?k:[.35,.5,.65],Array.isArray(k)?k.concat():[k]});this.L=z,this.S=C,typeof fe.hue=="number"&&(fe.hue={min:fe.hue,max:fe.hue}),typeof fe.hue=="object"&&!Array.isArray(fe.hue)&&(fe.hue=[fe.hue]),typeof fe.hue>"u"&&(fe.hue=[]),this.hueRanges=fe.hue.map(function(k){return{min:typeof k.min>"u"?0:k.min,max:typeof k.max>"u"?360:k.max}}),this.hash=Vl,typeof fe.hash=="function"&&(this.hash=fe.hash),fe.hash==="bkdr"&&(this.hash=$l)}hsl(fe){var z,C,k,b=this.hash(fe),x=727;if(this.hueRanges.length){const T=this.hueRanges[b%this.hueRanges.length];z=b/this.hueRanges.length%x*(T.max-T.min)/x+T.min}else z=b%359;return b=Math.ceil(b/360),C=this.S[b%this.S.length],b=Math.ceil(b/this.S.length),k=this.L[b%this.L.length],[z,C,k]}rgb(fe){var z=this.hsl(fe);return Hl.apply(this,z)}hex(fe){var z=this.rgb(fe);return Kl(z)}}const Ir={isOnline:!1,showOffline:qe=>{Ir.isOnline=!1,qe.innerHTML='<span class="red"> </span>'},showOnline:qe=>{Ir.isOnline=!0,qe.innerHTML='<span class="green"> </span>'},statusListener:qe=>fe=>{Ir.isOnline&&fe.value==gr.exports.StreamConnectionStatus.Disconnected?Ir.showOffline(qe):!Ir.isOnline&&fe.value==gr.exports.StreamConnectionStatus.Connected&&Ir.showOnline(qe)}};function Gl(qe,fe,z){const C=[];for(const{clientID:k,presence:b}of fe)C.push(z===k?`<b>${b.username}</b>`:b.username);qe.innerHTML=JSON.stringify(C)}function zs(qe,fe,z){qe.innerText=z.toJSON(),fe.innerText=z.getRoot().content.toTestString()}const Yl=document.getElementById("peers"),Js=document.getElementById("document"),Vs=document.getElementById("document-text"),Zl=document.getElementById("network-status"),Xl=new Wl,Ql=`vanilla-quill-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`;function go(qe){var C;const{embed:fe,...z}=(C=qe.attributes)!=null?C:{};return fe?{insert:JSON.parse(fe),attributes:z}:{insert:qe.content||"",attributes:qe.attributes}}async function eu(){const qe=new ho.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});await qe.activate();const fe=new ho.Document(Ql,{enableDevtools:!0});fe.subscribe("connection",y=>{Ir.statusListener(Zl)(y)}),fe.subscribe("presence",y=>{y.type!==gr.exports.DocEventType.PresenceChanged&&Gl(Yl,fe.getPresences(),qe.getID())}),await qe.attach(fe,{initialPresence:{username:qe.getID().slice(-2),color:Xl.hex(qe.getID().slice(-2)),selection:void 0}}),fe.update(y=>{y.content||(y.content=new ho.Text,y.content.edit(0,0,`
`))},"create content if not exists"),fe.subscribe(y=>{y.type==="snapshot"&&T(),zs(Js,Vs,fe)}),fe.subscribe("$.content",y=>{y.type==="remote-change"&&x(y.value.operations),C()}),fe.subscribe("others",y=>{y.type===gr.exports.DocEventType.Unwatched?b.removeCursor(y.value.clientID):y.type===gr.exports.DocEventType.PresenceChanged&&z(y.value)});function z(y){const{clientID:O,presence:m}=y;if(O===qe.getID()||!m)return;const{username:c,color:l,selection:a}=m;if(!a)return;const h=fe.getRoot().content.posRangeToIndexRange(a);b.createCursor(O,c,l),b.moveCursor(O,{index:h[0],length:h[1]-h[0]})}function C(){for(const y of fe.getPresences())z(y)}await qe.sync(),$s.register("modules/cursors",Ul);const k=new $s("#editor",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],["clean"]],cursors:!0},theme:"snow"}),b=k.getModule("cursors");k.on("text-change",(y,O,m)=>{if(m==="api"||!y.ops)return;let c=0,l=0;console.log(`%c quill: ${JSON.stringify(y.ops)}`,"color: green");for(const a of y.ops)a.attributes!==void 0||a.insert!==void 0?(a.retain!==void 0&&(l=c+a.retain),console.log(`%c local: ${c}-${l}: ${a.insert} ${a.attributes?JSON.stringify(a.attributes):"{}"}`,"color: green"),fe.update((h,g)=>{let p;a.attributes!==void 0&&a.insert===void 0?h.content.setStyle(c,l,a.attributes):a.insert!==void 0&&(l<c&&(l=c),typeof a.insert=="object"?p=h.content.edit(c,l," ",{embed:JSON.stringify(a.insert),...a.attributes}):p=h.content.edit(c,l,a.insert,a.attributes),c=l+a.insert.length),p&&g.set({selection:h.content.indexRangeToPosRange(p)})},`update style by ${qe.getID()}`)):a.delete!==void 0?(l=c+a.delete,console.log(`%c local: ${c}-${l}: ''`,"color: green"),fe.update((h,g)=>{const p=h.content.edit(c,l,"");p&&g.set({selection:h.content.indexRangeToPosRange(p)})},`update content by ${qe.getID()}`)):a.retain!==void 0&&(c=l+a.retain,l=c)}).on("selection-change",(y,O,m)=>{if(!!y){if(m==="api"){const{selection:c}=fe.getMyPresence();if(c){const[l,a]=fe.getRoot().content.posRangeToIndexRange(c),{index:h,length:g}=y;if(l===h&&a===h+g)return}}fe.update((c,l)=>{l.set({selection:c.content.indexRangeToPosRange([y.index,y.index+y.length])})},`update selection by ${qe.getID()}`)}});function x(y){const O=[];let m=0;for(const c of y)if(c.type==="edit"){const l=c.from,a=c.to,h=l-m,g=a-l,{insert:p,attributes:f}=go(c.value);if(console.log(`%c remote: ${l}-${a}: ${p}`,"color: skyblue"),h&&O.push({retain:h}),g&&O.push({delete:g}),p){const s={insert:p};f&&(s.attributes=f),O.push(s)}m=a}else if(c.type==="style"){const l=c.from,a=c.to,h=l-m,g=a-l,{attributes:p}=go(c.value);if(console.log(`%c remote: ${l}-${a}: ${JSON.stringify(p)}`,"color: skyblue"),h&&O.push({retain:h}),p){const f={attributes:p};g&&(f.retain=g),O.push(f)}m=a}if(O.length){console.log(`%c to quill: ${JSON.stringify(O)}`,"color: green");const c={ops:O};k.updateContents(c,"api")}}function T(){const O={ops:fe.getRoot().content.values().map(m=>go(m))};k.setContents(O,"api")}T(),C(),zs(Js,Vs,fe)}eu();
