(function(){const ye=document.createElement("link").relList;if(ye&&ye.supports&&ye.supports("modulepreload"))return;for(const D of document.querySelectorAll('link[rel="modulepreload"]'))M(D);new MutationObserver(D=>{for(const F of D)if(F.type==="childList")for(const C of F.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&M(C)}).observe(document,{childList:!0,subtree:!0});function H(D){const F={};return D.integrity&&(F.integrity=D.integrity),D.referrerpolicy&&(F.referrerPolicy=D.referrerpolicy),D.crossorigin==="use-credentials"?F.credentials="include":D.crossorigin==="anonymous"?F.credentials="omit":F.credentials="same-origin",F}function M(D){if(D.ep)return;D.ep=!0;const F=H(D);fetch(D.href,F)}})();var eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mi(Ye){return Ye&&Ye.__esModule&&Object.prototype.hasOwnProperty.call(Ye,"default")?Ye.default:Ye}var Tn={exports:{}};/*!
 * 
 * yorkie-js-sdk for building collaborative editing applications.
 *  - Version: v0.4.18
 *  - Date: 2024-04-23T11:39Z
 *  - Homepage: https://yorkie.dev
 *
 * Copyright 2020 The Yorkie Authors. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(Ye,ye){(function(M,D){Ye.exports=D()})(eo,()=>(()=>{var H={646:(C,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0});const{proto3:y,StringValue:v,Timestamp:r}=w(532),l=y.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),i=y.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),g=y.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:R},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:ue}}]),b=y.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:G},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:h,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:oe},{no:6,name:"is_removed",kind:"scalar",T:8}]),h=y.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:u},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:o,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Q}]),u=y.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),o=y.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:a,oneof:"body"},{no:2,name:"add",kind:"message",T:s,oneof:"body"},{no:3,name:"move",kind:"message",T:m,oneof:"body"},{no:4,name:"remove",kind:"message",T:p,oneof:"body"},{no:5,name:"edit",kind:"message",T:O,oneof:"body"},{no:6,name:"select",kind:"message",T:N,oneof:"body"},{no:7,name:"style",kind:"message",T:I,oneof:"body"},{no:8,name:"increase",kind:"message",T:A,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:S,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:P,oneof:"body"}]),a=y.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:x},{no:4,name:"executed_at",kind:"message",T:oe}],{localName:"Operation_Set"}),s=y.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"prev_created_at",kind:"message",T:oe},{no:3,name:"value",kind:"message",T:x},{no:4,name:"executed_at",kind:"message",T:oe}],{localName:"Operation_Add"}),m=y.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"prev_created_at",kind:"message",T:oe},{no:3,name:"created_at",kind:"message",T:oe},{no:4,name:"executed_at",kind:"message",T:oe}],{localName:"Operation_Move"}),p=y.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"created_at",kind:"message",T:oe},{no:3,name:"executed_at",kind:"message",T:oe}],{localName:"Operation_Remove"}),O=y.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"from",kind:"message",T:se},{no:3,name:"to",kind:"message",T:se},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:oe}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:oe},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),N=y.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"from",kind:"message",T:se},{no:3,name:"to",kind:"message",T:se},{no:4,name:"executed_at",kind:"message",T:oe}],{localName:"Operation_Select"}),I=y.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"from",kind:"message",T:se},{no:3,name:"to",kind:"message",T:se},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:oe},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:oe}}],{localName:"Operation_Style"}),A=y.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"value",kind:"message",T:x},{no:3,name:"executed_at",kind:"message",T:oe}],{localName:"Operation_Increase"}),S=y.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"from",kind:"message",T:le},{no:3,name:"to",kind:"message",T:le},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:oe}},{no:5,name:"contents",kind:"message",T:X,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:oe}],{localName:"Operation_TreeEdit"}),P=y.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:oe},{no:2,name:"from",kind:"message",T:le},{no:3,name:"to",kind:"message",T:le},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:oe},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0}],{localName:"Operation_TreeStyle"}),x=y.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:oe},{no:2,name:"moved_at",kind:"message",T:oe},{no:3,name:"removed_at",kind:"message",T:oe},{no:4,name:"type",kind:"enum",T:y.getEnumType(l)},{no:5,name:"value",kind:"scalar",T:12}]),R=y.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:L,oneof:"body"},{no:2,name:"json_array",kind:"message",T:J,oneof:"body"},{no:3,name:"primitive",kind:"message",T:z,oneof:"body"},{no:5,name:"text",kind:"message",T:te,oneof:"body"},{no:6,name:"counter",kind:"message",T:Z,oneof:"body"},{no:7,name:"tree",kind:"message",T:q,oneof:"body"}]),L=y.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:B,repeated:!0},{no:2,name:"created_at",kind:"message",T:oe},{no:3,name:"moved_at",kind:"message",T:oe},{no:4,name:"removed_at",kind:"message",T:oe}],{localName:"JSONElement_JSONObject"}),J=y.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:$,repeated:!0},{no:2,name:"created_at",kind:"message",T:oe},{no:3,name:"moved_at",kind:"message",T:oe},{no:4,name:"removed_at",kind:"message",T:oe}],{localName:"JSONElement_JSONArray"}),z=y.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:y.getEnumType(l)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:oe},{no:4,name:"moved_at",kind:"message",T:oe},{no:5,name:"removed_at",kind:"message",T:oe}],{localName:"JSONElement_Primitive"}),te=y.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:re,repeated:!0},{no:2,name:"created_at",kind:"message",T:oe},{no:3,name:"moved_at",kind:"message",T:oe},{no:4,name:"removed_at",kind:"message",T:oe}],{localName:"JSONElement_Text"}),Z=y.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:y.getEnumType(l)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:oe},{no:4,name:"moved_at",kind:"message",T:oe},{no:5,name:"removed_at",kind:"message",T:oe}],{localName:"JSONElement_Counter"}),q=y.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:V,repeated:!0},{no:2,name:"created_at",kind:"message",T:oe},{no:3,name:"moved_at",kind:"message",T:oe},{no:4,name:"removed_at",kind:"message",T:oe}],{localName:"JSONElement_Tree"}),B=y.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:R}]),$=y.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:$},{no:2,name:"element",kind:"message",T:R}]),U=y.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:oe}]),re=y.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:ee},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:oe},{no:4,name:"ins_prev_id",kind:"message",T:ee},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:U}}]),ee=y.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:oe},{no:2,name:"offset",kind:"scalar",T:5}]),V=y.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:ie},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:oe},{no:5,name:"ins_prev_id",kind:"message",T:ie},{no:6,name:"ins_next_id",kind:"message",T:ie},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:U}}]),X=y.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:V,repeated:!0}]),ie=y.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:oe},{no:2,name:"offset",kind:"scalar",T:5}]),le=y.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:ie},{no:2,name:"left_sibling_id",kind:"message",T:ie}]),ve=y.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:r}]),_e=y.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:r},{no:9,name:"updated_at",kind:"message",T:r}]),Ne=y.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:v},{no:2,name:"auth_webhook_url",kind:"message",T:v},{no:3,name:"auth_webhook_methods",kind:"message",T:Le},{no:4,name:"client_deactivate_threshold",kind:"message",T:v}]),Le=y.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"}),Me=y.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:r},{no:5,name:"accessed_at",kind:"message",T:r},{no:6,name:"updated_at",kind:"message",T:r}]),Q=y.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:y.getEnumType(ce)},{no:2,name:"presence",kind:"message",T:ue}]),ce=y.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),ue=y.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),G=y.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),se=y.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:oe},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),oe=y.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),we=y.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),me=y.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:y.getEnumType(i)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:we}]);_.ValueType=l,_.DocEventType=i,_.Snapshot=g,_.ChangePack=b,_.Change=h,_.ChangeID=u,_.Operation=o,_.Operation_Set=a,_.Operation_Add=s,_.Operation_Move=m,_.Operation_Remove=p,_.Operation_Edit=O,_.Operation_Select=N,_.Operation_Style=I,_.Operation_Increase=A,_.Operation_TreeEdit=S,_.Operation_TreeStyle=P,_.JSONElementSimple=x,_.JSONElement=R,_.JSONElement_JSONObject=L,_.JSONElement_JSONArray=J,_.JSONElement_Primitive=z,_.JSONElement_Text=te,_.JSONElement_Counter=Z,_.JSONElement_Tree=q,_.RHTNode=B,_.RGANode=$,_.NodeAttr=U,_.TextNode=re,_.TextNodeID=ee,_.TreeNode=V,_.TreeNodes=X,_.TreeNodeID=ie,_.TreePos=le,_.User=ve,_.Project=_e,_.UpdatableProjectFields=Ne,_.UpdatableProjectFields_AuthWebhookMethods=Le,_.DocumentSummary=Me,_.PresenceChange=Q,_.PresenceChange_ChangeType=ce,_.Presence=ue,_.Checkpoint=G,_.TextNodePos=se,_.TimeTicket=oe,_.DocEventBody=we,_.DocEvent=me},295:(C,_,w)=>{const{ActivateClientRequest:y,ActivateClientResponse:v,AttachDocumentRequest:r,AttachDocumentResponse:l,BroadcastRequest:i,BroadcastResponse:g,DeactivateClientRequest:b,DeactivateClientResponse:h,DetachDocumentRequest:u,DetachDocumentResponse:o,PushPullChangesRequest:a,PushPullChangesResponse:s,RemoveDocumentRequest:m,RemoveDocumentResponse:p,WatchDocumentRequest:O,WatchDocumentResponse:N}=w(176),{MethodKind:I}=w(532),A={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:y,O:v,kind:I.Unary},deactivateClient:{name:"DeactivateClient",I:b,O:h,kind:I.Unary},attachDocument:{name:"AttachDocument",I:r,O:l,kind:I.Unary},detachDocument:{name:"DetachDocument",I:u,O:o,kind:I.Unary},removeDocument:{name:"RemoveDocument",I:m,O:p,kind:I.Unary},pushPullChanges:{name:"PushPullChanges",I:a,O:s,kind:I.Unary},watchDocument:{name:"WatchDocument",I:O,O:N,kind:I.ServerStreaming},broadcast:{name:"Broadcast",I:i,O:g,kind:I.Unary}}};_.V=A},176:(C,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0});const{proto3:y}=w(532),{ChangePack:v,DocEvent:r}=w(646),l=y.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),i=y.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),g=y.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),b=y.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),h=y.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:v}]),u=y.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:v}]),o=y.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:v},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),a=y.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:v}]),s=y.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),m=y.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:p,oneof:"body"},{no:2,name:"event",kind:"message",T:r,oneof:"body"}]),p=y.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),O=y.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:v}]),N=y.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:v}]),I=y.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:v},{no:4,name:"push_only",kind:"scalar",T:8}]),A=y.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:v}]),S=y.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),P=y.makeMessageType("yorkie.v1.BroadcastResponse",[]);_.ActivateClientRequest=l,_.ActivateClientResponse=i,_.DeactivateClientRequest=g,_.DeactivateClientResponse=b,_.AttachDocumentRequest=h,_.AttachDocumentResponse=u,_.DetachDocumentRequest=o,_.DetachDocumentResponse=a,_.WatchDocumentRequest=s,_.WatchDocumentResponse=m,_.WatchDocumentResponse_Initialization=p,_.RemoveDocumentRequest=O,_.RemoveDocumentResponse=N,_.PushPullChangesRequest=I,_.PushPullChangesResponse=A,_.BroadcastRequest=S,_.BroadcastResponse=P},79:(C,_,w)=>{w.d(_,{Lt:()=>i,TD:()=>l,oP:()=>g});var y=w(818),v=w(120),r=w(210),l;(function(b){b[b.Varint=0]="Varint",b[b.Bit64=1]="Bit64",b[b.LengthDelimited=2]="LengthDelimited",b[b.StartGroup=3]="StartGroup",b[b.EndGroup=4]="EndGroup",b[b.Bit32=5]="Bit32"})(l||(l={}));class i{constructor(h){this.stack=[],this.textEncoder=h!=null?h:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let h=0;for(let a=0;a<this.chunks.length;a++)h+=this.chunks[a].length;let u=new Uint8Array(h),o=0;for(let a=0;a<this.chunks.length;a++)u.set(this.chunks[a],o),o+=this.chunks[a].length;return this.chunks=[],u}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let h=this.finish(),u=this.stack.pop();if(!u)throw new Error("invalid state, fork stack empty");return this.chunks=u.chunks,this.buf=u.buf,this.uint32(h.byteLength),this.raw(h)}tag(h,u){return this.uint32((h<<3|u)>>>0)}raw(h){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(h),this}uint32(h){for((0,v.fp)(h);h>127;)this.buf.push(h&127|128),h=h>>>7;return this.buf.push(h),this}int32(h){return(0,v.ug)(h),(0,y.fC)(h,this.buf),this}bool(h){return this.buf.push(h?1:0),this}bytes(h){return this.uint32(h.byteLength),this.raw(h)}string(h){let u=this.textEncoder.encode(h);return this.uint32(u.byteLength),this.raw(u)}float(h){(0,v.E_)(h);let u=new Uint8Array(4);return new DataView(u.buffer).setFloat32(0,h,!0),this.raw(u)}double(h){let u=new Uint8Array(8);return new DataView(u.buffer).setFloat64(0,h,!0),this.raw(u)}fixed32(h){(0,v.fp)(h);let u=new Uint8Array(4);return new DataView(u.buffer).setUint32(0,h,!0),this.raw(u)}sfixed32(h){(0,v.ug)(h);let u=new Uint8Array(4);return new DataView(u.buffer).setInt32(0,h,!0),this.raw(u)}sint32(h){return(0,v.ug)(h),h=(h<<1^h>>31)>>>0,(0,y.fC)(h,this.buf),this}sfixed64(h){let u=new Uint8Array(8),o=new DataView(u.buffer),a=r.q.enc(h);return o.setInt32(0,a.lo,!0),o.setInt32(4,a.hi,!0),this.raw(u)}fixed64(h){let u=new Uint8Array(8),o=new DataView(u.buffer),a=r.q.uEnc(h);return o.setInt32(0,a.lo,!0),o.setInt32(4,a.hi,!0),this.raw(u)}int64(h){let u=r.q.enc(h);return(0,y._y)(u.lo,u.hi,this.buf),this}sint64(h){let u=r.q.enc(h),o=u.hi>>31,a=u.lo<<1^o,s=(u.hi<<1|u.lo>>>31)^o;return(0,y._y)(a,s,this.buf),this}uint64(h){let u=r.q.uEnc(h);return(0,y._y)(u.lo,u.hi,this.buf),this}}class g{constructor(h,u){this.varint64=y.sg,this.uint32=y.jI,this.buf=h,this.len=h.length,this.pos=0,this.view=new DataView(h.buffer,h.byteOffset,h.byteLength),this.textDecoder=u!=null?u:new TextDecoder}tag(){let h=this.uint32(),u=h>>>3,o=h&7;if(u<=0||o<0||o>5)throw new Error("illegal tag: field no "+u+" wire type "+o);return[u,o]}skip(h){let u=this.pos;switch(h){case l.Varint:for(;this.buf[this.pos++]&128;);break;case l.Bit64:this.pos+=4;case l.Bit32:this.pos+=4;break;case l.LengthDelimited:let o=this.uint32();this.pos+=o;break;case l.StartGroup:let a;for(;(a=this.tag()[1])!==l.EndGroup;)this.skip(a);break;default:throw new Error("cant skip wire type "+h)}return this.assertBounds(),this.buf.subarray(u,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let h=this.uint32();return h>>>1^-(h&1)}int64(){return r.q.dec(...this.varint64())}uint64(){return r.q.uDec(...this.varint64())}sint64(){let[h,u]=this.varint64(),o=-(h&1);return h=(h>>>1|(u&1)<<31)^o,u=u>>>1^o,r.q.dec(h,u)}bool(){let[h,u]=this.varint64();return h!==0||u!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return r.q.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return r.q.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let h=this.uint32(),u=this.pos;return this.pos+=h,this.assertBounds(),this.buf.subarray(u,u+h)}string(){return this.textDecoder.decode(this.bytes())}}},465:(C,_,w)=>{w.d(_,{p:()=>v,w:()=>y});var y;(function(r){r[r.DOUBLE=1]="DOUBLE",r[r.FLOAT=2]="FLOAT",r[r.INT64=3]="INT64",r[r.UINT64=4]="UINT64",r[r.INT32=5]="INT32",r[r.FIXED64=6]="FIXED64",r[r.FIXED32=7]="FIXED32",r[r.BOOL=8]="BOOL",r[r.STRING=9]="STRING",r[r.BYTES=12]="BYTES",r[r.UINT32=13]="UINT32",r[r.SFIXED32=15]="SFIXED32",r[r.SFIXED64=16]="SFIXED64",r[r.SINT32=17]="SINT32",r[r.SINT64=18]="SINT64"})(y||(y={}));var v;(function(r){r[r.BIGINT=0]="BIGINT",r[r.STRING=1]="STRING"})(v||(v={}))},733:(C,_,w)=>{w.d(_,{I:()=>r});var y=w(561),v=w(850);class r extends y.v{constructor(i){super(),this.typeUrl="",this.value=new Uint8Array(0),v.w.util.initPartial(i,this)}toJson(i){var g;if(this.typeUrl==="")return{};const b=this.typeUrlToName(this.typeUrl),h=(g=i==null?void 0:i.typeRegistry)===null||g===void 0?void 0:g.findMessage(b);if(!h)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=h.fromBinary(this.value).toJson(i);return(b.startsWith("google.protobuf.")||o===null||Array.isArray(o)||typeof o!="object")&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(i,g){var b;if(i===null||Array.isArray(i)||typeof i!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${i===null?"null":Array.isArray(i)?"array":typeof i}`);if(Object.keys(i).length==0)return this;const h=i["@type"];if(typeof h!="string"||h=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const u=this.typeUrlToName(h),o=(b=g==null?void 0:g.typeRegistry)===null||b===void 0?void 0:b.findMessage(u);if(!o)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${h} is not in the type registry`);let a;if(u.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(i,"value"))a=o.fromJson(i.value,g);else{const s=Object.assign({},i);delete s["@type"],a=o.fromJson(s,g)}return this.packFrom(a),this}packFrom(i){this.value=i.toBinary(),this.typeUrl=this.typeNameToUrl(i.getType().typeName)}unpackTo(i){return this.is(i.getType())?(i.fromBinary(this.value),!0):!1}unpack(i){if(this.typeUrl==="")return;const g=i.findMessage(this.typeUrlToName(this.typeUrl));if(!!g)return g.fromBinary(this.value)}is(i){if(this.typeUrl==="")return!1;const g=this.typeUrlToName(this.typeUrl);let b="";return typeof i=="string"?b=i:b=i.typeName,g===b}typeNameToUrl(i){return`type.googleapis.com/${i}`}typeUrlToName(i){if(!i.length)throw new Error(`invalid type url: ${i}`);const g=i.lastIndexOf("/"),b=g>=0?i.substring(g+1):i;if(!b.length)throw new Error(`invalid type url: ${i}`);return b}static pack(i){const g=new r;return g.packFrom(i),g}static fromBinary(i,g){return new r().fromBinary(i,g)}static fromJson(i,g){return new r().fromJson(i,g)}static fromJsonString(i,g){return new r().fromJsonString(i,g)}static equals(i,g){return v.w.util.equals(r,i,g)}}r.runtime=v.w,r.typeName="google.protobuf.Any",r.fields=v.w.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])},818:(C,_,w)=>{w.d(_,{Ak:()=>i,CZ:()=>l,Fd:()=>g,_y:()=>v,fC:()=>a,jI:()=>s,sg:()=>y});function y(){let m=0,p=0;for(let N=0;N<28;N+=7){let I=this.buf[this.pos++];if(m|=(I&127)<<N,(I&128)==0)return this.assertBounds(),[m,p]}let O=this.buf[this.pos++];if(m|=(O&15)<<28,p=(O&112)>>4,(O&128)==0)return this.assertBounds(),[m,p];for(let N=3;N<=31;N+=7){let I=this.buf[this.pos++];if(p|=(I&127)<<N,(I&128)==0)return this.assertBounds(),[m,p]}throw new Error("invalid varint")}function v(m,p,O){for(let A=0;A<28;A=A+7){const S=m>>>A,P=!(S>>>7==0&&p==0),x=(P?S|128:S)&255;if(O.push(x),!P)return}const N=m>>>28&15|(p&7)<<4,I=p>>3!=0;if(O.push((I?N|128:N)&255),!!I){for(let A=3;A<31;A=A+7){const S=p>>>A,P=S>>>7!=0,x=(P?S|128:S)&255;if(O.push(x),!P)return}O.push(p>>>31&1)}}const r=4294967296;function l(m){const p=m[0]==="-";p&&(m=m.slice(1));const O=1e6;let N=0,I=0;function A(S,P){const x=Number(m.slice(S,P));I*=O,N=N*O+x,N>=r&&(I=I+(N/r|0),N=N%r)}return A(-24,-18),A(-18,-12),A(-12,-6),A(-6),p?u(N,I):h(N,I)}function i(m,p){let O=h(m,p);const N=O.hi&2147483648;N&&(O=u(O.lo,O.hi));const I=g(O.lo,O.hi);return N?"-"+I:I}function g(m,p){if({lo:m,hi:p}=b(m,p),p<=2097151)return String(r*p+m);const O=m&16777215,N=(m>>>24|p<<8)&16777215,I=p>>16&65535;let A=O+N*6777216+I*6710656,S=N+I*8147497,P=I*2;const x=1e7;return A>=x&&(S+=Math.floor(A/x),A%=x),S>=x&&(P+=Math.floor(S/x),S%=x),P.toString()+o(S)+o(A)}function b(m,p){return{lo:m>>>0,hi:p>>>0}}function h(m,p){return{lo:m|0,hi:p|0}}function u(m,p){return p=~p,m?m=~m+1:p+=1,h(m,p)}const o=m=>{const p=String(m);return"0000000".slice(p.length)+p};function a(m,p){if(m>=0){for(;m>127;)p.push(m&127|128),m=m>>>7;p.push(m)}else{for(let O=0;O<9;O++)p.push(m&127|128),m=m>>7;p.push(1)}}function s(){let m=this.buf[this.pos++],p=m&127;if((m&128)==0)return this.assertBounds(),p;if(m=this.buf[this.pos++],p|=(m&127)<<7,(m&128)==0)return this.assertBounds(),p;if(m=this.buf[this.pos++],p|=(m&127)<<14,(m&128)==0)return this.assertBounds(),p;if(m=this.buf[this.pos++],p|=(m&127)<<21,(m&128)==0)return this.assertBounds(),p;m=this.buf[this.pos++],p|=(m&15)<<28;for(let O=5;(m&128)!==0&&O<10;O++)m=this.buf[this.pos++];if((m&128)!=0)throw new Error("invalid varint");return this.assertBounds(),p>>>0}},532:(C,_,w)=>{w.r(_),w.d(_,{Any:()=>xn.I,Api:()=>Kn,BinaryReader:()=>S.oP,BinaryWriter:()=>S.Lt,BoolValue:()=>st,BytesValue:()=>mn,CodeGeneratorRequest:()=>cn,CodeGeneratorResponse:()=>Cn,CodeGeneratorResponse_Feature:()=>tr,CodeGeneratorResponse_File:()=>Xt,DescriptorProto:()=>ee,DescriptorProto_ExtensionRange:()=>V,DescriptorProto_ReservedRange:()=>X,DoubleValue:()=>nt,Duration:()=>qt,Edition:()=>$,Empty:()=>kt,Enum:()=>Gn,EnumDescriptorProto:()=>Q,EnumDescriptorProto_EnumReservedRange:()=>ce,EnumOptions:()=>Oe,EnumValue:()=>zn,EnumValueDescriptorProto:()=>ue,EnumValueOptions:()=>tt,ExtensionRangeOptions:()=>ie,ExtensionRangeOptions_Declaration:()=>ve,ExtensionRangeOptions_VerificationState:()=>le,FeatureSet:()=>bt,FeatureSetDefaults:()=>Yt,FeatureSetDefaults_FeatureSetEditionDefault:()=>an,FeatureSet_EnumType:()=>nn,FeatureSet_FieldPresence:()=>zt,FeatureSet_JsonFormat:()=>Rn,FeatureSet_MessageEncoding:()=>Ft,FeatureSet_RepeatedFieldEncoding:()=>Ct,FeatureSet_Utf8Validation:()=>en,Field:()=>$n,FieldDescriptorProto:()=>_e,FieldDescriptorProto_Label:()=>Le,FieldDescriptorProto_Type:()=>Ne,FieldMask:()=>Ke,FieldOptions:()=>Pe,FieldOptions_CType:()=>Be,FieldOptions_EditionDefault:()=>Je,FieldOptions_JSType:()=>qe,FieldOptions_OptionRetention:()=>at,FieldOptions_OptionTargetType:()=>ft,Field_Cardinality:()=>Vn,Field_Kind:()=>Nn,FileDescriptorProto:()=>re,FileDescriptorSet:()=>U,FileOptions:()=>oe,FileOptions_OptimizeMode:()=>we,FloatValue:()=>yt,GeneratedCodeInfo:()=>ht,GeneratedCodeInfo_Annotation:()=>Pt,GeneratedCodeInfo_Annotation_Semantic:()=>un,Int32Value:()=>Ut,Int64Value:()=>wt,ListValue:()=>rt,LongType:()=>r.p,Message:()=>q.v,MessageOptions:()=>me,Method:()=>Ln,MethodDescriptorProto:()=>se,MethodIdempotency:()=>B.w,MethodKind:()=>B.t,MethodOptions:()=>Wt,MethodOptions_IdempotencyLevel:()=>jt,Mixin:()=>Mn,NullValue:()=>gt,OneofDescriptorProto:()=>Me,OneofOptions:()=>He,Option:()=>vt,ScalarType:()=>r.w,ServiceDescriptorProto:()=>G,ServiceOptions:()=>St,SourceCodeInfo:()=>Se,SourceCodeInfo_Location:()=>Mt,SourceContext:()=>yn,StringValue:()=>xt,Struct:()=>Ot,Syntax:()=>vn,Timestamp:()=>mt,Type:()=>Hn,UInt32Value:()=>Dt,UInt64Value:()=>Bt,UninterpretedOption:()=>Rt,UninterpretedOption_NamePart:()=>$t,Value:()=>$e,Version:()=>En,WireType:()=>S.TD,codegenInfo:()=>Z,createDescriptorSet:()=>Bn,createRegistry:()=>At,createRegistryFromDescriptors:()=>Lt,proto2:()=>p,proto3:()=>y.w,protoBase64:()=>A.W,protoDelimited:()=>L,protoDouble:()=>N,protoInt64:()=>I.q,toPlainMessage:()=>gr});var y=w(850),v=w(493),r=w(465),l=w(744);function i(){return Object.assign(Object.assign({},(0,l.gY)()),{writeMessage(E,f,T){const W=E.getType();let ne;try{for(ne of W.fields.byNumber()){let de,ge=ne.repeated,xe=ne.localName;if(ne.oneof){const be=E[ne.oneof.localName];if(be.case!==xe)continue;de=be.value}else if(de=E[xe],de===void 0&&!ne.oneof&&!ne.opt)throw new Error(`cannot encode field ${W.typeName}.${ne.name} to binary: required field not set`);switch(ne.kind){case"scalar":case"enum":let be=ne.kind=="enum"?r.w.INT32:ne.T;if(ge)if(ne.packed)(0,l.Jj)(f,be,ne.no,de);else for(const Re of de)(0,l.NN)(f,be,ne.no,Re,!0);else de!==void 0&&(0,l.NN)(f,be,ne.no,de,!0);break;case"message":if(ge)for(const Re of de)(0,l.oQ)(f,T,ne,Re);else(0,l.oQ)(f,T,ne,de);break;case"map":for(const[Re,Ce]of Object.entries(de))(0,l.gQ)(f,T,ne,Re,Ce);break}}}catch(de){let ge=ne?`cannot encode field ${W.typeName}.${ne==null?void 0:ne.name} to binary`:`cannot encode message ${W.typeName} to binary`,xe=de instanceof Error?de.message:String(de);throw new Error(ge+(xe.length>0?`: ${xe}`:""))}return T.writeUnknownFields&&this.writeUnknownFields(E,f),f}})}var g=w(433),b=w(501),h=w(215),u=w(504),o=w(432),a=w(120),s=w(814);function m(){return(0,s.b)((E,f)=>function(W,ne,de){if(W.kind=="map"){const ge={};switch(W.V.kind){case"scalar":for(const[be,Re]of Object.entries(ne)){const Ce=f(W.V.T,Re,!0);(0,a.hu)(Ce!==void 0),ge[be.toString()]=Ce}break;case"message":for(const[be,Re]of Object.entries(ne))ge[be.toString()]=Re.toJson(de);break;case"enum":const xe=W.V.T;for(const[be,Re]of Object.entries(ne)){(0,a.hu)(Re===void 0||typeof Re=="number");const Ce=E(xe,Re,!0,de.enumAsInteger);(0,a.hu)(Ce!==void 0),ge[be.toString()]=Ce}break}return de.emitDefaultValues||Object.keys(ge).length>0?ge:void 0}else if(W.repeated){const ge=[];switch(W.kind){case"scalar":for(let xe=0;xe<ne.length;xe++)ge.push(f(W.T,ne[xe],!0));break;case"enum":for(let xe=0;xe<ne.length;xe++)ge.push(E(W.T,ne[xe],!0,de.enumAsInteger));break;case"message":for(let xe=0;xe<ne.length;xe++)ge.push(ne[xe].toJson(de));break}return de.emitDefaultValues||ge.length>0?ge:void 0}else{if(ne===void 0){if(!W.oneof&&!W.opt)throw"required field not set";return}switch(W.kind){case"scalar":return f(W.T,ne,!0);case"enum":return E(W.T,ne,!0,de.enumAsInteger);case"message":return(0,o.E)(W.T,ne).toJson(de)}}})}const p=(0,v.F)("proto2",m(),i(),Object.assign(Object.assign({},(0,g.f)()),{newFieldList(E){return new b.i(E,O)},initFields(E){for(const f of E.getType().fields.byMember()){const T=f.localName,W=E;if(f.repeated){W[T]=[];continue}switch(f.kind){case"oneof":W[T]={case:void 0};break;case"map":W[T]={};break}}}}));function O(E){var f,T,W,ne,de;const ge=[];let xe;for(const be of typeof E=="function"?E():E){const Re=be;if(Re.localName=(0,u.Rz)(be.name,be.oneof!==void 0),Re.jsonName=(f=be.jsonName)!==null&&f!==void 0?f:(0,u.x1)(be.name),Re.repeated=(T=be.repeated)!==null&&T!==void 0?T:!1,be.kind=="scalar"&&(Re.L=(W=be.L)!==null&&W!==void 0?W:r.p.BIGINT),be.oneof!==void 0){const Ce=typeof be.oneof=="string"?be.oneof:be.oneof.name;(!xe||xe.name!=Ce)&&(xe=new h.o(Ce)),Re.oneof=xe,xe.addField(Re)}be.kind=="message"&&(Re.delimited=(ne=be.delimited)!==null&&ne!==void 0?ne:!1),Re.packed=(de=be.packed)!==null&&de!==void 0?de:!1,ge.push(Re)}return ge}const N={NaN:Number.NaN,POSITIVE_INFINITY:Number.POSITIVE_INFINITY,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY};var I=w(210),A=w(236),S=w(79),P=function(E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var f=E[Symbol.asyncIterator],T;return f?f.call(E):(E=typeof __values=="function"?__values(E):E[Symbol.iterator](),T={},W("next"),W("throw"),W("return"),T[Symbol.asyncIterator]=function(){return this},T);function W(de){T[de]=E[de]&&function(ge){return new Promise(function(xe,be){ge=E[de](ge),ne(xe,be,ge.done,ge.value)})}}function ne(de,ge,xe,be){Promise.resolve(be).then(function(Re){de({value:Re,done:xe})},ge)}},x=function(E){return this instanceof x?(this.v=E,this):new x(E)},R=function(E,f,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W=T.apply(E,f||[]),ne,de=[];return ne={},xe("next"),xe("throw"),xe("return",ge),ne[Symbol.asyncIterator]=function(){return this},ne;function ge(It){return function(Dn){return Promise.resolve(Dn).then(It,Ge)}}function xe(It,Dn){W[It]&&(ne[It]=function(An){return new Promise(function(Er,nr){de.push([It,An,Er,nr])>1||be(It,An)})},Dn&&(ne[It]=Dn(ne[It])))}function be(It,Dn){try{Re(W[It](Dn))}catch(An){Jt(de[0][3],An)}}function Re(It){It.value instanceof x?Promise.resolve(It.value.v).then(Ce,Ge):Jt(de[0][2],It)}function Ce(It){be("next",It)}function Ge(It){be("throw",It)}function Jt(It,Dn){It(Dn),de.shift(),de.length&&be(de[0][0],de[0][1])}};const L={enc(E,f){const T=(0,l.gY)().makeWriteOptions(f);return T.writerFactory().bytes(E.toBinary(T)).finish()},dec(E,f,T){const W=(0,l.gY)().makeReadOptions(T);return E.fromBinary(W.readerFactory(f).bytes(),W)},decStream(E,f){return R(this,arguments,function*(){var W,ne,de,ge;function xe(Jt,It){const Dn=new Uint8Array(Jt.byteLength+It.byteLength);return Dn.set(Jt),Dn.set(It,Jt.length),Dn}let be=new Uint8Array(0);try{for(var Re=!0,Ce=P(f),Ge;Ge=yield x(Ce.next()),W=Ge.done,!W;Re=!0)for(ge=Ge.value,Re=!1,be=xe(be,ge);;){const It=L.peekSize(be);if(It.eof||It.offset+It.size>be.byteLength)break;yield yield x(L.dec(E,be)),be=be.subarray(It.offset+It.size)}}catch(Jt){ne={error:Jt}}finally{try{!Re&&!W&&(de=Ce.return)&&(yield x(de.call(Ce)))}finally{if(ne)throw ne.error}}if(be.byteLength>0)throw new Error("incomplete data")})},peekSize(E){const f={eof:!0,size:null,offset:null};for(let T=0;T<10;T++){if(T>E.byteLength)return f;if((E[T]&128)==0){const W=new S.oP(E);let ne;try{ne=W.uint32()}catch(de){if(de instanceof RangeError)return f;throw de}return{eof:!1,size:ne,offset:W.pos}}}throw new Error("invalid varint")}};var J=w(781);function z(E){switch(E.typeName){case"google.protobuf.Any":{const f=E.fields.find(W=>W.number==1&&W.fieldKind=="scalar"&&W.scalar===r.w.STRING),T=E.fields.find(W=>W.number==2&&W.fieldKind=="scalar"&&W.scalar===r.w.BYTES);if(f&&T)return{typeName:E.typeName,typeUrl:f,value:T};break}case"google.protobuf.Timestamp":{const f=E.fields.find(W=>W.number==1&&W.fieldKind=="scalar"&&W.scalar===r.w.INT64),T=E.fields.find(W=>W.number==2&&W.fieldKind=="scalar"&&W.scalar===r.w.INT32);if(f&&T)return{typeName:E.typeName,seconds:f,nanos:T};break}case"google.protobuf.Duration":{const f=E.fields.find(W=>W.number==1&&W.fieldKind=="scalar"&&W.scalar===r.w.INT64),T=E.fields.find(W=>W.number==2&&W.fieldKind=="scalar"&&W.scalar===r.w.INT32);if(f&&T)return{typeName:E.typeName,seconds:f,nanos:T};break}case"google.protobuf.Struct":{const f=E.fields.find(T=>T.number==1&&!T.repeated);if((f==null?void 0:f.fieldKind)!=="map"||f.mapValue.kind!=="message"||f.mapValue.message.typeName!=="google.protobuf.Value")break;return{typeName:E.typeName,fields:f}}case"google.protobuf.Value":{const f=E.oneofs.find(be=>be.name==="kind"),T=E.fields.find(be=>be.number==1&&be.oneof===f);if((T==null?void 0:T.fieldKind)!=="enum"||T.enum.typeName!=="google.protobuf.NullValue")return;const W=E.fields.find(be=>be.number==2&&be.fieldKind=="scalar"&&be.scalar===r.w.DOUBLE&&be.oneof===f),ne=E.fields.find(be=>be.number==3&&be.fieldKind=="scalar"&&be.scalar===r.w.STRING&&be.oneof===f),de=E.fields.find(be=>be.number==4&&be.fieldKind=="scalar"&&be.scalar===r.w.BOOL&&be.oneof===f),ge=E.fields.find(be=>be.number==5&&be.oneof===f);if((ge==null?void 0:ge.fieldKind)!=="message"||ge.message.typeName!=="google.protobuf.Struct")return;const xe=E.fields.find(be=>be.number==6&&be.oneof===f);if((xe==null?void 0:xe.fieldKind)!=="message"||xe.message.typeName!=="google.protobuf.ListValue")return;if(f&&W&&ne&&de)return{typeName:E.typeName,kind:f,nullValue:T,numberValue:W,stringValue:ne,boolValue:de,structValue:ge,listValue:xe};break}case"google.protobuf.ListValue":{const f=E.fields.find(T=>T.number==1&&T.repeated);if((f==null?void 0:f.fieldKind)!="message"||f.message.typeName!=="google.protobuf.Value")break;return{typeName:E.typeName,values:f}}case"google.protobuf.FieldMask":{const f=E.fields.find(T=>T.number==1&&T.fieldKind=="scalar"&&T.scalar===r.w.STRING&&T.repeated);if(f)return{typeName:E.typeName,paths:f};break}case"google.protobuf.DoubleValue":case"google.protobuf.FloatValue":case"google.protobuf.Int64Value":case"google.protobuf.UInt64Value":case"google.protobuf.Int32Value":case"google.protobuf.UInt32Value":case"google.protobuf.BoolValue":case"google.protobuf.StringValue":case"google.protobuf.BytesValue":{const f=E.fields.find(T=>T.number==1&&T.name=="value");if(!f||f.fieldKind!=="scalar")break;return{typeName:E.typeName,value:f}}}}const te="@bufbuild/protobuf",Z={packageName:"@bufbuild/protobuf",localName:u.r1,reifyWkt:z,getUnwrappedFieldType:o.w,scalarDefaultValue:J.kY,safeIdentifier:u.GD,safeObjectProperty:u.ll,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:te},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:te},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:te},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:te},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:te},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:te},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:te},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:te},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:te},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:te},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:te},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:te},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:te},protoDouble:{typeOnly:!1,privateImportPath:"./proto-double.js",publicImportPath:te},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:te},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:te},LongType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:te},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:te},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:te},IMessageTypeRegistry:{typeOnly:!0,privateImportPath:"./type-registry.js",publicImportPath:te}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]};var q=w(561),B=w(328),$;(function(E){E[E.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",E[E.EDITION_PROTO2=998]="EDITION_PROTO2",E[E.EDITION_PROTO3=999]="EDITION_PROTO3",E[E.EDITION_2023=1e3]="EDITION_2023",E[E.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",E[E.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",E[E.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",E[E.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",E[E.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY"})($||($={})),p.util.setEnumType($,"google.protobuf.Edition",[{no:0,name:"EDITION_UNKNOWN"},{no:998,name:"EDITION_PROTO2"},{no:999,name:"EDITION_PROTO3"},{no:1e3,name:"EDITION_2023"},{no:1,name:"EDITION_1_TEST_ONLY"},{no:2,name:"EDITION_2_TEST_ONLY"},{no:99997,name:"EDITION_99997_TEST_ONLY"},{no:99998,name:"EDITION_99998_TEST_ONLY"},{no:99999,name:"EDITION_99999_TEST_ONLY"}]);class U extends q.v{constructor(f){super(),this.file=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new U().fromBinary(f,T)}static fromJson(f,T){return new U().fromJson(f,T)}static fromJsonString(f,T){return new U().fromJsonString(f,T)}static equals(f,T){return p.util.equals(U,f,T)}}U.runtime=p,U.typeName="google.protobuf.FileDescriptorSet",U.fields=p.util.newFieldList(()=>[{no:1,name:"file",kind:"message",T:re,repeated:!0}]);class re extends q.v{constructor(f){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new re().fromBinary(f,T)}static fromJson(f,T){return new re().fromJson(f,T)}static fromJsonString(f,T){return new re().fromJsonString(f,T)}static equals(f,T){return p.util.equals(re,f,T)}}re.runtime=p,re.typeName="google.protobuf.FileDescriptorProto",re.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:ee,repeated:!0},{no:5,name:"enum_type",kind:"message",T:Q,repeated:!0},{no:6,name:"service",kind:"message",T:G,repeated:!0},{no:7,name:"extension",kind:"message",T:_e,repeated:!0},{no:8,name:"options",kind:"message",T:oe,opt:!0},{no:9,name:"source_code_info",kind:"message",T:Se,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0},{no:14,name:"edition",kind:"enum",T:p.getEnumType($),opt:!0}]);class ee extends q.v{constructor(f){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new ee().fromBinary(f,T)}static fromJson(f,T){return new ee().fromJson(f,T)}static fromJsonString(f,T){return new ee().fromJsonString(f,T)}static equals(f,T){return p.util.equals(ee,f,T)}}ee.runtime=p,ee.typeName="google.protobuf.DescriptorProto",ee.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:_e,repeated:!0},{no:6,name:"extension",kind:"message",T:_e,repeated:!0},{no:3,name:"nested_type",kind:"message",T:ee,repeated:!0},{no:4,name:"enum_type",kind:"message",T:Q,repeated:!0},{no:5,name:"extension_range",kind:"message",T:V,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:Me,repeated:!0},{no:7,name:"options",kind:"message",T:me,opt:!0},{no:9,name:"reserved_range",kind:"message",T:X,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class V extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new V().fromBinary(f,T)}static fromJson(f,T){return new V().fromJson(f,T)}static fromJsonString(f,T){return new V().fromJsonString(f,T)}static equals(f,T){return p.util.equals(V,f,T)}}V.runtime=p,V.typeName="google.protobuf.DescriptorProto.ExtensionRange",V.fields=p.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:ie,opt:!0}]);class X extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new X().fromBinary(f,T)}static fromJson(f,T){return new X().fromJson(f,T)}static fromJsonString(f,T){return new X().fromJsonString(f,T)}static equals(f,T){return p.util.equals(X,f,T)}}X.runtime=p,X.typeName="google.protobuf.DescriptorProto.ReservedRange",X.fields=p.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class ie extends q.v{constructor(f){super(),this.uninterpretedOption=[],this.declaration=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new ie().fromBinary(f,T)}static fromJson(f,T){return new ie().fromJson(f,T)}static fromJsonString(f,T){return new ie().fromJsonString(f,T)}static equals(f,T){return p.util.equals(ie,f,T)}}ie.runtime=p,ie.typeName="google.protobuf.ExtensionRangeOptions",ie.fields=p.util.newFieldList(()=>[{no:999,name:"uninterpreted_option",kind:"message",T:Rt,repeated:!0},{no:2,name:"declaration",kind:"message",T:ve,repeated:!0},{no:50,name:"features",kind:"message",T:bt,opt:!0},{no:3,name:"verification",kind:"enum",T:p.getEnumType(le),opt:!0,default:le.UNVERIFIED}]);var le;(function(E){E[E.DECLARATION=0]="DECLARATION",E[E.UNVERIFIED=1]="UNVERIFIED"})(le||(le={})),p.util.setEnumType(le,"google.protobuf.ExtensionRangeOptions.VerificationState",[{no:0,name:"DECLARATION"},{no:1,name:"UNVERIFIED"}]);class ve extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new ve().fromBinary(f,T)}static fromJson(f,T){return new ve().fromJson(f,T)}static fromJsonString(f,T){return new ve().fromJsonString(f,T)}static equals(f,T){return p.util.equals(ve,f,T)}}ve.runtime=p,ve.typeName="google.protobuf.ExtensionRangeOptions.Declaration",ve.fields=p.util.newFieldList(()=>[{no:1,name:"number",kind:"scalar",T:5,opt:!0},{no:2,name:"full_name",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"scalar",T:9,opt:!0},{no:5,name:"reserved",kind:"scalar",T:8,opt:!0},{no:6,name:"repeated",kind:"scalar",T:8,opt:!0}]);class _e extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new _e().fromBinary(f,T)}static fromJson(f,T){return new _e().fromJson(f,T)}static fromJsonString(f,T){return new _e().fromJsonString(f,T)}static equals(f,T){return p.util.equals(_e,f,T)}}_e.runtime=p,_e.typeName="google.protobuf.FieldDescriptorProto",_e.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:p.getEnumType(Le),opt:!0},{no:5,name:"type",kind:"enum",T:p.getEnumType(Ne),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:Pe,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}]);var Ne;(function(E){E[E.DOUBLE=1]="DOUBLE",E[E.FLOAT=2]="FLOAT",E[E.INT64=3]="INT64",E[E.UINT64=4]="UINT64",E[E.INT32=5]="INT32",E[E.FIXED64=6]="FIXED64",E[E.FIXED32=7]="FIXED32",E[E.BOOL=8]="BOOL",E[E.STRING=9]="STRING",E[E.GROUP=10]="GROUP",E[E.MESSAGE=11]="MESSAGE",E[E.BYTES=12]="BYTES",E[E.UINT32=13]="UINT32",E[E.ENUM=14]="ENUM",E[E.SFIXED32=15]="SFIXED32",E[E.SFIXED64=16]="SFIXED64",E[E.SINT32=17]="SINT32",E[E.SINT64=18]="SINT64"})(Ne||(Ne={})),p.util.setEnumType(Ne,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var Le;(function(E){E[E.OPTIONAL=1]="OPTIONAL",E[E.REPEATED=3]="REPEATED",E[E.REQUIRED=2]="REQUIRED"})(Le||(Le={})),p.util.setEnumType(Le,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:3,name:"LABEL_REPEATED"},{no:2,name:"LABEL_REQUIRED"}]);class Me extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new Me().fromBinary(f,T)}static fromJson(f,T){return new Me().fromJson(f,T)}static fromJsonString(f,T){return new Me().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Me,f,T)}}Me.runtime=p,Me.typeName="google.protobuf.OneofDescriptorProto",Me.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:He,opt:!0}]);class Q extends q.v{constructor(f){super(),this.value=[],this.reservedRange=[],this.reservedName=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Q().fromBinary(f,T)}static fromJson(f,T){return new Q().fromJson(f,T)}static fromJsonString(f,T){return new Q().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Q,f,T)}}Q.runtime=p,Q.typeName="google.protobuf.EnumDescriptorProto",Q.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:ue,repeated:!0},{no:3,name:"options",kind:"message",T:Oe,opt:!0},{no:4,name:"reserved_range",kind:"message",T:ce,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class ce extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new ce().fromBinary(f,T)}static fromJson(f,T){return new ce().fromJson(f,T)}static fromJsonString(f,T){return new ce().fromJsonString(f,T)}static equals(f,T){return p.util.equals(ce,f,T)}}ce.runtime=p,ce.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",ce.fields=p.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class ue extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new ue().fromBinary(f,T)}static fromJson(f,T){return new ue().fromJson(f,T)}static fromJsonString(f,T){return new ue().fromJsonString(f,T)}static equals(f,T){return p.util.equals(ue,f,T)}}ue.runtime=p,ue.typeName="google.protobuf.EnumValueDescriptorProto",ue.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:tt,opt:!0}]);class G extends q.v{constructor(f){super(),this.method=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new G().fromBinary(f,T)}static fromJson(f,T){return new G().fromJson(f,T)}static fromJsonString(f,T){return new G().fromJsonString(f,T)}static equals(f,T){return p.util.equals(G,f,T)}}G.runtime=p,G.typeName="google.protobuf.ServiceDescriptorProto",G.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:se,repeated:!0},{no:3,name:"options",kind:"message",T:St,opt:!0}]);class se extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new se().fromBinary(f,T)}static fromJson(f,T){return new se().fromJson(f,T)}static fromJsonString(f,T){return new se().fromJsonString(f,T)}static equals(f,T){return p.util.equals(se,f,T)}}se.runtime=p,se.typeName="google.protobuf.MethodDescriptorProto",se.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:Wt,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]);class oe extends q.v{constructor(f){super(),this.uninterpretedOption=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new oe().fromBinary(f,T)}static fromJson(f,T){return new oe().fromJson(f,T)}static fromJsonString(f,T){return new oe().fromJsonString(f,T)}static equals(f,T){return p.util.equals(oe,f,T)}}oe.runtime=p,oe.typeName="google.protobuf.FileOptions",oe.fields=p.util.newFieldList(()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:p.getEnumType(we),opt:!0,default:we.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:50,name:"features",kind:"message",T:bt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Rt,repeated:!0}]);var we;(function(E){E[E.SPEED=1]="SPEED",E[E.CODE_SIZE=2]="CODE_SIZE",E[E.LITE_RUNTIME=3]="LITE_RUNTIME"})(we||(we={})),p.util.setEnumType(we,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class me extends q.v{constructor(f){super(),this.uninterpretedOption=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new me().fromBinary(f,T)}static fromJson(f,T){return new me().fromJson(f,T)}static fromJsonString(f,T){return new me().fromJsonString(f,T)}static equals(f,T){return p.util.equals(me,f,T)}}me.runtime=p,me.typeName="google.protobuf.MessageOptions",me.fields=p.util.newFieldList(()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:11,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:12,name:"features",kind:"message",T:bt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Rt,repeated:!0}]);class Pe extends q.v{constructor(f){super(),this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Pe().fromBinary(f,T)}static fromJson(f,T){return new Pe().fromJson(f,T)}static fromJsonString(f,T){return new Pe().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Pe,f,T)}}Pe.runtime=p,Pe.typeName="google.protobuf.FieldOptions",Pe.fields=p.util.newFieldList(()=>[{no:1,name:"ctype",kind:"enum",T:p.getEnumType(Be),opt:!0,default:Be.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:p.getEnumType(qe),opt:!0,default:qe.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:16,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"retention",kind:"enum",T:p.getEnumType(at),opt:!0},{no:19,name:"targets",kind:"enum",T:p.getEnumType(ft),repeated:!0},{no:20,name:"edition_defaults",kind:"message",T:Je,repeated:!0},{no:21,name:"features",kind:"message",T:bt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Rt,repeated:!0}]);var Be;(function(E){E[E.STRING=0]="STRING",E[E.CORD=1]="CORD",E[E.STRING_PIECE=2]="STRING_PIECE"})(Be||(Be={})),p.util.setEnumType(Be,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]);var qe;(function(E){E[E.JS_NORMAL=0]="JS_NORMAL",E[E.JS_STRING=1]="JS_STRING",E[E.JS_NUMBER=2]="JS_NUMBER"})(qe||(qe={})),p.util.setEnumType(qe,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]);var at;(function(E){E[E.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",E[E.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",E[E.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(at||(at={})),p.util.setEnumType(at,"google.protobuf.FieldOptions.OptionRetention",[{no:0,name:"RETENTION_UNKNOWN"},{no:1,name:"RETENTION_RUNTIME"},{no:2,name:"RETENTION_SOURCE"}]);var ft;(function(E){E[E.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",E[E.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",E[E.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",E[E.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",E[E.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",E[E.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",E[E.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",E[E.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",E[E.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",E[E.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(ft||(ft={})),p.util.setEnumType(ft,"google.protobuf.FieldOptions.OptionTargetType",[{no:0,name:"TARGET_TYPE_UNKNOWN"},{no:1,name:"TARGET_TYPE_FILE"},{no:2,name:"TARGET_TYPE_EXTENSION_RANGE"},{no:3,name:"TARGET_TYPE_MESSAGE"},{no:4,name:"TARGET_TYPE_FIELD"},{no:5,name:"TARGET_TYPE_ONEOF"},{no:6,name:"TARGET_TYPE_ENUM"},{no:7,name:"TARGET_TYPE_ENUM_ENTRY"},{no:8,name:"TARGET_TYPE_SERVICE"},{no:9,name:"TARGET_TYPE_METHOD"}]);class Je extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new Je().fromBinary(f,T)}static fromJson(f,T){return new Je().fromJson(f,T)}static fromJsonString(f,T){return new Je().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Je,f,T)}}Je.runtime=p,Je.typeName="google.protobuf.FieldOptions.EditionDefault",Je.fields=p.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:p.getEnumType($),opt:!0},{no:2,name:"value",kind:"scalar",T:9,opt:!0}]);class He extends q.v{constructor(f){super(),this.uninterpretedOption=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new He().fromBinary(f,T)}static fromJson(f,T){return new He().fromJson(f,T)}static fromJsonString(f,T){return new He().fromJsonString(f,T)}static equals(f,T){return p.util.equals(He,f,T)}}He.runtime=p,He.typeName="google.protobuf.OneofOptions",He.fields=p.util.newFieldList(()=>[{no:1,name:"features",kind:"message",T:bt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Rt,repeated:!0}]);class Oe extends q.v{constructor(f){super(),this.uninterpretedOption=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Oe().fromBinary(f,T)}static fromJson(f,T){return new Oe().fromJson(f,T)}static fromJsonString(f,T){return new Oe().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Oe,f,T)}}Oe.runtime=p,Oe.typeName="google.protobuf.EnumOptions",Oe.fields=p.util.newFieldList(()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:7,name:"features",kind:"message",T:bt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Rt,repeated:!0}]);class tt extends q.v{constructor(f){super(),this.uninterpretedOption=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new tt().fromBinary(f,T)}static fromJson(f,T){return new tt().fromJson(f,T)}static fromJsonString(f,T){return new tt().fromJsonString(f,T)}static equals(f,T){return p.util.equals(tt,f,T)}}tt.runtime=p,tt.typeName="google.protobuf.EnumValueOptions",tt.fields=p.util.newFieldList(()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"features",kind:"message",T:bt,opt:!0},{no:3,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Rt,repeated:!0}]);class St extends q.v{constructor(f){super(),this.uninterpretedOption=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new St().fromBinary(f,T)}static fromJson(f,T){return new St().fromJson(f,T)}static fromJsonString(f,T){return new St().fromJsonString(f,T)}static equals(f,T){return p.util.equals(St,f,T)}}St.runtime=p,St.typeName="google.protobuf.ServiceOptions",St.fields=p.util.newFieldList(()=>[{no:34,name:"features",kind:"message",T:bt,opt:!0},{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Rt,repeated:!0}]);class Wt extends q.v{constructor(f){super(),this.uninterpretedOption=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Wt().fromBinary(f,T)}static fromJson(f,T){return new Wt().fromJson(f,T)}static fromJsonString(f,T){return new Wt().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Wt,f,T)}}Wt.runtime=p,Wt.typeName="google.protobuf.MethodOptions",Wt.fields=p.util.newFieldList(()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:p.getEnumType(jt),opt:!0,default:jt.IDEMPOTENCY_UNKNOWN},{no:35,name:"features",kind:"message",T:bt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Rt,repeated:!0}]);var jt;(function(E){E[E.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",E[E.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",E[E.IDEMPOTENT=2]="IDEMPOTENT"})(jt||(jt={})),p.util.setEnumType(jt,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class Rt extends q.v{constructor(f){super(),this.name=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Rt().fromBinary(f,T)}static fromJson(f,T){return new Rt().fromJson(f,T)}static fromJsonString(f,T){return new Rt().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Rt,f,T)}}Rt.runtime=p,Rt.typeName="google.protobuf.UninterpretedOption",Rt.fields=p.util.newFieldList(()=>[{no:2,name:"name",kind:"message",T:$t,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]);class $t extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new $t().fromBinary(f,T)}static fromJson(f,T){return new $t().fromJson(f,T)}static fromJsonString(f,T){return new $t().fromJsonString(f,T)}static equals(f,T){return p.util.equals($t,f,T)}}$t.runtime=p,$t.typeName="google.protobuf.UninterpretedOption.NamePart",$t.fields=p.util.newFieldList(()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]);class bt extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new bt().fromBinary(f,T)}static fromJson(f,T){return new bt().fromJson(f,T)}static fromJsonString(f,T){return new bt().fromJsonString(f,T)}static equals(f,T){return p.util.equals(bt,f,T)}}bt.runtime=p,bt.typeName="google.protobuf.FeatureSet",bt.fields=p.util.newFieldList(()=>[{no:1,name:"field_presence",kind:"enum",T:p.getEnumType(zt),opt:!0},{no:2,name:"enum_type",kind:"enum",T:p.getEnumType(nn),opt:!0},{no:3,name:"repeated_field_encoding",kind:"enum",T:p.getEnumType(Ct),opt:!0},{no:4,name:"utf8_validation",kind:"enum",T:p.getEnumType(en),opt:!0},{no:5,name:"message_encoding",kind:"enum",T:p.getEnumType(Ft),opt:!0},{no:6,name:"json_format",kind:"enum",T:p.getEnumType(Rn),opt:!0}]);var zt;(function(E){E[E.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",E[E.EXPLICIT=1]="EXPLICIT",E[E.IMPLICIT=2]="IMPLICIT",E[E.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(zt||(zt={})),p.util.setEnumType(zt,"google.protobuf.FeatureSet.FieldPresence",[{no:0,name:"FIELD_PRESENCE_UNKNOWN"},{no:1,name:"EXPLICIT"},{no:2,name:"IMPLICIT"},{no:3,name:"LEGACY_REQUIRED"}]);var nn;(function(E){E[E.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",E[E.OPEN=1]="OPEN",E[E.CLOSED=2]="CLOSED"})(nn||(nn={})),p.util.setEnumType(nn,"google.protobuf.FeatureSet.EnumType",[{no:0,name:"ENUM_TYPE_UNKNOWN"},{no:1,name:"OPEN"},{no:2,name:"CLOSED"}]);var Ct;(function(E){E[E.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",E[E.PACKED=1]="PACKED",E[E.EXPANDED=2]="EXPANDED"})(Ct||(Ct={})),p.util.setEnumType(Ct,"google.protobuf.FeatureSet.RepeatedFieldEncoding",[{no:0,name:"REPEATED_FIELD_ENCODING_UNKNOWN"},{no:1,name:"PACKED"},{no:2,name:"EXPANDED"}]);var en;(function(E){E[E.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",E[E.NONE=1]="NONE",E[E.VERIFY=2]="VERIFY"})(en||(en={})),p.util.setEnumType(en,"google.protobuf.FeatureSet.Utf8Validation",[{no:0,name:"UTF8_VALIDATION_UNKNOWN"},{no:1,name:"NONE"},{no:2,name:"VERIFY"}]);var Ft;(function(E){E[E.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",E[E.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",E[E.DELIMITED=2]="DELIMITED"})(Ft||(Ft={})),p.util.setEnumType(Ft,"google.protobuf.FeatureSet.MessageEncoding",[{no:0,name:"MESSAGE_ENCODING_UNKNOWN"},{no:1,name:"LENGTH_PREFIXED"},{no:2,name:"DELIMITED"}]);var Rn;(function(E){E[E.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",E[E.ALLOW=1]="ALLOW",E[E.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(Rn||(Rn={})),p.util.setEnumType(Rn,"google.protobuf.FeatureSet.JsonFormat",[{no:0,name:"JSON_FORMAT_UNKNOWN"},{no:1,name:"ALLOW"},{no:2,name:"LEGACY_BEST_EFFORT"}]);class Yt extends q.v{constructor(f){super(),this.defaults=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Yt().fromBinary(f,T)}static fromJson(f,T){return new Yt().fromJson(f,T)}static fromJsonString(f,T){return new Yt().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Yt,f,T)}}Yt.runtime=p,Yt.typeName="google.protobuf.FeatureSetDefaults",Yt.fields=p.util.newFieldList(()=>[{no:1,name:"defaults",kind:"message",T:an,repeated:!0},{no:4,name:"minimum_edition",kind:"enum",T:p.getEnumType($),opt:!0},{no:5,name:"maximum_edition",kind:"enum",T:p.getEnumType($),opt:!0}]);class an extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new an().fromBinary(f,T)}static fromJson(f,T){return new an().fromJson(f,T)}static fromJsonString(f,T){return new an().fromJsonString(f,T)}static equals(f,T){return p.util.equals(an,f,T)}}an.runtime=p,an.typeName="google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault",an.fields=p.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:p.getEnumType($),opt:!0},{no:2,name:"features",kind:"message",T:bt,opt:!0}]);class Se extends q.v{constructor(f){super(),this.location=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Se().fromBinary(f,T)}static fromJson(f,T){return new Se().fromJson(f,T)}static fromJsonString(f,T){return new Se().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Se,f,T)}}Se.runtime=p,Se.typeName="google.protobuf.SourceCodeInfo",Se.fields=p.util.newFieldList(()=>[{no:1,name:"location",kind:"message",T:Mt,repeated:!0}]);class Mt extends q.v{constructor(f){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Mt().fromBinary(f,T)}static fromJson(f,T){return new Mt().fromJson(f,T)}static fromJsonString(f,T){return new Mt().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Mt,f,T)}}Mt.runtime=p,Mt.typeName="google.protobuf.SourceCodeInfo.Location",Mt.fields=p.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]);class ht extends q.v{constructor(f){super(),this.annotation=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new ht().fromBinary(f,T)}static fromJson(f,T){return new ht().fromJson(f,T)}static fromJsonString(f,T){return new ht().fromJsonString(f,T)}static equals(f,T){return p.util.equals(ht,f,T)}}ht.runtime=p,ht.typeName="google.protobuf.GeneratedCodeInfo",ht.fields=p.util.newFieldList(()=>[{no:1,name:"annotation",kind:"message",T:Pt,repeated:!0}]);class Pt extends q.v{constructor(f){super(),this.path=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Pt().fromBinary(f,T)}static fromJson(f,T){return new Pt().fromJson(f,T)}static fromJsonString(f,T){return new Pt().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Pt,f,T)}}Pt.runtime=p,Pt.typeName="google.protobuf.GeneratedCodeInfo.Annotation",Pt.fields=p.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0},{no:5,name:"semantic",kind:"enum",T:p.getEnumType(un),opt:!0}]);var un;(function(E){E[E.NONE=0]="NONE",E[E.SET=1]="SET",E[E.ALIAS=2]="ALIAS"})(un||(un={})),p.util.setEnumType(un,"google.protobuf.GeneratedCodeInfo.Annotation.Semantic",[{no:0,name:"NONE"},{no:1,name:"SET"},{no:2,name:"ALIAS"}]);function ln(E,f){const T=E.values.find(W=>W.name===f);return(0,a.hu)(T,`cannot parse ${E.name} default value: ${f}`),T.number}function hn(E,f){switch(E){case r.w.STRING:return f;case r.w.BYTES:{const T=dn(f);if(T===!1)throw new Error(`cannot parse ${r.w[E]} default value: ${f}`);return T}case r.w.INT64:case r.w.SFIXED64:case r.w.SINT64:return I.q.parse(f);case r.w.UINT64:case r.w.FIXED64:return I.q.uParse(f);case r.w.DOUBLE:case r.w.FLOAT:switch(f){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(f)}case r.w.BOOL:return f==="true";case r.w.INT32:case r.w.UINT32:case r.w.SINT32:case r.w.FIXED32:case r.w.SFIXED32:return parseInt(f,10)}}function dn(E){const f=[],T={tail:E,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(W){if(this.tail.length>=W){const ne=this.tail.substring(0,W);return this.tail=this.tail.substring(W),ne}return!1}};for(;T.next();)switch(T.c){case"\\":if(T.next())switch(T.c){case"\\":f.push(T.c.charCodeAt(0));break;case"b":f.push(8);break;case"f":f.push(12);break;case"n":f.push(10);break;case"r":f.push(13);break;case"t":f.push(9);break;case"v":f.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const W=T.c,ne=T.take(2);if(ne===!1)return!1;const de=parseInt(W+ne,8);if(isNaN(de))return!1;f.push(de);break}case"x":{const W=T.c,ne=T.take(2);if(ne===!1)return!1;const de=parseInt(W+ne,16);if(isNaN(de))return!1;f.push(de);break}case"u":{const W=T.c,ne=T.take(4);if(ne===!1)return!1;const de=parseInt(W+ne,16);if(isNaN(de))return!1;const ge=new Uint8Array(4);new DataView(ge.buffer).setInt32(0,de,!0),f.push(ge[0],ge[1],ge[2],ge[3]);break}case"U":{const W=T.c,ne=T.take(8);if(ne===!1)return!1;const de=I.q.uEnc(W+ne),ge=new Uint8Array(8),xe=new DataView(ge.buffer);xe.setInt32(0,de.lo,!0),xe.setInt32(4,de.hi,!0),f.push(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5],ge[6],ge[7]);break}}break;default:f.push(T.c.charCodeAt(0))}return new Uint8Array(f)}const Vt=Yt.fromBinary(A.W.dec("ChESDAgBEAIYAiABKAEwAhjmBwoREgwIAhABGAEgAigBMAEY5wcKERIMCAEQARgBIAIoATABGOgHIOYHKOgH"));function pt(E){const f=E.minimumEdition,T=E.maximumEdition;if(f===void 0||T===void 0||E.defaults.some(ne=>ne.edition===void 0))throw new Error("Invalid FeatureSetDefaults");const W=new Map;return(ne,...de)=>{var ge,xe;let be=W.get(ne);if(be===void 0){if(ne<f)throw new Error(`Edition ${$[ne]} is earlier than the minimum supported edition ${$[f]}`);if(T<ne)throw new Error(`Edition ${$[ne]} is later than the maximum supported edition ${$[T]}`);let Ce;for(const Ge of E.defaults){const Jt=(ge=Ge.edition)!==null&&ge!==void 0?ge:0;Jt>ne||Ce!==void 0&&Ce.e>Jt||(Ce={e:Jt,f:(xe=Ge.features)!==null&&xe!==void 0?xe:new bt})}if(Ce===void 0)throw new Error(`No valid default found for edition ${$[ne]}`);be=Ce.f.toBinary(),W.set(ne,be)}const Re=bt.fromBinary(be);for(const Ce of de)Ce!==void 0&&Re.fromBinary(Ce.toBinary());if(!pn(Re))throw new Error(`Invalid FeatureSet for edition ${$[ne]}`);return Re}}function pn(E){for(const f of bt.fields.list()){const T=E[f.localName];if(T===void 0||f.kind=="enum"&&T===0)return!1}return!0}function Bn(E,f){var T;const W={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map,resolveFeatures:pt((T=f==null?void 0:f.featureSetDefaults)!==null&&T!==void 0?T:Vt)},de=(E instanceof U?E.file:E instanceof Uint8Array?U.fromBinary(E).file:E).map(ge=>gn(ge,W));return Object.assign({files:de},W)}function gn(E,f){var T,W;(0,a.hu)(E.name,"invalid FileDescriptorProto: missing name");const ne=Object.assign(Object.assign({kind:"file",proto:E,deprecated:(W=(T=E.options)===null||T===void 0?void 0:T.deprecated)!==null&&W!==void 0?W:!1},Te(E.syntax,E.edition)),{name:E.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return ze(this.proto.sourceCodeInfo,[it.FileDescriptorProto_Syntax])},getPackageComments(){return ze(this.proto.sourceCodeInfo,[it.FileDescriptorProto_Package])},getFeatures(){var de;return f.resolveFeatures(this.edition,(de=this.proto.options)===null||de===void 0?void 0:de.features)}});f.mapEntries.clear();for(const de of E.enumType)In(de,ne,void 0,f);for(const de of E.messageType)Sn(de,ne,void 0,f);for(const de of E.service)hr(de,ne,f);_n(ne,f);for(const de of f.mapEntries.values())On(de,f);for(const de of ne.messages)On(de,f),_n(de,f);return f.mapEntries.clear(),ne}function _n(E,f){switch(E.kind){case"file":for(const T of E.proto.extension){const W=fe(T,E,void 0,f);E.extensions.push(W),f.extensions.set(W.typeName,W)}break;case"message":for(const T of E.proto.extension){const W=fe(T,E.file,E,f);E.nestedExtensions.push(W),f.extensions.set(W.typeName,W)}for(const T of E.nestedMessages)_n(T,f);break}}function On(E,f){const T=E.proto.oneofDecl.map(ne=>Kt(ne,E,f)),W=new Set;for(const ne of E.proto.field){const de=Xe(ne,T),ge=wn(ne,E.file,E,de,f);E.fields.push(ge),de===void 0?E.members.push(ge):(de.fields.push(ge),W.has(de)||(W.add(de),E.members.push(de)))}for(const ne of T.filter(de=>W.has(de)))E.oneofs.push(ne);for(const ne of E.nestedMessages)On(ne,f)}function In(E,f,T,W){var ne,de,ge;(0,a.hu)(E.name,"invalid EnumDescriptorProto: missing name");const xe={kind:"enum",proto:E,deprecated:(de=(ne=E.options)===null||ne===void 0?void 0:ne.deprecated)!==null&&de!==void 0?de:!1,file:f,parent:T,name:E.name,typeName:De(E,T,f),values:[],sharedPrefix:(0,u.Sm)(E.name,E.value.map(be=>{var Re;return(Re=be.name)!==null&&Re!==void 0?Re:""})),toString(){return`enum ${this.typeName}`},getComments(){const be=this.parent?[...this.parent.getComments().sourcePath,it.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[it.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return ze(f.proto.sourceCodeInfo,be)},getFeatures(){var be,Re,Ce;const Ge=(Re=(be=this.parent)===null||be===void 0?void 0:be.getFeatures())!==null&&Re!==void 0?Re:this.file.getFeatures();return W.resolveFeatures(this.file.edition,Ge,(Ce=this.proto.options)===null||Ce===void 0?void 0:Ce.features)}};W.enums.set(xe.typeName,xe),E.value.forEach(be=>{var Re,Ce;(0,a.hu)(be.name,"invalid EnumValueDescriptorProto: missing name"),(0,a.hu)(be.number!==void 0,"invalid EnumValueDescriptorProto: missing number"),xe.values.push({kind:"enum_value",proto:be,deprecated:(Ce=(Re=be.options)===null||Re===void 0?void 0:Re.deprecated)!==null&&Ce!==void 0?Ce:!1,parent:xe,name:be.name,number:be.number,toString(){return`enum value ${xe.typeName}.${this.name}`},declarationString(){var Ge;let Jt=`${this.name} = ${this.number}`;return((Ge=this.proto.options)===null||Ge===void 0?void 0:Ge.deprecated)===!0&&(Jt+=" [deprecated = true]"),Jt},getComments(){const Ge=[...this.parent.getComments().sourcePath,it.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return ze(f.proto.sourceCodeInfo,Ge)},getFeatures(){var Ge;return W.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(Ge=this.proto.options)===null||Ge===void 0?void 0:Ge.features)}})}),((ge=T==null?void 0:T.nestedEnums)!==null&&ge!==void 0?ge:f.enums).push(xe)}function Sn(E,f,T,W){var ne,de,ge,xe;(0,a.hu)(E.name,"invalid DescriptorProto: missing name");const be={kind:"message",proto:E,deprecated:(de=(ne=E.options)===null||ne===void 0?void 0:ne.deprecated)!==null&&de!==void 0?de:!1,file:f,parent:T,name:E.name,typeName:De(E,T,f),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const Re=this.parent?[...this.parent.getComments().sourcePath,it.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[it.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return ze(f.proto.sourceCodeInfo,Re)},getFeatures(){var Re,Ce,Ge;const Jt=(Ce=(Re=this.parent)===null||Re===void 0?void 0:Re.getFeatures())!==null&&Ce!==void 0?Ce:this.file.getFeatures();return W.resolveFeatures(this.file.edition,Jt,(Ge=this.proto.options)===null||Ge===void 0?void 0:Ge.features)}};((ge=E.options)===null||ge===void 0?void 0:ge.mapEntry)===!0?W.mapEntries.set(be.typeName,be):(((xe=T==null?void 0:T.nestedMessages)!==null&&xe!==void 0?xe:f.messages).push(be),W.messages.set(be.typeName,be));for(const Re of E.enumType)In(Re,f,be,W);for(const Re of E.nestedType)Sn(Re,f,be,W)}function hr(E,f,T){var W,ne;(0,a.hu)(E.name,"invalid ServiceDescriptorProto: missing name");const de={kind:"service",proto:E,deprecated:(ne=(W=E.options)===null||W===void 0?void 0:W.deprecated)!==null&&ne!==void 0?ne:!1,file:f,name:E.name,typeName:De(E,void 0,f),methods:[],toString(){return`service ${this.typeName}`},getComments(){const ge=[it.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return ze(f.proto.sourceCodeInfo,ge)},getFeatures(){var ge;return T.resolveFeatures(this.file.edition,this.file.getFeatures(),(ge=this.proto.options)===null||ge===void 0?void 0:ge.features)}};f.services.push(de),T.services.set(de.typeName,de);for(const ge of E.method)de.methods.push(jn(ge,de,T))}function jn(E,f,T){var W,ne,de;(0,a.hu)(E.name,"invalid MethodDescriptorProto: missing name"),(0,a.hu)(E.inputType,"invalid MethodDescriptorProto: missing input_type"),(0,a.hu)(E.outputType,"invalid MethodDescriptorProto: missing output_type");let ge;E.clientStreaming===!0&&E.serverStreaming===!0?ge=B.t.BiDiStreaming:E.clientStreaming===!0?ge=B.t.ClientStreaming:E.serverStreaming===!0?ge=B.t.ServerStreaming:ge=B.t.Unary;let xe;switch((W=E.options)===null||W===void 0?void 0:W.idempotencyLevel){case jt.IDEMPOTENT:xe=B.w.Idempotent;break;case jt.NO_SIDE_EFFECTS:xe=B.w.NoSideEffects;break;case jt.IDEMPOTENCY_UNKNOWN:case void 0:xe=void 0;break}const be=T.messages.get(Fe(E.inputType)),Re=T.messages.get(Fe(E.outputType));(0,a.hu)(be,`invalid MethodDescriptorProto: input_type ${E.inputType} not found`),(0,a.hu)(Re,`invalid MethodDescriptorProto: output_type ${E.inputType} not found`);const Ce=E.name;return{kind:"rpc",proto:E,deprecated:(de=(ne=E.options)===null||ne===void 0?void 0:ne.deprecated)!==null&&de!==void 0?de:!1,parent:f,name:Ce,methodKind:ge,input:be,output:Re,idempotency:xe,toString(){return`rpc ${f.typeName}.${Ce}`},getComments(){const Ge=[...this.parent.getComments().sourcePath,it.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return ze(f.file.proto.sourceCodeInfo,Ge)},getFeatures(){var Ge;return T.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(Ge=this.proto.options)===null||Ge===void 0?void 0:Ge.features)}}}function Kt(E,f,T){return(0,a.hu)(E.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:E,deprecated:!1,parent:f,fields:[],name:E.name,toString(){return`oneof ${f.typeName}.${this.name}`},getComments(){const W=[...this.parent.getComments().sourcePath,it.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return ze(f.file.proto.sourceCodeInfo,W)},getFeatures(){var W;return T.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(W=this.proto.options)===null||W===void 0?void 0:W.features)}}}function wn(E,f,T,W,ne){var de,ge,xe;(0,a.hu)(E.name,"invalid FieldDescriptorProto: missing name"),(0,a.hu)(E.number,"invalid FieldDescriptorProto: missing number"),(0,a.hu)(E.type,"invalid FieldDescriptorProto: missing type");const be={proto:E,deprecated:(ge=(de=E.options)===null||de===void 0?void 0:de.deprecated)!==null&&ge!==void 0?ge:!1,name:E.name,number:E.number,parent:T,oneof:W,optional:Y(E,f.syntax),packedByDefault:pe(f,E,ne.resolveFeatures),packed:Ee(f,T,E,ne.resolveFeatures),jsonName:E.jsonName===(0,u.x1)(E.name)?void 0:E.jsonName,scalar:void 0,longType:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,declarationString:Nt,toString(){return`field ${this.parent.typeName}.${this.name}`},getComments(){const Ce=[...this.parent.getComments().sourcePath,it.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return ze(f.proto.sourceCodeInfo,Ce)},getFeatures(){var Ce;return ne.resolveFeatures(f.edition,this.parent.getFeatures(),(Ce=this.proto.options)===null||Ce===void 0?void 0:Ce.features)}},Re=E.label===Le.REPEATED;switch(E.type){case Ne.MESSAGE:case Ne.GROUP:{(0,a.hu)(E.typeName,"invalid FieldDescriptorProto: missing type_name");const Ce=ne.mapEntries.get(Fe(E.typeName));if(Ce!==void 0)return(0,a.hu)(Re,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},be),{kind:"field",fieldKind:"map",repeated:!1}),Tt(Ce));const Ge=ne.messages.get(Fe(E.typeName));return(0,a.hu)(Ge!==void 0,`invalid FieldDescriptorProto: type_name ${E.typeName} not found`),Object.assign(Object.assign({},be),{kind:"field",fieldKind:"message",repeated:Re,message:Ge})}case Ne.ENUM:{(0,a.hu)(E.typeName,"invalid FieldDescriptorProto: missing type_name");const Ce=ne.enums.get(Fe(E.typeName));return(0,a.hu)(Ce!==void 0,`invalid FieldDescriptorProto: type_name ${E.typeName} not found`),Object.assign(Object.assign({},be),{kind:"field",fieldKind:"enum",getDefaultValue:ot,repeated:Re,enum:Ce})}default:{const Ce=Ie[E.type];return(0,a.hu)(Ce,`invalid FieldDescriptorProto: unknown type ${E.type}`),Object.assign(Object.assign({},be),{kind:"field",fieldKind:"scalar",getDefaultValue:ot,repeated:Re,scalar:Ce,longType:((xe=E.options)===null||xe===void 0?void 0:xe.jstype)==qe.JS_STRING?r.p.STRING:r.p.BIGINT})}}}function fe(E,f,T,W){(0,a.hu)(E.extendee,"invalid FieldDescriptorProto: missing extendee");const ne=wn(E,f,null,void 0,W),de=W.messages.get(Fe(E.extendee));return(0,a.hu)(de,`invalid FieldDescriptorProto: extendee ${E.extendee} not found`),Object.assign(Object.assign({},ne),{kind:"extension",typeName:De(E,T,f),parent:T,file:f,extendee:de,toString(){return`extension ${this.typeName}`},getComments(){const ge=this.parent?[...this.parent.getComments().sourcePath,it.DescriptorProto_Extension,this.parent.proto.extension.indexOf(E)]:[it.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(E)];return ze(f.proto.sourceCodeInfo,ge)},getFeatures(){var ge,xe;return W.resolveFeatures(this.file.edition,((ge=this.parent)!==null&&ge!==void 0?ge:this.file).getFeatures(),(xe=this.proto.options)===null||xe===void 0?void 0:xe.features)}})}function Te(E,f){let T,W;switch(E){case void 0:case"proto2":W="proto2",T=$.EDITION_PROTO2;break;case"proto3":W="proto3",T=$.EDITION_PROTO3;break;case"editions":switch(W="editions",f){case void 0:case $.EDITION_1_TEST_ONLY:case $.EDITION_2_TEST_ONLY:case $.EDITION_99997_TEST_ONLY:case $.EDITION_99998_TEST_ONLY:case $.EDITION_99999_TEST_ONLY:case $.EDITION_UNKNOWN:T=$.EDITION_UNKNOWN;break;default:T=f;break}break;default:throw new Error(`invalid FileDescriptorProto: unsupported syntax: ${E}`)}if(E==="editions"&&f===$.EDITION_UNKNOWN)throw new Error(`invalid FileDescriptorProto: syntax ${E} cannot have edition ${String(f)}`);return{syntax:W,edition:T}}function De(E,f,T){(0,a.hu)(E.name,`invalid ${E.getType().typeName}: missing name`);let W;return f?W=`${f.typeName}.${E.name}`:T.proto.package!==void 0?W=`${T.proto.package}.${E.name}`:W=`${E.name}`,W}function Fe(E){return E.startsWith(".")?E.substring(1):E}function Tt(E){var f,T;(0,a.hu)((f=E.proto.options)===null||f===void 0?void 0:f.mapEntry,`invalid DescriptorProto: expected ${E.toString()} to be a map entry`),(0,a.hu)(E.fields.length===2,`invalid DescriptorProto: map entry ${E.toString()} has ${E.fields.length} fields`);const W=E.fields.find(ge=>ge.proto.number===1);(0,a.hu)(W,`invalid DescriptorProto: map entry ${E.toString()} is missing key field`);const ne=W.scalar;(0,a.hu)(ne!==void 0&&ne!==r.w.BYTES&&ne!==r.w.FLOAT&&ne!==r.w.DOUBLE,`invalid DescriptorProto: map entry ${E.toString()} has unexpected key type ${(T=W.proto.type)!==null&&T!==void 0?T:-1}`);const de=E.fields.find(ge=>ge.proto.number===2);switch((0,a.hu)(de,`invalid DescriptorProto: map entry ${E.toString()} is missing value field`),de.fieldKind){case"scalar":return{mapKey:ne,mapValue:Object.assign(Object.assign({},de),{kind:"scalar"})};case"message":return{mapKey:ne,mapValue:Object.assign(Object.assign({},de),{kind:"message"})};case"enum":return{mapKey:ne,mapValue:Object.assign(Object.assign({},de),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}function Xe(E,f){var T;const W=E.oneofIndex;if(W===void 0)return;let ne;return E.proto3Optional!==!0&&(ne=f[W],(0,a.hu)(ne,`invalid FieldDescriptorProto: oneof #${W} for field #${(T=E.number)!==null&&T!==void 0?T:-1} not found`)),ne}function Y(E,f){switch(f){case"proto2":return E.oneofIndex===void 0&&E.label===Le.OPTIONAL;case"proto3":return E.proto3Optional===!0;case"editions":return!1}}function pe(E,f,T){const{repeatedFieldEncoding:W}=T(E.edition);if(W!=Ct.PACKED)return!1;switch(f.type){case Ne.STRING:case Ne.BYTES:case Ne.GROUP:case Ne.MESSAGE:return!1;default:return!0}}function Ee(E,f,T,W){var ne,de,ge,xe,be,Re;switch(T.type){case Ne.STRING:case Ne.BYTES:case Ne.GROUP:case Ne.MESSAGE:return!1;default:switch(E.edition){case $.EDITION_PROTO2:return(de=(ne=T.options)===null||ne===void 0?void 0:ne.packed)!==null&&de!==void 0?de:!1;case $.EDITION_PROTO3:return(xe=(ge=T.options)===null||ge===void 0?void 0:ge.packed)!==null&&xe!==void 0?xe:!0;default:{const{repeatedFieldEncoding:Ce}=W(E.edition,(be=f==null?void 0:f.getFeatures())!==null&&be!==void 0?be:E.getFeatures(),(Re=T.options)===null||Re===void 0?void 0:Re.features);return Ce==Ct.PACKED}}}}const Ie={[Ne.DOUBLE]:r.w.DOUBLE,[Ne.FLOAT]:r.w.FLOAT,[Ne.INT64]:r.w.INT64,[Ne.UINT64]:r.w.UINT64,[Ne.INT32]:r.w.INT32,[Ne.FIXED64]:r.w.FIXED64,[Ne.FIXED32]:r.w.FIXED32,[Ne.BOOL]:r.w.BOOL,[Ne.STRING]:r.w.STRING,[Ne.GROUP]:void 0,[Ne.MESSAGE]:void 0,[Ne.BYTES]:r.w.BYTES,[Ne.UINT32]:r.w.UINT32,[Ne.ENUM]:void 0,[Ne.SFIXED32]:r.w.SFIXED32,[Ne.SFIXED64]:r.w.SFIXED64,[Ne.SINT32]:r.w.SINT32,[Ne.SINT64]:r.w.SINT64};function ze(E,f){if(!E)return{leadingDetached:[],sourcePath:f};for(const T of E.location)if(T.path.length===f.length&&!T.path.some((W,ne)=>f[ne]!==W))return{leadingDetached:T.leadingDetachedComments,leading:T.leadingComments,trailing:T.trailingComments,sourcePath:f};return{leadingDetached:[],sourcePath:f}}var it;(function(E){E[E.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",E[E.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",E[E.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",E[E.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",E[E.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",E[E.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",E[E.DescriptorProto_Field=2]="DescriptorProto_Field",E[E.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",E[E.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",E[E.DescriptorProto_Extension=6]="DescriptorProto_Extension",E[E.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",E[E.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",E[E.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"})(it||(it={}));function Nt(){var E,f,T;const W=[];this.repeated&&W.push("repeated"),this.optional&&W.push("optional"),(this.kind==="extension"?this.file:this.parent.file).syntax=="proto2"&&this.proto.label===Le.REQUIRED&&W.push("required");let de;switch(this.fieldKind){case"scalar":de=r.w[this.scalar].toLowerCase();break;case"enum":de=this.enum.typeName;break;case"message":de=this.message.typeName;break;case"map":{const be=r.w[this.mapKey].toLowerCase();let Re;switch(this.mapValue.kind){case"scalar":Re=r.w[this.mapValue.scalar].toLowerCase();break;case"enum":Re=this.mapValue.enum.typeName;break;case"message":Re=this.mapValue.message.typeName;break}de=`map<${be}, ${Re}>`;break}}W.push(`${de} ${this.name} = ${this.number}`);const ge=[];((E=this.proto.options)===null||E===void 0?void 0:E.packed)!==void 0&&ge.push(`packed = ${this.proto.options.packed.toString()}`);let xe=this.proto.defaultValue;return xe!==void 0&&((this.proto.type==Ne.BYTES||this.proto.type==Ne.STRING)&&(xe='"'+xe.replace('"','\\"')+'"'),ge.push(`default = ${xe}`)),this.jsonName!==void 0&&ge.push(`json_name = "${this.jsonName}"`),((f=this.proto.options)===null||f===void 0?void 0:f.jstype)!==void 0&&ge.push(`jstype = ${qe[this.proto.options.jstype]}`),((T=this.proto.options)===null||T===void 0?void 0:T.deprecated)===!0&&ge.push("deprecated = true"),ge.length>0&&W.push("["+ge.join(", ")+"]"),W.join(" ")}function ot(){const E=this.proto.defaultValue;if(E!==void 0)switch(this.fieldKind){case"enum":return ln(this.enum,E);case"scalar":return hn(this.scalar,E);default:return}}function At(...E){const f={},T={},W={},ne={add(de){if("fields"in de){if(!this.findMessage(de.typeName)){f[de.typeName]=de;for(const ge of de.fields.list())ge.kind=="message"?this.add(ge.T):ge.kind=="map"&&ge.V.kind=="message"?this.add(ge.V.T):ge.kind=="enum"&&this.add(ge.T)}}else if("methods"in de){if(!this.findService(de.typeName)){W[de.typeName]=de;for(const ge of Object.values(de.methods))this.add(ge.I),this.add(ge.O)}}else T[de.typeName]=de},findMessage(de){return f[de]},findEnum(de){return T[de]},findService(de){return W[de]}};for(const de of E)ne.add(de);return ne}class mt extends q.v{constructor(f){super(),this.seconds=I.q.zero,this.nanos=0,y.w.util.initPartial(f,this)}fromJson(f,T){if(typeof f!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${y.w.json.debug(f)}`);const W=f.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!W)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const ne=Date.parse(W[1]+"-"+W[2]+"-"+W[3]+"T"+W[4]+":"+W[5]+":"+W[6]+(W[8]?W[8]:"Z"));if(Number.isNaN(ne))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(ne<Date.parse("0001-01-01T00:00:00Z")||ne>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=I.q.parse(ne/1e3),this.nanos=0,W[7]&&(this.nanos=parseInt("1"+W[7]+"0".repeat(9-W[7].length))-1e9),this}toJson(f){const T=Number(this.seconds)*1e3;if(T<Date.parse("0001-01-01T00:00:00Z")||T>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let W="Z";if(this.nanos>0){const ne=(this.nanos+1e9).toString().substring(1);ne.substring(3)==="000000"?W="."+ne.substring(0,3)+"Z":ne.substring(6)==="000"?W="."+ne.substring(0,6)+"Z":W="."+ne+"Z"}return new Date(T).toISOString().replace(".000Z",W)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return mt.fromDate(new Date)}static fromDate(f){const T=f.getTime();return new mt({seconds:I.q.parse(Math.floor(T/1e3)),nanos:T%1e3*1e6})}static fromBinary(f,T){return new mt().fromBinary(f,T)}static fromJson(f,T){return new mt().fromJson(f,T)}static fromJsonString(f,T){return new mt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(mt,f,T)}}mt.runtime=y.w,mt.typeName="google.protobuf.Timestamp",mt.fields=y.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class qt extends q.v{constructor(f){super(),this.seconds=I.q.zero,this.nanos=0,y.w.util.initPartial(f,this)}fromJson(f,T){if(typeof f!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${y.w.json.debug(f)}`);const W=f.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(W===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${y.w.json.debug(f)}`);const ne=Number(W[1]);if(ne>315576e6||ne<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${y.w.json.debug(f)}`);if(this.seconds=I.q.parse(ne),typeof W[2]=="string"){const de=W[2]+"0".repeat(9-W[2].length);this.nanos=parseInt(de),(ne<0||Object.is(ne,-0))&&(this.nanos=-this.nanos)}return this}toJson(f){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let T=this.seconds.toString();if(this.nanos!==0){let W=Math.abs(this.nanos).toString();W="0".repeat(9-W.length)+W,W.substring(3)==="000000"?W=W.substring(0,3):W.substring(6)==="000"&&(W=W.substring(0,6)),T+="."+W,this.nanos<0&&Number(this.seconds)==0&&(T="-"+T)}return T+"s"}static fromBinary(f,T){return new qt().fromBinary(f,T)}static fromJson(f,T){return new qt().fromJson(f,T)}static fromJsonString(f,T){return new qt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(qt,f,T)}}qt.runtime=y.w,qt.typeName="google.protobuf.Duration",qt.fields=y.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var xn=w(733);class kt extends q.v{constructor(f){super(),y.w.util.initPartial(f,this)}static fromBinary(f,T){return new kt().fromBinary(f,T)}static fromJson(f,T){return new kt().fromJson(f,T)}static fromJsonString(f,T){return new kt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(kt,f,T)}}kt.runtime=y.w,kt.typeName="google.protobuf.Empty",kt.fields=y.w.util.newFieldList(()=>[]);class Ke extends q.v{constructor(f){super(),this.paths=[],y.w.util.initPartial(f,this)}toJson(f){function T(W){let ne=!1;const de=[];for(let ge=0;ge<W.length;ge++){let xe=W.charAt(ge);switch(xe){case"_":ne=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":de.push(xe),ne=!1;break;default:ne&&(ne=!1,xe=xe.toUpperCase()),de.push(xe);break}}return de.join("")}return this.paths.map(W=>{if(W.match(/_[0-9]?_/g)||W.match(/[A-Z]/g))throw new Error('cannot encode google.protobuf.FieldMask to JSON: lowerCamelCase of path name "'+W+'" is irreversible');return T(W)}).join(",")}fromJson(f,T){if(typeof f!="string")throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+y.w.json.debug(f));if(f==="")return this;function W(ne){if(ne.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const de=ne.replace(/[A-Z]/g,ge=>"_"+ge.toLowerCase());return de[0]==="_"?de.substring(1):de}return this.paths=f.split(",").map(W),this}static fromBinary(f,T){return new Ke().fromBinary(f,T)}static fromJson(f,T){return new Ke().fromJson(f,T)}static fromJsonString(f,T){return new Ke().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Ke,f,T)}}Ke.runtime=y.w,Ke.typeName="google.protobuf.FieldMask",Ke.fields=y.w.util.newFieldList(()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}]);var gt;(function(E){E[E.NULL_VALUE=0]="NULL_VALUE"})(gt||(gt={})),y.w.util.setEnumType(gt,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class Ot extends q.v{constructor(f){super(),this.fields={},y.w.util.initPartial(f,this)}toJson(f){const T={};for(const[W,ne]of Object.entries(this.fields))T[W]=ne.toJson(f);return T}fromJson(f,T){if(typeof f!="object"||f==null||Array.isArray(f))throw new Error("cannot decode google.protobuf.Struct from JSON "+y.w.json.debug(f));for(const[W,ne]of Object.entries(f))this.fields[W]=$e.fromJson(ne);return this}static fromBinary(f,T){return new Ot().fromBinary(f,T)}static fromJson(f,T){return new Ot().fromJson(f,T)}static fromJsonString(f,T){return new Ot().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Ot,f,T)}}Ot.runtime=y.w,Ot.typeName="google.protobuf.Struct",Ot.fields=y.w.util.newFieldList(()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:$e}}]);class $e extends q.v{constructor(f){super(),this.kind={case:void 0},y.w.util.initPartial(f,this)}toJson(f){switch(this.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(this.kind.value))throw new Error("google.protobuf.Value cannot be NaN or Infinity");return this.kind.value;case"boolValue":return this.kind.value;case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},f),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(f,T){switch(typeof f){case"number":this.kind={case:"numberValue",value:f};break;case"string":this.kind={case:"stringValue",value:f};break;case"boolean":this.kind={case:"boolValue",value:f};break;case"object":f===null?this.kind={case:"nullValue",value:gt.NULL_VALUE}:Array.isArray(f)?this.kind={case:"listValue",value:rt.fromJson(f)}:this.kind={case:"structValue",value:Ot.fromJson(f)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+y.w.json.debug(f))}return this}static fromBinary(f,T){return new $e().fromBinary(f,T)}static fromJson(f,T){return new $e().fromJson(f,T)}static fromJsonString(f,T){return new $e().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals($e,f,T)}}$e.runtime=y.w,$e.typeName="google.protobuf.Value",$e.fields=y.w.util.newFieldList(()=>[{no:1,name:"null_value",kind:"enum",T:y.w.getEnumType(gt),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:Ot,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:rt,oneof:"kind"}]);class rt extends q.v{constructor(f){super(),this.values=[],y.w.util.initPartial(f,this)}toJson(f){return this.values.map(T=>T.toJson())}fromJson(f,T){if(!Array.isArray(f))throw new Error("cannot decode google.protobuf.ListValue from JSON "+y.w.json.debug(f));for(let W of f)this.values.push($e.fromJson(W));return this}static fromBinary(f,T){return new rt().fromBinary(f,T)}static fromJson(f,T){return new rt().fromJson(f,T)}static fromJsonString(f,T){return new rt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(rt,f,T)}}rt.runtime=y.w,rt.typeName="google.protobuf.ListValue",rt.fields=y.w.util.newFieldList(()=>[{no:1,name:"values",kind:"message",T:$e,repeated:!0}]);var Ht=w(609);class nt extends q.v{constructor(f){super(),this.value=0,y.w.util.initPartial(f,this)}toJson(f){return y.w.json.writeScalar(r.w.DOUBLE,this.value,!0)}fromJson(f,T){try{this.value=y.w.json.readScalar(r.w.DOUBLE,f)}catch(W){let ne='cannot decode message google.protobuf.DoubleValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(f,T){return new nt().fromBinary(f,T)}static fromJson(f,T){return new nt().fromJson(f,T)}static fromJsonString(f,T){return new nt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(nt,f,T)}}nt.runtime=y.w,nt.typeName="google.protobuf.DoubleValue",nt.fields=y.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),nt.fieldWrapper={wrapField(E){return new nt({value:E})},unwrapField(E){return E.value}};class yt extends q.v{constructor(f){super(),this.value=0,y.w.util.initPartial(f,this)}toJson(f){return y.w.json.writeScalar(r.w.FLOAT,this.value,!0)}fromJson(f,T){try{this.value=y.w.json.readScalar(r.w.FLOAT,f)}catch(W){let ne='cannot decode message google.protobuf.FloatValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(f,T){return new yt().fromBinary(f,T)}static fromJson(f,T){return new yt().fromJson(f,T)}static fromJsonString(f,T){return new yt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(yt,f,T)}}yt.runtime=y.w,yt.typeName="google.protobuf.FloatValue",yt.fields=y.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),yt.fieldWrapper={wrapField(E){return new yt({value:E})},unwrapField(E){return E.value}};class wt extends q.v{constructor(f){super(),this.value=I.q.zero,y.w.util.initPartial(f,this)}toJson(f){return y.w.json.writeScalar(r.w.INT64,this.value,!0)}fromJson(f,T){try{this.value=y.w.json.readScalar(r.w.INT64,f)}catch(W){let ne='cannot decode message google.protobuf.Int64Value from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(f,T){return new wt().fromBinary(f,T)}static fromJson(f,T){return new wt().fromJson(f,T)}static fromJsonString(f,T){return new wt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(wt,f,T)}}wt.runtime=y.w,wt.typeName="google.protobuf.Int64Value",wt.fields=y.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),wt.fieldWrapper={wrapField(E){return new wt({value:E})},unwrapField(E){return E.value}};class Bt extends q.v{constructor(f){super(),this.value=I.q.zero,y.w.util.initPartial(f,this)}toJson(f){return y.w.json.writeScalar(r.w.UINT64,this.value,!0)}fromJson(f,T){try{this.value=y.w.json.readScalar(r.w.UINT64,f)}catch(W){let ne='cannot decode message google.protobuf.UInt64Value from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(f,T){return new Bt().fromBinary(f,T)}static fromJson(f,T){return new Bt().fromJson(f,T)}static fromJsonString(f,T){return new Bt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Bt,f,T)}}Bt.runtime=y.w,Bt.typeName="google.protobuf.UInt64Value",Bt.fields=y.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),Bt.fieldWrapper={wrapField(E){return new Bt({value:E})},unwrapField(E){return E.value}};class Ut extends q.v{constructor(f){super(),this.value=0,y.w.util.initPartial(f,this)}toJson(f){return y.w.json.writeScalar(r.w.INT32,this.value,!0)}fromJson(f,T){try{this.value=y.w.json.readScalar(r.w.INT32,f)}catch(W){let ne='cannot decode message google.protobuf.Int32Value from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(f,T){return new Ut().fromBinary(f,T)}static fromJson(f,T){return new Ut().fromJson(f,T)}static fromJsonString(f,T){return new Ut().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Ut,f,T)}}Ut.runtime=y.w,Ut.typeName="google.protobuf.Int32Value",Ut.fields=y.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),Ut.fieldWrapper={wrapField(E){return new Ut({value:E})},unwrapField(E){return E.value}};class Dt extends q.v{constructor(f){super(),this.value=0,y.w.util.initPartial(f,this)}toJson(f){return y.w.json.writeScalar(r.w.UINT32,this.value,!0)}fromJson(f,T){try{this.value=y.w.json.readScalar(r.w.UINT32,f)}catch(W){let ne='cannot decode message google.protobuf.UInt32Value from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(f,T){return new Dt().fromBinary(f,T)}static fromJson(f,T){return new Dt().fromJson(f,T)}static fromJsonString(f,T){return new Dt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Dt,f,T)}}Dt.runtime=y.w,Dt.typeName="google.protobuf.UInt32Value",Dt.fields=y.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),Dt.fieldWrapper={wrapField(E){return new Dt({value:E})},unwrapField(E){return E.value}};class st extends q.v{constructor(f){super(),this.value=!1,y.w.util.initPartial(f,this)}toJson(f){return y.w.json.writeScalar(r.w.BOOL,this.value,!0)}fromJson(f,T){try{this.value=y.w.json.readScalar(r.w.BOOL,f)}catch(W){let ne='cannot decode message google.protobuf.BoolValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(f,T){return new st().fromBinary(f,T)}static fromJson(f,T){return new st().fromJson(f,T)}static fromJsonString(f,T){return new st().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(st,f,T)}}st.runtime=y.w,st.typeName="google.protobuf.BoolValue",st.fields=y.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),st.fieldWrapper={wrapField(E){return new st({value:E})},unwrapField(E){return E.value}};class xt extends q.v{constructor(f){super(),this.value="",y.w.util.initPartial(f,this)}toJson(f){return y.w.json.writeScalar(r.w.STRING,this.value,!0)}fromJson(f,T){try{this.value=y.w.json.readScalar(r.w.STRING,f)}catch(W){let ne='cannot decode message google.protobuf.StringValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(f,T){return new xt().fromBinary(f,T)}static fromJson(f,T){return new xt().fromJson(f,T)}static fromJsonString(f,T){return new xt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(xt,f,T)}}xt.runtime=y.w,xt.typeName="google.protobuf.StringValue",xt.fields=y.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),xt.fieldWrapper={wrapField(E){return new xt({value:E})},unwrapField(E){return E.value}};class mn extends q.v{constructor(f){super(),this.value=new Uint8Array(0),y.w.util.initPartial(f,this)}toJson(f){return y.w.json.writeScalar(r.w.BYTES,this.value,!0)}fromJson(f,T){try{this.value=y.w.json.readScalar(r.w.BYTES,f)}catch(W){let ne='cannot decode message google.protobuf.BytesValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(f,T){return new mn().fromBinary(f,T)}static fromJson(f,T){return new mn().fromJson(f,T)}static fromJsonString(f,T){return new mn().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(mn,f,T)}}mn.runtime=y.w,mn.typeName="google.protobuf.BytesValue",mn.fields=y.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),mn.fieldWrapper={wrapField(E){return new mn({value:E})},unwrapField(E){return E.value}};const Jn=[xn.I,qt,kt,Ke,Ot,$e,rt,mt,qt,nt,yt,wt,Ut,Dt,Bt,st,xt,mn],et=[(0,Ht.V3)(gt)];function Lt(E,f=!0){const T=E instanceof Uint8Array||E instanceof U?Bn(E):E,W={},ne={},de={};if(f){for(const ge of Jn)ne[ge.typeName]=ge;for(const ge of et)W[ge.typeName]=ge}return{findEnum(ge){const xe=W[ge];if(xe)return xe;const be=T.enums.get(ge);if(!be)return;const Ce=(be.file.syntax=="proto3"?y.w:p).makeEnumType(ge,be.values.map(Ge=>({no:Ge.number,name:Ge.name,localName:(0,u.r1)(Ge)})),{});return W[ge]=Ce,Ce},findMessage(ge){const xe=ne[ge];if(xe)return xe;const be=T.messages.get(ge);if(!be)return;const Re=be.file.syntax=="proto3"?y.w:p,Ce=[],Ge=Re.makeMessageType(ge,()=>Ce,{localName:(0,u.r1)(be)});ne[ge]=Ge;for(const Jt of be.fields){const It=Yn(Jt,this);Ce.push(It)}return Ge},findService(ge){const xe=de[ge];if(xe)return xe;const be=T.services.get(ge);if(!be)return;const Re={};for(const Ce of be.methods){const Ge=this.findMessage(Ce.input.typeName),Jt=this.findMessage(Ce.output.typeName);(0,a.hu)(Ge,`message "${Ce.input.typeName}" for ${Ce.toString()} not found`),(0,a.hu)(Jt,`output message "${Ce.output.typeName}" for ${Ce.toString()} not found`),Re[(0,u.r1)(Ce)]={name:Ce.name,I:Ge,O:Jt,kind:Ce.methodKind,idempotency:Ce.idempotency}}return de[ge]={typeName:be.typeName,methods:Re}}}}function Yn(E,f){switch(E.fieldKind){case"map":return er(E,f);case"message":return Pn(E,f);case"enum":{const T=dr(E,f);return T.default=E.getDefaultValue(),T}case"scalar":{const T=rn(E);return T.default=E.getDefaultValue(),T}}}function er(E,f){const T={kind:"map",no:E.number,name:E.name,jsonName:E.jsonName,K:E.mapKey};if(E.mapValue.message){const W=f.findMessage(E.mapValue.message.typeName);return(0,a.hu)(W,`message "${E.mapValue.message.typeName}" for ${E.toString()} not found`),Object.assign(Object.assign({},T),{V:{kind:"message",T:W}})}if(E.mapValue.enum){const W=f.findEnum(E.mapValue.enum.typeName);return(0,a.hu)(W,`enum "${E.mapValue.enum.typeName}" for ${E.toString()} not found`),Object.assign(Object.assign({},T),{V:{kind:"enum",T:W}})}return Object.assign(Object.assign({},T),{V:{kind:"scalar",T:E.mapValue.scalar}})}function rn(E){const f=E.longType==r.p.STRING?{L:r.p.STRING}:{},T=Object.assign({kind:"scalar",no:E.number,name:E.name,jsonName:E.jsonName,T:E.scalar},f);return E.repeated?Object.assign(Object.assign({},T),{repeated:!0,packed:E.packed,oneof:void 0,T:E.scalar}):E.oneof?Object.assign(Object.assign({},T),{oneof:E.oneof.name}):E.optional?Object.assign(Object.assign({},T),{opt:!0}):T}function Pn(E,f){const T=f.findMessage(E.message.typeName);(0,a.hu)(T,`message "${E.message.typeName}" for ${E.toString()} not found`);const W={kind:"message",no:E.number,name:E.name,jsonName:E.jsonName,T,delimited:E.proto.type==Ne.GROUP};return E.repeated?Object.assign(Object.assign({},W),{repeated:!0,packed:E.packed,oneof:void 0}):E.oneof?Object.assign(Object.assign({},W),{oneof:E.oneof.name}):E.optional?Object.assign(Object.assign({},W),{opt:!0}):W}function dr(E,f){const T=f.findEnum(E.enum.typeName);(0,a.hu)(T,`enum "${E.enum.typeName}" for ${E.toString()} not found`);const W={kind:"enum",no:E.number,name:E.name,jsonName:E.jsonName,T};return E.repeated?Object.assign(Object.assign({},W),{repeated:!0,packed:E.packed,oneof:void 0}):E.oneof?Object.assign(Object.assign({},W),{oneof:E.oneof.name}):E.optional?Object.assign(Object.assign({},W),{opt:!0}):W}function gr(E){if(!(E instanceof q.v))return E;const f=E.getType(),T={};for(const W of f.fields.byMember()){const ne=E[W.localName];let de;if(W.repeated)de=ne.map(ge=>Fn(ge));else if(W.kind=="map"){de={};for(const[ge,xe]of Object.entries(ne))de[ge]=Fn(xe)}else W.kind=="oneof"?de=W.findField(ne.case)?{case:ne.case,value:Fn(ne.value)}:{case:void 0}:de=Fn(ne);T[W.localName]=de}return T}function Fn(E){if(E===void 0)return E;if(E instanceof q.v)return gr(E);if(E instanceof Uint8Array){const f=new Uint8Array(E.byteLength);return f.set(E),f}return E}class En extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new En().fromBinary(f,T)}static fromJson(f,T){return new En().fromJson(f,T)}static fromJsonString(f,T){return new En().fromJsonString(f,T)}static equals(f,T){return p.util.equals(En,f,T)}}En.runtime=p,En.typeName="google.protobuf.compiler.Version",En.fields=p.util.newFieldList(()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]);class cn extends q.v{constructor(f){super(),this.fileToGenerate=[],this.protoFile=[],this.sourceFileDescriptors=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new cn().fromBinary(f,T)}static fromJson(f,T){return new cn().fromJson(f,T)}static fromJsonString(f,T){return new cn().fromJsonString(f,T)}static equals(f,T){return p.util.equals(cn,f,T)}}cn.runtime=p,cn.typeName="google.protobuf.compiler.CodeGeneratorRequest",cn.fields=p.util.newFieldList(()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:re,repeated:!0},{no:17,name:"source_file_descriptors",kind:"message",T:re,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:En,opt:!0}]);class Cn extends q.v{constructor(f){super(),this.file=[],p.util.initPartial(f,this)}static fromBinary(f,T){return new Cn().fromBinary(f,T)}static fromJson(f,T){return new Cn().fromJson(f,T)}static fromJsonString(f,T){return new Cn().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Cn,f,T)}}Cn.runtime=p,Cn.typeName="google.protobuf.compiler.CodeGeneratorResponse",Cn.fields=p.util.newFieldList(()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:Xt,repeated:!0}]);var tr;(function(E){E[E.NONE=0]="NONE",E[E.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL",E[E.SUPPORTS_EDITIONS=2]="SUPPORTS_EDITIONS"})(tr||(tr={})),p.util.setEnumType(tr,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"},{no:2,name:"FEATURE_SUPPORTS_EDITIONS"}]);class Xt extends q.v{constructor(f){super(),p.util.initPartial(f,this)}static fromBinary(f,T){return new Xt().fromBinary(f,T)}static fromJson(f,T){return new Xt().fromJson(f,T)}static fromJsonString(f,T){return new Xt().fromJsonString(f,T)}static equals(f,T){return p.util.equals(Xt,f,T)}}Xt.runtime=p,Xt.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",Xt.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:ht,opt:!0}]);class yn extends q.v{constructor(f){super(),this.fileName="",y.w.util.initPartial(f,this)}static fromBinary(f,T){return new yn().fromBinary(f,T)}static fromJson(f,T){return new yn().fromJson(f,T)}static fromJsonString(f,T){return new yn().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(yn,f,T)}}yn.runtime=y.w,yn.typeName="google.protobuf.SourceContext",yn.fields=y.w.util.newFieldList(()=>[{no:1,name:"file_name",kind:"scalar",T:9}]);var vn;(function(E){E[E.PROTO2=0]="PROTO2",E[E.PROTO3=1]="PROTO3",E[E.EDITIONS=2]="EDITIONS"})(vn||(vn={})),y.w.util.setEnumType(vn,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"},{no:2,name:"SYNTAX_EDITIONS"}]);class Hn extends q.v{constructor(f){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=vn.PROTO2,this.edition="",y.w.util.initPartial(f,this)}static fromBinary(f,T){return new Hn().fromBinary(f,T)}static fromJson(f,T){return new Hn().fromJson(f,T)}static fromJsonString(f,T){return new Hn().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Hn,f,T)}}Hn.runtime=y.w,Hn.typeName="google.protobuf.Type",Hn.fields=y.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:$n,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:vt,repeated:!0},{no:5,name:"source_context",kind:"message",T:yn},{no:6,name:"syntax",kind:"enum",T:y.w.getEnumType(vn)},{no:7,name:"edition",kind:"scalar",T:9}]);class $n extends q.v{constructor(f){super(),this.kind=Nn.TYPE_UNKNOWN,this.cardinality=Vn.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",y.w.util.initPartial(f,this)}static fromBinary(f,T){return new $n().fromBinary(f,T)}static fromJson(f,T){return new $n().fromJson(f,T)}static fromJsonString(f,T){return new $n().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals($n,f,T)}}$n.runtime=y.w,$n.typeName="google.protobuf.Field",$n.fields=y.w.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:y.w.getEnumType(Nn)},{no:2,name:"cardinality",kind:"enum",T:y.w.getEnumType(Vn)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:vt,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}]);var Nn;(function(E){E[E.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",E[E.TYPE_DOUBLE=1]="TYPE_DOUBLE",E[E.TYPE_FLOAT=2]="TYPE_FLOAT",E[E.TYPE_INT64=3]="TYPE_INT64",E[E.TYPE_UINT64=4]="TYPE_UINT64",E[E.TYPE_INT32=5]="TYPE_INT32",E[E.TYPE_FIXED64=6]="TYPE_FIXED64",E[E.TYPE_FIXED32=7]="TYPE_FIXED32",E[E.TYPE_BOOL=8]="TYPE_BOOL",E[E.TYPE_STRING=9]="TYPE_STRING",E[E.TYPE_GROUP=10]="TYPE_GROUP",E[E.TYPE_MESSAGE=11]="TYPE_MESSAGE",E[E.TYPE_BYTES=12]="TYPE_BYTES",E[E.TYPE_UINT32=13]="TYPE_UINT32",E[E.TYPE_ENUM=14]="TYPE_ENUM",E[E.TYPE_SFIXED32=15]="TYPE_SFIXED32",E[E.TYPE_SFIXED64=16]="TYPE_SFIXED64",E[E.TYPE_SINT32=17]="TYPE_SINT32",E[E.TYPE_SINT64=18]="TYPE_SINT64"})(Nn||(Nn={})),y.w.util.setEnumType(Nn,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var Vn;(function(E){E[E.UNKNOWN=0]="UNKNOWN",E[E.OPTIONAL=1]="OPTIONAL",E[E.REQUIRED=2]="REQUIRED",E[E.REPEATED=3]="REPEATED"})(Vn||(Vn={})),y.w.util.setEnumType(Vn,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class Gn extends q.v{constructor(f){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=vn.PROTO2,this.edition="",y.w.util.initPartial(f,this)}static fromBinary(f,T){return new Gn().fromBinary(f,T)}static fromJson(f,T){return new Gn().fromJson(f,T)}static fromJsonString(f,T){return new Gn().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Gn,f,T)}}Gn.runtime=y.w,Gn.typeName="google.protobuf.Enum",Gn.fields=y.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:zn,repeated:!0},{no:3,name:"options",kind:"message",T:vt,repeated:!0},{no:4,name:"source_context",kind:"message",T:yn},{no:5,name:"syntax",kind:"enum",T:y.w.getEnumType(vn)},{no:6,name:"edition",kind:"scalar",T:9}]);class zn extends q.v{constructor(f){super(),this.name="",this.number=0,this.options=[],y.w.util.initPartial(f,this)}static fromBinary(f,T){return new zn().fromBinary(f,T)}static fromJson(f,T){return new zn().fromJson(f,T)}static fromJsonString(f,T){return new zn().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(zn,f,T)}}zn.runtime=y.w,zn.typeName="google.protobuf.EnumValue",zn.fields=y.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:vt,repeated:!0}]);class vt extends q.v{constructor(f){super(),this.name="",y.w.util.initPartial(f,this)}static fromBinary(f,T){return new vt().fromBinary(f,T)}static fromJson(f,T){return new vt().fromJson(f,T)}static fromJsonString(f,T){return new vt().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(vt,f,T)}}vt.runtime=y.w,vt.typeName="google.protobuf.Option",vt.fields=y.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:xn.I}]);class Kn extends q.v{constructor(f){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=vn.PROTO2,y.w.util.initPartial(f,this)}static fromBinary(f,T){return new Kn().fromBinary(f,T)}static fromJson(f,T){return new Kn().fromJson(f,T)}static fromJsonString(f,T){return new Kn().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Kn,f,T)}}Kn.runtime=y.w,Kn.typeName="google.protobuf.Api",Kn.fields=y.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:Ln,repeated:!0},{no:3,name:"options",kind:"message",T:vt,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:yn},{no:6,name:"mixins",kind:"message",T:Mn,repeated:!0},{no:7,name:"syntax",kind:"enum",T:y.w.getEnumType(vn)}]);class Ln extends q.v{constructor(f){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=vn.PROTO2,y.w.util.initPartial(f,this)}static fromBinary(f,T){return new Ln().fromBinary(f,T)}static fromJson(f,T){return new Ln().fromJson(f,T)}static fromJsonString(f,T){return new Ln().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Ln,f,T)}}Ln.runtime=y.w,Ln.typeName="google.protobuf.Method",Ln.fields=y.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:vt,repeated:!0},{no:7,name:"syntax",kind:"enum",T:y.w.getEnumType(vn)}]);class Mn extends q.v{constructor(f){super(),this.name="",this.root="",y.w.util.initPartial(f,this)}static fromBinary(f,T){return new Mn().fromBinary(f,T)}static fromJson(f,T){return new Mn().fromJson(f,T)}static fromJsonString(f,T){return new Mn().fromJsonString(f,T)}static equals(f,T){return y.w.util.equals(Mn,f,T)}}Mn.runtime=y.w,Mn.typeName="google.protobuf.Mixin",Mn.fields=y.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}])},561:(C,_,w)=>{w.d(_,{v:()=>y});class y{equals(r){return this.getType().runtime.util.equals(this.getType(),this,r)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(r,l){const i=this.getType(),g=i.runtime.bin,b=g.makeReadOptions(l);return g.readMessage(this,b.readerFactory(r),r.byteLength,b),this}fromJson(r,l){const i=this.getType(),g=i.runtime.json,b=g.makeReadOptions(l);return g.readMessage(i,r,b,this),this}fromJsonString(r,l){let i;try{i=JSON.parse(r)}catch(g){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${g instanceof Error?g.message:String(g)}`)}return this.fromJson(i,l)}toBinary(r){const l=this.getType(),i=l.runtime.bin,g=i.makeWriteOptions(r),b=g.writerFactory();return i.writeMessage(this,b,g),b.finish()}toJson(r){const l=this.getType(),i=l.runtime.json,g=i.makeWriteOptions(r);return i.writeMessage(this,g)}toJsonString(r){var l;const i=this.toJson(r);return JSON.stringify(i,null,(l=r==null?void 0:r.prettySpaces)!==null&&l!==void 0?l:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}},120:(C,_,w)=>{w.d(_,{E_:()=>u,fp:()=>h,hu:()=>y,ug:()=>b});function y(o,a){if(!o)throw new Error(a)}const v=34028234663852886e22,r=-34028234663852886e22,l=4294967295,i=2147483647,g=-2147483648;function b(o){if(typeof o!="number")throw new Error("invalid int 32: "+typeof o);if(!Number.isInteger(o)||o>i||o<g)throw new Error("invalid int 32: "+o)}function h(o){if(typeof o!="number")throw new Error("invalid uint 32: "+typeof o);if(!Number.isInteger(o)||o>l||o<0)throw new Error("invalid uint 32: "+o)}function u(o){if(typeof o!="number")throw new Error("invalid float 32: "+typeof o);if(!!Number.isFinite(o)&&(o>v||o<r))throw new Error("invalid float 32: "+o)}},744:(C,_,w)=>{w.d(_,{Jj:()=>P,NN:()=>S,gQ:()=>I,gY:()=>s,oQ:()=>A});var y=w(79),v=w(561),r=w(465),l=w(432),i=w(781),g=w(120);const b=Symbol("@bufbuild/protobuf/unknown-fields"),h={readUnknownFields:!0,readerFactory:x=>new y.oP(x)},u={writeUnknownFields:!0,writerFactory:()=>new y.Lt};function o(x){return x?Object.assign(Object.assign({},h),x):h}function a(x){return x?Object.assign(Object.assign({},u),x):u}function s(){return{makeReadOptions:o,makeWriteOptions:a,listUnknownFields(x){var R;return(R=x[b])!==null&&R!==void 0?R:[]},discardUnknownFields(x){delete x[b]},writeUnknownFields(x,R){const J=x[b];if(J)for(const z of J)R.tag(z.no,z.wireType).raw(z.data)},onUnknownField(x,R,L,J){const z=x;Array.isArray(z[b])||(z[b]=[]),z[b].push({no:R,wireType:L,data:J})},readMessage(x,R,L,J,z){const te=x.getType(),Z=z?R.len:R.pos+L;let q,B;for(;R.pos<Z&&([q,B]=R.tag(),B!=y.TD.EndGroup);){const $=te.fields.find(q);if(!$){const V=R.skip(B);J.readUnknownFields&&this.onUnknownField(x,q,B,V);continue}let U=x,re=$.repeated,ee=$.localName;switch($.oneof&&(U=U[$.oneof.localName],U.case!=ee&&delete U.value,U.case=ee,ee="value"),$.kind){case"scalar":case"enum":const V=$.kind=="enum"?r.w.INT32:$.T;let X=N;if($.kind=="scalar"&&$.L>0&&(X=O),re){let _e=U[ee];if(B==y.TD.LengthDelimited&&V!=r.w.STRING&&V!=r.w.BYTES){let Ne=R.uint32()+R.pos;for(;R.pos<Ne;)_e.push(X(R,V))}else _e.push(X(R,V))}else U[ee]=X(R,V);break;case"message":const ie=$.T;re?U[ee].push(m(R,new ie,J,$)):U[ee]instanceof v.v?m(R,U[ee],J,$):(U[ee]=m(R,new ie,J,$),ie.fieldWrapper&&!$.oneof&&!$.repeated&&(U[ee]=ie.fieldWrapper.unwrapField(U[ee])));break;case"map":let[le,ve]=p($,R,J);U[ee][le]=ve;break}}if(z&&(B!=y.TD.EndGroup||q!==L))throw new Error("invalid end group tag")}}}function m(x,R,L,J){const z=R.getType().runtime.bin,te=J==null?void 0:J.delimited;return z.readMessage(R,x,te?J==null?void 0:J.no:x.uint32(),L,te),R}function p(x,R,L){const J=R.uint32(),z=R.pos+J;let te,Z;for(;R.pos<z;){let[q]=R.tag();switch(q){case 1:te=N(R,x.K);break;case 2:switch(x.V.kind){case"scalar":Z=N(R,x.V.T);break;case"enum":Z=R.int32();break;case"message":Z=m(R,new x.V.T,L,void 0);break}break}}if(te===void 0){let q=(0,i.kY)(x.K,r.p.BIGINT);te=x.K==r.w.BOOL?q.toString():q}if(typeof te!="string"&&typeof te!="number"&&(te=te.toString()),Z===void 0)switch(x.V.kind){case"scalar":Z=(0,i.kY)(x.V.T,r.p.BIGINT);break;case"enum":Z=0;break;case"message":Z=new x.V.T;break}return[te,Z]}function O(x,R){const L=N(x,R);return typeof L=="bigint"?L.toString():L}function N(x,R){switch(R){case r.w.STRING:return x.string();case r.w.BOOL:return x.bool();case r.w.DOUBLE:return x.double();case r.w.FLOAT:return x.float();case r.w.INT32:return x.int32();case r.w.INT64:return x.int64();case r.w.UINT64:return x.uint64();case r.w.FIXED64:return x.fixed64();case r.w.BYTES:return x.bytes();case r.w.FIXED32:return x.fixed32();case r.w.SFIXED32:return x.sfixed32();case r.w.SFIXED64:return x.sfixed64();case r.w.SINT64:return x.sint64();case r.w.UINT32:return x.uint32();case r.w.SINT32:return x.sint32()}}function I(x,R,L,J,z){x.tag(L.no,y.TD.LengthDelimited),x.fork();let te=J;switch(L.K){case r.w.INT32:case r.w.FIXED32:case r.w.UINT32:case r.w.SFIXED32:case r.w.SINT32:te=Number.parseInt(J);break;case r.w.BOOL:(0,g.hu)(J=="true"||J=="false"),te=J=="true";break}switch(S(x,L.K,1,te,!0),L.V.kind){case"scalar":S(x,L.V.T,2,z,!0);break;case"enum":S(x,r.w.INT32,2,z,!0);break;case"message":x.tag(2,y.TD.LengthDelimited).bytes(z.toBinary(R));break}x.join()}function A(x,R,L,J){if(J!==void 0){const z=(0,l.E)(L.T,J);L!=null&&L.delimited?x.tag(L.no,y.TD.StartGroup).raw(z.toBinary(R)).tag(L.no,y.TD.EndGroup):x.tag(L.no,y.TD.LengthDelimited).bytes(z.toBinary(R))}}function S(x,R,L,J,z){let[te,Z,q]=(0,i.T1)(R,J);(!q||z)&&x.tag(L,te)[Z](J)}function P(x,R,L,J){if(!J.length)return;x.tag(L,y.TD.LengthDelimited).fork();let[,z]=(0,i.T1)(R);for(let te=0;te<J.length;te++)x[z](J[te]);x.join()}},609:(C,_,w)=>{w.d(_,{V3:()=>r,be:()=>i,ut:()=>g,zg:()=>l});var y=w(120);const v=Symbol("@bufbuild/protobuf/enum-type");function r(h){const u=h[v];return(0,y.hu)(u,"missing enum type on enum object"),u}function l(h,u,o,a){h[v]=i(u,o.map(s=>({no:s.no,name:s.name,localName:h[s.no]})))}function i(h,u,o){const a=Object.create(null),s=Object.create(null),m=[];for(const p of u){const O=b(p);m.push(O),a[p.name]=O,s[p.no]=O}return{typeName:h,values:m,findName(p){return a[p]},findNumber(p){return s[p]}}}function g(h,u,o){const a={};for(const s of u){const m=b(s);a[m.localName]=m.no,a[m.no]=m.localName}return l(a,h,u),a}function b(h){return"localName"in h?h:Object.assign(Object.assign({},h),{localName:h.name})}},501:(C,_,w)=>{w.d(_,{i:()=>y});class y{constructor(r,l){this._fields=r,this._normalizer=l}findJsonName(r){if(!this.jsonNames){const l={};for(const i of this.list())l[i.jsonName]=l[i.name]=i;this.jsonNames=l}return this.jsonNames[r]}find(r){if(!this.numbers){const l={};for(const i of this.list())l[i.no]=i;this.numbers=l}return this.numbers[r]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((r,l)=>r.no-l.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const r=this.members;let l;for(const i of this.list())i.oneof?i.oneof!==l&&(l=i.oneof,r.push(l)):r.push(i)}return this.members}}},432:(C,_,w)=>{w.d(_,{E:()=>r,w:()=>l});var y=w(561),v=w(465);function r(g,b){return b instanceof y.v||!g.fieldWrapper?b:g.fieldWrapper.wrapField(b)}function l(g){if(g.fieldKind==="message"&&!g.repeated&&g.oneof==null)return i[g.message.typeName]}const i={"google.protobuf.DoubleValue":v.w.DOUBLE,"google.protobuf.FloatValue":v.w.FLOAT,"google.protobuf.Int64Value":v.w.INT64,"google.protobuf.UInt64Value":v.w.UINT64,"google.protobuf.Int32Value":v.w.INT32,"google.protobuf.UInt32Value":v.w.UINT32,"google.protobuf.BoolValue":v.w.BOOL,"google.protobuf.StringValue":v.w.STRING,"google.protobuf.BytesValue":v.w.BYTES}},215:(C,_,w)=>{w.d(_,{o:()=>r});var y=w(504),v=w(120);class r{constructor(i){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=i,this.localName=(0,y.uA)(i)}addField(i){(0,v.hu)(i.oneof===this,`field ${i.name} not one of ${this.name}`),this.fields.push(i)}findField(i){if(!this._lookup){this._lookup=Object.create(null);for(let g=0;g<this.fields.length;g++)this._lookup[this.fields[g].localName]=this.fields[g]}return this._lookup[i]}}},814:(C,_,w)=>{w.d(_,{b:()=>o});var y=w(561),v=w(465),r=w(120),l=w(210),i=w(236);const g={ignoreUnknownFields:!1},b={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function h(N){return N?Object.assign(Object.assign({},g),N):g}function u(N){return N?Object.assign(Object.assign({},b),N):b}function o(N){const I=N(p,O);return{makeReadOptions:h,makeWriteOptions:u,readMessage(A,S,P,x){if(S==null||Array.isArray(S)||typeof S!="object")throw new Error(`cannot decode message ${A.typeName} from JSON: ${this.debug(S)}`);x=x!=null?x:new A;const R={};for(const[L,J]of Object.entries(S)){const z=A.fields.findJsonName(L);if(!z){if(!P.ignoreUnknownFields)throw new Error(`cannot decode message ${A.typeName} from JSON: key "${L}" is unknown`);continue}let te=z.localName,Z=x;if(z.oneof){if(J===null&&z.kind=="scalar")continue;const q=R[z.oneof.localName];if(q)throw new Error(`cannot decode message ${A.typeName} from JSON: multiple keys for oneof "${z.oneof.name}" present: "${q}", "${L}"`);R[z.oneof.localName]=L,Z=Z[z.oneof.localName]={case:te},te="value"}if(z.repeated){if(J===null)continue;if(!Array.isArray(J))throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`);const q=Z[te];for(const B of J){if(B===null)throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(B)}`);let $;switch(z.kind){case"message":$=z.T.fromJson(B,P);break;case"enum":if($=m(z.T,B,P.ignoreUnknownFields),$===void 0)continue;break;case"scalar":try{$=s(z.T,B,z.L)}catch(U){let re=`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(B)}`;throw U instanceof Error&&U.message.length>0&&(re+=`: ${U.message}`),new Error(re)}break}q.push($)}}else if(z.kind=="map"){if(J===null)continue;if(Array.isArray(J)||typeof J!="object")throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`);const q=Z[te];for(const[B,$]of Object.entries(J)){if($===null)throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: map value null`);let U;switch(z.V.kind){case"message":U=z.V.T.fromJson($,P);break;case"enum":if(U=m(z.V.T,$,P.ignoreUnknownFields),U===void 0)continue;break;case"scalar":try{U=s(z.V.T,$,v.p.BIGINT)}catch(re){let ee=`cannot decode map value for field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`;throw re instanceof Error&&re.message.length>0&&(ee+=`: ${re.message}`),new Error(ee)}break}try{q[s(z.K,z.K==v.w.BOOL?B=="true"?!0:B=="false"?!1:B:B,v.p.BIGINT).toString()]=U}catch(re){let ee=`cannot decode map key for field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`;throw re instanceof Error&&re.message.length>0&&(ee+=`: ${re.message}`),new Error(ee)}}}else switch(z.kind){case"message":const q=z.T;if(J===null&&q.typeName!="google.protobuf.Value"){if(z.oneof)throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: null is invalid for oneof field "${L}"`);continue}Z[te]instanceof y.v?Z[te].fromJson(J,P):(Z[te]=q.fromJson(J,P),q.fieldWrapper&&!z.oneof&&(Z[te]=q.fieldWrapper.unwrapField(Z[te])));break;case"enum":const B=m(z.T,J,P.ignoreUnknownFields);B!==void 0&&(Z[te]=B);break;case"scalar":try{Z[te]=s(z.T,J,z.L)}catch($){let U=`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`;throw $ instanceof Error&&$.message.length>0&&(U+=`: ${$.message}`),new Error(U)}break}}return x},writeMessage(A,S){const P=A.getType(),x={};let R;try{for(const L of P.fields.byMember()){let J;if(L.kind=="oneof"){const z=A[L.localName];if(z.value===void 0)continue;if(R=L.findField(z.case),!R)throw"oneof case not found: "+z.case;J=I(R,z.value,S)}else R=L,J=I(R,A[R.localName],S);J!==void 0&&(x[S.useProtoFieldName?R.name:R.jsonName]=J)}}catch(L){const J=R?`cannot encode field ${P.typeName}.${R.name} to JSON`:`cannot encode message ${P.typeName} to JSON`,z=L instanceof Error?L.message:String(L);throw new Error(J+(z.length>0?`: ${z}`:""))}return x},readScalar:s,writeScalar:O,debug:a}}function a(N){if(N===null)return"null";switch(typeof N){case"object":return Array.isArray(N)?"array":"object";case"string":return N.length>100?"string":`"${N.split('"').join('\\"')}"`;default:return String(N)}}function s(N,I,A){switch(N){case v.w.DOUBLE:case v.w.FLOAT:if(I===null)return 0;if(I==="NaN")return Number.NaN;if(I==="Infinity")return Number.POSITIVE_INFINITY;if(I==="-Infinity")return Number.NEGATIVE_INFINITY;if(I===""||typeof I=="string"&&I.trim().length!==I.length||typeof I!="string"&&typeof I!="number")break;const S=Number(I);if(Number.isNaN(S)||!Number.isFinite(S))break;return N==v.w.FLOAT&&(0,r.E_)(S),S;case v.w.INT32:case v.w.FIXED32:case v.w.SFIXED32:case v.w.SINT32:case v.w.UINT32:if(I===null)return 0;let P;if(typeof I=="number"?P=I:typeof I=="string"&&I.length>0&&I.trim().length===I.length&&(P=Number(I)),P===void 0)break;return N==v.w.UINT32?(0,r.fp)(P):(0,r.ug)(P),P;case v.w.INT64:case v.w.SFIXED64:case v.w.SINT64:if(I===null)return l.q.zero;if(typeof I!="number"&&typeof I!="string")break;const x=l.q.parse(I);return A?x.toString():x;case v.w.FIXED64:case v.w.UINT64:if(I===null)return l.q.zero;if(typeof I!="number"&&typeof I!="string")break;const R=l.q.uParse(I);return A?R.toString():R;case v.w.BOOL:if(I===null)return!1;if(typeof I!="boolean")break;return I;case v.w.STRING:if(I===null)return"";if(typeof I!="string")break;try{encodeURIComponent(I)}catch{throw new Error("invalid UTF8")}return I;case v.w.BYTES:if(I===null||I==="")return new Uint8Array(0);if(typeof I!="string")break;return i.W.dec(I)}throw new Error}function m(N,I,A){if(I===null)return 0;switch(typeof I){case"number":if(Number.isInteger(I))return I;break;case"string":const S=N.findName(I);if(S||A)return S==null?void 0:S.no;break}throw new Error(`cannot decode enum ${N.typeName} from JSON: ${a(I)}`)}function p(N,I,A,S){var P;if(I===void 0)return I;if(I===0&&!A)return;if(S)return I;if(N.typeName=="google.protobuf.NullValue")return null;const x=N.findNumber(I);return(P=x==null?void 0:x.name)!==null&&P!==void 0?P:I}function O(N,I,A){if(I!==void 0)switch(N){case v.w.INT32:case v.w.SFIXED32:case v.w.SINT32:case v.w.FIXED32:case v.w.UINT32:return(0,r.hu)(typeof I=="number"),I!=0||A?I:void 0;case v.w.FLOAT:case v.w.DOUBLE:return(0,r.hu)(typeof I=="number"),Number.isNaN(I)?"NaN":I===Number.POSITIVE_INFINITY?"Infinity":I===Number.NEGATIVE_INFINITY?"-Infinity":I!==0||A?I:void 0;case v.w.STRING:return(0,r.hu)(typeof I=="string"),I.length>0||A?I:void 0;case v.w.BOOL:return(0,r.hu)(typeof I=="boolean"),I||A?I:void 0;case v.w.UINT64:case v.w.FIXED64:case v.w.INT64:case v.w.SFIXED64:case v.w.SINT64:return(0,r.hu)(typeof I=="bigint"||typeof I=="string"||typeof I=="number"),A||I!=0?I.toString(10):void 0;case v.w.BYTES:return(0,r.hu)(I instanceof Uint8Array),A||I.byteLength>0?i.W.enc(I):void 0}}},504:(C,_,w)=>{w.d(_,{GD:()=>p,Rz:()=>v,Sm:()=>i,ll:()=>m,r1:()=>y,uA:()=>r,x1:()=>l});function y(O){switch(O.kind){case"field":return v(O.name,O.oneof!==void 0);case"oneof":return r(O.name);case"enum":case"message":case"service":{const N=O.file.proto.package,I=N===void 0?0:N.length+1,A=O.typeName.substring(I).replace(/\./g,"_");return m(p(A))}case"enum_value":{const N=O.parent.sharedPrefix;if(N===void 0)return O.name;const I=O.name.substring(N.length);return m(I)}case"rpc":{let N=O.name;return N.length==0?N:(N=N[0].toLowerCase()+N.substring(1),m(N))}}}function v(O,N){const I=b(O);return N?I:m(s(I))}function r(O){return v(O,!1)}const l=b;function i(O,N){const I=g(O)+"_";for(const A of N){if(!A.toLowerCase().startsWith(I))return;const S=A.substring(I.length);if(S.length==0||/^\d/.test(S))return}return I}function g(O){return(O.substring(0,1)+O.substring(1).replace(/[A-Z]/g,N=>"_"+N)).toLowerCase()}function b(O){let N=!1;const I=[];for(let A=0;A<O.length;A++){let S=O.charAt(A);switch(S){case"_":N=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":I.push(S),N=!1;break;default:N&&(N=!1,S=S.toUpperCase()),I.push(S);break}}return I.join("")}const h=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]),u=new Set(["constructor","toString","toJSON","valueOf"]),o=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),a=O=>`${O}$`,s=O=>o.has(O)?a(O):O,m=O=>u.has(O)?a(O):O,p=O=>h.has(O)?a(O):O},493:(C,_,w)=>{w.d(_,{F:()=>l});var y=w(609),v=w(561);function r(i,g,b,h){var u;const o=(u=h==null?void 0:h.localName)!==null&&u!==void 0?u:g.substring(g.lastIndexOf(".")+1),a={[o]:function(s){i.util.initFields(this),i.util.initPartial(s,this)}}[o];return Object.setPrototypeOf(a.prototype,new v.v),Object.assign(a,{runtime:i,typeName:g,fields:i.util.newFieldList(b),fromBinary(s,m){return new a().fromBinary(s,m)},fromJson(s,m){return new a().fromJson(s,m)},fromJsonString(s,m){return new a().fromJsonString(s,m)},equals(s,m){return i.util.equals(a,s,m)}}),a}function l(i,g,b,h){return{syntax:i,json:g,bin:b,util:h,makeMessageType(u,o,a){return r(this,u,o,a)},makeEnum:y.ut,makeEnumType:y.be,getEnumType:y.V3}}},781:(C,_,w)=>{w.d(_,{AA:()=>l,T1:()=>g,kY:()=>i});var y=w(465),v=w(79),r=w(210);function l(b,h,u){if(h===u)return!0;if(b==y.w.BYTES){if(!(h instanceof Uint8Array)||!(u instanceof Uint8Array)||h.length!==u.length)return!1;for(let o=0;o<h.length;o++)if(h[o]!==u[o])return!1;return!0}switch(b){case y.w.UINT64:case y.w.FIXED64:case y.w.INT64:case y.w.SFIXED64:case y.w.SINT64:return h==u}return!1}function i(b,h){switch(b){case y.w.BOOL:return!1;case y.w.UINT64:case y.w.FIXED64:case y.w.INT64:case y.w.SFIXED64:case y.w.SINT64:return h==0?r.q.zero:"0";case y.w.DOUBLE:case y.w.FLOAT:return 0;case y.w.BYTES:return new Uint8Array(0);case y.w.STRING:return"";default:return 0}}function g(b,h){const u=h===void 0;let o=v.TD.Varint,a=h===0;switch(b){case y.w.STRING:a=u||!h.length,o=v.TD.LengthDelimited;break;case y.w.BOOL:a=h===!1;break;case y.w.DOUBLE:o=v.TD.Bit64;break;case y.w.FLOAT:o=v.TD.Bit32;break;case y.w.INT64:a=u||h==0;break;case y.w.UINT64:a=u||h==0;break;case y.w.FIXED64:a=u||h==0,o=v.TD.Bit64;break;case y.w.BYTES:a=u||!h.byteLength,o=v.TD.LengthDelimited;break;case y.w.FIXED32:o=v.TD.Bit32;break;case y.w.SFIXED32:o=v.TD.Bit32;break;case y.w.SFIXED64:a=u||h==0,o=v.TD.Bit64;break;case y.w.SINT64:a=u||h==0;break}const s=y.w[b].toLowerCase();return[o,s,u||a]}},433:(C,_,w)=>{w.d(_,{f:()=>i});var y=w(609),v=w(561),r=w(465),l=w(781);function i(){return{setEnumType:y.zg,initPartial(h,u){if(h===void 0)return;const o=u.getType();for(const a of o.fields.byMember()){const s=a.localName,m=u,p=h;if(p[s]!==void 0)switch(a.kind){case"oneof":const O=p[s].case;if(O===void 0)continue;const N=a.findField(O);let I=p[s].value;N&&N.kind=="message"&&!(I instanceof N.T)?I=new N.T(I):N&&N.kind==="scalar"&&N.T===r.w.BYTES&&(I=b(I)),m[s]={case:O,value:I};break;case"scalar":case"enum":let A=p[s];a.T===r.w.BYTES&&(A=a.repeated?A.map(b):b(A)),m[s]=A;break;case"map":switch(a.V.kind){case"scalar":case"enum":if(a.V.T===r.w.BYTES)for(const[x,R]of Object.entries(p[s]))m[s][x]=b(R);else Object.assign(m[s],p[s]);break;case"message":const P=a.V.T;for(const x of Object.keys(p[s])){let R=p[s][x];P.fieldWrapper||(R=new P(R)),m[s][x]=R}break}break;case"message":const S=a.T;if(a.repeated)m[s]=p[s].map(P=>P instanceof S?P:new S(P));else if(p[s]!==void 0){const P=p[s];S.fieldWrapper?S.typeName==="google.protobuf.BytesValue"?m[s]=b(P):m[s]=P:m[s]=P instanceof S?P:new S(P)}break}}},equals(h,u,o){return u===o?!0:!u||!o?!1:h.fields.byMember().every(a=>{const s=u[a.localName],m=o[a.localName];if(a.repeated){if(s.length!==m.length)return!1;switch(a.kind){case"message":return s.every((p,O)=>a.T.equals(p,m[O]));case"scalar":return s.every((p,O)=>(0,l.AA)(a.T,p,m[O]));case"enum":return s.every((p,O)=>(0,l.AA)(r.w.INT32,p,m[O]))}throw new Error(`repeated cannot contain ${a.kind}`)}switch(a.kind){case"message":return a.T.equals(s,m);case"enum":return(0,l.AA)(r.w.INT32,s,m);case"scalar":return(0,l.AA)(a.T,s,m);case"oneof":if(s.case!==m.case)return!1;const p=a.findField(s.case);if(p===void 0)return!0;switch(p.kind){case"message":return p.T.equals(s.value,m.value);case"enum":return(0,l.AA)(r.w.INT32,s.value,m.value);case"scalar":return(0,l.AA)(p.T,s.value,m.value)}throw new Error(`oneof cannot contain ${p.kind}`);case"map":const O=Object.keys(s).concat(Object.keys(m));switch(a.V.kind){case"message":const N=a.V.T;return O.every(A=>N.equals(s[A],m[A]));case"enum":return O.every(A=>(0,l.AA)(r.w.INT32,s[A],m[A]));case"scalar":const I=a.V.T;return O.every(A=>(0,l.AA)(I,s[A],m[A]))}break}})},clone(h){const u=h.getType(),o=new u,a=o;for(const s of u.fields.byMember()){const m=h[s.localName];let p;if(s.repeated)p=m.map(g);else if(s.kind=="map"){p=a[s.localName];for(const[O,N]of Object.entries(m))p[O]=g(N)}else s.kind=="oneof"?p=s.findField(m.case)?{case:m.case,value:g(m.value)}:{case:void 0}:p=g(m);a[s.localName]=p}return o}}}function g(h){if(h===void 0)return h;if(h instanceof v.v)return h.clone();if(h instanceof Uint8Array){const u=new Uint8Array(h.byteLength);return u.set(h),u}return h}function b(h){return h instanceof Uint8Array?h:new Uint8Array(h)}},236:(C,_,w)=>{w.d(_,{W:()=>r});let y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),v=[];for(let l=0;l<y.length;l++)v[y[l].charCodeAt(0)]=l;v["-".charCodeAt(0)]=y.indexOf("+"),v["_".charCodeAt(0)]=y.indexOf("/");const r={dec(l){let i=l.length*3/4;l[l.length-2]=="="?i-=2:l[l.length-1]=="="&&(i-=1);let g=new Uint8Array(i),b=0,h=0,u,o=0;for(let a=0;a<l.length;a++){if(u=v[l.charCodeAt(a)],u===void 0)switch(l[a]){case"=":h=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(h){case 0:o=u,h=1;break;case 1:g[b++]=o<<2|(u&48)>>4,o=u,h=2;break;case 2:g[b++]=(o&15)<<4|(u&60)>>2,o=u,h=3;break;case 3:g[b++]=(o&3)<<6|u,h=0;break}}if(h==1)throw Error("invalid base64 string.");return g.subarray(0,b)},enc(l){let i="",g=0,b,h=0;for(let u=0;u<l.length;u++)switch(b=l[u],g){case 0:i+=y[b>>2],h=(b&3)<<4,g=1;break;case 1:i+=y[h|b>>4],h=(b&15)<<2,g=2;break;case 2:i+=y[h|b>>6],i+=y[b&63],g=0;break}return g&&(i+=y[h],i+="=",g==1&&(i+="=")),i}}},210:(C,_,w)=>{w.d(_,{q:()=>l});var y=w(120),v=w(818);function r(){const i=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof i.getBigInt64=="function"&&typeof i.getBigUint64=="function"&&typeof i.setBigInt64=="function"&&typeof i.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const u=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),a=BigInt("0"),s=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(m){const p=typeof m=="bigint"?m:BigInt(m);if(p>o||p<u)throw new Error(`int64 invalid: ${m}`);return p},uParse(m){const p=typeof m=="bigint"?m:BigInt(m);if(p>s||p<a)throw new Error(`uint64 invalid: ${m}`);return p},enc(m){return i.setBigInt64(0,this.parse(m),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},uEnc(m){return i.setBigInt64(0,this.uParse(m),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},dec(m,p){return i.setInt32(0,m,!0),i.setInt32(4,p,!0),i.getBigInt64(0,!0)},uDec(m,p){return i.setInt32(0,m,!0),i.setInt32(4,p,!0),i.getBigUint64(0,!0)}}}const b=u=>(0,y.hu)(/^-?[0-9]+$/.test(u),`int64 invalid: ${u}`),h=u=>(0,y.hu)(/^[0-9]+$/.test(u),`uint64 invalid: ${u}`);return{zero:"0",supported:!1,parse(u){return typeof u!="string"&&(u=u.toString()),b(u),u},uParse(u){return typeof u!="string"&&(u=u.toString()),h(u),u},enc(u){return typeof u!="string"&&(u=u.toString()),b(u),(0,v.CZ)(u)},uEnc(u){return typeof u!="string"&&(u=u.toString()),h(u),(0,v.CZ)(u)},dec(u,o){return(0,v.Ak)(u,o)},uDec(u,o){return(0,v.Fd)(u,o)}}}const l=r()},850:(C,_,w)=>{w.d(_,{w:()=>p});var y=w(493),v=w(465),r=w(744);function l(){return Object.assign(Object.assign({},(0,r.gY)()),{writeMessage(N,I,A){const S=N.getType();for(const P of S.fields.byNumber()){let x,R=P.repeated,L=P.localName;if(P.oneof){const J=N[P.oneof.localName];if(J.case!==L)continue;x=J.value}else x=N[L];switch(P.kind){case"scalar":case"enum":let J=P.kind=="enum"?v.w.INT32:P.T;if(R)if(P.packed)(0,r.Jj)(I,J,P.no,x);else for(const z of x)(0,r.NN)(I,J,P.no,z,!0);else x!==void 0&&(0,r.NN)(I,J,P.no,x,!!P.oneof||P.opt);break;case"message":if(R)for(const z of x)(0,r.oQ)(I,A,P,z);else(0,r.oQ)(I,A,P,x);break;case"map":for(const[z,te]of Object.entries(x))(0,r.gQ)(I,A,P,z,te);break}}return A.writeUnknownFields&&this.writeUnknownFields(N,I),I}})}var i=w(432),g=w(120),b=w(814);function h(){return(0,b.b)((N,I)=>function(S,P,x){if(S.kind=="map"){const R={};switch(S.V.kind){case"scalar":for(const[J,z]of Object.entries(P)){const te=I(S.V.T,z,!0);(0,g.hu)(te!==void 0),R[J.toString()]=te}break;case"message":for(const[J,z]of Object.entries(P))R[J.toString()]=z.toJson(x);break;case"enum":const L=S.V.T;for(const[J,z]of Object.entries(P)){(0,g.hu)(z===void 0||typeof z=="number");const te=N(L,z,!0,x.enumAsInteger);(0,g.hu)(te!==void 0),R[J.toString()]=te}break}return x.emitDefaultValues||Object.keys(R).length>0?R:void 0}else if(S.repeated){const R=[];switch(S.kind){case"scalar":for(let L=0;L<P.length;L++)R.push(I(S.T,P[L],!0));break;case"enum":for(let L=0;L<P.length;L++)R.push(N(S.T,P[L],!0,x.enumAsInteger));break;case"message":for(let L=0;L<P.length;L++)R.push((0,i.E)(S.T,P[L]).toJson(x));break}return x.emitDefaultValues||R.length>0?R:void 0}else switch(S.kind){case"scalar":return I(S.T,P,!!S.oneof||S.opt||x.emitDefaultValues);case"enum":return N(S.T,P,!!S.oneof||S.opt||x.emitDefaultValues,x.enumAsInteger);case"message":return P!==void 0?(0,i.E)(S.T,P).toJson(x):void 0}})}var u=w(433),o=w(501),a=w(781),s=w(215),m=w(504);const p=(0,y.F)("proto3",h(),l(),Object.assign(Object.assign({},(0,u.f)()),{newFieldList(N){return new o.i(N,O)},initFields(N){for(const I of N.getType().fields.byMember()){if(I.opt)continue;const A=I.localName,S=N;if(I.repeated){S[A]=[];continue}switch(I.kind){case"oneof":S[A]={case:void 0};break;case"enum":S[A]=0;break;case"map":S[A]={};break;case"scalar":S[A]=(0,a.kY)(I.T,I.L);break}}}}));function O(N){var I,A,S,P;const x=[];let R;for(const L of typeof N=="function"?N():N){const J=L;if(J.localName=(0,m.Rz)(L.name,L.oneof!==void 0),J.jsonName=(I=L.jsonName)!==null&&I!==void 0?I:(0,m.x1)(L.name),J.repeated=(A=L.repeated)!==null&&A!==void 0?A:!1,L.kind=="scalar"&&(J.L=(S=L.L)!==null&&S!==void 0?S:v.p.BIGINT),L.oneof!==void 0){const z=typeof L.oneof=="string"?L.oneof:L.oneof.name;(!R||R.name!=z)&&(R=new s.o(z)),J.oneof=R,R.addField(J)}L.kind=="message"&&(J.delimited=!1),J.packed=(P=L.packed)!==null&&P!==void 0?P:L.kind=="enum"||L.kind=="scalar"&&L.T!=v.w.BYTES&&L.T!=v.w.STRING,x.push(J)}return x}},328:(C,_,w)=>{w.d(_,{t:()=>y,w:()=>v});var y;(function(r){r[r.Unary=0]="Unary",r[r.ServerStreaming=1]="ServerStreaming",r[r.ClientStreaming=2]="ClientStreaming",r[r.BiDiStreaming=3]="BiDiStreaming"})(y||(y={}));var v;(function(r){r[r.NoSideEffects=1]="NoSideEffects",r[r.Idempotent=2]="Idempotent"})(v||(v={}))}},M={};function D(C){var _=M[C];if(_!==void 0)return _.exports;var w=M[C]={exports:{}};return H[C](w,w.exports,D),w.exports}D.d=(C,_)=>{for(var w in _)D.o(_,w)&&!D.o(C,w)&&Object.defineProperty(C,w,{enumerable:!0,get:_[w]})},D.o=(C,_)=>Object.prototype.hasOwnProperty.call(C,_),D.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var F={};return(()=>{D.r(F),D.d(F,{Change:()=>_r,Client:()=>Yi,ClientEventType:()=>Wn,ClientStatus:()=>vr,Counter:()=>Zr,Devtools:()=>C,DocEventType:()=>ut,Document:()=>Ki,DocumentSyncResultType:()=>Mr,EventSourceDevPanel:()=>$i,EventSourceSDK:()=>Vi,Primitive:()=>Lt,StreamConnectionStatus:()=>Lr,SyncMode:()=>Un,Text:()=>Xr,TimeTicket:()=>kt,Tree:()=>Qr,converter:()=>on,default:()=>Go,setLogLevel:()=>y});var C={};D.r(C);var _;(function(c){c[c.Trivial=0]="Trivial",c[c.Debug=1]="Debug",c[c.Info=2]="Info",c[c.Warn=3]="Warn",c[c.Error=4]="Error",c[c.Fatal=5]="Fatal"})(_||(_={}));let w=_.Info;function y(c){w=c}const v={trivial:(...c)=>{w>_.Trivial||typeof console<"u"&&console.log("YORKIE T:",...c)},debug:(...c)=>{w>_.Debug||typeof console<"u"&&console.log("YORKIE D:",...c)},info:(...c)=>{w>_.Info||typeof console<"u"&&console.log("YORKIE I:",...c)},warn:(...c)=>{w>_.Warn||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...c):console.log("YORKIE W:",...c))},error:(...c)=>{w>_.Error||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...c):console.log("YORKIE E:",...c))},fatal:(c,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${c}`)},isEnabled:c=>w<=c};function r(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,c=>{const e=Math.random()*16|0;return(c==="x"?e:e&3|8).toString(16)})}const l=()=>{};class i{constructor(e){this.finalized=!1,this.observers=[];try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let d;e||v.fatal("missing observer"),this.finalized&&v.fatal("observable is finalized due to previous error"),typeof e=="object"?d=e:d={next:e,error:t,complete:n},d.next===void 0&&(d.next=l),d.error===void 0&&(d.error=l),d.complete===void 0&&(d.complete=l);const k=r(),j=this.unsubscribeOne.bind(this,k);if(this.observers.push({subscriptionID:k,observer:d}),this.finalized)try{this.finalError?d.error(this.finalError):d.complete()}catch(K){v.warn(K)}return j}unsubscribeOne(e){var t;this.observers=(t=this.observers)===null||t===void 0?void 0:t.filter(n=>n.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(n){v.error(n)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function g(c){const e=new i(c);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}var b=D(328);function h(c,e){const t={};for(const[n,d]of Object.entries(c.methods)){const k=e(Object.assign(Object.assign({},d),{localName:n,service:c}));k!=null&&(t[n]=k)}return t}var u;(function(c){c[c.Canceled=1]="Canceled",c[c.Unknown=2]="Unknown",c[c.InvalidArgument=3]="InvalidArgument",c[c.DeadlineExceeded=4]="DeadlineExceeded",c[c.NotFound=5]="NotFound",c[c.AlreadyExists=6]="AlreadyExists",c[c.PermissionDenied=7]="PermissionDenied",c[c.ResourceExhausted=8]="ResourceExhausted",c[c.FailedPrecondition=9]="FailedPrecondition",c[c.Aborted=10]="Aborted",c[c.OutOfRange=11]="OutOfRange",c[c.Unimplemented=12]="Unimplemented",c[c.Internal=13]="Internal",c[c.Unavailable=14]="Unavailable",c[c.DataLoss=15]="DataLoss",c[c.Unauthenticated=16]="Unauthenticated"})(u||(u={}));var o=D(561);function a(c){const e=u[c];return typeof e!="string"?c.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class s extends Error{constructor(e,t=u.Unknown,n,d,k){super(m(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(n!=null?n:{}),this.details=d!=null?d:[],this.cause=k}static from(e,t=u.Unknown){return e instanceof s?e:e instanceof Error?e.name=="AbortError"?new s(e.message,u.Canceled):new s(e.message,t,void 0,void 0,e):new s(String(e),t,void 0,void 0,e)}findDetails(e){const t="typeName"in e?{findMessage:d=>d===e.typeName?e:void 0}:e,n=[];for(const d of this.details){if(d instanceof o.v){t.findMessage(d.getType().typeName)&&n.push(d);continue}const k=t.findMessage(d.type);if(k)try{n.push(k.fromBinary(d.value))}catch{}}return n}}function m(c,e){return c.length?`[${a(e)}] ${c}`:`[${a(e)}]`}var p=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=c[Symbol.asyncIterator],t;return e?e.call(c):(c=typeof __values=="function"?__values(c):c[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(k){t[k]=c[k]&&function(j){return new Promise(function(K,he){j=c[k](j),d(K,he,j.done,j.value)})}}function d(k,j,K,he){Promise.resolve(he).then(function(ae){k({value:ae,done:K})},j)}},O=function(c){return this instanceof O?(this.v=c,this):new O(c)},N=function(c,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(c,e||[]),d,k=[];return d={},j("next"),j("throw"),j("return"),d[Symbol.asyncIterator]=function(){return this},d;function j(ke){n[ke]&&(d[ke]=function(We){return new Promise(function(ct,dt){k.push([ke,We,ct,dt])>1||K(ke,We)})})}function K(ke,We){try{he(n[ke](We))}catch(ct){je(k[0][3],ct)}}function he(ke){ke.value instanceof O?Promise.resolve(ke.value.v).then(ae,Ae):je(k[0][2],ke)}function ae(ke){K("next",ke)}function Ae(ke){K("throw",ke)}function je(ke,We){ke(We),k.shift(),k.length&&K(k[0][0],k[0][1])}},I=function(c){var e,t;return e={},n("next"),n("throw",function(d){throw d}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(d,k){e[d]=c[d]?function(j){return(t=!t)?{value:O(c[d](j)),done:!1}:k?k(j):j}:k}};function A(c){return N(this,arguments,function*(){yield O(yield*I(p(c)))})}var S=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=c[Symbol.asyncIterator],t;return e?e.call(c):(c=typeof __values=="function"?__values(c):c[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(k){t[k]=c[k]&&function(j){return new Promise(function(K,he){j=c[k](j),d(K,he,j.done,j.value)})}}function d(k,j,K,he){Promise.resolve(he).then(function(ae){k({value:ae,done:K})},j)}},P=function(c){return this instanceof P?(this.v=c,this):new P(c)},x=function(c){var e,t;return e={},n("next"),n("throw",function(d){throw d}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(d,k){e[d]=c[d]?function(j){return(t=!t)?{value:P(c[d](j)),done:!1}:k?k(j):j}:k}},R=function(c,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(c,e||[]),d,k=[];return d={},j("next"),j("throw"),j("return"),d[Symbol.asyncIterator]=function(){return this},d;function j(ke){n[ke]&&(d[ke]=function(We){return new Promise(function(ct,dt){k.push([ke,We,ct,dt])>1||K(ke,We)})})}function K(ke,We){try{he(n[ke](We))}catch(ct){je(k[0][3],ct)}}function he(ke){ke.value instanceof P?Promise.resolve(ke.value.v).then(ae,Ae):je(k[0][2],ke)}function ae(ke){K("next",ke)}function Ae(ke){K("throw",ke)}function je(ke,We){ke(We),k.shift(),k.length&&K(k[0][0],k[0][1])}};function L(c,e){return h(c,t=>{switch(t.kind){case b.t.Unary:return J(e,c,t);case b.t.ServerStreaming:return z(e,c,t);case b.t.ClientStreaming:return te(e,c,t);case b.t.BiDiStreaming:return Z(e,c,t);default:return null}})}function J(c,e,t){return async function(n,d){var k,j;const K=await c.unary(e,t,d==null?void 0:d.signal,d==null?void 0:d.timeoutMs,d==null?void 0:d.headers,n,d==null?void 0:d.contextValues);return(k=d==null?void 0:d.onHeader)===null||k===void 0||k.call(d,K.header),(j=d==null?void 0:d.onTrailer)===null||j===void 0||j.call(d,K.trailer),K.message}}function z(c,e,t){return function(n,d){return q(c.stream(e,t,d==null?void 0:d.signal,d==null?void 0:d.timeoutMs,d==null?void 0:d.headers,A([n]),d==null?void 0:d.contextValues),d)}}function te(c,e,t){return async function(n,d){var k,j,K,he,ae,Ae;const je=await c.stream(e,t,d==null?void 0:d.signal,d==null?void 0:d.timeoutMs,d==null?void 0:d.headers,n,d==null?void 0:d.contextValues);(ae=d==null?void 0:d.onHeader)===null||ae===void 0||ae.call(d,je.header);let ke;try{for(var We=!0,ct=S(je.message),dt;dt=await ct.next(),k=dt.done,!k;We=!0)he=dt.value,We=!1,ke=he}catch(Et){j={error:Et}}finally{try{!We&&!k&&(K=ct.return)&&await K.call(ct)}finally{if(j)throw j.error}}if(!ke)throw new s("protocol error: missing response message",u.Internal);return(Ae=d==null?void 0:d.onTrailer)===null||Ae===void 0||Ae.call(d,je.trailer),ke}}function Z(c,e,t){return function(n,d){return q(c.stream(e,t,d==null?void 0:d.signal,d==null?void 0:d.timeoutMs,d==null?void 0:d.headers,n,d==null?void 0:d.contextValues),d)}}function q(c,e){const t=function(){var n,d;return R(this,arguments,function*(){const k=yield P(c);(n=e==null?void 0:e.onHeader)===null||n===void 0||n.call(e,k.header),yield P(yield*x(S(k.message))),(d=e==null?void 0:e.onTrailer)===null||d===void 0||d.call(e,k.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function B(){return{get(c){return c.id in this?this[c.id]:c.defaultValue},set(c,e){return this[c.id]=e,this},delete(c){return delete this[c.id],this}}}function $(c){var e;const t=Object.assign({},c);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function U(c,e,t,n){const d=e?re(c.I,n):ee(c.I,t);return{parse:(e?re(c.O,n):ee(c.O,t)).parse,serialize:d.serialize}}function re(c,e){return{parse(t){try{return c.fromBinary(t,e)}catch(n){const d=n instanceof Error?n.message:String(n);throw new s(`parse binary: ${d}`,u.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(n){const d=n instanceof Error?n.message:String(n);throw new s(`serialize binary: ${d}`,u.Internal)}}}}function ee(c,e){var t,n;const d=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,k=(n=e==null?void 0:e.textDecoder)!==null&&n!==void 0?n:new TextDecoder,j=$(e);return{parse(K){try{const he=k.decode(K);return c.fromJsonString(he,j)}catch(he){throw s.from(he,u.InvalidArgument)}},serialize(K){try{const he=K.toJsonString(j);return d.encode(he)}catch(he){throw s.from(he,u.Internal)}}}}function V(...c){const e=new AbortController,t=c.filter(d=>d!==void 0).concat(e.signal);for(const d of t){if(d.aborted){n.apply(d);break}d.addEventListener("abort",n)}function n(){e.signal.aborted||e.abort(ie(this));for(const d of t)d.removeEventListener("abort",n)}return e}function X(c){const e=new AbortController,t=()=>{e.abort(new s("the operation timed out",u.DeadlineExceeded))};let n;return c!==void 0&&(c<=0?t():n=setTimeout(t,c)),{signal:e.signal,cleanup:()=>clearTimeout(n)}}function ie(c){if(!c.aborted)return;if(c.reason!==void 0)return c.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function le(c,e){return e instanceof o.v?e:new c(e)}function ve(c,e){function t(n){return n.done===!0?n:{done:n.done,value:le(c,n.value)}}return{[Symbol.asyncIterator](){const n=e[Symbol.asyncIterator](),d={next:()=>n.next().then(t)};return n.throw!==void 0&&(d.throw=k=>n.throw(k).then(t)),n.return!==void 0&&(d.return=k=>n.return(k).then(t)),d}}}function _e(c){const e=Me(c.next,c.interceptors),[t,n,d]=Le(c),k=Object.assign(Object.assign({},c.req),{message:le(c.req.method.I,c.req.message),signal:t});return e(k).then(j=>(d(),j),n)}function Ne(c){const e=Me(c.next,c.interceptors),[t,n,d]=Le(c),k=Object.assign(Object.assign({},c.req),{message:ve(c.req.method.I,c.req.message),signal:t});let j=!1;return t.addEventListener("abort",function(){var K,he;const ae=c.req.message[Symbol.asyncIterator]();j||(K=ae.throw)===null||K===void 0||K.call(ae,this.reason).catch(()=>{}),(he=ae.return)===null||he===void 0||he.call(ae).catch(()=>{})}),e(k).then(K=>Object.assign(Object.assign({},K),{message:{[Symbol.asyncIterator](){const he=K.message[Symbol.asyncIterator]();return{next(){return he.next().then(ae=>(ae.done==!0&&(j=!0,d()),ae),n)}}}}}),n)}function Le(c){const{signal:e,cleanup:t}=X(c.timeoutMs),n=V(c.signal,e);return[n.signal,function(k){const j=s.from(e.aborted?ie(e):k);return n.abort(j),t(),Promise.reject(j)},function(){t(),n.abort()}]}function Me(c,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((n,d)=>d(n),c))!==null&&t!==void 0?t:c}function Q(c,e,t){const n=typeof e=="string"?e:e.typeName,d=typeof t=="string"?t:t.name;return c.toString().replace(/\/?$/,`/${n}/${d}`)}function ce(c){let e,t=new Uint8Array(0);function n(d){const k=new Uint8Array(t.length+d.length);k.set(t),k.set(d,t.length),t=k}return new ReadableStream({start(){e=c.getReader()},async pull(d){let k;for(;;){if(k===void 0&&t.byteLength>=5){let he=0;for(let ae=1;ae<5;ae++)he=(he<<8)+t[ae];k={flags:t[0],length:he}}if(k!==void 0&&t.byteLength>=k.length+5)break;const K=await e.read();if(K.done)break;n(K.value)}if(k===void 0){if(t.byteLength==0){d.close();return}d.error(new s("premature end of stream",u.DataLoss));return}const j=t.subarray(5,5+k.length);t=t.subarray(5+k.length),d.enqueue({flags:k.flags,data:j})}})}function ue(c,e){const t=new Uint8Array(e.length+5);t.set(e,5);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setUint8(0,c),n.setUint32(1,e.length),t}const G="Content-Type",se="Grpc-Timeout",oe="Grpc-Status",we="Grpc-Message",me="Grpc-Status-Details-Bin",Pe="User-Agent",Be="X-User-Agent",qe="X-Grpc-Web",at="application/grpc-web+proto",ft="application/grpc-web+json";function Je(c,e,t,n){const d=new Headers(t!=null?t:{});return d.set(G,c?at:ft),d.set(qe,"1"),d.set(Be,"connect-es/1.2.0"),n&&d.set(Pe,"connect-es/1.2.0"),e!==void 0&&d.set(se,`${e}m`),d}function He(c){switch(c){case 400:return u.Internal;case 401:return u.Unauthenticated;case 403:return u.PermissionDenied;case 404:return u.Unimplemented;case 429:return u.Unavailable;case 502:return u.Unavailable;case 503:return u.Unavailable;case 504:return u.Unavailable;default:return u.Unknown}}var Oe=D(850),tt=D(733);class St extends o.v{constructor(e){super(),this.code=0,this.message="",this.details=[],Oe.w.util.initPartial(e,this)}static fromBinary(e,t){return new St().fromBinary(e,t)}static fromJson(e,t){return new St().fromJson(e,t)}static fromJsonString(e,t){return new St().fromJsonString(e,t)}static equals(e,t){return Oe.w.util.equals(St,e,t)}}St.runtime=Oe.w,St.typeName="google.rpc.Status",St.fields=Oe.w.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:tt.I,repeated:!0}]);var Wt=D(236);function jt(c,e,t){try{const n=Wt.W.dec(c);return e?e.fromBinary(n,t):n}catch(n){throw s.from(n,u.DataLoss)}}const Rt="0";function $t(c){var e;const t=c.get(me);if(t!=null){const d=jt(t,St);if(d.code==0)return;const k=new s(d.message,d.code,c);return k.details=d.details.map(j=>({type:j.typeUrl.substring(j.typeUrl.lastIndexOf("/")+1),value:j.value})),k}const n=c.get(oe);if(n!=null){if(n===Rt)return;const d=parseInt(n,10);return d in u?new s(decodeURIComponent((e=c.get(we))!==null&&e!==void 0?e:""),d,c):new s(`invalid grpc-status: ${n}`,u.Internal,c)}}function bt(c,e){var t;if(c>=200&&c<300){const n=$t(e);if(n)throw n;return{foundStatus:e.has(oe)}}throw new s(decodeURIComponent((t=e.get(we))!==null&&t!==void 0?t:`HTTP ${c}`),He(c),e)}const zt=128;function nn(c){const e=new Headers,t=new TextDecoder().decode(c).split(`\r
`);for(const n of t){if(n==="")continue;const d=n.indexOf(":");if(d>0){const k=n.substring(0,d).trim(),j=n.substring(d+1).trim();e.append(k,j)}}return e}function Ct(c,e){const t=$t(c);if(t)throw e.forEach((n,d)=>{t.metadata.append(d,n)}),t}function en(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}var Ft=function(c){return this instanceof Ft?(this.v=c,this):new Ft(c)},Rn=function(c,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(c,e||[]),d,k=[];return d={},j("next"),j("throw"),j("return"),d[Symbol.asyncIterator]=function(){return this},d;function j(ke){n[ke]&&(d[ke]=function(We){return new Promise(function(ct,dt){k.push([ke,We,ct,dt])>1||K(ke,We)})})}function K(ke,We){try{he(n[ke](We))}catch(ct){je(k[0][3],ct)}}function he(ke){ke.value instanceof Ft?Promise.resolve(ke.value.v).then(ae,Ae):je(k[0][2],ke)}function ae(ke){K("next",ke)}function Ae(ke){K("throw",ke)}function je(ke,We){ke(We),k.shift(),k.length&&K(k[0][0],k[0][1])}};function Yt(c){var e;en();const t=(e=c.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(n,d,k,j,K,he,ae){var Ae;const{serialize:je,parse:ke}=U(d,t,c.jsonOptions,c.binaryOptions);return j=j===void 0?c.defaultTimeoutMs:j<=0?void 0:j,await _e({interceptors:c.interceptors,signal:k,timeoutMs:j,req:{stream:!1,service:n,method:d,url:Q(c.baseUrl,n,d),init:{method:"POST",credentials:(Ae=c.credentials)!==null&&Ae!==void 0?Ae:"same-origin",redirect:"error",mode:"cors"},header:Je(t,j,K,!1),contextValues:ae!=null?ae:B(),message:he},next:async We=>{var ct;const Et=await((ct=c.fetch)!==null&&ct!==void 0?ct:globalThis.fetch)(We.url,Object.assign(Object.assign({},We.init),{headers:We.header,signal:We.signal,body:ue(0,je(We.message))}));if(bt(Et.status,Et.headers),!Et.body)throw"missing response body";const fn=ce(Et.body).getReader();let _t,Qt;for(;;){const Gt=await fn.read();if(Gt.done)break;const{flags:sn,data:Sr}=Gt.value;if(sn===zt){if(_t!==void 0)throw"extra trailer";_t=nn(Sr);continue}if(Qt!==void 0)throw"extra message";Qt=ke(Sr)}if(_t===void 0)throw"missing trailer";if(Ct(_t,Et.headers),Qt===void 0)throw"missing message";return{stream:!1,header:Et.headers,message:Qt,trailer:_t}}})},async stream(n,d,k,j,K,he,ae){var Ae;const{serialize:je,parse:ke}=U(d,t,c.jsonOptions,c.binaryOptions);function We(dt,Et,fn,_t){return Rn(this,arguments,function*(){const Gt=ce(dt).getReader();if(Et){if(!(yield Ft(Gt.read())).done)throw"extra data for trailers-only";return yield Ft(void 0)}let sn=!1;for(;;){const Sr=yield Ft(Gt.read());if(Sr.done)break;const{flags:Br,data:Vr}=Sr.value;if((Br&zt)===zt){if(sn)throw"extra trailer";sn=!0;const Hi=nn(Vr);Ct(Hi,_t),Hi.forEach((Xo,Zo)=>fn.set(Zo,Xo));continue}if(sn)throw"extra message";yield yield Ft(ke(Vr))}if(!sn)throw"missing trailer"})}async function ct(dt){if(d.kind!=b.t.ServerStreaming)throw"The fetch API does not support streaming request bodies";const Et=await dt[Symbol.asyncIterator]().next();if(Et.done==!0)throw"missing request message";return ue(0,je(Et.value))}return j=j===void 0?c.defaultTimeoutMs:j<=0?void 0:j,Ne({interceptors:c.interceptors,signal:k,timeoutMs:j,req:{stream:!0,service:n,method:d,url:Q(c.baseUrl,n,d),init:{method:"POST",credentials:(Ae=c.credentials)!==null&&Ae!==void 0?Ae:"same-origin",redirect:"error",mode:"cors"},header:Je(t,j,K,!1),contextValues:ae!=null?ae:B(),message:he},next:async dt=>{var Et;const _t=await((Et=c.fetch)!==null&&Et!==void 0?Et:globalThis.fetch)(dt.url,Object.assign(Object.assign({},dt.init),{headers:dt.header,signal:dt.signal,body:await ct(dt.message)})),{foundStatus:Qt}=bt(_t.status,_t.headers);if(!_t.body)throw"missing response body";const Gt=new Headers;return Object.assign(Object.assign({},dt),{header:_t.headers,trailer:Gt,message:We(_t.body,Qt,Gt,_t.headers)})}})}}}var an=D(295),Se=D(646);/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Mt=null;try{Mt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ht(c,e,t){this.low=c|0,this.high=e|0,this.unsigned=!!t}ht.prototype.__isLong__,Object.defineProperty(ht.prototype,"__isLong__",{value:!0});function Pt(c){return(c&&c.__isLong__)===!0}function un(c){var e=Math.clz32(c&-c);return c?31-e:e}ht.isLong=Pt;var ln={},hn={};function dn(c,e){var t,n,d;return e?(c>>>=0,(d=0<=c&&c<256)&&(n=hn[c],n)?n:(t=pt(c,0,!0),d&&(hn[c]=t),t)):(c|=0,(d=-128<=c&&c<128)&&(n=ln[c],n)?n:(t=pt(c,c<0?-1:0,!1),d&&(ln[c]=t),t))}ht.fromInt=dn;function Vt(c,e){if(isNaN(c))return e?wn:Kt;if(e){if(c<0)return wn;if(c>=Sn)return Tt}else{if(c<=-hr)return Xe;if(c+1>=hr)return Fe}return c<0?Vt(-c,e).neg():pt(c%In|0,c/In|0,e)}ht.fromNumber=Vt;function pt(c,e,t){return new ht(c,e,t)}ht.fromBits=pt;var pn=Math.pow;function Bn(c,e,t){if(c.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,c==="NaN"||c==="Infinity"||c==="+Infinity"||c==="-Infinity")return e?wn:Kt;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=c.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return Bn(c.substring(1),e,t).neg();for(var d=Vt(pn(t,8)),k=Kt,j=0;j<c.length;j+=8){var K=Math.min(8,c.length-j),he=parseInt(c.substring(j,j+K),t);if(K<8){var ae=Vt(pn(t,K));k=k.mul(ae).add(Vt(he))}else k=k.mul(d),k=k.add(Vt(he))}return k.unsigned=e,k}ht.fromString=Bn;function gn(c,e){return typeof c=="number"?Vt(c,e):typeof c=="string"?Bn(c,e):pt(c.low,c.high,typeof e=="boolean"?e:c.unsigned)}ht.fromValue=gn;var _n=1<<16,On=1<<24,In=_n*_n,Sn=In*In,hr=Sn/2,jn=dn(On),Kt=dn(0);ht.ZERO=Kt;var wn=dn(0,!0);ht.UZERO=wn;var fe=dn(1);ht.ONE=fe;var Te=dn(1,!0);ht.UONE=Te;var De=dn(-1);ht.NEG_ONE=De;var Fe=pt(-1,2147483647,!1);ht.MAX_VALUE=Fe;var Tt=pt(-1,-1,!0);ht.MAX_UNSIGNED_VALUE=Tt;var Xe=pt(0,-2147483648,!1);ht.MIN_VALUE=Xe;var Y=ht.prototype;Y.toInt=function(){return this.unsigned?this.low>>>0:this.low},Y.toNumber=function(){return this.unsigned?(this.high>>>0)*In+(this.low>>>0):this.high*In+(this.low>>>0)},Y.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Xe)){var t=Vt(e),n=this.div(t),d=n.mul(t).sub(this);return n.toString(e)+d.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var k=Vt(pn(e,6),this.unsigned),j=this,K="";;){var he=j.div(k),ae=j.sub(he.mul(k)).toInt()>>>0,Ae=ae.toString(e);if(j=he,j.isZero())return Ae+K;for(;Ae.length<6;)Ae="0"+Ae;K=""+Ae+K}},Y.getHighBits=function(){return this.high},Y.getHighBitsUnsigned=function(){return this.high>>>0},Y.getLowBits=function(){return this.low},Y.getLowBitsUnsigned=function(){return this.low>>>0},Y.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Xe)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},Y.isZero=function(){return this.high===0&&this.low===0},Y.eqz=Y.isZero,Y.isNegative=function(){return!this.unsigned&&this.high<0},Y.isPositive=function(){return this.unsigned||this.high>=0},Y.isOdd=function(){return(this.low&1)===1},Y.isEven=function(){return(this.low&1)===0},Y.equals=function(e){return Pt(e)||(e=gn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},Y.eq=Y.equals,Y.notEquals=function(e){return!this.eq(e)},Y.neq=Y.notEquals,Y.ne=Y.notEquals,Y.lessThan=function(e){return this.comp(e)<0},Y.lt=Y.lessThan,Y.lessThanOrEqual=function(e){return this.comp(e)<=0},Y.lte=Y.lessThanOrEqual,Y.le=Y.lessThanOrEqual,Y.greaterThan=function(e){return this.comp(e)>0},Y.gt=Y.greaterThan,Y.greaterThanOrEqual=function(e){return this.comp(e)>=0},Y.gte=Y.greaterThanOrEqual,Y.ge=Y.greaterThanOrEqual,Y.compare=function(e){if(Pt(e)||(e=gn(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},Y.comp=Y.compare,Y.negate=function(){return!this.unsigned&&this.eq(Xe)?Xe:this.not().add(fe)},Y.neg=Y.negate,Y.add=function(e){Pt(e)||(e=gn(e));var t=this.high>>>16,n=this.high&65535,d=this.low>>>16,k=this.low&65535,j=e.high>>>16,K=e.high&65535,he=e.low>>>16,ae=e.low&65535,Ae=0,je=0,ke=0,We=0;return We+=k+ae,ke+=We>>>16,We&=65535,ke+=d+he,je+=ke>>>16,ke&=65535,je+=n+K,Ae+=je>>>16,je&=65535,Ae+=t+j,Ae&=65535,pt(ke<<16|We,Ae<<16|je,this.unsigned)},Y.subtract=function(e){return Pt(e)||(e=gn(e)),this.add(e.neg())},Y.sub=Y.subtract,Y.multiply=function(e){if(this.isZero())return this;if(Pt(e)||(e=gn(e)),Mt){var t=Mt.mul(this.low,this.high,e.low,e.high);return pt(t,Mt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?wn:Kt;if(this.eq(Xe))return e.isOdd()?Xe:Kt;if(e.eq(Xe))return this.isOdd()?Xe:Kt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(jn)&&e.lt(jn))return Vt(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,d=this.high&65535,k=this.low>>>16,j=this.low&65535,K=e.high>>>16,he=e.high&65535,ae=e.low>>>16,Ae=e.low&65535,je=0,ke=0,We=0,ct=0;return ct+=j*Ae,We+=ct>>>16,ct&=65535,We+=k*Ae,ke+=We>>>16,We&=65535,We+=j*ae,ke+=We>>>16,We&=65535,ke+=d*Ae,je+=ke>>>16,ke&=65535,ke+=k*ae,je+=ke>>>16,ke&=65535,ke+=j*he,je+=ke>>>16,ke&=65535,je+=n*Ae+d*ae+k*he+j*K,je&=65535,pt(We<<16|ct,je<<16|ke,this.unsigned)},Y.mul=Y.multiply,Y.divide=function(e){if(Pt(e)||(e=gn(e)),e.isZero())throw Error("division by zero");if(Mt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Mt.div_u:Mt.div_s)(this.low,this.high,e.low,e.high);return pt(t,Mt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?wn:Kt;var n,d,k;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return wn;if(e.gt(this.shru(1)))return Te;k=wn}else{if(this.eq(Xe)){if(e.eq(fe)||e.eq(De))return Xe;if(e.eq(Xe))return fe;var j=this.shr(1);return n=j.div(e).shl(1),n.eq(Kt)?e.isNegative()?fe:De:(d=this.sub(e.mul(n)),k=n.add(d.div(e)),k)}else if(e.eq(Xe))return this.unsigned?wn:Kt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();k=Kt}for(d=this;d.gte(e);){n=Math.max(1,Math.floor(d.toNumber()/e.toNumber()));for(var K=Math.ceil(Math.log(n)/Math.LN2),he=K<=48?1:pn(2,K-48),ae=Vt(n),Ae=ae.mul(e);Ae.isNegative()||Ae.gt(d);)n-=he,ae=Vt(n,this.unsigned),Ae=ae.mul(e);ae.isZero()&&(ae=fe),k=k.add(ae),d=d.sub(Ae)}return k},Y.div=Y.divide,Y.modulo=function(e){if(Pt(e)||(e=gn(e)),Mt){var t=(this.unsigned?Mt.rem_u:Mt.rem_s)(this.low,this.high,e.low,e.high);return pt(t,Mt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},Y.mod=Y.modulo,Y.rem=Y.modulo,Y.not=function(){return pt(~this.low,~this.high,this.unsigned)},Y.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},Y.clz=Y.countLeadingZeros,Y.countTrailingZeros=function(){return this.low?un(this.low):un(this.high)+32},Y.ctz=Y.countTrailingZeros,Y.and=function(e){return Pt(e)||(e=gn(e)),pt(this.low&e.low,this.high&e.high,this.unsigned)},Y.or=function(e){return Pt(e)||(e=gn(e)),pt(this.low|e.low,this.high|e.high,this.unsigned)},Y.xor=function(e){return Pt(e)||(e=gn(e)),pt(this.low^e.low,this.high^e.high,this.unsigned)},Y.shiftLeft=function(e){return Pt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?pt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):pt(0,this.low<<e-32,this.unsigned)},Y.shl=Y.shiftLeft,Y.shiftRight=function(e){return Pt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?pt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):pt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},Y.shr=Y.shiftRight,Y.shiftRightUnsigned=function(e){return Pt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?pt(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?pt(this.high,0,this.unsigned):pt(this.high>>>e-32,0,this.unsigned)},Y.shru=Y.shiftRightUnsigned,Y.shr_u=Y.shiftRightUnsigned,Y.rotateLeft=function(e){var t;return Pt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?pt(this.high,this.low,this.unsigned):e<32?(t=32-e,pt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,pt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},Y.rotl=Y.rotateLeft,Y.rotateRight=function(e){var t;return Pt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?pt(this.high,this.low,this.unsigned):e<32?(t=32-e,pt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,pt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},Y.rotr=Y.rotateRight,Y.toSigned=function(){return this.unsigned?pt(this.low,this.high,!1):this},Y.toUnsigned=function(){return this.unsigned?this:pt(this.low,this.high,!0)},Y.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},Y.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},Y.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},ht.fromBytes=function(e,t,n){return n?ht.fromBytesLE(e,t):ht.fromBytesBE(e,t)},ht.fromBytesLE=function(e,t){return new ht(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},ht.fromBytesBE=function(e,t){return new ht(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const pe=ht;var Ee;(function(c){c.Ok="ok",c.ClientNotActive="client-not-active",c.Unimplemented="unimplemented",c.Unsupported="unsupported",c.DocumentNotAttached="document-not-attached",c.DocumentNotDetached="document-not-detached",c.DocumentRemoved="document-removed",c.InvalidObjectKey="invalid-object-key",c.InvalidArgument="invalid-argument"})(Ee||(Ee={}));class Ie extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="YorkieError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function ze(c){if(c instanceof Map){const e=Array.from(c);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(c))}const it=c=>c?Object.entries(c).length===0:!0,Nt=c=>{const e={};for(const[t,n]of Object.entries(c))e[t]=JSON.stringify(n);return e},ot=c=>{const e={};for(const[t,n]of Object.entries(c))e[t]=JSON.parse(n);return e};var At;(function(c){c.Put="put",c.Clear="clear"})(At||(At={}));class mt{constructor(e,t){this.context=e,this.presence=t}set(e,t){for(const n of Object.keys(e))this.presence[n]=e[n];this.context.setPresenceChange({type:At.Put,presence:ze(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:At.Clear})}}const qt="000000000000000000000000",xn="FFFFFFFFFFFFFFFFFFFFFFFF";class kt{constructor(e,t,n){this.lamport=e,this.delimiter=t,this.actorID=n}static of(e,t,n){return new kt(e,t,n)}static fromStruct(e){return kt.of(pe.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new kt(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Ke=0,gt=4294967295,Ot=pe.MAX_VALUE,$e=new kt(pe.fromNumber(0),Ke,qt);new kt(pe.fromNumber(1),Ke+1,qt);const rt=new kt(Ot,gt,xn);function Ht(c){return c.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class nt{constructor(e){this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class yt extends nt{constructor(e){super(e)}}class wt extends nt{}class Bt{constructor(e,t){this.strKey=e,this.value=t}static of(e,t){return new Bt(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class Ut{constructor(){this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new Ut}set(e,t,n){let d;const k=this.nodeMapByKey.get(e);k!=null&&!k.isRemoved()&&k.remove(n)&&(d=k.getValue());const j=Bt.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),j),(k==null||n.after(k.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,j),t.setMovedAt(n)),d}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||v.fatal(`fail to find ${e.toIDString()}`);const n=this.nodeMapByCreatedAt.get(e.toIDString());return n.remove(t),n.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){v.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const n=this.nodeMapByKey.get(t.getStrKey());t===n&&this.nodeMapByKey.delete(n.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const n=this.nodeMapByKey.get(e);if(n!=null&&!!n.remove(t))return n.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class Dt extends yt{constructor(e,t){super(e),this.memberNodes=t}static create(e,t){if(!t)return new Dt(e,Ut.create());const n=Ut.create();for(const[d,k]of Object.entries(t))n.set(d,k.deepcopy(),k.getCreatedAt());return new Dt(e,n)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,n){return this.memberNodes.set(e,t,n)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,n]of this)e.push(`"${Ht(t)}":${n.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,n]of this){const{createdAt:d,value:k,type:j}=n.toJSForTest();e[t]={key:t,createdAt:d,value:k,type:j}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[d]of this)t.push(d);const n=[];for(const d of t.sort()){const k=(e=this.memberNodes.get(d))===null||e===void 0?void 0:e.getValue();n.push(`"${Ht(d)}":${k.toSortedJSON()}`)}return`{${n.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=Dt.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const n=t.getValue();if(e(n,this))return;n instanceof yt&&n.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var st;(function(c){c.Local="local",c.Remote="remote",c.UndoRedo="undoredo"})(st||(st={}));class xt{constructor(e,t){this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class mn{constructor(e){this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Jn{constructor(e){this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&v.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,n=e,d;for(;n;)(!d||d===n.getRight())&&(t+=n.getLength()+(n.hasLeft()?n.getLeftWeight():0)),d=n,n=n.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Jn(e.getLeft());t.root&&t.root.setParent();const n=new Jn(e.getRight());if(n.root&&n.root.setParent(),t.root){const d=t.getRightmost();t.splayNode(d),t.root.setRight(n.root),n.root&&n.root.setParent(t.root),this.root=t.root}else this.root=n.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const n of t)n.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var et;(function(c){c[c.Null=0]="Null",c[c.Boolean=1]="Boolean",c[c.Integer=2]="Integer",c[c.Long=3]="Long",c[c.Double=4]="Double",c[c.String=5]="String",c[c.Bytes=6]="Bytes",c[c.Date=7]="Date"})(et||(et={}));class Lt extends nt{constructor(e,t){super(t),this.valueType=Lt.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new Lt(e,t)}static valueFromBytes(e,t){switch(e){case et.Null:return null;case et.Boolean:return!!t[0];case et.Integer:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case et.Double:{const n=new DataView(t.buffer);return t.forEach(function(d,k){n.setUint8(k,d)}),n.getFloat64(0,!0)}case et.String:return new TextDecoder("utf-8").decode(t);case et.Long:return pe.fromBytesLE(Array.from(t));case et.Bytes:return t;case et.Date:return new Date(pe.fromBytesLE(Array.from(t),!0).toNumber());default:throw new Ie(Ee.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===et.String?`"${Ht(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=Lt.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return et.Null;case"boolean":return et.Boolean;case"number":return this.isInteger(e)?et.Integer:et.Double;case"string":return et.String;case"object":if(e===null)return et.Null;if(e instanceof pe)return et.Long;if(e instanceof Uint8Array)return et.Bytes;if(e instanceof Date)return et.Date}}static isSupport(e){return Lt.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===et.Integer||e===et.Long||e===et.Double}getValue(){return this.value}toBytes(){switch(this.valueType){case et.Null:return new Uint8Array;case et.Boolean:return this.value?new Uint8Array([1]):new Uint8Array([0]);case et.Integer:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case et.Double:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case et.String:return new TextEncoder().encode(this.value);case et.Long:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case et.Bytes:return this.value;case et.Date:{const e=this.value,t=pe.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new Ie(Ee.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class Yn extends mn{constructor(e){super(e),this.value=e}static createAfter(e,t){const n=new Yn(t),d=e.next;return e.next=n,n.prev=e,n.next=d,d&&(d.prev=n),n}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class er{constructor(){const e=Lt.of(0,$e);e.setRemovedAt($e),this.dummyHead=new Yn(e),this.last=this.dummyHead,this.nodeMapByIndex=new Jn,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new er}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let n=this.nodeMapByCreatedAt.get(e.toIDString());for(n||v.fatal(`cant find the given node: ${e.toIDString()}`);n.getNext()&&n.getNext().getPositionedAt().after(t);)n=n.getNext();return n}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,n=t.getCreatedAt()){const d=this.findNextBeforeExecutedAt(e,n),k=Yn.createAfter(d,t);d===this.last&&(this.last=k),this.nodeMapByIndex.insertAfter(d,k),this.nodeMapByCreatedAt.set(k.getCreatedAt().toIDString(),k)}moveAfter(e,t,n){const d=this.nodeMapByCreatedAt.get(e.toIDString());d||v.fatal(`cant find the given node: ${e.toIDString()}`);const k=this.nodeMapByCreatedAt.get(t.toIDString());k||v.fatal(`cant find the given node: ${t.toIDString()}`),d!==k&&(!k.getValue().getMovedAt()||n.after(k.getValue().getMovedAt()))&&(this.release(k),this.insertAfter(d.getCreatedAt(),k.getValue(),n),k.getValue().setMovedAt(n))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||v.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,n]=this.nodeMapByIndex.find(e);let d=t;if(e===0&&t===this.dummyHead||n>0)do d&&(d=d.getNext());while(d&&d.isRemoved());return d}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const n=this.nodeMapByCreatedAt.get(e.toIDString()),d=n.isRemoved();return n.remove(t)&&!d&&this.nodeMapByIndex.splayNode(n),n.getValue()}deleteByIndex(e,t){const n=this.getByIndex(e);if(!!n)return n.remove(t)&&this.nodeMapByIndex.splayNode(n),n.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const n=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${n}}`):e.push(`[${n}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class rn extends yt{constructor(e,t){super(e),this.elements=t}static create(e,t){if(!t)return new rn(e,er.create());const n=er.create();for(const d of t)n.insertAfter(n.getLastCreatedAt(),d.deepcopy());return new rn(e,n)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,n){this.elements.moveAfter(e,t,n)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const n=t.getValue();if(e(n,this))return;n instanceof yt&&n.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{createdAt:n,value:d,type:k}=this.get(t).toJSForTest();e[t]={key:String(t),createdAt:n,value:d,type:k}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=rn.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class Pn extends xt{constructor(e,t,n){super(e,n),this.createdAt=t}static create(e,t,n){return new Pn(e,t,n)}execute(e,t){var n;const d=e.findByCreatedAt(this.getParentCreatedAt());if(d||v.fatal(`fail to find ${this.getParentCreatedAt()}`),d instanceof yt||v.fatal(`only object and array can execute remove: ${d}`),t===st.UndoRedo){let ae=d.getByID(this.createdAt);for(;ae;){if(ae.getRemovedAt())return;ae=(n=e.findElementPairByCreatedAt(ae.getCreatedAt()))===null||n===void 0?void 0:n.parent}}const k=d.subPathOf(this.createdAt),j=this.toReverseOperation(d),K=d.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(K),{opInfos:d instanceof rn?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(k)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:k}],reverseOp:j}}toReverseOperation(e){if(e instanceof Dt){const t=e.subPathOf(this.createdAt);if(t!==void 0){const n=e.get(t);if(n!==void 0)return dr.create(t,n.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class dr extends xt{constructor(e,t,n,d){super(n,d),this.key=e,this.value=t}static create(e,t,n,d){return new dr(e,t,n,d)}execute(e,t){var n;const d=e.findByCreatedAt(this.getParentCreatedAt());if(d||v.fatal(`fail to find ${this.getParentCreatedAt()}`),d instanceof Dt||v.fatal("fail to execute, only object can execute set"),t===st.UndoRedo){let ae=d;for(;ae;){if(ae.getRemovedAt())return;ae=(n=e.findElementPairByCreatedAt(ae.getCreatedAt()))===null||n===void 0?void 0:n.parent}}const k=d.get(this.key),j=this.toReverseOperation(k),K=this.value.deepcopy(),he=d.set(this.key,K,this.getExecutedAt());return t===st.UndoRedo&&e.findByCreatedAt(K.getCreatedAt())&&e.deregisterElement(K),e.registerElement(K,d),he&&e.registerRemovedElement(he),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:j}}toReverseOperation(e){let t=Pn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=dr.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class gr extends xt{constructor(e,t,n,d){super(e,d),this.prevCreatedAt=t,this.value=n}static create(e,t,n,d){return new gr(e,t,n,d)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof rn||v.fatal("fail to execute, only array can execute add");const n=t,d=this.value.deepcopy();return n.insertAfter(this.prevCreatedAt,d),e.registerElement(d,n),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(n.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Fn extends xt{constructor(e,t,n,d){super(e,d),this.prevCreatedAt=t,this.createdAt=n}static create(e,t,n,d){return new Fn(e,t,n,d)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof rn||v.fatal("fail to execute, only array can execute move");const n=t,d=Number(n.subPathOf(this.createdAt));n.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const k=Number(n.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:k,previousIndex:d}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class En{constructor(e,t,n,d){this.key=e,this.value=t,this.updatedAt=n,this._isRemoved=d}static of(e,t,n,d){return new En(e,t,n,d)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}}class cn{constructor(){this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new cn}set(e,t,n){const d=this.nodeMapByKey.get(e);if(d===void 0||n.after(d.getUpdatedAt())){d!==void 0&&!d.isRemoved()&&(this.numberOfRemovedElement-=1);const k=En.of(e,t,n,!1);this.nodeMapByKey.set(e,k)}}remove(e,t){const n=this.nodeMapByKey.get(e);if(n===void 0||t.after(n.getUpdatedAt())){if(n===void 0){this.numberOfRemovedElement+=1;const j=En.of(e,"",t,!0);return this.nodeMapByKey.set(e,j),""}const d=n.isRemoved();d||(this.numberOfRemovedElement+=1);const k=En.of(e,n.getValue(),t,!0);return this.nodeMapByKey.set(e,k),d?"":n.getValue()}return""}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new cn;for(const[,t]of this.nodeMapByKey)e.set(t.getKey(),t.getValue(),t.getUpdatedAt());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,n]of this.nodeMapByKey)n.isRemoved()||e.push(`"${Ht(t)}":"${Ht(n.getValue())}"`);return`{${e.join(",")}}`}toXML(){return this.size()?` ${[...this.nodeMapByKey].filter(([,t])=>t instanceof En&&!t.isRemoved()).sort((t,n)=>t[0].localeCompare(n[0])).map(([t,n])=>`${t}="${JSON.parse(n.getValue())}"`).join(" ")}`:""}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,n]of this.nodeMapByKey)n.isRemoved()||(e[t]=n.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}var Cn;(function(c){c.Content="content",c.Style="style"})(Cn||(Cn={}));class tr{constructor(e){this.attributes=cn.create(),this.content=e}static create(e){return new tr(e)}get length(){return this.content.length}substring(e,t){const n=new tr(this.content.substring(e,t));return n.attributes=this.attributes.deepcopy(),n}setAttr(e,t,n){this.attributes.set(e,t,n)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=Ht(this.content),t=this.attributes.toObject(),n=[];for(const[d,k]of Object.entries(t)){const j=JSON.parse(k),K=typeof j=="string"?`"${Ht(d)}":"${Ht(j)}"`:`"${Ht(d)}":${String(j)}`;n.push(K)}return n.sort(),n.length===0?`{"val":"${e}"}`:`{"attrs":{${n.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}}class Xt extends wt{constructor(e,t){super(t),this.rgaTreeSplit=e}static create(e,t){return new Xt(e,t)}edit(e,t,n,d,k){const j=t?tr.create(t):void 0;if(j&&d)for(const[je,ke]of Object.entries(d))j.setAttr(je,ke,n);const[K,he,ae]=this.rgaTreeSplit.edit(e,n,j,k),Ae=ae.map(je=>({...je,value:je.value?{attributes:ot(je.value.getAttributes()),content:je.value.getContent()}:{attributes:void 0,content:""},type:Cn.Content}));return[he,Ae,[K,K]]}setStyle(e,t,n,d){const[,k]=this.rgaTreeSplit.findNodeWithSplit(e[1],n),[,j]=this.rgaTreeSplit.findNodeWithSplit(e[0],n),K=[],he=this.rgaTreeSplit.findBetween(j,k),ae=new Map,Ae=[];for(const je of he){const ke=je.getCreatedAt().getActorID(),We=d!=null&&d.size?d.has(ke)?d.get(ke):$e:rt;if(je.canStyle(n,We)){const ct=ae.get(ke),dt=je.getCreatedAt();(!ct||dt.after(ct))&&ae.set(ke,dt),Ae.push(je)}}for(const je of Ae){if(je.isRemoved())continue;const[ke,We]=this.rgaTreeSplit.findIndexesFromRange(je.createPosRange());K.push({type:Cn.Style,actor:n.getActorID(),from:ke,to:We,value:{attributes:ot(t)}});for(const[ct,dt]of Object.entries(t))je.getValue().setAttr(ct,dt,n)}return[ae,K]}indexRangeToPosRange(e,t){const n=this.rgaTreeSplit.indexToPos(e);return e===t?[n,n]:[n,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const n=t.getValue();e.push({attributes:ot(n.getAttributes()),content:n.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}getRemovedNodesLen(){return this.rgaTreeSplit.getRemovedNodesLen()}purgeRemovedNodesBefore(e){return this.rgaTreeSplit.purgeRemovedNodesBefore(e)}deepcopy(){const e=new Xt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}}class yn extends xt{constructor(e,t,n,d,k,j,K){super(e,K),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=d,this.content=k,this.attributes=j}static create(e,t,n,d,k,j,K){return new yn(e,t,n,d,k,j,K)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Xt||v.fatal("fail to execute, only Text can execute edit");const n=t,[,d]=n.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(n),{opInfos:d.map(({from:k,to:j,value:K})=>({type:"edit",from:k,to:j,value:K,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),d=this.content;return`${e}.EDIT(${t},${n},${d})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class vn extends xt{constructor(e,t,n,d,k,j){super(e,j),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=d,this.attributes=k}static create(e,t,n,d,k,j){return new vn(e,t,n,d,k,j)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Xt||v.fatal("fail to execute, only Text can execute edit");const n=t,[,d]=n.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);return{opInfos:d.map(({from:k,to:j,value:K})=>({type:"style",from:k,to:j,value:K,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),d=this.attributes;return`${e}.STYL(${t},${n},${JSON.stringify(d)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const Hn=2,$n="root",Nn="text";function Vn(c,e){let t=0;const n=c.children;for(let d=0;d<e;d++){const k=n[d];!k||k.isRemoved||(t+=k.paddedSize)}return t}class Gn{constructor(e,t=[]){if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e;)e.size+=this.paddedSize*t,e=e.parent}get isText(){return this.type===Nn}get paddedSize(){return this.size+(this.isText?0:Hn)}isAncestorOf(e){return zn(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const n=this.value.slice(0,e),d=this.value.slice(e);if(!d.length)return;this.value=n;const k=this.cloneText(e+t);return k.value=d,this.parent.insertAfterInternal(k,this),k}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this,t.isRemoved||t.updateAncestorsSize()}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const n=this.cloneElement(t);this.parent.insertAfterInternal(n,this),n.updateAncestorsSize();const d=this.children.slice(0,e),k=this.children.slice(e);this._children=d,n._children=k,this.size=this._children.reduce((j,K)=>j+K.paddedSize,0),n.size=n._children.reduce((j,K)=>j+K.paddedSize,0);for(const j of n._children)j.parent=n;return n}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(d=>!d.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const n=this._children.indexOf(t);if(n!==-1)return n;t=t.parent}return-1}}function zn(c,e){if(c===e)return!1;for(;e.parent;){if(e.parent===c)return!0;e=e.parent}return!1}var vt;(function(c){c.Start="Start",c.End="End",c.Text="Text"})(vt||(vt={}));function Kn(c,e,t,n){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>c.size)throw new Error(`from is out of range: ${e} > ${c.size}`);if(t>c.size)throw new Error(`to is out of range: ${t} > ${c.size}`);if(e===t)return;let d=0;for(const k of c.children){if(e-k.paddedSize<d&&d<t){const j=k.isText?e-d:e-d-1,K=k.isText?t-d:t-d-1,he=!k.isText&&j<0,ae=!k.isText&&K>k.size;(k.isText||he)&&n([k,k.isText?vt.Text:vt.Start],ae),Kn(k,Math.max(0,j),Math.min(K,k.size),n),ae&&n([k,vt.End],ae)}d+=k.paddedSize}}function Ln(c,e,t=0){for(const n of c.children)Ln(n,e,t+1);e(c,t)}function Mn(c,e,t=0){for(const n of c._children)Mn(n,e,t+1);e(c,t)}function E(c,e,t=!0){if(e>c.size)throw new Error(`index is out of range: ${e} > ${c.size}`);if(c.isText)return{node:c,offset:e};let n=0,d=0;for(const k of c.children){if(t&&k.isText&&k.size>=e-d)return E(k,e-d,t);if(e===d)return{node:c,offset:n};if(!t&&k.paddedSize===e-d)return{node:c,offset:n+1};if(k.paddedSize>e-d)return E(k,e-d-1,t);d+=k.paddedSize,n+=1}return{node:c,offset:n}}function f(c){return c.isText||c.children.length===0?c:f(c.children[0])}function T(c,e){if(c.size<e)throw new Error("unacceptable path");for(let t=0;t<c.children.length;t++){const n=c.children[t];if(n.size<e)e-=n.size;else{c=n;break}}return{node:c,offset:e}}class W{constructor(e){this.root=e}tokensBetween(e,t,n){Kn(this.root,e,t,n)}traverse(e){Ln(this.root,e,0)}traverseAll(e){Mn(this.root,e,0)}findTreePos(e,t=!0){return E(this.root,e,t)}treePosToPath(e){const t=[];let n=e.node;if(n.isText){const d=n.parent.findOffset(n);if(d===-1)throw new Error("invalid treePos");const k=Vn(n.parent,d);t.push(k+e.offset),n=n.parent}else if(n.hasTextChild()){const d=Vn(n,e.offset);t.push(d)}else t.push(e.offset);for(;n.parent;){const d=n.parent.findOffset(n);if(d===-1)throw new Error("invalid treePos");t.push(d),n=n.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let n=0;n<e.length-1;n++){const d=e[n];if(t=t.children[d],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return T(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:n}=e;if(t.isText){if(t.size===n){const d=t.nextSibling;return d||t.parent}return t}return t.children.length===n?t:f(t.children[n])}indexOf(e){let{node:t}=e;const{offset:n}=e;let d=0,k=1;if(t.isText){d+=n;const j=t.parent,K=j.findOffset(t);if(K===-1)throw new Error("invalid pos");d+=Vn(j,K),t=t.parent}else d+=Vn(t,n);for(;t!=null&&t.parent;){const j=t.parent,K=j.findOffset(t);if(K===-1)throw new Error("invalid pos");d+=Vn(j,K),k++,t=t.parent}return d+k-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const ne=(c,e)=>c===e?0:c<e?-1:1;class de{constructor(e,t,n){this.key=e,this.value=t,this.isRed=n}}class ge{constructor(e){this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class xe{constructor(e){this.comparator=typeof e<"u"?e:ne,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new ge(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const n=this.comparator(e,t.key);if(n>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(n<0)if(t.left)t.left.parent=t,t=t.left;else{let d=t.parent,k=t;for(;d&&k===d.left;)k=d,d=d.parent;return d}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const n=this.comparator(e,t.key);if(n===0)return t;n<0?t=t.left:n>0&&(t=t.right)}}putInternal(e,t,n){if(!n)return this.counter+=1,new de(e,t,!0);const d=this.comparator(e,n.key);return d<0?n.left=this.putInternal(e,t,n.left):d>0?n.right=this.putInternal(e,t,n.right):n.value=t,this.isRed(n.right)&&!this.isRed(n.left)&&(n=this.rotateLeft(n)),this.isRed(n.left)&&this.isRed(n.left.left)&&(n=this.rotateRight(n)),this.isRed(n.left)&&this.isRed(n.right)&&this.flipColors(n),n}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const n=this.min(e.right);e.value=n.value,e.key=n.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}var be;(function(c){c.Content="content",c.Style="style",c.RemoveStyle="removeStyle"})(be||(be={}));class Re{constructor(e,t){this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Re(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:n}=e,d;return n.isText?(n.parent.children[0]===n&&t===0?d=n.parent:d=n,n=n.parent):t===0?d=n:d=n.children[t-1],Re.of(n.id,Ce.of(d.getCreatedAt(),d.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Re.of(Ce.of(kt.fromStruct(e.parentID.createdAt),e.parentID.offset),Ce.of(kt.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodes(e){const t=this.getParentID(),n=this.getLeftSiblingID(),d=e.findFloorNode(t);let k=e.findFloorNode(n);if(!d||!k)throw new Error(`cannot find node at ${this}`);return!n.equals(t)&&n.getOffset()>0&&n.getOffset()===k.id.getOffset()&&k.insPrevID&&(k=e.findFloorNode(k.insPrevID)),[d,k]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Ce{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new Ce(e,t)}static fromStruct(e){return Ce.of(kt.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class Ge extends Gn{constructor(e,t,n,d,k){super(t),this._value="",this.id=e,this.removedAt=k,d&&(this.attrs=d),typeof n=="string"?this.value=n:Array.isArray(n)&&(this._children=n)}static create(e,t,n,d){return new Ge(e,t,n,d)}deepcopy(){var e;const t=new Ge(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)===null||e===void 0?void 0:e.deepcopy(),t._children=this._children.map(n=>{const d=n.deepcopy();return d.parent=t,d}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&(this.parent.removedAt?this.parent.size-=this.paddedSize:this.updateAncestorsSize())}cloneText(e){return new Ge(Ce.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new Ge(Ce.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,n){const d=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,n);if(d){if(d.insPrevID=this.id,this.insNextID){const k=e.findFloorNode(this.insNextID);k.insPrevID=d.id,d.insNextID=this.insNextID}this.insNextID=d.id,e.registerNode(d)}return d}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}}function Jt(c){var e;if(c.isText){const t=c;return{type:t.type,value:t.value}}return{type:c.type,children:c.children.map(Jt),attributes:c.attrs?ot((e=c.attrs)===null||e===void 0?void 0:e.toObject()):void 0}}function It(c){var e;return c.isText?c.value:`<${c.type}${((e=c.attrs)===null||e===void 0?void 0:e.toXML())||""}>${c.children.map(t=>It(t)).join("")}</${c.type}>`}function Dn(c){if(c.isText){const e=c;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:c.type,children:c.children.map(Dn),size:c.size,isRemoved:c.isRemoved}}class An extends wt{constructor(e,t){super(t),this.indexTree=new W(e),this.nodeMapByID=new xe(Ce.createComparator()),this.removedNodeMap=new Map,this.indexTree.traverse(n=>{this.nodeMapByID.put(n.id,n)})}static create(e,t){return new An(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[n,d]=e.toTreeNodes(this);let k=d;const j=n===k,K=k.parent&&!j?k.parent:n;if(k.isText&&k.split(this,e.getLeftSiblingID().getOffset()-k.id.getOffset()),t){const he=K.allChildren,ae=j?0:he.indexOf(k)+1;for(let Ae=ae;Ae<he.length;Ae++){const je=he[Ae];if(!je.id.getCreatedAt().after(t))break;k=je}}return[K,k]}style(e,t,n){const[d,k]=this.findNodesAndSplitText(e[0],n),[j,K]=this.findNodesAndSplitText(e[1],n),he=[],ae=t?ot(t):void 0;return this.traverseInPosRange(d,k,j,K,([Ae])=>{if(!Ae.isRemoved&&!Ae.isText&&t){Ae.attrs||(Ae.attrs=new cn);for(const[je,ke]of Object.entries(t))Ae.attrs.set(je,ke,n);he.push({type:be.Style,from:this.toIndex(d,k),to:this.toIndex(j,K),fromPath:this.toPath(d,k),toPath:this.toPath(j,K),actor:n.getActorID(),value:ae})}}),he}removeStyle(e,t,n){const[d,k]=this.findNodesAndSplitText(e[0],n),[j,K]=this.findNodesAndSplitText(e[1],n),he=[],ae=t||void 0;return this.traverseInPosRange(d,k,j,K,([Ae])=>{if(!Ae.isRemoved&&!Ae.isText&&t){Ae.attrs||(Ae.attrs=new cn);for(const je of t)Ae.attrs.remove(je,n);he.push({type:be.RemoveStyle,from:this.toIndex(d,k),to:this.toIndex(j,K),fromPath:this.toPath(d,k),toPath:this.toPath(j,K),actor:n.getActorID(),value:ae})}}),he}edit(e,t,n,d,k,j){const[K,he]=this.findNodesAndSplitText(e[0],d),[ae,Ae]=this.findNodesAndSplitText(e[1],d),je=this.toIndex(K,he),ke=this.toPath(K,he),We=[],ct=[],dt=[],Et=new Map;this.traverseInPosRange(K,he,ae,Ae,([_t,Qt],Gt)=>{if(Qt===vt.Start&&!Gt)for(const Br of _t.children)dt.push(Br);const sn=_t.getCreatedAt().getActorID(),Sr=j?j.has(sn)?j.get(sn):$e:rt;if(_t.canDelete(d,Sr)||We.includes(_t.parent)){const Br=Et.get(sn),Vr=_t.getCreatedAt();(!Br||Vr.after(Br))&&Et.set(sn,Vr),(Qt===vt.Text||Qt===vt.Start)&&We.push(_t),ct.push([_t,Qt])}});const fn=this.makeDeletionChanges(ct,d);for(const _t of We)_t.remove(d),_t.isRemoved&&this.removedNodeMap.set(_t.id.toIDString(),_t);for(const _t of dt)_t.removedAt||K.append(_t);if(n>0){let _t=0,Qt=K,Gt=he;for(;_t<n;)Qt.split(this,Qt.findOffset(Gt)+1,k),Gt=Qt,Qt=Qt.parent,_t++;fn.push({type:be.Content,from:je,to:je,fromPath:ke,toPath:ke,actor:d.getActorID()})}if(t!=null&&t.length){const _t=[];let Qt=he;for(const Gt of t)Qt===K?K.insertAt(Gt,0):K.insertAfter(Gt,Qt),Qt=Gt,Mn(Gt,sn=>{K.isRemoved&&(sn.remove(d),this.removedNodeMap.set(sn.id.toIDString(),sn)),this.nodeMapByID.put(sn.id,sn)}),Gt.isRemoved||_t.push(Gt);if(_t.length){const Gt=_t.map(sn=>Jt(sn));fn.length&&fn[fn.length-1].from===je?fn[fn.length-1].value=Gt:fn.push({type:be.Content,from:je,to:je,fromPath:ke,toPath:ke,actor:d.getActorID(),value:Gt})}}return[fn,Et]}editT(e,t,n,d,k){const j=this.findPos(e[0]),K=this.findPos(e[1]);this.edit([j,K],t,n,d,k)}move(e,t,n){throw new Error(`not implemented: ${e}, ${t}, ${n}`)}purgeRemovedNodesBefore(e){var t;const n=new Set;let d=0;for(const[,k]of this.removedNodeMap)k.removedAt&&e.compare(k.removedAt)>=0&&(n.add(k),d++);for(const k of n)(t=k.parent)===null||t===void 0||t.removeChild(k),this.nodeMapByID.remove(k.id),this.purge(k),this.removedNodeMap.delete(k.id.toIDString());return d}purge(e){const t=e.insPrevID,n=e.insNextID;if(t){const d=this.findFloorNode(t);d.insNextID=n}if(n){const d=this.findFloorNode(n);d.insPrevID=t}e.insPrevID=void 0,e.insNextID=void 0}findPos(e,t=!0){const n=this.indexTree.findTreePos(e,t);return Re.fromTreePos(n)}getRemovedNodesLen(){return this.removedNodeMap.size}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getIndexTree(){return this.indexTree}toXML(){return It(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),t=(n,d=void 0,k=void 0,j=0)=>{var K,he,ae,Ae;let je,ke,We;const ct=n.isText?{node:n,offset:0}:d&&k?this.toTreePos(d,k):null;ct&&(je=this.indexTree.indexOf(ct),ke=this.indexTree.treePosToPath(ct),We=Re.fromTreePos(ct).toStruct());const dt={type:n.type,parent:d==null?void 0:d.id.toTestString(),size:n.size,id:n.id.toTestString(),removedAt:(K=n.removedAt)===null||K===void 0?void 0:K.toTestString(),insPrev:(he=n.insPrevID)===null||he===void 0?void 0:he.toTestString(),insNext:(ae=n.insNextID)===null||ae===void 0?void 0:ae.toTestString(),value:n.isText?n.value:void 0,isRemoved:n.isRemoved,children:[],depth:j,attributes:n.attrs?ot((Ae=n.attrs)===null||Ae===void 0?void 0:Ae.toObject()):void 0,index:je,path:ke,pos:We};for(let Et=0;Et<n.children.length;Et++){const fn=Et===0?n:n.children[Et-1];dt.children.push(t(n.children[Et],n,fn,j+1))}return dt};return t(e)}getRootTreeNode(){return Jt(this.indexTree.getRoot())}toTestTreeNode(){return Dn(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new An(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.treePosToPath(n):[]}toIndex(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.indexOf(n):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,n]=e,d=this.findPos(t);return t===n?[d.toStruct(),d.toStruct()]:[d.toStruct(),this.findPos(n).toStruct()]}posRangeToPathRange(e){const[t,n]=this.findNodesAndSplitText(e[0]),[d,k]=this.findNodesAndSplitText(e[1]);return[this.toPath(t,n),this.toPath(d,k)]}posRangeToIndexRange(e){const[t,n]=this.findNodesAndSplitText(e[0]),[d,k]=this.findNodesAndSplitText(e[1]);return[this.toIndex(t,n),this.toIndex(d,k)]}traverseInPosRange(e,t,n,d,k){const j=this.toIndex(e,t),K=this.toIndex(n,d);return this.indexTree.tokensBetween(j,K,k)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let d;for(;e.isRemoved;)d=e,e=d.parent;const k=e.findOffset(d);return{node:e,offset:k}}if(e===t)return{node:e,offset:0};let n=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};n++}return{node:e,offset:n}}makeDeletionChanges(e,t){const n=[],d=[];let k=null,j=null;for(let K=0;K<e.length;K++){const he=e[K],ae=e[K+1];k||(k=he),j=he;const Ae=this.findRightToken(he);(!Ae||!ae||Ae[0]!==ae[0]||Ae[1]!==ae[1])&&(d.push([k,j]),k=null,j=null)}for(const K of d){const[he,ae]=K,[Ae,je]=this.findLeftToken(he),[ke,We]=ae,ct=je===vt.Start?Ae:Ae.parent,dt=We===vt.Start?ke:ke.parent,Et=this.toIndex(ct,Ae),fn=this.toIndex(dt,ke);Et<fn&&(n.length>0&&Et===n[n.length-1].to?(n[n.length-1].to=fn,n[n.length-1].toPath=this.toPath(dt,ke)):n.push({type:be.Content,from:Et,to:fn,fromPath:this.toPath(ct,Ae),toPath:this.toPath(dt,ke),actor:t.getActorID()}))}return n.reverse()}findRightToken([e,t]){if(t===vt.Start){const K=e.allChildren;return K.length>0?[K[0],K[0].isText?vt.Text:vt.Start]:[e,vt.End]}const n=e.parent,d=n.allChildren,k=d.indexOf(e);if(n&&k===d.length-1)return[n,vt.End];const j=d[k+1];return[j,j.isText?vt.Text:vt.Start]}findLeftToken([e,t]){if(t===vt.End){const K=e.allChildren;if(K.length>0){const he=K[K.length-1];return[he,he.isText?vt.Text:vt.End]}return[e,vt.Start]}const n=e.parent,d=n.allChildren,k=d.indexOf(e);if(n&&k===0)return[n,vt.Start];const j=d[k-1];return[j,j.isText?vt.Text:vt.End]}}class Er extends xt{constructor(e,t,n,d,k,j,K){super(e,K),this.fromPos=t,this.toPos=n,this.contents=d,this.splitLevel=k,this.maxCreatedAtMapByActor=j}static create(e,t,n,d,k,j,K){return new Er(e,t,n,d,k,j,K)}execute(e){var t;const n=e.findByCreatedAt(this.getParentCreatedAt());n||v.fatal(`fail to find ${this.getParentCreatedAt()}`),n instanceof An||v.fatal("fail to execute, only Tree can execute edit");const d=this.getExecutedAt(),k=n,[j]=k.edit([this.fromPos,this.toPos],(t=this.contents)===null||t===void 0?void 0:t.map(K=>K.deepcopy()),this.splitLevel,d,(()=>{let K=d.getDelimiter();return this.contents!==void 0&&(K+=this.contents.length),()=>kt.of(d.getLamport(),++K,d.getActorID())})(),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(k),{opInfos:j.map(({from:K,to:he,value:ae,splitLevel:Ae,fromPath:je,toPath:ke})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:K,to:he,value:ae,splitLevel:Ae,fromPath:je,toPath:ke}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,d=this.contents||[];return`${e}.EDIT(${t},${n},${d.map(k=>It(k)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class nr{constructor(e,t,n){this.clientSeq=e,this.lamport=t,this.actor=n}static of(e,t,n){return new nr(e,t,n)}next(){return new nr(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new nr(this.clientSeq,e,this.actor):new nr(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return kt.of(this.lamport,e,this.actor)}setActor(e){return new nr(this.clientSeq,this.lamport,e)}getClientSeq(){return this.clientSeq}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const ro=new nr(0,pe.fromInt(0,!0),qt);class _r{constructor({id:e,operations:t,presenceChange:n,message:d}){this.id=e,this.operations=t||[],this.presenceChange=n,this.message=d}static create({id:e,operations:t,presenceChange:n,message:d}){return new _r({id:e,operations:t,presenceChange:n,message:d})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,n){const d=[],k=[];for(const j of this.operations){const K=j.execute(e,n);if(!K)continue;const{opInfos:he,reverseOp:ae}=K;d.push(...he),ae&&k.unshift(ae)}return this.presenceChange&&(this.presenceChange.type===At.Put?t.set(this.id.getActorID(),ze(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:d,reverseOps:k}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:on.bytesToHex(on.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>on.bytesToHex(on.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:n,presenceChange:d,message:k}=e;return _r.create({id:on.bytesToChangeID(on.hexToBytes(t)),operations:n==null?void 0:n.map(j=>on.bytesToOperation(on.hexToBytes(j))),presenceChange:d,message:k})}}class Kr{constructor(e,t,n,d,k,j){this.documentKey=e,this.checkpoint=t,this.isRemoved=n,this.changes=d,this.snapshot=k,this.minSyncedTicket=j}static create(e,t,n,d,k,j){return new Kr(e,t,n,d,k,j)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Ir{constructor(e,t){this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Ir(e,t)}increaseClientSeq(e){return e===0?this:new Ir(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,n=Math.max(this.clientSeq,e.clientSeq);return Ir.of(t,n)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const io=new Ir(pe.fromInt(0,!0),0);class rr{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new rr(e,t)}static fromStruct(e){return rr.of(kt.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new rr(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const oo=rr.of($e,0);class Xn{constructor(e,t){this.id=e,this.relativeOffset=t}static of(e,t){return new Xn(e,t)}static fromStruct(e){const t=rr.fromStruct(e.id);return Xn.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return rr.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class mr extends mn{constructor(e,t,n){super(t),this.id=e,this.removedAt=n}static create(e,t){return new mr(e,t)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new mr(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Xn.of(this.id,0),Xn.of(this.id,this.getLength())]}deepcopy(){return new mr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}}class xr{constructor(){this.head=mr.create(oo),this.treeByIndex=new Jn,this.treeByID=new xe(mr.createComparator()),this.removedNodeMap=new Map,this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new xr}edit(e,t,n,d){const[k,j]=this.findNodeWithSplit(e[1],t),[K,he]=this.findNodeWithSplit(e[0],t),ae=this.findBetween(he,j),[Ae,je,ke]=this.deleteNodes(ae,t,d),We=j?j.getID():k.getID();let ct=Xn.of(We,0);if(n){const dt=this.posToIndex(K.createPosRange()[1],!0),Et=this.insertAfter(K,mr.create(rr.of(t,0),n));Ae.length&&Ae[Ae.length-1].from===dt?Ae[Ae.length-1].value=n:Ae.push({actor:t.getActorID(),from:dt,to:dt,value:n}),ct=Xn.of(Et.getID(),Et.getContentLength())}for(const[dt,Et]of ke)this.removedNodeMap.set(dt,Et);return[ct,je,Ae]}indexToPos(e){const[t,n]=this.treeByIndex.find(e),d=t;return Xn.of(d.getID(),n)}findIndexesFromRange(e){const[t,n]=e;return[this.posToIndex(t,!1),this.posToIndex(n,!0)]}posToIndex(e,t){const n=e.getAbsoluteID(),d=t?this.findFloorNodePreferToLeft(n):this.findFloorNode(n);d||v.fatal(`the node of the given id should be found: ${n.toTestString()}`);const k=this.treeByIndex.indexOf(d),j=d.isRemoved()?0:n.getOffset()-d.getID().getOffset();return k+j}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new xr;let t=this.head.getNext(),n=e.head,d;for(;t;){if(d=e.insertAfter(n,t.deepcopy()),t.hasInsPrev()){const k=e.findNode(t.getInsPrevID());d.setInsPrev(k)}n=d,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const n=e.getNext();return t.setPrev(e),n&&n.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const n=e.getAbsoluteID();let d=this.findFloorNodePreferToLeft(n);const k=n.getOffset()-d.getID().getOffset();for(this.splitNode(d,k);d.hasNext()&&d.getNext().getCreatedAt().after(t);)d=d.getNext();return[d,d.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||v.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const n=[];let d=e;for(;d&&d!==t;)n.push(d),d=d.getNext();return n}splitNode(e,t){if(t>e.getContentLength()&&v.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const n=e.split(t);this.treeByIndex.updateWeight(n),this.insertAfter(e,n);const d=e.getInsNext();return d&&d.setInsPrev(n),n.setInsPrev(e),n}deleteNodes(e,t,n){if(!e.length)return[[],new Map,new Map];const[d,k]=this.filterNodes(e,t,n),j=new Map,K=new Map,he=this.makeChanges(k,t);for(const ae of d){const Ae=ae.getCreatedAt().getActorID();(!j.has(Ae)||ae.getID().getCreatedAt().after(j.get(Ae)))&&j.set(Ae,ae.getID().getCreatedAt()),K.set(ae.getID().toIDString(),ae),ae.remove(t)}return this.deleteIndexNodes(k),[he,j,K]}filterNodes(e,t,n){const d=!!n,k=[],j=[],[K,he]=this.findEdgesOfCandidates(e);j.push(K);for(const ae of e){const Ae=ae.getCreatedAt().getActorID(),je=d?n.has(Ae)?n.get(Ae):$e:rt;ae.canDelete(t,je)?k.push(ae):j.push(ae)}return j.push(he),[k,j]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const n=[];let d,k;for(let j=0;j<e.length-1;j++){const K=e[j],he=e[j+1];K.getNext()!=he&&([d]=this.findIndexesFromRange(K.getNext().createPosRange()),he?[,k]=this.findIndexesFromRange(he.getPrev().createPosRange()):k=this.treeByIndex.length,d<k&&n.push({actor:t.getActorID(),from:d,to:k}))}return n.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const n=e[t],d=e[t+1];n.getNext()!=d&&this.treeByIndex.deleteRange(n,d)}}getRemovedNodesLen(){return this.removedNodeMap.size}purgeRemovedNodesBefore(e){let t=0;for(const[,n]of this.removedNodeMap)n.getRemovedAt()&&e.compare(n.getRemovedAt())>=0&&(this.treeByIndex.delete(n),this.purge(n),this.treeByID.remove(n.getID()),this.removedNodeMap.delete(n.getID().toIDString()),t++);return t}purge(e){const t=e.getPrev(),n=e.getNext(),d=e.getInsPrev(),k=e.getInsNext();t&&t.setNext(n),n&&n.setPrev(t),e.setPrev(void 0),e.setNext(void 0),d&&d.setInsNext(k),k&&k.setInsPrev(d),e.setInsPrev(void 0),e.setInsNext(void 0)}}const yi=c=>c<0?Math.ceil(c):Math.floor(c);var tn;(function(c){c[c.IntegerCnt=0]="IntegerCnt",c[c.LongCnt=1]="LongCnt"})(tn||(tn={}));class qn extends nt{constructor(e,t,n){switch(super(n),this.valueType=e,e){case tn.IntegerCnt:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=pe.fromNumber(t).toInt():this.value=yi(t):this.value=t.toInt();break;case tn.LongCnt:typeof t=="number"?this.value=pe.fromNumber(t):this.value=t;break;default:throw new Ie(Ee.Unimplemented,`unimplemented type: ${e}`)}}static create(e,t,n){return new qn(e,t,n)}static valueFromBytes(e,t){switch(e){case tn.IntegerCnt:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case tn.LongCnt:return pe.fromBytesLE(Array.from(t));default:throw new Ie(Ee.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=qn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof pe?tn.LongCnt:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?tn.LongCnt:tn.IntegerCnt;default:return}}static isSupport(e){return!!qn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===tn.IntegerCnt||e===tn.LongCnt}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case tn.IntegerCnt:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case tn.LongCnt:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new Ie(Ee.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(n){if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`)}return t(this),t(e),this.valueType===tn.LongCnt?this.value=this.value.add(e.getValue()):e.getType()===et.Long?this.value=this.value+e.getValue().toInt():this.value=pe.fromNumber(this.value+yi(e.getValue())).toInt(),this}}class Pr extends xt{constructor(e,t,n){super(e,n),this.value=t}static create(e,t,n){return new Pr(e,t,n)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof qn||v.fatal("fail to execute, only Counter can execute increase");const n=t,d=this.value.deepcopy();return n.increase(d),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:d.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),n=e.getType()===et.Long?e.getValue().multiply(-1):e.getValue()*-1;return Pr.create(this.getParentCreatedAt(),Lt.of(n,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class pr extends xt{constructor(e,t,n,d,k,j){super(e,j),this.fromPos=t,this.toPos=n,this.attributes=d,this.attributesToRemove=k}static create(e,t,n,d,k){return new pr(e,t,n,d,new Array,k)}static createTreeRemoveStyleOperation(e,t,n,d,k){return new pr(e,t,n,new Map,d,k)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||v.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof An||v.fatal("fail to execute, only Tree can execute edit");const n=t;let d;if(this.attributes.size){const k={};[...this.attributes].forEach(([j,K])=>k[j]=K),d=n.style([this.fromPos,this.toPos],k,this.getExecutedAt())}else{const k=this.attributesToRemove;d=n.removeStyle([this.fromPos,this.toPos],k,this.getExecutedAt())}return{opInfos:d.map(({from:k,to:j,value:K,fromPath:he})=>({type:"tree-style",from:k,to:j,value:K,fromPath:he,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${n},${Object.entries(this.attributes||{}).map(([d,k])=>`${d}:"${k}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}}function so(c){const e=new Se.Presence,t=e.data;for(const[n,d]of Object.entries(c))t[n]=JSON.stringify(d);return e}function ao(c){if(c.type===At.Put)return new Se.PresenceChange({type:Se.PresenceChange_ChangeType.PUT,presence:so(c.presence)});if(c.type===At.Clear)return new Se.PresenceChange({type:Se.PresenceChange_ChangeType.CLEAR});throw new Ie(Ee.Unimplemented,"unimplemented type")}function uo(c){return new Se.Checkpoint({serverSeq:c.getServerSeqAsString(),clientSeq:c.getClientSeq()})}function vi(c){return new Se.ChangeID({clientSeq:c.getClientSeq(),lamport:c.getLamportAsString(),actorId:fi(c.getActorID())})}function Ze(c){if(!!c)return new Se.TimeTicket({lamport:c.getLamportAsString(),delimiter:c.getDelimiter(),actorId:fi(c.getActorID())})}function bi(c){switch(c){case et.Null:return Se.ValueType.NULL;case et.Boolean:return Se.ValueType.BOOLEAN;case et.Integer:return Se.ValueType.INTEGER;case et.Long:return Se.ValueType.LONG;case et.Double:return Se.ValueType.DOUBLE;case et.String:return Se.ValueType.STRING;case et.Bytes:return Se.ValueType.BYTES;case et.Date:return Se.ValueType.DATE;default:throw new Ie(Ee.Unsupported,`unsupported type: ${c}`)}}function Ti(c){switch(c){case tn.IntegerCnt:return Se.ValueType.INTEGER_CNT;case tn.LongCnt:return Se.ValueType.LONG_CNT;default:throw new Ie(Ee.Unsupported,`unsupported type: ${c}`)}}function oi(c){if(c instanceof Dt)return new Se.JSONElementSimple({type:Se.ValueType.JSON_OBJECT,createdAt:Ze(c.getCreatedAt()),value:Li(c)});if(c instanceof rn)return new Se.JSONElementSimple({type:Se.ValueType.JSON_ARRAY,createdAt:Ze(c.getCreatedAt()),value:Mo(c)});if(c instanceof Xt)return new Se.JSONElementSimple({type:Se.ValueType.TEXT,createdAt:Ze(c.getCreatedAt())});if(c instanceof Lt)return new Se.JSONElementSimple({type:bi(c.getType()),createdAt:Ze(c.getCreatedAt()),value:c.toBytes()});if(c instanceof qn)return new Se.JSONElementSimple({type:Ti(c.getType()),createdAt:Ze(c.getCreatedAt()),value:c.toBytes()});if(c instanceof An)return new Se.JSONElementSimple({type:Se.ValueType.TREE,createdAt:Ze(c.getCreatedAt()),value:jo(c)});throw new Ie(Ee.Unimplemented,"unimplemented element")}function lo(c){return new Se.TextNodeID({createdAt:Ze(c.getCreatedAt()),offset:c.getOffset()})}function Wr(c){return new Se.TextNodePos({createdAt:Ze(c.getID().getCreatedAt()),offset:c.getID().getOffset(),relativeOffset:c.getRelativeOffset()})}function Yr(c){return new Se.TreePos({parentId:qr(c.getParentID()),leftSiblingId:qr(c.getLeftSiblingID())})}function qr(c){return new Se.TreeNodeID({createdAt:Ze(c.getCreatedAt()),offset:c.getOffset()})}function wi(c){const e=new Se.Operation;if(c instanceof dr){const t=c,n=new Se.Operation_Set;n.parentCreatedAt=Ze(t.getParentCreatedAt()),n.key=t.getKey(),n.value=oi(t.getValue()),n.executedAt=Ze(t.getExecutedAt()),e.body.case="set",e.body.value=n}else if(c instanceof gr){const t=c,n=new Se.Operation_Add;n.parentCreatedAt=Ze(t.getParentCreatedAt()),n.prevCreatedAt=Ze(t.getPrevCreatedAt()),n.value=oi(t.getValue()),n.executedAt=Ze(t.getExecutedAt()),e.body.case="add",e.body.value=n}else if(c instanceof Fn){const t=c,n=new Se.Operation_Move;n.parentCreatedAt=Ze(t.getParentCreatedAt()),n.prevCreatedAt=Ze(t.getPrevCreatedAt()),n.createdAt=Ze(t.getCreatedAt()),n.executedAt=Ze(t.getExecutedAt()),e.body.case="move",e.body.value=n}else if(c instanceof Pn){const t=c,n=new Se.Operation_Remove;n.parentCreatedAt=Ze(t.getParentCreatedAt()),n.createdAt=Ze(t.getCreatedAt()),n.executedAt=Ze(t.getExecutedAt()),e.body.case="remove",e.body.value=n}else if(c instanceof yn){const t=c,n=new Se.Operation_Edit;n.parentCreatedAt=Ze(t.getParentCreatedAt()),n.from=Wr(t.getFromPos()),n.to=Wr(t.getToPos());const d=n.createdAtMapByActor;for(const[j,K]of t.getMaxCreatedAtMapByActor())d[j]=Ze(K);n.content=t.getContent();const k=n.attributes;for(const[j,K]of t.getAttributes())k[j]=K;n.executedAt=Ze(t.getExecutedAt()),e.body.case="edit",e.body.value=n}else if(c instanceof vn){const t=c,n=new Se.Operation_Style;n.parentCreatedAt=Ze(t.getParentCreatedAt()),n.from=Wr(t.getFromPos()),n.to=Wr(t.getToPos());const d=n.createdAtMapByActor;for(const[j,K]of t.getMaxCreatedAtMapByActor())d[j]=Ze(K);const k=n.attributes;for(const[j,K]of t.getAttributes())k[j]=K;n.executedAt=Ze(t.getExecutedAt()),e.body.case="style",e.body.value=n}else if(c instanceof Pr){const t=c,n=new Se.Operation_Increase;n.parentCreatedAt=Ze(t.getParentCreatedAt()),n.value=oi(t.getValue()),n.executedAt=Ze(t.getExecutedAt()),e.body.case="increase",e.body.value=n}else if(c instanceof Er){const t=c,n=new Se.Operation_TreeEdit,d=n.createdAtMapByActor;for(const[k,j]of t.getMaxCreatedAtMapByActor())d[k]=Ze(j);n.parentCreatedAt=Ze(t.getParentCreatedAt()),n.from=Yr(t.getFromPos()),n.to=Yr(t.getToPos()),n.contents=yo(t.getContents()),n.splitLevel=t.getSplitLevel(),n.executedAt=Ze(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=n}else if(c instanceof pr){const t=c,n=new Se.Operation_TreeStyle;n.parentCreatedAt=Ze(t.getParentCreatedAt()),n.from=Yr(t.getFromPos()),n.to=Yr(t.getToPos());const d=t.getAttributesToRemove();if(d.length>0)n.attributesToRemove=d;else{const k=n.attributes;for(const[j,K]of t.getAttributes())k[j]=K}n.executedAt=Ze(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=n}else throw new Ie(Ee.Unimplemented,"unimplemented operation");return e}function co(c){const e=[];for(const t of c)e.push(wi(t));return e}function fo(c){const e=new Se.Change({id:vi(c.getID()),message:c.getMessage()});return c.hasOperations()&&(e.operations=co(c.getOperations())),c.hasPresenceChange()&&(e.presenceChange=ao(c.getPresenceChange())),e}function ho(c){const e=[];for(const t of c)e.push(fo(t));return e}function po(c){const e=[];for(const t of c)e.push(new Se.RHTNode({key:t.getStrKey(),element:si(t.getValue())}));return e}function go(c){const e=[];for(const t of c)e.push(new Se.RGANode({element:si(t.getValue())}));return e}function mo(c){const e=[];for(const t of c){const n=new Se.TextNode;n.id=lo(t.getID()),n.value=t.getValue().getContent(),n.removedAt=Ze(t.getRemovedAt());const d=n.attributes,k=t.getValue().getAttrs();for(const j of k){const K=new Se.NodeAttr;K.value=j.getValue(),K.updatedAt=Ze(j.getUpdatedAt()),d[j.getKey()]=K}e.push(n)}return e}function yo(c){const e=[];if(!c||!c.length)return e;for(const t of c)e.push(new Se.TreeNodes({content:Ei(t)}));return e}function Ei(c){if(!c)return[];const e=[];return Ln(c,(t,n)=>{const d=new Se.TreeNode({id:qr(t.id),type:t.type,removedAt:Ze(t.removedAt),depth:n});if(t.isText&&(d.value=t.value),t.insPrevID&&(d.insPrevId=qr(t.insPrevID)),t.insNextID&&(d.insNextId=qr(t.insNextID)),t.attrs)for(const k of t.attrs)d.attributes[k.getKey()]=new Se.NodeAttr({value:k.getValue(),updatedAt:Ze(k.getUpdatedAt())});e.push(d)}),e}function vo(c){const e=new Se.JSONElement;return e.body.case="jsonObject",e.body.value=new Se.JSONElement_JSONObject({nodes:po(c.getRHT()),createdAt:Ze(c.getCreatedAt()),movedAt:Ze(c.getMovedAt()),removedAt:Ze(c.getRemovedAt())}),e}function _i(c){const e=new Se.JSONElement;return e.body.case="jsonArray",e.body.value=new Se.JSONElement_JSONArray({nodes:go(c.getElements()),createdAt:Ze(c.getCreatedAt()),movedAt:Ze(c.getMovedAt()),removedAt:Ze(c.getRemovedAt())}),e}function bo(c){const e=new Se.JSONElement;return e.body.case="primitive",e.body.value=new Se.JSONElement_Primitive({type:bi(c.getType()),value:c.toBytes(),createdAt:Ze(c.getCreatedAt()),movedAt:Ze(c.getMovedAt()),removedAt:Ze(c.getRemovedAt())}),e}function To(c){const e=new Se.JSONElement;return e.body.case="text",e.body.value=new Se.JSONElement_Text({nodes:mo(c.getRGATreeSplit()),createdAt:Ze(c.getCreatedAt()),movedAt:Ze(c.getMovedAt()),removedAt:Ze(c.getRemovedAt())}),e}function wo(c){const e=new Se.JSONElement;return e.body.case="counter",e.body.value=new Se.JSONElement_Counter({type:Ti(c.getType()),value:c.toBytes(),createdAt:Ze(c.getCreatedAt()),movedAt:Ze(c.getMovedAt()),removedAt:Ze(c.getRemovedAt())}),e}function Oi(c){const e=new Se.JSONElement;return e.body.case="tree",e.body.value=new Se.JSONElement_Tree({nodes:Ei(c.getRoot()),createdAt:Ze(c.getCreatedAt()),movedAt:Ze(c.getMovedAt()),removedAt:Ze(c.getRemovedAt())}),e}function si(c){if(c instanceof Dt)return vo(c);if(c instanceof rn)return _i(c);if(c instanceof Lt)return bo(c);if(c instanceof Xt)return To(c);if(c instanceof qn)return wo(c);if(c instanceof An)return Oi(c);throw new Ie(Ee.Unimplemented,"unimplemented element")}function Eo(c){return new Se.ChangePack({documentKey:c.getDocumentKey(),checkpoint:uo(c.getCheckpoint()),isRemoved:c.getIsRemoved(),changes:ho(c.getChanges()),snapshot:c.getSnapshot(),minSyncedTicket:Ze(c.getMinSyncedTicket())})}function Si(c){return nr.of(c.clientSeq,pe.fromString(c.lamport,!0),ci(c.actorId))}function Qe(c){if(!!c)return kt.of(pe.fromString(c.lamport,!0),c.delimiter,ci(c.actorId))}function ai(c){const e={};return Object.entries(c.data).forEach(([t,n])=>{e[t]=JSON.parse(n)}),e}function _o(c){const e=c.type;if(e===Se.PresenceChange_ChangeType.PUT){const t=ai(c.presence);return{type:At.Put,presence:t}}if(e===Se.PresenceChange_ChangeType.CLEAR)return{type:At.Clear};throw new Ie(Ee.Unsupported,`unsupported type: ${e}`)}function Oo(c){const e=new Map;return Object.entries(c).forEach(([t,n])=>{e.set(t,ai(n))}),e}function Ni(c){switch(c){case Se.ValueType.NULL:return et.Null;case Se.ValueType.BOOLEAN:return et.Boolean;case Se.ValueType.INTEGER:return et.Integer;case Se.ValueType.LONG:return et.Long;case Se.ValueType.DOUBLE:return et.Double;case Se.ValueType.STRING:return et.String;case Se.ValueType.BYTES:return et.Bytes;case Se.ValueType.DATE:return et.Date}throw new Ie(Ee.Unimplemented,`unimplemented value type: ${c}`)}function Hr(c){switch(c){case Se.ValueType.INTEGER_CNT:return tn.IntegerCnt;case Se.ValueType.LONG_CNT:return tn.LongCnt}throw new Ie(Ee.Unimplemented,`unimplemented value type: ${c}`)}function ui(c){switch(c.type){case Se.ValueType.JSON_OBJECT:return c.value?Ci(c.value):Dt.create(Qe(c.createdAt));case Se.ValueType.JSON_ARRAY:return c.value?Lo(c.value):rn.create(Qe(c.createdAt));case Se.ValueType.TEXT:return Xt.create(xr.create(),Qe(c.createdAt));case Se.ValueType.TREE:return Bo(c.value);case Se.ValueType.NULL:case Se.ValueType.BOOLEAN:case Se.ValueType.INTEGER:case Se.ValueType.LONG:case Se.ValueType.DOUBLE:case Se.ValueType.STRING:case Se.ValueType.BYTES:case Se.ValueType.DATE:return Lt.of(Lt.valueFromBytes(Ni(c.type),c.value),Qe(c.createdAt));case Se.ValueType.INTEGER_CNT:case Se.ValueType.LONG_CNT:return qn.create(Hr(c.type),qn.valueFromBytes(Hr(c.type),c.value),Qe(c.createdAt))}}function Gr(c){return Xn.of(rr.of(Qe(c.createdAt),c.offset),c.relativeOffset)}function Ai(c){return rr.of(Qe(c.createdAt),c.offset)}function So(c){const e=tr.create(c.value);Object.entries(c.attributes).forEach(([n,d])=>{e.setAttr(n,d.value,Qe(d.updatedAt))});const t=mr.create(Ai(c.id),e);return t.remove(Qe(c.removedAt)),t}function Dr(c){return Re.of(Ur(c.parentId),Ur(c.leftSiblingId))}function Ur(c){return Ce.of(Qe(c.createdAt),c.offset)}function No(c){if(!c.length)return;const e=[];return c.forEach(t=>{const n=ki(t.content);e.push(n)}),e}function ki(c){if(c.length===0)return;const e=[];for(const n of c)e.push(Ao(n));const t=e[e.length-1];for(let n=e.length-2;n>=0;n--){let d;for(let k=n+1;k<e.length;k++)if(c[n].depth-1===c[k].depth){d=e[k];break}d.prepend(e[n])}return An.create(t,$e).getRoot()}function Ao(c){const e=Ur(c.id),t=Ge.create(e,c.type);if(t.isText)t.value=c.value;else{const n=cn.create();Object.entries(c.attributes).forEach(([d,k])=>{n.set(d,k.value,Qe(k.updatedAt))}),t.attrs=n}return c.insPrevId&&(t.insPrevID=Ur(c.insPrevId)),c.insNextId&&(t.insNextID=Ur(c.insNextId)),t.removedAt=Qe(c.removedAt),t}function Ii(c){if(c.body.case==="set"){const e=c.body.value;return dr.create(e.key,ui(e.value),Qe(e.parentCreatedAt),Qe(e.executedAt))}else if(c.body.case==="add"){const e=c.body.value;return gr.create(Qe(e.parentCreatedAt),Qe(e.prevCreatedAt),ui(e.value),Qe(e.executedAt))}else if(c.body.case==="move"){const e=c.body.value;return Fn.create(Qe(e.parentCreatedAt),Qe(e.prevCreatedAt),Qe(e.createdAt),Qe(e.executedAt))}else if(c.body.case==="remove"){const e=c.body.value;return Pn.create(Qe(e.parentCreatedAt),Qe(e.createdAt),Qe(e.executedAt))}else if(c.body.case==="edit"){const e=c.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([d,k])=>{t.set(d,Qe(k))});const n=new Map;return Object.entries(e.attributes).forEach(([d,k])=>{n.set(d,k)}),yn.create(Qe(e.parentCreatedAt),Gr(e.from),Gr(e.to),t,e.content,n,Qe(e.executedAt))}else if(c.body.case==="style"){const e=c.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([d,k])=>{t.set(d,Qe(k))});const n=new Map;return Object.entries(e.attributes).forEach(([d,k])=>{n.set(d,k)}),vn.create(Qe(e.parentCreatedAt),Gr(e.from),Gr(e.to),t,n,Qe(e.executedAt))}else{if(c.body.case==="select")return;if(c.body.case==="increase"){const e=c.body.value;return Pr.create(Qe(e.parentCreatedAt),ui(e.value),Qe(e.executedAt))}else if(c.body.case==="treeEdit"){const e=c.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([n,d])=>{t.set(n,Qe(d))}),Er.create(Qe(e.parentCreatedAt),Dr(e.from),Dr(e.to),No(e.contents),e.splitLevel,t,Qe(e.executedAt))}else if(c.body.case==="treeStyle"){const e=c.body.value,t=new Map,n=e.attributesToRemove;return n.length>0?pr.createTreeRemoveStyleOperation(Qe(e.parentCreatedAt),Dr(e.from),Dr(e.to),n,Qe(e.executedAt)):(Object.entries(e.attributes).forEach(([d,k])=>{t.set(d,k)}),pr.create(Qe(e.parentCreatedAt),Dr(e.from),Dr(e.to),t,Qe(e.executedAt)))}else throw new Ie(Ee.Unimplemented,"unimplemented operation")}}function ko(c){const e=[];for(const t of c){const n=Ii(t);n&&e.push(n)}return e}function xi(c){const e=[];for(const t of c)e.push(_r.create({id:Si(t.id),operations:ko(t.operations),presenceChange:t.presenceChange?_o(t.presenceChange):void 0,message:t.message}));return e}function Io(c){return Ir.of(pe.fromString(c.serverSeq,!0),c.clientSeq)}function xo(c){return Kr.create(c.documentKey,Io(c.checkpoint),c.isRemoved,xi(c.changes),c.snapshot,Qe(c.minSyncedTicket))}function Pi(c){const e=new Ut;for(const n of c.nodes){const d=li(n.element);e.set(n.key,d,d.getPositionedAt())}const t=new Dt(Qe(c.createdAt),e);return t.setMovedAt(Qe(c.movedAt)),t.setRemovedAt(Qe(c.removedAt)),t}function Di(c){const e=new er;for(const n of c.nodes)e.insert(li(n.element));const t=new rn(Qe(c.createdAt),e);return t.setMovedAt(Qe(c.movedAt)),t.setRemovedAt(Qe(c.removedAt)),t}function Po(c){const e=Lt.of(Lt.valueFromBytes(Ni(c.type),c.value),Qe(c.createdAt));return e.setMovedAt(Qe(c.movedAt)),e.setRemovedAt(Qe(c.removedAt)),e}function Do(c){const e=new xr;let t=e.getHead();for(const d of c.nodes){const k=e.insertAfter(t,So(d));d.insPrevId&&k.setInsPrev(e.findNode(Ai(d.insPrevId))),t=k}const n=new Xt(e,Qe(c.createdAt));return n.setMovedAt(Qe(c.movedAt)),n.setRemovedAt(Qe(c.removedAt)),n}function Ro(c){const e=qn.create(Hr(c.type),qn.valueFromBytes(Hr(c.type),c.value),Qe(c.createdAt));return e.setMovedAt(Qe(c.movedAt)),e.setRemovedAt(Qe(c.removedAt)),e}function Ri(c){const e=ki(c.nodes);return An.create(e,Qe(c.createdAt))}function li(c){if(c.body.case==="jsonObject")return Pi(c.body.value);if(c.body.case==="jsonArray")return Di(c.body.value);if(c.body.case==="primitive")return Po(c.body.value);if(c.body.case==="text")return Do(c.body.value);if(c.body.case==="counter")return Ro(c.body.value);if(c.body.case==="tree")return Ri(c.body.value);throw new Ie(Ee.Unimplemented,"unimplemented element")}function Co(c){if(!c)return{root:Dt.create($e),presences:new Map};const e=Se.Snapshot.fromBinary(c);return{root:li(e.root),presences:Oo(e.presences)}}function Ci(c){if(!c)throw new Error("bytes is empty");const e=Se.JSONElement.fromBinary(c);return Pi(e.body.value)}function Li(c){return si(c).toBinary()}function Lo(c){if(!c)throw new Error("bytes is empty");const e=Se.JSONElement.fromBinary(c);return Di(e.body.value)}function Mo(c){return _i(c).toBinary()}function Bo(c){if(!c)throw new Error("bytes is empty");const e=Se.JSONElement.fromBinary(c);return Ri(e.body.value)}function jo(c){return Oi(c).toBinary()}function Mi(c){return c?Array.from(c).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function ci(c){return Mi(c)}function Bi(c){return new Uint8Array(c.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function fi(c){return Bi(c)}function Fo(c){const e=Se.ChangeID.fromBinary(c);return Si(e)}function qo(c){const e=Se.Operation.fromBinary(c);return Ii(e)}const on={fromPresence:ai,toChangePack:Eo,fromChangePack:xo,fromChanges:xi,objectToBytes:Li,bytesToObject:Ci,bytesToSnapshot:Co,bytesToHex:Mi,hexToBytes:Bi,toHexString:ci,toUint8Array:fi,toOperation:wi,toChangeID:vi,PbChangeID:Se.ChangeID,bytesToChangeID:Fo,bytesToOperation:qo};class Uo{constructor(e,t,n,d){this.reconnectStreamDelay=e,this.doc=t,this.docID=n,this.syncMode=d,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Un.RealtimeSyncOff?!1:this.syncMode!==Un.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}class Rr{constructor(e,t,n,d){this.id=e,this.delimiter=Ke,this.root=t,this.operations=[],this.previousPresence=ze(n),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=d}static create(e,t,n,d){return new Rr(e,t,n,d)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerElementHasRemovedNodes(e){this.root.registerElementHasRemovedNodes(e)}getChange(){return _r.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const n of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(n):this.reversePresenceKeys.delete(n)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class Jr{constructor(e){this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.removedElementSetByCreatedAt=new Set,this.elementHasRemovedNodesSetByCreatedAt=new Set,this.registerElement(e,void 0)}static create(){return new Jr(Dt.create($e))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const n=[];for(;t.parent;){const d=t.element.getCreatedAt(),k=t.parent.subPathOf(d);k===void 0&&v.fatal(`cant find the given element: ${d.toIDString()}`),n.unshift(k),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return n.unshift("$"),n}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof yt&&e.getDescendants((n,d)=>(this.registerElement(n,d),!1))}deregisterElement(e){let t=0;const n=d=>{const k=d.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(k),this.removedElementSetByCreatedAt.delete(k),t++};return n(e),e instanceof yt&&e.getDescendants(d=>(n(d),!1)),t}registerRemovedElement(e){this.removedElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerElementHasRemovedNodes(e){this.elementHasRemovedNodesSetByCreatedAt.add(e.getCreatedAt().toIDString())}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getRemovedElementSetSize(){return this.removedElementSetByCreatedAt.size}getObject(){return this.rootObject}getGarbageLen(){let e=0;const t=new Set;for(const n of this.removedElementSetByCreatedAt){t.add(n);const d=this.elementPairMapByCreatedAt.get(n);d.element instanceof yt&&d.element.getDescendants(k=>(t.add(k.getCreatedAt().toIDString()),!1))}e+=t.size;for(const n of this.elementHasRemovedNodesSetByCreatedAt){const k=this.elementPairMapByCreatedAt.get(n).element;e+=k.getRemovedNodesLen()}return e}deepcopy(){return new Jr(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const n of this.removedElementSetByCreatedAt){const d=this.elementPairMapByCreatedAt.get(n);d.element.getRemovedAt()&&e.compare(d.element.getRemovedAt())>=0&&(d.parent.purge(d.element),t+=this.deregisterElement(d.element))}for(const n of this.elementHasRemovedNodesSetByCreatedAt){const k=this.elementPairMapByCreatedAt.get(n).element,j=k.purgeRemovedNodesBefore(e);j>0&&this.elementHasRemovedNodesSetByCreatedAt.delete(k.getCreatedAt().toIDString()),t+=j}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function ji(c,e){const t=new $r(c);return new Proxy(e,t.getHandlers())}class $r{constructor(e){this.context=e,this.handlers={set:(t,n,d)=>(v.isEnabled(_.Trivial)&&v.trivial(`obj[${n}]=${JSON.stringify(d)}`),$r.setInternal(e,t,n,d),!0),get:(t,n)=>(v.isEnabled(_.Trivial)&&v.trivial(`obj[${n}]`),n==="getID"?()=>t.getCreatedAt():n==="toJSON"||n==="toString"?()=>t.toJSON():n==="toJS"?()=>t.toJS():n==="toJSForTest"?()=>t.toJSForTest():Or(e,t.get(n))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,n)=>(v.isEnabled(_.Trivial)&&v.trivial(`obj[${n}]`),$r.deleteInternal(e,t,n),!0)}}static setInternal(e,t,n,d){if(n.includes("."))throw new Ie(Ee.InvalidObjectKey,"key must not contain the '.'.");const k=e.issueTimeTicket(),j=ei(e,d,k),K=t.set(n,j,k);e.registerElement(j,t),K&&e.registerRemovedElement(K),e.push(dr.create(n,j.deepcopy(),t.getCreatedAt(),k))}static buildObjectMembers(e,t){const n={};for(const[d,k]of Object.entries(t)){if(d.includes("."))throw new Ie(Ee.InvalidObjectKey,"key must not contain the '.'.");const j=e.issueTimeTicket(),K=ei(e,k,j);n[d]=K}return n}static deleteInternal(e,t,n){const d=e.issueTimeTicket(),k=t.deleteByKey(n,d);!k||(e.push(Pn.create(t.getCreatedAt(),k.getCreatedAt(),d)),e.registerRemovedElement(k))}getHandlers(){return this.handlers}}function Jo(c,e){const t=new Zt(c,e);return new Proxy(e,t.getHandlers())}function $o(c){return typeof c=="string"||c instanceof String?!isNaN(c):!1}function Vo(c){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(c)}class Zt{constructor(e,t){this.context=e,this.array=t,this.handlers={get:(n,d,k)=>d==="getID"?()=>n.getCreatedAt():d==="getElementByID"?j=>{const K=n.getByID(j);if(!(!K||K.isRemoved()))return yr(e,K)}:d==="getElementByIndex"?j=>{const K=n.get(j);return yr(e,K)}:d==="getLast"?()=>yr(e,n.getLast()):d==="deleteByID"?j=>{const K=Zt.deleteInternalByID(e,n,j);return yr(e,K)}:d==="insertAfter"?(j,K)=>{const he=Zt.insertAfterInternal(e,n,j,K);return yr(e,he)}:d==="insertBefore"?(j,K)=>{const he=Zt.insertBeforeInternal(e,n,j,K);return yr(e,he)}:d==="moveBefore"?(j,K)=>{Zt.moveBeforeInternal(e,n,j,K)}:d==="moveAfter"?(j,K)=>{Zt.moveAfterInternal(e,n,j,K)}:d==="moveFront"?j=>{Zt.moveFrontInternal(e,n,j)}:d==="moveLast"?j=>{Zt.moveLastInternal(e,n,j)}:$o(d)?Or(e,n.get(Number(d))):d==="push"?j=>Zt.pushInternal(e,n,j):d==="splice"?(j,K,...he)=>Zt.splice(e,n,j,K,...he):d==="length"?n.length:typeof d=="symbol"&&d===Symbol.iterator?Zt.iteratorInternal.bind(this,e,n):d==="includes"?(j,K)=>Zt.includes(e,n,j,K):d==="indexOf"?(j,K)=>Zt.indexOf(e,n,j,K):d==="lastIndexOf"?(j,K)=>Zt.lastIndexOf(e,n,j,K):d==="toJSForTest"?()=>n.toJSForTest():d==="toTestString"?()=>Zt.toTestString(n):typeof d=="string"&&Vo(d)?(...j)=>{const K=Array.from(n).map(he=>Or(e,he));return Array.prototype[d].apply(K,j)}:Reflect.get(n,d,k),deleteProperty:(n,d)=>(v.isEnabled(_.Trivial)&&v.trivial(`array[${d}]`),Zt.deleteInternalByIndex(e,n,Number.parseInt(d)),!0)}}static*iteratorInternal(e,t){for(const n of t)yield yr(e,n)}static buildArrayElements(e,t){const n=[];for(const d of t){const k=e.issueTimeTicket(),j=ei(e,d,k);n.push(j)}return n}static pushInternal(e,t,n){return Zt.insertAfterInternal(e,t,t.getLastCreatedAt(),n),t.length}static moveBeforeInternal(e,t,n,d){const k=e.issueTimeTicket(),j=t.getPrevCreatedAt(n);t.moveAfter(j,d,k),e.push(Fn.create(t.getCreatedAt(),j,d,k))}static moveAfterInternal(e,t,n,d){const k=e.issueTimeTicket();t.moveAfter(n,d,k),e.push(Fn.create(t.getCreatedAt(),n,d,k))}static moveFrontInternal(e,t,n){const d=e.issueTimeTicket(),k=t.getHead();t.moveAfter(k.getCreatedAt(),n,d),e.push(Fn.create(t.getCreatedAt(),k.getCreatedAt(),n,d))}static moveLastInternal(e,t,n){const d=e.issueTimeTicket(),k=t.getLastCreatedAt();t.moveAfter(k,n,d),e.push(Fn.create(t.getCreatedAt(),k,n,d))}static insertAfterInternal(e,t,n,d){const k=e.issueTimeTicket(),j=ei(e,d,k);return t.insertAfter(n,j),e.registerElement(j,t),e.push(gr.create(t.getCreatedAt(),n,j.deepcopy(),k)),j}static insertBeforeInternal(e,t,n,d){return Zt.insertAfterInternal(e,t,t.getPrevCreatedAt(n),d)}static deleteInternalByIndex(e,t,n){const d=e.issueTimeTicket(),k=t.deleteByIndex(n,d);if(!!k)return e.push(Pn.create(t.getCreatedAt(),k.getCreatedAt(),d)),e.registerRemovedElement(k),k}static deleteInternalByID(e,t,n){const d=e.issueTimeTicket(),k=t.delete(n,d);return e.push(Pn.create(t.getCreatedAt(),k.getCreatedAt(),d)),e.registerRemovedElement(k),k}static splice(e,t,n,d,...k){const j=t.length,K=n>=0?Math.min(n,j):Math.max(j+n,0),he=d===void 0?j:d<0?K:Math.min(K+d,j),ae=[];for(let Ae=K;Ae<he;Ae++){const je=Zt.deleteInternalByIndex(e,t,K);if(je){const ke=je.deepcopy();ke.setRemovedAt(),ae.push(Or(e,ke))}}if(k){let Ae=K===0?t.getHead().getID():t.get(K-1).getID();for(const je of k)Ae=Zt.insertAfterInternal(e,t,Ae,je).getID()}return ae}static includes(e,t,n,d){var k;const j=t.length,K=d===void 0?0:d<0?Math.max(d+j,0):d;if(K>=j)return!1;if(Lt.isSupport(n))return Array.from(t).map(ae=>Or(e,ae)).includes(n,K);for(let he=K;he<j;he++)if(((k=t.get(he))===null||k===void 0?void 0:k.getID())===n.getID())return!0;return!1}static indexOf(e,t,n,d){var k;const j=t.length,K=d===void 0?0:d<0?Math.max(d+j,0):d;if(K>=j)return-1;if(Lt.isSupport(n))return Array.from(t).map(ae=>Or(e,ae)).indexOf(n,K);for(let he=K;he<j;he++)if(((k=t.get(he))===null||k===void 0?void 0:k.getID())===n.getID())return he;return-1}static lastIndexOf(e,t,n,d){var k;const j=t.length,K=d===void 0||d>=j?j-1:d<0?d+j:d;if(K<0)return-1;if(Lt.isSupport(n))return Array.from(t).map(ae=>Or(e,ae)).lastIndexOf(n,K);for(let he=K;he>0;he--)if(((k=t.get(he))===null||k===void 0?void 0:k.getID())===n.getID())return he;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Xr{constructor(e,t){this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,n,d){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}if(e>t){v.fatal("from should be less than or equal to to");return}const k=this.text.indexRangeToPosRange(e,t);v.isEnabled(_.Debug)&&v.debug(`EDIT: f:${e}->${k[0].toTestString()}, t:${t}->${k[1].toTestString()} c:${n}`);const j=d?Nt(d):void 0,K=this.context.issueTimeTicket(),[he,,ae]=this.text.edit(k,n,K,j);return this.context.push(new yn(this.text.getCreatedAt(),k[0],k[1],he,n,j?new Map(Object.entries(j)):new Map,K)),k[0].equals(k[1])||this.context.registerElementHasRemovedNodes(this.text),this.text.findIndexesFromRange(ae)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,n){if(!this.context||!this.text)return v.fatal("it is not initialized yet"),!1;if(e>t)return v.fatal("from should be less than or equal to to"),!1;const d=this.text.indexRangeToPosRange(e,t);v.isEnabled(_.Debug)&&v.debug(`STYL: f:${e}->${d[0].toTestString()}, t:${t}->${d[1].toTestString()} a:${JSON.stringify(n)}`);const k=Nt(n),j=this.context.issueTimeTicket(),[K]=this.text.setStyle(d,k,j);return this.context.push(new vn(this.text.getCreatedAt(),d[0],d[1],K,new Map(Object.entries(k)),j)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([Xn.fromStruct(e[0]),Xn.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(v.fatal("it is not initialized yet"),""):this.text.toString()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text){v.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class Zr{constructor(e,t){this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){v.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),n=Lt.of(e,t);if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`);return this.counter.increase(n),this.context.push(Pr.create(this.counter.getCreatedAt(),n,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function hi(c,e,t){const{type:n}=c,d=t.issueTimeTicket();if(n===Nn){Fi(c);const{value:k}=c,j=Ge.create(Ce.of(d,0),n,k);e.append(j)}else{const{children:k=[]}=c;let{attributes:j}=c,K;if(typeof j=="object"&&!it(j)){j=Nt(j),K=new cn;for(const[ae,Ae]of Object.entries(j))K.set(ae,Ae,d)}const he=Ge.create(Ce.of(d,0),n,void 0,K);e.append(he);for(const ae of k)hi(ae,he,t)}}function zo(c,e){const{type:t}=e,n=c.issueTimeTicket();let d;if(e.type===Nn){const{value:k}=e;d=Ge.create(Ce.of(n,0),t,k)}else if(e){const{children:k=[]}=e;let{attributes:j}=e,K;if(typeof j=="object"&&!it(j)){j=Nt(j),K=new cn;for(const[he,ae]of Object.entries(j))K.set(he,ae,n)}d=Ge.create(Ce.of(c.issueTimeTicket(),0),t,void 0,K);for(const he of k)hi(he,d,c)}return d}function Fi(c){if(!c.value.length)throw new Error("text node cannot have empty value");return!0}function qi(c){if(!c.length)return!0;if(c[0].type===Nn)for(const t of c){const{type:n}=t;if(n!==Nn)throw new Error("element node and text node cannot be passed together");Fi(t)}else for(const t of c){const{type:n}=t;if(n===Nn)throw new Error("element node and text node cannot be passed together")}return!0}class Qr{constructor(e){this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return Ge.create(Ce.of(e.issueTimeTicket(),0),$n);const t=Ge.create(Ce.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const n of this.initialRoot.children)hi(n,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[n,d]=this.tree.pathToPosRange(e),k=this.context.issueTimeTicket(),j=t?Nt(t):void 0;this.tree.style([n,d],j,k),this.context.push(pr.create(this.tree.getCreatedAt(),n,d,j?new Map(Object.entries(j)):new Map,k))}style(e,t,n){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const d=this.tree.findPos(e),k=this.tree.findPos(t),j=this.context.issueTimeTicket(),K=n?Nt(n):void 0;this.tree.style([d,k],K,j),this.context.push(pr.create(this.tree.getCreatedAt(),d,k,K?new Map(Object.entries(K)):new Map,j))}removeStyle(e,t,n){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const d=this.tree.findPos(e),k=this.tree.findPos(t),j=this.context.issueTimeTicket();this.tree.removeStyle([d,k],n,j),this.context.push(pr.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),d,k,n,j))}editInternal(e,t,n,d=0){var k;if(n.length!==0&&n[0]&&(qi(n),n[0].type!==Nn))for(const ae of n){const{children:Ae=[]}=ae;qi(Ae)}const j=this.context.getLastTimeTicket();let K=new Array;if(((k=n[0])===null||k===void 0?void 0:k.type)===Nn){let ae="";for(const Ae of n){const{value:je}=Ae;ae+=je}K.push(Ge.create(Ce.of(this.context.issueTimeTicket(),0),Nn,ae))}else K=n.map(ae=>ae&&zo(this.context,ae)).filter(ae=>ae);const[,he]=this.tree.edit([e,t],K.length?K.map(ae=>ae==null?void 0:ae.deepcopy()):void 0,d,j,()=>this.context.issueTimeTicket());return this.context.push(Er.create(this.tree.getCreatedAt(),e,t,K.length?K:void 0,d,he,j)),e.equals(t)||this.context.registerElementHasRemovedNodes(this.tree),!0}editByPath(e,t,n,d=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const k=this.tree.pathToPos(e),j=this.tree.pathToPos(t);return this.editInternal(k,j,n?[n]:[],d)}editBulkByPath(e,t,n,d=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const k=this.tree.pathToPos(e),j=this.tree.pathToPos(t);return this.editInternal(k,j,n,d)}edit(e,t,n,d=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const k=this.tree.findPos(e),j=this.tree.findPos(t);return this.editInternal(k,j,n?[n]:[],d)}editBulk(e,t,n,d=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const k=this.tree.findPos(e),j=this.tree.findPos(t);return this.editInternal(k,j,n,d)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){v.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],n=this.tree.indexRangeToPosRange(t);return[n[0].toStruct(),n[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){v.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){v.fatal("it is not initialized yet");return}const t=[Re.fromStruct(e[0]),Re.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree){v.fatal("it is not initialized yet");return}const t=[Re.fromStruct(e[0]),Re.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function Ui(c,e){return ji(c,e)}function yr(c,e){if(e){if(e instanceof Lt)return e;if(e instanceof Dt)return ji(c,e);if(e instanceof rn)return Jo(c,e);if(e instanceof Xt)return new Xr(c,e);if(e instanceof qn){const t=new Zr(tn.IntegerCnt,0);return t.initialize(c,e),t}else if(e instanceof An){const t=new Qr;return t.initialize(c,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Or(c,e){const t=yr(c,e);return t instanceof Lt?t.getValue():t}function ei(c,e,t){let n;if(Lt.isSupport(e))n=Lt.of(e,t);else if(Array.isArray(e))n=rn.create(t,Zt.buildArrayElements(c,e));else if(typeof e=="object")e instanceof Xr?(n=Xt.create(xr.create(),t),e.initialize(c,n)):e instanceof Zr?(n=qn.create(e.getValueType(),e.getValue(),t),e.initialize(c,n)):e instanceof Qr?(n=An.create(e.buildRoot(c),t),e.initialize(c,n)):n=Dt.create(t,$r.buildObjectMembers(c,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return n}const Ji=50;class Ko{constructor(){this.undoStack=[],this.redoStack=[]}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Ji&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Ji&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const $i="yorkie-devtools-panel",Vi="yorkie-devtools-sdk";let Cr="disconnected";const zi=new Map,di=new Map;function ti(c,e){!((e==null?void 0:e.force)||Cr!=="disconnected")||window.postMessage({source:Vi,...c},"*")}function Wo(c){if(!c.isEnableDevtools()||zi.has(c.getKey()))return;di.set(c.getKey(),[]);const e=c.subscribe("all",t=>{di.get(c.getKey()).push(t),Cr==="synced"&&ti({msg:"doc::sync::partial",docKey:c.getKey(),event:t})});zi.set(c.getKey(),[e]),ti({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var n;if(((n=t.data)===null||n===void 0?void 0:n.source)!==$i)return;switch(t.data.msg){case"devtools::connect":if(Cr!=="disconnected")break;Cr="connected",ti({msg:"doc::available",docKey:c.getKey()}),v.info(`[YD] Devtools connected. Doc: ${c.getKey()}`);break;case"devtools::disconnect":Cr="disconnected",v.info(`[YD] Devtools disconnected. Doc: ${c.getKey()}`);break;case"devtools::subscribe":Cr="synced",ti({msg:"doc::sync::full",docKey:c.getKey(),events:di.get(c.getKey())}),v.info(`[YD] Devtools subscribed. Doc: ${c.getKey()}`);break}})}var kn;(function(c){c.Detached="detached",c.Attached="attached",c.Removed="removed"})(kn||(kn={}));var ut;(function(c){c.StatusChanged="status-changed",c.Snapshot="snapshot",c.LocalChange="local-change",c.RemoteChange="remote-change",c.Initialized="initialized",c.Watched="watched",c.Unwatched="unwatched",c.PresenceChanged="presence-changed"})(ut||(ut={}));class Ki{constructor(e,t){this.opts=t||{},this.key=e,this.status=kn.Detached,this.root=Jr.create(),this.changeID=ro,this.checkpoint=io,this.localChanges=[],this.eventStream=g(n=>{this.eventStreamObserver=n}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new Ko,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},Wo(this)}update(e,t){if(this.getStatus()===kn.Removed)throw new Ie(Ee.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const n=this.changeID.getActorID(),d=Rr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(n)||{},t);try{const k=Ui(d,this.clone.root.getObject());this.presences.has(n)||this.clone.presences.set(n,{}),this.isUpdating=!0,e(k,new mt(d,this.clone.presences.get(n)))}catch(k){throw this.clone=void 0,v.error(k),k}finally{this.isUpdating=!1}if(d.hasChange()){v.isEnabled(_.Trivial)&&v.trivial(`trying to update a local change: ${this.toJSON()}`);const k=d.getChange(),{opInfos:j,reverseOps:K}=k.execute(this.root,this.presences,st.Local),he=d.getReversePresence();he&&K.push({type:"presence",value:he}),this.localChanges.push(k),K.length>0&&this.internalHistory.pushUndo(K),j.length>0&&this.internalHistory.clearRedo(),this.changeID=k.getID();const ae=[];j.length>0&&ae.push({type:ut.LocalChange,source:st.Local,value:{message:k.getMessage()||"",operations:j,actor:n},rawChange:this.isEnableDevtools()?k.toStruct():void 0}),k.hasPresenceChange()&&ae.push({type:ut.PresenceChanged,source:st.Local,value:{clientID:n,presence:this.getPresence(n)}}),this.publish(ae),v.isEnabled(_.Trivial)&&v.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,n,d){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const K=t;return this.eventStream.subscribe(he=>{for(const ae of he)ae.type!==ut.Initialized&&ae.type!==ut.Watched&&ae.type!==ut.Unwatched&&ae.type!==ut.PresenceChanged||K(ae)},n,d)}if(e==="my-presence"){const K=t;return this.eventStream.subscribe(he=>{for(const ae of he)ae.type!==ut.Initialized&&ae.type!==ut.Watched&&ae.type!==ut.Unwatched&&ae.type!==ut.PresenceChanged||ae.type!==ut.Initialized&&ae.value.clientID!==this.changeID.getActorID()||K(ae)},n,d)}if(e==="others"){const K=t;return this.eventStream.subscribe(he=>{for(const ae of he)ae.type!==ut.Watched&&ae.type!==ut.Unwatched&&ae.type!==ut.PresenceChanged||ae.value.clientID!==this.changeID.getActorID()&&K(ae)},n,d)}if(e==="all"){const K=t;return this.eventStream.subscribe(K,n,d)}const k=e,j=t;return this.eventStream.subscribe(K=>{for(const he of K){if(he.type!==ut.Snapshot&&he.type!==ut.LocalChange&&he.type!==ut.RemoteChange)continue;if(he.type===ut.Snapshot){k==="$"&&j(he);continue}const ae=[];for(const Ae of he.value.operations)this.isSameElementOrChildOf(Ae.path,k)&&ae.push(Ae);ae.length&&j({...he,value:{...he.value,operations:ae}})}},n,d)}if(typeof e=="function"){const k=e,j=t,K=n;return this.eventStream.subscribe(he=>{for(const ae of he)ae.type!==ut.Snapshot&&ae.type!==ut.LocalChange&&ae.type!==ut.RemoteChange||k(ae)},j,K)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const n=e.split(".");return t.split(".").every((k,j)=>k===n[j])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),st.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus(kn.Removed),v.isEnabled(_.Trivial)&&v.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:ze(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Kr.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Rr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Ui(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t){const{root:n,presences:d}=on.bytesToSnapshot(t);this.root=new Jr(n),this.presences=d,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:ut.Snapshot,source:st.Remote,value:{snapshot:this.isEnableDevtools()?on.bytesToHex(t):void 0,serverSeq:e.toString()}}])}applyChanges(e,t){v.isEnabled(_.Debug)&&v.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getRemovedElementSetSize()}`),v.isEnabled(_.Trivial)&&v.trivial(e.map(n=>`${n.getID().toTestString()}	${n.toTestString()}`).join(`
`));for(const n of e)this.applyChange(n,t);v.isEnabled(_.Debug)&&v.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getRemovedElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const n=[],d=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(d)){const j=e.getPresenceChange();switch(j.type){case At.Put:n.push(this.presences.has(d)?{type:ut.PresenceChanged,source:t,value:{clientID:d,presence:j.presence}}:{type:ut.Watched,source:st.Remote,value:{clientID:d,presence:j.presence}});break;case At.Clear:n.push({type:ut.Unwatched,source:st.Remote,value:{clientID:d,presence:this.getPresence(d)}}),this.removeOnlineClient(d);break}}const{opInfos:k}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),k.length>0){const j=this.isEnableDevtools()?e.toStruct():void 0;n.push(t===st.Remote?{type:ut.RemoteChange,source:t,value:{actor:d,message:e.getMessage()||"",operations:k},rawChange:j}:{type:ut.LocalChange,source:t,value:{actor:d,message:e.getMessage()||"",operations:k},rawChange:j})}n.length>0&&this.publish(n)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,n=new Set;for(const d of t)n.add(d);this.setOnlineClients(n),this.publish([{type:ut.Initialized,source:st.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:n}=e.body.value,d=[];if(t===Se.DocEventType.DOCUMENT_WATCHED)this.addOnlineClient(n),this.hasPresence(n)&&d.push({type:ut.Watched,source:st.Remote,value:{clientID:n,presence:this.getPresence(n)}});else if(t===Se.DocEventType.DOCUMENT_UNWATCHED){const k=this.getPresence(n);this.removeOnlineClient(n),k&&d.push({type:ut.Unwatched,source:st.Remote,value:{clientID:n,presence:k}})}d.length>0&&this.publish(d)}}applyStatus(e){this.status=e,e===kn.Detached&&this.setActor(qt),this.publish([{source:e===kn.Removed?st.Remote:st.Local,type:ut.StatusChanged,value:e===kn.Attached?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type===ut.StatusChanged){this.applyStatus(e.value.status),e.value.status===kn.Attached&&this.setActor(e.value.actorID);return}if(e.type===ut.Snapshot){const{snapshot:t,serverSeq:n}=e.value;if(!t)return;this.applySnapshot(pe.fromString(n),on.hexToBytes(t));return}if(e.type===ut.LocalChange||e.type===ut.RemoteChange){if(!e.rawChange)return;const t=_r.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type===ut.Initialized){const t=new Set;for(const{clientID:n,presence:d}of e.value)t.add(n),this.presences.set(n,d);this.setOnlineClients(t);return}if(e.type===ut.Watched){const{clientID:t,presence:n}=e.value;this.addOnlineClient(t),this.presences.set(t,n);return}if(e.type===ut.Unwatched){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type===ut.PresenceChanged){const{clientID:t,presence:n}=e.value;this.presences.set(t,n)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new Ie(Ee.InvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let n=this.getRoot();for(const d of t)if(n=n[d],n===void 0)return;return n}setOnlineClients(e){this.onlineClients=e}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!==kn.Attached)return{};const e=this.presences.get(this.changeID.getActorID());return e?ze(e):{}}getPresence(e){if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?ze(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?ze(t):void 0}getPresences(){const e=[];for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:ze(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,n)=>t.clientID>n.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=Rr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const ae of e){if(!(ae instanceof xt)){new mt(t,ze(this.clone.presences.get(this.changeID.getActorID()))).set(ae.value,{addToHistory:!0});continue}const Ae=t.issueTimeTicket();ae.setExecutedAt(Ae),t.push(ae)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,st.UndoRedo);const{opInfos:d,reverseOps:k}=n.execute(this.root,this.presences,st.UndoRedo),j=t.getReversePresence();if(j&&k.push({type:"presence",value:j}),k.length>0&&this.internalHistory.pushRedo(k),!n.hasPresenceChange()&&d.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const K=this.changeID.getActorID(),he=[];d.length>0&&he.push({type:ut.LocalChange,source:st.UndoRedo,value:{message:n.getMessage()||"",operations:d,actor:K},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&he.push({type:ut.PresenceChanged,source:st.UndoRedo,value:{clientID:K,presence:this.getPresence(K)}}),this.publish(he)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=Rr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const ae of e){if(!(ae instanceof xt)){new mt(t,ze(this.clone.presences.get(this.changeID.getActorID()))).set(ae.value,{addToHistory:!0});continue}const Ae=t.issueTimeTicket();ae.setExecutedAt(Ae),t.push(ae)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,st.UndoRedo);const{opInfos:d,reverseOps:k}=n.execute(this.root,this.presences,st.UndoRedo),j=t.getReversePresence();if(j&&k.push({type:"presence",value:j}),k.length>0&&this.internalHistory.pushUndo(k),!n.hasPresenceChange()&&d.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const K=this.changeID.getActorID(),he=[];d.length>0&&he.push({type:ut.LocalChange,source:st.UndoRedo,value:{message:n.getMessage()||"",operations:d,actor:K},rawChange:this.isEnableDevtools()?n.toStruct():void 0}),n.hasPresenceChange()&&he.push({type:ut.PresenceChanged,source:st.UndoRedo,value:{clientID:K,presence:this.getPresence(K)}}),this.publish(he)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function Yo(c,e){return t=>async n=>(c&&n.header.set("x-api-key",c),e&&n.header.set("authorization",e),await t(n))}const Wi=JSON.parse('{"u2":"yorkie-js-sdk","i8":"0.4.18"}');function Ho(){return c=>async e=>(e.header.set("x-yorkie-user-agent",Wi.u2+"/"+Wi.i8),await c(e))}var Un;(function(c){c.Manual="manual",c.Realtime="realtime",c.RealtimePushOnly="realtime-pushonly",c.RealtimeSyncOff="realtime-syncoff"})(Un||(Un={}));var vr;(function(c){c.Deactivated="deactivated",c.Activated="activated"})(vr||(vr={}));var Lr;(function(c){c.Connected="connected",c.Disconnected="disconnected"})(Lr||(Lr={}));var Mr;(function(c){c.Synced="synced",c.SyncFailed="sync-failed"})(Mr||(Mr={}));var Wn;(function(c){c.StatusChanged="status-changed",c.DocumentChanged="document-changed",c.StreamConnectionStatusChanged="stream-connection-status-changed",c.DocumentSynced="document-synced"})(Wn||(Wn={}));const ni={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class Yi{constructor(e,t){t=t||ni,this.key=t.key?t.key:r(),this.status=vr.Deactivated,this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.syncLoopDuration=t.syncLoopDuration||ni.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||ni.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||ni.retrySyncLoopDelay,this.rpcClient=L(an.V,Yt({baseUrl:e,interceptors:[Yo(t.apiKey,t.token),Ho()]})),this.eventStream=g(n=>{this.eventStreamObserver=n})}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status=vr.Activated,this.runSyncLoop(),this.eventStreamObserver.next({type:Wn.StatusChanged,value:this.status}),v.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw v.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){if(this.status===vr.Deactivated)return Promise.resolve();for(const[e]of this.attachmentMap)this.detachInternal(e);return this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.status=vr.Deactivated,this.eventStreamObserver.next({type:Wn.StatusChanged,value:this.status}),v.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw v.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,t={}){var n;if(!this.isActive())throw new Ie(Ee.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==kn.Detached)throw new Ie(Ee.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((k,j)=>j.set(t.initialPresence||{}));const d=(n=t.syncMode)!==null&&n!==void 0?n:Un.Realtime;return this.rpcClient.attachDocument({clientId:this.id,changePack:on.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async k=>{const j=on.fromChangePack(k.changePack);return e.applyChangePack(j),e.getStatus()===kn.Removed||(e.applyStatus(kn.Attached),this.attachmentMap.set(e.getKey(),new Uo(this.reconnectStreamDelay,e,k.documentId,d)),d!==Un.Manual&&await this.runWatchLoop(e.getKey()),v.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(k=>{throw v.error(`[AD] c:"${this.getKey()}" err :`,k),k})}detach(e,t={}){var n;if(!this.isActive())throw new Ie(Ee.ClientNotActive,`${this.key} is not active`);const d=this.attachmentMap.get(e.getKey());if(!d)throw new Ie(Ee.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((k,j)=>j.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:d.docID,changePack:on.toChangePack(e.createChangePack()),removeIfNotAttached:(n=t.removeIfNotAttached)!==null&&n!==void 0?n:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(k=>{const j=on.fromChangePack(k.changePack);return e.applyChangePack(j),e.getStatus()!==kn.Removed&&e.applyStatus(kn.Detached),this.detachInternal(e.getKey()),v.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(k=>{throw v.error(`[DD] c:"${this.getKey()}" err :`,k),k})}async changeSyncMode(e,t){if(!this.isActive())throw new Ie(Ee.ClientNotActive,`${this.key} is not active`);const n=this.attachmentMap.get(e.getKey());if(!n)throw new Ie(Ee.DocumentNotAttached,`${e.getKey()} is not attached`);const d=n.syncMode;return d===t?e:(n.changeSyncMode(t),t===Un.Manual?(n.cancelWatchStream(),e):(t===Un.Realtime&&(n.remoteChangeEventReceived=!0),d===Un.Manual&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new Ie(Ee.ClientNotActive,`${this.key} is not active`);const t=[];if(e){const n=this.attachmentMap.get(e.getKey());if(!n)throw new Ie(Ee.DocumentNotAttached,`${e.getKey()} is not attached`);t.push(this.syncInternal(n,Un.Realtime))}else this.attachmentMap.forEach(n=>{t.push(this.syncInternal(n,n.syncMode))});return Promise.all(t).catch(n=>{throw this.eventStreamObserver.next({type:Wn.DocumentSynced,value:Mr.SyncFailed}),n})}remove(e){if(!this.isActive())throw new Ie(Ee.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Ie(Ee.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const n=on.toChangePack(e.createChangePack());return n.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:n},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(d=>{const k=on.fromChangePack(d.changePack);e.applyChangePack(k),this.detachInternal(e.getKey()),v.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(d=>{throw v.error(`[RD] c:"${this.getKey()}" err :`,d),d})}subscribe(e,t,n){return this.eventStream.subscribe(e,t,n)}getID(){return this.id}getKey(){return this.key}isActive(){return this.status===vr.Activated}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){v.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const t=[];for(const[,n]of this.attachmentMap)n.needRealtimeSync()&&(n.remoteChangeEventReceived=!1,t.push(this.syncInternal(n,n.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(n=>{v.error(`[SL] c:"${this.getKey()}" sync failed:`,n),this.eventStreamObserver.next({type:Wn.DocumentSynced,value:Mr.SyncFailed}),setTimeout(e,this.retrySyncLoopDelay)})};v.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new Ie(Ee.DocumentNotAttached,`${e} is not attached`);return t.runWatchLoop(n=>{if(!this.isActive())return Promise.reject(new Ie(Ee.ClientNotActive,`${this.key} is not active`));const d=new AbortController,k=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:d.signal});return this.eventStreamObserver.next({type:Wn.StreamConnectionStatusChanged,value:Lr.Connected}),v.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((j,K)=>{(async()=>{try{for await(const ae of k)this.handleWatchDocumentsResponse(t,ae),ae.body.case==="initialization"&&j([k,d])}catch(ae){this.eventStreamObserver.next({type:Wn.StreamConnectionStatusChanged,value:Lr.Disconnected}),v.debug(`[WD] c:"${this.getKey()}" unwatches`),n(),K(ae)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Se.DocEventType.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0,this.eventStreamObserver.next({type:Wn.DocumentChanged,value:[e.doc.getKey()]});return}e.doc.applyWatchStream(t)}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),v.debug(`[WD] c:"${this.getKey()}" unwatches`),this.eventStreamObserver.next({type:Wn.StreamConnectionStatusChanged,value:Lr.Disconnected}),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:n,docID:d}=e,k=n.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:d,changePack:on.toChangePack(k),pushOnly:t===Un.RealtimePushOnly},{headers:{"x-shard-key":`${this.apiKey}/${n.getKey()}`}}).then(j=>{const K=on.fromChangePack(j.changePack);if(K.hasChanges()&&e.syncMode===Un.RealtimePushOnly)return n;n.applyChangePack(K),this.eventStreamObserver.next({type:Wn.DocumentSynced,value:Mr.Synced}),n.getStatus()===kn.Removed&&this.detachInternal(n.getKey());const he=n.getKey(),ae=K.getChangeSize();return v.info(`[PP] c:"${this.getKey()}" sync d:"${he}", push:${k.getChangeSize()} pull:${ae} cp:${K.getCheckpoint().toTestString()}`),n}).catch(j=>{throw v.error(`[PP] c:"${this.getKey()}" err :`,j),j})}}const Go={Client:Yi,Document:Ki,Primitive:Lt,Text:Xr,Counter:Zr,Tree:Qr,IntType:tn.IntegerCnt,LongType:tn.LongCnt}})(),F})())})(Tn);const pi=mi(Tn.exports);var to={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(Ye,ye){(function(M,D){Ye.exports=D()})(typeof self<"u"?self:eo,function(){return function(H){var M={};function D(F){if(M[F])return M[F].exports;var C=M[F]={i:F,l:!1,exports:{}};return H[F].call(C.exports,C,C.exports,D),C.l=!0,C.exports}return D.m=H,D.c=M,D.d=function(F,C,_){D.o(F,C)||Object.defineProperty(F,C,{configurable:!1,enumerable:!0,get:_})},D.n=function(F){var C=F&&F.__esModule?function(){return F.default}:function(){return F};return D.d(C,"a",C),C},D.o=function(F,C){return Object.prototype.hasOwnProperty.call(F,C)},D.p="",D(D.s=109)}([function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(17),C=D(18),_=D(19),w=D(45),y=D(46),v=D(47),r=D(48),l=D(49),i=D(12),g=D(32),b=D(33),h=D(31),u=D(1),o={Scope:u.Scope,create:u.create,find:u.find,query:u.query,register:u.register,Container:F.default,Format:C.default,Leaf:_.default,Embed:r.default,Scroll:w.default,Block:v.default,Inline:y.default,Text:l.default,Attributor:{Attribute:i.default,Class:g.default,Style:b.default,Store:h.default}};M.default=o},function(H,M,D){var F=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var a in o)o.hasOwnProperty(a)&&(u[a]=o[a])};return function(u,o){h(u,o);function a(){this.constructor=u}u.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=function(h){F(u,h);function u(o){var a=this;return o="[Parchment] "+o,a=h.call(this,o)||this,a.message=o,a.name=a.constructor.name,a}return u}(Error);M.ParchmentError=C;var _={},w={},y={},v={};M.DATA_KEY="__blot";var r;(function(h){h[h.TYPE=3]="TYPE",h[h.LEVEL=12]="LEVEL",h[h.ATTRIBUTE=13]="ATTRIBUTE",h[h.BLOT=14]="BLOT",h[h.INLINE=7]="INLINE",h[h.BLOCK=11]="BLOCK",h[h.BLOCK_BLOT=10]="BLOCK_BLOT",h[h.INLINE_BLOT=6]="INLINE_BLOT",h[h.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",h[h.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",h[h.ANY=15]="ANY"})(r=M.Scope||(M.Scope={}));function l(h,u){var o=g(h);if(o==null)throw new C("Unable to create "+h+" blot");var a=o,s=h instanceof Node||h.nodeType===Node.TEXT_NODE?h:a.create(u);return new a(s,u)}M.create=l;function i(h,u){return u===void 0&&(u=!1),h==null?null:h[M.DATA_KEY]!=null?h[M.DATA_KEY].blot:u?i(h.parentNode,u):null}M.find=i;function g(h,u){u===void 0&&(u=r.ANY);var o;if(typeof h=="string")o=v[h]||_[h];else if(h instanceof Text||h.nodeType===Node.TEXT_NODE)o=v.text;else if(typeof h=="number")h&r.LEVEL&r.BLOCK?o=v.block:h&r.LEVEL&r.INLINE&&(o=v.inline);else if(h instanceof HTMLElement){var a=(h.getAttribute("class")||"").split(/\s+/);for(var s in a)if(o=w[a[s]],o)break;o=o||y[h.tagName]}return o==null?null:u&r.LEVEL&o.scope&&u&r.TYPE&o.scope?o:null}M.query=g;function b(){for(var h=[],u=0;u<arguments.length;u++)h[u]=arguments[u];if(h.length>1)return h.map(function(s){return b(s)});var o=h[0];if(typeof o.blotName!="string"&&typeof o.attrName!="string")throw new C("Invalid definition");if(o.blotName==="abstract")throw new C("Cannot register abstract class");if(v[o.blotName||o.attrName]=o,typeof o.keyName=="string")_[o.keyName]=o;else if(o.className!=null&&(w[o.className]=o),o.tagName!=null){Array.isArray(o.tagName)?o.tagName=o.tagName.map(function(s){return s.toUpperCase()}):o.tagName=o.tagName.toUpperCase();var a=Array.isArray(o.tagName)?o.tagName:[o.tagName];a.forEach(function(s){(y[s]==null||o.className==null)&&(y[s]=o)})}return o}M.register=b},function(H,M,D){var F=D(51),C=D(11),_=D(3),w=D(20),y=String.fromCharCode(0),v=function(r){Array.isArray(r)?this.ops=r:r!=null&&Array.isArray(r.ops)?this.ops=r.ops:this.ops=[]};v.prototype.insert=function(r,l){var i={};return r.length===0?this:(i.insert=r,l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(i.attributes=l),this.push(i))},v.prototype.delete=function(r){return r<=0?this:this.push({delete:r})},v.prototype.retain=function(r,l){if(r<=0)return this;var i={retain:r};return l!=null&&typeof l=="object"&&Object.keys(l).length>0&&(i.attributes=l),this.push(i)},v.prototype.push=function(r){var l=this.ops.length,i=this.ops[l-1];if(r=_(!0,{},r),typeof i=="object"){if(typeof r.delete=="number"&&typeof i.delete=="number")return this.ops[l-1]={delete:i.delete+r.delete},this;if(typeof i.delete=="number"&&r.insert!=null&&(l-=1,i=this.ops[l-1],typeof i!="object"))return this.ops.unshift(r),this;if(C(r.attributes,i.attributes)){if(typeof r.insert=="string"&&typeof i.insert=="string")return this.ops[l-1]={insert:i.insert+r.insert},typeof r.attributes=="object"&&(this.ops[l-1].attributes=r.attributes),this;if(typeof r.retain=="number"&&typeof i.retain=="number")return this.ops[l-1]={retain:i.retain+r.retain},typeof r.attributes=="object"&&(this.ops[l-1].attributes=r.attributes),this}}return l===this.ops.length?this.ops.push(r):this.ops.splice(l,0,r),this},v.prototype.chop=function(){var r=this.ops[this.ops.length-1];return r&&r.retain&&!r.attributes&&this.ops.pop(),this},v.prototype.filter=function(r){return this.ops.filter(r)},v.prototype.forEach=function(r){this.ops.forEach(r)},v.prototype.map=function(r){return this.ops.map(r)},v.prototype.partition=function(r){var l=[],i=[];return this.forEach(function(g){var b=r(g)?l:i;b.push(g)}),[l,i]},v.prototype.reduce=function(r,l){return this.ops.reduce(r,l)},v.prototype.changeLength=function(){return this.reduce(function(r,l){return l.insert?r+w.length(l):l.delete?r-l.delete:r},0)},v.prototype.length=function(){return this.reduce(function(r,l){return r+w.length(l)},0)},v.prototype.slice=function(r,l){r=r||0,typeof l!="number"&&(l=1/0);for(var i=[],g=w.iterator(this.ops),b=0;b<l&&g.hasNext();){var h;b<r?h=g.next(r-b):(h=g.next(l-b),i.push(h)),b+=w.length(h)}return new v(i)},v.prototype.compose=function(r){var l=w.iterator(this.ops),i=w.iterator(r.ops),g=[],b=i.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var h=b.retain;l.peekType()==="insert"&&l.peekLength()<=h;)h-=l.peekLength(),g.push(l.next());b.retain-h>0&&i.next(b.retain-h)}for(var u=new v(g);l.hasNext()||i.hasNext();)if(i.peekType()==="insert")u.push(i.next());else if(l.peekType()==="delete")u.push(l.next());else{var o=Math.min(l.peekLength(),i.peekLength()),a=l.next(o),s=i.next(o);if(typeof s.retain=="number"){var m={};typeof a.retain=="number"?m.retain=o:m.insert=a.insert;var p=w.attributes.compose(a.attributes,s.attributes,typeof a.retain=="number");if(p&&(m.attributes=p),u.push(m),!i.hasNext()&&C(u.ops[u.ops.length-1],m)){var O=new v(l.rest());return u.concat(O).chop()}}else typeof s.delete=="number"&&typeof a.retain=="number"&&u.push(s)}return u.chop()},v.prototype.concat=function(r){var l=new v(this.ops.slice());return r.ops.length>0&&(l.push(r.ops[0]),l.ops=l.ops.concat(r.ops.slice(1))),l},v.prototype.diff=function(r,l){if(this.ops===r.ops)return new v;var i=[this,r].map(function(o){return o.map(function(a){if(a.insert!=null)return typeof a.insert=="string"?a.insert:y;var s=o===r?"on":"with";throw new Error("diff() called "+s+" non-document")}).join("")}),g=new v,b=F(i[0],i[1],l),h=w.iterator(this.ops),u=w.iterator(r.ops);return b.forEach(function(o){for(var a=o[1].length;a>0;){var s=0;switch(o[0]){case F.INSERT:s=Math.min(u.peekLength(),a),g.push(u.next(s));break;case F.DELETE:s=Math.min(a,h.peekLength()),h.next(s),g.delete(s);break;case F.EQUAL:s=Math.min(h.peekLength(),u.peekLength(),a);var m=h.next(s),p=u.next(s);C(m.insert,p.insert)?g.retain(s,w.attributes.diff(m.attributes,p.attributes)):g.push(p).delete(s);break}a-=s}}),g.chop()},v.prototype.eachLine=function(r,l){l=l||`
`;for(var i=w.iterator(this.ops),g=new v,b=0;i.hasNext();){if(i.peekType()!=="insert")return;var h=i.peek(),u=w.length(h)-i.peekLength(),o=typeof h.insert=="string"?h.insert.indexOf(l,u)-u:-1;if(o<0)g.push(i.next());else if(o>0)g.push(i.next(o));else{if(r(g,i.next(1).attributes||{},b)===!1)return;b+=1,g=new v}}g.length()>0&&r(g,{},b)},v.prototype.transform=function(r,l){if(l=!!l,typeof r=="number")return this.transformPosition(r,l);for(var i=w.iterator(this.ops),g=w.iterator(r.ops),b=new v;i.hasNext()||g.hasNext();)if(i.peekType()==="insert"&&(l||g.peekType()!=="insert"))b.retain(w.length(i.next()));else if(g.peekType()==="insert")b.push(g.next());else{var h=Math.min(i.peekLength(),g.peekLength()),u=i.next(h),o=g.next(h);if(u.delete)continue;o.delete?b.push(o):b.retain(h,w.attributes.transform(u.attributes,o.attributes,l))}return b.chop()},v.prototype.transformPosition=function(r,l){l=!!l;for(var i=w.iterator(this.ops),g=0;i.hasNext()&&g<=r;){var b=i.peekLength(),h=i.peekType();if(i.next(),h==="delete"){r-=Math.min(b,r-g);continue}else h==="insert"&&(g<r||!l)&&(r+=b);g+=b}return r},H.exports=v},function(H,M){var D=Object.prototype.hasOwnProperty,F=Object.prototype.toString,C=Object.defineProperty,_=Object.getOwnPropertyDescriptor,w=function(i){return typeof Array.isArray=="function"?Array.isArray(i):F.call(i)==="[object Array]"},y=function(i){if(!i||F.call(i)!=="[object Object]")return!1;var g=D.call(i,"constructor"),b=i.constructor&&i.constructor.prototype&&D.call(i.constructor.prototype,"isPrototypeOf");if(i.constructor&&!g&&!b)return!1;var h;for(h in i);return typeof h>"u"||D.call(i,h)},v=function(i,g){C&&g.name==="__proto__"?C(i,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):i[g.name]=g.newValue},r=function(i,g){if(g==="__proto__")if(D.call(i,g)){if(_)return _(i,g).value}else return;return i[g]};H.exports=function l(){var i,g,b,h,u,o,a=arguments[0],s=1,m=arguments.length,p=!1;for(typeof a=="boolean"&&(p=a,a=arguments[1]||{},s=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});s<m;++s)if(i=arguments[s],i!=null)for(g in i)b=r(a,g),h=r(i,g),a!==h&&(p&&h&&(y(h)||(u=w(h)))?(u?(u=!1,o=b&&w(b)?b:[]):o=b&&y(b)?b:{},v(a,{name:g,newValue:l(p,o,h)})):typeof h<"u"&&v(a,{name:g,newValue:h}));return a}},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BlockEmbed=M.bubbleFormats=void 0;var F=function(){function S(P,x){for(var R=0;R<x.length;R++){var L=x[R];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,L.key,L)}}return function(P,x,R){return x&&S(P.prototype,x),R&&S(P,R),P}}(),C=function S(P,x,R){P===null&&(P=Function.prototype);var L=Object.getOwnPropertyDescriptor(P,x);if(L===void 0){var J=Object.getPrototypeOf(P);return J===null?void 0:S(J,x,R)}else{if("value"in L)return L.value;var z=L.get;return z===void 0?void 0:z.call(R)}},_=D(3),w=a(_),y=D(2),v=a(y),r=D(0),l=a(r),i=D(16),g=a(i),b=D(6),h=a(b),u=D(7),o=a(u);function a(S){return S&&S.__esModule?S:{default:S}}function s(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")}function m(S,P){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:S}function p(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(S,P):S.__proto__=P)}var O=1,N=function(S){p(P,S);function P(){return s(this,P),m(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return F(P,[{key:"attach",value:function(){C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"attach",this).call(this),this.attributes=new l.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new v.default().insert(this.value(),(0,w.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(R,L){var J=l.default.query(R,l.default.Scope.BLOCK_ATTRIBUTE);J!=null&&this.attributes.attribute(J,L)}},{key:"formatAt",value:function(R,L,J,z){this.format(J,z)}},{key:"insertAt",value:function(R,L,J){if(typeof L=="string"&&L.endsWith(`
`)){var z=l.default.create(I.blotName);this.parent.insertBefore(z,R===0?this:this.next),z.insertAt(0,L.slice(0,-1))}else C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,R,L,J)}}]),P}(l.default.Embed);N.scope=l.default.Scope.BLOCK_BLOT;var I=function(S){p(P,S);function P(x){s(this,P);var R=m(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,x));return R.cache={},R}return F(P,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(l.default.Leaf).reduce(function(R,L){return L.length()===0?R:R.insert(L.value(),A(L))},new v.default).insert(`
`,A(this))),this.cache.delta}},{key:"deleteAt",value:function(R,L){C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"deleteAt",this).call(this,R,L),this.cache={}}},{key:"formatAt",value:function(R,L,J,z){L<=0||(l.default.query(J,l.default.Scope.BLOCK)?R+L===this.length()&&this.format(J,z):C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"formatAt",this).call(this,R,Math.min(L,this.length()-R-1),J,z),this.cache={})}},{key:"insertAt",value:function(R,L,J){if(J!=null)return C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,R,L,J);if(L.length!==0){var z=L.split(`
`),te=z.shift();te.length>0&&(R<this.length()-1||this.children.tail==null?C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,Math.min(R,this.length()-1),te):this.children.tail.insertAt(this.children.tail.length(),te),this.cache={});var Z=this;z.reduce(function(q,B){return Z=Z.split(q,!0),Z.insertAt(0,B),B.length},R+te.length)}}},{key:"insertBefore",value:function(R,L){var J=this.children.head;C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,R,L),J instanceof g.default&&J.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"length",this).call(this)+O),this.cache.length}},{key:"moveChildren",value:function(R,L){C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"moveChildren",this).call(this,R,L),this.cache={}}},{key:"optimize",value:function(R){C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,R),this.cache={}}},{key:"path",value:function(R){return C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"path",this).call(this,R,!0)}},{key:"removeChild",value:function(R){C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"removeChild",this).call(this,R),this.cache={}}},{key:"split",value:function(R){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(L&&(R===0||R>=this.length()-O)){var J=this.clone();return R===0?(this.parent.insertBefore(J,this),this):(this.parent.insertBefore(J,this.next),J)}else{var z=C(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"split",this).call(this,R,L);return this.cache={},z}}}]),P}(l.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[h.default,l.default.Embed,o.default];function A(S){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return S==null||(typeof S.formats=="function"&&(P=(0,w.default)(P,S.formats())),S.parent==null||S.parent.blotName=="scroll"||S.parent.statics.scope!==S.statics.scope)?P:A(S.parent,P)}M.bubbleFormats=A,M.BlockEmbed=N,M.default=I},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.overload=M.expandConfig=void 0;var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},C=function(){function Z(q,B){var $=[],U=!0,re=!1,ee=void 0;try{for(var V=q[Symbol.iterator](),X;!(U=(X=V.next()).done)&&($.push(X.value),!(B&&$.length===B));U=!0);}catch(ie){re=!0,ee=ie}finally{try{!U&&V.return&&V.return()}finally{if(re)throw ee}}return $}return function(q,B){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return Z(q,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function Z(q,B){for(var $=0;$<B.length;$++){var U=B[$];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}return function(q,B,$){return B&&Z(q.prototype,B),$&&Z(q,$),q}}();D(50);var w=D(2),y=A(w),v=D(14),r=A(v),l=D(8),i=A(l),g=D(9),b=A(g),h=D(0),u=A(h),o=D(15),a=A(o),s=D(3),m=A(s),p=D(10),O=A(p),N=D(34),I=A(N);function A(Z){return Z&&Z.__esModule?Z:{default:Z}}function S(Z,q,B){return q in Z?Object.defineProperty(Z,q,{value:B,enumerable:!0,configurable:!0,writable:!0}):Z[q]=B,Z}function P(Z,q){if(!(Z instanceof q))throw new TypeError("Cannot call a class as a function")}var x=(0,O.default)("quill"),R=function(){_(Z,null,[{key:"debug",value:function(B){B===!0&&(B="log"),O.default.level(B)}},{key:"find",value:function(B){return B.__quill||u.default.find(B)}},{key:"import",value:function(B){return this.imports[B]==null&&x.error("Cannot import "+B+". Are you sure it was registered?"),this.imports[B]}},{key:"register",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof B!="string"){var ee=B.attrName||B.blotName;typeof ee=="string"?this.register("formats/"+ee,B,$):Object.keys(B).forEach(function(V){U.register(V,B[V],$)})}else this.imports[B]!=null&&!re&&x.warn("Overwriting "+B+" with",$),this.imports[B]=$,(B.startsWith("blots/")||B.startsWith("formats/"))&&$.blotName!=="abstract"?u.default.register($):B.startsWith("modules")&&typeof $.register=="function"&&$.register()}}]);function Z(q){var B=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(this,Z),this.options=L(q,$),this.container=this.options.container,this.container==null)return x.error("Invalid Quill container",q);this.options.debug&&Z.debug(this.options.debug);var U=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new i.default,this.scroll=u.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new r.default(this.scroll),this.selection=new a.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(i.default.events.EDITOR_CHANGE,function(ee){ee===i.default.events.TEXT_CHANGE&&B.root.classList.toggle("ql-blank",B.editor.isBlank())}),this.emitter.on(i.default.events.SCROLL_UPDATE,function(ee,V){var X=B.selection.lastRange,ie=X&&X.length===0?X.index:void 0;J.call(B,function(){return B.editor.update(null,V,ie)},ee)});var re=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+U+"<p><br></p></div>");this.setContents(re),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return _(Z,[{key:"addContainer",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof B=="string"){var U=B;B=document.createElement("div"),B.classList.add(U)}return this.container.insertBefore(B,$),B}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(B,$,U){var re=this,ee=z(B,$,U),V=C(ee,4);return B=V[0],$=V[1],U=V[3],J.call(this,function(){return re.editor.deleteText(B,$)},U,B,-1*$)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(B),this.container.classList.toggle("ql-disabled",!B)}},{key:"focus",value:function(){var B=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=B,this.scrollIntoView()}},{key:"format",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.default.sources.API;return J.call(this,function(){var ee=U.getSelection(!0),V=new y.default;if(ee==null)return V;if(u.default.query(B,u.default.Scope.BLOCK))V=U.editor.formatLine(ee.index,ee.length,S({},B,$));else{if(ee.length===0)return U.selection.format(B,$),V;V=U.editor.formatText(ee.index,ee.length,S({},B,$))}return U.setSelection(ee,i.default.sources.SILENT),V},re)}},{key:"formatLine",value:function(B,$,U,re,ee){var V=this,X=void 0,ie=z(B,$,U,re,ee),le=C(ie,4);return B=le[0],$=le[1],X=le[2],ee=le[3],J.call(this,function(){return V.editor.formatLine(B,$,X)},ee,B,0)}},{key:"formatText",value:function(B,$,U,re,ee){var V=this,X=void 0,ie=z(B,$,U,re,ee),le=C(ie,4);return B=le[0],$=le[1],X=le[2],ee=le[3],J.call(this,function(){return V.editor.formatText(B,$,X)},ee,B,0)}},{key:"getBounds",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=void 0;typeof B=="number"?U=this.selection.getBounds(B,$):U=this.selection.getBounds(B.index,B.length);var re=this.container.getBoundingClientRect();return{bottom:U.bottom-re.top,height:U.height,left:U.left-re.left,right:U.right-re.left,top:U.top-re.top,width:U.width}}},{key:"getContents",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,U=z(B,$),re=C(U,2);return B=re[0],$=re[1],this.editor.getContents(B,$)}},{key:"getFormat",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof B=="number"?this.editor.getFormat(B,$):this.editor.getFormat(B.index,B.length)}},{key:"getIndex",value:function(B){return B.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(B){return this.scroll.leaf(B)}},{key:"getLine",value:function(B){return this.scroll.line(B)}},{key:"getLines",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof B!="number"?this.scroll.lines(B.index,B.length):this.scroll.lines(B,$)}},{key:"getModule",value:function(B){return this.theme.modules[B]}},{key:"getSelection",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return B&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,U=z(B,$),re=C(U,2);return B=re[0],$=re[1],this.editor.getText(B,$)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(B,$,U){var re=this,ee=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Z.sources.API;return J.call(this,function(){return re.editor.insertEmbed(B,$,U)},ee,B)}},{key:"insertText",value:function(B,$,U,re,ee){var V=this,X=void 0,ie=z(B,0,U,re,ee),le=C(ie,4);return B=le[0],X=le[2],ee=le[3],J.call(this,function(){return V.editor.insertText(B,$,X)},ee,B,$.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(B,$,U){this.clipboard.dangerouslyPasteHTML(B,$,U)}},{key:"removeFormat",value:function(B,$,U){var re=this,ee=z(B,$,U),V=C(ee,4);return B=V[0],$=V[1],U=V[3],J.call(this,function(){return re.editor.removeFormat(B,$)},U,B)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(B){var $=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.default.sources.API;return J.call(this,function(){B=new y.default(B);var re=$.getLength(),ee=$.editor.deleteText(0,re),V=$.editor.applyDelta(B),X=V.ops[V.ops.length-1];X!=null&&typeof X.insert=="string"&&X.insert[X.insert.length-1]===`
`&&($.editor.deleteText($.getLength()-1,1),V.delete(1));var ie=ee.compose(V);return ie},U)}},{key:"setSelection",value:function(B,$,U){if(B==null)this.selection.setRange(null,$||Z.sources.API);else{var re=z(B,$,U),ee=C(re,4);B=ee[0],$=ee[1],U=ee[3],this.selection.setRange(new o.Range(B,$),U),U!==i.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.default.sources.API,U=new y.default().insert(B);return this.setContents(U,$)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i.default.sources.USER,$=this.scroll.update(B);return this.selection.update(B),$}},{key:"updateContents",value:function(B){var $=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.default.sources.API;return J.call(this,function(){return B=new y.default(B),$.editor.applyDelta(B,U)},U,!0)}}]),Z}();R.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},R.events=i.default.events,R.sources=i.default.sources,R.version="1.3.7",R.imports={delta:y.default,parchment:u.default,"core/module":b.default,"core/theme":I.default};function L(Z,q){if(q=(0,m.default)(!0,{container:Z,modules:{clipboard:!0,keyboard:!0,history:!0}},q),!q.theme||q.theme===R.DEFAULTS.theme)q.theme=I.default;else if(q.theme=R.import("themes/"+q.theme),q.theme==null)throw new Error("Invalid theme "+q.theme+". Did you register it?");var B=(0,m.default)(!0,{},q.theme.DEFAULTS);[B,q].forEach(function(re){re.modules=re.modules||{},Object.keys(re.modules).forEach(function(ee){re.modules[ee]===!0&&(re.modules[ee]={})})});var $=Object.keys(B.modules).concat(Object.keys(q.modules)),U=$.reduce(function(re,ee){var V=R.import("modules/"+ee);return V==null?x.error("Cannot load "+ee+" module. Are you sure you registered it?"):re[ee]=V.DEFAULTS||{},re},{});return q.modules!=null&&q.modules.toolbar&&q.modules.toolbar.constructor!==Object&&(q.modules.toolbar={container:q.modules.toolbar}),q=(0,m.default)(!0,{},R.DEFAULTS,{modules:U},B,q),["bounds","container","scrollingContainer"].forEach(function(re){typeof q[re]=="string"&&(q[re]=document.querySelector(q[re]))}),q.modules=Object.keys(q.modules).reduce(function(re,ee){return q.modules[ee]&&(re[ee]=q.modules[ee]),re},{}),q}function J(Z,q,B,$){if(this.options.strict&&!this.isEnabled()&&q===i.default.sources.USER)return new y.default;var U=B==null?null:this.getSelection(),re=this.editor.delta,ee=Z();if(U!=null&&(B===!0&&(B=U.index),$==null?U=te(U,ee,q):$!==0&&(U=te(U,B,$,q)),this.setSelection(U,i.default.sources.SILENT)),ee.length()>0){var V,X=[i.default.events.TEXT_CHANGE,ee,re,q];if((V=this.emitter).emit.apply(V,[i.default.events.EDITOR_CHANGE].concat(X)),q!==i.default.sources.SILENT){var ie;(ie=this.emitter).emit.apply(ie,X)}}return ee}function z(Z,q,B,$,U){var re={};return typeof Z.index=="number"&&typeof Z.length=="number"?typeof q!="number"?(U=$,$=B,B=q,q=Z.length,Z=Z.index):(q=Z.length,Z=Z.index):typeof q!="number"&&(U=$,$=B,B=q,q=0),(typeof B>"u"?"undefined":F(B))==="object"?(re=B,U=$):typeof B=="string"&&($!=null?re[B]=$:U=B),U=U||i.default.sources.API,[Z,q,re,U]}function te(Z,q,B,$){if(Z==null)return null;var U=void 0,re=void 0;if(q instanceof y.default){var ee=[Z.index,Z.index+Z.length].map(function(le){return q.transformPosition(le,$!==i.default.sources.USER)}),V=C(ee,2);U=V[0],re=V[1]}else{var X=[Z.index,Z.index+Z.length].map(function(le){return le<q||le===q&&$===i.default.sources.USER?le:B>=0?le+B:Math.max(q,le+B)}),ie=C(X,2);U=ie[0],re=ie[1]}return new o.Range(U,re-U)}M.expandConfig=L,M.overload=z,M.default=R},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function h(u,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(u,s.key,s)}}return function(u,o,a){return o&&h(u.prototype,o),a&&h(u,a),u}}(),C=function h(u,o,a){u===null&&(u=Function.prototype);var s=Object.getOwnPropertyDescriptor(u,o);if(s===void 0){var m=Object.getPrototypeOf(u);return m===null?void 0:h(m,o,a)}else{if("value"in s)return s.value;var p=s.get;return p===void 0?void 0:p.call(a)}},_=D(7),w=r(_),y=D(0),v=r(y);function r(h){return h&&h.__esModule?h:{default:h}}function l(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}function i(h,u){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:h}function g(h,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);h.prototype=Object.create(u&&u.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(h,u):h.__proto__=u)}var b=function(h){g(u,h);function u(){return l(this,u),i(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return F(u,[{key:"formatAt",value:function(a,s,m,p){if(u.compare(this.statics.blotName,m)<0&&v.default.query(m,v.default.Scope.BLOT)){var O=this.isolate(a,s);p&&O.wrap(m,p)}else C(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"formatAt",this).call(this,a,s,m,p)}},{key:"optimize",value:function(a){if(C(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"optimize",this).call(this,a),this.parent instanceof u&&u.compare(this.statics.blotName,this.parent.statics.blotName)>0){var s=this.parent.isolate(this.offset(),this.length());this.moveChildren(s),s.wrap(this)}}}],[{key:"compare",value:function(a,s){var m=u.order.indexOf(a),p=u.order.indexOf(s);return m>=0||p>=0?m-p:a===s?0:a<s?-1:1}}]),u}(v.default.Inline);b.allowedChildren=[b,v.default.Embed,w.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],M.default=b},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(0),C=_(F);function _(l){return l&&l.__esModule?l:{default:l}}function w(l,i){if(!(l instanceof i))throw new TypeError("Cannot call a class as a function")}function y(l,i){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:l}function v(l,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);l.prototype=Object.create(i&&i.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(l,i):l.__proto__=i)}var r=function(l){v(i,l);function i(){return w(this,i),y(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return i}(C.default.Text);M.default=r},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function o(a,s){for(var m=0;m<s.length;m++){var p=s[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(a,p.key,p)}}return function(a,s,m){return s&&o(a.prototype,s),m&&o(a,m),a}}(),C=function o(a,s,m){a===null&&(a=Function.prototype);var p=Object.getOwnPropertyDescriptor(a,s);if(p===void 0){var O=Object.getPrototypeOf(a);return O===null?void 0:o(O,s,m)}else{if("value"in p)return p.value;var N=p.get;return N===void 0?void 0:N.call(m)}},_=D(54),w=r(_),y=D(10),v=r(y);function r(o){return o&&o.__esModule?o:{default:o}}function l(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}function i(o,a){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:o}function g(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);o.prototype=Object.create(a&&a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(o,a):o.__proto__=a)}var b=(0,v.default)("quill:events"),h=["selectionchange","mousedown","mouseup","click"];h.forEach(function(o){document.addEventListener(o,function(){for(var a=arguments.length,s=Array(a),m=0;m<a;m++)s[m]=arguments[m];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(p){if(p.__quill&&p.__quill.emitter){var O;(O=p.__quill.emitter).handleDOM.apply(O,s)}})})});var u=function(o){g(a,o);function a(){l(this,a);var s=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return s.listeners={},s.on("error",b.error),s}return F(a,[{key:"emit",value:function(){b.log.apply(b,arguments),C(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(m){for(var p=arguments.length,O=Array(p>1?p-1:0),N=1;N<p;N++)O[N-1]=arguments[N];(this.listeners[m.type]||[]).forEach(function(I){var A=I.node,S=I.handler;(m.target===A||A.contains(m.target))&&S.apply(void 0,[m].concat(O))})}},{key:"listenDOM",value:function(m,p,O){this.listeners[m]||(this.listeners[m]=[]),this.listeners[m].push({node:p,handler:O})}}]),a}(w.default);u.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},u.sources={API:"api",SILENT:"silent",USER:"user"},M.default=u},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});function F(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}var C=function _(w){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F(this,_),this.quill=w,this.options=y};C.DEFAULTS={},M.default=C},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=["error","warn","log","info"],C="warn";function _(y){if(F.indexOf(y)<=F.indexOf(C)){for(var v,r=arguments.length,l=Array(r>1?r-1:0),i=1;i<r;i++)l[i-1]=arguments[i];(v=console)[y].apply(v,l)}}function w(y){return F.reduce(function(v,r){return v[r]=_.bind(console,r,y),v},{})}_.level=w.level=function(y){C=y},M.default=w},function(H,M,D){var F=Array.prototype.slice,C=D(52),_=D(53),w=H.exports=function(l,i,g){return g||(g={}),l===i?!0:l instanceof Date&&i instanceof Date?l.getTime()===i.getTime():!l||!i||typeof l!="object"&&typeof i!="object"?g.strict?l===i:l==i:r(l,i,g)};function y(l){return l==null}function v(l){return!(!l||typeof l!="object"||typeof l.length!="number"||typeof l.copy!="function"||typeof l.slice!="function"||l.length>0&&typeof l[0]!="number")}function r(l,i,g){var b,h;if(y(l)||y(i)||l.prototype!==i.prototype)return!1;if(_(l))return _(i)?(l=F.call(l),i=F.call(i),w(l,i,g)):!1;if(v(l)){if(!v(i)||l.length!==i.length)return!1;for(b=0;b<l.length;b++)if(l[b]!==i[b])return!1;return!0}try{var u=C(l),o=C(i)}catch{return!1}if(u.length!=o.length)return!1;for(u.sort(),o.sort(),b=u.length-1;b>=0;b--)if(u[b]!=o[b])return!1;for(b=u.length-1;b>=0;b--)if(h=u[b],!w(l[h],i[h],g))return!1;return typeof l==typeof i}},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(1),C=function(){function _(w,y,v){v===void 0&&(v={}),this.attrName=w,this.keyName=y;var r=F.Scope.TYPE&F.Scope.ATTRIBUTE;v.scope!=null?this.scope=v.scope&F.Scope.LEVEL|r:this.scope=F.Scope.ATTRIBUTE,v.whitelist!=null&&(this.whitelist=v.whitelist)}return _.keys=function(w){return[].map.call(w.attributes,function(y){return y.name})},_.prototype.add=function(w,y){return this.canAdd(w,y)?(w.setAttribute(this.keyName,y),!0):!1},_.prototype.canAdd=function(w,y){var v=F.query(w,F.Scope.BLOT&(this.scope|F.Scope.TYPE));return v==null?!1:this.whitelist==null?!0:typeof y=="string"?this.whitelist.indexOf(y.replace(/["']/g,""))>-1:this.whitelist.indexOf(y)>-1},_.prototype.remove=function(w){w.removeAttribute(this.keyName)},_.prototype.value=function(w){var y=w.getAttribute(this.keyName);return this.canAdd(w,y)&&y?y:""},_}();M.default=C},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.Code=void 0;var F=function(){function N(I,A){var S=[],P=!0,x=!1,R=void 0;try{for(var L=I[Symbol.iterator](),J;!(P=(J=L.next()).done)&&(S.push(J.value),!(A&&S.length===A));P=!0);}catch(z){x=!0,R=z}finally{try{!P&&L.return&&L.return()}finally{if(x)throw R}}return S}return function(I,A){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return N(I,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function(){function N(I,A){for(var S=0;S<A.length;S++){var P=A[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(I,P.key,P)}}return function(I,A,S){return A&&N(I.prototype,A),S&&N(I,S),I}}(),_=function N(I,A,S){I===null&&(I=Function.prototype);var P=Object.getOwnPropertyDescriptor(I,A);if(P===void 0){var x=Object.getPrototypeOf(I);return x===null?void 0:N(x,A,S)}else{if("value"in P)return P.value;var R=P.get;return R===void 0?void 0:R.call(S)}},w=D(2),y=o(w),v=D(0),r=o(v),l=D(4),i=o(l),g=D(6),b=o(g),h=D(7),u=o(h);function o(N){return N&&N.__esModule?N:{default:N}}function a(N,I){if(!(N instanceof I))throw new TypeError("Cannot call a class as a function")}function s(N,I){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:N}function m(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);N.prototype=Object.create(I&&I.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(N,I):N.__proto__=I)}var p=function(N){m(I,N);function I(){return a(this,I),s(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I}(b.default);p.blotName="code",p.tagName="CODE";var O=function(N){m(I,N);function I(){return a(this,I),s(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return C(I,[{key:"delta",value:function(){var S=this,P=this.domNode.textContent;return P.endsWith(`
`)&&(P=P.slice(0,-1)),P.split(`
`).reduce(function(x,R){return x.insert(R).insert(`
`,S.formats())},new y.default)}},{key:"format",value:function(S,P){if(!(S===this.statics.blotName&&P)){var x=this.descendant(u.default,this.length()-1),R=F(x,1),L=R[0];L!=null&&L.deleteAt(L.length()-1,1),_(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,S,P)}}},{key:"formatAt",value:function(S,P,x,R){if(P!==0&&!(r.default.query(x,r.default.Scope.BLOCK)==null||x===this.statics.blotName&&R===this.statics.formats(this.domNode))){var L=this.newlineIndex(S);if(!(L<0||L>=S+P)){var J=this.newlineIndex(S,!0)+1,z=L-J+1,te=this.isolate(J,z),Z=te.next;te.format(x,R),Z instanceof I&&Z.formatAt(0,S-J+P-z,x,R)}}}},{key:"insertAt",value:function(S,P,x){if(x==null){var R=this.descendant(u.default,S),L=F(R,2),J=L[0],z=L[1];J.insertAt(z,P)}}},{key:"length",value:function(){var S=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?S:S+1}},{key:"newlineIndex",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(P)return this.domNode.textContent.slice(0,S).lastIndexOf(`
`);var x=this.domNode.textContent.slice(S).indexOf(`
`);return x>-1?S+x:-1}},{key:"optimize",value:function(S){this.domNode.textContent.endsWith(`
`)||this.appendChild(r.default.create("text",`
`)),_(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,S);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===P.statics.formats(P.domNode)&&(P.optimize(S),P.moveChildren(this),P.remove())}},{key:"replace",value:function(S){_(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,S),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(P){var x=r.default.find(P);x==null?P.parentNode.removeChild(P):x instanceof r.default.Embed?x.remove():x.unwrap()})}}],[{key:"create",value:function(S){var P=_(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,S);return P.setAttribute("spellcheck",!1),P}},{key:"formats",value:function(){return!0}}]),I}(i.default);O.blotName="code-block",O.tagName="PRE",O.TAB="  ",M.Code=p,M.default=O},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},C=function(){function Z(q,B){var $=[],U=!0,re=!1,ee=void 0;try{for(var V=q[Symbol.iterator](),X;!(U=(X=V.next()).done)&&($.push(X.value),!(B&&$.length===B));U=!0);}catch(ie){re=!0,ee=ie}finally{try{!U&&V.return&&V.return()}finally{if(re)throw ee}}return $}return function(q,B){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return Z(q,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function Z(q,B){for(var $=0;$<B.length;$++){var U=B[$];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}return function(q,B,$){return B&&Z(q.prototype,B),$&&Z(q,$),q}}(),w=D(2),y=P(w),v=D(20),r=P(v),l=D(0),i=P(l),g=D(13),b=P(g),h=D(24),u=P(h),o=D(4),a=P(o),s=D(16),m=P(s),p=D(21),O=P(p),N=D(11),I=P(N),A=D(3),S=P(A);function P(Z){return Z&&Z.__esModule?Z:{default:Z}}function x(Z,q,B){return q in Z?Object.defineProperty(Z,q,{value:B,enumerable:!0,configurable:!0,writable:!0}):Z[q]=B,Z}function R(Z,q){if(!(Z instanceof q))throw new TypeError("Cannot call a class as a function")}var L=/^[ -~]*$/,J=function(){function Z(q){R(this,Z),this.scroll=q,this.delta=this.getDelta()}return _(Z,[{key:"applyDelta",value:function(B){var $=this,U=!1;this.scroll.update();var re=this.scroll.length();return this.scroll.batchStart(),B=te(B),B.reduce(function(ee,V){var X=V.retain||V.delete||V.insert.length||1,ie=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var le=V.insert;le.endsWith(`
`)&&U&&(U=!1,le=le.slice(0,-1)),ee>=re&&!le.endsWith(`
`)&&(U=!0),$.scroll.insertAt(ee,le);var ve=$.scroll.line(ee),_e=C(ve,2),Ne=_e[0],Le=_e[1],Me=(0,S.default)({},(0,o.bubbleFormats)(Ne));if(Ne instanceof a.default){var Q=Ne.descendant(i.default.Leaf,Le),ce=C(Q,1),ue=ce[0];Me=(0,S.default)(Me,(0,o.bubbleFormats)(ue))}ie=r.default.attributes.diff(Me,ie)||{}}else if(F(V.insert)==="object"){var G=Object.keys(V.insert)[0];if(G==null)return ee;$.scroll.insertAt(ee,G,V.insert[G])}re+=X}return Object.keys(ie).forEach(function(se){$.scroll.formatAt(ee,X,se,ie[se])}),ee+X},0),B.reduce(function(ee,V){return typeof V.delete=="number"?($.scroll.deleteAt(ee,V.delete),ee):ee+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(B)}},{key:"deleteText",value:function(B,$){return this.scroll.deleteAt(B,$),this.update(new y.default().retain(B).delete($))}},{key:"formatLine",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(re).forEach(function(ee){if(!(U.scroll.whitelist!=null&&!U.scroll.whitelist[ee])){var V=U.scroll.lines(B,Math.max($,1)),X=$;V.forEach(function(ie){var le=ie.length();if(!(ie instanceof b.default))ie.format(ee,re[ee]);else{var ve=B-ie.offset(U.scroll),_e=ie.newlineIndex(ve+X)-ve+1;ie.formatAt(ve,_e,ee,re[ee])}X-=le})}}),this.scroll.optimize(),this.update(new y.default().retain(B).retain($,(0,O.default)(re)))}},{key:"formatText",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(re).forEach(function(ee){U.scroll.formatAt(B,$,ee,re[ee])}),this.update(new y.default().retain(B).retain($,(0,O.default)(re)))}},{key:"getContents",value:function(B,$){return this.delta.slice(B,B+$)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(B,$){return B.concat($.delta())},new y.default)}},{key:"getFormat",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=[],re=[];$===0?this.scroll.path(B).forEach(function(V){var X=C(V,1),ie=X[0];ie instanceof a.default?U.push(ie):ie instanceof i.default.Leaf&&re.push(ie)}):(U=this.scroll.lines(B,$),re=this.scroll.descendants(i.default.Leaf,B,$));var ee=[U,re].map(function(V){if(V.length===0)return{};for(var X=(0,o.bubbleFormats)(V.shift());Object.keys(X).length>0;){var ie=V.shift();if(ie==null)return X;X=z((0,o.bubbleFormats)(ie),X)}return X});return S.default.apply(S.default,ee)}},{key:"getText",value:function(B,$){return this.getContents(B,$).filter(function(U){return typeof U.insert=="string"}).map(function(U){return U.insert}).join("")}},{key:"insertEmbed",value:function(B,$,U){return this.scroll.insertAt(B,$,U),this.update(new y.default().retain(B).insert(x({},$,U)))}},{key:"insertText",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $=$.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(B,$),Object.keys(re).forEach(function(ee){U.scroll.formatAt(B,$.length,ee,re[ee])}),this.update(new y.default().retain(B).insert($,(0,O.default)(re)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var B=this.scroll.children.head;return B.statics.blotName!==a.default.blotName||B.children.length>1?!1:B.children.head instanceof m.default}},{key:"removeFormat",value:function(B,$){var U=this.getText(B,$),re=this.scroll.line(B+$),ee=C(re,2),V=ee[0],X=ee[1],ie=0,le=new y.default;V!=null&&(V instanceof b.default?ie=V.newlineIndex(X)-X+1:ie=V.length()-X,le=V.delta().slice(X,X+ie-1).insert(`
`));var ve=this.getContents(B,$+ie),_e=ve.diff(new y.default().insert(U).concat(le)),Ne=new y.default().retain(B).concat(_e);return this.applyDelta(Ne)}},{key:"update",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,re=this.delta;if($.length===1&&$[0].type==="characterData"&&$[0].target.data.match(L)&&i.default.find($[0].target)){var ee=i.default.find($[0].target),V=(0,o.bubbleFormats)(ee),X=ee.offset(this.scroll),ie=$[0].oldValue.replace(u.default.CONTENTS,""),le=new y.default().insert(ie),ve=new y.default().insert(ee.value()),_e=new y.default().retain(X).concat(le.diff(ve,U));B=_e.reduce(function(Ne,Le){return Le.insert?Ne.insert(Le.insert,V):Ne.push(Le)},new y.default),this.delta=re.compose(B)}else this.delta=this.getDelta(),(!B||!(0,I.default)(re.compose(B),this.delta))&&(B=re.diff(this.delta,U));return B}}]),Z}();function z(Z,q){return Object.keys(q).reduce(function(B,$){return Z[$]==null||(q[$]===Z[$]?B[$]=q[$]:Array.isArray(q[$])?q[$].indexOf(Z[$])<0&&(B[$]=q[$].concat([Z[$]])):B[$]=[q[$],Z[$]]),B},{})}function te(Z){return Z.reduce(function(q,B){if(B.insert===1){var $=(0,O.default)(B.attributes);return delete $.image,q.insert({image:B.attributes.image},$)}if(B.attributes!=null&&(B.attributes.list===!0||B.attributes.bullet===!0)&&(B=(0,O.default)(B),B.attributes.list?B.attributes.list="ordered":(B.attributes.list="bullet",delete B.attributes.bullet)),typeof B.insert=="string"){var U=B.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return q.insert(U,B.attributes)}return q.push(B)},new y.default)}M.default=J},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.Range=void 0;var F=function(){function N(I,A){var S=[],P=!0,x=!1,R=void 0;try{for(var L=I[Symbol.iterator](),J;!(P=(J=L.next()).done)&&(S.push(J.value),!(A&&S.length===A));P=!0);}catch(z){x=!0,R=z}finally{try{!P&&L.return&&L.return()}finally{if(x)throw R}}return S}return function(I,A){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return N(I,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function(){function N(I,A){for(var S=0;S<A.length;S++){var P=A[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(I,P.key,P)}}return function(I,A,S){return A&&N(I.prototype,A),S&&N(I,S),I}}(),_=D(0),w=u(_),y=D(21),v=u(y),r=D(11),l=u(r),i=D(8),g=u(i),b=D(10),h=u(b);function u(N){return N&&N.__esModule?N:{default:N}}function o(N){if(Array.isArray(N)){for(var I=0,A=Array(N.length);I<N.length;I++)A[I]=N[I];return A}else return Array.from(N)}function a(N,I){if(!(N instanceof I))throw new TypeError("Cannot call a class as a function")}var s=(0,h.default)("quill:selection"),m=function N(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;a(this,N),this.index=I,this.length=A},p=function(){function N(I,A){var S=this;a(this,N),this.emitter=A,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=w.default.create("cursor",this),this.lastRange=this.savedRange=new m(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){S.mouseDown||setTimeout(S.update.bind(S,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(P,x){P===g.default.events.TEXT_CHANGE&&x.length()>0&&S.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(!!S.hasFocus()){var P=S.getNativeRange();P!=null&&P.start.node!==S.cursor.textNode&&S.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{S.setNativeRange(P.start.node,P.start.offset,P.end.node,P.end.offset)}catch{}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(P,x){if(x.range){var R=x.range,L=R.startNode,J=R.startOffset,z=R.endNode,te=R.endOffset;S.setNativeRange(L,J,z,te)}}),this.update(g.default.sources.SILENT)}return C(N,[{key:"handleComposition",value:function(){var A=this;this.root.addEventListener("compositionstart",function(){A.composing=!0}),this.root.addEventListener("compositionend",function(){if(A.composing=!1,A.cursor.parent){var S=A.cursor.restore();if(!S)return;setTimeout(function(){A.setNativeRange(S.startNode,S.startOffset,S.endNode,S.endOffset)},1)}})}},{key:"handleDragging",value:function(){var A=this;this.emitter.listenDOM("mousedown",document.body,function(){A.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){A.mouseDown=!1,A.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(A,S){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[A])){this.scroll.update();var P=this.getNativeRange();if(!(P==null||!P.native.collapsed||w.default.query(A,w.default.Scope.BLOCK))){if(P.start.node!==this.cursor.textNode){var x=w.default.find(P.start.node,!1);if(x==null)return;if(x instanceof w.default.Leaf){var R=x.split(P.start.offset);x.parent.insertBefore(this.cursor,R)}else x.insertBefore(this.cursor,P.start.node);this.cursor.attach()}this.cursor.format(A,S),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(A){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=this.scroll.length();A=Math.min(A,P-1),S=Math.min(A+S,P-1)-A;var x=void 0,R=this.scroll.leaf(A),L=F(R,2),J=L[0],z=L[1];if(J==null)return null;var te=J.position(z,!0),Z=F(te,2);x=Z[0],z=Z[1];var q=document.createRange();if(S>0){q.setStart(x,z);var B=this.scroll.leaf(A+S),$=F(B,2);if(J=$[0],z=$[1],J==null)return null;var U=J.position(z,!0),re=F(U,2);return x=re[0],z=re[1],q.setEnd(x,z),q.getBoundingClientRect()}else{var ee="left",V=void 0;return x instanceof Text?(z<x.data.length?(q.setStart(x,z),q.setEnd(x,z+1)):(q.setStart(x,z-1),q.setEnd(x,z),ee="right"),V=q.getBoundingClientRect()):(V=J.domNode.getBoundingClientRect(),z>0&&(ee="right")),{bottom:V.top+V.height,height:V.height,left:V[ee],right:V[ee],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var A=document.getSelection();if(A==null||A.rangeCount<=0)return null;var S=A.getRangeAt(0);if(S==null)return null;var P=this.normalizeNative(S);return s.info("getNativeRange",P),P}},{key:"getRange",value:function(){var A=this.getNativeRange();if(A==null)return[null,null];var S=this.normalizedToRange(A);return[S,A]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(A){var S=this,P=[[A.start.node,A.start.offset]];A.native.collapsed||P.push([A.end.node,A.end.offset]);var x=P.map(function(J){var z=F(J,2),te=z[0],Z=z[1],q=w.default.find(te,!0),B=q.offset(S.scroll);return Z===0?B:q instanceof w.default.Container?B+q.length():B+q.index(te,Z)}),R=Math.min(Math.max.apply(Math,o(x)),this.scroll.length()-1),L=Math.min.apply(Math,[R].concat(o(x)));return new m(L,R-L)}},{key:"normalizeNative",value:function(A){if(!O(this.root,A.startContainer)||!A.collapsed&&!O(this.root,A.endContainer))return null;var S={start:{node:A.startContainer,offset:A.startOffset},end:{node:A.endContainer,offset:A.endOffset},native:A};return[S.start,S.end].forEach(function(P){for(var x=P.node,R=P.offset;!(x instanceof Text)&&x.childNodes.length>0;)if(x.childNodes.length>R)x=x.childNodes[R],R=0;else if(x.childNodes.length===R)x=x.lastChild,R=x instanceof Text?x.data.length:x.childNodes.length+1;else break;P.node=x,P.offset=R}),S}},{key:"rangeToNative",value:function(A){var S=this,P=A.collapsed?[A.index]:[A.index,A.index+A.length],x=[],R=this.scroll.length();return P.forEach(function(L,J){L=Math.min(R-1,L);var z=void 0,te=S.scroll.leaf(L),Z=F(te,2),q=Z[0],B=Z[1],$=q.position(B,J!==0),U=F($,2);z=U[0],B=U[1],x.push(z,B)}),x.length<2&&(x=x.concat(x)),x}},{key:"scrollIntoView",value:function(A){var S=this.lastRange;if(S!=null){var P=this.getBounds(S.index,S.length);if(P!=null){var x=this.scroll.length()-1,R=this.scroll.line(Math.min(S.index,x)),L=F(R,1),J=L[0],z=J;if(S.length>0){var te=this.scroll.line(Math.min(S.index+S.length,x)),Z=F(te,1);z=Z[0]}if(!(J==null||z==null)){var q=A.getBoundingClientRect();P.top<q.top?A.scrollTop-=q.top-P.top:P.bottom>q.bottom&&(A.scrollTop+=P.bottom-q.bottom)}}}}},{key:"setNativeRange",value:function(A,S){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S,R=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s.info("setNativeRange",A,S,P,x),!(A!=null&&(this.root.parentNode==null||A.parentNode==null||P.parentNode==null))){var L=document.getSelection();if(L!=null)if(A!=null){this.hasFocus()||this.root.focus();var J=(this.getNativeRange()||{}).native;if(J==null||R||A!==J.startContainer||S!==J.startOffset||P!==J.endContainer||x!==J.endOffset){A.tagName=="BR"&&(S=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode),P.tagName=="BR"&&(x=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode);var z=document.createRange();z.setStart(A,S),z.setEnd(P,x),L.removeAllRanges(),L.addRange(z)}}else L.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(A){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof S=="string"&&(P=S,S=!1),s.info("setRange",A),A!=null){var x=this.rangeToNative(A);this.setNativeRange.apply(this,o(x).concat([S]))}else this.setNativeRange(null);this.update(P)}},{key:"update",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,S=this.lastRange,P=this.getRange(),x=F(P,2),R=x[0],L=x[1];if(this.lastRange=R,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,l.default)(S,this.lastRange)){var J;!this.composing&&L!=null&&L.native.collapsed&&L.start.node!==this.cursor.textNode&&this.cursor.restore();var z=[g.default.events.SELECTION_CHANGE,(0,v.default)(this.lastRange),(0,v.default)(S),A];if((J=this.emitter).emit.apply(J,[g.default.events.EDITOR_CHANGE].concat(z)),A!==g.default.sources.SILENT){var te;(te=this.emitter).emit.apply(te,z)}}}}]),N}();function O(N,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),N.contains(I)}M.Range=m,M.default=p},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function g(b,h){for(var u=0;u<h.length;u++){var o=h[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(b,o.key,o)}}return function(b,h,u){return h&&g(b.prototype,h),u&&g(b,u),b}}(),C=function g(b,h,u){b===null&&(b=Function.prototype);var o=Object.getOwnPropertyDescriptor(b,h);if(o===void 0){var a=Object.getPrototypeOf(b);return a===null?void 0:g(a,h,u)}else{if("value"in o)return o.value;var s=o.get;return s===void 0?void 0:s.call(u)}},_=D(0),w=y(_);function y(g){return g&&g.__esModule?g:{default:g}}function v(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function r(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function l(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var i=function(g){l(b,g);function b(){return v(this,b),r(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return F(b,[{key:"insertInto",value:function(u,o){u.children.length===0?C(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,u,o):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b}(w.default.Embed);i.blotName="break",i.tagName="BR",M.default=i},function(H,M,D){var F=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,i){l.__proto__=i}||function(l,i){for(var g in i)i.hasOwnProperty(g)&&(l[g]=i[g])};return function(l,i){r(l,i);function g(){this.constructor=l}l.prototype=i===null?Object.create(i):(g.prototype=i.prototype,new g)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(44),_=D(30),w=D(1),y=function(r){F(l,r);function l(i){var g=r.call(this,i)||this;return g.build(),g}return l.prototype.appendChild=function(i){this.insertBefore(i)},l.prototype.attach=function(){r.prototype.attach.call(this),this.children.forEach(function(i){i.attach()})},l.prototype.build=function(){var i=this;this.children=new C.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(g){try{var b=v(g);i.insertBefore(b,i.children.head||void 0)}catch(h){if(h instanceof w.ParchmentError)return;throw h}})},l.prototype.deleteAt=function(i,g){if(i===0&&g===this.length())return this.remove();this.children.forEachAt(i,g,function(b,h,u){b.deleteAt(h,u)})},l.prototype.descendant=function(i,g){var b=this.children.find(g),h=b[0],u=b[1];return i.blotName==null&&i(h)||i.blotName!=null&&h instanceof i?[h,u]:h instanceof l?h.descendant(i,u):[null,-1]},l.prototype.descendants=function(i,g,b){g===void 0&&(g=0),b===void 0&&(b=Number.MAX_VALUE);var h=[],u=b;return this.children.forEachAt(g,b,function(o,a,s){(i.blotName==null&&i(o)||i.blotName!=null&&o instanceof i)&&h.push(o),o instanceof l&&(h=h.concat(o.descendants(i,a,u))),u-=s}),h},l.prototype.detach=function(){this.children.forEach(function(i){i.detach()}),r.prototype.detach.call(this)},l.prototype.formatAt=function(i,g,b,h){this.children.forEachAt(i,g,function(u,o,a){u.formatAt(o,a,b,h)})},l.prototype.insertAt=function(i,g,b){var h=this.children.find(i),u=h[0],o=h[1];if(u)u.insertAt(o,g,b);else{var a=b==null?w.create("text",g):w.create(g,b);this.appendChild(a)}},l.prototype.insertBefore=function(i,g){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return i instanceof b}))throw new w.ParchmentError("Cannot insert "+i.statics.blotName+" into "+this.statics.blotName);i.insertInto(this,g)},l.prototype.length=function(){return this.children.reduce(function(i,g){return i+g.length()},0)},l.prototype.moveChildren=function(i,g){this.children.forEach(function(b){i.insertBefore(b,g)})},l.prototype.optimize=function(i){if(r.prototype.optimize.call(this,i),this.children.length===0)if(this.statics.defaultChild!=null){var g=w.create(this.statics.defaultChild);this.appendChild(g),g.optimize(i)}else this.remove()},l.prototype.path=function(i,g){g===void 0&&(g=!1);var b=this.children.find(i,g),h=b[0],u=b[1],o=[[this,i]];return h instanceof l?o.concat(h.path(u,g)):(h!=null&&o.push([h,u]),o)},l.prototype.removeChild=function(i){this.children.remove(i)},l.prototype.replace=function(i){i instanceof l&&i.moveChildren(this),r.prototype.replace.call(this,i)},l.prototype.split=function(i,g){if(g===void 0&&(g=!1),!g){if(i===0)return this;if(i===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(i,this.length(),function(h,u,o){h=h.split(u,g),b.appendChild(h)}),b},l.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},l.prototype.update=function(i,g){var b=this,h=[],u=[];i.forEach(function(o){o.target===b.domNode&&o.type==="childList"&&(h.push.apply(h,o.addedNodes),u.push.apply(u,o.removedNodes))}),u.forEach(function(o){if(!(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var a=w.find(o);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===b.domNode)&&a.detach()}}),h.filter(function(o){return o.parentNode==b.domNode}).sort(function(o,a){return o===a?0:o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(o){var a=null;o.nextSibling!=null&&(a=w.find(o.nextSibling));var s=v(o);(s.next!=a||s.next==null)&&(s.parent!=null&&s.parent.removeChild(b),b.insertBefore(s,a||void 0))})},l}(_.default);function v(r){var l=w.find(r);if(l==null)try{l=w.create(r)}catch{l=w.create(w.Scope.INLINE),[].slice.call(r.childNodes).forEach(function(g){l.domNode.appendChild(g)}),r.parentNode&&r.parentNode.replaceChild(l.domNode,r),l.attach()}return l}M.default=y},function(H,M,D){var F=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,i){l.__proto__=i}||function(l,i){for(var g in i)i.hasOwnProperty(g)&&(l[g]=i[g])};return function(l,i){r(l,i);function g(){this.constructor=l}l.prototype=i===null?Object.create(i):(g.prototype=i.prototype,new g)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(12),_=D(31),w=D(17),y=D(1),v=function(r){F(l,r);function l(i){var g=r.call(this,i)||this;return g.attributes=new _.default(g.domNode),g}return l.formats=function(i){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return i.tagName.toLowerCase()},l.prototype.format=function(i,g){var b=y.query(i);b instanceof C.default?this.attributes.attribute(b,g):g&&b!=null&&(i!==this.statics.blotName||this.formats()[i]!==g)&&this.replaceWith(i,g)},l.prototype.formats=function(){var i=this.attributes.values(),g=this.statics.formats(this.domNode);return g!=null&&(i[this.statics.blotName]=g),i},l.prototype.replaceWith=function(i,g){var b=r.prototype.replaceWith.call(this,i,g);return this.attributes.copy(b),b},l.prototype.update=function(i,g){var b=this;r.prototype.update.call(this,i,g),i.some(function(h){return h.target===b.domNode&&h.type==="attributes"})&&this.attributes.build()},l.prototype.wrap=function(i,g){var b=r.prototype.wrap.call(this,i,g);return b instanceof l&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},l}(w.default);M.default=v},function(H,M,D){var F=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,r){v.__proto__=r}||function(v,r){for(var l in r)r.hasOwnProperty(l)&&(v[l]=r[l])};return function(v,r){y(v,r);function l(){this.constructor=v}v.prototype=r===null?Object.create(r):(l.prototype=r.prototype,new l)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(30),_=D(1),w=function(y){F(v,y);function v(){return y!==null&&y.apply(this,arguments)||this}return v.value=function(r){return!0},v.prototype.index=function(r,l){return this.domNode===r||this.domNode.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(l,1):-1},v.prototype.position=function(r,l){var i=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return r>0&&(i+=1),[this.parent.domNode,i]},v.prototype.value=function(){var r;return r={},r[this.statics.blotName]=this.statics.value(this.domNode)||!0,r},v.scope=_.Scope.INLINE_BLOT,v}(C.default);M.default=w},function(H,M,D){var F=D(11),C=D(3),_={attributes:{compose:function(y,v,r){typeof y!="object"&&(y={}),typeof v!="object"&&(v={});var l=C(!0,{},v);r||(l=Object.keys(l).reduce(function(g,b){return l[b]!=null&&(g[b]=l[b]),g},{}));for(var i in y)y[i]!==void 0&&v[i]===void 0&&(l[i]=y[i]);return Object.keys(l).length>0?l:void 0},diff:function(y,v){typeof y!="object"&&(y={}),typeof v!="object"&&(v={});var r=Object.keys(y).concat(Object.keys(v)).reduce(function(l,i){return F(y[i],v[i])||(l[i]=v[i]===void 0?null:v[i]),l},{});return Object.keys(r).length>0?r:void 0},transform:function(y,v,r){if(typeof y!="object")return v;if(typeof v=="object"){if(!r)return v;var l=Object.keys(v).reduce(function(i,g){return y[g]===void 0&&(i[g]=v[g]),i},{});return Object.keys(l).length>0?l:void 0}}},iterator:function(y){return new w(y)},length:function(y){return typeof y.delete=="number"?y.delete:typeof y.retain=="number"?y.retain:typeof y.insert=="string"?y.insert.length:1}};function w(y){this.ops=y,this.index=0,this.offset=0}w.prototype.hasNext=function(){return this.peekLength()<1/0},w.prototype.next=function(y){y||(y=1/0);var v=this.ops[this.index];if(v){var r=this.offset,l=_.length(v);if(y>=l-r?(y=l-r,this.index+=1,this.offset=0):this.offset+=y,typeof v.delete=="number")return{delete:y};var i={};return v.attributes&&(i.attributes=v.attributes),typeof v.retain=="number"?i.retain=y:typeof v.insert=="string"?i.insert=v.insert.substr(r,y):i.insert=v.insert,i}else return{retain:1/0}},w.prototype.peek=function(){return this.ops[this.index]},w.prototype.peekLength=function(){return this.ops[this.index]?_.length(this.ops[this.index])-this.offset:1/0},w.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},w.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var y=this.offset,v=this.index,r=this.next(),l=this.ops.slice(this.index);return this.offset=y,this.index=v,[r].concat(l)}else return[]},H.exports=_},function(H,M){var D=function(){function F(b,h){return h!=null&&b instanceof h}var C;try{C=Map}catch{C=function(){}}var _;try{_=Set}catch{_=function(){}}var w;try{w=Promise}catch{w=function(){}}function y(b,h,u,o,a){typeof h=="object"&&(u=h.depth,o=h.prototype,a=h.includeNonEnumerable,h=h.circular);var s=[],m=[],p=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof u>"u"&&(u=1/0);function O(N,I){if(N===null)return null;if(I===0)return N;var A,S;if(typeof N!="object")return N;if(F(N,C))A=new C;else if(F(N,_))A=new _;else if(F(N,w))A=new w(function(q,B){N.then(function($){q(O($,I-1))},function($){B(O($,I-1))})});else if(y.__isArray(N))A=[];else if(y.__isRegExp(N))A=new RegExp(N.source,g(N)),N.lastIndex&&(A.lastIndex=N.lastIndex);else if(y.__isDate(N))A=new Date(N.getTime());else{if(p&&Buffer.isBuffer(N))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(N.length):A=new Buffer(N.length),N.copy(A),A;F(N,Error)?A=Object.create(N):typeof o>"u"?(S=Object.getPrototypeOf(N),A=Object.create(S)):(A=Object.create(o),S=o)}if(h){var P=s.indexOf(N);if(P!=-1)return m[P];s.push(N),m.push(A)}F(N,C)&&N.forEach(function(q,B){var $=O(B,I-1),U=O(q,I-1);A.set($,U)}),F(N,_)&&N.forEach(function(q){var B=O(q,I-1);A.add(B)});for(var x in N){var R;S&&(R=Object.getOwnPropertyDescriptor(S,x)),!(R&&R.set==null)&&(A[x]=O(N[x],I-1))}if(Object.getOwnPropertySymbols)for(var L=Object.getOwnPropertySymbols(N),x=0;x<L.length;x++){var J=L[x],z=Object.getOwnPropertyDescriptor(N,J);z&&!z.enumerable&&!a||(A[J]=O(N[J],I-1),z.enumerable||Object.defineProperty(A,J,{enumerable:!1}))}if(a)for(var te=Object.getOwnPropertyNames(N),x=0;x<te.length;x++){var Z=te[x],z=Object.getOwnPropertyDescriptor(N,Z);z&&z.enumerable||(A[Z]=O(N[Z],I-1),Object.defineProperty(A,Z,{enumerable:!1}))}return A}return O(b,u)}y.clonePrototype=function(h){if(h===null)return null;var u=function(){};return u.prototype=h,new u};function v(b){return Object.prototype.toString.call(b)}y.__objToStr=v;function r(b){return typeof b=="object"&&v(b)==="[object Date]"}y.__isDate=r;function l(b){return typeof b=="object"&&v(b)==="[object Array]"}y.__isArray=l;function i(b){return typeof b=="object"&&v(b)==="[object RegExp]"}y.__isRegExp=i;function g(b){var h="";return b.global&&(h+="g"),b.ignoreCase&&(h+="i"),b.multiline&&(h+="m"),h}return y.__getRegExpFlags=g,y}();typeof H=="object"&&H.exports&&(H.exports=D)},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function A(S,P){var x=[],R=!0,L=!1,J=void 0;try{for(var z=S[Symbol.iterator](),te;!(R=(te=z.next()).done)&&(x.push(te.value),!(P&&x.length===P));R=!0);}catch(Z){L=!0,J=Z}finally{try{!R&&z.return&&z.return()}finally{if(L)throw J}}return x}return function(S,P){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return A(S,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function(){function A(S,P){for(var x=0;x<P.length;x++){var R=P[x];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(S,R.key,R)}}return function(S,P,x){return P&&A(S.prototype,P),x&&A(S,x),S}}(),_=function A(S,P,x){S===null&&(S=Function.prototype);var R=Object.getOwnPropertyDescriptor(S,P);if(R===void 0){var L=Object.getPrototypeOf(S);return L===null?void 0:A(L,P,x)}else{if("value"in R)return R.value;var J=R.get;return J===void 0?void 0:J.call(x)}},w=D(0),y=s(w),v=D(8),r=s(v),l=D(4),i=s(l),g=D(16),b=s(g),h=D(13),u=s(h),o=D(25),a=s(o);function s(A){return A&&A.__esModule?A:{default:A}}function m(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function p(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:A}function O(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}function N(A){return A instanceof i.default||A instanceof l.BlockEmbed}var I=function(A){O(S,A);function S(P,x){m(this,S);var R=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P));return R.emitter=x.emitter,Array.isArray(x.whitelist)&&(R.whitelist=x.whitelist.reduce(function(L,J){return L[J]=!0,L},{})),R.domNode.addEventListener("DOMNodeInserted",function(){}),R.optimize(),R.enable(),R}return C(S,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(x,R){var L=this.line(x),J=F(L,2),z=J[0],te=J[1],Z=this.line(x+R),q=F(Z,1),B=q[0];if(_(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"deleteAt",this).call(this,x,R),B!=null&&z!==B&&te>0){if(z instanceof l.BlockEmbed||B instanceof l.BlockEmbed){this.optimize();return}if(z instanceof u.default){var $=z.newlineIndex(z.length(),!0);if($>-1&&(z=z.split($+1),z===B)){this.optimize();return}}else if(B instanceof u.default){var U=B.newlineIndex(0);U>-1&&B.split(U+1)}var re=B.children.head instanceof b.default?null:B.children.head;z.moveChildren(B,re),z.remove()}this.optimize()}},{key:"enable",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",x)}},{key:"formatAt",value:function(x,R,L,J){this.whitelist!=null&&!this.whitelist[L]||(_(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"formatAt",this).call(this,x,R,L,J),this.optimize())}},{key:"insertAt",value:function(x,R,L){if(!(L!=null&&this.whitelist!=null&&!this.whitelist[R])){if(x>=this.length())if(L==null||y.default.query(R,y.default.Scope.BLOCK)==null){var J=y.default.create(this.statics.defaultChild);this.appendChild(J),L==null&&R.endsWith(`
`)&&(R=R.slice(0,-1)),J.insertAt(0,R,L)}else{var z=y.default.create(R,L);this.appendChild(z)}else _(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertAt",this).call(this,x,R,L);this.optimize()}}},{key:"insertBefore",value:function(x,R){if(x.statics.scope===y.default.Scope.INLINE_BLOT){var L=y.default.create(this.statics.defaultChild);L.appendChild(x),x=L}_(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,x,R)}},{key:"leaf",value:function(x){return this.path(x).pop()||[null,-1]}},{key:"line",value:function(x){return x===this.length()?this.line(x-1):this.descendant(N,x)}},{key:"lines",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,L=function J(z,te,Z){var q=[],B=Z;return z.children.forEachAt(te,Z,function($,U,re){N($)?q.push($):$ instanceof y.default.Container&&(q=q.concat(J($,U,B))),B-=re}),q};return L(this,x,R)}},{key:"optimize",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(_(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,x,R),x.length>0&&this.emitter.emit(r.default.events.SCROLL_OPTIMIZE,x,R))}},{key:"path",value:function(x){return _(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"path",this).call(this,x).slice(1)}},{key:"update",value:function(x){if(this.batch!==!0){var R=r.default.sources.USER;typeof x=="string"&&(R=x),Array.isArray(x)||(x=this.observer.takeRecords()),x.length>0&&this.emitter.emit(r.default.events.SCROLL_BEFORE_UPDATE,R,x),_(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"update",this).call(this,x.concat([])),x.length>0&&this.emitter.emit(r.default.events.SCROLL_UPDATE,R,x)}}}]),S}(y.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[i.default,l.BlockEmbed,a.default],M.default=I},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.SHORTKEY=M.default=void 0;var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},C=function(){function V(X,ie){var le=[],ve=!0,_e=!1,Ne=void 0;try{for(var Le=X[Symbol.iterator](),Me;!(ve=(Me=Le.next()).done)&&(le.push(Me.value),!(ie&&le.length===ie));ve=!0);}catch(Q){_e=!0,Ne=Q}finally{try{!ve&&Le.return&&Le.return()}finally{if(_e)throw Ne}}return le}return function(X,ie){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return V(X,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function V(X,ie){for(var le=0;le<ie.length;le++){var ve=ie[le];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(X,ve.key,ve)}}return function(X,ie,le){return ie&&V(X.prototype,ie),le&&V(X,le),X}}(),w=D(21),y=A(w),v=D(11),r=A(v),l=D(3),i=A(l),g=D(2),b=A(g),h=D(20),u=A(h),o=D(0),a=A(o),s=D(5),m=A(s),p=D(10),O=A(p),N=D(9),I=A(N);function A(V){return V&&V.__esModule?V:{default:V}}function S(V,X,ie){return X in V?Object.defineProperty(V,X,{value:ie,enumerable:!0,configurable:!0,writable:!0}):V[X]=ie,V}function P(V,X){if(!(V instanceof X))throw new TypeError("Cannot call a class as a function")}function x(V,X){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:V}function R(V,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);V.prototype=Object.create(X&&X.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(V,X):V.__proto__=X)}var L=(0,O.default)("quill:keyboard"),J=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",z=function(V){R(X,V),_(X,null,[{key:"match",value:function(le,ve){return ve=ee(ve),["altKey","ctrlKey","metaKey","shiftKey"].some(function(_e){return!!ve[_e]!==le[_e]&&ve[_e]!==null})?!1:ve.key===(le.which||le.keyCode)}}]);function X(ie,le){P(this,X);var ve=x(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,ie,le));return ve.bindings={},Object.keys(ve.options.bindings).forEach(function(_e){_e==="list autofill"&&ie.scroll.whitelist!=null&&!ie.scroll.whitelist.list||ve.options.bindings[_e]&&ve.addBinding(ve.options.bindings[_e])}),ve.addBinding({key:X.keys.ENTER,shiftKey:null},$),ve.addBinding({key:X.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ve.addBinding({key:X.keys.BACKSPACE},{collapsed:!0},Z),ve.addBinding({key:X.keys.DELETE},{collapsed:!0},q)):(ve.addBinding({key:X.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Z),ve.addBinding({key:X.keys.DELETE},{collapsed:!0,suffix:/^.?$/},q)),ve.addBinding({key:X.keys.BACKSPACE},{collapsed:!1},B),ve.addBinding({key:X.keys.DELETE},{collapsed:!1},B),ve.addBinding({key:X.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Z),ve.listen(),ve}return _(X,[{key:"addBinding",value:function(le){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ne=ee(le);if(Ne==null||Ne.key==null)return L.warn("Attempted to add invalid keyboard binding",Ne);typeof ve=="function"&&(ve={handler:ve}),typeof _e=="function"&&(_e={handler:_e}),Ne=(0,i.default)(Ne,ve,_e),this.bindings[Ne.key]=this.bindings[Ne.key]||[],this.bindings[Ne.key].push(Ne)}},{key:"listen",value:function(){var le=this;this.quill.root.addEventListener("keydown",function(ve){if(!ve.defaultPrevented){var _e=ve.which||ve.keyCode,Ne=(le.bindings[_e]||[]).filter(function(Oe){return X.match(ve,Oe)});if(Ne.length!==0){var Le=le.quill.getSelection();if(!(Le==null||!le.quill.hasFocus())){var Me=le.quill.getLine(Le.index),Q=C(Me,2),ce=Q[0],ue=Q[1],G=le.quill.getLeaf(Le.index),se=C(G,2),oe=se[0],we=se[1],me=Le.length===0?[oe,we]:le.quill.getLeaf(Le.index+Le.length),Pe=C(me,2),Be=Pe[0],qe=Pe[1],at=oe instanceof a.default.Text?oe.value().slice(0,we):"",ft=Be instanceof a.default.Text?Be.value().slice(qe):"",Je={collapsed:Le.length===0,empty:Le.length===0&&ce.length()<=1,format:le.quill.getFormat(Le),offset:ue,prefix:at,suffix:ft},He=Ne.some(function(Oe){if(Oe.collapsed!=null&&Oe.collapsed!==Je.collapsed||Oe.empty!=null&&Oe.empty!==Je.empty||Oe.offset!=null&&Oe.offset!==Je.offset)return!1;if(Array.isArray(Oe.format)){if(Oe.format.every(function(tt){return Je.format[tt]==null}))return!1}else if(F(Oe.format)==="object"&&!Object.keys(Oe.format).every(function(tt){return Oe.format[tt]===!0?Je.format[tt]!=null:Oe.format[tt]===!1?Je.format[tt]==null:(0,r.default)(Oe.format[tt],Je.format[tt])}))return!1;return Oe.prefix!=null&&!Oe.prefix.test(Je.prefix)||Oe.suffix!=null&&!Oe.suffix.test(Je.suffix)?!1:Oe.handler.call(le,Le,Je)!==!0});He&&ve.preventDefault()}}}})}}]),X}(I.default);z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},z.DEFAULTS={bindings:{bold:re("bold"),italic:re("italic"),underline:re("underline"),indent:{key:z.keys.TAB,format:["blockquote","indent","list"],handler:function(X,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","+1",m.default.sources.USER)}},outdent:{key:z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(X,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","-1",m.default.sources.USER)}},"outdent backspace":{key:z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(X,ie){ie.format.indent!=null?this.quill.format("indent","-1",m.default.sources.USER):ie.format.list!=null&&this.quill.format("list",!1,m.default.sources.USER)}},"indent code-block":U(!0),"outdent code-block":U(!1),"remove tab":{key:z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(X){this.quill.deleteText(X.index-1,1,m.default.sources.USER)}},tab:{key:z.keys.TAB,handler:function(X){this.quill.history.cutoff();var ie=new b.default().retain(X.index).delete(X.length).insert("	");this.quill.updateContents(ie,m.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(X.index+1,m.default.sources.SILENT)}},"list empty enter":{key:z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(X,ie){this.quill.format("list",!1,m.default.sources.USER),ie.format.indent&&this.quill.format("indent",!1,m.default.sources.USER)}},"checklist enter":{key:z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(X){var ie=this.quill.getLine(X.index),le=C(ie,2),ve=le[0],_e=le[1],Ne=(0,i.default)({},ve.formats(),{list:"checked"}),Le=new b.default().retain(X.index).insert(`
`,Ne).retain(ve.length()-_e-1).retain(1,{list:"unchecked"});this.quill.updateContents(Le,m.default.sources.USER),this.quill.setSelection(X.index+1,m.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(X,ie){var le=this.quill.getLine(X.index),ve=C(le,2),_e=ve[0],Ne=ve[1],Le=new b.default().retain(X.index).insert(`
`,ie.format).retain(_e.length()-Ne-1).retain(1,{header:null});this.quill.updateContents(Le,m.default.sources.USER),this.quill.setSelection(X.index+1,m.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(X,ie){var le=ie.prefix.length,ve=this.quill.getLine(X.index),_e=C(ve,2),Ne=_e[0],Le=_e[1];if(Le>le)return!0;var Me=void 0;switch(ie.prefix.trim()){case"[]":case"[ ]":Me="unchecked";break;case"[x]":Me="checked";break;case"-":case"*":Me="bullet";break;default:Me="ordered"}this.quill.insertText(X.index," ",m.default.sources.USER),this.quill.history.cutoff();var Q=new b.default().retain(X.index-Le).delete(le+1).retain(Ne.length()-2-Le).retain(1,{list:Me});this.quill.updateContents(Q,m.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(X.index-le,m.default.sources.SILENT)}},"code exit":{key:z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(X){var ie=this.quill.getLine(X.index),le=C(ie,2),ve=le[0],_e=le[1],Ne=new b.default().retain(X.index+ve.length()-_e-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ne,m.default.sources.USER)}},"embed left":te(z.keys.LEFT,!1),"embed left shift":te(z.keys.LEFT,!0),"embed right":te(z.keys.RIGHT,!1),"embed right shift":te(z.keys.RIGHT,!0)}};function te(V,X){var ie,le=V===z.keys.LEFT?"prefix":"suffix";return ie={key:V,shiftKey:X,altKey:null},S(ie,le,/^$/),S(ie,"handler",function(_e){var Ne=_e.index;V===z.keys.RIGHT&&(Ne+=_e.length+1);var Le=this.quill.getLeaf(Ne),Me=C(Le,1),Q=Me[0];return Q instanceof a.default.Embed?(V===z.keys.LEFT?X?this.quill.setSelection(_e.index-1,_e.length+1,m.default.sources.USER):this.quill.setSelection(_e.index-1,m.default.sources.USER):X?this.quill.setSelection(_e.index,_e.length+1,m.default.sources.USER):this.quill.setSelection(_e.index+_e.length+1,m.default.sources.USER),!1):!0}),ie}function Z(V,X){if(!(V.index===0||this.quill.getLength()<=1)){var ie=this.quill.getLine(V.index),le=C(ie,1),ve=le[0],_e={};if(X.offset===0){var Ne=this.quill.getLine(V.index-1),Le=C(Ne,1),Me=Le[0];if(Me!=null&&Me.length()>1){var Q=ve.formats(),ce=this.quill.getFormat(V.index-1,1);_e=u.default.attributes.diff(Q,ce)||{}}}var ue=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(X.prefix)?2:1;this.quill.deleteText(V.index-ue,ue,m.default.sources.USER),Object.keys(_e).length>0&&this.quill.formatLine(V.index-ue,ue,_e,m.default.sources.USER),this.quill.focus()}}function q(V,X){var ie=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(X.suffix)?2:1;if(!(V.index>=this.quill.getLength()-ie)){var le={},ve=0,_e=this.quill.getLine(V.index),Ne=C(_e,1),Le=Ne[0];if(X.offset>=Le.length()-1){var Me=this.quill.getLine(V.index+1),Q=C(Me,1),ce=Q[0];if(ce){var ue=Le.formats(),G=this.quill.getFormat(V.index,1);le=u.default.attributes.diff(ue,G)||{},ve=ce.length()}}this.quill.deleteText(V.index,ie,m.default.sources.USER),Object.keys(le).length>0&&this.quill.formatLine(V.index+ve-1,ie,le,m.default.sources.USER)}}function B(V){var X=this.quill.getLines(V),ie={};if(X.length>1){var le=X[0].formats(),ve=X[X.length-1].formats();ie=u.default.attributes.diff(ve,le)||{}}this.quill.deleteText(V,m.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(V.index,1,ie,m.default.sources.USER),this.quill.setSelection(V.index,m.default.sources.SILENT),this.quill.focus()}function $(V,X){var ie=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var le=Object.keys(X.format).reduce(function(ve,_e){return a.default.query(_e,a.default.Scope.BLOCK)&&!Array.isArray(X.format[_e])&&(ve[_e]=X.format[_e]),ve},{});this.quill.insertText(V.index,`
`,le,m.default.sources.USER),this.quill.setSelection(V.index+1,m.default.sources.SILENT),this.quill.focus(),Object.keys(X.format).forEach(function(ve){le[ve]==null&&(Array.isArray(X.format[ve])||ve!=="link"&&ie.quill.format(ve,X.format[ve],m.default.sources.USER))})}function U(V){return{key:z.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(ie){var le=a.default.query("code-block"),ve=ie.index,_e=ie.length,Ne=this.quill.scroll.descendant(le,ve),Le=C(Ne,2),Me=Le[0],Q=Le[1];if(Me!=null){var ce=this.quill.getIndex(Me),ue=Me.newlineIndex(Q,!0)+1,G=Me.newlineIndex(ce+Q+_e),se=Me.domNode.textContent.slice(ue,G).split(`
`);Q=0,se.forEach(function(oe,we){V?(Me.insertAt(ue+Q,le.TAB),Q+=le.TAB.length,we===0?ve+=le.TAB.length:_e+=le.TAB.length):oe.startsWith(le.TAB)&&(Me.deleteAt(ue+Q,le.TAB.length),Q-=le.TAB.length,we===0?ve-=le.TAB.length:_e-=le.TAB.length),Q+=oe.length+1}),this.quill.update(m.default.sources.USER),this.quill.setSelection(ve,_e,m.default.sources.SILENT)}}}}function re(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(ie,le){this.quill.format(V,!le.format[V],m.default.sources.USER)}}}function ee(V){if(typeof V=="string"||typeof V=="number")return ee({key:V});if((typeof V>"u"?"undefined":F(V))==="object"&&(V=(0,y.default)(V,!1)),typeof V.key=="string")if(z.keys[V.key.toUpperCase()]!=null)V.key=z.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[J]=V.shortKey,delete V.shortKey),V}M.default=z,M.SHORTKEY=J},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function u(o,a){var s=[],m=!0,p=!1,O=void 0;try{for(var N=o[Symbol.iterator](),I;!(m=(I=N.next()).done)&&(s.push(I.value),!(a&&s.length===a));m=!0);}catch(A){p=!0,O=A}finally{try{!m&&N.return&&N.return()}finally{if(p)throw O}}return s}return function(o,a){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return u(o,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function u(o,a,s){o===null&&(o=Function.prototype);var m=Object.getOwnPropertyDescriptor(o,a);if(m===void 0){var p=Object.getPrototypeOf(o);return p===null?void 0:u(p,a,s)}else{if("value"in m)return m.value;var O=m.get;return O===void 0?void 0:O.call(s)}},_=function(){function u(o,a){for(var s=0;s<a.length;s++){var m=a[s];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(o,m.key,m)}}return function(o,a,s){return a&&u(o.prototype,a),s&&u(o,s),o}}(),w=D(0),y=l(w),v=D(7),r=l(v);function l(u){return u&&u.__esModule?u:{default:u}}function i(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function g(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function b(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var h=function(u){b(o,u),_(o,null,[{key:"value",value:function(){}}]);function o(a,s){i(this,o);var m=g(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,a));return m.selection=s,m.textNode=document.createTextNode(o.CONTENTS),m.domNode.appendChild(m.textNode),m._length=0,m}return _(o,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(s,m){if(this._length!==0)return C(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"format",this).call(this,s,m);for(var p=this,O=0;p!=null&&p.statics.scope!==y.default.Scope.BLOCK_BLOT;)O+=p.offset(p.parent),p=p.parent;p!=null&&(this._length=o.CONTENTS.length,p.optimize(),p.formatAt(O,o.CONTENTS.length,s,m),this._length=0)}},{key:"index",value:function(s,m){return s===this.textNode?0:C(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"index",this).call(this,s,m)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){C(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var s=this.textNode,m=this.selection.getNativeRange(),p=void 0,O=void 0,N=void 0;if(m!=null&&m.start.node===s&&m.end.node===s){var I=[s,m.start.offset,m.end.offset];p=I[0],O=I[1],N=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==o.CONTENTS){var A=this.textNode.data.split(o.CONTENTS).join("");this.next instanceof r.default?(p=this.next.domNode,this.next.insertAt(0,A),this.textNode.data=o.CONTENTS):(this.textNode.data=A,this.parent.insertBefore(y.default.create(this.textNode),this),this.textNode=document.createTextNode(o.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),O!=null){var S=[O,N].map(function(x){return Math.max(0,Math.min(p.data.length,x-1))}),P=F(S,2);return O=P[0],N=P[1],{startNode:p,startOffset:O,endNode:p,endOffset:N}}}}},{key:"update",value:function(s,m){var p=this;if(s.some(function(N){return N.type==="characterData"&&N.target===p.textNode})){var O=this.restore();O&&(m.range=O)}}},{key:"value",value:function(){return""}}]),o}(y.default.Embed);h.blotName="cursor",h.className="ql-cursor",h.tagName="span",h.CONTENTS="\uFEFF",M.default=h},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(0),C=y(F),_=D(4),w=y(_);function y(g){return g&&g.__esModule?g:{default:g}}function v(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function r(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function l(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var i=function(g){l(b,g);function b(){return v(this,b),r(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b}(C.default.Container);i.allowedChildren=[w.default,_.BlockEmbed,i],M.default=i},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.ColorStyle=M.ColorClass=M.ColorAttributor=void 0;var F=function(){function h(u,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(u,s.key,s)}}return function(u,o,a){return o&&h(u.prototype,o),a&&h(u,a),u}}(),C=function h(u,o,a){u===null&&(u=Function.prototype);var s=Object.getOwnPropertyDescriptor(u,o);if(s===void 0){var m=Object.getPrototypeOf(u);return m===null?void 0:h(m,o,a)}else{if("value"in s)return s.value;var p=s.get;return p===void 0?void 0:p.call(a)}},_=D(0),w=y(_);function y(h){return h&&h.__esModule?h:{default:h}}function v(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}function r(h,u){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:h}function l(h,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);h.prototype=Object.create(u&&u.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(h,u):h.__proto__=u)}var i=function(h){l(u,h);function u(){return v(this,u),r(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return F(u,[{key:"value",value:function(a){var s=C(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"value",this).call(this,a);return s.startsWith("rgb(")?(s=s.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+s.split(",").map(function(m){return("00"+parseInt(m).toString(16)).slice(-2)}).join("")):s}}]),u}(w.default.Attributor.Style),g=new w.default.Attributor.Class("color","ql-color",{scope:w.default.Scope.INLINE}),b=new i("color","color",{scope:w.default.Scope.INLINE});M.ColorAttributor=i,M.ColorClass=g,M.ColorStyle=b},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.sanitize=M.default=void 0;var F=function(){function b(h,u){for(var o=0;o<u.length;o++){var a=u[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(h,a.key,a)}}return function(h,u,o){return u&&b(h.prototype,u),o&&b(h,o),h}}(),C=function b(h,u,o){h===null&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,u);if(a===void 0){var s=Object.getPrototypeOf(h);return s===null?void 0:b(s,u,o)}else{if("value"in a)return a.value;var m=a.get;return m===void 0?void 0:m.call(o)}},_=D(6),w=y(_);function y(b){return b&&b.__esModule?b:{default:b}}function v(b,h){if(!(b instanceof h))throw new TypeError("Cannot call a class as a function")}function r(b,h){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:b}function l(b,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);b.prototype=Object.create(h&&h.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(b,h):b.__proto__=h)}var i=function(b){l(h,b);function h(){return v(this,h),r(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return F(h,[{key:"format",value:function(o,a){if(o!==this.statics.blotName||!a)return C(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,o,a);a=this.constructor.sanitize(a),this.domNode.setAttribute("href",a)}}],[{key:"create",value:function(o){var a=C(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,o);return o=this.sanitize(o),a.setAttribute("href",o),a.setAttribute("rel","noopener noreferrer"),a.setAttribute("target","_blank"),a}},{key:"formats",value:function(o){return o.getAttribute("href")}},{key:"sanitize",value:function(o){return g(o,this.PROTOCOL_WHITELIST)?o:this.SANITIZED_URL}}]),h}(w.default);i.blotName="link",i.tagName="A",i.SANITIZED_URL="about:blank",i.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function g(b,h){var u=document.createElement("a");u.href=b;var o=u.href.slice(0,u.href.indexOf(":"));return h.indexOf(o)>-1}M.default=i,M.sanitize=g},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},C=function(){function h(u,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(u,s.key,s)}}return function(u,o,a){return o&&h(u.prototype,o),a&&h(u,a),u}}(),_=D(23),w=r(_),y=D(107),v=r(y);function r(h){return h&&h.__esModule?h:{default:h}}function l(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}var i=0;function g(h,u){h.setAttribute(u,h.getAttribute(u)!=="true")}var b=function(){function h(u){var o=this;l(this,h),this.select=u,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){o.togglePicker()}),this.label.addEventListener("keydown",function(a){switch(a.keyCode){case w.default.keys.ENTER:o.togglePicker();break;case w.default.keys.ESCAPE:o.escape(),a.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return C(h,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),g(this.label,"aria-expanded"),g(this.options,"aria-hidden")}},{key:"buildItem",value:function(o){var a=this,s=document.createElement("span");return s.tabIndex="0",s.setAttribute("role","button"),s.classList.add("ql-picker-item"),o.hasAttribute("value")&&s.setAttribute("data-value",o.getAttribute("value")),o.textContent&&s.setAttribute("data-label",o.textContent),s.addEventListener("click",function(){a.selectItem(s,!0)}),s.addEventListener("keydown",function(m){switch(m.keyCode){case w.default.keys.ENTER:a.selectItem(s,!0),m.preventDefault();break;case w.default.keys.ESCAPE:a.escape(),m.preventDefault();break}}),s}},{key:"buildLabel",value:function(){var o=document.createElement("span");return o.classList.add("ql-picker-label"),o.innerHTML=v.default,o.tabIndex="0",o.setAttribute("role","button"),o.setAttribute("aria-expanded","false"),this.container.appendChild(o),o}},{key:"buildOptions",value:function(){var o=this,a=document.createElement("span");a.classList.add("ql-picker-options"),a.setAttribute("aria-hidden","true"),a.tabIndex="-1",a.id="ql-picker-options-"+i,i+=1,this.label.setAttribute("aria-controls",a.id),this.options=a,[].slice.call(this.select.options).forEach(function(s){var m=o.buildItem(s);a.appendChild(m),s.selected===!0&&o.selectItem(m)}),this.container.appendChild(a)}},{key:"buildPicker",value:function(){var o=this;[].slice.call(this.select.attributes).forEach(function(a){o.container.setAttribute(a.name,a.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var o=this;this.close(),setTimeout(function(){return o.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.container.querySelector(".ql-selected");if(o!==s&&(s!=null&&s.classList.remove("ql-selected"),o!=null&&(o.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(o.parentNode.children,o),o.hasAttribute("data-value")?this.label.setAttribute("data-value",o.getAttribute("data-value")):this.label.removeAttribute("data-value"),o.hasAttribute("data-label")?this.label.setAttribute("data-label",o.getAttribute("data-label")):this.label.removeAttribute("data-label"),a))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":F(Event))==="object"){var m=document.createEvent("Event");m.initEvent("change",!0,!0),this.select.dispatchEvent(m)}this.close()}}},{key:"update",value:function(){var o=void 0;if(this.select.selectedIndex>-1){var a=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];o=this.select.options[this.select.selectedIndex],this.selectItem(a)}else this.selectItem(null);var s=o!=null&&o!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",s)}}]),h}();M.default=b},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(0),C=L(F),_=D(5),w=L(_),y=D(4),v=L(y),r=D(16),l=L(r),i=D(25),g=L(i),b=D(24),h=L(b),u=D(35),o=L(u),a=D(6),s=L(a),m=D(22),p=L(m),O=D(7),N=L(O),I=D(55),A=L(I),S=D(42),P=L(S),x=D(23),R=L(x);function L(J){return J&&J.__esModule?J:{default:J}}w.default.register({"blots/block":v.default,"blots/block/embed":y.BlockEmbed,"blots/break":l.default,"blots/container":g.default,"blots/cursor":h.default,"blots/embed":o.default,"blots/inline":s.default,"blots/scroll":p.default,"blots/text":N.default,"modules/clipboard":A.default,"modules/history":P.default,"modules/keyboard":R.default}),C.default.register(v.default,l.default,h.default,s.default,p.default,N.default),M.default=w.default},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(1),C=function(){function _(w){this.domNode=w,this.domNode[F.DATA_KEY]={blot:this}}return Object.defineProperty(_.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),_.create=function(w){if(this.tagName==null)throw new F.ParchmentError("Blot definition missing tagName");var y;return Array.isArray(this.tagName)?(typeof w=="string"&&(w=w.toUpperCase(),parseInt(w).toString()===w&&(w=parseInt(w))),typeof w=="number"?y=document.createElement(this.tagName[w-1]):this.tagName.indexOf(w)>-1?y=document.createElement(w):y=document.createElement(this.tagName[0])):y=document.createElement(this.tagName),this.className&&y.classList.add(this.className),y},_.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},_.prototype.clone=function(){var w=this.domNode.cloneNode(!1);return F.create(w)},_.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[F.DATA_KEY]},_.prototype.deleteAt=function(w,y){var v=this.isolate(w,y);v.remove()},_.prototype.formatAt=function(w,y,v,r){var l=this.isolate(w,y);if(F.query(v,F.Scope.BLOT)!=null&&r)l.wrap(v,r);else if(F.query(v,F.Scope.ATTRIBUTE)!=null){var i=F.create(this.statics.scope);l.wrap(i),i.format(v,r)}},_.prototype.insertAt=function(w,y,v){var r=v==null?F.create("text",y):F.create(y,v),l=this.split(w);this.parent.insertBefore(r,l)},_.prototype.insertInto=function(w,y){y===void 0&&(y=null),this.parent!=null&&this.parent.children.remove(this);var v=null;w.children.insertBefore(this,y),y!=null&&(v=y.domNode),(this.domNode.parentNode!=w.domNode||this.domNode.nextSibling!=v)&&w.domNode.insertBefore(this.domNode,v),this.parent=w,this.attach()},_.prototype.isolate=function(w,y){var v=this.split(w);return v.split(y),v},_.prototype.length=function(){return 1},_.prototype.offset=function(w){return w===void 0&&(w=this.parent),this.parent==null||this==w?0:this.parent.children.offset(this)+this.parent.offset(w)},_.prototype.optimize=function(w){this.domNode[F.DATA_KEY]!=null&&delete this.domNode[F.DATA_KEY].mutations},_.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},_.prototype.replace=function(w){w.parent!=null&&(w.parent.insertBefore(this,w.next),w.remove())},_.prototype.replaceWith=function(w,y){var v=typeof w=="string"?F.create(w,y):w;return v.replace(this),v},_.prototype.split=function(w,y){return w===0?this:this.next},_.prototype.update=function(w,y){},_.prototype.wrap=function(w,y){var v=typeof w=="string"?F.create(w,y):w;return this.parent!=null&&this.parent.insertBefore(v,this.next),v.appendChild(this),v},_.blotName="abstract",_}();M.default=C},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(12),C=D(32),_=D(33),w=D(1),y=function(){function v(r){this.attributes={},this.domNode=r,this.build()}return v.prototype.attribute=function(r,l){l?r.add(this.domNode,l)&&(r.value(this.domNode)!=null?this.attributes[r.attrName]=r:delete this.attributes[r.attrName]):(r.remove(this.domNode),delete this.attributes[r.attrName])},v.prototype.build=function(){var r=this;this.attributes={};var l=F.default.keys(this.domNode),i=C.default.keys(this.domNode),g=_.default.keys(this.domNode);l.concat(i).concat(g).forEach(function(b){var h=w.query(b,w.Scope.ATTRIBUTE);h instanceof F.default&&(r.attributes[h.attrName]=h)})},v.prototype.copy=function(r){var l=this;Object.keys(this.attributes).forEach(function(i){var g=l.attributes[i].value(l.domNode);r.format(i,g)})},v.prototype.move=function(r){var l=this;this.copy(r),Object.keys(this.attributes).forEach(function(i){l.attributes[i].remove(l.domNode)}),this.attributes={}},v.prototype.values=function(){var r=this;return Object.keys(this.attributes).reduce(function(l,i){return l[i]=r.attributes[i].value(r.domNode),l},{})},v}();M.default=y},function(H,M,D){var F=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,r){v.__proto__=r}||function(v,r){for(var l in r)r.hasOwnProperty(l)&&(v[l]=r[l])};return function(v,r){y(v,r);function l(){this.constructor=v}v.prototype=r===null?Object.create(r):(l.prototype=r.prototype,new l)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(12);function _(y,v){var r=y.getAttribute("class")||"";return r.split(/\s+/).filter(function(l){return l.indexOf(v+"-")===0})}var w=function(y){F(v,y);function v(){return y!==null&&y.apply(this,arguments)||this}return v.keys=function(r){return(r.getAttribute("class")||"").split(/\s+/).map(function(l){return l.split("-").slice(0,-1).join("-")})},v.prototype.add=function(r,l){return this.canAdd(r,l)?(this.remove(r),r.classList.add(this.keyName+"-"+l),!0):!1},v.prototype.remove=function(r){var l=_(r,this.keyName);l.forEach(function(i){r.classList.remove(i)}),r.classList.length===0&&r.removeAttribute("class")},v.prototype.value=function(r){var l=_(r,this.keyName)[0]||"",i=l.slice(this.keyName.length+1);return this.canAdd(r,i)?i:""},v}(C.default);M.default=w},function(H,M,D){var F=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,r){v.__proto__=r}||function(v,r){for(var l in r)r.hasOwnProperty(l)&&(v[l]=r[l])};return function(v,r){y(v,r);function l(){this.constructor=v}v.prototype=r===null?Object.create(r):(l.prototype=r.prototype,new l)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(12);function _(y){var v=y.split("-"),r=v.slice(1).map(function(l){return l[0].toUpperCase()+l.slice(1)}).join("");return v[0]+r}var w=function(y){F(v,y);function v(){return y!==null&&y.apply(this,arguments)||this}return v.keys=function(r){return(r.getAttribute("style")||"").split(";").map(function(l){var i=l.split(":");return i[0].trim()})},v.prototype.add=function(r,l){return this.canAdd(r,l)?(r.style[_(this.keyName)]=l,!0):!1},v.prototype.remove=function(r){r.style[_(this.keyName)]="",r.getAttribute("style")||r.removeAttribute("style")},v.prototype.value=function(r){var l=r.style[_(this.keyName)];return this.canAdd(r,l)?l:""},v}(C.default);M.default=w},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function w(y,v){for(var r=0;r<v.length;r++){var l=v[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(y,l.key,l)}}return function(y,v,r){return v&&w(y.prototype,v),r&&w(y,r),y}}();function C(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}var _=function(){function w(y,v){C(this,w),this.quill=y,this.options=v,this.modules={}}return F(w,[{key:"init",value:function(){var v=this;Object.keys(this.options.modules).forEach(function(r){v.modules[r]==null&&v.addModule(r)})}},{key:"addModule",value:function(v){var r=this.quill.constructor.import("modules/"+v);return this.modules[v]=new r(this.quill,this.options.modules[v]||{}),this.modules[v]}}]),w}();_.DEFAULTS={modules:{}},_.themes={default:_},M.default=_},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function u(o,a){for(var s=0;s<a.length;s++){var m=a[s];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(o,m.key,m)}}return function(o,a,s){return a&&u(o.prototype,a),s&&u(o,s),o}}(),C=function u(o,a,s){o===null&&(o=Function.prototype);var m=Object.getOwnPropertyDescriptor(o,a);if(m===void 0){var p=Object.getPrototypeOf(o);return p===null?void 0:u(p,a,s)}else{if("value"in m)return m.value;var O=m.get;return O===void 0?void 0:O.call(s)}},_=D(0),w=r(_),y=D(7),v=r(y);function r(u){return u&&u.__esModule?u:{default:u}}function l(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function i(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function g(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var b="\uFEFF",h=function(u){g(o,u);function o(a){l(this,o);var s=i(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,a));return s.contentNode=document.createElement("span"),s.contentNode.setAttribute("contenteditable",!1),[].slice.call(s.domNode.childNodes).forEach(function(m){s.contentNode.appendChild(m)}),s.leftGuard=document.createTextNode(b),s.rightGuard=document.createTextNode(b),s.domNode.appendChild(s.leftGuard),s.domNode.appendChild(s.contentNode),s.domNode.appendChild(s.rightGuard),s}return F(o,[{key:"index",value:function(s,m){return s===this.leftGuard?0:s===this.rightGuard?1:C(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"index",this).call(this,s,m)}},{key:"restore",value:function(s){var m=void 0,p=void 0,O=s.data.split(b).join("");if(s===this.leftGuard)if(this.prev instanceof v.default){var N=this.prev.length();this.prev.insertAt(N,O),m={startNode:this.prev.domNode,startOffset:N+O.length}}else p=document.createTextNode(O),this.parent.insertBefore(w.default.create(p),this),m={startNode:p,startOffset:O.length};else s===this.rightGuard&&(this.next instanceof v.default?(this.next.insertAt(0,O),m={startNode:this.next.domNode,startOffset:O.length}):(p=document.createTextNode(O),this.parent.insertBefore(w.default.create(p),this.next),m={startNode:p,startOffset:O.length}));return s.data=b,m}},{key:"update",value:function(s,m){var p=this;s.forEach(function(O){if(O.type==="characterData"&&(O.target===p.leftGuard||O.target===p.rightGuard)){var N=p.restore(O.target);N&&(m.range=N)}})}}]),o}(w.default.Embed);M.default=h},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.AlignStyle=M.AlignClass=M.AlignAttribute=void 0;var F=D(0),C=_(F);function _(l){return l&&l.__esModule?l:{default:l}}var w={scope:C.default.Scope.BLOCK,whitelist:["right","center","justify"]},y=new C.default.Attributor.Attribute("align","align",w),v=new C.default.Attributor.Class("align","ql-align",w),r=new C.default.Attributor.Style("align","text-align",w);M.AlignAttribute=y,M.AlignClass=v,M.AlignStyle=r},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.BackgroundStyle=M.BackgroundClass=void 0;var F=D(0),C=w(F),_=D(26);function w(r){return r&&r.__esModule?r:{default:r}}var y=new C.default.Attributor.Class("background","ql-bg",{scope:C.default.Scope.INLINE}),v=new _.ColorAttributor("background","background-color",{scope:C.default.Scope.INLINE});M.BackgroundClass=y,M.BackgroundStyle=v},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.DirectionStyle=M.DirectionClass=M.DirectionAttribute=void 0;var F=D(0),C=_(F);function _(l){return l&&l.__esModule?l:{default:l}}var w={scope:C.default.Scope.BLOCK,whitelist:["rtl"]},y=new C.default.Attributor.Attribute("direction","dir",w),v=new C.default.Attributor.Class("direction","ql-direction",w),r=new C.default.Attributor.Style("direction","direction",w);M.DirectionAttribute=y,M.DirectionClass=v,M.DirectionStyle=r},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.FontClass=M.FontStyle=void 0;var F=function(){function u(o,a){for(var s=0;s<a.length;s++){var m=a[s];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(o,m.key,m)}}return function(o,a,s){return a&&u(o.prototype,a),s&&u(o,s),o}}(),C=function u(o,a,s){o===null&&(o=Function.prototype);var m=Object.getOwnPropertyDescriptor(o,a);if(m===void 0){var p=Object.getPrototypeOf(o);return p===null?void 0:u(p,a,s)}else{if("value"in m)return m.value;var O=m.get;return O===void 0?void 0:O.call(s)}},_=D(0),w=y(_);function y(u){return u&&u.__esModule?u:{default:u}}function v(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function r(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function l(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var i={scope:w.default.Scope.INLINE,whitelist:["serif","monospace"]},g=new w.default.Attributor.Class("font","ql-font",i),b=function(u){l(o,u);function o(){return v(this,o),r(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return F(o,[{key:"value",value:function(s){return C(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"value",this).call(this,s).replace(/["']/g,"")}}]),o}(w.default.Attributor.Style),h=new b("font","font-family",i);M.FontStyle=h,M.FontClass=g},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.SizeStyle=M.SizeClass=void 0;var F=D(0),C=_(F);function _(v){return v&&v.__esModule?v:{default:v}}var w=new C.default.Attributor.Class("size","ql-size",{scope:C.default.Scope.INLINE,whitelist:["small","large","huge"]}),y=new C.default.Attributor.Style("size","font-size",{scope:C.default.Scope.INLINE,whitelist:["10px","18px","32px"]});M.SizeClass=w,M.SizeStyle=y},function(H,M,D){H.exports={align:{"":D(76),center:D(77),right:D(78),justify:D(79)},background:D(80),blockquote:D(81),bold:D(82),clean:D(83),code:D(58),"code-block":D(58),color:D(84),direction:{"":D(85),rtl:D(86)},float:{center:D(87),full:D(88),left:D(89),right:D(90)},formula:D(91),header:{1:D(92),2:D(93)},italic:D(94),image:D(95),indent:{"+1":D(96),"-1":D(97)},link:D(98),list:{ordered:D(99),bullet:D(100),check:D(101)},script:{sub:D(102),super:D(103)},strike:D(104),underline:D(105),video:D(106)}},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.getLastChangeIndex=M.default=void 0;var F=function(){function a(s,m){for(var p=0;p<m.length;p++){var O=m[p];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(s,O.key,O)}}return function(s,m,p){return m&&a(s.prototype,m),p&&a(s,p),s}}(),C=D(0),_=l(C),w=D(5),y=l(w),v=D(9),r=l(v);function l(a){return a&&a.__esModule?a:{default:a}}function i(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}function g(a,s){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:a}function b(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(a,s):a.__proto__=s)}var h=function(a){b(s,a);function s(m,p){i(this,s);var O=g(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,m,p));return O.lastRecorded=0,O.ignoreChange=!1,O.clear(),O.quill.on(y.default.events.EDITOR_CHANGE,function(N,I,A,S){N!==y.default.events.TEXT_CHANGE||O.ignoreChange||(!O.options.userOnly||S===y.default.sources.USER?O.record(I,A):O.transform(I))}),O.quill.keyboard.addBinding({key:"Z",shortKey:!0},O.undo.bind(O)),O.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},O.redo.bind(O)),/Win/i.test(navigator.platform)&&O.quill.keyboard.addBinding({key:"Y",shortKey:!0},O.redo.bind(O)),O}return F(s,[{key:"change",value:function(p,O){if(this.stack[p].length!==0){var N=this.stack[p].pop();this.stack[O].push(N),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(N[p],y.default.sources.USER),this.ignoreChange=!1;var I=o(N[p]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(p,O){if(p.ops.length!==0){this.stack.redo=[];var N=this.quill.getContents().diff(O),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var A=this.stack.undo.pop();N=N.compose(A.undo),p=A.redo.compose(p)}else this.lastRecorded=I;this.stack.undo.push({redo:p,undo:N}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(p){this.stack.undo.forEach(function(O){O.undo=p.transform(O.undo,!0),O.redo=p.transform(O.redo,!0)}),this.stack.redo.forEach(function(O){O.undo=p.transform(O.undo,!0),O.redo=p.transform(O.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),s}(r.default);h.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function u(a){var s=a.ops[a.ops.length-1];return s==null?!1:s.insert!=null?typeof s.insert=="string"&&s.insert.endsWith(`
`):s.attributes!=null?Object.keys(s.attributes).some(function(m){return _.default.query(m,_.default.Scope.BLOCK)!=null}):!1}function o(a){var s=a.reduce(function(p,O){return p+=O.delete||0,p},0),m=a.length()-s;return u(a)&&(m-=1),m}M.default=h,M.getLastChangeIndex=o},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BaseTooltip=void 0;var F=function(){function $(U,re){for(var ee=0;ee<re.length;ee++){var V=re[ee];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(U,V.key,V)}}return function(U,re,ee){return re&&$(U.prototype,re),ee&&$(U,ee),U}}(),C=function $(U,re,ee){U===null&&(U=Function.prototype);var V=Object.getOwnPropertyDescriptor(U,re);if(V===void 0){var X=Object.getPrototypeOf(U);return X===null?void 0:$(X,re,ee)}else{if("value"in V)return V.value;var ie=V.get;return ie===void 0?void 0:ie.call(ee)}},_=D(3),w=I(_),y=D(2),v=I(y),r=D(8),l=I(r),i=D(23),g=I(i),b=D(34),h=I(b),u=D(59),o=I(u),a=D(60),s=I(a),m=D(28),p=I(m),O=D(61),N=I(O);function I($){return $&&$.__esModule?$:{default:$}}function A($,U){if(!($ instanceof U))throw new TypeError("Cannot call a class as a function")}function S($,U){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:$}function P($,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);$.prototype=Object.create(U&&U.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf($,U):$.__proto__=U)}var x=[!1,"center","right","justify"],R=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],L=[!1,"serif","monospace"],J=["1","2","3",!1],z=["small",!1,"large","huge"],te=function($){P(U,$);function U(re,ee){A(this,U);var V=S(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,re,ee)),X=function ie(le){if(!document.body.contains(re.root))return document.body.removeEventListener("click",ie);V.tooltip!=null&&!V.tooltip.root.contains(le.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(ve){ve.container.contains(le.target)||ve.close()})};return re.emitter.listenDOM("click",document.body,X),V}return F(U,[{key:"addModule",value:function(ee){var V=C(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"addModule",this).call(this,ee);return ee==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(ee,V){ee.forEach(function(X){var ie=X.getAttribute("class")||"";ie.split(/\s+/).forEach(function(le){if(!!le.startsWith("ql-")&&(le=le.slice(3),V[le]!=null))if(le==="direction")X.innerHTML=V[le][""]+V[le].rtl;else if(typeof V[le]=="string")X.innerHTML=V[le];else{var ve=X.value||"";ve!=null&&V[le][ve]&&(X.innerHTML=V[le][ve])}})})}},{key:"buildPickers",value:function(ee,V){var X=this;this.pickers=ee.map(function(le){if(le.classList.contains("ql-align"))return le.querySelector("option")==null&&B(le,x),new s.default(le,V.align);if(le.classList.contains("ql-background")||le.classList.contains("ql-color")){var ve=le.classList.contains("ql-background")?"background":"color";return le.querySelector("option")==null&&B(le,R,ve==="background"?"#ffffff":"#000000"),new o.default(le,V[ve])}else return le.querySelector("option")==null&&(le.classList.contains("ql-font")?B(le,L):le.classList.contains("ql-header")?B(le,J):le.classList.contains("ql-size")&&B(le,z)),new p.default(le)});var ie=function(){X.pickers.forEach(function(ve){ve.update()})};this.quill.on(l.default.events.EDITOR_CHANGE,ie)}}]),U}(h.default);te.DEFAULTS=(0,w.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var U=this,re=this.container.querySelector("input.ql-image[type=file]");re==null&&(re=document.createElement("input"),re.setAttribute("type","file"),re.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),re.classList.add("ql-image"),re.addEventListener("change",function(){if(re.files!=null&&re.files[0]!=null){var ee=new FileReader;ee.onload=function(V){var X=U.quill.getSelection(!0);U.quill.updateContents(new v.default().retain(X.index).delete(X.length).insert({image:V.target.result}),l.default.sources.USER),U.quill.setSelection(X.index+1,l.default.sources.SILENT),re.value=""},ee.readAsDataURL(re.files[0])}}),this.container.appendChild(re)),re.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Z=function($){P(U,$);function U(re,ee){A(this,U);var V=S(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,re,ee));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return F(U,[{key:"listen",value:function(){var ee=this;this.textbox.addEventListener("keydown",function(V){g.default.match(V,"enter")?(ee.save(),V.preventDefault()):g.default.match(V,"escape")&&(ee.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:ee!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+ee)||""),this.root.setAttribute("data-mode",ee)}},{key:"restoreFocus",value:function(){var ee=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=ee}},{key:"save",value:function(){var ee=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",ee,l.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",ee,l.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":ee=q(ee);case"formula":{if(!ee)break;var X=this.quill.getSelection(!0);if(X!=null){var ie=X.index+X.length;this.quill.insertEmbed(ie,this.root.getAttribute("data-mode"),ee,l.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ie+1," ",l.default.sources.USER),this.quill.setSelection(ie+2,l.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),U}(N.default);function q($){var U=$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return U?(U[1]||"https")+"://www.youtube.com/embed/"+U[2]+"?showinfo=0":(U=$.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(U[1]||"https")+"://player.vimeo.com/video/"+U[2]+"/":$}function B($,U){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;U.forEach(function(ee){var V=document.createElement("option");ee===re?V.setAttribute("selected","selected"):V.setAttribute("value",ee),$.appendChild(V)})}M.BaseTooltip=Z,M.default=te},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function C(){this.head=this.tail=null,this.length=0}return C.prototype.append=function(){for(var _=[],w=0;w<arguments.length;w++)_[w]=arguments[w];this.insertBefore(_[0],null),_.length>1&&this.append.apply(this,_.slice(1))},C.prototype.contains=function(_){for(var w,y=this.iterator();w=y();)if(w===_)return!0;return!1},C.prototype.insertBefore=function(_,w){!_||(_.next=w,w!=null?(_.prev=w.prev,w.prev!=null&&(w.prev.next=_),w.prev=_,w===this.head&&(this.head=_)):this.tail!=null?(this.tail.next=_,_.prev=this.tail,this.tail=_):(_.prev=null,this.head=this.tail=_),this.length+=1)},C.prototype.offset=function(_){for(var w=0,y=this.head;y!=null;){if(y===_)return w;w+=y.length(),y=y.next}return-1},C.prototype.remove=function(_){!this.contains(_)||(_.prev!=null&&(_.prev.next=_.next),_.next!=null&&(_.next.prev=_.prev),_===this.head&&(this.head=_.next),_===this.tail&&(this.tail=_.prev),this.length-=1)},C.prototype.iterator=function(_){return _===void 0&&(_=this.head),function(){var w=_;return _!=null&&(_=_.next),w}},C.prototype.find=function(_,w){w===void 0&&(w=!1);for(var y,v=this.iterator();y=v();){var r=y.length();if(_<r||w&&_===r&&(y.next==null||y.next.length()!==0))return[y,_];_-=r}return[null,0]},C.prototype.forEach=function(_){for(var w,y=this.iterator();w=y();)_(w)},C.prototype.forEachAt=function(_,w,y){if(!(w<=0))for(var v=this.find(_),r=v[0],l=v[1],i,g=_-l,b=this.iterator(r);(i=b())&&g<_+w;){var h=i.length();_>g?y(i,_-g,Math.min(w,g+h-_)):y(i,0,Math.min(h,_+w-g)),g+=h}},C.prototype.map=function(_){return this.reduce(function(w,y){return w.push(_(y)),w},[])},C.prototype.reduce=function(_,w){for(var y,v=this.iterator();y=v();)w=_(w,y);return w},C}();M.default=F},function(H,M,D){var F=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,i){l.__proto__=i}||function(l,i){for(var g in i)i.hasOwnProperty(g)&&(l[g]=i[g])};return function(l,i){r(l,i);function g(){this.constructor=l}l.prototype=i===null?Object.create(i):(g.prototype=i.prototype,new g)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(17),_=D(1),w={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},y=100,v=function(r){F(l,r);function l(i){var g=r.call(this,i)||this;return g.scroll=g,g.observer=new MutationObserver(function(b){g.update(b)}),g.observer.observe(g.domNode,w),g.attach(),g}return l.prototype.detach=function(){r.prototype.detach.call(this),this.observer.disconnect()},l.prototype.deleteAt=function(i,g){this.update(),i===0&&g===this.length()?this.children.forEach(function(b){b.remove()}):r.prototype.deleteAt.call(this,i,g)},l.prototype.formatAt=function(i,g,b,h){this.update(),r.prototype.formatAt.call(this,i,g,b,h)},l.prototype.insertAt=function(i,g,b){this.update(),r.prototype.insertAt.call(this,i,g,b)},l.prototype.optimize=function(i,g){var b=this;i===void 0&&(i=[]),g===void 0&&(g={}),r.prototype.optimize.call(this,g);for(var h=[].slice.call(this.observer.takeRecords());h.length>0;)i.push(h.pop());for(var u=function(m,p){p===void 0&&(p=!0),!(m==null||m===b)&&m.domNode.parentNode!=null&&(m.domNode[_.DATA_KEY].mutations==null&&(m.domNode[_.DATA_KEY].mutations=[]),p&&u(m.parent))},o=function(m){m.domNode[_.DATA_KEY]==null||m.domNode[_.DATA_KEY].mutations==null||(m instanceof C.default&&m.children.forEach(o),m.optimize(g))},a=i,s=0;a.length>0;s+=1){if(s>=y)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(function(m){var p=_.find(m.target,!0);p!=null&&(p.domNode===m.target&&(m.type==="childList"?(u(_.find(m.previousSibling,!1)),[].forEach.call(m.addedNodes,function(O){var N=_.find(O,!1);u(N,!1),N instanceof C.default&&N.children.forEach(function(I){u(I,!1)})})):m.type==="attributes"&&u(p.prev)),u(p))}),this.children.forEach(o),a=[].slice.call(this.observer.takeRecords()),h=a.slice();h.length>0;)i.push(h.pop())}},l.prototype.update=function(i,g){var b=this;g===void 0&&(g={}),i=i||this.observer.takeRecords(),i.map(function(h){var u=_.find(h.target,!0);return u==null?null:u.domNode[_.DATA_KEY].mutations==null?(u.domNode[_.DATA_KEY].mutations=[h],u):(u.domNode[_.DATA_KEY].mutations.push(h),null)}).forEach(function(h){h==null||h===b||h.domNode[_.DATA_KEY]==null||h.update(h.domNode[_.DATA_KEY].mutations||[],g)}),this.domNode[_.DATA_KEY].mutations!=null&&r.prototype.update.call(this,this.domNode[_.DATA_KEY].mutations,g),this.optimize(i,g)},l.blotName="scroll",l.defaultChild="block",l.scope=_.Scope.BLOCK_BLOT,l.tagName="DIV",l}(C.default);M.default=v},function(H,M,D){var F=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var i in l)l.hasOwnProperty(i)&&(r[i]=l[i])};return function(r,l){v(r,l);function i(){this.constructor=r}r.prototype=l===null?Object.create(l):(i.prototype=l.prototype,new i)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(18),_=D(1);function w(v,r){if(Object.keys(v).length!==Object.keys(r).length)return!1;for(var l in v)if(v[l]!==r[l])return!1;return!0}var y=function(v){F(r,v);function r(){return v!==null&&v.apply(this,arguments)||this}return r.formats=function(l){if(l.tagName!==r.tagName)return v.formats.call(this,l)},r.prototype.format=function(l,i){var g=this;l===this.statics.blotName&&!i?(this.children.forEach(function(b){b instanceof C.default||(b=b.wrap(r.blotName,!0)),g.attributes.copy(b)}),this.unwrap()):v.prototype.format.call(this,l,i)},r.prototype.formatAt=function(l,i,g,b){if(this.formats()[g]!=null||_.query(g,_.Scope.ATTRIBUTE)){var h=this.isolate(l,i);h.format(g,b)}else v.prototype.formatAt.call(this,l,i,g,b)},r.prototype.optimize=function(l){v.prototype.optimize.call(this,l);var i=this.formats();if(Object.keys(i).length===0)return this.unwrap();var g=this.next;g instanceof r&&g.prev===this&&w(i,g.formats())&&(g.moveChildren(this),g.remove())},r.blotName="inline",r.scope=_.Scope.INLINE_BLOT,r.tagName="SPAN",r}(C.default);M.default=y},function(H,M,D){var F=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,r){v.__proto__=r}||function(v,r){for(var l in r)r.hasOwnProperty(l)&&(v[l]=r[l])};return function(v,r){y(v,r);function l(){this.constructor=v}v.prototype=r===null?Object.create(r):(l.prototype=r.prototype,new l)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(18),_=D(1),w=function(y){F(v,y);function v(){return y!==null&&y.apply(this,arguments)||this}return v.formats=function(r){var l=_.query(v.blotName).tagName;if(r.tagName!==l)return y.formats.call(this,r)},v.prototype.format=function(r,l){_.query(r,_.Scope.BLOCK)!=null&&(r===this.statics.blotName&&!l?this.replaceWith(v.blotName):y.prototype.format.call(this,r,l))},v.prototype.formatAt=function(r,l,i,g){_.query(i,_.Scope.BLOCK)!=null?this.format(i,g):y.prototype.formatAt.call(this,r,l,i,g)},v.prototype.insertAt=function(r,l,i){if(i==null||_.query(l,_.Scope.INLINE)!=null)y.prototype.insertAt.call(this,r,l,i);else{var g=this.split(r),b=_.create(l,i);g.parent.insertBefore(b,g)}},v.prototype.update=function(r,l){navigator.userAgent.match(/Trident/)?this.build():y.prototype.update.call(this,r,l)},v.blotName="block",v.scope=_.Scope.BLOCK_BLOT,v.tagName="P",v}(C.default);M.default=w},function(H,M,D){var F=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var r in v)v.hasOwnProperty(r)&&(y[r]=v[r])};return function(y,v){w(y,v);function r(){this.constructor=y}y.prototype=v===null?Object.create(v):(r.prototype=v.prototype,new r)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(19),_=function(w){F(y,w);function y(){return w!==null&&w.apply(this,arguments)||this}return y.formats=function(v){},y.prototype.format=function(v,r){w.prototype.formatAt.call(this,0,this.length(),v,r)},y.prototype.formatAt=function(v,r,l,i){v===0&&r===this.length()?this.format(l,i):w.prototype.formatAt.call(this,v,r,l,i)},y.prototype.formats=function(){return this.statics.formats(this.domNode)},y}(C.default);M.default=_},function(H,M,D){var F=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,r){v.__proto__=r}||function(v,r){for(var l in r)r.hasOwnProperty(l)&&(v[l]=r[l])};return function(v,r){y(v,r);function l(){this.constructor=v}v.prototype=r===null?Object.create(r):(l.prototype=r.prototype,new l)}}();Object.defineProperty(M,"__esModule",{value:!0});var C=D(19),_=D(1),w=function(y){F(v,y);function v(r){var l=y.call(this,r)||this;return l.text=l.statics.value(l.domNode),l}return v.create=function(r){return document.createTextNode(r)},v.value=function(r){var l=r.data;return l.normalize&&(l=l.normalize()),l},v.prototype.deleteAt=function(r,l){this.domNode.data=this.text=this.text.slice(0,r)+this.text.slice(r+l)},v.prototype.index=function(r,l){return this.domNode===r?l:-1},v.prototype.insertAt=function(r,l,i){i==null?(this.text=this.text.slice(0,r)+l+this.text.slice(r),this.domNode.data=this.text):y.prototype.insertAt.call(this,r,l,i)},v.prototype.length=function(){return this.text.length},v.prototype.optimize=function(r){y.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof v&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},v.prototype.position=function(r,l){return[this.domNode,r]},v.prototype.split=function(r,l){if(l===void 0&&(l=!1),!l){if(r===0)return this;if(r===this.length())return this.next}var i=_.create(this.domNode.splitText(r));return this.parent.insertBefore(i,this.next),this.text=this.statics.value(this.domNode),i},v.prototype.update=function(r,l){var i=this;r.some(function(g){return g.type==="characterData"&&g.target===i.domNode})&&(this.text=this.statics.value(this.domNode))},v.prototype.value=function(){return this.text},v.blotName="text",v.scope=_.Scope.INLINE_BLOT,v}(C.default);M.default=w},function(H,M,D){var F=document.createElement("div");if(F.classList.toggle("test-class",!1),F.classList.contains("test-class")){var C=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(_,w){return arguments.length>1&&!this.contains(_)==!w?w:C.call(this,_)}}String.prototype.startsWith||(String.prototype.startsWith=function(_,w){return w=w||0,this.substr(w,_.length)===_}),String.prototype.endsWith||(String.prototype.endsWith=function(_,w){var y=this.toString();(typeof w!="number"||!isFinite(w)||Math.floor(w)!==w||w>y.length)&&(w=y.length),w-=_.length;var v=y.indexOf(_,w);return v!==-1&&v===w}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(w){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof w!="function")throw new TypeError("predicate must be a function");for(var y=Object(this),v=y.length>>>0,r=arguments[1],l,i=0;i<v;i++)if(l=y[i],w.call(r,l,i,y))return l}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(H,M){var D=-1,F=1,C=0;function _(s,m,p){if(s==m)return s?[[C,s]]:[];(p<0||s.length<p)&&(p=null);var O=r(s,m),N=s.substring(0,O);s=s.substring(O),m=m.substring(O),O=l(s,m);var I=s.substring(s.length-O);s=s.substring(0,s.length-O),m=m.substring(0,m.length-O);var A=w(s,m);return N&&A.unshift([C,N]),I&&A.push([C,I]),g(A),p!=null&&(A=u(A,p)),A=o(A),A}function w(s,m){var p;if(!s)return[[F,m]];if(!m)return[[D,s]];var O=s.length>m.length?s:m,N=s.length>m.length?m:s,I=O.indexOf(N);if(I!=-1)return p=[[F,O.substring(0,I)],[C,N],[F,O.substring(I+N.length)]],s.length>m.length&&(p[0][0]=p[2][0]=D),p;if(N.length==1)return[[D,s],[F,m]];var A=i(s,m);if(A){var S=A[0],P=A[1],x=A[2],R=A[3],L=A[4],J=_(S,x),z=_(P,R);return J.concat([[C,L]],z)}return y(s,m)}function y(s,m){for(var p=s.length,O=m.length,N=Math.ceil((p+O)/2),I=N,A=2*N,S=new Array(A),P=new Array(A),x=0;x<A;x++)S[x]=-1,P[x]=-1;S[I+1]=0,P[I+1]=0;for(var R=p-O,L=R%2!=0,J=0,z=0,te=0,Z=0,q=0;q<N;q++){for(var B=-q+J;B<=q-z;B+=2){var $=I+B,U;B==-q||B!=q&&S[$-1]<S[$+1]?U=S[$+1]:U=S[$-1]+1;for(var re=U-B;U<p&&re<O&&s.charAt(U)==m.charAt(re);)U++,re++;if(S[$]=U,U>p)z+=2;else if(re>O)J+=2;else if(L){var ee=I+R-B;if(ee>=0&&ee<A&&P[ee]!=-1){var V=p-P[ee];if(U>=V)return v(s,m,U,re)}}}for(var X=-q+te;X<=q-Z;X+=2){var ee=I+X,V;X==-q||X!=q&&P[ee-1]<P[ee+1]?V=P[ee+1]:V=P[ee-1]+1;for(var ie=V-X;V<p&&ie<O&&s.charAt(p-V-1)==m.charAt(O-ie-1);)V++,ie++;if(P[ee]=V,V>p)Z+=2;else if(ie>O)te+=2;else if(!L){var $=I+R-X;if($>=0&&$<A&&S[$]!=-1){var U=S[$],re=I+U-$;if(V=p-V,U>=V)return v(s,m,U,re)}}}}return[[D,s],[F,m]]}function v(s,m,p,O){var N=s.substring(0,p),I=m.substring(0,O),A=s.substring(p),S=m.substring(O),P=_(N,I),x=_(A,S);return P.concat(x)}function r(s,m){if(!s||!m||s.charAt(0)!=m.charAt(0))return 0;for(var p=0,O=Math.min(s.length,m.length),N=O,I=0;p<N;)s.substring(I,N)==m.substring(I,N)?(p=N,I=p):O=N,N=Math.floor((O-p)/2+p);return N}function l(s,m){if(!s||!m||s.charAt(s.length-1)!=m.charAt(m.length-1))return 0;for(var p=0,O=Math.min(s.length,m.length),N=O,I=0;p<N;)s.substring(s.length-N,s.length-I)==m.substring(m.length-N,m.length-I)?(p=N,I=p):O=N,N=Math.floor((O-p)/2+p);return N}function i(s,m){var p=s.length>m.length?s:m,O=s.length>m.length?m:s;if(p.length<4||O.length*2<p.length)return null;function N(z,te,Z){for(var q=z.substring(Z,Z+Math.floor(z.length/4)),B=-1,$="",U,re,ee,V;(B=te.indexOf(q,B+1))!=-1;){var X=r(z.substring(Z),te.substring(B)),ie=l(z.substring(0,Z),te.substring(0,B));$.length<ie+X&&($=te.substring(B-ie,B)+te.substring(B,B+X),U=z.substring(0,Z-ie),re=z.substring(Z+X),ee=te.substring(0,B-ie),V=te.substring(B+X))}return $.length*2>=z.length?[U,re,ee,V,$]:null}var I=N(p,O,Math.ceil(p.length/4)),A=N(p,O,Math.ceil(p.length/2)),S;if(!I&&!A)return null;A?I?S=I[4].length>A[4].length?I:A:S=A:S=I;var P,x,R,L;s.length>m.length?(P=S[0],x=S[1],R=S[2],L=S[3]):(R=S[0],L=S[1],P=S[2],x=S[3]);var J=S[4];return[P,x,R,L,J]}function g(s){s.push([C,""]);for(var m=0,p=0,O=0,N="",I="",A;m<s.length;)switch(s[m][0]){case F:O++,I+=s[m][1],m++;break;case D:p++,N+=s[m][1],m++;break;case C:p+O>1?(p!==0&&O!==0&&(A=r(I,N),A!==0&&(m-p-O>0&&s[m-p-O-1][0]==C?s[m-p-O-1][1]+=I.substring(0,A):(s.splice(0,0,[C,I.substring(0,A)]),m++),I=I.substring(A),N=N.substring(A)),A=l(I,N),A!==0&&(s[m][1]=I.substring(I.length-A)+s[m][1],I=I.substring(0,I.length-A),N=N.substring(0,N.length-A))),p===0?s.splice(m-O,p+O,[F,I]):O===0?s.splice(m-p,p+O,[D,N]):s.splice(m-p-O,p+O,[D,N],[F,I]),m=m-p-O+(p?1:0)+(O?1:0)+1):m!==0&&s[m-1][0]==C?(s[m-1][1]+=s[m][1],s.splice(m,1)):m++,O=0,p=0,N="",I="";break}s[s.length-1][1]===""&&s.pop();var S=!1;for(m=1;m<s.length-1;)s[m-1][0]==C&&s[m+1][0]==C&&(s[m][1].substring(s[m][1].length-s[m-1][1].length)==s[m-1][1]?(s[m][1]=s[m-1][1]+s[m][1].substring(0,s[m][1].length-s[m-1][1].length),s[m+1][1]=s[m-1][1]+s[m+1][1],s.splice(m-1,1),S=!0):s[m][1].substring(0,s[m+1][1].length)==s[m+1][1]&&(s[m-1][1]+=s[m+1][1],s[m][1]=s[m][1].substring(s[m+1][1].length)+s[m+1][1],s.splice(m+1,1),S=!0)),m++;S&&g(s)}var b=_;b.INSERT=F,b.DELETE=D,b.EQUAL=C,H.exports=b;function h(s,m){if(m===0)return[C,s];for(var p=0,O=0;O<s.length;O++){var N=s[O];if(N[0]===D||N[0]===C){var I=p+N[1].length;if(m===I)return[O+1,s];if(m<I){s=s.slice();var A=m-p,S=[N[0],N[1].slice(0,A)],P=[N[0],N[1].slice(A)];return s.splice(O,1,S,P),[O+1,s]}else p=I}}throw new Error("cursor_pos is out of bounds!")}function u(s,m){var p=h(s,m),O=p[1],N=p[0],I=O[N],A=O[N+1];if(I==null)return s;if(I[0]!==C)return s;if(A!=null&&I[1]+A[1]===A[1]+I[1])return O.splice(N,2,A,I),a(O,N,2);if(A!=null&&A[1].indexOf(I[1])===0){O.splice(N,2,[A[0],I[1]],[0,I[1]]);var S=A[1].slice(I[1].length);return S.length>0&&O.splice(N+2,0,[A[0],S]),a(O,N,3)}else return s}function o(s){for(var m=!1,p=function(A){return A.charCodeAt(0)>=56320&&A.charCodeAt(0)<=57343},O=function(A){return A.charCodeAt(A.length-1)>=55296&&A.charCodeAt(A.length-1)<=56319},N=2;N<s.length;N+=1)s[N-2][0]===C&&O(s[N-2][1])&&s[N-1][0]===D&&p(s[N-1][1])&&s[N][0]===F&&p(s[N][1])&&(m=!0,s[N-1][1]=s[N-2][1].slice(-1)+s[N-1][1],s[N][1]=s[N-2][1].slice(-1)+s[N][1],s[N-2][1]=s[N-2][1].slice(0,-1));if(!m)return s;for(var I=[],N=0;N<s.length;N+=1)s[N][1].length>0&&I.push(s[N]);return I}function a(s,m,p){for(var O=m+p-1;O>=0&&O>=m-1;O--)if(O+1<s.length){var N=s[O],I=s[O+1];N[0]===I[1]&&s.splice(O,2,[N[0],N[1]+I[1]])}return s}},function(H,M){M=H.exports=typeof Object.keys=="function"?Object.keys:D,M.shim=D;function D(F){var C=[];for(var _ in F)C.push(_);return C}},function(H,M){var D=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";M=H.exports=D?F:C,M.supported=F;function F(_){return Object.prototype.toString.call(_)=="[object Arguments]"}M.unsupported=C;function C(_){return _&&typeof _=="object"&&typeof _.length=="number"&&Object.prototype.hasOwnProperty.call(_,"callee")&&!Object.prototype.propertyIsEnumerable.call(_,"callee")||!1}},function(H,M){var D=Object.prototype.hasOwnProperty,F="~";function C(){}Object.create&&(C.prototype=Object.create(null),new C().__proto__||(F=!1));function _(y,v,r){this.fn=y,this.context=v,this.once=r||!1}function w(){this._events=new C,this._eventsCount=0}w.prototype.eventNames=function(){var v=[],r,l;if(this._eventsCount===0)return v;for(l in r=this._events)D.call(r,l)&&v.push(F?l.slice(1):l);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(r)):v},w.prototype.listeners=function(v,r){var l=F?F+v:v,i=this._events[l];if(r)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var g=0,b=i.length,h=new Array(b);g<b;g++)h[g]=i[g].fn;return h},w.prototype.emit=function(v,r,l,i,g,b){var h=F?F+v:v;if(!this._events[h])return!1;var u=this._events[h],o=arguments.length,a,s;if(u.fn){switch(u.once&&this.removeListener(v,u.fn,void 0,!0),o){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,l),!0;case 4:return u.fn.call(u.context,r,l,i),!0;case 5:return u.fn.call(u.context,r,l,i,g),!0;case 6:return u.fn.call(u.context,r,l,i,g,b),!0}for(s=1,a=new Array(o-1);s<o;s++)a[s-1]=arguments[s];u.fn.apply(u.context,a)}else{var m=u.length,p;for(s=0;s<m;s++)switch(u[s].once&&this.removeListener(v,u[s].fn,void 0,!0),o){case 1:u[s].fn.call(u[s].context);break;case 2:u[s].fn.call(u[s].context,r);break;case 3:u[s].fn.call(u[s].context,r,l);break;case 4:u[s].fn.call(u[s].context,r,l,i);break;default:if(!a)for(p=1,a=new Array(o-1);p<o;p++)a[p-1]=arguments[p];u[s].fn.apply(u[s].context,a)}}return!0},w.prototype.on=function(v,r,l){var i=new _(r,l||this),g=F?F+v:v;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],i]:this._events[g].push(i):(this._events[g]=i,this._eventsCount++),this},w.prototype.once=function(v,r,l){var i=new _(r,l||this,!0),g=F?F+v:v;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],i]:this._events[g].push(i):(this._events[g]=i,this._eventsCount++),this},w.prototype.removeListener=function(v,r,l,i){var g=F?F+v:v;if(!this._events[g])return this;if(!r)return--this._eventsCount===0?this._events=new C:delete this._events[g],this;var b=this._events[g];if(b.fn)b.fn===r&&(!i||b.once)&&(!l||b.context===l)&&(--this._eventsCount===0?this._events=new C:delete this._events[g]);else{for(var h=0,u=[],o=b.length;h<o;h++)(b[h].fn!==r||i&&!b[h].once||l&&b[h].context!==l)&&u.push(b[h]);u.length?this._events[g]=u.length===1?u[0]:u:--this._eventsCount===0?this._events=new C:delete this._events[g]}return this},w.prototype.removeAllListeners=function(v){var r;return v?(r=F?F+v:v,this._events[r]&&(--this._eventsCount===0?this._events=new C:delete this._events[r])):(this._events=new C,this._eventsCount=0),this},w.prototype.off=w.prototype.removeListener,w.prototype.addListener=w.prototype.on,w.prototype.setMaxListeners=function(){return this},w.prefixed=F,w.EventEmitter=w,typeof H<"u"&&(H.exports=w)},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.matchText=M.matchSpacing=M.matchNewline=M.matchBlot=M.matchAttributor=M.default=void 0;var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},C=function(){function G(se,oe){var we=[],me=!0,Pe=!1,Be=void 0;try{for(var qe=se[Symbol.iterator](),at;!(me=(at=qe.next()).done)&&(we.push(at.value),!(oe&&we.length===oe));me=!0);}catch(ft){Pe=!0,Be=ft}finally{try{!me&&qe.return&&qe.return()}finally{if(Pe)throw Be}}return we}return function(se,oe){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return G(se,oe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function G(se,oe){for(var we=0;we<oe.length;we++){var me=oe[we];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(se,me.key,me)}}return function(se,oe,we){return oe&&G(se.prototype,oe),we&&G(se,we),se}}(),w=D(3),y=P(w),v=D(2),r=P(v),l=D(0),i=P(l),g=D(5),b=P(g),h=D(10),u=P(h),o=D(9),a=P(o),s=D(36),m=D(37),p=D(13),O=P(p),N=D(26),I=D(38),A=D(39),S=D(40);function P(G){return G&&G.__esModule?G:{default:G}}function x(G,se,oe){return se in G?Object.defineProperty(G,se,{value:oe,enumerable:!0,configurable:!0,writable:!0}):G[se]=oe,G}function R(G,se){if(!(G instanceof se))throw new TypeError("Cannot call a class as a function")}function L(G,se){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:G}function J(G,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);G.prototype=Object.create(se&&se.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(G,se):G.__proto__=se)}var z=(0,u.default)("quill:clipboard"),te="__ql-matcher",Z=[[Node.TEXT_NODE,ue],[Node.TEXT_NODE,Me],["br",_e],[Node.ELEMENT_NODE,Me],[Node.ELEMENT_NODE,ve],[Node.ELEMENT_NODE,Q],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,ce],["li",Le],["b",ie.bind(ie,"bold")],["i",ie.bind(ie,"italic")],["style",Ne]],q=[s.AlignAttribute,I.DirectionAttribute].reduce(function(G,se){return G[se.keyName]=se,G},{}),B=[s.AlignStyle,m.BackgroundStyle,N.ColorStyle,I.DirectionStyle,A.FontStyle,S.SizeStyle].reduce(function(G,se){return G[se.keyName]=se,G},{}),$=function(G){J(se,G);function se(oe,we){R(this,se);var me=L(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,oe,we));return me.quill.root.addEventListener("paste",me.onPaste.bind(me)),me.container=me.quill.addContainer("ql-clipboard"),me.container.setAttribute("contenteditable",!0),me.container.setAttribute("tabindex",-1),me.matchers=[],Z.concat(me.options.matchers).forEach(function(Pe){var Be=C(Pe,2),qe=Be[0],at=Be[1];!we.matchVisual&&at===Q||me.addMatcher(qe,at)}),me}return _(se,[{key:"addMatcher",value:function(we,me){this.matchers.push([we,me])}},{key:"convert",value:function(we){if(typeof we=="string")return this.container.innerHTML=we.replace(/\>\r?\n +\</g,"><"),this.convert();var me=this.quill.getFormat(this.quill.selection.savedRange.index);if(me[O.default.blotName]){var Pe=this.container.innerText;return this.container.innerHTML="",new r.default().insert(Pe,x({},O.default.blotName,me[O.default.blotName]))}var Be=this.prepareMatching(),qe=C(Be,2),at=qe[0],ft=qe[1],Je=X(this.container,at,ft);return ee(Je,`
`)&&Je.ops[Je.ops.length-1].attributes==null&&(Je=Je.compose(new r.default().retain(Je.length()-1).delete(1))),z.log("convert",this.container.innerHTML,Je),this.container.innerHTML="",Je}},{key:"dangerouslyPasteHTML",value:function(we,me){var Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof we=="string")this.quill.setContents(this.convert(we),me),this.quill.setSelection(0,b.default.sources.SILENT);else{var Be=this.convert(me);this.quill.updateContents(new r.default().retain(we).concat(Be),Pe),this.quill.setSelection(we+Be.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(we){var me=this;if(!(we.defaultPrevented||!this.quill.isEnabled())){var Pe=this.quill.getSelection(),Be=new r.default().retain(Pe.index),qe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){Be=Be.concat(me.convert()).delete(Pe.length),me.quill.updateContents(Be,b.default.sources.USER),me.quill.setSelection(Be.length()-Pe.length,b.default.sources.SILENT),me.quill.scrollingContainer.scrollTop=qe,me.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var we=this,me=[],Pe=[];return this.matchers.forEach(function(Be){var qe=C(Be,2),at=qe[0],ft=qe[1];switch(at){case Node.TEXT_NODE:Pe.push(ft);break;case Node.ELEMENT_NODE:me.push(ft);break;default:[].forEach.call(we.container.querySelectorAll(at),function(Je){Je[te]=Je[te]||[],Je[te].push(ft)});break}}),[me,Pe]}}]),se}(a.default);$.DEFAULTS={matchers:[],matchVisual:!0};function U(G,se,oe){return(typeof se>"u"?"undefined":F(se))==="object"?Object.keys(se).reduce(function(we,me){return U(we,me,se[me])},G):G.reduce(function(we,me){return me.attributes&&me.attributes[se]?we.push(me):we.insert(me.insert,(0,y.default)({},x({},se,oe),me.attributes))},new r.default)}function re(G){if(G.nodeType!==Node.ELEMENT_NODE)return{};var se="__ql-computed-style";return G[se]||(G[se]=window.getComputedStyle(G))}function ee(G,se){for(var oe="",we=G.ops.length-1;we>=0&&oe.length<se.length;--we){var me=G.ops[we];if(typeof me.insert!="string")break;oe=me.insert+oe}return oe.slice(-1*se.length)===se}function V(G){if(G.childNodes.length===0)return!1;var se=re(G);return["block","list-item"].indexOf(se.display)>-1}function X(G,se,oe){return G.nodeType===G.TEXT_NODE?oe.reduce(function(we,me){return me(G,we)},new r.default):G.nodeType===G.ELEMENT_NODE?[].reduce.call(G.childNodes||[],function(we,me){var Pe=X(me,se,oe);return me.nodeType===G.ELEMENT_NODE&&(Pe=se.reduce(function(Be,qe){return qe(me,Be)},Pe),Pe=(me[te]||[]).reduce(function(Be,qe){return qe(me,Be)},Pe)),we.concat(Pe)},new r.default):new r.default}function ie(G,se,oe){return U(oe,G,!0)}function le(G,se){var oe=i.default.Attributor.Attribute.keys(G),we=i.default.Attributor.Class.keys(G),me=i.default.Attributor.Style.keys(G),Pe={};return oe.concat(we).concat(me).forEach(function(Be){var qe=i.default.query(Be,i.default.Scope.ATTRIBUTE);qe!=null&&(Pe[qe.attrName]=qe.value(G),Pe[qe.attrName])||(qe=q[Be],qe!=null&&(qe.attrName===Be||qe.keyName===Be)&&(Pe[qe.attrName]=qe.value(G)||void 0),qe=B[Be],qe!=null&&(qe.attrName===Be||qe.keyName===Be)&&(qe=B[Be],Pe[qe.attrName]=qe.value(G)||void 0))}),Object.keys(Pe).length>0&&(se=U(se,Pe)),se}function ve(G,se){var oe=i.default.query(G);if(oe==null)return se;if(oe.prototype instanceof i.default.Embed){var we={},me=oe.value(G);me!=null&&(we[oe.blotName]=me,se=new r.default().insert(we,oe.formats(G)))}else typeof oe.formats=="function"&&(se=U(se,oe.blotName,oe.formats(G)));return se}function _e(G,se){return ee(se,`
`)||se.insert(`
`),se}function Ne(){return new r.default}function Le(G,se){var oe=i.default.query(G);if(oe==null||oe.blotName!=="list-item"||!ee(se,`
`))return se;for(var we=-1,me=G.parentNode;!me.classList.contains("ql-clipboard");)(i.default.query(me)||{}).blotName==="list"&&(we+=1),me=me.parentNode;return we<=0?se:se.compose(new r.default().retain(se.length()-1).retain(1,{indent:we}))}function Me(G,se){return ee(se,`
`)||(V(G)||se.length()>0&&G.nextSibling&&V(G.nextSibling))&&se.insert(`
`),se}function Q(G,se){if(V(G)&&G.nextElementSibling!=null&&!ee(se,`

`)){var oe=G.offsetHeight+parseFloat(re(G).marginTop)+parseFloat(re(G).marginBottom);G.nextElementSibling.offsetTop>G.offsetTop+oe*1.5&&se.insert(`
`)}return se}function ce(G,se){var oe={},we=G.style||{};return we.fontStyle&&re(G).fontStyle==="italic"&&(oe.italic=!0),we.fontWeight&&(re(G).fontWeight.startsWith("bold")||parseInt(re(G).fontWeight)>=700)&&(oe.bold=!0),Object.keys(oe).length>0&&(se=U(se,oe)),parseFloat(we.textIndent||0)>0&&(se=new r.default().insert("	").concat(se)),se}function ue(G,se){var oe=G.data;if(G.parentNode.tagName==="O:P")return se.insert(oe.trim());if(oe.trim().length===0&&G.parentNode.classList.contains("ql-clipboard"))return se;if(!re(G.parentNode).whiteSpace.startsWith("pre")){var we=function(Pe,Be){return Be=Be.replace(/[^\u00a0]/g,""),Be.length<1&&Pe?" ":Be};oe=oe.replace(/\r\n/g," ").replace(/\n/g," "),oe=oe.replace(/\s\s+/g,we.bind(we,!0)),(G.previousSibling==null&&V(G.parentNode)||G.previousSibling!=null&&V(G.previousSibling))&&(oe=oe.replace(/^\s+/,we.bind(we,!1))),(G.nextSibling==null&&V(G.parentNode)||G.nextSibling!=null&&V(G.nextSibling))&&(oe=oe.replace(/\s+$/,we.bind(we,!1)))}return se.insert(oe)}M.default=$,M.matchAttributor=le,M.matchBlot=ve,M.matchNewline=Me,M.matchSpacing=Q,M.matchText=ue},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function g(b,h){for(var u=0;u<h.length;u++){var o=h[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(b,o.key,o)}}return function(b,h,u){return h&&g(b.prototype,h),u&&g(b,u),b}}(),C=function g(b,h,u){b===null&&(b=Function.prototype);var o=Object.getOwnPropertyDescriptor(b,h);if(o===void 0){var a=Object.getPrototypeOf(b);return a===null?void 0:g(a,h,u)}else{if("value"in o)return o.value;var s=o.get;return s===void 0?void 0:s.call(u)}},_=D(6),w=y(_);function y(g){return g&&g.__esModule?g:{default:g}}function v(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function r(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function l(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var i=function(g){l(b,g);function b(){return v(this,b),r(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return F(b,[{key:"optimize",value:function(u){C(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,u),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return C(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b}(w.default);i.blotName="bold",i.tagName=["STRONG","B"],M.default=i},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.addControls=M.default=void 0;var F=function(){function S(P,x){var R=[],L=!0,J=!1,z=void 0;try{for(var te=P[Symbol.iterator](),Z;!(L=(Z=te.next()).done)&&(R.push(Z.value),!(x&&R.length===x));L=!0);}catch(q){J=!0,z=q}finally{try{!L&&te.return&&te.return()}finally{if(J)throw z}}return R}return function(P,x){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return S(P,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function(){function S(P,x){for(var R=0;R<x.length;R++){var L=x[R];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,L.key,L)}}return function(P,x,R){return x&&S(P.prototype,x),R&&S(P,R),P}}(),_=D(2),w=u(_),y=D(0),v=u(y),r=D(5),l=u(r),i=D(10),g=u(i),b=D(9),h=u(b);function u(S){return S&&S.__esModule?S:{default:S}}function o(S,P,x){return P in S?Object.defineProperty(S,P,{value:x,enumerable:!0,configurable:!0,writable:!0}):S[P]=x,S}function a(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")}function s(S,P){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:S}function m(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(S,P):S.__proto__=P)}var p=(0,g.default)("quill:toolbar"),O=function(S){m(P,S);function P(x,R){a(this,P);var L=s(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,x,R));if(Array.isArray(L.options.container)){var J=document.createElement("div");I(J,L.options.container),x.container.parentNode.insertBefore(J,x.container),L.container=J}else typeof L.options.container=="string"?L.container=document.querySelector(L.options.container):L.container=L.options.container;if(!(L.container instanceof HTMLElement)){var z;return z=p.error("Container required for toolbar",L.options),s(L,z)}return L.container.classList.add("ql-toolbar"),L.controls=[],L.handlers={},Object.keys(L.options.handlers).forEach(function(te){L.addHandler(te,L.options.handlers[te])}),[].forEach.call(L.container.querySelectorAll("button, select"),function(te){L.attach(te)}),L.quill.on(l.default.events.EDITOR_CHANGE,function(te,Z){te===l.default.events.SELECTION_CHANGE&&L.update(Z)}),L.quill.on(l.default.events.SCROLL_OPTIMIZE,function(){var te=L.quill.selection.getRange(),Z=F(te,1),q=Z[0];L.update(q)}),L}return C(P,[{key:"addHandler",value:function(R,L){this.handlers[R]=L}},{key:"attach",value:function(R){var L=this,J=[].find.call(R.classList,function(te){return te.indexOf("ql-")===0});if(!!J){if(J=J.slice(3),R.tagName==="BUTTON"&&R.setAttribute("type","button"),this.handlers[J]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[J]==null){p.warn("ignoring attaching to disabled format",J,R);return}if(v.default.query(J)==null){p.warn("ignoring attaching to nonexistent format",J,R);return}}var z=R.tagName==="SELECT"?"change":"click";R.addEventListener(z,function(te){var Z=void 0;if(R.tagName==="SELECT"){if(R.selectedIndex<0)return;var q=R.options[R.selectedIndex];q.hasAttribute("selected")?Z=!1:Z=q.value||!1}else R.classList.contains("ql-active")?Z=!1:Z=R.value||!R.hasAttribute("value"),te.preventDefault();L.quill.focus();var B=L.quill.selection.getRange(),$=F(B,1),U=$[0];if(L.handlers[J]!=null)L.handlers[J].call(L,Z);else if(v.default.query(J).prototype instanceof v.default.Embed){if(Z=prompt("Enter "+J),!Z)return;L.quill.updateContents(new w.default().retain(U.index).delete(U.length).insert(o({},J,Z)),l.default.sources.USER)}else L.quill.format(J,Z,l.default.sources.USER);L.update(U)}),this.controls.push([J,R])}}},{key:"update",value:function(R){var L=R==null?{}:this.quill.getFormat(R);this.controls.forEach(function(J){var z=F(J,2),te=z[0],Z=z[1];if(Z.tagName==="SELECT"){var q=void 0;if(R==null)q=null;else if(L[te]==null)q=Z.querySelector("option[selected]");else if(!Array.isArray(L[te])){var B=L[te];typeof B=="string"&&(B=B.replace(/\"/g,'\\"')),q=Z.querySelector('option[value="'+B+'"]')}q==null?(Z.value="",Z.selectedIndex=-1):q.selected=!0}else if(R==null)Z.classList.remove("ql-active");else if(Z.hasAttribute("value")){var $=L[te]===Z.getAttribute("value")||L[te]!=null&&L[te].toString()===Z.getAttribute("value")||L[te]==null&&!Z.getAttribute("value");Z.classList.toggle("ql-active",$)}else Z.classList.toggle("ql-active",L[te]!=null)})}}]),P}(h.default);O.DEFAULTS={};function N(S,P,x){var R=document.createElement("button");R.setAttribute("type","button"),R.classList.add("ql-"+P),x!=null&&(R.value=x),S.appendChild(R)}function I(S,P){Array.isArray(P[0])||(P=[P]),P.forEach(function(x){var R=document.createElement("span");R.classList.add("ql-formats"),x.forEach(function(L){if(typeof L=="string")N(R,L);else{var J=Object.keys(L)[0],z=L[J];Array.isArray(z)?A(R,J,z):N(R,J,z)}}),S.appendChild(R)})}function A(S,P,x){var R=document.createElement("select");R.classList.add("ql-"+P),x.forEach(function(L){var J=document.createElement("option");L!==!1?J.setAttribute("value",L):J.setAttribute("selected","selected"),R.appendChild(J)}),S.appendChild(R)}O.DEFAULTS={container:null,handlers:{clean:function(){var P=this,x=this.quill.getSelection();if(x!=null)if(x.length==0){var R=this.quill.getFormat();Object.keys(R).forEach(function(L){v.default.query(L,v.default.Scope.INLINE)!=null&&P.quill.format(L,!1)})}else this.quill.removeFormat(x,l.default.sources.USER)},direction:function(P){var x=this.quill.getFormat().align;P==="rtl"&&x==null?this.quill.format("align","right",l.default.sources.USER):!P&&x==="right"&&this.quill.format("align",!1,l.default.sources.USER),this.quill.format("direction",P,l.default.sources.USER)},indent:function(P){var x=this.quill.getSelection(),R=this.quill.getFormat(x),L=parseInt(R.indent||0);if(P==="+1"||P==="-1"){var J=P==="+1"?1:-1;R.direction==="rtl"&&(J*=-1),this.quill.format("indent",L+J,l.default.sources.USER)}},link:function(P){P===!0&&(P=prompt("Enter link URL:")),this.quill.format("link",P,l.default.sources.USER)},list:function(P){var x=this.quill.getSelection(),R=this.quill.getFormat(x);P==="check"?R.list==="checked"||R.list==="unchecked"?this.quill.format("list",!1,l.default.sources.USER):this.quill.format("list","unchecked",l.default.sources.USER):this.quill.format("list",P,l.default.sources.USER)}}},M.default=O,M.addControls=I},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function g(b,h){for(var u=0;u<h.length;u++){var o=h[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(b,o.key,o)}}return function(b,h,u){return h&&g(b.prototype,h),u&&g(b,u),b}}(),C=function g(b,h,u){b===null&&(b=Function.prototype);var o=Object.getOwnPropertyDescriptor(b,h);if(o===void 0){var a=Object.getPrototypeOf(b);return a===null?void 0:g(a,h,u)}else{if("value"in o)return o.value;var s=o.get;return s===void 0?void 0:s.call(u)}},_=D(28),w=y(_);function y(g){return g&&g.__esModule?g:{default:g}}function v(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function r(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function l(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var i=function(g){l(b,g);function b(h,u){v(this,b);var o=r(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,h));return o.label.innerHTML=u,o.container.classList.add("ql-color-picker"),[].slice.call(o.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(a){a.classList.add("ql-primary")}),o}return F(b,[{key:"buildItem",value:function(u){var o=C(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,u);return o.style.backgroundColor=u.getAttribute("value")||"",o}},{key:"selectItem",value:function(u,o){C(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,u,o);var a=this.label.querySelector(".ql-color-label"),s=u&&u.getAttribute("data-value")||"";a&&(a.tagName==="line"?a.style.stroke=s:a.style.fill=s)}}]),b}(w.default);M.default=i},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function g(b,h){for(var u=0;u<h.length;u++){var o=h[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(b,o.key,o)}}return function(b,h,u){return h&&g(b.prototype,h),u&&g(b,u),b}}(),C=function g(b,h,u){b===null&&(b=Function.prototype);var o=Object.getOwnPropertyDescriptor(b,h);if(o===void 0){var a=Object.getPrototypeOf(b);return a===null?void 0:g(a,h,u)}else{if("value"in o)return o.value;var s=o.get;return s===void 0?void 0:s.call(u)}},_=D(28),w=y(_);function y(g){return g&&g.__esModule?g:{default:g}}function v(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function r(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function l(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var i=function(g){l(b,g);function b(h,u){v(this,b);var o=r(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,h));return o.container.classList.add("ql-icon-picker"),[].forEach.call(o.container.querySelectorAll(".ql-picker-item"),function(a){a.innerHTML=u[a.getAttribute("data-value")||""]}),o.defaultItem=o.container.querySelector(".ql-selected"),o.selectItem(o.defaultItem),o}return F(b,[{key:"selectItem",value:function(u,o){C(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,u,o),u=u||this.defaultItem,this.label.innerHTML=u.innerHTML}}]),b}(w.default);M.default=i},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function w(y,v){for(var r=0;r<v.length;r++){var l=v[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(y,l.key,l)}}return function(y,v,r){return v&&w(y.prototype,v),r&&w(y,r),y}}();function C(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}var _=function(){function w(y,v){var r=this;C(this,w),this.quill=y,this.boundsContainer=v||document.body,this.root=y.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){r.root.style.marginTop=-1*r.quill.root.scrollTop+"px"}),this.hide()}return F(w,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(v){var r=v.left+v.width/2-this.root.offsetWidth/2,l=v.bottom+this.quill.root.scrollTop;this.root.style.left=r+"px",this.root.style.top=l+"px",this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),g=this.root.getBoundingClientRect(),b=0;if(g.right>i.right&&(b=i.right-g.right,this.root.style.left=r+b+"px"),g.left<i.left&&(b=i.left-g.left,this.root.style.left=r+b+"px"),g.bottom>i.bottom){var h=g.bottom-g.top,u=v.bottom-v.top+h;this.root.style.top=l-u+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),w}();M.default=_},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function A(S,P){var x=[],R=!0,L=!1,J=void 0;try{for(var z=S[Symbol.iterator](),te;!(R=(te=z.next()).done)&&(x.push(te.value),!(P&&x.length===P));R=!0);}catch(Z){L=!0,J=Z}finally{try{!R&&z.return&&z.return()}finally{if(L)throw J}}return x}return function(S,P){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return A(S,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function A(S,P,x){S===null&&(S=Function.prototype);var R=Object.getOwnPropertyDescriptor(S,P);if(R===void 0){var L=Object.getPrototypeOf(S);return L===null?void 0:A(L,P,x)}else{if("value"in R)return R.value;var J=R.get;return J===void 0?void 0:J.call(x)}},_=function(){function A(S,P){for(var x=0;x<P.length;x++){var R=P[x];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(S,R.key,R)}}return function(S,P,x){return P&&A(S.prototype,P),x&&A(S,x),S}}(),w=D(3),y=a(w),v=D(8),r=a(v),l=D(43),i=a(l),g=D(27),b=a(g),h=D(15),u=D(41),o=a(u);function a(A){return A&&A.__esModule?A:{default:A}}function s(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function m(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:A}function p(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}var O=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],N=function(A){p(S,A);function S(P,x){s(this,S),x.modules.toolbar!=null&&x.modules.toolbar.container==null&&(x.modules.toolbar.container=O);var R=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P,x));return R.quill.container.classList.add("ql-snow"),R}return _(S,[{key:"extendToolbar",value:function(x){x.container.classList.add("ql-snow"),this.buildButtons([].slice.call(x.container.querySelectorAll("button")),o.default),this.buildPickers([].slice.call(x.container.querySelectorAll("select")),o.default),this.tooltip=new I(this.quill,this.options.bounds),x.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(R,L){x.handlers.link.call(x,!L.format.link)})}}]),S}(i.default);N.DEFAULTS=(0,y.default)(!0,{},i.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){if(S){var P=this.quill.getSelection();if(P==null||P.length==0)return;var x=this.quill.getText(P);/^\S+@\S+\.\S+$/.test(x)&&x.indexOf("mailto:")!==0&&(x="mailto:"+x);var R=this.quill.theme.tooltip;R.edit("link",x)}else this.quill.format("link",!1)}}}}});var I=function(A){p(S,A);function S(P,x){s(this,S);var R=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P,x));return R.preview=R.root.querySelector("a.ql-preview"),R}return _(S,[{key:"listen",value:function(){var x=this;C(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(R){x.root.classList.contains("ql-editing")?x.save():x.edit("link",x.preview.textContent),R.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(R){if(x.linkRange!=null){var L=x.linkRange;x.restoreFocus(),x.quill.formatText(L,"link",!1,r.default.sources.USER),delete x.linkRange}R.preventDefault(),x.hide()}),this.quill.on(r.default.events.SELECTION_CHANGE,function(R,L,J){if(R!=null){if(R.length===0&&J===r.default.sources.USER){var z=x.quill.scroll.descendant(b.default,R.index),te=F(z,2),Z=te[0],q=te[1];if(Z!=null){x.linkRange=new h.Range(R.index-q,Z.length());var B=b.default.formats(Z.domNode);x.preview.textContent=B,x.preview.setAttribute("href",B),x.show(),x.position(x.quill.getBounds(x.linkRange));return}}else delete x.linkRange;x.hide()}})}},{key:"show",value:function(){C(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),S}(l.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),M.default=N},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(29),C=me(F),_=D(36),w=D(38),y=D(64),v=D(65),r=me(v),l=D(66),i=me(l),g=D(67),b=me(g),h=D(37),u=D(26),o=D(39),a=D(40),s=D(56),m=me(s),p=D(68),O=me(p),N=D(27),I=me(N),A=D(69),S=me(A),P=D(70),x=me(P),R=D(71),L=me(R),J=D(72),z=me(J),te=D(73),Z=me(te),q=D(13),B=me(q),$=D(74),U=me($),re=D(75),ee=me(re),V=D(57),X=me(V),ie=D(41),le=me(ie),ve=D(28),_e=me(ve),Ne=D(59),Le=me(Ne),Me=D(60),Q=me(Me),ce=D(61),ue=me(ce),G=D(108),se=me(G),oe=D(62),we=me(oe);function me(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}C.default.register({"attributors/attribute/direction":w.DirectionAttribute,"attributors/class/align":_.AlignClass,"attributors/class/background":h.BackgroundClass,"attributors/class/color":u.ColorClass,"attributors/class/direction":w.DirectionClass,"attributors/class/font":o.FontClass,"attributors/class/size":a.SizeClass,"attributors/style/align":_.AlignStyle,"attributors/style/background":h.BackgroundStyle,"attributors/style/color":u.ColorStyle,"attributors/style/direction":w.DirectionStyle,"attributors/style/font":o.FontStyle,"attributors/style/size":a.SizeStyle},!0),C.default.register({"formats/align":_.AlignClass,"formats/direction":w.DirectionClass,"formats/indent":y.IndentClass,"formats/background":h.BackgroundStyle,"formats/color":u.ColorStyle,"formats/font":o.FontClass,"formats/size":a.SizeClass,"formats/blockquote":r.default,"formats/code-block":B.default,"formats/header":i.default,"formats/list":b.default,"formats/bold":m.default,"formats/code":q.Code,"formats/italic":O.default,"formats/link":I.default,"formats/script":S.default,"formats/strike":x.default,"formats/underline":L.default,"formats/image":z.default,"formats/video":Z.default,"formats/list/item":g.ListItem,"modules/formula":U.default,"modules/syntax":ee.default,"modules/toolbar":X.default,"themes/bubble":se.default,"themes/snow":we.default,"ui/icons":le.default,"ui/picker":_e.default,"ui/icon-picker":Q.default,"ui/color-picker":Le.default,"ui/tooltip":ue.default},!0),M.default=C.default},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.IndentClass=void 0;var F=function(){function b(h,u){for(var o=0;o<u.length;o++){var a=u[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(h,a.key,a)}}return function(h,u,o){return u&&b(h.prototype,u),o&&b(h,o),h}}(),C=function b(h,u,o){h===null&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,u);if(a===void 0){var s=Object.getPrototypeOf(h);return s===null?void 0:b(s,u,o)}else{if("value"in a)return a.value;var m=a.get;return m===void 0?void 0:m.call(o)}},_=D(0),w=y(_);function y(b){return b&&b.__esModule?b:{default:b}}function v(b,h){if(!(b instanceof h))throw new TypeError("Cannot call a class as a function")}function r(b,h){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:b}function l(b,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);b.prototype=Object.create(h&&h.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(b,h):b.__proto__=h)}var i=function(b){l(h,b);function h(){return v(this,h),r(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return F(h,[{key:"add",value:function(o,a){if(a==="+1"||a==="-1"){var s=this.value(o)||0;a=a==="+1"?s+1:s-1}return a===0?(this.remove(o),!0):C(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"add",this).call(this,o,a)}},{key:"canAdd",value:function(o,a){return C(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"canAdd",this).call(this,o,a)||C(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"canAdd",this).call(this,o,parseInt(a))}},{key:"value",value:function(o){return parseInt(C(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"value",this).call(this,o))||void 0}}]),h}(w.default.Attributor.Class),g=new i("indent","ql-indent",{scope:w.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});M.IndentClass=g},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(4),C=_(F);function _(l){return l&&l.__esModule?l:{default:l}}function w(l,i){if(!(l instanceof i))throw new TypeError("Cannot call a class as a function")}function y(l,i){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:l}function v(l,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);l.prototype=Object.create(i&&i.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(l,i):l.__proto__=i)}var r=function(l){v(i,l);function i(){return w(this,i),y(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return i}(C.default);r.blotName="blockquote",r.tagName="blockquote",M.default=r},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function i(g,b){for(var h=0;h<b.length;h++){var u=b[h];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(g,u.key,u)}}return function(g,b,h){return b&&i(g.prototype,b),h&&i(g,h),g}}(),C=D(4),_=w(C);function w(i){return i&&i.__esModule?i:{default:i}}function y(i,g){if(!(i instanceof g))throw new TypeError("Cannot call a class as a function")}function v(i,g){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:i}function r(i,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);i.prototype=Object.create(g&&g.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(i,g):i.__proto__=g)}var l=function(i){r(g,i);function g(){return y(this,g),v(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return F(g,null,[{key:"formats",value:function(h){return this.tagName.indexOf(h.tagName)+1}}]),g}(_.default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],M.default=l},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.ListItem=void 0;var F=function(){function s(m,p){for(var O=0;O<p.length;O++){var N=p[O];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(m,N.key,N)}}return function(m,p,O){return p&&s(m.prototype,p),O&&s(m,O),m}}(),C=function s(m,p,O){m===null&&(m=Function.prototype);var N=Object.getOwnPropertyDescriptor(m,p);if(N===void 0){var I=Object.getPrototypeOf(m);return I===null?void 0:s(I,p,O)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(O)}},_=D(0),w=i(_),y=D(4),v=i(y),r=D(25),l=i(r);function i(s){return s&&s.__esModule?s:{default:s}}function g(s,m,p){return m in s?Object.defineProperty(s,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):s[m]=p,s}function b(s,m){if(!(s instanceof m))throw new TypeError("Cannot call a class as a function")}function h(s,m){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:s}function u(s,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);s.prototype=Object.create(m&&m.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(s,m):s.__proto__=m)}var o=function(s){u(m,s);function m(){return b(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return F(m,[{key:"format",value:function(O,N){O===a.blotName&&!N?this.replaceWith(w.default.create(this.statics.scope)):C(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,O,N)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():C(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(O,N){return this.parent.isolate(this.offset(this.parent),this.length()),O===this.parent.statics.blotName?(this.parent.replaceWith(O,N),this):(this.parent.unwrap(),C(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"replaceWith",this).call(this,O,N))}}],[{key:"formats",value:function(O){return O.tagName===this.tagName?void 0:C(m.__proto__||Object.getPrototypeOf(m),"formats",this).call(this,O)}}]),m}(v.default);o.blotName="list-item",o.tagName="LI";var a=function(s){u(m,s),F(m,null,[{key:"create",value:function(O){var N=O==="ordered"?"OL":"UL",I=C(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,N);return(O==="checked"||O==="unchecked")&&I.setAttribute("data-checked",O==="checked"),I}},{key:"formats",value:function(O){if(O.tagName==="OL")return"ordered";if(O.tagName==="UL")return O.hasAttribute("data-checked")?O.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function m(p){b(this,m);var O=h(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,p)),N=function(A){if(A.target.parentNode===p){var S=O.statics.formats(p),P=w.default.find(A.target);S==="checked"?P.format("list","unchecked"):S==="unchecked"&&P.format("list","checked")}};return p.addEventListener("touchstart",N),p.addEventListener("mousedown",N),O}return F(m,[{key:"format",value:function(O,N){this.children.length>0&&this.children.tail.format(O,N)}},{key:"formats",value:function(){return g({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(O,N){if(O instanceof o)C(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertBefore",this).call(this,O,N);else{var I=N==null?this.length():N.offset(this),A=this.split(I);A.parent.insertBefore(O,A)}}},{key:"optimize",value:function(O){C(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,O);var N=this.next;N!=null&&N.prev===this&&N.statics.blotName===this.statics.blotName&&N.domNode.tagName===this.domNode.tagName&&N.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(N.moveChildren(this),N.remove())}},{key:"replace",value:function(O){if(O.statics.blotName!==this.statics.blotName){var N=w.default.create(this.statics.defaultChild);O.moveChildren(N),this.appendChild(N)}C(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"replace",this).call(this,O)}}]),m}(l.default);a.blotName="list",a.scope=w.default.Scope.BLOCK_BLOT,a.tagName=["OL","UL"],a.defaultChild="list-item",a.allowedChildren=[o],M.ListItem=o,M.default=a},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(56),C=_(F);function _(l){return l&&l.__esModule?l:{default:l}}function w(l,i){if(!(l instanceof i))throw new TypeError("Cannot call a class as a function")}function y(l,i){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:l}function v(l,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);l.prototype=Object.create(i&&i.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(l,i):l.__proto__=i)}var r=function(l){v(i,l);function i(){return w(this,i),y(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return i}(C.default);r.blotName="italic",r.tagName=["EM","I"],M.default=r},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function g(b,h){for(var u=0;u<h.length;u++){var o=h[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(b,o.key,o)}}return function(b,h,u){return h&&g(b.prototype,h),u&&g(b,u),b}}(),C=function g(b,h,u){b===null&&(b=Function.prototype);var o=Object.getOwnPropertyDescriptor(b,h);if(o===void 0){var a=Object.getPrototypeOf(b);return a===null?void 0:g(a,h,u)}else{if("value"in o)return o.value;var s=o.get;return s===void 0?void 0:s.call(u)}},_=D(6),w=y(_);function y(g){return g&&g.__esModule?g:{default:g}}function v(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function r(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function l(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var i=function(g){l(b,g);function b(){return v(this,b),r(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return F(b,null,[{key:"create",value:function(u){return u==="super"?document.createElement("sup"):u==="sub"?document.createElement("sub"):C(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,u)}},{key:"formats",value:function(u){if(u.tagName==="SUB")return"sub";if(u.tagName==="SUP")return"super"}}]),b}(w.default);i.blotName="script",i.tagName=["SUB","SUP"],M.default=i},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(6),C=_(F);function _(l){return l&&l.__esModule?l:{default:l}}function w(l,i){if(!(l instanceof i))throw new TypeError("Cannot call a class as a function")}function y(l,i){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:l}function v(l,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);l.prototype=Object.create(i&&i.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(l,i):l.__proto__=i)}var r=function(l){v(i,l);function i(){return w(this,i),y(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return i}(C.default);r.blotName="strike",r.tagName="S",M.default=r},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=D(6),C=_(F);function _(l){return l&&l.__esModule?l:{default:l}}function w(l,i){if(!(l instanceof i))throw new TypeError("Cannot call a class as a function")}function y(l,i){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:l}function v(l,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);l.prototype=Object.create(i&&i.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(l,i):l.__proto__=i)}var r=function(l){v(i,l);function i(){return w(this,i),y(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return i}(C.default);r.blotName="underline",r.tagName="U",M.default=r},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function h(u,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(u,s.key,s)}}return function(u,o,a){return o&&h(u.prototype,o),a&&h(u,a),u}}(),C=function h(u,o,a){u===null&&(u=Function.prototype);var s=Object.getOwnPropertyDescriptor(u,o);if(s===void 0){var m=Object.getPrototypeOf(u);return m===null?void 0:h(m,o,a)}else{if("value"in s)return s.value;var p=s.get;return p===void 0?void 0:p.call(a)}},_=D(0),w=v(_),y=D(27);function v(h){return h&&h.__esModule?h:{default:h}}function r(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}function l(h,u){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:h}function i(h,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);h.prototype=Object.create(u&&u.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(h,u):h.__proto__=u)}var g=["alt","height","width"],b=function(h){i(u,h);function u(){return r(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return F(u,[{key:"format",value:function(a,s){g.indexOf(a)>-1?s?this.domNode.setAttribute(a,s):this.domNode.removeAttribute(a):C(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"format",this).call(this,a,s)}}],[{key:"create",value:function(a){var s=C(u.__proto__||Object.getPrototypeOf(u),"create",this).call(this,a);return typeof a=="string"&&s.setAttribute("src",this.sanitize(a)),s}},{key:"formats",value:function(a){return g.reduce(function(s,m){return a.hasAttribute(m)&&(s[m]=a.getAttribute(m)),s},{})}},{key:"match",value:function(a){return/\.(jpe?g|gif|png)$/.test(a)||/^data:image\/.+;base64/.test(a)}},{key:"sanitize",value:function(a){return(0,y.sanitize)(a,["http","https","data"])?a:"//:0"}},{key:"value",value:function(a){return a.getAttribute("src")}}]),u}(w.default.Embed);b.blotName="image",b.tagName="IMG",M.default=b},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function h(u,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(u,s.key,s)}}return function(u,o,a){return o&&h(u.prototype,o),a&&h(u,a),u}}(),C=function h(u,o,a){u===null&&(u=Function.prototype);var s=Object.getOwnPropertyDescriptor(u,o);if(s===void 0){var m=Object.getPrototypeOf(u);return m===null?void 0:h(m,o,a)}else{if("value"in s)return s.value;var p=s.get;return p===void 0?void 0:p.call(a)}},_=D(4),w=D(27),y=v(w);function v(h){return h&&h.__esModule?h:{default:h}}function r(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}function l(h,u){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:h}function i(h,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);h.prototype=Object.create(u&&u.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(h,u):h.__proto__=u)}var g=["height","width"],b=function(h){i(u,h);function u(){return r(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return F(u,[{key:"format",value:function(a,s){g.indexOf(a)>-1?s?this.domNode.setAttribute(a,s):this.domNode.removeAttribute(a):C(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"format",this).call(this,a,s)}}],[{key:"create",value:function(a){var s=C(u.__proto__||Object.getPrototypeOf(u),"create",this).call(this,a);return s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen",!0),s.setAttribute("src",this.sanitize(a)),s}},{key:"formats",value:function(a){return g.reduce(function(s,m){return a.hasAttribute(m)&&(s[m]=a.getAttribute(m)),s},{})}},{key:"sanitize",value:function(a){return y.default.sanitize(a)}},{key:"value",value:function(a){return a.getAttribute("src")}}]),u}(_.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",M.default=b},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.FormulaBlot=void 0;var F=function(){function a(s,m){for(var p=0;p<m.length;p++){var O=m[p];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(s,O.key,O)}}return function(s,m,p){return m&&a(s.prototype,m),p&&a(s,p),s}}(),C=function a(s,m,p){s===null&&(s=Function.prototype);var O=Object.getOwnPropertyDescriptor(s,m);if(O===void 0){var N=Object.getPrototypeOf(s);return N===null?void 0:a(N,m,p)}else{if("value"in O)return O.value;var I=O.get;return I===void 0?void 0:I.call(p)}},_=D(35),w=i(_),y=D(5),v=i(y),r=D(9),l=i(r);function i(a){return a&&a.__esModule?a:{default:a}}function g(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}function b(a,s){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:a}function h(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(a,s):a.__proto__=s)}var u=function(a){h(s,a);function s(){return g(this,s),b(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return F(s,null,[{key:"create",value:function(p){var O=C(s.__proto__||Object.getPrototypeOf(s),"create",this).call(this,p);return typeof p=="string"&&(window.katex.render(p,O,{throwOnError:!1,errorColor:"#f00"}),O.setAttribute("data-value",p)),O}},{key:"value",value:function(p){return p.getAttribute("data-value")}}]),s}(w.default);u.blotName="formula",u.className="ql-formula",u.tagName="SPAN";var o=function(a){h(s,a),F(s,null,[{key:"register",value:function(){v.default.register(u,!0)}}]);function s(){g(this,s);var m=b(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return m}return s}(l.default);M.FormulaBlot=u,M.default=o},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.CodeToken=M.CodeBlock=void 0;var F=function(){function p(O,N){for(var I=0;I<N.length;I++){var A=N[I];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,A.key,A)}}return function(O,N,I){return N&&p(O.prototype,N),I&&p(O,I),O}}(),C=function p(O,N,I){O===null&&(O=Function.prototype);var A=Object.getOwnPropertyDescriptor(O,N);if(A===void 0){var S=Object.getPrototypeOf(O);return S===null?void 0:p(S,N,I)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(I)}},_=D(0),w=b(_),y=D(5),v=b(y),r=D(9),l=b(r),i=D(13),g=b(i);function b(p){return p&&p.__esModule?p:{default:p}}function h(p,O){if(!(p instanceof O))throw new TypeError("Cannot call a class as a function")}function u(p,O){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:p}function o(p,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);p.prototype=Object.create(O&&O.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(p,O):p.__proto__=O)}var a=function(p){o(O,p);function O(){return h(this,O),u(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return F(O,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),C(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var A=this.domNode.textContent;this.cachedText!==A&&((A.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(A),this.domNode.normalize(),this.attach()),this.cachedText=A)}}]),O}(g.default);a.className="ql-syntax";var s=new w.default.Attributor.Class("token","hljs",{scope:w.default.Scope.INLINE}),m=function(p){o(O,p),F(O,null,[{key:"register",value:function(){v.default.register(s,!0),v.default.register(a,!0)}}]);function O(N,I){h(this,O);var A=u(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,N,I));if(typeof A.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var S=null;return A.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(S),S=setTimeout(function(){A.highlight(),S=null},A.options.interval)}),A.highlight(),A}return F(O,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(v.default.sources.USER);var A=this.quill.getSelection();this.quill.scroll.descendants(a).forEach(function(S){S.highlight(I.options.highlight)}),this.quill.update(v.default.sources.SILENT),A!=null&&this.quill.setSelection(A,v.default.sources.SILENT)}}}]),O}(l.default);m.DEFAULTS={highlight:function(){return window.hljs==null?null:function(p){var O=window.hljs.highlightAuto(p);return O.value}}(),interval:1e3},M.CodeBlock=a,M.CodeToken=s,M.default=m},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(H,M){H.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(H,M){H.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(H,M){H.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(H,M){H.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(H,M){H.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(H,M,D){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BubbleTooltip=void 0;var F=function O(N,I,A){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,I);if(S===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:O(P,I,A)}else{if("value"in S)return S.value;var x=S.get;return x===void 0?void 0:x.call(A)}},C=function(){function O(N,I){for(var A=0;A<I.length;A++){var S=I[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,I,A){return I&&O(N.prototype,I),A&&O(N,A),N}}(),_=D(3),w=h(_),y=D(8),v=h(y),r=D(43),l=h(r),i=D(15),g=D(41),b=h(g);function h(O){return O&&O.__esModule?O:{default:O}}function u(O,N){if(!(O instanceof N))throw new TypeError("Cannot call a class as a function")}function o(O,N){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:O}function a(O,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);O.prototype=Object.create(N&&N.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(O,N):O.__proto__=N)}var s=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],m=function(O){a(N,O);function N(I,A){u(this,N),A.modules.toolbar!=null&&A.modules.toolbar.container==null&&(A.modules.toolbar.container=s);var S=o(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,I,A));return S.quill.container.classList.add("ql-bubble"),S}return C(N,[{key:"extendToolbar",value:function(A){this.tooltip=new p(this.quill,this.options.bounds),this.tooltip.root.appendChild(A.container),this.buildButtons([].slice.call(A.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(A.container.querySelectorAll("select")),b.default)}}]),N}(l.default);m.DEFAULTS=(0,w.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(N){N?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var p=function(O){a(N,O);function N(I,A){u(this,N);var S=o(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,I,A));return S.quill.on(v.default.events.EDITOR_CHANGE,function(P,x,R,L){if(P===v.default.events.SELECTION_CHANGE)if(x!=null&&x.length>0&&L===v.default.sources.USER){S.show(),S.root.style.left="0px",S.root.style.width="",S.root.style.width=S.root.offsetWidth+"px";var J=S.quill.getLines(x.index,x.length);if(J.length===1)S.position(S.quill.getBounds(x));else{var z=J[J.length-1],te=S.quill.getIndex(z),Z=Math.min(z.length()-1,x.index+x.length-te),q=S.quill.getBounds(new i.Range(te,Z));S.position(q)}}else document.activeElement!==S.textbox&&S.quill.hasFocus()&&S.hide()}),S}return C(N,[{key:"listen",value:function(){var A=this;F(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){A.root.classList.remove("ql-editing")}),this.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!A.root.classList.contains("ql-hidden")){var S=A.quill.getSelection();S!=null&&A.position(A.quill.getBounds(S))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(A){var S=F(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"position",this).call(this,A),P=this.root.querySelector(".ql-tooltip-arrow");if(P.style.marginLeft="",S===0)return S;P.style.marginLeft=-1*S-P.offsetWidth/2+"px"}}]),N}(r.BaseTooltip);p.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),M.BubbleTooltip=p,M.default=m},function(H,M,D){H.exports=D(63)}]).default})})(to);const Gi=mi(to.exports);var no={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(Ye,ye){(function(H,M){Ye.exports=M()})(self,()=>(()=>{var H={582:(C,_,w)=>{w.d(_,{Z:()=>i});var y=w(81),v=w.n(y),r=w(645),l=w.n(r)()(v());l.push([C.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const i=l},645:C=>{C.exports=function(_){var w=[];return w.toString=function(){return this.map(function(y){var v="",r=y[5]!==void 0;return y[4]&&(v+="@supports (".concat(y[4],") {")),y[2]&&(v+="@media ".concat(y[2]," {")),r&&(v+="@layer".concat(y[5].length>0?" ".concat(y[5]):""," {")),v+=_(y),r&&(v+="}"),y[2]&&(v+="}"),y[4]&&(v+="}"),v}).join("")},w.i=function(y,v,r,l,i){typeof y=="string"&&(y=[[null,y,void 0]]);var g={};if(r)for(var b=0;b<this.length;b++){var h=this[b][0];h!=null&&(g[h]=!0)}for(var u=0;u<y.length;u++){var o=[].concat(y[u]);r&&g[o[0]]||(i!==void 0&&(o[5]===void 0||(o[1]="@layer".concat(o[5].length>0?" ".concat(o[5]):""," {").concat(o[1],"}")),o[5]=i),v&&(o[2]&&(o[1]="@media ".concat(o[2]," {").concat(o[1],"}")),o[2]=v),l&&(o[4]?(o[1]="@supports (".concat(o[4],") {").concat(o[1],"}"),o[4]=l):o[4]="".concat(l)),w.push(o))}},w}},81:C=>{C.exports=function(_){return _[1]}},465:(C,_,w)=>{C=w.nmd(C);var y="__lodash_hash_undefined__",v=9007199254740991,r="[object Arguments]",l="[object Boolean]",i="[object Date]",g="[object Function]",b="[object GeneratorFunction]",h="[object Map]",u="[object Number]",o="[object Object]",a="[object Promise]",s="[object RegExp]",m="[object Set]",p="[object String]",O="[object Symbol]",N="[object WeakMap]",I="[object ArrayBuffer]",A="[object DataView]",S="[object Float32Array]",P="[object Float64Array]",x="[object Int8Array]",R="[object Int16Array]",L="[object Int32Array]",J="[object Uint8Array]",z="[object Uint8ClampedArray]",te="[object Uint16Array]",Z="[object Uint32Array]",q=/\w*$/,B=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,U={};U[r]=U["[object Array]"]=U[I]=U[A]=U[l]=U[i]=U[S]=U[P]=U[x]=U[R]=U[L]=U[h]=U[u]=U[o]=U[s]=U[m]=U[p]=U[O]=U[J]=U[z]=U[te]=U[Z]=!0,U["[object Error]"]=U[g]=U[N]=!1;var re=typeof w.g=="object"&&w.g&&w.g.Object===Object&&w.g,ee=typeof self=="object"&&self&&self.Object===Object&&self,V=re||ee||Function("return this")(),X=_&&!_.nodeType&&_,ie=X&&C&&!C.nodeType&&C,le=ie&&ie.exports===X;function ve(Y,pe){return Y.set(pe[0],pe[1]),Y}function _e(Y,pe){return Y.add(pe),Y}function Ne(Y,pe,Ee,Ie){var ze=-1,it=Y?Y.length:0;for(Ie&&it&&(Ee=Y[++ze]);++ze<it;)Ee=pe(Ee,Y[ze],ze,Y);return Ee}function Le(Y){var pe=!1;if(Y!=null&&typeof Y.toString!="function")try{pe=!!(Y+"")}catch{}return pe}function Me(Y){var pe=-1,Ee=Array(Y.size);return Y.forEach(function(Ie,ze){Ee[++pe]=[ze,Ie]}),Ee}function Q(Y,pe){return function(Ee){return Y(pe(Ee))}}function ce(Y){var pe=-1,Ee=Array(Y.size);return Y.forEach(function(Ie){Ee[++pe]=Ie}),Ee}var ue,G=Array.prototype,se=Function.prototype,oe=Object.prototype,we=V["__core-js_shared__"],me=(ue=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+ue:"",Pe=se.toString,Be=oe.hasOwnProperty,qe=oe.toString,at=RegExp("^"+Pe.call(Be).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ft=le?V.Buffer:void 0,Je=V.Symbol,He=V.Uint8Array,Oe=Q(Object.getPrototypeOf,Object),tt=Object.create,St=oe.propertyIsEnumerable,Wt=G.splice,jt=Object.getOwnPropertySymbols,Rt=ft?ft.isBuffer:void 0,$t=Q(Object.keys,Object),bt=On(V,"DataView"),zt=On(V,"Map"),nn=On(V,"Promise"),Ct=On(V,"Set"),en=On(V,"WeakMap"),Ft=On(Object,"create"),Rn=Kt(bt),Yt=Kt(zt),an=Kt(nn),Se=Kt(Ct),Mt=Kt(en),ht=Je?Je.prototype:void 0,Pt=ht?ht.valueOf:void 0;function un(Y){var pe=-1,Ee=Y?Y.length:0;for(this.clear();++pe<Ee;){var Ie=Y[pe];this.set(Ie[0],Ie[1])}}function ln(Y){var pe=-1,Ee=Y?Y.length:0;for(this.clear();++pe<Ee;){var Ie=Y[pe];this.set(Ie[0],Ie[1])}}function hn(Y){var pe=-1,Ee=Y?Y.length:0;for(this.clear();++pe<Ee;){var Ie=Y[pe];this.set(Ie[0],Ie[1])}}function dn(Y){this.__data__=new ln(Y)}function Vt(Y,pe,Ee){var Ie=Y[pe];Be.call(Y,pe)&&wn(Ie,Ee)&&(Ee!==void 0||pe in Y)||(Y[pe]=Ee)}function pt(Y,pe){for(var Ee=Y.length;Ee--;)if(wn(Y[Ee][0],pe))return Ee;return-1}function pn(Y,pe,Ee,Ie,ze,it,Nt){var ot;if(Ie&&(ot=it?Ie(Y,ze,it,Nt):Ie(Y)),ot!==void 0)return ot;if(!Tt(Y))return Y;var At=fe(Y);if(At){if(ot=function(Ke){var gt=Ke.length,Ot=Ke.constructor(gt);return gt&&typeof Ke[0]=="string"&&Be.call(Ke,"index")&&(Ot.index=Ke.index,Ot.input=Ke.input),Ot}(Y),!pe)return function(Ke,gt){var Ot=-1,$e=Ke.length;for(gt||(gt=Array($e));++Ot<$e;)gt[Ot]=Ke[Ot];return gt}(Y,ot)}else{var mt=Sn(Y),qt=mt==g||mt==b;if(De(Y))return function(Ke,gt){if(gt)return Ke.slice();var Ot=new Ke.constructor(Ke.length);return Ke.copy(Ot),Ot}(Y,pe);if(mt==o||mt==r||qt&&!it){if(Le(Y))return it?Y:{};if(ot=function(Ke){return typeof Ke.constructor!="function"||jn(Ke)?{}:Tt(gt=Oe(Ke))?tt(gt):{};var gt}(qt?{}:Y),!pe)return function(Ke,gt){return gn(Ke,In(Ke),gt)}(Y,function(Ke,gt){return Ke&&gn(gt,Xe(gt),Ke)}(ot,Y))}else{if(!U[mt])return it?Y:{};ot=function(Ke,gt,Ot,$e){var rt,Ht=Ke.constructor;switch(gt){case I:return Bn(Ke);case l:case i:return new Ht(+Ke);case A:return function(nt,yt){var wt=yt?Bn(nt.buffer):nt.buffer;return new nt.constructor(wt,nt.byteOffset,nt.byteLength)}(Ke,$e);case S:case P:case x:case R:case L:case J:case z:case te:case Z:return function(nt,yt){var wt=yt?Bn(nt.buffer):nt.buffer;return new nt.constructor(wt,nt.byteOffset,nt.length)}(Ke,$e);case h:return function(nt,yt,wt){return Ne(yt?wt(Me(nt),!0):Me(nt),ve,new nt.constructor)}(Ke,$e,Ot);case u:case p:return new Ht(Ke);case s:return function(nt){var yt=new nt.constructor(nt.source,q.exec(nt));return yt.lastIndex=nt.lastIndex,yt}(Ke);case m:return function(nt,yt,wt){return Ne(yt?wt(ce(nt),!0):ce(nt),_e,new nt.constructor)}(Ke,$e,Ot);case O:return rt=Ke,Pt?Object(Pt.call(rt)):{}}}(Y,mt,pn,pe)}}Nt||(Nt=new dn);var xn=Nt.get(Y);if(xn)return xn;if(Nt.set(Y,ot),!At)var kt=Ee?function(Ke){return function(gt,Ot,$e){var rt=Ot(gt);return fe(gt)?rt:function(Ht,nt){for(var yt=-1,wt=nt.length,Bt=Ht.length;++yt<wt;)Ht[Bt+yt]=nt[yt];return Ht}(rt,$e(gt))}(Ke,Xe,In)}(Y):Xe(Y);return function(Ke,gt){for(var Ot=-1,$e=Ke?Ke.length:0;++Ot<$e&&gt(Ke[Ot],Ot)!==!1;);}(kt||Y,function(Ke,gt){kt&&(Ke=Y[gt=Ke]),Vt(ot,gt,pn(Ke,pe,Ee,Ie,gt,Y,Nt))}),ot}function Bn(Y){var pe=new Y.constructor(Y.byteLength);return new He(pe).set(new He(Y)),pe}function gn(Y,pe,Ee,Ie){Ee||(Ee={});for(var ze=-1,it=pe.length;++ze<it;){var Nt=pe[ze],ot=Ie?Ie(Ee[Nt],Y[Nt],Nt,Ee,Y):void 0;Vt(Ee,Nt,ot===void 0?Y[Nt]:ot)}return Ee}function _n(Y,pe){var Ee,Ie,ze=Y.__data__;return((Ie=typeof(Ee=pe))=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?Ee!=="__proto__":Ee===null)?ze[typeof pe=="string"?"string":"hash"]:ze.map}function On(Y,pe){var Ee=function(Ie,ze){return Ie==null?void 0:Ie[ze]}(Y,pe);return function(Ie){return!(!Tt(Ie)||(ze=Ie,me&&me in ze))&&(Fe(Ie)||Le(Ie)?at:B).test(Kt(Ie));var ze}(Ee)?Ee:void 0}un.prototype.clear=function(){this.__data__=Ft?Ft(null):{}},un.prototype.delete=function(Y){return this.has(Y)&&delete this.__data__[Y]},un.prototype.get=function(Y){var pe=this.__data__;if(Ft){var Ee=pe[Y];return Ee===y?void 0:Ee}return Be.call(pe,Y)?pe[Y]:void 0},un.prototype.has=function(Y){var pe=this.__data__;return Ft?pe[Y]!==void 0:Be.call(pe,Y)},un.prototype.set=function(Y,pe){return this.__data__[Y]=Ft&&pe===void 0?y:pe,this},ln.prototype.clear=function(){this.__data__=[]},ln.prototype.delete=function(Y){var pe=this.__data__,Ee=pt(pe,Y);return!(Ee<0||(Ee==pe.length-1?pe.pop():Wt.call(pe,Ee,1),0))},ln.prototype.get=function(Y){var pe=this.__data__,Ee=pt(pe,Y);return Ee<0?void 0:pe[Ee][1]},ln.prototype.has=function(Y){return pt(this.__data__,Y)>-1},ln.prototype.set=function(Y,pe){var Ee=this.__data__,Ie=pt(Ee,Y);return Ie<0?Ee.push([Y,pe]):Ee[Ie][1]=pe,this},hn.prototype.clear=function(){this.__data__={hash:new un,map:new(zt||ln),string:new un}},hn.prototype.delete=function(Y){return _n(this,Y).delete(Y)},hn.prototype.get=function(Y){return _n(this,Y).get(Y)},hn.prototype.has=function(Y){return _n(this,Y).has(Y)},hn.prototype.set=function(Y,pe){return _n(this,Y).set(Y,pe),this},dn.prototype.clear=function(){this.__data__=new ln},dn.prototype.delete=function(Y){return this.__data__.delete(Y)},dn.prototype.get=function(Y){return this.__data__.get(Y)},dn.prototype.has=function(Y){return this.__data__.has(Y)},dn.prototype.set=function(Y,pe){var Ee=this.__data__;if(Ee instanceof ln){var Ie=Ee.__data__;if(!zt||Ie.length<199)return Ie.push([Y,pe]),this;Ee=this.__data__=new hn(Ie)}return Ee.set(Y,pe),this};var In=jt?Q(jt,Object):function(){return[]},Sn=function(Y){return qe.call(Y)};function hr(Y,pe){return!!(pe=pe==null?v:pe)&&(typeof Y=="number"||$.test(Y))&&Y>-1&&Y%1==0&&Y<pe}function jn(Y){var pe=Y&&Y.constructor;return Y===(typeof pe=="function"&&pe.prototype||oe)}function Kt(Y){if(Y!=null){try{return Pe.call(Y)}catch{}try{return Y+""}catch{}}return""}function wn(Y,pe){return Y===pe||Y!=Y&&pe!=pe}(bt&&Sn(new bt(new ArrayBuffer(1)))!=A||zt&&Sn(new zt)!=h||nn&&Sn(nn.resolve())!=a||Ct&&Sn(new Ct)!=m||en&&Sn(new en)!=N)&&(Sn=function(Y){var pe=qe.call(Y),Ee=pe==o?Y.constructor:void 0,Ie=Ee?Kt(Ee):void 0;if(Ie)switch(Ie){case Rn:return A;case Yt:return h;case an:return a;case Se:return m;case Mt:return N}return pe});var fe=Array.isArray;function Te(Y){return Y!=null&&function(pe){return typeof pe=="number"&&pe>-1&&pe%1==0&&pe<=v}(Y.length)&&!Fe(Y)}var De=Rt||function(){return!1};function Fe(Y){var pe=Tt(Y)?qe.call(Y):"";return pe==g||pe==b}function Tt(Y){var pe=typeof Y;return!!Y&&(pe=="object"||pe=="function")}function Xe(Y){return Te(Y)?function(pe,Ee){var Ie=fe(pe)||function(ot){return function(At){return function(mt){return!!mt&&typeof mt=="object"}(At)&&Te(At)}(ot)&&Be.call(ot,"callee")&&(!St.call(ot,"callee")||qe.call(ot)==r)}(pe)?function(ot,At){for(var mt=-1,qt=Array(ot);++mt<ot;)qt[mt]=At(mt);return qt}(pe.length,String):[],ze=Ie.length,it=!!ze;for(var Nt in pe)!Ee&&!Be.call(pe,Nt)||it&&(Nt=="length"||hr(Nt,ze))||Ie.push(Nt);return Ie}(Y):function(pe){if(!jn(pe))return $t(pe);var Ee=[];for(var Ie in Object(pe))Be.call(pe,Ie)&&Ie!="constructor"&&Ee.push(Ie);return Ee}(Y)}C.exports=function(Y){return pn(Y,!0,!0)}},307:(C,_,w)=>{C=w.nmd(C);var y="__lodash_hash_undefined__",v=9007199254740991,r="[object Arguments]",l="[object Array]",i="[object Boolean]",g="[object Date]",b="[object Error]",h="[object Function]",u="[object Map]",o="[object Number]",a="[object Object]",s="[object Promise]",m="[object RegExp]",p="[object Set]",O="[object String]",N="[object WeakMap]",I="[object ArrayBuffer]",A="[object DataView]",S=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[r]=x[l]=x[I]=x[i]=x[A]=x[g]=x[b]=x[h]=x[u]=x[o]=x[a]=x[m]=x[p]=x[O]=x[N]=!1;var R=typeof w.g=="object"&&w.g&&w.g.Object===Object&&w.g,L=typeof self=="object"&&self&&self.Object===Object&&self,J=R||L||Function("return this")(),z=_&&!_.nodeType&&_,te=z&&C&&!C.nodeType&&C,Z=te&&te.exports===z,q=Z&&R.process,B=function(){try{return q&&q.binding&&q.binding("util")}catch{}}(),$=B&&B.isTypedArray;function U(fe,Te){for(var De=-1,Fe=fe==null?0:fe.length;++De<Fe;)if(Te(fe[De],De,fe))return!0;return!1}function re(fe){var Te=-1,De=Array(fe.size);return fe.forEach(function(Fe,Tt){De[++Te]=[Tt,Fe]}),De}function ee(fe){var Te=-1,De=Array(fe.size);return fe.forEach(function(Fe){De[++Te]=Fe}),De}var V,X,ie,le=Array.prototype,ve=Function.prototype,_e=Object.prototype,Ne=J["__core-js_shared__"],Le=ve.toString,Me=_e.hasOwnProperty,Q=(V=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"",ce=_e.toString,ue=RegExp("^"+Le.call(Me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=Z?J.Buffer:void 0,se=J.Symbol,oe=J.Uint8Array,we=_e.propertyIsEnumerable,me=le.splice,Pe=se?se.toStringTag:void 0,Be=Object.getOwnPropertySymbols,qe=G?G.isBuffer:void 0,at=(X=Object.keys,ie=Object,function(fe){return X(ie(fe))}),ft=hn(J,"DataView"),Je=hn(J,"Map"),He=hn(J,"Promise"),Oe=hn(J,"Set"),tt=hn(J,"WeakMap"),St=hn(Object,"create"),Wt=pn(ft),jt=pn(Je),Rt=pn(He),$t=pn(Oe),bt=pn(tt),zt=se?se.prototype:void 0,nn=zt?zt.valueOf:void 0;function Ct(fe){var Te=-1,De=fe==null?0:fe.length;for(this.clear();++Te<De;){var Fe=fe[Te];this.set(Fe[0],Fe[1])}}function en(fe){var Te=-1,De=fe==null?0:fe.length;for(this.clear();++Te<De;){var Fe=fe[Te];this.set(Fe[0],Fe[1])}}function Ft(fe){var Te=-1,De=fe==null?0:fe.length;for(this.clear();++Te<De;){var Fe=fe[Te];this.set(Fe[0],Fe[1])}}function Rn(fe){var Te=-1,De=fe==null?0:fe.length;for(this.__data__=new Ft;++Te<De;)this.add(fe[Te])}function Yt(fe){var Te=this.__data__=new en(fe);this.size=Te.size}function an(fe,Te){for(var De=fe.length;De--;)if(Bn(fe[De][0],Te))return De;return-1}function Se(fe){return fe==null?fe===void 0?"[object Undefined]":"[object Null]":Pe&&Pe in Object(fe)?function(Te){var De=Me.call(Te,Pe),Fe=Te[Pe];try{Te[Pe]=void 0;var Tt=!0}catch{}var Xe=ce.call(Te);return Tt&&(De?Te[Pe]=Fe:delete Te[Pe]),Xe}(fe):function(Te){return ce.call(Te)}(fe)}function Mt(fe){return jn(fe)&&Se(fe)==r}function ht(fe,Te,De,Fe,Tt){return fe===Te||(fe==null||Te==null||!jn(fe)&&!jn(Te)?fe!=fe&&Te!=Te:function(Xe,Y,pe,Ee,Ie,ze){var it=_n(Xe),Nt=_n(Y),ot=it?l:Vt(Xe),At=Nt?l:Vt(Y),mt=(ot=ot==r?a:ot)==a,qt=(At=At==r?a:At)==a,xn=ot==At;if(xn&&On(Xe)){if(!On(Y))return!1;it=!0,mt=!1}if(xn&&!mt)return ze||(ze=new Yt),it||Kt(Xe)?Pt(Xe,Y,pe,Ee,Ie,ze):function($e,rt,Ht,nt,yt,wt,Bt){switch(Ht){case A:if($e.byteLength!=rt.byteLength||$e.byteOffset!=rt.byteOffset)return!1;$e=$e.buffer,rt=rt.buffer;case I:return!($e.byteLength!=rt.byteLength||!wt(new oe($e),new oe(rt)));case i:case g:case o:return Bn(+$e,+rt);case b:return $e.name==rt.name&&$e.message==rt.message;case m:case O:return $e==rt+"";case u:var Ut=re;case p:var Dt=1&nt;if(Ut||(Ut=ee),$e.size!=rt.size&&!Dt)return!1;var st=Bt.get($e);if(st)return st==rt;nt|=2,Bt.set($e,rt);var xt=Pt(Ut($e),Ut(rt),nt,yt,wt,Bt);return Bt.delete($e),xt;case"[object Symbol]":if(nn)return nn.call($e)==nn.call(rt)}return!1}(Xe,Y,ot,pe,Ee,Ie,ze);if(!(1&pe)){var kt=mt&&Me.call(Xe,"__wrapped__"),Ke=qt&&Me.call(Y,"__wrapped__");if(kt||Ke){var gt=kt?Xe.value():Xe,Ot=Ke?Y.value():Y;return ze||(ze=new Yt),Ie(gt,Ot,pe,Ee,ze)}}return!!xn&&(ze||(ze=new Yt),function($e,rt,Ht,nt,yt,wt){var Bt=1&Ht,Ut=un($e),Dt=Ut.length;if(Dt!=un(rt).length&&!Bt)return!1;for(var st=Dt;st--;){var xt=Ut[st];if(!(Bt?xt in rt:Me.call(rt,xt)))return!1}var mn=wt.get($e);if(mn&&wt.get(rt))return mn==rt;var Jn=!0;wt.set($e,rt),wt.set(rt,$e);for(var et=Bt;++st<Dt;){var Lt=$e[xt=Ut[st]],Yn=rt[xt];if(nt)var er=Bt?nt(Yn,Lt,xt,rt,$e,wt):nt(Lt,Yn,xt,$e,rt,wt);if(!(er===void 0?Lt===Yn||yt(Lt,Yn,Ht,nt,wt):er)){Jn=!1;break}et||(et=xt=="constructor")}if(Jn&&!et){var rn=$e.constructor,Pn=rt.constructor;rn==Pn||!("constructor"in $e)||!("constructor"in rt)||typeof rn=="function"&&rn instanceof rn&&typeof Pn=="function"&&Pn instanceof Pn||(Jn=!1)}return wt.delete($e),wt.delete(rt),Jn}(Xe,Y,pe,Ee,Ie,ze))}(fe,Te,De,Fe,ht,Tt))}function Pt(fe,Te,De,Fe,Tt,Xe){var Y=1&De,pe=fe.length,Ee=Te.length;if(pe!=Ee&&!(Y&&Ee>pe))return!1;var Ie=Xe.get(fe);if(Ie&&Xe.get(Te))return Ie==Te;var ze=-1,it=!0,Nt=2&De?new Rn:void 0;for(Xe.set(fe,Te),Xe.set(Te,fe);++ze<pe;){var ot=fe[ze],At=Te[ze];if(Fe)var mt=Y?Fe(At,ot,ze,Te,fe,Xe):Fe(ot,At,ze,fe,Te,Xe);if(mt!==void 0){if(mt)continue;it=!1;break}if(Nt){if(!U(Te,function(qt,xn){if(kt=xn,!Nt.has(kt)&&(ot===qt||Tt(ot,qt,De,Fe,Xe)))return Nt.push(xn);var kt})){it=!1;break}}else if(ot!==At&&!Tt(ot,At,De,Fe,Xe)){it=!1;break}}return Xe.delete(fe),Xe.delete(Te),it}function un(fe){return function(Te,De,Fe){var Tt=De(Te);return _n(Te)?Tt:function(Xe,Y){for(var pe=-1,Ee=Y.length,Ie=Xe.length;++pe<Ee;)Xe[Ie+pe]=Y[pe];return Xe}(Tt,Fe(Te))}(fe,wn,dn)}function ln(fe,Te){var De,Fe,Tt=fe.__data__;return((Fe=typeof(De=Te))=="string"||Fe=="number"||Fe=="symbol"||Fe=="boolean"?De!=="__proto__":De===null)?Tt[typeof Te=="string"?"string":"hash"]:Tt.map}function hn(fe,Te){var De=function(Fe,Tt){return Fe==null?void 0:Fe[Tt]}(fe,Te);return function(Fe){return!(!hr(Fe)||function(Tt){return!!Q&&Q in Tt}(Fe))&&(In(Fe)?ue:S).test(pn(Fe))}(De)?De:void 0}Ct.prototype.clear=function(){this.__data__=St?St(null):{},this.size=0},Ct.prototype.delete=function(fe){var Te=this.has(fe)&&delete this.__data__[fe];return this.size-=Te?1:0,Te},Ct.prototype.get=function(fe){var Te=this.__data__;if(St){var De=Te[fe];return De===y?void 0:De}return Me.call(Te,fe)?Te[fe]:void 0},Ct.prototype.has=function(fe){var Te=this.__data__;return St?Te[fe]!==void 0:Me.call(Te,fe)},Ct.prototype.set=function(fe,Te){var De=this.__data__;return this.size+=this.has(fe)?0:1,De[fe]=St&&Te===void 0?y:Te,this},en.prototype.clear=function(){this.__data__=[],this.size=0},en.prototype.delete=function(fe){var Te=this.__data__,De=an(Te,fe);return!(De<0||(De==Te.length-1?Te.pop():me.call(Te,De,1),--this.size,0))},en.prototype.get=function(fe){var Te=this.__data__,De=an(Te,fe);return De<0?void 0:Te[De][1]},en.prototype.has=function(fe){return an(this.__data__,fe)>-1},en.prototype.set=function(fe,Te){var De=this.__data__,Fe=an(De,fe);return Fe<0?(++this.size,De.push([fe,Te])):De[Fe][1]=Te,this},Ft.prototype.clear=function(){this.size=0,this.__data__={hash:new Ct,map:new(Je||en),string:new Ct}},Ft.prototype.delete=function(fe){var Te=ln(this,fe).delete(fe);return this.size-=Te?1:0,Te},Ft.prototype.get=function(fe){return ln(this,fe).get(fe)},Ft.prototype.has=function(fe){return ln(this,fe).has(fe)},Ft.prototype.set=function(fe,Te){var De=ln(this,fe),Fe=De.size;return De.set(fe,Te),this.size+=De.size==Fe?0:1,this},Rn.prototype.add=Rn.prototype.push=function(fe){return this.__data__.set(fe,y),this},Rn.prototype.has=function(fe){return this.__data__.has(fe)},Yt.prototype.clear=function(){this.__data__=new en,this.size=0},Yt.prototype.delete=function(fe){var Te=this.__data__,De=Te.delete(fe);return this.size=Te.size,De},Yt.prototype.get=function(fe){return this.__data__.get(fe)},Yt.prototype.has=function(fe){return this.__data__.has(fe)},Yt.prototype.set=function(fe,Te){var De=this.__data__;if(De instanceof en){var Fe=De.__data__;if(!Je||Fe.length<199)return Fe.push([fe,Te]),this.size=++De.size,this;De=this.__data__=new Ft(Fe)}return De.set(fe,Te),this.size=De.size,this};var dn=Be?function(fe){return fe==null?[]:(fe=Object(fe),function(Te,De){for(var Fe=-1,Tt=Te==null?0:Te.length,Xe=0,Y=[];++Fe<Tt;){var pe=Te[Fe];Ee=pe,we.call(fe,Ee)&&(Y[Xe++]=pe)}var Ee;return Y}(Be(fe)))}:function(){return[]},Vt=Se;function pt(fe,Te){return!!(Te=Te==null?v:Te)&&(typeof fe=="number"||P.test(fe))&&fe>-1&&fe%1==0&&fe<Te}function pn(fe){if(fe!=null){try{return Le.call(fe)}catch{}try{return fe+""}catch{}}return""}function Bn(fe,Te){return fe===Te||fe!=fe&&Te!=Te}(ft&&Vt(new ft(new ArrayBuffer(1)))!=A||Je&&Vt(new Je)!=u||He&&Vt(He.resolve())!=s||Oe&&Vt(new Oe)!=p||tt&&Vt(new tt)!=N)&&(Vt=function(fe){var Te=Se(fe),De=Te==a?fe.constructor:void 0,Fe=De?pn(De):"";if(Fe)switch(Fe){case Wt:return A;case jt:return u;case Rt:return s;case $t:return p;case bt:return N}return Te});var gn=Mt(function(){return arguments}())?Mt:function(fe){return jn(fe)&&Me.call(fe,"callee")&&!we.call(fe,"callee")},_n=Array.isArray,On=qe||function(){return!1};function In(fe){if(!hr(fe))return!1;var Te=Se(fe);return Te==h||Te=="[object GeneratorFunction]"||Te=="[object AsyncFunction]"||Te=="[object Proxy]"}function Sn(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=v}function hr(fe){var Te=typeof fe;return fe!=null&&(Te=="object"||Te=="function")}function jn(fe){return fe!=null&&typeof fe=="object"}var Kt=$?function(fe){return function(Te){return fe(Te)}}($):function(fe){return jn(fe)&&Sn(fe.length)&&!!x[Se(fe)]};function wn(fe){return(Te=fe)!=null&&Sn(Te.length)&&!In(Te)?function(De,Fe){var Tt=_n(De),Xe=!Tt&&gn(De),Y=!Tt&&!Xe&&On(De),pe=!Tt&&!Xe&&!Y&&Kt(De),Ee=Tt||Xe||Y||pe,Ie=Ee?function(Nt,ot){for(var At=-1,mt=Array(Nt);++At<Nt;)mt[At]=ot(At);return mt}(De.length,String):[],ze=Ie.length;for(var it in De)!Fe&&!Me.call(De,it)||Ee&&(it=="length"||Y&&(it=="offset"||it=="parent")||pe&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||pt(it,ze))||Ie.push(it);return Ie}(fe):function(De){if(Tt=(Fe=De)&&Fe.constructor,Fe!==(typeof Tt=="function"&&Tt.prototype||_e))return at(De);var Fe,Tt,Xe=[];for(var Y in Object(De))Me.call(De,Y)&&Y!="constructor"&&Xe.push(Y);return Xe}(fe);var Te}C.exports=function(fe,Te){return ht(fe,Te)}},210:function(C,_,w){var y=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_,"__esModule",{value:!0});var v,r=y(w(465)),l=y(w(307));(function(i){i.compose=function(g,b,h){g===void 0&&(g={}),b===void 0&&(b={}),typeof g!="object"&&(g={}),typeof b!="object"&&(b={});var u=r.default(b);for(var o in h||(u=Object.keys(u).reduce(function(a,s){return u[s]!=null&&(a[s]=u[s]),a},{})),g)g[o]!==void 0&&b[o]===void 0&&(u[o]=g[o]);return Object.keys(u).length>0?u:void 0},i.diff=function(g,b){g===void 0&&(g={}),b===void 0&&(b={}),typeof g!="object"&&(g={}),typeof b!="object"&&(b={});var h=Object.keys(g).concat(Object.keys(b)).reduce(function(u,o){return l.default(g[o],b[o])||(u[o]=b[o]===void 0?null:b[o]),u},{});return Object.keys(h).length>0?h:void 0},i.invert=function(g,b){g===void 0&&(g={}),b===void 0&&(b={}),g=g||{};var h=Object.keys(b).reduce(function(u,o){return b[o]!==g[o]&&g[o]!==void 0&&(u[o]=b[o]),u},{});return Object.keys(g).reduce(function(u,o){return g[o]!==b[o]&&b[o]===void 0&&(u[o]=null),u},h)},i.transform=function(g,b,h){if(h===void 0&&(h=!1),typeof g!="object")return b;if(typeof b=="object"){if(!h)return b;var u=Object.keys(b).reduce(function(o,a){return g[a]===void 0&&(o[a]=b[a]),o},{});return Object.keys(u).length>0?u:void 0}}})(v||(v={})),_.default=v},895:function(C,_,w){var y=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}},v=y(w(103)),r=y(w(465)),l=y(w(307)),i=y(w(210)),g=y(w(430)),b=String.fromCharCode(0),h=function(){function u(o){Array.isArray(o)?this.ops=o:o!=null&&Array.isArray(o.ops)?this.ops=o.ops:this.ops=[]}return u.prototype.insert=function(o,a){var s={};return typeof o=="string"&&o.length===0?this:(s.insert=o,a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(s.attributes=a),this.push(s))},u.prototype.delete=function(o){return o<=0?this:this.push({delete:o})},u.prototype.retain=function(o,a){if(o<=0)return this;var s={retain:o};return a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(s.attributes=a),this.push(s)},u.prototype.push=function(o){var a=this.ops.length,s=this.ops[a-1];if(o=r.default(o),typeof s=="object"){if(typeof o.delete=="number"&&typeof s.delete=="number")return this.ops[a-1]={delete:s.delete+o.delete},this;if(typeof s.delete=="number"&&o.insert!=null&&(a-=1,typeof(s=this.ops[a-1])!="object"))return this.ops.unshift(o),this;if(l.default(o.attributes,s.attributes)){if(typeof o.insert=="string"&&typeof s.insert=="string")return this.ops[a-1]={insert:s.insert+o.insert},typeof o.attributes=="object"&&(this.ops[a-1].attributes=o.attributes),this;if(typeof o.retain=="number"&&typeof s.retain=="number")return this.ops[a-1]={retain:s.retain+o.retain},typeof o.attributes=="object"&&(this.ops[a-1].attributes=o.attributes),this}}return a===this.ops.length?this.ops.push(o):this.ops.splice(a,0,o),this},u.prototype.chop=function(){var o=this.ops[this.ops.length-1];return o&&o.retain&&!o.attributes&&this.ops.pop(),this},u.prototype.filter=function(o){return this.ops.filter(o)},u.prototype.forEach=function(o){this.ops.forEach(o)},u.prototype.map=function(o){return this.ops.map(o)},u.prototype.partition=function(o){var a=[],s=[];return this.forEach(function(m){(o(m)?a:s).push(m)}),[a,s]},u.prototype.reduce=function(o,a){return this.ops.reduce(o,a)},u.prototype.changeLength=function(){return this.reduce(function(o,a){return a.insert?o+g.default.length(a):a.delete?o-a.delete:o},0)},u.prototype.length=function(){return this.reduce(function(o,a){return o+g.default.length(a)},0)},u.prototype.slice=function(o,a){o===void 0&&(o=0),a===void 0&&(a=1/0);for(var s=[],m=g.default.iterator(this.ops),p=0;p<a&&m.hasNext();){var O=void 0;p<o?O=m.next(o-p):(O=m.next(a-p),s.push(O)),p+=g.default.length(O)}return new u(s)},u.prototype.compose=function(o){var a=g.default.iterator(this.ops),s=g.default.iterator(o.ops),m=[],p=s.peek();if(p!=null&&typeof p.retain=="number"&&p.attributes==null){for(var O=p.retain;a.peekType()==="insert"&&a.peekLength()<=O;)O-=a.peekLength(),m.push(a.next());p.retain-O>0&&s.next(p.retain-O)}for(var N=new u(m);a.hasNext()||s.hasNext();)if(s.peekType()==="insert")N.push(s.next());else if(a.peekType()==="delete")N.push(a.next());else{var I=Math.min(a.peekLength(),s.peekLength()),A=a.next(I),S=s.next(I);if(typeof S.retain=="number"){var P={};typeof A.retain=="number"?P.retain=I:P.insert=A.insert;var x=i.default.compose(A.attributes,S.attributes,typeof A.retain=="number");if(x&&(P.attributes=x),N.push(P),!s.hasNext()&&l.default(N.ops[N.ops.length-1],P)){var R=new u(a.rest());return N.concat(R).chop()}}else typeof S.delete=="number"&&typeof A.retain=="number"&&N.push(S)}return N.chop()},u.prototype.concat=function(o){var a=new u(this.ops.slice());return o.ops.length>0&&(a.push(o.ops[0]),a.ops=a.ops.concat(o.ops.slice(1))),a},u.prototype.diff=function(o,a){if(this.ops===o.ops)return new u;var s=[this,o].map(function(I){return I.map(function(A){if(A.insert!=null)return typeof A.insert=="string"?A.insert:b;throw new Error("diff() called "+(I===o?"on":"with")+" non-document")}).join("")}),m=new u,p=v.default(s[0],s[1],a),O=g.default.iterator(this.ops),N=g.default.iterator(o.ops);return p.forEach(function(I){for(var A=I[1].length;A>0;){var S=0;switch(I[0]){case v.default.INSERT:S=Math.min(N.peekLength(),A),m.push(N.next(S));break;case v.default.DELETE:S=Math.min(A,O.peekLength()),O.next(S),m.delete(S);break;case v.default.EQUAL:S=Math.min(O.peekLength(),N.peekLength(),A);var P=O.next(S),x=N.next(S);l.default(P.insert,x.insert)?m.retain(S,i.default.diff(P.attributes,x.attributes)):m.push(x).delete(S)}A-=S}}),m.chop()},u.prototype.eachLine=function(o,a){a===void 0&&(a=`
`);for(var s=g.default.iterator(this.ops),m=new u,p=0;s.hasNext();){if(s.peekType()!=="insert")return;var O=s.peek(),N=g.default.length(O)-s.peekLength(),I=typeof O.insert=="string"?O.insert.indexOf(a,N)-N:-1;if(I<0)m.push(s.next());else if(I>0)m.push(s.next(I));else{if(o(m,s.next(1).attributes||{},p)===!1)return;p+=1,m=new u}}m.length()>0&&o(m,{},p)},u.prototype.invert=function(o){var a=new u;return this.reduce(function(s,m){if(m.insert)a.delete(g.default.length(m));else{if(m.retain&&m.attributes==null)return a.retain(m.retain),s+m.retain;if(m.delete||m.retain&&m.attributes){var p=m.delete||m.retain;return o.slice(s,s+p).forEach(function(O){m.delete?a.push(O):m.retain&&m.attributes&&a.retain(g.default.length(O),i.default.invert(m.attributes,O.attributes))}),s+p}}return s},0),a.chop()},u.prototype.transform=function(o,a){if(a===void 0&&(a=!1),a=!!a,typeof o=="number")return this.transformPosition(o,a);for(var s=o,m=g.default.iterator(this.ops),p=g.default.iterator(s.ops),O=new u;m.hasNext()||p.hasNext();)if(m.peekType()!=="insert"||!a&&p.peekType()==="insert")if(p.peekType()==="insert")O.push(p.next());else{var N=Math.min(m.peekLength(),p.peekLength()),I=m.next(N),A=p.next(N);if(I.delete)continue;A.delete?O.push(A):O.retain(N,i.default.transform(I.attributes,A.attributes,a))}else O.retain(g.default.length(m.next()));return O.chop()},u.prototype.transformPosition=function(o,a){a===void 0&&(a=!1),a=!!a;for(var s=g.default.iterator(this.ops),m=0;s.hasNext()&&m<=o;){var p=s.peekLength(),O=s.peekType();s.next(),O!=="delete"?(O==="insert"&&(m<o||!a)&&(o+=p),m+=p):o-=Math.min(p,o-m)}return o},u.Op=g.default,u.AttributeMap=i.default,u}();C.exports=h},977:function(C,_,w){var y=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(_,"__esModule",{value:!0});var v=y(w(430)),r=function(){function l(i){this.ops=i,this.index=0,this.offset=0}return l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(i){i||(i=1/0);var g=this.ops[this.index];if(g){var b=this.offset,h=v.default.length(g);if(i>=h-b?(i=h-b,this.index+=1,this.offset=0):this.offset+=i,typeof g.delete=="number")return{delete:i};var u={};return g.attributes&&(u.attributes=g.attributes),typeof g.retain=="number"?u.retain=i:typeof g.insert=="string"?u.insert=g.insert.substr(b,i):u.insert=g.insert,u}return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?v.default.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var i=this.offset,g=this.index,b=this.next(),h=this.ops.slice(this.index);return this.offset=i,this.index=g,[b].concat(h)}return[]},l}();_.default=r},430:function(C,_,w){var y=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(_,"__esModule",{value:!0});var v,r=y(w(977));(function(l){l.iterator=function(i){return new r.default(i)},l.length=function(i){return typeof i.delete=="number"?i.delete:typeof i.retain=="number"?i.retain:typeof i.insert=="string"?i.insert.length:1}})(v||(v={})),_.default=v},103:C=>{var _=-1;function w(a,s,m,p){if(a===s)return a?[[0,a]]:[];if(m!=null){var O=function(P,x,R){var L=typeof R=="number"?{index:R,length:0}:R.oldRange,J=typeof R=="number"?null:R.newRange,z=P.length,te=x.length;if(L.length===0&&(J===null||J.length===0)){var Z=L.index,q=P.slice(0,Z),B=P.slice(Z),$=J?J.index:null,U=Z+te-z;if(($===null||$===U)&&!(U<0||U>te)){var re=x.slice(0,U);if((X=x.slice(U))===B){var ee=Math.min(Z,U);if((le=q.slice(0,ee))===(_e=re.slice(0,ee)))return u(le,q.slice(ee),re.slice(ee),B)}}if($===null||$===Z){var V=Z,X=(re=x.slice(0,V),x.slice(V));if(re===q){var ie=Math.min(z-V,te-V);if((ve=B.slice(B.length-ie))===(Ne=X.slice(X.length-ie)))return u(q,B.slice(0,B.length-ie),X.slice(0,X.length-ie),ve)}}}if(L.length>0&&J&&J.length===0){var le=P.slice(0,L.index),ve=P.slice(L.index+L.length);if(!(te<(ee=le.length)+(ie=ve.length))){var _e=x.slice(0,ee),Ne=x.slice(te-ie);if(le===_e&&ve===Ne)return u(le,P.slice(ee,z-ie),x.slice(ee,te-ie),ve)}}return null}(a,s,m);if(O)return O}var N=v(a,s),I=a.substring(0,N);N=r(a=a.substring(N),s=s.substring(N));var A=a.substring(a.length-N),S=function(P,x){var R;if(!P)return[[1,x]];if(!x)return[[_,P]];var L=P.length>x.length?P:x,J=P.length>x.length?x:P,z=L.indexOf(J);if(z!==-1)return R=[[1,L.substring(0,z)],[0,J],[1,L.substring(z+J.length)]],P.length>x.length&&(R[0][0]=R[2][0]=_),R;if(J.length===1)return[[_,P],[1,x]];var te=function(V,X){var ie=V.length>X.length?V:X,le=V.length>X.length?X:V;if(ie.length<4||2*le.length<ie.length)return null;function ve(G,se,oe){for(var we,me,Pe,Be,qe=G.substring(oe,oe+Math.floor(G.length/4)),at=-1,ft="";(at=se.indexOf(qe,at+1))!==-1;){var Je=v(G.substring(oe),se.substring(at)),He=r(G.substring(0,oe),se.substring(0,at));ft.length<He+Je&&(ft=se.substring(at-He,at)+se.substring(at,at+Je),we=G.substring(0,oe-He),me=G.substring(oe+Je),Pe=se.substring(0,at-He),Be=se.substring(at+Je))}return 2*ft.length>=G.length?[we,me,Pe,Be,ft]:null}var _e,Ne,Le,Me,Q,ce=ve(ie,le,Math.ceil(ie.length/4)),ue=ve(ie,le,Math.ceil(ie.length/2));return ce||ue?(_e=ue?ce&&ce[4].length>ue[4].length?ce:ue:ce,V.length>X.length?(Ne=_e[0],Le=_e[1],Me=_e[2],Q=_e[3]):(Me=_e[0],Q=_e[1],Ne=_e[2],Le=_e[3]),[Ne,Le,Me,Q,_e[4]]):null}(P,x);if(te){var Z=te[0],q=te[1],B=te[2],$=te[3],U=te[4],re=w(Z,B),ee=w(q,$);return re.concat([[0,U]],ee)}return function(V,X){for(var ie=V.length,le=X.length,ve=Math.ceil((ie+le)/2),_e=ve,Ne=2*ve,Le=new Array(Ne),Me=new Array(Ne),Q=0;Q<Ne;Q++)Le[Q]=-1,Me[Q]=-1;Le[_e+1]=0,Me[_e+1]=0;for(var ce=ie-le,ue=ce%2!=0,G=0,se=0,oe=0,we=0,me=0;me<ve;me++){for(var Pe=-me+G;Pe<=me-se;Pe+=2){for(var Be=_e+Pe,qe=(Oe=Pe===-me||Pe!==me&&Le[Be-1]<Le[Be+1]?Le[Be+1]:Le[Be-1]+1)-Pe;Oe<ie&&qe<le&&V.charAt(Oe)===X.charAt(qe);)Oe++,qe++;if(Le[Be]=Oe,Oe>ie)se+=2;else if(qe>le)G+=2;else if(ue&&(Je=_e+ce-Pe)>=0&&Je<Ne&&Me[Je]!==-1&&Oe>=(ft=ie-Me[Je]))return y(V,X,Oe,qe)}for(var at=-me+oe;at<=me-we;at+=2){for(var ft,Je=_e+at,He=(ft=at===-me||at!==me&&Me[Je-1]<Me[Je+1]?Me[Je+1]:Me[Je-1]+1)-at;ft<ie&&He<le&&V.charAt(ie-ft-1)===X.charAt(le-He-1);)ft++,He++;if(Me[Je]=ft,ft>ie)we+=2;else if(He>le)oe+=2;else if(!ue){var Oe;if((Be=_e+ce-at)>=0&&Be<Ne&&Le[Be]!==-1&&(qe=_e+(Oe=Le[Be])-Be,Oe>=(ft=ie-ft)))return y(V,X,Oe,qe)}}}return[[_,V],[1,X]]}(P,x)}(a=a.substring(0,a.length-N),s=s.substring(0,s.length-N));return I&&S.unshift([0,I]),A&&S.push([0,A]),l(S,p),S}function y(a,s,m,p){var O=a.substring(0,m),N=s.substring(0,p),I=a.substring(m),A=s.substring(p),S=w(O,N),P=w(I,A);return S.concat(P)}function v(a,s){if(!a||!s||a.charAt(0)!==s.charAt(0))return 0;for(var m=0,p=Math.min(a.length,s.length),O=p,N=0;m<O;)a.substring(N,O)==s.substring(N,O)?N=m=O:p=O,O=Math.floor((p-m)/2+m);return i(a.charCodeAt(O-1))&&O--,O}function r(a,s){if(!a||!s||a.slice(-1)!==s.slice(-1))return 0;for(var m=0,p=Math.min(a.length,s.length),O=p,N=0;m<O;)a.substring(a.length-O,a.length-N)==s.substring(s.length-O,s.length-N)?N=m=O:p=O,O=Math.floor((p-m)/2+m);return g(a.charCodeAt(a.length-O))&&O--,O}function l(a,s){a.push([0,""]);for(var m,p=0,O=0,N=0,I="",A="";p<a.length;)if(p<a.length-1&&!a[p][1])a.splice(p,1);else switch(a[p][0]){case 1:N++,A+=a[p][1],p++;break;case _:O++,I+=a[p][1],p++;break;case 0:var S=p-N-O-1;if(s){if(S>=0&&h(a[S][1])){var P=a[S][1].slice(-1);if(a[S][1]=a[S][1].slice(0,-1),I=P+I,A=P+A,!a[S][1]){a.splice(S,1),p--;var x=S-1;a[x]&&a[x][0]===1&&(N++,A=a[x][1]+A,x--),a[x]&&a[x][0]===_&&(O++,I=a[x][1]+I,x--),S=x}}b(a[p][1])&&(P=a[p][1].charAt(0),a[p][1]=a[p][1].slice(1),I+=P,A+=P)}if(p<a.length-1&&!a[p][1]){a.splice(p,1);break}if(I.length>0||A.length>0){I.length>0&&A.length>0&&((m=v(A,I))!==0&&(S>=0?a[S][1]+=A.substring(0,m):(a.splice(0,0,[0,A.substring(0,m)]),p++),A=A.substring(m),I=I.substring(m)),(m=r(A,I))!==0&&(a[p][1]=A.substring(A.length-m)+a[p][1],A=A.substring(0,A.length-m),I=I.substring(0,I.length-m)));var R=N+O;I.length===0&&A.length===0?(a.splice(p-R,R),p-=R):I.length===0?(a.splice(p-R,R,[1,A]),p=p-R+1):A.length===0?(a.splice(p-R,R,[_,I]),p=p-R+1):(a.splice(p-R,R,[_,I],[1,A]),p=p-R+2)}p!==0&&a[p-1][0]===0?(a[p-1][1]+=a[p][1],a.splice(p,1)):p++,N=0,O=0,I="",A=""}a[a.length-1][1]===""&&a.pop();var L=!1;for(p=1;p<a.length-1;)a[p-1][0]===0&&a[p+1][0]===0&&(a[p][1].substring(a[p][1].length-a[p-1][1].length)===a[p-1][1]?(a[p][1]=a[p-1][1]+a[p][1].substring(0,a[p][1].length-a[p-1][1].length),a[p+1][1]=a[p-1][1]+a[p+1][1],a.splice(p-1,1),L=!0):a[p][1].substring(0,a[p+1][1].length)==a[p+1][1]&&(a[p-1][1]+=a[p+1][1],a[p][1]=a[p][1].substring(a[p+1][1].length)+a[p+1][1],a.splice(p+1,1),L=!0)),p++;L&&l(a,s)}function i(a){return a>=55296&&a<=56319}function g(a){return a>=56320&&a<=57343}function b(a){return g(a.charCodeAt(0))}function h(a){return i(a.charCodeAt(a.length-1))}function u(a,s,m,p){return h(a)||b(p)?null:function(O){for(var N=[],I=0;I<O.length;I++)O[I][1].length>0&&N.push(O[I]);return N}([[0,a],[_,s],[1,m],[0,p]])}function o(a,s,m){return w(a,s,m,!0)}o.INSERT=1,o.DELETE=_,o.EQUAL=0,C.exports=o},165:function(C,_,w){var y,v;(v=typeof(y=function(){var r,l={};function i(h,u,o){var a=h.getClientRects();if(a.length===2){var s=h.getBoundingClientRect();return a[u][o]<s[o]}return!1}function g(h){if(!h||screen.deviceXDPI===screen.logicalXDPI)return h;if("length"in h)return Array.prototype.map.call(h,g);var u=screen.deviceXDPI/screen.logicalXDPI;return{top:h.top/u,bottom:h.bottom/u,left:h.left/u,right:h.right/u,width:h.width/u,height:h.height/u}}function b(h,u){var o,a=0,s=1024;if(s>=u.length)return Array.prototype.push.apply(h,u);for(;a<u.length;)o=Array.prototype.push.apply(h,Array.prototype.slice.call(u,a,a+s)),a+=s;return o}return l.isBroken=function(){if(r===void 0){var h=document.createElement("p"),u=document.createElement("span"),o=document.createTextNode("aa"),a=document.createTextNode("aa"),s=document.createElement("img");s.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var m=document.createRange();if(r={},h.appendChild(o),h.appendChild(u),u.appendChild(s),u.appendChild(a),document.body.appendChild(h),m.setStart(o,1),m.setEnd(u,0),r.getClientRects=r.getBoundingClientRect=m.getClientRects().length>1,r.getClientRects||(m.setEnd(a,1),r.getClientRects=r.getBoundingClientRect=m.getClientRects().length===2),!r.getBoundingClientRect){m.setEnd(m.startContainer,m.startOffset);var p=m.getBoundingClientRect();r.getBoundingClientRect=p.top===0&&p.left===0}if(document.body.removeChild(h),!r.getBoundingClientRect){var O=document.createElement("p");O.style.width="0px",O.style.fontSize="20px",O.style.whiteSpace="normal",O.style.wordBreak="normal";var N=document.createTextNode("m mm");O.appendChild(N),document.body.appendChild(O),m.setStart(N,1),m.setEnd(N,2),i(m,1,"left")?r.getBoundingClientRect=!0:(m.setStart(N,1),m.setEnd(N,3),i(m,0,"top")&&(r.getBoundingClientRect=!0)),document.body.removeChild(O)}var I=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();r.ieZoom=!!I&&I<=10}return r},l.getClientRects=function(h){var u=this.isBroken();if(u.ieZoom)return g(h.getClientRects());if(!u.getClientRects)return h.getClientRects();var o=[],a=[],s=h.endContainer,m=h.endOffset,p=document.createRange();function O(N){for(var I=0;N=N.previousSibling;)I++;return I}for(;s!==h.commonAncestorContainer;)p.setStart(s,0),p.setEnd(s,m),b(a,p.getClientRects()),m=O(s),s=s.parentNode;return(p=h.cloneRange()).setEnd(s,m),b(o,p.getClientRects()),b(o,a),o},l.getBoundingClientRect=function(h){var u=this.getClientRects(h);if(u.length===0)return null;var o,a=h.getBoundingClientRect(),s=this.isBroken();if(s.ieZoom)return g(a);if(!s.getBoundingClientRect)return a;if(a.width===0&&a.height===0)return u[0];for(var m=0,p=u.length;m<p;m++){var O=u[m];o?(o.left=Math.min(o.left,O.left),o.top=Math.min(o.top,O.top),o.right=Math.max(o.right,O.right),o.bottom=Math.max(o.bottom,O.bottom)):o={left:O.left,top:O.top,right:O.right,bottom:O.bottom}}return o&&(o.width=o.right-o.left,o.height=o.bottom-o.top),o},l})=="function"?y.call(_,w,_,C):y)===void 0||(C.exports=v)},33:(C,_,w)=>{w.r(_),w.d(_,{default:()=>x});var y=function(){if(typeof Map<"u")return Map;function R(L,J){var z=-1;return L.some(function(te,Z){return te[0]===J&&(z=Z,!0)}),z}return function(){function L(){this.__entries__=[]}return Object.defineProperty(L.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),L.prototype.get=function(J){var z=R(this.__entries__,J),te=this.__entries__[z];return te&&te[1]},L.prototype.set=function(J,z){var te=R(this.__entries__,J);~te?this.__entries__[te][1]=z:this.__entries__.push([J,z])},L.prototype.delete=function(J){var z=this.__entries__,te=R(z,J);~te&&z.splice(te,1)},L.prototype.has=function(J){return!!~R(this.__entries__,J)},L.prototype.clear=function(){this.__entries__.splice(0)},L.prototype.forEach=function(J,z){z===void 0&&(z=null);for(var te=0,Z=this.__entries__;te<Z.length;te++){var q=Z[te];J.call(z,q[1],q[0])}},L}()}(),v=typeof window<"u"&&typeof document<"u"&&window.document===document,r=w.g!==void 0&&w.g.Math===Math?w.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),l=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(r):function(R){return setTimeout(function(){return R(Date.now())},1e3/60)},i=["top","right","bottom","left","width","height","size","weight"],g=typeof MutationObserver<"u",b=function(){function R(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(L,J){var z=!1,te=!1,Z=0;function q(){z&&(z=!1,L()),te&&$()}function B(){l(q)}function $(){var U=Date.now();if(z){if(U-Z<2)return;te=!0}else z=!0,te=!1,setTimeout(B,20);Z=U}return $}(this.refresh.bind(this))}return R.prototype.addObserver=function(L){~this.observers_.indexOf(L)||this.observers_.push(L),this.connected_||this.connect_()},R.prototype.removeObserver=function(L){var J=this.observers_,z=J.indexOf(L);~z&&J.splice(z,1),!J.length&&this.connected_&&this.disconnect_()},R.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},R.prototype.updateObservers_=function(){var L=this.observers_.filter(function(J){return J.gatherActive(),J.hasActive()});return L.forEach(function(J){return J.broadcastActive()}),L.length>0},R.prototype.connect_=function(){v&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),g?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},R.prototype.disconnect_=function(){v&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},R.prototype.onTransitionEnd_=function(L){var J=L.propertyName,z=J===void 0?"":J;i.some(function(te){return!!~z.indexOf(te)})&&this.refresh()},R.getInstance=function(){return this.instance_||(this.instance_=new R),this.instance_},R.instance_=null,R}(),h=function(R,L){for(var J=0,z=Object.keys(L);J<z.length;J++){var te=z[J];Object.defineProperty(R,te,{value:L[te],enumerable:!1,writable:!1,configurable:!0})}return R},u=function(R){return R&&R.ownerDocument&&R.ownerDocument.defaultView||r},o=O(0,0,0,0);function a(R){return parseFloat(R)||0}function s(R){for(var L=[],J=1;J<arguments.length;J++)L[J-1]=arguments[J];return L.reduce(function(z,te){return z+a(R["border-"+te+"-width"])},0)}var m=typeof SVGGraphicsElement<"u"?function(R){return R instanceof u(R).SVGGraphicsElement}:function(R){return R instanceof u(R).SVGElement&&typeof R.getBBox=="function"};function p(R){return v?m(R)?function(L){var J=L.getBBox();return O(0,0,J.width,J.height)}(R):function(L){var J=L.clientWidth,z=L.clientHeight;if(!J&&!z)return o;var te=u(L).getComputedStyle(L),Z=function(V){for(var X={},ie=0,le=["top","right","bottom","left"];ie<le.length;ie++){var ve=le[ie],_e=V["padding-"+ve];X[ve]=a(_e)}return X}(te),q=Z.left+Z.right,B=Z.top+Z.bottom,$=a(te.width),U=a(te.height);if(te.boxSizing==="border-box"&&(Math.round($+q)!==J&&($-=s(te,"left","right")+q),Math.round(U+B)!==z&&(U-=s(te,"top","bottom")+B)),!function(V){return V===u(V).document.documentElement}(L)){var re=Math.round($+q)-J,ee=Math.round(U+B)-z;Math.abs(re)!==1&&($-=re),Math.abs(ee)!==1&&(U-=ee)}return O(Z.left,Z.top,$,U)}(R):o}function O(R,L,J,z){return{x:R,y:L,width:J,height:z}}var N=function(){function R(L){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O(0,0,0,0),this.target=L}return R.prototype.isActive=function(){var L=p(this.target);return this.contentRect_=L,L.width!==this.broadcastWidth||L.height!==this.broadcastHeight},R.prototype.broadcastRect=function(){var L=this.contentRect_;return this.broadcastWidth=L.width,this.broadcastHeight=L.height,L},R}(),I=function(R,L){var J,z,te,Z,q,B,$,U=(z=(J=L).x,te=J.y,Z=J.width,q=J.height,B=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,$=Object.create(B.prototype),h($,{x:z,y:te,width:Z,height:q,top:te,right:z+Z,bottom:q+te,left:z}),$);h(this,{target:R,contentRect:U})},A=function(){function R(L,J,z){if(this.activeObservations_=[],this.observations_=new y,typeof L!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=L,this.controller_=J,this.callbackCtx_=z}return R.prototype.observe=function(L){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(L instanceof u(L).Element))throw new TypeError('parameter 1 is not of type "Element".');var J=this.observations_;J.has(L)||(J.set(L,new N(L)),this.controller_.addObserver(this),this.controller_.refresh())}},R.prototype.unobserve=function(L){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(L instanceof u(L).Element))throw new TypeError('parameter 1 is not of type "Element".');var J=this.observations_;J.has(L)&&(J.delete(L),J.size||this.controller_.removeObserver(this))}},R.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},R.prototype.gatherActive=function(){var L=this;this.clearActive(),this.observations_.forEach(function(J){J.isActive()&&L.activeObservations_.push(J)})},R.prototype.broadcastActive=function(){if(this.hasActive()){var L=this.callbackCtx_,J=this.activeObservations_.map(function(z){return new I(z.target,z.broadcastRect())});this.callback_.call(L,J,L),this.clearActive()}},R.prototype.clearActive=function(){this.activeObservations_.splice(0)},R.prototype.hasActive=function(){return this.activeObservations_.length>0},R}(),S=typeof WeakMap<"u"?new WeakMap:new y,P=function R(L){if(!(this instanceof R))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var J=b.getInstance(),z=new A(L,J,this);S.set(this,z)};["observe","unobserve","disconnect"].forEach(function(R){P.prototype[R]=function(){var L;return(L=S.get(this))[R].apply(L,arguments)}});const x=r.ResizeObserver!==void 0?r.ResizeObserver:P},413:(C,_,w)=>{w.r(_),w.d(_,{default:()=>O});var y=w(379),v=w.n(y),r=w(795),l=w.n(r),i=w(569),g=w.n(i),b=w(565),h=w.n(b),u=w(216),o=w.n(u),a=w(589),s=w.n(a),m=w(582),p={};p.styleTagTransform=s(),p.setAttributes=h(),p.insert=g().bind(null,"head"),p.domAPI=l(),p.insertStyleElement=o(),v()(m.Z,p);const O=m.Z&&m.Z.locals?m.Z.locals:void 0},379:C=>{var _=[];function w(r){for(var l=-1,i=0;i<_.length;i++)if(_[i].identifier===r){l=i;break}return l}function y(r,l){for(var i={},g=[],b=0;b<r.length;b++){var h=r[b],u=l.base?h[0]+l.base:h[0],o=i[u]||0,a="".concat(u," ").concat(o);i[u]=o+1;var s=w(a),m={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(s!==-1)_[s].references++,_[s].updater(m);else{var p=v(m,l);l.byIndex=b,_.splice(b,0,{identifier:a,updater:p,references:1})}g.push(a)}return g}function v(r,l){var i=l.domAPI(l);return i.update(r),function(g){if(g){if(g.css===r.css&&g.media===r.media&&g.sourceMap===r.sourceMap&&g.supports===r.supports&&g.layer===r.layer)return;i.update(r=g)}else i.remove()}}C.exports=function(r,l){var i=y(r=r||[],l=l||{});return function(g){g=g||[];for(var b=0;b<i.length;b++){var h=w(i[b]);_[h].references--}for(var u=y(g,l),o=0;o<i.length;o++){var a=w(i[o]);_[a].references===0&&(_[a].updater(),_.splice(a,1))}i=u}}},569:C=>{var _={};C.exports=function(w,y){var v=function(r){if(_[r]===void 0){var l=document.querySelector(r);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch{l=null}_[r]=l}return _[r]}(w);if(!v)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");v.appendChild(y)}},216:C=>{C.exports=function(_){var w=document.createElement("style");return _.setAttributes(w,_.attributes),_.insert(w,_.options),w}},565:(C,_,w)=>{C.exports=function(y){var v=w.nc;v&&y.setAttribute("nonce",v)}},795:C=>{C.exports=function(_){var w=_.insertStyleElement(_);return{update:function(y){(function(v,r,l){var i="";l.supports&&(i+="@supports (".concat(l.supports,") {")),l.media&&(i+="@media ".concat(l.media," {"));var g=l.layer!==void 0;g&&(i+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),i+=l.css,g&&(i+="}"),l.media&&(i+="}"),l.supports&&(i+="}");var b=l.sourceMap;b&&typeof btoa<"u"&&(i+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(b))))," */")),r.styleTagTransform(i,v,r.options)})(w,_,y)},remove:function(){(function(y){if(y.parentNode===null)return!1;y.parentNode.removeChild(y)})(w)}}}},589:C=>{C.exports=function(_,w){if(w.styleSheet)w.styleSheet.cssText=_;else{for(;w.firstChild;)w.removeChild(w.firstChild);w.appendChild(document.createTextNode(_))}}},621:(C,_,w)=>{var y;(function(v){var r=/^\s+/,l=/\s+$/,i=0,g=v.round,b=v.min,h=v.max,u=v.random;function o(Q,ce){if(ce=ce||{},(Q=Q||"")instanceof o)return Q;if(!(this instanceof o))return new o(Q,ce);var ue=function(G){var se,oe,we,me={r:0,g:0,b:0},Pe=1,Be=null,qe=null,at=null,ft=!1,Je=!1;return typeof G=="string"&&(G=function(He){He=He.replace(r,"").replace(l,"").toLowerCase();var Oe,tt=!1;if(q[He])He=q[He],tt=!0;else if(He=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Oe=Le.rgb.exec(He))?{r:Oe[1],g:Oe[2],b:Oe[3]}:(Oe=Le.rgba.exec(He))?{r:Oe[1],g:Oe[2],b:Oe[3],a:Oe[4]}:(Oe=Le.hsl.exec(He))?{h:Oe[1],s:Oe[2],l:Oe[3]}:(Oe=Le.hsla.exec(He))?{h:Oe[1],s:Oe[2],l:Oe[3],a:Oe[4]}:(Oe=Le.hsv.exec(He))?{h:Oe[1],s:Oe[2],v:Oe[3]}:(Oe=Le.hsva.exec(He))?{h:Oe[1],s:Oe[2],v:Oe[3],a:Oe[4]}:(Oe=Le.hex8.exec(He))?{r:ee(Oe[1]),g:ee(Oe[2]),b:ee(Oe[3]),a:le(Oe[4]),format:tt?"name":"hex8"}:(Oe=Le.hex6.exec(He))?{r:ee(Oe[1]),g:ee(Oe[2]),b:ee(Oe[3]),format:tt?"name":"hex"}:(Oe=Le.hex4.exec(He))?{r:ee(Oe[1]+""+Oe[1]),g:ee(Oe[2]+""+Oe[2]),b:ee(Oe[3]+""+Oe[3]),a:le(Oe[4]+""+Oe[4]),format:tt?"name":"hex8"}:!!(Oe=Le.hex3.exec(He))&&{r:ee(Oe[1]+""+Oe[1]),g:ee(Oe[2]+""+Oe[2]),b:ee(Oe[3]+""+Oe[3]),format:tt?"name":"hex"}}(G)),typeof G=="object"&&(Me(G.r)&&Me(G.g)&&Me(G.b)?(se=G.r,oe=G.g,we=G.b,me={r:255*U(se,255),g:255*U(oe,255),b:255*U(we,255)},ft=!0,Je=String(G.r).substr(-1)==="%"?"prgb":"rgb"):Me(G.h)&&Me(G.s)&&Me(G.v)?(Be=X(G.s),qe=X(G.v),me=function(He,Oe,tt){He=6*U(He,360),Oe=U(Oe,100),tt=U(tt,100);var St=v.floor(He),Wt=He-St,jt=tt*(1-Oe),Rt=tt*(1-Wt*Oe),$t=tt*(1-(1-Wt)*Oe),bt=St%6;return{r:255*[tt,Rt,jt,jt,$t,tt][bt],g:255*[$t,tt,tt,Rt,jt,jt][bt],b:255*[jt,jt,$t,tt,tt,Rt][bt]}}(G.h,Be,qe),ft=!0,Je="hsv"):Me(G.h)&&Me(G.s)&&Me(G.l)&&(Be=X(G.s),at=X(G.l),me=function(He,Oe,tt){var St,Wt,jt;function Rt(zt,nn,Ct){return Ct<0&&(Ct+=1),Ct>1&&(Ct-=1),Ct<1/6?zt+6*(nn-zt)*Ct:Ct<.5?nn:Ct<2/3?zt+(nn-zt)*(2/3-Ct)*6:zt}if(He=U(He,360),Oe=U(Oe,100),tt=U(tt,100),Oe===0)St=Wt=jt=tt;else{var $t=tt<.5?tt*(1+Oe):tt+Oe-tt*Oe,bt=2*tt-$t;St=Rt(bt,$t,He+1/3),Wt=Rt(bt,$t,He),jt=Rt(bt,$t,He-1/3)}return{r:255*St,g:255*Wt,b:255*jt}}(G.h,Be,at),ft=!0,Je="hsl"),G.hasOwnProperty("a")&&(Pe=G.a)),Pe=$(Pe),{ok:ft,format:G.format||Je,r:b(255,h(me.r,0)),g:b(255,h(me.g,0)),b:b(255,h(me.b,0)),a:Pe}}(Q);this._originalInput=Q,this._r=ue.r,this._g=ue.g,this._b=ue.b,this._a=ue.a,this._roundA=g(100*this._a)/100,this._format=ce.format||ue.format,this._gradientType=ce.gradientType,this._r<1&&(this._r=g(this._r)),this._g<1&&(this._g=g(this._g)),this._b<1&&(this._b=g(this._b)),this._ok=ue.ok,this._tc_id=i++}function a(Q,ce,ue){Q=U(Q,255),ce=U(ce,255),ue=U(ue,255);var G,se,oe=h(Q,ce,ue),we=b(Q,ce,ue),me=(oe+we)/2;if(oe==we)G=se=0;else{var Pe=oe-we;switch(se=me>.5?Pe/(2-oe-we):Pe/(oe+we),oe){case Q:G=(ce-ue)/Pe+(ce<ue?6:0);break;case ce:G=(ue-Q)/Pe+2;break;case ue:G=(Q-ce)/Pe+4}G/=6}return{h:G,s:se,l:me}}function s(Q,ce,ue){Q=U(Q,255),ce=U(ce,255),ue=U(ue,255);var G,se,oe=h(Q,ce,ue),we=b(Q,ce,ue),me=oe,Pe=oe-we;if(se=oe===0?0:Pe/oe,oe==we)G=0;else{switch(oe){case Q:G=(ce-ue)/Pe+(ce<ue?6:0);break;case ce:G=(ue-Q)/Pe+2;break;case ue:G=(Q-ce)/Pe+4}G/=6}return{h:G,s:se,v:me}}function m(Q,ce,ue,G){var se=[V(g(Q).toString(16)),V(g(ce).toString(16)),V(g(ue).toString(16))];return G&&se[0].charAt(0)==se[0].charAt(1)&&se[1].charAt(0)==se[1].charAt(1)&&se[2].charAt(0)==se[2].charAt(1)?se[0].charAt(0)+se[1].charAt(0)+se[2].charAt(0):se.join("")}function p(Q,ce,ue,G){return[V(ie(G)),V(g(Q).toString(16)),V(g(ce).toString(16)),V(g(ue).toString(16))].join("")}function O(Q,ce){ce=ce===0?0:ce||10;var ue=o(Q).toHsl();return ue.s-=ce/100,ue.s=re(ue.s),o(ue)}function N(Q,ce){ce=ce===0?0:ce||10;var ue=o(Q).toHsl();return ue.s+=ce/100,ue.s=re(ue.s),o(ue)}function I(Q){return o(Q).desaturate(100)}function A(Q,ce){ce=ce===0?0:ce||10;var ue=o(Q).toHsl();return ue.l+=ce/100,ue.l=re(ue.l),o(ue)}function S(Q,ce){ce=ce===0?0:ce||10;var ue=o(Q).toRgb();return ue.r=h(0,b(255,ue.r-g(-ce/100*255))),ue.g=h(0,b(255,ue.g-g(-ce/100*255))),ue.b=h(0,b(255,ue.b-g(-ce/100*255))),o(ue)}function P(Q,ce){ce=ce===0?0:ce||10;var ue=o(Q).toHsl();return ue.l-=ce/100,ue.l=re(ue.l),o(ue)}function x(Q,ce){var ue=o(Q).toHsl(),G=(ue.h+ce)%360;return ue.h=G<0?360+G:G,o(ue)}function R(Q){var ce=o(Q).toHsl();return ce.h=(ce.h+180)%360,o(ce)}function L(Q){var ce=o(Q).toHsl(),ue=ce.h;return[o(Q),o({h:(ue+120)%360,s:ce.s,l:ce.l}),o({h:(ue+240)%360,s:ce.s,l:ce.l})]}function J(Q){var ce=o(Q).toHsl(),ue=ce.h;return[o(Q),o({h:(ue+90)%360,s:ce.s,l:ce.l}),o({h:(ue+180)%360,s:ce.s,l:ce.l}),o({h:(ue+270)%360,s:ce.s,l:ce.l})]}function z(Q){var ce=o(Q).toHsl(),ue=ce.h;return[o(Q),o({h:(ue+72)%360,s:ce.s,l:ce.l}),o({h:(ue+216)%360,s:ce.s,l:ce.l})]}function te(Q,ce,ue){ce=ce||6,ue=ue||30;var G=o(Q).toHsl(),se=360/ue,oe=[o(Q)];for(G.h=(G.h-(se*ce>>1)+720)%360;--ce;)G.h=(G.h+se)%360,oe.push(o(G));return oe}function Z(Q,ce){ce=ce||6;for(var ue=o(Q).toHsv(),G=ue.h,se=ue.s,oe=ue.v,we=[],me=1/ce;ce--;)we.push(o({h:G,s:se,v:oe})),oe=(oe+me)%1;return we}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Q=this.toRgb();return(299*Q.r+587*Q.g+114*Q.b)/1e3},getLuminance:function(){var Q,ce,ue,G=this.toRgb();return Q=G.r/255,ce=G.g/255,ue=G.b/255,.2126*(Q<=.03928?Q/12.92:v.pow((Q+.055)/1.055,2.4))+.7152*(ce<=.03928?ce/12.92:v.pow((ce+.055)/1.055,2.4))+.0722*(ue<=.03928?ue/12.92:v.pow((ue+.055)/1.055,2.4))},setAlpha:function(Q){return this._a=$(Q),this._roundA=g(100*this._a)/100,this},toHsv:function(){var Q=s(this._r,this._g,this._b);return{h:360*Q.h,s:Q.s,v:Q.v,a:this._a}},toHsvString:function(){var Q=s(this._r,this._g,this._b),ce=g(360*Q.h),ue=g(100*Q.s),G=g(100*Q.v);return this._a==1?"hsv("+ce+", "+ue+"%, "+G+"%)":"hsva("+ce+", "+ue+"%, "+G+"%, "+this._roundA+")"},toHsl:function(){var Q=a(this._r,this._g,this._b);return{h:360*Q.h,s:Q.s,l:Q.l,a:this._a}},toHslString:function(){var Q=a(this._r,this._g,this._b),ce=g(360*Q.h),ue=g(100*Q.s),G=g(100*Q.l);return this._a==1?"hsl("+ce+", "+ue+"%, "+G+"%)":"hsla("+ce+", "+ue+"%, "+G+"%, "+this._roundA+")"},toHex:function(Q){return m(this._r,this._g,this._b,Q)},toHexString:function(Q){return"#"+this.toHex(Q)},toHex8:function(Q){return function(ce,ue,G,se,oe){var we=[V(g(ce).toString(16)),V(g(ue).toString(16)),V(g(G).toString(16)),V(ie(se))];return oe&&we[0].charAt(0)==we[0].charAt(1)&&we[1].charAt(0)==we[1].charAt(1)&&we[2].charAt(0)==we[2].charAt(1)&&we[3].charAt(0)==we[3].charAt(1)?we[0].charAt(0)+we[1].charAt(0)+we[2].charAt(0)+we[3].charAt(0):we.join("")}(this._r,this._g,this._b,this._a,Q)},toHex8String:function(Q){return"#"+this.toHex8(Q)},toRgb:function(){return{r:g(this._r),g:g(this._g),b:g(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+g(this._r)+", "+g(this._g)+", "+g(this._b)+")":"rgba("+g(this._r)+", "+g(this._g)+", "+g(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:g(100*U(this._r,255))+"%",g:g(100*U(this._g,255))+"%",b:g(100*U(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+g(100*U(this._r,255))+"%, "+g(100*U(this._g,255))+"%, "+g(100*U(this._b,255))+"%)":"rgba("+g(100*U(this._r,255))+"%, "+g(100*U(this._g,255))+"%, "+g(100*U(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(B[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Q){var ce="#"+p(this._r,this._g,this._b,this._a),ue=ce,G=this._gradientType?"GradientType = 1, ":"";if(Q){var se=o(Q);ue="#"+p(se._r,se._g,se._b,se._a)}return"progid:DXImageTransform.Microsoft.gradient("+G+"startColorstr="+ce+",endColorstr="+ue+")"},toString:function(Q){var ce=!!Q;Q=Q||this._format;var ue=!1,G=this._a<1&&this._a>=0;return ce||!G||Q!=="hex"&&Q!=="hex6"&&Q!=="hex3"&&Q!=="hex4"&&Q!=="hex8"&&Q!=="name"?(Q==="rgb"&&(ue=this.toRgbString()),Q==="prgb"&&(ue=this.toPercentageRgbString()),Q!=="hex"&&Q!=="hex6"||(ue=this.toHexString()),Q==="hex3"&&(ue=this.toHexString(!0)),Q==="hex4"&&(ue=this.toHex8String(!0)),Q==="hex8"&&(ue=this.toHex8String()),Q==="name"&&(ue=this.toName()),Q==="hsl"&&(ue=this.toHslString()),Q==="hsv"&&(ue=this.toHsvString()),ue||this.toHexString()):Q==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return o(this.toString())},_applyModification:function(Q,ce){var ue=Q.apply(null,[this].concat([].slice.call(ce)));return this._r=ue._r,this._g=ue._g,this._b=ue._b,this.setAlpha(ue._a),this},lighten:function(){return this._applyModification(A,arguments)},brighten:function(){return this._applyModification(S,arguments)},darken:function(){return this._applyModification(P,arguments)},desaturate:function(){return this._applyModification(O,arguments)},saturate:function(){return this._applyModification(N,arguments)},greyscale:function(){return this._applyModification(I,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(Q,ce){return Q.apply(null,[this].concat([].slice.call(ce)))},analogous:function(){return this._applyCombination(te,arguments)},complement:function(){return this._applyCombination(R,arguments)},monochromatic:function(){return this._applyCombination(Z,arguments)},splitcomplement:function(){return this._applyCombination(z,arguments)},triad:function(){return this._applyCombination(L,arguments)},tetrad:function(){return this._applyCombination(J,arguments)}},o.fromRatio=function(Q,ce){if(typeof Q=="object"){var ue={};for(var G in Q)Q.hasOwnProperty(G)&&(ue[G]=G==="a"?Q[G]:X(Q[G]));Q=ue}return o(Q,ce)},o.equals=function(Q,ce){return!(!Q||!ce)&&o(Q).toRgbString()==o(ce).toRgbString()},o.random=function(){return o.fromRatio({r:u(),g:u(),b:u()})},o.mix=function(Q,ce,ue){ue=ue===0?0:ue||50;var G=o(Q).toRgb(),se=o(ce).toRgb(),oe=ue/100;return o({r:(se.r-G.r)*oe+G.r,g:(se.g-G.g)*oe+G.g,b:(se.b-G.b)*oe+G.b,a:(se.a-G.a)*oe+G.a})},o.readability=function(Q,ce){var ue=o(Q),G=o(ce);return(v.max(ue.getLuminance(),G.getLuminance())+.05)/(v.min(ue.getLuminance(),G.getLuminance())+.05)},o.isReadable=function(Q,ce,ue){var G,se,oe,we,me,Pe=o.readability(Q,ce);switch(se=!1,(oe=ue,(we=((oe=oe||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&we!=="AAA"&&(we="AA"),(me=(oe.size||"small").toLowerCase())!=="small"&&me!=="large"&&(me="small"),G={level:we,size:me}).level+G.size){case"AAsmall":case"AAAlarge":se=Pe>=4.5;break;case"AAlarge":se=Pe>=3;break;case"AAAsmall":se=Pe>=7}return se},o.mostReadable=function(Q,ce,ue){var G,se,oe,we,me=null,Pe=0;se=(ue=ue||{}).includeFallbackColors,oe=ue.level,we=ue.size;for(var Be=0;Be<ce.length;Be++)(G=o.readability(Q,ce[Be]))>Pe&&(Pe=G,me=o(ce[Be]));return o.isReadable(Q,me,{level:oe,size:we})||!se?me:(ue.includeFallbackColors=!1,o.mostReadable(Q,["#fff","#000"],ue))};var q=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},B=o.hexNames=function(Q){var ce={};for(var ue in Q)Q.hasOwnProperty(ue)&&(ce[Q[ue]]=ue);return ce}(q);function $(Q){return Q=parseFloat(Q),(isNaN(Q)||Q<0||Q>1)&&(Q=1),Q}function U(Q,ce){(function(G){return typeof G=="string"&&G.indexOf(".")!=-1&&parseFloat(G)===1})(Q)&&(Q="100%");var ue=function(G){return typeof G=="string"&&G.indexOf("%")!=-1}(Q);return Q=b(ce,h(0,parseFloat(Q))),ue&&(Q=parseInt(Q*ce,10)/100),v.abs(Q-ce)<1e-6?1:Q%ce/parseFloat(ce)}function re(Q){return b(1,h(0,Q))}function ee(Q){return parseInt(Q,16)}function V(Q){return Q.length==1?"0"+Q:""+Q}function X(Q){return Q<=1&&(Q=100*Q+"%"),Q}function ie(Q){return v.round(255*parseFloat(Q)).toString(16)}function le(Q){return ee(Q)/255}var ve,_e,Ne,Le=(_e="[\\s|\\(]+("+(ve="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")\\s*\\)?",Ne="[\\s|\\(]+("+ve+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")\\s*\\)?",{CSS_UNIT:new RegExp(ve),rgb:new RegExp("rgb"+_e),rgba:new RegExp("rgba"+Ne),hsl:new RegExp("hsl"+_e),hsla:new RegExp("hsla"+Ne),hsv:new RegExp("hsv"+_e),hsva:new RegExp("hsva"+Ne),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Me(Q){return!!Le.CSS_UNIT.exec(Q)}C.exports?C.exports=o:(y=function(){return o}.call(_,w,_,C))===void 0||(C.exports=y)})(Math)},607:function(C,_,w){var y=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(_,"__esModule",{value:!0}),_.Cursor=_.default=void 0;var v=y(w(678));_.default=v.default;var r=y(w(353));_.Cursor=r.default,w(413)},353:(C,_,w)=>{Object.defineProperty(_,"__esModule",{value:!0});var y=w(621),v=function(){function r(l,i,g){this.id=l,this.name=i,this.color=g,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return r.prototype.build=function(l){var i=document.createElement(r.CONTAINER_ELEMENT_TAG);i.classList.add(r.CURSOR_CLASS),i.id="ql-cursor-".concat(this.id),i.innerHTML=l.template;var g=i.getElementsByClassName(r.SELECTION_CLASS)[0],b=i.getElementsByClassName(r.CARET_CONTAINER_CLASS)[0],h=b.getElementsByClassName(r.CARET_CLASS)[0],u=i.getElementsByClassName(r.FLAG_CLASS)[0];return u.style.backgroundColor=this.color,h.style.backgroundColor=this.color,i.getElementsByClassName(r.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(l.hideDelayMs,"ms"),this._hideSpeedMs=l.hideSpeedMs,this._positionFlag=l.positionFlag,u.style.transitionDelay=this._hideDelay,u.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=i,this._selectionEl=g,this._caretEl=b,this._flagEl=u,b.addEventListener("mouseover",this._setHoverState),this._el},r.prototype.show=function(){this._el.classList.remove(r.HIDDEN_CLASS)},r.prototype.hide=function(){this._el.classList.add(r.HIDDEN_CLASS)},r.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},r.prototype.toggleNearCursor=function(l,i){var g=this._getCoordinates(),b=g.left,h=g.right,u=g.top,o=g.bottom,a=l>=b&&l<=h&&i>=u&&i<=o;return this._caretEl.classList.toggle(r.CONTAINER_HOVER_CLASS,a),a},r.prototype.toggleFlag=function(l){var i=this;this._caretEl.classList.toggle(r.CONTAINER_HOVER_CLASS,l)||(this._flagEl.classList.add(r.NO_DELAY_CLASS),setTimeout(function(){return i._flagEl.classList.remove(r.NO_DELAY_CLASS)},this._hideSpeedMs))},r.prototype.updateCaret=function(l,i){this._caretEl.style.top="".concat(l.top,"px"),this._caretEl.style.left="".concat(l.left,"px"),this._caretEl.style.height="".concat(l.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,l,i):this._updateCaretFlag(l,i)},r.prototype.updateSelection=function(l,i){var g=this;this._clearSelection(),l=l||[],l=Array.from(l),l=this._sanitize(l),(l=this._sortByDomPosition(l)).forEach(function(b){return g._addSelection(b,i)})},r.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},r.prototype._toggleOpenedCursor=function(l){var i=this.toggleNearCursor(l.clientX,l.clientY);this._caretEl.classList.toggle(r.CONTAINER_NO_POINTER_CLASS,i),i||document.removeEventListener("mousemove",this._toggleOpenedCursor)},r.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},r.prototype._updateCaretFlag=function(l,i){this._flagEl.style.width="";var g=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(r.FLAG_FLIPPED_CLASS),l.left>i.width-g.width&&this._flagEl.classList.add(r.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(l.left,"px"),this._flagEl.style.top="".concat(l.top,"px"),this._flagEl.style.width="".concat(Math.ceil(g.width),"px")},r.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},r.prototype._addSelection=function(l,i){var g=this._selectionBlock(l,i);this._selectionEl.appendChild(g)},r.prototype._selectionBlock=function(l,i){var g=document.createElement(r.SELECTION_ELEMENT_TAG);return g.classList.add(r.SELECTION_BLOCK_CLASS),g.style.top="".concat(l.top-i.top,"px"),g.style.left="".concat(l.left-i.left,"px"),g.style.width="".concat(l.width,"px"),g.style.height="".concat(l.height,"px"),g.style.backgroundColor=y(this.color).setAlpha(.3).toString(),g},r.prototype._sortByDomPosition=function(l){return l.sort(function(i,g){return i.top===g.top?i.left-g.left:i.top-g.top})},r.prototype._sanitize=function(l){var i=this,g=new Set;return l.filter(function(b){if(!b.width||!b.height)return!1;var h=i._serialize(b);return!g.has(h)&&(g.add(h),!0)})},r.prototype._serialize=function(l){return["top:".concat(l.top),"right:".concat(l.right),"bottom:".concat(l.bottom),"left:".concat(l.left)].join(";")},r.CONTAINER_ELEMENT_TAG="SPAN",r.SELECTION_ELEMENT_TAG="SPAN",r.CURSOR_CLASS="ql-cursor",r.SELECTION_CLASS="ql-cursor-selections",r.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",r.CARET_CLASS="ql-cursor-caret",r.CARET_CONTAINER_CLASS="ql-cursor-caret-container",r.CONTAINER_HOVER_CLASS="hover",r.CONTAINER_NO_POINTER_CLASS="no-pointer",r.FLAG_CLASS="ql-cursor-flag",r.FLAG_FLIPPED_CLASS="flag-flipped",r.NAME_CLASS="ql-cursor-name",r.HIDDEN_CLASS="hidden",r.NO_DELAY_CLASS="no-delay",r}();_.default=v},678:function(C,_,w){var y=this&&this.__createBinding||(Object.create?function(a,s,m,p){p===void 0&&(p=m),Object.defineProperty(a,p,{enumerable:!0,get:function(){return s[m]}})}:function(a,s,m,p){p===void 0&&(p=m),a[p]=s[m]}),v=this&&this.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),r=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var m in a)m!=="default"&&Object.prototype.hasOwnProperty.call(a,m)&&y(s,a,m);return v(s,a),s},l=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(_,"__esModule",{value:!0});var i=l(w(353)),g=r(w(165)),b=l(w(338)),h=l(w(33)),u=w(895),o=function(){function a(s,m){m===void 0&&(m={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=s,this.options=this._setDefaults(m),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return a.prototype.createCursor=function(s,m,p){var O=this._cursors[s];if(!O){O=new i.default(s,m,p),this._cursors[s]=O;var N=O.build(this.options);this._container.appendChild(N)}return O},a.prototype.moveCursor=function(s,m){var p=this._cursors[s];p&&(p.range=m,this._updateCursor(p))},a.prototype.removeCursor=function(s){var m=this._cursors[s];m&&(m.remove(),delete this._cursors[s])},a.prototype.update=function(){var s=this;this.cursors().forEach(function(m){return s._updateCursor(m)})},a.prototype.clearCursors=function(){var s=this;this.cursors().forEach(function(m){return s.removeCursor(m.id)})},a.prototype.toggleFlag=function(s,m){var p=this._cursors[s];p&&p.toggleFlag(m)},a.prototype.cursors=function(){var s=this;return Object.keys(this._cursors).map(function(m){return s._cursors[m]})},a.prototype._registerSelectionChangeListeners=function(){var s=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(m){s._currentSelection=m})},a.prototype._registerTextChangeListener=function(){var s=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(m){return s._handleTextChange(m)})},a.prototype._registerDomListeners=function(){var s=this,m=this.quill.container.getElementsByClassName("ql-editor")[0];m.addEventListener("scroll",function(){return s.update()}),m.addEventListener("touchstart",this._handleCursorTouch)},a.prototype._handleCursorTouch=function(s){var m=this;this.cursors().forEach(function(p){p.toggleNearCursor(s.pageX,s.pageY),setTimeout(function(){return p.toggleFlag(!1)},m.options.hideDelayMs)})},a.prototype._registerResizeObserver=function(){var s=this;if(!this._isObserving){var m=this.quill.container.getElementsByClassName("ql-editor")[0],p=new h.default(function(O){O[0].target.isConnected||(p.disconnect(),s._isObserving=!1),s.update()});p.observe(m),this._isObserving=!0}},a.prototype._updateCursor=function(s){if(this._registerResizeObserver(),!s.range)return s.hide();var m=this._indexWithinQuillBounds(s.range.index),p=this._indexWithinQuillBounds(s.range.index+s.range.length),O=this.quill.getLeaf(m),N=this.quill.getLeaf(p);if(!this._leafIsValid(O)||!this._leafIsValid(N))return s.hide();s.show();var I=this._boundsContainer.getBoundingClientRect(),A=this.quill.getBounds(p);s.updateCaret(A,I);var S=this._lineRanges(s,O,N).reduce(function(P,x){return P.concat(Array.from(g.getClientRects(x)))},[]);s.updateSelection(S,I)},a.prototype._indexWithinQuillBounds=function(s){var m=this.quill.getLength(),p=m?m-1:0;return s=Math.max(s,0),Math.min(s,p)},a.prototype._leafIsValid=function(s){return s&&s[0]&&s[0].domNode&&s[1]>=0},a.prototype._handleTextChange=function(s){var m=this;window.setTimeout(function(){m.options.transformOnTextChange&&m._transformCursors(s),m.options.selectionChangeSource&&(m._emitSelection(),m.update())})},a.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},a.prototype._setDefaults=function(s){return(s=Object.assign({},s)).template||(s.template=a.DEFAULTS.template),s.containerClass||(s.containerClass=a.DEFAULTS.containerClass),s.selectionChangeSource!==null&&(s.selectionChangeSource||(s.selectionChangeSource=a.DEFAULTS.selectionChangeSource)),s.hideDelayMs=Number.isInteger(s.hideDelayMs)?s.hideDelayMs:a.DEFAULTS.hideDelayMs,s.hideSpeedMs=Number.isInteger(s.hideSpeedMs)?s.hideSpeedMs:a.DEFAULTS.hideSpeedMs,s.transformOnTextChange=!!s.transformOnTextChange,s},a.prototype._lineRanges=function(s,m,p){var O=this.quill.getLines(s.range);return O.reduce(function(N,I,A){if(!I.children){var S=document.createRange();return S.selectNode(I.domNode),N.concat(S)}var P=A===0?m:I.path(0).pop(),x=P[0],R=P[1],L=A===O.length-1?p:I.path(I.length()-1).pop(),J=L[0],z=L[1],te=document.createRange();return x.domNode.nodeType===Node.TEXT_NODE?te.setStart(x.domNode,R):te.setStartBefore(x.domNode),J.domNode.nodeType===Node.TEXT_NODE?te.setEnd(J.domNode,z):te.setEndAfter(J.domNode),N.concat(te)},[])},a.prototype._transformCursors=function(s){var m=this;s=new u(s),this.cursors().filter(function(p){return p.range}).forEach(function(p){p.range.index=s.transformPosition(p.range.index),m._updateCursor(p)})},a.DEFAULTS={template:b.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},a}();_.default=o},338:function(C,_,w){var y=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(_,"__esModule",{value:!0});var v=y(w(353)),r=`
  <span class="`.concat(v.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(v.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(v.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(v.default.FLAG_CLASS,`">
    <small class="`).concat(v.default.NAME_CLASS,`"></small>
  </div>
`);_.default=r}},M={};function D(C){var _=M[C];if(_!==void 0)return _.exports;var w=M[C]={id:C,loaded:!1,exports:{}};return H[C].call(w.exports,w,w.exports,D),w.loaded=!0,w.exports}D.n=C=>{var _=C&&C.__esModule?()=>C.default:()=>C;return D.d(_,{a:_}),_},D.d=(C,_)=>{for(var w in _)D.o(_,w)&&!D.o(C,w)&&Object.defineProperty(C,w,{enumerable:!0,get:_[w]})},D.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),D.o=(C,_)=>Object.prototype.hasOwnProperty.call(C,_),D.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},D.nmd=C=>(C.paths=[],C.children||(C.children=[]),C),D.nc=void 0;var F=D(607);return F.default})())})(no);const Qo=mi(no.exports);var lt=globalThis&&globalThis.__classPrivateFieldSet||function(Ye,ye,H){if(!ye.has(Ye))throw new TypeError("attempted to set private field on non-instance");return ye.set(Ye,H),H},Ue=globalThis&&globalThis.__classPrivateFieldGet||function(Ye,ye){if(!ye.has(Ye))throw new TypeError("attempted to get private field on non-instance");return ye.get(Ye)},br,Nr,Qn,jr,zr,ir,or,sr,ar,ur,lr,cr,fr,Ar,Fr,Tr,ii,wr;const es=function(Ye){var ye=131,H=137,M=0;Ye+="x";var D=Math.floor(9007199254740991/H);for(let F=0;F<Ye.length;F++)M>D&&(M=Math.floor(M/H)),M=M*ye+Ye.charCodeAt(F);return M},Ve="0123456789abcdef".split(""),ts=[-2147483648,8388608,32768,128],Zn=[24,16,8,0],ri=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],bn=[];class ns{constructor(ye=!1,H=!1){br.set(this,void 0),Nr.set(this,void 0),Qn.set(this,void 0),jr.set(this,void 0),zr.set(this,void 0),ir.set(this,void 0),or.set(this,void 0),sr.set(this,void 0),ar.set(this,void 0),ur.set(this,void 0),lr.set(this,void 0),cr.set(this,void 0),fr.set(this,void 0),Ar.set(this,void 0),Fr.set(this,void 0),Tr.set(this,void 0),ii.set(this,0),wr.set(this,void 0),this.init(ye,H)}init(ye,H){H?(bn[0]=bn[16]=bn[1]=bn[2]=bn[3]=bn[4]=bn[5]=bn[6]=bn[7]=bn[8]=bn[9]=bn[10]=bn[11]=bn[12]=bn[13]=bn[14]=bn[15]=0,lt(this,Nr,bn)):lt(this,Nr,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ye?(lt(this,ir,3238371032),lt(this,or,914150663),lt(this,sr,812702999),lt(this,ar,4144912697),lt(this,ur,4290775857),lt(this,lr,1750603025),lt(this,cr,1694076839),lt(this,fr,3204075428)):(lt(this,ir,1779033703),lt(this,or,3144134277),lt(this,sr,1013904242),lt(this,ar,2773480762),lt(this,ur,1359893119),lt(this,lr,2600822924),lt(this,cr,528734635),lt(this,fr,1541459225)),lt(this,br,lt(this,wr,lt(this,Qn,lt(this,Fr,0)))),lt(this,jr,lt(this,Ar,!1)),lt(this,zr,!0),lt(this,Tr,ye)}update(ye){if(Ue(this,jr))return this;let H;ye instanceof ArrayBuffer?H=new Uint8Array(ye):H=ye;let M=0;const D=H.length,F=Ue(this,Nr);for(;M<D;){let C;if(Ue(this,Ar)&&(lt(this,Ar,!1),F[0]=Ue(this,br),F[16]=F[1]=F[2]=F[3]=F[4]=F[5]=F[6]=F[7]=F[8]=F[9]=F[10]=F[11]=F[12]=F[13]=F[14]=F[15]=0),typeof H!="string")for(C=Ue(this,wr);M<D&&C<64;++M)F[C>>2]|=H[M]<<Zn[C++&3];else for(C=Ue(this,wr);M<D&&C<64;++M){let _=H.charCodeAt(M);_<128?F[C>>2]|=_<<Zn[C++&3]:_<2048?(F[C>>2]|=(192|_>>6)<<Zn[C++&3],F[C>>2]|=(128|_&63)<<Zn[C++&3]):_<55296||_>=57344?(F[C>>2]|=(224|_>>12)<<Zn[C++&3],F[C>>2]|=(128|_>>6&63)<<Zn[C++&3],F[C>>2]|=(128|_&63)<<Zn[C++&3]):(_=65536+((_&1023)<<10|H.charCodeAt(++M)&1023),F[C>>2]|=(240|_>>18)<<Zn[C++&3],F[C>>2]|=(128|_>>12&63)<<Zn[C++&3],F[C>>2]|=(128|_>>6&63)<<Zn[C++&3],F[C>>2]|=(128|_&63)<<Zn[C++&3])}lt(this,ii,C),lt(this,Qn,Ue(this,Qn)+(C-Ue(this,wr))),C>=64?(lt(this,br,F[16]),lt(this,wr,C-64),this.hash(),lt(this,Ar,!0)):lt(this,wr,C)}return Ue(this,Qn)>4294967295&&(lt(this,Fr,Ue(this,Fr)+(Ue(this,Qn)/4294967296<<0)),lt(this,Qn,Ue(this,Qn)%4294967296)),this}finalize(){if(Ue(this,jr))return;lt(this,jr,!0);const ye=Ue(this,Nr),H=Ue(this,ii);ye[16]=Ue(this,br),ye[H>>2]|=ts[H&3],lt(this,br,ye[16]),H>=56&&(Ue(this,Ar)||this.hash(),ye[0]=Ue(this,br),ye[16]=ye[1]=ye[2]=ye[3]=ye[4]=ye[5]=ye[6]=ye[7]=ye[8]=ye[9]=ye[10]=ye[11]=ye[12]=ye[13]=ye[14]=ye[15]=0),ye[14]=Ue(this,Fr)<<3|Ue(this,Qn)>>>29,ye[15]=Ue(this,Qn)<<3,this.hash()}hash(){let ye=Ue(this,ir),H=Ue(this,or),M=Ue(this,sr),D=Ue(this,ar),F=Ue(this,ur),C=Ue(this,lr),_=Ue(this,cr),w=Ue(this,fr);const y=Ue(this,Nr);let v,r,l,i,g,b,h,u,o,a;for(let s=16;s<64;++s)i=y[s-15],v=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,i=y[s-2],r=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,y[s]=y[s-16]+v+y[s-7]+r<<0;a=H&M;for(let s=0;s<64;s+=4)Ue(this,zr)?(Ue(this,Tr)?(h=300032,i=y[0]-1413257819,w=i-150054599<<0,D=i+24177077<<0):(h=704751109,i=y[0]-210244248,w=i-1521486534<<0,D=i+143694565<<0),lt(this,zr,!1)):(v=(ye>>>2|ye<<30)^(ye>>>13|ye<<19)^(ye>>>22|ye<<10),r=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),h=ye&H,l=h^ye&M^a,b=F&C^~F&_,i=w+r+b+ri[s]+y[s],g=v+l,w=D+i<<0,D=i+g<<0),v=(D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10),r=(w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7),u=D&ye,l=u^D&H^h,b=w&F^~w&C,i=_+r+b+ri[s+1]+y[s+1],g=v+l,_=M+i<<0,M=i+g<<0,v=(M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10),r=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7),o=M&D,l=o^M&ye^u,b=_&w^~_&F,i=C+r+b+ri[s+2]+y[s+2],g=v+l,C=H+i<<0,H=i+g<<0,v=(H>>>2|H<<30)^(H>>>13|H<<19)^(H>>>22|H<<10),r=(C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7),a=H&M,l=a^H&D^o,b=C&_^~C&w,i=F+r+b+ri[s+3]+y[s+3],g=v+l,F=ye+i<<0,ye=i+g<<0;lt(this,ir,Ue(this,ir)+ye<<0),lt(this,or,Ue(this,or)+H<<0),lt(this,sr,Ue(this,sr)+M<<0),lt(this,ar,Ue(this,ar)+D<<0),lt(this,ur,Ue(this,ur)+F<<0),lt(this,lr,Ue(this,lr)+C<<0),lt(this,cr,Ue(this,cr)+_<<0),lt(this,fr,Ue(this,fr)+w<<0)}hex(){this.finalize();const ye=Ue(this,ir),H=Ue(this,or),M=Ue(this,sr),D=Ue(this,ar),F=Ue(this,ur),C=Ue(this,lr),_=Ue(this,cr),w=Ue(this,fr);let y=Ve[ye>>28&15]+Ve[ye>>24&15]+Ve[ye>>20&15]+Ve[ye>>16&15]+Ve[ye>>12&15]+Ve[ye>>8&15]+Ve[ye>>4&15]+Ve[ye&15]+Ve[H>>28&15]+Ve[H>>24&15]+Ve[H>>20&15]+Ve[H>>16&15]+Ve[H>>12&15]+Ve[H>>8&15]+Ve[H>>4&15]+Ve[H&15]+Ve[M>>28&15]+Ve[M>>24&15]+Ve[M>>20&15]+Ve[M>>16&15]+Ve[M>>12&15]+Ve[M>>8&15]+Ve[M>>4&15]+Ve[M&15]+Ve[D>>28&15]+Ve[D>>24&15]+Ve[D>>20&15]+Ve[D>>16&15]+Ve[D>>12&15]+Ve[D>>8&15]+Ve[D>>4&15]+Ve[D&15]+Ve[F>>28&15]+Ve[F>>24&15]+Ve[F>>20&15]+Ve[F>>16&15]+Ve[F>>12&15]+Ve[F>>8&15]+Ve[F>>4&15]+Ve[F&15]+Ve[C>>28&15]+Ve[C>>24&15]+Ve[C>>20&15]+Ve[C>>16&15]+Ve[C>>12&15]+Ve[C>>8&15]+Ve[C>>4&15]+Ve[C&15]+Ve[_>>28&15]+Ve[_>>24&15]+Ve[_>>20&15]+Ve[_>>16&15]+Ve[_>>12&15]+Ve[_>>8&15]+Ve[_>>4&15]+Ve[_&15];return Ue(this,Tr)||(y+=Ve[w>>28&15]+Ve[w>>24&15]+Ve[w>>20&15]+Ve[w>>16&15]+Ve[w>>12&15]+Ve[w>>8&15]+Ve[w>>4&15]+Ve[w&15]),y}toString(){return this.hex()}digest(){this.finalize();const ye=Ue(this,ir),H=Ue(this,or),M=Ue(this,sr),D=Ue(this,ar),F=Ue(this,ur),C=Ue(this,lr),_=Ue(this,cr),w=Ue(this,fr),y=[ye>>24&255,ye>>16&255,ye>>8&255,ye&255,H>>24&255,H>>16&255,H>>8&255,H&255,M>>24&255,M>>16&255,M>>8&255,M&255,D>>24&255,D>>16&255,D>>8&255,D&255,F>>24&255,F>>16&255,F>>8&255,F&255,C>>24&255,C>>16&255,C>>8&255,C&255,_>>24&255,_>>16&255,_>>8&255,_&255];return Ue(this,Tr)||y.push(w>>24&255,w>>16&255,w>>8&255,w&255),y}array(){return this.digest()}arrayBuffer(){this.finalize();const ye=new ArrayBuffer(Ue(this,Tr)?28:32),H=new DataView(ye);return H.setUint32(0,Ue(this,ir)),H.setUint32(4,Ue(this,or)),H.setUint32(8,Ue(this,sr)),H.setUint32(12,Ue(this,ar)),H.setUint32(16,Ue(this,ur)),H.setUint32(20,Ue(this,lr)),H.setUint32(24,Ue(this,cr)),Ue(this,Tr)||H.setUint32(28,Ue(this,fr)),ye}}br=new WeakMap,Nr=new WeakMap,Qn=new WeakMap,jr=new WeakMap,zr=new WeakMap,ir=new WeakMap,or=new WeakMap,sr=new WeakMap,ar=new WeakMap,ur=new WeakMap,lr=new WeakMap,cr=new WeakMap,fr=new WeakMap,Ar=new WeakMap,Fr=new WeakMap,Tr=new WeakMap,ii=new WeakMap,wr=new WeakMap;function rs(Ye){const ye=new ns;return ye.update(Ye),parseInt(ye.hex().substring(0,8),16)}const is=function(Ye){var ye="#";return Ye.forEach(function(H){H<16&&(ye+=0),ye+=H.toString(16)}),ye},os=function(Ye,ye,H){Ye/=360;var M=H<.5?H*(1+ye):H+ye-H*ye,D=2*H-M;return[Ye+1/3,Ye,Ye-1/3].map(function(F){return F<0&&F++,F>1&&F--,F<1/6?F=D+(M-D)*6*F:F<.5?F=M:F<2/3?F=D+(M-D)*6*(2/3-F):F=D,Math.round(F*255)})};class ss{constructor(ye={}){const[H,M]=[ye.lightness,ye.saturation].map(function(D){return D=D!==void 0?D:[.35,.5,.65],Array.isArray(D)?D.concat():[D]});this.L=H,this.S=M,typeof ye.hue=="number"&&(ye.hue={min:ye.hue,max:ye.hue}),typeof ye.hue=="object"&&!Array.isArray(ye.hue)&&(ye.hue=[ye.hue]),typeof ye.hue>"u"&&(ye.hue=[]),this.hueRanges=ye.hue.map(function(D){return{min:typeof D.min>"u"?0:D.min,max:typeof D.max>"u"?360:D.max}}),this.hash=rs,typeof ye.hash=="function"&&(this.hash=ye.hash),ye.hash==="bkdr"&&(this.hash=es)}hsl(ye){var H,M,D,F=this.hash(ye),C=727;if(this.hueRanges.length){const _=this.hueRanges[F%this.hueRanges.length];H=F/this.hueRanges.length%C*(_.max-_.min)/C+_.min}else H=F%359;return F=Math.ceil(F/360),M=this.S[F%this.S.length],F=Math.ceil(F/this.S.length),D=this.L[F%this.L.length],[H,M,D]}rgb(ye){var H=this.hsl(ye);return os.apply(this,H)}hex(ye){var H=this.rgb(ye);return is(H)}}const kr={isOnline:!1,showOffline:Ye=>{kr.isOnline=!1,Ye.innerHTML='<span class="red"> </span>'},showOnline:Ye=>{kr.isOnline=!0,Ye.innerHTML='<span class="green"> </span>'},statusListener:Ye=>ye=>{kr.isOnline&&(ye.type==Tn.exports.ClientEventType.StatusChanged&&ye.value==Tn.exports.ClientStatus.Deactivated||ye.type==Tn.exports.ClientEventType.StreamConnectionStatusChanged&&ye.value==Tn.exports.StreamConnectionStatus.Disconnected||ye.type==Tn.exports.ClientEventType.DocumentSynced&&ye.value==Tn.exports.DocumentSyncResultType.SyncFailed)?kr.showOffline(Ye):!kr.isOnline&&(ye.type==Tn.exports.ClientEventType.StatusChanged&&ye.value==Tn.exports.ClientStatus.Activated||ye.type==Tn.exports.ClientEventType.StreamConnectionStatusChanged&&ye.value==Tn.exports.StreamConnectionStatus.Connected||ye.type==Tn.exports.ClientEventType.DocumentSynced&&ye.value==Tn.exports.DocumentSyncResultType.Synced||ye.type==Tn.exports.ClientEventType.DocumentChanged)&&kr.showOnline(Ye)}};function as(Ye,ye,H){const M=[];for(const{clientID:D,presence:F}of ye)M.push(H===D?`<b>${F.username}</b>`:F.username);Ye.innerHTML=JSON.stringify(M)}function Xi(Ye,ye,H){Ye.innerText=H.toJSON(),ye.innerText=H.getRoot().content.toTestString()}const us=document.getElementById("peers"),Zi=document.getElementById("document"),Qi=document.getElementById("document-text"),ls=document.getElementById("network-status"),cs=new ss,fs=`vanilla-quill-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`;function gi(Ye){var M;const{embed:ye,...H}=(M=Ye.attributes)!=null?M:{};return ye?{insert:JSON.parse(ye),attributes:H}:{insert:Ye.content||"",attributes:Ye.attributes}}async function hs(){const Ye=new pi.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});await Ye.activate(),Ye.subscribe(w=>{kr.statusListener(ls)(w)});const ye=new pi.Document(fs);ye.subscribe("presence",w=>{w.type!==Tn.exports.DocEventType.PresenceChanged&&as(us,ye.getPresences(),Ye.getID())}),await Ye.attach(ye,{initialPresence:{username:Ye.getID().slice(-2),color:cs.hex(Ye.getID().slice(-2)),selection:void 0}}),ye.update(w=>{w.content||(w.content=new pi.Text,w.content.edit(0,0,`
`))},"create content if not exists"),ye.subscribe(w=>{w.type==="snapshot"&&_(),Xi(Zi,Qi,ye)}),ye.subscribe("$.content",w=>{w.type==="remote-change"&&C(w.value.operations),M()}),ye.subscribe("others",w=>{w.type===Tn.exports.DocEventType.Unwatched?F.removeCursor(w.value.clientID):w.type===Tn.exports.DocEventType.PresenceChanged&&H(w.value)});function H(w){const{clientID:y,presence:v}=w;if(y===Ye.getID()||!v)return;const{username:r,color:l,selection:i}=v;if(!i)return;const g=ye.getRoot().content.posRangeToIndexRange(i);F.createCursor(y,r,l),F.moveCursor(y,{index:g[0],length:g[1]-g[0]})}function M(){for(const w of ye.getPresences())H(w)}await Ye.sync(),Gi.register("modules/cursors",Qo);const D=new Gi("#editor",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],["clean"]],cursors:!0},theme:"snow"}),F=D.getModule("cursors");D.on("text-change",(w,y,v)=>{if(v==="api"||!w.ops)return;let r=0,l=0;console.log(`%c quill: ${JSON.stringify(w.ops)}`,"color: green");for(const i of w.ops)i.attributes!==void 0||i.insert!==void 0?(i.retain!==void 0&&(l=r+i.retain),console.log(`%c local: ${r}-${l}: ${i.insert} ${i.attributes?JSON.stringify(i.attributes):"{}"}`,"color: green"),ye.update((g,b)=>{let h;i.attributes!==void 0&&i.insert===void 0?g.content.setStyle(r,l,i.attributes):i.insert!==void 0&&(l<r&&(l=r),typeof i.insert=="object"?h=g.content.edit(r,l," ",{embed:JSON.stringify(i.insert),...i.attributes}):h=g.content.edit(r,l,i.insert,i.attributes),r=l+i.insert.length),h&&b.set({selection:g.content.indexRangeToPosRange(h)})},`update style by ${Ye.getID()}`)):i.delete!==void 0?(l=r+i.delete,console.log(`%c local: ${r}-${l}: ''`,"color: green"),ye.update((g,b)=>{const h=g.content.edit(r,l,"");h&&b.set({selection:g.content.indexRangeToPosRange(h)})},`update content by ${Ye.getID()}`)):i.retain!==void 0&&(r=l+i.retain,l=r)}).on("selection-change",(w,y,v)=>{if(!!w){if(v==="api"){const{selection:r}=ye.getMyPresence();if(r){const[l,i]=ye.getRoot().content.posRangeToIndexRange(r),{index:g,length:b}=w;if(l===g&&i===g+b)return}}ye.update((r,l)=>{l.set({selection:r.content.indexRangeToPosRange([w.index,w.index+w.length])})},`update selection by ${Ye.getID()}`)}});function C(w){const y=[];let v=0;for(const r of w)if(r.type==="edit"){const l=r.from,i=r.to,g=l-v,b=i-l,{insert:h,attributes:u}=gi(r.value);if(console.log(`%c remote: ${l}-${i}: ${h}`,"color: skyblue"),g&&y.push({retain:g}),b&&y.push({delete:b}),h){const o={insert:h};u&&(o.attributes=u),y.push(o)}v=i}else if(r.type==="style"){const l=r.from,i=r.to,g=l-v,b=i-l,{attributes:h}=gi(r.value);if(console.log(`%c remote: ${l}-${i}: ${JSON.stringify(h)}`,"color: skyblue"),g&&y.push({retain:g}),h){const u={attributes:h};b&&(u.retain=b),y.push(u)}v=i}if(y.length){console.log(`%c to quill: ${JSON.stringify(y)}`,"color: green");const r={ops:y};D.updateContents(r,"api")}}function _(){const y={ops:ye.getRoot().content.values().map(v=>gi(v))};D.setContents(y,"api")}_(),M(),Xi(Zi,Qi,ye)}hs();
