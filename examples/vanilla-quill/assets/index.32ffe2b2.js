(function(){const me=document.createElement("link").relList;if(me&&me.supports&&me.supports("modulepreload"))return;for(const R of document.querySelectorAll('link[rel="modulepreload"]'))M(R);new MutationObserver(R=>{for(const F of R)if(F.type==="childList")for(const D of F.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&M(D)}).observe(document,{childList:!0,subtree:!0});function Y(R){const F={};return R.integrity&&(F.integrity=R.integrity),R.referrerpolicy&&(F.referrerPolicy=R.referrerpolicy),R.crossorigin==="use-credentials"?F.credentials="include":R.crossorigin==="anonymous"?F.credentials="omit":F.credentials="same-origin",F}function M(R){if(R.ep)return;R.ep=!0;const F=Y(R);fetch(R.href,F)}})();var Ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ti(He){return He&&He.__esModule&&Object.prototype.hasOwnProperty.call(He,"default")?He.default:He}var vn={exports:{}};/*!
 * 
 * yorkie-js-sdk for building collaborative editing applications.
 *  - Version: v0.4.12
 *  - Date: 2024-01-05T11:06Z
 *  - Homepage: https://yorkie.dev
 *
 * Copyright 2020 The Yorkie Authors. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(He,me){(function(M,R){He.exports=R()})(Ui,()=>(()=>{var Y={646:(D,E,b)=>{Object.defineProperty(E,"__esModule",{value:!0});const{proto3:m,StringValue:w,Timestamp:i}=b(532),u=m.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),o=m.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),y=m.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:C},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:ue}}]),v=m.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:H},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:h,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:se},{no:6,name:"is_removed",kind:"scalar",T:8}]),h=m.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:l},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:r,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Z}]),l=m.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),r=m.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:a,oneof:"body"},{no:2,name:"add",kind:"message",T:s,oneof:"body"},{no:3,name:"move",kind:"message",T:d,oneof:"body"},{no:4,name:"remove",kind:"message",T:p,oneof:"body"},{no:5,name:"edit",kind:"message",T:O,oneof:"body"},{no:6,name:"select",kind:"message",T:N,oneof:"body"},{no:7,name:"style",kind:"message",T:k,oneof:"body"},{no:8,name:"increase",kind:"message",T:A,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:S,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:x,oneof:"body"}]),a=m.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:I},{no:4,name:"executed_at",kind:"message",T:se}],{localName:"Operation_Set"}),s=m.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"prev_created_at",kind:"message",T:se},{no:3,name:"value",kind:"message",T:I},{no:4,name:"executed_at",kind:"message",T:se}],{localName:"Operation_Add"}),d=m.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"prev_created_at",kind:"message",T:se},{no:3,name:"created_at",kind:"message",T:se},{no:4,name:"executed_at",kind:"message",T:se}],{localName:"Operation_Move"}),p=m.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"created_at",kind:"message",T:se},{no:3,name:"executed_at",kind:"message",T:se}],{localName:"Operation_Remove"}),O=m.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"from",kind:"message",T:oe},{no:3,name:"to",kind:"message",T:oe},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:se}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:se},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),N=m.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"from",kind:"message",T:oe},{no:3,name:"to",kind:"message",T:oe},{no:4,name:"executed_at",kind:"message",T:se}],{localName:"Operation_Select"}),k=m.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"from",kind:"message",T:oe},{no:3,name:"to",kind:"message",T:oe},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:se},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:se}}],{localName:"Operation_Style"}),A=m.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"value",kind:"message",T:I},{no:3,name:"executed_at",kind:"message",T:se}],{localName:"Operation_Increase"}),S=m.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"from",kind:"message",T:le},{no:3,name:"to",kind:"message",T:le},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:se}},{no:5,name:"contents",kind:"message",T:G,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:se}],{localName:"Operation_TreeEdit"}),x=m.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:se},{no:2,name:"from",kind:"message",T:le},{no:3,name:"to",kind:"message",T:le},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:se}],{localName:"Operation_TreeStyle"}),I=m.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:se},{no:2,name:"moved_at",kind:"message",T:se},{no:3,name:"removed_at",kind:"message",T:se},{no:4,name:"type",kind:"enum",T:m.getEnumType(u)},{no:5,name:"value",kind:"scalar",T:12}]),C=m.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:L,oneof:"body"},{no:2,name:"json_array",kind:"message",T:J,oneof:"body"},{no:3,name:"primitive",kind:"message",T:z,oneof:"body"},{no:5,name:"text",kind:"message",T:ee,oneof:"body"},{no:6,name:"counter",kind:"message",T:X,oneof:"body"},{no:7,name:"tree",kind:"message",T:q,oneof:"body"}]),L=m.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:B,repeated:!0},{no:2,name:"created_at",kind:"message",T:se},{no:3,name:"moved_at",kind:"message",T:se},{no:4,name:"removed_at",kind:"message",T:se}],{localName:"JSONElement_JSONObject"}),J=m.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:$,repeated:!0},{no:2,name:"created_at",kind:"message",T:se},{no:3,name:"moved_at",kind:"message",T:se},{no:4,name:"removed_at",kind:"message",T:se}],{localName:"JSONElement_JSONArray"}),z=m.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:m.getEnumType(u)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:se},{no:4,name:"moved_at",kind:"message",T:se},{no:5,name:"removed_at",kind:"message",T:se}],{localName:"JSONElement_Primitive"}),ee=m.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:re,repeated:!0},{no:2,name:"created_at",kind:"message",T:se},{no:3,name:"moved_at",kind:"message",T:se},{no:4,name:"removed_at",kind:"message",T:se}],{localName:"JSONElement_Text"}),X=m.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:m.getEnumType(u)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:se},{no:4,name:"moved_at",kind:"message",T:se},{no:5,name:"removed_at",kind:"message",T:se}],{localName:"JSONElement_Counter"}),q=m.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:V,repeated:!0},{no:2,name:"created_at",kind:"message",T:se},{no:3,name:"moved_at",kind:"message",T:se},{no:4,name:"removed_at",kind:"message",T:se}],{localName:"JSONElement_Tree"}),B=m.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:C}]),$=m.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:$},{no:2,name:"element",kind:"message",T:C}]),U=m.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:se}]),re=m.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:Q},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:se},{no:4,name:"ins_prev_id",kind:"message",T:Q},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:U}}]),Q=m.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:se},{no:2,name:"offset",kind:"scalar",T:5}]),V=m.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:ie},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:se},{no:5,name:"ins_prev_id",kind:"message",T:ie},{no:6,name:"ins_next_id",kind:"message",T:ie},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:U}}]),G=m.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:V,repeated:!0}]),ie=m.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:se},{no:2,name:"offset",kind:"scalar",T:5}]),le=m.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:ie},{no:2,name:"left_sibling_id",kind:"message",T:ie}]),ve=m.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:i}]),Oe=m.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:i},{no:9,name:"updated_at",kind:"message",T:i}]),Se=m.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:w},{no:2,name:"auth_webhook_url",kind:"message",T:w},{no:3,name:"auth_webhook_methods",kind:"message",T:Ce},{no:4,name:"client_deactivate_threshold",kind:"message",T:w}]),Ce=m.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"}),Le=m.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:i},{no:5,name:"accessed_at",kind:"message",T:i},{no:6,name:"updated_at",kind:"message",T:i}]),Z=m.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:m.getEnumType(ce)},{no:2,name:"presence",kind:"message",T:ue}]),ce=m.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),ue=m.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),H=m.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),oe=m.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:se},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),se=m.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),we=m.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),ge=m.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:m.getEnumType(o)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:we}]);E.ValueType=u,E.DocEventType=o,E.Snapshot=y,E.ChangePack=v,E.Change=h,E.ChangeID=l,E.Operation=r,E.Operation_Set=a,E.Operation_Add=s,E.Operation_Move=d,E.Operation_Remove=p,E.Operation_Edit=O,E.Operation_Select=N,E.Operation_Style=k,E.Operation_Increase=A,E.Operation_TreeEdit=S,E.Operation_TreeStyle=x,E.JSONElementSimple=I,E.JSONElement=C,E.JSONElement_JSONObject=L,E.JSONElement_JSONArray=J,E.JSONElement_Primitive=z,E.JSONElement_Text=ee,E.JSONElement_Counter=X,E.JSONElement_Tree=q,E.RHTNode=B,E.RGANode=$,E.NodeAttr=U,E.TextNode=re,E.TextNodeID=Q,E.TreeNode=V,E.TreeNodes=G,E.TreeNodeID=ie,E.TreePos=le,E.User=ve,E.Project=Oe,E.UpdatableProjectFields=Se,E.UpdatableProjectFields_AuthWebhookMethods=Ce,E.DocumentSummary=Le,E.PresenceChange=Z,E.PresenceChange_ChangeType=ce,E.Presence=ue,E.Checkpoint=H,E.TextNodePos=oe,E.TimeTicket=se,E.DocEventBody=we,E.DocEvent=ge},295:(D,E,b)=>{const{ActivateClientRequest:m,ActivateClientResponse:w,AttachDocumentRequest:i,AttachDocumentResponse:u,BroadcastRequest:o,BroadcastResponse:y,DeactivateClientRequest:v,DeactivateClientResponse:h,DetachDocumentRequest:l,DetachDocumentResponse:r,PushPullChangesRequest:a,PushPullChangesResponse:s,RemoveDocumentRequest:d,RemoveDocumentResponse:p,WatchDocumentRequest:O,WatchDocumentResponse:N}=b(176),{MethodKind:k}=b(532),A={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:m,O:w,kind:k.Unary},deactivateClient:{name:"DeactivateClient",I:v,O:h,kind:k.Unary},attachDocument:{name:"AttachDocument",I:i,O:u,kind:k.Unary},detachDocument:{name:"DetachDocument",I:l,O:r,kind:k.Unary},removeDocument:{name:"RemoveDocument",I:d,O:p,kind:k.Unary},pushPullChanges:{name:"PushPullChanges",I:a,O:s,kind:k.Unary},watchDocument:{name:"WatchDocument",I:O,O:N,kind:k.ServerStreaming},broadcast:{name:"Broadcast",I:o,O:y,kind:k.Unary}}};E.V=A},176:(D,E,b)=>{Object.defineProperty(E,"__esModule",{value:!0});const{proto3:m}=b(532),{ChangePack:w,DocEvent:i}=b(646),u=m.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),o=m.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),y=m.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),v=m.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),h=m.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:w}]),l=m.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:w}]),r=m.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:w},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),a=m.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:w}]),s=m.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),d=m.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:p,oneof:"body"},{no:2,name:"event",kind:"message",T:i,oneof:"body"}]),p=m.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),O=m.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:w}]),N=m.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:w}]),k=m.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:w},{no:4,name:"push_only",kind:"scalar",T:8}]),A=m.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:w}]),S=m.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),x=m.makeMessageType("yorkie.v1.BroadcastResponse",[]);E.ActivateClientRequest=u,E.ActivateClientResponse=o,E.DeactivateClientRequest=y,E.DeactivateClientResponse=v,E.AttachDocumentRequest=h,E.AttachDocumentResponse=l,E.DetachDocumentRequest=r,E.DetachDocumentResponse=a,E.WatchDocumentRequest=s,E.WatchDocumentResponse=d,E.WatchDocumentResponse_Initialization=p,E.RemoveDocumentRequest=O,E.RemoveDocumentResponse=N,E.PushPullChangesRequest=k,E.PushPullChangesResponse=A,E.BroadcastRequest=S,E.BroadcastResponse=x},79:(D,E,b)=>{b.d(E,{Lt:()=>o,TD:()=>u,oP:()=>y});var m=b(818),w=b(120),i=b(210),u;(function(v){v[v.Varint=0]="Varint",v[v.Bit64=1]="Bit64",v[v.LengthDelimited=2]="LengthDelimited",v[v.StartGroup=3]="StartGroup",v[v.EndGroup=4]="EndGroup",v[v.Bit32=5]="Bit32"})(u||(u={}));class o{constructor(h){this.stack=[],this.textEncoder=h!=null?h:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let h=0;for(let a=0;a<this.chunks.length;a++)h+=this.chunks[a].length;let l=new Uint8Array(h),r=0;for(let a=0;a<this.chunks.length;a++)l.set(this.chunks[a],r),r+=this.chunks[a].length;return this.chunks=[],l}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let h=this.finish(),l=this.stack.pop();if(!l)throw new Error("invalid state, fork stack empty");return this.chunks=l.chunks,this.buf=l.buf,this.uint32(h.byteLength),this.raw(h)}tag(h,l){return this.uint32((h<<3|l)>>>0)}raw(h){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(h),this}uint32(h){for((0,w.fp)(h);h>127;)this.buf.push(h&127|128),h=h>>>7;return this.buf.push(h),this}int32(h){return(0,w.ug)(h),(0,m.fC)(h,this.buf),this}bool(h){return this.buf.push(h?1:0),this}bytes(h){return this.uint32(h.byteLength),this.raw(h)}string(h){let l=this.textEncoder.encode(h);return this.uint32(l.byteLength),this.raw(l)}float(h){(0,w.E_)(h);let l=new Uint8Array(4);return new DataView(l.buffer).setFloat32(0,h,!0),this.raw(l)}double(h){let l=new Uint8Array(8);return new DataView(l.buffer).setFloat64(0,h,!0),this.raw(l)}fixed32(h){(0,w.fp)(h);let l=new Uint8Array(4);return new DataView(l.buffer).setUint32(0,h,!0),this.raw(l)}sfixed32(h){(0,w.ug)(h);let l=new Uint8Array(4);return new DataView(l.buffer).setInt32(0,h,!0),this.raw(l)}sint32(h){return(0,w.ug)(h),h=(h<<1^h>>31)>>>0,(0,m.fC)(h,this.buf),this}sfixed64(h){let l=new Uint8Array(8),r=new DataView(l.buffer),a=i.q.enc(h);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(l)}fixed64(h){let l=new Uint8Array(8),r=new DataView(l.buffer),a=i.q.uEnc(h);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(l)}int64(h){let l=i.q.enc(h);return(0,m._y)(l.lo,l.hi,this.buf),this}sint64(h){let l=i.q.enc(h),r=l.hi>>31,a=l.lo<<1^r,s=(l.hi<<1|l.lo>>>31)^r;return(0,m._y)(a,s,this.buf),this}uint64(h){let l=i.q.uEnc(h);return(0,m._y)(l.lo,l.hi,this.buf),this}}class y{constructor(h,l){this.varint64=m.sg,this.uint32=m.jI,this.buf=h,this.len=h.length,this.pos=0,this.view=new DataView(h.buffer,h.byteOffset,h.byteLength),this.textDecoder=l!=null?l:new TextDecoder}tag(){let h=this.uint32(),l=h>>>3,r=h&7;if(l<=0||r<0||r>5)throw new Error("illegal tag: field no "+l+" wire type "+r);return[l,r]}skip(h){let l=this.pos;switch(h){case u.Varint:for(;this.buf[this.pos++]&128;);break;case u.Bit64:this.pos+=4;case u.Bit32:this.pos+=4;break;case u.LengthDelimited:let r=this.uint32();this.pos+=r;break;case u.StartGroup:let a;for(;(a=this.tag()[1])!==u.EndGroup;)this.skip(a);break;default:throw new Error("cant skip wire type "+h)}return this.assertBounds(),this.buf.subarray(l,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let h=this.uint32();return h>>>1^-(h&1)}int64(){return i.q.dec(...this.varint64())}uint64(){return i.q.uDec(...this.varint64())}sint64(){let[h,l]=this.varint64(),r=-(h&1);return h=(h>>>1|(l&1)<<31)^r,l=l>>>1^r,i.q.dec(h,l)}bool(){let[h,l]=this.varint64();return h!==0||l!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return i.q.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return i.q.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let h=this.uint32(),l=this.pos;return this.pos+=h,this.assertBounds(),this.buf.subarray(l,l+h)}string(){return this.textDecoder.decode(this.bytes())}}},465:(D,E,b)=>{b.d(E,{p:()=>w,w:()=>m});var m;(function(i){i[i.DOUBLE=1]="DOUBLE",i[i.FLOAT=2]="FLOAT",i[i.INT64=3]="INT64",i[i.UINT64=4]="UINT64",i[i.INT32=5]="INT32",i[i.FIXED64=6]="FIXED64",i[i.FIXED32=7]="FIXED32",i[i.BOOL=8]="BOOL",i[i.STRING=9]="STRING",i[i.BYTES=12]="BYTES",i[i.UINT32=13]="UINT32",i[i.SFIXED32=15]="SFIXED32",i[i.SFIXED64=16]="SFIXED64",i[i.SINT32=17]="SINT32",i[i.SINT64=18]="SINT64"})(m||(m={}));var w;(function(i){i[i.BIGINT=0]="BIGINT",i[i.STRING=1]="STRING"})(w||(w={}))},733:(D,E,b)=>{b.d(E,{I:()=>i});var m=b(561),w=b(850);class i extends m.v{constructor(o){super(),this.typeUrl="",this.value=new Uint8Array(0),w.w.util.initPartial(o,this)}toJson(o){var y;if(this.typeUrl==="")return{};const v=this.typeUrlToName(this.typeUrl),h=(y=o==null?void 0:o.typeRegistry)===null||y===void 0?void 0:y.findMessage(v);if(!h)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let r=h.fromBinary(this.value).toJson(o);return(v.startsWith("google.protobuf.")||r===null||Array.isArray(r)||typeof r!="object")&&(r={value:r}),r["@type"]=this.typeUrl,r}fromJson(o,y){var v;if(o===null||Array.isArray(o)||typeof o!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${o===null?"null":Array.isArray(o)?"array":typeof o}`);if(Object.keys(o).length==0)return this;const h=o["@type"];if(typeof h!="string"||h=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const l=this.typeUrlToName(h),r=(v=y==null?void 0:y.typeRegistry)===null||v===void 0?void 0:v.findMessage(l);if(!r)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${h} is not in the type registry`);let a;if(l.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(o,"value"))a=r.fromJson(o.value,y);else{const s=Object.assign({},o);delete s["@type"],a=r.fromJson(s,y)}return this.packFrom(a),this}packFrom(o){this.value=o.toBinary(),this.typeUrl=this.typeNameToUrl(o.getType().typeName)}unpackTo(o){return this.is(o.getType())?(o.fromBinary(this.value),!0):!1}unpack(o){if(this.typeUrl==="")return;const y=o.findMessage(this.typeUrlToName(this.typeUrl));if(!!y)return y.fromBinary(this.value)}is(o){if(this.typeUrl==="")return!1;const y=this.typeUrlToName(this.typeUrl);let v="";return typeof o=="string"?v=o:v=o.typeName,y===v}typeNameToUrl(o){return`type.googleapis.com/${o}`}typeUrlToName(o){if(!o.length)throw new Error(`invalid type url: ${o}`);const y=o.lastIndexOf("/"),v=y>=0?o.substring(y+1):o;if(!v.length)throw new Error(`invalid type url: ${o}`);return v}static pack(o){const y=new i;return y.packFrom(o),y}static fromBinary(o,y){return new i().fromBinary(o,y)}static fromJson(o,y){return new i().fromJson(o,y)}static fromJsonString(o,y){return new i().fromJsonString(o,y)}static equals(o,y){return w.w.util.equals(i,o,y)}}i.runtime=w.w,i.typeName="google.protobuf.Any",i.fields=w.w.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])},818:(D,E,b)=>{b.d(E,{Ak:()=>o,CZ:()=>u,Fd:()=>y,_y:()=>w,fC:()=>a,jI:()=>s,sg:()=>m});function m(){let d=0,p=0;for(let N=0;N<28;N+=7){let k=this.buf[this.pos++];if(d|=(k&127)<<N,(k&128)==0)return this.assertBounds(),[d,p]}let O=this.buf[this.pos++];if(d|=(O&15)<<28,p=(O&112)>>4,(O&128)==0)return this.assertBounds(),[d,p];for(let N=3;N<=31;N+=7){let k=this.buf[this.pos++];if(p|=(k&127)<<N,(k&128)==0)return this.assertBounds(),[d,p]}throw new Error("invalid varint")}function w(d,p,O){for(let A=0;A<28;A=A+7){const S=d>>>A,x=!(S>>>7==0&&p==0),I=(x?S|128:S)&255;if(O.push(I),!x)return}const N=d>>>28&15|(p&7)<<4,k=p>>3!=0;if(O.push((k?N|128:N)&255),!!k){for(let A=3;A<31;A=A+7){const S=p>>>A,x=S>>>7!=0,I=(x?S|128:S)&255;if(O.push(I),!x)return}O.push(p>>>31&1)}}const i=4294967296;function u(d){const p=d[0]==="-";p&&(d=d.slice(1));const O=1e6;let N=0,k=0;function A(S,x){const I=Number(d.slice(S,x));k*=O,N=N*O+I,N>=i&&(k=k+(N/i|0),N=N%i)}return A(-24,-18),A(-18,-12),A(-12,-6),A(-6),p?l(N,k):h(N,k)}function o(d,p){let O=h(d,p);const N=O.hi&2147483648;N&&(O=l(O.lo,O.hi));const k=y(O.lo,O.hi);return N?"-"+k:k}function y(d,p){if({lo:d,hi:p}=v(d,p),p<=2097151)return String(i*p+d);const O=d&16777215,N=(d>>>24|p<<8)&16777215,k=p>>16&65535;let A=O+N*6777216+k*6710656,S=N+k*8147497,x=k*2;const I=1e7;return A>=I&&(S+=Math.floor(A/I),A%=I),S>=I&&(x+=Math.floor(S/I),S%=I),x.toString()+r(S)+r(A)}function v(d,p){return{lo:d>>>0,hi:p>>>0}}function h(d,p){return{lo:d|0,hi:p|0}}function l(d,p){return p=~p,d?d=~d+1:p+=1,h(d,p)}const r=d=>{const p=String(d);return"0000000".slice(p.length)+p};function a(d,p){if(d>=0){for(;d>127;)p.push(d&127|128),d=d>>>7;p.push(d)}else{for(let O=0;O<9;O++)p.push(d&127|128),d=d>>7;p.push(1)}}function s(){let d=this.buf[this.pos++],p=d&127;if((d&128)==0)return this.assertBounds(),p;if(d=this.buf[this.pos++],p|=(d&127)<<7,(d&128)==0)return this.assertBounds(),p;if(d=this.buf[this.pos++],p|=(d&127)<<14,(d&128)==0)return this.assertBounds(),p;if(d=this.buf[this.pos++],p|=(d&127)<<21,(d&128)==0)return this.assertBounds(),p;d=this.buf[this.pos++],p|=(d&15)<<28;for(let O=5;(d&128)!==0&&O<10;O++)d=this.buf[this.pos++];if((d&128)!=0)throw new Error("invalid varint");return this.assertBounds(),p>>>0}},532:(D,E,b)=>{b.r(E),b.d(E,{Any:()=>_n.I,Api:()=>Ln,BinaryReader:()=>S.oP,BinaryWriter:()=>S.Lt,BoolValue:()=>Kt,BytesValue:()=>Ve,CodeGeneratorRequest:()=>Nn,CodeGeneratorResponse:()=>en,CodeGeneratorResponse_Feature:()=>Zn,CodeGeneratorResponse_File:()=>En,DescriptorProto:()=>Q,DescriptorProto_ExtensionRange:()=>V,DescriptorProto_ReservedRange:()=>G,DoubleValue:()=>it,Duration:()=>Ot,Edition:()=>$,Empty:()=>Qt,Enum:()=>kt,EnumDescriptorProto:()=>Z,EnumDescriptorProto_EnumReservedRange:()=>ce,EnumOptions:()=>Ee,EnumValue:()=>Cn,EnumValueDescriptorProto:()=>ue,EnumValueOptions:()=>et,ExtensionRangeOptions:()=>ie,ExtensionRangeOptions_Declaration:()=>ve,ExtensionRangeOptions_VerificationState:()=>le,FeatureSet:()=>yt,FeatureSetDefaults:()=>Ne,FeatureSetDefaults_FeatureSetEditionDefault:()=>Dt,FeatureSet_EnumType:()=>an,FeatureSet_FieldPresence:()=>zt,FeatureSet_JsonFormat:()=>An,FeatureSet_MessageEncoding:()=>Zt,FeatureSet_RepeatedFieldEncoding:()=>Et,FeatureSet_Utf8Validation:()=>Xt,Field:()=>Sn,FieldDescriptorProto:()=>Oe,FieldDescriptorProto_Label:()=>Ce,FieldDescriptorProto_Type:()=>Se,FieldMask:()=>We,FieldOptions:()=>xe,FieldOptions_CType:()=>Be,FieldOptions_EditionDefault:()=>Je,FieldOptions_JSType:()=>Ue,FieldOptions_OptionRetention:()=>st,FieldOptions_OptionTargetType:()=>ct,Field_Cardinality:()=>hr,Field_Kind:()=>fr,FileDescriptorProto:()=>re,FileDescriptorSet:()=>U,FileOptions:()=>se,FileOptions_OptimizeMode:()=>we,FloatValue:()=>St,GeneratedCodeInfo:()=>un,GeneratedCodeInfo_Annotation:()=>ln,GeneratedCodeInfo_Annotation_Semantic:()=>cn,Int32Value:()=>At,Int64Value:()=>pt,ListValue:()=>rt,LongType:()=>i.p,Message:()=>q.v,MessageOptions:()=>ge,Method:()=>Pn,MethodDescriptorProto:()=>oe,MethodIdempotency:()=>B.w,MethodKind:()=>B.t,MethodOptions:()=>Vt,MethodOptions_IdempotencyLevel:()=>Lt,Mixin:()=>Mn,NullValue:()=>ot,OneofDescriptorProto:()=>Le,OneofOptions:()=>Ge,Option:()=>dn,ScalarType:()=>i.w,ServiceDescriptorProto:()=>H,ServiceOptions:()=>jt,SourceCodeInfo:()=>lt,SourceCodeInfo_Location:()=>xt,SourceContext:()=>In,StringValue:()=>Bt,Struct:()=>wt,Syntax:()=>xn,Timestamp:()=>Tt,Type:()=>hn,UInt32Value:()=>Rt,UInt64Value:()=>vt,UninterpretedOption:()=>It,UninterpretedOption_NamePart:()=>Ft,Value:()=>ze,Version:()=>On,WireType:()=>S.TD,codegenInfo:()=>X,createDescriptorSet:()=>Un,createRegistry:()=>qt,createRegistryFromDescriptors:()=>Jn,proto2:()=>p,proto3:()=>m.w,protoBase64:()=>A.W,protoDelimited:()=>L,protoDouble:()=>N,protoInt64:()=>k.q,toPlainMessage:()=>Sr});var m=b(850),w=b(493),i=b(465),u=b(744);function o(){return Object.assign(Object.assign({},(0,u.gY)()),{writeMessage(_,c,T){const W=_.getType();let ne;try{for(ne of W.fields.byNumber()){let he,pe=ne.repeated,Ae=ne.localName;if(ne.oneof){const be=_[ne.oneof.localName];if(be.case!==Ae)continue;he=be.value}else if(he=_[Ae],he===void 0&&!ne.oneof&&!ne.opt)throw new Error(`cannot encode field ${W.typeName}.${ne.name} to binary: required field not set`);switch(ne.kind){case"scalar":case"enum":let be=ne.kind=="enum"?i.w.INT32:ne.T;if(pe)if(ne.packed)(0,u.Jj)(c,be,ne.no,he);else for(const De of he)(0,u.NN)(c,be,ne.no,De,!0);else he!==void 0&&(0,u.NN)(c,be,ne.no,he,!0);break;case"message":if(pe)for(const De of he)(0,u.oQ)(c,T,ne,De);else(0,u.oQ)(c,T,ne,he);break;case"map":for(const[De,je]of Object.entries(he))(0,u.gQ)(c,T,ne,De,je);break}}}catch(he){let pe=ne?`cannot encode field ${W.typeName}.${ne==null?void 0:ne.name} to binary`:`cannot encode message ${W.typeName} to binary`,Ae=he instanceof Error?he.message:String(he);throw new Error(pe+(Ae.length>0?`: ${Ae}`:""))}return T.writeUnknownFields&&this.writeUnknownFields(_,c),c}})}var y=b(433),v=b(501),h=b(215),l=b(504),r=b(432),a=b(120),s=b(814);function d(){return(0,s.b)((_,c)=>function(W,ne,he){if(W.kind=="map"){const pe={};switch(W.V.kind){case"scalar":for(const[be,De]of Object.entries(ne)){const je=c(W.V.T,De,!0);(0,a.hu)(je!==void 0),pe[be.toString()]=je}break;case"message":for(const[be,De]of Object.entries(ne))pe[be.toString()]=De.toJson(he);break;case"enum":const Ae=W.V.T;for(const[be,De]of Object.entries(ne)){(0,a.hu)(De===void 0||typeof De=="number");const je=_(Ae,De,!0,he.enumAsInteger);(0,a.hu)(je!==void 0),pe[be.toString()]=je}break}return he.emitDefaultValues||Object.keys(pe).length>0?pe:void 0}else if(W.repeated){const pe=[];switch(W.kind){case"scalar":for(let Ae=0;Ae<ne.length;Ae++)pe.push(c(W.T,ne[Ae],!0));break;case"enum":for(let Ae=0;Ae<ne.length;Ae++)pe.push(_(W.T,ne[Ae],!0,he.enumAsInteger));break;case"message":for(let Ae=0;Ae<ne.length;Ae++)pe.push(ne[Ae].toJson(he));break}return he.emitDefaultValues||pe.length>0?pe:void 0}else{if(ne===void 0){if(!W.oneof&&!W.opt)throw"required field not set";return}switch(W.kind){case"scalar":return c(W.T,ne,!0);case"enum":return _(W.T,ne,!0,he.enumAsInteger);case"message":return(0,r.E)(W.T,ne).toJson(he)}}})}const p=(0,w.F)("proto2",d(),o(),Object.assign(Object.assign({},(0,y.f)()),{newFieldList(_){return new v.i(_,O)},initFields(_){for(const c of _.getType().fields.byMember()){const T=c.localName,W=_;if(c.repeated){W[T]=[];continue}switch(c.kind){case"oneof":W[T]={case:void 0};break;case"map":W[T]={};break}}}}));function O(_){var c,T,W,ne,he;const pe=[];let Ae;for(const be of typeof _=="function"?_():_){const De=be;if(De.localName=(0,l.Rz)(be.name,be.oneof!==void 0),De.jsonName=(c=be.jsonName)!==null&&c!==void 0?c:(0,l.x1)(be.name),De.repeated=(T=be.repeated)!==null&&T!==void 0?T:!1,be.kind=="scalar"&&(De.L=(W=be.L)!==null&&W!==void 0?W:i.p.BIGINT),be.oneof!==void 0){const je=typeof be.oneof=="string"?be.oneof:be.oneof.name;(!Ae||Ae.name!=je)&&(Ae=new h.o(je)),De.oneof=Ae,Ae.addField(De)}be.kind=="message"&&(De.delimited=(ne=be.delimited)!==null&&ne!==void 0?ne:!1),De.packed=(he=be.packed)!==null&&he!==void 0?he:!1,pe.push(De)}return pe}const N={NaN:Number.NaN,POSITIVE_INFINITY:Number.POSITIVE_INFINITY,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY};var k=b(210),A=b(236),S=b(79),x=function(_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=_[Symbol.asyncIterator],T;return c?c.call(_):(_=typeof __values=="function"?__values(_):_[Symbol.iterator](),T={},W("next"),W("throw"),W("return"),T[Symbol.asyncIterator]=function(){return this},T);function W(he){T[he]=_[he]&&function(pe){return new Promise(function(Ae,be){pe=_[he](pe),ne(Ae,be,pe.done,pe.value)})}}function ne(he,pe,Ae,be){Promise.resolve(be).then(function(De){he({value:De,done:Ae})},pe)}},I=function(_){return this instanceof I?(this.v=_,this):new I(_)},C=function(_,c,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W=T.apply(_,c||[]),ne,he=[];return ne={},Ae("next"),Ae("throw"),Ae("return",pe),ne[Symbol.asyncIterator]=function(){return this},ne;function pe(dt){return function(mn){return Promise.resolve(mn).then(dt,at)}}function Ae(dt,mn){W[dt]&&(ne[dt]=function(Bn){return new Promise(function(ni,br){he.push([dt,Bn,ni,br])>1||be(dt,Bn)})},mn&&(ne[dt]=mn(ne[dt])))}function be(dt,mn){try{De(W[dt](mn))}catch(Bn){Ut(he[0][3],Bn)}}function De(dt){dt.value instanceof I?Promise.resolve(dt.value.v).then(je,at):Ut(he[0][2],dt)}function je(dt){be("next",dt)}function at(dt){be("throw",dt)}function Ut(dt,mn){dt(mn),he.shift(),he.length&&be(he[0][0],he[0][1])}};const L={enc(_,c){const T=(0,u.gY)().makeWriteOptions(c);return T.writerFactory().bytes(_.toBinary(T)).finish()},dec(_,c,T){const W=(0,u.gY)().makeReadOptions(T);return _.fromBinary(W.readerFactory(c).bytes(),W)},decStream(_,c){return C(this,arguments,function*(){var W,ne,he,pe;function Ae(Ut,dt){const mn=new Uint8Array(Ut.byteLength+dt.byteLength);return mn.set(Ut),mn.set(dt,Ut.length),mn}let be=new Uint8Array(0);try{for(var De=!0,je=x(c),at;at=yield I(je.next()),W=at.done,!W;De=!0)for(pe=at.value,De=!1,be=Ae(be,pe);;){const dt=L.peekSize(be);if(dt.eof||dt.offset+dt.size>be.byteLength)break;yield yield I(L.dec(_,be)),be=be.subarray(dt.offset+dt.size)}}catch(Ut){ne={error:Ut}}finally{try{!De&&!W&&(he=je.return)&&(yield I(he.call(je)))}finally{if(ne)throw ne.error}}if(be.byteLength>0)throw new Error("incomplete data")})},peekSize(_){const c={eof:!0,size:null,offset:null};for(let T=0;T<10;T++){if(T>_.byteLength)return c;if((_[T]&128)==0){const W=new S.oP(_);let ne;try{ne=W.uint32()}catch(he){if(he instanceof RangeError)return c;throw he}return{eof:!1,size:ne,offset:W.pos}}}throw new Error("invalid varint")}};var J=b(781);function z(_){switch(_.typeName){case"google.protobuf.Any":{const c=_.fields.find(W=>W.number==1&&W.fieldKind=="scalar"&&W.scalar===i.w.STRING),T=_.fields.find(W=>W.number==2&&W.fieldKind=="scalar"&&W.scalar===i.w.BYTES);if(c&&T)return{typeName:_.typeName,typeUrl:c,value:T};break}case"google.protobuf.Timestamp":{const c=_.fields.find(W=>W.number==1&&W.fieldKind=="scalar"&&W.scalar===i.w.INT64),T=_.fields.find(W=>W.number==2&&W.fieldKind=="scalar"&&W.scalar===i.w.INT32);if(c&&T)return{typeName:_.typeName,seconds:c,nanos:T};break}case"google.protobuf.Duration":{const c=_.fields.find(W=>W.number==1&&W.fieldKind=="scalar"&&W.scalar===i.w.INT64),T=_.fields.find(W=>W.number==2&&W.fieldKind=="scalar"&&W.scalar===i.w.INT32);if(c&&T)return{typeName:_.typeName,seconds:c,nanos:T};break}case"google.protobuf.Struct":{const c=_.fields.find(T=>T.number==1&&!T.repeated);if((c==null?void 0:c.fieldKind)!=="map"||c.mapValue.kind!=="message"||c.mapValue.message.typeName!=="google.protobuf.Value")break;return{typeName:_.typeName,fields:c}}case"google.protobuf.Value":{const c=_.oneofs.find(be=>be.name==="kind"),T=_.fields.find(be=>be.number==1&&be.oneof===c);if((T==null?void 0:T.fieldKind)!=="enum"||T.enum.typeName!=="google.protobuf.NullValue")return;const W=_.fields.find(be=>be.number==2&&be.fieldKind=="scalar"&&be.scalar===i.w.DOUBLE&&be.oneof===c),ne=_.fields.find(be=>be.number==3&&be.fieldKind=="scalar"&&be.scalar===i.w.STRING&&be.oneof===c),he=_.fields.find(be=>be.number==4&&be.fieldKind=="scalar"&&be.scalar===i.w.BOOL&&be.oneof===c),pe=_.fields.find(be=>be.number==5&&be.oneof===c);if((pe==null?void 0:pe.fieldKind)!=="message"||pe.message.typeName!=="google.protobuf.Struct")return;const Ae=_.fields.find(be=>be.number==6&&be.oneof===c);if((Ae==null?void 0:Ae.fieldKind)!=="message"||Ae.message.typeName!=="google.protobuf.ListValue")return;if(c&&W&&ne&&he)return{typeName:_.typeName,kind:c,nullValue:T,numberValue:W,stringValue:ne,boolValue:he,structValue:pe,listValue:Ae};break}case"google.protobuf.ListValue":{const c=_.fields.find(T=>T.number==1&&T.repeated);if((c==null?void 0:c.fieldKind)!="message"||c.message.typeName!=="google.protobuf.Value")break;return{typeName:_.typeName,values:c}}case"google.protobuf.FieldMask":{const c=_.fields.find(T=>T.number==1&&T.fieldKind=="scalar"&&T.scalar===i.w.STRING&&T.repeated);if(c)return{typeName:_.typeName,paths:c};break}case"google.protobuf.DoubleValue":case"google.protobuf.FloatValue":case"google.protobuf.Int64Value":case"google.protobuf.UInt64Value":case"google.protobuf.Int32Value":case"google.protobuf.UInt32Value":case"google.protobuf.BoolValue":case"google.protobuf.StringValue":case"google.protobuf.BytesValue":{const c=_.fields.find(T=>T.number==1&&T.name=="value");if(!c||c.fieldKind!=="scalar")break;return{typeName:_.typeName,value:c}}}}const ee="@bufbuild/protobuf",X={packageName:"@bufbuild/protobuf",localName:l.r1,reifyWkt:z,getUnwrappedFieldType:r.w,scalarDefaultValue:J.kY,safeIdentifier:l.GD,safeObjectProperty:l.ll,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:ee},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:ee},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:ee},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:ee},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:ee},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:ee},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:ee},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:ee},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:ee},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:ee},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:ee},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:ee},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:ee},protoDouble:{typeOnly:!1,privateImportPath:"./proto-double.js",publicImportPath:ee},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:ee},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:ee},LongType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:ee},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:ee},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:ee},IMessageTypeRegistry:{typeOnly:!0,privateImportPath:"./type-registry.js",publicImportPath:ee}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]};var q=b(561),B=b(328),$;(function(_){_[_.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",_[_.EDITION_PROTO2=998]="EDITION_PROTO2",_[_.EDITION_PROTO3=999]="EDITION_PROTO3",_[_.EDITION_2023=1e3]="EDITION_2023",_[_.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",_[_.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",_[_.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",_[_.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",_[_.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY"})($||($={})),p.util.setEnumType($,"google.protobuf.Edition",[{no:0,name:"EDITION_UNKNOWN"},{no:998,name:"EDITION_PROTO2"},{no:999,name:"EDITION_PROTO3"},{no:1e3,name:"EDITION_2023"},{no:1,name:"EDITION_1_TEST_ONLY"},{no:2,name:"EDITION_2_TEST_ONLY"},{no:99997,name:"EDITION_99997_TEST_ONLY"},{no:99998,name:"EDITION_99998_TEST_ONLY"},{no:99999,name:"EDITION_99999_TEST_ONLY"}]);class U extends q.v{constructor(c){super(),this.file=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new U().fromBinary(c,T)}static fromJson(c,T){return new U().fromJson(c,T)}static fromJsonString(c,T){return new U().fromJsonString(c,T)}static equals(c,T){return p.util.equals(U,c,T)}}U.runtime=p,U.typeName="google.protobuf.FileDescriptorSet",U.fields=p.util.newFieldList(()=>[{no:1,name:"file",kind:"message",T:re,repeated:!0}]);class re extends q.v{constructor(c){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new re().fromBinary(c,T)}static fromJson(c,T){return new re().fromJson(c,T)}static fromJsonString(c,T){return new re().fromJsonString(c,T)}static equals(c,T){return p.util.equals(re,c,T)}}re.runtime=p,re.typeName="google.protobuf.FileDescriptorProto",re.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:Q,repeated:!0},{no:5,name:"enum_type",kind:"message",T:Z,repeated:!0},{no:6,name:"service",kind:"message",T:H,repeated:!0},{no:7,name:"extension",kind:"message",T:Oe,repeated:!0},{no:8,name:"options",kind:"message",T:se,opt:!0},{no:9,name:"source_code_info",kind:"message",T:lt,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0},{no:14,name:"edition",kind:"enum",T:p.getEnumType($),opt:!0}]);class Q extends q.v{constructor(c){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new Q().fromBinary(c,T)}static fromJson(c,T){return new Q().fromJson(c,T)}static fromJsonString(c,T){return new Q().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Q,c,T)}}Q.runtime=p,Q.typeName="google.protobuf.DescriptorProto",Q.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:Oe,repeated:!0},{no:6,name:"extension",kind:"message",T:Oe,repeated:!0},{no:3,name:"nested_type",kind:"message",T:Q,repeated:!0},{no:4,name:"enum_type",kind:"message",T:Z,repeated:!0},{no:5,name:"extension_range",kind:"message",T:V,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:Le,repeated:!0},{no:7,name:"options",kind:"message",T:ge,opt:!0},{no:9,name:"reserved_range",kind:"message",T:G,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class V extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new V().fromBinary(c,T)}static fromJson(c,T){return new V().fromJson(c,T)}static fromJsonString(c,T){return new V().fromJsonString(c,T)}static equals(c,T){return p.util.equals(V,c,T)}}V.runtime=p,V.typeName="google.protobuf.DescriptorProto.ExtensionRange",V.fields=p.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:ie,opt:!0}]);class G extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new G().fromBinary(c,T)}static fromJson(c,T){return new G().fromJson(c,T)}static fromJsonString(c,T){return new G().fromJsonString(c,T)}static equals(c,T){return p.util.equals(G,c,T)}}G.runtime=p,G.typeName="google.protobuf.DescriptorProto.ReservedRange",G.fields=p.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class ie extends q.v{constructor(c){super(),this.uninterpretedOption=[],this.declaration=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new ie().fromBinary(c,T)}static fromJson(c,T){return new ie().fromJson(c,T)}static fromJsonString(c,T){return new ie().fromJsonString(c,T)}static equals(c,T){return p.util.equals(ie,c,T)}}ie.runtime=p,ie.typeName="google.protobuf.ExtensionRangeOptions",ie.fields=p.util.newFieldList(()=>[{no:999,name:"uninterpreted_option",kind:"message",T:It,repeated:!0},{no:2,name:"declaration",kind:"message",T:ve,repeated:!0},{no:50,name:"features",kind:"message",T:yt,opt:!0},{no:3,name:"verification",kind:"enum",T:p.getEnumType(le),opt:!0,default:le.UNVERIFIED}]);var le;(function(_){_[_.DECLARATION=0]="DECLARATION",_[_.UNVERIFIED=1]="UNVERIFIED"})(le||(le={})),p.util.setEnumType(le,"google.protobuf.ExtensionRangeOptions.VerificationState",[{no:0,name:"DECLARATION"},{no:1,name:"UNVERIFIED"}]);class ve extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new ve().fromBinary(c,T)}static fromJson(c,T){return new ve().fromJson(c,T)}static fromJsonString(c,T){return new ve().fromJsonString(c,T)}static equals(c,T){return p.util.equals(ve,c,T)}}ve.runtime=p,ve.typeName="google.protobuf.ExtensionRangeOptions.Declaration",ve.fields=p.util.newFieldList(()=>[{no:1,name:"number",kind:"scalar",T:5,opt:!0},{no:2,name:"full_name",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"scalar",T:9,opt:!0},{no:5,name:"reserved",kind:"scalar",T:8,opt:!0},{no:6,name:"repeated",kind:"scalar",T:8,opt:!0}]);class Oe extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new Oe().fromBinary(c,T)}static fromJson(c,T){return new Oe().fromJson(c,T)}static fromJsonString(c,T){return new Oe().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Oe,c,T)}}Oe.runtime=p,Oe.typeName="google.protobuf.FieldDescriptorProto",Oe.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:p.getEnumType(Ce),opt:!0},{no:5,name:"type",kind:"enum",T:p.getEnumType(Se),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:xe,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}]);var Se;(function(_){_[_.DOUBLE=1]="DOUBLE",_[_.FLOAT=2]="FLOAT",_[_.INT64=3]="INT64",_[_.UINT64=4]="UINT64",_[_.INT32=5]="INT32",_[_.FIXED64=6]="FIXED64",_[_.FIXED32=7]="FIXED32",_[_.BOOL=8]="BOOL",_[_.STRING=9]="STRING",_[_.GROUP=10]="GROUP",_[_.MESSAGE=11]="MESSAGE",_[_.BYTES=12]="BYTES",_[_.UINT32=13]="UINT32",_[_.ENUM=14]="ENUM",_[_.SFIXED32=15]="SFIXED32",_[_.SFIXED64=16]="SFIXED64",_[_.SINT32=17]="SINT32",_[_.SINT64=18]="SINT64"})(Se||(Se={})),p.util.setEnumType(Se,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var Ce;(function(_){_[_.OPTIONAL=1]="OPTIONAL",_[_.REPEATED=3]="REPEATED",_[_.REQUIRED=2]="REQUIRED"})(Ce||(Ce={})),p.util.setEnumType(Ce,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:3,name:"LABEL_REPEATED"},{no:2,name:"LABEL_REQUIRED"}]);class Le extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new Le().fromBinary(c,T)}static fromJson(c,T){return new Le().fromJson(c,T)}static fromJsonString(c,T){return new Le().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Le,c,T)}}Le.runtime=p,Le.typeName="google.protobuf.OneofDescriptorProto",Le.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:Ge,opt:!0}]);class Z extends q.v{constructor(c){super(),this.value=[],this.reservedRange=[],this.reservedName=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new Z().fromBinary(c,T)}static fromJson(c,T){return new Z().fromJson(c,T)}static fromJsonString(c,T){return new Z().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Z,c,T)}}Z.runtime=p,Z.typeName="google.protobuf.EnumDescriptorProto",Z.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:ue,repeated:!0},{no:3,name:"options",kind:"message",T:Ee,opt:!0},{no:4,name:"reserved_range",kind:"message",T:ce,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class ce extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new ce().fromBinary(c,T)}static fromJson(c,T){return new ce().fromJson(c,T)}static fromJsonString(c,T){return new ce().fromJsonString(c,T)}static equals(c,T){return p.util.equals(ce,c,T)}}ce.runtime=p,ce.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",ce.fields=p.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class ue extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new ue().fromBinary(c,T)}static fromJson(c,T){return new ue().fromJson(c,T)}static fromJsonString(c,T){return new ue().fromJsonString(c,T)}static equals(c,T){return p.util.equals(ue,c,T)}}ue.runtime=p,ue.typeName="google.protobuf.EnumValueDescriptorProto",ue.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:et,opt:!0}]);class H extends q.v{constructor(c){super(),this.method=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new H().fromBinary(c,T)}static fromJson(c,T){return new H().fromJson(c,T)}static fromJsonString(c,T){return new H().fromJsonString(c,T)}static equals(c,T){return p.util.equals(H,c,T)}}H.runtime=p,H.typeName="google.protobuf.ServiceDescriptorProto",H.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:oe,repeated:!0},{no:3,name:"options",kind:"message",T:jt,opt:!0}]);class oe extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new oe().fromBinary(c,T)}static fromJson(c,T){return new oe().fromJson(c,T)}static fromJsonString(c,T){return new oe().fromJsonString(c,T)}static equals(c,T){return p.util.equals(oe,c,T)}}oe.runtime=p,oe.typeName="google.protobuf.MethodDescriptorProto",oe.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:Vt,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]);class se extends q.v{constructor(c){super(),this.uninterpretedOption=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new se().fromBinary(c,T)}static fromJson(c,T){return new se().fromJson(c,T)}static fromJsonString(c,T){return new se().fromJsonString(c,T)}static equals(c,T){return p.util.equals(se,c,T)}}se.runtime=p,se.typeName="google.protobuf.FileOptions",se.fields=p.util.newFieldList(()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:p.getEnumType(we),opt:!0,default:we.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:50,name:"features",kind:"message",T:yt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:It,repeated:!0}]);var we;(function(_){_[_.SPEED=1]="SPEED",_[_.CODE_SIZE=2]="CODE_SIZE",_[_.LITE_RUNTIME=3]="LITE_RUNTIME"})(we||(we={})),p.util.setEnumType(we,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class ge extends q.v{constructor(c){super(),this.uninterpretedOption=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new ge().fromBinary(c,T)}static fromJson(c,T){return new ge().fromJson(c,T)}static fromJsonString(c,T){return new ge().fromJsonString(c,T)}static equals(c,T){return p.util.equals(ge,c,T)}}ge.runtime=p,ge.typeName="google.protobuf.MessageOptions",ge.fields=p.util.newFieldList(()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:11,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:12,name:"features",kind:"message",T:yt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:It,repeated:!0}]);class xe extends q.v{constructor(c){super(),this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new xe().fromBinary(c,T)}static fromJson(c,T){return new xe().fromJson(c,T)}static fromJsonString(c,T){return new xe().fromJsonString(c,T)}static equals(c,T){return p.util.equals(xe,c,T)}}xe.runtime=p,xe.typeName="google.protobuf.FieldOptions",xe.fields=p.util.newFieldList(()=>[{no:1,name:"ctype",kind:"enum",T:p.getEnumType(Be),opt:!0,default:Be.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:p.getEnumType(Ue),opt:!0,default:Ue.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:16,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"retention",kind:"enum",T:p.getEnumType(st),opt:!0},{no:19,name:"targets",kind:"enum",T:p.getEnumType(ct),repeated:!0},{no:20,name:"edition_defaults",kind:"message",T:Je,repeated:!0},{no:21,name:"features",kind:"message",T:yt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:It,repeated:!0}]);var Be;(function(_){_[_.STRING=0]="STRING",_[_.CORD=1]="CORD",_[_.STRING_PIECE=2]="STRING_PIECE"})(Be||(Be={})),p.util.setEnumType(Be,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]);var Ue;(function(_){_[_.JS_NORMAL=0]="JS_NORMAL",_[_.JS_STRING=1]="JS_STRING",_[_.JS_NUMBER=2]="JS_NUMBER"})(Ue||(Ue={})),p.util.setEnumType(Ue,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]);var st;(function(_){_[_.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",_[_.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",_[_.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(st||(st={})),p.util.setEnumType(st,"google.protobuf.FieldOptions.OptionRetention",[{no:0,name:"RETENTION_UNKNOWN"},{no:1,name:"RETENTION_RUNTIME"},{no:2,name:"RETENTION_SOURCE"}]);var ct;(function(_){_[_.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",_[_.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",_[_.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",_[_.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",_[_.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",_[_.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",_[_.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",_[_.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",_[_.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",_[_.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(ct||(ct={})),p.util.setEnumType(ct,"google.protobuf.FieldOptions.OptionTargetType",[{no:0,name:"TARGET_TYPE_UNKNOWN"},{no:1,name:"TARGET_TYPE_FILE"},{no:2,name:"TARGET_TYPE_EXTENSION_RANGE"},{no:3,name:"TARGET_TYPE_MESSAGE"},{no:4,name:"TARGET_TYPE_FIELD"},{no:5,name:"TARGET_TYPE_ONEOF"},{no:6,name:"TARGET_TYPE_ENUM"},{no:7,name:"TARGET_TYPE_ENUM_ENTRY"},{no:8,name:"TARGET_TYPE_SERVICE"},{no:9,name:"TARGET_TYPE_METHOD"}]);class Je extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new Je().fromBinary(c,T)}static fromJson(c,T){return new Je().fromJson(c,T)}static fromJsonString(c,T){return new Je().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Je,c,T)}}Je.runtime=p,Je.typeName="google.protobuf.FieldOptions.EditionDefault",Je.fields=p.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:p.getEnumType($),opt:!0},{no:2,name:"value",kind:"scalar",T:9,opt:!0}]);class Ge extends q.v{constructor(c){super(),this.uninterpretedOption=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new Ge().fromBinary(c,T)}static fromJson(c,T){return new Ge().fromJson(c,T)}static fromJsonString(c,T){return new Ge().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Ge,c,T)}}Ge.runtime=p,Ge.typeName="google.protobuf.OneofOptions",Ge.fields=p.util.newFieldList(()=>[{no:1,name:"features",kind:"message",T:yt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:It,repeated:!0}]);class Ee extends q.v{constructor(c){super(),this.uninterpretedOption=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new Ee().fromBinary(c,T)}static fromJson(c,T){return new Ee().fromJson(c,T)}static fromJsonString(c,T){return new Ee().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Ee,c,T)}}Ee.runtime=p,Ee.typeName="google.protobuf.EnumOptions",Ee.fields=p.util.newFieldList(()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:7,name:"features",kind:"message",T:yt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:It,repeated:!0}]);class et extends q.v{constructor(c){super(),this.uninterpretedOption=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new et().fromBinary(c,T)}static fromJson(c,T){return new et().fromJson(c,T)}static fromJsonString(c,T){return new et().fromJsonString(c,T)}static equals(c,T){return p.util.equals(et,c,T)}}et.runtime=p,et.typeName="google.protobuf.EnumValueOptions",et.fields=p.util.newFieldList(()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"features",kind:"message",T:yt,opt:!0},{no:3,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:It,repeated:!0}]);class jt extends q.v{constructor(c){super(),this.uninterpretedOption=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new jt().fromBinary(c,T)}static fromJson(c,T){return new jt().fromJson(c,T)}static fromJsonString(c,T){return new jt().fromJsonString(c,T)}static equals(c,T){return p.util.equals(jt,c,T)}}jt.runtime=p,jt.typeName="google.protobuf.ServiceOptions",jt.fields=p.util.newFieldList(()=>[{no:34,name:"features",kind:"message",T:yt,opt:!0},{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:It,repeated:!0}]);class Vt extends q.v{constructor(c){super(),this.uninterpretedOption=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new Vt().fromBinary(c,T)}static fromJson(c,T){return new Vt().fromJson(c,T)}static fromJsonString(c,T){return new Vt().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Vt,c,T)}}Vt.runtime=p,Vt.typeName="google.protobuf.MethodOptions",Vt.fields=p.util.newFieldList(()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:p.getEnumType(Lt),opt:!0,default:Lt.IDEMPOTENCY_UNKNOWN},{no:35,name:"features",kind:"message",T:yt,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:It,repeated:!0}]);var Lt;(function(_){_[_.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",_[_.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",_[_.IDEMPOTENT=2]="IDEMPOTENT"})(Lt||(Lt={})),p.util.setEnumType(Lt,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class It extends q.v{constructor(c){super(),this.name=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new It().fromBinary(c,T)}static fromJson(c,T){return new It().fromJson(c,T)}static fromJsonString(c,T){return new It().fromJsonString(c,T)}static equals(c,T){return p.util.equals(It,c,T)}}It.runtime=p,It.typeName="google.protobuf.UninterpretedOption",It.fields=p.util.newFieldList(()=>[{no:2,name:"name",kind:"message",T:Ft,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]);class Ft extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new Ft().fromBinary(c,T)}static fromJson(c,T){return new Ft().fromJson(c,T)}static fromJsonString(c,T){return new Ft().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Ft,c,T)}}Ft.runtime=p,Ft.typeName="google.protobuf.UninterpretedOption.NamePart",Ft.fields=p.util.newFieldList(()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]);class yt extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new yt().fromBinary(c,T)}static fromJson(c,T){return new yt().fromJson(c,T)}static fromJsonString(c,T){return new yt().fromJsonString(c,T)}static equals(c,T){return p.util.equals(yt,c,T)}}yt.runtime=p,yt.typeName="google.protobuf.FeatureSet",yt.fields=p.util.newFieldList(()=>[{no:1,name:"field_presence",kind:"enum",T:p.getEnumType(zt),opt:!0},{no:2,name:"enum_type",kind:"enum",T:p.getEnumType(an),opt:!0},{no:3,name:"repeated_field_encoding",kind:"enum",T:p.getEnumType(Et),opt:!0},{no:4,name:"utf8_validation",kind:"enum",T:p.getEnumType(Xt),opt:!0},{no:5,name:"message_encoding",kind:"enum",T:p.getEnumType(Zt),opt:!0},{no:6,name:"json_format",kind:"enum",T:p.getEnumType(An),opt:!0}]);var zt;(function(_){_[_.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",_[_.EXPLICIT=1]="EXPLICIT",_[_.IMPLICIT=2]="IMPLICIT",_[_.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(zt||(zt={})),p.util.setEnumType(zt,"google.protobuf.FeatureSet.FieldPresence",[{no:0,name:"FIELD_PRESENCE_UNKNOWN"},{no:1,name:"EXPLICIT"},{no:2,name:"IMPLICIT"},{no:3,name:"LEGACY_REQUIRED"}]);var an;(function(_){_[_.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",_[_.OPEN=1]="OPEN",_[_.CLOSED=2]="CLOSED"})(an||(an={})),p.util.setEnumType(an,"google.protobuf.FeatureSet.EnumType",[{no:0,name:"ENUM_TYPE_UNKNOWN"},{no:1,name:"OPEN"},{no:2,name:"CLOSED"}]);var Et;(function(_){_[_.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",_[_.PACKED=1]="PACKED",_[_.EXPANDED=2]="EXPANDED"})(Et||(Et={})),p.util.setEnumType(Et,"google.protobuf.FeatureSet.RepeatedFieldEncoding",[{no:0,name:"REPEATED_FIELD_ENCODING_UNKNOWN"},{no:1,name:"PACKED"},{no:2,name:"EXPANDED"}]);var Xt;(function(_){_[_.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",_[_.NONE=1]="NONE",_[_.VERIFY=2]="VERIFY"})(Xt||(Xt={})),p.util.setEnumType(Xt,"google.protobuf.FeatureSet.Utf8Validation",[{no:0,name:"UTF8_VALIDATION_UNKNOWN"},{no:1,name:"NONE"},{no:2,name:"VERIFY"}]);var Zt;(function(_){_[_.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",_[_.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",_[_.DELIMITED=2]="DELIMITED"})(Zt||(Zt={})),p.util.setEnumType(Zt,"google.protobuf.FeatureSet.MessageEncoding",[{no:0,name:"MESSAGE_ENCODING_UNKNOWN"},{no:1,name:"LENGTH_PREFIXED"},{no:2,name:"DELIMITED"}]);var An;(function(_){_[_.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",_[_.ALLOW=1]="ALLOW",_[_.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(An||(An={})),p.util.setEnumType(An,"google.protobuf.FeatureSet.JsonFormat",[{no:0,name:"JSON_FORMAT_UNKNOWN"},{no:1,name:"ALLOW"},{no:2,name:"LEGACY_BEST_EFFORT"}]);class Ne extends q.v{constructor(c){super(),this.defaults=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new Ne().fromBinary(c,T)}static fromJson(c,T){return new Ne().fromJson(c,T)}static fromJsonString(c,T){return new Ne().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Ne,c,T)}}Ne.runtime=p,Ne.typeName="google.protobuf.FeatureSetDefaults",Ne.fields=p.util.newFieldList(()=>[{no:1,name:"defaults",kind:"message",T:Dt,repeated:!0},{no:4,name:"minimum_edition",kind:"enum",T:p.getEnumType($),opt:!0},{no:5,name:"maximum_edition",kind:"enum",T:p.getEnumType($),opt:!0}]);class Dt extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new Dt().fromBinary(c,T)}static fromJson(c,T){return new Dt().fromJson(c,T)}static fromJsonString(c,T){return new Dt().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Dt,c,T)}}Dt.runtime=p,Dt.typeName="google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault",Dt.fields=p.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:p.getEnumType($),opt:!0},{no:2,name:"features",kind:"message",T:yt,opt:!0}]);class lt extends q.v{constructor(c){super(),this.location=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new lt().fromBinary(c,T)}static fromJson(c,T){return new lt().fromJson(c,T)}static fromJsonString(c,T){return new lt().fromJsonString(c,T)}static equals(c,T){return p.util.equals(lt,c,T)}}lt.runtime=p,lt.typeName="google.protobuf.SourceCodeInfo",lt.fields=p.util.newFieldList(()=>[{no:1,name:"location",kind:"message",T:xt,repeated:!0}]);class xt extends q.v{constructor(c){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new xt().fromBinary(c,T)}static fromJson(c,T){return new xt().fromJson(c,T)}static fromJsonString(c,T){return new xt().fromJsonString(c,T)}static equals(c,T){return p.util.equals(xt,c,T)}}xt.runtime=p,xt.typeName="google.protobuf.SourceCodeInfo.Location",xt.fields=p.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]);class un extends q.v{constructor(c){super(),this.annotation=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new un().fromBinary(c,T)}static fromJson(c,T){return new un().fromJson(c,T)}static fromJsonString(c,T){return new un().fromJsonString(c,T)}static equals(c,T){return p.util.equals(un,c,T)}}un.runtime=p,un.typeName="google.protobuf.GeneratedCodeInfo",un.fields=p.util.newFieldList(()=>[{no:1,name:"annotation",kind:"message",T:ln,repeated:!0}]);class ln extends q.v{constructor(c){super(),this.path=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new ln().fromBinary(c,T)}static fromJson(c,T){return new ln().fromJson(c,T)}static fromJsonString(c,T){return new ln().fromJsonString(c,T)}static equals(c,T){return p.util.equals(ln,c,T)}}ln.runtime=p,ln.typeName="google.protobuf.GeneratedCodeInfo.Annotation",ln.fields=p.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0},{no:5,name:"semantic",kind:"enum",T:p.getEnumType(cn),opt:!0}]);var cn;(function(_){_[_.NONE=0]="NONE",_[_.SET=1]="SET",_[_.ALIAS=2]="ALIAS"})(cn||(cn={})),p.util.setEnumType(cn,"google.protobuf.GeneratedCodeInfo.Annotation.Semantic",[{no:0,name:"NONE"},{no:1,name:"SET"},{no:2,name:"ALIAS"}]);function $t(_,c){const T=_.values.find(W=>W.name===c);return(0,a.hu)(T,`cannot parse ${_.name} default value: ${c}`),T.number}function Mt(_,c){switch(_){case i.w.STRING:return c;case i.w.BYTES:{const T=ht(c);if(T===!1)throw new Error(`cannot parse ${i.w[_]} default value: ${c}`);return T}case i.w.INT64:case i.w.SFIXED64:case i.w.SINT64:return k.q.parse(c);case i.w.UINT64:case i.w.FIXED64:return k.q.uParse(c);case i.w.DOUBLE:case i.w.FLOAT:switch(c){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(c)}case i.w.BOOL:return c==="true";case i.w.INT32:case i.w.UINT32:case i.w.SINT32:case i.w.FIXED32:case i.w.SFIXED32:return parseInt(c,10)}}function ht(_){const c=[],T={tail:_,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(W){if(this.tail.length>=W){const ne=this.tail.substring(0,W);return this.tail=this.tail.substring(W),ne}return!1}};for(;T.next();)switch(T.c){case"\\":if(T.next())switch(T.c){case"\\":c.push(T.c.charCodeAt(0));break;case"b":c.push(8);break;case"f":c.push(12);break;case"n":c.push(10);break;case"r":c.push(13);break;case"t":c.push(9);break;case"v":c.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const W=T.c,ne=T.take(2);if(ne===!1)return!1;const he=parseInt(W+ne,8);if(isNaN(he))return!1;c.push(he);break}case"x":{const W=T.c,ne=T.take(2);if(ne===!1)return!1;const he=parseInt(W+ne,16);if(isNaN(he))return!1;c.push(he);break}case"u":{const W=T.c,ne=T.take(4);if(ne===!1)return!1;const he=parseInt(W+ne,16);if(isNaN(he))return!1;const pe=new Uint8Array(4);new DataView(pe.buffer).setInt32(0,he,!0),c.push(pe[0],pe[1],pe[2],pe[3]);break}case"U":{const W=T.c,ne=T.take(8);if(ne===!1)return!1;const he=k.q.uEnc(W+ne),pe=new Uint8Array(8),Ae=new DataView(pe.buffer);Ae.setInt32(0,he.lo,!0),Ae.setInt32(4,he.hi,!0),c.push(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5],pe[6],pe[7]);break}}break;default:c.push(T.c.charCodeAt(0))}return new Uint8Array(c)}const pn=Ne.fromBinary(A.W.dec("ChESDAgBEAIYAiABKAEwAhjmBwoREgwIAhABGAEgAigBMAEY5wcKERIMCAEQARgBIAIoATABGOgHIOYHKOgH"));function qn(_){const c=_.minimumEdition,T=_.maximumEdition;if(c===void 0||T===void 0||_.defaults.some(ne=>ne.edition===void 0))throw new Error("Invalid FeatureSetDefaults");const W=new Map;return(ne,...he)=>{var pe,Ae;let be=W.get(ne);if(be===void 0){if(ne<c)throw new Error(`Edition ${$[ne]} is earlier than the minimum supported edition ${$[c]}`);if(T<ne)throw new Error(`Edition ${$[ne]} is later than the maximum supported edition ${$[T]}`);let je;for(const at of _.defaults){const Ut=(pe=at.edition)!==null&&pe!==void 0?pe:0;Ut>ne||je!==void 0&&je.e>Ut||(je={e:Ut,f:(Ae=at.features)!==null&&Ae!==void 0?Ae:new yt})}if(je===void 0)throw new Error(`No valid default found for edition ${$[ne]}`);be=je.f.toBinary(),W.set(ne,be)}const De=yt.fromBinary(be);for(const je of he)je!==void 0&&De.fromBinary(je.toBinary());if(!Jt(De))throw new Error(`Invalid FeatureSet for edition ${$[ne]}`);return De}}function Jt(_){for(const c of yt.fields.list()){const T=_[c.localName];if(T===void 0||c.kind=="enum"&&T===0)return!1}return!0}function Un(_,c){var T;const W={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map,resolveFeatures:qn((T=c==null?void 0:c.featureSetDefaults)!==null&&T!==void 0?T:pn)},he=(_ instanceof U?_.file:_ instanceof Uint8Array?U.fromBinary(_).file:_).map(pe=>cr(pe,W));return Object.assign({files:he},W)}function cr(_,c){var T,W;(0,a.hu)(_.name,"invalid FileDescriptorProto: missing name");const ne=Object.assign(Object.assign({kind:"file",proto:_,deprecated:(W=(T=_.options)===null||T===void 0?void 0:T.deprecated)!==null&&W!==void 0?W:!1},Te(_.syntax,_.edition)),{name:_.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return Xe(this.proto.sourceCodeInfo,[nt.FileDescriptorProto_Syntax])},getPackageComments(){return Xe(this.proto.sourceCodeInfo,[nt.FileDescriptorProto_Package])},getFeatures(){var he;return c.resolveFeatures(this.edition,(he=this.proto.options)===null||he===void 0?void 0:he.features)}});c.mapEntries.clear();for(const he of _.enumType)zn(he,ne,void 0,c);for(const he of _.messageType)wn(he,ne,void 0,c);for(const he of _.service)gn(he,ne,c);nn(ne,c);for(const he of c.mapEntries.values())bn(he,c);for(const he of ne.messages)bn(he,c),nn(he,c);return c.mapEntries.clear(),ne}function nn(_,c){switch(_.kind){case"file":for(const T of _.proto.extension){const W=fe(T,_,void 0,c);_.extensions.push(W),c.extensions.set(W.typeName,W)}break;case"message":for(const T of _.proto.extension){const W=fe(T,_.file,_,c);_.nestedExtensions.push(W),c.extensions.set(W.typeName,W)}for(const T of _.nestedMessages)nn(T,c);break}}function bn(_,c){const T=_.proto.oneofDecl.map(ne=>fn(ne,_,c)),W=new Set;for(const ne of _.proto.field){const he=Ye(ne,T),pe=Hn(ne,_.file,_,he,c);_.fields.push(pe),he===void 0?_.members.push(pe):(he.fields.push(pe),W.has(he)||(W.add(he),_.members.push(he)))}for(const ne of T.filter(he=>W.has(he)))_.oneofs.push(ne);for(const ne of _.nestedMessages)bn(ne,c)}function zn(_,c,T,W){var ne,he,pe;(0,a.hu)(_.name,"invalid EnumDescriptorProto: missing name");const Ae={kind:"enum",proto:_,deprecated:(he=(ne=_.options)===null||ne===void 0?void 0:ne.deprecated)!==null&&he!==void 0?he:!1,file:c,parent:T,name:_.name,typeName:Pe(_,T,c),values:[],sharedPrefix:(0,l.Sm)(_.name,_.value.map(be=>{var De;return(De=be.name)!==null&&De!==void 0?De:""})),toString(){return`enum ${this.typeName}`},getComments(){const be=this.parent?[...this.parent.getComments().sourcePath,nt.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[nt.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return Xe(c.proto.sourceCodeInfo,be)},getFeatures(){var be,De,je;const at=(De=(be=this.parent)===null||be===void 0?void 0:be.getFeatures())!==null&&De!==void 0?De:this.file.getFeatures();return W.resolveFeatures(this.file.edition,at,(je=this.proto.options)===null||je===void 0?void 0:je.features)}};W.enums.set(Ae.typeName,Ae),_.value.forEach(be=>{var De,je;(0,a.hu)(be.name,"invalid EnumValueDescriptorProto: missing name"),(0,a.hu)(be.number!==void 0,"invalid EnumValueDescriptorProto: missing number"),Ae.values.push({kind:"enum_value",proto:be,deprecated:(je=(De=be.options)===null||De===void 0?void 0:De.deprecated)!==null&&je!==void 0?je:!1,parent:Ae,name:be.name,number:be.number,toString(){return`enum value ${Ae.typeName}.${this.name}`},declarationString(){var at;let Ut=`${this.name} = ${this.number}`;return((at=this.proto.options)===null||at===void 0?void 0:at.deprecated)===!0&&(Ut+=" [deprecated = true]"),Ut},getComments(){const at=[...this.parent.getComments().sourcePath,nt.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return Xe(c.proto.sourceCodeInfo,at)},getFeatures(){var at;return W.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(at=this.proto.options)===null||at===void 0?void 0:at.features)}})}),((pe=T==null?void 0:T.nestedEnums)!==null&&pe!==void 0?pe:c.enums).push(Ae)}function wn(_,c,T,W){var ne,he,pe,Ae;(0,a.hu)(_.name,"invalid DescriptorProto: missing name");const be={kind:"message",proto:_,deprecated:(he=(ne=_.options)===null||ne===void 0?void 0:ne.deprecated)!==null&&he!==void 0?he:!1,file:c,parent:T,name:_.name,typeName:Pe(_,T,c),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const De=this.parent?[...this.parent.getComments().sourcePath,nt.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[nt.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return Xe(c.proto.sourceCodeInfo,De)},getFeatures(){var De,je,at;const Ut=(je=(De=this.parent)===null||De===void 0?void 0:De.getFeatures())!==null&&je!==void 0?je:this.file.getFeatures();return W.resolveFeatures(this.file.edition,Ut,(at=this.proto.options)===null||at===void 0?void 0:at.features)}};((pe=_.options)===null||pe===void 0?void 0:pe.mapEntry)===!0?W.mapEntries.set(be.typeName,be):(((Ae=T==null?void 0:T.nestedMessages)!==null&&Ae!==void 0?Ae:c.messages).push(be),W.messages.set(be.typeName,be));for(const De of _.enumType)zn(De,c,be,W);for(const De of _.nestedType)wn(De,c,be,W)}function gn(_,c,T){var W,ne;(0,a.hu)(_.name,"invalid ServiceDescriptorProto: missing name");const he={kind:"service",proto:_,deprecated:(ne=(W=_.options)===null||W===void 0?void 0:W.deprecated)!==null&&ne!==void 0?ne:!1,file:c,name:_.name,typeName:Pe(_,void 0,c),methods:[],toString(){return`service ${this.typeName}`},getComments(){const pe=[nt.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return Xe(c.proto.sourceCodeInfo,pe)},getFeatures(){var pe;return T.resolveFeatures(this.file.edition,this.file.getFeatures(),(pe=this.proto.options)===null||pe===void 0?void 0:pe.features)}};c.services.push(he),T.services.set(he.typeName,he);for(const pe of _.method)he.methods.push(rn(pe,he,T))}function rn(_,c,T){var W,ne,he;(0,a.hu)(_.name,"invalid MethodDescriptorProto: missing name"),(0,a.hu)(_.inputType,"invalid MethodDescriptorProto: missing input_type"),(0,a.hu)(_.outputType,"invalid MethodDescriptorProto: missing output_type");let pe;_.clientStreaming===!0&&_.serverStreaming===!0?pe=B.t.BiDiStreaming:_.clientStreaming===!0?pe=B.t.ClientStreaming:_.serverStreaming===!0?pe=B.t.ServerStreaming:pe=B.t.Unary;let Ae;switch((W=_.options)===null||W===void 0?void 0:W.idempotencyLevel){case Lt.IDEMPOTENT:Ae=B.w.Idempotent;break;case Lt.NO_SIDE_EFFECTS:Ae=B.w.NoSideEffects;break;case Lt.IDEMPOTENCY_UNKNOWN:case void 0:Ae=void 0;break}const be=T.messages.get(Me(_.inputType)),De=T.messages.get(Me(_.outputType));(0,a.hu)(be,`invalid MethodDescriptorProto: input_type ${_.inputType} not found`),(0,a.hu)(De,`invalid MethodDescriptorProto: output_type ${_.inputType} not found`);const je=_.name;return{kind:"rpc",proto:_,deprecated:(he=(ne=_.options)===null||ne===void 0?void 0:ne.deprecated)!==null&&he!==void 0?he:!1,parent:c,name:je,methodKind:pe,input:be,output:De,idempotency:Ae,toString(){return`rpc ${c.typeName}.${je}`},getComments(){const at=[...this.parent.getComments().sourcePath,nt.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return Xe(c.file.proto.sourceCodeInfo,at)},getFeatures(){var at;return T.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(at=this.proto.options)===null||at===void 0?void 0:at.features)}}}function fn(_,c,T){return(0,a.hu)(_.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:_,deprecated:!1,parent:c,fields:[],name:_.name,toString(){return`oneof ${c.typeName}.${this.name}`},getComments(){const W=[...this.parent.getComments().sourcePath,nt.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return Xe(c.file.proto.sourceCodeInfo,W)},getFeatures(){var W;return T.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(W=this.proto.options)===null||W===void 0?void 0:W.features)}}}function Hn(_,c,T,W,ne){var he,pe,Ae;(0,a.hu)(_.name,"invalid FieldDescriptorProto: missing name"),(0,a.hu)(_.number,"invalid FieldDescriptorProto: missing number"),(0,a.hu)(_.type,"invalid FieldDescriptorProto: missing type");const be={proto:_,deprecated:(pe=(he=_.options)===null||he===void 0?void 0:he.deprecated)!==null&&pe!==void 0?pe:!1,name:_.name,number:_.number,parent:T,oneof:W,optional:te(_,c.syntax),packedByDefault:de(c,_,ne.resolveFeatures),packed:Ie(c,T,_,ne.resolveFeatures),jsonName:_.jsonName===(0,l.x1)(_.name)?void 0:_.jsonName,scalar:void 0,longType:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,declarationString:gt,toString(){return`field ${this.parent.typeName}.${this.name}`},getComments(){const je=[...this.parent.getComments().sourcePath,nt.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return Xe(c.proto.sourceCodeInfo,je)},getFeatures(){var je;return ne.resolveFeatures(c.edition,this.parent.getFeatures(),(je=this.proto.options)===null||je===void 0?void 0:je.features)}},De=_.label===Ce.REPEATED;switch(_.type){case Se.MESSAGE:case Se.GROUP:{(0,a.hu)(_.typeName,"invalid FieldDescriptorProto: missing type_name");const je=ne.mapEntries.get(Me(_.typeName));if(je!==void 0)return(0,a.hu)(De,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},be),{kind:"field",fieldKind:"map",repeated:!1}),_e(je));const at=ne.messages.get(Me(_.typeName));return(0,a.hu)(at!==void 0,`invalid FieldDescriptorProto: type_name ${_.typeName} not found`),Object.assign(Object.assign({},be),{kind:"field",fieldKind:"message",repeated:De,message:at})}case Se.ENUM:{(0,a.hu)(_.typeName,"invalid FieldDescriptorProto: missing type_name");const je=ne.enums.get(Me(_.typeName));return(0,a.hu)(je!==void 0,`invalid FieldDescriptorProto: type_name ${_.typeName} not found`),Object.assign(Object.assign({},be),{kind:"field",fieldKind:"enum",getDefaultValue:ft,repeated:De,enum:je})}default:{const je=Fe[_.type];return(0,a.hu)(je,`invalid FieldDescriptorProto: unknown type ${_.type}`),Object.assign(Object.assign({},be),{kind:"field",fieldKind:"scalar",getDefaultValue:ft,repeated:De,scalar:je,longType:((Ae=_.options)===null||Ae===void 0?void 0:Ae.jstype)==Ue.JS_STRING?i.p.STRING:i.p.BIGINT})}}}function fe(_,c,T,W){(0,a.hu)(_.extendee,"invalid FieldDescriptorProto: missing extendee");const ne=Hn(_,c,null,void 0,W),he=W.messages.get(Me(_.extendee));return(0,a.hu)(he,`invalid FieldDescriptorProto: extendee ${_.extendee} not found`),Object.assign(Object.assign({},ne),{kind:"extension",typeName:Pe(_,T,c),parent:T,file:c,extendee:he,toString(){return`extension ${this.typeName}`},getComments(){const pe=this.parent?[...this.parent.getComments().sourcePath,nt.DescriptorProto_Extension,this.parent.proto.extension.indexOf(_)]:[nt.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(_)];return Xe(c.proto.sourceCodeInfo,pe)},getFeatures(){var pe,Ae;return W.resolveFeatures(this.file.edition,((pe=this.parent)!==null&&pe!==void 0?pe:this.file).getFeatures(),(Ae=this.proto.options)===null||Ae===void 0?void 0:Ae.features)}})}function Te(_,c){let T,W;switch(_){case void 0:case"proto2":W="proto2",T=$.EDITION_PROTO2;break;case"proto3":W="proto3",T=$.EDITION_PROTO3;break;case"editions":switch(W="editions",c){case void 0:case $.EDITION_1_TEST_ONLY:case $.EDITION_2_TEST_ONLY:case $.EDITION_99997_TEST_ONLY:case $.EDITION_99998_TEST_ONLY:case $.EDITION_99999_TEST_ONLY:case $.EDITION_UNKNOWN:T=$.EDITION_UNKNOWN;break;default:T=c;break}break;default:throw new Error(`invalid FileDescriptorProto: unsupported syntax: ${_}`)}if(_==="editions"&&c===$.EDITION_UNKNOWN)throw new Error(`invalid FileDescriptorProto: syntax ${_} cannot have edition ${String(c)}`);return{syntax:W,edition:T}}function Pe(_,c,T){(0,a.hu)(_.name,`invalid ${_.getType().typeName}: missing name`);let W;return c?W=`${c.typeName}.${_.name}`:T.proto.package!==void 0?W=`${T.proto.package}.${_.name}`:W=`${_.name}`,W}function Me(_){return _.startsWith(".")?_.substring(1):_}function _e(_){var c,T;(0,a.hu)((c=_.proto.options)===null||c===void 0?void 0:c.mapEntry,`invalid DescriptorProto: expected ${_.toString()} to be a map entry`),(0,a.hu)(_.fields.length===2,`invalid DescriptorProto: map entry ${_.toString()} has ${_.fields.length} fields`);const W=_.fields.find(pe=>pe.proto.number===1);(0,a.hu)(W,`invalid DescriptorProto: map entry ${_.toString()} is missing key field`);const ne=W.scalar;(0,a.hu)(ne!==void 0&&ne!==i.w.BYTES&&ne!==i.w.FLOAT&&ne!==i.w.DOUBLE,`invalid DescriptorProto: map entry ${_.toString()} has unexpected key type ${(T=W.proto.type)!==null&&T!==void 0?T:-1}`);const he=_.fields.find(pe=>pe.proto.number===2);switch((0,a.hu)(he,`invalid DescriptorProto: map entry ${_.toString()} is missing value field`),he.fieldKind){case"scalar":return{mapKey:ne,mapValue:Object.assign(Object.assign({},he),{kind:"scalar"})};case"message":return{mapKey:ne,mapValue:Object.assign(Object.assign({},he),{kind:"message"})};case"enum":return{mapKey:ne,mapValue:Object.assign(Object.assign({},he),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}function Ye(_,c){var T;const W=_.oneofIndex;if(W===void 0)return;let ne;return _.proto3Optional!==!0&&(ne=c[W],(0,a.hu)(ne,`invalid FieldDescriptorProto: oneof #${W} for field #${(T=_.number)!==null&&T!==void 0?T:-1} not found`)),ne}function te(_,c){switch(c){case"proto2":return _.oneofIndex===void 0&&_.label===Ce.OPTIONAL;case"proto3":return _.proto3Optional===!0;case"editions":return!1}}function de(_,c,T){const{repeatedFieldEncoding:W}=T(_.edition);if(W!=Et.PACKED)return!1;switch(c.type){case Se.STRING:case Se.BYTES:case Se.GROUP:case Se.MESSAGE:return!1;default:return!0}}function Ie(_,c,T,W){var ne,he,pe,Ae,be,De;switch(T.type){case Se.STRING:case Se.BYTES:case Se.GROUP:case Se.MESSAGE:return!1;default:switch(_.edition){case $.EDITION_PROTO2:return(he=(ne=T.options)===null||ne===void 0?void 0:ne.packed)!==null&&he!==void 0?he:!1;case $.EDITION_PROTO3:return(Ae=(pe=T.options)===null||pe===void 0?void 0:pe.packed)!==null&&Ae!==void 0?Ae:!0;default:{const{repeatedFieldEncoding:je}=W(_.edition,(be=c==null?void 0:c.getFeatures())!==null&&be!==void 0?be:_.getFeatures(),(De=T.options)===null||De===void 0?void 0:De.features);return je==Et.PACKED}}}}const Fe={[Se.DOUBLE]:i.w.DOUBLE,[Se.FLOAT]:i.w.FLOAT,[Se.INT64]:i.w.INT64,[Se.UINT64]:i.w.UINT64,[Se.INT32]:i.w.INT32,[Se.FIXED64]:i.w.FIXED64,[Se.FIXED32]:i.w.FIXED32,[Se.BOOL]:i.w.BOOL,[Se.STRING]:i.w.STRING,[Se.GROUP]:void 0,[Se.MESSAGE]:void 0,[Se.BYTES]:i.w.BYTES,[Se.UINT32]:i.w.UINT32,[Se.ENUM]:void 0,[Se.SFIXED32]:i.w.SFIXED32,[Se.SFIXED64]:i.w.SFIXED64,[Se.SINT32]:i.w.SINT32,[Se.SINT64]:i.w.SINT64};function Xe(_,c){if(!_)return{leadingDetached:[],sourcePath:c};for(const T of _.location)if(T.path.length===c.length&&!T.path.some((W,ne)=>c[ne]!==W))return{leadingDetached:T.leadingDetachedComments,leading:T.leadingComments,trailing:T.trailingComments,sourcePath:c};return{leadingDetached:[],sourcePath:c}}var nt;(function(_){_[_.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",_[_.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",_[_.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",_[_.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",_[_.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",_[_.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",_[_.DescriptorProto_Field=2]="DescriptorProto_Field",_[_.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",_[_.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",_[_.DescriptorProto_Extension=6]="DescriptorProto_Extension",_[_.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",_[_.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",_[_.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"})(nt||(nt={}));function gt(){var _,c,T;const W=[];this.repeated&&W.push("repeated"),this.optional&&W.push("optional"),(this.kind==="extension"?this.file:this.parent.file).syntax=="proto2"&&this.proto.label===Ce.REQUIRED&&W.push("required");let he;switch(this.fieldKind){case"scalar":he=i.w[this.scalar].toLowerCase();break;case"enum":he=this.enum.typeName;break;case"message":he=this.message.typeName;break;case"map":{const be=i.w[this.mapKey].toLowerCase();let De;switch(this.mapValue.kind){case"scalar":De=i.w[this.mapValue.scalar].toLowerCase();break;case"enum":De=this.mapValue.enum.typeName;break;case"message":De=this.mapValue.message.typeName;break}he=`map<${be}, ${De}>`;break}}W.push(`${he} ${this.name} = ${this.number}`);const pe=[];((_=this.proto.options)===null||_===void 0?void 0:_.packed)!==void 0&&pe.push(`packed = ${this.proto.options.packed.toString()}`);let Ae=this.proto.defaultValue;return Ae!==void 0&&((this.proto.type==Se.BYTES||this.proto.type==Se.STRING)&&(Ae='"'+Ae.replace('"','\\"')+'"'),pe.push(`default = ${Ae}`)),this.jsonName!==void 0&&pe.push(`json_name = "${this.jsonName}"`),((c=this.proto.options)===null||c===void 0?void 0:c.jstype)!==void 0&&pe.push(`jstype = ${Ue[this.proto.options.jstype]}`),((T=this.proto.options)===null||T===void 0?void 0:T.deprecated)===!0&&pe.push("deprecated = true"),pe.length>0&&W.push("["+pe.join(", ")+"]"),W.join(" ")}function ft(){const _=this.proto.defaultValue;if(_!==void 0)switch(this.fieldKind){case"enum":return $t(this.enum,_);case"scalar":return Mt(this.scalar,_);default:return}}function qt(..._){const c={},T={},W={},ne={add(he){if("fields"in he){if(!this.findMessage(he.typeName)){c[he.typeName]=he;for(const pe of he.fields.list())pe.kind=="message"?this.add(pe.T):pe.kind=="map"&&pe.V.kind=="message"?this.add(pe.V.T):pe.kind=="enum"&&this.add(pe.T)}}else if("methods"in he){if(!this.findService(he.typeName)){W[he.typeName]=he;for(const pe of Object.values(he.methods))this.add(pe.I),this.add(pe.O)}}else T[he.typeName]=he},findMessage(he){return c[he]},findEnum(he){return T[he]},findService(he){return W[he]}};for(const he of _)ne.add(he);return ne}class Tt extends q.v{constructor(c){super(),this.seconds=k.q.zero,this.nanos=0,m.w.util.initPartial(c,this)}fromJson(c,T){if(typeof c!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${m.w.json.debug(c)}`);const W=c.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!W)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const ne=Date.parse(W[1]+"-"+W[2]+"-"+W[3]+"T"+W[4]+":"+W[5]+":"+W[6]+(W[8]?W[8]:"Z"));if(Number.isNaN(ne))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(ne<Date.parse("0001-01-01T00:00:00Z")||ne>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=k.q.parse(ne/1e3),this.nanos=0,W[7]&&(this.nanos=parseInt("1"+W[7]+"0".repeat(9-W[7].length))-1e9),this}toJson(c){const T=Number(this.seconds)*1e3;if(T<Date.parse("0001-01-01T00:00:00Z")||T>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let W="Z";if(this.nanos>0){const ne=(this.nanos+1e9).toString().substring(1);ne.substring(3)==="000000"?W="."+ne.substring(0,3)+"Z":ne.substring(6)==="000"?W="."+ne.substring(0,6)+"Z":W="."+ne+"Z"}return new Date(T).toISOString().replace(".000Z",W)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Tt.fromDate(new Date)}static fromDate(c){const T=c.getTime();return new Tt({seconds:k.q.parse(Math.floor(T/1e3)),nanos:T%1e3*1e6})}static fromBinary(c,T){return new Tt().fromBinary(c,T)}static fromJson(c,T){return new Tt().fromJson(c,T)}static fromJsonString(c,T){return new Tt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Tt,c,T)}}Tt.runtime=m.w,Tt.typeName="google.protobuf.Timestamp",Tt.fields=m.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Ot extends q.v{constructor(c){super(),this.seconds=k.q.zero,this.nanos=0,m.w.util.initPartial(c,this)}fromJson(c,T){if(typeof c!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${m.w.json.debug(c)}`);const W=c.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(W===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${m.w.json.debug(c)}`);const ne=Number(W[1]);if(ne>315576e6||ne<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${m.w.json.debug(c)}`);if(this.seconds=k.q.parse(ne),typeof W[2]=="string"){const he=W[2]+"0".repeat(9-W[2].length);this.nanos=parseInt(he),(ne<0||Object.is(ne,-0))&&(this.nanos=-this.nanos)}return this}toJson(c){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let T=this.seconds.toString();if(this.nanos!==0){let W=Math.abs(this.nanos).toString();W="0".repeat(9-W.length)+W,W.substring(3)==="000000"?W=W.substring(0,3):W.substring(6)==="000"&&(W=W.substring(0,6)),T+="."+W,this.nanos<0&&Number(this.seconds)==0&&(T="-"+T)}return T+"s"}static fromBinary(c,T){return new Ot().fromBinary(c,T)}static fromJson(c,T){return new Ot().fromJson(c,T)}static fromJsonString(c,T){return new Ot().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Ot,c,T)}}Ot.runtime=m.w,Ot.typeName="google.protobuf.Duration",Ot.fields=m.w.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var _n=b(733);class Qt extends q.v{constructor(c){super(),m.w.util.initPartial(c,this)}static fromBinary(c,T){return new Qt().fromBinary(c,T)}static fromJson(c,T){return new Qt().fromJson(c,T)}static fromJsonString(c,T){return new Qt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Qt,c,T)}}Qt.runtime=m.w,Qt.typeName="google.protobuf.Empty",Qt.fields=m.w.util.newFieldList(()=>[]);class We extends q.v{constructor(c){super(),this.paths=[],m.w.util.initPartial(c,this)}toJson(c){function T(W){let ne=!1;const he=[];for(let pe=0;pe<W.length;pe++){let Ae=W.charAt(pe);switch(Ae){case"_":ne=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":he.push(Ae),ne=!1;break;default:ne&&(ne=!1,Ae=Ae.toUpperCase()),he.push(Ae);break}}return he.join("")}return this.paths.map(W=>{if(W.match(/_[0-9]?_/g)||W.match(/[A-Z]/g))throw new Error('cannot encode google.protobuf.FieldMask to JSON: lowerCamelCase of path name "'+W+'" is irreversible');return T(W)}).join(",")}fromJson(c,T){if(typeof c!="string")throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+m.w.json.debug(c));if(c==="")return this;function W(ne){if(ne.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const he=ne.replace(/[A-Z]/g,pe=>"_"+pe.toLowerCase());return he[0]==="_"?he.substring(1):he}return this.paths=c.split(",").map(W),this}static fromBinary(c,T){return new We().fromBinary(c,T)}static fromJson(c,T){return new We().fromJson(c,T)}static fromJsonString(c,T){return new We().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(We,c,T)}}We.runtime=m.w,We.typeName="google.protobuf.FieldMask",We.fields=m.w.util.newFieldList(()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}]);var ot;(function(_){_[_.NULL_VALUE=0]="NULL_VALUE"})(ot||(ot={})),m.w.util.setEnumType(ot,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class wt extends q.v{constructor(c){super(),this.fields={},m.w.util.initPartial(c,this)}toJson(c){const T={};for(const[W,ne]of Object.entries(this.fields))T[W]=ne.toJson(c);return T}fromJson(c,T){if(typeof c!="object"||c==null||Array.isArray(c))throw new Error("cannot decode google.protobuf.Struct from JSON "+m.w.json.debug(c));for(const[W,ne]of Object.entries(c))this.fields[W]=ze.fromJson(ne);return this}static fromBinary(c,T){return new wt().fromBinary(c,T)}static fromJson(c,T){return new wt().fromJson(c,T)}static fromJsonString(c,T){return new wt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(wt,c,T)}}wt.runtime=m.w,wt.typeName="google.protobuf.Struct",wt.fields=m.w.util.newFieldList(()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:ze}}]);class ze extends q.v{constructor(c){super(),this.kind={case:void 0},m.w.util.initPartial(c,this)}toJson(c){switch(this.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(this.kind.value))throw new Error("google.protobuf.Value cannot be NaN or Infinity");return this.kind.value;case"boolValue":return this.kind.value;case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},c),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(c,T){switch(typeof c){case"number":this.kind={case:"numberValue",value:c};break;case"string":this.kind={case:"stringValue",value:c};break;case"boolean":this.kind={case:"boolValue",value:c};break;case"object":c===null?this.kind={case:"nullValue",value:ot.NULL_VALUE}:Array.isArray(c)?this.kind={case:"listValue",value:rt.fromJson(c)}:this.kind={case:"structValue",value:wt.fromJson(c)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+m.w.json.debug(c))}return this}static fromBinary(c,T){return new ze().fromBinary(c,T)}static fromJson(c,T){return new ze().fromJson(c,T)}static fromJsonString(c,T){return new ze().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(ze,c,T)}}ze.runtime=m.w,ze.typeName="google.protobuf.Value",ze.fields=m.w.util.newFieldList(()=>[{no:1,name:"null_value",kind:"enum",T:m.w.getEnumType(ot),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:wt,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:rt,oneof:"kind"}]);class rt extends q.v{constructor(c){super(),this.values=[],m.w.util.initPartial(c,this)}toJson(c){return this.values.map(T=>T.toJson())}fromJson(c,T){if(!Array.isArray(c))throw new Error("cannot decode google.protobuf.ListValue from JSON "+m.w.json.debug(c));for(let W of c)this.values.push(ze.fromJson(W));return this}static fromBinary(c,T){return new rt().fromBinary(c,T)}static fromJson(c,T){return new rt().fromJson(c,T)}static fromJsonString(c,T){return new rt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(rt,c,T)}}rt.runtime=m.w,rt.typeName="google.protobuf.ListValue",rt.fields=m.w.util.newFieldList(()=>[{no:1,name:"values",kind:"message",T:ze,repeated:!0}]);var Yt=b(609);class it extends q.v{constructor(c){super(),this.value=0,m.w.util.initPartial(c,this)}toJson(c){return m.w.json.writeScalar(i.w.DOUBLE,this.value,!0)}fromJson(c,T){try{this.value=m.w.json.readScalar(i.w.DOUBLE,c)}catch(W){let ne='cannot decode message google.protobuf.DoubleValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(c,T){return new it().fromBinary(c,T)}static fromJson(c,T){return new it().fromJson(c,T)}static fromJsonString(c,T){return new it().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(it,c,T)}}it.runtime=m.w,it.typeName="google.protobuf.DoubleValue",it.fields=m.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),it.fieldWrapper={wrapField(_){return new it({value:_})},unwrapField(_){return _.value}};class St extends q.v{constructor(c){super(),this.value=0,m.w.util.initPartial(c,this)}toJson(c){return m.w.json.writeScalar(i.w.FLOAT,this.value,!0)}fromJson(c,T){try{this.value=m.w.json.readScalar(i.w.FLOAT,c)}catch(W){let ne='cannot decode message google.protobuf.FloatValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(c,T){return new St().fromBinary(c,T)}static fromJson(c,T){return new St().fromJson(c,T)}static fromJsonString(c,T){return new St().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(St,c,T)}}St.runtime=m.w,St.typeName="google.protobuf.FloatValue",St.fields=m.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),St.fieldWrapper={wrapField(_){return new St({value:_})},unwrapField(_){return _.value}};class pt extends q.v{constructor(c){super(),this.value=k.q.zero,m.w.util.initPartial(c,this)}toJson(c){return m.w.json.writeScalar(i.w.INT64,this.value,!0)}fromJson(c,T){try{this.value=m.w.json.readScalar(i.w.INT64,c)}catch(W){let ne='cannot decode message google.protobuf.Int64Value from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(c,T){return new pt().fromBinary(c,T)}static fromJson(c,T){return new pt().fromJson(c,T)}static fromJsonString(c,T){return new pt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(pt,c,T)}}pt.runtime=m.w,pt.typeName="google.protobuf.Int64Value",pt.fields=m.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),pt.fieldWrapper={wrapField(_){return new pt({value:_})},unwrapField(_){return _.value}};class vt extends q.v{constructor(c){super(),this.value=k.q.zero,m.w.util.initPartial(c,this)}toJson(c){return m.w.json.writeScalar(i.w.UINT64,this.value,!0)}fromJson(c,T){try{this.value=m.w.json.readScalar(i.w.UINT64,c)}catch(W){let ne='cannot decode message google.protobuf.UInt64Value from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(c,T){return new vt().fromBinary(c,T)}static fromJson(c,T){return new vt().fromJson(c,T)}static fromJsonString(c,T){return new vt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(vt,c,T)}}vt.runtime=m.w,vt.typeName="google.protobuf.UInt64Value",vt.fields=m.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),vt.fieldWrapper={wrapField(_){return new vt({value:_})},unwrapField(_){return _.value}};class At extends q.v{constructor(c){super(),this.value=0,m.w.util.initPartial(c,this)}toJson(c){return m.w.json.writeScalar(i.w.INT32,this.value,!0)}fromJson(c,T){try{this.value=m.w.json.readScalar(i.w.INT32,c)}catch(W){let ne='cannot decode message google.protobuf.Int32Value from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(c,T){return new At().fromBinary(c,T)}static fromJson(c,T){return new At().fromJson(c,T)}static fromJsonString(c,T){return new At().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(At,c,T)}}At.runtime=m.w,At.typeName="google.protobuf.Int32Value",At.fields=m.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),At.fieldWrapper={wrapField(_){return new At({value:_})},unwrapField(_){return _.value}};class Rt extends q.v{constructor(c){super(),this.value=0,m.w.util.initPartial(c,this)}toJson(c){return m.w.json.writeScalar(i.w.UINT32,this.value,!0)}fromJson(c,T){try{this.value=m.w.json.readScalar(i.w.UINT32,c)}catch(W){let ne='cannot decode message google.protobuf.UInt32Value from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(c,T){return new Rt().fromBinary(c,T)}static fromJson(c,T){return new Rt().fromJson(c,T)}static fromJsonString(c,T){return new Rt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Rt,c,T)}}Rt.runtime=m.w,Rt.typeName="google.protobuf.UInt32Value",Rt.fields=m.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),Rt.fieldWrapper={wrapField(_){return new Rt({value:_})},unwrapField(_){return _.value}};class Kt extends q.v{constructor(c){super(),this.value=!1,m.w.util.initPartial(c,this)}toJson(c){return m.w.json.writeScalar(i.w.BOOL,this.value,!0)}fromJson(c,T){try{this.value=m.w.json.readScalar(i.w.BOOL,c)}catch(W){let ne='cannot decode message google.protobuf.BoolValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(c,T){return new Kt().fromBinary(c,T)}static fromJson(c,T){return new Kt().fromJson(c,T)}static fromJsonString(c,T){return new Kt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Kt,c,T)}}Kt.runtime=m.w,Kt.typeName="google.protobuf.BoolValue",Kt.fields=m.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),Kt.fieldWrapper={wrapField(_){return new Kt({value:_})},unwrapField(_){return _.value}};class Bt extends q.v{constructor(c){super(),this.value="",m.w.util.initPartial(c,this)}toJson(c){return m.w.json.writeScalar(i.w.STRING,this.value,!0)}fromJson(c,T){try{this.value=m.w.json.readScalar(i.w.STRING,c)}catch(W){let ne='cannot decode message google.protobuf.StringValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(c,T){return new Bt().fromBinary(c,T)}static fromJson(c,T){return new Bt().fromJson(c,T)}static fromJsonString(c,T){return new Bt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Bt,c,T)}}Bt.runtime=m.w,Bt.typeName="google.protobuf.StringValue",Bt.fields=m.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),Bt.fieldWrapper={wrapField(_){return new Bt({value:_})},unwrapField(_){return _.value}};class Ve extends q.v{constructor(c){super(),this.value=new Uint8Array(0),m.w.util.initPartial(c,this)}toJson(c){return m.w.json.writeScalar(i.w.BYTES,this.value,!0)}fromJson(c,T){try{this.value=m.w.json.readScalar(i.w.BYTES,c)}catch(W){let ne='cannot decode message google.protobuf.BytesValue from JSON"';throw W instanceof Error&&W.message.length>0&&(ne+=`: ${W.message}`),new Error(ne)}return this}static fromBinary(c,T){return new Ve().fromBinary(c,T)}static fromJson(c,T){return new Ve().fromJson(c,T)}static fromJsonString(c,T){return new Ve().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Ve,c,T)}}Ve.runtime=m.w,Ve.typeName="google.protobuf.BytesValue",Ve.fields=m.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),Ve.fieldWrapper={wrapField(_){return new Ve({value:_})},unwrapField(_){return _.value}};const Ct=[_n.I,Ot,Qt,We,wt,ze,rt,Tt,Ot,it,St,pt,At,Rt,vt,Kt,Bt,Ve],Gn=[(0,Yt.V3)(ot)];function Jn(_,c=!0){const T=_ instanceof Uint8Array||_ instanceof U?Un(_):_,W={},ne={},he={};if(c){for(const pe of Ct)ne[pe.typeName]=pe;for(const pe of Gn)W[pe.typeName]=pe}return{findEnum(pe){const Ae=W[pe];if(Ae)return Ae;const be=T.enums.get(pe);if(!be)return;const je=(be.file.syntax=="proto3"?m.w:p).makeEnumType(pe,be.values.map(at=>({no:at.number,name:at.name,localName:(0,l.r1)(at)})),{});return W[pe]=je,je},findMessage(pe){const Ae=ne[pe];if(Ae)return Ae;const be=T.messages.get(pe);if(!be)return;const De=be.file.syntax=="proto3"?m.w:p,je=[],at=De.makeMessageType(pe,()=>je,{localName:(0,l.r1)(be)});ne[pe]=at;for(const Ut of be.fields){const dt=on(Ut,this);je.push(dt)}return at},findService(pe){const Ae=he[pe];if(Ae)return Ae;const be=T.services.get(pe);if(!be)return;const De={};for(const je of be.methods){const at=this.findMessage(je.input.typeName),Ut=this.findMessage(je.output.typeName);(0,a.hu)(at,`message "${je.input.typeName}" for ${je.toString()} not found`),(0,a.hu)(Ut,`output message "${je.output.typeName}" for ${je.toString()} not found`),De[(0,l.r1)(je)]={name:je.name,I:at,O:Ut,kind:je.methodKind,idempotency:je.idempotency}}return he[pe]={typeName:be.typeName,methods:De}}}}function on(_,c){switch(_.fieldKind){case"map":return Dn(_,c);case"message":return $n(_,c);case"enum":{const T=Xn(_,c);return T.default=_.getDefaultValue(),T}case"scalar":{const T=kn(_);return T.default=_.getDefaultValue(),T}}}function Dn(_,c){const T={kind:"map",no:_.number,name:_.name,jsonName:_.jsonName,K:_.mapKey};if(_.mapValue.message){const W=c.findMessage(_.mapValue.message.typeName);return(0,a.hu)(W,`message "${_.mapValue.message.typeName}" for ${_.toString()} not found`),Object.assign(Object.assign({},T),{V:{kind:"message",T:W}})}if(_.mapValue.enum){const W=c.findEnum(_.mapValue.enum.typeName);return(0,a.hu)(W,`enum "${_.mapValue.enum.typeName}" for ${_.toString()} not found`),Object.assign(Object.assign({},T),{V:{kind:"enum",T:W}})}return Object.assign(Object.assign({},T),{V:{kind:"scalar",T:_.mapValue.scalar}})}function kn(_){const c=_.longType==i.p.STRING?{L:i.p.STRING}:{},T=Object.assign({kind:"scalar",no:_.number,name:_.name,jsonName:_.jsonName,T:_.scalar},c);return _.repeated?Object.assign(Object.assign({},T),{repeated:!0,packed:_.packed,oneof:void 0,T:_.scalar}):_.oneof?Object.assign(Object.assign({},T),{oneof:_.oneof.name}):_.optional?Object.assign(Object.assign({},T),{opt:!0}):T}function $n(_,c){const T=c.findMessage(_.message.typeName);(0,a.hu)(T,`message "${_.message.typeName}" for ${_.toString()} not found`);const W={kind:"message",no:_.number,name:_.name,jsonName:_.jsonName,T,delimited:_.proto.type==Se.GROUP};return _.repeated?Object.assign(Object.assign({},W),{repeated:!0,packed:_.packed,oneof:void 0}):_.oneof?Object.assign(Object.assign({},W),{oneof:_.oneof.name}):_.optional?Object.assign(Object.assign({},W),{opt:!0}):W}function Xn(_,c){const T=c.findEnum(_.enum.typeName);(0,a.hu)(T,`enum "${_.enum.typeName}" for ${_.toString()} not found`);const W={kind:"enum",no:_.number,name:_.name,jsonName:_.jsonName,T};return _.repeated?Object.assign(Object.assign({},W),{repeated:!0,packed:_.packed,oneof:void 0}):_.oneof?Object.assign(Object.assign({},W),{oneof:_.oneof.name}):_.optional?Object.assign(Object.assign({},W),{opt:!0}):W}function Sr(_){if(!(_ instanceof q.v))return _;const c=_.getType(),T={};for(const W of c.fields.byMember()){const ne=_[W.localName];let he;if(W.repeated)he=ne.map(pe=>Rn(pe));else if(W.kind=="map"){he={};for(const[pe,Ae]of Object.entries(ne))he[pe]=Rn(Ae)}else W.kind=="oneof"?he=W.findField(ne.case)?{case:ne.case,value:Rn(ne.value)}:{case:void 0}:he=Rn(ne);T[W.localName]=he}return T}function Rn(_){if(_===void 0)return _;if(_ instanceof q.v)return Sr(_);if(_ instanceof Uint8Array){const c=new Uint8Array(_.byteLength);return c.set(_),c}return _}class On extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new On().fromBinary(c,T)}static fromJson(c,T){return new On().fromJson(c,T)}static fromJsonString(c,T){return new On().fromJsonString(c,T)}static equals(c,T){return p.util.equals(On,c,T)}}On.runtime=p,On.typeName="google.protobuf.compiler.Version",On.fields=p.util.newFieldList(()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]);class Nn extends q.v{constructor(c){super(),this.fileToGenerate=[],this.protoFile=[],this.sourceFileDescriptors=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new Nn().fromBinary(c,T)}static fromJson(c,T){return new Nn().fromJson(c,T)}static fromJsonString(c,T){return new Nn().fromJsonString(c,T)}static equals(c,T){return p.util.equals(Nn,c,T)}}Nn.runtime=p,Nn.typeName="google.protobuf.compiler.CodeGeneratorRequest",Nn.fields=p.util.newFieldList(()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:re,repeated:!0},{no:17,name:"source_file_descriptors",kind:"message",T:re,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:On,opt:!0}]);class en extends q.v{constructor(c){super(),this.file=[],p.util.initPartial(c,this)}static fromBinary(c,T){return new en().fromBinary(c,T)}static fromJson(c,T){return new en().fromJson(c,T)}static fromJsonString(c,T){return new en().fromJsonString(c,T)}static equals(c,T){return p.util.equals(en,c,T)}}en.runtime=p,en.typeName="google.protobuf.compiler.CodeGeneratorResponse",en.fields=p.util.newFieldList(()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:En,repeated:!0}]);var Zn;(function(_){_[_.NONE=0]="NONE",_[_.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL",_[_.SUPPORTS_EDITIONS=2]="SUPPORTS_EDITIONS"})(Zn||(Zn={})),p.util.setEnumType(Zn,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"},{no:2,name:"FEATURE_SUPPORTS_EDITIONS"}]);class En extends q.v{constructor(c){super(),p.util.initPartial(c,this)}static fromBinary(c,T){return new En().fromBinary(c,T)}static fromJson(c,T){return new En().fromJson(c,T)}static fromJsonString(c,T){return new En().fromJsonString(c,T)}static equals(c,T){return p.util.equals(En,c,T)}}En.runtime=p,En.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",En.fields=p.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:un,opt:!0}]);class In extends q.v{constructor(c){super(),this.fileName="",m.w.util.initPartial(c,this)}static fromBinary(c,T){return new In().fromBinary(c,T)}static fromJson(c,T){return new In().fromJson(c,T)}static fromJsonString(c,T){return new In().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(In,c,T)}}In.runtime=m.w,In.typeName="google.protobuf.SourceContext",In.fields=m.w.util.newFieldList(()=>[{no:1,name:"file_name",kind:"scalar",T:9}]);var xn;(function(_){_[_.PROTO2=0]="PROTO2",_[_.PROTO3=1]="PROTO3",_[_.EDITIONS=2]="EDITIONS"})(xn||(xn={})),m.w.util.setEnumType(xn,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"},{no:2,name:"SYNTAX_EDITIONS"}]);class hn extends q.v{constructor(c){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=xn.PROTO2,this.edition="",m.w.util.initPartial(c,this)}static fromBinary(c,T){return new hn().fromBinary(c,T)}static fromJson(c,T){return new hn().fromJson(c,T)}static fromJsonString(c,T){return new hn().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(hn,c,T)}}hn.runtime=m.w,hn.typeName="google.protobuf.Type",hn.fields=m.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:Sn,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:dn,repeated:!0},{no:5,name:"source_context",kind:"message",T:In},{no:6,name:"syntax",kind:"enum",T:m.w.getEnumType(xn)},{no:7,name:"edition",kind:"scalar",T:9}]);class Sn extends q.v{constructor(c){super(),this.kind=fr.TYPE_UNKNOWN,this.cardinality=hr.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",m.w.util.initPartial(c,this)}static fromBinary(c,T){return new Sn().fromBinary(c,T)}static fromJson(c,T){return new Sn().fromJson(c,T)}static fromJsonString(c,T){return new Sn().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Sn,c,T)}}Sn.runtime=m.w,Sn.typeName="google.protobuf.Field",Sn.fields=m.w.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:m.w.getEnumType(fr)},{no:2,name:"cardinality",kind:"enum",T:m.w.getEnumType(hr)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:dn,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}]);var fr;(function(_){_[_.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",_[_.TYPE_DOUBLE=1]="TYPE_DOUBLE",_[_.TYPE_FLOAT=2]="TYPE_FLOAT",_[_.TYPE_INT64=3]="TYPE_INT64",_[_.TYPE_UINT64=4]="TYPE_UINT64",_[_.TYPE_INT32=5]="TYPE_INT32",_[_.TYPE_FIXED64=6]="TYPE_FIXED64",_[_.TYPE_FIXED32=7]="TYPE_FIXED32",_[_.TYPE_BOOL=8]="TYPE_BOOL",_[_.TYPE_STRING=9]="TYPE_STRING",_[_.TYPE_GROUP=10]="TYPE_GROUP",_[_.TYPE_MESSAGE=11]="TYPE_MESSAGE",_[_.TYPE_BYTES=12]="TYPE_BYTES",_[_.TYPE_UINT32=13]="TYPE_UINT32",_[_.TYPE_ENUM=14]="TYPE_ENUM",_[_.TYPE_SFIXED32=15]="TYPE_SFIXED32",_[_.TYPE_SFIXED64=16]="TYPE_SFIXED64",_[_.TYPE_SINT32=17]="TYPE_SINT32",_[_.TYPE_SINT64=18]="TYPE_SINT64"})(fr||(fr={})),m.w.util.setEnumType(fr,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var hr;(function(_){_[_.UNKNOWN=0]="UNKNOWN",_[_.OPTIONAL=1]="OPTIONAL",_[_.REQUIRED=2]="REQUIRED",_[_.REPEATED=3]="REPEATED"})(hr||(hr={})),m.w.util.setEnumType(hr,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class kt extends q.v{constructor(c){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=xn.PROTO2,this.edition="",m.w.util.initPartial(c,this)}static fromBinary(c,T){return new kt().fromBinary(c,T)}static fromJson(c,T){return new kt().fromJson(c,T)}static fromJsonString(c,T){return new kt().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(kt,c,T)}}kt.runtime=m.w,kt.typeName="google.protobuf.Enum",kt.fields=m.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:Cn,repeated:!0},{no:3,name:"options",kind:"message",T:dn,repeated:!0},{no:4,name:"source_context",kind:"message",T:In},{no:5,name:"syntax",kind:"enum",T:m.w.getEnumType(xn)},{no:6,name:"edition",kind:"scalar",T:9}]);class Cn extends q.v{constructor(c){super(),this.name="",this.number=0,this.options=[],m.w.util.initPartial(c,this)}static fromBinary(c,T){return new Cn().fromBinary(c,T)}static fromJson(c,T){return new Cn().fromJson(c,T)}static fromJsonString(c,T){return new Cn().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Cn,c,T)}}Cn.runtime=m.w,Cn.typeName="google.protobuf.EnumValue",Cn.fields=m.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:dn,repeated:!0}]);class dn extends q.v{constructor(c){super(),this.name="",m.w.util.initPartial(c,this)}static fromBinary(c,T){return new dn().fromBinary(c,T)}static fromJson(c,T){return new dn().fromJson(c,T)}static fromJsonString(c,T){return new dn().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(dn,c,T)}}dn.runtime=m.w,dn.typeName="google.protobuf.Option",dn.fields=m.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:_n.I}]);class Ln extends q.v{constructor(c){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=xn.PROTO2,m.w.util.initPartial(c,this)}static fromBinary(c,T){return new Ln().fromBinary(c,T)}static fromJson(c,T){return new Ln().fromJson(c,T)}static fromJsonString(c,T){return new Ln().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Ln,c,T)}}Ln.runtime=m.w,Ln.typeName="google.protobuf.Api",Ln.fields=m.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:Pn,repeated:!0},{no:3,name:"options",kind:"message",T:dn,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:In},{no:6,name:"mixins",kind:"message",T:Mn,repeated:!0},{no:7,name:"syntax",kind:"enum",T:m.w.getEnumType(xn)}]);class Pn extends q.v{constructor(c){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=xn.PROTO2,m.w.util.initPartial(c,this)}static fromBinary(c,T){return new Pn().fromBinary(c,T)}static fromJson(c,T){return new Pn().fromJson(c,T)}static fromJsonString(c,T){return new Pn().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Pn,c,T)}}Pn.runtime=m.w,Pn.typeName="google.protobuf.Method",Pn.fields=m.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:dn,repeated:!0},{no:7,name:"syntax",kind:"enum",T:m.w.getEnumType(xn)}]);class Mn extends q.v{constructor(c){super(),this.name="",this.root="",m.w.util.initPartial(c,this)}static fromBinary(c,T){return new Mn().fromBinary(c,T)}static fromJson(c,T){return new Mn().fromJson(c,T)}static fromJsonString(c,T){return new Mn().fromJsonString(c,T)}static equals(c,T){return m.w.util.equals(Mn,c,T)}}Mn.runtime=m.w,Mn.typeName="google.protobuf.Mixin",Mn.fields=m.w.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}])},561:(D,E,b)=>{b.d(E,{v:()=>m});class m{equals(i){return this.getType().runtime.util.equals(this.getType(),this,i)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(i,u){const o=this.getType(),y=o.runtime.bin,v=y.makeReadOptions(u);return y.readMessage(this,v.readerFactory(i),i.byteLength,v),this}fromJson(i,u){const o=this.getType(),y=o.runtime.json,v=y.makeReadOptions(u);return y.readMessage(o,i,v,this),this}fromJsonString(i,u){let o;try{o=JSON.parse(i)}catch(y){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${y instanceof Error?y.message:String(y)}`)}return this.fromJson(o,u)}toBinary(i){const u=this.getType(),o=u.runtime.bin,y=o.makeWriteOptions(i),v=y.writerFactory();return o.writeMessage(this,v,y),v.finish()}toJson(i){const u=this.getType(),o=u.runtime.json,y=o.makeWriteOptions(i);return o.writeMessage(this,y)}toJsonString(i){var u;const o=this.toJson(i);return JSON.stringify(o,null,(u=i==null?void 0:i.prettySpaces)!==null&&u!==void 0?u:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}},120:(D,E,b)=>{b.d(E,{E_:()=>l,fp:()=>h,hu:()=>m,ug:()=>v});function m(r,a){if(!r)throw new Error(a)}const w=34028234663852886e22,i=-34028234663852886e22,u=4294967295,o=2147483647,y=-2147483648;function v(r){if(typeof r!="number")throw new Error("invalid int 32: "+typeof r);if(!Number.isInteger(r)||r>o||r<y)throw new Error("invalid int 32: "+r)}function h(r){if(typeof r!="number")throw new Error("invalid uint 32: "+typeof r);if(!Number.isInteger(r)||r>u||r<0)throw new Error("invalid uint 32: "+r)}function l(r){if(typeof r!="number")throw new Error("invalid float 32: "+typeof r);if(!!Number.isFinite(r)&&(r>w||r<i))throw new Error("invalid float 32: "+r)}},744:(D,E,b)=>{b.d(E,{Jj:()=>x,NN:()=>S,gQ:()=>k,gY:()=>s,oQ:()=>A});var m=b(79),w=b(561),i=b(465),u=b(432),o=b(781),y=b(120);const v=Symbol("@bufbuild/protobuf/unknown-fields"),h={readUnknownFields:!0,readerFactory:I=>new m.oP(I)},l={writeUnknownFields:!0,writerFactory:()=>new m.Lt};function r(I){return I?Object.assign(Object.assign({},h),I):h}function a(I){return I?Object.assign(Object.assign({},l),I):l}function s(){return{makeReadOptions:r,makeWriteOptions:a,listUnknownFields(I){var C;return(C=I[v])!==null&&C!==void 0?C:[]},discardUnknownFields(I){delete I[v]},writeUnknownFields(I,C){const J=I[v];if(J)for(const z of J)C.tag(z.no,z.wireType).raw(z.data)},onUnknownField(I,C,L,J){const z=I;Array.isArray(z[v])||(z[v]=[]),z[v].push({no:C,wireType:L,data:J})},readMessage(I,C,L,J,z){const ee=I.getType(),X=z?C.len:C.pos+L;let q,B;for(;C.pos<X&&([q,B]=C.tag(),B!=m.TD.EndGroup);){const $=ee.fields.find(q);if(!$){const V=C.skip(B);J.readUnknownFields&&this.onUnknownField(I,q,B,V);continue}let U=I,re=$.repeated,Q=$.localName;switch($.oneof&&(U=U[$.oneof.localName],U.case!=Q&&delete U.value,U.case=Q,Q="value"),$.kind){case"scalar":case"enum":const V=$.kind=="enum"?i.w.INT32:$.T;let G=N;if($.kind=="scalar"&&$.L>0&&(G=O),re){let Oe=U[Q];if(B==m.TD.LengthDelimited&&V!=i.w.STRING&&V!=i.w.BYTES){let Se=C.uint32()+C.pos;for(;C.pos<Se;)Oe.push(G(C,V))}else Oe.push(G(C,V))}else U[Q]=G(C,V);break;case"message":const ie=$.T;re?U[Q].push(d(C,new ie,J,$)):U[Q]instanceof w.v?d(C,U[Q],J,$):(U[Q]=d(C,new ie,J,$),ie.fieldWrapper&&!$.oneof&&!$.repeated&&(U[Q]=ie.fieldWrapper.unwrapField(U[Q])));break;case"map":let[le,ve]=p($,C,J);U[Q][le]=ve;break}}if(z&&(B!=m.TD.EndGroup||q!==L))throw new Error("invalid end group tag")}}}function d(I,C,L,J){const z=C.getType().runtime.bin,ee=J==null?void 0:J.delimited;return z.readMessage(C,I,ee?J==null?void 0:J.no:I.uint32(),L,ee),C}function p(I,C,L){const J=C.uint32(),z=C.pos+J;let ee,X;for(;C.pos<z;){let[q]=C.tag();switch(q){case 1:ee=N(C,I.K);break;case 2:switch(I.V.kind){case"scalar":X=N(C,I.V.T);break;case"enum":X=C.int32();break;case"message":X=d(C,new I.V.T,L,void 0);break}break}}if(ee===void 0){let q=(0,o.kY)(I.K,i.p.BIGINT);ee=I.K==i.w.BOOL?q.toString():q}if(typeof ee!="string"&&typeof ee!="number"&&(ee=ee.toString()),X===void 0)switch(I.V.kind){case"scalar":X=(0,o.kY)(I.V.T,i.p.BIGINT);break;case"enum":X=0;break;case"message":X=new I.V.T;break}return[ee,X]}function O(I,C){const L=N(I,C);return typeof L=="bigint"?L.toString():L}function N(I,C){switch(C){case i.w.STRING:return I.string();case i.w.BOOL:return I.bool();case i.w.DOUBLE:return I.double();case i.w.FLOAT:return I.float();case i.w.INT32:return I.int32();case i.w.INT64:return I.int64();case i.w.UINT64:return I.uint64();case i.w.FIXED64:return I.fixed64();case i.w.BYTES:return I.bytes();case i.w.FIXED32:return I.fixed32();case i.w.SFIXED32:return I.sfixed32();case i.w.SFIXED64:return I.sfixed64();case i.w.SINT64:return I.sint64();case i.w.UINT32:return I.uint32();case i.w.SINT32:return I.sint32()}}function k(I,C,L,J,z){I.tag(L.no,m.TD.LengthDelimited),I.fork();let ee=J;switch(L.K){case i.w.INT32:case i.w.FIXED32:case i.w.UINT32:case i.w.SFIXED32:case i.w.SINT32:ee=Number.parseInt(J);break;case i.w.BOOL:(0,y.hu)(J=="true"||J=="false"),ee=J=="true";break}switch(S(I,L.K,1,ee,!0),L.V.kind){case"scalar":S(I,L.V.T,2,z,!0);break;case"enum":S(I,i.w.INT32,2,z,!0);break;case"message":I.tag(2,m.TD.LengthDelimited).bytes(z.toBinary(C));break}I.join()}function A(I,C,L,J){if(J!==void 0){const z=(0,u.E)(L.T,J);L!=null&&L.delimited?I.tag(L.no,m.TD.StartGroup).raw(z.toBinary(C)).tag(L.no,m.TD.EndGroup):I.tag(L.no,m.TD.LengthDelimited).bytes(z.toBinary(C))}}function S(I,C,L,J,z){let[ee,X,q]=(0,o.T1)(C,J);(!q||z)&&I.tag(L,ee)[X](J)}function x(I,C,L,J){if(!J.length)return;I.tag(L,m.TD.LengthDelimited).fork();let[,z]=(0,o.T1)(C);for(let ee=0;ee<J.length;ee++)I[z](J[ee]);I.join()}},609:(D,E,b)=>{b.d(E,{V3:()=>i,be:()=>o,ut:()=>y,zg:()=>u});var m=b(120);const w=Symbol("@bufbuild/protobuf/enum-type");function i(h){const l=h[w];return(0,m.hu)(l,"missing enum type on enum object"),l}function u(h,l,r,a){h[w]=o(l,r.map(s=>({no:s.no,name:s.name,localName:h[s.no]})))}function o(h,l,r){const a=Object.create(null),s=Object.create(null),d=[];for(const p of l){const O=v(p);d.push(O),a[p.name]=O,s[p.no]=O}return{typeName:h,values:d,findName(p){return a[p]},findNumber(p){return s[p]}}}function y(h,l,r){const a={};for(const s of l){const d=v(s);a[d.localName]=d.no,a[d.no]=d.localName}return u(a,h,l),a}function v(h){return"localName"in h?h:Object.assign(Object.assign({},h),{localName:h.name})}},501:(D,E,b)=>{b.d(E,{i:()=>m});class m{constructor(i,u){this._fields=i,this._normalizer=u}findJsonName(i){if(!this.jsonNames){const u={};for(const o of this.list())u[o.jsonName]=u[o.name]=o;this.jsonNames=u}return this.jsonNames[i]}find(i){if(!this.numbers){const u={};for(const o of this.list())u[o.no]=o;this.numbers=u}return this.numbers[i]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((i,u)=>i.no-u.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const i=this.members;let u;for(const o of this.list())o.oneof?o.oneof!==u&&(u=o.oneof,i.push(u)):i.push(o)}return this.members}}},432:(D,E,b)=>{b.d(E,{E:()=>i,w:()=>u});var m=b(561),w=b(465);function i(y,v){return v instanceof m.v||!y.fieldWrapper?v:y.fieldWrapper.wrapField(v)}function u(y){if(y.fieldKind==="message"&&!y.repeated&&y.oneof==null)return o[y.message.typeName]}const o={"google.protobuf.DoubleValue":w.w.DOUBLE,"google.protobuf.FloatValue":w.w.FLOAT,"google.protobuf.Int64Value":w.w.INT64,"google.protobuf.UInt64Value":w.w.UINT64,"google.protobuf.Int32Value":w.w.INT32,"google.protobuf.UInt32Value":w.w.UINT32,"google.protobuf.BoolValue":w.w.BOOL,"google.protobuf.StringValue":w.w.STRING,"google.protobuf.BytesValue":w.w.BYTES}},215:(D,E,b)=>{b.d(E,{o:()=>i});var m=b(504),w=b(120);class i{constructor(o){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=o,this.localName=(0,m.uA)(o)}addField(o){(0,w.hu)(o.oneof===this,`field ${o.name} not one of ${this.name}`),this.fields.push(o)}findField(o){if(!this._lookup){this._lookup=Object.create(null);for(let y=0;y<this.fields.length;y++)this._lookup[this.fields[y].localName]=this.fields[y]}return this._lookup[o]}}},814:(D,E,b)=>{b.d(E,{b:()=>r});var m=b(561),w=b(465),i=b(120),u=b(210),o=b(236);const y={ignoreUnknownFields:!1},v={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function h(N){return N?Object.assign(Object.assign({},y),N):y}function l(N){return N?Object.assign(Object.assign({},v),N):v}function r(N){const k=N(p,O);return{makeReadOptions:h,makeWriteOptions:l,readMessage(A,S,x,I){if(S==null||Array.isArray(S)||typeof S!="object")throw new Error(`cannot decode message ${A.typeName} from JSON: ${this.debug(S)}`);I=I!=null?I:new A;const C={};for(const[L,J]of Object.entries(S)){const z=A.fields.findJsonName(L);if(!z){if(!x.ignoreUnknownFields)throw new Error(`cannot decode message ${A.typeName} from JSON: key "${L}" is unknown`);continue}let ee=z.localName,X=I;if(z.oneof){if(J===null&&z.kind=="scalar")continue;const q=C[z.oneof.localName];if(q)throw new Error(`cannot decode message ${A.typeName} from JSON: multiple keys for oneof "${z.oneof.name}" present: "${q}", "${L}"`);C[z.oneof.localName]=L,X=X[z.oneof.localName]={case:ee},ee="value"}if(z.repeated){if(J===null)continue;if(!Array.isArray(J))throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`);const q=X[ee];for(const B of J){if(B===null)throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(B)}`);let $;switch(z.kind){case"message":$=z.T.fromJson(B,x);break;case"enum":if($=d(z.T,B,x.ignoreUnknownFields),$===void 0)continue;break;case"scalar":try{$=s(z.T,B,z.L)}catch(U){let re=`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(B)}`;throw U instanceof Error&&U.message.length>0&&(re+=`: ${U.message}`),new Error(re)}break}q.push($)}}else if(z.kind=="map"){if(J===null)continue;if(Array.isArray(J)||typeof J!="object")throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`);const q=X[ee];for(const[B,$]of Object.entries(J)){if($===null)throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: map value null`);let U;switch(z.V.kind){case"message":U=z.V.T.fromJson($,x);break;case"enum":if(U=d(z.V.T,$,x.ignoreUnknownFields),U===void 0)continue;break;case"scalar":try{U=s(z.V.T,$,w.p.BIGINT)}catch(re){let Q=`cannot decode map value for field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`;throw re instanceof Error&&re.message.length>0&&(Q+=`: ${re.message}`),new Error(Q)}break}try{q[s(z.K,z.K==w.w.BOOL?B=="true"?!0:B=="false"?!1:B:B,w.p.BIGINT).toString()]=U}catch(re){let Q=`cannot decode map key for field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`;throw re instanceof Error&&re.message.length>0&&(Q+=`: ${re.message}`),new Error(Q)}}}else switch(z.kind){case"message":const q=z.T;if(J===null&&q.typeName!="google.protobuf.Value"){if(z.oneof)throw new Error(`cannot decode field ${A.typeName}.${z.name} from JSON: null is invalid for oneof field "${L}"`);continue}X[ee]instanceof m.v?X[ee].fromJson(J,x):(X[ee]=q.fromJson(J,x),q.fieldWrapper&&!z.oneof&&(X[ee]=q.fieldWrapper.unwrapField(X[ee])));break;case"enum":const B=d(z.T,J,x.ignoreUnknownFields);B!==void 0&&(X[ee]=B);break;case"scalar":try{X[ee]=s(z.T,J,z.L)}catch($){let U=`cannot decode field ${A.typeName}.${z.name} from JSON: ${this.debug(J)}`;throw $ instanceof Error&&$.message.length>0&&(U+=`: ${$.message}`),new Error(U)}break}}return I},writeMessage(A,S){const x=A.getType(),I={};let C;try{for(const L of x.fields.byMember()){let J;if(L.kind=="oneof"){const z=A[L.localName];if(z.value===void 0)continue;if(C=L.findField(z.case),!C)throw"oneof case not found: "+z.case;J=k(C,z.value,S)}else C=L,J=k(C,A[C.localName],S);J!==void 0&&(I[S.useProtoFieldName?C.name:C.jsonName]=J)}}catch(L){const J=C?`cannot encode field ${x.typeName}.${C.name} to JSON`:`cannot encode message ${x.typeName} to JSON`,z=L instanceof Error?L.message:String(L);throw new Error(J+(z.length>0?`: ${z}`:""))}return I},readScalar:s,writeScalar:O,debug:a}}function a(N){if(N===null)return"null";switch(typeof N){case"object":return Array.isArray(N)?"array":"object";case"string":return N.length>100?"string":`"${N.split('"').join('\\"')}"`;default:return String(N)}}function s(N,k,A){switch(N){case w.w.DOUBLE:case w.w.FLOAT:if(k===null)return 0;if(k==="NaN")return Number.NaN;if(k==="Infinity")return Number.POSITIVE_INFINITY;if(k==="-Infinity")return Number.NEGATIVE_INFINITY;if(k===""||typeof k=="string"&&k.trim().length!==k.length||typeof k!="string"&&typeof k!="number")break;const S=Number(k);if(Number.isNaN(S)||!Number.isFinite(S))break;return N==w.w.FLOAT&&(0,i.E_)(S),S;case w.w.INT32:case w.w.FIXED32:case w.w.SFIXED32:case w.w.SINT32:case w.w.UINT32:if(k===null)return 0;let x;if(typeof k=="number"?x=k:typeof k=="string"&&k.length>0&&k.trim().length===k.length&&(x=Number(k)),x===void 0)break;return N==w.w.UINT32?(0,i.fp)(x):(0,i.ug)(x),x;case w.w.INT64:case w.w.SFIXED64:case w.w.SINT64:if(k===null)return u.q.zero;if(typeof k!="number"&&typeof k!="string")break;const I=u.q.parse(k);return A?I.toString():I;case w.w.FIXED64:case w.w.UINT64:if(k===null)return u.q.zero;if(typeof k!="number"&&typeof k!="string")break;const C=u.q.uParse(k);return A?C.toString():C;case w.w.BOOL:if(k===null)return!1;if(typeof k!="boolean")break;return k;case w.w.STRING:if(k===null)return"";if(typeof k!="string")break;try{encodeURIComponent(k)}catch{throw new Error("invalid UTF8")}return k;case w.w.BYTES:if(k===null||k==="")return new Uint8Array(0);if(typeof k!="string")break;return o.W.dec(k)}throw new Error}function d(N,k,A){if(k===null)return 0;switch(typeof k){case"number":if(Number.isInteger(k))return k;break;case"string":const S=N.findName(k);if(S||A)return S==null?void 0:S.no;break}throw new Error(`cannot decode enum ${N.typeName} from JSON: ${a(k)}`)}function p(N,k,A,S){var x;if(k===void 0)return k;if(k===0&&!A)return;if(S)return k;if(N.typeName=="google.protobuf.NullValue")return null;const I=N.findNumber(k);return(x=I==null?void 0:I.name)!==null&&x!==void 0?x:k}function O(N,k,A){if(k!==void 0)switch(N){case w.w.INT32:case w.w.SFIXED32:case w.w.SINT32:case w.w.FIXED32:case w.w.UINT32:return(0,i.hu)(typeof k=="number"),k!=0||A?k:void 0;case w.w.FLOAT:case w.w.DOUBLE:return(0,i.hu)(typeof k=="number"),Number.isNaN(k)?"NaN":k===Number.POSITIVE_INFINITY?"Infinity":k===Number.NEGATIVE_INFINITY?"-Infinity":k!==0||A?k:void 0;case w.w.STRING:return(0,i.hu)(typeof k=="string"),k.length>0||A?k:void 0;case w.w.BOOL:return(0,i.hu)(typeof k=="boolean"),k||A?k:void 0;case w.w.UINT64:case w.w.FIXED64:case w.w.INT64:case w.w.SFIXED64:case w.w.SINT64:return(0,i.hu)(typeof k=="bigint"||typeof k=="string"||typeof k=="number"),A||k!=0?k.toString(10):void 0;case w.w.BYTES:return(0,i.hu)(k instanceof Uint8Array),A||k.byteLength>0?o.W.enc(k):void 0}}},504:(D,E,b)=>{b.d(E,{GD:()=>p,Rz:()=>w,Sm:()=>o,ll:()=>d,r1:()=>m,uA:()=>i,x1:()=>u});function m(O){switch(O.kind){case"field":return w(O.name,O.oneof!==void 0);case"oneof":return i(O.name);case"enum":case"message":case"service":{const N=O.file.proto.package,k=N===void 0?0:N.length+1,A=O.typeName.substring(k).replace(/\./g,"_");return d(p(A))}case"enum_value":{const N=O.parent.sharedPrefix;if(N===void 0)return O.name;const k=O.name.substring(N.length);return d(k)}case"rpc":{let N=O.name;return N.length==0?N:(N=N[0].toLowerCase()+N.substring(1),d(N))}}}function w(O,N){const k=v(O);return N?k:d(s(k))}function i(O){return w(O,!1)}const u=v;function o(O,N){const k=y(O)+"_";for(const A of N){if(!A.toLowerCase().startsWith(k))return;const S=A.substring(k.length);if(S.length==0||/^\d/.test(S))return}return k}function y(O){return(O.substring(0,1)+O.substring(1).replace(/[A-Z]/g,N=>"_"+N)).toLowerCase()}function v(O){let N=!1;const k=[];for(let A=0;A<O.length;A++){let S=O.charAt(A);switch(S){case"_":N=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":k.push(S),N=!1;break;default:N&&(N=!1,S=S.toUpperCase()),k.push(S);break}}return k.join("")}const h=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]),l=new Set(["constructor","toString","toJSON","valueOf"]),r=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),a=O=>`${O}$`,s=O=>r.has(O)?a(O):O,d=O=>l.has(O)?a(O):O,p=O=>h.has(O)?a(O):O},493:(D,E,b)=>{b.d(E,{F:()=>u});var m=b(609),w=b(561);function i(o,y,v,h){var l;const r=(l=h==null?void 0:h.localName)!==null&&l!==void 0?l:y.substring(y.lastIndexOf(".")+1),a={[r]:function(s){o.util.initFields(this),o.util.initPartial(s,this)}}[r];return Object.setPrototypeOf(a.prototype,new w.v),Object.assign(a,{runtime:o,typeName:y,fields:o.util.newFieldList(v),fromBinary(s,d){return new a().fromBinary(s,d)},fromJson(s,d){return new a().fromJson(s,d)},fromJsonString(s,d){return new a().fromJsonString(s,d)},equals(s,d){return o.util.equals(a,s,d)}}),a}function u(o,y,v,h){return{syntax:o,json:y,bin:v,util:h,makeMessageType(l,r,a){return i(this,l,r,a)},makeEnum:m.ut,makeEnumType:m.be,getEnumType:m.V3}}},781:(D,E,b)=>{b.d(E,{AA:()=>u,T1:()=>y,kY:()=>o});var m=b(465),w=b(79),i=b(210);function u(v,h,l){if(h===l)return!0;if(v==m.w.BYTES){if(!(h instanceof Uint8Array)||!(l instanceof Uint8Array)||h.length!==l.length)return!1;for(let r=0;r<h.length;r++)if(h[r]!==l[r])return!1;return!0}switch(v){case m.w.UINT64:case m.w.FIXED64:case m.w.INT64:case m.w.SFIXED64:case m.w.SINT64:return h==l}return!1}function o(v,h){switch(v){case m.w.BOOL:return!1;case m.w.UINT64:case m.w.FIXED64:case m.w.INT64:case m.w.SFIXED64:case m.w.SINT64:return h==0?i.q.zero:"0";case m.w.DOUBLE:case m.w.FLOAT:return 0;case m.w.BYTES:return new Uint8Array(0);case m.w.STRING:return"";default:return 0}}function y(v,h){const l=h===void 0;let r=w.TD.Varint,a=h===0;switch(v){case m.w.STRING:a=l||!h.length,r=w.TD.LengthDelimited;break;case m.w.BOOL:a=h===!1;break;case m.w.DOUBLE:r=w.TD.Bit64;break;case m.w.FLOAT:r=w.TD.Bit32;break;case m.w.INT64:a=l||h==0;break;case m.w.UINT64:a=l||h==0;break;case m.w.FIXED64:a=l||h==0,r=w.TD.Bit64;break;case m.w.BYTES:a=l||!h.byteLength,r=w.TD.LengthDelimited;break;case m.w.FIXED32:r=w.TD.Bit32;break;case m.w.SFIXED32:r=w.TD.Bit32;break;case m.w.SFIXED64:a=l||h==0,r=w.TD.Bit64;break;case m.w.SINT64:a=l||h==0;break}const s=m.w[v].toLowerCase();return[r,s,l||a]}},433:(D,E,b)=>{b.d(E,{f:()=>o});var m=b(609),w=b(561),i=b(465),u=b(781);function o(){return{setEnumType:m.zg,initPartial(h,l){if(h===void 0)return;const r=l.getType();for(const a of r.fields.byMember()){const s=a.localName,d=l,p=h;if(p[s]!==void 0)switch(a.kind){case"oneof":const O=p[s].case;if(O===void 0)continue;const N=a.findField(O);let k=p[s].value;N&&N.kind=="message"&&!(k instanceof N.T)?k=new N.T(k):N&&N.kind==="scalar"&&N.T===i.w.BYTES&&(k=v(k)),d[s]={case:O,value:k};break;case"scalar":case"enum":let A=p[s];a.T===i.w.BYTES&&(A=a.repeated?A.map(v):v(A)),d[s]=A;break;case"map":switch(a.V.kind){case"scalar":case"enum":if(a.V.T===i.w.BYTES)for(const[I,C]of Object.entries(p[s]))d[s][I]=v(C);else Object.assign(d[s],p[s]);break;case"message":const x=a.V.T;for(const I of Object.keys(p[s])){let C=p[s][I];x.fieldWrapper||(C=new x(C)),d[s][I]=C}break}break;case"message":const S=a.T;if(a.repeated)d[s]=p[s].map(x=>x instanceof S?x:new S(x));else if(p[s]!==void 0){const x=p[s];S.fieldWrapper?S.typeName==="google.protobuf.BytesValue"?d[s]=v(x):d[s]=x:d[s]=x instanceof S?x:new S(x)}break}}},equals(h,l,r){return l===r?!0:!l||!r?!1:h.fields.byMember().every(a=>{const s=l[a.localName],d=r[a.localName];if(a.repeated){if(s.length!==d.length)return!1;switch(a.kind){case"message":return s.every((p,O)=>a.T.equals(p,d[O]));case"scalar":return s.every((p,O)=>(0,u.AA)(a.T,p,d[O]));case"enum":return s.every((p,O)=>(0,u.AA)(i.w.INT32,p,d[O]))}throw new Error(`repeated cannot contain ${a.kind}`)}switch(a.kind){case"message":return a.T.equals(s,d);case"enum":return(0,u.AA)(i.w.INT32,s,d);case"scalar":return(0,u.AA)(a.T,s,d);case"oneof":if(s.case!==d.case)return!1;const p=a.findField(s.case);if(p===void 0)return!0;switch(p.kind){case"message":return p.T.equals(s.value,d.value);case"enum":return(0,u.AA)(i.w.INT32,s.value,d.value);case"scalar":return(0,u.AA)(p.T,s.value,d.value)}throw new Error(`oneof cannot contain ${p.kind}`);case"map":const O=Object.keys(s).concat(Object.keys(d));switch(a.V.kind){case"message":const N=a.V.T;return O.every(A=>N.equals(s[A],d[A]));case"enum":return O.every(A=>(0,u.AA)(i.w.INT32,s[A],d[A]));case"scalar":const k=a.V.T;return O.every(A=>(0,u.AA)(k,s[A],d[A]))}break}})},clone(h){const l=h.getType(),r=new l,a=r;for(const s of l.fields.byMember()){const d=h[s.localName];let p;if(s.repeated)p=d.map(y);else if(s.kind=="map"){p=a[s.localName];for(const[O,N]of Object.entries(d))p[O]=y(N)}else s.kind=="oneof"?p=s.findField(d.case)?{case:d.case,value:y(d.value)}:{case:void 0}:p=y(d);a[s.localName]=p}return r}}}function y(h){if(h===void 0)return h;if(h instanceof w.v)return h.clone();if(h instanceof Uint8Array){const l=new Uint8Array(h.byteLength);return l.set(h),l}return h}function v(h){return h instanceof Uint8Array?h:new Uint8Array(h)}},236:(D,E,b)=>{b.d(E,{W:()=>i});let m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),w=[];for(let u=0;u<m.length;u++)w[m[u].charCodeAt(0)]=u;w["-".charCodeAt(0)]=m.indexOf("+"),w["_".charCodeAt(0)]=m.indexOf("/");const i={dec(u){let o=u.length*3/4;u[u.length-2]=="="?o-=2:u[u.length-1]=="="&&(o-=1);let y=new Uint8Array(o),v=0,h=0,l,r=0;for(let a=0;a<u.length;a++){if(l=w[u.charCodeAt(a)],l===void 0)switch(u[a]){case"=":h=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(h){case 0:r=l,h=1;break;case 1:y[v++]=r<<2|(l&48)>>4,r=l,h=2;break;case 2:y[v++]=(r&15)<<4|(l&60)>>2,r=l,h=3;break;case 3:y[v++]=(r&3)<<6|l,h=0;break}}if(h==1)throw Error("invalid base64 string.");return y.subarray(0,v)},enc(u){let o="",y=0,v,h=0;for(let l=0;l<u.length;l++)switch(v=u[l],y){case 0:o+=m[v>>2],h=(v&3)<<4,y=1;break;case 1:o+=m[h|v>>4],h=(v&15)<<2,y=2;break;case 2:o+=m[h|v>>6],o+=m[v&63],y=0;break}return y&&(o+=m[h],o+="=",y==1&&(o+="=")),o}}},210:(D,E,b)=>{b.d(E,{q:()=>u});var m=b(120),w=b(818);function i(){const o=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof o.getBigInt64=="function"&&typeof o.getBigUint64=="function"&&typeof o.setBigInt64=="function"&&typeof o.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const l=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),a=BigInt("0"),s=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(d){const p=typeof d=="bigint"?d:BigInt(d);if(p>r||p<l)throw new Error(`int64 invalid: ${d}`);return p},uParse(d){const p=typeof d=="bigint"?d:BigInt(d);if(p>s||p<a)throw new Error(`uint64 invalid: ${d}`);return p},enc(d){return o.setBigInt64(0,this.parse(d),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},uEnc(d){return o.setBigInt64(0,this.uParse(d),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},dec(d,p){return o.setInt32(0,d,!0),o.setInt32(4,p,!0),o.getBigInt64(0,!0)},uDec(d,p){return o.setInt32(0,d,!0),o.setInt32(4,p,!0),o.getBigUint64(0,!0)}}}const v=l=>(0,m.hu)(/^-?[0-9]+$/.test(l),`int64 invalid: ${l}`),h=l=>(0,m.hu)(/^[0-9]+$/.test(l),`uint64 invalid: ${l}`);return{zero:"0",supported:!1,parse(l){return typeof l!="string"&&(l=l.toString()),v(l),l},uParse(l){return typeof l!="string"&&(l=l.toString()),h(l),l},enc(l){return typeof l!="string"&&(l=l.toString()),v(l),(0,w.CZ)(l)},uEnc(l){return typeof l!="string"&&(l=l.toString()),h(l),(0,w.CZ)(l)},dec(l,r){return(0,w.Ak)(l,r)},uDec(l,r){return(0,w.Fd)(l,r)}}}const u=i()},850:(D,E,b)=>{b.d(E,{w:()=>p});var m=b(493),w=b(465),i=b(744);function u(){return Object.assign(Object.assign({},(0,i.gY)()),{writeMessage(N,k,A){const S=N.getType();for(const x of S.fields.byNumber()){let I,C=x.repeated,L=x.localName;if(x.oneof){const J=N[x.oneof.localName];if(J.case!==L)continue;I=J.value}else I=N[L];switch(x.kind){case"scalar":case"enum":let J=x.kind=="enum"?w.w.INT32:x.T;if(C)if(x.packed)(0,i.Jj)(k,J,x.no,I);else for(const z of I)(0,i.NN)(k,J,x.no,z,!0);else I!==void 0&&(0,i.NN)(k,J,x.no,I,!!x.oneof||x.opt);break;case"message":if(C)for(const z of I)(0,i.oQ)(k,A,x,z);else(0,i.oQ)(k,A,x,I);break;case"map":for(const[z,ee]of Object.entries(I))(0,i.gQ)(k,A,x,z,ee);break}}return A.writeUnknownFields&&this.writeUnknownFields(N,k),k}})}var o=b(432),y=b(120),v=b(814);function h(){return(0,v.b)((N,k)=>function(S,x,I){if(S.kind=="map"){const C={};switch(S.V.kind){case"scalar":for(const[J,z]of Object.entries(x)){const ee=k(S.V.T,z,!0);(0,y.hu)(ee!==void 0),C[J.toString()]=ee}break;case"message":for(const[J,z]of Object.entries(x))C[J.toString()]=z.toJson(I);break;case"enum":const L=S.V.T;for(const[J,z]of Object.entries(x)){(0,y.hu)(z===void 0||typeof z=="number");const ee=N(L,z,!0,I.enumAsInteger);(0,y.hu)(ee!==void 0),C[J.toString()]=ee}break}return I.emitDefaultValues||Object.keys(C).length>0?C:void 0}else if(S.repeated){const C=[];switch(S.kind){case"scalar":for(let L=0;L<x.length;L++)C.push(k(S.T,x[L],!0));break;case"enum":for(let L=0;L<x.length;L++)C.push(N(S.T,x[L],!0,I.enumAsInteger));break;case"message":for(let L=0;L<x.length;L++)C.push((0,o.E)(S.T,x[L]).toJson(I));break}return I.emitDefaultValues||C.length>0?C:void 0}else switch(S.kind){case"scalar":return k(S.T,x,!!S.oneof||S.opt||I.emitDefaultValues);case"enum":return N(S.T,x,!!S.oneof||S.opt||I.emitDefaultValues,I.enumAsInteger);case"message":return x!==void 0?(0,o.E)(S.T,x).toJson(I):void 0}})}var l=b(433),r=b(501),a=b(781),s=b(215),d=b(504);const p=(0,m.F)("proto3",h(),u(),Object.assign(Object.assign({},(0,l.f)()),{newFieldList(N){return new r.i(N,O)},initFields(N){for(const k of N.getType().fields.byMember()){if(k.opt)continue;const A=k.localName,S=N;if(k.repeated){S[A]=[];continue}switch(k.kind){case"oneof":S[A]={case:void 0};break;case"enum":S[A]=0;break;case"map":S[A]={};break;case"scalar":S[A]=(0,a.kY)(k.T,k.L);break}}}}));function O(N){var k,A,S,x;const I=[];let C;for(const L of typeof N=="function"?N():N){const J=L;if(J.localName=(0,d.Rz)(L.name,L.oneof!==void 0),J.jsonName=(k=L.jsonName)!==null&&k!==void 0?k:(0,d.x1)(L.name),J.repeated=(A=L.repeated)!==null&&A!==void 0?A:!1,L.kind=="scalar"&&(J.L=(S=L.L)!==null&&S!==void 0?S:w.p.BIGINT),L.oneof!==void 0){const z=typeof L.oneof=="string"?L.oneof:L.oneof.name;(!C||C.name!=z)&&(C=new s.o(z)),J.oneof=C,C.addField(J)}L.kind=="message"&&(J.delimited=!1),J.packed=(x=L.packed)!==null&&x!==void 0?x:L.kind=="enum"||L.kind=="scalar"&&L.T!=w.w.BYTES&&L.T!=w.w.STRING,I.push(J)}return I}},328:(D,E,b)=>{b.d(E,{t:()=>m,w:()=>w});var m;(function(i){i[i.Unary=0]="Unary",i[i.ServerStreaming=1]="ServerStreaming",i[i.ClientStreaming=2]="ClientStreaming",i[i.BiDiStreaming=3]="BiDiStreaming"})(m||(m={}));var w;(function(i){i[i.NoSideEffects=1]="NoSideEffects",i[i.Idempotent=2]="Idempotent"})(w||(w={}))}},M={};function R(D){var E=M[D];if(E!==void 0)return E.exports;var b=M[D]={exports:{}};return Y[D](b,b.exports,R),b.exports}R.d=(D,E)=>{for(var b in E)R.o(E,b)&&!R.o(D,b)&&Object.defineProperty(D,b,{enumerable:!0,get:E[b]})},R.o=(D,E)=>Object.prototype.hasOwnProperty.call(D,E),R.r=D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})};var F={};return(()=>{R.r(F),R.d(F,{Change:()=>br,Client:()=>Li,ClientEventType:()=>Fn,ClientStatus:()=>gr,Counter:()=>Hr,DocEventType:()=>_t,Document:()=>Ri,DocumentSyncResultType:()=>Dr,Primitive:()=>Ct,StreamConnectionStatus:()=>wr,SyncMode:()=>lr,Text:()=>Yr,TimeTicket:()=>Ot,Tree:()=>Gr,converter:()=>er,default:()=>Fo});var D;(function(f){f[f.Trivial=0]="Trivial",f[f.Debug=1]="Debug",f[f.Info=2]="Info",f[f.Warn=3]="Warn",f[f.Error=4]="Error",f[f.Fatal=5]="Fatal"})(D||(D={}));let E=D.Info;const b={trivial:(...f)=>{E>D.Trivial||typeof console<"u"&&console.log("YORKIE T:",...f)},debug:(...f)=>{E>D.Debug||typeof console<"u"&&console.log("YORKIE D:",...f)},info:(...f)=>{E>D.Info||typeof console<"u"&&console.log("YORKIE I:",...f)},warn:(...f)=>{E>D.Warn||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...f):console.log("YORKIE W:",...f))},error:(...f)=>{E>D.Error||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...f):console.log("YORKIE E:",...f))},fatal:(f,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${f}`)},isEnabled:f=>E<=f};function m(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,f=>{const e=Math.random()*16|0;return(f==="x"?e:e&3|8).toString(16)})}const w=()=>{};class i{constructor(e){this.finalized=!1,this.observers=[];try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let g;e||b.fatal("missing observer"),this.finalized&&b.fatal("observable is finalized due to previous error"),typeof e=="object"?g=e:g={next:e,error:t,complete:n},g.next===void 0&&(g.next=w),g.error===void 0&&(g.error=w),g.complete===void 0&&(g.complete=w);const P=m(),j=this.unsubscribeOne.bind(this,P);if(this.observers.push({subscriptionID:P,observer:g}),this.finalized)try{this.finalError?g.error(this.finalError):g.complete()}catch(K){b.warn(K)}return j}unsubscribeOne(e){var t;this.observers=(t=this.observers)===null||t===void 0?void 0:t.filter(n=>n.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(n){b.error(n)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function u(f){const e=new i(f);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}var o=R(328);function y(f,e){const t={};for(const[n,g]of Object.entries(f.methods)){const P=e(Object.assign(Object.assign({},g),{localName:n,service:f}));P!=null&&(t[n]=P)}return t}var v;(function(f){f[f.Canceled=1]="Canceled",f[f.Unknown=2]="Unknown",f[f.InvalidArgument=3]="InvalidArgument",f[f.DeadlineExceeded=4]="DeadlineExceeded",f[f.NotFound=5]="NotFound",f[f.AlreadyExists=6]="AlreadyExists",f[f.PermissionDenied=7]="PermissionDenied",f[f.ResourceExhausted=8]="ResourceExhausted",f[f.FailedPrecondition=9]="FailedPrecondition",f[f.Aborted=10]="Aborted",f[f.OutOfRange=11]="OutOfRange",f[f.Unimplemented=12]="Unimplemented",f[f.Internal=13]="Internal",f[f.Unavailable=14]="Unavailable",f[f.DataLoss=15]="DataLoss",f[f.Unauthenticated=16]="Unauthenticated"})(v||(v={}));var h=R(561);function l(f){const e=v[f];return typeof e!="string"?f.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class r extends Error{constructor(e,t=v.Unknown,n,g,P){super(a(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(n!=null?n:{}),this.details=g!=null?g:[],this.cause=P}static from(e,t=v.Unknown){return e instanceof r?e:e instanceof Error?e.name=="AbortError"?new r(e.message,v.Canceled):new r(e.message,t,void 0,void 0,e):new r(String(e),t,void 0,void 0,e)}findDetails(e){const t="typeName"in e?{findMessage:g=>g===e.typeName?e:void 0}:e,n=[];for(const g of this.details){if(g instanceof h.v){t.findMessage(g.getType().typeName)&&n.push(g);continue}const P=t.findMessage(g.type);if(P)try{n.push(P.fromBinary(g.value))}catch{}}return n}}function a(f,e){return f.length?`[${l(e)}] ${f}`:`[${l(e)}]`}var s=function(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=f[Symbol.asyncIterator],t;return e?e.call(f):(f=typeof __values=="function"?__values(f):f[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(P){t[P]=f[P]&&function(j){return new Promise(function(K,ae){j=f[P](j),g(K,ae,j.done,j.value)})}}function g(P,j,K,ae){Promise.resolve(ae).then(function(ye){P({value:ye,done:K})},j)}},d=function(f){return this instanceof d?(this.v=f,this):new d(f)},p=function(f,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(f,e||[]),g,P=[];return g={},j("next"),j("throw"),j("return"),g[Symbol.asyncIterator]=function(){return this},g;function j(ke){n[ke]&&(g[ke]=function(Ze){return new Promise(function(mt,bt){P.push([ke,Ze,mt,bt])>1||K(ke,Ze)})})}function K(ke,Ze){try{ae(n[ke](Ze))}catch(mt){qe(P[0][3],mt)}}function ae(ke){ke.value instanceof d?Promise.resolve(ke.value.v).then(ye,Re):qe(P[0][2],ke)}function ye(ke){K("next",ke)}function Re(ke){K("throw",ke)}function qe(ke,Ze){ke(Ze),P.shift(),P.length&&K(P[0][0],P[0][1])}},O=function(f){var e,t;return e={},n("next"),n("throw",function(g){throw g}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(g,P){e[g]=f[g]?function(j){return(t=!t)?{value:d(f[g](j)),done:!1}:P?P(j):j}:P}};function N(f){return p(this,arguments,function*(){yield d(yield*O(s(f)))})}var k=function(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=f[Symbol.asyncIterator],t;return e?e.call(f):(f=typeof __values=="function"?__values(f):f[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(P){t[P]=f[P]&&function(j){return new Promise(function(K,ae){j=f[P](j),g(K,ae,j.done,j.value)})}}function g(P,j,K,ae){Promise.resolve(ae).then(function(ye){P({value:ye,done:K})},j)}},A=function(f){return this instanceof A?(this.v=f,this):new A(f)},S=function(f){var e,t;return e={},n("next"),n("throw",function(g){throw g}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(g,P){e[g]=f[g]?function(j){return(t=!t)?{value:A(f[g](j)),done:!1}:P?P(j):j}:P}},x=function(f,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(f,e||[]),g,P=[];return g={},j("next"),j("throw"),j("return"),g[Symbol.asyncIterator]=function(){return this},g;function j(ke){n[ke]&&(g[ke]=function(Ze){return new Promise(function(mt,bt){P.push([ke,Ze,mt,bt])>1||K(ke,Ze)})})}function K(ke,Ze){try{ae(n[ke](Ze))}catch(mt){qe(P[0][3],mt)}}function ae(ke){ke.value instanceof A?Promise.resolve(ke.value.v).then(ye,Re):qe(P[0][2],ke)}function ye(ke){K("next",ke)}function Re(ke){K("throw",ke)}function qe(ke,Ze){ke(Ze),P.shift(),P.length&&K(P[0][0],P[0][1])}};function I(f,e){return y(f,t=>{switch(t.kind){case o.t.Unary:return C(e,f,t);case o.t.ServerStreaming:return L(e,f,t);case o.t.ClientStreaming:return J(e,f,t);case o.t.BiDiStreaming:return z(e,f,t);default:return null}})}function C(f,e,t){return async function(n,g){var P,j;const K=await f.unary(e,t,g==null?void 0:g.signal,g==null?void 0:g.timeoutMs,g==null?void 0:g.headers,n,g==null?void 0:g.contextValues);return(P=g==null?void 0:g.onHeader)===null||P===void 0||P.call(g,K.header),(j=g==null?void 0:g.onTrailer)===null||j===void 0||j.call(g,K.trailer),K.message}}function L(f,e,t){return function(n,g){return ee(f.stream(e,t,g==null?void 0:g.signal,g==null?void 0:g.timeoutMs,g==null?void 0:g.headers,N([n]),g==null?void 0:g.contextValues),g)}}function J(f,e,t){return async function(n,g){var P,j,K,ae,ye,Re;const qe=await f.stream(e,t,g==null?void 0:g.signal,g==null?void 0:g.timeoutMs,g==null?void 0:g.headers,n,g==null?void 0:g.contextValues);(ye=g==null?void 0:g.onHeader)===null||ye===void 0||ye.call(g,qe.header);let ke;try{for(var Ze=!0,mt=k(qe.message),bt;bt=await mt.next(),P=bt.done,!P;Ze=!0)ae=bt.value,Ze=!1,ke=ae}catch(Pt){j={error:Pt}}finally{try{!Ze&&!P&&(K=mt.return)&&await K.call(mt)}finally{if(j)throw j.error}}if(!ke)throw new r("protocol error: missing response message",v.Internal);return(Re=g==null?void 0:g.onTrailer)===null||Re===void 0||Re.call(g,qe.trailer),ke}}function z(f,e,t){return function(n,g){return ee(f.stream(e,t,g==null?void 0:g.signal,g==null?void 0:g.timeoutMs,g==null?void 0:g.headers,n,g==null?void 0:g.contextValues),g)}}function ee(f,e){const t=function(){var n,g;return x(this,arguments,function*(){const P=yield A(f);(n=e==null?void 0:e.onHeader)===null||n===void 0||n.call(e,P.header),yield A(yield*S(k(P.message))),(g=e==null?void 0:e.onTrailer)===null||g===void 0||g.call(e,P.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function X(){return{get(f){return f.id in this?this[f.id]:f.defaultValue},set(f,e){return this[f.id]=e,this},delete(f){return delete this[f.id],this}}}function q(f){var e;const t=Object.assign({},f);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function B(f,e,t,n){const g=e?$(f.I,n):U(f.I,t);return{parse:(e?$(f.O,n):U(f.O,t)).parse,serialize:g.serialize}}function $(f,e){return{parse(t){try{return f.fromBinary(t,e)}catch(n){const g=n instanceof Error?n.message:String(n);throw new r(`parse binary: ${g}`,v.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(n){const g=n instanceof Error?n.message:String(n);throw new r(`serialize binary: ${g}`,v.Internal)}}}}function U(f,e){var t,n;const g=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,P=(n=e==null?void 0:e.textDecoder)!==null&&n!==void 0?n:new TextDecoder,j=q(e);return{parse(K){try{const ae=P.decode(K);return f.fromJsonString(ae,j)}catch(ae){throw r.from(ae,v.InvalidArgument)}},serialize(K){try{const ae=K.toJsonString(j);return g.encode(ae)}catch(ae){throw r.from(ae,v.Internal)}}}}function re(...f){const e=new AbortController,t=f.filter(g=>g!==void 0).concat(e.signal);for(const g of t){if(g.aborted){n.apply(g);break}g.addEventListener("abort",n)}function n(){e.signal.aborted||e.abort(V(this));for(const g of t)g.removeEventListener("abort",n)}return e}function Q(f){const e=new AbortController,t=()=>{e.abort(new r("the operation timed out",v.DeadlineExceeded))};let n;return f!==void 0&&(f<=0?t():n=setTimeout(t,f)),{signal:e.signal,cleanup:()=>clearTimeout(n)}}function V(f){if(!f.aborted)return;if(f.reason!==void 0)return f.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function G(f,e){return e instanceof h.v?e:new f(e)}function ie(f,e){function t(n){return n.done===!0?n:{done:n.done,value:G(f,n.value)}}return{[Symbol.asyncIterator](){const n=e[Symbol.asyncIterator](),g={next:()=>n.next().then(t)};return n.throw!==void 0&&(g.throw=P=>n.throw(P).then(t)),n.return!==void 0&&(g.return=P=>n.return(P).then(t)),g}}}function le(f){const e=Se(f.next,f.interceptors),[t,n,g]=Oe(f),P=Object.assign(Object.assign({},f.req),{message:G(f.req.method.I,f.req.message),signal:t});return e(P).then(j=>(g(),j),n)}function ve(f){const e=Se(f.next,f.interceptors),[t,n,g]=Oe(f),P=Object.assign(Object.assign({},f.req),{message:ie(f.req.method.I,f.req.message),signal:t});let j=!1;return t.addEventListener("abort",function(){var K,ae;const ye=f.req.message[Symbol.asyncIterator]();j||(K=ye.throw)===null||K===void 0||K.call(ye,this.reason).catch(()=>{}),(ae=ye.return)===null||ae===void 0||ae.call(ye).catch(()=>{})}),e(P).then(K=>Object.assign(Object.assign({},K),{message:{[Symbol.asyncIterator](){const ae=K.message[Symbol.asyncIterator]();return{next(){return ae.next().then(ye=>(ye.done==!0&&(j=!0,g()),ye),n)}}}}}),n)}function Oe(f){const{signal:e,cleanup:t}=Q(f.timeoutMs),n=re(f.signal,e);return[n.signal,function(P){const j=r.from(e.aborted?V(e):P);return n.abort(j),t(),Promise.reject(j)},function(){t(),n.abort()}]}function Se(f,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((n,g)=>g(n),f))!==null&&t!==void 0?t:f}function Ce(f,e,t){const n=typeof e=="string"?e:e.typeName,g=typeof t=="string"?t:t.name;return f.toString().replace(/\/?$/,`/${n}/${g}`)}function Le(f){let e,t=new Uint8Array(0);function n(g){const P=new Uint8Array(t.length+g.length);P.set(t),P.set(g,t.length),t=P}return new ReadableStream({start(){e=f.getReader()},async pull(g){let P;for(;;){if(P===void 0&&t.byteLength>=5){let ae=0;for(let ye=1;ye<5;ye++)ae=(ae<<8)+t[ye];P={flags:t[0],length:ae}}if(P!==void 0&&t.byteLength>=P.length+5)break;const K=await e.read();if(K.done)break;n(K.value)}if(P===void 0){if(t.byteLength==0){g.close();return}g.error(new r("premature end of stream",v.DataLoss));return}const j=t.subarray(5,5+P.length);t=t.subarray(5+P.length),g.enqueue({flags:P.flags,data:j})}})}function Z(f,e){const t=new Uint8Array(e.length+5);t.set(e,5);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setUint8(0,f),n.setUint32(1,e.length),t}const ce="Content-Type",ue="Grpc-Timeout",H="Grpc-Status",oe="Grpc-Message",se="Grpc-Status-Details-Bin",we="User-Agent",ge="X-User-Agent",xe="X-Grpc-Web",Be="application/grpc-web+proto",Ue="application/grpc-web+json";function st(f,e,t,n){const g=new Headers(t!=null?t:{});return g.set(ce,f?Be:Ue),g.set(xe,"1"),g.set(ge,"connect-es/1.2.0"),n&&g.set(we,"connect-es/1.2.0"),e!==void 0&&g.set(ue,`${e}m`),g}function ct(f){switch(f){case 400:return v.Internal;case 401:return v.Unauthenticated;case 403:return v.PermissionDenied;case 404:return v.Unimplemented;case 429:return v.Unavailable;case 502:return v.Unavailable;case 503:return v.Unavailable;case 504:return v.Unavailable;default:return v.Unknown}}var Je=R(850),Ge=R(733);class Ee extends h.v{constructor(e){super(),this.code=0,this.message="",this.details=[],Je.w.util.initPartial(e,this)}static fromBinary(e,t){return new Ee().fromBinary(e,t)}static fromJson(e,t){return new Ee().fromJson(e,t)}static fromJsonString(e,t){return new Ee().fromJsonString(e,t)}static equals(e,t){return Je.w.util.equals(Ee,e,t)}}Ee.runtime=Je.w,Ee.typeName="google.rpc.Status",Ee.fields=Je.w.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Ge.I,repeated:!0}]);var et=R(236);function jt(f,e,t){try{const n=et.W.dec(f);return e?e.fromBinary(n,t):n}catch(n){throw r.from(n,v.DataLoss)}}const Vt="0";function Lt(f){var e;const t=f.get(se);if(t!=null){const g=jt(t,Ee);if(g.code==0)return;const P=new r(g.message,g.code,f);return P.details=g.details.map(j=>({type:j.typeUrl.substring(j.typeUrl.lastIndexOf("/")+1),value:j.value})),P}const n=f.get(H);if(n!=null){if(n===Vt)return;const g=parseInt(n,10);return g in v?new r(decodeURIComponent((e=f.get(oe))!==null&&e!==void 0?e:""),g,f):new r(`invalid grpc-status: ${n}`,v.Internal,f)}}function It(f,e){var t;if(f>=200&&f<300){const n=Lt(e);if(n)throw n;return{foundStatus:e.has(H)}}throw new r(decodeURIComponent((t=e.get(oe))!==null&&t!==void 0?t:`HTTP ${f}`),ct(f),e)}const Ft=128;function yt(f){const e=new Headers,t=new TextDecoder().decode(f).split(`\r
`);for(const n of t){if(n==="")continue;const g=n.indexOf(":");if(g>0){const P=n.substring(0,g).trim(),j=n.substring(g+1).trim();e.append(P,j)}}return e}function zt(f,e){const t=Lt(f);if(t)throw e.forEach((n,g)=>{t.metadata.append(g,n)}),t}function an(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}var Et=function(f){return this instanceof Et?(this.v=f,this):new Et(f)},Xt=function(f,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(f,e||[]),g,P=[];return g={},j("next"),j("throw"),j("return"),g[Symbol.asyncIterator]=function(){return this},g;function j(ke){n[ke]&&(g[ke]=function(Ze){return new Promise(function(mt,bt){P.push([ke,Ze,mt,bt])>1||K(ke,Ze)})})}function K(ke,Ze){try{ae(n[ke](Ze))}catch(mt){qe(P[0][3],mt)}}function ae(ke){ke.value instanceof Et?Promise.resolve(ke.value.v).then(ye,Re):qe(P[0][2],ke)}function ye(ke){K("next",ke)}function Re(ke){K("throw",ke)}function qe(ke,Ze){ke(Ze),P.shift(),P.length&&K(P[0][0],P[0][1])}};function Zt(f){var e;an();const t=(e=f.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(n,g,P,j,K,ae,ye){var Re;const{serialize:qe,parse:ke}=B(g,t,f.jsonOptions,f.binaryOptions);return j=j===void 0?f.defaultTimeoutMs:j<=0?void 0:j,await le({interceptors:f.interceptors,signal:P,timeoutMs:j,req:{stream:!1,service:n,method:g,url:Ce(f.baseUrl,n,g),init:{method:"POST",credentials:(Re=f.credentials)!==null&&Re!==void 0?Re:"same-origin",redirect:"error",mode:"cors"},header:st(t,j,K,!1),contextValues:ye!=null?ye:X(),message:ae},next:async Ze=>{var mt;const Pt=await((mt=f.fetch)!==null&&mt!==void 0?mt:globalThis.fetch)(Ze.url,Object.assign(Object.assign({},Ze.init),{headers:Ze.header,signal:Ze.signal,body:Z(0,qe(Ze.message))}));if(It(Pt.status,Pt.headers),!Pt.body)throw"missing response body";const Tn=Le(Pt.body).getReader();let Nt,Gt;for(;;){const Wt=await Tn.read();if(Wt.done)break;const{flags:sn,data:_r}=Wt.value;if(sn===Ft){if(Nt!==void 0)throw"extra trailer";Nt=yt(_r);continue}if(Gt!==void 0)throw"extra message";Gt=ke(_r)}if(Nt===void 0)throw"missing trailer";if(zt(Nt,Pt.headers),Gt===void 0)throw"missing message";return{stream:!1,header:Pt.headers,message:Gt,trailer:Nt}}})},async stream(n,g,P,j,K,ae,ye){var Re;const{serialize:qe,parse:ke}=B(g,t,f.jsonOptions,f.binaryOptions);function Ze(bt,Pt,Tn,Nt){return Xt(this,arguments,function*(){const Wt=Le(bt).getReader();if(Pt){if(!(yield Et(Wt.read())).done)throw"extra data for trailers-only";return yield Et(void 0)}let sn=!1;for(;;){const _r=yield Et(Wt.read());if(_r.done)break;const{flags:Rr,data:qr}=_r.value;if((Rr&Ft)===Ft){if(sn)throw"extra trailer";sn=!0;const Mi=yt(qr);zt(Mi,Nt),Mi.forEach((qo,Uo)=>Tn.set(Uo,qo));continue}if(sn)throw"extra message";yield yield Et(ke(qr))}if(!sn)throw"missing trailer"})}async function mt(bt){if(g.kind!=o.t.ServerStreaming)throw"The fetch API does not support streaming request bodies";const Pt=await bt[Symbol.asyncIterator]().next();if(Pt.done==!0)throw"missing request message";return Z(0,qe(Pt.value))}return j=j===void 0?f.defaultTimeoutMs:j<=0?void 0:j,ve({interceptors:f.interceptors,signal:P,timeoutMs:j,req:{stream:!0,service:n,method:g,url:Ce(f.baseUrl,n,g),init:{method:"POST",credentials:(Re=f.credentials)!==null&&Re!==void 0?Re:"same-origin",redirect:"error",mode:"cors"},header:st(t,j,K,!1),contextValues:ye!=null?ye:X(),message:ae},next:async bt=>{var Pt;const Nt=await((Pt=f.fetch)!==null&&Pt!==void 0?Pt:globalThis.fetch)(bt.url,Object.assign(Object.assign({},bt.init),{headers:bt.header,signal:bt.signal,body:await mt(bt.message)})),{foundStatus:Gt}=It(Nt.status,Nt.headers);if(!Nt.body)throw"missing response body";const Wt=new Headers;return Object.assign(Object.assign({},bt),{header:Nt.headers,trailer:Wt,message:Ze(Nt.body,Gt,Wt,Nt.headers)})}})}}}var An=R(295),Ne=R(646);/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Dt=null;try{Dt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function lt(f,e,t){this.low=f|0,this.high=e|0,this.unsigned=!!t}lt.prototype.__isLong__,Object.defineProperty(lt.prototype,"__isLong__",{value:!0});function xt(f){return(f&&f.__isLong__)===!0}function un(f){var e=Math.clz32(f&-f);return f?31-e:e}lt.isLong=xt;var ln={},cn={};function $t(f,e){var t,n,g;return e?(f>>>=0,(g=0<=f&&f<256)&&(n=cn[f],n)?n:(t=ht(f,0,!0),g&&(cn[f]=t),t)):(f|=0,(g=-128<=f&&f<128)&&(n=ln[f],n)?n:(t=ht(f,f<0?-1:0,!1),g&&(ln[f]=t),t))}lt.fromInt=$t;function Mt(f,e){if(isNaN(f))return e?rn:gn;if(e){if(f<0)return rn;if(f>=bn)return Pe}else{if(f<=-zn)return Me;if(f+1>=zn)return Te}return f<0?Mt(-f,e).neg():ht(f%nn|0,f/nn|0,e)}lt.fromNumber=Mt;function ht(f,e,t){return new lt(f,e,t)}lt.fromBits=ht;var pn=Math.pow;function qn(f,e,t){if(f.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,f==="NaN"||f==="Infinity"||f==="+Infinity"||f==="-Infinity")return e?rn:gn;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=f.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return qn(f.substring(1),e,t).neg();for(var g=Mt(pn(t,8)),P=gn,j=0;j<f.length;j+=8){var K=Math.min(8,f.length-j),ae=parseInt(f.substring(j,j+K),t);if(K<8){var ye=Mt(pn(t,K));P=P.mul(ye).add(Mt(ae))}else P=P.mul(g),P=P.add(Mt(ae))}return P.unsigned=e,P}lt.fromString=qn;function Jt(f,e){return typeof f=="number"?Mt(f,e):typeof f=="string"?qn(f,e):ht(f.low,f.high,typeof e=="boolean"?e:f.unsigned)}lt.fromValue=Jt;var Un=1<<16,cr=1<<24,nn=Un*Un,bn=nn*nn,zn=bn/2,wn=$t(cr),gn=$t(0);lt.ZERO=gn;var rn=$t(0,!0);lt.UZERO=rn;var fn=$t(1);lt.ONE=fn;var Hn=$t(1,!0);lt.UONE=Hn;var fe=$t(-1);lt.NEG_ONE=fe;var Te=ht(-1,2147483647,!1);lt.MAX_VALUE=Te;var Pe=ht(-1,-1,!0);lt.MAX_UNSIGNED_VALUE=Pe;var Me=ht(0,-2147483648,!1);lt.MIN_VALUE=Me;var _e=lt.prototype;_e.toInt=function(){return this.unsigned?this.low>>>0:this.low},_e.toNumber=function(){return this.unsigned?(this.high>>>0)*nn+(this.low>>>0):this.high*nn+(this.low>>>0)},_e.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Me)){var t=Mt(e),n=this.div(t),g=n.mul(t).sub(this);return n.toString(e)+g.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var P=Mt(pn(e,6),this.unsigned),j=this,K="";;){var ae=j.div(P),ye=j.sub(ae.mul(P)).toInt()>>>0,Re=ye.toString(e);if(j=ae,j.isZero())return Re+K;for(;Re.length<6;)Re="0"+Re;K=""+Re+K}},_e.getHighBits=function(){return this.high},_e.getHighBitsUnsigned=function(){return this.high>>>0},_e.getLowBits=function(){return this.low},_e.getLowBitsUnsigned=function(){return this.low>>>0},_e.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Me)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},_e.isZero=function(){return this.high===0&&this.low===0},_e.eqz=_e.isZero,_e.isNegative=function(){return!this.unsigned&&this.high<0},_e.isPositive=function(){return this.unsigned||this.high>=0},_e.isOdd=function(){return(this.low&1)===1},_e.isEven=function(){return(this.low&1)===0},_e.equals=function(e){return xt(e)||(e=Jt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},_e.eq=_e.equals,_e.notEquals=function(e){return!this.eq(e)},_e.neq=_e.notEquals,_e.ne=_e.notEquals,_e.lessThan=function(e){return this.comp(e)<0},_e.lt=_e.lessThan,_e.lessThanOrEqual=function(e){return this.comp(e)<=0},_e.lte=_e.lessThanOrEqual,_e.le=_e.lessThanOrEqual,_e.greaterThan=function(e){return this.comp(e)>0},_e.gt=_e.greaterThan,_e.greaterThanOrEqual=function(e){return this.comp(e)>=0},_e.gte=_e.greaterThanOrEqual,_e.ge=_e.greaterThanOrEqual,_e.compare=function(e){if(xt(e)||(e=Jt(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},_e.comp=_e.compare,_e.negate=function(){return!this.unsigned&&this.eq(Me)?Me:this.not().add(fn)},_e.neg=_e.negate,_e.add=function(e){xt(e)||(e=Jt(e));var t=this.high>>>16,n=this.high&65535,g=this.low>>>16,P=this.low&65535,j=e.high>>>16,K=e.high&65535,ae=e.low>>>16,ye=e.low&65535,Re=0,qe=0,ke=0,Ze=0;return Ze+=P+ye,ke+=Ze>>>16,Ze&=65535,ke+=g+ae,qe+=ke>>>16,ke&=65535,qe+=n+K,Re+=qe>>>16,qe&=65535,Re+=t+j,Re&=65535,ht(ke<<16|Ze,Re<<16|qe,this.unsigned)},_e.subtract=function(e){return xt(e)||(e=Jt(e)),this.add(e.neg())},_e.sub=_e.subtract,_e.multiply=function(e){if(this.isZero())return this;if(xt(e)||(e=Jt(e)),Dt){var t=Dt.mul(this.low,this.high,e.low,e.high);return ht(t,Dt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?rn:gn;if(this.eq(Me))return e.isOdd()?Me:gn;if(e.eq(Me))return this.isOdd()?Me:gn;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(wn)&&e.lt(wn))return Mt(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,g=this.high&65535,P=this.low>>>16,j=this.low&65535,K=e.high>>>16,ae=e.high&65535,ye=e.low>>>16,Re=e.low&65535,qe=0,ke=0,Ze=0,mt=0;return mt+=j*Re,Ze+=mt>>>16,mt&=65535,Ze+=P*Re,ke+=Ze>>>16,Ze&=65535,Ze+=j*ye,ke+=Ze>>>16,Ze&=65535,ke+=g*Re,qe+=ke>>>16,ke&=65535,ke+=P*ye,qe+=ke>>>16,ke&=65535,ke+=j*ae,qe+=ke>>>16,ke&=65535,qe+=n*Re+g*ye+P*ae+j*K,qe&=65535,ht(Ze<<16|mt,qe<<16|ke,this.unsigned)},_e.mul=_e.multiply,_e.divide=function(e){if(xt(e)||(e=Jt(e)),e.isZero())throw Error("division by zero");if(Dt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Dt.div_u:Dt.div_s)(this.low,this.high,e.low,e.high);return ht(t,Dt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?rn:gn;var n,g,P;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return rn;if(e.gt(this.shru(1)))return Hn;P=rn}else{if(this.eq(Me)){if(e.eq(fn)||e.eq(fe))return Me;if(e.eq(Me))return fn;var j=this.shr(1);return n=j.div(e).shl(1),n.eq(gn)?e.isNegative()?fn:fe:(g=this.sub(e.mul(n)),P=n.add(g.div(e)),P)}else if(e.eq(Me))return this.unsigned?rn:gn;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();P=gn}for(g=this;g.gte(e);){n=Math.max(1,Math.floor(g.toNumber()/e.toNumber()));for(var K=Math.ceil(Math.log(n)/Math.LN2),ae=K<=48?1:pn(2,K-48),ye=Mt(n),Re=ye.mul(e);Re.isNegative()||Re.gt(g);)n-=ae,ye=Mt(n,this.unsigned),Re=ye.mul(e);ye.isZero()&&(ye=fn),P=P.add(ye),g=g.sub(Re)}return P},_e.div=_e.divide,_e.modulo=function(e){if(xt(e)||(e=Jt(e)),Dt){var t=(this.unsigned?Dt.rem_u:Dt.rem_s)(this.low,this.high,e.low,e.high);return ht(t,Dt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},_e.mod=_e.modulo,_e.rem=_e.modulo,_e.not=function(){return ht(~this.low,~this.high,this.unsigned)},_e.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},_e.clz=_e.countLeadingZeros,_e.countTrailingZeros=function(){return this.low?un(this.low):un(this.high)+32},_e.ctz=_e.countTrailingZeros,_e.and=function(e){return xt(e)||(e=Jt(e)),ht(this.low&e.low,this.high&e.high,this.unsigned)},_e.or=function(e){return xt(e)||(e=Jt(e)),ht(this.low|e.low,this.high|e.high,this.unsigned)},_e.xor=function(e){return xt(e)||(e=Jt(e)),ht(this.low^e.low,this.high^e.high,this.unsigned)},_e.shiftLeft=function(e){return xt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ht(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ht(0,this.low<<e-32,this.unsigned)},_e.shl=_e.shiftLeft,_e.shiftRight=function(e){return xt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ht(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ht(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},_e.shr=_e.shiftRight,_e.shiftRightUnsigned=function(e){return xt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ht(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?ht(this.high,0,this.unsigned):ht(this.high>>>e-32,0,this.unsigned)},_e.shru=_e.shiftRightUnsigned,_e.shr_u=_e.shiftRightUnsigned,_e.rotateLeft=function(e){var t;return xt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ht(this.high,this.low,this.unsigned):e<32?(t=32-e,ht(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,ht(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},_e.rotl=_e.rotateLeft,_e.rotateRight=function(e){var t;return xt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ht(this.high,this.low,this.unsigned):e<32?(t=32-e,ht(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,ht(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},_e.rotr=_e.rotateRight,_e.toSigned=function(){return this.unsigned?ht(this.low,this.high,!1):this},_e.toUnsigned=function(){return this.unsigned?this:ht(this.low,this.high,!0)},_e.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},_e.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},_e.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},lt.fromBytes=function(e,t,n){return n?lt.fromBytesLE(e,t):lt.fromBytesBE(e,t)},lt.fromBytesLE=function(e,t){return new lt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},lt.fromBytesBE=function(e,t){return new lt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const Ye=lt;var te;(function(f){f.Ok="ok",f.ClientNotActive="client-not-active",f.Unimplemented="unimplemented",f.Unsupported="unsupported",f.DocumentNotAttached="document-not-attached",f.DocumentNotDetached="document-not-detached",f.DocumentRemoved="document-removed",f.InvalidObjectKey="invalid-object-key",f.InvalidArgument="invalid-argument"})(te||(te={}));class de extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="YorkieError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function Ie(f){if(f instanceof Map){const e=Array.from(f);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(f))}const Fe=f=>f?Object.entries(f).length===0:!0,Xe=f=>{const e={};for(const[t,n]of Object.entries(f))e[t]=JSON.stringify(n);return e},nt=f=>{const e={};for(const[t,n]of Object.entries(f))e[t]=JSON.parse(n);return e};var gt;(function(f){f.Put="put",f.Clear="clear"})(gt||(gt={}));class ft{constructor(e,t){this.context=e,this.presence=t}set(e,t){for(const n of Object.keys(e))this.presence[n]=e[n];this.context.setPresenceChange({type:gt.Put,presence:Ie(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:gt.Clear})}}const qt="000000000000000000000000",Tt="FFFFFFFFFFFFFFFFFFFFFFFF";class Ot{constructor(e,t,n){this.lamport=e,this.delimiter=t,this.actorID=n}static of(e,t,n){return new Ot(e,t,n)}static fromStruct(e){return Ot.of(Ye.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return this.actorID?`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`:`${this.lamport.toString()}:nil:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return this.actorID?`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`:`${this.lamport.toString()}:nil:${this.delimiter}`}setActor(e){return new Ot(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const _n=0,Qt=4294967295,We=Ye.MAX_VALUE,ot=new Ot(Ye.fromNumber(0),_n,qt),wt=new Ot(We,Qt,Tt);function ze(f){return f.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class rt{constructor(e){this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Yt extends rt{constructor(e){super(e)}}class it extends rt{}class St{constructor(e,t){this.strKey=e,this.value=t}static of(e,t){return new St(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class pt{constructor(){this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new pt}set(e,t,n){let g;const P=this.nodeMapByKey.get(e);P!=null&&!P.isRemoved()&&P.remove(n)&&(g=P.getValue());const j=St.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),j),(P==null||n.after(P.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,j),t.setMovedAt(n)),g}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||b.fatal(`fail to find ${e.toIDString()}`);const n=this.nodeMapByCreatedAt.get(e.toIDString());return n.remove(t),n.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){b.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const n=this.nodeMapByKey.get(t.getStrKey());t===n&&this.nodeMapByKey.delete(n.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const n=this.nodeMapByKey.get(e);if(n!=null&&!!n.remove(t))return n.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class vt extends Yt{constructor(e,t){super(e),this.memberNodes=t}static create(e,t){if(!t)return new vt(e,pt.create());const n=pt.create();for(const[g,P]of Object.entries(t))n.set(g,P.deepcopy(),P.getCreatedAt());return new vt(e,n)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,n){return this.memberNodes.set(e,t,n)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,n]of this)e.push(`"${ze(t)}":${n.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,n]of this){const{id:g,value:P,type:j}=n.toJSForTest();e[t]={key:t,id:g,value:P,type:j}}return{id:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[g]of this)t.push(g);const n=[];for(const g of t.sort()){const P=(e=this.memberNodes.get(g))===null||e===void 0?void 0:e.getValue();n.push(`"${ze(g)}":${P.toSortedJSON()}`)}return`{${n.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=vt.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const n=t.getValue();if(e(n,this))return;n instanceof Yt&&n.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var At;(function(f){f.Local="local",f.Remote="remote",f.UndoRedo="undoredo"})(At||(At={}));class Rt{constructor(e,t){this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Kt{constructor(e){this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Bt{constructor(e){this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&b.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,n=e,g;for(;n;)(!g||g===n.getRight())&&(t+=n.getLength()+(n.hasLeft()?n.getLeftWeight():0)),g=n,n=n.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new Bt(e.getLeft());t.root&&t.root.setParent();const n=new Bt(e.getRight());if(n.root&&n.root.setParent(),t.root){const g=t.getRightmost();t.splayNode(g),t.root.setRight(n.root),n.root&&n.root.setParent(t.root),this.root=t.root}else this.root=n.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const n of t)n.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Ve;(function(f){f[f.Null=0]="Null",f[f.Boolean=1]="Boolean",f[f.Integer=2]="Integer",f[f.Long=3]="Long",f[f.Double=4]="Double",f[f.String=5]="String",f[f.Bytes=6]="Bytes",f[f.Date=7]="Date"})(Ve||(Ve={}));class Ct extends rt{constructor(e,t){super(t),this.valueType=Ct.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new Ct(e,t)}static valueFromBytes(e,t){switch(e){case Ve.Null:return null;case Ve.Boolean:return!!t[0];case Ve.Integer:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case Ve.Double:{const n=new DataView(t.buffer);return t.forEach(function(g,P){n.setUint8(P,g)}),n.getFloat64(0,!0)}case Ve.String:return new TextDecoder("utf-8").decode(t);case Ve.Long:return Ye.fromBytesLE(Array.from(t));case Ve.Bytes:return t;case Ve.Date:return new Date(Ye.fromBytesLE(Array.from(t),!0).toNumber());default:throw new de(te.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===Ve.String?`"${ze(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=Ct.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return Ve.Null;case"boolean":return Ve.Boolean;case"number":return this.isInteger(e)?Ve.Integer:Ve.Double;case"string":return Ve.String;case"object":if(e===null)return Ve.Null;if(e instanceof Ye)return Ve.Long;if(e instanceof Uint8Array)return Ve.Bytes;if(e instanceof Date)return Ve.Date}}static isSupport(e){return Ct.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===Ve.Integer||e===Ve.Long||e===Ve.Double}getValue(){return this.value}toBytes(){switch(this.valueType){case Ve.Null:return new Uint8Array;case Ve.Boolean:return this.value?new Uint8Array([1]):new Uint8Array([0]);case Ve.Integer:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case Ve.Double:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case Ve.String:return new TextEncoder().encode(this.value);case Ve.Long:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case Ve.Bytes:return this.value;case Ve.Date:{const e=this.value,t=Ye.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new de(te.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class Gn extends Kt{constructor(e){super(e),this.value=e}static createAfter(e,t){const n=new Gn(t),g=e.next;return e.next=n,n.prev=e,n.next=g,g&&(g.prev=n),n}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Jn{constructor(){const e=Ct.of(0,ot);e.setRemovedAt(ot),this.dummyHead=new Gn(e),this.last=this.dummyHead,this.nodeMapByIndex=new Bt,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Jn}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let n=this.nodeMapByCreatedAt.get(e.toIDString());for(n||b.fatal(`cant find the given node: ${e.toIDString()}`);n.getNext()&&n.getNext().getPositionedAt().after(t);)n=n.getNext();return n}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,n=t.getCreatedAt()){const g=this.findNextBeforeExecutedAt(e,n),P=Gn.createAfter(g,t);g===this.last&&(this.last=P),this.nodeMapByIndex.insertAfter(g,P),this.nodeMapByCreatedAt.set(P.getCreatedAt().toIDString(),P)}moveAfter(e,t,n){const g=this.nodeMapByCreatedAt.get(e.toIDString());g||b.fatal(`cant find the given node: ${e.toIDString()}`);const P=this.nodeMapByCreatedAt.get(t.toIDString());P||b.fatal(`cant find the given node: ${t.toIDString()}`),g!==P&&(!P.getValue().getMovedAt()||n.after(P.getValue().getMovedAt()))&&(this.release(P),this.insertAfter(g.getCreatedAt(),P.getValue(),n),P.getValue().setMovedAt(n))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||b.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,n]=this.nodeMapByIndex.find(e);let g=t;if(e===0&&t===this.dummyHead||n>0)do g&&(g=g.getNext());while(g&&g.isRemoved());return g}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const n=this.nodeMapByCreatedAt.get(e.toIDString()),g=n.isRemoved();return n.remove(t)&&!g&&this.nodeMapByIndex.splayNode(n),n.getValue()}deleteByIndex(e,t){const n=this.getByIndex(e);if(!!n)return n.remove(t)&&this.nodeMapByIndex.splayNode(n),n.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const n=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${n}}`):e.push(`[${n}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class on extends Yt{constructor(e,t){super(e),this.elements=t}static create(e,t){if(!t)return new on(e,Jn.create());const n=Jn.create();for(const g of t)n.insertAfter(n.getLastCreatedAt(),g.deepcopy());return new on(e,n)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,n){this.elements.moveAfter(e,t,n)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const n=t.getValue();if(e(n,this))return;n instanceof Yt&&n.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{id:n,value:g,type:P}=this.get(t).toJSForTest();e[t]={key:String(t),id:n,value:g,type:P}}return{id:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=on.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class Dn extends Rt{constructor(e,t,n){super(e,n),this.createdAt=t}static create(e,t,n){return new Dn(e,t,n)}execute(e,t){var n;const g=e.findByCreatedAt(this.getParentCreatedAt());if(g||b.fatal(`fail to find ${this.getParentCreatedAt()}`),g instanceof Yt||b.fatal(`only object and array can execute remove: ${g}`),t===At.UndoRedo){let ye=g.getByID(this.createdAt);for(;ye;){if(ye.getRemovedAt())return;ye=(n=e.findElementPairByCreatedAt(ye.getCreatedAt()))===null||n===void 0?void 0:n.parent}}const P=g.subPathOf(this.createdAt),j=this.toReverseOperation(g),K=g.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(K),{opInfos:g instanceof on?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(P)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:P}],reverseOp:j}}toReverseOperation(e){if(e instanceof vt){const t=e.subPathOf(this.createdAt);if(t!==void 0){const n=e.get(t);if(n!==void 0)return kn.create(t,n.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class kn extends Rt{constructor(e,t,n,g){super(n,g),this.key=e,this.value=t}static create(e,t,n,g){return new kn(e,t,n,g)}execute(e,t){var n;const g=e.findByCreatedAt(this.getParentCreatedAt());if(g||b.fatal(`fail to find ${this.getParentCreatedAt()}`),g instanceof vt||b.fatal("fail to execute, only object can execute set"),t===At.UndoRedo){let ye=g;for(;ye;){if(ye.getRemovedAt())return;ye=(n=e.findElementPairByCreatedAt(ye.getCreatedAt()))===null||n===void 0?void 0:n.parent}}const P=g.get(this.key),j=this.toReverseOperation(P),K=this.value.deepcopy(),ae=g.set(this.key,K,this.getExecutedAt());return t===At.UndoRedo&&e.findByCreatedAt(K.getCreatedAt())&&e.deregisterElement(K),e.registerElement(K,g),ae&&e.registerRemovedElement(ae),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:j}}toReverseOperation(e){let t=Dn.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=kn.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class $n extends Rt{constructor(e,t,n,g){super(e,g),this.prevCreatedAt=t,this.value=n}static create(e,t,n,g){return new $n(e,t,n,g)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||b.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof on||b.fatal("fail to execute, only array can execute add");const n=t,g=this.value.deepcopy();return n.insertAfter(this.prevCreatedAt,g),e.registerElement(g,n),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(n.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class Xn extends Rt{constructor(e,t,n,g){super(e,g),this.prevCreatedAt=t,this.createdAt=n}static create(e,t,n,g){return new Xn(e,t,n,g)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||b.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof on||b.fatal("fail to execute, only array can execute move");const n=t,g=Number(n.subPathOf(this.createdAt));n.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const P=Number(n.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:P,previousIndex:g}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Sr{constructor(e,t,n){this.key=e,this.value=t,this.updatedAt=n}static of(e,t,n){return new Sr(e,t,n)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}}class Rn{constructor(){this.nodeMapByKey=new Map}static create(){return new Rn}set(e,t,n){const g=this.nodeMapByKey.get(e);if(g===void 0||n.after(g.getUpdatedAt())){const P=Sr.of(e,t,n);this.nodeMapByKey.set(e,P)}}has(e){return this.nodeMapByKey.has(e)}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Rn;for(const[,t]of this.nodeMapByKey)e.set(t.getKey(),t.getValue(),t.getUpdatedAt());return e}toJSON(){const e=[];for(const[t,n]of this.nodeMapByKey)e.push(`"${ze(t)}":"${ze(n.getValue())}"`);return`{${e.join(",")}}`}toXML(){return this.size()?` ${[...this.nodeMapByKey].map(([e,t])=>`${e}="${JSON.parse(t.getValue())}"`).join(" ")}`:""}size(){return this.nodeMapByKey.size}toObject(){const e={};for(const[t,n]of this.nodeMapByKey)e[t]=n.getValue();return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}var On;(function(f){f.Content="content",f.Style="style"})(On||(On={}));class Nn{constructor(e){this.attributes=Rn.create(),this.content=e}static create(e){return new Nn(e)}get length(){return this.content.length}substring(e,t){const n=new Nn(this.content.substring(e,t));return n.attributes=this.attributes.deepcopy(),n}setAttr(e,t,n){this.attributes.set(e,t,n)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=ze(this.content),t=this.attributes.toObject(),n=[];for(const[g,P]of Object.entries(t)){const j=JSON.parse(P),K=typeof j=="string"?`"${ze(g)}":"${ze(j)}"`:`"${ze(g)}":${String(j)}`;n.push(K)}return n.sort(),n.length===0?`{"val":"${e}"}`:`{"attrs":{${n.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}}class en extends it{constructor(e,t){super(t),this.rgaTreeSplit=e}static create(e,t){return new en(e,t)}edit(e,t,n,g,P){const j=t?Nn.create(t):void 0;if(j&&g)for(const[qe,ke]of Object.entries(g))j.setAttr(qe,ke,n);const[K,ae,ye]=this.rgaTreeSplit.edit(e,n,j,P),Re=ye.map(qe=>({...qe,value:qe.value?{attributes:nt(qe.value.getAttributes()),content:qe.value.getContent()}:{attributes:void 0,content:""},type:On.Content}));return[ae,Re,[K,K]]}setStyle(e,t,n,g){const[,P]=this.rgaTreeSplit.findNodeWithSplit(e[1],n),[,j]=this.rgaTreeSplit.findNodeWithSplit(e[0],n),K=[],ae=this.rgaTreeSplit.findBetween(j,P),ye=new Map,Re=[];for(const qe of ae){const ke=qe.getCreatedAt().getActorID(),Ze=g!=null&&g.size?g.has(ke)?g.get(ke):ot:wt;if(qe.canStyle(n,Ze)){const mt=ye.get(ke),bt=qe.getCreatedAt();(!mt||bt.after(mt))&&ye.set(ke,bt),Re.push(qe)}}for(const qe of Re){if(qe.isRemoved())continue;const[ke,Ze]=this.rgaTreeSplit.findIndexesFromRange(qe.createPosRange());K.push({type:On.Style,actor:n.getActorID(),from:ke,to:Ze,value:{attributes:nt(t)}});for(const[mt,bt]of Object.entries(t))qe.getValue().setAttr(mt,bt,n)}return[ye,K]}indexRangeToPosRange(e,t){const n=this.rgaTreeSplit.indexToPos(e);return e===t?[n,n]:[n,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const n=t.getValue();e.push({attributes:nt(n.getAttributes()),content:n.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}getRemovedNodesLen(){return this.rgaTreeSplit.getRemovedNodesLen()}purgeRemovedNodesBefore(e){return this.rgaTreeSplit.purgeRemovedNodesBefore(e)}deepcopy(){const e=new en(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}}class Zn extends Rt{constructor(e,t,n,g,P,j,K){super(e,K),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=g,this.content=P,this.attributes=j}static create(e,t,n,g,P,j,K){return new Zn(e,t,n,g,P,j,K)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||b.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof en||b.fatal("fail to execute, only Text can execute edit");const n=t,[,g]=n.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(n),{opInfos:g.map(({from:P,to:j,value:K})=>({type:"edit",from:P,to:j,value:K,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),g=this.content;return`${e}.EDIT(${t},${n},${g})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class En extends Rt{constructor(e,t,n,g,P,j){super(e,j),this.fromPos=t,this.toPos=n,this.maxCreatedAtMapByActor=g,this.attributes=P}static create(e,t,n,g,P,j){return new En(e,t,n,g,P,j)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||b.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof en||b.fatal("fail to execute, only Text can execute edit");const n=t,[,g]=n.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);return{opInfos:g.map(({from:P,to:j,value:K})=>({type:"style",from:P,to:j,value:K,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),n=this.toPos.toTestString(),g=this.attributes;return`${e}.STYL(${t},${n},${JSON.stringify(g)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const In=2,xn="root",hn="text";function Sn(f,e){let t=0;const n=f.children;for(let g=0;g<e;g++){const P=n[g];!P||P.isRemoved||(t+=P.paddedSize)}return t}class fr{constructor(e,t=[]){if(this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e;)e.size+=this.paddedSize*t,e=e.parent}get isText(){return this.type===hn}get paddedSize(){return this.size+(this.isText?0:In)}isAncestorOf(e){return hr(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const n=this.value.slice(0,e),g=this.value.slice(e);if(!g.length)return;this.value=n;const P=this.cloneText(e+t);return P.value=g,this.parent.insertAfterInternal(P,this),P}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.some(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this,t.isRemoved||t.updateAncestorsSize()}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const n=this.cloneElement(t);this.parent.insertAfterInternal(n,this),n.updateAncestorsSize();const g=this.children.slice(0,e),P=this.children.slice(e);this._children=g,n._children=P,this.size=this._children.reduce((j,K)=>j+K.paddedSize,0),n.size=n._children.reduce((j,K)=>j+K.paddedSize,0);for(const j of n._children)j.parent=n;return n}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const n=this._children.indexOf(t);if(n===-1)throw new Error("child not found");this.insertAtInternal(e,n+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(g=>!g.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const n=this._children.indexOf(t);if(n!==-1)return n;t=t.parent}return-1}}function hr(f,e){if(f===e)return!1;for(;e.parent;){if(e.parent===f)return!0;e=e.parent}return!1}var kt;(function(f){f.Start="Start",f.End="End",f.Text="Text"})(kt||(kt={}));function Cn(f,e,t,n){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>f.size)throw new Error(`from is out of range: ${e} > ${f.size}`);if(t>f.size)throw new Error(`to is out of range: ${t} > ${f.size}`);if(e===t)return;let g=0;for(const P of f.children){if(e-P.paddedSize<g&&g<t){const j=P.isText?e-g:e-g-1,K=P.isText?t-g:t-g-1,ae=!P.isText&&j<0,ye=!P.isText&&K>P.size;(P.isText||ae)&&n([P,P.isText?kt.Text:kt.Start],ye),Cn(P,Math.max(0,j),Math.min(K,P.size),n),ye&&n([P,kt.End],ye)}g+=P.paddedSize}}function dn(f,e,t=0){for(const n of f.children)dn(n,e,t+1);e(f,t)}function Ln(f,e,t=0){for(const n of f._children)Ln(n,e,t+1);e(f,t)}function Pn(f,e,t=!0){if(e>f.size)throw new Error(`index is out of range: ${e} > ${f.size}`);if(f.isText)return{node:f,offset:e};let n=0,g=0;for(const P of f.children){if(t&&P.isText&&P.size>=e-g)return Pn(P,e-g,t);if(e===g)return{node:f,offset:n};if(!t&&P.paddedSize===e-g)return{node:f,offset:n+1};if(P.paddedSize>e-g)return Pn(P,e-g-1,t);g+=P.paddedSize,n+=1}return{node:f,offset:n}}function Mn(f){return f.isText||f.children.length===0?f:Mn(f.children[0])}function _(f,e){if(f.size<e)throw new Error("unacceptable path");for(let t=0;t<f.children.length;t++){const n=f.children[t];if(n.size<e)e-=n.size;else{f=n;break}}return{node:f,offset:e}}class c{constructor(e){this.root=e}tokensBetween(e,t,n){Cn(this.root,e,t,n)}traverse(e){dn(this.root,e,0)}traverseAll(e){Ln(this.root,e,0)}findTreePos(e,t=!0){return Pn(this.root,e,t)}treePosToPath(e){const t=[];let n=e.node;if(n.isText){const g=n.parent.findOffset(n);if(g===-1)throw new Error("invalid treePos");const P=Sn(n.parent,g);n=n.parent,t.push(P+e.offset)}else t.push(e.offset);for(;n.parent;){const g=n.parent.findOffset(n);if(g===-1)throw new Error("invalid treePos");t.push(g),n=n.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let n=0;n<e.length-1;n++){const g=e[n];if(t=t.children[g],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return _(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:n}=e;if(t.isText){if(t.size===n){const g=t.nextSibling;return g||t.parent}return t}return t.children.length===n?t:Mn(t.children[n])}indexOf(e){let{node:t}=e;const{offset:n}=e;let g=0,P=1;if(t.isText){g+=n;const j=t.parent,K=j.findOffset(t);if(K===-1)throw new Error("invalid pos");g+=Sn(j,K),t=t.parent}else g+=Sn(t,n);for(;t!=null&&t.parent;){const j=t.parent,K=j.findOffset(t);if(K===-1)throw new Error("invalid pos");g+=Sn(j,K),P++,t=t.parent}return g+P-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const T=(f,e)=>f===e?0:f<e?-1:1;class W{constructor(e,t,n){this.key=e,this.value=t,this.isRed=n}}class ne{constructor(e){this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class he{constructor(e){this.comparator=typeof e<"u"?e:T,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new ne(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const n=this.comparator(e,t.key);if(n>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(n<0)if(t.left)t.left.parent=t,t=t.left;else{let g=t.parent,P=t;for(;g&&P===g.left;)P=g,g=g.parent;return g}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const n=this.comparator(e,t.key);if(n===0)return t;n<0?t=t.left:n>0&&(t=t.right)}}putInternal(e,t,n){if(!n)return this.counter+=1,new W(e,t,!0);const g=this.comparator(e,n.key);return g<0?n.left=this.putInternal(e,t,n.left):g>0?n.right=this.putInternal(e,t,n.right):n.value=t,this.isRed(n.right)&&!this.isRed(n.left)&&(n=this.rotateLeft(n)),this.isRed(n.left)&&this.isRed(n.left.left)&&(n=this.rotateRight(n)),this.isRed(n.left)&&this.isRed(n.right)&&this.flipColors(n),n}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const n=this.min(e.right);e.value=n.value,e.key=n.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}var pe;(function(f){f.Content="content",f.Style="style"})(pe||(pe={}));class Ae{constructor(e,t){this.parentID=e,this.leftSiblingID=t}static of(e,t){return new Ae(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:n}=e,g;return n.isText?(n.parent.children[0]===n&&t===0?g=n.parent:g=n,n=n.parent):t===0?g=n:g=n.children[t-1],Ae.of(n.id,be.of(g.getCreatedAt(),g.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return Ae.of(be.of(Ot.fromStruct(e.parentID.createdAt),e.parentID.offset),be.of(Ot.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodes(e){const t=this.getParentID(),n=this.getLeftSiblingID(),g=e.findFloorNode(t);let P=e.findFloorNode(n);if(!g||!P)throw new Error(`cannot find node at ${this}`);return!n.equals(t)&&n.getOffset()>0&&n.getOffset()===P.id.getOffset()&&P.insPrevID&&(P=e.findFloorNode(P.insPrevID)),[g,P]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class be{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new be(e,t)}static fromStruct(e){return be.of(Ot.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}class De extends fr{constructor(e,t,n,g,P){super(t),this._value="",this.id=e,this.removedAt=P,g&&(this.attrs=g),typeof n=="string"?this.value=n:Array.isArray(n)&&(this._children=n)}static create(e,t,n,g){return new De(e,t,n,g)}deepcopy(){var e;const t=new De(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)===null||e===void 0?void 0:e.deepcopy(),t._children=this._children.map(n=>{const g=n.deepcopy();return g.parent=t,g}),t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&(this.parent.removedAt?this.parent.size-=this.paddedSize:this.updateAncestorsSize())}cloneText(e){return new De(be.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new De(be.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,n){const g=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,n);if(g){if(g.insPrevID=this.id,this.insNextID){const P=e.findFloorNode(this.insNextID);P.insPrevID=g.id,g.insNextID=this.insNextID}this.insNextID=g.id,e.registerNode(g)}return g}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}}function je(f){var e;if(f.isText){const t=f;return{type:t.type,value:t.value}}return{type:f.type,children:f.children.map(je),attributes:f.attrs?nt((e=f.attrs)===null||e===void 0?void 0:e.toObject()):void 0}}function at(f){var e;return f.isText?f.value:`<${f.type}${((e=f.attrs)===null||e===void 0?void 0:e.toXML())||""}>${f.children.map(t=>at(t)).join("")}</${f.type}>`}function Ut(f){if(f.isText){const e=f;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:f.type,children:f.children.map(Ut),size:f.size,isRemoved:f.isRemoved}}class dt extends it{constructor(e,t){super(t),this.indexTree=new c(e),this.nodeMapByID=new he(be.createComparator()),this.removedNodeMap=new Map,this.indexTree.traverse(n=>{this.nodeMapByID.put(n.id,n)})}static create(e,t){return new dt(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[n,g]=e.toTreeNodes(this);let P=g;const j=n===P,K=P.parent&&!j?P.parent:n;P.isText&&P.split(this,e.getLeftSiblingID().getOffset()-P.id.getOffset());const ae=K.allChildren,ye=j?0:ae.indexOf(P)+1;for(let Re=ye;Re<ae.length;Re++){const qe=ae[Re];if(!qe.id.getCreatedAt().after(t))break;P=qe}return[K,P]}style(e,t,n){const[g,P]=this.findNodesAndSplitText(e[0],n),[j,K]=this.findNodesAndSplitText(e[1],n),ae=[];return ae.push({type:pe.Style,from:this.toIndex(g,P),to:this.toIndex(j,K),fromPath:this.toPath(g,P),toPath:this.toPath(j,K),actor:n.getActorID(),value:t?nt(t):void 0}),this.traverseInPosRange(g,P,j,K,([ye])=>{if(!ye.isRemoved&&!ye.isText&&t){ye.attrs||(ye.attrs=new Rn);for(const[Re,qe]of Object.entries(t))ye.attrs.set(Re,qe,n)}}),ae}edit(e,t,n,g,P,j){const[K,ae]=this.findNodesAndSplitText(e[0],g),[ye,Re]=this.findNodesAndSplitText(e[1],g),qe=this.toIndex(K,ae),ke=this.toPath(K,ae),Ze=[],mt=[],bt=[],Pt=new Map;this.traverseInPosRange(K,ae,ye,Re,([Nt,Gt],Wt)=>{if(Gt===kt.Start&&!Wt)for(const Rr of Nt.children)bt.push(Rr);const sn=Nt.getCreatedAt().getActorID(),_r=j?j.has(sn)?j.get(sn):ot:wt;if(Nt.canDelete(g,_r)||Ze.includes(Nt.parent)){const Rr=Pt.get(sn),qr=Nt.getCreatedAt();(!Rr||qr.after(Rr))&&Pt.set(sn,qr),(Gt===kt.Text||Gt===kt.Start)&&Ze.push(Nt),mt.push([Nt,Gt])}});const Tn=this.makeDeletionChanges(mt,g);for(const Nt of Ze)Nt.remove(g),Nt.isRemoved&&this.removedNodeMap.set(Nt.id.toIDString(),Nt);for(const Nt of bt)Nt.removedAt||K.append(Nt);if(n>0){let Nt=0,Gt=K,Wt=ae;for(;Nt<n;)Gt.split(this,Gt.findOffset(Wt)+1,P),Wt=Gt,Gt=Gt.parent,Nt++;Tn.push({type:pe.Content,from:qe,to:qe,fromPath:ke,toPath:ke,actor:g.getActorID()})}if(t!=null&&t.length){const Nt=[];let Gt=ae;for(const Wt of t)Gt===K?K.insertAt(Wt,0):K.insertAfter(Wt,Gt),Gt=Wt,Ln(Wt,sn=>{K.isRemoved&&(sn.remove(g),this.removedNodeMap.set(sn.id.toIDString(),sn)),this.nodeMapByID.put(sn.id,sn)}),Wt.isRemoved||Nt.push(Wt);if(Nt.length){const Wt=Nt.map(sn=>je(sn));Tn.length&&Tn[Tn.length-1].from===qe?Tn[Tn.length-1].value=Wt:Tn.push({type:pe.Content,from:qe,to:qe,fromPath:ke,toPath:ke,actor:g.getActorID(),value:Wt})}}return[Tn,Pt]}editT(e,t,n,g,P){const j=this.findPos(e[0]),K=this.findPos(e[1]);this.edit([j,K],t,n,g,P)}move(e,t,n){throw new Error(`not implemented: ${e}, ${t}, ${n}`)}purgeRemovedNodesBefore(e){var t;const n=new Set;let g=0;for(const[,P]of this.removedNodeMap)P.removedAt&&e.compare(P.removedAt)>=0&&(n.add(P),g++);for(const P of n)(t=P.parent)===null||t===void 0||t.removeChild(P),this.nodeMapByID.remove(P.id),this.purge(P),this.removedNodeMap.delete(P.id.toIDString());return g}purge(e){const t=e.insPrevID,n=e.insNextID;if(t){const g=this.findFloorNode(t);g.insNextID=n}if(n){const g=this.findFloorNode(n);g.insPrevID=t}e.insPrevID=void 0,e.insNextID=void 0}findPos(e,t=!0){const n=this.indexTree.findTreePos(e,t);return Ae.fromTreePos(n)}getRemovedNodesLen(){return this.removedNodeMap.size}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getIndexTree(){return this.indexTree}toXML(){return at(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}getRootTreeNode(){return je(this.indexTree.getRoot())}toTestTreeNode(){return Ut(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new dt(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.treePosToPath(n):[]}toIndex(e,t){const n=this.toTreePos(e,t);return n?this.indexTree.indexOf(n):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,n]=e,g=this.findPos(t);return t===n?[g.toStruct(),g.toStruct()]:[g.toStruct(),this.findPos(n).toStruct()]}posRangeToPathRange(e,t){const[n,g]=this.findNodesAndSplitText(e[0],t),[P,j]=this.findNodesAndSplitText(e[1],t);return[this.toPath(n,g),this.toPath(P,j)]}posRangeToIndexRange(e,t){const[n,g]=this.findNodesAndSplitText(e[0],t),[P,j]=this.findNodesAndSplitText(e[1],t);return[this.toIndex(n,g),this.toIndex(P,j)]}traverseInPosRange(e,t,n,g,P){const j=this.toIndex(e,t),K=this.toIndex(n,g);return this.indexTree.tokensBetween(j,K,P)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let g;for(;e.isRemoved;)g=e,e=g.parent;const P=e.findOffset(g);return{node:e,offset:P}}if(e===t)return{node:e,offset:0};let n=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};n++}return{node:e,offset:n}}makeDeletionChanges(e,t){const n=[],g=[];let P=null,j=null;for(let K=0;K<e.length;K++){const ae=e[K],ye=e[K+1];P||(P=ae),j=ae;const Re=this.findRightToken(ae);(!Re||!ye||Re[0]!==ye[0]||Re[1]!==ye[1])&&(g.push([P,j]),P=null,j=null)}for(const K of g){const[ae,ye]=K,[Re,qe]=this.findLeftToken(ae),[ke,Ze]=ye,mt=qe===kt.Start?Re:Re.parent,bt=Ze===kt.Start?ke:ke.parent,Pt=this.toIndex(mt,Re),Tn=this.toIndex(bt,ke);Pt<Tn&&(n.length>0&&Pt===n[n.length-1].to?(n[n.length-1].to=Tn,n[n.length-1].toPath=this.toPath(bt,ke)):n.push({type:pe.Content,from:Pt,to:Tn,fromPath:this.toPath(mt,Re),toPath:this.toPath(bt,ke),actor:t.getActorID()}))}return n}findRightToken([e,t]){if(t===kt.Start){const K=e.allChildren;return K.length>0?[K[0],K[0].isText?kt.Text:kt.Start]:[e,kt.End]}const n=e.parent,g=n.allChildren,P=g.indexOf(e);if(n&&P===g.length-1)return[n,kt.End];const j=g[P+1];return[j,j.isText?kt.Text:kt.Start]}findLeftToken([e,t]){if(t===kt.End){const K=e.allChildren;if(K.length>0){const ae=K[K.length-1];return[ae,ae.isText?kt.Text:kt.End]}return[e,kt.Start]}const n=e.parent,g=n.allChildren,P=g.indexOf(e);if(n&&P===0)return[n,kt.Start];const j=g[P-1];return[j,j.isText?kt.Text:kt.End]}}class mn extends Rt{constructor(e,t,n,g,P,j,K){super(e,K),this.fromPos=t,this.toPos=n,this.contents=g,this.splitLevel=P,this.maxCreatedAtMapByActor=j}static create(e,t,n,g,P,j,K){return new mn(e,t,n,g,P,j,K)}execute(e){var t;const n=e.findByCreatedAt(this.getParentCreatedAt());n||b.fatal(`fail to find ${this.getParentCreatedAt()}`),n instanceof dt||b.fatal("fail to execute, only Tree can execute edit");const g=this.getExecutedAt(),P=n,[j]=P.edit([this.fromPos,this.toPos],(t=this.contents)===null||t===void 0?void 0:t.map(K=>K.deepcopy()),this.splitLevel,g,(()=>{let K=g.getDelimiter();return this.contents!==void 0&&(K+=this.contents.length),()=>Ot.of(g.getLamport(),++K,g.getActorID())})(),this.maxCreatedAtMapByActor);return this.fromPos.equals(this.toPos)||e.registerElementHasRemovedNodes(P),{opInfos:j.map(({from:K,to:ae,value:ye,splitLevel:Re,fromPath:qe,toPath:ke})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:K,to:ae,value:ye,splitLevel:Re,fromPath:qe,toPath:ke}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`,g=this.contents;return`${e}.EDIT(${t},${n},${g==null?void 0:g.join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Bn{constructor(e,t,n){this.clientSeq=e,this.lamport=t,this.actor=n}static of(e,t,n){return new Bn(e,t,n)}next(){return new Bn(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new Bn(this.clientSeq,e,this.actor):new Bn(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return Ot.of(this.lamport,e,this.actor)}setActor(e){return new Bn(this.clientSeq,this.lamport,e)}getClientSeq(){return this.clientSeq}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return this.actor?`${this.lamport.toString()}:${this.actor.substring(22,24)}:${this.clientSeq}`:`${this.lamport.toString()}:nil:${this.clientSeq}`}}const ni=new Bn(0,Ye.fromInt(0,!0),qt);class br{constructor({id:e,operations:t,presenceChange:n,message:g}){this.id=e,this.operations=t||[],this.presenceChange=n,this.message=g}static create({id:e,operations:t,presenceChange:n,message:g}){return new br({id:e,operations:t,presenceChange:n,message:g})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,n){const g=[],P=[];for(const j of this.operations){const K=j.execute(e,n);if(!K)continue;const{opInfos:ae,reverseOp:ye}=K;g.push(...ae),ye&&P.unshift(ye)}return this.presenceChange&&(this.presenceChange.type===gt.Put?t.set(this.id.getActorID(),Ie(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:g,reverseOps:P}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}}class Jr{constructor(e,t,n,g,P,j){this.documentKey=e,this.checkpoint=t,this.isRemoved=n,this.changes=g,this.snapshot=P,this.minSyncedTicket=j}static create(e,t,n,g,P,j){return new Jr(e,t,n,g,P,j)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Ar{constructor(e,t){this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Ar(e,t)}increaseClientSeq(e){return e===0?this:new Ar(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,n=Math.max(this.clientSeq,e.clientSeq);return Ar.of(t,n)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const zi=new Ar(Ye.fromInt(0,!0),0);class Qn{constructor(e,t){this.createdAt=e,this.offset=t}static of(e,t){return new Qn(e,t)}static fromStruct(e){return Qn.of(Ot.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new Qn(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Ki=Qn.of(ot,0);class Kn{constructor(e,t){this.id=e,this.relativeOffset=t}static of(e,t){return new Kn(e,t)}static fromStruct(e){const t=Qn.fromStruct(e.id);return Kn.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Qn.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class dr extends Kt{constructor(e,t,n){super(t),this.id=e,this.removedAt=n}static create(e,t){return new dr(e,t)}static createComparator(){return(e,t)=>{const n=e.getCreatedAt().compare(t.getCreatedAt());return n!==0?n:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new dr(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Kn.of(this.id,0),Kn.of(this.id,this.getLength())]}deepcopy(){return new dr(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}}class kr{constructor(){this.head=dr.create(Ki),this.treeByIndex=new Bt,this.treeByID=new he(dr.createComparator()),this.removedNodeMap=new Map,this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new kr}edit(e,t,n,g){const[P,j]=this.findNodeWithSplit(e[1],t),[K,ae]=this.findNodeWithSplit(e[0],t),ye=this.findBetween(ae,j),[Re,qe,ke]=this.deleteNodes(ye,t,g),Ze=j?j.getID():P.getID();let mt=Kn.of(Ze,0);if(n){const bt=this.posToIndex(K.createPosRange()[1],!0),Pt=this.insertAfter(K,dr.create(Qn.of(t,0),n));Re.length&&Re[Re.length-1].from===bt?Re[Re.length-1].value=n:Re.push({actor:t.getActorID(),from:bt,to:bt,value:n}),mt=Kn.of(Pt.getID(),Pt.getContentLength())}for(const[bt,Pt]of ke)this.removedNodeMap.set(bt,Pt);return[mt,qe,Re]}indexToPos(e){const[t,n]=this.treeByIndex.find(e),g=t;return Kn.of(g.getID(),n)}findIndexesFromRange(e){const[t,n]=e;return[this.posToIndex(t,!1),this.posToIndex(n,!0)]}posToIndex(e,t){const n=e.getAbsoluteID(),g=t?this.findFloorNodePreferToLeft(n):this.findFloorNode(n);g||b.fatal(`the node of the given id should be found: ${n.toTestString()}`);const P=this.treeByIndex.indexOf(g),j=g.isRemoved()?0:n.getOffset()-g.getID().getOffset();return P+j}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new kr;let t=this.head.getNext(),n=e.head,g;for(;t;){if(g=e.insertAfter(n,t.deepcopy()),t.hasInsPrev()){const P=e.findNode(t.getInsPrevID());g.setInsPrev(P)}n=g,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const n=e.getNext();return t.setPrev(e),n&&n.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const n=e.getAbsoluteID();let g=this.findFloorNodePreferToLeft(n);const P=n.getOffset()-g.getID().getOffset();for(this.splitNode(g,P);g.hasNext()&&g.getNext().getCreatedAt().after(t);)g=g.getNext();return[g,g.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||b.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const n=[];let g=e;for(;g&&g!==t;)n.push(g),g=g.getNext();return n}splitNode(e,t){if(t>e.getContentLength()&&b.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const n=e.split(t);this.treeByIndex.updateWeight(n),this.insertAfter(e,n);const g=e.getInsNext();return g&&g.setInsPrev(n),n.setInsPrev(e),n}deleteNodes(e,t,n){if(!e.length)return[[],new Map,new Map];const[g,P]=this.filterNodes(e,t,n),j=new Map,K=new Map,ae=this.makeChanges(P,t);for(const ye of g){const Re=ye.getCreatedAt().getActorID();(!j.has(Re)||ye.getID().getCreatedAt().after(j.get(Re)))&&j.set(Re,ye.getID().getCreatedAt()),K.set(ye.getID().toIDString(),ye),ye.remove(t)}return this.deleteIndexNodes(P),[ae,j,K]}filterNodes(e,t,n){const g=!!n,P=[],j=[],[K,ae]=this.findEdgesOfCandidates(e);j.push(K);for(const ye of e){const Re=ye.getCreatedAt().getActorID(),qe=g?n.has(Re)?n.get(Re):ot:wt;ye.canDelete(t,qe)?P.push(ye):j.push(ye)}return j.push(ae),[P,j]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const n=[];let g,P;for(let j=0;j<e.length-1;j++){const K=e[j],ae=e[j+1];K.getNext()!=ae&&([g]=this.findIndexesFromRange(K.getNext().createPosRange()),ae?[,P]=this.findIndexesFromRange(ae.getPrev().createPosRange()):P=this.treeByIndex.length,g<P&&n.push({actor:t.getActorID(),from:g,to:P}))}return n.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const n=e[t],g=e[t+1];n.getNext()!=g&&this.treeByIndex.deleteRange(n,g)}}getRemovedNodesLen(){return this.removedNodeMap.size}purgeRemovedNodesBefore(e){let t=0;for(const[,n]of this.removedNodeMap)n.getRemovedAt()&&e.compare(n.getRemovedAt())>=0&&(this.treeByIndex.delete(n),this.purge(n),this.treeByID.remove(n.getID()),this.removedNodeMap.delete(n.getID().toIDString()),t++);return t}purge(e){const t=e.getPrev(),n=e.getNext(),g=e.getInsPrev(),P=e.getInsNext();t&&t.setNext(n),n&&n.setPrev(t),e.setPrev(void 0),e.setNext(void 0),g&&g.setInsNext(P),P&&P.setInsPrev(g),e.setInsPrev(void 0),e.setInsNext(void 0)}}const di=f=>f<0?Math.ceil(f):Math.floor(f);var tn;(function(f){f[f.IntegerCnt=0]="IntegerCnt",f[f.LongCnt=1]="LongCnt"})(tn||(tn={}));class jn extends rt{constructor(e,t,n){switch(super(n),this.valueType=e,e){case tn.IntegerCnt:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=Ye.fromNumber(t).toInt():this.value=di(t):this.value=t.toInt();break;case tn.LongCnt:typeof t=="number"?this.value=Ye.fromNumber(t):this.value=t;break;default:throw new de(te.Unimplemented,`unimplemented type: ${e}`)}}static create(e,t,n){return new jn(e,t,n)}static valueFromBytes(e,t){switch(e){case tn.IntegerCnt:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case tn.LongCnt:return Ye.fromBytesLE(Array.from(t));default:throw new de(te.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{id:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=jn.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Ye?tn.LongCnt:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?tn.LongCnt:tn.IntegerCnt;default:return}}static isSupport(e){return!!jn.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===tn.IntegerCnt||e===tn.LongCnt}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case tn.IntegerCnt:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case tn.LongCnt:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new de(te.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(n){if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`)}return t(this),t(e),this.valueType===tn.LongCnt?this.value=this.value.add(e.getValue()):e.getType()===Ve.Long?this.value=this.value+e.getValue().toInt():this.value=Ye.fromNumber(this.value+di(e.getValue())).toInt(),this}}class Ir extends Rt{constructor(e,t,n){super(e,n),this.value=t}static create(e,t,n){return new Ir(e,t,n)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||b.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof jn||b.fatal("fail to execute, only Counter can execute increase");const n=t,g=this.value.deepcopy();return n.increase(g),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:g.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),n=e.getType()===Ve.Long?e.getValue().multiply(-1):e.getValue()*-1;return Ir.create(this.getParentCreatedAt(),Ct.of(n,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class xr extends Rt{constructor(e,t,n,g,P){super(e,P),this.fromPos=t,this.toPos=n,this.attributes=g}static create(e,t,n,g,P){return new xr(e,t,n,g,P)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||b.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof dt||b.fatal("fail to execute, only Tree can execute edit");const n={};return[...this.attributes].forEach(([j,K])=>n[j]=K),{opInfos:t.style([this.fromPos,this.toPos],n,this.getExecutedAt()).map(({from:j,to:K,value:ae,fromPath:ye})=>({type:"tree-style",from:j,to:K,value:ae,fromPath:ye,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,n=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${n},${Object.entries(this.attributes||{}).map(([g,P])=>`${g}:"${P}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}}function Wi(f){const e=new Ne.Presence,t=e.data;for(const[n,g]of Object.entries(f))t[n]=JSON.stringify(g);return e}function Yi(f){if(f.type===gt.Put)return new Ne.PresenceChange({type:Ne.PresenceChange_ChangeType.PUT,presence:Wi(f.presence)});if(f.type===gt.Clear)return new Ne.PresenceChange({type:Ne.PresenceChange_ChangeType.CLEAR});throw new de(te.Unimplemented,"unimplemented type")}function Hi(f){return new Ne.Checkpoint({serverSeq:f.getServerSeqAsString(),clientSeq:f.getClientSeq()})}function Gi(f){return new Ne.ChangeID({clientSeq:f.getClientSeq(),lamport:f.getLamportAsString(),actorId:li(f.getActorID())})}function Qe(f){if(!!f)return new Ne.TimeTicket({lamport:f.getLamportAsString(),delimiter:f.getDelimiter(),actorId:li(f.getActorID())})}function pi(f){switch(f){case Ve.Null:return Ne.ValueType.NULL;case Ve.Boolean:return Ne.ValueType.BOOLEAN;case Ve.Integer:return Ne.ValueType.INTEGER;case Ve.Long:return Ne.ValueType.LONG;case Ve.Double:return Ne.ValueType.DOUBLE;case Ve.String:return Ne.ValueType.STRING;case Ve.Bytes:return Ne.ValueType.BYTES;case Ve.Date:return Ne.ValueType.DATE;default:throw new de(te.Unsupported,`unsupported type: ${f}`)}}function gi(f){switch(f){case tn.IntegerCnt:return Ne.ValueType.INTEGER_CNT;case tn.LongCnt:return Ne.ValueType.LONG_CNT;default:throw new de(te.Unsupported,`unsupported type: ${f}`)}}function ri(f){if(f instanceof vt)return new Ne.JSONElementSimple({type:Ne.ValueType.JSON_OBJECT,createdAt:Qe(f.getCreatedAt()),value:Ai(f)});if(f instanceof on)return new Ne.JSONElementSimple({type:Ne.ValueType.JSON_ARRAY,createdAt:Qe(f.getCreatedAt()),value:So(f)});if(f instanceof en)return new Ne.JSONElementSimple({type:Ne.ValueType.TEXT,createdAt:Qe(f.getCreatedAt())});if(f instanceof Ct)return new Ne.JSONElementSimple({type:pi(f.getType()),createdAt:Qe(f.getCreatedAt()),value:f.toBytes()});if(f instanceof jn)return new Ne.JSONElementSimple({type:gi(f.getType()),createdAt:Qe(f.getCreatedAt()),value:f.toBytes()});if(f instanceof dt)return new Ne.JSONElementSimple({type:Ne.ValueType.TREE,createdAt:Qe(f.getCreatedAt()),value:ko(f)});throw new de(te.Unimplemented,"unimplemented element")}function Xi(f){return new Ne.TextNodeID({createdAt:Qe(f.getCreatedAt()),offset:f.getOffset()})}function $r(f){return new Ne.TextNodePos({createdAt:Qe(f.getID().getCreatedAt()),offset:f.getID().getOffset(),relativeOffset:f.getRelativeOffset()})}function Vr(f){return new Ne.TreePos({parentId:Mr(f.getParentID()),leftSiblingId:Mr(f.getLeftSiblingID())})}function Mr(f){return new Ne.TreeNodeID({createdAt:Qe(f.getCreatedAt()),offset:f.getOffset()})}function Zi(f){const e=new Ne.Operation;if(f instanceof kn){const t=f,n=new Ne.Operation_Set;n.parentCreatedAt=Qe(t.getParentCreatedAt()),n.key=t.getKey(),n.value=ri(t.getValue()),n.executedAt=Qe(t.getExecutedAt()),e.body.case="set",e.body.value=n}else if(f instanceof $n){const t=f,n=new Ne.Operation_Add;n.parentCreatedAt=Qe(t.getParentCreatedAt()),n.prevCreatedAt=Qe(t.getPrevCreatedAt()),n.value=ri(t.getValue()),n.executedAt=Qe(t.getExecutedAt()),e.body.case="add",e.body.value=n}else if(f instanceof Xn){const t=f,n=new Ne.Operation_Move;n.parentCreatedAt=Qe(t.getParentCreatedAt()),n.prevCreatedAt=Qe(t.getPrevCreatedAt()),n.createdAt=Qe(t.getCreatedAt()),n.executedAt=Qe(t.getExecutedAt()),e.body.case="move",e.body.value=n}else if(f instanceof Dn){const t=f,n=new Ne.Operation_Remove;n.parentCreatedAt=Qe(t.getParentCreatedAt()),n.createdAt=Qe(t.getCreatedAt()),n.executedAt=Qe(t.getExecutedAt()),e.body.case="remove",e.body.value=n}else if(f instanceof Zn){const t=f,n=new Ne.Operation_Edit;n.parentCreatedAt=Qe(t.getParentCreatedAt()),n.from=$r(t.getFromPos()),n.to=$r(t.getToPos());const g=n.createdAtMapByActor;for(const[j,K]of t.getMaxCreatedAtMapByActor())g[j]=Qe(K);n.content=t.getContent();const P=n.attributes;for(const[j,K]of t.getAttributes())P[j]=K;n.executedAt=Qe(t.getExecutedAt()),e.body.case="edit",e.body.value=n}else if(f instanceof En){const t=f,n=new Ne.Operation_Style;n.parentCreatedAt=Qe(t.getParentCreatedAt()),n.from=$r(t.getFromPos()),n.to=$r(t.getToPos());const g=n.createdAtMapByActor;for(const[j,K]of t.getMaxCreatedAtMapByActor())g[j]=Qe(K);const P=n.attributes;for(const[j,K]of t.getAttributes())P[j]=K;n.executedAt=Qe(t.getExecutedAt()),e.body.case="style",e.body.value=n}else if(f instanceof Ir){const t=f,n=new Ne.Operation_Increase;n.parentCreatedAt=Qe(t.getParentCreatedAt()),n.value=ri(t.getValue()),n.executedAt=Qe(t.getExecutedAt()),e.body.case="increase",e.body.value=n}else if(f instanceof mn){const t=f,n=new Ne.Operation_TreeEdit,g=n.createdAtMapByActor;for(const[P,j]of t.getMaxCreatedAtMapByActor())g[P]=Qe(j);n.parentCreatedAt=Qe(t.getParentCreatedAt()),n.from=Vr(t.getFromPos()),n.to=Vr(t.getToPos()),n.contents=oo(t.getContents()),n.splitLevel=t.getSplitLevel(),n.executedAt=Qe(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=n}else if(f instanceof xr){const t=f,n=new Ne.Operation_TreeStyle;n.parentCreatedAt=Qe(t.getParentCreatedAt()),n.from=Vr(t.getFromPos()),n.to=Vr(t.getToPos());const g=n.attributes;for(const[P,j]of t.getAttributes())g[P]=j;n.executedAt=Qe(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=n}else throw new de(te.Unimplemented,"unimplemented operation");return e}function Qi(f){const e=[];for(const t of f)e.push(Zi(t));return e}function eo(f){const e=new Ne.Change({id:Gi(f.getID()),message:f.getMessage()});return f.hasOperations()&&(e.operations=Qi(f.getOperations())),f.hasPresenceChange()&&(e.presenceChange=Yi(f.getPresenceChange())),e}function to(f){const e=[];for(const t of f)e.push(eo(t));return e}function no(f){const e=[];for(const t of f)e.push(new Ne.RHTNode({key:t.getStrKey(),element:ii(t.getValue())}));return e}function ro(f){const e=[];for(const t of f)e.push(new Ne.RGANode({element:ii(t.getValue())}));return e}function io(f){const e=[];for(const t of f){const n=new Ne.TextNode;n.id=Xi(t.getID()),n.value=t.getValue().getContent(),n.removedAt=Qe(t.getRemovedAt());const g=n.attributes,P=t.getValue().getAttrs();for(const j of P){const K=new Ne.NodeAttr;K.value=j.getValue(),K.updatedAt=Qe(j.getUpdatedAt()),g[j.getKey()]=K}e.push(n)}return e}function oo(f){const e=[];if(!f||!f.length)return e;for(const t of f)e.push(new Ne.TreeNodes({content:mi(t)}));return e}function mi(f){if(!f)return[];const e=[];return dn(f,(t,n)=>{const g=new Ne.TreeNode({id:Mr(t.id),type:t.type,removedAt:Qe(t.removedAt),depth:n});if(t.isText&&(g.value=t.value),t.insPrevID&&(g.insPrevId=Mr(t.insPrevID)),t.insNextID&&(g.insNextId=Mr(t.insNextID)),t.attrs)for(const P of t.attrs)g.attributes[P.getKey()]=new Ne.NodeAttr({value:P.getValue(),updatedAt:Qe(P.getUpdatedAt())});e.push(g)}),e}function so(f){const e=new Ne.JSONElement;return e.body.case="jsonObject",e.body.value=new Ne.JSONElement_JSONObject({nodes:no(f.getRHT()),createdAt:Qe(f.getCreatedAt()),movedAt:Qe(f.getMovedAt()),removedAt:Qe(f.getRemovedAt())}),e}function yi(f){const e=new Ne.JSONElement;return e.body.case="jsonArray",e.body.value=new Ne.JSONElement_JSONArray({nodes:ro(f.getElements()),createdAt:Qe(f.getCreatedAt()),movedAt:Qe(f.getMovedAt()),removedAt:Qe(f.getRemovedAt())}),e}function ao(f){const e=new Ne.JSONElement;return e.body.case="primitive",e.body.value=new Ne.JSONElement_Primitive({type:pi(f.getType()),value:f.toBytes(),createdAt:Qe(f.getCreatedAt()),movedAt:Qe(f.getMovedAt()),removedAt:Qe(f.getRemovedAt())}),e}function uo(f){const e=new Ne.JSONElement;return e.body.case="text",e.body.value=new Ne.JSONElement_Text({nodes:io(f.getRGATreeSplit()),createdAt:Qe(f.getCreatedAt()),movedAt:Qe(f.getMovedAt()),removedAt:Qe(f.getRemovedAt())}),e}function lo(f){const e=new Ne.JSONElement;return e.body.case="counter",e.body.value=new Ne.JSONElement_Counter({type:gi(f.getType()),value:f.toBytes(),createdAt:Qe(f.getCreatedAt()),movedAt:Qe(f.getMovedAt()),removedAt:Qe(f.getRemovedAt())}),e}function vi(f){const e=new Ne.JSONElement;return e.body.case="tree",e.body.value=new Ne.JSONElement_Tree({nodes:mi(f.getRoot()),createdAt:Qe(f.getCreatedAt()),movedAt:Qe(f.getMovedAt()),removedAt:Qe(f.getRemovedAt())}),e}function ii(f){if(f instanceof vt)return so(f);if(f instanceof on)return yi(f);if(f instanceof Ct)return ao(f);if(f instanceof en)return uo(f);if(f instanceof jn)return lo(f);if(f instanceof dt)return vi(f);throw new de(te.Unimplemented,"unimplemented element")}function co(f){return new Ne.ChangePack({documentKey:f.getDocumentKey(),checkpoint:Hi(f.getCheckpoint()),isRemoved:f.getIsRemoved(),changes:to(f.getChanges()),snapshot:f.getSnapshot(),minSyncedTicket:Qe(f.getMinSyncedTicket())})}function fo(f){return Bn.of(f.clientSeq,Ye.fromString(f.lamport,!0),ui(f.actorId))}function tt(f){if(!!f)return Ot.of(Ye.fromString(f.lamport,!0),f.delimiter,ui(f.actorId))}function oi(f){const e={};return Object.entries(f.data).forEach(([t,n])=>{e[t]=JSON.parse(n)}),e}function ho(f){const e=f.type;if(e===Ne.PresenceChange_ChangeType.PUT){const t=oi(f.presence);return{type:gt.Put,presence:t}}if(e===Ne.PresenceChange_ChangeType.CLEAR)return{type:gt.Clear};throw new de(te.Unsupported,`unsupported type: ${e}`)}function po(f){const e=new Map;return Object.entries(f).forEach(([t,n])=>{e.set(t,oi(n))}),e}function bi(f){switch(f){case Ne.ValueType.NULL:return Ve.Null;case Ne.ValueType.BOOLEAN:return Ve.Boolean;case Ne.ValueType.INTEGER:return Ve.Integer;case Ne.ValueType.LONG:return Ve.Long;case Ne.ValueType.DOUBLE:return Ve.Double;case Ne.ValueType.STRING:return Ve.String;case Ne.ValueType.BYTES:return Ve.Bytes;case Ne.ValueType.DATE:return Ve.Date}throw new de(te.Unimplemented,`unimplemented value type: ${f}`)}function zr(f){switch(f){case Ne.ValueType.INTEGER_CNT:return tn.IntegerCnt;case Ne.ValueType.LONG_CNT:return tn.LongCnt}throw new de(te.Unimplemented,`unimplemented value type: ${f}`)}function si(f){switch(f.type){case Ne.ValueType.JSON_OBJECT:return f.value?Si(f.value):vt.create(tt(f.createdAt));case Ne.ValueType.JSON_ARRAY:return f.value?No(f.value):on.create(tt(f.createdAt));case Ne.ValueType.TEXT:return en.create(kr.create(),tt(f.createdAt));case Ne.ValueType.TREE:return Ao(f.value);case Ne.ValueType.NULL:case Ne.ValueType.BOOLEAN:case Ne.ValueType.INTEGER:case Ne.ValueType.LONG:case Ne.ValueType.DOUBLE:case Ne.ValueType.STRING:case Ne.ValueType.BYTES:case Ne.ValueType.DATE:return Ct.of(Ct.valueFromBytes(bi(f.type),f.value),tt(f.createdAt));case Ne.ValueType.INTEGER_CNT:case Ne.ValueType.LONG_CNT:return jn.create(zr(f.type),jn.valueFromBytes(zr(f.type),f.value),tt(f.createdAt))}}function Kr(f){return Kn.of(Qn.of(tt(f.createdAt),f.offset),f.relativeOffset)}function Ti(f){return Qn.of(tt(f.createdAt),f.offset)}function go(f){const e=Nn.create(f.value);Object.entries(f.attributes).forEach(([n,g])=>{e.setAttr(n,g.value,tt(g.updatedAt))});const t=dr.create(Ti(f.id),e);return t.remove(tt(f.removedAt)),t}function Wr(f){return Ae.of(Br(f.parentId),Br(f.leftSiblingId))}function Br(f){return be.of(tt(f.createdAt),f.offset)}function mo(f){if(!f.length)return;const e=[];return f.forEach(t=>{const n=wi(t.content);e.push(n)}),e}function wi(f){if(f.length===0)return;const e=[];for(const n of f)e.push(yo(n));const t=e[e.length-1];for(let n=e.length-2;n>=0;n--){let g;for(let P=n+1;P<e.length;P++)if(f[n].depth-1===f[P].depth){g=e[P];break}g.prepend(e[n])}return dt.create(t,ot).getRoot()}function yo(f){const e=Br(f.id),t=De.create(e,f.type);if(t.isText)t.value=f.value;else{const n=Rn.create();Object.entries(f.attributes).forEach(([g,P])=>{n.set(g,P.value,tt(P.updatedAt))}),t.attrs=n}return f.insPrevId&&(t.insPrevID=Br(f.insPrevId)),f.insPrevId&&(t.insNextID=Br(f.insNextId)),t.removedAt=tt(f.removedAt),t}function vo(f){const e=[];for(const t of f){let n;if(t.body.case==="set"){const g=t.body.value;n=kn.create(g.key,si(g.value),tt(g.parentCreatedAt),tt(g.executedAt))}else if(t.body.case==="add"){const g=t.body.value;n=$n.create(tt(g.parentCreatedAt),tt(g.prevCreatedAt),si(g.value),tt(g.executedAt))}else if(t.body.case==="move"){const g=t.body.value;n=Xn.create(tt(g.parentCreatedAt),tt(g.prevCreatedAt),tt(g.createdAt),tt(g.executedAt))}else if(t.body.case==="remove"){const g=t.body.value;n=Dn.create(tt(g.parentCreatedAt),tt(g.createdAt),tt(g.executedAt))}else if(t.body.case==="edit"){const g=t.body.value,P=new Map;Object.entries(g.createdAtMapByActor).forEach(([K,ae])=>{P.set(K,tt(ae))});const j=new Map;Object.entries(g.attributes).forEach(([K,ae])=>{j.set(K,ae)}),n=Zn.create(tt(g.parentCreatedAt),Kr(g.from),Kr(g.to),P,g.content,j,tt(g.executedAt))}else if(t.body.case==="style"){const g=t.body.value,P=new Map;Object.entries(g.createdAtMapByActor).forEach(([K,ae])=>{P.set(K,tt(ae))});const j=new Map;Object.entries(g.attributes).forEach(([K,ae])=>{j.set(K,ae)}),n=En.create(tt(g.parentCreatedAt),Kr(g.from),Kr(g.to),P,j,tt(g.executedAt))}else{if(t.body.case==="select")continue;if(t.body.case==="increase"){const g=t.body.value;n=Ir.create(tt(g.parentCreatedAt),si(g.value),tt(g.executedAt))}else if(t.body.case==="treeEdit"){const g=t.body.value,P=new Map;Object.entries(g.createdAtMapByActor).forEach(([j,K])=>{P.set(j,tt(K))}),n=mn.create(tt(g.parentCreatedAt),Wr(g.from),Wr(g.to),mo(g.contents),g.splitLevel,P,tt(g.executedAt))}else if(t.body.case==="treeStyle"){const g=t.body.value,P=new Map;Object.entries(g.attributes).forEach(([j,K])=>{P.set(j,K)}),n=xr.create(tt(g.parentCreatedAt),Wr(g.from),Wr(g.to),P,tt(g.executedAt))}else throw new de(te.Unimplemented,"unimplemented operation")}e.push(n)}return e}function _i(f){const e=[];for(const t of f)e.push(br.create({id:fo(t.id),operations:vo(t.operations),presenceChange:t.presenceChange?ho(t.presenceChange):void 0,message:t.message}));return e}function bo(f){return Ar.of(Ye.fromString(f.serverSeq,!0),f.clientSeq)}function To(f){return Jr.create(f.documentKey,bo(f.checkpoint),f.isRemoved,_i(f.changes),f.snapshot,tt(f.minSyncedTicket))}function Ei(f){const e=new pt;for(const n of f.nodes){const g=ai(n.element);e.set(n.key,g,g.getPositionedAt())}const t=new vt(tt(f.createdAt),e);return t.setMovedAt(tt(f.movedAt)),t.setRemovedAt(tt(f.removedAt)),t}function Oi(f){const e=new Jn;for(const n of f.nodes)e.insert(ai(n.element));const t=new on(tt(f.createdAt),e);return t.setMovedAt(tt(f.movedAt)),t.setRemovedAt(tt(f.removedAt)),t}function wo(f){const e=Ct.of(Ct.valueFromBytes(bi(f.type),f.value),tt(f.createdAt));return e.setMovedAt(tt(f.movedAt)),e.setRemovedAt(tt(f.removedAt)),e}function _o(f){const e=new kr;let t=e.getHead();for(const g of f.nodes){const P=e.insertAfter(t,go(g));g.insPrevId&&P.setInsPrev(e.findNode(Ti(g.insPrevId))),t=P}const n=new en(e,tt(f.createdAt));return n.setMovedAt(tt(f.movedAt)),n.setRemovedAt(tt(f.removedAt)),n}function Eo(f){const e=jn.create(zr(f.type),jn.valueFromBytes(zr(f.type),f.value),tt(f.createdAt));return e.setMovedAt(tt(f.movedAt)),e.setRemovedAt(tt(f.removedAt)),e}function Ni(f){const e=wi(f.nodes);return dt.create(e,tt(f.createdAt))}function ai(f){if(f.body.case==="jsonObject")return Ei(f.body.value);if(f.body.case==="jsonArray")return Oi(f.body.value);if(f.body.case==="primitive")return wo(f.body.value);if(f.body.case==="text")return _o(f.body.value);if(f.body.case==="counter")return Eo(f.body.value);if(f.body.case==="tree")return Ni(f.body.value);throw new de(te.Unimplemented,"unimplemented element")}function Oo(f){if(!f)return{root:vt.create(ot),presences:new Map};const e=Ne.Snapshot.fromBinary(f);return{root:ai(e.root),presences:po(e.presences)}}function Si(f){if(!f)throw new Error("bytes is empty");const e=Ne.JSONElement.fromBinary(f);return Ei(e.body.value)}function Ai(f){return ii(f).toBinary()}function No(f){if(!f)throw new Error("bytes is empty");const e=Ne.JSONElement.fromBinary(f);return Oi(e.body.value)}function So(f){return yi(f).toBinary()}function Ao(f){if(!f)throw new Error("bytes is empty");const e=Ne.JSONElement.fromBinary(f);return Ni(e.body.value)}function ko(f){return vi(f).toBinary()}function Io(f){return f?Array.from(f).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function ui(f){return Io(f)}function xo(f){return new Uint8Array(f.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function li(f){return xo(f)}const er={fromPresence:oi,toChangePack:co,fromChangePack:To,fromChanges:_i,objectToBytes:Ai,bytesToObject:Si,bytesToSnapshot:Oo,toHexString:ui,toUint8Array:li};class Po{constructor(e,t,n,g){this.reconnectStreamDelay=e,this.doc=t,this.docID=n,this.isRealtimeSync=g,this.syncMode=lr.PushPull,this.remoteChangeEventReceived=!1}changeRealtimeSync(e){return this.isRealtimeSync===e?!1:e?(this.isRealtimeSync=!0,!0):(this.cancelWatchStream(),this.isRealtimeSync=!1,!0)}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.isRealtimeSync&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}class Pr{constructor(e,t,n,g){this.id=e,this.delimiter=_n,this.root=t,this.operations=[],this.previousPresence=Ie(n),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=g}static create(e,t,n,g){return new Pr(e,t,n,g)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerElementHasRemovedNodes(e){this.root.registerElementHasRemovedNodes(e)}getChange(){return br.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const n of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(n):this.reversePresenceKeys.delete(n)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class jr{constructor(e){this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.removedElementSetByCreatedAt=new Set,this.elementHasRemovedNodesSetByCreatedAt=new Set,this.opsForTest=[],this.registerElement(e,void 0)}static create(){return new jr(vt.create(ot))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const n=[];for(;t.parent;){const g=t.element.getCreatedAt(),P=t.parent.subPathOf(g);P===void 0&&b.fatal(`cant find the given element: ${g.toIDString()}`),n.unshift(P),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return n.unshift("$"),n}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof Yt&&e.getDescendants((n,g)=>(this.registerElement(n,g),!1))}deregisterElement(e){let t=0;const n=g=>{const P=g.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(P),this.removedElementSetByCreatedAt.delete(P),t++};return n(e),e instanceof Yt&&e.getDescendants(g=>(n(g),!1)),t}registerRemovedElement(e){this.removedElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerElementHasRemovedNodes(e){this.elementHasRemovedNodesSetByCreatedAt.add(e.getCreatedAt().toIDString())}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getRemovedElementSetSize(){return this.removedElementSetByCreatedAt.size}getObject(){return this.rootObject}getGarbageLen(){let e=0;const t=new Set;for(const n of this.removedElementSetByCreatedAt){t.add(n);const g=this.elementPairMapByCreatedAt.get(n);g.element instanceof Yt&&g.element.getDescendants(P=>(t.add(P.getCreatedAt().toIDString()),!1))}e+=t.size;for(const n of this.elementHasRemovedNodesSetByCreatedAt){const P=this.elementPairMapByCreatedAt.get(n).element;e+=P.getRemovedNodesLen()}return e}deepcopy(){return new jr(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const n of this.removedElementSetByCreatedAt){const g=this.elementPairMapByCreatedAt.get(n);g.element.getRemovedAt()&&e.compare(g.element.getRemovedAt())>=0&&(g.parent.purge(g.element),t+=this.deregisterElement(g.element))}for(const n of this.elementHasRemovedNodesSetByCreatedAt){const P=this.elementPairMapByCreatedAt.get(n).element,j=P.purgeRemovedNodesBefore(e);j>0&&this.elementHasRemovedNodesSetByCreatedAt.delete(P.getCreatedAt().toIDString()),t+=j}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function ki(f,e){const t=new Fr(f);return new Proxy(e,t.getHandlers())}class Fr{constructor(e){this.context=e,this.handlers={set:(t,n,g)=>(b.isEnabled(D.Trivial)&&b.trivial(`obj[${n}]=${JSON.stringify(g)}`),Fr.setInternal(e,t,n,g),!0),get:(t,n)=>(b.isEnabled(D.Trivial)&&b.trivial(`obj[${n}]`),n==="getID"?()=>t.getCreatedAt():n==="toJSON"||n==="toString"?()=>t.toJSON():n==="toJS"?()=>t.toJS():n==="toJSForTest"?()=>t.toJSForTest():Tr(e,t.get(n))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,n)=>(b.isEnabled(D.Trivial)&&b.trivial(`obj[${n}]`),Fr.deleteInternal(e,t,n),!0)}}static setInternal(e,t,n,g){if(n.includes("."))throw new de(te.InvalidObjectKey,"key must not contain the '.'.");const P=e.issueTimeTicket(),j=Xr(e,g,P),K=t.set(n,j,P);e.registerElement(j,t),K&&e.registerRemovedElement(K),e.push(kn.create(n,j.deepcopy(),t.getCreatedAt(),P))}static buildObjectMembers(e,t){const n={};for(const[g,P]of Object.entries(t)){if(g.includes("."))throw new de(te.InvalidObjectKey,"key must not contain the '.'.");const j=e.issueTimeTicket(),K=Xr(e,P,j);n[g]=K}return n}static deleteInternal(e,t,n){const g=e.issueTimeTicket(),P=t.deleteByKey(n,g);!P||(e.push(Dn.create(t.getCreatedAt(),P.getCreatedAt(),g)),e.registerRemovedElement(P))}getHandlers(){return this.handlers}}function Do(f,e){const t=new Ht(f,e);return new Proxy(e,t.getHandlers())}function Ro(f){return typeof f=="string"||f instanceof String?!isNaN(f):!1}function Co(f){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(f)}class Ht{constructor(e,t){this.context=e,this.array=t,this.handlers={get:(n,g,P)=>g==="getID"?()=>n.getCreatedAt():g==="getElementByID"?j=>{const K=n.getByID(j);if(!(!K||K.isRemoved()))return pr(e,K)}:g==="getElementByIndex"?j=>{const K=n.get(j);return pr(e,K)}:g==="getLast"?()=>pr(e,n.getLast()):g==="deleteByID"?j=>{const K=Ht.deleteInternalByID(e,n,j);return pr(e,K)}:g==="insertAfter"?(j,K)=>{const ae=Ht.insertAfterInternal(e,n,j,K);return pr(e,ae)}:g==="insertBefore"?(j,K)=>{const ae=Ht.insertBeforeInternal(e,n,j,K);return pr(e,ae)}:g==="moveBefore"?(j,K)=>{Ht.moveBeforeInternal(e,n,j,K)}:g==="moveAfter"?(j,K)=>{Ht.moveAfterInternal(e,n,j,K)}:g==="moveFront"?j=>{Ht.moveFrontInternal(e,n,j)}:g==="moveLast"?j=>{Ht.moveLastInternal(e,n,j)}:Ro(g)?Tr(e,n.get(Number(g))):g==="push"?j=>Ht.pushInternal(e,n,j):g==="splice"?(j,K,...ae)=>Ht.splice(e,n,j,K,...ae):g==="length"?n.length:typeof g=="symbol"&&g===Symbol.iterator?Ht.iteratorInternal.bind(this,e,n):g==="includes"?(j,K)=>Ht.includes(e,n,j,K):g==="indexOf"?(j,K)=>Ht.indexOf(e,n,j,K):g==="lastIndexOf"?(j,K)=>Ht.lastIndexOf(e,n,j,K):g==="toTestString"?()=>Ht.toTestString(n):typeof g=="string"&&Co(g)?(...j)=>{const K=Array.from(n).map(ae=>Tr(e,ae));return Array.prototype[g].apply(K,j)}:Reflect.get(n,g,P),deleteProperty:(n,g)=>(b.isEnabled(D.Trivial)&&b.trivial(`array[${g}]`),Ht.deleteInternalByIndex(e,n,Number.parseInt(g)),!0)}}static*iteratorInternal(e,t){for(const n of t)yield pr(e,n)}static buildArrayElements(e,t){const n=[];for(const g of t){const P=e.issueTimeTicket(),j=Xr(e,g,P);n.push(j)}return n}static pushInternal(e,t,n){return Ht.insertAfterInternal(e,t,t.getLastCreatedAt(),n),t.length}static moveBeforeInternal(e,t,n,g){const P=e.issueTimeTicket(),j=t.getPrevCreatedAt(n);t.moveAfter(j,g,P),e.push(Xn.create(t.getCreatedAt(),j,g,P))}static moveAfterInternal(e,t,n,g){const P=e.issueTimeTicket();t.moveAfter(n,g,P),e.push(Xn.create(t.getCreatedAt(),n,g,P))}static moveFrontInternal(e,t,n){const g=e.issueTimeTicket(),P=t.getHead();t.moveAfter(P.getCreatedAt(),n,g),e.push(Xn.create(t.getCreatedAt(),P.getCreatedAt(),n,g))}static moveLastInternal(e,t,n){const g=e.issueTimeTicket(),P=t.getLastCreatedAt();t.moveAfter(P,n,g),e.push(Xn.create(t.getCreatedAt(),P,n,g))}static insertAfterInternal(e,t,n,g){const P=e.issueTimeTicket(),j=Xr(e,g,P);return t.insertAfter(n,j),e.registerElement(j,t),e.push($n.create(t.getCreatedAt(),n,j.deepcopy(),P)),j}static insertBeforeInternal(e,t,n,g){return Ht.insertAfterInternal(e,t,t.getPrevCreatedAt(n),g)}static deleteInternalByIndex(e,t,n){const g=e.issueTimeTicket(),P=t.deleteByIndex(n,g);if(!!P)return e.push(Dn.create(t.getCreatedAt(),P.getCreatedAt(),g)),e.registerRemovedElement(P),P}static deleteInternalByID(e,t,n){const g=e.issueTimeTicket(),P=t.delete(n,g);return e.push(Dn.create(t.getCreatedAt(),P.getCreatedAt(),g)),e.registerRemovedElement(P),P}static splice(e,t,n,g,...P){const j=t.length,K=n>=0?Math.min(n,j):Math.max(j+n,0),ae=g===void 0?j:g<0?K:Math.min(K+g,j),ye=[];for(let Re=K;Re<ae;Re++){const qe=Ht.deleteInternalByIndex(e,t,K);if(qe){const ke=qe.deepcopy();ke.setRemovedAt(),ye.push(Tr(e,ke))}}if(P){let Re=K===0?t.getHead().getID():t.get(K-1).getID();for(const qe of P)Re=Ht.insertAfterInternal(e,t,Re,qe).getID()}return ye}static includes(e,t,n,g){var P;const j=t.length,K=g===void 0?0:g<0?Math.max(g+j,0):g;if(K>=j)return!1;if(Ct.isSupport(n))return Array.from(t).map(ye=>Tr(e,ye)).includes(n,K);for(let ae=K;ae<j;ae++)if(((P=t.get(ae))===null||P===void 0?void 0:P.getID())===n.getID())return!0;return!1}static indexOf(e,t,n,g){var P;const j=t.length,K=g===void 0?0:g<0?Math.max(g+j,0):g;if(K>=j)return-1;if(Ct.isSupport(n))return Array.from(t).map(ye=>Tr(e,ye)).indexOf(n,K);for(let ae=K;ae<j;ae++)if(((P=t.get(ae))===null||P===void 0?void 0:P.getID())===n.getID())return ae;return-1}static lastIndexOf(e,t,n,g){var P;const j=t.length,K=g===void 0||g>=j?j-1:g<0?g+j:g;if(K<0)return-1;if(Ct.isSupport(n))return Array.from(t).map(ye=>Tr(e,ye)).lastIndexOf(n,K);for(let ae=K;ae>0;ae--)if(((P=t.get(ae))===null||P===void 0?void 0:P.getID())===n.getID())return ae;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Yr{constructor(e,t){this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,n,g){if(!this.context||!this.text){b.fatal("it is not initialized yet");return}if(e>t){b.fatal("from should be less than or equal to to");return}const P=this.text.indexRangeToPosRange(e,t);b.isEnabled(D.Debug)&&b.debug(`EDIT: f:${e}->${P[0].toTestString()}, t:${t}->${P[1].toTestString()} c:${n}`);const j=g?Xe(g):void 0,K=this.context.issueTimeTicket(),[ae,,ye]=this.text.edit(P,n,K,j);return this.context.push(new Zn(this.text.getCreatedAt(),P[0],P[1],ae,n,j?new Map(Object.entries(j)):new Map,K)),P[0].equals(P[1])||this.context.registerElementHasRemovedNodes(this.text),this.text.findIndexesFromRange(ye)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,n){if(!this.context||!this.text)return b.fatal("it is not initialized yet"),!1;if(e>t)return b.fatal("from should be less than or equal to to"),!1;const g=this.text.indexRangeToPosRange(e,t);b.isEnabled(D.Debug)&&b.debug(`STYL: f:${e}->${g[0].toTestString()}, t:${t}->${g[1].toTestString()} a:${JSON.stringify(n)}`);const P=Xe(n),j=this.context.issueTimeTicket(),[K]=this.text.setStyle(g,P,j);return this.context.push(new En(this.text.getCreatedAt(),g[0],g[1],K,new Map(Object.entries(P)),j)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){b.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){b.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([Kn.fromStruct(e[0]),Kn.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){b.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){b.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(b.fatal("it is not initialized yet"),""):this.text.toString()}createRangeForTest(e,t){if(!this.context||!this.text){b.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class Hr{constructor(e,t){this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){b.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),n=Ct.of(e,t);if(!n.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof n.getValue()}`);return this.counter.increase(n),this.context.push(Ir.create(this.counter.getCreatedAt(),n,t)),this}}function ci(f,e,t){const{type:n}=f,g=t.issueTimeTicket();if(n===hn){Ii(f);const{value:P}=f,j=De.create(be.of(g,0),n,P);e.append(j)}else{const{children:P=[]}=f;let{attributes:j}=f,K;if(typeof j=="object"&&!Fe(j)){j=Xe(j),K=new Rn;for(const[ye,Re]of Object.entries(j))K.set(ye,Re,g)}const ae=De.create(be.of(g,0),n,void 0,K);e.append(ae);for(const ye of P)ci(ye,ae,t)}}function Lo(f,e){const{type:t}=e,n=f.issueTimeTicket();let g;if(e.type===hn){const{value:P}=e;g=De.create(be.of(n,0),t,P)}else if(e){const{children:P=[]}=e;let{attributes:j}=e,K;if(typeof j=="object"&&!Fe(j)){j=Xe(j),K=new Rn;for(const[ae,ye]of Object.entries(j))K.set(ae,ye,n)}g=De.create(be.of(f.issueTimeTicket(),0),t,void 0,K);for(const ae of P)ci(ae,g,f)}return g}function Ii(f){if(!f.value.length)throw new Error("text node cannot have empty value");return!0}function xi(f){if(!f.length)return!0;if(f[0].type===hn)for(const t of f){const{type:n}=t;if(n!==hn)throw new Error("element node and text node cannot be passed together");Ii(t)}else for(const t of f){const{type:n}=t;if(n===hn)throw new Error("element node and text node cannot be passed together")}return!0}class Gr{constructor(e){this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return De.create(be.of(e.issueTimeTicket(),0),xn);const t=De.create(be.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const n of this.initialRoot.children)ci(n,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[n,g]=this.tree.pathToPosRange(e),P=this.context.issueTimeTicket(),j=t?Xe(t):void 0;this.tree.style([n,g],j,P),this.context.push(xr.create(this.tree.getCreatedAt(),n,g,j?new Map(Object.entries(j)):new Map,P))}style(e,t,n){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const g=this.tree.findPos(e),P=this.tree.findPos(t),j=this.context.issueTimeTicket(),K=n?Xe(n):void 0;this.tree.style([g,P],K,j),this.context.push(xr.create(this.tree.getCreatedAt(),g,P,K?new Map(Object.entries(K)):new Map,j))}editInternal(e,t,n,g=0){var P;if(n.length!==0&&n[0]&&(xi(n),n[0].type!==hn))for(const ye of n){const{children:Re=[]}=ye;xi(Re)}const j=this.context.getLastTimeTicket();let K=new Array;if(((P=n[0])===null||P===void 0?void 0:P.type)===hn){let ye="";for(const Re of n){const{value:qe}=Re;ye+=qe}K.push(De.create(be.of(this.context.issueTimeTicket(),0),hn,ye))}else K=n.map(ye=>ye&&Lo(this.context,ye)).filter(ye=>ye);const[,ae]=this.tree.edit([e,t],K.length?K.map(ye=>ye==null?void 0:ye.deepcopy()):void 0,g,j,()=>this.context.issueTimeTicket());return this.context.push(mn.create(this.tree.getCreatedAt(),e,t,K.length?K:void 0,g,ae,j)),e.equals(t)||this.context.registerElementHasRemovedNodes(this.tree),!0}editByPath(e,t,n,g=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const P=this.tree.pathToPos(e),j=this.tree.pathToPos(t);return this.editInternal(P,j,n?[n]:[],g)}editBulkByPath(e,t,n,g=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const P=this.tree.pathToPos(e),j=this.tree.pathToPos(t);return this.editInternal(P,j,n,g)}edit(e,t,n,g=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const P=this.tree.findPos(e),j=this.tree.findPos(t);return this.editInternal(P,j,n?[n]:[],g)}editBulk(e,t,n,g=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const P=this.tree.findPos(e),j=this.tree.findPos(t);return this.editInternal(P,j,n,g)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){b.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],n=this.tree.indexRangeToPosRange(t);return[n[0].toStruct(),n[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){b.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){b.fatal("it is not initialized yet");return}const t=[Ae.fromStruct(e[0]),Ae.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t,this.context.getLastTimeTicket())}posRangeToPathRange(e){if(!this.context||!this.tree){b.fatal("it is not initialized yet");return}const t=[Ae.fromStruct(e[0]),Ae.fromStruct(e[1])];return this.tree.posRangeToPathRange(t,this.context.getLastTimeTicket())}}function Pi(f,e){return ki(f,e)}function pr(f,e){if(e){if(e instanceof Ct)return e;if(e instanceof vt)return ki(f,e);if(e instanceof on)return Do(f,e);if(e instanceof en)return new Yr(f,e);if(e instanceof jn){const t=new Hr(tn.IntegerCnt,0);return t.initialize(f,e),t}else if(e instanceof dt){const t=new Gr;return t.initialize(f,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Tr(f,e){const t=pr(f,e);return t instanceof Ct?t.getValue():t}function Xr(f,e,t){let n;if(Ct.isSupport(e))n=Ct.of(e,t);else if(Array.isArray(e))n=on.create(t,Ht.buildArrayElements(f,e));else if(typeof e=="object")e instanceof Yr?(n=en.create(kr.create(),t),e.initialize(f,n)):e instanceof Hr?(n=jn.create(e.getValueType(),e.getValue(),t),e.initialize(f,n)):e instanceof Gr?(n=dt.create(e.buildRoot(f),t),e.initialize(f,n)):n=vt.create(t,Fr.buildObjectMembers(f,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return n}const Di=50;class Mo{constructor(){this.undoStack=[],this.redoStack=[]}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Di&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Di&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}var Vn;(function(f){f.Detached="detached",f.Attached="attached",f.Removed="removed"})(Vn||(Vn={}));var _t;(function(f){f.Snapshot="snapshot",f.LocalChange="local-change",f.RemoteChange="remote-change",f.Initialized="initialized",f.Watched="watched",f.Unwatched="unwatched",f.PresenceChanged="presence-changed"})(_t||(_t={}));class Ri{constructor(e,t){this.opts=t||{},this.key=e,this.status=Vn.Detached,this.root=jr.create(),this.changeID=ni,this.checkpoint=zi,this.localChanges=[],this.eventStream=u(n=>{this.eventStreamObserver=n}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new Mo,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)}}update(e,t){if(this.getStatus()===Vn.Removed)throw new de(te.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const n=this.changeID.getActorID(),g=Pr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(n)||{},t);try{const P=Pi(g,this.clone.root.getObject());this.presences.has(n)||this.clone.presences.set(n,{}),this.isUpdating=!0,e(P,new ft(g,this.clone.presences.get(n)))}catch(P){throw this.clone=void 0,b.error(P),P}finally{this.isUpdating=!1}if(g.hasChange()){b.isEnabled(D.Trivial)&&b.trivial(`trying to update a local change: ${this.toJSON()}`);const P=g.getChange(),{opInfos:j,reverseOps:K}=P.execute(this.root,this.presences,At.Local),ae=g.getReversePresence();ae&&K.push({type:"presence",value:ae}),this.localChanges.push(P),K.length>0&&this.internalHistory.pushUndo(K),j.length>0&&this.internalHistory.clearRedo(),this.changeID=P.getID(),j.length>0&&this.publish({type:_t.LocalChange,value:{message:P.getMessage()||"",operations:j,actor:n}}),P.hasPresenceChange()&&this.publish({type:_t.PresenceChanged,value:{clientID:n,presence:this.getPresence(n)}}),b.isEnabled(D.Trivial)&&b.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,n,g){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const K=t;return this.eventStream.subscribe(ae=>{ae.type!==_t.Initialized&&ae.type!==_t.Watched&&ae.type!==_t.Unwatched&&ae.type!==_t.PresenceChanged||K(ae)},n,g)}if(e==="my-presence"){const K=t;return this.eventStream.subscribe(ae=>{ae.type!==_t.Initialized&&ae.type!==_t.Watched&&ae.type!==_t.Unwatched&&ae.type!==_t.PresenceChanged||ae.type!==_t.Initialized&&ae.value.clientID!==this.changeID.getActorID()||K(ae)},n,g)}if(e==="others"){const K=t;return this.eventStream.subscribe(ae=>{ae.type!==_t.Watched&&ae.type!==_t.Unwatched&&ae.type!==_t.PresenceChanged||ae.value.clientID!==this.changeID.getActorID()&&K(ae)},n,g)}const P=e,j=t;return this.eventStream.subscribe(K=>{if(K.type===_t.Initialized||K.type===_t.Watched||K.type===_t.Unwatched||K.type===_t.PresenceChanged)return;if(K.type===_t.Snapshot){P==="$"&&j(K);return}const{message:ae,operations:ye,actor:Re}=K.value,qe=[];for(const ke of ye)this.isSameElementOrChildOf(ke.path,P)&&qe.push(ke);qe.length&&j({type:K.type,value:{message:ae,operations:qe,actor:Re}})},n,g)}if(typeof e=="function"){const P=e,j=t,K=n;return this.eventStream.subscribe(ae=>{ae.type===_t.Initialized||ae.type===_t.Watched||ae.type===_t.Unwatched||ae.type===_t.PresenceChanged||P(ae)},j,K)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const n=e.split(".");return t.split(".").every((P,j)=>P===n[j])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges());this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.setStatus(Vn.Removed),b.isEnabled(D.Trivial)&&b.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Ie(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Jr.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}getKey(){return this.key}setStatus(e){this.status=e}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Pr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return Pi(e,this.clone.root.getObject())}getOpsForTest(){return this.root.opsForTest}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}applySnapshot(e,t){const{root:n,presences:g}=er.bytesToSnapshot(t);this.root=new jr(n),this.presences=g,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish({type:_t.Snapshot,value:t})}applyChanges(e){b.isEnabled(D.Debug)&&b.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getRemovedElementSetSize()}`),b.isEnabled(D.Trivial)&&b.trivial(e.map(t=>`${t.getID().toTestString()}	${t.toTestString()}`).join(`
`)),this.ensureClone();for(const t of e){t.execute(this.clone.root,this.clone.presences,At.Remote);let n;const g=t.getID().getActorID();if(t.hasPresenceChange()&&this.onlineClients.has(g)){const j=t.getPresenceChange();switch(j.type){case gt.Put:n={type:this.presences.has(g)?_t.PresenceChanged:_t.Watched,value:{clientID:g,presence:j.presence}};break;case gt.Clear:n={type:_t.Unwatched,value:{clientID:g,presence:this.getPresence(g)}},this.removeOnlineClient(g);break}}const{opInfos:P}=t.execute(this.root,this.presences,At.Remote);P.length>0&&this.publish({type:_t.RemoteChange,value:{actor:g,message:t.getMessage()||"",operations:P}}),n&&this.publish(n),this.changeID=this.changeID.syncLamport(t.getID().getLamport())}b.isEnabled(D.Debug)&&b.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getRemovedElementSetSize()}`)}getValueByPath(e){if(!e.startsWith("$"))throw new de(te.InvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let n=this.getRoot();for(const g of t)if(n=n[g],n===void 0)return;return n}setOnlineClients(e){this.onlineClients=e}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!==Vn.Attached)return{};const e=this.presences.get(this.changeID.getActorID());return Ie(e)}getPresence(e){if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?Ie(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?Ie(t):void 0}getPresences(){const e=[];for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:Ie(this.presences.get(t))});return e}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=Pr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const ae of e){if(!(ae instanceof Rt)){new ft(t,Ie(this.clone.presences.get(this.changeID.getActorID()))).set(ae.value,{addToHistory:!0});continue}const ye=t.issueTimeTicket();ae.setExecutedAt(ye),t.push(ae)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,At.UndoRedo);const{opInfos:g,reverseOps:P}=n.execute(this.root,this.presences,At.UndoRedo),j=t.getReversePresence();if(j&&P.push({type:"presence",value:j}),P.length>0&&this.internalHistory.pushRedo(P),!n.hasPresenceChange()&&g.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const K=this.changeID.getActorID();g.length>0&&this.publish({type:_t.LocalChange,value:{message:n.getMessage()||"",operations:g,actor:K}}),n.hasPresenceChange()&&this.publish({type:_t.PresenceChanged,value:{clientID:K,presence:this.getPresence(K)}})}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=Pr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const ae of e){if(!(ae instanceof Rt)){new ft(t,Ie(this.clone.presences.get(this.changeID.getActorID()))).set(ae.value,{addToHistory:!0});continue}const ye=t.issueTimeTicket();ae.setExecutedAt(ye),t.push(ae)}const n=t.getChange();n.execute(this.clone.root,this.clone.presences,At.UndoRedo);const{opInfos:g,reverseOps:P}=n.execute(this.root,this.presences,At.UndoRedo),j=t.getReversePresence();if(j&&P.push({type:"presence",value:j}),P.length>0&&this.internalHistory.pushUndo(P),!n.hasPresenceChange()&&g.length===0)return;this.localChanges.push(n),this.changeID=n.getID();const K=this.changeID.getActorID();g.length>0&&this.publish({type:_t.LocalChange,value:{message:n.getMessage()||"",operations:g,actor:K}}),n.hasPresenceChange()&&this.publish({type:_t.PresenceChanged,value:{clientID:K,presence:this.getPresence(K)}})}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function Bo(f,e){return t=>async n=>(f&&n.header.set("x-api-key",f),e&&n.header.set("authorization",e),await t(n))}const Ci=JSON.parse('{"u2":"yorkie-js-sdk","i8":"0.4.12"}');function jo(){return f=>async e=>(e.header.set("x-yorkie-user-agent",Ci.u2+"/"+Ci.i8),await f(e))}var lr;(function(f){f.PushPull="pushpull",f.PushOnly="pushonly"})(lr||(lr={}));var gr;(function(f){f.Deactivated="deactivated",f.Activated="activated"})(gr||(gr={}));var wr;(function(f){f.Connected="connected",f.Disconnected="disconnected"})(wr||(wr={}));var Dr;(function(f){f.Synced="synced",f.SyncFailed="sync-failed"})(Dr||(Dr={}));var Fn;(function(f){f.StatusChanged="status-changed",f.DocumentChanged="document-changed",f.StreamConnectionStatusChanged="stream-connection-status-changed",f.DocumentSynced="document-synced"})(Fn||(Fn={}));const Zr={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class Li{constructor(e,t){t=t||Zr,this.key=t.key?t.key:m(),this.status=gr.Deactivated,this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.syncLoopDuration=t.syncLoopDuration||Zr.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||Zr.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||Zr.retrySyncLoopDelay,this.rpcClient=I(An.V,Zt({baseUrl:e,interceptors:[Bo(t.apiKey,t.token),jo()]})),this.eventStream=u(n=>{this.eventStreamObserver=n})}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status=gr.Activated,this.runSyncLoop(),this.eventStreamObserver.next({type:Fn.StatusChanged,value:this.status}),b.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw b.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){if(this.status===gr.Deactivated)return Promise.resolve();for(const[e]of this.attachmentMap)this.detachInternal(e);return this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.status=gr.Deactivated,this.eventStreamObserver.next({type:Fn.StatusChanged,value:this.status}),b.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw b.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,t={}){var n;if(!this.isActive())throw new de(te.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==Vn.Detached)throw new de(te.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((P,j)=>j.set(t.initialPresence||{}));const g=(n=t.isRealtimeSync)!==null&&n!==void 0?n:!0;return this.rpcClient.attachDocument({clientId:this.id,changePack:er.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async P=>{const j=er.fromChangePack(P.changePack);return e.applyChangePack(j),e.getStatus()===Vn.Removed||(e.setStatus(Vn.Attached),this.attachmentMap.set(e.getKey(),new Po(this.reconnectStreamDelay,e,P.documentId,g)),g&&await this.runWatchLoop(e.getKey()),b.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(P=>{throw b.error(`[AD] c:"${this.getKey()}" err :`,P),P})}detach(e,t={}){var n;if(!this.isActive())throw new de(te.ClientNotActive,`${this.key} is not active`);const g=this.attachmentMap.get(e.getKey());if(!g)throw new de(te.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((P,j)=>j.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:g.docID,changePack:er.toChangePack(e.createChangePack()),removeIfNotAttached:(n=t.removeIfNotAttached)!==null&&n!==void 0?n:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(P=>{const j=er.fromChangePack(P.changePack);return e.applyChangePack(j),e.getStatus()!==Vn.Removed&&e.setStatus(Vn.Detached),this.detachInternal(e.getKey()),b.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(P=>{throw b.error(`[DD] c:"${this.getKey()}" err :`,P),P})}pause(e){if(!this.isActive())throw new de(te.ClientNotActive,`${this.key} is not active`);return this.changeRealtimeSync(e,!1)}resume(e){if(!this.isActive())throw new de(te.ClientNotActive,`${this.key} is not active`);return this.changeRealtimeSync(e,!0)}pauseRemoteChanges(e){if(!this.isActive())throw new de(te.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new de(te.DocumentNotAttached,`${e.getKey()} is not attached`);t.changeSyncMode(lr.PushOnly)}resumeRemoteChanges(e){if(!this.isActive())throw new de(te.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new de(te.DocumentNotAttached,`${e.getKey()} is not attached`);t.changeSyncMode(lr.PushPull),t.remoteChangeEventReceived=!0}async changeRealtimeSync(e,t){const n=this.attachmentMap.get(e.getKey());if(!n)throw new de(te.DocumentNotAttached,`${e.getKey()} is not attached`);return n.changeRealtimeSync(t)?t?(n.remoteChangeEventReceived=!0,await this.runWatchLoop(e.getKey()),e):(this.eventStreamObserver.next({type:Fn.StreamConnectionStatusChanged,value:wr.Disconnected}),b.debug(`[WD] c:"${this.getKey()}" unwatches`),e):e}sync(e,t=lr.PushPull){if(!this.isActive())throw new de(te.ClientNotActive,`${this.key} is not active`);const n=[];if(e){const g=this.attachmentMap.get(e.getKey());if(!g)throw new de(te.DocumentNotAttached,`${e.getKey()} is not attached`);n.push(this.syncInternal(g,t))}else this.attachmentMap.forEach(g=>{n.push(this.syncInternal(g,g.syncMode))});return Promise.all(n).catch(g=>{throw this.eventStreamObserver.next({type:Fn.DocumentSynced,value:Dr.SyncFailed}),g})}remove(e){if(!this.isActive())throw new de(te.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new de(te.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const n=er.toChangePack(e.createChangePack());return n.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:n},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(g=>{const P=er.fromChangePack(g.changePack);e.applyChangePack(P),this.detachInternal(e.getKey()),b.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(g=>{throw b.error(`[RD] c:"${this.getKey()}" err :`,g),g})}subscribe(e,t,n){return this.eventStream.subscribe(e,t,n)}getID(){return this.id}getKey(){return this.key}isActive(){return this.status===gr.Activated}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){b.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const t=[];for(const[,n]of this.attachmentMap)n.needRealtimeSync()&&(n.remoteChangeEventReceived=!1,t.push(this.syncInternal(n,n.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(n=>{b.error(`[SL] c:"${this.getKey()}" sync failed:`,n),this.eventStreamObserver.next({type:Fn.DocumentSynced,value:Dr.SyncFailed}),setTimeout(e,this.retrySyncLoopDelay)})};b.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new de(te.DocumentNotAttached,`${e} is not attached`);return t.runWatchLoop(n=>{if(!this.isActive())return Promise.reject(new de(te.ClientNotActive,`${this.key} is not active`));const g=new AbortController,P=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:g.signal});return this.eventStreamObserver.next({type:Fn.StreamConnectionStatusChanged,value:wr.Connected}),b.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((j,K)=>{(async()=>{try{for await(const ye of P)this.handleWatchDocumentsResponse(t,ye),ye.body.case==="initialization"&&j([P,g])}catch(ye){this.eventStreamObserver.next({type:Fn.StreamConnectionStatusChanged,value:wr.Disconnected}),b.debug(`[WD] c:"${this.getKey()}" unwatches`),n(),K(ye)}})()})})}handleWatchDocumentsResponse(e,t){const n=e.doc.getKey();if(t.body.case==="initialization"){const g=t.body.value.clientIds,P=new Set;for(const j of g)P.add(j);e.doc.setOnlineClients(P),e.doc.publish({type:_t.Initialized,value:e.doc.getPresences()});return}else if(t.body.case==="event"){const g=t.body.value,P=g.type,j=g.publisher;switch(P){case Ne.DocEventType.DOCUMENT_CHANGED:e.remoteChangeEventReceived=!0,this.eventStreamObserver.next({type:Fn.DocumentChanged,value:[n]});break;case Ne.DocEventType.DOCUMENT_WATCHED:e.doc.addOnlineClient(j),e.doc.hasPresence(j)&&e.doc.publish({type:_t.Watched,value:{clientID:j,presence:e.doc.getPresence(j)}});break;case Ne.DocEventType.DOCUMENT_UNWATCHED:{const K=e.doc.getPresence(j);e.doc.removeOnlineClient(j),K&&e.doc.publish({type:_t.Unwatched,value:{clientID:j,presence:K}});break}}}}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),b.debug(`[WD] c:"${this.getKey()}" unwatches`),this.eventStreamObserver.next({type:Fn.StreamConnectionStatusChanged,value:wr.Disconnected}),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:n,docID:g}=e,P=n.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:g,changePack:er.toChangePack(P),pushOnly:t===lr.PushOnly},{headers:{"x-shard-key":`${this.apiKey}/${n.getKey()}`}}).then(j=>{const K=er.fromChangePack(j.changePack);if(K.hasChanges()&&t===lr.PushOnly)return n;n.applyChangePack(K),this.eventStreamObserver.next({type:Fn.DocumentSynced,value:Dr.Synced}),n.getStatus()===Vn.Removed&&this.detachInternal(n.getKey());const ae=n.getKey(),ye=K.getChangeSize();return b.info(`[PP] c:"${this.getKey()}" sync d:"${ae}", push:${P.getChangeSize()} pull:${ye} cp:${K.getCheckpoint().toTestString()}`),n}).catch(j=>{throw b.error(`[PP] c:"${this.getKey()}" err :`,j),j})}}const Fo={Client:Li,Document:Ri,Primitive:Ct,Text:Yr,Counter:Hr,Tree:Gr,IntType:tn.IntegerCnt,LongType:tn.LongCnt}})(),F})())})(vn);const fi=ti(vn.exports);var Ji={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(He,me){(function(M,R){He.exports=R()})(typeof self<"u"?self:Ui,function(){return function(Y){var M={};function R(F){if(M[F])return M[F].exports;var D=M[F]={i:F,l:!1,exports:{}};return Y[F].call(D.exports,D,D.exports,R),D.l=!0,D.exports}return R.m=Y,R.c=M,R.d=function(F,D,E){R.o(F,D)||Object.defineProperty(F,D,{configurable:!1,enumerable:!0,get:E})},R.n=function(F){var D=F&&F.__esModule?function(){return F.default}:function(){return F};return R.d(D,"a",D),D},R.o=function(F,D){return Object.prototype.hasOwnProperty.call(F,D)},R.p="",R(R.s=109)}([function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(17),D=R(18),E=R(19),b=R(45),m=R(46),w=R(47),i=R(48),u=R(49),o=R(12),y=R(32),v=R(33),h=R(31),l=R(1),r={Scope:l.Scope,create:l.create,find:l.find,query:l.query,register:l.register,Container:F.default,Format:D.default,Leaf:E.default,Embed:i.default,Scroll:b.default,Block:w.default,Inline:m.default,Text:u.default,Attributor:{Attribute:o.default,Class:y.default,Style:v.default,Store:h.default}};M.default=r},function(Y,M,R){var F=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)r.hasOwnProperty(a)&&(l[a]=r[a])};return function(l,r){h(l,r);function a(){this.constructor=l}l.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=function(h){F(l,h);function l(r){var a=this;return r="[Parchment] "+r,a=h.call(this,r)||this,a.message=r,a.name=a.constructor.name,a}return l}(Error);M.ParchmentError=D;var E={},b={},m={},w={};M.DATA_KEY="__blot";var i;(function(h){h[h.TYPE=3]="TYPE",h[h.LEVEL=12]="LEVEL",h[h.ATTRIBUTE=13]="ATTRIBUTE",h[h.BLOT=14]="BLOT",h[h.INLINE=7]="INLINE",h[h.BLOCK=11]="BLOCK",h[h.BLOCK_BLOT=10]="BLOCK_BLOT",h[h.INLINE_BLOT=6]="INLINE_BLOT",h[h.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",h[h.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",h[h.ANY=15]="ANY"})(i=M.Scope||(M.Scope={}));function u(h,l){var r=y(h);if(r==null)throw new D("Unable to create "+h+" blot");var a=r,s=h instanceof Node||h.nodeType===Node.TEXT_NODE?h:a.create(l);return new a(s,l)}M.create=u;function o(h,l){return l===void 0&&(l=!1),h==null?null:h[M.DATA_KEY]!=null?h[M.DATA_KEY].blot:l?o(h.parentNode,l):null}M.find=o;function y(h,l){l===void 0&&(l=i.ANY);var r;if(typeof h=="string")r=w[h]||E[h];else if(h instanceof Text||h.nodeType===Node.TEXT_NODE)r=w.text;else if(typeof h=="number")h&i.LEVEL&i.BLOCK?r=w.block:h&i.LEVEL&i.INLINE&&(r=w.inline);else if(h instanceof HTMLElement){var a=(h.getAttribute("class")||"").split(/\s+/);for(var s in a)if(r=b[a[s]],r)break;r=r||m[h.tagName]}return r==null?null:l&i.LEVEL&r.scope&&l&i.TYPE&r.scope?r:null}M.query=y;function v(){for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];if(h.length>1)return h.map(function(s){return v(s)});var r=h[0];if(typeof r.blotName!="string"&&typeof r.attrName!="string")throw new D("Invalid definition");if(r.blotName==="abstract")throw new D("Cannot register abstract class");if(w[r.blotName||r.attrName]=r,typeof r.keyName=="string")E[r.keyName]=r;else if(r.className!=null&&(b[r.className]=r),r.tagName!=null){Array.isArray(r.tagName)?r.tagName=r.tagName.map(function(s){return s.toUpperCase()}):r.tagName=r.tagName.toUpperCase();var a=Array.isArray(r.tagName)?r.tagName:[r.tagName];a.forEach(function(s){(m[s]==null||r.className==null)&&(m[s]=r)})}return r}M.register=v},function(Y,M,R){var F=R(51),D=R(11),E=R(3),b=R(20),m=String.fromCharCode(0),w=function(i){Array.isArray(i)?this.ops=i:i!=null&&Array.isArray(i.ops)?this.ops=i.ops:this.ops=[]};w.prototype.insert=function(i,u){var o={};return i.length===0?this:(o.insert=i,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(o.attributes=u),this.push(o))},w.prototype.delete=function(i){return i<=0?this:this.push({delete:i})},w.prototype.retain=function(i,u){if(i<=0)return this;var o={retain:i};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(o.attributes=u),this.push(o)},w.prototype.push=function(i){var u=this.ops.length,o=this.ops[u-1];if(i=E(!0,{},i),typeof o=="object"){if(typeof i.delete=="number"&&typeof o.delete=="number")return this.ops[u-1]={delete:o.delete+i.delete},this;if(typeof o.delete=="number"&&i.insert!=null&&(u-=1,o=this.ops[u-1],typeof o!="object"))return this.ops.unshift(i),this;if(D(i.attributes,o.attributes)){if(typeof i.insert=="string"&&typeof o.insert=="string")return this.ops[u-1]={insert:o.insert+i.insert},typeof i.attributes=="object"&&(this.ops[u-1].attributes=i.attributes),this;if(typeof i.retain=="number"&&typeof o.retain=="number")return this.ops[u-1]={retain:o.retain+i.retain},typeof i.attributes=="object"&&(this.ops[u-1].attributes=i.attributes),this}}return u===this.ops.length?this.ops.push(i):this.ops.splice(u,0,i),this},w.prototype.chop=function(){var i=this.ops[this.ops.length-1];return i&&i.retain&&!i.attributes&&this.ops.pop(),this},w.prototype.filter=function(i){return this.ops.filter(i)},w.prototype.forEach=function(i){this.ops.forEach(i)},w.prototype.map=function(i){return this.ops.map(i)},w.prototype.partition=function(i){var u=[],o=[];return this.forEach(function(y){var v=i(y)?u:o;v.push(y)}),[u,o]},w.prototype.reduce=function(i,u){return this.ops.reduce(i,u)},w.prototype.changeLength=function(){return this.reduce(function(i,u){return u.insert?i+b.length(u):u.delete?i-u.delete:i},0)},w.prototype.length=function(){return this.reduce(function(i,u){return i+b.length(u)},0)},w.prototype.slice=function(i,u){i=i||0,typeof u!="number"&&(u=1/0);for(var o=[],y=b.iterator(this.ops),v=0;v<u&&y.hasNext();){var h;v<i?h=y.next(i-v):(h=y.next(u-v),o.push(h)),v+=b.length(h)}return new w(o)},w.prototype.compose=function(i){var u=b.iterator(this.ops),o=b.iterator(i.ops),y=[],v=o.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var h=v.retain;u.peekType()==="insert"&&u.peekLength()<=h;)h-=u.peekLength(),y.push(u.next());v.retain-h>0&&o.next(v.retain-h)}for(var l=new w(y);u.hasNext()||o.hasNext();)if(o.peekType()==="insert")l.push(o.next());else if(u.peekType()==="delete")l.push(u.next());else{var r=Math.min(u.peekLength(),o.peekLength()),a=u.next(r),s=o.next(r);if(typeof s.retain=="number"){var d={};typeof a.retain=="number"?d.retain=r:d.insert=a.insert;var p=b.attributes.compose(a.attributes,s.attributes,typeof a.retain=="number");if(p&&(d.attributes=p),l.push(d),!o.hasNext()&&D(l.ops[l.ops.length-1],d)){var O=new w(u.rest());return l.concat(O).chop()}}else typeof s.delete=="number"&&typeof a.retain=="number"&&l.push(s)}return l.chop()},w.prototype.concat=function(i){var u=new w(this.ops.slice());return i.ops.length>0&&(u.push(i.ops[0]),u.ops=u.ops.concat(i.ops.slice(1))),u},w.prototype.diff=function(i,u){if(this.ops===i.ops)return new w;var o=[this,i].map(function(r){return r.map(function(a){if(a.insert!=null)return typeof a.insert=="string"?a.insert:m;var s=r===i?"on":"with";throw new Error("diff() called "+s+" non-document")}).join("")}),y=new w,v=F(o[0],o[1],u),h=b.iterator(this.ops),l=b.iterator(i.ops);return v.forEach(function(r){for(var a=r[1].length;a>0;){var s=0;switch(r[0]){case F.INSERT:s=Math.min(l.peekLength(),a),y.push(l.next(s));break;case F.DELETE:s=Math.min(a,h.peekLength()),h.next(s),y.delete(s);break;case F.EQUAL:s=Math.min(h.peekLength(),l.peekLength(),a);var d=h.next(s),p=l.next(s);D(d.insert,p.insert)?y.retain(s,b.attributes.diff(d.attributes,p.attributes)):y.push(p).delete(s);break}a-=s}}),y.chop()},w.prototype.eachLine=function(i,u){u=u||`
`;for(var o=b.iterator(this.ops),y=new w,v=0;o.hasNext();){if(o.peekType()!=="insert")return;var h=o.peek(),l=b.length(h)-o.peekLength(),r=typeof h.insert=="string"?h.insert.indexOf(u,l)-l:-1;if(r<0)y.push(o.next());else if(r>0)y.push(o.next(r));else{if(i(y,o.next(1).attributes||{},v)===!1)return;v+=1,y=new w}}y.length()>0&&i(y,{},v)},w.prototype.transform=function(i,u){if(u=!!u,typeof i=="number")return this.transformPosition(i,u);for(var o=b.iterator(this.ops),y=b.iterator(i.ops),v=new w;o.hasNext()||y.hasNext();)if(o.peekType()==="insert"&&(u||y.peekType()!=="insert"))v.retain(b.length(o.next()));else if(y.peekType()==="insert")v.push(y.next());else{var h=Math.min(o.peekLength(),y.peekLength()),l=o.next(h),r=y.next(h);if(l.delete)continue;r.delete?v.push(r):v.retain(h,b.attributes.transform(l.attributes,r.attributes,u))}return v.chop()},w.prototype.transformPosition=function(i,u){u=!!u;for(var o=b.iterator(this.ops),y=0;o.hasNext()&&y<=i;){var v=o.peekLength(),h=o.peekType();if(o.next(),h==="delete"){i-=Math.min(v,i-y);continue}else h==="insert"&&(y<i||!u)&&(i+=v);y+=v}return i},Y.exports=w},function(Y,M){var R=Object.prototype.hasOwnProperty,F=Object.prototype.toString,D=Object.defineProperty,E=Object.getOwnPropertyDescriptor,b=function(o){return typeof Array.isArray=="function"?Array.isArray(o):F.call(o)==="[object Array]"},m=function(o){if(!o||F.call(o)!=="[object Object]")return!1;var y=R.call(o,"constructor"),v=o.constructor&&o.constructor.prototype&&R.call(o.constructor.prototype,"isPrototypeOf");if(o.constructor&&!y&&!v)return!1;var h;for(h in o);return typeof h>"u"||R.call(o,h)},w=function(o,y){D&&y.name==="__proto__"?D(o,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):o[y.name]=y.newValue},i=function(o,y){if(y==="__proto__")if(R.call(o,y)){if(E)return E(o,y).value}else return;return o[y]};Y.exports=function u(){var o,y,v,h,l,r,a=arguments[0],s=1,d=arguments.length,p=!1;for(typeof a=="boolean"&&(p=a,a=arguments[1]||{},s=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});s<d;++s)if(o=arguments[s],o!=null)for(y in o)v=i(a,y),h=i(o,y),a!==h&&(p&&h&&(m(h)||(l=b(h)))?(l?(l=!1,r=v&&b(v)?v:[]):r=v&&m(v)?v:{},w(a,{name:y,newValue:u(p,r,h)})):typeof h<"u"&&w(a,{name:y,newValue:h}));return a}},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BlockEmbed=M.bubbleFormats=void 0;var F=function(){function S(x,I){for(var C=0;C<I.length;C++){var L=I[C];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,I,C){return I&&S(x.prototype,I),C&&S(x,C),x}}(),D=function S(x,I,C){x===null&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,I);if(L===void 0){var J=Object.getPrototypeOf(x);return J===null?void 0:S(J,I,C)}else{if("value"in L)return L.value;var z=L.get;return z===void 0?void 0:z.call(C)}},E=R(3),b=a(E),m=R(2),w=a(m),i=R(0),u=a(i),o=R(16),y=a(o),v=R(6),h=a(v),l=R(7),r=a(l);function a(S){return S&&S.__esModule?S:{default:S}}function s(S,x){if(!(S instanceof x))throw new TypeError("Cannot call a class as a function")}function d(S,x){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:S}function p(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);S.prototype=Object.create(x&&x.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(S,x):S.__proto__=x)}var O=1,N=function(S){p(x,S);function x(){return s(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return F(x,[{key:"attach",value:function(){D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new w.default().insert(this.value(),(0,b.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(C,L){var J=u.default.query(C,u.default.Scope.BLOCK_ATTRIBUTE);J!=null&&this.attributes.attribute(J,L)}},{key:"formatAt",value:function(C,L,J,z){this.format(J,z)}},{key:"insertAt",value:function(C,L,J){if(typeof L=="string"&&L.endsWith(`
`)){var z=u.default.create(k.blotName);this.parent.insertBefore(z,C===0?this:this.next),z.insertAt(0,L.slice(0,-1))}else D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,C,L,J)}}]),x}(u.default.Embed);N.scope=u.default.Scope.BLOCK_BLOT;var k=function(S){p(x,S);function x(I){s(this,x);var C=d(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,I));return C.cache={},C}return F(x,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(u.default.Leaf).reduce(function(C,L){return L.length()===0?C:C.insert(L.value(),A(L))},new w.default).insert(`
`,A(this))),this.cache.delta}},{key:"deleteAt",value:function(C,L){D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,C,L),this.cache={}}},{key:"formatAt",value:function(C,L,J,z){L<=0||(u.default.query(J,u.default.Scope.BLOCK)?C+L===this.length()&&this.format(J,z):D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,C,Math.min(L,this.length()-C-1),J,z),this.cache={})}},{key:"insertAt",value:function(C,L,J){if(J!=null)return D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,C,L,J);if(L.length!==0){var z=L.split(`
`),ee=z.shift();ee.length>0&&(C<this.length()-1||this.children.tail==null?D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,Math.min(C,this.length()-1),ee):this.children.tail.insertAt(this.children.tail.length(),ee),this.cache={});var X=this;z.reduce(function(q,B){return X=X.split(q,!0),X.insertAt(0,B),B.length},C+ee.length)}}},{key:"insertBefore",value:function(C,L){var J=this.children.head;D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,C,L),J instanceof y.default&&J.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"length",this).call(this)+O),this.cache.length}},{key:"moveChildren",value:function(C,L){D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"moveChildren",this).call(this,C,L),this.cache={}}},{key:"optimize",value:function(C){D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,C),this.cache={}}},{key:"path",value:function(C){return D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,C,!0)}},{key:"removeChild",value:function(C){D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"removeChild",this).call(this,C),this.cache={}}},{key:"split",value:function(C){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(L&&(C===0||C>=this.length()-O)){var J=this.clone();return C===0?(this.parent.insertBefore(J,this),this):(this.parent.insertBefore(J,this.next),J)}else{var z=D(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"split",this).call(this,C,L);return this.cache={},z}}}]),x}(u.default.Block);k.blotName="block",k.tagName="P",k.defaultChild="break",k.allowedChildren=[h.default,u.default.Embed,r.default];function A(S){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return S==null||(typeof S.formats=="function"&&(x=(0,b.default)(x,S.formats())),S.parent==null||S.parent.blotName=="scroll"||S.parent.statics.scope!==S.statics.scope)?x:A(S.parent,x)}M.bubbleFormats=A,M.BlockEmbed=N,M.default=k},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.overload=M.expandConfig=void 0;var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},D=function(){function X(q,B){var $=[],U=!0,re=!1,Q=void 0;try{for(var V=q[Symbol.iterator](),G;!(U=(G=V.next()).done)&&($.push(G.value),!(B&&$.length===B));U=!0);}catch(ie){re=!0,Q=ie}finally{try{!U&&V.return&&V.return()}finally{if(re)throw Q}}return $}return function(q,B){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return X(q,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function X(q,B){for(var $=0;$<B.length;$++){var U=B[$];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}return function(q,B,$){return B&&X(q.prototype,B),$&&X(q,$),q}}();R(50);var b=R(2),m=A(b),w=R(14),i=A(w),u=R(8),o=A(u),y=R(9),v=A(y),h=R(0),l=A(h),r=R(15),a=A(r),s=R(3),d=A(s),p=R(10),O=A(p),N=R(34),k=A(N);function A(X){return X&&X.__esModule?X:{default:X}}function S(X,q,B){return q in X?Object.defineProperty(X,q,{value:B,enumerable:!0,configurable:!0,writable:!0}):X[q]=B,X}function x(X,q){if(!(X instanceof q))throw new TypeError("Cannot call a class as a function")}var I=(0,O.default)("quill"),C=function(){E(X,null,[{key:"debug",value:function(B){B===!0&&(B="log"),O.default.level(B)}},{key:"find",value:function(B){return B.__quill||l.default.find(B)}},{key:"import",value:function(B){return this.imports[B]==null&&I.error("Cannot import "+B+". Are you sure it was registered?"),this.imports[B]}},{key:"register",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof B!="string"){var Q=B.attrName||B.blotName;typeof Q=="string"?this.register("formats/"+Q,B,$):Object.keys(B).forEach(function(V){U.register(V,B[V],$)})}else this.imports[B]!=null&&!re&&I.warn("Overwriting "+B+" with",$),this.imports[B]=$,(B.startsWith("blots/")||B.startsWith("formats/"))&&$.blotName!=="abstract"?l.default.register($):B.startsWith("modules")&&typeof $.register=="function"&&$.register()}}]);function X(q){var B=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x(this,X),this.options=L(q,$),this.container=this.options.container,this.container==null)return I.error("Invalid Quill container",q);this.options.debug&&X.debug(this.options.debug);var U=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new o.default,this.scroll=l.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new i.default(this.scroll),this.selection=new a.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(o.default.events.EDITOR_CHANGE,function(Q){Q===o.default.events.TEXT_CHANGE&&B.root.classList.toggle("ql-blank",B.editor.isBlank())}),this.emitter.on(o.default.events.SCROLL_UPDATE,function(Q,V){var G=B.selection.lastRange,ie=G&&G.length===0?G.index:void 0;J.call(B,function(){return B.editor.update(null,V,ie)},Q)});var re=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+U+"<p><br></p></div>");this.setContents(re),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return E(X,[{key:"addContainer",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof B=="string"){var U=B;B=document.createElement("div"),B.classList.add(U)}return this.container.insertBefore(B,$),B}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(B,$,U){var re=this,Q=z(B,$,U),V=D(Q,4);return B=V[0],$=V[1],U=V[3],J.call(this,function(){return re.editor.deleteText(B,$)},U,B,-1*$)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(B),this.container.classList.toggle("ql-disabled",!B)}},{key:"focus",value:function(){var B=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=B,this.scrollIntoView()}},{key:"format",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o.default.sources.API;return J.call(this,function(){var Q=U.getSelection(!0),V=new m.default;if(Q==null)return V;if(l.default.query(B,l.default.Scope.BLOCK))V=U.editor.formatLine(Q.index,Q.length,S({},B,$));else{if(Q.length===0)return U.selection.format(B,$),V;V=U.editor.formatText(Q.index,Q.length,S({},B,$))}return U.setSelection(Q,o.default.sources.SILENT),V},re)}},{key:"formatLine",value:function(B,$,U,re,Q){var V=this,G=void 0,ie=z(B,$,U,re,Q),le=D(ie,4);return B=le[0],$=le[1],G=le[2],Q=le[3],J.call(this,function(){return V.editor.formatLine(B,$,G)},Q,B,0)}},{key:"formatText",value:function(B,$,U,re,Q){var V=this,G=void 0,ie=z(B,$,U,re,Q),le=D(ie,4);return B=le[0],$=le[1],G=le[2],Q=le[3],J.call(this,function(){return V.editor.formatText(B,$,G)},Q,B,0)}},{key:"getBounds",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=void 0;typeof B=="number"?U=this.selection.getBounds(B,$):U=this.selection.getBounds(B.index,B.length);var re=this.container.getBoundingClientRect();return{bottom:U.bottom-re.top,height:U.height,left:U.left-re.left,right:U.right-re.left,top:U.top-re.top,width:U.width}}},{key:"getContents",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,U=z(B,$),re=D(U,2);return B=re[0],$=re[1],this.editor.getContents(B,$)}},{key:"getFormat",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof B=="number"?this.editor.getFormat(B,$):this.editor.getFormat(B.index,B.length)}},{key:"getIndex",value:function(B){return B.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(B){return this.scroll.leaf(B)}},{key:"getLine",value:function(B){return this.scroll.line(B)}},{key:"getLines",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof B!="number"?this.scroll.lines(B.index,B.length):this.scroll.lines(B,$)}},{key:"getModule",value:function(B){return this.theme.modules[B]}},{key:"getSelection",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return B&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,U=z(B,$),re=D(U,2);return B=re[0],$=re[1],this.editor.getText(B,$)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(B,$,U){var re=this,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:X.sources.API;return J.call(this,function(){return re.editor.insertEmbed(B,$,U)},Q,B)}},{key:"insertText",value:function(B,$,U,re,Q){var V=this,G=void 0,ie=z(B,0,U,re,Q),le=D(ie,4);return B=le[0],G=le[2],Q=le[3],J.call(this,function(){return V.editor.insertText(B,$,G)},Q,B,$.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(B,$,U){this.clipboard.dangerouslyPasteHTML(B,$,U)}},{key:"removeFormat",value:function(B,$,U){var re=this,Q=z(B,$,U),V=D(Q,4);return B=V[0],$=V[1],U=V[3],J.call(this,function(){return re.editor.removeFormat(B,$)},U,B)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(B){var $=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.default.sources.API;return J.call(this,function(){B=new m.default(B);var re=$.getLength(),Q=$.editor.deleteText(0,re),V=$.editor.applyDelta(B),G=V.ops[V.ops.length-1];G!=null&&typeof G.insert=="string"&&G.insert[G.insert.length-1]===`
`&&($.editor.deleteText($.getLength()-1,1),V.delete(1));var ie=Q.compose(V);return ie},U)}},{key:"setSelection",value:function(B,$,U){if(B==null)this.selection.setRange(null,$||X.sources.API);else{var re=z(B,$,U),Q=D(re,4);B=Q[0],$=Q[1],U=Q[3],this.selection.setRange(new r.Range(B,$),U),U!==o.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.default.sources.API,U=new m.default().insert(B);return this.setContents(U,$)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.default.sources.USER,$=this.scroll.update(B);return this.selection.update(B),$}},{key:"updateContents",value:function(B){var $=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.default.sources.API;return J.call(this,function(){return B=new m.default(B),$.editor.applyDelta(B,U)},U,!0)}}]),X}();C.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},C.events=o.default.events,C.sources=o.default.sources,C.version="1.3.7",C.imports={delta:m.default,parchment:l.default,"core/module":v.default,"core/theme":k.default};function L(X,q){if(q=(0,d.default)(!0,{container:X,modules:{clipboard:!0,keyboard:!0,history:!0}},q),!q.theme||q.theme===C.DEFAULTS.theme)q.theme=k.default;else if(q.theme=C.import("themes/"+q.theme),q.theme==null)throw new Error("Invalid theme "+q.theme+". Did you register it?");var B=(0,d.default)(!0,{},q.theme.DEFAULTS);[B,q].forEach(function(re){re.modules=re.modules||{},Object.keys(re.modules).forEach(function(Q){re.modules[Q]===!0&&(re.modules[Q]={})})});var $=Object.keys(B.modules).concat(Object.keys(q.modules)),U=$.reduce(function(re,Q){var V=C.import("modules/"+Q);return V==null?I.error("Cannot load "+Q+" module. Are you sure you registered it?"):re[Q]=V.DEFAULTS||{},re},{});return q.modules!=null&&q.modules.toolbar&&q.modules.toolbar.constructor!==Object&&(q.modules.toolbar={container:q.modules.toolbar}),q=(0,d.default)(!0,{},C.DEFAULTS,{modules:U},B,q),["bounds","container","scrollingContainer"].forEach(function(re){typeof q[re]=="string"&&(q[re]=document.querySelector(q[re]))}),q.modules=Object.keys(q.modules).reduce(function(re,Q){return q.modules[Q]&&(re[Q]=q.modules[Q]),re},{}),q}function J(X,q,B,$){if(this.options.strict&&!this.isEnabled()&&q===o.default.sources.USER)return new m.default;var U=B==null?null:this.getSelection(),re=this.editor.delta,Q=X();if(U!=null&&(B===!0&&(B=U.index),$==null?U=ee(U,Q,q):$!==0&&(U=ee(U,B,$,q)),this.setSelection(U,o.default.sources.SILENT)),Q.length()>0){var V,G=[o.default.events.TEXT_CHANGE,Q,re,q];if((V=this.emitter).emit.apply(V,[o.default.events.EDITOR_CHANGE].concat(G)),q!==o.default.sources.SILENT){var ie;(ie=this.emitter).emit.apply(ie,G)}}return Q}function z(X,q,B,$,U){var re={};return typeof X.index=="number"&&typeof X.length=="number"?typeof q!="number"?(U=$,$=B,B=q,q=X.length,X=X.index):(q=X.length,X=X.index):typeof q!="number"&&(U=$,$=B,B=q,q=0),(typeof B>"u"?"undefined":F(B))==="object"?(re=B,U=$):typeof B=="string"&&($!=null?re[B]=$:U=B),U=U||o.default.sources.API,[X,q,re,U]}function ee(X,q,B,$){if(X==null)return null;var U=void 0,re=void 0;if(q instanceof m.default){var Q=[X.index,X.index+X.length].map(function(le){return q.transformPosition(le,$!==o.default.sources.USER)}),V=D(Q,2);U=V[0],re=V[1]}else{var G=[X.index,X.index+X.length].map(function(le){return le<q||le===q&&$===o.default.sources.USER?le:B>=0?le+B:Math.max(q,le+B)}),ie=D(G,2);U=ie[0],re=ie[1]}return new r.Range(U,re-U)}M.expandConfig=L,M.overload=z,M.default=C},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function h(l,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(l,s.key,s)}}return function(l,r,a){return r&&h(l.prototype,r),a&&h(l,a),l}}(),D=function h(l,r,a){l===null&&(l=Function.prototype);var s=Object.getOwnPropertyDescriptor(l,r);if(s===void 0){var d=Object.getPrototypeOf(l);return d===null?void 0:h(d,r,a)}else{if("value"in s)return s.value;var p=s.get;return p===void 0?void 0:p.call(a)}},E=R(7),b=i(E),m=R(0),w=i(m);function i(h){return h&&h.__esModule?h:{default:h}}function u(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")}function o(h,l){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:h}function y(h,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);h.prototype=Object.create(l&&l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(h,l):h.__proto__=l)}var v=function(h){y(l,h);function l(){return u(this,l),o(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return F(l,[{key:"formatAt",value:function(a,s,d,p){if(l.compare(this.statics.blotName,d)<0&&w.default.query(d,w.default.Scope.BLOT)){var O=this.isolate(a,s);p&&O.wrap(d,p)}else D(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"formatAt",this).call(this,a,s,d,p)}},{key:"optimize",value:function(a){if(D(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"optimize",this).call(this,a),this.parent instanceof l&&l.compare(this.statics.blotName,this.parent.statics.blotName)>0){var s=this.parent.isolate(this.offset(),this.length());this.moveChildren(s),s.wrap(this)}}}],[{key:"compare",value:function(a,s){var d=l.order.indexOf(a),p=l.order.indexOf(s);return d>=0||p>=0?d-p:a===s?0:a<s?-1:1}}]),l}(w.default.Inline);v.allowedChildren=[v,w.default.Embed,b.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],M.default=v},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(0),D=E(F);function E(u){return u&&u.__esModule?u:{default:u}}function b(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function m(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function w(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var i=function(u){w(o,u);function o(){return b(this,o),m(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(D.default.Text);M.default=i},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function r(a,s){for(var d=0;d<s.length;d++){var p=s[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(a,p.key,p)}}return function(a,s,d){return s&&r(a.prototype,s),d&&r(a,d),a}}(),D=function r(a,s,d){a===null&&(a=Function.prototype);var p=Object.getOwnPropertyDescriptor(a,s);if(p===void 0){var O=Object.getPrototypeOf(a);return O===null?void 0:r(O,s,d)}else{if("value"in p)return p.value;var N=p.get;return N===void 0?void 0:N.call(d)}},E=R(54),b=i(E),m=R(10),w=i(m);function i(r){return r&&r.__esModule?r:{default:r}}function u(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function o(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:r}function y(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}var v=(0,w.default)("quill:events"),h=["selectionchange","mousedown","mouseup","click"];h.forEach(function(r){document.addEventListener(r,function(){for(var a=arguments.length,s=Array(a),d=0;d<a;d++)s[d]=arguments[d];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(p){if(p.__quill&&p.__quill.emitter){var O;(O=p.__quill.emitter).handleDOM.apply(O,s)}})})});var l=function(r){y(a,r);function a(){u(this,a);var s=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return s.listeners={},s.on("error",v.error),s}return F(a,[{key:"emit",value:function(){v.log.apply(v,arguments),D(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(d){for(var p=arguments.length,O=Array(p>1?p-1:0),N=1;N<p;N++)O[N-1]=arguments[N];(this.listeners[d.type]||[]).forEach(function(k){var A=k.node,S=k.handler;(d.target===A||A.contains(d.target))&&S.apply(void 0,[d].concat(O))})}},{key:"listenDOM",value:function(d,p,O){this.listeners[d]||(this.listeners[d]=[]),this.listeners[d].push({node:p,handler:O})}}]),a}(b.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},M.default=l},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});function F(E,b){if(!(E instanceof b))throw new TypeError("Cannot call a class as a function")}var D=function E(b){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F(this,E),this.quill=b,this.options=m};D.DEFAULTS={},M.default=D},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=["error","warn","log","info"],D="warn";function E(m){if(F.indexOf(m)<=F.indexOf(D)){for(var w,i=arguments.length,u=Array(i>1?i-1:0),o=1;o<i;o++)u[o-1]=arguments[o];(w=console)[m].apply(w,u)}}function b(m){return F.reduce(function(w,i){return w[i]=E.bind(console,i,m),w},{})}E.level=b.level=function(m){D=m},M.default=b},function(Y,M,R){var F=Array.prototype.slice,D=R(52),E=R(53),b=Y.exports=function(u,o,y){return y||(y={}),u===o?!0:u instanceof Date&&o instanceof Date?u.getTime()===o.getTime():!u||!o||typeof u!="object"&&typeof o!="object"?y.strict?u===o:u==o:i(u,o,y)};function m(u){return u==null}function w(u){return!(!u||typeof u!="object"||typeof u.length!="number"||typeof u.copy!="function"||typeof u.slice!="function"||u.length>0&&typeof u[0]!="number")}function i(u,o,y){var v,h;if(m(u)||m(o)||u.prototype!==o.prototype)return!1;if(E(u))return E(o)?(u=F.call(u),o=F.call(o),b(u,o,y)):!1;if(w(u)){if(!w(o)||u.length!==o.length)return!1;for(v=0;v<u.length;v++)if(u[v]!==o[v])return!1;return!0}try{var l=D(u),r=D(o)}catch{return!1}if(l.length!=r.length)return!1;for(l.sort(),r.sort(),v=l.length-1;v>=0;v--)if(l[v]!=r[v])return!1;for(v=l.length-1;v>=0;v--)if(h=l[v],!b(u[h],o[h],y))return!1;return typeof u==typeof o}},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(1),D=function(){function E(b,m,w){w===void 0&&(w={}),this.attrName=b,this.keyName=m;var i=F.Scope.TYPE&F.Scope.ATTRIBUTE;w.scope!=null?this.scope=w.scope&F.Scope.LEVEL|i:this.scope=F.Scope.ATTRIBUTE,w.whitelist!=null&&(this.whitelist=w.whitelist)}return E.keys=function(b){return[].map.call(b.attributes,function(m){return m.name})},E.prototype.add=function(b,m){return this.canAdd(b,m)?(b.setAttribute(this.keyName,m),!0):!1},E.prototype.canAdd=function(b,m){var w=F.query(b,F.Scope.BLOT&(this.scope|F.Scope.TYPE));return w==null?!1:this.whitelist==null?!0:typeof m=="string"?this.whitelist.indexOf(m.replace(/["']/g,""))>-1:this.whitelist.indexOf(m)>-1},E.prototype.remove=function(b){b.removeAttribute(this.keyName)},E.prototype.value=function(b){var m=b.getAttribute(this.keyName);return this.canAdd(b,m)&&m?m:""},E}();M.default=D},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.Code=void 0;var F=function(){function N(k,A){var S=[],x=!0,I=!1,C=void 0;try{for(var L=k[Symbol.iterator](),J;!(x=(J=L.next()).done)&&(S.push(J.value),!(A&&S.length===A));x=!0);}catch(z){I=!0,C=z}finally{try{!x&&L.return&&L.return()}finally{if(I)throw C}}return S}return function(k,A){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return N(k,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=function(){function N(k,A){for(var S=0;S<A.length;S++){var x=A[S];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(k,x.key,x)}}return function(k,A,S){return A&&N(k.prototype,A),S&&N(k,S),k}}(),E=function N(k,A,S){k===null&&(k=Function.prototype);var x=Object.getOwnPropertyDescriptor(k,A);if(x===void 0){var I=Object.getPrototypeOf(k);return I===null?void 0:N(I,A,S)}else{if("value"in x)return x.value;var C=x.get;return C===void 0?void 0:C.call(S)}},b=R(2),m=r(b),w=R(0),i=r(w),u=R(4),o=r(u),y=R(6),v=r(y),h=R(7),l=r(h);function r(N){return N&&N.__esModule?N:{default:N}}function a(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function s(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function d(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var p=function(N){d(k,N);function k(){return a(this,k),s(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return k}(v.default);p.blotName="code",p.tagName="CODE";var O=function(N){d(k,N);function k(){return a(this,k),s(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return D(k,[{key:"delta",value:function(){var S=this,x=this.domNode.textContent;return x.endsWith(`
`)&&(x=x.slice(0,-1)),x.split(`
`).reduce(function(I,C){return I.insert(C).insert(`
`,S.formats())},new m.default)}},{key:"format",value:function(S,x){if(!(S===this.statics.blotName&&x)){var I=this.descendant(l.default,this.length()-1),C=F(I,1),L=C[0];L!=null&&L.deleteAt(L.length()-1,1),E(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,S,x)}}},{key:"formatAt",value:function(S,x,I,C){if(x!==0&&!(i.default.query(I,i.default.Scope.BLOCK)==null||I===this.statics.blotName&&C===this.statics.formats(this.domNode))){var L=this.newlineIndex(S);if(!(L<0||L>=S+x)){var J=this.newlineIndex(S,!0)+1,z=L-J+1,ee=this.isolate(J,z),X=ee.next;ee.format(I,C),X instanceof k&&X.formatAt(0,S-J+x-z,I,C)}}}},{key:"insertAt",value:function(S,x,I){if(I==null){var C=this.descendant(l.default,S),L=F(C,2),J=L[0],z=L[1];J.insertAt(z,x)}}},{key:"length",value:function(){var S=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?S:S+1}},{key:"newlineIndex",value:function(S){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(x)return this.domNode.textContent.slice(0,S).lastIndexOf(`
`);var I=this.domNode.textContent.slice(S).indexOf(`
`);return I>-1?S+I:-1}},{key:"optimize",value:function(S){this.domNode.textContent.endsWith(`
`)||this.appendChild(i.default.create("text",`
`)),E(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,S);var x=this.next;x!=null&&x.prev===this&&x.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===x.statics.formats(x.domNode)&&(x.optimize(S),x.moveChildren(this),x.remove())}},{key:"replace",value:function(S){E(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,S),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(x){var I=i.default.find(x);I==null?x.parentNode.removeChild(x):I instanceof i.default.Embed?I.remove():I.unwrap()})}}],[{key:"create",value:function(S){var x=E(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,S);return x.setAttribute("spellcheck",!1),x}},{key:"formats",value:function(){return!0}}]),k}(o.default);O.blotName="code-block",O.tagName="PRE",O.TAB="  ",M.Code=p,M.default=O},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},D=function(){function X(q,B){var $=[],U=!0,re=!1,Q=void 0;try{for(var V=q[Symbol.iterator](),G;!(U=(G=V.next()).done)&&($.push(G.value),!(B&&$.length===B));U=!0);}catch(ie){re=!0,Q=ie}finally{try{!U&&V.return&&V.return()}finally{if(re)throw Q}}return $}return function(q,B){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return X(q,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function X(q,B){for(var $=0;$<B.length;$++){var U=B[$];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}return function(q,B,$){return B&&X(q.prototype,B),$&&X(q,$),q}}(),b=R(2),m=x(b),w=R(20),i=x(w),u=R(0),o=x(u),y=R(13),v=x(y),h=R(24),l=x(h),r=R(4),a=x(r),s=R(16),d=x(s),p=R(21),O=x(p),N=R(11),k=x(N),A=R(3),S=x(A);function x(X){return X&&X.__esModule?X:{default:X}}function I(X,q,B){return q in X?Object.defineProperty(X,q,{value:B,enumerable:!0,configurable:!0,writable:!0}):X[q]=B,X}function C(X,q){if(!(X instanceof q))throw new TypeError("Cannot call a class as a function")}var L=/^[ -~]*$/,J=function(){function X(q){C(this,X),this.scroll=q,this.delta=this.getDelta()}return E(X,[{key:"applyDelta",value:function(B){var $=this,U=!1;this.scroll.update();var re=this.scroll.length();return this.scroll.batchStart(),B=ee(B),B.reduce(function(Q,V){var G=V.retain||V.delete||V.insert.length||1,ie=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var le=V.insert;le.endsWith(`
`)&&U&&(U=!1,le=le.slice(0,-1)),Q>=re&&!le.endsWith(`
`)&&(U=!0),$.scroll.insertAt(Q,le);var ve=$.scroll.line(Q),Oe=D(ve,2),Se=Oe[0],Ce=Oe[1],Le=(0,S.default)({},(0,r.bubbleFormats)(Se));if(Se instanceof a.default){var Z=Se.descendant(o.default.Leaf,Ce),ce=D(Z,1),ue=ce[0];Le=(0,S.default)(Le,(0,r.bubbleFormats)(ue))}ie=i.default.attributes.diff(Le,ie)||{}}else if(F(V.insert)==="object"){var H=Object.keys(V.insert)[0];if(H==null)return Q;$.scroll.insertAt(Q,H,V.insert[H])}re+=G}return Object.keys(ie).forEach(function(oe){$.scroll.formatAt(Q,G,oe,ie[oe])}),Q+G},0),B.reduce(function(Q,V){return typeof V.delete=="number"?($.scroll.deleteAt(Q,V.delete),Q):Q+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(B)}},{key:"deleteText",value:function(B,$){return this.scroll.deleteAt(B,$),this.update(new m.default().retain(B).delete($))}},{key:"formatLine",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(re).forEach(function(Q){if(!(U.scroll.whitelist!=null&&!U.scroll.whitelist[Q])){var V=U.scroll.lines(B,Math.max($,1)),G=$;V.forEach(function(ie){var le=ie.length();if(!(ie instanceof v.default))ie.format(Q,re[Q]);else{var ve=B-ie.offset(U.scroll),Oe=ie.newlineIndex(ve+G)-ve+1;ie.formatAt(ve,Oe,Q,re[Q])}G-=le})}}),this.scroll.optimize(),this.update(new m.default().retain(B).retain($,(0,O.default)(re)))}},{key:"formatText",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(re).forEach(function(Q){U.scroll.formatAt(B,$,Q,re[Q])}),this.update(new m.default().retain(B).retain($,(0,O.default)(re)))}},{key:"getContents",value:function(B,$){return this.delta.slice(B,B+$)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(B,$){return B.concat($.delta())},new m.default)}},{key:"getFormat",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=[],re=[];$===0?this.scroll.path(B).forEach(function(V){var G=D(V,1),ie=G[0];ie instanceof a.default?U.push(ie):ie instanceof o.default.Leaf&&re.push(ie)}):(U=this.scroll.lines(B,$),re=this.scroll.descendants(o.default.Leaf,B,$));var Q=[U,re].map(function(V){if(V.length===0)return{};for(var G=(0,r.bubbleFormats)(V.shift());Object.keys(G).length>0;){var ie=V.shift();if(ie==null)return G;G=z((0,r.bubbleFormats)(ie),G)}return G});return S.default.apply(S.default,Q)}},{key:"getText",value:function(B,$){return this.getContents(B,$).filter(function(U){return typeof U.insert=="string"}).map(function(U){return U.insert}).join("")}},{key:"insertEmbed",value:function(B,$,U){return this.scroll.insertAt(B,$,U),this.update(new m.default().retain(B).insert(I({},$,U)))}},{key:"insertText",value:function(B,$){var U=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $=$.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(B,$),Object.keys(re).forEach(function(Q){U.scroll.formatAt(B,$.length,Q,re[Q])}),this.update(new m.default().retain(B).insert($,(0,O.default)(re)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var B=this.scroll.children.head;return B.statics.blotName!==a.default.blotName||B.children.length>1?!1:B.children.head instanceof d.default}},{key:"removeFormat",value:function(B,$){var U=this.getText(B,$),re=this.scroll.line(B+$),Q=D(re,2),V=Q[0],G=Q[1],ie=0,le=new m.default;V!=null&&(V instanceof v.default?ie=V.newlineIndex(G)-G+1:ie=V.length()-G,le=V.delta().slice(G,G+ie-1).insert(`
`));var ve=this.getContents(B,$+ie),Oe=ve.diff(new m.default().insert(U).concat(le)),Se=new m.default().retain(B).concat(Oe);return this.applyDelta(Se)}},{key:"update",value:function(B){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,re=this.delta;if($.length===1&&$[0].type==="characterData"&&$[0].target.data.match(L)&&o.default.find($[0].target)){var Q=o.default.find($[0].target),V=(0,r.bubbleFormats)(Q),G=Q.offset(this.scroll),ie=$[0].oldValue.replace(l.default.CONTENTS,""),le=new m.default().insert(ie),ve=new m.default().insert(Q.value()),Oe=new m.default().retain(G).concat(le.diff(ve,U));B=Oe.reduce(function(Se,Ce){return Ce.insert?Se.insert(Ce.insert,V):Se.push(Ce)},new m.default),this.delta=re.compose(B)}else this.delta=this.getDelta(),(!B||!(0,k.default)(re.compose(B),this.delta))&&(B=re.diff(this.delta,U));return B}}]),X}();function z(X,q){return Object.keys(q).reduce(function(B,$){return X[$]==null||(q[$]===X[$]?B[$]=q[$]:Array.isArray(q[$])?q[$].indexOf(X[$])<0&&(B[$]=q[$].concat([X[$]])):B[$]=[q[$],X[$]]),B},{})}function ee(X){return X.reduce(function(q,B){if(B.insert===1){var $=(0,O.default)(B.attributes);return delete $.image,q.insert({image:B.attributes.image},$)}if(B.attributes!=null&&(B.attributes.list===!0||B.attributes.bullet===!0)&&(B=(0,O.default)(B),B.attributes.list?B.attributes.list="ordered":(B.attributes.list="bullet",delete B.attributes.bullet)),typeof B.insert=="string"){var U=B.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return q.insert(U,B.attributes)}return q.push(B)},new m.default)}M.default=J},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.Range=void 0;var F=function(){function N(k,A){var S=[],x=!0,I=!1,C=void 0;try{for(var L=k[Symbol.iterator](),J;!(x=(J=L.next()).done)&&(S.push(J.value),!(A&&S.length===A));x=!0);}catch(z){I=!0,C=z}finally{try{!x&&L.return&&L.return()}finally{if(I)throw C}}return S}return function(k,A){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return N(k,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=function(){function N(k,A){for(var S=0;S<A.length;S++){var x=A[S];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(k,x.key,x)}}return function(k,A,S){return A&&N(k.prototype,A),S&&N(k,S),k}}(),E=R(0),b=l(E),m=R(21),w=l(m),i=R(11),u=l(i),o=R(8),y=l(o),v=R(10),h=l(v);function l(N){return N&&N.__esModule?N:{default:N}}function r(N){if(Array.isArray(N)){for(var k=0,A=Array(N.length);k<N.length;k++)A[k]=N[k];return A}else return Array.from(N)}function a(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}var s=(0,h.default)("quill:selection"),d=function N(k){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;a(this,N),this.index=k,this.length=A},p=function(){function N(k,A){var S=this;a(this,N),this.emitter=A,this.scroll=k,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=b.default.create("cursor",this),this.lastRange=this.savedRange=new d(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){S.mouseDown||setTimeout(S.update.bind(S,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(x,I){x===y.default.events.TEXT_CHANGE&&I.length()>0&&S.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(!!S.hasFocus()){var x=S.getNativeRange();x!=null&&x.start.node!==S.cursor.textNode&&S.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{S.setNativeRange(x.start.node,x.start.offset,x.end.node,x.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(x,I){if(I.range){var C=I.range,L=C.startNode,J=C.startOffset,z=C.endNode,ee=C.endOffset;S.setNativeRange(L,J,z,ee)}}),this.update(y.default.sources.SILENT)}return D(N,[{key:"handleComposition",value:function(){var A=this;this.root.addEventListener("compositionstart",function(){A.composing=!0}),this.root.addEventListener("compositionend",function(){if(A.composing=!1,A.cursor.parent){var S=A.cursor.restore();if(!S)return;setTimeout(function(){A.setNativeRange(S.startNode,S.startOffset,S.endNode,S.endOffset)},1)}})}},{key:"handleDragging",value:function(){var A=this;this.emitter.listenDOM("mousedown",document.body,function(){A.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){A.mouseDown=!1,A.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(A,S){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[A])){this.scroll.update();var x=this.getNativeRange();if(!(x==null||!x.native.collapsed||b.default.query(A,b.default.Scope.BLOCK))){if(x.start.node!==this.cursor.textNode){var I=b.default.find(x.start.node,!1);if(I==null)return;if(I instanceof b.default.Leaf){var C=I.split(x.start.offset);I.parent.insertBefore(this.cursor,C)}else I.insertBefore(this.cursor,x.start.node);this.cursor.attach()}this.cursor.format(A,S),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(A){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=this.scroll.length();A=Math.min(A,x-1),S=Math.min(A+S,x-1)-A;var I=void 0,C=this.scroll.leaf(A),L=F(C,2),J=L[0],z=L[1];if(J==null)return null;var ee=J.position(z,!0),X=F(ee,2);I=X[0],z=X[1];var q=document.createRange();if(S>0){q.setStart(I,z);var B=this.scroll.leaf(A+S),$=F(B,2);if(J=$[0],z=$[1],J==null)return null;var U=J.position(z,!0),re=F(U,2);return I=re[0],z=re[1],q.setEnd(I,z),q.getBoundingClientRect()}else{var Q="left",V=void 0;return I instanceof Text?(z<I.data.length?(q.setStart(I,z),q.setEnd(I,z+1)):(q.setStart(I,z-1),q.setEnd(I,z),Q="right"),V=q.getBoundingClientRect()):(V=J.domNode.getBoundingClientRect(),z>0&&(Q="right")),{bottom:V.top+V.height,height:V.height,left:V[Q],right:V[Q],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var A=document.getSelection();if(A==null||A.rangeCount<=0)return null;var S=A.getRangeAt(0);if(S==null)return null;var x=this.normalizeNative(S);return s.info("getNativeRange",x),x}},{key:"getRange",value:function(){var A=this.getNativeRange();if(A==null)return[null,null];var S=this.normalizedToRange(A);return[S,A]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(A){var S=this,x=[[A.start.node,A.start.offset]];A.native.collapsed||x.push([A.end.node,A.end.offset]);var I=x.map(function(J){var z=F(J,2),ee=z[0],X=z[1],q=b.default.find(ee,!0),B=q.offset(S.scroll);return X===0?B:q instanceof b.default.Container?B+q.length():B+q.index(ee,X)}),C=Math.min(Math.max.apply(Math,r(I)),this.scroll.length()-1),L=Math.min.apply(Math,[C].concat(r(I)));return new d(L,C-L)}},{key:"normalizeNative",value:function(A){if(!O(this.root,A.startContainer)||!A.collapsed&&!O(this.root,A.endContainer))return null;var S={start:{node:A.startContainer,offset:A.startOffset},end:{node:A.endContainer,offset:A.endOffset},native:A};return[S.start,S.end].forEach(function(x){for(var I=x.node,C=x.offset;!(I instanceof Text)&&I.childNodes.length>0;)if(I.childNodes.length>C)I=I.childNodes[C],C=0;else if(I.childNodes.length===C)I=I.lastChild,C=I instanceof Text?I.data.length:I.childNodes.length+1;else break;x.node=I,x.offset=C}),S}},{key:"rangeToNative",value:function(A){var S=this,x=A.collapsed?[A.index]:[A.index,A.index+A.length],I=[],C=this.scroll.length();return x.forEach(function(L,J){L=Math.min(C-1,L);var z=void 0,ee=S.scroll.leaf(L),X=F(ee,2),q=X[0],B=X[1],$=q.position(B,J!==0),U=F($,2);z=U[0],B=U[1],I.push(z,B)}),I.length<2&&(I=I.concat(I)),I}},{key:"scrollIntoView",value:function(A){var S=this.lastRange;if(S!=null){var x=this.getBounds(S.index,S.length);if(x!=null){var I=this.scroll.length()-1,C=this.scroll.line(Math.min(S.index,I)),L=F(C,1),J=L[0],z=J;if(S.length>0){var ee=this.scroll.line(Math.min(S.index+S.length,I)),X=F(ee,1);z=X[0]}if(!(J==null||z==null)){var q=A.getBoundingClientRect();x.top<q.top?A.scrollTop-=q.top-x.top:x.bottom>q.bottom&&(A.scrollTop+=x.bottom-q.bottom)}}}}},{key:"setNativeRange",value:function(A,S){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A,I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s.info("setNativeRange",A,S,x,I),!(A!=null&&(this.root.parentNode==null||A.parentNode==null||x.parentNode==null))){var L=document.getSelection();if(L!=null)if(A!=null){this.hasFocus()||this.root.focus();var J=(this.getNativeRange()||{}).native;if(J==null||C||A!==J.startContainer||S!==J.startOffset||x!==J.endContainer||I!==J.endOffset){A.tagName=="BR"&&(S=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode),x.tagName=="BR"&&(I=[].indexOf.call(x.parentNode.childNodes,x),x=x.parentNode);var z=document.createRange();z.setStart(A,S),z.setEnd(x,I),L.removeAllRanges(),L.addRange(z)}}else L.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(A){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof S=="string"&&(x=S,S=!1),s.info("setRange",A),A!=null){var I=this.rangeToNative(A);this.setNativeRange.apply(this,r(I).concat([S]))}else this.setNativeRange(null);this.update(x)}},{key:"update",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,S=this.lastRange,x=this.getRange(),I=F(x,2),C=I[0],L=I[1];if(this.lastRange=C,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,u.default)(S,this.lastRange)){var J;!this.composing&&L!=null&&L.native.collapsed&&L.start.node!==this.cursor.textNode&&this.cursor.restore();var z=[y.default.events.SELECTION_CHANGE,(0,w.default)(this.lastRange),(0,w.default)(S),A];if((J=this.emitter).emit.apply(J,[y.default.events.EDITOR_CHANGE].concat(z)),A!==y.default.sources.SILENT){var ee;(ee=this.emitter).emit.apply(ee,z)}}}}]),N}();function O(N,k){try{k.parentNode}catch{return!1}return k instanceof Text&&(k=k.parentNode),N.contains(k)}M.Range=d,M.default=p},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function y(v,h){for(var l=0;l<h.length;l++){var r=h[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(v,r.key,r)}}return function(v,h,l){return h&&y(v.prototype,h),l&&y(v,l),v}}(),D=function y(v,h,l){v===null&&(v=Function.prototype);var r=Object.getOwnPropertyDescriptor(v,h);if(r===void 0){var a=Object.getPrototypeOf(v);return a===null?void 0:y(a,h,l)}else{if("value"in r)return r.value;var s=r.get;return s===void 0?void 0:s.call(l)}},E=R(0),b=m(E);function m(y){return y&&y.__esModule?y:{default:y}}function w(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function i(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var o=function(y){u(v,y);function v(){return w(this,v),i(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return F(v,[{key:"insertInto",value:function(l,r){l.children.length===0?D(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,l,r):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(b.default.Embed);o.blotName="break",o.tagName="BR",M.default=o},function(Y,M,R){var F=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var y in o)o.hasOwnProperty(y)&&(u[y]=o[y])};return function(u,o){i(u,o);function y(){this.constructor=u}u.prototype=o===null?Object.create(o):(y.prototype=o.prototype,new y)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(44),E=R(30),b=R(1),m=function(i){F(u,i);function u(o){var y=i.call(this,o)||this;return y.build(),y}return u.prototype.appendChild=function(o){this.insertBefore(o)},u.prototype.attach=function(){i.prototype.attach.call(this),this.children.forEach(function(o){o.attach()})},u.prototype.build=function(){var o=this;this.children=new D.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=w(y);o.insertBefore(v,o.children.head||void 0)}catch(h){if(h instanceof b.ParchmentError)return;throw h}})},u.prototype.deleteAt=function(o,y){if(o===0&&y===this.length())return this.remove();this.children.forEachAt(o,y,function(v,h,l){v.deleteAt(h,l)})},u.prototype.descendant=function(o,y){var v=this.children.find(y),h=v[0],l=v[1];return o.blotName==null&&o(h)||o.blotName!=null&&h instanceof o?[h,l]:h instanceof u?h.descendant(o,l):[null,-1]},u.prototype.descendants=function(o,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var h=[],l=v;return this.children.forEachAt(y,v,function(r,a,s){(o.blotName==null&&o(r)||o.blotName!=null&&r instanceof o)&&h.push(r),r instanceof u&&(h=h.concat(r.descendants(o,a,l))),l-=s}),h},u.prototype.detach=function(){this.children.forEach(function(o){o.detach()}),i.prototype.detach.call(this)},u.prototype.formatAt=function(o,y,v,h){this.children.forEachAt(o,y,function(l,r,a){l.formatAt(r,a,v,h)})},u.prototype.insertAt=function(o,y,v){var h=this.children.find(o),l=h[0],r=h[1];if(l)l.insertAt(r,y,v);else{var a=v==null?b.create("text",y):b.create(y,v);this.appendChild(a)}},u.prototype.insertBefore=function(o,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return o instanceof v}))throw new b.ParchmentError("Cannot insert "+o.statics.blotName+" into "+this.statics.blotName);o.insertInto(this,y)},u.prototype.length=function(){return this.children.reduce(function(o,y){return o+y.length()},0)},u.prototype.moveChildren=function(o,y){this.children.forEach(function(v){o.insertBefore(v,y)})},u.prototype.optimize=function(o){if(i.prototype.optimize.call(this,o),this.children.length===0)if(this.statics.defaultChild!=null){var y=b.create(this.statics.defaultChild);this.appendChild(y),y.optimize(o)}else this.remove()},u.prototype.path=function(o,y){y===void 0&&(y=!1);var v=this.children.find(o,y),h=v[0],l=v[1],r=[[this,o]];return h instanceof u?r.concat(h.path(l,y)):(h!=null&&r.push([h,l]),r)},u.prototype.removeChild=function(o){this.children.remove(o)},u.prototype.replace=function(o){o instanceof u&&o.moveChildren(this),i.prototype.replace.call(this,o)},u.prototype.split=function(o,y){if(y===void 0&&(y=!1),!y){if(o===0)return this;if(o===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(o,this.length(),function(h,l,r){h=h.split(l,y),v.appendChild(h)}),v},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(o,y){var v=this,h=[],l=[];o.forEach(function(r){r.target===v.domNode&&r.type==="childList"&&(h.push.apply(h,r.addedNodes),l.push.apply(l,r.removedNodes))}),l.forEach(function(r){if(!(r.parentNode!=null&&r.tagName!=="IFRAME"&&document.body.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var a=b.find(r);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===v.domNode)&&a.detach()}}),h.filter(function(r){return r.parentNode==v.domNode}).sort(function(r,a){return r===a?0:r.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(r){var a=null;r.nextSibling!=null&&(a=b.find(r.nextSibling));var s=w(r);(s.next!=a||s.next==null)&&(s.parent!=null&&s.parent.removeChild(v),v.insertBefore(s,a||void 0))})},u}(E.default);function w(i){var u=b.find(i);if(u==null)try{u=b.create(i)}catch{u=b.create(b.Scope.INLINE),[].slice.call(i.childNodes).forEach(function(y){u.domNode.appendChild(y)}),i.parentNode&&i.parentNode.replaceChild(u.domNode,i),u.attach()}return u}M.default=m},function(Y,M,R){var F=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var y in o)o.hasOwnProperty(y)&&(u[y]=o[y])};return function(u,o){i(u,o);function y(){this.constructor=u}u.prototype=o===null?Object.create(o):(y.prototype=o.prototype,new y)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(12),E=R(31),b=R(17),m=R(1),w=function(i){F(u,i);function u(o){var y=i.call(this,o)||this;return y.attributes=new E.default(y.domNode),y}return u.formats=function(o){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return o.tagName.toLowerCase()},u.prototype.format=function(o,y){var v=m.query(o);v instanceof D.default?this.attributes.attribute(v,y):y&&v!=null&&(o!==this.statics.blotName||this.formats()[o]!==y)&&this.replaceWith(o,y)},u.prototype.formats=function(){var o=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(o[this.statics.blotName]=y),o},u.prototype.replaceWith=function(o,y){var v=i.prototype.replaceWith.call(this,o,y);return this.attributes.copy(v),v},u.prototype.update=function(o,y){var v=this;i.prototype.update.call(this,o,y),o.some(function(h){return h.target===v.domNode&&h.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(o,y){var v=i.prototype.wrap.call(this,o,y);return v instanceof u&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},u}(b.default);M.default=w},function(Y,M,R){var F=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,i){w.__proto__=i}||function(w,i){for(var u in i)i.hasOwnProperty(u)&&(w[u]=i[u])};return function(w,i){m(w,i);function u(){this.constructor=w}w.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(30),E=R(1),b=function(m){F(w,m);function w(){return m!==null&&m.apply(this,arguments)||this}return w.value=function(i){return!0},w.prototype.index=function(i,u){return this.domNode===i||this.domNode.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},w.prototype.position=function(i,u){var o=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return i>0&&(o+=1),[this.parent.domNode,o]},w.prototype.value=function(){var i;return i={},i[this.statics.blotName]=this.statics.value(this.domNode)||!0,i},w.scope=E.Scope.INLINE_BLOT,w}(D.default);M.default=b},function(Y,M,R){var F=R(11),D=R(3),E={attributes:{compose:function(m,w,i){typeof m!="object"&&(m={}),typeof w!="object"&&(w={});var u=D(!0,{},w);i||(u=Object.keys(u).reduce(function(y,v){return u[v]!=null&&(y[v]=u[v]),y},{}));for(var o in m)m[o]!==void 0&&w[o]===void 0&&(u[o]=m[o]);return Object.keys(u).length>0?u:void 0},diff:function(m,w){typeof m!="object"&&(m={}),typeof w!="object"&&(w={});var i=Object.keys(m).concat(Object.keys(w)).reduce(function(u,o){return F(m[o],w[o])||(u[o]=w[o]===void 0?null:w[o]),u},{});return Object.keys(i).length>0?i:void 0},transform:function(m,w,i){if(typeof m!="object")return w;if(typeof w=="object"){if(!i)return w;var u=Object.keys(w).reduce(function(o,y){return m[y]===void 0&&(o[y]=w[y]),o},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(m){return new b(m)},length:function(m){return typeof m.delete=="number"?m.delete:typeof m.retain=="number"?m.retain:typeof m.insert=="string"?m.insert.length:1}};function b(m){this.ops=m,this.index=0,this.offset=0}b.prototype.hasNext=function(){return this.peekLength()<1/0},b.prototype.next=function(m){m||(m=1/0);var w=this.ops[this.index];if(w){var i=this.offset,u=E.length(w);if(m>=u-i?(m=u-i,this.index+=1,this.offset=0):this.offset+=m,typeof w.delete=="number")return{delete:m};var o={};return w.attributes&&(o.attributes=w.attributes),typeof w.retain=="number"?o.retain=m:typeof w.insert=="string"?o.insert=w.insert.substr(i,m):o.insert=w.insert,o}else return{retain:1/0}},b.prototype.peek=function(){return this.ops[this.index]},b.prototype.peekLength=function(){return this.ops[this.index]?E.length(this.ops[this.index])-this.offset:1/0},b.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},b.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var m=this.offset,w=this.index,i=this.next(),u=this.ops.slice(this.index);return this.offset=m,this.index=w,[i].concat(u)}else return[]},Y.exports=E},function(Y,M){var R=function(){function F(v,h){return h!=null&&v instanceof h}var D;try{D=Map}catch{D=function(){}}var E;try{E=Set}catch{E=function(){}}var b;try{b=Promise}catch{b=function(){}}function m(v,h,l,r,a){typeof h=="object"&&(l=h.depth,r=h.prototype,a=h.includeNonEnumerable,h=h.circular);var s=[],d=[],p=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof l>"u"&&(l=1/0);function O(N,k){if(N===null)return null;if(k===0)return N;var A,S;if(typeof N!="object")return N;if(F(N,D))A=new D;else if(F(N,E))A=new E;else if(F(N,b))A=new b(function(q,B){N.then(function($){q(O($,k-1))},function($){B(O($,k-1))})});else if(m.__isArray(N))A=[];else if(m.__isRegExp(N))A=new RegExp(N.source,y(N)),N.lastIndex&&(A.lastIndex=N.lastIndex);else if(m.__isDate(N))A=new Date(N.getTime());else{if(p&&Buffer.isBuffer(N))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(N.length):A=new Buffer(N.length),N.copy(A),A;F(N,Error)?A=Object.create(N):typeof r>"u"?(S=Object.getPrototypeOf(N),A=Object.create(S)):(A=Object.create(r),S=r)}if(h){var x=s.indexOf(N);if(x!=-1)return d[x];s.push(N),d.push(A)}F(N,D)&&N.forEach(function(q,B){var $=O(B,k-1),U=O(q,k-1);A.set($,U)}),F(N,E)&&N.forEach(function(q){var B=O(q,k-1);A.add(B)});for(var I in N){var C;S&&(C=Object.getOwnPropertyDescriptor(S,I)),!(C&&C.set==null)&&(A[I]=O(N[I],k-1))}if(Object.getOwnPropertySymbols)for(var L=Object.getOwnPropertySymbols(N),I=0;I<L.length;I++){var J=L[I],z=Object.getOwnPropertyDescriptor(N,J);z&&!z.enumerable&&!a||(A[J]=O(N[J],k-1),z.enumerable||Object.defineProperty(A,J,{enumerable:!1}))}if(a)for(var ee=Object.getOwnPropertyNames(N),I=0;I<ee.length;I++){var X=ee[I],z=Object.getOwnPropertyDescriptor(N,X);z&&z.enumerable||(A[X]=O(N[X],k-1),Object.defineProperty(A,X,{enumerable:!1}))}return A}return O(v,l)}m.clonePrototype=function(h){if(h===null)return null;var l=function(){};return l.prototype=h,new l};function w(v){return Object.prototype.toString.call(v)}m.__objToStr=w;function i(v){return typeof v=="object"&&w(v)==="[object Date]"}m.__isDate=i;function u(v){return typeof v=="object"&&w(v)==="[object Array]"}m.__isArray=u;function o(v){return typeof v=="object"&&w(v)==="[object RegExp]"}m.__isRegExp=o;function y(v){var h="";return v.global&&(h+="g"),v.ignoreCase&&(h+="i"),v.multiline&&(h+="m"),h}return m.__getRegExpFlags=y,m}();typeof Y=="object"&&Y.exports&&(Y.exports=R)},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function A(S,x){var I=[],C=!0,L=!1,J=void 0;try{for(var z=S[Symbol.iterator](),ee;!(C=(ee=z.next()).done)&&(I.push(ee.value),!(x&&I.length===x));C=!0);}catch(X){L=!0,J=X}finally{try{!C&&z.return&&z.return()}finally{if(L)throw J}}return I}return function(S,x){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return A(S,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=function(){function A(S,x){for(var I=0;I<x.length;I++){var C=x[I];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,x,I){return x&&A(S.prototype,x),I&&A(S,I),S}}(),E=function A(S,x,I){S===null&&(S=Function.prototype);var C=Object.getOwnPropertyDescriptor(S,x);if(C===void 0){var L=Object.getPrototypeOf(S);return L===null?void 0:A(L,x,I)}else{if("value"in C)return C.value;var J=C.get;return J===void 0?void 0:J.call(I)}},b=R(0),m=s(b),w=R(8),i=s(w),u=R(4),o=s(u),y=R(16),v=s(y),h=R(13),l=s(h),r=R(25),a=s(r);function s(A){return A&&A.__esModule?A:{default:A}}function d(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function p(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:A}function O(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}function N(A){return A instanceof o.default||A instanceof u.BlockEmbed}var k=function(A){O(S,A);function S(x,I){d(this,S);var C=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,x));return C.emitter=I.emitter,Array.isArray(I.whitelist)&&(C.whitelist=I.whitelist.reduce(function(L,J){return L[J]=!0,L},{})),C.domNode.addEventListener("DOMNodeInserted",function(){}),C.optimize(),C.enable(),C}return D(S,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(I,C){var L=this.line(I),J=F(L,2),z=J[0],ee=J[1],X=this.line(I+C),q=F(X,1),B=q[0];if(E(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"deleteAt",this).call(this,I,C),B!=null&&z!==B&&ee>0){if(z instanceof u.BlockEmbed||B instanceof u.BlockEmbed){this.optimize();return}if(z instanceof l.default){var $=z.newlineIndex(z.length(),!0);if($>-1&&(z=z.split($+1),z===B)){this.optimize();return}}else if(B instanceof l.default){var U=B.newlineIndex(0);U>-1&&B.split(U+1)}var re=B.children.head instanceof v.default?null:B.children.head;z.moveChildren(B,re),z.remove()}this.optimize()}},{key:"enable",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",I)}},{key:"formatAt",value:function(I,C,L,J){this.whitelist!=null&&!this.whitelist[L]||(E(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"formatAt",this).call(this,I,C,L,J),this.optimize())}},{key:"insertAt",value:function(I,C,L){if(!(L!=null&&this.whitelist!=null&&!this.whitelist[C])){if(I>=this.length())if(L==null||m.default.query(C,m.default.Scope.BLOCK)==null){var J=m.default.create(this.statics.defaultChild);this.appendChild(J),L==null&&C.endsWith(`
`)&&(C=C.slice(0,-1)),J.insertAt(0,C,L)}else{var z=m.default.create(C,L);this.appendChild(z)}else E(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertAt",this).call(this,I,C,L);this.optimize()}}},{key:"insertBefore",value:function(I,C){if(I.statics.scope===m.default.Scope.INLINE_BLOT){var L=m.default.create(this.statics.defaultChild);L.appendChild(I),I=L}E(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,I,C)}},{key:"leaf",value:function(I){return this.path(I).pop()||[null,-1]}},{key:"line",value:function(I){return I===this.length()?this.line(I-1):this.descendant(N,I)}},{key:"lines",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,L=function J(z,ee,X){var q=[],B=X;return z.children.forEachAt(ee,X,function($,U,re){N($)?q.push($):$ instanceof m.default.Container&&(q=q.concat(J($,U,B))),B-=re}),q};return L(this,I,C)}},{key:"optimize",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(E(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,I,C),I.length>0&&this.emitter.emit(i.default.events.SCROLL_OPTIMIZE,I,C))}},{key:"path",value:function(I){return E(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"path",this).call(this,I).slice(1)}},{key:"update",value:function(I){if(this.batch!==!0){var C=i.default.sources.USER;typeof I=="string"&&(C=I),Array.isArray(I)||(I=this.observer.takeRecords()),I.length>0&&this.emitter.emit(i.default.events.SCROLL_BEFORE_UPDATE,C,I),E(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"update",this).call(this,I.concat([])),I.length>0&&this.emitter.emit(i.default.events.SCROLL_UPDATE,C,I)}}}]),S}(m.default.Scroll);k.blotName="scroll",k.className="ql-editor",k.tagName="DIV",k.defaultChild="block",k.allowedChildren=[o.default,u.BlockEmbed,a.default],M.default=k},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.SHORTKEY=M.default=void 0;var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},D=function(){function V(G,ie){var le=[],ve=!0,Oe=!1,Se=void 0;try{for(var Ce=G[Symbol.iterator](),Le;!(ve=(Le=Ce.next()).done)&&(le.push(Le.value),!(ie&&le.length===ie));ve=!0);}catch(Z){Oe=!0,Se=Z}finally{try{!ve&&Ce.return&&Ce.return()}finally{if(Oe)throw Se}}return le}return function(G,ie){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return V(G,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function V(G,ie){for(var le=0;le<ie.length;le++){var ve=ie[le];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(G,ve.key,ve)}}return function(G,ie,le){return ie&&V(G.prototype,ie),le&&V(G,le),G}}(),b=R(21),m=A(b),w=R(11),i=A(w),u=R(3),o=A(u),y=R(2),v=A(y),h=R(20),l=A(h),r=R(0),a=A(r),s=R(5),d=A(s),p=R(10),O=A(p),N=R(9),k=A(N);function A(V){return V&&V.__esModule?V:{default:V}}function S(V,G,ie){return G in V?Object.defineProperty(V,G,{value:ie,enumerable:!0,configurable:!0,writable:!0}):V[G]=ie,V}function x(V,G){if(!(V instanceof G))throw new TypeError("Cannot call a class as a function")}function I(V,G){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:V}function C(V,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);V.prototype=Object.create(G&&G.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(V,G):V.__proto__=G)}var L=(0,O.default)("quill:keyboard"),J=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",z=function(V){C(G,V),E(G,null,[{key:"match",value:function(le,ve){return ve=Q(ve),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Oe){return!!ve[Oe]!==le[Oe]&&ve[Oe]!==null})?!1:ve.key===(le.which||le.keyCode)}}]);function G(ie,le){x(this,G);var ve=I(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,ie,le));return ve.bindings={},Object.keys(ve.options.bindings).forEach(function(Oe){Oe==="list autofill"&&ie.scroll.whitelist!=null&&!ie.scroll.whitelist.list||ve.options.bindings[Oe]&&ve.addBinding(ve.options.bindings[Oe])}),ve.addBinding({key:G.keys.ENTER,shiftKey:null},$),ve.addBinding({key:G.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ve.addBinding({key:G.keys.BACKSPACE},{collapsed:!0},X),ve.addBinding({key:G.keys.DELETE},{collapsed:!0},q)):(ve.addBinding({key:G.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},X),ve.addBinding({key:G.keys.DELETE},{collapsed:!0,suffix:/^.?$/},q)),ve.addBinding({key:G.keys.BACKSPACE},{collapsed:!1},B),ve.addBinding({key:G.keys.DELETE},{collapsed:!1},B),ve.addBinding({key:G.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},X),ve.listen(),ve}return E(G,[{key:"addBinding",value:function(le){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=Q(le);if(Se==null||Se.key==null)return L.warn("Attempted to add invalid keyboard binding",Se);typeof ve=="function"&&(ve={handler:ve}),typeof Oe=="function"&&(Oe={handler:Oe}),Se=(0,o.default)(Se,ve,Oe),this.bindings[Se.key]=this.bindings[Se.key]||[],this.bindings[Se.key].push(Se)}},{key:"listen",value:function(){var le=this;this.quill.root.addEventListener("keydown",function(ve){if(!ve.defaultPrevented){var Oe=ve.which||ve.keyCode,Se=(le.bindings[Oe]||[]).filter(function(Ee){return G.match(ve,Ee)});if(Se.length!==0){var Ce=le.quill.getSelection();if(!(Ce==null||!le.quill.hasFocus())){var Le=le.quill.getLine(Ce.index),Z=D(Le,2),ce=Z[0],ue=Z[1],H=le.quill.getLeaf(Ce.index),oe=D(H,2),se=oe[0],we=oe[1],ge=Ce.length===0?[se,we]:le.quill.getLeaf(Ce.index+Ce.length),xe=D(ge,2),Be=xe[0],Ue=xe[1],st=se instanceof a.default.Text?se.value().slice(0,we):"",ct=Be instanceof a.default.Text?Be.value().slice(Ue):"",Je={collapsed:Ce.length===0,empty:Ce.length===0&&ce.length()<=1,format:le.quill.getFormat(Ce),offset:ue,prefix:st,suffix:ct},Ge=Se.some(function(Ee){if(Ee.collapsed!=null&&Ee.collapsed!==Je.collapsed||Ee.empty!=null&&Ee.empty!==Je.empty||Ee.offset!=null&&Ee.offset!==Je.offset)return!1;if(Array.isArray(Ee.format)){if(Ee.format.every(function(et){return Je.format[et]==null}))return!1}else if(F(Ee.format)==="object"&&!Object.keys(Ee.format).every(function(et){return Ee.format[et]===!0?Je.format[et]!=null:Ee.format[et]===!1?Je.format[et]==null:(0,i.default)(Ee.format[et],Je.format[et])}))return!1;return Ee.prefix!=null&&!Ee.prefix.test(Je.prefix)||Ee.suffix!=null&&!Ee.suffix.test(Je.suffix)?!1:Ee.handler.call(le,Ce,Je)!==!0});Ge&&ve.preventDefault()}}}})}}]),G}(k.default);z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},z.DEFAULTS={bindings:{bold:re("bold"),italic:re("italic"),underline:re("underline"),indent:{key:z.keys.TAB,format:["blockquote","indent","list"],handler:function(G,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","+1",d.default.sources.USER)}},outdent:{key:z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(G,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","-1",d.default.sources.USER)}},"outdent backspace":{key:z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(G,ie){ie.format.indent!=null?this.quill.format("indent","-1",d.default.sources.USER):ie.format.list!=null&&this.quill.format("list",!1,d.default.sources.USER)}},"indent code-block":U(!0),"outdent code-block":U(!1),"remove tab":{key:z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(G){this.quill.deleteText(G.index-1,1,d.default.sources.USER)}},tab:{key:z.keys.TAB,handler:function(G){this.quill.history.cutoff();var ie=new v.default().retain(G.index).delete(G.length).insert("	");this.quill.updateContents(ie,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(G.index+1,d.default.sources.SILENT)}},"list empty enter":{key:z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(G,ie){this.quill.format("list",!1,d.default.sources.USER),ie.format.indent&&this.quill.format("indent",!1,d.default.sources.USER)}},"checklist enter":{key:z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(G){var ie=this.quill.getLine(G.index),le=D(ie,2),ve=le[0],Oe=le[1],Se=(0,o.default)({},ve.formats(),{list:"checked"}),Ce=new v.default().retain(G.index).insert(`
`,Se).retain(ve.length()-Oe-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ce,d.default.sources.USER),this.quill.setSelection(G.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(G,ie){var le=this.quill.getLine(G.index),ve=D(le,2),Oe=ve[0],Se=ve[1],Ce=new v.default().retain(G.index).insert(`
`,ie.format).retain(Oe.length()-Se-1).retain(1,{header:null});this.quill.updateContents(Ce,d.default.sources.USER),this.quill.setSelection(G.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(G,ie){var le=ie.prefix.length,ve=this.quill.getLine(G.index),Oe=D(ve,2),Se=Oe[0],Ce=Oe[1];if(Ce>le)return!0;var Le=void 0;switch(ie.prefix.trim()){case"[]":case"[ ]":Le="unchecked";break;case"[x]":Le="checked";break;case"-":case"*":Le="bullet";break;default:Le="ordered"}this.quill.insertText(G.index," ",d.default.sources.USER),this.quill.history.cutoff();var Z=new v.default().retain(G.index-Ce).delete(le+1).retain(Se.length()-2-Ce).retain(1,{list:Le});this.quill.updateContents(Z,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(G.index-le,d.default.sources.SILENT)}},"code exit":{key:z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(G){var ie=this.quill.getLine(G.index),le=D(ie,2),ve=le[0],Oe=le[1],Se=new v.default().retain(G.index+ve.length()-Oe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Se,d.default.sources.USER)}},"embed left":ee(z.keys.LEFT,!1),"embed left shift":ee(z.keys.LEFT,!0),"embed right":ee(z.keys.RIGHT,!1),"embed right shift":ee(z.keys.RIGHT,!0)}};function ee(V,G){var ie,le=V===z.keys.LEFT?"prefix":"suffix";return ie={key:V,shiftKey:G,altKey:null},S(ie,le,/^$/),S(ie,"handler",function(Oe){var Se=Oe.index;V===z.keys.RIGHT&&(Se+=Oe.length+1);var Ce=this.quill.getLeaf(Se),Le=D(Ce,1),Z=Le[0];return Z instanceof a.default.Embed?(V===z.keys.LEFT?G?this.quill.setSelection(Oe.index-1,Oe.length+1,d.default.sources.USER):this.quill.setSelection(Oe.index-1,d.default.sources.USER):G?this.quill.setSelection(Oe.index,Oe.length+1,d.default.sources.USER):this.quill.setSelection(Oe.index+Oe.length+1,d.default.sources.USER),!1):!0}),ie}function X(V,G){if(!(V.index===0||this.quill.getLength()<=1)){var ie=this.quill.getLine(V.index),le=D(ie,1),ve=le[0],Oe={};if(G.offset===0){var Se=this.quill.getLine(V.index-1),Ce=D(Se,1),Le=Ce[0];if(Le!=null&&Le.length()>1){var Z=ve.formats(),ce=this.quill.getFormat(V.index-1,1);Oe=l.default.attributes.diff(Z,ce)||{}}}var ue=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(G.prefix)?2:1;this.quill.deleteText(V.index-ue,ue,d.default.sources.USER),Object.keys(Oe).length>0&&this.quill.formatLine(V.index-ue,ue,Oe,d.default.sources.USER),this.quill.focus()}}function q(V,G){var ie=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(G.suffix)?2:1;if(!(V.index>=this.quill.getLength()-ie)){var le={},ve=0,Oe=this.quill.getLine(V.index),Se=D(Oe,1),Ce=Se[0];if(G.offset>=Ce.length()-1){var Le=this.quill.getLine(V.index+1),Z=D(Le,1),ce=Z[0];if(ce){var ue=Ce.formats(),H=this.quill.getFormat(V.index,1);le=l.default.attributes.diff(ue,H)||{},ve=ce.length()}}this.quill.deleteText(V.index,ie,d.default.sources.USER),Object.keys(le).length>0&&this.quill.formatLine(V.index+ve-1,ie,le,d.default.sources.USER)}}function B(V){var G=this.quill.getLines(V),ie={};if(G.length>1){var le=G[0].formats(),ve=G[G.length-1].formats();ie=l.default.attributes.diff(ve,le)||{}}this.quill.deleteText(V,d.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(V.index,1,ie,d.default.sources.USER),this.quill.setSelection(V.index,d.default.sources.SILENT),this.quill.focus()}function $(V,G){var ie=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var le=Object.keys(G.format).reduce(function(ve,Oe){return a.default.query(Oe,a.default.Scope.BLOCK)&&!Array.isArray(G.format[Oe])&&(ve[Oe]=G.format[Oe]),ve},{});this.quill.insertText(V.index,`
`,le,d.default.sources.USER),this.quill.setSelection(V.index+1,d.default.sources.SILENT),this.quill.focus(),Object.keys(G.format).forEach(function(ve){le[ve]==null&&(Array.isArray(G.format[ve])||ve!=="link"&&ie.quill.format(ve,G.format[ve],d.default.sources.USER))})}function U(V){return{key:z.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(ie){var le=a.default.query("code-block"),ve=ie.index,Oe=ie.length,Se=this.quill.scroll.descendant(le,ve),Ce=D(Se,2),Le=Ce[0],Z=Ce[1];if(Le!=null){var ce=this.quill.getIndex(Le),ue=Le.newlineIndex(Z,!0)+1,H=Le.newlineIndex(ce+Z+Oe),oe=Le.domNode.textContent.slice(ue,H).split(`
`);Z=0,oe.forEach(function(se,we){V?(Le.insertAt(ue+Z,le.TAB),Z+=le.TAB.length,we===0?ve+=le.TAB.length:Oe+=le.TAB.length):se.startsWith(le.TAB)&&(Le.deleteAt(ue+Z,le.TAB.length),Z-=le.TAB.length,we===0?ve-=le.TAB.length:Oe-=le.TAB.length),Z+=se.length+1}),this.quill.update(d.default.sources.USER),this.quill.setSelection(ve,Oe,d.default.sources.SILENT)}}}}function re(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(ie,le){this.quill.format(V,!le.format[V],d.default.sources.USER)}}}function Q(V){if(typeof V=="string"||typeof V=="number")return Q({key:V});if((typeof V>"u"?"undefined":F(V))==="object"&&(V=(0,m.default)(V,!1)),typeof V.key=="string")if(z.keys[V.key.toUpperCase()]!=null)V.key=z.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[J]=V.shortKey,delete V.shortKey),V}M.default=z,M.SHORTKEY=J},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function l(r,a){var s=[],d=!0,p=!1,O=void 0;try{for(var N=r[Symbol.iterator](),k;!(d=(k=N.next()).done)&&(s.push(k.value),!(a&&s.length===a));d=!0);}catch(A){p=!0,O=A}finally{try{!d&&N.return&&N.return()}finally{if(p)throw O}}return s}return function(r,a){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return l(r,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=function l(r,a,s){r===null&&(r=Function.prototype);var d=Object.getOwnPropertyDescriptor(r,a);if(d===void 0){var p=Object.getPrototypeOf(r);return p===null?void 0:l(p,a,s)}else{if("value"in d)return d.value;var O=d.get;return O===void 0?void 0:O.call(s)}},E=function(){function l(r,a){for(var s=0;s<a.length;s++){var d=a[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}return function(r,a,s){return a&&l(r.prototype,a),s&&l(r,s),r}}(),b=R(0),m=u(b),w=R(7),i=u(w);function u(l){return l&&l.__esModule?l:{default:l}}function o(l,r){if(!(l instanceof r))throw new TypeError("Cannot call a class as a function")}function y(l,r){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:l}function v(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);l.prototype=Object.create(r&&r.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(l,r):l.__proto__=r)}var h=function(l){v(r,l),E(r,null,[{key:"value",value:function(){}}]);function r(a,s){o(this,r);var d=y(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a));return d.selection=s,d.textNode=document.createTextNode(r.CONTENTS),d.domNode.appendChild(d.textNode),d._length=0,d}return E(r,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(s,d){if(this._length!==0)return D(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"format",this).call(this,s,d);for(var p=this,O=0;p!=null&&p.statics.scope!==m.default.Scope.BLOCK_BLOT;)O+=p.offset(p.parent),p=p.parent;p!=null&&(this._length=r.CONTENTS.length,p.optimize(),p.formatAt(O,r.CONTENTS.length,s,d),this._length=0)}},{key:"index",value:function(s,d){return s===this.textNode?0:D(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"index",this).call(this,s,d)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){D(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var s=this.textNode,d=this.selection.getNativeRange(),p=void 0,O=void 0,N=void 0;if(d!=null&&d.start.node===s&&d.end.node===s){var k=[s,d.start.offset,d.end.offset];p=k[0],O=k[1],N=k[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==r.CONTENTS){var A=this.textNode.data.split(r.CONTENTS).join("");this.next instanceof i.default?(p=this.next.domNode,this.next.insertAt(0,A),this.textNode.data=r.CONTENTS):(this.textNode.data=A,this.parent.insertBefore(m.default.create(this.textNode),this),this.textNode=document.createTextNode(r.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),O!=null){var S=[O,N].map(function(I){return Math.max(0,Math.min(p.data.length,I-1))}),x=F(S,2);return O=x[0],N=x[1],{startNode:p,startOffset:O,endNode:p,endOffset:N}}}}},{key:"update",value:function(s,d){var p=this;if(s.some(function(N){return N.type==="characterData"&&N.target===p.textNode})){var O=this.restore();O&&(d.range=O)}}},{key:"value",value:function(){return""}}]),r}(m.default.Embed);h.blotName="cursor",h.className="ql-cursor",h.tagName="span",h.CONTENTS="\uFEFF",M.default=h},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(0),D=m(F),E=R(4),b=m(E);function m(y){return y&&y.__esModule?y:{default:y}}function w(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function i(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var o=function(y){u(v,y);function v(){return w(this,v),i(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(D.default.Container);o.allowedChildren=[b.default,E.BlockEmbed,o],M.default=o},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.ColorStyle=M.ColorClass=M.ColorAttributor=void 0;var F=function(){function h(l,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(l,s.key,s)}}return function(l,r,a){return r&&h(l.prototype,r),a&&h(l,a),l}}(),D=function h(l,r,a){l===null&&(l=Function.prototype);var s=Object.getOwnPropertyDescriptor(l,r);if(s===void 0){var d=Object.getPrototypeOf(l);return d===null?void 0:h(d,r,a)}else{if("value"in s)return s.value;var p=s.get;return p===void 0?void 0:p.call(a)}},E=R(0),b=m(E);function m(h){return h&&h.__esModule?h:{default:h}}function w(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")}function i(h,l){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:h}function u(h,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);h.prototype=Object.create(l&&l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(h,l):h.__proto__=l)}var o=function(h){u(l,h);function l(){return w(this,l),i(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return F(l,[{key:"value",value:function(a){var s=D(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"value",this).call(this,a);return s.startsWith("rgb(")?(s=s.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+s.split(",").map(function(d){return("00"+parseInt(d).toString(16)).slice(-2)}).join("")):s}}]),l}(b.default.Attributor.Style),y=new b.default.Attributor.Class("color","ql-color",{scope:b.default.Scope.INLINE}),v=new o("color","color",{scope:b.default.Scope.INLINE});M.ColorAttributor=o,M.ColorClass=y,M.ColorStyle=v},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.sanitize=M.default=void 0;var F=function(){function v(h,l){for(var r=0;r<l.length;r++){var a=l[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(h,a.key,a)}}return function(h,l,r){return l&&v(h.prototype,l),r&&v(h,r),h}}(),D=function v(h,l,r){h===null&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,l);if(a===void 0){var s=Object.getPrototypeOf(h);return s===null?void 0:v(s,l,r)}else{if("value"in a)return a.value;var d=a.get;return d===void 0?void 0:d.call(r)}},E=R(6),b=m(E);function m(v){return v&&v.__esModule?v:{default:v}}function w(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function i(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function u(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var o=function(v){u(h,v);function h(){return w(this,h),i(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return F(h,[{key:"format",value:function(r,a){if(r!==this.statics.blotName||!a)return D(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,r,a);a=this.constructor.sanitize(a),this.domNode.setAttribute("href",a)}}],[{key:"create",value:function(r){var a=D(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,r);return r=this.sanitize(r),a.setAttribute("href",r),a.setAttribute("rel","noopener noreferrer"),a.setAttribute("target","_blank"),a}},{key:"formats",value:function(r){return r.getAttribute("href")}},{key:"sanitize",value:function(r){return y(r,this.PROTOCOL_WHITELIST)?r:this.SANITIZED_URL}}]),h}(b.default);o.blotName="link",o.tagName="A",o.SANITIZED_URL="about:blank",o.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,h){var l=document.createElement("a");l.href=v;var r=l.href.slice(0,l.href.indexOf(":"));return h.indexOf(r)>-1}M.default=o,M.sanitize=y},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},D=function(){function h(l,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(l,s.key,s)}}return function(l,r,a){return r&&h(l.prototype,r),a&&h(l,a),l}}(),E=R(23),b=i(E),m=R(107),w=i(m);function i(h){return h&&h.__esModule?h:{default:h}}function u(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")}var o=0;function y(h,l){h.setAttribute(l,h.getAttribute(l)!=="true")}var v=function(){function h(l){var r=this;u(this,h),this.select=l,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){r.togglePicker()}),this.label.addEventListener("keydown",function(a){switch(a.keyCode){case b.default.keys.ENTER:r.togglePicker();break;case b.default.keys.ESCAPE:r.escape(),a.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return D(h,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(r){var a=this,s=document.createElement("span");return s.tabIndex="0",s.setAttribute("role","button"),s.classList.add("ql-picker-item"),r.hasAttribute("value")&&s.setAttribute("data-value",r.getAttribute("value")),r.textContent&&s.setAttribute("data-label",r.textContent),s.addEventListener("click",function(){a.selectItem(s,!0)}),s.addEventListener("keydown",function(d){switch(d.keyCode){case b.default.keys.ENTER:a.selectItem(s,!0),d.preventDefault();break;case b.default.keys.ESCAPE:a.escape(),d.preventDefault();break}}),s}},{key:"buildLabel",value:function(){var r=document.createElement("span");return r.classList.add("ql-picker-label"),r.innerHTML=w.default,r.tabIndex="0",r.setAttribute("role","button"),r.setAttribute("aria-expanded","false"),this.container.appendChild(r),r}},{key:"buildOptions",value:function(){var r=this,a=document.createElement("span");a.classList.add("ql-picker-options"),a.setAttribute("aria-hidden","true"),a.tabIndex="-1",a.id="ql-picker-options-"+o,o+=1,this.label.setAttribute("aria-controls",a.id),this.options=a,[].slice.call(this.select.options).forEach(function(s){var d=r.buildItem(s);a.appendChild(d),s.selected===!0&&r.selectItem(d)}),this.container.appendChild(a)}},{key:"buildPicker",value:function(){var r=this;[].slice.call(this.select.attributes).forEach(function(a){r.container.setAttribute(a.name,a.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var r=this;this.close(),setTimeout(function(){return r.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.container.querySelector(".ql-selected");if(r!==s&&(s!=null&&s.classList.remove("ql-selected"),r!=null&&(r.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(r.parentNode.children,r),r.hasAttribute("data-value")?this.label.setAttribute("data-value",r.getAttribute("data-value")):this.label.removeAttribute("data-value"),r.hasAttribute("data-label")?this.label.setAttribute("data-label",r.getAttribute("data-label")):this.label.removeAttribute("data-label"),a))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":F(Event))==="object"){var d=document.createEvent("Event");d.initEvent("change",!0,!0),this.select.dispatchEvent(d)}this.close()}}},{key:"update",value:function(){var r=void 0;if(this.select.selectedIndex>-1){var a=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];r=this.select.options[this.select.selectedIndex],this.selectItem(a)}else this.selectItem(null);var s=r!=null&&r!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",s)}}]),h}();M.default=v},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(0),D=L(F),E=R(5),b=L(E),m=R(4),w=L(m),i=R(16),u=L(i),o=R(25),y=L(o),v=R(24),h=L(v),l=R(35),r=L(l),a=R(6),s=L(a),d=R(22),p=L(d),O=R(7),N=L(O),k=R(55),A=L(k),S=R(42),x=L(S),I=R(23),C=L(I);function L(J){return J&&J.__esModule?J:{default:J}}b.default.register({"blots/block":w.default,"blots/block/embed":m.BlockEmbed,"blots/break":u.default,"blots/container":y.default,"blots/cursor":h.default,"blots/embed":r.default,"blots/inline":s.default,"blots/scroll":p.default,"blots/text":N.default,"modules/clipboard":A.default,"modules/history":x.default,"modules/keyboard":C.default}),D.default.register(w.default,u.default,h.default,s.default,p.default,N.default),M.default=b.default},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(1),D=function(){function E(b){this.domNode=b,this.domNode[F.DATA_KEY]={blot:this}}return Object.defineProperty(E.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),E.create=function(b){if(this.tagName==null)throw new F.ParchmentError("Blot definition missing tagName");var m;return Array.isArray(this.tagName)?(typeof b=="string"&&(b=b.toUpperCase(),parseInt(b).toString()===b&&(b=parseInt(b))),typeof b=="number"?m=document.createElement(this.tagName[b-1]):this.tagName.indexOf(b)>-1?m=document.createElement(b):m=document.createElement(this.tagName[0])):m=document.createElement(this.tagName),this.className&&m.classList.add(this.className),m},E.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},E.prototype.clone=function(){var b=this.domNode.cloneNode(!1);return F.create(b)},E.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[F.DATA_KEY]},E.prototype.deleteAt=function(b,m){var w=this.isolate(b,m);w.remove()},E.prototype.formatAt=function(b,m,w,i){var u=this.isolate(b,m);if(F.query(w,F.Scope.BLOT)!=null&&i)u.wrap(w,i);else if(F.query(w,F.Scope.ATTRIBUTE)!=null){var o=F.create(this.statics.scope);u.wrap(o),o.format(w,i)}},E.prototype.insertAt=function(b,m,w){var i=w==null?F.create("text",m):F.create(m,w),u=this.split(b);this.parent.insertBefore(i,u)},E.prototype.insertInto=function(b,m){m===void 0&&(m=null),this.parent!=null&&this.parent.children.remove(this);var w=null;b.children.insertBefore(this,m),m!=null&&(w=m.domNode),(this.domNode.parentNode!=b.domNode||this.domNode.nextSibling!=w)&&b.domNode.insertBefore(this.domNode,w),this.parent=b,this.attach()},E.prototype.isolate=function(b,m){var w=this.split(b);return w.split(m),w},E.prototype.length=function(){return 1},E.prototype.offset=function(b){return b===void 0&&(b=this.parent),this.parent==null||this==b?0:this.parent.children.offset(this)+this.parent.offset(b)},E.prototype.optimize=function(b){this.domNode[F.DATA_KEY]!=null&&delete this.domNode[F.DATA_KEY].mutations},E.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},E.prototype.replace=function(b){b.parent!=null&&(b.parent.insertBefore(this,b.next),b.remove())},E.prototype.replaceWith=function(b,m){var w=typeof b=="string"?F.create(b,m):b;return w.replace(this),w},E.prototype.split=function(b,m){return b===0?this:this.next},E.prototype.update=function(b,m){},E.prototype.wrap=function(b,m){var w=typeof b=="string"?F.create(b,m):b;return this.parent!=null&&this.parent.insertBefore(w,this.next),w.appendChild(this),w},E.blotName="abstract",E}();M.default=D},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(12),D=R(32),E=R(33),b=R(1),m=function(){function w(i){this.attributes={},this.domNode=i,this.build()}return w.prototype.attribute=function(i,u){u?i.add(this.domNode,u)&&(i.value(this.domNode)!=null?this.attributes[i.attrName]=i:delete this.attributes[i.attrName]):(i.remove(this.domNode),delete this.attributes[i.attrName])},w.prototype.build=function(){var i=this;this.attributes={};var u=F.default.keys(this.domNode),o=D.default.keys(this.domNode),y=E.default.keys(this.domNode);u.concat(o).concat(y).forEach(function(v){var h=b.query(v,b.Scope.ATTRIBUTE);h instanceof F.default&&(i.attributes[h.attrName]=h)})},w.prototype.copy=function(i){var u=this;Object.keys(this.attributes).forEach(function(o){var y=u.attributes[o].value(u.domNode);i.format(o,y)})},w.prototype.move=function(i){var u=this;this.copy(i),Object.keys(this.attributes).forEach(function(o){u.attributes[o].remove(u.domNode)}),this.attributes={}},w.prototype.values=function(){var i=this;return Object.keys(this.attributes).reduce(function(u,o){return u[o]=i.attributes[o].value(i.domNode),u},{})},w}();M.default=m},function(Y,M,R){var F=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,i){w.__proto__=i}||function(w,i){for(var u in i)i.hasOwnProperty(u)&&(w[u]=i[u])};return function(w,i){m(w,i);function u(){this.constructor=w}w.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(12);function E(m,w){var i=m.getAttribute("class")||"";return i.split(/\s+/).filter(function(u){return u.indexOf(w+"-")===0})}var b=function(m){F(w,m);function w(){return m!==null&&m.apply(this,arguments)||this}return w.keys=function(i){return(i.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},w.prototype.add=function(i,u){return this.canAdd(i,u)?(this.remove(i),i.classList.add(this.keyName+"-"+u),!0):!1},w.prototype.remove=function(i){var u=E(i,this.keyName);u.forEach(function(o){i.classList.remove(o)}),i.classList.length===0&&i.removeAttribute("class")},w.prototype.value=function(i){var u=E(i,this.keyName)[0]||"",o=u.slice(this.keyName.length+1);return this.canAdd(i,o)?o:""},w}(D.default);M.default=b},function(Y,M,R){var F=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,i){w.__proto__=i}||function(w,i){for(var u in i)i.hasOwnProperty(u)&&(w[u]=i[u])};return function(w,i){m(w,i);function u(){this.constructor=w}w.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(12);function E(m){var w=m.split("-"),i=w.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return w[0]+i}var b=function(m){F(w,m);function w(){return m!==null&&m.apply(this,arguments)||this}return w.keys=function(i){return(i.getAttribute("style")||"").split(";").map(function(u){var o=u.split(":");return o[0].trim()})},w.prototype.add=function(i,u){return this.canAdd(i,u)?(i.style[E(this.keyName)]=u,!0):!1},w.prototype.remove=function(i){i.style[E(this.keyName)]="",i.getAttribute("style")||i.removeAttribute("style")},w.prototype.value=function(i){var u=i.style[E(this.keyName)];return this.canAdd(i,u)?u:""},w}(D.default);M.default=b},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function b(m,w){for(var i=0;i<w.length;i++){var u=w[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(m,u.key,u)}}return function(m,w,i){return w&&b(m.prototype,w),i&&b(m,i),m}}();function D(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}var E=function(){function b(m,w){D(this,b),this.quill=m,this.options=w,this.modules={}}return F(b,[{key:"init",value:function(){var w=this;Object.keys(this.options.modules).forEach(function(i){w.modules[i]==null&&w.addModule(i)})}},{key:"addModule",value:function(w){var i=this.quill.constructor.import("modules/"+w);return this.modules[w]=new i(this.quill,this.options.modules[w]||{}),this.modules[w]}}]),b}();E.DEFAULTS={modules:{}},E.themes={default:E},M.default=E},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function l(r,a){for(var s=0;s<a.length;s++){var d=a[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}return function(r,a,s){return a&&l(r.prototype,a),s&&l(r,s),r}}(),D=function l(r,a,s){r===null&&(r=Function.prototype);var d=Object.getOwnPropertyDescriptor(r,a);if(d===void 0){var p=Object.getPrototypeOf(r);return p===null?void 0:l(p,a,s)}else{if("value"in d)return d.value;var O=d.get;return O===void 0?void 0:O.call(s)}},E=R(0),b=i(E),m=R(7),w=i(m);function i(l){return l&&l.__esModule?l:{default:l}}function u(l,r){if(!(l instanceof r))throw new TypeError("Cannot call a class as a function")}function o(l,r){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:l}function y(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);l.prototype=Object.create(r&&r.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(l,r):l.__proto__=r)}var v="\uFEFF",h=function(l){y(r,l);function r(a){u(this,r);var s=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a));return s.contentNode=document.createElement("span"),s.contentNode.setAttribute("contenteditable",!1),[].slice.call(s.domNode.childNodes).forEach(function(d){s.contentNode.appendChild(d)}),s.leftGuard=document.createTextNode(v),s.rightGuard=document.createTextNode(v),s.domNode.appendChild(s.leftGuard),s.domNode.appendChild(s.contentNode),s.domNode.appendChild(s.rightGuard),s}return F(r,[{key:"index",value:function(s,d){return s===this.leftGuard?0:s===this.rightGuard?1:D(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"index",this).call(this,s,d)}},{key:"restore",value:function(s){var d=void 0,p=void 0,O=s.data.split(v).join("");if(s===this.leftGuard)if(this.prev instanceof w.default){var N=this.prev.length();this.prev.insertAt(N,O),d={startNode:this.prev.domNode,startOffset:N+O.length}}else p=document.createTextNode(O),this.parent.insertBefore(b.default.create(p),this),d={startNode:p,startOffset:O.length};else s===this.rightGuard&&(this.next instanceof w.default?(this.next.insertAt(0,O),d={startNode:this.next.domNode,startOffset:O.length}):(p=document.createTextNode(O),this.parent.insertBefore(b.default.create(p),this.next),d={startNode:p,startOffset:O.length}));return s.data=v,d}},{key:"update",value:function(s,d){var p=this;s.forEach(function(O){if(O.type==="characterData"&&(O.target===p.leftGuard||O.target===p.rightGuard)){var N=p.restore(O.target);N&&(d.range=N)}})}}]),r}(b.default.Embed);M.default=h},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.AlignStyle=M.AlignClass=M.AlignAttribute=void 0;var F=R(0),D=E(F);function E(u){return u&&u.__esModule?u:{default:u}}var b={scope:D.default.Scope.BLOCK,whitelist:["right","center","justify"]},m=new D.default.Attributor.Attribute("align","align",b),w=new D.default.Attributor.Class("align","ql-align",b),i=new D.default.Attributor.Style("align","text-align",b);M.AlignAttribute=m,M.AlignClass=w,M.AlignStyle=i},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.BackgroundStyle=M.BackgroundClass=void 0;var F=R(0),D=b(F),E=R(26);function b(i){return i&&i.__esModule?i:{default:i}}var m=new D.default.Attributor.Class("background","ql-bg",{scope:D.default.Scope.INLINE}),w=new E.ColorAttributor("background","background-color",{scope:D.default.Scope.INLINE});M.BackgroundClass=m,M.BackgroundStyle=w},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.DirectionStyle=M.DirectionClass=M.DirectionAttribute=void 0;var F=R(0),D=E(F);function E(u){return u&&u.__esModule?u:{default:u}}var b={scope:D.default.Scope.BLOCK,whitelist:["rtl"]},m=new D.default.Attributor.Attribute("direction","dir",b),w=new D.default.Attributor.Class("direction","ql-direction",b),i=new D.default.Attributor.Style("direction","direction",b);M.DirectionAttribute=m,M.DirectionClass=w,M.DirectionStyle=i},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.FontClass=M.FontStyle=void 0;var F=function(){function l(r,a){for(var s=0;s<a.length;s++){var d=a[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}return function(r,a,s){return a&&l(r.prototype,a),s&&l(r,s),r}}(),D=function l(r,a,s){r===null&&(r=Function.prototype);var d=Object.getOwnPropertyDescriptor(r,a);if(d===void 0){var p=Object.getPrototypeOf(r);return p===null?void 0:l(p,a,s)}else{if("value"in d)return d.value;var O=d.get;return O===void 0?void 0:O.call(s)}},E=R(0),b=m(E);function m(l){return l&&l.__esModule?l:{default:l}}function w(l,r){if(!(l instanceof r))throw new TypeError("Cannot call a class as a function")}function i(l,r){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:l}function u(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);l.prototype=Object.create(r&&r.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(l,r):l.__proto__=r)}var o={scope:b.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new b.default.Attributor.Class("font","ql-font",o),v=function(l){u(r,l);function r(){return w(this,r),i(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return F(r,[{key:"value",value:function(s){return D(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"value",this).call(this,s).replace(/["']/g,"")}}]),r}(b.default.Attributor.Style),h=new v("font","font-family",o);M.FontStyle=h,M.FontClass=y},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.SizeStyle=M.SizeClass=void 0;var F=R(0),D=E(F);function E(w){return w&&w.__esModule?w:{default:w}}var b=new D.default.Attributor.Class("size","ql-size",{scope:D.default.Scope.INLINE,whitelist:["small","large","huge"]}),m=new D.default.Attributor.Style("size","font-size",{scope:D.default.Scope.INLINE,whitelist:["10px","18px","32px"]});M.SizeClass=b,M.SizeStyle=m},function(Y,M,R){Y.exports={align:{"":R(76),center:R(77),right:R(78),justify:R(79)},background:R(80),blockquote:R(81),bold:R(82),clean:R(83),code:R(58),"code-block":R(58),color:R(84),direction:{"":R(85),rtl:R(86)},float:{center:R(87),full:R(88),left:R(89),right:R(90)},formula:R(91),header:{1:R(92),2:R(93)},italic:R(94),image:R(95),indent:{"+1":R(96),"-1":R(97)},link:R(98),list:{ordered:R(99),bullet:R(100),check:R(101)},script:{sub:R(102),super:R(103)},strike:R(104),underline:R(105),video:R(106)}},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.getLastChangeIndex=M.default=void 0;var F=function(){function a(s,d){for(var p=0;p<d.length;p++){var O=d[p];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(s,O.key,O)}}return function(s,d,p){return d&&a(s.prototype,d),p&&a(s,p),s}}(),D=R(0),E=u(D),b=R(5),m=u(b),w=R(9),i=u(w);function u(a){return a&&a.__esModule?a:{default:a}}function o(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}function y(a,s){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:a}function v(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(a,s):a.__proto__=s)}var h=function(a){v(s,a);function s(d,p){o(this,s);var O=y(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,d,p));return O.lastRecorded=0,O.ignoreChange=!1,O.clear(),O.quill.on(m.default.events.EDITOR_CHANGE,function(N,k,A,S){N!==m.default.events.TEXT_CHANGE||O.ignoreChange||(!O.options.userOnly||S===m.default.sources.USER?O.record(k,A):O.transform(k))}),O.quill.keyboard.addBinding({key:"Z",shortKey:!0},O.undo.bind(O)),O.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},O.redo.bind(O)),/Win/i.test(navigator.platform)&&O.quill.keyboard.addBinding({key:"Y",shortKey:!0},O.redo.bind(O)),O}return F(s,[{key:"change",value:function(p,O){if(this.stack[p].length!==0){var N=this.stack[p].pop();this.stack[O].push(N),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(N[p],m.default.sources.USER),this.ignoreChange=!1;var k=r(N[p]);this.quill.setSelection(k)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(p,O){if(p.ops.length!==0){this.stack.redo=[];var N=this.quill.getContents().diff(O),k=Date.now();if(this.lastRecorded+this.options.delay>k&&this.stack.undo.length>0){var A=this.stack.undo.pop();N=N.compose(A.undo),p=A.redo.compose(p)}else this.lastRecorded=k;this.stack.undo.push({redo:p,undo:N}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(p){this.stack.undo.forEach(function(O){O.undo=p.transform(O.undo,!0),O.redo=p.transform(O.redo,!0)}),this.stack.redo.forEach(function(O){O.undo=p.transform(O.undo,!0),O.redo=p.transform(O.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),s}(i.default);h.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function l(a){var s=a.ops[a.ops.length-1];return s==null?!1:s.insert!=null?typeof s.insert=="string"&&s.insert.endsWith(`
`):s.attributes!=null?Object.keys(s.attributes).some(function(d){return E.default.query(d,E.default.Scope.BLOCK)!=null}):!1}function r(a){var s=a.reduce(function(p,O){return p+=O.delete||0,p},0),d=a.length()-s;return l(a)&&(d-=1),d}M.default=h,M.getLastChangeIndex=r},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BaseTooltip=void 0;var F=function(){function $(U,re){for(var Q=0;Q<re.length;Q++){var V=re[Q];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(U,V.key,V)}}return function(U,re,Q){return re&&$(U.prototype,re),Q&&$(U,Q),U}}(),D=function $(U,re,Q){U===null&&(U=Function.prototype);var V=Object.getOwnPropertyDescriptor(U,re);if(V===void 0){var G=Object.getPrototypeOf(U);return G===null?void 0:$(G,re,Q)}else{if("value"in V)return V.value;var ie=V.get;return ie===void 0?void 0:ie.call(Q)}},E=R(3),b=k(E),m=R(2),w=k(m),i=R(8),u=k(i),o=R(23),y=k(o),v=R(34),h=k(v),l=R(59),r=k(l),a=R(60),s=k(a),d=R(28),p=k(d),O=R(61),N=k(O);function k($){return $&&$.__esModule?$:{default:$}}function A($,U){if(!($ instanceof U))throw new TypeError("Cannot call a class as a function")}function S($,U){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:$}function x($,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);$.prototype=Object.create(U&&U.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf($,U):$.__proto__=U)}var I=[!1,"center","right","justify"],C=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],L=[!1,"serif","monospace"],J=["1","2","3",!1],z=["small",!1,"large","huge"],ee=function($){x(U,$);function U(re,Q){A(this,U);var V=S(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,re,Q)),G=function ie(le){if(!document.body.contains(re.root))return document.body.removeEventListener("click",ie);V.tooltip!=null&&!V.tooltip.root.contains(le.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(ve){ve.container.contains(le.target)||ve.close()})};return re.emitter.listenDOM("click",document.body,G),V}return F(U,[{key:"addModule",value:function(Q){var V=D(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"addModule",this).call(this,Q);return Q==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(Q,V){Q.forEach(function(G){var ie=G.getAttribute("class")||"";ie.split(/\s+/).forEach(function(le){if(!!le.startsWith("ql-")&&(le=le.slice(3),V[le]!=null))if(le==="direction")G.innerHTML=V[le][""]+V[le].rtl;else if(typeof V[le]=="string")G.innerHTML=V[le];else{var ve=G.value||"";ve!=null&&V[le][ve]&&(G.innerHTML=V[le][ve])}})})}},{key:"buildPickers",value:function(Q,V){var G=this;this.pickers=Q.map(function(le){if(le.classList.contains("ql-align"))return le.querySelector("option")==null&&B(le,I),new s.default(le,V.align);if(le.classList.contains("ql-background")||le.classList.contains("ql-color")){var ve=le.classList.contains("ql-background")?"background":"color";return le.querySelector("option")==null&&B(le,C,ve==="background"?"#ffffff":"#000000"),new r.default(le,V[ve])}else return le.querySelector("option")==null&&(le.classList.contains("ql-font")?B(le,L):le.classList.contains("ql-header")?B(le,J):le.classList.contains("ql-size")&&B(le,z)),new p.default(le)});var ie=function(){G.pickers.forEach(function(ve){ve.update()})};this.quill.on(u.default.events.EDITOR_CHANGE,ie)}}]),U}(h.default);ee.DEFAULTS=(0,b.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var U=this,re=this.container.querySelector("input.ql-image[type=file]");re==null&&(re=document.createElement("input"),re.setAttribute("type","file"),re.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),re.classList.add("ql-image"),re.addEventListener("change",function(){if(re.files!=null&&re.files[0]!=null){var Q=new FileReader;Q.onload=function(V){var G=U.quill.getSelection(!0);U.quill.updateContents(new w.default().retain(G.index).delete(G.length).insert({image:V.target.result}),u.default.sources.USER),U.quill.setSelection(G.index+1,u.default.sources.SILENT),re.value=""},Q.readAsDataURL(re.files[0])}}),this.container.appendChild(re)),re.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var X=function($){x(U,$);function U(re,Q){A(this,U);var V=S(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,re,Q));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return F(U,[{key:"listen",value:function(){var Q=this;this.textbox.addEventListener("keydown",function(V){y.default.match(V,"enter")?(Q.save(),V.preventDefault()):y.default.match(V,"escape")&&(Q.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:Q!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Q)||""),this.root.setAttribute("data-mode",Q)}},{key:"restoreFocus",value:function(){var Q=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Q}},{key:"save",value:function(){var Q=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Q,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Q,u.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":Q=q(Q);case"formula":{if(!Q)break;var G=this.quill.getSelection(!0);if(G!=null){var ie=G.index+G.length;this.quill.insertEmbed(ie,this.root.getAttribute("data-mode"),Q,u.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ie+1," ",u.default.sources.USER),this.quill.setSelection(ie+2,u.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),U}(N.default);function q($){var U=$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return U?(U[1]||"https")+"://www.youtube.com/embed/"+U[2]+"?showinfo=0":(U=$.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(U[1]||"https")+"://player.vimeo.com/video/"+U[2]+"/":$}function B($,U){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;U.forEach(function(Q){var V=document.createElement("option");Q===re?V.setAttribute("selected","selected"):V.setAttribute("value",Q),$.appendChild(V)})}M.BaseTooltip=X,M.default=ee},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function D(){this.head=this.tail=null,this.length=0}return D.prototype.append=function(){for(var E=[],b=0;b<arguments.length;b++)E[b]=arguments[b];this.insertBefore(E[0],null),E.length>1&&this.append.apply(this,E.slice(1))},D.prototype.contains=function(E){for(var b,m=this.iterator();b=m();)if(b===E)return!0;return!1},D.prototype.insertBefore=function(E,b){!E||(E.next=b,b!=null?(E.prev=b.prev,b.prev!=null&&(b.prev.next=E),b.prev=E,b===this.head&&(this.head=E)):this.tail!=null?(this.tail.next=E,E.prev=this.tail,this.tail=E):(E.prev=null,this.head=this.tail=E),this.length+=1)},D.prototype.offset=function(E){for(var b=0,m=this.head;m!=null;){if(m===E)return b;b+=m.length(),m=m.next}return-1},D.prototype.remove=function(E){!this.contains(E)||(E.prev!=null&&(E.prev.next=E.next),E.next!=null&&(E.next.prev=E.prev),E===this.head&&(this.head=E.next),E===this.tail&&(this.tail=E.prev),this.length-=1)},D.prototype.iterator=function(E){return E===void 0&&(E=this.head),function(){var b=E;return E!=null&&(E=E.next),b}},D.prototype.find=function(E,b){b===void 0&&(b=!1);for(var m,w=this.iterator();m=w();){var i=m.length();if(E<i||b&&E===i&&(m.next==null||m.next.length()!==0))return[m,E];E-=i}return[null,0]},D.prototype.forEach=function(E){for(var b,m=this.iterator();b=m();)E(b)},D.prototype.forEachAt=function(E,b,m){if(!(b<=0))for(var w=this.find(E),i=w[0],u=w[1],o,y=E-u,v=this.iterator(i);(o=v())&&y<E+b;){var h=o.length();E>y?m(o,E-y,Math.min(b,y+h-E)):m(o,0,Math.min(h,E+b-y)),y+=h}},D.prototype.map=function(E){return this.reduce(function(b,m){return b.push(E(m)),b},[])},D.prototype.reduce=function(E,b){for(var m,w=this.iterator();m=w();)b=E(b,m);return b},D}();M.default=F},function(Y,M,R){var F=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var y in o)o.hasOwnProperty(y)&&(u[y]=o[y])};return function(u,o){i(u,o);function y(){this.constructor=u}u.prototype=o===null?Object.create(o):(y.prototype=o.prototype,new y)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(17),E=R(1),b={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},m=100,w=function(i){F(u,i);function u(o){var y=i.call(this,o)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,b),y.attach(),y}return u.prototype.detach=function(){i.prototype.detach.call(this),this.observer.disconnect()},u.prototype.deleteAt=function(o,y){this.update(),o===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):i.prototype.deleteAt.call(this,o,y)},u.prototype.formatAt=function(o,y,v,h){this.update(),i.prototype.formatAt.call(this,o,y,v,h)},u.prototype.insertAt=function(o,y,v){this.update(),i.prototype.insertAt.call(this,o,y,v)},u.prototype.optimize=function(o,y){var v=this;o===void 0&&(o=[]),y===void 0&&(y={}),i.prototype.optimize.call(this,y);for(var h=[].slice.call(this.observer.takeRecords());h.length>0;)o.push(h.pop());for(var l=function(d,p){p===void 0&&(p=!0),!(d==null||d===v)&&d.domNode.parentNode!=null&&(d.domNode[E.DATA_KEY].mutations==null&&(d.domNode[E.DATA_KEY].mutations=[]),p&&l(d.parent))},r=function(d){d.domNode[E.DATA_KEY]==null||d.domNode[E.DATA_KEY].mutations==null||(d instanceof D.default&&d.children.forEach(r),d.optimize(y))},a=o,s=0;a.length>0;s+=1){if(s>=m)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(function(d){var p=E.find(d.target,!0);p!=null&&(p.domNode===d.target&&(d.type==="childList"?(l(E.find(d.previousSibling,!1)),[].forEach.call(d.addedNodes,function(O){var N=E.find(O,!1);l(N,!1),N instanceof D.default&&N.children.forEach(function(k){l(k,!1)})})):d.type==="attributes"&&l(p.prev)),l(p))}),this.children.forEach(r),a=[].slice.call(this.observer.takeRecords()),h=a.slice();h.length>0;)o.push(h.pop())}},u.prototype.update=function(o,y){var v=this;y===void 0&&(y={}),o=o||this.observer.takeRecords(),o.map(function(h){var l=E.find(h.target,!0);return l==null?null:l.domNode[E.DATA_KEY].mutations==null?(l.domNode[E.DATA_KEY].mutations=[h],l):(l.domNode[E.DATA_KEY].mutations.push(h),null)}).forEach(function(h){h==null||h===v||h.domNode[E.DATA_KEY]==null||h.update(h.domNode[E.DATA_KEY].mutations||[],y)}),this.domNode[E.DATA_KEY].mutations!=null&&i.prototype.update.call(this,this.domNode[E.DATA_KEY].mutations,y),this.optimize(o,y)},u.blotName="scroll",u.defaultChild="block",u.scope=E.Scope.BLOCK_BLOT,u.tagName="DIV",u}(D.default);M.default=w},function(Y,M,R){var F=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var o in u)u.hasOwnProperty(o)&&(i[o]=u[o])};return function(i,u){w(i,u);function o(){this.constructor=i}i.prototype=u===null?Object.create(u):(o.prototype=u.prototype,new o)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(18),E=R(1);function b(w,i){if(Object.keys(w).length!==Object.keys(i).length)return!1;for(var u in w)if(w[u]!==i[u])return!1;return!0}var m=function(w){F(i,w);function i(){return w!==null&&w.apply(this,arguments)||this}return i.formats=function(u){if(u.tagName!==i.tagName)return w.formats.call(this,u)},i.prototype.format=function(u,o){var y=this;u===this.statics.blotName&&!o?(this.children.forEach(function(v){v instanceof D.default||(v=v.wrap(i.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):w.prototype.format.call(this,u,o)},i.prototype.formatAt=function(u,o,y,v){if(this.formats()[y]!=null||E.query(y,E.Scope.ATTRIBUTE)){var h=this.isolate(u,o);h.format(y,v)}else w.prototype.formatAt.call(this,u,o,y,v)},i.prototype.optimize=function(u){w.prototype.optimize.call(this,u);var o=this.formats();if(Object.keys(o).length===0)return this.unwrap();var y=this.next;y instanceof i&&y.prev===this&&b(o,y.formats())&&(y.moveChildren(this),y.remove())},i.blotName="inline",i.scope=E.Scope.INLINE_BLOT,i.tagName="SPAN",i}(D.default);M.default=m},function(Y,M,R){var F=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,i){w.__proto__=i}||function(w,i){for(var u in i)i.hasOwnProperty(u)&&(w[u]=i[u])};return function(w,i){m(w,i);function u(){this.constructor=w}w.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(18),E=R(1),b=function(m){F(w,m);function w(){return m!==null&&m.apply(this,arguments)||this}return w.formats=function(i){var u=E.query(w.blotName).tagName;if(i.tagName!==u)return m.formats.call(this,i)},w.prototype.format=function(i,u){E.query(i,E.Scope.BLOCK)!=null&&(i===this.statics.blotName&&!u?this.replaceWith(w.blotName):m.prototype.format.call(this,i,u))},w.prototype.formatAt=function(i,u,o,y){E.query(o,E.Scope.BLOCK)!=null?this.format(o,y):m.prototype.formatAt.call(this,i,u,o,y)},w.prototype.insertAt=function(i,u,o){if(o==null||E.query(u,E.Scope.INLINE)!=null)m.prototype.insertAt.call(this,i,u,o);else{var y=this.split(i),v=E.create(u,o);y.parent.insertBefore(v,y)}},w.prototype.update=function(i,u){navigator.userAgent.match(/Trident/)?this.build():m.prototype.update.call(this,i,u)},w.blotName="block",w.scope=E.Scope.BLOCK_BLOT,w.tagName="P",w}(D.default);M.default=b},function(Y,M,R){var F=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var i in w)w.hasOwnProperty(i)&&(m[i]=w[i])};return function(m,w){b(m,w);function i(){this.constructor=m}m.prototype=w===null?Object.create(w):(i.prototype=w.prototype,new i)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(19),E=function(b){F(m,b);function m(){return b!==null&&b.apply(this,arguments)||this}return m.formats=function(w){},m.prototype.format=function(w,i){b.prototype.formatAt.call(this,0,this.length(),w,i)},m.prototype.formatAt=function(w,i,u,o){w===0&&i===this.length()?this.format(u,o):b.prototype.formatAt.call(this,w,i,u,o)},m.prototype.formats=function(){return this.statics.formats(this.domNode)},m}(D.default);M.default=E},function(Y,M,R){var F=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,i){w.__proto__=i}||function(w,i){for(var u in i)i.hasOwnProperty(u)&&(w[u]=i[u])};return function(w,i){m(w,i);function u(){this.constructor=w}w.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();Object.defineProperty(M,"__esModule",{value:!0});var D=R(19),E=R(1),b=function(m){F(w,m);function w(i){var u=m.call(this,i)||this;return u.text=u.statics.value(u.domNode),u}return w.create=function(i){return document.createTextNode(i)},w.value=function(i){var u=i.data;return u.normalize&&(u=u.normalize()),u},w.prototype.deleteAt=function(i,u){this.domNode.data=this.text=this.text.slice(0,i)+this.text.slice(i+u)},w.prototype.index=function(i,u){return this.domNode===i?u:-1},w.prototype.insertAt=function(i,u,o){o==null?(this.text=this.text.slice(0,i)+u+this.text.slice(i),this.domNode.data=this.text):m.prototype.insertAt.call(this,i,u,o)},w.prototype.length=function(){return this.text.length},w.prototype.optimize=function(i){m.prototype.optimize.call(this,i),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof w&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},w.prototype.position=function(i,u){return[this.domNode,i]},w.prototype.split=function(i,u){if(u===void 0&&(u=!1),!u){if(i===0)return this;if(i===this.length())return this.next}var o=E.create(this.domNode.splitText(i));return this.parent.insertBefore(o,this.next),this.text=this.statics.value(this.domNode),o},w.prototype.update=function(i,u){var o=this;i.some(function(y){return y.type==="characterData"&&y.target===o.domNode})&&(this.text=this.statics.value(this.domNode))},w.prototype.value=function(){return this.text},w.blotName="text",w.scope=E.Scope.INLINE_BLOT,w}(D.default);M.default=b},function(Y,M,R){var F=document.createElement("div");if(F.classList.toggle("test-class",!1),F.classList.contains("test-class")){var D=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(E,b){return arguments.length>1&&!this.contains(E)==!b?b:D.call(this,E)}}String.prototype.startsWith||(String.prototype.startsWith=function(E,b){return b=b||0,this.substr(b,E.length)===E}),String.prototype.endsWith||(String.prototype.endsWith=function(E,b){var m=this.toString();(typeof b!="number"||!isFinite(b)||Math.floor(b)!==b||b>m.length)&&(b=m.length),b-=E.length;var w=m.indexOf(E,b);return w!==-1&&w===b}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(b){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof b!="function")throw new TypeError("predicate must be a function");for(var m=Object(this),w=m.length>>>0,i=arguments[1],u,o=0;o<w;o++)if(u=m[o],b.call(i,u,o,m))return u}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(Y,M){var R=-1,F=1,D=0;function E(s,d,p){if(s==d)return s?[[D,s]]:[];(p<0||s.length<p)&&(p=null);var O=i(s,d),N=s.substring(0,O);s=s.substring(O),d=d.substring(O),O=u(s,d);var k=s.substring(s.length-O);s=s.substring(0,s.length-O),d=d.substring(0,d.length-O);var A=b(s,d);return N&&A.unshift([D,N]),k&&A.push([D,k]),y(A),p!=null&&(A=l(A,p)),A=r(A),A}function b(s,d){var p;if(!s)return[[F,d]];if(!d)return[[R,s]];var O=s.length>d.length?s:d,N=s.length>d.length?d:s,k=O.indexOf(N);if(k!=-1)return p=[[F,O.substring(0,k)],[D,N],[F,O.substring(k+N.length)]],s.length>d.length&&(p[0][0]=p[2][0]=R),p;if(N.length==1)return[[R,s],[F,d]];var A=o(s,d);if(A){var S=A[0],x=A[1],I=A[2],C=A[3],L=A[4],J=E(S,I),z=E(x,C);return J.concat([[D,L]],z)}return m(s,d)}function m(s,d){for(var p=s.length,O=d.length,N=Math.ceil((p+O)/2),k=N,A=2*N,S=new Array(A),x=new Array(A),I=0;I<A;I++)S[I]=-1,x[I]=-1;S[k+1]=0,x[k+1]=0;for(var C=p-O,L=C%2!=0,J=0,z=0,ee=0,X=0,q=0;q<N;q++){for(var B=-q+J;B<=q-z;B+=2){var $=k+B,U;B==-q||B!=q&&S[$-1]<S[$+1]?U=S[$+1]:U=S[$-1]+1;for(var re=U-B;U<p&&re<O&&s.charAt(U)==d.charAt(re);)U++,re++;if(S[$]=U,U>p)z+=2;else if(re>O)J+=2;else if(L){var Q=k+C-B;if(Q>=0&&Q<A&&x[Q]!=-1){var V=p-x[Q];if(U>=V)return w(s,d,U,re)}}}for(var G=-q+ee;G<=q-X;G+=2){var Q=k+G,V;G==-q||G!=q&&x[Q-1]<x[Q+1]?V=x[Q+1]:V=x[Q-1]+1;for(var ie=V-G;V<p&&ie<O&&s.charAt(p-V-1)==d.charAt(O-ie-1);)V++,ie++;if(x[Q]=V,V>p)X+=2;else if(ie>O)ee+=2;else if(!L){var $=k+C-G;if($>=0&&$<A&&S[$]!=-1){var U=S[$],re=k+U-$;if(V=p-V,U>=V)return w(s,d,U,re)}}}}return[[R,s],[F,d]]}function w(s,d,p,O){var N=s.substring(0,p),k=d.substring(0,O),A=s.substring(p),S=d.substring(O),x=E(N,k),I=E(A,S);return x.concat(I)}function i(s,d){if(!s||!d||s.charAt(0)!=d.charAt(0))return 0;for(var p=0,O=Math.min(s.length,d.length),N=O,k=0;p<N;)s.substring(k,N)==d.substring(k,N)?(p=N,k=p):O=N,N=Math.floor((O-p)/2+p);return N}function u(s,d){if(!s||!d||s.charAt(s.length-1)!=d.charAt(d.length-1))return 0;for(var p=0,O=Math.min(s.length,d.length),N=O,k=0;p<N;)s.substring(s.length-N,s.length-k)==d.substring(d.length-N,d.length-k)?(p=N,k=p):O=N,N=Math.floor((O-p)/2+p);return N}function o(s,d){var p=s.length>d.length?s:d,O=s.length>d.length?d:s;if(p.length<4||O.length*2<p.length)return null;function N(z,ee,X){for(var q=z.substring(X,X+Math.floor(z.length/4)),B=-1,$="",U,re,Q,V;(B=ee.indexOf(q,B+1))!=-1;){var G=i(z.substring(X),ee.substring(B)),ie=u(z.substring(0,X),ee.substring(0,B));$.length<ie+G&&($=ee.substring(B-ie,B)+ee.substring(B,B+G),U=z.substring(0,X-ie),re=z.substring(X+G),Q=ee.substring(0,B-ie),V=ee.substring(B+G))}return $.length*2>=z.length?[U,re,Q,V,$]:null}var k=N(p,O,Math.ceil(p.length/4)),A=N(p,O,Math.ceil(p.length/2)),S;if(!k&&!A)return null;A?k?S=k[4].length>A[4].length?k:A:S=A:S=k;var x,I,C,L;s.length>d.length?(x=S[0],I=S[1],C=S[2],L=S[3]):(C=S[0],L=S[1],x=S[2],I=S[3]);var J=S[4];return[x,I,C,L,J]}function y(s){s.push([D,""]);for(var d=0,p=0,O=0,N="",k="",A;d<s.length;)switch(s[d][0]){case F:O++,k+=s[d][1],d++;break;case R:p++,N+=s[d][1],d++;break;case D:p+O>1?(p!==0&&O!==0&&(A=i(k,N),A!==0&&(d-p-O>0&&s[d-p-O-1][0]==D?s[d-p-O-1][1]+=k.substring(0,A):(s.splice(0,0,[D,k.substring(0,A)]),d++),k=k.substring(A),N=N.substring(A)),A=u(k,N),A!==0&&(s[d][1]=k.substring(k.length-A)+s[d][1],k=k.substring(0,k.length-A),N=N.substring(0,N.length-A))),p===0?s.splice(d-O,p+O,[F,k]):O===0?s.splice(d-p,p+O,[R,N]):s.splice(d-p-O,p+O,[R,N],[F,k]),d=d-p-O+(p?1:0)+(O?1:0)+1):d!==0&&s[d-1][0]==D?(s[d-1][1]+=s[d][1],s.splice(d,1)):d++,O=0,p=0,N="",k="";break}s[s.length-1][1]===""&&s.pop();var S=!1;for(d=1;d<s.length-1;)s[d-1][0]==D&&s[d+1][0]==D&&(s[d][1].substring(s[d][1].length-s[d-1][1].length)==s[d-1][1]?(s[d][1]=s[d-1][1]+s[d][1].substring(0,s[d][1].length-s[d-1][1].length),s[d+1][1]=s[d-1][1]+s[d+1][1],s.splice(d-1,1),S=!0):s[d][1].substring(0,s[d+1][1].length)==s[d+1][1]&&(s[d-1][1]+=s[d+1][1],s[d][1]=s[d][1].substring(s[d+1][1].length)+s[d+1][1],s.splice(d+1,1),S=!0)),d++;S&&y(s)}var v=E;v.INSERT=F,v.DELETE=R,v.EQUAL=D,Y.exports=v;function h(s,d){if(d===0)return[D,s];for(var p=0,O=0;O<s.length;O++){var N=s[O];if(N[0]===R||N[0]===D){var k=p+N[1].length;if(d===k)return[O+1,s];if(d<k){s=s.slice();var A=d-p,S=[N[0],N[1].slice(0,A)],x=[N[0],N[1].slice(A)];return s.splice(O,1,S,x),[O+1,s]}else p=k}}throw new Error("cursor_pos is out of bounds!")}function l(s,d){var p=h(s,d),O=p[1],N=p[0],k=O[N],A=O[N+1];if(k==null)return s;if(k[0]!==D)return s;if(A!=null&&k[1]+A[1]===A[1]+k[1])return O.splice(N,2,A,k),a(O,N,2);if(A!=null&&A[1].indexOf(k[1])===0){O.splice(N,2,[A[0],k[1]],[0,k[1]]);var S=A[1].slice(k[1].length);return S.length>0&&O.splice(N+2,0,[A[0],S]),a(O,N,3)}else return s}function r(s){for(var d=!1,p=function(A){return A.charCodeAt(0)>=56320&&A.charCodeAt(0)<=57343},O=function(A){return A.charCodeAt(A.length-1)>=55296&&A.charCodeAt(A.length-1)<=56319},N=2;N<s.length;N+=1)s[N-2][0]===D&&O(s[N-2][1])&&s[N-1][0]===R&&p(s[N-1][1])&&s[N][0]===F&&p(s[N][1])&&(d=!0,s[N-1][1]=s[N-2][1].slice(-1)+s[N-1][1],s[N][1]=s[N-2][1].slice(-1)+s[N][1],s[N-2][1]=s[N-2][1].slice(0,-1));if(!d)return s;for(var k=[],N=0;N<s.length;N+=1)s[N][1].length>0&&k.push(s[N]);return k}function a(s,d,p){for(var O=d+p-1;O>=0&&O>=d-1;O--)if(O+1<s.length){var N=s[O],k=s[O+1];N[0]===k[1]&&s.splice(O,2,[N[0],N[1]+k[1]])}return s}},function(Y,M){M=Y.exports=typeof Object.keys=="function"?Object.keys:R,M.shim=R;function R(F){var D=[];for(var E in F)D.push(E);return D}},function(Y,M){var R=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";M=Y.exports=R?F:D,M.supported=F;function F(E){return Object.prototype.toString.call(E)=="[object Arguments]"}M.unsupported=D;function D(E){return E&&typeof E=="object"&&typeof E.length=="number"&&Object.prototype.hasOwnProperty.call(E,"callee")&&!Object.prototype.propertyIsEnumerable.call(E,"callee")||!1}},function(Y,M){var R=Object.prototype.hasOwnProperty,F="~";function D(){}Object.create&&(D.prototype=Object.create(null),new D().__proto__||(F=!1));function E(m,w,i){this.fn=m,this.context=w,this.once=i||!1}function b(){this._events=new D,this._eventsCount=0}b.prototype.eventNames=function(){var w=[],i,u;if(this._eventsCount===0)return w;for(u in i=this._events)R.call(i,u)&&w.push(F?u.slice(1):u);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(i)):w},b.prototype.listeners=function(w,i){var u=F?F+w:w,o=this._events[u];if(i)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var y=0,v=o.length,h=new Array(v);y<v;y++)h[y]=o[y].fn;return h},b.prototype.emit=function(w,i,u,o,y,v){var h=F?F+w:w;if(!this._events[h])return!1;var l=this._events[h],r=arguments.length,a,s;if(l.fn){switch(l.once&&this.removeListener(w,l.fn,void 0,!0),r){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,i),!0;case 3:return l.fn.call(l.context,i,u),!0;case 4:return l.fn.call(l.context,i,u,o),!0;case 5:return l.fn.call(l.context,i,u,o,y),!0;case 6:return l.fn.call(l.context,i,u,o,y,v),!0}for(s=1,a=new Array(r-1);s<r;s++)a[s-1]=arguments[s];l.fn.apply(l.context,a)}else{var d=l.length,p;for(s=0;s<d;s++)switch(l[s].once&&this.removeListener(w,l[s].fn,void 0,!0),r){case 1:l[s].fn.call(l[s].context);break;case 2:l[s].fn.call(l[s].context,i);break;case 3:l[s].fn.call(l[s].context,i,u);break;case 4:l[s].fn.call(l[s].context,i,u,o);break;default:if(!a)for(p=1,a=new Array(r-1);p<r;p++)a[p-1]=arguments[p];l[s].fn.apply(l[s].context,a)}}return!0},b.prototype.on=function(w,i,u){var o=new E(i,u||this),y=F?F+w:w;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],o]:this._events[y].push(o):(this._events[y]=o,this._eventsCount++),this},b.prototype.once=function(w,i,u){var o=new E(i,u||this,!0),y=F?F+w:w;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],o]:this._events[y].push(o):(this._events[y]=o,this._eventsCount++),this},b.prototype.removeListener=function(w,i,u,o){var y=F?F+w:w;if(!this._events[y])return this;if(!i)return--this._eventsCount===0?this._events=new D:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===i&&(!o||v.once)&&(!u||v.context===u)&&(--this._eventsCount===0?this._events=new D:delete this._events[y]);else{for(var h=0,l=[],r=v.length;h<r;h++)(v[h].fn!==i||o&&!v[h].once||u&&v[h].context!==u)&&l.push(v[h]);l.length?this._events[y]=l.length===1?l[0]:l:--this._eventsCount===0?this._events=new D:delete this._events[y]}return this},b.prototype.removeAllListeners=function(w){var i;return w?(i=F?F+w:w,this._events[i]&&(--this._eventsCount===0?this._events=new D:delete this._events[i])):(this._events=new D,this._eventsCount=0),this},b.prototype.off=b.prototype.removeListener,b.prototype.addListener=b.prototype.on,b.prototype.setMaxListeners=function(){return this},b.prefixed=F,b.EventEmitter=b,typeof Y<"u"&&(Y.exports=b)},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.matchText=M.matchSpacing=M.matchNewline=M.matchBlot=M.matchAttributor=M.default=void 0;var F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},D=function(){function H(oe,se){var we=[],ge=!0,xe=!1,Be=void 0;try{for(var Ue=oe[Symbol.iterator](),st;!(ge=(st=Ue.next()).done)&&(we.push(st.value),!(se&&we.length===se));ge=!0);}catch(ct){xe=!0,Be=ct}finally{try{!ge&&Ue.return&&Ue.return()}finally{if(xe)throw Be}}return we}return function(oe,se){if(Array.isArray(oe))return oe;if(Symbol.iterator in Object(oe))return H(oe,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function H(oe,se){for(var we=0;we<se.length;we++){var ge=se[we];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(oe,ge.key,ge)}}return function(oe,se,we){return se&&H(oe.prototype,se),we&&H(oe,we),oe}}(),b=R(3),m=x(b),w=R(2),i=x(w),u=R(0),o=x(u),y=R(5),v=x(y),h=R(10),l=x(h),r=R(9),a=x(r),s=R(36),d=R(37),p=R(13),O=x(p),N=R(26),k=R(38),A=R(39),S=R(40);function x(H){return H&&H.__esModule?H:{default:H}}function I(H,oe,se){return oe in H?Object.defineProperty(H,oe,{value:se,enumerable:!0,configurable:!0,writable:!0}):H[oe]=se,H}function C(H,oe){if(!(H instanceof oe))throw new TypeError("Cannot call a class as a function")}function L(H,oe){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:H}function J(H,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);H.prototype=Object.create(oe&&oe.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(H,oe):H.__proto__=oe)}var z=(0,l.default)("quill:clipboard"),ee="__ql-matcher",X=[[Node.TEXT_NODE,ue],[Node.TEXT_NODE,Le],["br",Oe],[Node.ELEMENT_NODE,Le],[Node.ELEMENT_NODE,ve],[Node.ELEMENT_NODE,Z],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,ce],["li",Ce],["b",ie.bind(ie,"bold")],["i",ie.bind(ie,"italic")],["style",Se]],q=[s.AlignAttribute,k.DirectionAttribute].reduce(function(H,oe){return H[oe.keyName]=oe,H},{}),B=[s.AlignStyle,d.BackgroundStyle,N.ColorStyle,k.DirectionStyle,A.FontStyle,S.SizeStyle].reduce(function(H,oe){return H[oe.keyName]=oe,H},{}),$=function(H){J(oe,H);function oe(se,we){C(this,oe);var ge=L(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this,se,we));return ge.quill.root.addEventListener("paste",ge.onPaste.bind(ge)),ge.container=ge.quill.addContainer("ql-clipboard"),ge.container.setAttribute("contenteditable",!0),ge.container.setAttribute("tabindex",-1),ge.matchers=[],X.concat(ge.options.matchers).forEach(function(xe){var Be=D(xe,2),Ue=Be[0],st=Be[1];!we.matchVisual&&st===Z||ge.addMatcher(Ue,st)}),ge}return E(oe,[{key:"addMatcher",value:function(we,ge){this.matchers.push([we,ge])}},{key:"convert",value:function(we){if(typeof we=="string")return this.container.innerHTML=we.replace(/\>\r?\n +\</g,"><"),this.convert();var ge=this.quill.getFormat(this.quill.selection.savedRange.index);if(ge[O.default.blotName]){var xe=this.container.innerText;return this.container.innerHTML="",new i.default().insert(xe,I({},O.default.blotName,ge[O.default.blotName]))}var Be=this.prepareMatching(),Ue=D(Be,2),st=Ue[0],ct=Ue[1],Je=G(this.container,st,ct);return Q(Je,`
`)&&Je.ops[Je.ops.length-1].attributes==null&&(Je=Je.compose(new i.default().retain(Je.length()-1).delete(1))),z.log("convert",this.container.innerHTML,Je),this.container.innerHTML="",Je}},{key:"dangerouslyPasteHTML",value:function(we,ge){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof we=="string")this.quill.setContents(this.convert(we),ge),this.quill.setSelection(0,v.default.sources.SILENT);else{var Be=this.convert(ge);this.quill.updateContents(new i.default().retain(we).concat(Be),xe),this.quill.setSelection(we+Be.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(we){var ge=this;if(!(we.defaultPrevented||!this.quill.isEnabled())){var xe=this.quill.getSelection(),Be=new i.default().retain(xe.index),Ue=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){Be=Be.concat(ge.convert()).delete(xe.length),ge.quill.updateContents(Be,v.default.sources.USER),ge.quill.setSelection(Be.length()-xe.length,v.default.sources.SILENT),ge.quill.scrollingContainer.scrollTop=Ue,ge.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var we=this,ge=[],xe=[];return this.matchers.forEach(function(Be){var Ue=D(Be,2),st=Ue[0],ct=Ue[1];switch(st){case Node.TEXT_NODE:xe.push(ct);break;case Node.ELEMENT_NODE:ge.push(ct);break;default:[].forEach.call(we.container.querySelectorAll(st),function(Je){Je[ee]=Je[ee]||[],Je[ee].push(ct)});break}}),[ge,xe]}}]),oe}(a.default);$.DEFAULTS={matchers:[],matchVisual:!0};function U(H,oe,se){return(typeof oe>"u"?"undefined":F(oe))==="object"?Object.keys(oe).reduce(function(we,ge){return U(we,ge,oe[ge])},H):H.reduce(function(we,ge){return ge.attributes&&ge.attributes[oe]?we.push(ge):we.insert(ge.insert,(0,m.default)({},I({},oe,se),ge.attributes))},new i.default)}function re(H){if(H.nodeType!==Node.ELEMENT_NODE)return{};var oe="__ql-computed-style";return H[oe]||(H[oe]=window.getComputedStyle(H))}function Q(H,oe){for(var se="",we=H.ops.length-1;we>=0&&se.length<oe.length;--we){var ge=H.ops[we];if(typeof ge.insert!="string")break;se=ge.insert+se}return se.slice(-1*oe.length)===oe}function V(H){if(H.childNodes.length===0)return!1;var oe=re(H);return["block","list-item"].indexOf(oe.display)>-1}function G(H,oe,se){return H.nodeType===H.TEXT_NODE?se.reduce(function(we,ge){return ge(H,we)},new i.default):H.nodeType===H.ELEMENT_NODE?[].reduce.call(H.childNodes||[],function(we,ge){var xe=G(ge,oe,se);return ge.nodeType===H.ELEMENT_NODE&&(xe=oe.reduce(function(Be,Ue){return Ue(ge,Be)},xe),xe=(ge[ee]||[]).reduce(function(Be,Ue){return Ue(ge,Be)},xe)),we.concat(xe)},new i.default):new i.default}function ie(H,oe,se){return U(se,H,!0)}function le(H,oe){var se=o.default.Attributor.Attribute.keys(H),we=o.default.Attributor.Class.keys(H),ge=o.default.Attributor.Style.keys(H),xe={};return se.concat(we).concat(ge).forEach(function(Be){var Ue=o.default.query(Be,o.default.Scope.ATTRIBUTE);Ue!=null&&(xe[Ue.attrName]=Ue.value(H),xe[Ue.attrName])||(Ue=q[Be],Ue!=null&&(Ue.attrName===Be||Ue.keyName===Be)&&(xe[Ue.attrName]=Ue.value(H)||void 0),Ue=B[Be],Ue!=null&&(Ue.attrName===Be||Ue.keyName===Be)&&(Ue=B[Be],xe[Ue.attrName]=Ue.value(H)||void 0))}),Object.keys(xe).length>0&&(oe=U(oe,xe)),oe}function ve(H,oe){var se=o.default.query(H);if(se==null)return oe;if(se.prototype instanceof o.default.Embed){var we={},ge=se.value(H);ge!=null&&(we[se.blotName]=ge,oe=new i.default().insert(we,se.formats(H)))}else typeof se.formats=="function"&&(oe=U(oe,se.blotName,se.formats(H)));return oe}function Oe(H,oe){return Q(oe,`
`)||oe.insert(`
`),oe}function Se(){return new i.default}function Ce(H,oe){var se=o.default.query(H);if(se==null||se.blotName!=="list-item"||!Q(oe,`
`))return oe;for(var we=-1,ge=H.parentNode;!ge.classList.contains("ql-clipboard");)(o.default.query(ge)||{}).blotName==="list"&&(we+=1),ge=ge.parentNode;return we<=0?oe:oe.compose(new i.default().retain(oe.length()-1).retain(1,{indent:we}))}function Le(H,oe){return Q(oe,`
`)||(V(H)||oe.length()>0&&H.nextSibling&&V(H.nextSibling))&&oe.insert(`
`),oe}function Z(H,oe){if(V(H)&&H.nextElementSibling!=null&&!Q(oe,`

`)){var se=H.offsetHeight+parseFloat(re(H).marginTop)+parseFloat(re(H).marginBottom);H.nextElementSibling.offsetTop>H.offsetTop+se*1.5&&oe.insert(`
`)}return oe}function ce(H,oe){var se={},we=H.style||{};return we.fontStyle&&re(H).fontStyle==="italic"&&(se.italic=!0),we.fontWeight&&(re(H).fontWeight.startsWith("bold")||parseInt(re(H).fontWeight)>=700)&&(se.bold=!0),Object.keys(se).length>0&&(oe=U(oe,se)),parseFloat(we.textIndent||0)>0&&(oe=new i.default().insert("	").concat(oe)),oe}function ue(H,oe){var se=H.data;if(H.parentNode.tagName==="O:P")return oe.insert(se.trim());if(se.trim().length===0&&H.parentNode.classList.contains("ql-clipboard"))return oe;if(!re(H.parentNode).whiteSpace.startsWith("pre")){var we=function(xe,Be){return Be=Be.replace(/[^\u00a0]/g,""),Be.length<1&&xe?" ":Be};se=se.replace(/\r\n/g," ").replace(/\n/g," "),se=se.replace(/\s\s+/g,we.bind(we,!0)),(H.previousSibling==null&&V(H.parentNode)||H.previousSibling!=null&&V(H.previousSibling))&&(se=se.replace(/^\s+/,we.bind(we,!1))),(H.nextSibling==null&&V(H.parentNode)||H.nextSibling!=null&&V(H.nextSibling))&&(se=se.replace(/\s+$/,we.bind(we,!1)))}return oe.insert(se)}M.default=$,M.matchAttributor=le,M.matchBlot=ve,M.matchNewline=Le,M.matchSpacing=Z,M.matchText=ue},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function y(v,h){for(var l=0;l<h.length;l++){var r=h[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(v,r.key,r)}}return function(v,h,l){return h&&y(v.prototype,h),l&&y(v,l),v}}(),D=function y(v,h,l){v===null&&(v=Function.prototype);var r=Object.getOwnPropertyDescriptor(v,h);if(r===void 0){var a=Object.getPrototypeOf(v);return a===null?void 0:y(a,h,l)}else{if("value"in r)return r.value;var s=r.get;return s===void 0?void 0:s.call(l)}},E=R(6),b=m(E);function m(y){return y&&y.__esModule?y:{default:y}}function w(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function i(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var o=function(y){u(v,y);function v(){return w(this,v),i(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return F(v,[{key:"optimize",value:function(l){D(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,l),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return D(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(b.default);o.blotName="bold",o.tagName=["STRONG","B"],M.default=o},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.addControls=M.default=void 0;var F=function(){function S(x,I){var C=[],L=!0,J=!1,z=void 0;try{for(var ee=x[Symbol.iterator](),X;!(L=(X=ee.next()).done)&&(C.push(X.value),!(I&&C.length===I));L=!0);}catch(q){J=!0,z=q}finally{try{!L&&ee.return&&ee.return()}finally{if(J)throw z}}return C}return function(x,I){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return S(x,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=function(){function S(x,I){for(var C=0;C<I.length;C++){var L=I[C];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,I,C){return I&&S(x.prototype,I),C&&S(x,C),x}}(),E=R(2),b=l(E),m=R(0),w=l(m),i=R(5),u=l(i),o=R(10),y=l(o),v=R(9),h=l(v);function l(S){return S&&S.__esModule?S:{default:S}}function r(S,x,I){return x in S?Object.defineProperty(S,x,{value:I,enumerable:!0,configurable:!0,writable:!0}):S[x]=I,S}function a(S,x){if(!(S instanceof x))throw new TypeError("Cannot call a class as a function")}function s(S,x){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:S}function d(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);S.prototype=Object.create(x&&x.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(S,x):S.__proto__=x)}var p=(0,y.default)("quill:toolbar"),O=function(S){d(x,S);function x(I,C){a(this,x);var L=s(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,I,C));if(Array.isArray(L.options.container)){var J=document.createElement("div");k(J,L.options.container),I.container.parentNode.insertBefore(J,I.container),L.container=J}else typeof L.options.container=="string"?L.container=document.querySelector(L.options.container):L.container=L.options.container;if(!(L.container instanceof HTMLElement)){var z;return z=p.error("Container required for toolbar",L.options),s(L,z)}return L.container.classList.add("ql-toolbar"),L.controls=[],L.handlers={},Object.keys(L.options.handlers).forEach(function(ee){L.addHandler(ee,L.options.handlers[ee])}),[].forEach.call(L.container.querySelectorAll("button, select"),function(ee){L.attach(ee)}),L.quill.on(u.default.events.EDITOR_CHANGE,function(ee,X){ee===u.default.events.SELECTION_CHANGE&&L.update(X)}),L.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){var ee=L.quill.selection.getRange(),X=F(ee,1),q=X[0];L.update(q)}),L}return D(x,[{key:"addHandler",value:function(C,L){this.handlers[C]=L}},{key:"attach",value:function(C){var L=this,J=[].find.call(C.classList,function(ee){return ee.indexOf("ql-")===0});if(!!J){if(J=J.slice(3),C.tagName==="BUTTON"&&C.setAttribute("type","button"),this.handlers[J]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[J]==null){p.warn("ignoring attaching to disabled format",J,C);return}if(w.default.query(J)==null){p.warn("ignoring attaching to nonexistent format",J,C);return}}var z=C.tagName==="SELECT"?"change":"click";C.addEventListener(z,function(ee){var X=void 0;if(C.tagName==="SELECT"){if(C.selectedIndex<0)return;var q=C.options[C.selectedIndex];q.hasAttribute("selected")?X=!1:X=q.value||!1}else C.classList.contains("ql-active")?X=!1:X=C.value||!C.hasAttribute("value"),ee.preventDefault();L.quill.focus();var B=L.quill.selection.getRange(),$=F(B,1),U=$[0];if(L.handlers[J]!=null)L.handlers[J].call(L,X);else if(w.default.query(J).prototype instanceof w.default.Embed){if(X=prompt("Enter "+J),!X)return;L.quill.updateContents(new b.default().retain(U.index).delete(U.length).insert(r({},J,X)),u.default.sources.USER)}else L.quill.format(J,X,u.default.sources.USER);L.update(U)}),this.controls.push([J,C])}}},{key:"update",value:function(C){var L=C==null?{}:this.quill.getFormat(C);this.controls.forEach(function(J){var z=F(J,2),ee=z[0],X=z[1];if(X.tagName==="SELECT"){var q=void 0;if(C==null)q=null;else if(L[ee]==null)q=X.querySelector("option[selected]");else if(!Array.isArray(L[ee])){var B=L[ee];typeof B=="string"&&(B=B.replace(/\"/g,'\\"')),q=X.querySelector('option[value="'+B+'"]')}q==null?(X.value="",X.selectedIndex=-1):q.selected=!0}else if(C==null)X.classList.remove("ql-active");else if(X.hasAttribute("value")){var $=L[ee]===X.getAttribute("value")||L[ee]!=null&&L[ee].toString()===X.getAttribute("value")||L[ee]==null&&!X.getAttribute("value");X.classList.toggle("ql-active",$)}else X.classList.toggle("ql-active",L[ee]!=null)})}}]),x}(h.default);O.DEFAULTS={};function N(S,x,I){var C=document.createElement("button");C.setAttribute("type","button"),C.classList.add("ql-"+x),I!=null&&(C.value=I),S.appendChild(C)}function k(S,x){Array.isArray(x[0])||(x=[x]),x.forEach(function(I){var C=document.createElement("span");C.classList.add("ql-formats"),I.forEach(function(L){if(typeof L=="string")N(C,L);else{var J=Object.keys(L)[0],z=L[J];Array.isArray(z)?A(C,J,z):N(C,J,z)}}),S.appendChild(C)})}function A(S,x,I){var C=document.createElement("select");C.classList.add("ql-"+x),I.forEach(function(L){var J=document.createElement("option");L!==!1?J.setAttribute("value",L):J.setAttribute("selected","selected"),C.appendChild(J)}),S.appendChild(C)}O.DEFAULTS={container:null,handlers:{clean:function(){var x=this,I=this.quill.getSelection();if(I!=null)if(I.length==0){var C=this.quill.getFormat();Object.keys(C).forEach(function(L){w.default.query(L,w.default.Scope.INLINE)!=null&&x.quill.format(L,!1)})}else this.quill.removeFormat(I,u.default.sources.USER)},direction:function(x){var I=this.quill.getFormat().align;x==="rtl"&&I==null?this.quill.format("align","right",u.default.sources.USER):!x&&I==="right"&&this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",x,u.default.sources.USER)},indent:function(x){var I=this.quill.getSelection(),C=this.quill.getFormat(I),L=parseInt(C.indent||0);if(x==="+1"||x==="-1"){var J=x==="+1"?1:-1;C.direction==="rtl"&&(J*=-1),this.quill.format("indent",L+J,u.default.sources.USER)}},link:function(x){x===!0&&(x=prompt("Enter link URL:")),this.quill.format("link",x,u.default.sources.USER)},list:function(x){var I=this.quill.getSelection(),C=this.quill.getFormat(I);x==="check"?C.list==="checked"||C.list==="unchecked"?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",x,u.default.sources.USER)}}},M.default=O,M.addControls=k},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function y(v,h){for(var l=0;l<h.length;l++){var r=h[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(v,r.key,r)}}return function(v,h,l){return h&&y(v.prototype,h),l&&y(v,l),v}}(),D=function y(v,h,l){v===null&&(v=Function.prototype);var r=Object.getOwnPropertyDescriptor(v,h);if(r===void 0){var a=Object.getPrototypeOf(v);return a===null?void 0:y(a,h,l)}else{if("value"in r)return r.value;var s=r.get;return s===void 0?void 0:s.call(l)}},E=R(28),b=m(E);function m(y){return y&&y.__esModule?y:{default:y}}function w(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function i(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var o=function(y){u(v,y);function v(h,l){w(this,v);var r=i(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,h));return r.label.innerHTML=l,r.container.classList.add("ql-color-picker"),[].slice.call(r.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(a){a.classList.add("ql-primary")}),r}return F(v,[{key:"buildItem",value:function(l){var r=D(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,l);return r.style.backgroundColor=l.getAttribute("value")||"",r}},{key:"selectItem",value:function(l,r){D(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,l,r);var a=this.label.querySelector(".ql-color-label"),s=l&&l.getAttribute("data-value")||"";a&&(a.tagName==="line"?a.style.stroke=s:a.style.fill=s)}}]),v}(b.default);M.default=o},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function y(v,h){for(var l=0;l<h.length;l++){var r=h[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(v,r.key,r)}}return function(v,h,l){return h&&y(v.prototype,h),l&&y(v,l),v}}(),D=function y(v,h,l){v===null&&(v=Function.prototype);var r=Object.getOwnPropertyDescriptor(v,h);if(r===void 0){var a=Object.getPrototypeOf(v);return a===null?void 0:y(a,h,l)}else{if("value"in r)return r.value;var s=r.get;return s===void 0?void 0:s.call(l)}},E=R(28),b=m(E);function m(y){return y&&y.__esModule?y:{default:y}}function w(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function i(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var o=function(y){u(v,y);function v(h,l){w(this,v);var r=i(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,h));return r.container.classList.add("ql-icon-picker"),[].forEach.call(r.container.querySelectorAll(".ql-picker-item"),function(a){a.innerHTML=l[a.getAttribute("data-value")||""]}),r.defaultItem=r.container.querySelector(".ql-selected"),r.selectItem(r.defaultItem),r}return F(v,[{key:"selectItem",value:function(l,r){D(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,l,r),l=l||this.defaultItem,this.label.innerHTML=l.innerHTML}}]),v}(b.default);M.default=o},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function b(m,w){for(var i=0;i<w.length;i++){var u=w[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(m,u.key,u)}}return function(m,w,i){return w&&b(m.prototype,w),i&&b(m,i),m}}();function D(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}var E=function(){function b(m,w){var i=this;D(this,b),this.quill=m,this.boundsContainer=w||document.body,this.root=m.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){i.root.style.marginTop=-1*i.quill.root.scrollTop+"px"}),this.hide()}return F(b,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(w){var i=w.left+w.width/2-this.root.offsetWidth/2,u=w.bottom+this.quill.root.scrollTop;this.root.style.left=i+"px",this.root.style.top=u+"px",this.root.classList.remove("ql-flip");var o=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>o.right&&(v=o.right-y.right,this.root.style.left=i+v+"px"),y.left<o.left&&(v=o.left-y.left,this.root.style.left=i+v+"px"),y.bottom>o.bottom){var h=y.bottom-y.top,l=w.bottom-w.top+h;this.root.style.top=u-l+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),b}();M.default=E},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function A(S,x){var I=[],C=!0,L=!1,J=void 0;try{for(var z=S[Symbol.iterator](),ee;!(C=(ee=z.next()).done)&&(I.push(ee.value),!(x&&I.length===x));C=!0);}catch(X){L=!0,J=X}finally{try{!C&&z.return&&z.return()}finally{if(L)throw J}}return I}return function(S,x){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return A(S,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=function A(S,x,I){S===null&&(S=Function.prototype);var C=Object.getOwnPropertyDescriptor(S,x);if(C===void 0){var L=Object.getPrototypeOf(S);return L===null?void 0:A(L,x,I)}else{if("value"in C)return C.value;var J=C.get;return J===void 0?void 0:J.call(I)}},E=function(){function A(S,x){for(var I=0;I<x.length;I++){var C=x[I];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,x,I){return x&&A(S.prototype,x),I&&A(S,I),S}}(),b=R(3),m=a(b),w=R(8),i=a(w),u=R(43),o=a(u),y=R(27),v=a(y),h=R(15),l=R(41),r=a(l);function a(A){return A&&A.__esModule?A:{default:A}}function s(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function d(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:A}function p(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}var O=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],N=function(A){p(S,A);function S(x,I){s(this,S),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=O);var C=d(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,x,I));return C.quill.container.classList.add("ql-snow"),C}return E(S,[{key:"extendToolbar",value:function(I){I.container.classList.add("ql-snow"),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),r.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),r.default),this.tooltip=new k(this.quill,this.options.bounds),I.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(C,L){I.handlers.link.call(I,!L.format.link)})}}]),S}(o.default);N.DEFAULTS=(0,m.default)(!0,{},o.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){if(S){var x=this.quill.getSelection();if(x==null||x.length==0)return;var I=this.quill.getText(x);/^\S+@\S+\.\S+$/.test(I)&&I.indexOf("mailto:")!==0&&(I="mailto:"+I);var C=this.quill.theme.tooltip;C.edit("link",I)}else this.quill.format("link",!1)}}}}});var k=function(A){p(S,A);function S(x,I){s(this,S);var C=d(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,x,I));return C.preview=C.root.querySelector("a.ql-preview"),C}return E(S,[{key:"listen",value:function(){var I=this;D(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(C){I.root.classList.contains("ql-editing")?I.save():I.edit("link",I.preview.textContent),C.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(C){if(I.linkRange!=null){var L=I.linkRange;I.restoreFocus(),I.quill.formatText(L,"link",!1,i.default.sources.USER),delete I.linkRange}C.preventDefault(),I.hide()}),this.quill.on(i.default.events.SELECTION_CHANGE,function(C,L,J){if(C!=null){if(C.length===0&&J===i.default.sources.USER){var z=I.quill.scroll.descendant(v.default,C.index),ee=F(z,2),X=ee[0],q=ee[1];if(X!=null){I.linkRange=new h.Range(C.index-q,X.length());var B=v.default.formats(X.domNode);I.preview.textContent=B,I.preview.setAttribute("href",B),I.show(),I.position(I.quill.getBounds(I.linkRange));return}}else delete I.linkRange;I.hide()}})}},{key:"show",value:function(){D(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),S}(u.BaseTooltip);k.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),M.default=N},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(29),D=ge(F),E=R(36),b=R(38),m=R(64),w=R(65),i=ge(w),u=R(66),o=ge(u),y=R(67),v=ge(y),h=R(37),l=R(26),r=R(39),a=R(40),s=R(56),d=ge(s),p=R(68),O=ge(p),N=R(27),k=ge(N),A=R(69),S=ge(A),x=R(70),I=ge(x),C=R(71),L=ge(C),J=R(72),z=ge(J),ee=R(73),X=ge(ee),q=R(13),B=ge(q),$=R(74),U=ge($),re=R(75),Q=ge(re),V=R(57),G=ge(V),ie=R(41),le=ge(ie),ve=R(28),Oe=ge(ve),Se=R(59),Ce=ge(Se),Le=R(60),Z=ge(Le),ce=R(61),ue=ge(ce),H=R(108),oe=ge(H),se=R(62),we=ge(se);function ge(xe){return xe&&xe.__esModule?xe:{default:xe}}D.default.register({"attributors/attribute/direction":b.DirectionAttribute,"attributors/class/align":E.AlignClass,"attributors/class/background":h.BackgroundClass,"attributors/class/color":l.ColorClass,"attributors/class/direction":b.DirectionClass,"attributors/class/font":r.FontClass,"attributors/class/size":a.SizeClass,"attributors/style/align":E.AlignStyle,"attributors/style/background":h.BackgroundStyle,"attributors/style/color":l.ColorStyle,"attributors/style/direction":b.DirectionStyle,"attributors/style/font":r.FontStyle,"attributors/style/size":a.SizeStyle},!0),D.default.register({"formats/align":E.AlignClass,"formats/direction":b.DirectionClass,"formats/indent":m.IndentClass,"formats/background":h.BackgroundStyle,"formats/color":l.ColorStyle,"formats/font":r.FontClass,"formats/size":a.SizeClass,"formats/blockquote":i.default,"formats/code-block":B.default,"formats/header":o.default,"formats/list":v.default,"formats/bold":d.default,"formats/code":q.Code,"formats/italic":O.default,"formats/link":k.default,"formats/script":S.default,"formats/strike":I.default,"formats/underline":L.default,"formats/image":z.default,"formats/video":X.default,"formats/list/item":y.ListItem,"modules/formula":U.default,"modules/syntax":Q.default,"modules/toolbar":G.default,"themes/bubble":oe.default,"themes/snow":we.default,"ui/icons":le.default,"ui/picker":Oe.default,"ui/icon-picker":Z.default,"ui/color-picker":Ce.default,"ui/tooltip":ue.default},!0),M.default=D.default},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.IndentClass=void 0;var F=function(){function v(h,l){for(var r=0;r<l.length;r++){var a=l[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(h,a.key,a)}}return function(h,l,r){return l&&v(h.prototype,l),r&&v(h,r),h}}(),D=function v(h,l,r){h===null&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,l);if(a===void 0){var s=Object.getPrototypeOf(h);return s===null?void 0:v(s,l,r)}else{if("value"in a)return a.value;var d=a.get;return d===void 0?void 0:d.call(r)}},E=R(0),b=m(E);function m(v){return v&&v.__esModule?v:{default:v}}function w(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function i(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function u(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var o=function(v){u(h,v);function h(){return w(this,h),i(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return F(h,[{key:"add",value:function(r,a){if(a==="+1"||a==="-1"){var s=this.value(r)||0;a=a==="+1"?s+1:s-1}return a===0?(this.remove(r),!0):D(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"add",this).call(this,r,a)}},{key:"canAdd",value:function(r,a){return D(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"canAdd",this).call(this,r,a)||D(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"canAdd",this).call(this,r,parseInt(a))}},{key:"value",value:function(r){return parseInt(D(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"value",this).call(this,r))||void 0}}]),h}(b.default.Attributor.Class),y=new o("indent","ql-indent",{scope:b.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});M.IndentClass=y},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(4),D=E(F);function E(u){return u&&u.__esModule?u:{default:u}}function b(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function m(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function w(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var i=function(u){w(o,u);function o(){return b(this,o),m(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(D.default);i.blotName="blockquote",i.tagName="blockquote",M.default=i},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function o(y,v){for(var h=0;h<v.length;h++){var l=v[h];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(y,l.key,l)}}return function(y,v,h){return v&&o(y.prototype,v),h&&o(y,h),y}}(),D=R(4),E=b(D);function b(o){return o&&o.__esModule?o:{default:o}}function m(o,y){if(!(o instanceof y))throw new TypeError("Cannot call a class as a function")}function w(o,y){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:o}function i(o,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);o.prototype=Object.create(y&&y.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(o,y):o.__proto__=y)}var u=function(o){i(y,o);function y(){return m(this,y),w(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return F(y,null,[{key:"formats",value:function(h){return this.tagName.indexOf(h.tagName)+1}}]),y}(E.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],M.default=u},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.ListItem=void 0;var F=function(){function s(d,p){for(var O=0;O<p.length;O++){var N=p[O];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}return function(d,p,O){return p&&s(d.prototype,p),O&&s(d,O),d}}(),D=function s(d,p,O){d===null&&(d=Function.prototype);var N=Object.getOwnPropertyDescriptor(d,p);if(N===void 0){var k=Object.getPrototypeOf(d);return k===null?void 0:s(k,p,O)}else{if("value"in N)return N.value;var A=N.get;return A===void 0?void 0:A.call(O)}},E=R(0),b=o(E),m=R(4),w=o(m),i=R(25),u=o(i);function o(s){return s&&s.__esModule?s:{default:s}}function y(s,d,p){return d in s?Object.defineProperty(s,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):s[d]=p,s}function v(s,d){if(!(s instanceof d))throw new TypeError("Cannot call a class as a function")}function h(s,d){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:s}function l(s,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);s.prototype=Object.create(d&&d.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(s,d):s.__proto__=d)}var r=function(s){l(d,s);function d(){return v(this,d),h(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return F(d,[{key:"format",value:function(O,N){O===a.blotName&&!N?this.replaceWith(b.default.create(this.statics.scope)):D(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"format",this).call(this,O,N)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():D(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(O,N){return this.parent.isolate(this.offset(this.parent),this.length()),O===this.parent.statics.blotName?(this.parent.replaceWith(O,N),this):(this.parent.unwrap(),D(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"replaceWith",this).call(this,O,N))}}],[{key:"formats",value:function(O){return O.tagName===this.tagName?void 0:D(d.__proto__||Object.getPrototypeOf(d),"formats",this).call(this,O)}}]),d}(w.default);r.blotName="list-item",r.tagName="LI";var a=function(s){l(d,s),F(d,null,[{key:"create",value:function(O){var N=O==="ordered"?"OL":"UL",k=D(d.__proto__||Object.getPrototypeOf(d),"create",this).call(this,N);return(O==="checked"||O==="unchecked")&&k.setAttribute("data-checked",O==="checked"),k}},{key:"formats",value:function(O){if(O.tagName==="OL")return"ordered";if(O.tagName==="UL")return O.hasAttribute("data-checked")?O.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function d(p){v(this,d);var O=h(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,p)),N=function(A){if(A.target.parentNode===p){var S=O.statics.formats(p),x=b.default.find(A.target);S==="checked"?x.format("list","unchecked"):S==="unchecked"&&x.format("list","checked")}};return p.addEventListener("touchstart",N),p.addEventListener("mousedown",N),O}return F(d,[{key:"format",value:function(O,N){this.children.length>0&&this.children.tail.format(O,N)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(O,N){if(O instanceof r)D(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"insertBefore",this).call(this,O,N);else{var k=N==null?this.length():N.offset(this),A=this.split(k);A.parent.insertBefore(O,A)}}},{key:"optimize",value:function(O){D(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"optimize",this).call(this,O);var N=this.next;N!=null&&N.prev===this&&N.statics.blotName===this.statics.blotName&&N.domNode.tagName===this.domNode.tagName&&N.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(N.moveChildren(this),N.remove())}},{key:"replace",value:function(O){if(O.statics.blotName!==this.statics.blotName){var N=b.default.create(this.statics.defaultChild);O.moveChildren(N),this.appendChild(N)}D(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"replace",this).call(this,O)}}]),d}(u.default);a.blotName="list",a.scope=b.default.Scope.BLOCK_BLOT,a.tagName=["OL","UL"],a.defaultChild="list-item",a.allowedChildren=[r],M.ListItem=r,M.default=a},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(56),D=E(F);function E(u){return u&&u.__esModule?u:{default:u}}function b(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function m(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function w(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var i=function(u){w(o,u);function o(){return b(this,o),m(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(D.default);i.blotName="italic",i.tagName=["EM","I"],M.default=i},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function y(v,h){for(var l=0;l<h.length;l++){var r=h[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(v,r.key,r)}}return function(v,h,l){return h&&y(v.prototype,h),l&&y(v,l),v}}(),D=function y(v,h,l){v===null&&(v=Function.prototype);var r=Object.getOwnPropertyDescriptor(v,h);if(r===void 0){var a=Object.getPrototypeOf(v);return a===null?void 0:y(a,h,l)}else{if("value"in r)return r.value;var s=r.get;return s===void 0?void 0:s.call(l)}},E=R(6),b=m(E);function m(y){return y&&y.__esModule?y:{default:y}}function w(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function i(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var o=function(y){u(v,y);function v(){return w(this,v),i(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return F(v,null,[{key:"create",value:function(l){return l==="super"?document.createElement("sup"):l==="sub"?document.createElement("sub"):D(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,l)}},{key:"formats",value:function(l){if(l.tagName==="SUB")return"sub";if(l.tagName==="SUP")return"super"}}]),v}(b.default);o.blotName="script",o.tagName=["SUB","SUP"],M.default=o},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(6),D=E(F);function E(u){return u&&u.__esModule?u:{default:u}}function b(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function m(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function w(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var i=function(u){w(o,u);function o(){return b(this,o),m(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(D.default);i.blotName="strike",i.tagName="S",M.default=i},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=R(6),D=E(F);function E(u){return u&&u.__esModule?u:{default:u}}function b(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function m(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function w(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var i=function(u){w(o,u);function o(){return b(this,o),m(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return o}(D.default);i.blotName="underline",i.tagName="U",M.default=i},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function h(l,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(l,s.key,s)}}return function(l,r,a){return r&&h(l.prototype,r),a&&h(l,a),l}}(),D=function h(l,r,a){l===null&&(l=Function.prototype);var s=Object.getOwnPropertyDescriptor(l,r);if(s===void 0){var d=Object.getPrototypeOf(l);return d===null?void 0:h(d,r,a)}else{if("value"in s)return s.value;var p=s.get;return p===void 0?void 0:p.call(a)}},E=R(0),b=w(E),m=R(27);function w(h){return h&&h.__esModule?h:{default:h}}function i(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")}function u(h,l){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:h}function o(h,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);h.prototype=Object.create(l&&l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(h,l):h.__proto__=l)}var y=["alt","height","width"],v=function(h){o(l,h);function l(){return i(this,l),u(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return F(l,[{key:"format",value:function(a,s){y.indexOf(a)>-1?s?this.domNode.setAttribute(a,s):this.domNode.removeAttribute(a):D(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"format",this).call(this,a,s)}}],[{key:"create",value:function(a){var s=D(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this,a);return typeof a=="string"&&s.setAttribute("src",this.sanitize(a)),s}},{key:"formats",value:function(a){return y.reduce(function(s,d){return a.hasAttribute(d)&&(s[d]=a.getAttribute(d)),s},{})}},{key:"match",value:function(a){return/\.(jpe?g|gif|png)$/.test(a)||/^data:image\/.+;base64/.test(a)}},{key:"sanitize",value:function(a){return(0,m.sanitize)(a,["http","https","data"])?a:"//:0"}},{key:"value",value:function(a){return a.getAttribute("src")}}]),l}(b.default.Embed);v.blotName="image",v.tagName="IMG",M.default=v},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0});var F=function(){function h(l,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(l,s.key,s)}}return function(l,r,a){return r&&h(l.prototype,r),a&&h(l,a),l}}(),D=function h(l,r,a){l===null&&(l=Function.prototype);var s=Object.getOwnPropertyDescriptor(l,r);if(s===void 0){var d=Object.getPrototypeOf(l);return d===null?void 0:h(d,r,a)}else{if("value"in s)return s.value;var p=s.get;return p===void 0?void 0:p.call(a)}},E=R(4),b=R(27),m=w(b);function w(h){return h&&h.__esModule?h:{default:h}}function i(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")}function u(h,l){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:h}function o(h,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);h.prototype=Object.create(l&&l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(h,l):h.__proto__=l)}var y=["height","width"],v=function(h){o(l,h);function l(){return i(this,l),u(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return F(l,[{key:"format",value:function(a,s){y.indexOf(a)>-1?s?this.domNode.setAttribute(a,s):this.domNode.removeAttribute(a):D(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"format",this).call(this,a,s)}}],[{key:"create",value:function(a){var s=D(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this,a);return s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen",!0),s.setAttribute("src",this.sanitize(a)),s}},{key:"formats",value:function(a){return y.reduce(function(s,d){return a.hasAttribute(d)&&(s[d]=a.getAttribute(d)),s},{})}},{key:"sanitize",value:function(a){return m.default.sanitize(a)}},{key:"value",value:function(a){return a.getAttribute("src")}}]),l}(E.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",M.default=v},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.FormulaBlot=void 0;var F=function(){function a(s,d){for(var p=0;p<d.length;p++){var O=d[p];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(s,O.key,O)}}return function(s,d,p){return d&&a(s.prototype,d),p&&a(s,p),s}}(),D=function a(s,d,p){s===null&&(s=Function.prototype);var O=Object.getOwnPropertyDescriptor(s,d);if(O===void 0){var N=Object.getPrototypeOf(s);return N===null?void 0:a(N,d,p)}else{if("value"in O)return O.value;var k=O.get;return k===void 0?void 0:k.call(p)}},E=R(35),b=o(E),m=R(5),w=o(m),i=R(9),u=o(i);function o(a){return a&&a.__esModule?a:{default:a}}function y(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}function v(a,s){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:a}function h(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(a,s):a.__proto__=s)}var l=function(a){h(s,a);function s(){return y(this,s),v(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return F(s,null,[{key:"create",value:function(p){var O=D(s.__proto__||Object.getPrototypeOf(s),"create",this).call(this,p);return typeof p=="string"&&(window.katex.render(p,O,{throwOnError:!1,errorColor:"#f00"}),O.setAttribute("data-value",p)),O}},{key:"value",value:function(p){return p.getAttribute("data-value")}}]),s}(b.default);l.blotName="formula",l.className="ql-formula",l.tagName="SPAN";var r=function(a){h(s,a),F(s,null,[{key:"register",value:function(){w.default.register(l,!0)}}]);function s(){y(this,s);var d=v(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return d}return s}(u.default);M.FormulaBlot=l,M.default=r},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.CodeToken=M.CodeBlock=void 0;var F=function(){function p(O,N){for(var k=0;k<N.length;k++){var A=N[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,A.key,A)}}return function(O,N,k){return N&&p(O.prototype,N),k&&p(O,k),O}}(),D=function p(O,N,k){O===null&&(O=Function.prototype);var A=Object.getOwnPropertyDescriptor(O,N);if(A===void 0){var S=Object.getPrototypeOf(O);return S===null?void 0:p(S,N,k)}else{if("value"in A)return A.value;var x=A.get;return x===void 0?void 0:x.call(k)}},E=R(0),b=v(E),m=R(5),w=v(m),i=R(9),u=v(i),o=R(13),y=v(o);function v(p){return p&&p.__esModule?p:{default:p}}function h(p,O){if(!(p instanceof O))throw new TypeError("Cannot call a class as a function")}function l(p,O){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:p}function r(p,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);p.prototype=Object.create(O&&O.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(p,O):p.__proto__=O)}var a=function(p){r(O,p);function O(){return h(this,O),l(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return F(O,[{key:"replaceWith",value:function(k){this.domNode.textContent=this.domNode.textContent,this.attach(),D(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replaceWith",this).call(this,k)}},{key:"highlight",value:function(k){var A=this.domNode.textContent;this.cachedText!==A&&((A.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=k(A),this.domNode.normalize(),this.attach()),this.cachedText=A)}}]),O}(y.default);a.className="ql-syntax";var s=new b.default.Attributor.Class("token","hljs",{scope:b.default.Scope.INLINE}),d=function(p){r(O,p),F(O,null,[{key:"register",value:function(){w.default.register(s,!0),w.default.register(a,!0)}}]);function O(N,k){h(this,O);var A=l(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,N,k));if(typeof A.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var S=null;return A.quill.on(w.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(S),S=setTimeout(function(){A.highlight(),S=null},A.options.interval)}),A.highlight(),A}return F(O,[{key:"highlight",value:function(){var k=this;if(!this.quill.selection.composing){this.quill.update(w.default.sources.USER);var A=this.quill.getSelection();this.quill.scroll.descendants(a).forEach(function(S){S.highlight(k.options.highlight)}),this.quill.update(w.default.sources.SILENT),A!=null&&this.quill.setSelection(A,w.default.sources.SILENT)}}}]),O}(u.default);d.DEFAULTS={highlight:function(){return window.hljs==null?null:function(p){var O=window.hljs.highlightAuto(p);return O.value}}(),interval:1e3},M.CodeBlock=a,M.CodeToken=s,M.default=d},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(Y,M){Y.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(Y,M){Y.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(Y,M){Y.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(Y,M){Y.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(Y,M){Y.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(Y,M,R){Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BubbleTooltip=void 0;var F=function O(N,k,A){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,k);if(S===void 0){var x=Object.getPrototypeOf(N);return x===null?void 0:O(x,k,A)}else{if("value"in S)return S.value;var I=S.get;return I===void 0?void 0:I.call(A)}},D=function(){function O(N,k){for(var A=0;A<k.length;A++){var S=k[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,k,A){return k&&O(N.prototype,k),A&&O(N,A),N}}(),E=R(3),b=h(E),m=R(8),w=h(m),i=R(43),u=h(i),o=R(15),y=R(41),v=h(y);function h(O){return O&&O.__esModule?O:{default:O}}function l(O,N){if(!(O instanceof N))throw new TypeError("Cannot call a class as a function")}function r(O,N){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:O}function a(O,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);O.prototype=Object.create(N&&N.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(O,N):O.__proto__=N)}var s=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],d=function(O){a(N,O);function N(k,A){l(this,N),A.modules.toolbar!=null&&A.modules.toolbar.container==null&&(A.modules.toolbar.container=s);var S=r(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,k,A));return S.quill.container.classList.add("ql-bubble"),S}return D(N,[{key:"extendToolbar",value:function(A){this.tooltip=new p(this.quill,this.options.bounds),this.tooltip.root.appendChild(A.container),this.buildButtons([].slice.call(A.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(A.container.querySelectorAll("select")),v.default)}}]),N}(u.default);d.DEFAULTS=(0,b.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(N){N?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var p=function(O){a(N,O);function N(k,A){l(this,N);var S=r(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,k,A));return S.quill.on(w.default.events.EDITOR_CHANGE,function(x,I,C,L){if(x===w.default.events.SELECTION_CHANGE)if(I!=null&&I.length>0&&L===w.default.sources.USER){S.show(),S.root.style.left="0px",S.root.style.width="",S.root.style.width=S.root.offsetWidth+"px";var J=S.quill.getLines(I.index,I.length);if(J.length===1)S.position(S.quill.getBounds(I));else{var z=J[J.length-1],ee=S.quill.getIndex(z),X=Math.min(z.length()-1,I.index+I.length-ee),q=S.quill.getBounds(new o.Range(ee,X));S.position(q)}}else document.activeElement!==S.textbox&&S.quill.hasFocus()&&S.hide()}),S}return D(N,[{key:"listen",value:function(){var A=this;F(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){A.root.classList.remove("ql-editing")}),this.quill.on(w.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!A.root.classList.contains("ql-hidden")){var S=A.quill.getSelection();S!=null&&A.position(A.quill.getBounds(S))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(A){var S=F(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"position",this).call(this,A),x=this.root.querySelector(".ql-tooltip-arrow");if(x.style.marginLeft="",S===0)return S;x.style.marginLeft=-1*S-x.offsetWidth/2+"px"}}]),N}(i.BaseTooltip);p.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),M.BubbleTooltip=p,M.default=d},function(Y,M,R){Y.exports=R(63)}]).default})})(Ji);const Bi=ti(Ji.exports);var $i={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(He,me){(function(Y,M){He.exports=M()})(self,()=>(()=>{var Y={582:(D,E,b)=>{b.d(E,{Z:()=>o});var m=b(81),w=b.n(m),i=b(645),u=b.n(i)()(w());u.push([D.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const o=u},645:D=>{D.exports=function(E){var b=[];return b.toString=function(){return this.map(function(m){var w="",i=m[5]!==void 0;return m[4]&&(w+="@supports (".concat(m[4],") {")),m[2]&&(w+="@media ".concat(m[2]," {")),i&&(w+="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {")),w+=E(m),i&&(w+="}"),m[2]&&(w+="}"),m[4]&&(w+="}"),w}).join("")},b.i=function(m,w,i,u,o){typeof m=="string"&&(m=[[null,m,void 0]]);var y={};if(i)for(var v=0;v<this.length;v++){var h=this[v][0];h!=null&&(y[h]=!0)}for(var l=0;l<m.length;l++){var r=[].concat(m[l]);i&&y[r[0]]||(o!==void 0&&(r[5]===void 0||(r[1]="@layer".concat(r[5].length>0?" ".concat(r[5]):""," {").concat(r[1],"}")),r[5]=o),w&&(r[2]&&(r[1]="@media ".concat(r[2]," {").concat(r[1],"}")),r[2]=w),u&&(r[4]?(r[1]="@supports (".concat(r[4],") {").concat(r[1],"}"),r[4]=u):r[4]="".concat(u)),b.push(r))}},b}},81:D=>{D.exports=function(E){return E[1]}},465:(D,E,b)=>{D=b.nmd(D);var m="__lodash_hash_undefined__",w=9007199254740991,i="[object Arguments]",u="[object Boolean]",o="[object Date]",y="[object Function]",v="[object GeneratorFunction]",h="[object Map]",l="[object Number]",r="[object Object]",a="[object Promise]",s="[object RegExp]",d="[object Set]",p="[object String]",O="[object Symbol]",N="[object WeakMap]",k="[object ArrayBuffer]",A="[object DataView]",S="[object Float32Array]",x="[object Float64Array]",I="[object Int8Array]",C="[object Int16Array]",L="[object Int32Array]",J="[object Uint8Array]",z="[object Uint8ClampedArray]",ee="[object Uint16Array]",X="[object Uint32Array]",q=/\w*$/,B=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,U={};U[i]=U["[object Array]"]=U[k]=U[A]=U[u]=U[o]=U[S]=U[x]=U[I]=U[C]=U[L]=U[h]=U[l]=U[r]=U[s]=U[d]=U[p]=U[O]=U[J]=U[z]=U[ee]=U[X]=!0,U["[object Error]"]=U[y]=U[N]=!1;var re=typeof b.g=="object"&&b.g&&b.g.Object===Object&&b.g,Q=typeof self=="object"&&self&&self.Object===Object&&self,V=re||Q||Function("return this")(),G=E&&!E.nodeType&&E,ie=G&&D&&!D.nodeType&&D,le=ie&&ie.exports===G;function ve(te,de){return te.set(de[0],de[1]),te}function Oe(te,de){return te.add(de),te}function Se(te,de,Ie,Fe){var Xe=-1,nt=te?te.length:0;for(Fe&&nt&&(Ie=te[++Xe]);++Xe<nt;)Ie=de(Ie,te[Xe],Xe,te);return Ie}function Ce(te){var de=!1;if(te!=null&&typeof te.toString!="function")try{de=!!(te+"")}catch{}return de}function Le(te){var de=-1,Ie=Array(te.size);return te.forEach(function(Fe,Xe){Ie[++de]=[Xe,Fe]}),Ie}function Z(te,de){return function(Ie){return te(de(Ie))}}function ce(te){var de=-1,Ie=Array(te.size);return te.forEach(function(Fe){Ie[++de]=Fe}),Ie}var ue,H=Array.prototype,oe=Function.prototype,se=Object.prototype,we=V["__core-js_shared__"],ge=(ue=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+ue:"",xe=oe.toString,Be=se.hasOwnProperty,Ue=se.toString,st=RegExp("^"+xe.call(Be).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=le?V.Buffer:void 0,Je=V.Symbol,Ge=V.Uint8Array,Ee=Z(Object.getPrototypeOf,Object),et=Object.create,jt=se.propertyIsEnumerable,Vt=H.splice,Lt=Object.getOwnPropertySymbols,It=ct?ct.isBuffer:void 0,Ft=Z(Object.keys,Object),yt=bn(V,"DataView"),zt=bn(V,"Map"),an=bn(V,"Promise"),Et=bn(V,"Set"),Xt=bn(V,"WeakMap"),Zt=bn(Object,"create"),An=fn(yt),Ne=fn(zt),Dt=fn(an),lt=fn(Et),xt=fn(Xt),un=Je?Je.prototype:void 0,ln=un?un.valueOf:void 0;function cn(te){var de=-1,Ie=te?te.length:0;for(this.clear();++de<Ie;){var Fe=te[de];this.set(Fe[0],Fe[1])}}function $t(te){var de=-1,Ie=te?te.length:0;for(this.clear();++de<Ie;){var Fe=te[de];this.set(Fe[0],Fe[1])}}function Mt(te){var de=-1,Ie=te?te.length:0;for(this.clear();++de<Ie;){var Fe=te[de];this.set(Fe[0],Fe[1])}}function ht(te){this.__data__=new $t(te)}function pn(te,de,Ie){var Fe=te[de];Be.call(te,de)&&Hn(Fe,Ie)&&(Ie!==void 0||de in te)||(te[de]=Ie)}function qn(te,de){for(var Ie=te.length;Ie--;)if(Hn(te[Ie][0],de))return Ie;return-1}function Jt(te,de,Ie,Fe,Xe,nt,gt){var ft;if(Fe&&(ft=nt?Fe(te,Xe,nt,gt):Fe(te)),ft!==void 0)return ft;if(!_e(te))return te;var qt=fe(te);if(qt){if(ft=function(We){var ot=We.length,wt=We.constructor(ot);return ot&&typeof We[0]=="string"&&Be.call(We,"index")&&(wt.index=We.index,wt.input=We.input),wt}(te),!de)return function(We,ot){var wt=-1,ze=We.length;for(ot||(ot=Array(ze));++wt<ze;)ot[wt]=We[wt];return ot}(te,ft)}else{var Tt=wn(te),Ot=Tt==y||Tt==v;if(Pe(te))return function(We,ot){if(ot)return We.slice();var wt=new We.constructor(We.length);return We.copy(wt),wt}(te,de);if(Tt==r||Tt==i||Ot&&!nt){if(Ce(te))return nt?te:{};if(ft=function(We){return typeof We.constructor!="function"||rn(We)?{}:_e(ot=Ee(We))?et(ot):{};var ot}(Ot?{}:te),!de)return function(We,ot){return cr(We,zn(We),ot)}(te,function(We,ot){return We&&cr(ot,Ye(ot),We)}(ft,te))}else{if(!U[Tt])return nt?te:{};ft=function(We,ot,wt,ze){var rt,Yt=We.constructor;switch(ot){case k:return Un(We);case u:case o:return new Yt(+We);case A:return function(it,St){var pt=St?Un(it.buffer):it.buffer;return new it.constructor(pt,it.byteOffset,it.byteLength)}(We,ze);case S:case x:case I:case C:case L:case J:case z:case ee:case X:return function(it,St){var pt=St?Un(it.buffer):it.buffer;return new it.constructor(pt,it.byteOffset,it.length)}(We,ze);case h:return function(it,St,pt){return Se(St?pt(Le(it),!0):Le(it),ve,new it.constructor)}(We,ze,wt);case l:case p:return new Yt(We);case s:return function(it){var St=new it.constructor(it.source,q.exec(it));return St.lastIndex=it.lastIndex,St}(We);case d:return function(it,St,pt){return Se(St?pt(ce(it),!0):ce(it),Oe,new it.constructor)}(We,ze,wt);case O:return rt=We,ln?Object(ln.call(rt)):{}}}(te,Tt,Jt,de)}}gt||(gt=new ht);var _n=gt.get(te);if(_n)return _n;if(gt.set(te,ft),!qt)var Qt=Ie?function(We){return function(ot,wt,ze){var rt=wt(ot);return fe(ot)?rt:function(Yt,it){for(var St=-1,pt=it.length,vt=Yt.length;++St<pt;)Yt[vt+St]=it[St];return Yt}(rt,ze(ot))}(We,Ye,zn)}(te):Ye(te);return function(We,ot){for(var wt=-1,ze=We?We.length:0;++wt<ze&&ot(We[wt],wt)!==!1;);}(Qt||te,function(We,ot){Qt&&(We=te[ot=We]),pn(ft,ot,Jt(We,de,Ie,Fe,ot,te,gt))}),ft}function Un(te){var de=new te.constructor(te.byteLength);return new Ge(de).set(new Ge(te)),de}function cr(te,de,Ie,Fe){Ie||(Ie={});for(var Xe=-1,nt=de.length;++Xe<nt;){var gt=de[Xe],ft=Fe?Fe(Ie[gt],te[gt],gt,Ie,te):void 0;pn(Ie,gt,ft===void 0?te[gt]:ft)}return Ie}function nn(te,de){var Ie,Fe,Xe=te.__data__;return((Fe=typeof(Ie=de))=="string"||Fe=="number"||Fe=="symbol"||Fe=="boolean"?Ie!=="__proto__":Ie===null)?Xe[typeof de=="string"?"string":"hash"]:Xe.map}function bn(te,de){var Ie=function(Fe,Xe){return Fe==null?void 0:Fe[Xe]}(te,de);return function(Fe){return!(!_e(Fe)||(Xe=Fe,ge&&ge in Xe))&&(Me(Fe)||Ce(Fe)?st:B).test(fn(Fe));var Xe}(Ie)?Ie:void 0}cn.prototype.clear=function(){this.__data__=Zt?Zt(null):{}},cn.prototype.delete=function(te){return this.has(te)&&delete this.__data__[te]},cn.prototype.get=function(te){var de=this.__data__;if(Zt){var Ie=de[te];return Ie===m?void 0:Ie}return Be.call(de,te)?de[te]:void 0},cn.prototype.has=function(te){var de=this.__data__;return Zt?de[te]!==void 0:Be.call(de,te)},cn.prototype.set=function(te,de){return this.__data__[te]=Zt&&de===void 0?m:de,this},$t.prototype.clear=function(){this.__data__=[]},$t.prototype.delete=function(te){var de=this.__data__,Ie=qn(de,te);return!(Ie<0||(Ie==de.length-1?de.pop():Vt.call(de,Ie,1),0))},$t.prototype.get=function(te){var de=this.__data__,Ie=qn(de,te);return Ie<0?void 0:de[Ie][1]},$t.prototype.has=function(te){return qn(this.__data__,te)>-1},$t.prototype.set=function(te,de){var Ie=this.__data__,Fe=qn(Ie,te);return Fe<0?Ie.push([te,de]):Ie[Fe][1]=de,this},Mt.prototype.clear=function(){this.__data__={hash:new cn,map:new(zt||$t),string:new cn}},Mt.prototype.delete=function(te){return nn(this,te).delete(te)},Mt.prototype.get=function(te){return nn(this,te).get(te)},Mt.prototype.has=function(te){return nn(this,te).has(te)},Mt.prototype.set=function(te,de){return nn(this,te).set(te,de),this},ht.prototype.clear=function(){this.__data__=new $t},ht.prototype.delete=function(te){return this.__data__.delete(te)},ht.prototype.get=function(te){return this.__data__.get(te)},ht.prototype.has=function(te){return this.__data__.has(te)},ht.prototype.set=function(te,de){var Ie=this.__data__;if(Ie instanceof $t){var Fe=Ie.__data__;if(!zt||Fe.length<199)return Fe.push([te,de]),this;Ie=this.__data__=new Mt(Fe)}return Ie.set(te,de),this};var zn=Lt?Z(Lt,Object):function(){return[]},wn=function(te){return Ue.call(te)};function gn(te,de){return!!(de=de==null?w:de)&&(typeof te=="number"||$.test(te))&&te>-1&&te%1==0&&te<de}function rn(te){var de=te&&te.constructor;return te===(typeof de=="function"&&de.prototype||se)}function fn(te){if(te!=null){try{return xe.call(te)}catch{}try{return te+""}catch{}}return""}function Hn(te,de){return te===de||te!=te&&de!=de}(yt&&wn(new yt(new ArrayBuffer(1)))!=A||zt&&wn(new zt)!=h||an&&wn(an.resolve())!=a||Et&&wn(new Et)!=d||Xt&&wn(new Xt)!=N)&&(wn=function(te){var de=Ue.call(te),Ie=de==r?te.constructor:void 0,Fe=Ie?fn(Ie):void 0;if(Fe)switch(Fe){case An:return A;case Ne:return h;case Dt:return a;case lt:return d;case xt:return N}return de});var fe=Array.isArray;function Te(te){return te!=null&&function(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=w}(te.length)&&!Me(te)}var Pe=It||function(){return!1};function Me(te){var de=_e(te)?Ue.call(te):"";return de==y||de==v}function _e(te){var de=typeof te;return!!te&&(de=="object"||de=="function")}function Ye(te){return Te(te)?function(de,Ie){var Fe=fe(de)||function(ft){return function(qt){return function(Tt){return!!Tt&&typeof Tt=="object"}(qt)&&Te(qt)}(ft)&&Be.call(ft,"callee")&&(!jt.call(ft,"callee")||Ue.call(ft)==i)}(de)?function(ft,qt){for(var Tt=-1,Ot=Array(ft);++Tt<ft;)Ot[Tt]=qt(Tt);return Ot}(de.length,String):[],Xe=Fe.length,nt=!!Xe;for(var gt in de)!Ie&&!Be.call(de,gt)||nt&&(gt=="length"||gn(gt,Xe))||Fe.push(gt);return Fe}(te):function(de){if(!rn(de))return Ft(de);var Ie=[];for(var Fe in Object(de))Be.call(de,Fe)&&Fe!="constructor"&&Ie.push(Fe);return Ie}(te)}D.exports=function(te){return Jt(te,!0,!0)}},307:(D,E,b)=>{D=b.nmd(D);var m="__lodash_hash_undefined__",w=9007199254740991,i="[object Arguments]",u="[object Array]",o="[object Boolean]",y="[object Date]",v="[object Error]",h="[object Function]",l="[object Map]",r="[object Number]",a="[object Object]",s="[object Promise]",d="[object RegExp]",p="[object Set]",O="[object String]",N="[object WeakMap]",k="[object ArrayBuffer]",A="[object DataView]",S=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[i]=I[u]=I[k]=I[o]=I[A]=I[y]=I[v]=I[h]=I[l]=I[r]=I[a]=I[d]=I[p]=I[O]=I[N]=!1;var C=typeof b.g=="object"&&b.g&&b.g.Object===Object&&b.g,L=typeof self=="object"&&self&&self.Object===Object&&self,J=C||L||Function("return this")(),z=E&&!E.nodeType&&E,ee=z&&D&&!D.nodeType&&D,X=ee&&ee.exports===z,q=X&&C.process,B=function(){try{return q&&q.binding&&q.binding("util")}catch{}}(),$=B&&B.isTypedArray;function U(fe,Te){for(var Pe=-1,Me=fe==null?0:fe.length;++Pe<Me;)if(Te(fe[Pe],Pe,fe))return!0;return!1}function re(fe){var Te=-1,Pe=Array(fe.size);return fe.forEach(function(Me,_e){Pe[++Te]=[_e,Me]}),Pe}function Q(fe){var Te=-1,Pe=Array(fe.size);return fe.forEach(function(Me){Pe[++Te]=Me}),Pe}var V,G,ie,le=Array.prototype,ve=Function.prototype,Oe=Object.prototype,Se=J["__core-js_shared__"],Ce=ve.toString,Le=Oe.hasOwnProperty,Z=(V=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"",ce=Oe.toString,ue=RegExp("^"+Ce.call(Le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=X?J.Buffer:void 0,oe=J.Symbol,se=J.Uint8Array,we=Oe.propertyIsEnumerable,ge=le.splice,xe=oe?oe.toStringTag:void 0,Be=Object.getOwnPropertySymbols,Ue=H?H.isBuffer:void 0,st=(G=Object.keys,ie=Object,function(fe){return G(ie(fe))}),ct=Mt(J,"DataView"),Je=Mt(J,"Map"),Ge=Mt(J,"Promise"),Ee=Mt(J,"Set"),et=Mt(J,"WeakMap"),jt=Mt(Object,"create"),Vt=Jt(ct),Lt=Jt(Je),It=Jt(Ge),Ft=Jt(Ee),yt=Jt(et),zt=oe?oe.prototype:void 0,an=zt?zt.valueOf:void 0;function Et(fe){var Te=-1,Pe=fe==null?0:fe.length;for(this.clear();++Te<Pe;){var Me=fe[Te];this.set(Me[0],Me[1])}}function Xt(fe){var Te=-1,Pe=fe==null?0:fe.length;for(this.clear();++Te<Pe;){var Me=fe[Te];this.set(Me[0],Me[1])}}function Zt(fe){var Te=-1,Pe=fe==null?0:fe.length;for(this.clear();++Te<Pe;){var Me=fe[Te];this.set(Me[0],Me[1])}}function An(fe){var Te=-1,Pe=fe==null?0:fe.length;for(this.__data__=new Zt;++Te<Pe;)this.add(fe[Te])}function Ne(fe){var Te=this.__data__=new Xt(fe);this.size=Te.size}function Dt(fe,Te){for(var Pe=fe.length;Pe--;)if(Un(fe[Pe][0],Te))return Pe;return-1}function lt(fe){return fe==null?fe===void 0?"[object Undefined]":"[object Null]":xe&&xe in Object(fe)?function(Te){var Pe=Le.call(Te,xe),Me=Te[xe];try{Te[xe]=void 0;var _e=!0}catch{}var Ye=ce.call(Te);return _e&&(Pe?Te[xe]=Me:delete Te[xe]),Ye}(fe):function(Te){return ce.call(Te)}(fe)}function xt(fe){return rn(fe)&&lt(fe)==i}function un(fe,Te,Pe,Me,_e){return fe===Te||(fe==null||Te==null||!rn(fe)&&!rn(Te)?fe!=fe&&Te!=Te:function(Ye,te,de,Ie,Fe,Xe){var nt=nn(Ye),gt=nn(te),ft=nt?u:pn(Ye),qt=gt?u:pn(te),Tt=(ft=ft==i?a:ft)==a,Ot=(qt=qt==i?a:qt)==a,_n=ft==qt;if(_n&&bn(Ye)){if(!bn(te))return!1;nt=!0,Tt=!1}if(_n&&!Tt)return Xe||(Xe=new Ne),nt||fn(Ye)?ln(Ye,te,de,Ie,Fe,Xe):function(ze,rt,Yt,it,St,pt,vt){switch(Yt){case A:if(ze.byteLength!=rt.byteLength||ze.byteOffset!=rt.byteOffset)return!1;ze=ze.buffer,rt=rt.buffer;case k:return!(ze.byteLength!=rt.byteLength||!pt(new se(ze),new se(rt)));case o:case y:case r:return Un(+ze,+rt);case v:return ze.name==rt.name&&ze.message==rt.message;case d:case O:return ze==rt+"";case l:var At=re;case p:var Rt=1&it;if(At||(At=Q),ze.size!=rt.size&&!Rt)return!1;var Kt=vt.get(ze);if(Kt)return Kt==rt;it|=2,vt.set(ze,rt);var Bt=ln(At(ze),At(rt),it,St,pt,vt);return vt.delete(ze),Bt;case"[object Symbol]":if(an)return an.call(ze)==an.call(rt)}return!1}(Ye,te,ft,de,Ie,Fe,Xe);if(!(1&de)){var Qt=Tt&&Le.call(Ye,"__wrapped__"),We=Ot&&Le.call(te,"__wrapped__");if(Qt||We){var ot=Qt?Ye.value():Ye,wt=We?te.value():te;return Xe||(Xe=new Ne),Fe(ot,wt,de,Ie,Xe)}}return!!_n&&(Xe||(Xe=new Ne),function(ze,rt,Yt,it,St,pt){var vt=1&Yt,At=cn(ze),Rt=At.length;if(Rt!=cn(rt).length&&!vt)return!1;for(var Kt=Rt;Kt--;){var Bt=At[Kt];if(!(vt?Bt in rt:Le.call(rt,Bt)))return!1}var Ve=pt.get(ze);if(Ve&&pt.get(rt))return Ve==rt;var Ct=!0;pt.set(ze,rt),pt.set(rt,ze);for(var Gn=vt;++Kt<Rt;){var Jn=ze[Bt=At[Kt]],on=rt[Bt];if(it)var Dn=vt?it(on,Jn,Bt,rt,ze,pt):it(Jn,on,Bt,ze,rt,pt);if(!(Dn===void 0?Jn===on||St(Jn,on,Yt,it,pt):Dn)){Ct=!1;break}Gn||(Gn=Bt=="constructor")}if(Ct&&!Gn){var kn=ze.constructor,$n=rt.constructor;kn==$n||!("constructor"in ze)||!("constructor"in rt)||typeof kn=="function"&&kn instanceof kn&&typeof $n=="function"&&$n instanceof $n||(Ct=!1)}return pt.delete(ze),pt.delete(rt),Ct}(Ye,te,de,Ie,Fe,Xe))}(fe,Te,Pe,Me,un,_e))}function ln(fe,Te,Pe,Me,_e,Ye){var te=1&Pe,de=fe.length,Ie=Te.length;if(de!=Ie&&!(te&&Ie>de))return!1;var Fe=Ye.get(fe);if(Fe&&Ye.get(Te))return Fe==Te;var Xe=-1,nt=!0,gt=2&Pe?new An:void 0;for(Ye.set(fe,Te),Ye.set(Te,fe);++Xe<de;){var ft=fe[Xe],qt=Te[Xe];if(Me)var Tt=te?Me(qt,ft,Xe,Te,fe,Ye):Me(ft,qt,Xe,fe,Te,Ye);if(Tt!==void 0){if(Tt)continue;nt=!1;break}if(gt){if(!U(Te,function(Ot,_n){if(Qt=_n,!gt.has(Qt)&&(ft===Ot||_e(ft,Ot,Pe,Me,Ye)))return gt.push(_n);var Qt})){nt=!1;break}}else if(ft!==qt&&!_e(ft,qt,Pe,Me,Ye)){nt=!1;break}}return Ye.delete(fe),Ye.delete(Te),nt}function cn(fe){return function(Te,Pe,Me){var _e=Pe(Te);return nn(Te)?_e:function(Ye,te){for(var de=-1,Ie=te.length,Fe=Ye.length;++de<Ie;)Ye[Fe+de]=te[de];return Ye}(_e,Me(Te))}(fe,Hn,ht)}function $t(fe,Te){var Pe,Me,_e=fe.__data__;return((Me=typeof(Pe=Te))=="string"||Me=="number"||Me=="symbol"||Me=="boolean"?Pe!=="__proto__":Pe===null)?_e[typeof Te=="string"?"string":"hash"]:_e.map}function Mt(fe,Te){var Pe=function(Me,_e){return Me==null?void 0:Me[_e]}(fe,Te);return function(Me){return!(!gn(Me)||function(_e){return!!Z&&Z in _e}(Me))&&(zn(Me)?ue:S).test(Jt(Me))}(Pe)?Pe:void 0}Et.prototype.clear=function(){this.__data__=jt?jt(null):{},this.size=0},Et.prototype.delete=function(fe){var Te=this.has(fe)&&delete this.__data__[fe];return this.size-=Te?1:0,Te},Et.prototype.get=function(fe){var Te=this.__data__;if(jt){var Pe=Te[fe];return Pe===m?void 0:Pe}return Le.call(Te,fe)?Te[fe]:void 0},Et.prototype.has=function(fe){var Te=this.__data__;return jt?Te[fe]!==void 0:Le.call(Te,fe)},Et.prototype.set=function(fe,Te){var Pe=this.__data__;return this.size+=this.has(fe)?0:1,Pe[fe]=jt&&Te===void 0?m:Te,this},Xt.prototype.clear=function(){this.__data__=[],this.size=0},Xt.prototype.delete=function(fe){var Te=this.__data__,Pe=Dt(Te,fe);return!(Pe<0||(Pe==Te.length-1?Te.pop():ge.call(Te,Pe,1),--this.size,0))},Xt.prototype.get=function(fe){var Te=this.__data__,Pe=Dt(Te,fe);return Pe<0?void 0:Te[Pe][1]},Xt.prototype.has=function(fe){return Dt(this.__data__,fe)>-1},Xt.prototype.set=function(fe,Te){var Pe=this.__data__,Me=Dt(Pe,fe);return Me<0?(++this.size,Pe.push([fe,Te])):Pe[Me][1]=Te,this},Zt.prototype.clear=function(){this.size=0,this.__data__={hash:new Et,map:new(Je||Xt),string:new Et}},Zt.prototype.delete=function(fe){var Te=$t(this,fe).delete(fe);return this.size-=Te?1:0,Te},Zt.prototype.get=function(fe){return $t(this,fe).get(fe)},Zt.prototype.has=function(fe){return $t(this,fe).has(fe)},Zt.prototype.set=function(fe,Te){var Pe=$t(this,fe),Me=Pe.size;return Pe.set(fe,Te),this.size+=Pe.size==Me?0:1,this},An.prototype.add=An.prototype.push=function(fe){return this.__data__.set(fe,m),this},An.prototype.has=function(fe){return this.__data__.has(fe)},Ne.prototype.clear=function(){this.__data__=new Xt,this.size=0},Ne.prototype.delete=function(fe){var Te=this.__data__,Pe=Te.delete(fe);return this.size=Te.size,Pe},Ne.prototype.get=function(fe){return this.__data__.get(fe)},Ne.prototype.has=function(fe){return this.__data__.has(fe)},Ne.prototype.set=function(fe,Te){var Pe=this.__data__;if(Pe instanceof Xt){var Me=Pe.__data__;if(!Je||Me.length<199)return Me.push([fe,Te]),this.size=++Pe.size,this;Pe=this.__data__=new Zt(Me)}return Pe.set(fe,Te),this.size=Pe.size,this};var ht=Be?function(fe){return fe==null?[]:(fe=Object(fe),function(Te,Pe){for(var Me=-1,_e=Te==null?0:Te.length,Ye=0,te=[];++Me<_e;){var de=Te[Me];Ie=de,we.call(fe,Ie)&&(te[Ye++]=de)}var Ie;return te}(Be(fe)))}:function(){return[]},pn=lt;function qn(fe,Te){return!!(Te=Te==null?w:Te)&&(typeof fe=="number"||x.test(fe))&&fe>-1&&fe%1==0&&fe<Te}function Jt(fe){if(fe!=null){try{return Ce.call(fe)}catch{}try{return fe+""}catch{}}return""}function Un(fe,Te){return fe===Te||fe!=fe&&Te!=Te}(ct&&pn(new ct(new ArrayBuffer(1)))!=A||Je&&pn(new Je)!=l||Ge&&pn(Ge.resolve())!=s||Ee&&pn(new Ee)!=p||et&&pn(new et)!=N)&&(pn=function(fe){var Te=lt(fe),Pe=Te==a?fe.constructor:void 0,Me=Pe?Jt(Pe):"";if(Me)switch(Me){case Vt:return A;case Lt:return l;case It:return s;case Ft:return p;case yt:return N}return Te});var cr=xt(function(){return arguments}())?xt:function(fe){return rn(fe)&&Le.call(fe,"callee")&&!we.call(fe,"callee")},nn=Array.isArray,bn=Ue||function(){return!1};function zn(fe){if(!gn(fe))return!1;var Te=lt(fe);return Te==h||Te=="[object GeneratorFunction]"||Te=="[object AsyncFunction]"||Te=="[object Proxy]"}function wn(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=w}function gn(fe){var Te=typeof fe;return fe!=null&&(Te=="object"||Te=="function")}function rn(fe){return fe!=null&&typeof fe=="object"}var fn=$?function(fe){return function(Te){return fe(Te)}}($):function(fe){return rn(fe)&&wn(fe.length)&&!!I[lt(fe)]};function Hn(fe){return(Te=fe)!=null&&wn(Te.length)&&!zn(Te)?function(Pe,Me){var _e=nn(Pe),Ye=!_e&&cr(Pe),te=!_e&&!Ye&&bn(Pe),de=!_e&&!Ye&&!te&&fn(Pe),Ie=_e||Ye||te||de,Fe=Ie?function(gt,ft){for(var qt=-1,Tt=Array(gt);++qt<gt;)Tt[qt]=ft(qt);return Tt}(Pe.length,String):[],Xe=Fe.length;for(var nt in Pe)!Me&&!Le.call(Pe,nt)||Ie&&(nt=="length"||te&&(nt=="offset"||nt=="parent")||de&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||qn(nt,Xe))||Fe.push(nt);return Fe}(fe):function(Pe){if(_e=(Me=Pe)&&Me.constructor,Me!==(typeof _e=="function"&&_e.prototype||Oe))return st(Pe);var Me,_e,Ye=[];for(var te in Object(Pe))Le.call(Pe,te)&&te!="constructor"&&Ye.push(te);return Ye}(fe);var Te}D.exports=function(fe,Te){return un(fe,Te)}},210:function(D,E,b){var m=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(E,"__esModule",{value:!0});var w,i=m(b(465)),u=m(b(307));(function(o){o.compose=function(y,v,h){y===void 0&&(y={}),v===void 0&&(v={}),typeof y!="object"&&(y={}),typeof v!="object"&&(v={});var l=i.default(v);for(var r in h||(l=Object.keys(l).reduce(function(a,s){return l[s]!=null&&(a[s]=l[s]),a},{})),y)y[r]!==void 0&&v[r]===void 0&&(l[r]=y[r]);return Object.keys(l).length>0?l:void 0},o.diff=function(y,v){y===void 0&&(y={}),v===void 0&&(v={}),typeof y!="object"&&(y={}),typeof v!="object"&&(v={});var h=Object.keys(y).concat(Object.keys(v)).reduce(function(l,r){return u.default(y[r],v[r])||(l[r]=v[r]===void 0?null:v[r]),l},{});return Object.keys(h).length>0?h:void 0},o.invert=function(y,v){y===void 0&&(y={}),v===void 0&&(v={}),y=y||{};var h=Object.keys(v).reduce(function(l,r){return v[r]!==y[r]&&y[r]!==void 0&&(l[r]=v[r]),l},{});return Object.keys(y).reduce(function(l,r){return y[r]!==v[r]&&v[r]===void 0&&(l[r]=null),l},h)},o.transform=function(y,v,h){if(h===void 0&&(h=!1),typeof y!="object")return v;if(typeof v=="object"){if(!h)return v;var l=Object.keys(v).reduce(function(r,a){return y[a]===void 0&&(r[a]=v[a]),r},{});return Object.keys(l).length>0?l:void 0}}})(w||(w={})),E.default=w},895:function(D,E,b){var m=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},w=m(b(103)),i=m(b(465)),u=m(b(307)),o=m(b(210)),y=m(b(430)),v=String.fromCharCode(0),h=function(){function l(r){Array.isArray(r)?this.ops=r:r!=null&&Array.isArray(r.ops)?this.ops=r.ops:this.ops=[]}return l.prototype.insert=function(r,a){var s={};return typeof r=="string"&&r.length===0?this:(s.insert=r,a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(s.attributes=a),this.push(s))},l.prototype.delete=function(r){return r<=0?this:this.push({delete:r})},l.prototype.retain=function(r,a){if(r<=0)return this;var s={retain:r};return a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(s.attributes=a),this.push(s)},l.prototype.push=function(r){var a=this.ops.length,s=this.ops[a-1];if(r=i.default(r),typeof s=="object"){if(typeof r.delete=="number"&&typeof s.delete=="number")return this.ops[a-1]={delete:s.delete+r.delete},this;if(typeof s.delete=="number"&&r.insert!=null&&(a-=1,typeof(s=this.ops[a-1])!="object"))return this.ops.unshift(r),this;if(u.default(r.attributes,s.attributes)){if(typeof r.insert=="string"&&typeof s.insert=="string")return this.ops[a-1]={insert:s.insert+r.insert},typeof r.attributes=="object"&&(this.ops[a-1].attributes=r.attributes),this;if(typeof r.retain=="number"&&typeof s.retain=="number")return this.ops[a-1]={retain:s.retain+r.retain},typeof r.attributes=="object"&&(this.ops[a-1].attributes=r.attributes),this}}return a===this.ops.length?this.ops.push(r):this.ops.splice(a,0,r),this},l.prototype.chop=function(){var r=this.ops[this.ops.length-1];return r&&r.retain&&!r.attributes&&this.ops.pop(),this},l.prototype.filter=function(r){return this.ops.filter(r)},l.prototype.forEach=function(r){this.ops.forEach(r)},l.prototype.map=function(r){return this.ops.map(r)},l.prototype.partition=function(r){var a=[],s=[];return this.forEach(function(d){(r(d)?a:s).push(d)}),[a,s]},l.prototype.reduce=function(r,a){return this.ops.reduce(r,a)},l.prototype.changeLength=function(){return this.reduce(function(r,a){return a.insert?r+y.default.length(a):a.delete?r-a.delete:r},0)},l.prototype.length=function(){return this.reduce(function(r,a){return r+y.default.length(a)},0)},l.prototype.slice=function(r,a){r===void 0&&(r=0),a===void 0&&(a=1/0);for(var s=[],d=y.default.iterator(this.ops),p=0;p<a&&d.hasNext();){var O=void 0;p<r?O=d.next(r-p):(O=d.next(a-p),s.push(O)),p+=y.default.length(O)}return new l(s)},l.prototype.compose=function(r){var a=y.default.iterator(this.ops),s=y.default.iterator(r.ops),d=[],p=s.peek();if(p!=null&&typeof p.retain=="number"&&p.attributes==null){for(var O=p.retain;a.peekType()==="insert"&&a.peekLength()<=O;)O-=a.peekLength(),d.push(a.next());p.retain-O>0&&s.next(p.retain-O)}for(var N=new l(d);a.hasNext()||s.hasNext();)if(s.peekType()==="insert")N.push(s.next());else if(a.peekType()==="delete")N.push(a.next());else{var k=Math.min(a.peekLength(),s.peekLength()),A=a.next(k),S=s.next(k);if(typeof S.retain=="number"){var x={};typeof A.retain=="number"?x.retain=k:x.insert=A.insert;var I=o.default.compose(A.attributes,S.attributes,typeof A.retain=="number");if(I&&(x.attributes=I),N.push(x),!s.hasNext()&&u.default(N.ops[N.ops.length-1],x)){var C=new l(a.rest());return N.concat(C).chop()}}else typeof S.delete=="number"&&typeof A.retain=="number"&&N.push(S)}return N.chop()},l.prototype.concat=function(r){var a=new l(this.ops.slice());return r.ops.length>0&&(a.push(r.ops[0]),a.ops=a.ops.concat(r.ops.slice(1))),a},l.prototype.diff=function(r,a){if(this.ops===r.ops)return new l;var s=[this,r].map(function(k){return k.map(function(A){if(A.insert!=null)return typeof A.insert=="string"?A.insert:v;throw new Error("diff() called "+(k===r?"on":"with")+" non-document")}).join("")}),d=new l,p=w.default(s[0],s[1],a),O=y.default.iterator(this.ops),N=y.default.iterator(r.ops);return p.forEach(function(k){for(var A=k[1].length;A>0;){var S=0;switch(k[0]){case w.default.INSERT:S=Math.min(N.peekLength(),A),d.push(N.next(S));break;case w.default.DELETE:S=Math.min(A,O.peekLength()),O.next(S),d.delete(S);break;case w.default.EQUAL:S=Math.min(O.peekLength(),N.peekLength(),A);var x=O.next(S),I=N.next(S);u.default(x.insert,I.insert)?d.retain(S,o.default.diff(x.attributes,I.attributes)):d.push(I).delete(S)}A-=S}}),d.chop()},l.prototype.eachLine=function(r,a){a===void 0&&(a=`
`);for(var s=y.default.iterator(this.ops),d=new l,p=0;s.hasNext();){if(s.peekType()!=="insert")return;var O=s.peek(),N=y.default.length(O)-s.peekLength(),k=typeof O.insert=="string"?O.insert.indexOf(a,N)-N:-1;if(k<0)d.push(s.next());else if(k>0)d.push(s.next(k));else{if(r(d,s.next(1).attributes||{},p)===!1)return;p+=1,d=new l}}d.length()>0&&r(d,{},p)},l.prototype.invert=function(r){var a=new l;return this.reduce(function(s,d){if(d.insert)a.delete(y.default.length(d));else{if(d.retain&&d.attributes==null)return a.retain(d.retain),s+d.retain;if(d.delete||d.retain&&d.attributes){var p=d.delete||d.retain;return r.slice(s,s+p).forEach(function(O){d.delete?a.push(O):d.retain&&d.attributes&&a.retain(y.default.length(O),o.default.invert(d.attributes,O.attributes))}),s+p}}return s},0),a.chop()},l.prototype.transform=function(r,a){if(a===void 0&&(a=!1),a=!!a,typeof r=="number")return this.transformPosition(r,a);for(var s=r,d=y.default.iterator(this.ops),p=y.default.iterator(s.ops),O=new l;d.hasNext()||p.hasNext();)if(d.peekType()!=="insert"||!a&&p.peekType()==="insert")if(p.peekType()==="insert")O.push(p.next());else{var N=Math.min(d.peekLength(),p.peekLength()),k=d.next(N),A=p.next(N);if(k.delete)continue;A.delete?O.push(A):O.retain(N,o.default.transform(k.attributes,A.attributes,a))}else O.retain(y.default.length(d.next()));return O.chop()},l.prototype.transformPosition=function(r,a){a===void 0&&(a=!1),a=!!a;for(var s=y.default.iterator(this.ops),d=0;s.hasNext()&&d<=r;){var p=s.peekLength(),O=s.peekType();s.next(),O!=="delete"?(O==="insert"&&(d<r||!a)&&(r+=p),d+=p):r-=Math.min(p,r-d)}return r},l.Op=y.default,l.AttributeMap=o.default,l}();D.exports=h},977:function(D,E,b){var m=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(E,"__esModule",{value:!0});var w=m(b(430)),i=function(){function u(o){this.ops=o,this.index=0,this.offset=0}return u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(o){o||(o=1/0);var y=this.ops[this.index];if(y){var v=this.offset,h=w.default.length(y);if(o>=h-v?(o=h-v,this.index+=1,this.offset=0):this.offset+=o,typeof y.delete=="number")return{delete:o};var l={};return y.attributes&&(l.attributes=y.attributes),typeof y.retain=="number"?l.retain=o:typeof y.insert=="string"?l.insert=y.insert.substr(v,o):l.insert=y.insert,l}return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?w.default.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var o=this.offset,y=this.index,v=this.next(),h=this.ops.slice(this.index);return this.offset=o,this.index=y,[v].concat(h)}return[]},u}();E.default=i},430:function(D,E,b){var m=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(E,"__esModule",{value:!0});var w,i=m(b(977));(function(u){u.iterator=function(o){return new i.default(o)},u.length=function(o){return typeof o.delete=="number"?o.delete:typeof o.retain=="number"?o.retain:typeof o.insert=="string"?o.insert.length:1}})(w||(w={})),E.default=w},103:D=>{var E=-1;function b(a,s,d,p){if(a===s)return a?[[0,a]]:[];if(d!=null){var O=function(x,I,C){var L=typeof C=="number"?{index:C,length:0}:C.oldRange,J=typeof C=="number"?null:C.newRange,z=x.length,ee=I.length;if(L.length===0&&(J===null||J.length===0)){var X=L.index,q=x.slice(0,X),B=x.slice(X),$=J?J.index:null,U=X+ee-z;if(($===null||$===U)&&!(U<0||U>ee)){var re=I.slice(0,U);if((G=I.slice(U))===B){var Q=Math.min(X,U);if((le=q.slice(0,Q))===(Oe=re.slice(0,Q)))return l(le,q.slice(Q),re.slice(Q),B)}}if($===null||$===X){var V=X,G=(re=I.slice(0,V),I.slice(V));if(re===q){var ie=Math.min(z-V,ee-V);if((ve=B.slice(B.length-ie))===(Se=G.slice(G.length-ie)))return l(q,B.slice(0,B.length-ie),G.slice(0,G.length-ie),ve)}}}if(L.length>0&&J&&J.length===0){var le=x.slice(0,L.index),ve=x.slice(L.index+L.length);if(!(ee<(Q=le.length)+(ie=ve.length))){var Oe=I.slice(0,Q),Se=I.slice(ee-ie);if(le===Oe&&ve===Se)return l(le,x.slice(Q,z-ie),I.slice(Q,ee-ie),ve)}}return null}(a,s,d);if(O)return O}var N=w(a,s),k=a.substring(0,N);N=i(a=a.substring(N),s=s.substring(N));var A=a.substring(a.length-N),S=function(x,I){var C;if(!x)return[[1,I]];if(!I)return[[E,x]];var L=x.length>I.length?x:I,J=x.length>I.length?I:x,z=L.indexOf(J);if(z!==-1)return C=[[1,L.substring(0,z)],[0,J],[1,L.substring(z+J.length)]],x.length>I.length&&(C[0][0]=C[2][0]=E),C;if(J.length===1)return[[E,x],[1,I]];var ee=function(V,G){var ie=V.length>G.length?V:G,le=V.length>G.length?G:V;if(ie.length<4||2*le.length<ie.length)return null;function ve(H,oe,se){for(var we,ge,xe,Be,Ue=H.substring(se,se+Math.floor(H.length/4)),st=-1,ct="";(st=oe.indexOf(Ue,st+1))!==-1;){var Je=w(H.substring(se),oe.substring(st)),Ge=i(H.substring(0,se),oe.substring(0,st));ct.length<Ge+Je&&(ct=oe.substring(st-Ge,st)+oe.substring(st,st+Je),we=H.substring(0,se-Ge),ge=H.substring(se+Je),xe=oe.substring(0,st-Ge),Be=oe.substring(st+Je))}return 2*ct.length>=H.length?[we,ge,xe,Be,ct]:null}var Oe,Se,Ce,Le,Z,ce=ve(ie,le,Math.ceil(ie.length/4)),ue=ve(ie,le,Math.ceil(ie.length/2));return ce||ue?(Oe=ue?ce&&ce[4].length>ue[4].length?ce:ue:ce,V.length>G.length?(Se=Oe[0],Ce=Oe[1],Le=Oe[2],Z=Oe[3]):(Le=Oe[0],Z=Oe[1],Se=Oe[2],Ce=Oe[3]),[Se,Ce,Le,Z,Oe[4]]):null}(x,I);if(ee){var X=ee[0],q=ee[1],B=ee[2],$=ee[3],U=ee[4],re=b(X,B),Q=b(q,$);return re.concat([[0,U]],Q)}return function(V,G){for(var ie=V.length,le=G.length,ve=Math.ceil((ie+le)/2),Oe=ve,Se=2*ve,Ce=new Array(Se),Le=new Array(Se),Z=0;Z<Se;Z++)Ce[Z]=-1,Le[Z]=-1;Ce[Oe+1]=0,Le[Oe+1]=0;for(var ce=ie-le,ue=ce%2!=0,H=0,oe=0,se=0,we=0,ge=0;ge<ve;ge++){for(var xe=-ge+H;xe<=ge-oe;xe+=2){for(var Be=Oe+xe,Ue=(Ee=xe===-ge||xe!==ge&&Ce[Be-1]<Ce[Be+1]?Ce[Be+1]:Ce[Be-1]+1)-xe;Ee<ie&&Ue<le&&V.charAt(Ee)===G.charAt(Ue);)Ee++,Ue++;if(Ce[Be]=Ee,Ee>ie)oe+=2;else if(Ue>le)H+=2;else if(ue&&(Je=Oe+ce-xe)>=0&&Je<Se&&Le[Je]!==-1&&Ee>=(ct=ie-Le[Je]))return m(V,G,Ee,Ue)}for(var st=-ge+se;st<=ge-we;st+=2){for(var ct,Je=Oe+st,Ge=(ct=st===-ge||st!==ge&&Le[Je-1]<Le[Je+1]?Le[Je+1]:Le[Je-1]+1)-st;ct<ie&&Ge<le&&V.charAt(ie-ct-1)===G.charAt(le-Ge-1);)ct++,Ge++;if(Le[Je]=ct,ct>ie)we+=2;else if(Ge>le)se+=2;else if(!ue){var Ee;if((Be=Oe+ce-st)>=0&&Be<Se&&Ce[Be]!==-1&&(Ue=Oe+(Ee=Ce[Be])-Be,Ee>=(ct=ie-ct)))return m(V,G,Ee,Ue)}}}return[[E,V],[1,G]]}(x,I)}(a=a.substring(0,a.length-N),s=s.substring(0,s.length-N));return k&&S.unshift([0,k]),A&&S.push([0,A]),u(S,p),S}function m(a,s,d,p){var O=a.substring(0,d),N=s.substring(0,p),k=a.substring(d),A=s.substring(p),S=b(O,N),x=b(k,A);return S.concat(x)}function w(a,s){if(!a||!s||a.charAt(0)!==s.charAt(0))return 0;for(var d=0,p=Math.min(a.length,s.length),O=p,N=0;d<O;)a.substring(N,O)==s.substring(N,O)?N=d=O:p=O,O=Math.floor((p-d)/2+d);return o(a.charCodeAt(O-1))&&O--,O}function i(a,s){if(!a||!s||a.slice(-1)!==s.slice(-1))return 0;for(var d=0,p=Math.min(a.length,s.length),O=p,N=0;d<O;)a.substring(a.length-O,a.length-N)==s.substring(s.length-O,s.length-N)?N=d=O:p=O,O=Math.floor((p-d)/2+d);return y(a.charCodeAt(a.length-O))&&O--,O}function u(a,s){a.push([0,""]);for(var d,p=0,O=0,N=0,k="",A="";p<a.length;)if(p<a.length-1&&!a[p][1])a.splice(p,1);else switch(a[p][0]){case 1:N++,A+=a[p][1],p++;break;case E:O++,k+=a[p][1],p++;break;case 0:var S=p-N-O-1;if(s){if(S>=0&&h(a[S][1])){var x=a[S][1].slice(-1);if(a[S][1]=a[S][1].slice(0,-1),k=x+k,A=x+A,!a[S][1]){a.splice(S,1),p--;var I=S-1;a[I]&&a[I][0]===1&&(N++,A=a[I][1]+A,I--),a[I]&&a[I][0]===E&&(O++,k=a[I][1]+k,I--),S=I}}v(a[p][1])&&(x=a[p][1].charAt(0),a[p][1]=a[p][1].slice(1),k+=x,A+=x)}if(p<a.length-1&&!a[p][1]){a.splice(p,1);break}if(k.length>0||A.length>0){k.length>0&&A.length>0&&((d=w(A,k))!==0&&(S>=0?a[S][1]+=A.substring(0,d):(a.splice(0,0,[0,A.substring(0,d)]),p++),A=A.substring(d),k=k.substring(d)),(d=i(A,k))!==0&&(a[p][1]=A.substring(A.length-d)+a[p][1],A=A.substring(0,A.length-d),k=k.substring(0,k.length-d)));var C=N+O;k.length===0&&A.length===0?(a.splice(p-C,C),p-=C):k.length===0?(a.splice(p-C,C,[1,A]),p=p-C+1):A.length===0?(a.splice(p-C,C,[E,k]),p=p-C+1):(a.splice(p-C,C,[E,k],[1,A]),p=p-C+2)}p!==0&&a[p-1][0]===0?(a[p-1][1]+=a[p][1],a.splice(p,1)):p++,N=0,O=0,k="",A=""}a[a.length-1][1]===""&&a.pop();var L=!1;for(p=1;p<a.length-1;)a[p-1][0]===0&&a[p+1][0]===0&&(a[p][1].substring(a[p][1].length-a[p-1][1].length)===a[p-1][1]?(a[p][1]=a[p-1][1]+a[p][1].substring(0,a[p][1].length-a[p-1][1].length),a[p+1][1]=a[p-1][1]+a[p+1][1],a.splice(p-1,1),L=!0):a[p][1].substring(0,a[p+1][1].length)==a[p+1][1]&&(a[p-1][1]+=a[p+1][1],a[p][1]=a[p][1].substring(a[p+1][1].length)+a[p+1][1],a.splice(p+1,1),L=!0)),p++;L&&u(a,s)}function o(a){return a>=55296&&a<=56319}function y(a){return a>=56320&&a<=57343}function v(a){return y(a.charCodeAt(0))}function h(a){return o(a.charCodeAt(a.length-1))}function l(a,s,d,p){return h(a)||v(p)?null:function(O){for(var N=[],k=0;k<O.length;k++)O[k][1].length>0&&N.push(O[k]);return N}([[0,a],[E,s],[1,d],[0,p]])}function r(a,s,d){return b(a,s,d,!0)}r.INSERT=1,r.DELETE=E,r.EQUAL=0,D.exports=r},165:function(D,E,b){var m,w;(w=typeof(m=function(){var i,u={};function o(h,l,r){var a=h.getClientRects();if(a.length===2){var s=h.getBoundingClientRect();return a[l][r]<s[r]}return!1}function y(h){if(!h||screen.deviceXDPI===screen.logicalXDPI)return h;if("length"in h)return Array.prototype.map.call(h,y);var l=screen.deviceXDPI/screen.logicalXDPI;return{top:h.top/l,bottom:h.bottom/l,left:h.left/l,right:h.right/l,width:h.width/l,height:h.height/l}}function v(h,l){var r,a=0,s=1024;if(s>=l.length)return Array.prototype.push.apply(h,l);for(;a<l.length;)r=Array.prototype.push.apply(h,Array.prototype.slice.call(l,a,a+s)),a+=s;return r}return u.isBroken=function(){if(i===void 0){var h=document.createElement("p"),l=document.createElement("span"),r=document.createTextNode("aa"),a=document.createTextNode("aa"),s=document.createElement("img");s.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var d=document.createRange();if(i={},h.appendChild(r),h.appendChild(l),l.appendChild(s),l.appendChild(a),document.body.appendChild(h),d.setStart(r,1),d.setEnd(l,0),i.getClientRects=i.getBoundingClientRect=d.getClientRects().length>1,i.getClientRects||(d.setEnd(a,1),i.getClientRects=i.getBoundingClientRect=d.getClientRects().length===2),!i.getBoundingClientRect){d.setEnd(d.startContainer,d.startOffset);var p=d.getBoundingClientRect();i.getBoundingClientRect=p.top===0&&p.left===0}if(document.body.removeChild(h),!i.getBoundingClientRect){var O=document.createElement("p");O.style.width="0px",O.style.fontSize="20px",O.style.whiteSpace="normal",O.style.wordBreak="normal";var N=document.createTextNode("m mm");O.appendChild(N),document.body.appendChild(O),d.setStart(N,1),d.setEnd(N,2),o(d,1,"left")?i.getBoundingClientRect=!0:(d.setStart(N,1),d.setEnd(N,3),o(d,0,"top")&&(i.getBoundingClientRect=!0)),document.body.removeChild(O)}var k=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();i.ieZoom=!!k&&k<=10}return i},u.getClientRects=function(h){var l=this.isBroken();if(l.ieZoom)return y(h.getClientRects());if(!l.getClientRects)return h.getClientRects();var r=[],a=[],s=h.endContainer,d=h.endOffset,p=document.createRange();function O(N){for(var k=0;N=N.previousSibling;)k++;return k}for(;s!==h.commonAncestorContainer;)p.setStart(s,0),p.setEnd(s,d),v(a,p.getClientRects()),d=O(s),s=s.parentNode;return(p=h.cloneRange()).setEnd(s,d),v(r,p.getClientRects()),v(r,a),r},u.getBoundingClientRect=function(h){var l=this.getClientRects(h);if(l.length===0)return null;var r,a=h.getBoundingClientRect(),s=this.isBroken();if(s.ieZoom)return y(a);if(!s.getBoundingClientRect)return a;if(a.width===0&&a.height===0)return l[0];for(var d=0,p=l.length;d<p;d++){var O=l[d];r?(r.left=Math.min(r.left,O.left),r.top=Math.min(r.top,O.top),r.right=Math.max(r.right,O.right),r.bottom=Math.max(r.bottom,O.bottom)):r={left:O.left,top:O.top,right:O.right,bottom:O.bottom}}return r&&(r.width=r.right-r.left,r.height=r.bottom-r.top),r},u})=="function"?m.call(E,b,E,D):m)===void 0||(D.exports=w)},33:(D,E,b)=>{b.r(E),b.d(E,{default:()=>I});var m=function(){if(typeof Map<"u")return Map;function C(L,J){var z=-1;return L.some(function(ee,X){return ee[0]===J&&(z=X,!0)}),z}return function(){function L(){this.__entries__=[]}return Object.defineProperty(L.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),L.prototype.get=function(J){var z=C(this.__entries__,J),ee=this.__entries__[z];return ee&&ee[1]},L.prototype.set=function(J,z){var ee=C(this.__entries__,J);~ee?this.__entries__[ee][1]=z:this.__entries__.push([J,z])},L.prototype.delete=function(J){var z=this.__entries__,ee=C(z,J);~ee&&z.splice(ee,1)},L.prototype.has=function(J){return!!~C(this.__entries__,J)},L.prototype.clear=function(){this.__entries__.splice(0)},L.prototype.forEach=function(J,z){z===void 0&&(z=null);for(var ee=0,X=this.__entries__;ee<X.length;ee++){var q=X[ee];J.call(z,q[1],q[0])}},L}()}(),w=typeof window<"u"&&typeof document<"u"&&window.document===document,i=b.g!==void 0&&b.g.Math===Math?b.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),u=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(i):function(C){return setTimeout(function(){return C(Date.now())},1e3/60)},o=["top","right","bottom","left","width","height","size","weight"],y=typeof MutationObserver<"u",v=function(){function C(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(L,J){var z=!1,ee=!1,X=0;function q(){z&&(z=!1,L()),ee&&$()}function B(){u(q)}function $(){var U=Date.now();if(z){if(U-X<2)return;ee=!0}else z=!0,ee=!1,setTimeout(B,20);X=U}return $}(this.refresh.bind(this))}return C.prototype.addObserver=function(L){~this.observers_.indexOf(L)||this.observers_.push(L),this.connected_||this.connect_()},C.prototype.removeObserver=function(L){var J=this.observers_,z=J.indexOf(L);~z&&J.splice(z,1),!J.length&&this.connected_&&this.disconnect_()},C.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},C.prototype.updateObservers_=function(){var L=this.observers_.filter(function(J){return J.gatherActive(),J.hasActive()});return L.forEach(function(J){return J.broadcastActive()}),L.length>0},C.prototype.connect_=function(){w&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),y?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},C.prototype.disconnect_=function(){w&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},C.prototype.onTransitionEnd_=function(L){var J=L.propertyName,z=J===void 0?"":J;o.some(function(ee){return!!~z.indexOf(ee)})&&this.refresh()},C.getInstance=function(){return this.instance_||(this.instance_=new C),this.instance_},C.instance_=null,C}(),h=function(C,L){for(var J=0,z=Object.keys(L);J<z.length;J++){var ee=z[J];Object.defineProperty(C,ee,{value:L[ee],enumerable:!1,writable:!1,configurable:!0})}return C},l=function(C){return C&&C.ownerDocument&&C.ownerDocument.defaultView||i},r=O(0,0,0,0);function a(C){return parseFloat(C)||0}function s(C){for(var L=[],J=1;J<arguments.length;J++)L[J-1]=arguments[J];return L.reduce(function(z,ee){return z+a(C["border-"+ee+"-width"])},0)}var d=typeof SVGGraphicsElement<"u"?function(C){return C instanceof l(C).SVGGraphicsElement}:function(C){return C instanceof l(C).SVGElement&&typeof C.getBBox=="function"};function p(C){return w?d(C)?function(L){var J=L.getBBox();return O(0,0,J.width,J.height)}(C):function(L){var J=L.clientWidth,z=L.clientHeight;if(!J&&!z)return r;var ee=l(L).getComputedStyle(L),X=function(V){for(var G={},ie=0,le=["top","right","bottom","left"];ie<le.length;ie++){var ve=le[ie],Oe=V["padding-"+ve];G[ve]=a(Oe)}return G}(ee),q=X.left+X.right,B=X.top+X.bottom,$=a(ee.width),U=a(ee.height);if(ee.boxSizing==="border-box"&&(Math.round($+q)!==J&&($-=s(ee,"left","right")+q),Math.round(U+B)!==z&&(U-=s(ee,"top","bottom")+B)),!function(V){return V===l(V).document.documentElement}(L)){var re=Math.round($+q)-J,Q=Math.round(U+B)-z;Math.abs(re)!==1&&($-=re),Math.abs(Q)!==1&&(U-=Q)}return O(X.left,X.top,$,U)}(C):r}function O(C,L,J,z){return{x:C,y:L,width:J,height:z}}var N=function(){function C(L){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O(0,0,0,0),this.target=L}return C.prototype.isActive=function(){var L=p(this.target);return this.contentRect_=L,L.width!==this.broadcastWidth||L.height!==this.broadcastHeight},C.prototype.broadcastRect=function(){var L=this.contentRect_;return this.broadcastWidth=L.width,this.broadcastHeight=L.height,L},C}(),k=function(C,L){var J,z,ee,X,q,B,$,U=(z=(J=L).x,ee=J.y,X=J.width,q=J.height,B=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,$=Object.create(B.prototype),h($,{x:z,y:ee,width:X,height:q,top:ee,right:z+X,bottom:q+ee,left:z}),$);h(this,{target:C,contentRect:U})},A=function(){function C(L,J,z){if(this.activeObservations_=[],this.observations_=new m,typeof L!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=L,this.controller_=J,this.callbackCtx_=z}return C.prototype.observe=function(L){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(L instanceof l(L).Element))throw new TypeError('parameter 1 is not of type "Element".');var J=this.observations_;J.has(L)||(J.set(L,new N(L)),this.controller_.addObserver(this),this.controller_.refresh())}},C.prototype.unobserve=function(L){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(L instanceof l(L).Element))throw new TypeError('parameter 1 is not of type "Element".');var J=this.observations_;J.has(L)&&(J.delete(L),J.size||this.controller_.removeObserver(this))}},C.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},C.prototype.gatherActive=function(){var L=this;this.clearActive(),this.observations_.forEach(function(J){J.isActive()&&L.activeObservations_.push(J)})},C.prototype.broadcastActive=function(){if(this.hasActive()){var L=this.callbackCtx_,J=this.activeObservations_.map(function(z){return new k(z.target,z.broadcastRect())});this.callback_.call(L,J,L),this.clearActive()}},C.prototype.clearActive=function(){this.activeObservations_.splice(0)},C.prototype.hasActive=function(){return this.activeObservations_.length>0},C}(),S=typeof WeakMap<"u"?new WeakMap:new m,x=function C(L){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var J=v.getInstance(),z=new A(L,J,this);S.set(this,z)};["observe","unobserve","disconnect"].forEach(function(C){x.prototype[C]=function(){var L;return(L=S.get(this))[C].apply(L,arguments)}});const I=i.ResizeObserver!==void 0?i.ResizeObserver:x},413:(D,E,b)=>{b.r(E),b.d(E,{default:()=>O});var m=b(379),w=b.n(m),i=b(795),u=b.n(i),o=b(569),y=b.n(o),v=b(565),h=b.n(v),l=b(216),r=b.n(l),a=b(589),s=b.n(a),d=b(582),p={};p.styleTagTransform=s(),p.setAttributes=h(),p.insert=y().bind(null,"head"),p.domAPI=u(),p.insertStyleElement=r(),w()(d.Z,p);const O=d.Z&&d.Z.locals?d.Z.locals:void 0},379:D=>{var E=[];function b(i){for(var u=-1,o=0;o<E.length;o++)if(E[o].identifier===i){u=o;break}return u}function m(i,u){for(var o={},y=[],v=0;v<i.length;v++){var h=i[v],l=u.base?h[0]+u.base:h[0],r=o[l]||0,a="".concat(l," ").concat(r);o[l]=r+1;var s=b(a),d={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(s!==-1)E[s].references++,E[s].updater(d);else{var p=w(d,u);u.byIndex=v,E.splice(v,0,{identifier:a,updater:p,references:1})}y.push(a)}return y}function w(i,u){var o=u.domAPI(u);return o.update(i),function(y){if(y){if(y.css===i.css&&y.media===i.media&&y.sourceMap===i.sourceMap&&y.supports===i.supports&&y.layer===i.layer)return;o.update(i=y)}else o.remove()}}D.exports=function(i,u){var o=m(i=i||[],u=u||{});return function(y){y=y||[];for(var v=0;v<o.length;v++){var h=b(o[v]);E[h].references--}for(var l=m(y,u),r=0;r<o.length;r++){var a=b(o[r]);E[a].references===0&&(E[a].updater(),E.splice(a,1))}o=l}}},569:D=>{var E={};D.exports=function(b,m){var w=function(i){if(E[i]===void 0){var u=document.querySelector(i);if(window.HTMLIFrameElement&&u instanceof window.HTMLIFrameElement)try{u=u.contentDocument.head}catch{u=null}E[i]=u}return E[i]}(b);if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(m)}},216:D=>{D.exports=function(E){var b=document.createElement("style");return E.setAttributes(b,E.attributes),E.insert(b,E.options),b}},565:(D,E,b)=>{D.exports=function(m){var w=b.nc;w&&m.setAttribute("nonce",w)}},795:D=>{D.exports=function(E){var b=E.insertStyleElement(E);return{update:function(m){(function(w,i,u){var o="";u.supports&&(o+="@supports (".concat(u.supports,") {")),u.media&&(o+="@media ".concat(u.media," {"));var y=u.layer!==void 0;y&&(o+="@layer".concat(u.layer.length>0?" ".concat(u.layer):""," {")),o+=u.css,y&&(o+="}"),u.media&&(o+="}"),u.supports&&(o+="}");var v=u.sourceMap;v&&typeof btoa<"u"&&(o+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(v))))," */")),i.styleTagTransform(o,w,i.options)})(b,E,m)},remove:function(){(function(m){if(m.parentNode===null)return!1;m.parentNode.removeChild(m)})(b)}}}},589:D=>{D.exports=function(E,b){if(b.styleSheet)b.styleSheet.cssText=E;else{for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(document.createTextNode(E))}}},621:(D,E,b)=>{var m;(function(w){var i=/^\s+/,u=/\s+$/,o=0,y=w.round,v=w.min,h=w.max,l=w.random;function r(Z,ce){if(ce=ce||{},(Z=Z||"")instanceof r)return Z;if(!(this instanceof r))return new r(Z,ce);var ue=function(H){var oe,se,we,ge={r:0,g:0,b:0},xe=1,Be=null,Ue=null,st=null,ct=!1,Je=!1;return typeof H=="string"&&(H=function(Ge){Ge=Ge.replace(i,"").replace(u,"").toLowerCase();var Ee,et=!1;if(q[Ge])Ge=q[Ge],et=!0;else if(Ge=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Ee=Ce.rgb.exec(Ge))?{r:Ee[1],g:Ee[2],b:Ee[3]}:(Ee=Ce.rgba.exec(Ge))?{r:Ee[1],g:Ee[2],b:Ee[3],a:Ee[4]}:(Ee=Ce.hsl.exec(Ge))?{h:Ee[1],s:Ee[2],l:Ee[3]}:(Ee=Ce.hsla.exec(Ge))?{h:Ee[1],s:Ee[2],l:Ee[3],a:Ee[4]}:(Ee=Ce.hsv.exec(Ge))?{h:Ee[1],s:Ee[2],v:Ee[3]}:(Ee=Ce.hsva.exec(Ge))?{h:Ee[1],s:Ee[2],v:Ee[3],a:Ee[4]}:(Ee=Ce.hex8.exec(Ge))?{r:Q(Ee[1]),g:Q(Ee[2]),b:Q(Ee[3]),a:le(Ee[4]),format:et?"name":"hex8"}:(Ee=Ce.hex6.exec(Ge))?{r:Q(Ee[1]),g:Q(Ee[2]),b:Q(Ee[3]),format:et?"name":"hex"}:(Ee=Ce.hex4.exec(Ge))?{r:Q(Ee[1]+""+Ee[1]),g:Q(Ee[2]+""+Ee[2]),b:Q(Ee[3]+""+Ee[3]),a:le(Ee[4]+""+Ee[4]),format:et?"name":"hex8"}:!!(Ee=Ce.hex3.exec(Ge))&&{r:Q(Ee[1]+""+Ee[1]),g:Q(Ee[2]+""+Ee[2]),b:Q(Ee[3]+""+Ee[3]),format:et?"name":"hex"}}(H)),typeof H=="object"&&(Le(H.r)&&Le(H.g)&&Le(H.b)?(oe=H.r,se=H.g,we=H.b,ge={r:255*U(oe,255),g:255*U(se,255),b:255*U(we,255)},ct=!0,Je=String(H.r).substr(-1)==="%"?"prgb":"rgb"):Le(H.h)&&Le(H.s)&&Le(H.v)?(Be=G(H.s),Ue=G(H.v),ge=function(Ge,Ee,et){Ge=6*U(Ge,360),Ee=U(Ee,100),et=U(et,100);var jt=w.floor(Ge),Vt=Ge-jt,Lt=et*(1-Ee),It=et*(1-Vt*Ee),Ft=et*(1-(1-Vt)*Ee),yt=jt%6;return{r:255*[et,It,Lt,Lt,Ft,et][yt],g:255*[Ft,et,et,It,Lt,Lt][yt],b:255*[Lt,Lt,Ft,et,et,It][yt]}}(H.h,Be,Ue),ct=!0,Je="hsv"):Le(H.h)&&Le(H.s)&&Le(H.l)&&(Be=G(H.s),st=G(H.l),ge=function(Ge,Ee,et){var jt,Vt,Lt;function It(zt,an,Et){return Et<0&&(Et+=1),Et>1&&(Et-=1),Et<1/6?zt+6*(an-zt)*Et:Et<.5?an:Et<2/3?zt+(an-zt)*(2/3-Et)*6:zt}if(Ge=U(Ge,360),Ee=U(Ee,100),et=U(et,100),Ee===0)jt=Vt=Lt=et;else{var Ft=et<.5?et*(1+Ee):et+Ee-et*Ee,yt=2*et-Ft;jt=It(yt,Ft,Ge+1/3),Vt=It(yt,Ft,Ge),Lt=It(yt,Ft,Ge-1/3)}return{r:255*jt,g:255*Vt,b:255*Lt}}(H.h,Be,st),ct=!0,Je="hsl"),H.hasOwnProperty("a")&&(xe=H.a)),xe=$(xe),{ok:ct,format:H.format||Je,r:v(255,h(ge.r,0)),g:v(255,h(ge.g,0)),b:v(255,h(ge.b,0)),a:xe}}(Z);this._originalInput=Z,this._r=ue.r,this._g=ue.g,this._b=ue.b,this._a=ue.a,this._roundA=y(100*this._a)/100,this._format=ce.format||ue.format,this._gradientType=ce.gradientType,this._r<1&&(this._r=y(this._r)),this._g<1&&(this._g=y(this._g)),this._b<1&&(this._b=y(this._b)),this._ok=ue.ok,this._tc_id=o++}function a(Z,ce,ue){Z=U(Z,255),ce=U(ce,255),ue=U(ue,255);var H,oe,se=h(Z,ce,ue),we=v(Z,ce,ue),ge=(se+we)/2;if(se==we)H=oe=0;else{var xe=se-we;switch(oe=ge>.5?xe/(2-se-we):xe/(se+we),se){case Z:H=(ce-ue)/xe+(ce<ue?6:0);break;case ce:H=(ue-Z)/xe+2;break;case ue:H=(Z-ce)/xe+4}H/=6}return{h:H,s:oe,l:ge}}function s(Z,ce,ue){Z=U(Z,255),ce=U(ce,255),ue=U(ue,255);var H,oe,se=h(Z,ce,ue),we=v(Z,ce,ue),ge=se,xe=se-we;if(oe=se===0?0:xe/se,se==we)H=0;else{switch(se){case Z:H=(ce-ue)/xe+(ce<ue?6:0);break;case ce:H=(ue-Z)/xe+2;break;case ue:H=(Z-ce)/xe+4}H/=6}return{h:H,s:oe,v:ge}}function d(Z,ce,ue,H){var oe=[V(y(Z).toString(16)),V(y(ce).toString(16)),V(y(ue).toString(16))];return H&&oe[0].charAt(0)==oe[0].charAt(1)&&oe[1].charAt(0)==oe[1].charAt(1)&&oe[2].charAt(0)==oe[2].charAt(1)?oe[0].charAt(0)+oe[1].charAt(0)+oe[2].charAt(0):oe.join("")}function p(Z,ce,ue,H){return[V(ie(H)),V(y(Z).toString(16)),V(y(ce).toString(16)),V(y(ue).toString(16))].join("")}function O(Z,ce){ce=ce===0?0:ce||10;var ue=r(Z).toHsl();return ue.s-=ce/100,ue.s=re(ue.s),r(ue)}function N(Z,ce){ce=ce===0?0:ce||10;var ue=r(Z).toHsl();return ue.s+=ce/100,ue.s=re(ue.s),r(ue)}function k(Z){return r(Z).desaturate(100)}function A(Z,ce){ce=ce===0?0:ce||10;var ue=r(Z).toHsl();return ue.l+=ce/100,ue.l=re(ue.l),r(ue)}function S(Z,ce){ce=ce===0?0:ce||10;var ue=r(Z).toRgb();return ue.r=h(0,v(255,ue.r-y(-ce/100*255))),ue.g=h(0,v(255,ue.g-y(-ce/100*255))),ue.b=h(0,v(255,ue.b-y(-ce/100*255))),r(ue)}function x(Z,ce){ce=ce===0?0:ce||10;var ue=r(Z).toHsl();return ue.l-=ce/100,ue.l=re(ue.l),r(ue)}function I(Z,ce){var ue=r(Z).toHsl(),H=(ue.h+ce)%360;return ue.h=H<0?360+H:H,r(ue)}function C(Z){var ce=r(Z).toHsl();return ce.h=(ce.h+180)%360,r(ce)}function L(Z){var ce=r(Z).toHsl(),ue=ce.h;return[r(Z),r({h:(ue+120)%360,s:ce.s,l:ce.l}),r({h:(ue+240)%360,s:ce.s,l:ce.l})]}function J(Z){var ce=r(Z).toHsl(),ue=ce.h;return[r(Z),r({h:(ue+90)%360,s:ce.s,l:ce.l}),r({h:(ue+180)%360,s:ce.s,l:ce.l}),r({h:(ue+270)%360,s:ce.s,l:ce.l})]}function z(Z){var ce=r(Z).toHsl(),ue=ce.h;return[r(Z),r({h:(ue+72)%360,s:ce.s,l:ce.l}),r({h:(ue+216)%360,s:ce.s,l:ce.l})]}function ee(Z,ce,ue){ce=ce||6,ue=ue||30;var H=r(Z).toHsl(),oe=360/ue,se=[r(Z)];for(H.h=(H.h-(oe*ce>>1)+720)%360;--ce;)H.h=(H.h+oe)%360,se.push(r(H));return se}function X(Z,ce){ce=ce||6;for(var ue=r(Z).toHsv(),H=ue.h,oe=ue.s,se=ue.v,we=[],ge=1/ce;ce--;)we.push(r({h:H,s:oe,v:se})),se=(se+ge)%1;return we}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(299*Z.r+587*Z.g+114*Z.b)/1e3},getLuminance:function(){var Z,ce,ue,H=this.toRgb();return Z=H.r/255,ce=H.g/255,ue=H.b/255,.2126*(Z<=.03928?Z/12.92:w.pow((Z+.055)/1.055,2.4))+.7152*(ce<=.03928?ce/12.92:w.pow((ce+.055)/1.055,2.4))+.0722*(ue<=.03928?ue/12.92:w.pow((ue+.055)/1.055,2.4))},setAlpha:function(Z){return this._a=$(Z),this._roundA=y(100*this._a)/100,this},toHsv:function(){var Z=s(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=s(this._r,this._g,this._b),ce=y(360*Z.h),ue=y(100*Z.s),H=y(100*Z.v);return this._a==1?"hsv("+ce+", "+ue+"%, "+H+"%)":"hsva("+ce+", "+ue+"%, "+H+"%, "+this._roundA+")"},toHsl:function(){var Z=a(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=a(this._r,this._g,this._b),ce=y(360*Z.h),ue=y(100*Z.s),H=y(100*Z.l);return this._a==1?"hsl("+ce+", "+ue+"%, "+H+"%)":"hsla("+ce+", "+ue+"%, "+H+"%, "+this._roundA+")"},toHex:function(Z){return d(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return function(ce,ue,H,oe,se){var we=[V(y(ce).toString(16)),V(y(ue).toString(16)),V(y(H).toString(16)),V(ie(oe))];return se&&we[0].charAt(0)==we[0].charAt(1)&&we[1].charAt(0)==we[1].charAt(1)&&we[2].charAt(0)==we[2].charAt(1)&&we[3].charAt(0)==we[3].charAt(1)?we[0].charAt(0)+we[1].charAt(0)+we[2].charAt(0)+we[3].charAt(0):we.join("")}(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:y(this._r),g:y(this._g),b:y(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+y(this._r)+", "+y(this._g)+", "+y(this._b)+")":"rgba("+y(this._r)+", "+y(this._g)+", "+y(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:y(100*U(this._r,255))+"%",g:y(100*U(this._g,255))+"%",b:y(100*U(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+y(100*U(this._r,255))+"%, "+y(100*U(this._g,255))+"%, "+y(100*U(this._b,255))+"%)":"rgba("+y(100*U(this._r,255))+"%, "+y(100*U(this._g,255))+"%, "+y(100*U(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(B[d(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Z){var ce="#"+p(this._r,this._g,this._b,this._a),ue=ce,H=this._gradientType?"GradientType = 1, ":"";if(Z){var oe=r(Z);ue="#"+p(oe._r,oe._g,oe._b,oe._a)}return"progid:DXImageTransform.Microsoft.gradient("+H+"startColorstr="+ce+",endColorstr="+ue+")"},toString:function(Z){var ce=!!Z;Z=Z||this._format;var ue=!1,H=this._a<1&&this._a>=0;return ce||!H||Z!=="hex"&&Z!=="hex6"&&Z!=="hex3"&&Z!=="hex4"&&Z!=="hex8"&&Z!=="name"?(Z==="rgb"&&(ue=this.toRgbString()),Z==="prgb"&&(ue=this.toPercentageRgbString()),Z!=="hex"&&Z!=="hex6"||(ue=this.toHexString()),Z==="hex3"&&(ue=this.toHexString(!0)),Z==="hex4"&&(ue=this.toHex8String(!0)),Z==="hex8"&&(ue=this.toHex8String()),Z==="name"&&(ue=this.toName()),Z==="hsl"&&(ue=this.toHslString()),Z==="hsv"&&(ue=this.toHsvString()),ue||this.toHexString()):Z==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(Z,ce){var ue=Z.apply(null,[this].concat([].slice.call(ce)));return this._r=ue._r,this._g=ue._g,this._b=ue._b,this.setAlpha(ue._a),this},lighten:function(){return this._applyModification(A,arguments)},brighten:function(){return this._applyModification(S,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(O,arguments)},saturate:function(){return this._applyModification(N,arguments)},greyscale:function(){return this._applyModification(k,arguments)},spin:function(){return this._applyModification(I,arguments)},_applyCombination:function(Z,ce){return Z.apply(null,[this].concat([].slice.call(ce)))},analogous:function(){return this._applyCombination(ee,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(X,arguments)},splitcomplement:function(){return this._applyCombination(z,arguments)},triad:function(){return this._applyCombination(L,arguments)},tetrad:function(){return this._applyCombination(J,arguments)}},r.fromRatio=function(Z,ce){if(typeof Z=="object"){var ue={};for(var H in Z)Z.hasOwnProperty(H)&&(ue[H]=H==="a"?Z[H]:G(Z[H]));Z=ue}return r(Z,ce)},r.equals=function(Z,ce){return!(!Z||!ce)&&r(Z).toRgbString()==r(ce).toRgbString()},r.random=function(){return r.fromRatio({r:l(),g:l(),b:l()})},r.mix=function(Z,ce,ue){ue=ue===0?0:ue||50;var H=r(Z).toRgb(),oe=r(ce).toRgb(),se=ue/100;return r({r:(oe.r-H.r)*se+H.r,g:(oe.g-H.g)*se+H.g,b:(oe.b-H.b)*se+H.b,a:(oe.a-H.a)*se+H.a})},r.readability=function(Z,ce){var ue=r(Z),H=r(ce);return(w.max(ue.getLuminance(),H.getLuminance())+.05)/(w.min(ue.getLuminance(),H.getLuminance())+.05)},r.isReadable=function(Z,ce,ue){var H,oe,se,we,ge,xe=r.readability(Z,ce);switch(oe=!1,(se=ue,(we=((se=se||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&we!=="AAA"&&(we="AA"),(ge=(se.size||"small").toLowerCase())!=="small"&&ge!=="large"&&(ge="small"),H={level:we,size:ge}).level+H.size){case"AAsmall":case"AAAlarge":oe=xe>=4.5;break;case"AAlarge":oe=xe>=3;break;case"AAAsmall":oe=xe>=7}return oe},r.mostReadable=function(Z,ce,ue){var H,oe,se,we,ge=null,xe=0;oe=(ue=ue||{}).includeFallbackColors,se=ue.level,we=ue.size;for(var Be=0;Be<ce.length;Be++)(H=r.readability(Z,ce[Be]))>xe&&(xe=H,ge=r(ce[Be]));return r.isReadable(Z,ge,{level:se,size:we})||!oe?ge:(ue.includeFallbackColors=!1,r.mostReadable(Z,["#fff","#000"],ue))};var q=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},B=r.hexNames=function(Z){var ce={};for(var ue in Z)Z.hasOwnProperty(ue)&&(ce[Z[ue]]=ue);return ce}(q);function $(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function U(Z,ce){(function(H){return typeof H=="string"&&H.indexOf(".")!=-1&&parseFloat(H)===1})(Z)&&(Z="100%");var ue=function(H){return typeof H=="string"&&H.indexOf("%")!=-1}(Z);return Z=v(ce,h(0,parseFloat(Z))),ue&&(Z=parseInt(Z*ce,10)/100),w.abs(Z-ce)<1e-6?1:Z%ce/parseFloat(ce)}function re(Z){return v(1,h(0,Z))}function Q(Z){return parseInt(Z,16)}function V(Z){return Z.length==1?"0"+Z:""+Z}function G(Z){return Z<=1&&(Z=100*Z+"%"),Z}function ie(Z){return w.round(255*parseFloat(Z)).toString(16)}function le(Z){return Q(Z)/255}var ve,Oe,Se,Ce=(Oe="[\\s|\\(]+("+(ve="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")\\s*\\)?",Se="[\\s|\\(]+("+ve+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")\\s*\\)?",{CSS_UNIT:new RegExp(ve),rgb:new RegExp("rgb"+Oe),rgba:new RegExp("rgba"+Se),hsl:new RegExp("hsl"+Oe),hsla:new RegExp("hsla"+Se),hsv:new RegExp("hsv"+Oe),hsva:new RegExp("hsva"+Se),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Le(Z){return!!Ce.CSS_UNIT.exec(Z)}D.exports?D.exports=r:(m=function(){return r}.call(E,b,E,D))===void 0||(D.exports=m)})(Math)},607:function(D,E,b){var m=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(E,"__esModule",{value:!0}),E.Cursor=E.default=void 0;var w=m(b(678));E.default=w.default;var i=m(b(353));E.Cursor=i.default,b(413)},353:(D,E,b)=>{Object.defineProperty(E,"__esModule",{value:!0});var m=b(621),w=function(){function i(u,o,y){this.id=u,this.name=o,this.color=y,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return i.prototype.build=function(u){var o=document.createElement(i.CONTAINER_ELEMENT_TAG);o.classList.add(i.CURSOR_CLASS),o.id="ql-cursor-".concat(this.id),o.innerHTML=u.template;var y=o.getElementsByClassName(i.SELECTION_CLASS)[0],v=o.getElementsByClassName(i.CARET_CONTAINER_CLASS)[0],h=v.getElementsByClassName(i.CARET_CLASS)[0],l=o.getElementsByClassName(i.FLAG_CLASS)[0];return l.style.backgroundColor=this.color,h.style.backgroundColor=this.color,o.getElementsByClassName(i.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(u.hideDelayMs,"ms"),this._hideSpeedMs=u.hideSpeedMs,this._positionFlag=u.positionFlag,l.style.transitionDelay=this._hideDelay,l.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=o,this._selectionEl=y,this._caretEl=v,this._flagEl=l,v.addEventListener("mouseover",this._setHoverState),this._el},i.prototype.show=function(){this._el.classList.remove(i.HIDDEN_CLASS)},i.prototype.hide=function(){this._el.classList.add(i.HIDDEN_CLASS)},i.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},i.prototype.toggleNearCursor=function(u,o){var y=this._getCoordinates(),v=y.left,h=y.right,l=y.top,r=y.bottom,a=u>=v&&u<=h&&o>=l&&o<=r;return this._caretEl.classList.toggle(i.CONTAINER_HOVER_CLASS,a),a},i.prototype.toggleFlag=function(u){var o=this;this._caretEl.classList.toggle(i.CONTAINER_HOVER_CLASS,u)||(this._flagEl.classList.add(i.NO_DELAY_CLASS),setTimeout(function(){return o._flagEl.classList.remove(i.NO_DELAY_CLASS)},this._hideSpeedMs))},i.prototype.updateCaret=function(u,o){this._caretEl.style.top="".concat(u.top,"px"),this._caretEl.style.left="".concat(u.left,"px"),this._caretEl.style.height="".concat(u.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,u,o):this._updateCaretFlag(u,o)},i.prototype.updateSelection=function(u,o){var y=this;this._clearSelection(),u=u||[],u=Array.from(u),u=this._sanitize(u),(u=this._sortByDomPosition(u)).forEach(function(v){return y._addSelection(v,o)})},i.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},i.prototype._toggleOpenedCursor=function(u){var o=this.toggleNearCursor(u.clientX,u.clientY);this._caretEl.classList.toggle(i.CONTAINER_NO_POINTER_CLASS,o),o||document.removeEventListener("mousemove",this._toggleOpenedCursor)},i.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},i.prototype._updateCaretFlag=function(u,o){this._flagEl.style.width="";var y=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(i.FLAG_FLIPPED_CLASS),u.left>o.width-y.width&&this._flagEl.classList.add(i.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(u.left,"px"),this._flagEl.style.top="".concat(u.top,"px"),this._flagEl.style.width="".concat(Math.ceil(y.width),"px")},i.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},i.prototype._addSelection=function(u,o){var y=this._selectionBlock(u,o);this._selectionEl.appendChild(y)},i.prototype._selectionBlock=function(u,o){var y=document.createElement(i.SELECTION_ELEMENT_TAG);return y.classList.add(i.SELECTION_BLOCK_CLASS),y.style.top="".concat(u.top-o.top,"px"),y.style.left="".concat(u.left-o.left,"px"),y.style.width="".concat(u.width,"px"),y.style.height="".concat(u.height,"px"),y.style.backgroundColor=m(this.color).setAlpha(.3).toString(),y},i.prototype._sortByDomPosition=function(u){return u.sort(function(o,y){return o.top===y.top?o.left-y.left:o.top-y.top})},i.prototype._sanitize=function(u){var o=this,y=new Set;return u.filter(function(v){if(!v.width||!v.height)return!1;var h=o._serialize(v);return!y.has(h)&&(y.add(h),!0)})},i.prototype._serialize=function(u){return["top:".concat(u.top),"right:".concat(u.right),"bottom:".concat(u.bottom),"left:".concat(u.left)].join(";")},i.CONTAINER_ELEMENT_TAG="SPAN",i.SELECTION_ELEMENT_TAG="SPAN",i.CURSOR_CLASS="ql-cursor",i.SELECTION_CLASS="ql-cursor-selections",i.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",i.CARET_CLASS="ql-cursor-caret",i.CARET_CONTAINER_CLASS="ql-cursor-caret-container",i.CONTAINER_HOVER_CLASS="hover",i.CONTAINER_NO_POINTER_CLASS="no-pointer",i.FLAG_CLASS="ql-cursor-flag",i.FLAG_FLIPPED_CLASS="flag-flipped",i.NAME_CLASS="ql-cursor-name",i.HIDDEN_CLASS="hidden",i.NO_DELAY_CLASS="no-delay",i}();E.default=w},678:function(D,E,b){var m=this&&this.__createBinding||(Object.create?function(a,s,d,p){p===void 0&&(p=d),Object.defineProperty(a,p,{enumerable:!0,get:function(){return s[d]}})}:function(a,s,d,p){p===void 0&&(p=d),a[p]=s[d]}),w=this&&this.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),i=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&m(s,a,d);return w(s,a),s},u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(E,"__esModule",{value:!0});var o=u(b(353)),y=i(b(165)),v=u(b(338)),h=u(b(33)),l=b(895),r=function(){function a(s,d){d===void 0&&(d={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=s,this.options=this._setDefaults(d),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return a.prototype.createCursor=function(s,d,p){var O=this._cursors[s];if(!O){O=new o.default(s,d,p),this._cursors[s]=O;var N=O.build(this.options);this._container.appendChild(N)}return O},a.prototype.moveCursor=function(s,d){var p=this._cursors[s];p&&(p.range=d,this._updateCursor(p))},a.prototype.removeCursor=function(s){var d=this._cursors[s];d&&(d.remove(),delete this._cursors[s])},a.prototype.update=function(){var s=this;this.cursors().forEach(function(d){return s._updateCursor(d)})},a.prototype.clearCursors=function(){var s=this;this.cursors().forEach(function(d){return s.removeCursor(d.id)})},a.prototype.toggleFlag=function(s,d){var p=this._cursors[s];p&&p.toggleFlag(d)},a.prototype.cursors=function(){var s=this;return Object.keys(this._cursors).map(function(d){return s._cursors[d]})},a.prototype._registerSelectionChangeListeners=function(){var s=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(d){s._currentSelection=d})},a.prototype._registerTextChangeListener=function(){var s=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(d){return s._handleTextChange(d)})},a.prototype._registerDomListeners=function(){var s=this,d=this.quill.container.getElementsByClassName("ql-editor")[0];d.addEventListener("scroll",function(){return s.update()}),d.addEventListener("touchstart",this._handleCursorTouch)},a.prototype._handleCursorTouch=function(s){var d=this;this.cursors().forEach(function(p){p.toggleNearCursor(s.pageX,s.pageY),setTimeout(function(){return p.toggleFlag(!1)},d.options.hideDelayMs)})},a.prototype._registerResizeObserver=function(){var s=this;if(!this._isObserving){var d=this.quill.container.getElementsByClassName("ql-editor")[0],p=new h.default(function(O){O[0].target.isConnected||(p.disconnect(),s._isObserving=!1),s.update()});p.observe(d),this._isObserving=!0}},a.prototype._updateCursor=function(s){if(this._registerResizeObserver(),!s.range)return s.hide();var d=this._indexWithinQuillBounds(s.range.index),p=this._indexWithinQuillBounds(s.range.index+s.range.length),O=this.quill.getLeaf(d),N=this.quill.getLeaf(p);if(!this._leafIsValid(O)||!this._leafIsValid(N))return s.hide();s.show();var k=this._boundsContainer.getBoundingClientRect(),A=this.quill.getBounds(p);s.updateCaret(A,k);var S=this._lineRanges(s,O,N).reduce(function(x,I){return x.concat(Array.from(y.getClientRects(I)))},[]);s.updateSelection(S,k)},a.prototype._indexWithinQuillBounds=function(s){var d=this.quill.getLength(),p=d?d-1:0;return s=Math.max(s,0),Math.min(s,p)},a.prototype._leafIsValid=function(s){return s&&s[0]&&s[0].domNode&&s[1]>=0},a.prototype._handleTextChange=function(s){var d=this;window.setTimeout(function(){d.options.transformOnTextChange&&d._transformCursors(s),d.options.selectionChangeSource&&(d._emitSelection(),d.update())})},a.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},a.prototype._setDefaults=function(s){return(s=Object.assign({},s)).template||(s.template=a.DEFAULTS.template),s.containerClass||(s.containerClass=a.DEFAULTS.containerClass),s.selectionChangeSource!==null&&(s.selectionChangeSource||(s.selectionChangeSource=a.DEFAULTS.selectionChangeSource)),s.hideDelayMs=Number.isInteger(s.hideDelayMs)?s.hideDelayMs:a.DEFAULTS.hideDelayMs,s.hideSpeedMs=Number.isInteger(s.hideSpeedMs)?s.hideSpeedMs:a.DEFAULTS.hideSpeedMs,s.transformOnTextChange=!!s.transformOnTextChange,s},a.prototype._lineRanges=function(s,d,p){var O=this.quill.getLines(s.range);return O.reduce(function(N,k,A){if(!k.children){var S=document.createRange();return S.selectNode(k.domNode),N.concat(S)}var x=A===0?d:k.path(0).pop(),I=x[0],C=x[1],L=A===O.length-1?p:k.path(k.length()-1).pop(),J=L[0],z=L[1],ee=document.createRange();return I.domNode.nodeType===Node.TEXT_NODE?ee.setStart(I.domNode,C):ee.setStartBefore(I.domNode),J.domNode.nodeType===Node.TEXT_NODE?ee.setEnd(J.domNode,z):ee.setEndAfter(J.domNode),N.concat(ee)},[])},a.prototype._transformCursors=function(s){var d=this;s=new l(s),this.cursors().filter(function(p){return p.range}).forEach(function(p){p.range.index=s.transformPosition(p.range.index),d._updateCursor(p)})},a.DEFAULTS={template:v.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},a}();E.default=r},338:function(D,E,b){var m=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(E,"__esModule",{value:!0});var w=m(b(353)),i=`
  <span class="`.concat(w.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(w.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(w.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(w.default.FLAG_CLASS,`">
    <small class="`).concat(w.default.NAME_CLASS,`"></small>
  </div>
`);E.default=i}},M={};function R(D){var E=M[D];if(E!==void 0)return E.exports;var b=M[D]={id:D,loaded:!1,exports:{}};return Y[D].call(b.exports,b,b.exports,R),b.loaded=!0,b.exports}R.n=D=>{var E=D&&D.__esModule?()=>D.default:()=>D;return R.d(E,{a:E}),E},R.d=(D,E)=>{for(var b in E)R.o(E,b)&&!R.o(D,b)&&Object.defineProperty(D,b,{enumerable:!0,get:E[b]})},R.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),R.o=(D,E)=>Object.prototype.hasOwnProperty.call(D,E),R.r=D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})},R.nmd=D=>(D.paths=[],D.children||(D.children=[]),D),R.nc=void 0;var F=R(607);return F.default})())})($i);const Jo=ti($i.exports);var Vi={exports:{}};(function(He){var me=(()=>{var Y=Object.defineProperty,M=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,D=(h,l,r)=>l in h?Y(h,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[l]=r,E=(h,l)=>{for(var r in l||(l={}))R.call(l,r)&&D(h,r,l[r]);if(M)for(var r of M(l))F.call(l,r)&&D(h,r,l[r]);return h},b=h=>Y(h,"__esModule",{value:!0}),m=(h,l)=>{b(h);for(var r in l)Y(h,r,{get:l[r],enumerable:!0})},w={};m(w,{DEFAULT_UUID_LENGTH:()=>u,default:()=>v});var i="4.4.4",u=6,o={dictionary:"alphanum",shuffle:!0,debug:!1,length:u},y=class extends Function{constructor(h={}){super(),this.dictIndex=0,this.dictRange=[],this.lowerBound=0,this.upperBound=0,this.dictLength=0,this._digit_first_ascii=48,this._digit_last_ascii=58,this._alpha_lower_first_ascii=97,this._alpha_lower_last_ascii=123,this._hex_last_ascii=103,this._alpha_upper_first_ascii=65,this._alpha_upper_last_ascii=91,this._number_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii]},this._alpha_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alpha_lower_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alpha_upper_dict_ranges={upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_lower_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alphanum_upper_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._hex_dict_ranges={decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]},this.log=(...d)=>{const p=[...d];if(p[0]=`[short-unique-id] ${d[0]}`,this.debug===!0&&typeof console<"u"&&console!==null)return console.log(...p)},this.setDictionary=(d,p)=>{let O;if(d&&Array.isArray(d)&&d.length>1)O=d;else{O=[];let N;this.dictIndex=N=0;const k=`_${d}_dict_ranges`,A=this[k];Object.keys(A).forEach(S=>{const x=S;for(this.dictRange=A[x],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=N=this.lowerBound;this.lowerBound<=this.upperBound?N<this.upperBound:N>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?N+=1:N-=1)O.push(String.fromCharCode(this.dictIndex))})}p&&(O=O.sort(()=>Math.random()-.5)),this.dict=O,this.dictLength=this.dict.length,this.counter=0},this.seq=()=>this.sequentialUUID(),this.sequentialUUID=()=>{let d,p,O="";d=this.counter;do p=d%this.dictLength,d=Math.trunc(d/this.dictLength),O+=this.dict[p];while(d!==0);return this.counter+=1,O},this.randomUUID=(d=this.uuidLength||u)=>{let p,O,N;if(d===null||typeof d>"u"||d<1)throw new Error("Invalid UUID Length Provided");for(p="",N=0;N<d;N+=1)O=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,p+=this.dict[O];return p},this.availableUUIDs=(d=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,d).toFixed(0)),this.approxMaxBeforeCollision=(d=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*d).toFixed(20)),this.collisionProbability=(d=this.availableUUIDs(this.uuidLength),p=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(d)/this.availableUUIDs(p)).toFixed(20)),this.uniqueness=(d=this.availableUUIDs(this.uuidLength))=>{const p=parseFloat((1-this.approxMaxBeforeCollision(d)/d).toFixed(20));return p>1?1:p<0?0:p},this.getVersion=()=>this.version,this.stamp=d=>{if(typeof d!="number"||d<10)throw new Error("Param finalLength must be number greater than 10");const p=Math.floor(+new Date/1e3).toString(16),O=d-9,N=Math.round(Math.random()*(O>15?15:O)),k=this.randomUUID(O);return`${k.substr(0,N)}${p}${k.substr(N)}${N.toString(16)}`},this.parseStamp=d=>{if(d.length<10)throw new Error("Stamp length invalid");const p=parseInt(d.substr(d.length-1,1),16);return new Date(parseInt(d.substr(p,8),16)*1e3)};const l=E(E({},o),h);this.counter=0,this.debug=!1,this.dict=[],this.version=i;const{dictionary:r,shuffle:a,length:s}=l;return this.uuidLength=s,this.setDictionary(r,a),this.debug=l.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength}`),new Proxy(this,{apply:(d,p,O)=>this.randomUUID(...O)})}},v=y;return v.default=y,w})();He.exports=me.default,typeof window<"u"&&(me=me.default)})(Vi);const $o=ti(Vi.exports);var ut=globalThis&&globalThis.__classPrivateFieldSet||function(He,me,Y){if(!me.has(He))throw new TypeError("attempted to set private field on non-instance");return me.set(He,Y),Y},$e=globalThis&&globalThis.__classPrivateFieldGet||function(He,me){if(!me.has(He))throw new TypeError("attempted to get private field on non-instance");return me.get(He)},mr,Er,Yn,Cr,Ur,tr,nr,rr,ir,or,sr,ar,ur,Or,Lr,yr,ei,vr;const Vo=function(He){var me=131,Y=137,M=0;He+="x";var R=Math.floor(9007199254740991/Y);for(let F=0;F<He.length;F++)M>R&&(M=Math.floor(M/Y)),M=M*me+He.charCodeAt(F);return M},Ke="0123456789abcdef".split(""),zo=[-2147483648,8388608,32768,128],Wn=[24,16,8,0],Qr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],yn=[];class Ko{constructor(me=!1,Y=!1){mr.set(this,void 0),Er.set(this,void 0),Yn.set(this,void 0),Cr.set(this,void 0),Ur.set(this,void 0),tr.set(this,void 0),nr.set(this,void 0),rr.set(this,void 0),ir.set(this,void 0),or.set(this,void 0),sr.set(this,void 0),ar.set(this,void 0),ur.set(this,void 0),Or.set(this,void 0),Lr.set(this,void 0),yr.set(this,void 0),ei.set(this,0),vr.set(this,void 0),this.init(me,Y)}init(me,Y){Y?(yn[0]=yn[16]=yn[1]=yn[2]=yn[3]=yn[4]=yn[5]=yn[6]=yn[7]=yn[8]=yn[9]=yn[10]=yn[11]=yn[12]=yn[13]=yn[14]=yn[15]=0,ut(this,Er,yn)):ut(this,Er,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),me?(ut(this,tr,3238371032),ut(this,nr,914150663),ut(this,rr,812702999),ut(this,ir,4144912697),ut(this,or,4290775857),ut(this,sr,1750603025),ut(this,ar,1694076839),ut(this,ur,3204075428)):(ut(this,tr,1779033703),ut(this,nr,3144134277),ut(this,rr,1013904242),ut(this,ir,2773480762),ut(this,or,1359893119),ut(this,sr,2600822924),ut(this,ar,528734635),ut(this,ur,1541459225)),ut(this,mr,ut(this,vr,ut(this,Yn,ut(this,Lr,0)))),ut(this,Cr,ut(this,Or,!1)),ut(this,Ur,!0),ut(this,yr,me)}update(me){if($e(this,Cr))return this;let Y;me instanceof ArrayBuffer?Y=new Uint8Array(me):Y=me;let M=0;const R=Y.length,F=$e(this,Er);for(;M<R;){let D;if($e(this,Or)&&(ut(this,Or,!1),F[0]=$e(this,mr),F[16]=F[1]=F[2]=F[3]=F[4]=F[5]=F[6]=F[7]=F[8]=F[9]=F[10]=F[11]=F[12]=F[13]=F[14]=F[15]=0),typeof Y!="string")for(D=$e(this,vr);M<R&&D<64;++M)F[D>>2]|=Y[M]<<Wn[D++&3];else for(D=$e(this,vr);M<R&&D<64;++M){let E=Y.charCodeAt(M);E<128?F[D>>2]|=E<<Wn[D++&3]:E<2048?(F[D>>2]|=(192|E>>6)<<Wn[D++&3],F[D>>2]|=(128|E&63)<<Wn[D++&3]):E<55296||E>=57344?(F[D>>2]|=(224|E>>12)<<Wn[D++&3],F[D>>2]|=(128|E>>6&63)<<Wn[D++&3],F[D>>2]|=(128|E&63)<<Wn[D++&3]):(E=65536+((E&1023)<<10|Y.charCodeAt(++M)&1023),F[D>>2]|=(240|E>>18)<<Wn[D++&3],F[D>>2]|=(128|E>>12&63)<<Wn[D++&3],F[D>>2]|=(128|E>>6&63)<<Wn[D++&3],F[D>>2]|=(128|E&63)<<Wn[D++&3])}ut(this,ei,D),ut(this,Yn,$e(this,Yn)+(D-$e(this,vr))),D>=64?(ut(this,mr,F[16]),ut(this,vr,D-64),this.hash(),ut(this,Or,!0)):ut(this,vr,D)}return $e(this,Yn)>4294967295&&(ut(this,Lr,$e(this,Lr)+($e(this,Yn)/4294967296<<0)),ut(this,Yn,$e(this,Yn)%4294967296)),this}finalize(){if($e(this,Cr))return;ut(this,Cr,!0);const me=$e(this,Er),Y=$e(this,ei);me[16]=$e(this,mr),me[Y>>2]|=zo[Y&3],ut(this,mr,me[16]),Y>=56&&($e(this,Or)||this.hash(),me[0]=$e(this,mr),me[16]=me[1]=me[2]=me[3]=me[4]=me[5]=me[6]=me[7]=me[8]=me[9]=me[10]=me[11]=me[12]=me[13]=me[14]=me[15]=0),me[14]=$e(this,Lr)<<3|$e(this,Yn)>>>29,me[15]=$e(this,Yn)<<3,this.hash()}hash(){let me=$e(this,tr),Y=$e(this,nr),M=$e(this,rr),R=$e(this,ir),F=$e(this,or),D=$e(this,sr),E=$e(this,ar),b=$e(this,ur);const m=$e(this,Er);let w,i,u,o,y,v,h,l,r,a;for(let s=16;s<64;++s)o=m[s-15],w=(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,o=m[s-2],i=(o>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,m[s]=m[s-16]+w+m[s-7]+i<<0;a=Y&M;for(let s=0;s<64;s+=4)$e(this,Ur)?($e(this,yr)?(h=300032,o=m[0]-1413257819,b=o-150054599<<0,R=o+24177077<<0):(h=704751109,o=m[0]-210244248,b=o-1521486534<<0,R=o+143694565<<0),ut(this,Ur,!1)):(w=(me>>>2|me<<30)^(me>>>13|me<<19)^(me>>>22|me<<10),i=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),h=me&Y,u=h^me&M^a,v=F&D^~F&E,o=b+i+v+Qr[s]+m[s],y=w+u,b=R+o<<0,R=o+y<<0),w=(R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10),i=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),l=R&me,u=l^R&Y^h,v=b&F^~b&D,o=E+i+v+Qr[s+1]+m[s+1],y=w+u,E=M+o<<0,M=o+y<<0,w=(M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10),i=(E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7),r=M&R,u=r^M&me^l,v=E&b^~E&F,o=D+i+v+Qr[s+2]+m[s+2],y=w+u,D=Y+o<<0,Y=o+y<<0,w=(Y>>>2|Y<<30)^(Y>>>13|Y<<19)^(Y>>>22|Y<<10),i=(D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7),a=Y&M,u=a^Y&R^r,v=D&E^~D&b,o=F+i+v+Qr[s+3]+m[s+3],y=w+u,F=me+o<<0,me=o+y<<0;ut(this,tr,$e(this,tr)+me<<0),ut(this,nr,$e(this,nr)+Y<<0),ut(this,rr,$e(this,rr)+M<<0),ut(this,ir,$e(this,ir)+R<<0),ut(this,or,$e(this,or)+F<<0),ut(this,sr,$e(this,sr)+D<<0),ut(this,ar,$e(this,ar)+E<<0),ut(this,ur,$e(this,ur)+b<<0)}hex(){this.finalize();const me=$e(this,tr),Y=$e(this,nr),M=$e(this,rr),R=$e(this,ir),F=$e(this,or),D=$e(this,sr),E=$e(this,ar),b=$e(this,ur);let m=Ke[me>>28&15]+Ke[me>>24&15]+Ke[me>>20&15]+Ke[me>>16&15]+Ke[me>>12&15]+Ke[me>>8&15]+Ke[me>>4&15]+Ke[me&15]+Ke[Y>>28&15]+Ke[Y>>24&15]+Ke[Y>>20&15]+Ke[Y>>16&15]+Ke[Y>>12&15]+Ke[Y>>8&15]+Ke[Y>>4&15]+Ke[Y&15]+Ke[M>>28&15]+Ke[M>>24&15]+Ke[M>>20&15]+Ke[M>>16&15]+Ke[M>>12&15]+Ke[M>>8&15]+Ke[M>>4&15]+Ke[M&15]+Ke[R>>28&15]+Ke[R>>24&15]+Ke[R>>20&15]+Ke[R>>16&15]+Ke[R>>12&15]+Ke[R>>8&15]+Ke[R>>4&15]+Ke[R&15]+Ke[F>>28&15]+Ke[F>>24&15]+Ke[F>>20&15]+Ke[F>>16&15]+Ke[F>>12&15]+Ke[F>>8&15]+Ke[F>>4&15]+Ke[F&15]+Ke[D>>28&15]+Ke[D>>24&15]+Ke[D>>20&15]+Ke[D>>16&15]+Ke[D>>12&15]+Ke[D>>8&15]+Ke[D>>4&15]+Ke[D&15]+Ke[E>>28&15]+Ke[E>>24&15]+Ke[E>>20&15]+Ke[E>>16&15]+Ke[E>>12&15]+Ke[E>>8&15]+Ke[E>>4&15]+Ke[E&15];return $e(this,yr)||(m+=Ke[b>>28&15]+Ke[b>>24&15]+Ke[b>>20&15]+Ke[b>>16&15]+Ke[b>>12&15]+Ke[b>>8&15]+Ke[b>>4&15]+Ke[b&15]),m}toString(){return this.hex()}digest(){this.finalize();const me=$e(this,tr),Y=$e(this,nr),M=$e(this,rr),R=$e(this,ir),F=$e(this,or),D=$e(this,sr),E=$e(this,ar),b=$e(this,ur),m=[me>>24&255,me>>16&255,me>>8&255,me&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255,M>>24&255,M>>16&255,M>>8&255,M&255,R>>24&255,R>>16&255,R>>8&255,R&255,F>>24&255,F>>16&255,F>>8&255,F&255,D>>24&255,D>>16&255,D>>8&255,D&255,E>>24&255,E>>16&255,E>>8&255,E&255];return $e(this,yr)||m.push(b>>24&255,b>>16&255,b>>8&255,b&255),m}array(){return this.digest()}arrayBuffer(){this.finalize();const me=new ArrayBuffer($e(this,yr)?28:32),Y=new DataView(me);return Y.setUint32(0,$e(this,tr)),Y.setUint32(4,$e(this,nr)),Y.setUint32(8,$e(this,rr)),Y.setUint32(12,$e(this,ir)),Y.setUint32(16,$e(this,or)),Y.setUint32(20,$e(this,sr)),Y.setUint32(24,$e(this,ar)),$e(this,yr)||Y.setUint32(28,$e(this,ur)),me}}mr=new WeakMap,Er=new WeakMap,Yn=new WeakMap,Cr=new WeakMap,Ur=new WeakMap,tr=new WeakMap,nr=new WeakMap,rr=new WeakMap,ir=new WeakMap,or=new WeakMap,sr=new WeakMap,ar=new WeakMap,ur=new WeakMap,Or=new WeakMap,Lr=new WeakMap,yr=new WeakMap,ei=new WeakMap,vr=new WeakMap;function Wo(He){const me=new Ko;return me.update(He),parseInt(me.hex().substring(0,8),16)}const Yo=function(He){var me="#";return He.forEach(function(Y){Y<16&&(me+=0),me+=Y.toString(16)}),me},Ho=function(He,me,Y){He/=360;var M=Y<.5?Y*(1+me):Y+me-Y*me,R=2*Y-M;return[He+1/3,He,He-1/3].map(function(F){return F<0&&F++,F>1&&F--,F<1/6?F=R+(M-R)*6*F:F<.5?F=M:F<2/3?F=R+(M-R)*6*(2/3-F):F=R,Math.round(F*255)})};class Go{constructor(me={}){const[Y,M]=[me.lightness,me.saturation].map(function(R){return R=R!==void 0?R:[.35,.5,.65],Array.isArray(R)?R.concat():[R]});this.L=Y,this.S=M,typeof me.hue=="number"&&(me.hue={min:me.hue,max:me.hue}),typeof me.hue=="object"&&!Array.isArray(me.hue)&&(me.hue=[me.hue]),typeof me.hue>"u"&&(me.hue=[]),this.hueRanges=me.hue.map(function(R){return{min:typeof R.min>"u"?0:R.min,max:typeof R.max>"u"?360:R.max}}),this.hash=Wo,typeof me.hash=="function"&&(this.hash=me.hash),me.hash==="bkdr"&&(this.hash=Vo)}hsl(me){var Y,M,R,F=this.hash(me),D=727;if(this.hueRanges.length){const E=this.hueRanges[F%this.hueRanges.length];Y=F/this.hueRanges.length%D*(E.max-E.min)/D+E.min}else Y=F%359;return F=Math.ceil(F/360),M=this.S[F%this.S.length],F=Math.ceil(F/this.S.length),R=this.L[F%this.L.length],[Y,M,R]}rgb(me){var Y=this.hsl(me);return Ho.apply(this,Y)}hex(me){var Y=this.rgb(me);return Yo(Y)}}const Nr={isOnline:!1,showOffline:He=>{Nr.isOnline=!1,He.innerHTML='<span class="red"> </span>'},showOnline:He=>{Nr.isOnline=!0,He.innerHTML='<span class="green"> </span>'},statusListener:He=>me=>{Nr.isOnline&&(me.type==vn.exports.ClientEventType.StatusChanged&&me.value==vn.exports.ClientStatus.Deactivated||me.type==vn.exports.ClientEventType.StreamConnectionStatusChanged&&me.value==vn.exports.StreamConnectionStatus.Disconnected||me.type==vn.exports.ClientEventType.DocumentSynced&&me.value==vn.exports.DocumentSyncResultType.SyncFailed)?Nr.showOffline(He):!Nr.isOnline&&(me.type==vn.exports.ClientEventType.StatusChanged&&me.value==vn.exports.ClientStatus.Activated||me.type==vn.exports.ClientEventType.StreamConnectionStatusChanged&&me.value==vn.exports.StreamConnectionStatus.Connected||me.type==vn.exports.ClientEventType.DocumentSynced&&me.value==vn.exports.DocumentSyncResultType.Synced||me.type==vn.exports.ClientEventType.DocumentChanged)&&Nr.showOnline(He)}};function Xo(He,me,Y){const M=[];for(const{clientID:R,presence:F}of me)M.push(Y===R?`<b>${F.username}</b>`:F.username);He.innerHTML=JSON.stringify(M)}function ji(He,me,Y){He.innerText=Y.toJSON(),me.innerText=Y.getRoot().content.toTestString()}const Zo=document.getElementById("peers"),Fi=document.getElementById("document"),qi=document.getElementById("document-text"),Qo=document.getElementById("network-status"),es=new $o,ts=new Go,ns=`vanilla-quill-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`;function hi(He){var M;const{embed:me,...Y}=(M=He.attributes)!=null?M:{};return me?{insert:JSON.parse(me),attributes:Y}:{insert:He.content||"",attributes:He.attributes}}async function rs(){const He=new fi.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});await He.activate(),He.subscribe(E=>{Nr.statusListener(Qo)(E)});const me=new fi.Document(ns);me.subscribe("presence",E=>{E.type!==vn.exports.DocEventType.PresenceChanged&&Xo(Zo,me.getPresences(),He.getID())}),await He.attach(me,{initialPresence:{username:`username-${es()}`,selection:void 0}}),me.update(E=>{E.content||(E.content=new fi.Text,E.content.edit(0,0,`
`))},"create content if not exists"),me.subscribe(E=>{E.type==="snapshot"&&D(),ji(Fi,qi,me)}),me.subscribe("$.content",E=>{E.type==="remote-change"&&F(E.value.operations)}),me.subscribe("others",E=>{E.type===vn.exports.DocEventType.Unwatched?R.removeCursor(E.value.presence.username):E.type===vn.exports.DocEventType.PresenceChanged&&Y([E.value])});function Y(E){for(const b of E){const{presence:{username:m,selection:w}}=b;if(!w)continue;const[i,u]=me.getRoot().content.posRangeToIndexRange(w);R.createCursor(m,m,ts.hex(m)),R.moveCursor(m,{index:i,length:u-i})}}await He.sync(),Bi.register("modules/cursors",Jo);const M=new Bi("#editor",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],["clean"]],cursors:!0},theme:"snow"}),R=M.getModule("cursors");M.on("text-change",(E,b,m)=>{if(m==="api"||!E.ops)return;let w=0,i=0;console.log(`%c quill: ${JSON.stringify(E.ops)}`,"color: green");for(const u of E.ops)u.attributes!==void 0||u.insert!==void 0?(u.retain!==void 0&&(i=w+u.retain),console.log(`%c local: ${w}-${i}: ${u.insert} ${u.attributes?JSON.stringify(u.attributes):"{}"}`,"color: green"),me.update((o,y)=>{let v;u.attributes!==void 0&&u.insert===void 0?o.content.setStyle(w,i,u.attributes):u.insert!==void 0&&(i<w&&(i=w),typeof u.insert=="object"?v=o.content.edit(w,i," ",{embed:JSON.stringify(u.insert),...u.attributes}):v=o.content.edit(w,i,u.insert,u.attributes),w=i+u.insert.length),v&&y.set({selection:o.content.indexRangeToPosRange(v)})},`update style by ${He.getID()}`)):u.delete!==void 0?(i=w+u.delete,console.log(`%c local: ${w}-${i}: ''`,"color: green"),me.update((o,y)=>{const v=o.content.edit(w,i,"");v&&y.set({selection:o.content.indexRangeToPosRange(v)})},`update content by ${He.getID()}`)):u.retain!==void 0&&(w=i+u.retain,i=w)}).on("selection-change",(E,b,m)=>{m==="api"||!E||me.update((w,i)=>{i.set({selection:w.content.indexRangeToPosRange([E.index,E.index+E.length])})},`update selection by ${He.getID()}`)});function F(E){const b=[];let m=0;for(const w of E)if(w.type==="edit"){const i=w.from,u=w.to,o=i-m,y=u-i,{insert:v,attributes:h}=hi(w.value);if(console.log(`%c remote: ${i}-${u}: ${v}`,"color: skyblue"),o&&b.push({retain:o}),y&&b.push({delete:y}),v){const l={insert:v};h&&(l.attributes=h),b.push(l)}m=u}else if(w.type==="style"){const i=w.from,u=w.to,o=i-m,y=u-i,{attributes:v}=hi(w.value);if(console.log(`%c remote: ${i}-${u}: ${JSON.stringify(v)}`,"color: skyblue"),o&&b.push({retain:o}),v){const h={attributes:v};y&&(h.retain=y),b.push(h)}m=u}if(b.length){console.log(`%c to quill: ${JSON.stringify(b)}`,"color: green");const w={ops:b};M.updateContents(w,"api")}}function D(){const b={ops:me.getRoot().content.values().map(m=>hi(m))};M.setContents(b,"api")}D(),Y(me.getPresences()),ji(Fi,qi,me)}rs();
