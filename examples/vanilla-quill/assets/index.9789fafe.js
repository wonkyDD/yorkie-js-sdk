(function(){const he=document.createElement("link").relList;if(he&&he.supports&&he.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))C(k);new MutationObserver(k=>{for(const _ of k)if(_.type==="childList")for(const x of _.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&C(x)}).observe(document,{childList:!0,subtree:!0});function $(k){const _={};return k.integrity&&(_.integrity=k.integrity),k.referrerpolicy&&(_.referrerPolicy=k.referrerpolicy),k.crossorigin==="use-credentials"?_.credentials="include":k.crossorigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function C(k){if(k.ep)return;k.ep=!0;const _=$(k);fetch(k.href,_)}})();var Su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vs($e){return $e&&$e.__esModule&&Object.prototype.hasOwnProperty.call($e,"default")?$e.default:$e}var bi={exports:{}};(function($e,he){(function($,C){C(he)})(Su,function($){var C=Object.defineProperty,k=(n,e,t)=>e in n?C(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_=(n,e,t)=>(k(n,typeof e!="symbol"?e+"":e,t),t),x;(function(n){n[n.Canceled=1]="Canceled",n[n.Unknown=2]="Unknown",n[n.InvalidArgument=3]="InvalidArgument",n[n.DeadlineExceeded=4]="DeadlineExceeded",n[n.NotFound=5]="NotFound",n[n.AlreadyExists=6]="AlreadyExists",n[n.PermissionDenied=7]="PermissionDenied",n[n.ResourceExhausted=8]="ResourceExhausted",n[n.FailedPrecondition=9]="FailedPrecondition",n[n.Aborted=10]="Aborted",n[n.OutOfRange=11]="OutOfRange",n[n.Unimplemented=12]="Unimplemented",n[n.Internal=13]="Internal",n[n.Unavailable=14]="Unavailable",n[n.DataLoss=15]="DataLoss",n[n.Unauthenticated=16]="Unauthenticated"})(x||(x={}));function w(n,e){if(!n)throw new Error(e)}const T=34028234663852886e22,S=-34028234663852886e22,b=4294967295,h=2147483647,u=-2147483648;function l(n){if(typeof n!="number")throw new Error("invalid int 32: "+typeof n);if(!Number.isInteger(n)||n>h||n<u)throw new Error("invalid int 32: "+n)}function d(n){if(typeof n!="number")throw new Error("invalid uint 32: "+typeof n);if(!Number.isInteger(n)||n>b||n<0)throw new Error("invalid uint 32: "+n)}function g(n){if(typeof n!="number")throw new Error("invalid float 32: "+typeof n);if(!!Number.isFinite(n)&&(n>T||n<S))throw new Error("invalid float 32: "+n)}const m=Symbol("@bufbuild/protobuf/enum-type");function f(n){const e=n[m];return w(e,"missing enum type on enum object"),e}function a(n,e,t,r){n[m]=c(e,t.map(i=>({no:i.no,name:i.name,localName:n[i.no]})))}function c(n,e,t){const r=Object.create(null),i=Object.create(null),o=[];for(const p of e){const O=v(p);o.push(O),r[p.name]=O,i[p.no]=O}return{typeName:n,values:o,findName(p){return r[p]},findNumber(p){return i[p]}}}function s(n,e,t){const r={};for(const i of e){const o=v(i);r[o.localName]=o.no,r[o.no]=o.localName}return a(r,n,e),r}function v(n){return"localName"in n?n:Object.assign(Object.assign({},n),{localName:n.name})}class y{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(t);return i.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,t){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(t);return i.readMessage(r,e,o,this),this}fromJsonString(e,t){let r;try{r=JSON.parse(e)}catch(i){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${i instanceof Error?i.message:String(i)}`)}return this.fromJson(r,t)}toBinary(e){const t=this.getType(),r=t.runtime.bin,i=r.makeWriteOptions(e),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(e){const t=this.getType(),r=t.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function A(n,e,t,r){var i;const o=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),p={[o]:function(O){n.util.initFields(this),n.util.initPartial(O,this)}}[o];return Object.setPrototypeOf(p.prototype,new y),Object.assign(p,{runtime:n,typeName:e,fields:n.util.newFieldList(t),fromBinary(O,P){return new p().fromBinary(O,P)},fromJson(O,P){return new p().fromJson(O,P)},fromJsonString(O,P){return new p().fromJsonString(O,P)},equals(O,P){return n.util.equals(p,O,P)}}),p}function D(n,e,t,r){return{syntax:n,json:e,bin:t,util:r,makeMessageType(i,o,p){return A(this,i,o,p)},makeEnum:s,makeEnumType:c,getEnumType:f}}var E;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(E||(E={}));var I;(function(n){n[n.BIGINT=0]="BIGINT",n[n.STRING=1]="STRING"})(I||(I={}));function N(){let n=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(n|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[n,e]}let t=this.buf[this.pos++];if(n|=(t&15)<<28,e=(t&112)>>4,(t&128)==0)return this.assertBounds(),[n,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,(i&128)==0)return this.assertBounds(),[n,e]}throw new Error("invalid varint")}function R(n,e,t){for(let o=0;o<28;o=o+7){const p=n>>>o,O=!(p>>>7==0&&e==0),P=(O?p|128:p)&255;if(t.push(P),!O)return}const r=n>>>28&15|(e&7)<<4,i=e>>3!=0;if(t.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const p=e>>>o,O=p>>>7!=0,P=(O?p|128:p)&255;if(t.push(P),!O)return}t.push(e>>>31&1)}}const L=4294967296;function M(n){const e=n[0]==="-";e&&(n=n.slice(1));const t=1e6;let r=0,i=0;function o(p,O){const P=Number(n.slice(p,O));i*=t,r=r*t+P,r>=L&&(i=i+(r/L|0),r=r%L)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?Z(r,i):ue(r,i)}function q(n,e){let t=ue(n,e);const r=t.hi&2147483648;r&&(t=Z(t.lo,t.hi));const i=V(t.lo,t.hi);return r?"-"+i:i}function V(n,e){if({lo:n,hi:e}=X(n,e),e<=2097151)return String(L*e+n);const t=n&16777215,r=(n>>>24|e<<8)&16777215,i=e>>16&65535;let o=t+r*6777216+i*6710656,p=r+i*8147497,O=i*2;const P=1e7;return o>=P&&(p+=Math.floor(o/P),o%=P),p>=P&&(O+=Math.floor(p/P),p%=P),O.toString()+z(p)+z(o)}function X(n,e){return{lo:n>>>0,hi:e>>>0}}function ue(n,e){return{lo:n|0,hi:e|0}}function Z(n,e){return e=~e,n?n=~n+1:e+=1,ue(n,e)}const z=n=>{const e=String(n);return"0000000".slice(e.length)+e};function j(n,e){if(n>=0){for(;n>127;)e.push(n&127|128),n=n>>>7;e.push(n)}else{for(let t=0;t<9;t++)e.push(n&127|128),n=n>>7;e.push(1)}}function F(){let n=this.buf[this.pos++],e=n&127;if((n&128)==0)return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<7,(n&128)==0)return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<14,(n&128)==0)return this.assertBounds(),e;if(n=this.buf[this.pos++],e|=(n&127)<<21,(n&128)==0)return this.assertBounds(),e;n=this.buf[this.pos++],e|=(n&15)<<28;for(let t=5;(n&128)!==0&&t<10;t++)n=this.buf[this.pos++];if((n&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function J(){const n=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof n.getBigInt64=="function"&&typeof n.getBigUint64=="function"&&typeof n.setBigInt64=="function"&&typeof n.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),p=BigInt("0"),O=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(P){const B=typeof P=="bigint"?P:BigInt(P);if(B>o||B<i)throw new Error(`int64 invalid: ${P}`);return B},uParse(P){const B=typeof P=="bigint"?P:BigInt(P);if(B>O||B<p)throw new Error(`uint64 invalid: ${P}`);return B},enc(P){return n.setBigInt64(0,this.parse(P),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},uEnc(P){return n.setBigInt64(0,this.uParse(P),!0),{lo:n.getInt32(0,!0),hi:n.getInt32(4,!0)}},dec(P,B){return n.setInt32(0,P,!0),n.setInt32(4,B,!0),n.getBigInt64(0,!0)},uDec(P,B){return n.setInt32(0,P,!0),n.setInt32(4,B,!0),n.getBigUint64(0,!0)}}}const t=i=>w(/^-?[0-9]+$/.test(i),`int64 invalid: ${i}`),r=i=>w(/^[0-9]+$/.test(i),`uint64 invalid: ${i}`);return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),t(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),t(i),M(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),M(i)},dec(i,o){return q(i,o)},uDec(i,o){return V(i,o)}}}const Q=J();var W;(function(n){n[n.Varint=0]="Varint",n[n.Bit64=1]="Bit64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Bit32=5]="Bit32"})(W||(W={}));class U{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(d(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return l(e),j(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){g(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){d(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){l(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return l(e),e=(e<<1^e>>31)>>>0,j(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=Q.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),i=Q.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=Q.enc(e);return R(t.lo,t.hi,this.buf),this}sint64(e){let t=Q.enc(e),r=t.hi>>31,i=t.lo<<1^r,o=(t.hi<<1|t.lo>>>31)^r;return R(i,o,this.buf),this}uint64(e){let t=Q.uEnc(e);return R(t.lo,t.hi,this.buf),this}}class H{constructor(e,t){this.varint64=N,this.uint32=F,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t!=null?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=e&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e){let t=this.pos;switch(e){case W.Varint:for(;this.buf[this.pos++]&128;);break;case W.Bit64:this.pos+=4;case W.Bit32:this.pos+=4;break;case W.LengthDelimited:let r=this.uint32();this.pos+=r;break;case W.StartGroup:let i;for(;(i=this.tag()[1])!==W.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Q.dec(...this.varint64())}uint64(){return Q.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(e&1);return e=(e>>>1|(t&1)<<31)^r,t=t>>>1^r,Q.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Q.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Q.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function re(n,e){return e instanceof y||!n.fieldWrapper?e:n.fieldWrapper.wrapField(e)}function ae(n){if(n.fieldKind==="message"&&!n.repeated&&n.oneof==null)return ve[n.message.typeName]}const ve={"google.protobuf.DoubleValue":E.DOUBLE,"google.protobuf.FloatValue":E.FLOAT,"google.protobuf.Int64Value":E.INT64,"google.protobuf.UInt64Value":E.UINT64,"google.protobuf.Int32Value":E.INT32,"google.protobuf.UInt32Value":E.UINT32,"google.protobuf.BoolValue":E.BOOL,"google.protobuf.StringValue":E.STRING,"google.protobuf.BytesValue":E.BYTES};function Te(n,e,t){if(e===t)return!0;if(n==E.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==t}return!1}function De(n,e){switch(n){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return e==0?Q.zero:"0";case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}function Pe(n,e){const t=e===void 0;let r=W.Varint,i=e===0;switch(n){case E.STRING:i=t||!e.length,r=W.LengthDelimited;break;case E.BOOL:i=e===!1;break;case E.DOUBLE:r=W.Bit64;break;case E.FLOAT:r=W.Bit32;break;case E.INT64:i=t||e==0;break;case E.UINT64:i=t||e==0;break;case E.FIXED64:i=t||e==0,r=W.Bit64;break;case E.BYTES:i=t||!e.byteLength,r=W.LengthDelimited;break;case E.FIXED32:r=W.Bit32;break;case E.SFIXED32:r=W.Bit32;break;case E.SFIXED64:i=t||e==0,r=W.Bit64;break;case E.SINT64:i=t||e==0;break}const o=E[n].toLowerCase();return[r,o,t||i]}const Ie=Symbol("@bufbuild/protobuf/unknown-fields"),G={readUnknownFields:!0,readerFactory:n=>new H(n)},le={writeUnknownFields:!0,writerFactory:()=>new U};function oe(n){return n?Object.assign(Object.assign({},G),n):G}function Y(n){return n?Object.assign(Object.assign({},le),n):le}function ie(){return{makeReadOptions:oe,makeWriteOptions:Y,listUnknownFields(n){var e;return(e=n[Ie])!==null&&e!==void 0?e:[]},discardUnknownFields(n){delete n[Ie]},writeUnknownFields(n,e){const r=n[Ie];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(n,e,t,r){const i=n;Array.isArray(i[Ie])||(i[Ie]=[]),i[Ie].push({no:e,wireType:t,data:r})},readMessage(n,e,t,r,i){const o=n.getType(),p=i?e.len:e.pos+t;let O,P;for(;e.pos<p&&([O,P]=e.tag(),P!=W.EndGroup);){const B=o.fields.find(O);if(!B){const me=e.skip(P);r.readUnknownFields&&this.onUnknownField(n,O,P,me);continue}let K=n,pe=B.repeated,ne=B.localName;switch(B.oneof&&(K=K[B.oneof.localName],K.case!=ne&&delete K.value,K.case=ne,ne="value"),B.kind){case"scalar":case"enum":const me=B.kind=="enum"?E.INT32:B.T;let Ne=ke;if(B.kind=="scalar"&&B.L>0&&(Ne=de),pe){let At=K[ne];if(P==W.LengthDelimited&&me!=E.STRING&&me!=E.BYTES){let gt=e.uint32()+e.pos;for(;e.pos<gt;)At.push(Ne(e,me))}else At.push(Ne(e,me))}else K[ne]=Ne(e,me);break;case"message":const Me=B.T;pe?K[ne].push(ge(e,new Me,r,B)):K[ne]instanceof y?ge(e,K[ne],r,B):(K[ne]=ge(e,new Me,r,B),Me.fieldWrapper&&!B.oneof&&!B.repeated&&(K[ne]=Me.fieldWrapper.unwrapField(K[ne])));break;case"map":let[qe,ht]=be(B,e,r);K[ne][qe]=ht;break}}if(i&&(P!=W.EndGroup||O!==t))throw new Error("invalid end group tag")}}}function ge(n,e,t,r){const i=e.getType().runtime.bin,o=r==null?void 0:r.delimited;return i.readMessage(e,n,o?r==null?void 0:r.no:n.uint32(),t,o),e}function be(n,e,t){const r=e.uint32(),i=e.pos+r;let o,p;for(;e.pos<i;){let[O]=e.tag();switch(O){case 1:o=ke(e,n.K);break;case 2:switch(n.V.kind){case"scalar":p=ke(e,n.V.T);break;case"enum":p=e.int32();break;case"message":p=ge(e,new n.V.T,t,void 0);break}break}}if(o===void 0){let O=De(n.K,I.BIGINT);o=n.K==E.BOOL?O.toString():O}if(typeof o!="string"&&typeof o!="number"&&(o=o.toString()),p===void 0)switch(n.V.kind){case"scalar":p=De(n.V.T,I.BIGINT);break;case"enum":p=0;break;case"message":p=new n.V.T;break}return[o,p]}function de(n,e){const t=ke(n,e);return typeof t=="bigint"?t.toString():t}function ke(n,e){switch(e){case E.STRING:return n.string();case E.BOOL:return n.bool();case E.DOUBLE:return n.double();case E.FLOAT:return n.float();case E.INT32:return n.int32();case E.INT64:return n.int64();case E.UINT64:return n.uint64();case E.FIXED64:return n.fixed64();case E.BYTES:return n.bytes();case E.FIXED32:return n.fixed32();case E.SFIXED32:return n.sfixed32();case E.SFIXED64:return n.sfixed64();case E.SINT64:return n.sint64();case E.UINT32:return n.uint32();case E.SINT32:return n.sint32()}}function Re(n,e,t,r,i){n.tag(t.no,W.LengthDelimited),n.fork();let o=r;switch(t.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:o=Number.parseInt(r);break;case E.BOOL:w(r=="true"||r=="false"),o=r=="true";break}switch(nt(n,t.K,1,o,!0),t.V.kind){case"scalar":nt(n,t.V.T,2,i,!0);break;case"enum":nt(n,E.INT32,2,i,!0);break;case"message":n.tag(2,W.LengthDelimited).bytes(i.toBinary(e));break}n.join()}function je(n,e,t,r){if(r!==void 0){const i=re(t.T,r);t!=null&&t.delimited?n.tag(t.no,W.StartGroup).raw(i.toBinary(e)).tag(t.no,W.EndGroup):n.tag(t.no,W.LengthDelimited).bytes(i.toBinary(e))}}function nt(n,e,t,r,i){let[o,p,O]=Pe(e,r);(!O||i)&&n.tag(t,o)[p](r)}function lt(n,e,t,r){if(!r.length)return;n.tag(t,W.LengthDelimited).fork();let[,i]=Pe(e);for(let o=0;o<r.length;o++)n[i](r[o]);n.join()}function Ge(){return Object.assign(Object.assign({},ie()),{writeMessage(n,e,t){const r=n.getType();for(const i of r.fields.byNumber()){let o,p=i.repeated,O=i.localName;if(i.oneof){const P=n[i.oneof.localName];if(P.case!==O)continue;o=P.value}else o=n[O];switch(i.kind){case"scalar":case"enum":let P=i.kind=="enum"?E.INT32:i.T;if(p)if(i.packed)lt(e,P,i.no,o);else for(const B of o)nt(e,P,i.no,B,!0);else o!==void 0&&nt(e,P,i.no,o,!!i.oneof||i.opt);break;case"message":if(p)for(const B of o)je(e,t,i,B);else je(e,t,i,o);break;case"map":for(const[B,K]of Object.entries(o))Re(e,t,i,B,K);break}}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e}})}let Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),_e=[];for(let n=0;n<Ye.length;n++)_e[Ye[n].charCodeAt(0)]=n;_e["-".charCodeAt(0)]=Ye.indexOf("+"),_e["_".charCodeAt(0)]=Ye.indexOf("/");const Qe={dec(n){let e=n.length*3/4;n[n.length-2]=="="?e-=2:n[n.length-1]=="="&&(e-=1);let t=new Uint8Array(e),r=0,i=0,o,p=0;for(let O=0;O<n.length;O++){if(o=_e[n.charCodeAt(O)],o===void 0)switch(n[O]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:p=o,i=1;break;case 1:t[r++]=p<<2|(o&48)>>4,p=o,i=2;break;case 2:t[r++]=(p&15)<<4|(o&60)>>2,p=o,i=3;break;case 3:t[r++]=(p&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return t.subarray(0,r)},enc(n){let e="",t=0,r,i=0;for(let o=0;o<n.length;o++)switch(r=n[o],t){case 0:e+=Ye[r>>2],i=(r&3)<<4,t=1;break;case 1:e+=Ye[i|r>>4],i=(r&15)<<2,t=2;break;case 2:e+=Ye[i|r>>6],e+=Ye[r&63],t=0;break}return t&&(e+=Ye[i],e+="=",t==1&&(e+="=")),e}},zt={ignoreUnknownFields:!1},bn={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Kt(n){return n?Object.assign(Object.assign({},zt),n):zt}function Tn(n){return n?Object.assign(Object.assign({},bn),n):bn}function en(n){const e=n(kt,Xt);return{makeReadOptions:Kt,makeWriteOptions:Tn,readMessage(t,r,i,o){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error(`cannot decode message ${t.typeName} from JSON: ${this.debug(r)}`);o=o!=null?o:new t;const p={};for(const[O,P]of Object.entries(r)){const B=t.fields.findJsonName(O);if(!B){if(!i.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${O}" is unknown`);continue}let K=B.localName,pe=o;if(B.oneof){if(P===null&&B.kind=="scalar")continue;const ne=p[B.oneof.localName];if(ne)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${B.oneof.name}" present: "${ne}", "${O}"`);p[B.oneof.localName]=O,pe=pe[B.oneof.localName]={case:K},K="value"}if(B.repeated){if(P===null)continue;if(!Array.isArray(P))throw new Error(`cannot decode field ${t.typeName}.${B.name} from JSON: ${this.debug(P)}`);const ne=pe[K];for(const me of P){if(me===null)throw new Error(`cannot decode field ${t.typeName}.${B.name} from JSON: ${this.debug(me)}`);let Ne;switch(B.kind){case"message":Ne=B.T.fromJson(me,i);break;case"enum":if(Ne=tn(B.T,me,i.ignoreUnknownFields),Ne===void 0)continue;break;case"scalar":try{Ne=Dt(B.T,me,B.L)}catch(Me){let qe=`cannot decode field ${t.typeName}.${B.name} from JSON: ${this.debug(me)}`;throw Me instanceof Error&&Me.message.length>0&&(qe+=`: ${Me.message}`),new Error(qe)}break}ne.push(Ne)}}else if(B.kind=="map"){if(P===null)continue;if(Array.isArray(P)||typeof P!="object")throw new Error(`cannot decode field ${t.typeName}.${B.name} from JSON: ${this.debug(P)}`);const ne=pe[K];for(const[me,Ne]of Object.entries(P)){if(Ne===null)throw new Error(`cannot decode field ${t.typeName}.${B.name} from JSON: map value null`);let Me;switch(B.V.kind){case"message":Me=B.V.T.fromJson(Ne,i);break;case"enum":if(Me=tn(B.V.T,Ne,i.ignoreUnknownFields),Me===void 0)continue;break;case"scalar":try{Me=Dt(B.V.T,Ne,I.BIGINT)}catch(qe){let ht=`cannot decode map value for field ${t.typeName}.${B.name} from JSON: ${this.debug(P)}`;throw qe instanceof Error&&qe.message.length>0&&(ht+=`: ${qe.message}`),new Error(ht)}break}try{ne[Dt(B.K,B.K==E.BOOL?me=="true"?!0:me=="false"?!1:me:me,I.BIGINT).toString()]=Me}catch(qe){let ht=`cannot decode map key for field ${t.typeName}.${B.name} from JSON: ${this.debug(P)}`;throw qe instanceof Error&&qe.message.length>0&&(ht+=`: ${qe.message}`),new Error(ht)}}}else switch(B.kind){case"message":const ne=B.T;if(P===null&&ne.typeName!="google.protobuf.Value"){if(B.oneof)throw new Error(`cannot decode field ${t.typeName}.${B.name} from JSON: null is invalid for oneof field "${O}"`);continue}pe[K]instanceof y?pe[K].fromJson(P,i):(pe[K]=ne.fromJson(P,i),ne.fieldWrapper&&!B.oneof&&(pe[K]=ne.fieldWrapper.unwrapField(pe[K])));break;case"enum":const me=tn(B.T,P,i.ignoreUnknownFields);me!==void 0&&(pe[K]=me);break;case"scalar":try{pe[K]=Dt(B.T,P,B.L)}catch(Ne){let Me=`cannot decode field ${t.typeName}.${B.name} from JSON: ${this.debug(P)}`;throw Ne instanceof Error&&Ne.message.length>0&&(Me+=`: ${Ne.message}`),new Error(Me)}break}}return o},writeMessage(t,r){const i=t.getType(),o={};let p;try{for(const O of i.fields.byMember()){let P;if(O.kind=="oneof"){const B=t[O.localName];if(B.value===void 0)continue;if(p=O.findField(B.case),!p)throw"oneof case not found: "+B.case;P=e(p,B.value,r)}else p=O,P=e(p,t[p.localName],r);P!==void 0&&(o[r.useProtoFieldName?p.name:p.jsonName]=P)}}catch(O){const P=p?`cannot encode field ${i.typeName}.${p.name} to JSON`:`cannot encode message ${i.typeName} to JSON`,B=O instanceof Error?O.message:String(O);throw new Error(P+(B.length>0?`: ${B}`:""))}return o},readScalar:Dt,writeScalar:Xt,debug:Ht}}function Ht(n){if(n===null)return"null";switch(typeof n){case"object":return Array.isArray(n)?"array":"object";case"string":return n.length>100?"string":`"${n.split('"').join('\\"')}"`;default:return String(n)}}function Dt(n,e,t){switch(n){case E.DOUBLE:case E.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return n==E.FLOAT&&g(r),r;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:if(e===null)return 0;let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return n==E.UINT32?d(i):l(i),i;case E.INT64:case E.SFIXED64:case E.SINT64:if(e===null)return Q.zero;if(typeof e!="number"&&typeof e!="string")break;const o=Q.parse(e);return t?o.toString():o;case E.FIXED64:case E.UINT64:if(e===null)return Q.zero;if(typeof e!="number"&&typeof e!="string")break;const p=Q.uParse(e);return t?p.toString():p;case E.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case E.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case E.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return Qe.dec(e)}throw new Error}function tn(n,e,t){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=n.findName(e);if(r||t)return r==null?void 0:r.no;break}throw new Error(`cannot decode enum ${n.typeName} from JSON: ${Ht(e)}`)}function kt(n,e,t,r){var i;if(e===void 0)return e;if(e===0&&!t)return;if(r)return e;if(n.typeName=="google.protobuf.NullValue")return null;const o=n.findNumber(e);return(i=o==null?void 0:o.name)!==null&&i!==void 0?i:e}function Xt(n,e,t){if(e!==void 0)switch(n){case E.INT32:case E.SFIXED32:case E.SINT32:case E.FIXED32:case E.UINT32:return w(typeof e=="number"),e!=0||t?e:void 0;case E.FLOAT:case E.DOUBLE:return w(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||t?e:void 0;case E.STRING:return w(typeof e=="string"),e.length>0||t?e:void 0;case E.BOOL:return w(typeof e=="boolean"),e||t?e:void 0;case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:return w(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),t||e!=0?e.toString(10):void 0;case E.BYTES:return w(e instanceof Uint8Array),t||e.byteLength>0?Qe.enc(e):void 0}}function nn(){return en((n,e)=>function(r,i,o){if(r.kind=="map"){const p={};switch(r.V.kind){case"scalar":for(const[P,B]of Object.entries(i)){const K=e(r.V.T,B,!0);w(K!==void 0),p[P.toString()]=K}break;case"message":for(const[P,B]of Object.entries(i))p[P.toString()]=B.toJson(o);break;case"enum":const O=r.V.T;for(const[P,B]of Object.entries(i)){w(B===void 0||typeof B=="number");const K=n(O,B,!0,o.enumAsInteger);w(K!==void 0),p[P.toString()]=K}break}return o.emitDefaultValues||Object.keys(p).length>0?p:void 0}else if(r.repeated){const p=[];switch(r.kind){case"scalar":for(let O=0;O<i.length;O++)p.push(e(r.T,i[O],!0));break;case"enum":for(let O=0;O<i.length;O++)p.push(n(r.T,i[O],!0,o.enumAsInteger));break;case"message":for(let O=0;O<i.length;O++)p.push(re(r.T,i[O]).toJson(o));break}return o.emitDefaultValues||p.length>0?p:void 0}else switch(r.kind){case"scalar":return e(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues);case"enum":return n(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return i!==void 0?re(r.T,i).toJson(o):void 0}})}function Fr(){return{setEnumType:a,initPartial(n,e){if(n===void 0)return;const t=e.getType();for(const r of t.fields.byMember()){const i=r.localName,o=e,p=n;if(p[i]!==void 0)switch(r.kind){case"oneof":const O=p[i].case;if(O===void 0)continue;const P=r.findField(O);let B=p[i].value;P&&P.kind=="message"&&!(B instanceof P.T)?B=new P.T(B):P&&P.kind==="scalar"&&P.T===E.BYTES&&(B=Pn(B)),o[i]={case:O,value:B};break;case"scalar":case"enum":let K=p[i];r.T===E.BYTES&&(K=r.repeated?K.map(Pn):Pn(K)),o[i]=K;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===E.BYTES)for(const[me,Ne]of Object.entries(p[i]))o[i][me]=Pn(Ne);else Object.assign(o[i],p[i]);break;case"message":const ne=r.V.T;for(const me of Object.keys(p[i])){let Ne=p[i][me];ne.fieldWrapper||(Ne=new ne(Ne)),o[i][me]=Ne}break}break;case"message":const pe=r.T;if(r.repeated)o[i]=p[i].map(ne=>ne instanceof pe?ne:new pe(ne));else if(p[i]!==void 0){const ne=p[i];pe.fieldWrapper?pe.typeName==="google.protobuf.BytesValue"?o[i]=Pn(ne):o[i]=ne:o[i]=ne instanceof pe?ne:new pe(ne)}break}}},equals(n,e,t){return e===t?!0:!e||!t?!1:n.fields.byMember().every(r=>{const i=e[r.localName],o=t[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((p,O)=>r.T.equals(p,o[O]));case"scalar":return i.every((p,O)=>Te(r.T,p,o[O]));case"enum":return i.every((p,O)=>Te(E.INT32,p,o[O]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,o);case"enum":return Te(E.INT32,i,o);case"scalar":return Te(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const p=r.findField(i.case);if(p===void 0)return!0;switch(p.kind){case"message":return p.T.equals(i.value,o.value);case"enum":return Te(E.INT32,i.value,o.value);case"scalar":return Te(p.T,i.value,o.value)}throw new Error(`oneof cannot contain ${p.kind}`);case"map":const O=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const P=r.V.T;return O.every(K=>P.equals(i[K],o[K]));case"enum":return O.every(K=>Te(E.INT32,i[K],o[K]));case"scalar":const B=r.V.T;return O.every(K=>Te(B,i[K],o[K]))}break}})},clone(n){const e=n.getType(),t=new e,r=t;for(const i of e.fields.byMember()){const o=n[i.localName];let p;if(i.repeated)p=o.map(rn);else if(i.kind=="map"){p=r[i.localName];for(const[O,P]of Object.entries(o))p[O]=rn(P)}else i.kind=="oneof"?p=i.findField(o.case)?{case:o.case,value:rn(o.value)}:{case:void 0}:p=rn(o);r[i.localName]=p}return t}}}function rn(n){if(n===void 0)return n;if(n instanceof y)return n.clone();if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}function Pn(n){return n instanceof Uint8Array?n:new Uint8Array(n)}class sr{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const r of this.list())t[r.jsonName]=t[r.name]=r;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const r of this.list())t[r.no]=r;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}function $r(n){switch(n.kind){case"field":return ar(n.name,n.oneof!==void 0);case"oneof":return ri(n.name);case"enum":case"message":case"service":{const e=n.file.proto.package,t=e===void 0?0:e.length+1,r=n.typeName.substring(t).replace(/\./g,"_");return sn(wn(r))}case"enum_value":{const e=n.parent.sharedPrefix;if(e===void 0)return n.name;const t=n.name.substring(e.length);return sn(t)}case"rpc":{let e=n.name;return e.length==0?e:(e=e[0].toLowerCase()+e.substring(1),sn(e))}}}function ar(n,e){const t=Hn(n);return e?t:sn(Mi(t))}function ri(n){return ar(n,!1)}const gn=Hn;function Zt(n,e){const t=on(n)+"_";for(const r of e){if(!r.toLowerCase().startsWith(t))return;const i=r.substring(t.length);if(i.length==0||/^\d/.test(i))return}return t}function on(n){return(n.substring(0,1)+n.substring(1).replace(/[A-Z]/g,e=>"_"+e)).toLowerCase()}function Hn(n){let e=!1;const t=[];for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),t.push(i);break}}return t.join("")}const _n=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]),ii=new Set(["constructor","toString","toJSON","valueOf"]),En=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),lr=n=>`${n}$`,Mi=n=>En.has(n)?lr(n):n,sn=n=>ii.has(n)?lr(n):n,wn=n=>_n.has(n)?lr(n):n;class oi{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=ri(e)}addField(e){w(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}const ce=D("proto3",nn(),Ge(),Object.assign(Object.assign({},Fr()),{newFieldList(n){return new sr(n,Bi)},initFields(n){for(const e of n.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"enum":r[t]=0;break;case"map":r[t]={};break;case"scalar":r[t]=De(e.T,e.L);break}}}}));function Bi(n){var e,t,r,i;const o=[];let p;for(const O of typeof n=="function"?n():n){const P=O;if(P.localName=ar(O.name,O.oneof!==void 0),P.jsonName=(e=O.jsonName)!==null&&e!==void 0?e:gn(O.name),P.repeated=(t=O.repeated)!==null&&t!==void 0?t:!1,O.kind=="scalar"&&(P.L=(r=O.L)!==null&&r!==void 0?r:I.BIGINT),O.oneof!==void 0){const B=typeof O.oneof=="string"?O.oneof:O.oneof.name;(!p||p.name!=B)&&(p=new oi(B)),P.oneof=p,p.addField(P)}O.kind=="message"&&(P.delimited=!1),P.packed=(i=O.packed)!==null&&i!==void 0?i:O.kind=="enum"||O.kind=="scalar"&&O.T!=E.BYTES&&O.T!=E.STRING,o.push(P)}return o}function ur(){return Object.assign(Object.assign({},ie()),{writeMessage(n,e,t){const r=n.getType();let i;try{for(i of r.fields.byNumber()){let o,p=i.repeated,O=i.localName;if(i.oneof){const P=n[i.oneof.localName];if(P.case!==O)continue;o=P.value}else if(o=n[O],o===void 0&&!i.oneof&&!i.opt)throw new Error(`cannot encode field ${r.typeName}.${i.name} to binary: required field not set`);switch(i.kind){case"scalar":case"enum":let P=i.kind=="enum"?E.INT32:i.T;if(p)if(i.packed)lt(e,P,i.no,o);else for(const B of o)nt(e,P,i.no,B,!0);else o!==void 0&&nt(e,P,i.no,o,!0);break;case"message":if(p)for(const B of o)je(e,t,i,B);else je(e,t,i,o);break;case"map":for(const[B,K]of Object.entries(o))Re(e,t,i,B,K);break}}}catch(o){let p=i?`cannot encode field ${r.typeName}.${i==null?void 0:i.name} to binary`:`cannot encode message ${r.typeName} to binary`,O=o instanceof Error?o.message:String(o);throw new Error(p+(O.length>0?`: ${O}`:""))}return t.writeUnknownFields&&this.writeUnknownFields(n,e),e}})}function Rn(){return en((n,e)=>function(r,i,o){if(r.kind=="map"){const p={};switch(r.V.kind){case"scalar":for(const[P,B]of Object.entries(i)){const K=e(r.V.T,B,!0);w(K!==void 0),p[P.toString()]=K}break;case"message":for(const[P,B]of Object.entries(i))p[P.toString()]=B.toJson(o);break;case"enum":const O=r.V.T;for(const[P,B]of Object.entries(i)){w(B===void 0||typeof B=="number");const K=n(O,B,!0,o.enumAsInteger);w(K!==void 0),p[P.toString()]=K}break}return o.emitDefaultValues||Object.keys(p).length>0?p:void 0}else if(r.repeated){const p=[];switch(r.kind){case"scalar":for(let O=0;O<i.length;O++)p.push(e(r.T,i[O],!0));break;case"enum":for(let O=0;O<i.length;O++)p.push(n(r.T,i[O],!0,o.enumAsInteger));break;case"message":for(let O=0;O<i.length;O++)p.push(i[O].toJson(o));break}return o.emitDefaultValues||p.length>0?p:void 0}else{if(i===void 0){if(!r.oneof&&!r.opt)throw"required field not set";return}switch(r.kind){case"scalar":return e(r.T,i,!0);case"enum":return n(r.T,i,!0,o.enumAsInteger);case"message":return re(r.T,i).toJson(o)}}})}const te=D("proto2",Rn(),ur(),Object.assign(Object.assign({},Fr()),{newFieldList(n){return new sr(n,se)},initFields(n){for(const e of n.getType().fields.byMember()){const t=e.localName,r=n;if(e.repeated){r[t]=[];continue}switch(e.kind){case"oneof":r[t]={case:void 0};break;case"map":r[t]={};break}}}}));function se(n){var e,t,r,i,o;const p=[];let O;for(const P of typeof n=="function"?n():n){const B=P;if(B.localName=ar(P.name,P.oneof!==void 0),B.jsonName=(e=P.jsonName)!==null&&e!==void 0?e:gn(P.name),B.repeated=(t=P.repeated)!==null&&t!==void 0?t:!1,P.kind=="scalar"&&(B.L=(r=P.L)!==null&&r!==void 0?r:I.BIGINT),P.oneof!==void 0){const K=typeof P.oneof=="string"?P.oneof:P.oneof.name;(!O||O.name!=K)&&(O=new oi(K)),B.oneof=O,O.addField(B)}P.kind=="message"&&(B.delimited=(i=P.delimited)!==null&&i!==void 0?i:!1),B.packed=(o=P.packed)!==null&&o!==void 0?o:!1,p.push(B)}return p}const ye={NaN:Number.NaN,POSITIVE_INFINITY:Number.POSITIVE_INFINITY,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY};var Se=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(p){return new Promise(function(O,P){p=n[o](p),i(O,P,p.done,p.value)})}}function i(o,p,O,P){Promise.resolve(P).then(function(B){o({value:B,done:O})},p)}},Ce=globalThis&&globalThis.__await||function(n){return this instanceof Ce?(this.v=n,this):new Ce(n)},dt=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},O("next"),O("throw"),O("return",p),i[Symbol.asyncIterator]=function(){return this},i;function p(me){return function(Ne){return Promise.resolve(Ne).then(me,pe)}}function O(me,Ne){r[me]&&(i[me]=function(Me){return new Promise(function(qe,ht){o.push([me,Me,qe,ht])>1||P(me,Me)})},Ne&&(i[me]=Ne(i[me])))}function P(me,Ne){try{B(r[me](Ne))}catch(Me){ne(o[0][3],Me)}}function B(me){me.value instanceof Ce?Promise.resolve(me.value.v).then(K,pe):ne(o[0][2],me)}function K(me){P("next",me)}function pe(me){P("throw",me)}function ne(me,Ne){me(Ne),o.shift(),o.length&&P(o[0][0],o[0][1])}};const ot={enc(n,e){const t=ie().makeWriteOptions(e);return t.writerFactory().bytes(n.toBinary(t)).finish()},dec(n,e,t){const r=ie().makeReadOptions(t);return n.fromBinary(r.readerFactory(e).bytes(),r)},decStream(n,e){return dt(this,arguments,function*(){var r,i,o,p;function O(ne,me){const Ne=new Uint8Array(ne.byteLength+me.byteLength);return Ne.set(ne),Ne.set(me,ne.length),Ne}let P=new Uint8Array(0);try{for(var B=!0,K=Se(e),pe;pe=yield Ce(K.next()),r=pe.done,!r;B=!0)for(p=pe.value,B=!1,P=O(P,p);;){const me=ot.peekSize(P);if(me.eof||me.offset+me.size>P.byteLength)break;yield yield Ce(ot.dec(n,P)),P=P.subarray(me.offset+me.size)}}catch(ne){i={error:ne}}finally{try{!B&&!r&&(o=K.return)&&(yield Ce(o.call(K)))}finally{if(i)throw i.error}}if(P.byteLength>0)throw new Error("incomplete data")})},peekSize(n){const e={eof:!0,size:null,offset:null};for(let t=0;t<10;t++){if(t>n.byteLength)return e;if((n[t]&128)==0){const r=new H(n);let i;try{i=r.uint32()}catch(o){if(o instanceof RangeError)return e;throw o}return{eof:!1,size:i,offset:r.pos}}}throw new Error("invalid varint")}};function ee(n){switch(n.typeName){case"google.protobuf.Any":{const e=n.fields.find(r=>r.number==1&&r.fieldKind=="scalar"&&r.scalar===E.STRING),t=n.fields.find(r=>r.number==2&&r.fieldKind=="scalar"&&r.scalar===E.BYTES);if(e&&t)return{typeName:n.typeName,typeUrl:e,value:t};break}case"google.protobuf.Timestamp":{const e=n.fields.find(r=>r.number==1&&r.fieldKind=="scalar"&&r.scalar===E.INT64),t=n.fields.find(r=>r.number==2&&r.fieldKind=="scalar"&&r.scalar===E.INT32);if(e&&t)return{typeName:n.typeName,seconds:e,nanos:t};break}case"google.protobuf.Duration":{const e=n.fields.find(r=>r.number==1&&r.fieldKind=="scalar"&&r.scalar===E.INT64),t=n.fields.find(r=>r.number==2&&r.fieldKind=="scalar"&&r.scalar===E.INT32);if(e&&t)return{typeName:n.typeName,seconds:e,nanos:t};break}case"google.protobuf.Struct":{const e=n.fields.find(t=>t.number==1&&!t.repeated);if((e==null?void 0:e.fieldKind)!=="map"||e.mapValue.kind!=="message"||e.mapValue.message.typeName!=="google.protobuf.Value")break;return{typeName:n.typeName,fields:e}}case"google.protobuf.Value":{const e=n.oneofs.find(P=>P.name==="kind"),t=n.fields.find(P=>P.number==1&&P.oneof===e);if((t==null?void 0:t.fieldKind)!=="enum"||t.enum.typeName!=="google.protobuf.NullValue")return;const r=n.fields.find(P=>P.number==2&&P.fieldKind=="scalar"&&P.scalar===E.DOUBLE&&P.oneof===e),i=n.fields.find(P=>P.number==3&&P.fieldKind=="scalar"&&P.scalar===E.STRING&&P.oneof===e),o=n.fields.find(P=>P.number==4&&P.fieldKind=="scalar"&&P.scalar===E.BOOL&&P.oneof===e),p=n.fields.find(P=>P.number==5&&P.oneof===e);if((p==null?void 0:p.fieldKind)!=="message"||p.message.typeName!=="google.protobuf.Struct")return;const O=n.fields.find(P=>P.number==6&&P.oneof===e);if((O==null?void 0:O.fieldKind)!=="message"||O.message.typeName!=="google.protobuf.ListValue")return;if(e&&r&&i&&o)return{typeName:n.typeName,kind:e,nullValue:t,numberValue:r,stringValue:i,boolValue:o,structValue:p,listValue:O};break}case"google.protobuf.ListValue":{const e=n.fields.find(t=>t.number==1&&t.repeated);if((e==null?void 0:e.fieldKind)!="message"||e.message.typeName!=="google.protobuf.Value")break;return{typeName:n.typeName,values:e}}case"google.protobuf.FieldMask":{const e=n.fields.find(t=>t.number==1&&t.fieldKind=="scalar"&&t.scalar===E.STRING&&t.repeated);if(e)return{typeName:n.typeName,paths:e};break}case"google.protobuf.DoubleValue":case"google.protobuf.FloatValue":case"google.protobuf.Int64Value":case"google.protobuf.UInt64Value":case"google.protobuf.Int32Value":case"google.protobuf.UInt32Value":case"google.protobuf.BoolValue":case"google.protobuf.StringValue":case"google.protobuf.BytesValue":{const e=n.fields.find(t=>t.number==1&&t.name=="value");if(!e||e.fieldKind!=="scalar")break;return{typeName:n.typeName,value:e}}}}const fe="@bufbuild/protobuf",Ae={packageName:"@bufbuild/protobuf",localName:$r,reifyWkt:ee,getUnwrappedFieldType:ae,scalarDefaultValue:De,safeIdentifier:wn,safeObjectProperty:sn,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:fe},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:fe},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:fe},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:fe},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:fe},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:fe},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:fe},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:fe},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:fe},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:fe},protoDouble:{typeOnly:!1,privateImportPath:"./proto-double.js",publicImportPath:fe},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:fe},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:fe},LongType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:fe},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:fe},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:fe},IMessageTypeRegistry:{typeOnly:!0,privateImportPath:"./type-registry.js",publicImportPath:fe}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]};var xe;(function(n){n[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming"})(xe||(xe={}));var et;(function(n){n[n.NoSideEffects=1]="NoSideEffects",n[n.Idempotent=2]="Idempotent"})(et||(et={}));var Ue;(function(n){n[n.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",n[n.EDITION_PROTO2=998]="EDITION_PROTO2",n[n.EDITION_PROTO3=999]="EDITION_PROTO3",n[n.EDITION_2023=1e3]="EDITION_2023",n[n.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",n[n.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",n[n.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",n[n.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",n[n.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY"})(Ue||(Ue={})),te.util.setEnumType(Ue,"google.protobuf.Edition",[{no:0,name:"EDITION_UNKNOWN"},{no:998,name:"EDITION_PROTO2"},{no:999,name:"EDITION_PROTO3"},{no:1e3,name:"EDITION_2023"},{no:1,name:"EDITION_1_TEST_ONLY"},{no:2,name:"EDITION_2_TEST_ONLY"},{no:99997,name:"EDITION_99997_TEST_ONLY"},{no:99998,name:"EDITION_99998_TEST_ONLY"},{no:99999,name:"EDITION_99999_TEST_ONLY"}]);class ut extends y{constructor(e){super(),this.file=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new ut().fromBinary(e,t)}static fromJson(e,t){return new ut().fromJson(e,t)}static fromJsonString(e,t){return new ut().fromJsonString(e,t)}static equals(e,t){return te.util.equals(ut,e,t)}}ut.runtime=te,ut.typeName="google.protobuf.FileDescriptorSet",ut.fields=te.util.newFieldList(()=>[{no:1,name:"file",kind:"message",T:He,repeated:!0}]);class He extends y{constructor(e){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new He().fromBinary(e,t)}static fromJson(e,t){return new He().fromJson(e,t)}static fromJsonString(e,t){return new He().fromJsonString(e,t)}static equals(e,t){return te.util.equals(He,e,t)}}He.runtime=te,He.typeName="google.protobuf.FileDescriptorProto",He.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:mt,repeated:!0},{no:5,name:"enum_type",kind:"message",T:Nt,repeated:!0},{no:6,name:"service",kind:"message",T:vt,repeated:!0},{no:7,name:"extension",kind:"message",T:st,repeated:!0},{no:8,name:"options",kind:"message",T:jt,opt:!0},{no:9,name:"source_code_info",kind:"message",T:mr,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0},{no:14,name:"edition",kind:"enum",T:te.getEnumType(Ue),opt:!0}]);class mt extends y{constructor(e){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new mt().fromBinary(e,t)}static fromJson(e,t){return new mt().fromJson(e,t)}static fromJsonString(e,t){return new mt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(mt,e,t)}}mt.runtime=te,mt.typeName="google.protobuf.DescriptorProto",mt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:st,repeated:!0},{no:6,name:"extension",kind:"message",T:st,repeated:!0},{no:3,name:"nested_type",kind:"message",T:mt,repeated:!0},{no:4,name:"enum_type",kind:"message",T:Nt,repeated:!0},{no:5,name:"extension_range",kind:"message",T:pt,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:rt,repeated:!0},{no:7,name:"options",kind:"message",T:Jt,opt:!0},{no:9,name:"reserved_range",kind:"message",T:Rt,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class pt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new pt().fromBinary(e,t)}static fromJson(e,t){return new pt().fromJson(e,t)}static fromJsonString(e,t){return new pt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(pt,e,t)}}pt.runtime=te,pt.typeName="google.protobuf.DescriptorProto.ExtensionRange",pt.fields=te.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:Ct,opt:!0}]);class Rt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new Rt().fromBinary(e,t)}static fromJson(e,t){return new Rt().fromJson(e,t)}static fromJsonString(e,t){return new Rt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Rt,e,t)}}Rt.runtime=te,Rt.typeName="google.protobuf.DescriptorProto.ReservedRange",Rt.fields=te.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class Ct extends y{constructor(e){super(),this.uninterpretedOption=[],this.declaration=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Ct().fromBinary(e,t)}static fromJson(e,t){return new Ct().fromJson(e,t)}static fromJsonString(e,t){return new Ct().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Ct,e,t)}}Ct.runtime=te,Ct.typeName="google.protobuf.ExtensionRangeOptions",Ct.fields=te.util.newFieldList(()=>[{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0},{no:2,name:"declaration",kind:"message",T:Je,repeated:!0},{no:50,name:"features",kind:"message",T:It,opt:!0},{no:3,name:"verification",kind:"enum",T:te.getEnumType(an),opt:!0,default:an.UNVERIFIED}]);var an;(function(n){n[n.DECLARATION=0]="DECLARATION",n[n.UNVERIFIED=1]="UNVERIFIED"})(an||(an={})),te.util.setEnumType(an,"google.protobuf.ExtensionRangeOptions.VerificationState",[{no:0,name:"DECLARATION"},{no:1,name:"UNVERIFIED"}]);class Je extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new Je().fromBinary(e,t)}static fromJson(e,t){return new Je().fromJson(e,t)}static fromJsonString(e,t){return new Je().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Je,e,t)}}Je.runtime=te,Je.typeName="google.protobuf.ExtensionRangeOptions.Declaration",Je.fields=te.util.newFieldList(()=>[{no:1,name:"number",kind:"scalar",T:5,opt:!0},{no:2,name:"full_name",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"scalar",T:9,opt:!0},{no:5,name:"reserved",kind:"scalar",T:8,opt:!0},{no:6,name:"repeated",kind:"scalar",T:8,opt:!0}]);class st extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new st().fromBinary(e,t)}static fromJson(e,t){return new st().fromJson(e,t)}static fromJsonString(e,t){return new st().fromJsonString(e,t)}static equals(e,t){return te.util.equals(st,e,t)}}st.runtime=te,st.typeName="google.protobuf.FieldDescriptorProto",st.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:te.getEnumType(Xe),opt:!0},{no:5,name:"type",kind:"enum",T:te.getEnumType(Fe),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:Lt,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}]);var Fe;(function(n){n[n.DOUBLE=1]="DOUBLE",n[n.FLOAT=2]="FLOAT",n[n.INT64=3]="INT64",n[n.UINT64=4]="UINT64",n[n.INT32=5]="INT32",n[n.FIXED64=6]="FIXED64",n[n.FIXED32=7]="FIXED32",n[n.BOOL=8]="BOOL",n[n.STRING=9]="STRING",n[n.GROUP=10]="GROUP",n[n.MESSAGE=11]="MESSAGE",n[n.BYTES=12]="BYTES",n[n.UINT32=13]="UINT32",n[n.ENUM=14]="ENUM",n[n.SFIXED32=15]="SFIXED32",n[n.SFIXED64=16]="SFIXED64",n[n.SINT32=17]="SINT32",n[n.SINT64=18]="SINT64"})(Fe||(Fe={})),te.util.setEnumType(Fe,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var Xe;(function(n){n[n.OPTIONAL=1]="OPTIONAL",n[n.REPEATED=3]="REPEATED",n[n.REQUIRED=2]="REQUIRED"})(Xe||(Xe={})),te.util.setEnumType(Xe,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:3,name:"LABEL_REPEATED"},{no:2,name:"LABEL_REQUIRED"}]);class rt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new rt().fromBinary(e,t)}static fromJson(e,t){return new rt().fromJson(e,t)}static fromJsonString(e,t){return new rt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(rt,e,t)}}rt.runtime=te,rt.typeName="google.protobuf.OneofDescriptorProto",rt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:Sn,opt:!0}]);class Nt extends y{constructor(e){super(),this.value=[],this.reservedRange=[],this.reservedName=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Nt().fromBinary(e,t)}static fromJson(e,t){return new Nt().fromJson(e,t)}static fromJsonString(e,t){return new Nt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Nt,e,t)}}Nt.runtime=te,Nt.typeName="google.protobuf.EnumDescriptorProto",Nt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:Et,repeated:!0},{no:3,name:"options",kind:"message",T:un,opt:!0},{no:4,name:"reserved_range",kind:"message",T:tt,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]);class tt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new tt().fromBinary(e,t)}static fromJson(e,t){return new tt().fromJson(e,t)}static fromJsonString(e,t){return new tt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(tt,e,t)}}tt.runtime=te,tt.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",tt.fields=te.util.newFieldList(()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]);class Et extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new Et().fromBinary(e,t)}static fromJson(e,t){return new Et().fromJson(e,t)}static fromJsonString(e,t){return new Et().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Et,e,t)}}Et.runtime=te,Et.typeName="google.protobuf.EnumValueDescriptorProto",Et.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:cn,opt:!0}]);class vt extends y{constructor(e){super(),this.method=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new vt().fromBinary(e,t)}static fromJson(e,t){return new vt().fromJson(e,t)}static fromJsonString(e,t){return new vt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(vt,e,t)}}vt.runtime=te,vt.typeName="google.protobuf.ServiceDescriptorProto",vt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:xt,repeated:!0},{no:3,name:"options",kind:"message",T:fr,opt:!0}]);class xt extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new xt().fromBinary(e,t)}static fromJson(e,t){return new xt().fromJson(e,t)}static fromJsonString(e,t){return new xt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(xt,e,t)}}xt.runtime=te,xt.typeName="google.protobuf.MethodDescriptorProto",xt.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:hr,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]);class jt extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new jt().fromBinary(e,t)}static fromJson(e,t){return new jt().fromJson(e,t)}static fromJsonString(e,t){return new jt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(jt,e,t)}}jt.runtime=te,jt.typeName="google.protobuf.FileOptions",jt.fields=te.util.newFieldList(()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:te.getEnumType(Dn),opt:!0,default:Dn.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:50,name:"features",kind:"message",T:It,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);var Dn;(function(n){n[n.SPEED=1]="SPEED",n[n.CODE_SIZE=2]="CODE_SIZE",n[n.LITE_RUNTIME=3]="LITE_RUNTIME"})(Dn||(Dn={})),te.util.setEnumType(Dn,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class Jt extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Jt().fromBinary(e,t)}static fromJson(e,t){return new Jt().fromJson(e,t)}static fromJsonString(e,t){return new Jt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Jt,e,t)}}Jt.runtime=te,Jt.typeName="google.protobuf.MessageOptions",Jt.fields=te.util.newFieldList(()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:11,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:12,name:"features",kind:"message",T:It,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class Lt extends y{constructor(e){super(),this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Lt().fromBinary(e,t)}static fromJson(e,t){return new Lt().fromJson(e,t)}static fromJsonString(e,t){return new Lt().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Lt,e,t)}}Lt.runtime=te,Lt.typeName="google.protobuf.FieldOptions",Lt.fields=te.util.newFieldList(()=>[{no:1,name:"ctype",kind:"enum",T:te.getEnumType(Vr),opt:!0,default:Vr.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:te.getEnumType(On),opt:!0,default:On.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:16,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"retention",kind:"enum",T:te.getEnumType(zr),opt:!0},{no:19,name:"targets",kind:"enum",T:te.getEnumType(cr),repeated:!0},{no:20,name:"edition_defaults",kind:"message",T:ln,repeated:!0},{no:21,name:"features",kind:"message",T:It,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);var Vr;(function(n){n[n.STRING=0]="STRING",n[n.CORD=1]="CORD",n[n.STRING_PIECE=2]="STRING_PIECE"})(Vr||(Vr={})),te.util.setEnumType(Vr,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]);var On;(function(n){n[n.JS_NORMAL=0]="JS_NORMAL",n[n.JS_STRING=1]="JS_STRING",n[n.JS_NUMBER=2]="JS_NUMBER"})(On||(On={})),te.util.setEnumType(On,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]);var zr;(function(n){n[n.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",n[n.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",n[n.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(zr||(zr={})),te.util.setEnumType(zr,"google.protobuf.FieldOptions.OptionRetention",[{no:0,name:"RETENTION_UNKNOWN"},{no:1,name:"RETENTION_RUNTIME"},{no:2,name:"RETENTION_SOURCE"}]);var cr;(function(n){n[n.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",n[n.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",n[n.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",n[n.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",n[n.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",n[n.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",n[n.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",n[n.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",n[n.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",n[n.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(cr||(cr={})),te.util.setEnumType(cr,"google.protobuf.FieldOptions.OptionTargetType",[{no:0,name:"TARGET_TYPE_UNKNOWN"},{no:1,name:"TARGET_TYPE_FILE"},{no:2,name:"TARGET_TYPE_EXTENSION_RANGE"},{no:3,name:"TARGET_TYPE_MESSAGE"},{no:4,name:"TARGET_TYPE_FIELD"},{no:5,name:"TARGET_TYPE_ONEOF"},{no:6,name:"TARGET_TYPE_ENUM"},{no:7,name:"TARGET_TYPE_ENUM_ENTRY"},{no:8,name:"TARGET_TYPE_SERVICE"},{no:9,name:"TARGET_TYPE_METHOD"}]);class ln extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new ln().fromBinary(e,t)}static fromJson(e,t){return new ln().fromJson(e,t)}static fromJsonString(e,t){return new ln().fromJsonString(e,t)}static equals(e,t){return te.util.equals(ln,e,t)}}ln.runtime=te,ln.typeName="google.protobuf.FieldOptions.EditionDefault",ln.fields=te.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:te.getEnumType(Ue),opt:!0},{no:2,name:"value",kind:"scalar",T:9,opt:!0}]);class Sn extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Sn().fromBinary(e,t)}static fromJson(e,t){return new Sn().fromJson(e,t)}static fromJsonString(e,t){return new Sn().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Sn,e,t)}}Sn.runtime=te,Sn.typeName="google.protobuf.OneofOptions",Sn.fields=te.util.newFieldList(()=>[{no:1,name:"features",kind:"message",T:It,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class un extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new un().fromBinary(e,t)}static fromJson(e,t){return new un().fromJson(e,t)}static fromJsonString(e,t){return new un().fromJsonString(e,t)}static equals(e,t){return te.util.equals(un,e,t)}}un.runtime=te,un.typeName="google.protobuf.EnumOptions",un.fields=te.util.newFieldList(()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:7,name:"features",kind:"message",T:It,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class cn extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new cn().fromBinary(e,t)}static fromJson(e,t){return new cn().fromJson(e,t)}static fromJsonString(e,t){return new cn().fromJsonString(e,t)}static equals(e,t){return te.util.equals(cn,e,t)}}cn.runtime=te,cn.typeName="google.protobuf.EnumValueOptions",cn.fields=te.util.newFieldList(()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"features",kind:"message",T:It,opt:!0},{no:3,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class fr extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new fr().fromBinary(e,t)}static fromJson(e,t){return new fr().fromJson(e,t)}static fromJsonString(e,t){return new fr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(fr,e,t)}}fr.runtime=te,fr.typeName="google.protobuf.ServiceOptions",fr.fields=te.util.newFieldList(()=>[{no:34,name:"features",kind:"message",T:It,opt:!0},{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);class hr extends y{constructor(e){super(),this.uninterpretedOption=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new hr().fromBinary(e,t)}static fromJson(e,t){return new hr().fromJson(e,t)}static fromJsonString(e,t){return new hr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(hr,e,t)}}hr.runtime=te,hr.typeName="google.protobuf.MethodOptions",hr.fields=te.util.newFieldList(()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:te.getEnumType(Kr),opt:!0,default:Kr.IDEMPOTENCY_UNKNOWN},{no:35,name:"features",kind:"message",T:It,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Ft,repeated:!0}]);var Kr;(function(n){n[n.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",n[n.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",n[n.IDEMPOTENT=2]="IDEMPOTENT"})(Kr||(Kr={})),te.util.setEnumType(Kr,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class Ft extends y{constructor(e){super(),this.name=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Ft().fromBinary(e,t)}static fromJson(e,t){return new Ft().fromJson(e,t)}static fromJsonString(e,t){return new Ft().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Ft,e,t)}}Ft.runtime=te,Ft.typeName="google.protobuf.UninterpretedOption",Ft.fields=te.util.newFieldList(()=>[{no:2,name:"name",kind:"message",T:dr,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]);class dr extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new dr().fromBinary(e,t)}static fromJson(e,t){return new dr().fromJson(e,t)}static fromJsonString(e,t){return new dr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(dr,e,t)}}dr.runtime=te,dr.typeName="google.protobuf.UninterpretedOption.NamePart",dr.fields=te.util.newFieldList(()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]);class It extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new It().fromBinary(e,t)}static fromJson(e,t){return new It().fromJson(e,t)}static fromJsonString(e,t){return new It().fromJsonString(e,t)}static equals(e,t){return te.util.equals(It,e,t)}}It.runtime=te,It.typeName="google.protobuf.FeatureSet",It.fields=te.util.newFieldList(()=>[{no:1,name:"field_presence",kind:"enum",T:te.getEnumType(io),opt:!0},{no:2,name:"enum_type",kind:"enum",T:te.getEnumType(oo),opt:!0},{no:3,name:"repeated_field_encoding",kind:"enum",T:te.getEnumType(Ti),opt:!0},{no:4,name:"utf8_validation",kind:"enum",T:te.getEnumType(so),opt:!0},{no:5,name:"message_encoding",kind:"enum",T:te.getEnumType(ao),opt:!0},{no:6,name:"json_format",kind:"enum",T:te.getEnumType(lo),opt:!0}]);var io;(function(n){n[n.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",n[n.EXPLICIT=1]="EXPLICIT",n[n.IMPLICIT=2]="IMPLICIT",n[n.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(io||(io={})),te.util.setEnumType(io,"google.protobuf.FeatureSet.FieldPresence",[{no:0,name:"FIELD_PRESENCE_UNKNOWN"},{no:1,name:"EXPLICIT"},{no:2,name:"IMPLICIT"},{no:3,name:"LEGACY_REQUIRED"}]);var oo;(function(n){n[n.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",n[n.OPEN=1]="OPEN",n[n.CLOSED=2]="CLOSED"})(oo||(oo={})),te.util.setEnumType(oo,"google.protobuf.FeatureSet.EnumType",[{no:0,name:"ENUM_TYPE_UNKNOWN"},{no:1,name:"OPEN"},{no:2,name:"CLOSED"}]);var Ti;(function(n){n[n.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",n[n.PACKED=1]="PACKED",n[n.EXPANDED=2]="EXPANDED"})(Ti||(Ti={})),te.util.setEnumType(Ti,"google.protobuf.FeatureSet.RepeatedFieldEncoding",[{no:0,name:"REPEATED_FIELD_ENCODING_UNKNOWN"},{no:1,name:"PACKED"},{no:2,name:"EXPANDED"}]);var so;(function(n){n[n.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",n[n.NONE=1]="NONE",n[n.VERIFY=2]="VERIFY"})(so||(so={})),te.util.setEnumType(so,"google.protobuf.FeatureSet.Utf8Validation",[{no:0,name:"UTF8_VALIDATION_UNKNOWN"},{no:1,name:"NONE"},{no:2,name:"VERIFY"}]);var ao;(function(n){n[n.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",n[n.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",n[n.DELIMITED=2]="DELIMITED"})(ao||(ao={})),te.util.setEnumType(ao,"google.protobuf.FeatureSet.MessageEncoding",[{no:0,name:"MESSAGE_ENCODING_UNKNOWN"},{no:1,name:"LENGTH_PREFIXED"},{no:2,name:"DELIMITED"}]);var lo;(function(n){n[n.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",n[n.ALLOW=1]="ALLOW",n[n.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(lo||(lo={})),te.util.setEnumType(lo,"google.protobuf.FeatureSet.JsonFormat",[{no:0,name:"JSON_FORMAT_UNKNOWN"},{no:1,name:"ALLOW"},{no:2,name:"LEGACY_BEST_EFFORT"}]);class pr extends y{constructor(e){super(),this.defaults=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new pr().fromBinary(e,t)}static fromJson(e,t){return new pr().fromJson(e,t)}static fromJsonString(e,t){return new pr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(pr,e,t)}}pr.runtime=te,pr.typeName="google.protobuf.FeatureSetDefaults",pr.fields=te.util.newFieldList(()=>[{no:1,name:"defaults",kind:"message",T:gr,repeated:!0},{no:4,name:"minimum_edition",kind:"enum",T:te.getEnumType(Ue),opt:!0},{no:5,name:"maximum_edition",kind:"enum",T:te.getEnumType(Ue),opt:!0}]);class gr extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new gr().fromBinary(e,t)}static fromJson(e,t){return new gr().fromJson(e,t)}static fromJsonString(e,t){return new gr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(gr,e,t)}}gr.runtime=te,gr.typeName="google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault",gr.fields=te.util.newFieldList(()=>[{no:3,name:"edition",kind:"enum",T:te.getEnumType(Ue),opt:!0},{no:2,name:"features",kind:"message",T:It,opt:!0}]);class mr extends y{constructor(e){super(),this.location=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new mr().fromBinary(e,t)}static fromJson(e,t){return new mr().fromJson(e,t)}static fromJsonString(e,t){return new mr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(mr,e,t)}}mr.runtime=te,mr.typeName="google.protobuf.SourceCodeInfo",mr.fields=te.util.newFieldList(()=>[{no:1,name:"location",kind:"message",T:vr,repeated:!0}]);class vr extends y{constructor(e){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new vr().fromBinary(e,t)}static fromJson(e,t){return new vr().fromJson(e,t)}static fromJsonString(e,t){return new vr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(vr,e,t)}}vr.runtime=te,vr.typeName="google.protobuf.SourceCodeInfo.Location",vr.fields=te.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]);class yr extends y{constructor(e){super(),this.annotation=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new yr().fromBinary(e,t)}static fromJson(e,t){return new yr().fromJson(e,t)}static fromJsonString(e,t){return new yr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(yr,e,t)}}yr.runtime=te,yr.typeName="google.protobuf.GeneratedCodeInfo",yr.fields=te.util.newFieldList(()=>[{no:1,name:"annotation",kind:"message",T:br,repeated:!0}]);class br extends y{constructor(e){super(),this.path=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new br().fromBinary(e,t)}static fromJson(e,t){return new br().fromJson(e,t)}static fromJsonString(e,t){return new br().fromJsonString(e,t)}static equals(e,t){return te.util.equals(br,e,t)}}br.runtime=te,br.typeName="google.protobuf.GeneratedCodeInfo.Annotation",br.fields=te.util.newFieldList(()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0},{no:5,name:"semantic",kind:"enum",T:te.getEnumType(uo),opt:!0}]);var uo;(function(n){n[n.NONE=0]="NONE",n[n.SET=1]="SET",n[n.ALIAS=2]="ALIAS"})(uo||(uo={})),te.util.setEnumType(uo,"google.protobuf.GeneratedCodeInfo.Annotation.Semantic",[{no:0,name:"NONE"},{no:1,name:"SET"},{no:2,name:"ALIAS"}]);function Nu(n,e){const t=n.values.find(r=>r.name===e);return w(t,`cannot parse ${n.name} default value: ${e}`),t.number}function xu(n,e){switch(n){case E.STRING:return e;case E.BYTES:{const t=Iu(e);if(t===!1)throw new Error(`cannot parse ${E[n]} default value: ${e}`);return t}case E.INT64:case E.SFIXED64:case E.SINT64:return Q.parse(e);case E.UINT64:case E.FIXED64:return Q.uParse(e);case E.DOUBLE:case E.FLOAT:switch(e){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(e)}case E.BOOL:return e==="true";case E.INT32:case E.UINT32:case E.SINT32:case E.FIXED32:case E.SFIXED32:return parseInt(e,10)}}function Iu(n){const e=[],t={tail:n,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(r){if(this.tail.length>=r){const i=this.tail.substring(0,r);return this.tail=this.tail.substring(r),i}return!1}};for(;t.next();)switch(t.c){case"\\":if(t.next())switch(t.c){case"\\":e.push(t.c.charCodeAt(0));break;case"b":e.push(8);break;case"f":e.push(12);break;case"n":e.push(10);break;case"r":e.push(13);break;case"t":e.push(9);break;case"v":e.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const r=t.c,i=t.take(2);if(i===!1)return!1;const o=parseInt(r+i,8);if(isNaN(o))return!1;e.push(o);break}case"x":{const r=t.c,i=t.take(2);if(i===!1)return!1;const o=parseInt(r+i,16);if(isNaN(o))return!1;e.push(o);break}case"u":{const r=t.c,i=t.take(4);if(i===!1)return!1;const o=parseInt(r+i,16);if(isNaN(o))return!1;const p=new Uint8Array(4);new DataView(p.buffer).setInt32(0,o,!0),e.push(p[0],p[1],p[2],p[3]);break}case"U":{const r=t.c,i=t.take(8);if(i===!1)return!1;const o=Q.uEnc(r+i),p=new Uint8Array(8),O=new DataView(p.buffer);O.setInt32(0,o.lo,!0),O.setInt32(4,o.hi,!0),e.push(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7]);break}}break;default:e.push(t.c.charCodeAt(0))}return new Uint8Array(e)}const Pu=pr.fromBinary(Qe.dec("ChESDAgBEAIYAiABKAEwAhjmBwoREgwIAhABGAEgAigBMAEY5wcKERIMCAEQARgBIAIoATABGOgHIOYHKOgH"));function Ru(n){const e=n.minimumEdition,t=n.maximumEdition;if(e===void 0||t===void 0||n.defaults.some(i=>i.edition===void 0))throw new Error("Invalid FeatureSetDefaults");const r=new Map;return(i,...o)=>{var p,O;let P=r.get(i);if(P===void 0){if(i<e)throw new Error(`Edition ${Ue[i]} is earlier than the minimum supported edition ${Ue[e]}`);if(t<i)throw new Error(`Edition ${Ue[i]} is later than the maximum supported edition ${Ue[t]}`);let K;for(const pe of n.defaults){const ne=(p=pe.edition)!==null&&p!==void 0?p:0;ne>i||K!==void 0&&K.e>ne||(K={e:ne,f:(O=pe.features)!==null&&O!==void 0?O:new It})}if(K===void 0)throw new Error(`No valid default found for edition ${Ue[i]}`);P=K.f.toBinary(),r.set(i,P)}const B=It.fromBinary(P);for(const K of o)K!==void 0&&B.fromBinary(K.toBinary());if(!Du(B))throw new Error(`Invalid FeatureSet for edition ${Ue[i]}`);return B}}function Du(n){for(const e of It.fields.list()){const t=n[e.localName];if(t===void 0||e.kind=="enum"&&t===0)return!1}return!0}function zs(n,e){var t;const r={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map,resolveFeatures:Ru((t=e==null?void 0:e.featureSetDefaults)!==null&&t!==void 0?t:Pu)},o=(n instanceof ut?n.file:n instanceof Uint8Array?ut.fromBinary(n).file:n).map(p=>Cu(p,r));return Object.assign({files:o},r)}function Cu(n,e){var t,r;w(n.name,"invalid FileDescriptorProto: missing name");const i=Object.assign(Object.assign({kind:"file",proto:n,deprecated:(r=(t=n.options)===null||t===void 0?void 0:t.deprecated)!==null&&r!==void 0?r:!1},ju(n.syntax,n.edition)),{name:n.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return Tr(this.proto.sourceCodeInfo,[fn.FileDescriptorProto_Syntax])},getPackageComments(){return Tr(this.proto.sourceCodeInfo,[fn.FileDescriptorProto_Package])},getFeatures(){var o;return e.resolveFeatures(this.edition,(o=this.proto.options)===null||o===void 0?void 0:o.features)}});e.mapEntries.clear();for(const o of n.enumType)Ks(o,i,void 0,e);for(const o of n.messageType)Ys(o,i,void 0,e);for(const o of n.service)Lu(o,i,e);ss(i,e);for(const o of e.mapEntries.values())as(o,e);for(const o of i.messages)as(o,e),ss(o,e);return e.mapEntries.clear(),i}function ss(n,e){switch(n.kind){case"file":for(const t of n.proto.extension){const r=Ws(t,n,void 0,e);n.extensions.push(r),e.extensions.set(r.typeName,r)}break;case"message":for(const t of n.proto.extension){const r=Ws(t,n.file,n,e);n.nestedExtensions.push(r),e.extensions.set(r.typeName,r)}for(const t of n.nestedMessages)ss(t,e);break}}function as(n,e){const t=n.proto.oneofDecl.map(i=>Bu(i,n,e)),r=new Set;for(const i of n.proto.field){const o=Uu(i,t),p=Gs(i,n.file,n,o,e);n.fields.push(p),o===void 0?n.members.push(p):(o.fields.push(p),r.has(o)||(r.add(o),n.members.push(o)))}for(const i of t.filter(o=>r.has(o)))n.oneofs.push(i);for(const i of n.nestedMessages)as(i,e)}function Ks(n,e,t,r){var i,o,p;w(n.name,"invalid EnumDescriptorProto: missing name");const O={kind:"enum",proto:n,deprecated:(o=(i=n.options)===null||i===void 0?void 0:i.deprecated)!==null&&o!==void 0?o:!1,file:e,parent:t,name:n.name,typeName:Mo(n,t,e),values:[],sharedPrefix:Zt(n.name,n.value.map(P=>{var B;return(B=P.name)!==null&&B!==void 0?B:""})),toString(){return`enum ${this.typeName}`},getComments(){const P=this.parent?[...this.parent.getComments().sourcePath,fn.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[fn.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return Tr(e.proto.sourceCodeInfo,P)},getFeatures(){var P,B,K;const pe=(B=(P=this.parent)===null||P===void 0?void 0:P.getFeatures())!==null&&B!==void 0?B:this.file.getFeatures();return r.resolveFeatures(this.file.edition,pe,(K=this.proto.options)===null||K===void 0?void 0:K.features)}};r.enums.set(O.typeName,O),n.value.forEach(P=>{var B,K;w(P.name,"invalid EnumValueDescriptorProto: missing name"),w(P.number!==void 0,"invalid EnumValueDescriptorProto: missing number"),O.values.push({kind:"enum_value",proto:P,deprecated:(K=(B=P.options)===null||B===void 0?void 0:B.deprecated)!==null&&K!==void 0?K:!1,parent:O,name:P.name,number:P.number,toString(){return`enum value ${O.typeName}.${this.name}`},declarationString(){var pe;let ne=`${this.name} = ${this.number}`;return((pe=this.proto.options)===null||pe===void 0?void 0:pe.deprecated)===!0&&(ne+=" [deprecated = true]"),ne},getComments(){const pe=[...this.parent.getComments().sourcePath,fn.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return Tr(e.proto.sourceCodeInfo,pe)},getFeatures(){var pe;return r.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(pe=this.proto.options)===null||pe===void 0?void 0:pe.features)}})}),((p=t==null?void 0:t.nestedEnums)!==null&&p!==void 0?p:e.enums).push(O)}function Ys(n,e,t,r){var i,o,p,O;w(n.name,"invalid DescriptorProto: missing name");const P={kind:"message",proto:n,deprecated:(o=(i=n.options)===null||i===void 0?void 0:i.deprecated)!==null&&o!==void 0?o:!1,file:e,parent:t,name:n.name,typeName:Mo(n,t,e),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const B=this.parent?[...this.parent.getComments().sourcePath,fn.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[fn.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return Tr(e.proto.sourceCodeInfo,B)},getFeatures(){var B,K,pe;const ne=(K=(B=this.parent)===null||B===void 0?void 0:B.getFeatures())!==null&&K!==void 0?K:this.file.getFeatures();return r.resolveFeatures(this.file.edition,ne,(pe=this.proto.options)===null||pe===void 0?void 0:pe.features)}};((p=n.options)===null||p===void 0?void 0:p.mapEntry)===!0?r.mapEntries.set(P.typeName,P):(((O=t==null?void 0:t.nestedMessages)!==null&&O!==void 0?O:e.messages).push(P),r.messages.set(P.typeName,P));for(const B of n.enumType)Ks(B,e,P,r);for(const B of n.nestedType)Ys(B,e,P,r)}function Lu(n,e,t){var r,i;w(n.name,"invalid ServiceDescriptorProto: missing name");const o={kind:"service",proto:n,deprecated:(i=(r=n.options)===null||r===void 0?void 0:r.deprecated)!==null&&i!==void 0?i:!1,file:e,name:n.name,typeName:Mo(n,void 0,e),methods:[],toString(){return`service ${this.typeName}`},getComments(){const p=[fn.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return Tr(e.proto.sourceCodeInfo,p)},getFeatures(){var p;return t.resolveFeatures(this.file.edition,this.file.getFeatures(),(p=this.proto.options)===null||p===void 0?void 0:p.features)}};e.services.push(o),t.services.set(o.typeName,o);for(const p of n.method)o.methods.push(Mu(p,o,t))}function Mu(n,e,t){var r,i,o;w(n.name,"invalid MethodDescriptorProto: missing name"),w(n.inputType,"invalid MethodDescriptorProto: missing input_type"),w(n.outputType,"invalid MethodDescriptorProto: missing output_type");let p;n.clientStreaming===!0&&n.serverStreaming===!0?p=xe.BiDiStreaming:n.clientStreaming===!0?p=xe.ClientStreaming:n.serverStreaming===!0?p=xe.ServerStreaming:p=xe.Unary;let O;switch((r=n.options)===null||r===void 0?void 0:r.idempotencyLevel){case Kr.IDEMPOTENT:O=et.Idempotent;break;case Kr.NO_SIDE_EFFECTS:O=et.NoSideEffects;break;case Kr.IDEMPOTENCY_UNKNOWN:case void 0:O=void 0;break}const P=t.messages.get(ji(n.inputType)),B=t.messages.get(ji(n.outputType));w(P,`invalid MethodDescriptorProto: input_type ${n.inputType} not found`),w(B,`invalid MethodDescriptorProto: output_type ${n.inputType} not found`);const K=n.name;return{kind:"rpc",proto:n,deprecated:(o=(i=n.options)===null||i===void 0?void 0:i.deprecated)!==null&&o!==void 0?o:!1,parent:e,name:K,methodKind:p,input:P,output:B,idempotency:O,toString(){return`rpc ${e.typeName}.${K}`},getComments(){const pe=[...this.parent.getComments().sourcePath,fn.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return Tr(e.file.proto.sourceCodeInfo,pe)},getFeatures(){var pe;return t.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(pe=this.proto.options)===null||pe===void 0?void 0:pe.features)}}}function Bu(n,e,t){return w(n.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:n,deprecated:!1,parent:e,fields:[],name:n.name,toString(){return`oneof ${e.typeName}.${this.name}`},getComments(){const r=[...this.parent.getComments().sourcePath,fn.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return Tr(e.file.proto.sourceCodeInfo,r)},getFeatures(){var r;return t.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),(r=this.proto.options)===null||r===void 0?void 0:r.features)}}}function Gs(n,e,t,r,i){var o,p,O;w(n.name,"invalid FieldDescriptorProto: missing name"),w(n.number,"invalid FieldDescriptorProto: missing number"),w(n.type,"invalid FieldDescriptorProto: missing type");const P={proto:n,deprecated:(p=(o=n.options)===null||o===void 0?void 0:o.deprecated)!==null&&p!==void 0?p:!1,name:n.name,number:n.number,parent:t,oneof:r,optional:Ju(n,e.syntax),packedByDefault:Fu(e,n,i.resolveFeatures),packed:$u(e,t,n,i.resolveFeatures),jsonName:n.jsonName===gn(n.name)?void 0:n.jsonName,scalar:void 0,longType:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,declarationString:zu,toString(){return`field ${this.parent.typeName}.${this.name}`},getComments(){const K=[...this.parent.getComments().sourcePath,fn.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return Tr(e.proto.sourceCodeInfo,K)},getFeatures(){var K;return i.resolveFeatures(e.edition,this.parent.getFeatures(),(K=this.proto.options)===null||K===void 0?void 0:K.features)}},B=n.label===Xe.REPEATED;switch(n.type){case Fe.MESSAGE:case Fe.GROUP:{w(n.typeName,"invalid FieldDescriptorProto: missing type_name");const K=i.mapEntries.get(ji(n.typeName));if(K!==void 0)return w(B,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},P),{kind:"field",fieldKind:"map",repeated:!1}),qu(K));const pe=i.messages.get(ji(n.typeName));return w(pe!==void 0,`invalid FieldDescriptorProto: type_name ${n.typeName} not found`),Object.assign(Object.assign({},P),{kind:"field",fieldKind:"message",repeated:B,message:pe})}case Fe.ENUM:{w(n.typeName,"invalid FieldDescriptorProto: missing type_name");const K=i.enums.get(ji(n.typeName));return w(K!==void 0,`invalid FieldDescriptorProto: type_name ${n.typeName} not found`),Object.assign(Object.assign({},P),{kind:"field",fieldKind:"enum",getDefaultValue:Hs,repeated:B,enum:K})}default:{const K=Vu[n.type];return w(K,`invalid FieldDescriptorProto: unknown type ${n.type}`),Object.assign(Object.assign({},P),{kind:"field",fieldKind:"scalar",getDefaultValue:Hs,repeated:B,scalar:K,longType:((O=n.options)===null||O===void 0?void 0:O.jstype)==On.JS_STRING?I.STRING:I.BIGINT})}}}function Ws(n,e,t,r){w(n.extendee,"invalid FieldDescriptorProto: missing extendee");const i=Gs(n,e,null,void 0,r),o=r.messages.get(ji(n.extendee));return w(o,`invalid FieldDescriptorProto: extendee ${n.extendee} not found`),Object.assign(Object.assign({},i),{kind:"extension",typeName:Mo(n,t,e),parent:t,file:e,extendee:o,toString(){return`extension ${this.typeName}`},getComments(){const p=this.parent?[...this.parent.getComments().sourcePath,fn.DescriptorProto_Extension,this.parent.proto.extension.indexOf(n)]:[fn.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(n)];return Tr(e.proto.sourceCodeInfo,p)},getFeatures(){var p,O;return r.resolveFeatures(this.file.edition,((p=this.parent)!==null&&p!==void 0?p:this.file).getFeatures(),(O=this.proto.options)===null||O===void 0?void 0:O.features)}})}function ju(n,e){let t,r;switch(n){case void 0:case"proto2":r="proto2",t=Ue.EDITION_PROTO2;break;case"proto3":r="proto3",t=Ue.EDITION_PROTO3;break;case"editions":switch(r="editions",e){case void 0:case Ue.EDITION_1_TEST_ONLY:case Ue.EDITION_2_TEST_ONLY:case Ue.EDITION_99997_TEST_ONLY:case Ue.EDITION_99998_TEST_ONLY:case Ue.EDITION_99999_TEST_ONLY:case Ue.EDITION_UNKNOWN:t=Ue.EDITION_UNKNOWN;break;default:t=e;break}break;default:throw new Error(`invalid FileDescriptorProto: unsupported syntax: ${n}`)}if(n==="editions"&&e===Ue.EDITION_UNKNOWN)throw new Error(`invalid FileDescriptorProto: syntax ${n} cannot have edition ${String(e)}`);return{syntax:r,edition:t}}function Mo(n,e,t){w(n.name,`invalid ${n.getType().typeName}: missing name`);let r;return e?r=`${e.typeName}.${n.name}`:t.proto.package!==void 0?r=`${t.proto.package}.${n.name}`:r=`${n.name}`,r}function ji(n){return n.startsWith(".")?n.substring(1):n}function qu(n){var e,t;w((e=n.proto.options)===null||e===void 0?void 0:e.mapEntry,`invalid DescriptorProto: expected ${n.toString()} to be a map entry`),w(n.fields.length===2,`invalid DescriptorProto: map entry ${n.toString()} has ${n.fields.length} fields`);const r=n.fields.find(p=>p.proto.number===1);w(r,`invalid DescriptorProto: map entry ${n.toString()} is missing key field`);const i=r.scalar;w(i!==void 0&&i!==E.BYTES&&i!==E.FLOAT&&i!==E.DOUBLE,`invalid DescriptorProto: map entry ${n.toString()} has unexpected key type ${(t=r.proto.type)!==null&&t!==void 0?t:-1}`);const o=n.fields.find(p=>p.proto.number===2);switch(w(o,`invalid DescriptorProto: map entry ${n.toString()} is missing value field`),o.fieldKind){case"scalar":return{mapKey:i,mapValue:Object.assign(Object.assign({},o),{kind:"scalar"})};case"message":return{mapKey:i,mapValue:Object.assign(Object.assign({},o),{kind:"message"})};case"enum":return{mapKey:i,mapValue:Object.assign(Object.assign({},o),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}function Uu(n,e){var t;const r=n.oneofIndex;if(r===void 0)return;let i;return n.proto3Optional!==!0&&(i=e[r],w(i,`invalid FieldDescriptorProto: oneof #${r} for field #${(t=n.number)!==null&&t!==void 0?t:-1} not found`)),i}function Ju(n,e){switch(e){case"proto2":return n.oneofIndex===void 0&&n.label===Xe.OPTIONAL;case"proto3":return n.proto3Optional===!0;case"editions":return!1}}function Fu(n,e,t){const{repeatedFieldEncoding:r}=t(n.edition);if(r!=Ti.PACKED)return!1;switch(e.type){case Fe.STRING:case Fe.BYTES:case Fe.GROUP:case Fe.MESSAGE:return!1;default:return!0}}function $u(n,e,t,r){var i,o,p,O,P,B;switch(t.type){case Fe.STRING:case Fe.BYTES:case Fe.GROUP:case Fe.MESSAGE:return!1;default:switch(n.edition){case Ue.EDITION_PROTO2:return(o=(i=t.options)===null||i===void 0?void 0:i.packed)!==null&&o!==void 0?o:!1;case Ue.EDITION_PROTO3:return(O=(p=t.options)===null||p===void 0?void 0:p.packed)!==null&&O!==void 0?O:!0;default:{const{repeatedFieldEncoding:K}=r(n.edition,(P=e==null?void 0:e.getFeatures())!==null&&P!==void 0?P:n.getFeatures(),(B=t.options)===null||B===void 0?void 0:B.features);return K==Ti.PACKED}}}}const Vu={[Fe.DOUBLE]:E.DOUBLE,[Fe.FLOAT]:E.FLOAT,[Fe.INT64]:E.INT64,[Fe.UINT64]:E.UINT64,[Fe.INT32]:E.INT32,[Fe.FIXED64]:E.FIXED64,[Fe.FIXED32]:E.FIXED32,[Fe.BOOL]:E.BOOL,[Fe.STRING]:E.STRING,[Fe.GROUP]:void 0,[Fe.MESSAGE]:void 0,[Fe.BYTES]:E.BYTES,[Fe.UINT32]:E.UINT32,[Fe.ENUM]:void 0,[Fe.SFIXED32]:E.SFIXED32,[Fe.SFIXED64]:E.SFIXED64,[Fe.SINT32]:E.SINT32,[Fe.SINT64]:E.SINT64};function Tr(n,e){if(!n)return{leadingDetached:[],sourcePath:e};for(const t of n.location)if(t.path.length===e.length&&!t.path.some((r,i)=>e[i]!==r))return{leadingDetached:t.leadingDetachedComments,leading:t.leadingComments,trailing:t.trailingComments,sourcePath:e};return{leadingDetached:[],sourcePath:e}}var fn;(function(n){n[n.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",n[n.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",n[n.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",n[n.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",n[n.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",n[n.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",n[n.DescriptorProto_Field=2]="DescriptorProto_Field",n[n.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",n[n.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",n[n.DescriptorProto_Extension=6]="DescriptorProto_Extension",n[n.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",n[n.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",n[n.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"})(fn||(fn={}));function zu(){var n,e,t;const r=[];this.repeated&&r.push("repeated"),this.optional&&r.push("optional"),(this.kind==="extension"?this.file:this.parent.file).syntax=="proto2"&&this.proto.label===Xe.REQUIRED&&r.push("required");let o;switch(this.fieldKind){case"scalar":o=E[this.scalar].toLowerCase();break;case"enum":o=this.enum.typeName;break;case"message":o=this.message.typeName;break;case"map":{const P=E[this.mapKey].toLowerCase();let B;switch(this.mapValue.kind){case"scalar":B=E[this.mapValue.scalar].toLowerCase();break;case"enum":B=this.mapValue.enum.typeName;break;case"message":B=this.mapValue.message.typeName;break}o=`map<${P}, ${B}>`;break}}r.push(`${o} ${this.name} = ${this.number}`);const p=[];((n=this.proto.options)===null||n===void 0?void 0:n.packed)!==void 0&&p.push(`packed = ${this.proto.options.packed.toString()}`);let O=this.proto.defaultValue;return O!==void 0&&((this.proto.type==Fe.BYTES||this.proto.type==Fe.STRING)&&(O='"'+O.replace('"','\\"')+'"'),p.push(`default = ${O}`)),this.jsonName!==void 0&&p.push(`json_name = "${this.jsonName}"`),((e=this.proto.options)===null||e===void 0?void 0:e.jstype)!==void 0&&p.push(`jstype = ${On[this.proto.options.jstype]}`),((t=this.proto.options)===null||t===void 0?void 0:t.deprecated)===!0&&p.push("deprecated = true"),p.length>0&&r.push("["+p.join(", ")+"]"),r.join(" ")}function Hs(){const n=this.proto.defaultValue;if(n!==void 0)switch(this.fieldKind){case"enum":return Nu(this.enum,n);case"scalar":return xu(this.scalar,n);default:return}}function Ku(...n){const e={},t={},r={},i={add(o){if("fields"in o){if(!this.findMessage(o.typeName)){e[o.typeName]=o;for(const p of o.fields.list())p.kind=="message"?this.add(p.T):p.kind=="map"&&p.V.kind=="message"?this.add(p.V.T):p.kind=="enum"&&this.add(p.T)}}else if("methods"in o){if(!this.findService(o.typeName)){r[o.typeName]=o;for(const p of Object.values(o.methods))this.add(p.I),this.add(p.O)}}else t[o.typeName]=o},findMessage(o){return e[o]},findEnum(o){return t[o]},findService(o){return r[o]}};for(const o of n)i.add(o);return i}let co=class Ri extends y{constructor(e){super(),this.seconds=Q.zero,this.nanos=0,ce.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${ce.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Q.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Ri.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Ri({seconds:Q.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new Ri().fromBinary(e,t)}static fromJson(e,t){return new Ri().fromJson(e,t)}static fromJsonString(e,t){return new Ri().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Ri,e,t)}};co.runtime=ce,co.typeName="google.protobuf.Timestamp",co.fields=ce.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Xn extends y{constructor(e){super(),this.seconds=Q.zero,this.nanos=0,ce.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${ce.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(r===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${ce.json.debug(e)}`);const i=Number(r[1]);if(i>315576e6||i<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${ce.json.debug(e)}`);if(this.seconds=Q.parse(i),typeof r[2]=="string"){const o=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(o),(i<0||Object.is(i,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(this.nanos!==0){let r=Math.abs(this.nanos).toString();r="0".repeat(9-r.length)+r,r.substring(3)==="000000"?r=r.substring(0,3):r.substring(6)==="000"&&(r=r.substring(0,6)),t+="."+r,this.nanos<0&&Number(this.seconds)==0&&(t="-"+t)}return t+"s"}static fromBinary(e,t){return new Xn().fromBinary(e,t)}static fromJson(e,t){return new Xn().fromJson(e,t)}static fromJsonString(e,t){return new Xn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Xn,e,t)}}Xn.runtime=ce,Xn.typeName="google.protobuf.Duration",Xn.fields=ce.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class An extends y{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),ce.util.initPartial(e,this)}toJson(e){var t;if(this.typeUrl==="")return{};const r=this.typeUrlToName(this.typeUrl),i=(t=e==null?void 0:e.typeRegistry)===null||t===void 0?void 0:t.findMessage(r);if(!i)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let p=i.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||p===null||Array.isArray(p)||typeof p!="object")&&(p={value:p}),p["@type"]=this.typeUrl,p}fromJson(e,t){var r;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const o=this.typeUrlToName(i),p=(r=t==null?void 0:t.typeRegistry)===null||r===void 0?void 0:r.findMessage(o);if(!p)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${i} is not in the type registry`);let O;if(o.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))O=p.fromJson(e.value,t);else{const P=Object.assign({},e);delete P["@type"],O=p.fromJson(P,t)}return this.packFrom(O),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const t=e.findMessage(this.typeUrlToName(this.typeUrl));if(!!t)return t.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const t=this.typeUrlToName(this.typeUrl);let r="";return typeof e=="string"?r=e:r=e.typeName,t===r}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>=0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new An;return t.packFrom(e),t}static fromBinary(e,t){return new An().fromBinary(e,t)}static fromJson(e,t){return new An().fromJson(e,t)}static fromJsonString(e,t){return new An().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(An,e,t)}}An.runtime=ce,An.typeName="google.protobuf.Any",An.fields=ce.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class _r extends y{constructor(e){super(),ce.util.initPartial(e,this)}static fromBinary(e,t){return new _r().fromBinary(e,t)}static fromJson(e,t){return new _r().fromJson(e,t)}static fromJsonString(e,t){return new _r().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(_r,e,t)}}_r.runtime=ce,_r.typeName="google.protobuf.Empty",_r.fields=ce.util.newFieldList(()=>[]);class Er extends y{constructor(e){super(),this.paths=[],ce.util.initPartial(e,this)}toJson(e){function t(r){let i=!1;const o=[];for(let p=0;p<r.length;p++){let O=r.charAt(p);switch(O){case"_":i=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o.push(O),i=!1;break;default:i&&(i=!1,O=O.toUpperCase()),o.push(O);break}}return o.join("")}return this.paths.map(r=>{if(r.match(/_[0-9]?_/g)||r.match(/[A-Z]/g))throw new Error('cannot encode google.protobuf.FieldMask to JSON: lowerCamelCase of path name "'+r+'" is irreversible');return t(r)}).join(",")}fromJson(e,t){if(typeof e!="string")throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+ce.json.debug(e));if(e==="")return this;function r(i){if(i.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const o=i.replace(/[A-Z]/g,p=>"_"+p.toLowerCase());return o[0]==="_"?o.substring(1):o}return this.paths=e.split(",").map(r),this}static fromBinary(e,t){return new Er().fromBinary(e,t)}static fromJson(e,t){return new Er().fromJson(e,t)}static fromJsonString(e,t){return new Er().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Er,e,t)}}Er.runtime=ce,Er.typeName="google.protobuf.FieldMask",Er.fields=ce.util.newFieldList(()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}]);var _i;(function(n){n[n.NULL_VALUE=0]="NULL_VALUE"})(_i||(_i={})),ce.util.setEnumType(_i,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class Cn extends y{constructor(e){super(),this.fields={},ce.util.initPartial(e,this)}toJson(e){const t={};for(const[r,i]of Object.entries(this.fields))t[r]=i.toJson(e);return t}fromJson(e,t){if(typeof e!="object"||e==null||Array.isArray(e))throw new Error("cannot decode google.protobuf.Struct from JSON "+ce.json.debug(e));for(const[r,i]of Object.entries(e))this.fields[r]=mn.fromJson(i);return this}static fromBinary(e,t){return new Cn().fromBinary(e,t)}static fromJson(e,t){return new Cn().fromJson(e,t)}static fromJsonString(e,t){return new Cn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Cn,e,t)}}Cn.runtime=ce,Cn.typeName="google.protobuf.Struct",Cn.fields=ce.util.newFieldList(()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:mn}}]);class mn extends y{constructor(e){super(),this.kind={case:void 0},ce.util.initPartial(e,this)}toJson(e){switch(this.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(this.kind.value))throw new Error("google.protobuf.Value cannot be NaN or Infinity");return this.kind.value;case"boolValue":return this.kind.value;case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},e),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(e,t){switch(typeof e){case"number":this.kind={case:"numberValue",value:e};break;case"string":this.kind={case:"stringValue",value:e};break;case"boolean":this.kind={case:"boolValue",value:e};break;case"object":e===null?this.kind={case:"nullValue",value:_i.NULL_VALUE}:Array.isArray(e)?this.kind={case:"listValue",value:Ln.fromJson(e)}:this.kind={case:"structValue",value:Cn.fromJson(e)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+ce.json.debug(e))}return this}static fromBinary(e,t){return new mn().fromBinary(e,t)}static fromJson(e,t){return new mn().fromJson(e,t)}static fromJsonString(e,t){return new mn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(mn,e,t)}}mn.runtime=ce,mn.typeName="google.protobuf.Value",mn.fields=ce.util.newFieldList(()=>[{no:1,name:"null_value",kind:"enum",T:ce.getEnumType(_i),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:Cn,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:Ln,oneof:"kind"}]);class Ln extends y{constructor(e){super(),this.values=[],ce.util.initPartial(e,this)}toJson(e){return this.values.map(t=>t.toJson())}fromJson(e,t){if(!Array.isArray(e))throw new Error("cannot decode google.protobuf.ListValue from JSON "+ce.json.debug(e));for(let r of e)this.values.push(mn.fromJson(r));return this}static fromBinary(e,t){return new Ln().fromBinary(e,t)}static fromJson(e,t){return new Ln().fromJson(e,t)}static fromJsonString(e,t){return new Ln().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Ln,e,t)}}Ln.runtime=ce,Ln.typeName="google.protobuf.ListValue",Ln.fields=ce.util.newFieldList(()=>[{no:1,name:"values",kind:"message",T:mn,repeated:!0}]);class Mn extends y{constructor(e){super(),this.value=0,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.DOUBLE,e)}catch(r){let i='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Mn().fromBinary(e,t)}static fromJson(e,t){return new Mn().fromJson(e,t)}static fromJsonString(e,t){return new Mn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Mn,e,t)}}Mn.runtime=ce,Mn.typeName="google.protobuf.DoubleValue",Mn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Mn.fieldWrapper={wrapField(n){return new Mn({value:n})},unwrapField(n){return n.value}};class Bn extends y{constructor(e){super(),this.value=0,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.FLOAT,e)}catch(r){let i='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Bn().fromBinary(e,t)}static fromJson(e,t){return new Bn().fromJson(e,t)}static fromJsonString(e,t){return new Bn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Bn,e,t)}}Bn.runtime=ce,Bn.typeName="google.protobuf.FloatValue",Bn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),Bn.fieldWrapper={wrapField(n){return new Bn({value:n})},unwrapField(n){return n.value}};class jn extends y{constructor(e){super(),this.value=Q.zero,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.INT64,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.INT64,e)}catch(r){let i='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new jn().fromBinary(e,t)}static fromJson(e,t){return new jn().fromJson(e,t)}static fromJsonString(e,t){return new jn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(jn,e,t)}}jn.runtime=ce,jn.typeName="google.protobuf.Int64Value",jn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),jn.fieldWrapper={wrapField(n){return new jn({value:n})},unwrapField(n){return n.value}};class qn extends y{constructor(e){super(),this.value=Q.zero,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.UINT64,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.UINT64,e)}catch(r){let i='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new qn().fromBinary(e,t)}static fromJson(e,t){return new qn().fromJson(e,t)}static fromJsonString(e,t){return new qn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(qn,e,t)}}qn.runtime=ce,qn.typeName="google.protobuf.UInt64Value",qn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),qn.fieldWrapper={wrapField(n){return new qn({value:n})},unwrapField(n){return n.value}};class Un extends y{constructor(e){super(),this.value=0,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.INT32,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.INT32,e)}catch(r){let i='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Un().fromBinary(e,t)}static fromJson(e,t){return new Un().fromJson(e,t)}static fromJsonString(e,t){return new Un().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Un,e,t)}}Un.runtime=ce,Un.typeName="google.protobuf.Int32Value",Un.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),Un.fieldWrapper={wrapField(n){return new Un({value:n})},unwrapField(n){return n.value}};class Jn extends y{constructor(e){super(),this.value=0,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.UINT32,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.UINT32,e)}catch(r){let i='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Jn().fromBinary(e,t)}static fromJson(e,t){return new Jn().fromJson(e,t)}static fromJsonString(e,t){return new Jn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Jn,e,t)}}Jn.runtime=ce,Jn.typeName="google.protobuf.UInt32Value",Jn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),Jn.fieldWrapper={wrapField(n){return new Jn({value:n})},unwrapField(n){return n.value}};class Fn extends y{constructor(e){super(),this.value=!1,ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.BOOL,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.BOOL,e)}catch(r){let i='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Fn().fromBinary(e,t)}static fromJson(e,t){return new Fn().fromJson(e,t)}static fromJsonString(e,t){return new Fn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Fn,e,t)}}Fn.runtime=ce,Fn.typeName="google.protobuf.BoolValue",Fn.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),Fn.fieldWrapper={wrapField(n){return new Fn({value:n})},unwrapField(n){return n.value}};let Ei=class Co extends y{constructor(e){super(),this.value="",ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.STRING,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.STRING,e)}catch(r){let i='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new Co().fromBinary(e,t)}static fromJson(e,t){return new Co().fromJson(e,t)}static fromJsonString(e,t){return new Co().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Co,e,t)}};Ei.runtime=ce,Ei.typeName="google.protobuf.StringValue",Ei.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),Ei.fieldWrapper={wrapField(n){return new Ei({value:n})},unwrapField(n){return n.value}};class $n extends y{constructor(e){super(),this.value=new Uint8Array(0),ce.util.initPartial(e,this)}toJson(e){return ce.json.writeScalar(E.BYTES,this.value,!0)}fromJson(e,t){try{this.value=ce.json.readScalar(E.BYTES,e)}catch(r){let i='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(i+=`: ${r.message}`),new Error(i)}return this}static fromBinary(e,t){return new $n().fromBinary(e,t)}static fromJson(e,t){return new $n().fromJson(e,t)}static fromJsonString(e,t){return new $n().fromJsonString(e,t)}static equals(e,t){return ce.util.equals($n,e,t)}}$n.runtime=ce,$n.typeName="google.protobuf.BytesValue",$n.fields=ce.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),$n.fieldWrapper={wrapField(n){return new $n({value:n})},unwrapField(n){return n.value}};const Yu=[An,Xn,_r,Er,Cn,mn,Ln,co,Xn,Mn,Bn,jn,Un,Jn,qn,Fn,Ei,$n],Gu=[f(_i)];function Wu(n,e=!0){const t=n instanceof Uint8Array||n instanceof ut?zs(n):n,r={},i={},o={};if(e){for(const p of Yu)i[p.typeName]=p;for(const p of Gu)r[p.typeName]=p}return{findEnum(p){const O=r[p];if(O)return O;const P=t.enums.get(p);if(!P)return;const K=(P.file.syntax=="proto3"?ce:te).makeEnumType(p,P.values.map(pe=>({no:pe.number,name:pe.name,localName:$r(pe)})),{});return r[p]=K,K},findMessage(p){const O=i[p];if(O)return O;const P=t.messages.get(p);if(!P)return;const B=P.file.syntax=="proto3"?ce:te,K=[],pe=B.makeMessageType(p,()=>K,{localName:$r(P)});i[p]=pe;for(const ne of P.fields){const me=Hu(ne,this);K.push(me)}return pe},findService(p){const O=o[p];if(O)return O;const P=t.services.get(p);if(!P)return;const B={};for(const K of P.methods){const pe=this.findMessage(K.input.typeName),ne=this.findMessage(K.output.typeName);w(pe,`message "${K.input.typeName}" for ${K.toString()} not found`),w(ne,`output message "${K.output.typeName}" for ${K.toString()} not found`),B[$r(K)]={name:K.name,I:pe,O:ne,kind:K.methodKind,idempotency:K.idempotency}}return o[p]={typeName:P.typeName,methods:B}}}}function Hu(n,e){switch(n.fieldKind){case"map":return Xu(n,e);case"message":return Qu(n,e);case"enum":{const t=ec(n,e);return t.default=n.getDefaultValue(),t}case"scalar":{const t=Zu(n);return t.default=n.getDefaultValue(),t}}}function Xu(n,e){const t={kind:"map",no:n.number,name:n.name,jsonName:n.jsonName,K:n.mapKey};if(n.mapValue.message){const r=e.findMessage(n.mapValue.message.typeName);return w(r,`message "${n.mapValue.message.typeName}" for ${n.toString()} not found`),Object.assign(Object.assign({},t),{V:{kind:"message",T:r}})}if(n.mapValue.enum){const r=e.findEnum(n.mapValue.enum.typeName);return w(r,`enum "${n.mapValue.enum.typeName}" for ${n.toString()} not found`),Object.assign(Object.assign({},t),{V:{kind:"enum",T:r}})}return Object.assign(Object.assign({},t),{V:{kind:"scalar",T:n.mapValue.scalar}})}function Zu(n){const e=n.longType==I.STRING?{L:I.STRING}:{},t=Object.assign({kind:"scalar",no:n.number,name:n.name,jsonName:n.jsonName,T:n.scalar},e);return n.repeated?Object.assign(Object.assign({},t),{repeated:!0,packed:n.packed,oneof:void 0,T:n.scalar}):n.oneof?Object.assign(Object.assign({},t),{oneof:n.oneof.name}):n.optional?Object.assign(Object.assign({},t),{opt:!0}):t}function Qu(n,e){const t=e.findMessage(n.message.typeName);w(t,`message "${n.message.typeName}" for ${n.toString()} not found`);const r={kind:"message",no:n.number,name:n.name,jsonName:n.jsonName,T:t,delimited:n.proto.type==Fe.GROUP};return n.repeated?Object.assign(Object.assign({},r),{repeated:!0,packed:n.packed,oneof:void 0}):n.oneof?Object.assign(Object.assign({},r),{oneof:n.oneof.name}):n.optional?Object.assign(Object.assign({},r),{opt:!0}):r}function ec(n,e){const t=e.findEnum(n.enum.typeName);w(t,`enum "${n.enum.typeName}" for ${n.toString()} not found`);const r={kind:"enum",no:n.number,name:n.name,jsonName:n.jsonName,T:t};return n.repeated?Object.assign(Object.assign({},r),{repeated:!0,packed:n.packed,oneof:void 0}):n.oneof?Object.assign(Object.assign({},r),{oneof:n.oneof.name}):n.optional?Object.assign(Object.assign({},r),{opt:!0}):r}function Xs(n){if(!(n instanceof y))return n;const e=n.getType(),t={};for(const r of e.fields.byMember()){const i=n[r.localName];let o;if(r.repeated)o=i.map(p=>Bo(p));else if(r.kind=="map"){o={};for(const[p,O]of Object.entries(i))o[p]=Bo(O)}else r.kind=="oneof"?o=r.findField(i.case)?{case:i.case,value:Bo(i.value)}:{case:void 0}:o=Bo(i);t[r.localName]=o}return t}function Bo(n){if(n===void 0)return n;if(n instanceof y)return Xs(n);if(n instanceof Uint8Array){const e=new Uint8Array(n.byteLength);return e.set(n),e}return n}class wr extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new wr().fromBinary(e,t)}static fromJson(e,t){return new wr().fromJson(e,t)}static fromJsonString(e,t){return new wr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(wr,e,t)}}wr.runtime=te,wr.typeName="google.protobuf.compiler.Version",wr.fields=te.util.newFieldList(()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]);class Yr extends y{constructor(e){super(),this.fileToGenerate=[],this.protoFile=[],this.sourceFileDescriptors=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Yr().fromBinary(e,t)}static fromJson(e,t){return new Yr().fromJson(e,t)}static fromJsonString(e,t){return new Yr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Yr,e,t)}}Yr.runtime=te,Yr.typeName="google.protobuf.compiler.CodeGeneratorRequest",Yr.fields=te.util.newFieldList(()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:He,repeated:!0},{no:17,name:"source_file_descriptors",kind:"message",T:He,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:wr,opt:!0}]);class Gr extends y{constructor(e){super(),this.file=[],te.util.initPartial(e,this)}static fromBinary(e,t){return new Gr().fromBinary(e,t)}static fromJson(e,t){return new Gr().fromJson(e,t)}static fromJsonString(e,t){return new Gr().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Gr,e,t)}}Gr.runtime=te,Gr.typeName="google.protobuf.compiler.CodeGeneratorResponse",Gr.fields=te.util.newFieldList(()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:Or,repeated:!0}]);var jo;(function(n){n[n.NONE=0]="NONE",n[n.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL",n[n.SUPPORTS_EDITIONS=2]="SUPPORTS_EDITIONS"})(jo||(jo={})),te.util.setEnumType(jo,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"},{no:2,name:"FEATURE_SUPPORTS_EDITIONS"}]);class Or extends y{constructor(e){super(),te.util.initPartial(e,this)}static fromBinary(e,t){return new Or().fromBinary(e,t)}static fromJson(e,t){return new Or().fromJson(e,t)}static fromJsonString(e,t){return new Or().fromJsonString(e,t)}static equals(e,t){return te.util.equals(Or,e,t)}}Or.runtime=te,Or.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",Or.fields=te.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:yr,opt:!0}]);class Vn extends y{constructor(e){super(),this.fileName="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new Vn().fromBinary(e,t)}static fromJson(e,t){return new Vn().fromJson(e,t)}static fromJsonString(e,t){return new Vn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Vn,e,t)}}Vn.runtime=ce,Vn.typeName="google.protobuf.SourceContext",Vn.fields=ce.util.newFieldList(()=>[{no:1,name:"file_name",kind:"scalar",T:9}]);var zn;(function(n){n[n.PROTO2=0]="PROTO2",n[n.PROTO3=1]="PROTO3",n[n.EDITIONS=2]="EDITIONS"})(zn||(zn={})),ce.util.setEnumType(zn,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"},{no:2,name:"SYNTAX_EDITIONS"}]);class Wr extends y{constructor(e){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=zn.PROTO2,this.edition="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new Wr().fromBinary(e,t)}static fromJson(e,t){return new Wr().fromJson(e,t)}static fromJsonString(e,t){return new Wr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Wr,e,t)}}Wr.runtime=ce,Wr.typeName="google.protobuf.Type",Wr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:Sr,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:hn,repeated:!0},{no:5,name:"source_context",kind:"message",T:Vn},{no:6,name:"syntax",kind:"enum",T:ce.getEnumType(zn)},{no:7,name:"edition",kind:"scalar",T:9}]);class Sr extends y{constructor(e){super(),this.kind=qi.TYPE_UNKNOWN,this.cardinality=Ui.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new Sr().fromBinary(e,t)}static fromJson(e,t){return new Sr().fromJson(e,t)}static fromJsonString(e,t){return new Sr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Sr,e,t)}}Sr.runtime=ce,Sr.typeName="google.protobuf.Field",Sr.fields=ce.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:ce.getEnumType(qi)},{no:2,name:"cardinality",kind:"enum",T:ce.getEnumType(Ui)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:hn,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}]);var qi;(function(n){n[n.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",n[n.TYPE_DOUBLE=1]="TYPE_DOUBLE",n[n.TYPE_FLOAT=2]="TYPE_FLOAT",n[n.TYPE_INT64=3]="TYPE_INT64",n[n.TYPE_UINT64=4]="TYPE_UINT64",n[n.TYPE_INT32=5]="TYPE_INT32",n[n.TYPE_FIXED64=6]="TYPE_FIXED64",n[n.TYPE_FIXED32=7]="TYPE_FIXED32",n[n.TYPE_BOOL=8]="TYPE_BOOL",n[n.TYPE_STRING=9]="TYPE_STRING",n[n.TYPE_GROUP=10]="TYPE_GROUP",n[n.TYPE_MESSAGE=11]="TYPE_MESSAGE",n[n.TYPE_BYTES=12]="TYPE_BYTES",n[n.TYPE_UINT32=13]="TYPE_UINT32",n[n.TYPE_ENUM=14]="TYPE_ENUM",n[n.TYPE_SFIXED32=15]="TYPE_SFIXED32",n[n.TYPE_SFIXED64=16]="TYPE_SFIXED64",n[n.TYPE_SINT32=17]="TYPE_SINT32",n[n.TYPE_SINT64=18]="TYPE_SINT64"})(qi||(qi={})),ce.util.setEnumType(qi,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]);var Ui;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.OPTIONAL=1]="OPTIONAL",n[n.REQUIRED=2]="REQUIRED",n[n.REPEATED=3]="REPEATED"})(Ui||(Ui={})),ce.util.setEnumType(Ui,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class Hr extends y{constructor(e){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=zn.PROTO2,this.edition="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new Hr().fromBinary(e,t)}static fromJson(e,t){return new Hr().fromJson(e,t)}static fromJsonString(e,t){return new Hr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Hr,e,t)}}Hr.runtime=ce,Hr.typeName="google.protobuf.Enum",Hr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:Ar,repeated:!0},{no:3,name:"options",kind:"message",T:hn,repeated:!0},{no:4,name:"source_context",kind:"message",T:Vn},{no:5,name:"syntax",kind:"enum",T:ce.getEnumType(zn)},{no:6,name:"edition",kind:"scalar",T:9}]);class Ar extends y{constructor(e){super(),this.name="",this.number=0,this.options=[],ce.util.initPartial(e,this)}static fromBinary(e,t){return new Ar().fromBinary(e,t)}static fromJson(e,t){return new Ar().fromJson(e,t)}static fromJsonString(e,t){return new Ar().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Ar,e,t)}}Ar.runtime=ce,Ar.typeName="google.protobuf.EnumValue",Ar.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:hn,repeated:!0}]);class hn extends y{constructor(e){super(),this.name="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new hn().fromBinary(e,t)}static fromJson(e,t){return new hn().fromJson(e,t)}static fromJsonString(e,t){return new hn().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(hn,e,t)}}hn.runtime=ce,hn.typeName="google.protobuf.Option",hn.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:An}]);class Xr extends y{constructor(e){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=zn.PROTO2,ce.util.initPartial(e,this)}static fromBinary(e,t){return new Xr().fromBinary(e,t)}static fromJson(e,t){return new Xr().fromJson(e,t)}static fromJsonString(e,t){return new Xr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Xr,e,t)}}Xr.runtime=ce,Xr.typeName="google.protobuf.Api",Xr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:kr,repeated:!0},{no:3,name:"options",kind:"message",T:hn,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:Vn},{no:6,name:"mixins",kind:"message",T:Nr,repeated:!0},{no:7,name:"syntax",kind:"enum",T:ce.getEnumType(zn)}]);class kr extends y{constructor(e){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=zn.PROTO2,ce.util.initPartial(e,this)}static fromBinary(e,t){return new kr().fromBinary(e,t)}static fromJson(e,t){return new kr().fromJson(e,t)}static fromJsonString(e,t){return new kr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(kr,e,t)}}kr.runtime=ce,kr.typeName="google.protobuf.Method",kr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:hn,repeated:!0},{no:7,name:"syntax",kind:"enum",T:ce.getEnumType(zn)}]);class Nr extends y{constructor(e){super(),this.name="",this.root="",ce.util.initPartial(e,this)}static fromBinary(e,t){return new Nr().fromBinary(e,t)}static fromJson(e,t){return new Nr().fromJson(e,t)}static fromJsonString(e,t){return new Nr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Nr,e,t)}}Nr.runtime=ce,Nr.typeName="google.protobuf.Mixin",Nr.fields=ce.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}]);const ls=Object.freeze(Object.defineProperty({__proto__:null,Any:An,Api:Xr,BinaryReader:H,BinaryWriter:U,BoolValue:Fn,BytesValue:$n,CodeGeneratorRequest:Yr,CodeGeneratorResponse:Gr,get CodeGeneratorResponse_Feature(){return jo},CodeGeneratorResponse_File:Or,DescriptorProto:mt,DescriptorProto_ExtensionRange:pt,DescriptorProto_ReservedRange:Rt,DoubleValue:Mn,Duration:Xn,get Edition(){return Ue},Empty:_r,Enum:Hr,EnumDescriptorProto:Nt,EnumDescriptorProto_EnumReservedRange:tt,EnumOptions:un,EnumValue:Ar,EnumValueDescriptorProto:Et,EnumValueOptions:cn,ExtensionRangeOptions:Ct,ExtensionRangeOptions_Declaration:Je,get ExtensionRangeOptions_VerificationState(){return an},FeatureSet:It,FeatureSetDefaults:pr,FeatureSetDefaults_FeatureSetEditionDefault:gr,get FeatureSet_EnumType(){return oo},get FeatureSet_FieldPresence(){return io},get FeatureSet_JsonFormat(){return lo},get FeatureSet_MessageEncoding(){return ao},get FeatureSet_RepeatedFieldEncoding(){return Ti},get FeatureSet_Utf8Validation(){return so},Field:Sr,FieldDescriptorProto:st,get FieldDescriptorProto_Label(){return Xe},get FieldDescriptorProto_Type(){return Fe},FieldMask:Er,FieldOptions:Lt,get FieldOptions_CType(){return Vr},FieldOptions_EditionDefault:ln,get FieldOptions_JSType(){return On},get FieldOptions_OptionRetention(){return zr},get FieldOptions_OptionTargetType(){return cr},get Field_Cardinality(){return Ui},get Field_Kind(){return qi},FileDescriptorProto:He,FileDescriptorSet:ut,FileOptions:jt,get FileOptions_OptimizeMode(){return Dn},FloatValue:Bn,GeneratedCodeInfo:yr,GeneratedCodeInfo_Annotation:br,get GeneratedCodeInfo_Annotation_Semantic(){return uo},Int32Value:Un,Int64Value:jn,ListValue:Ln,get LongType(){return I},Message:y,MessageOptions:Jt,Method:kr,MethodDescriptorProto:xt,get MethodIdempotency(){return et},get MethodKind(){return xe},MethodOptions:hr,get MethodOptions_IdempotencyLevel(){return Kr},Mixin:Nr,get NullValue(){return _i},OneofDescriptorProto:rt,OneofOptions:Sn,Option:hn,get ScalarType(){return E},ServiceDescriptorProto:vt,ServiceOptions:fr,SourceCodeInfo:mr,SourceCodeInfo_Location:vr,SourceContext:Vn,StringValue:Ei,Struct:Cn,get Syntax(){return zn},Timestamp:co,Type:Wr,UInt32Value:Jn,UInt64Value:qn,UninterpretedOption:Ft,UninterpretedOption_NamePart:dr,Value:mn,Version:wr,get WireType(){return W},codegenInfo:Ae,createDescriptorSet:zs,createRegistry:Ku,createRegistryFromDescriptors:Wu,proto2:te,proto3:ce,protoBase64:Qe,protoDelimited:ot,protoDouble:ye,protoInt64:Q,toPlainMessage:Xs},Symbol.toStringTag,{value:"Module"}));function Zs(n){const e=x[n];return typeof e!="string"?n.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}class qt extends Error{constructor(e,t=x.Unknown,r,i,o){super(tc(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(r!=null?r:{}),this.details=i!=null?i:[],this.cause=o}static from(e,t=x.Unknown){return e instanceof qt?e:e instanceof Error?e.name=="AbortError"?new qt(e.message,x.Canceled):new qt(e.message,t,void 0,void 0,e):new qt(String(e),t,void 0,void 0,e)}findDetails(e){const t="typeName"in e?{findMessage:i=>i===e.typeName?e:void 0}:e,r=[];for(const i of this.details){if(i instanceof y){t.findMessage(i.getType().typeName)&&r.push(i);continue}const o=t.findMessage(i.type);if(o)try{r.push(o.fromBinary(i.value))}catch{}}return r}}function tc(n,e){return n.length?`[${Zs(e)}] ${n}`:`[${Zs(e)}]`}function nc(n,e,t){try{const r=Qe.dec(n);return e?e.fromBinary(r,t):r}catch(r){throw qt.from(r,x.DataLoss)}}function rc(n,e){const t={};for(const[r,i]of Object.entries(n.methods)){const o=e(Object.assign(Object.assign({},i),{localName:r,service:n}));o!=null&&(t[r]=o)}return t}function Qs(n){let e,t=new Uint8Array(0);function r(i){const o=new Uint8Array(t.length+i.length);o.set(t),o.set(i,t.length),t=o}return new ReadableStream({start(){e=n.getReader()},async pull(i){let o;for(;;){if(o===void 0&&t.byteLength>=5){let P=0;for(let B=1;B<5;B++)P=(P<<8)+t[B];o={flags:t[0],length:P}}if(o!==void 0&&t.byteLength>=o.length+5)break;const O=await e.read();if(O.done)break;r(O.value)}if(o===void 0){if(t.byteLength==0){i.close();return}i.error(new qt("premature end of stream",x.DataLoss));return}const p=t.subarray(5,5+o.length);t=t.subarray(5+o.length),i.enqueue({flags:o.flags,data:p})}})}function ea(n,e){const t=new Uint8Array(e.length+5);t.set(e,5);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.setUint8(0,n),r.setUint32(1,e.length),t}var ic=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(p){return new Promise(function(O,P){p=n[o](p),i(O,P,p.done,p.value)})}}function i(o,p,O,P){Promise.resolve(P).then(function(B){o({value:B,done:O})},p)}},fo=globalThis&&globalThis.__await||function(n){return this instanceof fo?(this.v=n,this):new fo(n)},oc=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},p("next"),p("throw"),p("return"),i[Symbol.asyncIterator]=function(){return this},i;function p(ne){r[ne]&&(i[ne]=function(me){return new Promise(function(Ne,Me){o.push([ne,me,Ne,Me])>1||O(ne,me)})})}function O(ne,me){try{P(r[ne](me))}catch(Ne){pe(o[0][3],Ne)}}function P(ne){ne.value instanceof fo?Promise.resolve(ne.value.v).then(B,K):pe(o[0][2],ne)}function B(ne){O("next",ne)}function K(ne){O("throw",ne)}function pe(ne,me){ne(me),o.shift(),o.length&&O(o[0][0],o[0][1])}},sc=globalThis&&globalThis.__asyncDelegator||function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=n[i]?function(p){return(t=!t)?{value:fo(n[i](p)),done:!1}:o?o(p):p}:o}};function ac(n){return oc(this,arguments,function*(){yield fo(yield*sc(ic(n)))})}var ta=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(p){return new Promise(function(O,P){p=n[o](p),i(O,P,p.done,p.value)})}}function i(o,p,O,P){Promise.resolve(P).then(function(B){o({value:B,done:O})},p)}},Ji=globalThis&&globalThis.__await||function(n){return this instanceof Ji?(this.v=n,this):new Ji(n)},lc=globalThis&&globalThis.__asyncDelegator||function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=n[i]?function(p){return(t=!t)?{value:Ji(n[i](p)),done:!1}:o?o(p):p}:o}},uc=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},p("next"),p("throw"),p("return"),i[Symbol.asyncIterator]=function(){return this},i;function p(ne){r[ne]&&(i[ne]=function(me){return new Promise(function(Ne,Me){o.push([ne,me,Ne,Me])>1||O(ne,me)})})}function O(ne,me){try{P(r[ne](me))}catch(Ne){pe(o[0][3],Ne)}}function P(ne){ne.value instanceof Ji?Promise.resolve(ne.value.v).then(B,K):pe(o[0][2],ne)}function B(ne){O("next",ne)}function K(ne){O("throw",ne)}function pe(ne,me){ne(me),o.shift(),o.length&&O(o[0][0],o[0][1])}};function cc(n,e){return rc(n,t=>{switch(t.kind){case xe.Unary:return fc(e,n,t);case xe.ServerStreaming:return hc(e,n,t);case xe.ClientStreaming:return dc(e,n,t);case xe.BiDiStreaming:return pc(e,n,t);default:return null}})}function fc(n,e,t){return async function(r,i){var o,p;const O=await n.unary(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);return(o=i==null?void 0:i.onHeader)===null||o===void 0||o.call(i,O.header),(p=i==null?void 0:i.onTrailer)===null||p===void 0||p.call(i,O.trailer),O.message}}function hc(n,e,t){return function(r,i){return na(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,ac([r]),i==null?void 0:i.contextValues),i)}}function dc(n,e,t){return async function(r,i){var o,p,O,P,B,K;const pe=await n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues);(B=i==null?void 0:i.onHeader)===null||B===void 0||B.call(i,pe.header);let ne;try{for(var me=!0,Ne=ta(pe.message),Me;Me=await Ne.next(),o=Me.done,!o;me=!0)P=Me.value,me=!1,ne=P}catch(qe){p={error:qe}}finally{try{!me&&!o&&(O=Ne.return)&&await O.call(Ne)}finally{if(p)throw p.error}}if(!ne)throw new qt("protocol error: missing response message",x.Internal);return(K=i==null?void 0:i.onTrailer)===null||K===void 0||K.call(i,pe.trailer),ne}}function pc(n,e,t){return function(r,i){return na(n.stream(e,t,i==null?void 0:i.signal,i==null?void 0:i.timeoutMs,i==null?void 0:i.headers,r,i==null?void 0:i.contextValues),i)}}function na(n,e){const t=function(){var r,i;return uc(this,arguments,function*(){const o=yield Ji(n);(r=e==null?void 0:e.onHeader)===null||r===void 0||r.call(e,o.header),yield Ji(yield*lc(ta(o.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,o.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>t.next()})}}function gc(...n){const e=new AbortController,t=n.filter(i=>i!==void 0).concat(e.signal);for(const i of t){if(i.aborted){r.apply(i);break}i.addEventListener("abort",r)}function r(){e.signal.aborted||e.abort(ra(this));for(const i of t)i.removeEventListener("abort",r)}return e}function mc(n){const e=new AbortController,t=()=>{e.abort(new qt("the operation timed out",x.DeadlineExceeded))};let r;return n!==void 0&&(n<=0?t():r=setTimeout(t,n)),{signal:e.signal,cleanup:()=>clearTimeout(r)}}function ra(n){if(!n.aborted)return;if(n.reason!==void 0)return n.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function ia(){return{get(n){return n.id in this?this[n.id]:n.defaultValue},set(n,e){return this[n.id]=e,this},delete(n){return delete this[n.id],this}}}const us=128;function oa(n){const e=new Headers,t=new TextDecoder().decode(n).split(`\r
`);for(const r of t){if(r==="")continue;const i=r.indexOf(":");if(i>0){const o=r.substring(0,i).trim(),p=r.substring(i+1).trim();e.append(o,p)}}return e}const vc="Content-Type",yc="Grpc-Timeout",sa="Grpc-Status",aa="Grpc-Message",bc="Grpc-Status-Details-Bin",Tc="User-Agent",_c="X-User-Agent",Ec="X-Grpc-Web",wc="application/grpc-web+proto",Oc="application/grpc-web+json";class Zr extends y{constructor(e){super(),this.code=0,this.message="",this.details=[],ce.util.initPartial(e,this)}static fromBinary(e,t){return new Zr().fromBinary(e,t)}static fromJson(e,t){return new Zr().fromJson(e,t)}static fromJsonString(e,t){return new Zr().fromJsonString(e,t)}static equals(e,t){return ce.util.equals(Zr,e,t)}}Zr.runtime=ce,Zr.typeName="google.rpc.Status",Zr.fields=ce.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:An,repeated:!0}]);const Sc="0";function la(n){var e;const t=n.get(bc);if(t!=null){const i=nc(t,Zr);if(i.code==0)return;const o=new qt(i.message,i.code,n);return o.details=i.details.map(p=>({type:p.typeUrl.substring(p.typeUrl.lastIndexOf("/")+1),value:p.value})),o}const r=n.get(sa);if(r!=null){if(r===Sc)return;const i=parseInt(r,10);return i in x?new qt(decodeURIComponent((e=n.get(aa))!==null&&e!==void 0?e:""),i,n):new qt(`invalid grpc-status: ${r}`,x.Internal,n)}}function ua(n,e,t){const r=typeof e=="string"?e:e.typeName,i=typeof t=="string"?t:t.name;return n.toString().replace(/\/?$/,`/${r}/${i}`)}function ca(n,e){return e instanceof y?e:new n(e)}function Ac(n,e){function t(r){return r.done===!0?r:{done:r.done,value:ca(n,r.value)}}return{[Symbol.asyncIterator](){const r=e[Symbol.asyncIterator](),i={next:()=>r.next().then(t)};return r.throw!==void 0&&(i.throw=o=>r.throw(o).then(t)),r.return!==void 0&&(i.return=o=>r.return(o).then(t)),i}}}function kc(n){var e;const t=Object.assign({},n);return(e=t.ignoreUnknownFields)!==null&&e!==void 0||(t.ignoreUnknownFields=!0),t}function fa(n,e,t,r){const i=e?ha(n.I,r):da(n.I,t);return{parse:(e?ha(n.O,r):da(n.O,t)).parse,serialize:i.serialize}}function ha(n,e){return{parse(t){try{return n.fromBinary(t,e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new qt(`parse binary: ${i}`,x.InvalidArgument)}},serialize(t){try{return t.toBinary(e)}catch(r){const i=r instanceof Error?r.message:String(r);throw new qt(`serialize binary: ${i}`,x.Internal)}}}}function da(n,e){var t,r;const i=(t=e==null?void 0:e.textEncoder)!==null&&t!==void 0?t:new TextEncoder,o=(r=e==null?void 0:e.textDecoder)!==null&&r!==void 0?r:new TextDecoder,p=kc(e);return{parse(O){try{const P=o.decode(O);return n.fromJsonString(P,p)}catch(P){throw qt.from(P,x.InvalidArgument)}},serialize(O){try{const P=O.toJsonString(p);return i.encode(P)}catch(P){throw qt.from(P,x.Internal)}}}}function Nc(n){const e=ga(n.next,n.interceptors),[t,r,i]=pa(n),o=Object.assign(Object.assign({},n.req),{message:ca(n.req.method.I,n.req.message),signal:t});return e(o).then(p=>(i(),p),r)}function xc(n){const e=ga(n.next,n.interceptors),[t,r,i]=pa(n),o=Object.assign(Object.assign({},n.req),{message:Ac(n.req.method.I,n.req.message),signal:t});let p=!1;return t.addEventListener("abort",function(){var O,P;const B=n.req.message[Symbol.asyncIterator]();p||(O=B.throw)===null||O===void 0||O.call(B,this.reason).catch(()=>{}),(P=B.return)===null||P===void 0||P.call(B).catch(()=>{})}),e(o).then(O=>Object.assign(Object.assign({},O),{message:{[Symbol.asyncIterator](){const P=O.message[Symbol.asyncIterator]();return{next(){return P.next().then(B=>(B.done==!0&&(p=!0,i()),B),r)}}}}}),r)}function pa(n){const{signal:e,cleanup:t}=mc(n.timeoutMs),r=gc(n.signal,e);return[r.signal,function(o){const p=qt.from(e.aborted?ra(e):o);return r.abort(p),t(),Promise.reject(p)},function(){t(),r.abort()}]}function ga(n,e){var t;return(t=e==null?void 0:e.concat().reverse().reduce((r,i)=>i(r),n))!==null&&t!==void 0?t:n}function Ic(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function ma(n,e){const t=la(n);if(t)throw e.forEach((r,i)=>{t.metadata.append(i,r)}),t}function va(n,e,t,r){const i=new Headers(t!=null?t:{});return i.set(vc,n?wc:Oc),i.set(Ec,"1"),i.set(_c,"connect-es/1.2.0"),r&&i.set(Tc,"connect-es/1.2.0"),e!==void 0&&i.set(yc,`${e}m`),i}function Pc(n){switch(n){case 400:return x.Internal;case 401:return x.Unauthenticated;case 403:return x.PermissionDenied;case 404:return x.Unimplemented;case 429:return x.Unavailable;case 502:return x.Unavailable;case 503:return x.Unavailable;case 504:return x.Unavailable;default:return x.Unknown}}function ya(n,e){var t;if(n>=200&&n<300){const r=la(e);if(r)throw r;return{foundStatus:e.has(sa)}}throw new qt(decodeURIComponent((t=e.get(aa))!==null&&t!==void 0?t:`HTTP ${n}`),Pc(n),e)}var wi=globalThis&&globalThis.__await||function(n){return this instanceof wi?(this.v=n,this):new wi(n)},Rc=globalThis&&globalThis.__asyncGenerator||function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},p("next"),p("throw"),p("return"),i[Symbol.asyncIterator]=function(){return this},i;function p(ne){r[ne]&&(i[ne]=function(me){return new Promise(function(Ne,Me){o.push([ne,me,Ne,Me])>1||O(ne,me)})})}function O(ne,me){try{P(r[ne](me))}catch(Ne){pe(o[0][3],Ne)}}function P(ne){ne.value instanceof wi?Promise.resolve(ne.value.v).then(B,K):pe(o[0][2],ne)}function B(ne){O("next",ne)}function K(ne){O("throw",ne)}function pe(ne,me){ne(me),o.shift(),o.length&&O(o[0][0],o[0][1])}};function Dc(n){var e;Ic();const t=(e=n.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(r,i,o,p,O,P,B){var K;const{serialize:pe,parse:ne}=fa(i,t,n.jsonOptions,n.binaryOptions);return p=p===void 0?n.defaultTimeoutMs:p<=0?void 0:p,await Nc({interceptors:n.interceptors,signal:o,timeoutMs:p,req:{stream:!1,service:r,method:i,url:ua(n.baseUrl,r,i),init:{method:"POST",credentials:(K=n.credentials)!==null&&K!==void 0?K:"same-origin",redirect:"error",mode:"cors"},header:va(t,p,O,!1),contextValues:B!=null?B:ia(),message:P},next:async me=>{var Ne;const qe=await((Ne=n.fetch)!==null&&Ne!==void 0?Ne:globalThis.fetch)(me.url,Object.assign(Object.assign({},me.init),{headers:me.header,signal:me.signal,body:ea(0,pe(me.message))}));if(ya(qe.status,qe.headers),!qe.body)throw"missing response body";const ht=Qs(qe.body).getReader();let At,gt;for(;;){const _t=await ht.read();if(_t.done)break;const{flags:Ot,data:Wt}=_t.value;if(Ot===us){if(At!==void 0)throw"extra trailer";At=oa(Wt);continue}if(gt!==void 0)throw"extra message";gt=ne(Wt)}if(At===void 0)throw"missing trailer";if(ma(At,qe.headers),gt===void 0)throw"missing message";return{stream:!1,header:qe.headers,message:gt,trailer:At}}})},async stream(r,i,o,p,O,P,B){var K;const{serialize:pe,parse:ne}=fa(i,t,n.jsonOptions,n.binaryOptions);function me(Me,qe,ht,At){return Rc(this,arguments,function*(){const _t=Qs(Me).getReader();if(qe){if(!(yield wi(_t.read())).done)throw"extra data for trailers-only";return yield wi(void 0)}let Ot=!1;for(;;){const Wt=yield wi(_t.read());if(Wt.done)break;const{flags:Js,data:Pi}=Wt.value;if((Js&us)===us){if(Ot)throw"extra trailer";Ot=!0;const Do=oa(Pi);ma(Do,At),Do.forEach((sd,ad)=>ht.set(ad,sd));continue}if(Ot)throw"extra message";yield yield wi(ne(Pi))}if(!Ot)throw"missing trailer"})}async function Ne(Me){if(i.kind!=xe.ServerStreaming)throw"The fetch API does not support streaming request bodies";const qe=await Me[Symbol.asyncIterator]().next();if(qe.done==!0)throw"missing request message";return ea(0,pe(qe.value))}return p=p===void 0?n.defaultTimeoutMs:p<=0?void 0:p,xc({interceptors:n.interceptors,signal:o,timeoutMs:p,req:{stream:!0,service:r,method:i,url:ua(n.baseUrl,r,i),init:{method:"POST",credentials:(K=n.credentials)!==null&&K!==void 0?K:"same-origin",redirect:"error",mode:"cors"},header:va(t,p,O,!1),contextValues:B!=null?B:ia(),message:P},next:async Me=>{var qe;const At=await((qe=n.fetch)!==null&&qe!==void 0?qe:globalThis.fetch)(Me.url,Object.assign(Object.assign({},Me.init),{headers:Me.header,signal:Me.signal,body:await Ne(Me.message)})),{foundStatus:gt}=ya(At.status,At.headers);if(!At.body)throw"missing response body";const _t=new Headers;return Object.assign(Object.assign({},Me),{header:At.headers,trailer:_t,message:me(At.body,gt,_t,At.headers)})}})}}}var Ee={exports:{}},Ze=Ee.exports;Object.defineProperty(Ze,"__esModule",{value:!0});const{proto3:We,StringValue:cs,Timestamp:Fi}=ls,qo=We.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),ba=We.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),Cc=We.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:Jo},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:gs}}]),Lc=We.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:za},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Ta,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:ze},{no:6,name:"is_removed",kind:"scalar",T:8}]),Ta=We.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:_a},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Ea,repeated:!0},{no:4,name:"presence_change",kind:"message",T:$a}]),_a=We.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),Ea=We.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:wa,oneof:"body"},{no:2,name:"add",kind:"message",T:Oa,oneof:"body"},{no:3,name:"move",kind:"message",T:Sa,oneof:"body"},{no:4,name:"remove",kind:"message",T:Aa,oneof:"body"},{no:5,name:"edit",kind:"message",T:ka,oneof:"body"},{no:6,name:"select",kind:"message",T:Na,oneof:"body"},{no:7,name:"style",kind:"message",T:xa,oneof:"body"},{no:8,name:"increase",kind:"message",T:Ia,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Pa,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:Ra,oneof:"body"}]),wa=We.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Uo},{no:4,name:"executed_at",kind:"message",T:ze}],{localName:"Operation_Set"}),Oa=We.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"prev_created_at",kind:"message",T:ze},{no:3,name:"value",kind:"message",T:Uo},{no:4,name:"executed_at",kind:"message",T:ze}],{localName:"Operation_Add"}),Sa=We.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"prev_created_at",kind:"message",T:ze},{no:3,name:"created_at",kind:"message",T:ze},{no:4,name:"executed_at",kind:"message",T:ze}],{localName:"Operation_Move"}),Aa=We.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"created_at",kind:"message",T:ze},{no:3,name:"executed_at",kind:"message",T:ze}],{localName:"Operation_Remove"}),ka=We.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"from",kind:"message",T:Oi},{no:3,name:"to",kind:"message",T:Oi},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:ze}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:ze},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),Na=We.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"from",kind:"message",T:Oi},{no:3,name:"to",kind:"message",T:Oi},{no:4,name:"executed_at",kind:"message",T:ze}],{localName:"Operation_Select"}),xa=We.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"from",kind:"message",T:Oi},{no:3,name:"to",kind:"message",T:Oi},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:ze},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:ze}}],{localName:"Operation_Style"}),Ia=We.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"value",kind:"message",T:Uo},{no:3,name:"executed_at",kind:"message",T:ze}],{localName:"Operation_Increase"}),Pa=We.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"from",kind:"message",T:ho},{no:3,name:"to",kind:"message",T:ho},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:ze}},{no:5,name:"contents",kind:"message",T:Ja,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:ze}],{localName:"Operation_TreeEdit"}),Ra=We.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:ze},{no:2,name:"from",kind:"message",T:ho},{no:3,name:"to",kind:"message",T:ho},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:ze},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:ze}}],{localName:"Operation_TreeStyle"}),Uo=We.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:ze},{no:2,name:"moved_at",kind:"message",T:ze},{no:3,name:"removed_at",kind:"message",T:ze},{no:4,name:"type",kind:"enum",T:We.getEnumType(qo)},{no:5,name:"value",kind:"scalar",T:12}]),Jo=We.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:Da,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Ca,oneof:"body"},{no:3,name:"primitive",kind:"message",T:La,oneof:"body"},{no:5,name:"text",kind:"message",T:Ma,oneof:"body"},{no:6,name:"counter",kind:"message",T:Ba,oneof:"body"},{no:7,name:"tree",kind:"message",T:ja,oneof:"body"}]),Da=We.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:qa,repeated:!0},{no:2,name:"created_at",kind:"message",T:ze},{no:3,name:"moved_at",kind:"message",T:ze},{no:4,name:"removed_at",kind:"message",T:ze}],{localName:"JSONElement_JSONObject"}),Ca=We.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:fs,repeated:!0},{no:2,name:"created_at",kind:"message",T:ze},{no:3,name:"moved_at",kind:"message",T:ze},{no:4,name:"removed_at",kind:"message",T:ze}],{localName:"JSONElement_JSONArray"}),La=We.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:We.getEnumType(qo)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:ze},{no:4,name:"moved_at",kind:"message",T:ze},{no:5,name:"removed_at",kind:"message",T:ze}],{localName:"JSONElement_Primitive"}),Ma=We.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:Ua,repeated:!0},{no:2,name:"created_at",kind:"message",T:ze},{no:3,name:"moved_at",kind:"message",T:ze},{no:4,name:"removed_at",kind:"message",T:ze}],{localName:"JSONElement_Text"}),Ba=We.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:We.getEnumType(qo)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:ze},{no:4,name:"moved_at",kind:"message",T:ze},{no:5,name:"removed_at",kind:"message",T:ze}],{localName:"JSONElement_Counter"}),ja=We.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:ps,repeated:!0},{no:2,name:"created_at",kind:"message",T:ze},{no:3,name:"moved_at",kind:"message",T:ze},{no:4,name:"removed_at",kind:"message",T:ze}],{localName:"JSONElement_Tree"}),qa=We.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:Jo}]),fs=We.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:fs},{no:2,name:"element",kind:"message",T:Jo}]),hs=We.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:ze}]),Ua=We.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:ds},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:ze},{no:4,name:"ins_prev_id",kind:"message",T:ds},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:hs}}]),ds=We.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:ze},{no:2,name:"offset",kind:"scalar",T:5}]),ps=We.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:$i},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:ze},{no:5,name:"ins_prev_id",kind:"message",T:$i},{no:6,name:"ins_next_id",kind:"message",T:$i},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:hs}}]),Ja=We.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:ps,repeated:!0}]),$i=We.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:ze},{no:2,name:"offset",kind:"scalar",T:5}]),ho=We.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:$i},{no:2,name:"left_sibling_id",kind:"message",T:$i}]),Mc=We.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Fi}]),Bc=We.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Fi},{no:9,name:"updated_at",kind:"message",T:Fi}]),jc=We.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:cs},{no:2,name:"auth_webhook_url",kind:"message",T:cs},{no:3,name:"auth_webhook_methods",kind:"message",T:Fa},{no:4,name:"client_deactivate_threshold",kind:"message",T:cs}]),Fa=We.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"}),qc=We.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Fi},{no:5,name:"accessed_at",kind:"message",T:Fi},{no:6,name:"updated_at",kind:"message",T:Fi}]),$a=We.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:We.getEnumType(Va)},{no:2,name:"presence",kind:"message",T:gs}]),Va=We.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),gs=We.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),za=We.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),Oi=We.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:ze},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),ze=We.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),Ka=We.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),Uc=We.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:We.getEnumType(ba)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Ka}]);Ze.ValueType=qo,Ze.DocEventType=ba,Ze.Snapshot=Cc,Ze.ChangePack=Lc,Ze.Change=Ta,Ze.ChangeID=_a,Ze.Operation=Ea,Ze.Operation_Set=wa,Ze.Operation_Add=Oa,Ze.Operation_Move=Sa,Ze.Operation_Remove=Aa,Ze.Operation_Edit=ka,Ze.Operation_Select=Na,Ze.Operation_Style=xa,Ze.Operation_Increase=Ia,Ze.Operation_TreeEdit=Pa,Ze.Operation_TreeStyle=Ra,Ze.JSONElementSimple=Uo,Ze.JSONElement=Jo,Ze.JSONElement_JSONObject=Da,Ze.JSONElement_JSONArray=Ca,Ze.JSONElement_Primitive=La,Ze.JSONElement_Text=Ma,Ze.JSONElement_Counter=Ba,Ze.JSONElement_Tree=ja,Ze.RHTNode=qa,Ze.RGANode=fs,Ze.NodeAttr=hs,Ze.TextNode=Ua,Ze.TextNodeID=ds,Ze.TreeNode=ps,Ze.TreeNodes=Ja,Ze.TreeNodeID=$i,Ze.TreePos=ho,Ze.User=Mc,Ze.Project=Bc,Ze.UpdatableProjectFields=jc,Ze.UpdatableProjectFields_AuthWebhookMethods=Fa,Ze.DocumentSummary=qc,Ze.PresenceChange=$a,Ze.PresenceChange_ChangeType=Va,Ze.Presence=gs,Ze.Checkpoint=za,Ze.TextNodePos=Oi,Ze.TimeTicket=ze,Ze.DocEventBody=Ka,Ze.DocEvent=Uc;const Ya=(Ee.exports==null?{}:Ee.exports).default||Ee.exports,ct=(Ee.exports==null?{}:Ee.exports).ValueType,Fo=(Ee.exports==null?{}:Ee.exports).DocEventType,Ga=(Ee.exports==null?{}:Ee.exports).Snapshot,Wa=(Ee.exports==null?{}:Ee.exports).ChangePack,Ha=(Ee.exports==null?{}:Ee.exports).Change,$o=(Ee.exports==null?{}:Ee.exports).ChangeID,ms=(Ee.exports==null?{}:Ee.exports).Operation,Xa=(Ee.exports==null?{}:Ee.exports).Operation_Set,Za=(Ee.exports==null?{}:Ee.exports).Operation_Add,Qa=(Ee.exports==null?{}:Ee.exports).Operation_Move,el=(Ee.exports==null?{}:Ee.exports).Operation_Remove,tl=(Ee.exports==null?{}:Ee.exports).Operation_Edit,Jc=(Ee.exports==null?{}:Ee.exports).Operation_Select,nl=(Ee.exports==null?{}:Ee.exports).Operation_Style,rl=(Ee.exports==null?{}:Ee.exports).Operation_Increase,il=(Ee.exports==null?{}:Ee.exports).Operation_TreeEdit,ol=(Ee.exports==null?{}:Ee.exports).Operation_TreeStyle,Si=(Ee.exports==null?{}:Ee.exports).JSONElementSimple,xr=(Ee.exports==null?{}:Ee.exports).JSONElement,sl=(Ee.exports==null?{}:Ee.exports).JSONElement_JSONObject,al=(Ee.exports==null?{}:Ee.exports).JSONElement_JSONArray,ll=(Ee.exports==null?{}:Ee.exports).JSONElement_Primitive,ul=(Ee.exports==null?{}:Ee.exports).JSONElement_Text,cl=(Ee.exports==null?{}:Ee.exports).JSONElement_Counter,fl=(Ee.exports==null?{}:Ee.exports).JSONElement_Tree,hl=(Ee.exports==null?{}:Ee.exports).RHTNode,dl=(Ee.exports==null?{}:Ee.exports).RGANode,vs=(Ee.exports==null?{}:Ee.exports).NodeAttr,pl=(Ee.exports==null?{}:Ee.exports).TextNode,gl=(Ee.exports==null?{}:Ee.exports).TextNodeID,ml=(Ee.exports==null?{}:Ee.exports).TreeNode,vl=(Ee.exports==null?{}:Ee.exports).TreeNodes,yl=(Ee.exports==null?{}:Ee.exports).TreeNodeID,bl=(Ee.exports==null?{}:Ee.exports).TreePos,Fc=(Ee.exports==null?{}:Ee.exports).User,$c=(Ee.exports==null?{}:Ee.exports).Project,Vc=(Ee.exports==null?{}:Ee.exports).UpdatableProjectFields,zc=(Ee.exports==null?{}:Ee.exports).UpdatableProjectFields_AuthWebhookMethods,Kc=(Ee.exports==null?{}:Ee.exports).DocumentSummary,ys=(Ee.exports==null?{}:Ee.exports).PresenceChange,po=(Ee.exports==null?{}:Ee.exports).PresenceChange_ChangeType,Tl=(Ee.exports==null?{}:Ee.exports).Presence,_l=(Ee.exports==null?{}:Ee.exports).Checkpoint,El=(Ee.exports==null?{}:Ee.exports).TextNodePos,wl=(Ee.exports==null?{}:Ee.exports).TimeTicket,Yc=(Ee.exports==null?{}:Ee.exports).DocEventBody,Gc=(Ee.exports==null?{}:Ee.exports).DocEvent,Wc=Object.freeze(Object.defineProperty({__proto__:null,Change:Ha,ChangeID:$o,ChangePack:Wa,Checkpoint:_l,DocEvent:Gc,DocEventBody:Yc,DocEventType:Fo,DocumentSummary:Kc,JSONElement:xr,JSONElementSimple:Si,JSONElement_Counter:cl,JSONElement_JSONArray:al,JSONElement_JSONObject:sl,JSONElement_Primitive:ll,JSONElement_Text:ul,JSONElement_Tree:fl,NodeAttr:vs,Operation:ms,Operation_Add:Za,Operation_Edit:tl,Operation_Increase:rl,Operation_Move:Qa,Operation_Remove:el,Operation_Select:Jc,Operation_Set:Xa,Operation_Style:nl,Operation_TreeEdit:il,Operation_TreeStyle:ol,Presence:Tl,PresenceChange:ys,PresenceChange_ChangeType:po,Project:$c,RGANode:dl,RHTNode:hl,Snapshot:Ga,TextNode:pl,TextNodeID:gl,TextNodePos:El,TimeTicket:wl,TreeNode:ml,TreeNodeID:yl,TreeNodes:vl,TreePos:bl,UpdatableProjectFields:Vc,UpdatableProjectFields_AuthWebhookMethods:zc,User:Fc,ValueType:ct,default:Ya},Symbol.toStringTag,{value:"Module"}));var ft={exports:{}},$t=ft.exports;Object.defineProperty($t,"__esModule",{value:!0});const{proto3:Yt}=ls,{ChangePack:si,DocEvent:Hc}=Ya||Wc,Xc=Yt.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),Zc=Yt.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Qc=Yt.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),ef=Yt.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),tf=Yt.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:si}]),nf=Yt.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:si}]),rf=Yt.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:si},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),of=Yt.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:si}]),sf=Yt.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),af=Yt.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:Ol,oneof:"body"},{no:2,name:"event",kind:"message",T:Hc,oneof:"body"}]),Ol=Yt.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),lf=Yt.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:si}]),uf=Yt.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:si}]),cf=Yt.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:si},{no:4,name:"push_only",kind:"scalar",T:8}]),ff=Yt.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:si}]),hf=Yt.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),df=Yt.makeMessageType("yorkie.v1.BroadcastResponse",[]);$t.ActivateClientRequest=Xc,$t.ActivateClientResponse=Zc,$t.DeactivateClientRequest=Qc,$t.DeactivateClientResponse=ef,$t.AttachDocumentRequest=tf,$t.AttachDocumentResponse=nf,$t.DetachDocumentRequest=rf,$t.DetachDocumentResponse=of,$t.WatchDocumentRequest=sf,$t.WatchDocumentResponse=af,$t.WatchDocumentResponse_Initialization=Ol,$t.RemoveDocumentRequest=lf,$t.RemoveDocumentResponse=uf,$t.PushPullChangesRequest=cf,$t.PushPullChangesResponse=ff,$t.BroadcastRequest=hf,$t.BroadcastResponse=df;const Sl=(ft.exports==null?{}:ft.exports).default||ft.exports,pf=(ft.exports==null?{}:ft.exports).ActivateClientRequest,gf=(ft.exports==null?{}:ft.exports).ActivateClientResponse,mf=(ft.exports==null?{}:ft.exports).DeactivateClientRequest,vf=(ft.exports==null?{}:ft.exports).DeactivateClientResponse,yf=(ft.exports==null?{}:ft.exports).AttachDocumentRequest,bf=(ft.exports==null?{}:ft.exports).AttachDocumentResponse,Tf=(ft.exports==null?{}:ft.exports).DetachDocumentRequest,_f=(ft.exports==null?{}:ft.exports).DetachDocumentResponse,Ef=(ft.exports==null?{}:ft.exports).WatchDocumentRequest,wf=(ft.exports==null?{}:ft.exports).WatchDocumentResponse,Of=(ft.exports==null?{}:ft.exports).WatchDocumentResponse_Initialization,Sf=(ft.exports==null?{}:ft.exports).RemoveDocumentRequest,Af=(ft.exports==null?{}:ft.exports).RemoveDocumentResponse,kf=(ft.exports==null?{}:ft.exports).PushPullChangesRequest,Nf=(ft.exports==null?{}:ft.exports).PushPullChangesResponse,xf=(ft.exports==null?{}:ft.exports).BroadcastRequest,If=(ft.exports==null?{}:ft.exports).BroadcastResponse,Pf=Object.freeze(Object.defineProperty({__proto__:null,ActivateClientRequest:pf,ActivateClientResponse:gf,AttachDocumentRequest:yf,AttachDocumentResponse:bf,BroadcastRequest:xf,BroadcastResponse:If,DeactivateClientRequest:mf,DeactivateClientResponse:vf,DetachDocumentRequest:Tf,DetachDocumentResponse:_f,PushPullChangesRequest:kf,PushPullChangesResponse:Nf,RemoveDocumentRequest:Sf,RemoveDocumentResponse:Af,WatchDocumentRequest:Ef,WatchDocumentResponse:wf,WatchDocumentResponse_Initialization:Of,default:Sl},Symbol.toStringTag,{value:"Module"}));var Vi={exports:{}},Al=Vi.exports;Object.defineProperty(Al,"__esModule",{value:!0});const{ActivateClientRequest:Rf,ActivateClientResponse:Df,AttachDocumentRequest:Cf,AttachDocumentResponse:Lf,BroadcastRequest:Mf,BroadcastResponse:Bf,DeactivateClientRequest:jf,DeactivateClientResponse:qf,DetachDocumentRequest:Uf,DetachDocumentResponse:Jf,PushPullChangesRequest:Ff,PushPullChangesResponse:$f,RemoveDocumentRequest:Vf,RemoveDocumentResponse:zf,WatchDocumentRequest:Kf,WatchDocumentResponse:Yf}=Sl||Pf,{MethodKind:ai}=ls,Gf={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Rf,O:Df,kind:ai.Unary},deactivateClient:{name:"DeactivateClient",I:jf,O:qf,kind:ai.Unary},attachDocument:{name:"AttachDocument",I:Cf,O:Lf,kind:ai.Unary},detachDocument:{name:"DetachDocument",I:Uf,O:Jf,kind:ai.Unary},removeDocument:{name:"RemoveDocument",I:Vf,O:zf,kind:ai.Unary},pushPullChanges:{name:"PushPullChanges",I:Ff,O:$f,kind:ai.Unary},watchDocument:{name:"WatchDocument",I:Kf,O:Yf,kind:ai.ServerStreaming},broadcast:{name:"Broadcast",I:Mf,O:Bf,kind:ai.Unary}}};Al.YorkieService=Gf,(Vi.exports==null?{}:Vi.exports).default||Vi.exports;const Wf=(Vi.exports==null?{}:Vi.exports).YorkieService;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Kn=null;try{Kn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function at(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}at.prototype.__isLong__,Object.defineProperty(at.prototype,"__isLong__",{value:!0});function Qt(n){return(n&&n.__isLong__)===!0}function kl(n){var e=Math.clz32(n&-n);return n?31-e:e}at.isLong=Qt;var Nl={},xl={};function Ai(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=xl[n],r)?r:(t=bt(n,0,!0),i&&(xl[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=Nl[n],r)?r:(t=bt(n,n<0?-1:0,!1),i&&(Nl[n]=t),t))}at.fromInt=Ai;function Yn(n,e){if(isNaN(n))return e?Qr:Qn;if(e){if(n<0)return Qr;if(n>=Pl)return Ml}else{if(n<=-Rl)return vn;if(n+1>=Rl)return Ll}return n<0?Yn(-n,e).neg():bt(n%zi|0,n/zi|0,e)}at.fromNumber=Yn;function bt(n,e,t){return new at(n,e,t)}at.fromBits=bt;var Vo=Math.pow;function bs(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?Qr:Qn;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return bs(n.substring(1),e,t).neg();for(var i=Yn(Vo(t,8)),o=Qn,p=0;p<n.length;p+=8){var O=Math.min(8,n.length-p),P=parseInt(n.substring(p,p+O),t);if(O<8){var B=Yn(Vo(t,O));o=o.mul(B).add(Yn(P))}else o=o.mul(i),o=o.add(Yn(P))}return o.unsigned=e,o}at.fromString=bs;function Zn(n,e){return typeof n=="number"?Yn(n,e):typeof n=="string"?bs(n,e):bt(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}at.fromValue=Zn;var Il=1<<16,Hf=1<<24,zi=Il*Il,Pl=zi*zi,Rl=Pl/2,Dl=Ai(Hf),Qn=Ai(0);at.ZERO=Qn;var Qr=Ai(0,!0);at.UZERO=Qr;var Ki=Ai(1);at.ONE=Ki;var Cl=Ai(1,!0);at.UONE=Cl;var Ts=Ai(-1);at.NEG_ONE=Ts;var Ll=bt(-1,2147483647,!1);at.MAX_VALUE=Ll;var Ml=bt(-1,-1,!0);at.MAX_UNSIGNED_VALUE=Ml;var vn=bt(0,-2147483648,!1);at.MIN_VALUE=vn;var Oe=at.prototype;Oe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Oe.toNumber=function(){return this.unsigned?(this.high>>>0)*zi+(this.low>>>0):this.high*zi+(this.low>>>0)},Oe.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(vn)){var t=Yn(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=Yn(Vo(e,6),this.unsigned),p=this,O="";;){var P=p.div(o),B=p.sub(P.mul(o)).toInt()>>>0,K=B.toString(e);if(p=P,p.isZero())return K+O;for(;K.length<6;)K="0"+K;O=""+K+O}},Oe.getHighBits=function(){return this.high},Oe.getHighBitsUnsigned=function(){return this.high>>>0},Oe.getLowBits=function(){return this.low},Oe.getLowBitsUnsigned=function(){return this.low>>>0},Oe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(vn)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1},Oe.isZero=function(){return this.high===0&&this.low===0},Oe.eqz=Oe.isZero,Oe.isNegative=function(){return!this.unsigned&&this.high<0},Oe.isPositive=function(){return this.unsigned||this.high>=0},Oe.isOdd=function(){return(this.low&1)===1},Oe.isEven=function(){return(this.low&1)===0},Oe.equals=function(e){return Qt(e)||(e=Zn(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},Oe.eq=Oe.equals,Oe.notEquals=function(e){return!this.eq(e)},Oe.neq=Oe.notEquals,Oe.ne=Oe.notEquals,Oe.lessThan=function(e){return this.comp(e)<0},Oe.lt=Oe.lessThan,Oe.lessThanOrEqual=function(e){return this.comp(e)<=0},Oe.lte=Oe.lessThanOrEqual,Oe.le=Oe.lessThanOrEqual,Oe.greaterThan=function(e){return this.comp(e)>0},Oe.gt=Oe.greaterThan,Oe.greaterThanOrEqual=function(e){return this.comp(e)>=0},Oe.gte=Oe.greaterThanOrEqual,Oe.ge=Oe.greaterThanOrEqual,Oe.compare=function(e){if(Qt(e)||(e=Zn(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},Oe.comp=Oe.compare,Oe.negate=function(){return!this.unsigned&&this.eq(vn)?vn:this.not().add(Ki)},Oe.neg=Oe.negate,Oe.add=function(e){Qt(e)||(e=Zn(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,o=this.low&65535,p=e.high>>>16,O=e.high&65535,P=e.low>>>16,B=e.low&65535,K=0,pe=0,ne=0,me=0;return me+=o+B,ne+=me>>>16,me&=65535,ne+=i+P,pe+=ne>>>16,ne&=65535,pe+=r+O,K+=pe>>>16,pe&=65535,K+=t+p,K&=65535,bt(ne<<16|me,K<<16|pe,this.unsigned)},Oe.subtract=function(e){return Qt(e)||(e=Zn(e)),this.add(e.neg())},Oe.sub=Oe.subtract,Oe.multiply=function(e){if(this.isZero())return this;if(Qt(e)||(e=Zn(e)),Kn){var t=Kn.mul(this.low,this.high,e.low,e.high);return bt(t,Kn.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?Qr:Qn;if(this.eq(vn))return e.isOdd()?vn:Qn;if(e.eq(vn))return this.isOdd()?vn:Qn;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Dl)&&e.lt(Dl))return Yn(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,o=this.low>>>16,p=this.low&65535,O=e.high>>>16,P=e.high&65535,B=e.low>>>16,K=e.low&65535,pe=0,ne=0,me=0,Ne=0;return Ne+=p*K,me+=Ne>>>16,Ne&=65535,me+=o*K,ne+=me>>>16,me&=65535,me+=p*B,ne+=me>>>16,me&=65535,ne+=i*K,pe+=ne>>>16,ne&=65535,ne+=o*B,pe+=ne>>>16,ne&=65535,ne+=p*P,pe+=ne>>>16,ne&=65535,pe+=r*K+i*B+o*P+p*O,pe&=65535,bt(me<<16|Ne,pe<<16|ne,this.unsigned)},Oe.mul=Oe.multiply,Oe.divide=function(e){if(Qt(e)||(e=Zn(e)),e.isZero())throw Error("division by zero");if(Kn){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Kn.div_u:Kn.div_s)(this.low,this.high,e.low,e.high);return bt(t,Kn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Qr:Qn;var r,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Qr;if(e.gt(this.shru(1)))return Cl;o=Qr}else{if(this.eq(vn)){if(e.eq(Ki)||e.eq(Ts))return vn;if(e.eq(vn))return Ki;var p=this.shr(1);return r=p.div(e).shl(1),r.eq(Qn)?e.isNegative()?Ki:Ts:(i=this.sub(e.mul(r)),o=r.add(i.div(e)),o)}else if(e.eq(vn))return this.unsigned?Qr:Qn;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=Qn}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var O=Math.ceil(Math.log(r)/Math.LN2),P=O<=48?1:Vo(2,O-48),B=Yn(r),K=B.mul(e);K.isNegative()||K.gt(i);)r-=P,B=Yn(r,this.unsigned),K=B.mul(e);B.isZero()&&(B=Ki),o=o.add(B),i=i.sub(K)}return o},Oe.div=Oe.divide,Oe.modulo=function(e){if(Qt(e)||(e=Zn(e)),Kn){var t=(this.unsigned?Kn.rem_u:Kn.rem_s)(this.low,this.high,e.low,e.high);return bt(t,Kn.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},Oe.mod=Oe.modulo,Oe.rem=Oe.modulo,Oe.not=function(){return bt(~this.low,~this.high,this.unsigned)},Oe.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},Oe.clz=Oe.countLeadingZeros,Oe.countTrailingZeros=function(){return this.low?kl(this.low):kl(this.high)+32},Oe.ctz=Oe.countTrailingZeros,Oe.and=function(e){return Qt(e)||(e=Zn(e)),bt(this.low&e.low,this.high&e.high,this.unsigned)},Oe.or=function(e){return Qt(e)||(e=Zn(e)),bt(this.low|e.low,this.high|e.high,this.unsigned)},Oe.xor=function(e){return Qt(e)||(e=Zn(e)),bt(this.low^e.low,this.high^e.high,this.unsigned)},Oe.shiftLeft=function(e){return Qt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?bt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):bt(0,this.low<<e-32,this.unsigned)},Oe.shl=Oe.shiftLeft,Oe.shiftRight=function(e){return Qt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?bt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):bt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},Oe.shr=Oe.shiftRight,Oe.shiftRightUnsigned=function(e){return Qt(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?bt(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?bt(this.high,0,this.unsigned):bt(this.high>>>e-32,0,this.unsigned)},Oe.shru=Oe.shiftRightUnsigned,Oe.shr_u=Oe.shiftRightUnsigned,Oe.rotateLeft=function(e){var t;return Qt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?bt(this.high,this.low,this.unsigned):e<32?(t=32-e,bt(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,bt(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},Oe.rotl=Oe.rotateLeft,Oe.rotateRight=function(e){var t;return Qt(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?bt(this.high,this.low,this.unsigned):e<32?(t=32-e,bt(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,bt(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},Oe.rotr=Oe.rotateRight,Oe.toSigned=function(){return this.unsigned?bt(this.low,this.high,!1):this},Oe.toUnsigned=function(){return this.unsigned?this:bt(this.low,this.high,!0)},Oe.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},Oe.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},Oe.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},at.fromBytes=function(e,t,r){return r?at.fromBytesLE(e,t):at.fromBytesBE(e,t)},at.fromBytesLE=function(e,t){return new at(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},at.fromBytesBE=function(e,t){return new at(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var yt=(n=>(n.Ok="ok",n.ClientNotActive="client-not-active",n.Unimplemented="unimplemented",n.Unsupported="unsupported",n.DocumentNotAttached="document-not-attached",n.DocumentNotDetached="document-not-detached",n.DocumentRemoved="document-removed",n.InvalidObjectKey="invalid-object-key",n.InvalidArgument="invalid-argument",n))(yt||{});class Tt extends Error{constructor(e,t){super(t),_(this,"name","YorkieError"),_(this,"stack"),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function er(n){if(n instanceof Map){const e=Array.from(n);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(n))}const Bl=n=>n?Object.entries(n).length===0:!0,Yi=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.stringify(r);return e},Gi=n=>{const e={};for(const[t,r]of Object.entries(n))e[t]=JSON.parse(r);return e};var li=(n=>(n.Put="put",n.Clear="clear",n))(li||{});class _s{constructor(e,t){_(this,"context"),_(this,"presence"),this.context=e,this.presence=t}set(e,t){for(const r of Object.keys(e))this.presence[r]=e[r];this.context.setPresenceChange({type:"put",presence:er(this.presence)}),this.context.setReversePresence(e,t)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const zo="000000000000000000000000",Xf="FFFFFFFFFFFFFFFFFFFFFFFF";class dn{constructor(e,t,r){_(this,"lamport"),_(this,"delimiter"),_(this,"actorID"),this.lamport=e,this.delimiter=t,this.actorID=r}static of(e,t,r){return new dn(e,t,r)}static fromStruct(e){return dn.of(at.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new dn(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const t=this.actorID.localeCompare(e.actorID);return t!==0?t:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Es=0,Zf=4294967295,Qf=at.MAX_VALUE,Ir=new dn(at.fromNumber(0),Es,zo);new dn(at.fromNumber(1),Es+1,zo);const Ko=new dn(Qf,Zf,Xf);var kn=(n=>(n[n.Trivial=0]="Trivial",n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal",n))(kn||{});let ki=2;function eh(n){ki=n}const we={trivial:(...n)=>{ki>0||typeof console<"u"&&console.log("YORKIE T:",...n)},debug:(...n)=>{ki>1||typeof console<"u"&&console.log("YORKIE D:",...n)},info:(...n)=>{ki>2||typeof console<"u"&&console.log("YORKIE I:",...n)},warn:(...n)=>{ki>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...n):console.log("YORKIE W:",...n))},error:(...n)=>{ki>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...n):console.log("YORKIE E:",...n))},fatal:(n,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${n}`)},isEnabled:n=>ki<=n};function Pr(n){return n.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class go{constructor(e){_(this,"createdAt"),_(this,"movedAt"),_(this,"removedAt"),this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class ui extends go{constructor(e){super(e)}}class ws{constructor(e,t){_(this,"strKey"),_(this,"value"),this.strKey=e,this.value=t}static of(e,t){return new ws(e,t)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class mo{constructor(){_(this,"nodeMapByKey"),_(this,"nodeMapByCreatedAt"),this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new mo}set(e,t,r){let i;const o=this.nodeMapByKey.get(e);o!=null&&!o.isRemoved()&&o.remove(r)&&(i=o.getValue());const p=ws.of(e,t);return this.nodeMapByCreatedAt.set(t.getCreatedAt().toIDString(),p),(o==null||r.after(o.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,p),t.setMovedAt(r)),i}delete(e,t){this.nodeMapByCreatedAt.has(e.toIDString())||we.fatal(`fail to find ${e.toIDString()}`);const r=this.nodeMapByCreatedAt.get(e.toIDString());return r.remove(t),r.getValue()}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return t.getStrKey()}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!t){we.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const r=this.nodeMapByKey.get(t.getStrKey());t===r&&this.nodeMapByKey.delete(r.getStrKey()),this.nodeMapByCreatedAt.delete(t.getValue().getCreatedAt().toIDString())}deleteByKey(e,t){const r=this.nodeMapByKey.get(e);if(r!=null&&!!r.remove(t))return r.getValue()}has(e){const t=this.nodeMapByKey.get(e);return t==null?!1:!t.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const t=this.nodeMapByKey.get(e);if(!(!t||t.isRemoved()))return t}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class yn extends ui{constructor(e,t){super(e),_(this,"memberNodes"),this.memberNodes=t}static create(e,t){if(!t)return new yn(e,mo.create());const r=mo.create();for(const[i,o]of Object.entries(t))r.set(i,o.deepcopy(),o.getCreatedAt());return new yn(e,r)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,t,r){return this.memberNodes.set(e,t,r)}delete(e,t){return this.memberNodes.delete(e,t)}deleteByKey(e,t){return this.memberNodes.deleteByKey(e,t)}get(e){const t=this.memberNodes.get(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.memberNodes.getByID(e);return t==null?void 0:t.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[t,r]of this)e.push(`"${Pr(t)}":${r.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[t,r]of this){const{createdAt:i,value:o,type:p}=r.toJSForTest();e[t]={key:t,createdAt:i,value:o,type:p}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[t]of this)e.push(t);return e}toSortedJSON(){var e;const t=Array();for(const[i]of this)t.push(i);const r=[];for(const i of t.sort()){const o=(e=this.memberNodes.get(i))==null?void 0:e.getValue();r.push(`"${Pr(i)}":${o.toSortedJSON()}`)}return`{${r.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=yn.create(this.getCreatedAt());for(const t of this.memberNodes)e.memberNodes.set(t.getStrKey(),t.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const t of this.memberNodes){const r=t.getValue();if(e(r,this))return;r instanceof ui&&r.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const t of this.memberNodes)e.has(t.getStrKey())||(e.add(t.getStrKey()),t.isRemoved()||(yield[t.getStrKey(),t.getValue()]))}}var wt=(n=>(n.Local="local",n.Remote="remote",n.UndoRedo="undoredo",n))(wt||{});class tr{constructor(e,t){_(this,"parentCreatedAt"),_(this,"executedAt"),this.parentCreatedAt=e,this.executedAt=t}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class jl{constructor(e){_(this,"value"),_(this,"left"),_(this,"right"),_(this,"parent"),_(this,"weight"),this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class vo{constructor(e){_(this,"root"),this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let t=this.root;for(;;)if(t.hasLeft()&&e<=t.getLeftWeight())t=t.getLeft();else if(t.hasRight()&&t.getLeftWeight()+t.getLength()<e)e-=t.getLeftWeight()+t.getLength(),t=t.getRight();else{e-=t.getLeftWeight();break}return e>t.getLength()&&we.fatal(`out of index range: pos: ${e} > node.length: ${t.getLength()}`),[t,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let t=0,r=e,i;for(;r;)(!i||i===r.getRight())&&(t+=r.getLength()+(r.hasLeft()?r.getLeftWeight():0)),i=r,r=r.getParent();return t-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,t){return e?(this.splayNode(e),this.root=t,t.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(t),t.setLeft(e),e.setParent(t),e.setRight(),this.updateWeight(e),this.updateWeight(t),t):(this.root=t,t)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const t=new vo(e.getLeft());t.root&&t.root.setParent();const r=new vo(e.getRight());if(r.root&&r.root.setParent(),t.root){const i=t.getRightmost();t.splayNode(i),t.root.setRight(r.root),r.root&&r.root.setParent(t.root),this.root=t.root}else this.root=r.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,t){if(!t){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(t),t.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const t=[];this.traversePostorder(e.getRight(),t);for(const r of t)r.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(t=>`[${t.getWeight()},${t.getLength()}]${t.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const t of e)if(t.getWeight()!=t.getLength()+t.getLeftWeight()+t.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,t){!e||(this.traverseInorder(e.getLeft(),t),t.push(e),this.traverseInorder(e.getRight(),t))}traversePostorder(e,t){!e||(this.traversePostorder(e.getLeft(),t),this.traversePostorder(e.getRight(),t),t.push(e))}rotateLeft(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setRight(e.getLeft()),t.hasRight()&&t.getRight().setParent(t),e.setLeft(t),e.getLeft().setParent(e),this.updateWeight(t),this.updateWeight(e)}rotateRight(e){const t=e.getParent();t.hasParent()?t===t.getParent().getLeft()?t.getParent().setLeft(e):t.getParent().setRight(e):this.root=e,e.setParent(t.getParent()),t.setLeft(e.getRight()),t.hasLeft()&&t.getLeft().setParent(t),e.setRight(t),e.getRight().setParent(e),this.updateWeight(t),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Ut=(n=>(n[n.Null=0]="Null",n[n.Boolean=1]="Boolean",n[n.Integer=2]="Integer",n[n.Long=3]="Long",n[n.Double=4]="Double",n[n.String=5]="String",n[n.Bytes=6]="Bytes",n[n.Date=7]="Date",n))(Ut||{});class St extends go{constructor(e,t){super(t),_(this,"valueType"),_(this,"value"),this.valueType=St.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,t){return new St(e,t)}static valueFromBytes(e,t){switch(e){case 0:return null;case 1:return!!t[0];case 2:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 4:{const r=new DataView(t.buffer);return t.forEach(function(i,o){r.setUint8(o,i)}),r.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(t);case 3:return at.fromBytesLE(Array.from(t));case 6:return t;case 7:return new Date(at.fromBytesLE(Array.from(t),!0).toNumber());default:throw new Tt(yt.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${Pr(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=St.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof at)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return St.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}case 5:return new TextEncoder().encode(this.value);case 3:{const t=this.value.toBytesLE();return Uint8Array.from(t)}case 6:return this.value;case 7:{const e=this.value,t=at.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(t)}default:throw new Tt(yt.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class Yo extends jl{constructor(e){super(e),_(this,"prev"),_(this,"next"),this.value=e}static createAfter(e,t){const r=new Yo(t),i=e.next;return e.next=r,r.prev=e,r.next=i,i&&(i.prev=r),r}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class yo{constructor(){_(this,"dummyHead"),_(this,"last"),_(this,"nodeMapByIndex"),_(this,"nodeMapByCreatedAt");const e=St.of(0,Ir);e.setRemovedAt(Ir),this.dummyHead=new Yo(e),this.last=this.dummyHead,this.nodeMapByIndex=new vo,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new yo}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,t){let r=this.nodeMapByCreatedAt.get(e.toIDString());for(r||we.fatal(`cant find the given node: ${e.toIDString()}`);r.getNext()&&r.getNext().getPositionedAt().after(t);)r=r.getNext();return r}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,t,r=t.getCreatedAt()){const i=this.findNextBeforeExecutedAt(e,r),o=Yo.createAfter(i,t);i===this.last&&(this.last=o),this.nodeMapByIndex.insertAfter(i,o),this.nodeMapByCreatedAt.set(o.getCreatedAt().toIDString(),o)}moveAfter(e,t,r){const i=this.nodeMapByCreatedAt.get(e.toIDString());i||we.fatal(`cant find the given node: ${e.toIDString()}`);const o=this.nodeMapByCreatedAt.get(t.toIDString());o||we.fatal(`cant find the given node: ${t.toIDString()}`),i!==o&&(!o.getValue().getMovedAt()||r.after(o.getValue().getMovedAt()))&&(this.release(o),this.insertAfter(i.getCreatedAt(),o.getValue(),r),o.getValue().setMovedAt(r))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const t=this.nodeMapByCreatedAt.get(e.toIDString());if(!!t)return String(this.nodeMapByIndex.indexOf(t))}purge(e){const t=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());t||we.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(t)}getByIndex(e){if(e>=this.length)return;const[t,r]=this.nodeMapByIndex.find(e);let i=t;if(e===0&&t===this.dummyHead||r>0)do i&&(i=i.getNext());while(i&&i.isRemoved());return i}getPrevCreatedAt(e){let t=this.nodeMapByCreatedAt.get(e.toIDString());do t=t.getPrev();while(this.dummyHead!==t&&t.isRemoved());return t.getValue().getCreatedAt()}delete(e,t){const r=this.nodeMapByCreatedAt.get(e.toIDString()),i=r.isRemoved();return r.remove(t)&&!i&&this.nodeMapByIndex.splayNode(r),r.getValue()}deleteByIndex(e,t){const r=this.getByIndex(e);if(!!r)return r.remove(t)&&this.nodeMapByIndex.splayNode(r),r.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const t of this){const r=`${t.getCreatedAt().toIDString()}:${t.getValue().toJSON()}`;t.isRemoved()?e.push(`{${r}}`):e.push(`[${r}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class Nn extends ui{constructor(e,t){super(e),_(this,"elements"),this.elements=t}static create(e,t){if(!t)return new Nn(e,yo.create());const r=yo.create();for(const i of t)r.insertAfter(r.getLastCreatedAt(),i.deepcopy());return new Nn(e,r)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,t){this.elements.insertAfter(e,t)}moveAfter(e,t,r){this.elements.moveAfter(e,t,r)}get(e){const t=this.elements.getByIndex(e);return t==null?void 0:t.getValue()}getByID(e){const t=this.elements.getByID(e);return t==null?void 0:t.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,t){return this.elements.delete(e,t)}deleteByIndex(e,t){return this.elements.deleteByIndex(e,t)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const t of this.elements){const r=t.getValue();if(e(r,this))return;r instanceof ui&&r.getDescendants(e)}}toJSON(){const e=[];for(const t of this)e.push(t.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let t=0;t<this.length;t++){const{createdAt:r,value:i,type:o}=this.get(t).toJSForTest();e[t]={key:String(t),createdAt:r,value:i,type:o}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=Nn.create(this.getCreatedAt());for(const t of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),t.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class ci extends tr{constructor(e,t,r){super(e,r),_(this,"createdAt"),this.createdAt=t}static create(e,t,r){return new ci(e,t,r)}execute(e,t){var r;const i=e.findByCreatedAt(this.getParentCreatedAt());if(i||we.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof ui||we.fatal(`only object and array can execute remove: ${i}`),t===wt.UndoRedo){let B=i.getByID(this.createdAt);for(;B;){if(B.getRemovedAt())return;B=(r=e.findElementPairByCreatedAt(B.getCreatedAt()))==null?void 0:r.parent}}const o=i.subPathOf(this.createdAt),p=this.toReverseOperation(i),O=i.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(O),{opInfos:i instanceof Nn?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(o)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:o}],reverseOp:p}}toReverseOperation(e){if(e instanceof yn){const t=e.subPathOf(this.createdAt);if(t!==void 0){const r=e.get(t);if(r!==void 0)return Ni.create(t,r.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class Ni extends tr{constructor(e,t,r,i){super(r,i),_(this,"key"),_(this,"value"),this.key=e,this.value=t}static create(e,t,r,i){return new Ni(e,t,r,i)}execute(e,t){var r;const i=e.findByCreatedAt(this.getParentCreatedAt());if(i||we.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof yn||we.fatal("fail to execute, only object can execute set"),t===wt.UndoRedo){let B=i;for(;B;){if(B.getRemovedAt())return;B=(r=e.findElementPairByCreatedAt(B.getCreatedAt()))==null?void 0:r.parent}}const o=i.get(this.key),p=this.toReverseOperation(o),O=this.value.deepcopy(),P=i.set(this.key,O,this.getExecutedAt());return t===wt.UndoRedo&&e.findByCreatedAt(O.getCreatedAt())&&e.deregisterElement(O),e.registerElement(O,i),P&&e.registerRemovedElement(P),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:p}}toReverseOperation(e){let t=ci.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(t=Ni.create(this.key,e.deepcopy(),this.getParentCreatedAt())),t}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class bo extends tr{constructor(e,t,r,i){super(e,i),_(this,"prevCreatedAt"),_(this,"value"),this.prevCreatedAt=t,this.value=r}static create(e,t,r,i){return new bo(e,t,r,i)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Nn||we.fatal("fail to execute, only array can execute add");const r=t,i=this.value.deepcopy();return r.insertAfter(this.prevCreatedAt,i),e.registerElement(i,r),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(r.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class fi extends tr{constructor(e,t,r,i){super(e,i),_(this,"prevCreatedAt"),_(this,"createdAt"),this.prevCreatedAt=t,this.createdAt=r}static create(e,t,r,i){return new fi(e,t,r,i)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Nn||we.fatal("fail to execute, only array can execute move");const r=t,i=Number(r.subPathOf(this.createdAt));r.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const o=Number(r.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:o,previousIndex:i}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class Wi{constructor(e,t,r,i){_(this,"key"),_(this,"value"),_(this,"updatedAt"),_(this,"_isRemoved"),this.key=e,this.value=t,this.updatedAt=r,this._isRemoved=i}static of(e,t,r,i){return new Wi(e,t,r,i)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class ei{constructor(){_(this,"nodeMapByKey"),_(this,"numberOfRemovedElement"),this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new ei}set(e,t,r){const i=this.nodeMapByKey.get(e);if(i&&i.isRemoved()&&r.after(i.getUpdatedAt())&&(this.numberOfRemovedElement-=1),i===void 0||r.after(i.getUpdatedAt())){const o=Wi.of(e,t,r,!1);return this.nodeMapByKey.set(e,o),i!==void 0&&i.isRemoved()?[i,o]:[void 0,o]}return i.isRemoved()?[i,void 0]:[void 0,void 0]}remove(e,t){const r=this.nodeMapByKey.get(e),i=[];if(r===void 0||t.after(r.getUpdatedAt())){if(r===void 0){this.numberOfRemovedElement+=1;const O=Wi.of(e,"",t,!0);return this.nodeMapByKey.set(e,O),i.push(O),i}const o=r.isRemoved();o||(this.numberOfRemovedElement+=1),o&&i.push(r);const p=Wi.of(e,r.getValue(),t,!0);return this.nodeMapByKey.set(e,p),i.push(p),i}return i}has(e){if(this.nodeMapByKey.has(e)){const t=this.nodeMapByKey.get(e);return t!==void 0&&!t.isRemoved()}return!1}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new ei;for(const[,t]of this.nodeMapByKey)e.set(t.getKey(),t.getValue(),t.getUpdatedAt());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[t,r]of this.nodeMapByKey)r.isRemoved()||e.push(`"${Pr(t)}":"${Pr(r.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[t,r]of this.nodeMapByKey)r.isRemoved()||(e[t]=r.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const t=this.nodeMapByKey.get(e.getKey());t==null||t.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class To{constructor(e){_(this,"attributes"),_(this,"content"),this.attributes=ei.create(),this.content=e}static create(e){return new To(e)}get length(){return this.content.length}substring(e,t){const r=new To(this.content.substring(e,t));return r.attributes=this.attributes.deepcopy(),r}setAttr(e,t,r){return this.attributes.set(e,t,r)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=Pr(this.content),t=this.attributes.toObject(),r=[];for(const[i,o]of Object.entries(t)){const p=JSON.parse(o),O=typeof p=="string"?`"${Pr(i)}":"${Pr(p)}"`:`"${Pr(i)}":${String(p)}`;r.push(O)}return r.sort(),r.length===0?`{"val":"${e}"}`:`{"attrs":{${r.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof Wi&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const t of this.attributes)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}class Gn extends go{constructor(e,t){super(t),_(this,"rgaTreeSplit"),this.rgaTreeSplit=e}static create(e,t){return new Gn(e,t)}edit(e,t,r,i,o){const p=t?To.create(t):void 0;if(p&&i)for(const[ne,me]of Object.entries(i))p.setAttr(ne,me,r);const[O,P,B,K]=this.rgaTreeSplit.edit(e,r,p,o),pe=K.map(ne=>({...ne,value:ne.value?{attributes:Gi(ne.value.getAttributes()),content:ne.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[P,pe,B,[O,O]]}setStyle(e,t,r,i){const[,o]=this.rgaTreeSplit.findNodeWithSplit(e[1],r),[,p]=this.rgaTreeSplit.findNodeWithSplit(e[0],r),O=[],P=this.rgaTreeSplit.findBetween(p,o),B=new Map,K=[];for(const ne of P){const me=ne.getCreatedAt().getActorID(),Ne=i!=null&&i.size?i.has(me)?i.get(me):Ir:Ko;if(ne.canStyle(r,Ne)){const Me=B.get(me),qe=ne.getCreatedAt();(!Me||qe.after(Me))&&B.set(me,qe),K.push(ne)}}const pe=[];for(const ne of K){if(ne.isRemoved())continue;const[me,Ne]=this.rgaTreeSplit.findIndexesFromRange(ne.createPosRange());O.push({type:"style",actor:r.getActorID(),from:me,to:Ne,value:{attributes:Gi(t)}});for(const[Me,qe]of Object.entries(t)){const[ht]=ne.getValue().setAttr(Me,qe,r);ht!==void 0&&pe.push({parent:ne.getValue(),child:ht})}}return[B,pe,O]}indexRangeToPosRange(e,t){const r=this.rgaTreeSplit.indexToPos(e);return e===t?[r,r]:[r,this.rgaTreeSplit.indexToPos(t)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const t of this.rgaTreeSplit)t.isRemoved()||e.push(t.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const t of this.rgaTreeSplit)if(!t.isRemoved()){const r=t.getValue();e.push({attributes:Gi(r.getAttributes()),content:r.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Gn(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const t of this.rgaTreeSplit){t.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:t});for(const r of t.getValue().getGCPairs())e.push(r)}return e}}class _o extends tr{constructor(e,t,r,i,o,p,O){super(e,O),_(this,"fromPos"),_(this,"toPos"),_(this,"maxCreatedAtMapByActor"),_(this,"content"),_(this,"attributes"),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=i,this.content=o,this.attributes=p}static create(e,t,r,i,o,p,O){return new _o(e,t,r,i,o,p,O)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Gn||we.fatal("fail to execute, only Text can execute edit");const r=t,[,i,o]=r.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const p of o)e.registerGCPair(p);return{opInfos:i.map(({from:p,to:O,value:P})=>({type:"edit",from:p,to:O,value:P,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),i=this.content;return`${e}.EDIT(${t},${r},${i})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Eo extends tr{constructor(e,t,r,i,o,p){super(e,p),_(this,"fromPos"),_(this,"toPos"),_(this,"maxCreatedAtMapByActor"),_(this,"attributes"),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=i,this.attributes=o}static create(e,t,r,i,o,p){return new Eo(e,t,r,i,o,p)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Gn||we.fatal("fail to execute, only Text can execute edit");const r=t,[,i,o]=r.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const p of i)e.registerGCPair(p);return{opInfos:o.map(({from:p,to:O,value:P})=>({type:"style",from:p,to:O,value:P,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=this.fromPos.toTestString(),r=this.toPos.toTestString(),i=this.attributes;return`${e}.STYL(${t},${r},${JSON.stringify(i)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const th=2,nh="root",ti="text";function wo(n,e){let t=0;const r=n.children;for(let i=0;i<e;i++){const o=r[i];!o||o.isRemoved||(t+=o.paddedSize)}return t}class rh{constructor(e,t=[]){if(_(this,"type"),_(this,"parent"),_(this,"_children"),_(this,"size"),this.type=e,this.size=0,this._children=t,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const t=this.isRemoved?-1:1;for(;e;)e.size+=this.paddedSize*t,e=e.parent}get isText(){return this.type===ti}get paddedSize(){return this.size+(this.isText?0:th)}isAncestorOf(e){return ih(this,e)}get nextSibling(){const e=this.parent.findOffset(this),t=this.parent.children[e+1];if(t)return t}splitText(e,t){if(e===0||e===this.size)return;const r=this.value.slice(0,e),i=this.value.slice(e);if(!i.length)return;this.value=r;const o=this.cloneText(e+t);return o.value=i,this.parent.insertAfterInternal(o,this),o}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const t of e)t.parent=this,t.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const t of e)t.parent=this,t.isRemoved||t.updateAncestorsSize()}insertBefore(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r),e.updateAncestorsSize()}insertAfter(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1),e.updateAncestorsSize()}insertAt(e,t){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,t),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const t=this._children.indexOf(e);if(t===-1)throw new Error("child not found");this._children.splice(t,1),e.parent=void 0}splitElement(e,t){const r=this.cloneElement(t);this.parent.insertAfterInternal(r,this),r.updateAncestorsSize();const i=this.children.slice(0,e),o=this.children.slice(e);this._children=i,r._children=o,this.size=this._children.reduce((p,O)=>p+O.paddedSize,0),r.size=r._children.reduce((p,O)=>p+O.paddedSize,0);for(const p of r._children)p.parent=r;return r}insertAfterInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(t);if(r===-1)throw new Error("child not found");this.insertAtInternal(e,r+1)}insertAtInternal(e,t){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(t,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const t=this._children.indexOf(e);return this.allChildren.splice(0,t).filter(i=>!i.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let t=e;for(;t;){const r=this._children.indexOf(t);if(r!==-1)return r;t=t.parent}return-1}}function ih(n,e){if(n===e)return!1;for(;e.parent;){if(e.parent===n)return!0;e=e.parent}return!1}var Mt=(n=>(n.Start="Start",n.End="End",n.Text="Text",n))(Mt||{});function ql(n,e,t,r){if(e>t)throw new Error(`from is greater than to: ${e} > ${t}`);if(e>n.size)throw new Error(`from is out of range: ${e} > ${n.size}`);if(t>n.size)throw new Error(`to is out of range: ${t} > ${n.size}`);if(e===t)return;let i=0;for(const o of n.children){if(e-o.paddedSize<i&&i<t){const p=o.isText?e-i:e-i-1,O=o.isText?t-i:t-i-1,P=!o.isText&&p<0,B=!o.isText&&O>o.size;(o.isText||P)&&r([o,o.isText?"Text":"Start"],B),ql(o,Math.max(0,p),Math.min(O,o.size),r),B&&r([o,"End"],B)}i+=o.paddedSize}}function Os(n,e,t=0){for(const r of n.children)Os(r,e,t+1);e(n,t)}function Ss(n,e,t=0){for(const r of n._children)Ss(r,e,t+1);e(n,t)}function As(n,e,t=!0){if(e>n.size)throw new Error(`index is out of range: ${e} > ${n.size}`);if(n.isText)return{node:n,offset:e};let r=0,i=0;for(const o of n.children){if(t&&o.isText&&o.size>=e-i)return As(o,e-i,t);if(e===i)return{node:n,offset:r};if(!t&&o.paddedSize===e-i)return{node:n,offset:r+1};if(o.paddedSize>e-i)return As(o,e-i-1,t);i+=o.paddedSize,r+=1}return{node:n,offset:r}}function Ul(n){return n.isText||n.children.length===0?n:Ul(n.children[0])}function oh(n,e){if(n.size<e)throw new Error("unacceptable path");for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r.size<e)e-=r.size;else{n=r;break}}return{node:n,offset:e}}class sh{constructor(e){_(this,"root"),this.root=e}tokensBetween(e,t,r){ql(this.root,e,t,r)}traverse(e){Os(this.root,e,0)}traverseAll(e){Ss(this.root,e,0)}findTreePos(e,t=!0){return As(this.root,e,t)}treePosToPath(e){const t=[];let r=e.node;if(r.isText){const i=r.parent.findOffset(r);if(i===-1)throw new Error("invalid treePos");const o=wo(r.parent,i);t.push(o+e.offset),r=r.parent}else if(r.hasTextChild()){const i=wo(r,e.offset);t.push(i)}else t.push(e.offset);for(;r.parent;){const i=r.parent.findOffset(r);if(i===-1)throw new Error("invalid treePos");t.push(i),r=r.parent}return t.reverse()}pathToIndex(e){const t=this.pathToTreePos(e);return this.indexOf(t)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let t=this.root;for(let r=0;r<e.length-1;r++){const i=e[r];if(t=t.children[i],!t)throw new Error("unacceptable path")}if(t.hasTextChild())return oh(t,e[e.length-1]);if(t.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:t,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:t,offset:r}=e;if(t.isText){if(t.size===r){const i=t.nextSibling;return i||t.parent}return t}return t.children.length===r?t:Ul(t.children[r])}indexOf(e){let{node:t}=e;const{offset:r}=e;let i=0,o=1;if(t.isText){i+=r;const p=t.parent,O=p.findOffset(t);if(O===-1)throw new Error("invalid pos");i+=wo(p,O),t=t.parent}else i+=wo(t,r);for(;t!=null&&t.parent;){const p=t.parent,O=p.findOffset(t);if(O===-1)throw new Error("invalid pos");i+=wo(p,O),o++,t=t.parent}return i+o-1}indexToPath(e){const t=this.findTreePos(e);return this.treePosToPath(t)}}const ah=(n,e)=>n===e?0:n<e?-1:1;class lh{constructor(e,t,r){_(this,"key"),_(this,"value"),_(this,"parent"),_(this,"left"),_(this,"right"),_(this,"isRed"),this.key=e,this.value=t,this.isRed=r}}class uh{constructor(e){_(this,"stack"),this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Jl{constructor(e){_(this,"root"),_(this,"comparator"),_(this,"counter"),this.comparator=typeof e<"u"?e:ah,this.counter=0}put(e,t){return this.root=this.putInternal(e,t,this.root),this.root.isRed=!1,t}get(e){const t=this.getInternal(e,this.root);return t?t.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new uh(this.root)}values(){const e=[];for(const t of this.getIterator().stack)e.push(t.value);return e}floorEntry(e){let t=this.root;for(;t;){const r=this.comparator(e,t.key);if(r>0)if(t.right)t.right.parent=t,t=t.right;else return t;else if(r<0)if(t.left)t.left.parent=t,t=t.left;else{let i=t.parent,o=t;for(;i&&o===i.left;)o=i,i=i.parent;return i}else return t}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,t){for(;t;){const r=this.comparator(e,t.key);if(r===0)return t;r<0?t=t.left:r>0&&(t=t.right)}}putInternal(e,t,r){if(!r)return this.counter+=1,new lh(e,t,!0);const i=this.comparator(e,r.key);return i<0?r.left=this.putInternal(e,t,r.left):i>0?r.right=this.putInternal(e,t,r.right):r.value=t,this.isRed(r.right)&&!this.isRed(r.left)&&(r=this.rotateLeft(r)),this.isRed(r.left)&&this.isRed(r.left.left)&&(r=this.rotateRight(r)),this.isRed(r.left)&&this.isRed(r.right)&&this.flipColors(r),r}removeInternal(e,t){if(this.comparator(t,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,t);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(t,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(t,e.key)===0){this.counter-=1;const r=this.min(e.right);e.value=r.value,e.key=r.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,t)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const t=e.right;return e.right=t.left,t.left=e,t.isRed=t.left.isRed,t.left.isRed=!0,t}rotateRight(e){const t=e.left;return e.left=t.right,t.right=e,t.isRed=t.right.isRed,t.right.isRed=!0,t}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class nr{constructor(e,t){_(this,"parentID"),_(this,"leftSiblingID"),this.parentID=e,this.leftSiblingID=t}static of(e,t){return new nr(e,t)}static fromTreePos(e){const{offset:t}=e;let{node:r}=e,i;return r.isText?(r.parent.children[0]===r&&t===0?i=r.parent:i=r,r=r.parent):t===0?i=r:i=r.children[t-1],nr.of(r.id,Gt.of(i.getCreatedAt(),i.getOffset()+t))}getParentID(){return this.parentID}static fromStruct(e){return nr.of(Gt.of(dn.fromStruct(e.parentID.createdAt),e.parentID.offset),Gt.of(dn.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodes(e){const t=this.getParentID(),r=this.getLeftSiblingID(),i=e.findFloorNode(t);let o=e.findFloorNode(r);if(!i||!o)throw new Error(`cannot find node at ${this}`);return!r.equals(t)&&r.getOffset()>0&&r.getOffset()===o.id.getOffset()&&o.insPrevID&&(o=e.findFloorNode(o.insPrevID)),[i,o]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Gt{constructor(e,t){_(this,"createdAt"),_(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new Gt(e,t)}static fromStruct(e){return Gt.of(dn.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class xn extends rh{constructor(e,t,r,i,o){super(t),_(this,"id"),_(this,"removedAt"),_(this,"attrs"),_(this,"insPrevID"),_(this,"insNextID"),_(this,"_value",""),this.id=e,this.removedAt=o,i&&(this.attrs=i),typeof r=="string"?this.value=r:Array.isArray(r)&&(this._children=r)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,t,r,i){return new xn(e,t,r,i)}deepcopy(){var e;const t=new xn(this.id,this.type);return t.removedAt=this.removedAt,t._value=this._value,t.size=this.size,t.attrs=(e=this.attrs)==null?void 0:e.deepcopy(),t._children=this._children.map(r=>{const i=r.deepcopy();return i.parent=t,i}),t.insPrevID=this.insPrevID,t.insNextID=this.insNextID,t}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const t=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),t&&(this.parent.removedAt?this.parent.size-=this.paddedSize:this.updateAncestorsSize())}cloneText(e){return new xn(Gt.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new xn(Gt.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,t,r){const i=this.isText?this.splitText(t,this.id.getOffset()):this.splitElement(t,r);if(i){if(i.insPrevID=this.id,this.insNextID){const o=e.findFloorNode(this.insNextID);o.insPrevID=i.id,i.insNextID=this.insNextID}this.insNextID=i.id,e.registerNode(i)}return i}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,t){return this.isText?!1:!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,t){this.attrs||(this.attrs=new ei);const r=new Array;for(const[i,o]of Object.entries(e))r.push(this.attrs.set(i,o,t));return r}purge(e){this.attrs&&this.attrs.purge(e)}getGCPairs(){const e=[];if(!this.attrs)return e;for(const t of this.attrs)t.getRemovedAt()&&e.push({parent:this,child:t});return e}}function ks(n){var e;if(n.isText){const t=n;return{type:t.type,value:t.value}}return{type:n.type,children:n.children.map(ks),attributes:n.attrs?Gi((e=n.attrs)==null?void 0:e.toObject()):void 0}}function Ns(n){if(n.isText)return n.value;let e="";return n.attrs&&n.attrs.size()&&(e=" "+Array.from(n.attrs).filter(t=>!t.isRemoved()).sort((t,r)=>t.getKey().localeCompare(r.getKey())).map(t=>{const r=JSON.parse(t.getValue());return typeof r=="string"?`${t.getKey()}="${r}"`:`${t.getKey()}="${Pr(t.getValue())}"`}).join(" ")),`<${n.type}${e}>${n.children.map(t=>Ns(t)).join("")}</${n.type}>`}function Fl(n){if(n.isText){const e=n;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:n.type,children:n.children.map(Fl),size:n.size,isRemoved:n.isRemoved}}class Wn extends go{constructor(e,t){super(t),_(this,"indexTree"),_(this,"nodeMapByID"),this.indexTree=new sh(e),this.nodeMapByID=new Jl(Gt.createComparator()),this.indexTree.traverse(r=>{this.nodeMapByID.put(r.id,r)})}static create(e,t){return new Wn(e,t)}findFloorNode(e){const t=this.nodeMapByID.floorEntry(e);if(!(!t||!t.key.getCreatedAt().equals(e.getCreatedAt())))return t.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,t){const[r,i]=e.toTreeNodes(this);let o=i;const p=r===o,O=o.parent&&!p?o.parent:r;if(o.isText&&o.split(this,e.getLeftSiblingID().getOffset()-o.id.getOffset()),t){const P=O.allChildren,B=p?0:P.indexOf(o)+1;for(let K=B;K<P.length;K++){const pe=P[K];if(!pe.id.getCreatedAt().after(t))break;o=pe}}return[O,o]}style(e,t,r,i){const[o,p]=this.findNodesAndSplitText(e[0],r),[O,P]=this.findNodesAndSplitText(e[1],r),B=[],K=t?Gi(t):{},pe=new Map,ne=[];return this.traverseInPosRange(o,p,O,P,([me])=>{const Ne=me.getCreatedAt().getActorID(),Me=i?i.has(Ne)?i.get(Ne):Ir:Ko;if(me.canStyle(r,Me)&&t){const qe=pe.get(Ne),ht=me.getCreatedAt();(!qe||ht.after(qe))&&pe.set(Ne,ht);const At=me.setAttrs(t,r),gt=At.reduce((_t,[,Ot])=>(Ot&&(_t[Ot.getKey()]=K[Ot.getKey()]),_t),{});Object.keys(gt).length>0&&B.push({type:"style",from:this.toIndex(o,p),to:this.toIndex(O,P),fromPath:this.toPath(o,p),toPath:this.toPath(O,P),actor:r.getActorID(),value:gt});for(const[_t]of At)_t&&ne.push({parent:me,child:_t})}}),[pe,ne,B]}removeStyle(e,t,r){const[i,o]=this.findNodesAndSplitText(e[0],r),[p,O]=this.findNodesAndSplitText(e[1],r),P=[],B=[];return this.traverseInPosRange(i,o,p,O,([K])=>{if(!K.isRemoved&&!K.isText&&t){K.attrs||(K.attrs=new ei);for(const pe of t){const ne=K.attrs.remove(pe,r);for(const me of ne)B.push({parent:K,child:me})}P.push({actor:r.getActorID(),type:"removeStyle",from:this.toIndex(i,o),to:this.toIndex(p,O),fromPath:this.toPath(i,o),toPath:this.toPath(p,O),value:t})}}),[B,P]}edit(e,t,r,i,o,p){const[O,P]=this.findNodesAndSplitText(e[0],i),[B,K]=this.findNodesAndSplitText(e[1],i),pe=this.toIndex(O,P),ne=this.toPath(O,P),me=[],Ne=[],Me=[],qe=new Map;this.traverseInPosRange(O,P,B,K,([gt,_t],Ot)=>{if(_t===Mt.Start&&!Ot)for(const Pi of gt.children)Me.push(Pi);const Wt=gt.getCreatedAt().getActorID(),Js=p?p.has(Wt)?p.get(Wt):Ir:Ko;if(gt.canDelete(i,Js)||me.includes(gt.parent)){const Pi=qe.get(Wt),Do=gt.getCreatedAt();(!Pi||Do.after(Pi))&&qe.set(Wt,Do),(_t===Mt.Text||_t===Mt.Start)&&me.push(gt),Ne.push([gt,_t])}});const ht=this.makeDeletionChanges(Ne,i),At=[];for(const gt of me)gt.remove(i),gt.isRemoved&&At.push({parent:this,child:gt});for(const gt of Me)gt.removedAt||O.append(gt);if(r>0){let gt=0,_t=O,Ot=P;for(;gt<r;)_t.split(this,_t.findOffset(Ot)+1,o),Ot=_t,_t=_t.parent,gt++;ht.push({type:"content",from:pe,to:pe,fromPath:ne,toPath:ne,actor:i.getActorID()})}if(t!=null&&t.length){const gt=[];let _t=P;for(const Ot of t)_t===O?O.insertAt(Ot,0):O.insertAfter(Ot,_t),_t=Ot,Ss(Ot,Wt=>{O.isRemoved&&(Wt.remove(i),At.push({parent:this,child:Wt})),this.nodeMapByID.put(Wt.id,Wt)}),Ot.isRemoved||gt.push(Ot);if(gt.length){const Ot=gt.map(Wt=>ks(Wt));ht.length&&ht[ht.length-1].from===pe?ht[ht.length-1].value=Ot:ht.push({type:"content",from:pe,to:pe,fromPath:ne,toPath:ne,actor:i.getActorID(),value:Ot})}}return[ht,At,qe]}editT(e,t,r,i,o){const p=this.findPos(e[0]),O=this.findPos(e[1]);this.edit([p,O],t,r,i,o)}move(e,t,r){throw new Error(`not implemented: ${e}, ${t}, ${r}`)}purge(e){var t;(t=e.parent)==null||t.removeChild(e),this.nodeMapByID.remove(e.id);const r=e.insPrevID,i=e.insNextID;if(r){const o=this.findFloorNode(r);o.insNextID=i}if(i){const o=this.findFloorNode(i);o.insPrevID=r}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(t=>{t.getRemovedAt()&&e.push({parent:this,child:t});for(const r of t.getGCPairs())e.push(r)}),e}findPos(e,t=!0){const r=this.indexTree.findTreePos(e,t);return nr.fromTreePos(r)}pathToPosRange(e){const t=this.pathToIndex(e);return[this.findPos(t),this.findPos(t+1)]}pathToPos(e){const t=this.indexTree.pathToIndex(e);return this.findPos(t)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getIndexTree(){return this.indexTree}toXML(){return Ns(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),t=(r,i=void 0,o=void 0,p=0)=>{var O,P,B,K;let pe,ne,me;const Ne=r.isText?{node:r,offset:0}:i&&o?this.toTreePos(i,o):null;Ne&&(pe=this.indexTree.indexOf(Ne),ne=this.indexTree.treePosToPath(Ne),me=nr.fromTreePos(Ne).toStruct());const Me={type:r.type,parent:i==null?void 0:i.id.toTestString(),size:r.size,id:r.id.toTestString(),removedAt:(O=r.removedAt)==null?void 0:O.toTestString(),insPrev:(P=r.insPrevID)==null?void 0:P.toTestString(),insNext:(B=r.insNextID)==null?void 0:B.toTestString(),value:r.isText?r.value:void 0,isRemoved:r.isRemoved,children:[],depth:p,attributes:r.attrs?Gi((K=r.attrs)==null?void 0:K.toObject()):void 0,index:pe,path:ne,pos:me};for(let qe=0;qe<r.children.length;qe++){const ht=qe===0?r:r.children[qe-1];Me.children.push(t(r.children[qe],r,ht,p+1))}return Me};return t(e)}getRootTreeNode(){return ks(this.indexTree.getRoot())}toTestTreeNode(){return Fl(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new Wn(e.deepcopy(),this.getCreatedAt())}toPath(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.treePosToPath(r):[]}toIndex(e,t){const r=this.toTreePos(e,t);return r?this.indexTree.indexOf(r):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const t=this.findPos(e[0]);return e[0]===e[1]?[t,t]:[t,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[t,r]=e,i=this.findPos(t);return t===r?[i.toStruct(),i.toStruct()]:[i.toStruct(),this.findPos(r).toStruct()]}posRangeToPathRange(e){const[t,r]=this.findNodesAndSplitText(e[0]),[i,o]=this.findNodesAndSplitText(e[1]);return[this.toPath(t,r),this.toPath(i,o)]}posRangeToIndexRange(e){const[t,r]=this.findNodesAndSplitText(e[0]),[i,o]=this.findNodesAndSplitText(e[1]);return[this.toIndex(t,r),this.toIndex(i,o)]}traverseInPosRange(e,t,r,i,o){const p=this.toIndex(e,t),O=this.toIndex(r,i);return this.indexTree.tokensBetween(p,O,o)}toTreePos(e,t){if(!e||!t)return;if(e.isRemoved){let i;for(;e.isRemoved;)i=e,e=i.parent;const o=e.findOffset(i);return{node:e,offset:o}}if(e===t)return{node:e,offset:0};let r=e.findOffset(t);if(!t.isRemoved){if(t.isText)return{node:t,offset:t.paddedSize};r++}return{node:e,offset:r}}makeDeletionChanges(e,t){const r=[],i=[];let o=null,p=null;for(let O=0;O<e.length;O++){const P=e[O],B=e[O+1];o||(o=P),p=P;const K=this.findRightToken(P);(!K||!B||K[0]!==B[0]||K[1]!==B[1])&&(i.push([o,p]),o=null,p=null)}for(const O of i){const[P,B]=O,[K,pe]=this.findLeftToken(P),[ne,me]=B,Ne=pe===Mt.Start?K:K.parent,Me=me===Mt.Start?ne:ne.parent,qe=this.toIndex(Ne,K),ht=this.toIndex(Me,ne);qe<ht&&(r.length>0&&qe===r[r.length-1].to?(r[r.length-1].to=ht,r[r.length-1].toPath=this.toPath(Me,ne)):r.push({type:"content",from:qe,to:ht,fromPath:this.toPath(Ne,K),toPath:this.toPath(Me,ne),actor:t.getActorID()}))}return r.reverse()}findRightToken([e,t]){if(t===Mt.Start){const O=e.allChildren;return O.length>0?[O[0],O[0].isText?Mt.Text:Mt.Start]:[e,Mt.End]}const r=e.parent,i=r.allChildren,o=i.indexOf(e);if(r&&o===i.length-1)return[r,Mt.End];const p=i[o+1];return[p,p.isText?Mt.Text:Mt.Start]}findLeftToken([e,t]){if(t===Mt.End){const O=e.allChildren;if(O.length>0){const P=O[O.length-1];return[P,P.isText?Mt.Text:Mt.End]}return[e,Mt.Start]}const r=e.parent,i=r.allChildren,o=i.indexOf(e);if(r&&o===0)return[r,Mt.Start];const p=i[o-1];return[p,p.isText?Mt.Text:Mt.End]}}class Oo extends tr{constructor(e,t,r,i,o,p,O){super(e,O),_(this,"fromPos"),_(this,"toPos"),_(this,"contents"),_(this,"splitLevel"),_(this,"maxCreatedAtMapByActor"),this.fromPos=t,this.toPos=r,this.contents=i,this.splitLevel=o,this.maxCreatedAtMapByActor=p}static create(e,t,r,i,o,p,O){return new Oo(e,t,r,i,o,p,O)}execute(e){var t;const r=e.findByCreatedAt(this.getParentCreatedAt());r||we.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Wn||we.fatal("fail to execute, only Tree can execute edit");const i=this.getExecutedAt(),o=r,[p,O]=o.edit([this.fromPos,this.toPos],(t=this.contents)==null?void 0:t.map(P=>P.deepcopy()),this.splitLevel,i,(()=>{let P=i.getDelimiter();return this.contents!==void 0&&(P+=this.contents.length),()=>dn.of(i.getLamport(),++P,i.getActorID())})(),this.maxCreatedAtMapByActor);for(const P of O)e.registerGCPair(P);return{opInfos:p.map(({from:P,to:B,value:K,splitLevel:pe,fromPath:ne,toPath:me})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:P,to:B,value:K,splitLevel:pe,fromPath:ne,toPath:me}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,i=this.contents||[];return`${e}.EDIT(${t},${r},${i.map(o=>Ns(o)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class hi{constructor(e,t,r){_(this,"clientSeq"),_(this,"serverSeq"),_(this,"lamport"),_(this,"actor"),this.clientSeq=e,this.lamport=t,this.actor=r}static of(e,t,r){return new hi(e,t,r)}next(){return new hi(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new hi(this.clientSeq,e,this.actor):new hi(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return dn.of(this.lamport,e,this.actor)}setActor(e){return new hi(this.clientSeq,this.lamport,e)}getClientSeq(){return this.clientSeq}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const ch=new hi(0,at.fromInt(0,!0),zo);class xi{constructor({id:e,operations:t,presenceChange:r,message:i}){_(this,"id"),_(this,"operations"),_(this,"presenceChange"),_(this,"message"),this.id=e,this.operations=t||[],this.presenceChange=r,this.message=i}static create({id:e,operations:t,presenceChange:r,message:i}){return new xi({id:e,operations:t,presenceChange:r,message:i})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const t of this.operations)t.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,t,r){const i=[],o=[];for(const p of this.operations){const O=p.execute(e,r);if(!O)continue;const{opInfos:P,reverseOp:B}=O;i.push(...P),B&&o.unshift(B)}return this.presenceChange&&(this.presenceChange.type===li.Put?t.set(this.id.getActorID(),er(this.presenceChange.presence)):t.delete(this.id.getActorID())),{opInfos:i,reverseOps:o}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:Bt.bytesToHex(Bt.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>Bt.bytesToHex(Bt.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:t,operations:r,presenceChange:i,message:o}=e;return xi.create({id:Bt.bytesToChangeID(Bt.hexToBytes(t)),operations:r==null?void 0:r.map(p=>Bt.bytesToOperation(Bt.hexToBytes(p))),presenceChange:i,message:o})}}class Go{constructor(e,t,r,i,o,p){_(this,"documentKey"),_(this,"checkpoint"),_(this,"isRemoved"),_(this,"changes"),_(this,"snapshot"),_(this,"minSyncedTicket"),this.documentKey=e,this.checkpoint=t,this.isRemoved=r,this.changes=i,this.snapshot=o,this.minSyncedTicket=p}static create(e,t,r,i,o,p){return new Go(e,t,r,i,o,p)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Hi{constructor(e,t){_(this,"serverSeq"),_(this,"clientSeq"),this.serverSeq=e,this.clientSeq=t}static of(e,t){return new Hi(e,t)}increaseClientSeq(e){return e===0?this:new Hi(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const t=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,r=Math.max(this.clientSeq,e.clientSeq);return Hi.of(t,r)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const fh=new Hi(at.fromInt(0,!0),0);class Rr{constructor(e,t){_(this,"createdAt"),_(this,"offset"),this.createdAt=e,this.offset=t}static of(e,t){return new Rr(e,t)}static fromStruct(e){return Rr.of(dn.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new Rr(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const hh=Rr.of(Ir,0);class rr{constructor(e,t){_(this,"id"),_(this,"relativeOffset"),this.id=e,this.relativeOffset=t}static of(e,t){return new rr(e,t)}static fromStruct(e){const t=Rr.fromStruct(e.id);return rr.of(t,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return Rr.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class di extends jl{constructor(e,t,r){super(t),_(this,"id"),_(this,"removedAt"),_(this,"prev"),_(this,"next"),_(this,"insPrev"),_(this,"insNext"),this.id=e,this.removedAt=r}static create(e,t){return new di(e,t)}static createComparator(){return(e,t)=>{const r=e.getCreatedAt().compare(t.getCreatedAt());return r!==0?r:e.getOffset()>t.getOffset()?1:e.getOffset()<t.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new di(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,t){const r=!this.removedAt;return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))?r:!1}canStyle(e,t){return!this.getCreatedAt().after(t)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[rr.of(this.id,0),rr.of(this.id,this.getLength())]}deepcopy(){return new di(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const t=this.value;return this.value=t.substring(0,e),t.substring(e,t.length)}toIDString(){return this.id.toIDString()}}class Xi{constructor(){_(this,"head"),_(this,"treeByIndex"),_(this,"treeByID"),this.head=di.create(hh),this.treeByIndex=new vo,this.treeByID=new Jl(di.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Xi}edit(e,t,r,i){const[o,p]=this.findNodeWithSplit(e[1],t),[O,P]=this.findNodeWithSplit(e[0],t),B=this.findBetween(P,p),[K,pe,ne]=this.deleteNodes(B,t,i),me=p?p.getID():o.getID();let Ne=rr.of(me,0);if(r){const qe=this.posToIndex(O.createPosRange()[1],!0),ht=this.insertAfter(O,di.create(Rr.of(t,0),r));K.length&&K[K.length-1].from===qe?K[K.length-1].value=r:K.push({actor:t.getActorID(),from:qe,to:qe,value:r}),Ne=rr.of(ht.getID(),ht.getContentLength())}const Me=[];for(const[,qe]of ne)Me.push({parent:this,child:qe});return[Ne,pe,Me,K]}indexToPos(e){const[t,r]=this.treeByIndex.find(e),i=t;return rr.of(i.getID(),r)}findIndexesFromRange(e){const[t,r]=e;return[this.posToIndex(t,!1),this.posToIndex(r,!0)]}posToIndex(e,t){const r=e.getAbsoluteID(),i=t?this.findFloorNodePreferToLeft(r):this.findFloorNode(r);i||we.fatal(`the node of the given id should be found: ${r.toTestString()}`);const o=this.treeByIndex.indexOf(i),p=i.isRemoved()?0:r.getOffset()-i.getID().getOffset();return o+p}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const t of this)t.isRemoved()||e.push(t.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Xi;let t=this.head.getNext(),r=e.head,i;for(;t;){if(i=e.insertAfter(r,t.deepcopy()),t.hasInsPrev()){const o=e.findNode(t.getInsPrevID());i.setInsPrev(o)}r=i,t=t.getNext()}return e}toTestString(){const e=[];let t=this.head;for(;t;)t.isRemoved()?e.push(`{${t.toTestString()}}`):e.push(`[${t.toTestString()}]`),t=t.getNext();return e.join("")}insertAfter(e,t){const r=e.getNext();return t.setPrev(e),r&&r.setPrev(t),this.treeByID.put(t.getID(),t),this.treeByIndex.insertAfter(e,t),t}findNodeWithSplit(e,t){const r=e.getAbsoluteID();let i=this.findFloorNodePreferToLeft(r);const o=r.getOffset()-i.getID().getOffset();for(this.splitNode(i,o);i.hasNext()&&i.getNext().getCreatedAt().after(t);)i=i.getNext();return[i,i.getNext()]}findFloorNodePreferToLeft(e){let t=this.findFloorNode(e);if(t||we.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&t.getID().getOffset()==e.getOffset()){if(!t.hasInsPrev())return t;t=t.getInsPrev()}return t}findFloorNode(e){const t=this.treeByID.floorEntry(e);if(!!t&&!(!t.key.equals(e)&&!t.key.hasSameCreatedAt(e)))return t.value}findBetween(e,t){const r=[];let i=e;for(;i&&i!==t;)r.push(i),i=i.getNext();return r}splitNode(e,t){if(t>e.getContentLength()&&we.fatal("offset should be less than or equal to length"),t===0)return e;if(t===e.getContentLength())return e.getNext();const r=e.split(t);this.treeByIndex.updateWeight(r),this.insertAfter(e,r);const i=e.getInsNext();return i&&i.setInsPrev(r),r.setInsPrev(e),r}deleteNodes(e,t,r){if(!e.length)return[[],new Map,new Map];const[i,o]=this.filterNodes(e,t,r),p=new Map,O=new Map,P=this.makeChanges(o,t);for(const B of i){const K=B.getCreatedAt().getActorID();(!p.has(K)||B.getID().getCreatedAt().after(p.get(K)))&&p.set(K,B.getID().getCreatedAt()),O.set(B.getID().toIDString(),B),B.remove(t)}return this.deleteIndexNodes(o),[P,p,O]}filterNodes(e,t,r){const i=!!r,o=[],p=[],[O,P]=this.findEdgesOfCandidates(e);p.push(O);for(const B of e){const K=B.getCreatedAt().getActorID(),pe=i?r.has(K)?r.get(K):Ir:Ko;B.canDelete(t,pe)?o.push(B):p.push(B)}return p.push(P),[o,p]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,t){const r=[];let i,o;for(let p=0;p<e.length-1;p++){const O=e[p],P=e[p+1];O.getNext()!=P&&([i]=this.findIndexesFromRange(O.getNext().createPosRange()),P?[,o]=this.findIndexesFromRange(P.getPrev().createPosRange()):o=this.treeByIndex.length,i<o&&r.push({actor:t.getActorID(),from:i,to:o}))}return r.reverse()}deleteIndexNodes(e){for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];r.getNext()!=i&&this.treeByIndex.deleteRange(r,i)}}purge(e){const t=e.getPrev(),r=e.getNext(),i=e.getInsPrev(),o=e.getInsNext();t&&t.setNext(r),r&&r.setPrev(t),e.setPrev(void 0),e.setNext(void 0),i&&i.setInsNext(o),o&&o.setInsPrev(i),e.setInsPrev(void 0),e.setInsNext(void 0)}}const $l=n=>n<0?Math.ceil(n):Math.floor(n);var Dr=(n=>(n[n.IntegerCnt=0]="IntegerCnt",n[n.LongCnt=1]="LongCnt",n))(Dr||{});class In extends go{constructor(e,t,r){switch(super(r),_(this,"valueType"),_(this,"value"),this.valueType=e,e){case 0:typeof t=="number"?t>Math.pow(2,31)-1||t<-Math.pow(2,31)?this.value=at.fromNumber(t).toInt():this.value=$l(t):this.value=t.toInt();break;case 1:typeof t=="number"?this.value=at.fromNumber(t):this.value=t;break;default:throw new Tt(yt.Unimplemented,`unimplemented type: ${e}`)}}static create(e,t,r){return new In(e,t,r)}static valueFromBytes(e,t){switch(e){case 0:return t[0]|t[1]<<8|t[2]<<16|t[3]<<24;case 1:return at.fromBytesLE(Array.from(t));default:throw new Tt(yt.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=In.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof at?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!In.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const t=this.value.toBytesLE();return Uint8Array.from(t)}default:throw new Tt(yt.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function t(r){if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`)}return t(this),t(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Ut.Long?this.value=this.value+e.getValue().toInt():this.value=at.fromNumber(this.value+$l(e.getValue())).toInt(),this}}class Zi extends tr{constructor(e,t,r){super(e,r),_(this,"value"),this.value=t}static create(e,t,r){return new Zi(e,t,r)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof In||we.fatal("fail to execute, only Counter can execute increase");const r=t,i=this.value.deepcopy();return r.increase(i),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:i.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),r=e.getType()===Ut.Long?e.getValue().multiply(-1):e.getValue()*-1;return Zi.create(this.getParentCreatedAt(),St.of(r,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class ni extends tr{constructor(e,t,r,i,o,p,O){super(e,O),_(this,"fromPos"),_(this,"toPos"),_(this,"maxCreatedAtMapByActor"),_(this,"attributes"),_(this,"attributesToRemove"),this.fromPos=t,this.toPos=r,this.maxCreatedAtMapByActor=i,this.attributes=o,this.attributesToRemove=p}static create(e,t,r,i,o,p){return new ni(e,t,r,i,o,new Array,p)}static createTreeRemoveStyleOperation(e,t,r,i,o){return new ni(e,t,r,new Map,new Map,i,o)}execute(e){const t=e.findByCreatedAt(this.getParentCreatedAt());t||we.fatal(`fail to find ${this.getParentCreatedAt()}`),t instanceof Wn||we.fatal("fail to execute, only Tree can execute edit");const r=t;let i,o;if(this.attributes.size){const p={};[...this.attributes].forEach(([O,P])=>p[O]=P),[,o,i]=r.style([this.fromPos,this.toPos],p,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const p=this.attributesToRemove;[o,i]=r.removeStyle([this.fromPos,this.toPos],p,this.getExecutedAt())}for(const p of o)e.registerGCPair(p);return{opInfos:i.map(({from:p,to:O,value:P,fromPath:B})=>({type:"tree-style",from:p,to:O,value:P,fromPath:B,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),t=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,r=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${t},${r},${Object.entries(this.attributes||{}).map(([i,o])=>`${i}:"${o}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function dh(n){const e=new Tl,t=e.data;for(const[r,i]of Object.entries(n))t[r]=JSON.stringify(i);return e}function ph(n){if(n.type===li.Put)return new ys({type:po.PUT,presence:dh(n.presence)});if(n.type===li.Clear)return new ys({type:po.CLEAR});throw new Tt(yt.Unimplemented,"unimplemented type")}function gh(n){return new _l({serverSeq:n.getServerSeqAsString(),clientSeq:n.getClientSeq()})}function Vl(n){return new $o({clientSeq:n.getClientSeq(),lamport:n.getLamportAsString(),actorId:Ls(n.getActorID())})}function Ve(n){if(!!n)return new wl({lamport:n.getLamportAsString(),delimiter:n.getDelimiter(),actorId:Ls(n.getActorID())})}function zl(n){switch(n){case Ut.Null:return ct.NULL;case Ut.Boolean:return ct.BOOLEAN;case Ut.Integer:return ct.INTEGER;case Ut.Long:return ct.LONG;case Ut.Double:return ct.DOUBLE;case Ut.String:return ct.STRING;case Ut.Bytes:return ct.BYTES;case Ut.Date:return ct.DATE;default:throw new Tt(yt.Unsupported,`unsupported type: ${n}`)}}function Kl(n){switch(n){case Dr.IntegerCnt:return ct.INTEGER_CNT;case Dr.LongCnt:return ct.LONG_CNT;default:throw new Tt(yt.Unsupported,`unsupported type: ${n}`)}}function xs(n){if(n instanceof yn)return new Si({type:ct.JSON_OBJECT,createdAt:Ve(n.getCreatedAt()),value:au(n)});if(n instanceof Nn)return new Si({type:ct.JSON_ARRAY,createdAt:Ve(n.getCreatedAt()),value:Fh(n)});if(n instanceof Gn)return new Si({type:ct.TEXT,createdAt:Ve(n.getCreatedAt())});if(n instanceof St)return new Si({type:zl(n.getType()),createdAt:Ve(n.getCreatedAt()),value:n.toBytes()});if(n instanceof In)return new Si({type:Kl(n.getType()),createdAt:Ve(n.getCreatedAt()),value:n.toBytes()});if(n instanceof Wn)return new Si({type:ct.TREE,createdAt:Ve(n.getCreatedAt()),value:Vh(n)});throw new Tt(yt.Unimplemented,"unimplemented element")}function mh(n){return new gl({createdAt:Ve(n.getCreatedAt()),offset:n.getOffset()})}function Wo(n){return new El({createdAt:Ve(n.getID().getCreatedAt()),offset:n.getID().getOffset(),relativeOffset:n.getRelativeOffset()})}function Ho(n){return new bl({parentId:So(n.getParentID()),leftSiblingId:So(n.getLeftSiblingID())})}function So(n){return new yl({createdAt:Ve(n.getCreatedAt()),offset:n.getOffset()})}function Yl(n){const e=new ms;if(n instanceof Ni){const t=n,r=new Xa;r.parentCreatedAt=Ve(t.getParentCreatedAt()),r.key=t.getKey(),r.value=xs(t.getValue()),r.executedAt=Ve(t.getExecutedAt()),e.body.case="set",e.body.value=r}else if(n instanceof bo){const t=n,r=new Za;r.parentCreatedAt=Ve(t.getParentCreatedAt()),r.prevCreatedAt=Ve(t.getPrevCreatedAt()),r.value=xs(t.getValue()),r.executedAt=Ve(t.getExecutedAt()),e.body.case="add",e.body.value=r}else if(n instanceof fi){const t=n,r=new Qa;r.parentCreatedAt=Ve(t.getParentCreatedAt()),r.prevCreatedAt=Ve(t.getPrevCreatedAt()),r.createdAt=Ve(t.getCreatedAt()),r.executedAt=Ve(t.getExecutedAt()),e.body.case="move",e.body.value=r}else if(n instanceof ci){const t=n,r=new el;r.parentCreatedAt=Ve(t.getParentCreatedAt()),r.createdAt=Ve(t.getCreatedAt()),r.executedAt=Ve(t.getExecutedAt()),e.body.case="remove",e.body.value=r}else if(n instanceof _o){const t=n,r=new tl;r.parentCreatedAt=Ve(t.getParentCreatedAt()),r.from=Wo(t.getFromPos()),r.to=Wo(t.getToPos());const i=r.createdAtMapByActor;for(const[p,O]of t.getMaxCreatedAtMapByActor())i[p]=Ve(O);r.content=t.getContent();const o=r.attributes;for(const[p,O]of t.getAttributes())o[p]=O;r.executedAt=Ve(t.getExecutedAt()),e.body.case="edit",e.body.value=r}else if(n instanceof Eo){const t=n,r=new nl;r.parentCreatedAt=Ve(t.getParentCreatedAt()),r.from=Wo(t.getFromPos()),r.to=Wo(t.getToPos());const i=r.createdAtMapByActor;for(const[p,O]of t.getMaxCreatedAtMapByActor())i[p]=Ve(O);const o=r.attributes;for(const[p,O]of t.getAttributes())o[p]=O;r.executedAt=Ve(t.getExecutedAt()),e.body.case="style",e.body.value=r}else if(n instanceof Zi){const t=n,r=new rl;r.parentCreatedAt=Ve(t.getParentCreatedAt()),r.value=xs(t.getValue()),r.executedAt=Ve(t.getExecutedAt()),e.body.case="increase",e.body.value=r}else if(n instanceof Oo){const t=n,r=new il,i=r.createdAtMapByActor;for(const[o,p]of t.getMaxCreatedAtMapByActor())i[o]=Ve(p);r.parentCreatedAt=Ve(t.getParentCreatedAt()),r.from=Ho(t.getFromPos()),r.to=Ho(t.getToPos()),r.contents=wh(t.getContents()),r.splitLevel=t.getSplitLevel(),r.executedAt=Ve(t.getExecutedAt()),e.body.case="treeEdit",e.body.value=r}else if(n instanceof ni){const t=n,r=new ol;r.parentCreatedAt=Ve(t.getParentCreatedAt()),r.from=Ho(t.getFromPos()),r.to=Ho(t.getToPos());const i=r.createdAtMapByActor;for(const[p,O]of t.getMaxCreatedAtMapByActor())i[p]=Ve(O);const o=t.getAttributesToRemove();if(o.length>0)r.attributesToRemove=o;else{const p=r.attributes;for(const[O,P]of t.getAttributes())p[O]=P}r.executedAt=Ve(t.getExecutedAt()),e.body.case="treeStyle",e.body.value=r}else throw new Tt(yt.Unimplemented,"unimplemented operation");return e}function vh(n){const e=[];for(const t of n)e.push(Yl(t));return e}function yh(n){const e=new Ha({id:Vl(n.getID()),message:n.getMessage()});return n.hasOperations()&&(e.operations=vh(n.getOperations())),n.hasPresenceChange()&&(e.presenceChange=ph(n.getPresenceChange())),e}function bh(n){const e=[];for(const t of n)e.push(yh(t));return e}function Th(n){const e=[];for(const t of n)e.push(new hl({key:t.getStrKey(),element:Is(t.getValue())}));return e}function _h(n){const e=[];for(const t of n)e.push(new dl({element:Is(t.getValue())}));return e}function Eh(n){const e=[];for(const t of n){const r=new pl;r.id=mh(t.getID()),r.value=t.getValue().getContent(),r.removedAt=Ve(t.getRemovedAt());const i=r.attributes,o=t.getValue().getAttrs();for(const p of o){const O=new vs;O.value=p.getValue(),O.updatedAt=Ve(p.getUpdatedAt()),i[p.getKey()]=O}e.push(r)}return e}function wh(n){const e=[];if(!n||!n.length)return e;for(const t of n)e.push(new vl({content:Gl(t)}));return e}function Gl(n){if(!n)return[];const e=[];return Os(n,(t,r)=>{const i=new ml({id:So(t.id),type:t.type,removedAt:Ve(t.removedAt),depth:r});if(t.isText&&(i.value=t.value),t.insPrevID&&(i.insPrevId=So(t.insPrevID)),t.insNextID&&(i.insNextId=So(t.insNextID)),t.attrs)for(const o of t.attrs)i.attributes[o.getKey()]=new vs({value:o.getValue(),updatedAt:Ve(o.getUpdatedAt())});e.push(i)}),e}function Oh(n){const e=new xr;return e.body.case="jsonObject",e.body.value=new sl({nodes:Th(n.getRHT()),createdAt:Ve(n.getCreatedAt()),movedAt:Ve(n.getMovedAt()),removedAt:Ve(n.getRemovedAt())}),e}function Wl(n){const e=new xr;return e.body.case="jsonArray",e.body.value=new al({nodes:_h(n.getElements()),createdAt:Ve(n.getCreatedAt()),movedAt:Ve(n.getMovedAt()),removedAt:Ve(n.getRemovedAt())}),e}function Sh(n){const e=new xr;return e.body.case="primitive",e.body.value=new ll({type:zl(n.getType()),value:n.toBytes(),createdAt:Ve(n.getCreatedAt()),movedAt:Ve(n.getMovedAt()),removedAt:Ve(n.getRemovedAt())}),e}function Ah(n){const e=new xr;return e.body.case="text",e.body.value=new ul({nodes:Eh(n.getRGATreeSplit()),createdAt:Ve(n.getCreatedAt()),movedAt:Ve(n.getMovedAt()),removedAt:Ve(n.getRemovedAt())}),e}function kh(n){const e=new xr;return e.body.case="counter",e.body.value=new cl({type:Kl(n.getType()),value:n.toBytes(),createdAt:Ve(n.getCreatedAt()),movedAt:Ve(n.getMovedAt()),removedAt:Ve(n.getRemovedAt())}),e}function Hl(n){const e=new xr;return e.body.case="tree",e.body.value=new fl({nodes:Gl(n.getRoot()),createdAt:Ve(n.getCreatedAt()),movedAt:Ve(n.getMovedAt()),removedAt:Ve(n.getRemovedAt())}),e}function Is(n){if(n instanceof yn)return Oh(n);if(n instanceof Nn)return Wl(n);if(n instanceof St)return Sh(n);if(n instanceof Gn)return Ah(n);if(n instanceof In)return kh(n);if(n instanceof Wn)return Hl(n);throw new Tt(yt.Unimplemented,"unimplemented element")}function Nh(n){return new Wa({documentKey:n.getDocumentKey(),checkpoint:gh(n.getCheckpoint()),isRemoved:n.getIsRemoved(),changes:bh(n.getChanges()),snapshot:n.getSnapshot(),minSyncedTicket:Ve(n.getMinSyncedTicket())})}function Xl(n){return hi.of(n.clientSeq,at.fromString(n.lamport,!0),Cs(n.actorId))}function Ke(n){if(!!n)return dn.of(at.fromString(n.lamport,!0),n.delimiter,Cs(n.actorId))}function Ps(n){const e={};return Object.entries(n.data).forEach(([t,r])=>{e[t]=JSON.parse(r)}),e}function xh(n){const e=n.type;if(e===po.PUT){const t=Ps(n.presence);return{type:li.Put,presence:t}}if(e===po.CLEAR)return{type:li.Clear};throw new Tt(yt.Unsupported,`unsupported type: ${e}`)}function Ih(n){const e=new Map;return Object.entries(n).forEach(([t,r])=>{e.set(t,Ps(r))}),e}function Zl(n){switch(n){case ct.NULL:return Ut.Null;case ct.BOOLEAN:return Ut.Boolean;case ct.INTEGER:return Ut.Integer;case ct.LONG:return Ut.Long;case ct.DOUBLE:return Ut.Double;case ct.STRING:return Ut.String;case ct.BYTES:return Ut.Bytes;case ct.DATE:return Ut.Date}throw new Tt(yt.Unimplemented,`unimplemented value type: ${n}`)}function Xo(n){switch(n){case ct.INTEGER_CNT:return Dr.IntegerCnt;case ct.LONG_CNT:return Dr.LongCnt}throw new Tt(yt.Unimplemented,`unimplemented value type: ${n}`)}function Rs(n){switch(n.type){case ct.JSON_OBJECT:return n.value?su(n.value):yn.create(Ke(n.createdAt));case ct.JSON_ARRAY:return n.value?Jh(n.value):Nn.create(Ke(n.createdAt));case ct.TEXT:return Gn.create(Xi.create(),Ke(n.createdAt));case ct.TREE:return $h(n.value);case ct.NULL:case ct.BOOLEAN:case ct.INTEGER:case ct.LONG:case ct.DOUBLE:case ct.STRING:case ct.BYTES:case ct.DATE:return St.of(St.valueFromBytes(Zl(n.type),n.value),Ke(n.createdAt));case ct.INTEGER_CNT:case ct.LONG_CNT:return In.create(Xo(n.type),In.valueFromBytes(Xo(n.type),n.value),Ke(n.createdAt))}}function Zo(n){return rr.of(Rr.of(Ke(n.createdAt),n.offset),n.relativeOffset)}function Ql(n){return Rr.of(Ke(n.createdAt),n.offset)}function Ph(n){const e=To.create(n.value);Object.entries(n.attributes).forEach(([r,i])=>{e.setAttr(r,i.value,Ke(i.updatedAt))});const t=di.create(Ql(n.id),e);return t.remove(Ke(n.removedAt)),t}function Qi(n){return nr.of(Ao(n.parentId),Ao(n.leftSiblingId))}function Ao(n){return Gt.of(Ke(n.createdAt),n.offset)}function Rh(n){if(!n.length)return;const e=[];return n.forEach(t=>{const r=eu(t.content);e.push(r)}),e}function eu(n){if(n.length===0)return;const e=[];for(const r of n)e.push(Dh(r));const t=e[e.length-1];for(let r=e.length-2;r>=0;r--){let i;for(let o=r+1;o<e.length;o++)if(n[r].depth-1===n[o].depth){i=e[o];break}i.prepend(e[r])}return Wn.create(t,Ir).getRoot()}function Dh(n){const e=Ao(n.id),t=xn.create(e,n.type);if(t.isText)t.value=n.value;else{const r=ei.create();Object.entries(n.attributes).forEach(([i,o])=>{r.set(i,o.value,Ke(o.updatedAt))}),t.attrs=r}return n.insPrevId&&(t.insPrevID=Ao(n.insPrevId)),n.insNextId&&(t.insNextID=Ao(n.insNextId)),t.removedAt=Ke(n.removedAt),t}function tu(n){if(n.body.case==="set"){const e=n.body.value;return Ni.create(e.key,Rs(e.value),Ke(e.parentCreatedAt),Ke(e.executedAt))}else if(n.body.case==="add"){const e=n.body.value;return bo.create(Ke(e.parentCreatedAt),Ke(e.prevCreatedAt),Rs(e.value),Ke(e.executedAt))}else if(n.body.case==="move"){const e=n.body.value;return fi.create(Ke(e.parentCreatedAt),Ke(e.prevCreatedAt),Ke(e.createdAt),Ke(e.executedAt))}else if(n.body.case==="remove"){const e=n.body.value;return ci.create(Ke(e.parentCreatedAt),Ke(e.createdAt),Ke(e.executedAt))}else if(n.body.case==="edit"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,o])=>{t.set(i,Ke(o))});const r=new Map;return Object.entries(e.attributes).forEach(([i,o])=>{r.set(i,o)}),_o.create(Ke(e.parentCreatedAt),Zo(e.from),Zo(e.to),t,e.content,r,Ke(e.executedAt))}else if(n.body.case==="style"){const e=n.body.value,t=new Map;Object.entries(e.createdAtMapByActor).forEach(([i,o])=>{t.set(i,Ke(o))});const r=new Map;return Object.entries(e.attributes).forEach(([i,o])=>{r.set(i,o)}),Eo.create(Ke(e.parentCreatedAt),Zo(e.from),Zo(e.to),t,r,Ke(e.executedAt))}else{if(n.body.case==="select")return;if(n.body.case==="increase"){const e=n.body.value;return Zi.create(Ke(e.parentCreatedAt),Rs(e.value),Ke(e.executedAt))}else if(n.body.case==="treeEdit"){const e=n.body.value,t=new Map;return Object.entries(e.createdAtMapByActor).forEach(([r,i])=>{t.set(r,Ke(i))}),Oo.create(Ke(e.parentCreatedAt),Qi(e.from),Qi(e.to),Rh(e.contents),e.splitLevel,t,Ke(e.executedAt))}else if(n.body.case==="treeStyle"){const e=n.body.value,t=new Map,r=e.attributesToRemove,i=new Map;return Object.entries(e.createdAtMapByActor).forEach(([o,p])=>{i.set(o,Ke(p))}),r.length>0?ni.createTreeRemoveStyleOperation(Ke(e.parentCreatedAt),Qi(e.from),Qi(e.to),r,Ke(e.executedAt)):(Object.entries(e.attributes).forEach(([o,p])=>{t.set(o,p)}),ni.create(Ke(e.parentCreatedAt),Qi(e.from),Qi(e.to),i,t,Ke(e.executedAt)))}else throw new Tt(yt.Unimplemented,"unimplemented operation")}}function Ch(n){const e=[];for(const t of n){const r=tu(t);r&&e.push(r)}return e}function nu(n){const e=[];for(const t of n)e.push(xi.create({id:Xl(t.id),operations:Ch(t.operations),presenceChange:t.presenceChange?xh(t.presenceChange):void 0,message:t.message}));return e}function Lh(n){return Hi.of(at.fromString(n.serverSeq,!0),n.clientSeq)}function Mh(n){return Go.create(n.documentKey,Lh(n.checkpoint),n.isRemoved,nu(n.changes),n.snapshot,Ke(n.minSyncedTicket))}function ru(n){const e=new mo;for(const r of n.nodes){const i=Ds(r.element);e.set(r.key,i,i.getPositionedAt())}const t=new yn(Ke(n.createdAt),e);return t.setMovedAt(Ke(n.movedAt)),t.setRemovedAt(Ke(n.removedAt)),t}function iu(n){const e=new yo;for(const r of n.nodes)e.insert(Ds(r.element));const t=new Nn(Ke(n.createdAt),e);return t.setMovedAt(Ke(n.movedAt)),t.setRemovedAt(Ke(n.removedAt)),t}function Bh(n){const e=St.of(St.valueFromBytes(Zl(n.type),n.value),Ke(n.createdAt));return e.setMovedAt(Ke(n.movedAt)),e.setRemovedAt(Ke(n.removedAt)),e}function jh(n){const e=new Xi;let t=e.getHead();for(const i of n.nodes){const o=e.insertAfter(t,Ph(i));i.insPrevId&&o.setInsPrev(e.findNode(Ql(i.insPrevId))),t=o}const r=new Gn(e,Ke(n.createdAt));return r.setMovedAt(Ke(n.movedAt)),r.setRemovedAt(Ke(n.removedAt)),r}function qh(n){const e=In.create(Xo(n.type),In.valueFromBytes(Xo(n.type),n.value),Ke(n.createdAt));return e.setMovedAt(Ke(n.movedAt)),e.setRemovedAt(Ke(n.removedAt)),e}function ou(n){const e=eu(n.nodes);return Wn.create(e,Ke(n.createdAt))}function Ds(n){if(n.body.case==="jsonObject")return ru(n.body.value);if(n.body.case==="jsonArray")return iu(n.body.value);if(n.body.case==="primitive")return Bh(n.body.value);if(n.body.case==="text")return jh(n.body.value);if(n.body.case==="counter")return qh(n.body.value);if(n.body.case==="tree")return ou(n.body.value);throw new Tt(yt.Unimplemented,"unimplemented element")}function Uh(n){if(!n)return{root:yn.create(Ir),presences:new Map};const e=Ga.fromBinary(n);return{root:Ds(e.root),presences:Ih(e.presences)}}function su(n){if(!n)throw new Error("bytes is empty");const e=xr.fromBinary(n);return ru(e.body.value)}function au(n){return Is(n).toBinary()}function Jh(n){if(!n)throw new Error("bytes is empty");const e=xr.fromBinary(n);return iu(e.body.value)}function Fh(n){return Wl(n).toBinary()}function $h(n){if(!n)throw new Error("bytes is empty");const e=xr.fromBinary(n);return ou(e.body.value)}function Vh(n){return Hl(n).toBinary()}function lu(n){return n?Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Cs(n){return lu(n)}function uu(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Ls(n){return uu(n)}function zh(n){const e=$o.fromBinary(n);return Xl(e)}function Kh(n){const e=ms.fromBinary(n);return tu(e)}const Bt={fromPresence:Ps,toChangePack:Nh,fromChangePack:Mh,fromChanges:nu,objectToBytes:au,bytesToObject:su,bytesToSnapshot:Uh,bytesToHex:lu,hexToBytes:uu,toHexString:Cs,toUint8Array:Ls,toOperation:Yl,toChangeID:Vl,PbChangeID:$o,bytesToChangeID:zh,bytesToOperation:Kh};function cu(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class Yh{constructor(e,t,r,i){_(this,"reconnectStreamDelay"),_(this,"doc"),_(this,"docID"),_(this,"syncMode"),_(this,"remoteChangeEventReceived"),_(this,"watchStream"),_(this,"watchLoopTimerID"),_(this,"watchAbortController"),this.reconnectStreamDelay=e,this.doc=t,this.docID=r,this.syncMode=i,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Ro.RealtimeSyncOff?!1:this.syncMode===Ro.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Ro.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const t=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(t,this.reconnectStreamDelay)})}catch{}};await t()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Ms=()=>{};class Gh{constructor(e){_(this,"finalized",!1),_(this,"observers",[]),_(this,"finalError");try{e(this)}catch(t){this.error(t)}}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;e||we.fatal("missing observer"),this.finalized&&we.fatal("observable is finalized due to previous error"),typeof e=="object"?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ms),i.error===void 0&&(i.error=Ms),i.complete===void 0&&(i.complete=Ms);const o=cu(),p=this.unsubscribeOne.bind(this,o);if(this.observers.push({subscriptionID:o,observer:i}),this.finalized)try{this.finalError?i.error(this.finalError):i.complete()}catch(O){we.warn(O)}return p}unsubscribeOne(e){var t;this.observers=(t=this.observers)==null?void 0:t.filter(r=>r.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e].observer)}catch(r){we.error(r)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function Wh(n){const e=new Gh(n);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class eo{constructor(e,t,r,i){_(this,"id"),_(this,"delimiter"),_(this,"message"),_(this,"root"),_(this,"operations"),_(this,"presenceChange"),_(this,"previousPresence"),_(this,"reversePresenceKeys"),this.id=e,this.delimiter=Es,this.root=t,this.operations=[],this.previousPresence=er(r),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=i}static create(e,t,r,i){return new eo(e,t,r,i)}push(e){this.operations.push(e)}registerElement(e,t){this.root.registerElement(e,t)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return xi.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,t){for(const r of Object.keys(e))t!=null&&t.addToHistory?this.reversePresenceKeys.add(r):this.reversePresenceKeys.delete(r)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const t of this.reversePresenceKeys)e[t]=this.previousPresence[t];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class ko{constructor(e){_(this,"rootObject"),_(this,"elementPairMapByCreatedAt"),_(this,"gcElementSetByCreatedAt"),_(this,"gcPairMap"),this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(t=>{if(t.getRemovedAt()&&this.registerRemovedElement(t),t instanceof Gn||t instanceof Wn)for(const r of t.getGCPairs())this.registerGCPair(r);return!1})}static create(){return new ko(yn.create(Ir))}findByCreatedAt(e){const t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!t)return t.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let t=this.elementPairMapByCreatedAt.get(e.toIDString());if(!t)return[];const r=[];for(;t.parent;){const i=t.element.getCreatedAt(),o=t.parent.subPathOf(i);o===void 0&&we.fatal(`cant find the given element: ${i.toIDString()}`),r.unshift(o),t=this.elementPairMapByCreatedAt.get(t.parent.getCreatedAt().toIDString())}return r.unshift("$"),r}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,t){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:t,element:e}),e instanceof ui&&e.getDescendants((r,i)=>(this.registerElement(r,i),!1))}deregisterElement(e){let t=0;const r=i=>{const o=i.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(o),this.gcElementSetByCreatedAt.delete(o),t++};return r(e),e instanceof ui&&e.getDescendants(i=>(r(i),!1)),t}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const t of this.gcElementSetByCreatedAt){e.add(t);const r=this.elementPairMapByCreatedAt.get(t);r.element instanceof ui&&r.element.getDescendants(i=>(e.add(i.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new ko(this.rootObject.deepcopy())}garbageCollect(e){let t=0;for(const r of this.gcElementSetByCreatedAt){const i=this.elementPairMapByCreatedAt.get(r);i.element.getRemovedAt()&&e.compare(i.element.getRemovedAt())>=0&&(i.parent.purge(i.element),t+=this.deregisterElement(i.element))}for(const[,r]of this.gcPairMap){const i=r.child.getRemovedAt();i!==void 0&&e.compare(i)>=0&&(r.parent.purge(r.child),this.gcPairMap.delete(r.child.toIDString()),t+=1)}return t}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function fu(n,e){const t=new No(n);return new Proxy(e,t.getHandlers())}class No{constructor(e){_(this,"context"),_(this,"handlers"),this.context=e,this.handlers={set:(t,r,i)=>(we.isEnabled(kn.Trivial)&&we.trivial(`obj[${r}]=${JSON.stringify(i)}`),No.setInternal(e,t,r,i),!0),get:(t,r)=>(we.isEnabled(kn.Trivial)&&we.trivial(`obj[${r}]`),r==="getID"?()=>t.getCreatedAt():r==="toJSON"||r==="toString"?()=>t.toJSON():r==="toJS"?()=>t.toJS():r==="toJSForTest"?()=>t.toJSForTest():Ii(e,t.get(r))),ownKeys:t=>t.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(t,r)=>(we.isEnabled(kn.Trivial)&&we.trivial(`obj[${r}]`),No.deleteInternal(e,t,r),!0)}}static setInternal(e,t,r,i){if(r.includes("."))throw new Tt(yt.InvalidObjectKey,"key must not contain the '.'.");const o=e.issueTimeTicket(),p=Qo(e,i,o),O=t.set(r,p,o);e.registerElement(p,t),O&&e.registerRemovedElement(O),e.push(Ni.create(r,p.deepcopy(),t.getCreatedAt(),o))}static buildObjectMembers(e,t){const r={};for(const[i,o]of Object.entries(t)){if(i.includes("."))throw new Tt(yt.InvalidObjectKey,"key must not contain the '.'.");const p=e.issueTimeTicket(),O=Qo(e,o,p);r[i]=O}return r}static deleteInternal(e,t,r){const i=e.issueTimeTicket(),o=t.deleteByKey(r,i);!o||(e.push(ci.create(t.getCreatedAt(),o.getCreatedAt(),i)),e.registerRemovedElement(o))}getHandlers(){return this.handlers}}function Hh(n,e){const t=new Pt(n,e);return new Proxy(e,t.getHandlers())}function Xh(n){return typeof n=="string"||n instanceof String?!isNaN(n):!1}function Zh(n){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(n)}class Pt{constructor(e,t){_(this,"context"),_(this,"handlers"),_(this,"array"),this.context=e,this.array=t,this.handlers={get:(r,i,o)=>i==="getID"?()=>r.getCreatedAt():i==="getElementByID"?p=>{const O=r.getByID(p);if(!(!O||O.isRemoved()))return pi(e,O)}:i==="getElementByIndex"?p=>{const O=r.get(p);return pi(e,O)}:i==="getLast"?()=>pi(e,r.getLast()):i==="deleteByID"?p=>{const O=Pt.deleteInternalByID(e,r,p);return pi(e,O)}:i==="insertAfter"?(p,O)=>{const P=Pt.insertAfterInternal(e,r,p,O);return pi(e,P)}:i==="insertBefore"?(p,O)=>{const P=Pt.insertBeforeInternal(e,r,p,O);return pi(e,P)}:i==="moveBefore"?(p,O)=>{Pt.moveBeforeInternal(e,r,p,O)}:i==="moveAfter"?(p,O)=>{Pt.moveAfterInternal(e,r,p,O)}:i==="moveFront"?p=>{Pt.moveFrontInternal(e,r,p)}:i==="moveLast"?p=>{Pt.moveLastInternal(e,r,p)}:Xh(i)?Ii(e,r.get(Number(i))):i==="push"?p=>Pt.pushInternal(e,r,p):i==="splice"?(p,O,...P)=>Pt.splice(e,r,p,O,...P):i==="length"?r.length:typeof i=="symbol"&&i===Symbol.iterator?Pt.iteratorInternal.bind(this,e,r):i==="includes"?(p,O)=>Pt.includes(e,r,p,O):i==="indexOf"?(p,O)=>Pt.indexOf(e,r,p,O):i==="lastIndexOf"?(p,O)=>Pt.lastIndexOf(e,r,p,O):i==="toJSForTest"?()=>r.toJSForTest():i==="toTestString"?()=>Pt.toTestString(r):typeof i=="string"&&Zh(i)?(...p)=>{const O=Array.from(r).map(P=>Ii(e,P));return Array.prototype[i].apply(O,p)}:Reflect.get(r,i,o),deleteProperty:(r,i)=>(we.isEnabled(kn.Trivial)&&we.trivial(`array[${i}]`),Pt.deleteInternalByIndex(e,r,Number.parseInt(i)),!0)}}static*iteratorInternal(e,t){for(const r of t)yield pi(e,r)}static buildArrayElements(e,t){const r=[];for(const i of t){const o=e.issueTimeTicket(),p=Qo(e,i,o);r.push(p)}return r}static pushInternal(e,t,r){return Pt.insertAfterInternal(e,t,t.getLastCreatedAt(),r),t.length}static moveBeforeInternal(e,t,r,i){const o=e.issueTimeTicket(),p=t.getPrevCreatedAt(r);t.moveAfter(p,i,o),e.push(fi.create(t.getCreatedAt(),p,i,o))}static moveAfterInternal(e,t,r,i){const o=e.issueTimeTicket();t.moveAfter(r,i,o),e.push(fi.create(t.getCreatedAt(),r,i,o))}static moveFrontInternal(e,t,r){const i=e.issueTimeTicket(),o=t.getHead();t.moveAfter(o.getCreatedAt(),r,i),e.push(fi.create(t.getCreatedAt(),o.getCreatedAt(),r,i))}static moveLastInternal(e,t,r){const i=e.issueTimeTicket(),o=t.getLastCreatedAt();t.moveAfter(o,r,i),e.push(fi.create(t.getCreatedAt(),o,r,i))}static insertAfterInternal(e,t,r,i){const o=e.issueTimeTicket(),p=Qo(e,i,o);return t.insertAfter(r,p),e.registerElement(p,t),e.push(bo.create(t.getCreatedAt(),r,p.deepcopy(),o)),p}static insertBeforeInternal(e,t,r,i){return Pt.insertAfterInternal(e,t,t.getPrevCreatedAt(r),i)}static deleteInternalByIndex(e,t,r){const i=e.issueTimeTicket(),o=t.deleteByIndex(r,i);if(!!o)return e.push(ci.create(t.getCreatedAt(),o.getCreatedAt(),i)),e.registerRemovedElement(o),o}static deleteInternalByID(e,t,r){const i=e.issueTimeTicket(),o=t.delete(r,i);return e.push(ci.create(t.getCreatedAt(),o.getCreatedAt(),i)),e.registerRemovedElement(o),o}static splice(e,t,r,i,...o){const p=t.length,O=r>=0?Math.min(r,p):Math.max(p+r,0),P=i===void 0?p:i<0?O:Math.min(O+i,p),B=[];for(let K=O;K<P;K++){const pe=Pt.deleteInternalByIndex(e,t,O);if(pe){const ne=pe.deepcopy();ne.setRemovedAt(),B.push(Ii(e,ne))}}if(o){let K=O===0?t.getHead().getID():t.get(O-1).getID();for(const pe of o)K=Pt.insertAfterInternal(e,t,K,pe).getID()}return B}static includes(e,t,r,i){var o;const p=t.length,O=i===void 0?0:i<0?Math.max(i+p,0):i;if(O>=p)return!1;if(St.isSupport(r))return Array.from(t).map(B=>Ii(e,B)).includes(r,O);for(let P=O;P<p;P++)if(((o=t.get(P))==null?void 0:o.getID())===r.getID())return!0;return!1}static indexOf(e,t,r,i){var o;const p=t.length,O=i===void 0?0:i<0?Math.max(i+p,0):i;if(O>=p)return-1;if(St.isSupport(r))return Array.from(t).map(B=>Ii(e,B)).indexOf(r,O);for(let P=O;P<p;P++)if(((o=t.get(P))==null?void 0:o.getID())===r.getID())return P;return-1}static lastIndexOf(e,t,r,i){var o;const p=t.length,O=i===void 0||i>=p?p-1:i<0?i+p:i;if(O<0)return-1;if(St.isSupport(r))return Array.from(t).map(B=>Ii(e,B)).lastIndexOf(r,O);for(let P=O;P>0;P--)if(((o=t.get(P))==null?void 0:o.getID())===r.getID())return P;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class xo{constructor(e,t){_(this,"context"),_(this,"text"),this.context=e,this.text=t}initialize(e,t){this.context=e,this.text=t}getID(){return this.text.getID()}edit(e,t,r,i){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}if(e>t){we.fatal("from should be less than or equal to to");return}const o=this.text.indexRangeToPosRange(e,t);we.isEnabled(kn.Debug)&&we.debug(`EDIT: f:${e}->${o[0].toTestString()}, t:${t}->${o[1].toTestString()} c:${r}`);const p=i?Yi(i):void 0,O=this.context.issueTimeTicket(),[P,,B,K]=this.text.edit(o,r,O,p);for(const pe of B)this.context.registerGCPair(pe);return this.context.push(new _o(this.text.getCreatedAt(),o[0],o[1],P,r,p?new Map(Object.entries(p)):new Map,O)),this.text.findIndexesFromRange(K)}delete(e,t){return this.edit(e,t,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,t,r){if(!this.context||!this.text)return we.fatal("it is not initialized yet"),!1;if(e>t)return we.fatal("from should be less than or equal to to"),!1;const i=this.text.indexRangeToPosRange(e,t);we.isEnabled(kn.Debug)&&we.debug(`STYL: f:${e}->${i[0].toTestString()}, t:${t}->${i[1].toTestString()} a:${JSON.stringify(r)}`);const o=Yi(r),p=this.context.issueTimeTicket(),[O,P]=this.text.setStyle(i,o,p);for(const B of P)this.context.registerGCPair(B);return this.context.push(new Eo(this.text.getCreatedAt(),i[0],i[1],O,new Map(Object.entries(o)),p)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}const t=this.text.indexRangeToPosRange(e[0],e[1]);return[t[0].toStruct(),t[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}const t=this.text.findIndexesFromRange([rr.fromStruct(e[0]),rr.fromStruct(e[1])]);return[t[0],t[1]]}toTestString(){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(we.fatal("it is not initialized yet"),""):this.text.toString()}toJSON(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,t){if(!this.context||!this.text){we.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,t)}}class Io{constructor(e,t){_(this,"valueType"),_(this,"value"),_(this,"context"),_(this,"counter"),this.valueType=e,this.value=t}initialize(e,t){this.valueType=t.getValueType(),this.context=e,this.counter=t,this.value=t.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){we.fatal("it is not initialized yet");return}const t=this.context.issueTimeTicket(),r=St.of(e,t);if(!r.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof r.getValue()}`);return this.counter.increase(r),this.context.push(Zi.create(this.counter.getCreatedAt(),r,t)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function Bs(n,e,t){const{type:r}=n,i=t.issueTimeTicket();if(r===ti){hu(n);const{value:o}=n,p=xn.create(Gt.of(i,0),r,o);e.append(p)}else{const{children:o=[]}=n;let{attributes:p}=n,O;if(typeof p=="object"&&!Bl(p)){p=Yi(p),O=new ei;for(const[B,K]of Object.entries(p))O.set(B,K,i)}const P=xn.create(Gt.of(i,0),r,void 0,O);e.append(P);for(const B of o)Bs(B,P,t)}}function Qh(n,e){const{type:t}=e,r=n.issueTimeTicket();let i;if(e.type===ti){const{value:o}=e;i=xn.create(Gt.of(r,0),t,o)}else if(e){const{children:o=[]}=e;let{attributes:p}=e,O;if(typeof p=="object"&&!Bl(p)){p=Yi(p),O=new ei;for(const[P,B]of Object.entries(p))O.set(P,B,r)}i=xn.create(Gt.of(n.issueTimeTicket(),0),t,void 0,O);for(const P of o)Bs(P,i,n)}return i}function hu(n){if(!n.value.length)throw new Error("text node cannot have empty value");return!0}function du(n){if(!n.length)return!0;if(n[0].type===ti)for(const t of n){const{type:r}=t;if(r!==ti)throw new Error("element node and text node cannot be passed together");hu(t)}else for(const t of n){const{type:r}=t;if(r===ti)throw new Error("element node and text node cannot be passed together")}return!0}class Po{constructor(e){_(this,"initialRoot"),_(this,"context"),_(this,"tree"),this.initialRoot=e}initialize(e,t){this.context=e,this.tree=t}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return xn.create(Gt.of(e.issueTimeTicket(),0),nh);const t=xn.create(Gt.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const r of this.initialRoot.children)Bs(r,t,e);return t}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,t){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[r,i]=this.tree.pathToPosRange(e),o=this.context.issueTimeTicket(),p=t?Yi(t):void 0,[O]=this.tree.style([r,i],p,o);this.context.push(ni.create(this.tree.getCreatedAt(),r,i,O,p?new Map(Object.entries(p)):new Map,o))}style(e,t,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const i=this.tree.findPos(e),o=this.tree.findPos(t),p=this.context.issueTimeTicket(),O=r?Yi(r):void 0,[P,B]=this.tree.style([i,o],O,p);for(const K of B)this.context.registerGCPair(K);this.context.push(ni.create(this.tree.getCreatedAt(),i,o,P,O?new Map(Object.entries(O)):new Map,p))}removeStyle(e,t,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const i=this.tree.findPos(e),o=this.tree.findPos(t),p=this.context.issueTimeTicket(),[O]=this.tree.removeStyle([i,o],r,p);for(const P of O)this.context.registerGCPair(P);this.context.push(ni.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),i,o,r,p))}editInternal(e,t,r,i=0){var o;if(r.length!==0&&r[0]&&(du(r),r[0].type!==ti))for(const K of r){const{children:pe=[]}=K;du(pe)}const p=this.context.getLastTimeTicket();let O=new Array;if(((o=r[0])==null?void 0:o.type)===ti){let K="";for(const pe of r){const{value:ne}=pe;K+=ne}O.push(xn.create(Gt.of(this.context.issueTimeTicket(),0),ti,K))}else O=r.map(K=>K&&Qh(this.context,K)).filter(K=>K);const[,P,B]=this.tree.edit([e,t],O.length?O.map(K=>K==null?void 0:K.deepcopy()):void 0,i,p,()=>this.context.issueTimeTicket());for(const K of P)this.context.registerGCPair(K);return this.context.push(Oo.create(this.tree.getCreatedAt(),e,t,O.length?O:void 0,i,B,p)),!0}editByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const o=this.tree.pathToPos(e),p=this.tree.pathToPos(t);return this.editInternal(o,p,r?[r]:[],i)}editBulkByPath(e,t,r,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==t.length)throw new Error("path length should be equal");if(!e.length||!t.length)throw new Error("path should not be empty");const o=this.tree.pathToPos(e),p=this.tree.pathToPos(t);return this.editInternal(o,p,r,i)}edit(e,t,r,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),p=this.tree.findPos(t);return this.editInternal(o,p,r?[r]:[],i)}editBulk(e,t,r,i=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>t)throw new Error("from should be less than or equal to to");const o=this.tree.findPos(e),p=this.tree.findPos(t);return this.editInternal(o,p,r,i)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){we.fatal("it is not initialized yet");return}const t=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],r=this.tree.indexRangeToPosRange(t);return[r[0].toStruct(),r[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){we.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){we.fatal("it is not initialized yet");return}const t=[nr.fromStruct(e[0]),nr.fromStruct(e[1])];return this.tree.posRangeToIndexRange(t)}posRangeToPathRange(e){if(!this.context||!this.tree){we.fatal("it is not initialized yet");return}const t=[nr.fromStruct(e[0]),nr.fromStruct(e[1])];return this.tree.posRangeToPathRange(t)}}function pu(n,e){return fu(n,e)}function pi(n,e){if(e){if(e instanceof St)return e;if(e instanceof yn)return fu(n,e);if(e instanceof Nn)return Hh(n,e);if(e instanceof Gn)return new xo(n,e);if(e instanceof In){const t=new Io(Dr.IntegerCnt,0);return t.initialize(n,e),t}else if(e instanceof Wn){const t=new Po;return t.initialize(n,e),t}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function Ii(n,e){const t=pi(n,e);return t instanceof St?t.getValue():t}function Qo(n,e,t){let r;if(St.isSupport(e))r=St.of(e,t);else if(Array.isArray(e))r=Nn.create(t,Pt.buildArrayElements(n,e));else if(typeof e=="object")e instanceof xo?(r=Gn.create(Xi.create(),t),e.initialize(n,r)):e instanceof Io?(r=In.create(e.getValueType(),e.getValue(),t),e.initialize(n,r)):e instanceof Po?(r=Wn.create(e.buildRoot(n),t),e.initialize(n,r)):r=yn.create(t,No.buildObjectMembers(n,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return r}const gu=50;class ed{constructor(){_(this,"undoStack",[]),_(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=gu&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=gu&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const mu="yorkie-devtools-panel",vu="yorkie-devtools-sdk";let to="disconnected";const yu=new Map,js=new Map;function es(n,e){!((e==null?void 0:e.force)||to!=="disconnected")||window.postMessage({source:vu,...n},"*")}function td(n){if(!n.isEnableDevtools()||typeof window>"u"||yu.has(n.getKey()))return;js.set(n.getKey(),[]);const e=n.subscribe("all",t=>{t.some(r=>r.type!==pn.StatusChanged&&r.type!==pn.Snapshot&&r.type!==pn.LocalChange&&r.type!==pn.RemoteChange&&r.type!==pn.Initialized&&r.type!==pn.Watched&&r.type!==pn.Unwatched&&r.type!==pn.PresenceChanged)||(js.get(n.getKey()).push(t),to==="synced"&&es({msg:"doc::sync::partial",docKey:n.getKey(),event:t}))});yu.set(n.getKey(),[e]),es({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",t=>{var r;if(((r=t.data)==null?void 0:r.source)!==mu)return;switch(t.data.msg){case"devtools::connect":if(to!=="disconnected")break;to="connected",es({msg:"doc::available",docKey:n.getKey()}),we.info(`[YD] Devtools connected. Doc: ${n.getKey()}`);break;case"devtools::disconnect":to="disconnected",we.info(`[YD] Devtools disconnected. Doc: ${n.getKey()}`);break;case"devtools::subscribe":to="synced",es({msg:"doc::sync::full",docKey:n.getKey(),events:js.get(n.getKey())}),we.info(`[YD] Devtools subscribed. Doc: ${n.getKey()}`);break}})}var gi=(n=>(n.Detached="detached",n.Attached="attached",n.Removed="removed",n))(gi||{}),pn=(n=>(n.StatusChanged="status-changed",n.ConnectionChanged="connection-changed",n.SyncStatusChanged="sync-status-changed",n.Snapshot="snapshot",n.LocalChange="local-change",n.RemoteChange="remote-change",n.Initialized="initialized",n.Watched="watched",n.Unwatched="unwatched",n.PresenceChanged="presence-changed",n))(pn||{}),ts=(n=>(n.Connected="connected",n.Disconnected="disconnected",n))(ts||{}),ns=(n=>(n.Synced="synced",n.SyncFailed="sync-failed",n))(ns||{});class qs{constructor(e,t){_(this,"key"),_(this,"status"),_(this,"opts"),_(this,"changeID"),_(this,"checkpoint"),_(this,"localChanges"),_(this,"root"),_(this,"clone"),_(this,"eventStream"),_(this,"eventStreamObserver"),_(this,"onlineClients"),_(this,"presences"),_(this,"history"),_(this,"internalHistory"),_(this,"isUpdating"),this.opts=t||{},this.key=e,this.status="detached",this.root=ko.create(),this.changeID=ch,this.checkpoint=fh,this.localChanges=[],this.eventStream=Wh(r=>{this.eventStreamObserver=r}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new ed,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},td(this)}update(e,t){if(this.getStatus()==="removed")throw new Tt(yt.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const r=this.changeID.getActorID(),i=eo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(r)||{},t);try{const o=pu(i,this.clone.root.getObject());this.presences.has(r)||this.clone.presences.set(r,{}),this.isUpdating=!0,e(o,new _s(i,this.clone.presences.get(r)))}catch(o){throw this.clone=void 0,we.error(o),o}finally{this.isUpdating=!1}if(i.hasChange()){we.isEnabled(kn.Trivial)&&we.trivial(`trying to update a local change: ${this.toJSON()}`);const o=i.getChange(),{opInfos:p,reverseOps:O}=o.execute(this.root,this.presences,wt.Local),P=i.getReversePresence();P&&O.push({type:"presence",value:P}),this.localChanges.push(o),O.length>0&&this.internalHistory.pushUndo(O),p.length>0&&this.internalHistory.clearRedo(),this.changeID=o.getID();const B=[];p.length>0&&B.push({type:"local-change",source:wt.Local,value:{message:o.getMessage()||"",operations:p,actor:r},rawChange:this.isEnableDevtools()?o.toStruct():void 0}),o.hasPresenceChange()&&B.push({type:"presence-changed",source:wt.Local,value:{clientID:r,presence:this.getPresence(r)}}),this.publish(B),we.isEnabled(kn.Trivial)&&we.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,t,r,i){if(typeof e=="string"){if(typeof t!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const O=t;return this.eventStream.subscribe(P=>{for(const B of P)B.type!=="initialized"&&B.type!=="watched"&&B.type!=="unwatched"&&B.type!=="presence-changed"||O(B)},r,i)}if(e==="my-presence"){const O=t;return this.eventStream.subscribe(P=>{for(const B of P)B.type!=="initialized"&&B.type!=="presence-changed"||B.type==="presence-changed"&&B.value.clientID!==this.changeID.getActorID()||O(B)},r,i)}if(e==="others"){const O=t;return this.eventStream.subscribe(P=>{for(const B of P)B.type!=="watched"&&B.type!=="unwatched"&&B.type!=="presence-changed"||B.value.clientID!==this.changeID.getActorID()&&O(B)},r,i)}if(e==="connection"){const O=t;return this.eventStream.subscribe(P=>{for(const B of P)B.type==="connection-changed"&&O(B)},r,i)}if(e==="sync"){const O=t;return this.eventStream.subscribe(P=>{for(const B of P)B.type==="sync-status-changed"&&O(B)},r,i)}if(e==="all"){const O=t;return this.eventStream.subscribe(O,r,i)}const o=e,p=t;return this.eventStream.subscribe(O=>{for(const P of O){if(P.type!=="local-change"&&P.type!=="remote-change")continue;const B=[];for(const K of P.value.operations)this.isSameElementOrChildOf(K.path,o)&&B.push(K);B.length&&p({...P,value:{...P.value,operations:B}})}},r,i)}if(typeof e=="function"){const o=e,p=t,O=r;return this.eventStream.subscribe(P=>{for(const B of P)B.type!=="snapshot"&&B.type!=="local-change"&&B.type!=="remote-change"||o(B)},p,O)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,t){if(t===e)return!0;const r=e.split(".");return t.split(".").every((o,p)=>o===r[p])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),wt.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),we.isEnabled(kn.Trivial)&&we.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:er(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),t=this.checkpoint.increaseClientSeq(e.length);return Go.create(this.key,t,!1,e)}setActor(e){for(const t of this.localChanges)t.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=eo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return pu(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,t){const{root:r,presences:i}=Bt.bytesToSnapshot(t);this.root=new ko(r),this.presences=i,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:wt.Remote,value:{snapshot:this.isEnableDevtools()?Bt.bytesToHex(t):void 0,serverSeq:e.toString()}}])}applyChanges(e,t){we.isEnabled(kn.Debug)&&we.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),we.isEnabled(kn.Trivial)&&we.trivial(e.map(r=>`${r.getID().toTestString()}	${r.toTestString()}`).join(`
`));for(const r of e)this.applyChange(r,t);we.isEnabled(kn.Debug)&&we.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,t){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,t);const r=[],i=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(i)){const p=e.getPresenceChange();switch(p.type){case li.Put:r.push(this.presences.has(i)?{type:"presence-changed",source:t,value:{clientID:i,presence:p.presence}}:{type:"watched",source:wt.Remote,value:{clientID:i,presence:p.presence}});break;case li.Clear:r.push({type:"unwatched",source:wt.Remote,value:{clientID:i,presence:this.getPresence(i)}}),this.removeOnlineClient(i);break}}const{opInfos:o}=e.execute(this.root,this.presences,t);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),o.length>0){const p=this.isEnableDevtools()?e.toStruct():void 0;r.push(t===wt.Remote?{type:"remote-change",source:t,value:{actor:i,message:e.getMessage()||"",operations:o},rawChange:p}:{type:"local-change",source:t,value:{actor:i,message:e.getMessage()||"",operations:o},rawChange:p})}r.length>0&&this.publish(r)}applyWatchStream(e){if(e.body.case==="initialization"){const t=e.body.value.clientIds,r=new Set;for(const i of t)i!==this.changeID.getActorID()&&r.add(i);this.setOnlineClients(r),this.publish([{type:"initialized",source:wt.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:t,publisher:r}=e.body.value,i=[];if(t===Fo.DOCUMENT_WATCHED)this.addOnlineClient(r),this.hasPresence(r)&&i.push({type:"watched",source:wt.Remote,value:{clientID:r,presence:this.getPresence(r)}});else if(t===Fo.DOCUMENT_UNWATCHED){const o=this.getPresence(r);this.removeOnlineClient(r),o&&i.push({type:"unwatched",source:wt.Remote,value:{clientID:r,presence:o}})}i.length>0&&this.publish(i)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(zo),this.publish([{source:e==="removed"?wt.Remote:wt.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:t,serverSeq:r}=e.value;if(!t)return;this.applySnapshot(at.fromString(r),Bt.hexToBytes(t));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const t=xi.fromStruct(e.rawChange);this.applyChange(t,e.source)}if(e.type==="initialized"){const t=new Set;for(const{clientID:r,presence:i}of e.value)t.add(r),this.presences.set(r,i);this.setOnlineClients(t);return}if(e.type==="watched"){const{clientID:t,presence:r}=e.value;this.addOnlineClient(t),this.presences.set(t,r);return}if(e.type==="unwatched"){const{clientID:t}=e.value;this.removeOnlineClient(t),this.presences.delete(t)}if(e.type==="presence-changed"){const{clientID:t,presence:r}=e.value;this.presences.set(t,r)}}applyTransactionEvent(e){for(const t of e)this.applyDocEvent(t)}getValueByPath(e){if(!e.startsWith("$"))throw new Tt(yt.InvalidArgument,'path must start with "$"');const t=e.split(".");t.shift();let r=this.getRoot();for(const i of t)if(r=r[i],r===void 0)return;return r}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?er(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const t=this.presences.get(e);return t?er(t):void 0}getPresenceForTest(e){const t=this.presences.get(e);return t?er(t):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:er(this.getMyPresence())});for(const t of this.onlineClients)this.presences.has(t)&&e.push({clientID:t,presence:er(this.presences.get(t))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(t=>t.clientID!==e).sort((t,r)=>t.clientID>r.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const t=eo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const B of e){if(!(B instanceof tr)){new _s(t,er(this.clone.presences.get(this.changeID.getActorID()))).set(B.value,{addToHistory:!0});continue}const K=t.issueTimeTicket();B.setExecutedAt(K),t.push(B)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,wt.UndoRedo);const{opInfos:i,reverseOps:o}=r.execute(this.root,this.presences,wt.UndoRedo),p=t.getReversePresence();if(p&&o.push({type:"presence",value:p}),o.length>0&&this.internalHistory.pushRedo(o),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const O=this.changeID.getActorID(),P=[];i.length>0&&P.push({type:"local-change",source:wt.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:O},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&P.push({type:"presence-changed",source:wt.UndoRedo,value:{clientID:O,presence:this.getPresence(O)}}),this.publish(P)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const t=eo.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const B of e){if(!(B instanceof tr)){new _s(t,er(this.clone.presences.get(this.changeID.getActorID()))).set(B.value,{addToHistory:!0});continue}const K=t.issueTimeTicket();B.setExecutedAt(K),t.push(B)}const r=t.getChange();r.execute(this.clone.root,this.clone.presences,wt.UndoRedo);const{opInfos:i,reverseOps:o}=r.execute(this.root,this.presences,wt.UndoRedo),p=t.getReversePresence();if(p&&o.push({type:"presence",value:p}),o.length>0&&this.internalHistory.pushUndo(o),!r.hasPresenceChange()&&i.length===0)return;this.localChanges.push(r),this.changeID=r.getID();const O=this.changeID.getActorID(),P=[];i.length>0&&P.push({type:"local-change",source:wt.UndoRedo,value:{message:r.getMessage()||"",operations:i,actor:O},rawChange:this.isEnableDevtools()?r.toStruct():void 0}),r.hasPresenceChange()&&P.push({type:"presence-changed",source:wt.UndoRedo,value:{clientID:O,presence:this.getPresence(O)}}),this.publish(P)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function nd(n,e){return t=>async r=>(n&&r.header.set("x-api-key",n),e&&r.header.set("authorization",e),await t(r))}const bu={name:"yorkie-js-sdk",version:"0.4.20",description:"Yorkie JS SDK",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts",files:["dist"],scripts:{build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:examples":"npm run build --workspace examples","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"npm run build"},engines:{node:">=18.0.0",npm:">=7.1.0"},repository:{type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},author:{name:"hackerwins",email:"susukang98@gmail.com"},license:"Apache-2.0",bugs:{url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},homepage:"https://github.com/yorkie-team/yorkie-js-sdk#readme",devDependencies:{"@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.2.0","@types/google-protobuf":"^3.15.5","@types/jsdom":"^21.1.3","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",jsdom:"^22.1.0",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^4.7.4","typescript-transform-paths":"^3.3.1",vite:"^4.4.9","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5","vitest-environment-custom-jsdom":"file:test/vitest/env"},dependencies:{"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.2.0","@connectrpc/connect-web":"^1.2.0",long:"^5.2.0"},husky:{hooks:{"pre-commit":"npm run lint"}},workspaces:["examples/*"]};function rd(){return n=>async e=>(e.header.set("x-yorkie-user-agent",bu.name+"/"+bu.version),await n(e))}var Ro=(n=>(n.Manual="manual",n.Realtime="realtime",n.RealtimePushOnly="realtime-pushonly",n.RealtimeSyncOff="realtime-syncoff",n))(Ro||{}),Tu=(n=>(n.Deactivated="deactivated",n.Activated="activated",n))(Tu||{});const rs={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class Us{constructor(e,t){_(this,"id"),_(this,"key"),_(this,"status"),_(this,"attachmentMap"),_(this,"apiKey"),_(this,"syncLoopDuration"),_(this,"reconnectStreamDelay"),_(this,"retrySyncLoopDelay"),_(this,"rpcClient"),t=t||rs,this.key=t.key?t.key:cu(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=t.apiKey||"",this.syncLoopDuration=t.syncLoopDuration||rs.syncLoopDuration,this.reconnectStreamDelay=t.reconnectStreamDelay||rs.reconnectStreamDelay,this.retrySyncLoopDelay=t.retrySyncLoopDelay||rs.retrySyncLoopDelay,this.rpcClient=cc(Wf,Dc({baseUrl:e,interceptors:[nd(t.apiKey,t.token),rd()]}))}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),we.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw we.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){if(this.status==="deactivated")return Promise.resolve();for(const[e]of this.attachmentMap)this.detachInternal(e);return this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.status="deactivated",we.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw we.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,t={}){var i;if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==gi.Detached)throw new Tt(yt.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((o,p)=>p.set(t.initialPresence||{}));const r=(i=t.syncMode)!=null?i:"realtime";return this.rpcClient.attachDocument({clientId:this.id,changePack:Bt.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async o=>{const p=Bt.fromChangePack(o.changePack);return e.applyChangePack(p),e.getStatus()===gi.Removed||(e.applyStatus(gi.Attached),this.attachmentMap.set(e.getKey(),new Yh(this.reconnectStreamDelay,e,o.documentId,r)),r!=="manual"&&await this.runWatchLoop(e.getKey()),we.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(o=>{throw we.error(`[AD] c:"${this.getKey()}" err :`,o),o})}detach(e,t={}){var i;if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new Tt(yt.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((o,p)=>p.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:r.docID,changePack:Bt.toChangePack(e.createChangePack()),removeIfNotAttached:(i=t.removeIfNotAttached)!=null?i:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(o=>{const p=Bt.fromChangePack(o.changePack);return e.applyChangePack(p),e.getStatus()!==gi.Removed&&e.applyStatus(gi.Detached),this.detachInternal(e.getKey()),we.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(o=>{throw we.error(`[DD] c:"${this.getKey()}" err :`,o),o})}async changeSyncMode(e,t){if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new Tt(yt.DocumentNotAttached,`${e.getKey()} is not attached`);const i=r.syncMode;return i===t?e:(r.changeSyncMode(t),t==="manual"?(r.cancelWatchStream(),e):(t==="realtime"&&(r.remoteChangeEventReceived=!0),i==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);const t=[];if(e){const r=this.attachmentMap.get(e.getKey());if(!r)throw new Tt(yt.DocumentNotAttached,`${e.getKey()} is not attached`);t.push(this.syncInternal(r,"realtime"))}else this.attachmentMap.forEach(r=>{t.push(this.syncInternal(r,r.syncMode))});return Promise.all(t)}remove(e){if(!this.isActive())throw new Tt(yt.ClientNotActive,`${this.key} is not active`);const t=this.attachmentMap.get(e.getKey());if(!t)throw new Tt(yt.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const r=Bt.toChangePack(e.createChangePack());return r.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:t.docID,changePack:r},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(i=>{const o=Bt.fromChangePack(i.changePack);e.applyChangePack(o),this.detachInternal(e.getKey()),we.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(i=>{throw we.error(`[RD] c:"${this.getKey()}" err :`,i),i})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){we.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const t=[];for(const[,r]of this.attachmentMap)r.needRealtimeSync()&&(r.remoteChangeEventReceived=!1,t.push(this.syncInternal(r,r.syncMode)));Promise.all(t).then(()=>setTimeout(e,this.syncLoopDuration)).catch(r=>{we.error(`[SL] c:"${this.getKey()}" sync failed:`,r),setTimeout(e,this.retrySyncLoopDelay)})};we.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const t=this.attachmentMap.get(e);if(!t)throw new Tt(yt.DocumentNotAttached,`${e} is not attached`);return t.runWatchLoop(r=>{if(!this.isActive())return Promise.reject(new Tt(yt.ClientNotActive,`${this.key} is not active`));const i=new AbortController,o=this.rpcClient.watchDocument({clientId:this.id,documentId:t.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:i.signal});return t.doc.publish([{type:pn.ConnectionChanged,value:ts.Connected}]),we.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((p,O)=>{(async()=>{try{for await(const B of o)this.handleWatchDocumentsResponse(t,B),B.body.case==="initialization"&&p([o,i])}catch(B){t.doc.resetOnlineClients(),t.doc.publish([{type:pn.Initialized,source:wt.Local,value:t.doc.getPresences()}]),t.doc.publish([{type:pn.ConnectionChanged,value:ts.Disconnected}]),we.debug(`[WD] c:"${this.getKey()}" unwatches`),B instanceof qt&&B.code!=x.Canceled&&r(),O(B)}})()})})}handleWatchDocumentsResponse(e,t){if(t.body.case==="event"&&t.body.value.type===Fo.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(t)}detachInternal(e){const t=this.attachmentMap.get(e);!t||(t.cancelWatchStream(),we.debug(`[WD] c:"${this.getKey()}" unwatches`),this.attachmentMap.delete(e))}syncInternal(e,t){const{doc:r,docID:i}=e,o=r.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:i,changePack:Bt.toChangePack(o),pushOnly:t==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${r.getKey()}`}}).then(p=>{const O=Bt.fromChangePack(p.changePack);if(O.hasChanges()&&e.syncMode==="realtime-pushonly")return r;r.applyChangePack(O),e.doc.publish([{type:pn.SyncStatusChanged,value:ns.Synced}]),r.getStatus()===gi.Removed&&this.detachInternal(r.getKey());const P=r.getKey(),B=O.getChangeSize();return we.info(`[PP] c:"${this.getKey()}" sync d:"${P}", push:${o.getChangeSize()} pull:${B} cp:${O.getCheckpoint().toTestString()}`),r}).catch(p=>{throw r.publish([{type:pn.SyncStatusChanged,value:ns.SyncFailed}]),we.error(`[PP] c:"${this.getKey()}" err :`,p),p})}}const id=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),od={Client:Us,Document:qs,Primitive:St,Text:xo,Counter:Io,Tree:Po,IntType:Dr.IntegerCnt,LongType:Dr.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:Us,Document:qs,Primitive:St,Text:xo,Counter:Io,Tree:Po,IntType:Dr.IntegerCnt,LongType:Dr.LongCnt}),$.Change=xi,$.Client=Us,$.ClientStatus=Tu,$.Counter=Io,$.Devtools=id,$.DocEventType=pn,$.Document=qs,$.DocumentStatus=gi,$.DocumentSyncStatus=ns,$.EventSourceDevPanel=mu,$.EventSourceSDK=vu,$.OpSource=wt,$.Primitive=St,$.StreamConnectionStatus=ts,$.SyncMode=Ro,$.Text=xo,$.TimeTicket=dn,$.Tree=Po,$.converter=Bt,$.default=od,$.setLogLevel=eh,Object.defineProperties($,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(bi,bi.exports);const Fs=Vs(bi.exports);var Au={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function($e,he){(function(C,k){$e.exports=k()})(typeof self<"u"?self:Su,function(){return function($){var C={};function k(_){if(C[_])return C[_].exports;var x=C[_]={i:_,l:!1,exports:{}};return $[_].call(x.exports,x,x.exports,k),x.l=!0,x.exports}return k.m=$,k.c=C,k.d=function(_,x,w){k.o(_,x)||Object.defineProperty(_,x,{configurable:!1,enumerable:!0,get:w})},k.n=function(_){var x=_&&_.__esModule?function(){return _.default}:function(){return _};return k.d(x,"a",x),x},k.o=function(_,x){return Object.prototype.hasOwnProperty.call(_,x)},k.p="",k(k.s=109)}([function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(17),x=k(18),w=k(19),T=k(45),S=k(46),b=k(47),h=k(48),u=k(49),l=k(12),d=k(32),g=k(33),m=k(31),f=k(1),a={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:_.default,Format:x.default,Leaf:w.default,Embed:h.default,Scroll:T.default,Block:b.default,Inline:S.default,Text:u.default,Attributor:{Attribute:l.default,Class:d.default,Style:g.default,Store:m.default}};C.default=a},function($,C,k){var _=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,a){f.__proto__=a}||function(f,a){for(var c in a)a.hasOwnProperty(c)&&(f[c]=a[c])};return function(f,a){m(f,a);function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=function(m){_(f,m);function f(a){var c=this;return a="[Parchment] "+a,c=m.call(this,a)||this,c.message=a,c.name=c.constructor.name,c}return f}(Error);C.ParchmentError=x;var w={},T={},S={},b={};C.DATA_KEY="__blot";var h;(function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"})(h=C.Scope||(C.Scope={}));function u(m,f){var a=d(m);if(a==null)throw new x("Unable to create "+m+" blot");var c=a,s=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:c.create(f);return new c(s,f)}C.create=u;function l(m,f){return f===void 0&&(f=!1),m==null?null:m[C.DATA_KEY]!=null?m[C.DATA_KEY].blot:f?l(m.parentNode,f):null}C.find=l;function d(m,f){f===void 0&&(f=h.ANY);var a;if(typeof m=="string")a=b[m]||w[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)a=b.text;else if(typeof m=="number")m&h.LEVEL&h.BLOCK?a=b.block:m&h.LEVEL&h.INLINE&&(a=b.inline);else if(m instanceof HTMLElement){var c=(m.getAttribute("class")||"").split(/\s+/);for(var s in c)if(a=T[c[s]],a)break;a=a||S[m.tagName]}return a==null?null:f&h.LEVEL&a.scope&&f&h.TYPE&a.scope?a:null}C.query=d;function g(){for(var m=[],f=0;f<arguments.length;f++)m[f]=arguments[f];if(m.length>1)return m.map(function(s){return g(s)});var a=m[0];if(typeof a.blotName!="string"&&typeof a.attrName!="string")throw new x("Invalid definition");if(a.blotName==="abstract")throw new x("Cannot register abstract class");if(b[a.blotName||a.attrName]=a,typeof a.keyName=="string")w[a.keyName]=a;else if(a.className!=null&&(T[a.className]=a),a.tagName!=null){Array.isArray(a.tagName)?a.tagName=a.tagName.map(function(s){return s.toUpperCase()}):a.tagName=a.tagName.toUpperCase();var c=Array.isArray(a.tagName)?a.tagName:[a.tagName];c.forEach(function(s){(S[s]==null||a.className==null)&&(S[s]=a)})}return a}C.register=g},function($,C,k){var _=k(51),x=k(11),w=k(3),T=k(20),S=String.fromCharCode(0),b=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};b.prototype.insert=function(h,u){var l={};return h.length===0?this:(l.insert=h,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(l.attributes=u),this.push(l))},b.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},b.prototype.retain=function(h,u){if(h<=0)return this;var l={retain:h};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(l.attributes=u),this.push(l)},b.prototype.push=function(h){var u=this.ops.length,l=this.ops[u-1];if(h=w(!0,{},h),typeof l=="object"){if(typeof h.delete=="number"&&typeof l.delete=="number")return this.ops[u-1]={delete:l.delete+h.delete},this;if(typeof l.delete=="number"&&h.insert!=null&&(u-=1,l=this.ops[u-1],typeof l!="object"))return this.ops.unshift(h),this;if(x(h.attributes,l.attributes)){if(typeof h.insert=="string"&&typeof l.insert=="string")return this.ops[u-1]={insert:l.insert+h.insert},typeof h.attributes=="object"&&(this.ops[u-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof l.retain=="number")return this.ops[u-1]={retain:l.retain+h.retain},typeof h.attributes=="object"&&(this.ops[u-1].attributes=h.attributes),this}}return u===this.ops.length?this.ops.push(h):this.ops.splice(u,0,h),this},b.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},b.prototype.filter=function(h){return this.ops.filter(h)},b.prototype.forEach=function(h){this.ops.forEach(h)},b.prototype.map=function(h){return this.ops.map(h)},b.prototype.partition=function(h){var u=[],l=[];return this.forEach(function(d){var g=h(d)?u:l;g.push(d)}),[u,l]},b.prototype.reduce=function(h,u){return this.ops.reduce(h,u)},b.prototype.changeLength=function(){return this.reduce(function(h,u){return u.insert?h+T.length(u):u.delete?h-u.delete:h},0)},b.prototype.length=function(){return this.reduce(function(h,u){return h+T.length(u)},0)},b.prototype.slice=function(h,u){h=h||0,typeof u!="number"&&(u=1/0);for(var l=[],d=T.iterator(this.ops),g=0;g<u&&d.hasNext();){var m;g<h?m=d.next(h-g):(m=d.next(u-g),l.push(m)),g+=T.length(m)}return new b(l)},b.prototype.compose=function(h){var u=T.iterator(this.ops),l=T.iterator(h.ops),d=[],g=l.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var m=g.retain;u.peekType()==="insert"&&u.peekLength()<=m;)m-=u.peekLength(),d.push(u.next());g.retain-m>0&&l.next(g.retain-m)}for(var f=new b(d);u.hasNext()||l.hasNext();)if(l.peekType()==="insert")f.push(l.next());else if(u.peekType()==="delete")f.push(u.next());else{var a=Math.min(u.peekLength(),l.peekLength()),c=u.next(a),s=l.next(a);if(typeof s.retain=="number"){var v={};typeof c.retain=="number"?v.retain=a:v.insert=c.insert;var y=T.attributes.compose(c.attributes,s.attributes,typeof c.retain=="number");if(y&&(v.attributes=y),f.push(v),!l.hasNext()&&x(f.ops[f.ops.length-1],v)){var A=new b(u.rest());return f.concat(A).chop()}}else typeof s.delete=="number"&&typeof c.retain=="number"&&f.push(s)}return f.chop()},b.prototype.concat=function(h){var u=new b(this.ops.slice());return h.ops.length>0&&(u.push(h.ops[0]),u.ops=u.ops.concat(h.ops.slice(1))),u},b.prototype.diff=function(h,u){if(this.ops===h.ops)return new b;var l=[this,h].map(function(a){return a.map(function(c){if(c.insert!=null)return typeof c.insert=="string"?c.insert:S;var s=a===h?"on":"with";throw new Error("diff() called "+s+" non-document")}).join("")}),d=new b,g=_(l[0],l[1],u),m=T.iterator(this.ops),f=T.iterator(h.ops);return g.forEach(function(a){for(var c=a[1].length;c>0;){var s=0;switch(a[0]){case _.INSERT:s=Math.min(f.peekLength(),c),d.push(f.next(s));break;case _.DELETE:s=Math.min(c,m.peekLength()),m.next(s),d.delete(s);break;case _.EQUAL:s=Math.min(m.peekLength(),f.peekLength(),c);var v=m.next(s),y=f.next(s);x(v.insert,y.insert)?d.retain(s,T.attributes.diff(v.attributes,y.attributes)):d.push(y).delete(s);break}c-=s}}),d.chop()},b.prototype.eachLine=function(h,u){u=u||`
`;for(var l=T.iterator(this.ops),d=new b,g=0;l.hasNext();){if(l.peekType()!=="insert")return;var m=l.peek(),f=T.length(m)-l.peekLength(),a=typeof m.insert=="string"?m.insert.indexOf(u,f)-f:-1;if(a<0)d.push(l.next());else if(a>0)d.push(l.next(a));else{if(h(d,l.next(1).attributes||{},g)===!1)return;g+=1,d=new b}}d.length()>0&&h(d,{},g)},b.prototype.transform=function(h,u){if(u=!!u,typeof h=="number")return this.transformPosition(h,u);for(var l=T.iterator(this.ops),d=T.iterator(h.ops),g=new b;l.hasNext()||d.hasNext();)if(l.peekType()==="insert"&&(u||d.peekType()!=="insert"))g.retain(T.length(l.next()));else if(d.peekType()==="insert")g.push(d.next());else{var m=Math.min(l.peekLength(),d.peekLength()),f=l.next(m),a=d.next(m);if(f.delete)continue;a.delete?g.push(a):g.retain(m,T.attributes.transform(f.attributes,a.attributes,u))}return g.chop()},b.prototype.transformPosition=function(h,u){u=!!u;for(var l=T.iterator(this.ops),d=0;l.hasNext()&&d<=h;){var g=l.peekLength(),m=l.peekType();if(l.next(),m==="delete"){h-=Math.min(g,h-d);continue}else m==="insert"&&(d<h||!u)&&(h+=g);d+=g}return h},$.exports=b},function($,C){var k=Object.prototype.hasOwnProperty,_=Object.prototype.toString,x=Object.defineProperty,w=Object.getOwnPropertyDescriptor,T=function(l){return typeof Array.isArray=="function"?Array.isArray(l):_.call(l)==="[object Array]"},S=function(l){if(!l||_.call(l)!=="[object Object]")return!1;var d=k.call(l,"constructor"),g=l.constructor&&l.constructor.prototype&&k.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!d&&!g)return!1;var m;for(m in l);return typeof m>"u"||k.call(l,m)},b=function(l,d){x&&d.name==="__proto__"?x(l,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):l[d.name]=d.newValue},h=function(l,d){if(d==="__proto__")if(k.call(l,d)){if(w)return w(l,d).value}else return;return l[d]};$.exports=function u(){var l,d,g,m,f,a,c=arguments[0],s=1,v=arguments.length,y=!1;for(typeof c=="boolean"&&(y=c,c=arguments[1]||{},s=2),(c==null||typeof c!="object"&&typeof c!="function")&&(c={});s<v;++s)if(l=arguments[s],l!=null)for(d in l)g=h(c,d),m=h(l,d),c!==m&&(y&&m&&(S(m)||(f=T(m)))?(f?(f=!1,a=g&&T(g)?g:[]):a=g&&S(g)?g:{},b(c,{name:d,newValue:u(y,a,m)})):typeof m<"u"&&b(c,{name:d,newValue:m}));return c}},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BlockEmbed=C.bubbleFormats=void 0;var _=function(){function N(R,L){for(var M=0;M<L.length;M++){var q=L[M];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(R,q.key,q)}}return function(R,L,M){return L&&N(R.prototype,L),M&&N(R,M),R}}(),x=function N(R,L,M){R===null&&(R=Function.prototype);var q=Object.getOwnPropertyDescriptor(R,L);if(q===void 0){var V=Object.getPrototypeOf(R);return V===null?void 0:N(V,L,M)}else{if("value"in q)return q.value;var X=q.get;return X===void 0?void 0:X.call(M)}},w=k(3),T=c(w),S=k(2),b=c(S),h=k(0),u=c(h),l=k(16),d=c(l),g=k(6),m=c(g),f=k(7),a=c(f);function c(N){return N&&N.__esModule?N:{default:N}}function s(N,R){if(!(N instanceof R))throw new TypeError("Cannot call a class as a function")}function v(N,R){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:N}function y(N,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);N.prototype=Object.create(R&&R.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(N,R):N.__proto__=R)}var A=1,D=function(N){y(R,N);function R(){return s(this,R),v(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return _(R,[{key:"attach",value:function(){x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new b.default().insert(this.value(),(0,T.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(M,q){var V=u.default.query(M,u.default.Scope.BLOCK_ATTRIBUTE);V!=null&&this.attributes.attribute(V,q)}},{key:"formatAt",value:function(M,q,V,X){this.format(V,X)}},{key:"insertAt",value:function(M,q,V){if(typeof q=="string"&&q.endsWith(`
`)){var X=u.default.create(E.blotName);this.parent.insertBefore(X,M===0?this:this.next),X.insertAt(0,q.slice(0,-1))}else x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,M,q,V)}}]),R}(u.default.Embed);D.scope=u.default.Scope.BLOCK_BLOT;var E=function(N){y(R,N);function R(L){s(this,R);var M=v(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,L));return M.cache={},M}return _(R,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(u.default.Leaf).reduce(function(M,q){return q.length()===0?M:M.insert(q.value(),I(q))},new b.default).insert(`
`,I(this))),this.cache.delta}},{key:"deleteAt",value:function(M,q){x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,M,q),this.cache={}}},{key:"formatAt",value:function(M,q,V,X){q<=0||(u.default.query(V,u.default.Scope.BLOCK)?M+q===this.length()&&this.format(V,X):x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,M,Math.min(q,this.length()-M-1),V,X),this.cache={})}},{key:"insertAt",value:function(M,q,V){if(V!=null)return x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,M,q,V);if(q.length!==0){var X=q.split(`
`),ue=X.shift();ue.length>0&&(M<this.length()-1||this.children.tail==null?x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,Math.min(M,this.length()-1),ue):this.children.tail.insertAt(this.children.tail.length(),ue),this.cache={});var Z=this;X.reduce(function(z,j){return Z=Z.split(z,!0),Z.insertAt(0,j),j.length},M+ue.length)}}},{key:"insertBefore",value:function(M,q){var V=this.children.head;x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,M,q),V instanceof d.default&&V.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(M,q){x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"moveChildren",this).call(this,M,q),this.cache={}}},{key:"optimize",value:function(M){x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,M),this.cache={}}},{key:"path",value:function(M){return x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,M,!0)}},{key:"removeChild",value:function(M){x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"removeChild",this).call(this,M),this.cache={}}},{key:"split",value:function(M){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(q&&(M===0||M>=this.length()-A)){var V=this.clone();return M===0?(this.parent.insertBefore(V,this),this):(this.parent.insertBefore(V,this.next),V)}else{var X=x(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"split",this).call(this,M,q);return this.cache={},X}}}]),R}(u.default.Block);E.blotName="block",E.tagName="P",E.defaultChild="break",E.allowedChildren=[m.default,u.default.Embed,a.default];function I(N){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return N==null||(typeof N.formats=="function"&&(R=(0,T.default)(R,N.formats())),N.parent==null||N.parent.blotName=="scroll"||N.parent.statics.scope!==N.statics.scope)?R:I(N.parent,R)}C.bubbleFormats=I,C.BlockEmbed=D,C.default=E},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.overload=C.expandConfig=void 0;var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},x=function(){function Z(z,j){var F=[],J=!0,Q=!1,W=void 0;try{for(var U=z[Symbol.iterator](),H;!(J=(H=U.next()).done)&&(F.push(H.value),!(j&&F.length===j));J=!0);}catch(re){Q=!0,W=re}finally{try{!J&&U.return&&U.return()}finally{if(Q)throw W}}return F}return function(z,j){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return Z(z,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function Z(z,j){for(var F=0;F<j.length;F++){var J=j[F];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(z,J.key,J)}}return function(z,j,F){return j&&Z(z.prototype,j),F&&Z(z,F),z}}();k(50);var T=k(2),S=I(T),b=k(14),h=I(b),u=k(8),l=I(u),d=k(9),g=I(d),m=k(0),f=I(m),a=k(15),c=I(a),s=k(3),v=I(s),y=k(10),A=I(y),D=k(34),E=I(D);function I(Z){return Z&&Z.__esModule?Z:{default:Z}}function N(Z,z,j){return z in Z?Object.defineProperty(Z,z,{value:j,enumerable:!0,configurable:!0,writable:!0}):Z[z]=j,Z}function R(Z,z){if(!(Z instanceof z))throw new TypeError("Cannot call a class as a function")}var L=(0,A.default)("quill"),M=function(){w(Z,null,[{key:"debug",value:function(j){j===!0&&(j="log"),A.default.level(j)}},{key:"find",value:function(j){return j.__quill||f.default.find(j)}},{key:"import",value:function(j){return this.imports[j]==null&&L.error("Cannot import "+j+". Are you sure it was registered?"),this.imports[j]}},{key:"register",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof j!="string"){var W=j.attrName||j.blotName;typeof W=="string"?this.register("formats/"+W,j,F):Object.keys(j).forEach(function(U){J.register(U,j[U],F)})}else this.imports[j]!=null&&!Q&&L.warn("Overwriting "+j+" with",F),this.imports[j]=F,(j.startsWith("blots/")||j.startsWith("formats/"))&&F.blotName!=="abstract"?f.default.register(F):j.startsWith("modules")&&typeof F.register=="function"&&F.register()}}]);function Z(z){var j=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(R(this,Z),this.options=q(z,F),this.container=this.options.container,this.container==null)return L.error("Invalid Quill container",z);this.options.debug&&Z.debug(this.options.debug);var J=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=f.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new c.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(W){W===l.default.events.TEXT_CHANGE&&j.root.classList.toggle("ql-blank",j.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(W,U){var H=j.selection.lastRange,re=H&&H.length===0?H.index:void 0;V.call(j,function(){return j.editor.update(null,U,re)},W)});var Q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+J+"<p><br></p></div>");this.setContents(Q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return w(Z,[{key:"addContainer",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof j=="string"){var J=j;j=document.createElement("div"),j.classList.add(J)}return this.container.insertBefore(j,F),j}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(j,F,J){var Q=this,W=X(j,F,J),U=x(W,4);return j=U[0],F=U[1],J=U[3],V.call(this,function(){return Q.editor.deleteText(j,F)},J,j,-1*F)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(j),this.container.classList.toggle("ql-disabled",!j)}},{key:"focus",value:function(){var j=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=j,this.scrollIntoView()}},{key:"format",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.default.sources.API;return V.call(this,function(){var W=J.getSelection(!0),U=new S.default;if(W==null)return U;if(f.default.query(j,f.default.Scope.BLOCK))U=J.editor.formatLine(W.index,W.length,N({},j,F));else{if(W.length===0)return J.selection.format(j,F),U;U=J.editor.formatText(W.index,W.length,N({},j,F))}return J.setSelection(W,l.default.sources.SILENT),U},Q)}},{key:"formatLine",value:function(j,F,J,Q,W){var U=this,H=void 0,re=X(j,F,J,Q,W),ae=x(re,4);return j=ae[0],F=ae[1],H=ae[2],W=ae[3],V.call(this,function(){return U.editor.formatLine(j,F,H)},W,j,0)}},{key:"formatText",value:function(j,F,J,Q,W){var U=this,H=void 0,re=X(j,F,J,Q,W),ae=x(re,4);return j=ae[0],F=ae[1],H=ae[2],W=ae[3],V.call(this,function(){return U.editor.formatText(j,F,H)},W,j,0)}},{key:"getBounds",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,J=void 0;typeof j=="number"?J=this.selection.getBounds(j,F):J=this.selection.getBounds(j.index,j.length);var Q=this.container.getBoundingClientRect();return{bottom:J.bottom-Q.top,height:J.height,left:J.left-Q.left,right:J.right-Q.left,top:J.top-Q.top,width:J.width}}},{key:"getContents",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,J=X(j,F),Q=x(J,2);return j=Q[0],F=Q[1],this.editor.getContents(j,F)}},{key:"getFormat",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof j=="number"?this.editor.getFormat(j,F):this.editor.getFormat(j.index,j.length)}},{key:"getIndex",value:function(j){return j.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(j){return this.scroll.leaf(j)}},{key:"getLine",value:function(j){return this.scroll.line(j)}},{key:"getLines",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof j!="number"?this.scroll.lines(j.index,j.length):this.scroll.lines(j,F)}},{key:"getModule",value:function(j){return this.theme.modules[j]}},{key:"getSelection",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return j&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,J=X(j,F),Q=x(J,2);return j=Q[0],F=Q[1],this.editor.getText(j,F)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(j,F,J){var Q=this,W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Z.sources.API;return V.call(this,function(){return Q.editor.insertEmbed(j,F,J)},W,j)}},{key:"insertText",value:function(j,F,J,Q,W){var U=this,H=void 0,re=X(j,0,J,Q,W),ae=x(re,4);return j=ae[0],H=ae[2],W=ae[3],V.call(this,function(){return U.editor.insertText(j,F,H)},W,j,F.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(j,F,J){this.clipboard.dangerouslyPasteHTML(j,F,J)}},{key:"removeFormat",value:function(j,F,J){var Q=this,W=X(j,F,J),U=x(W,4);return j=U[0],F=U[1],J=U[3],V.call(this,function(){return Q.editor.removeFormat(j,F)},J,j)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(j){var F=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API;return V.call(this,function(){j=new S.default(j);var Q=F.getLength(),W=F.editor.deleteText(0,Q),U=F.editor.applyDelta(j),H=U.ops[U.ops.length-1];H!=null&&typeof H.insert=="string"&&H.insert[H.insert.length-1]===`
`&&(F.editor.deleteText(F.getLength()-1,1),U.delete(1));var re=W.compose(U);return re},J)}},{key:"setSelection",value:function(j,F,J){if(j==null)this.selection.setRange(null,F||Z.sources.API);else{var Q=X(j,F,J),W=x(Q,4);j=W[0],F=W[1],J=W[3],this.selection.setRange(new a.Range(j,F),J),J!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API,J=new S.default().insert(j);return this.setContents(J,F)}},{key:"update",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l.default.sources.USER,F=this.scroll.update(j);return this.selection.update(j),F}},{key:"updateContents",value:function(j){var F=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API;return V.call(this,function(){return j=new S.default(j),F.editor.applyDelta(j,J)},J,!0)}}]),Z}();M.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},M.events=l.default.events,M.sources=l.default.sources,M.version="1.3.7",M.imports={delta:S.default,parchment:f.default,"core/module":g.default,"core/theme":E.default};function q(Z,z){if(z=(0,v.default)(!0,{container:Z,modules:{clipboard:!0,keyboard:!0,history:!0}},z),!z.theme||z.theme===M.DEFAULTS.theme)z.theme=E.default;else if(z.theme=M.import("themes/"+z.theme),z.theme==null)throw new Error("Invalid theme "+z.theme+". Did you register it?");var j=(0,v.default)(!0,{},z.theme.DEFAULTS);[j,z].forEach(function(Q){Q.modules=Q.modules||{},Object.keys(Q.modules).forEach(function(W){Q.modules[W]===!0&&(Q.modules[W]={})})});var F=Object.keys(j.modules).concat(Object.keys(z.modules)),J=F.reduce(function(Q,W){var U=M.import("modules/"+W);return U==null?L.error("Cannot load "+W+" module. Are you sure you registered it?"):Q[W]=U.DEFAULTS||{},Q},{});return z.modules!=null&&z.modules.toolbar&&z.modules.toolbar.constructor!==Object&&(z.modules.toolbar={container:z.modules.toolbar}),z=(0,v.default)(!0,{},M.DEFAULTS,{modules:J},j,z),["bounds","container","scrollingContainer"].forEach(function(Q){typeof z[Q]=="string"&&(z[Q]=document.querySelector(z[Q]))}),z.modules=Object.keys(z.modules).reduce(function(Q,W){return z.modules[W]&&(Q[W]=z.modules[W]),Q},{}),z}function V(Z,z,j,F){if(this.options.strict&&!this.isEnabled()&&z===l.default.sources.USER)return new S.default;var J=j==null?null:this.getSelection(),Q=this.editor.delta,W=Z();if(J!=null&&(j===!0&&(j=J.index),F==null?J=ue(J,W,z):F!==0&&(J=ue(J,j,F,z)),this.setSelection(J,l.default.sources.SILENT)),W.length()>0){var U,H=[l.default.events.TEXT_CHANGE,W,Q,z];if((U=this.emitter).emit.apply(U,[l.default.events.EDITOR_CHANGE].concat(H)),z!==l.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,H)}}return W}function X(Z,z,j,F,J){var Q={};return typeof Z.index=="number"&&typeof Z.length=="number"?typeof z!="number"?(J=F,F=j,j=z,z=Z.length,Z=Z.index):(z=Z.length,Z=Z.index):typeof z!="number"&&(J=F,F=j,j=z,z=0),(typeof j>"u"?"undefined":_(j))==="object"?(Q=j,J=F):typeof j=="string"&&(F!=null?Q[j]=F:J=j),J=J||l.default.sources.API,[Z,z,Q,J]}function ue(Z,z,j,F){if(Z==null)return null;var J=void 0,Q=void 0;if(z instanceof S.default){var W=[Z.index,Z.index+Z.length].map(function(ae){return z.transformPosition(ae,F!==l.default.sources.USER)}),U=x(W,2);J=U[0],Q=U[1]}else{var H=[Z.index,Z.index+Z.length].map(function(ae){return ae<z||ae===z&&F===l.default.sources.USER?ae:j>=0?ae+j:Math.max(z,ae+j)}),re=x(H,2);J=re[0],Q=re[1]}return new a.Range(J,Q-J)}C.expandConfig=q,C.overload=X,C.default=M},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),x=function m(f,a,c){f===null&&(f=Function.prototype);var s=Object.getOwnPropertyDescriptor(f,a);if(s===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:m(v,a,c)}else{if("value"in s)return s.value;var y=s.get;return y===void 0?void 0:y.call(c)}},w=k(7),T=h(w),S=k(0),b=h(S);function h(m){return m&&m.__esModule?m:{default:m}}function u(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function l(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function d(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var g=function(m){d(f,m);function f(){return u(this,f),l(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return _(f,[{key:"formatAt",value:function(c,s,v,y){if(f.compare(this.statics.blotName,v)<0&&b.default.query(v,b.default.Scope.BLOT)){var A=this.isolate(c,s);y&&A.wrap(v,y)}else x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"formatAt",this).call(this,c,s,v,y)}},{key:"optimize",value:function(c){if(x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"optimize",this).call(this,c),this.parent instanceof f&&f.compare(this.statics.blotName,this.parent.statics.blotName)>0){var s=this.parent.isolate(this.offset(),this.length());this.moveChildren(s),s.wrap(this)}}}],[{key:"compare",value:function(c,s){var v=f.order.indexOf(c),y=f.order.indexOf(s);return v>=0||y>=0?v-y:c===s?0:c<s?-1:1}}]),f}(b.default.Inline);g.allowedChildren=[g,b.default.Embed,T.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],C.default=g},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(0),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default.Text);C.default=h},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function a(c,s){for(var v=0;v<s.length;v++){var y=s[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(c,y.key,y)}}return function(c,s,v){return s&&a(c.prototype,s),v&&a(c,v),c}}(),x=function a(c,s,v){c===null&&(c=Function.prototype);var y=Object.getOwnPropertyDescriptor(c,s);if(y===void 0){var A=Object.getPrototypeOf(c);return A===null?void 0:a(A,s,v)}else{if("value"in y)return y.value;var D=y.get;return D===void 0?void 0:D.call(v)}},w=k(54),T=h(w),S=k(10),b=h(S);function h(a){return a&&a.__esModule?a:{default:a}}function u(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}function l(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:a}function d(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}var g=(0,b.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach(function(a){document.addEventListener(a,function(){for(var c=arguments.length,s=Array(c),v=0;v<c;v++)s[v]=arguments[v];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(y){if(y.__quill&&y.__quill.emitter){var A;(A=y.__quill.emitter).handleDOM.apply(A,s)}})})});var f=function(a){d(c,a);function c(){u(this,c);var s=l(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return s.listeners={},s.on("error",g.error),s}return _(c,[{key:"emit",value:function(){g.log.apply(g,arguments),x(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(v){for(var y=arguments.length,A=Array(y>1?y-1:0),D=1;D<y;D++)A[D-1]=arguments[D];(this.listeners[v.type]||[]).forEach(function(E){var I=E.node,N=E.handler;(v.target===I||I.contains(v.target))&&N.apply(void 0,[v].concat(A))})}},{key:"listenDOM",value:function(v,y,A){this.listeners[v]||(this.listeners[v]=[]),this.listeners[v].push({node:y,handler:A})}}]),c}(T.default);f.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},f.sources={API:"api",SILENT:"silent",USER:"user"},C.default=f},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});function _(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}var x=function w(T){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_(this,w),this.quill=T,this.options=S};x.DEFAULTS={},C.default=x},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=["error","warn","log","info"],x="warn";function w(S){if(_.indexOf(S)<=_.indexOf(x)){for(var b,h=arguments.length,u=Array(h>1?h-1:0),l=1;l<h;l++)u[l-1]=arguments[l];(b=console)[S].apply(b,u)}}function T(S){return _.reduce(function(b,h){return b[h]=w.bind(console,h,S),b},{})}w.level=T.level=function(S){x=S},C.default=T},function($,C,k){var _=Array.prototype.slice,x=k(52),w=k(53),T=$.exports=function(u,l,d){return d||(d={}),u===l?!0:u instanceof Date&&l instanceof Date?u.getTime()===l.getTime():!u||!l||typeof u!="object"&&typeof l!="object"?d.strict?u===l:u==l:h(u,l,d)};function S(u){return u==null}function b(u){return!(!u||typeof u!="object"||typeof u.length!="number"||typeof u.copy!="function"||typeof u.slice!="function"||u.length>0&&typeof u[0]!="number")}function h(u,l,d){var g,m;if(S(u)||S(l)||u.prototype!==l.prototype)return!1;if(w(u))return w(l)?(u=_.call(u),l=_.call(l),T(u,l,d)):!1;if(b(u)){if(!b(l)||u.length!==l.length)return!1;for(g=0;g<u.length;g++)if(u[g]!==l[g])return!1;return!0}try{var f=x(u),a=x(l)}catch{return!1}if(f.length!=a.length)return!1;for(f.sort(),a.sort(),g=f.length-1;g>=0;g--)if(f[g]!=a[g])return!1;for(g=f.length-1;g>=0;g--)if(m=f[g],!T(u[m],l[m],d))return!1;return typeof u==typeof l}},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(1),x=function(){function w(T,S,b){b===void 0&&(b={}),this.attrName=T,this.keyName=S;var h=_.Scope.TYPE&_.Scope.ATTRIBUTE;b.scope!=null?this.scope=b.scope&_.Scope.LEVEL|h:this.scope=_.Scope.ATTRIBUTE,b.whitelist!=null&&(this.whitelist=b.whitelist)}return w.keys=function(T){return[].map.call(T.attributes,function(S){return S.name})},w.prototype.add=function(T,S){return this.canAdd(T,S)?(T.setAttribute(this.keyName,S),!0):!1},w.prototype.canAdd=function(T,S){var b=_.query(T,_.Scope.BLOT&(this.scope|_.Scope.TYPE));return b==null?!1:this.whitelist==null?!0:typeof S=="string"?this.whitelist.indexOf(S.replace(/["']/g,""))>-1:this.whitelist.indexOf(S)>-1},w.prototype.remove=function(T){T.removeAttribute(this.keyName)},w.prototype.value=function(T){var S=T.getAttribute(this.keyName);return this.canAdd(T,S)&&S?S:""},w}();C.default=x},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.Code=void 0;var _=function(){function D(E,I){var N=[],R=!0,L=!1,M=void 0;try{for(var q=E[Symbol.iterator](),V;!(R=(V=q.next()).done)&&(N.push(V.value),!(I&&N.length===I));R=!0);}catch(X){L=!0,M=X}finally{try{!R&&q.return&&q.return()}finally{if(L)throw M}}return N}return function(E,I){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return D(E,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function D(E,I){for(var N=0;N<I.length;N++){var R=I[N];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,I,N){return I&&D(E.prototype,I),N&&D(E,N),E}}(),w=function D(E,I,N){E===null&&(E=Function.prototype);var R=Object.getOwnPropertyDescriptor(E,I);if(R===void 0){var L=Object.getPrototypeOf(E);return L===null?void 0:D(L,I,N)}else{if("value"in R)return R.value;var M=R.get;return M===void 0?void 0:M.call(N)}},T=k(2),S=a(T),b=k(0),h=a(b),u=k(4),l=a(u),d=k(6),g=a(d),m=k(7),f=a(m);function a(D){return D&&D.__esModule?D:{default:D}}function c(D,E){if(!(D instanceof E))throw new TypeError("Cannot call a class as a function")}function s(D,E){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:D}function v(D,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);D.prototype=Object.create(E&&E.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(D,E):D.__proto__=E)}var y=function(D){v(E,D);function E(){return c(this,E),s(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return E}(g.default);y.blotName="code",y.tagName="CODE";var A=function(D){v(E,D);function E(){return c(this,E),s(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return x(E,[{key:"delta",value:function(){var N=this,R=this.domNode.textContent;return R.endsWith(`
`)&&(R=R.slice(0,-1)),R.split(`
`).reduce(function(L,M){return L.insert(M).insert(`
`,N.formats())},new S.default)}},{key:"format",value:function(N,R){if(!(N===this.statics.blotName&&R)){var L=this.descendant(f.default,this.length()-1),M=_(L,1),q=M[0];q!=null&&q.deleteAt(q.length()-1,1),w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,N,R)}}},{key:"formatAt",value:function(N,R,L,M){if(R!==0&&!(h.default.query(L,h.default.Scope.BLOCK)==null||L===this.statics.blotName&&M===this.statics.formats(this.domNode))){var q=this.newlineIndex(N);if(!(q<0||q>=N+R)){var V=this.newlineIndex(N,!0)+1,X=q-V+1,ue=this.isolate(V,X),Z=ue.next;ue.format(L,M),Z instanceof E&&Z.formatAt(0,N-V+R-X,L,M)}}}},{key:"insertAt",value:function(N,R,L){if(L==null){var M=this.descendant(f.default,N),q=_(M,2),V=q[0],X=q[1];V.insertAt(X,R)}}},{key:"length",value:function(){var N=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?N:N+1}},{key:"newlineIndex",value:function(N){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R)return this.domNode.textContent.slice(0,N).lastIndexOf(`
`);var L=this.domNode.textContent.slice(N).indexOf(`
`);return L>-1?N+L:-1}},{key:"optimize",value:function(N){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,N);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===R.statics.formats(R.domNode)&&(R.optimize(N),R.moveChildren(this),R.remove())}},{key:"replace",value:function(N){w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,N),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(R){var L=h.default.find(R);L==null?R.parentNode.removeChild(R):L instanceof h.default.Embed?L.remove():L.unwrap()})}}],[{key:"create",value:function(N){var R=w(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,N);return R.setAttribute("spellcheck",!1),R}},{key:"formats",value:function(){return!0}}]),E}(l.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",C.Code=y,C.default=A},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},x=function(){function Z(z,j){var F=[],J=!0,Q=!1,W=void 0;try{for(var U=z[Symbol.iterator](),H;!(J=(H=U.next()).done)&&(F.push(H.value),!(j&&F.length===j));J=!0);}catch(re){Q=!0,W=re}finally{try{!J&&U.return&&U.return()}finally{if(Q)throw W}}return F}return function(z,j){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return Z(z,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function Z(z,j){for(var F=0;F<j.length;F++){var J=j[F];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(z,J.key,J)}}return function(z,j,F){return j&&Z(z.prototype,j),F&&Z(z,F),z}}(),T=k(2),S=R(T),b=k(20),h=R(b),u=k(0),l=R(u),d=k(13),g=R(d),m=k(24),f=R(m),a=k(4),c=R(a),s=k(16),v=R(s),y=k(21),A=R(y),D=k(11),E=R(D),I=k(3),N=R(I);function R(Z){return Z&&Z.__esModule?Z:{default:Z}}function L(Z,z,j){return z in Z?Object.defineProperty(Z,z,{value:j,enumerable:!0,configurable:!0,writable:!0}):Z[z]=j,Z}function M(Z,z){if(!(Z instanceof z))throw new TypeError("Cannot call a class as a function")}var q=/^[ -~]*$/,V=function(){function Z(z){M(this,Z),this.scroll=z,this.delta=this.getDelta()}return w(Z,[{key:"applyDelta",value:function(j){var F=this,J=!1;this.scroll.update();var Q=this.scroll.length();return this.scroll.batchStart(),j=ue(j),j.reduce(function(W,U){var H=U.retain||U.delete||U.insert.length||1,re=U.attributes||{};if(U.insert!=null){if(typeof U.insert=="string"){var ae=U.insert;ae.endsWith(`
`)&&J&&(J=!1,ae=ae.slice(0,-1)),W>=Q&&!ae.endsWith(`
`)&&(J=!0),F.scroll.insertAt(W,ae);var ve=F.scroll.line(W),Te=x(ve,2),De=Te[0],Pe=Te[1],Ie=(0,N.default)({},(0,a.bubbleFormats)(De));if(De instanceof c.default){var G=De.descendant(l.default.Leaf,Pe),le=x(G,1),oe=le[0];Ie=(0,N.default)(Ie,(0,a.bubbleFormats)(oe))}re=h.default.attributes.diff(Ie,re)||{}}else if(_(U.insert)==="object"){var Y=Object.keys(U.insert)[0];if(Y==null)return W;F.scroll.insertAt(W,Y,U.insert[Y])}Q+=H}return Object.keys(re).forEach(function(ie){F.scroll.formatAt(W,H,ie,re[ie])}),W+H},0),j.reduce(function(W,U){return typeof U.delete=="number"?(F.scroll.deleteAt(W,U.delete),W):W+(U.retain||U.insert.length||1)},0),this.scroll.batchEnd(),this.update(j)}},{key:"deleteText",value:function(j,F){return this.scroll.deleteAt(j,F),this.update(new S.default().retain(j).delete(F))}},{key:"formatLine",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Q).forEach(function(W){if(!(J.scroll.whitelist!=null&&!J.scroll.whitelist[W])){var U=J.scroll.lines(j,Math.max(F,1)),H=F;U.forEach(function(re){var ae=re.length();if(!(re instanceof g.default))re.format(W,Q[W]);else{var ve=j-re.offset(J.scroll),Te=re.newlineIndex(ve+H)-ve+1;re.formatAt(ve,Te,W,Q[W])}H-=ae})}}),this.scroll.optimize(),this.update(new S.default().retain(j).retain(F,(0,A.default)(Q)))}},{key:"formatText",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Q).forEach(function(W){J.scroll.formatAt(j,F,W,Q[W])}),this.update(new S.default().retain(j).retain(F,(0,A.default)(Q)))}},{key:"getContents",value:function(j,F){return this.delta.slice(j,j+F)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(j,F){return j.concat(F.delta())},new S.default)}},{key:"getFormat",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,J=[],Q=[];F===0?this.scroll.path(j).forEach(function(U){var H=x(U,1),re=H[0];re instanceof c.default?J.push(re):re instanceof l.default.Leaf&&Q.push(re)}):(J=this.scroll.lines(j,F),Q=this.scroll.descendants(l.default.Leaf,j,F));var W=[J,Q].map(function(U){if(U.length===0)return{};for(var H=(0,a.bubbleFormats)(U.shift());Object.keys(H).length>0;){var re=U.shift();if(re==null)return H;H=X((0,a.bubbleFormats)(re),H)}return H});return N.default.apply(N.default,W)}},{key:"getText",value:function(j,F){return this.getContents(j,F).filter(function(J){return typeof J.insert=="string"}).map(function(J){return J.insert}).join("")}},{key:"insertEmbed",value:function(j,F,J){return this.scroll.insertAt(j,F,J),this.update(new S.default().retain(j).insert(L({},F,J)))}},{key:"insertText",value:function(j,F){var J=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F=F.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(j,F),Object.keys(Q).forEach(function(W){J.scroll.formatAt(j,F.length,W,Q[W])}),this.update(new S.default().retain(j).insert(F,(0,A.default)(Q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var j=this.scroll.children.head;return j.statics.blotName!==c.default.blotName||j.children.length>1?!1:j.children.head instanceof v.default}},{key:"removeFormat",value:function(j,F){var J=this.getText(j,F),Q=this.scroll.line(j+F),W=x(Q,2),U=W[0],H=W[1],re=0,ae=new S.default;U!=null&&(U instanceof g.default?re=U.newlineIndex(H)-H+1:re=U.length()-H,ae=U.delta().slice(H,H+re-1).insert(`
`));var ve=this.getContents(j,F+re),Te=ve.diff(new S.default().insert(J).concat(ae)),De=new S.default().retain(j).concat(Te);return this.applyDelta(De)}},{key:"update",value:function(j){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Q=this.delta;if(F.length===1&&F[0].type==="characterData"&&F[0].target.data.match(q)&&l.default.find(F[0].target)){var W=l.default.find(F[0].target),U=(0,a.bubbleFormats)(W),H=W.offset(this.scroll),re=F[0].oldValue.replace(f.default.CONTENTS,""),ae=new S.default().insert(re),ve=new S.default().insert(W.value()),Te=new S.default().retain(H).concat(ae.diff(ve,J));j=Te.reduce(function(De,Pe){return Pe.insert?De.insert(Pe.insert,U):De.push(Pe)},new S.default),this.delta=Q.compose(j)}else this.delta=this.getDelta(),(!j||!(0,E.default)(Q.compose(j),this.delta))&&(j=Q.diff(this.delta,J));return j}}]),Z}();function X(Z,z){return Object.keys(z).reduce(function(j,F){return Z[F]==null||(z[F]===Z[F]?j[F]=z[F]:Array.isArray(z[F])?z[F].indexOf(Z[F])<0&&(j[F]=z[F].concat([Z[F]])):j[F]=[z[F],Z[F]]),j},{})}function ue(Z){return Z.reduce(function(z,j){if(j.insert===1){var F=(0,A.default)(j.attributes);return delete F.image,z.insert({image:j.attributes.image},F)}if(j.attributes!=null&&(j.attributes.list===!0||j.attributes.bullet===!0)&&(j=(0,A.default)(j),j.attributes.list?j.attributes.list="ordered":(j.attributes.list="bullet",delete j.attributes.bullet)),typeof j.insert=="string"){var J=j.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return z.insert(J,j.attributes)}return z.push(j)},new S.default)}C.default=V},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.Range=void 0;var _=function(){function D(E,I){var N=[],R=!0,L=!1,M=void 0;try{for(var q=E[Symbol.iterator](),V;!(R=(V=q.next()).done)&&(N.push(V.value),!(I&&N.length===I));R=!0);}catch(X){L=!0,M=X}finally{try{!R&&q.return&&q.return()}finally{if(L)throw M}}return N}return function(E,I){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return D(E,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function D(E,I){for(var N=0;N<I.length;N++){var R=I[N];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,I,N){return I&&D(E.prototype,I),N&&D(E,N),E}}(),w=k(0),T=f(w),S=k(21),b=f(S),h=k(11),u=f(h),l=k(8),d=f(l),g=k(10),m=f(g);function f(D){return D&&D.__esModule?D:{default:D}}function a(D){if(Array.isArray(D)){for(var E=0,I=Array(D.length);E<D.length;E++)I[E]=D[E];return I}else return Array.from(D)}function c(D,E){if(!(D instanceof E))throw new TypeError("Cannot call a class as a function")}var s=(0,m.default)("quill:selection"),v=function D(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;c(this,D),this.index=E,this.length=I},y=function(){function D(E,I){var N=this;c(this,D),this.emitter=I,this.scroll=E,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=T.default.create("cursor",this),this.lastRange=this.savedRange=new v(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){N.mouseDown||setTimeout(N.update.bind(N,d.default.sources.USER),1)}),this.emitter.on(d.default.events.EDITOR_CHANGE,function(R,L){R===d.default.events.TEXT_CHANGE&&L.length()>0&&N.update(d.default.sources.SILENT)}),this.emitter.on(d.default.events.SCROLL_BEFORE_UPDATE,function(){if(!!N.hasFocus()){var R=N.getNativeRange();R!=null&&R.start.node!==N.cursor.textNode&&N.emitter.once(d.default.events.SCROLL_UPDATE,function(){try{N.setNativeRange(R.start.node,R.start.offset,R.end.node,R.end.offset)}catch{}})}}),this.emitter.on(d.default.events.SCROLL_OPTIMIZE,function(R,L){if(L.range){var M=L.range,q=M.startNode,V=M.startOffset,X=M.endNode,ue=M.endOffset;N.setNativeRange(q,V,X,ue)}}),this.update(d.default.sources.SILENT)}return x(D,[{key:"handleComposition",value:function(){var I=this;this.root.addEventListener("compositionstart",function(){I.composing=!0}),this.root.addEventListener("compositionend",function(){if(I.composing=!1,I.cursor.parent){var N=I.cursor.restore();if(!N)return;setTimeout(function(){I.setNativeRange(N.startNode,N.startOffset,N.endNode,N.endOffset)},1)}})}},{key:"handleDragging",value:function(){var I=this;this.emitter.listenDOM("mousedown",document.body,function(){I.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){I.mouseDown=!1,I.update(d.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(I,N){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[I])){this.scroll.update();var R=this.getNativeRange();if(!(R==null||!R.native.collapsed||T.default.query(I,T.default.Scope.BLOCK))){if(R.start.node!==this.cursor.textNode){var L=T.default.find(R.start.node,!1);if(L==null)return;if(L instanceof T.default.Leaf){var M=L.split(R.start.offset);L.parent.insertBefore(this.cursor,M)}else L.insertBefore(this.cursor,R.start.node);this.cursor.attach()}this.cursor.format(I,N),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(I){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=this.scroll.length();I=Math.min(I,R-1),N=Math.min(I+N,R-1)-I;var L=void 0,M=this.scroll.leaf(I),q=_(M,2),V=q[0],X=q[1];if(V==null)return null;var ue=V.position(X,!0),Z=_(ue,2);L=Z[0],X=Z[1];var z=document.createRange();if(N>0){z.setStart(L,X);var j=this.scroll.leaf(I+N),F=_(j,2);if(V=F[0],X=F[1],V==null)return null;var J=V.position(X,!0),Q=_(J,2);return L=Q[0],X=Q[1],z.setEnd(L,X),z.getBoundingClientRect()}else{var W="left",U=void 0;return L instanceof Text?(X<L.data.length?(z.setStart(L,X),z.setEnd(L,X+1)):(z.setStart(L,X-1),z.setEnd(L,X),W="right"),U=z.getBoundingClientRect()):(U=V.domNode.getBoundingClientRect(),X>0&&(W="right")),{bottom:U.top+U.height,height:U.height,left:U[W],right:U[W],top:U.top,width:0}}}},{key:"getNativeRange",value:function(){var I=document.getSelection();if(I==null||I.rangeCount<=0)return null;var N=I.getRangeAt(0);if(N==null)return null;var R=this.normalizeNative(N);return s.info("getNativeRange",R),R}},{key:"getRange",value:function(){var I=this.getNativeRange();if(I==null)return[null,null];var N=this.normalizedToRange(I);return[N,I]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(I){var N=this,R=[[I.start.node,I.start.offset]];I.native.collapsed||R.push([I.end.node,I.end.offset]);var L=R.map(function(V){var X=_(V,2),ue=X[0],Z=X[1],z=T.default.find(ue,!0),j=z.offset(N.scroll);return Z===0?j:z instanceof T.default.Container?j+z.length():j+z.index(ue,Z)}),M=Math.min(Math.max.apply(Math,a(L)),this.scroll.length()-1),q=Math.min.apply(Math,[M].concat(a(L)));return new v(q,M-q)}},{key:"normalizeNative",value:function(I){if(!A(this.root,I.startContainer)||!I.collapsed&&!A(this.root,I.endContainer))return null;var N={start:{node:I.startContainer,offset:I.startOffset},end:{node:I.endContainer,offset:I.endOffset},native:I};return[N.start,N.end].forEach(function(R){for(var L=R.node,M=R.offset;!(L instanceof Text)&&L.childNodes.length>0;)if(L.childNodes.length>M)L=L.childNodes[M],M=0;else if(L.childNodes.length===M)L=L.lastChild,M=L instanceof Text?L.data.length:L.childNodes.length+1;else break;R.node=L,R.offset=M}),N}},{key:"rangeToNative",value:function(I){var N=this,R=I.collapsed?[I.index]:[I.index,I.index+I.length],L=[],M=this.scroll.length();return R.forEach(function(q,V){q=Math.min(M-1,q);var X=void 0,ue=N.scroll.leaf(q),Z=_(ue,2),z=Z[0],j=Z[1],F=z.position(j,V!==0),J=_(F,2);X=J[0],j=J[1],L.push(X,j)}),L.length<2&&(L=L.concat(L)),L}},{key:"scrollIntoView",value:function(I){var N=this.lastRange;if(N!=null){var R=this.getBounds(N.index,N.length);if(R!=null){var L=this.scroll.length()-1,M=this.scroll.line(Math.min(N.index,L)),q=_(M,1),V=q[0],X=V;if(N.length>0){var ue=this.scroll.line(Math.min(N.index+N.length,L)),Z=_(ue,1);X=Z[0]}if(!(V==null||X==null)){var z=I.getBoundingClientRect();R.top<z.top?I.scrollTop-=z.top-R.top:R.bottom>z.bottom&&(I.scrollTop+=R.bottom-z.bottom)}}}}},{key:"setNativeRange",value:function(I,N){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:I,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:N,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s.info("setNativeRange",I,N,R,L),!(I!=null&&(this.root.parentNode==null||I.parentNode==null||R.parentNode==null))){var q=document.getSelection();if(q!=null)if(I!=null){this.hasFocus()||this.root.focus();var V=(this.getNativeRange()||{}).native;if(V==null||M||I!==V.startContainer||N!==V.startOffset||R!==V.endContainer||L!==V.endOffset){I.tagName=="BR"&&(N=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode),R.tagName=="BR"&&(L=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode);var X=document.createRange();X.setStart(I,N),X.setEnd(R,L),q.removeAllRanges(),q.addRange(X)}}else q.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(I){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;if(typeof N=="string"&&(R=N,N=!1),s.info("setRange",I),I!=null){var L=this.rangeToNative(I);this.setNativeRange.apply(this,a(L).concat([N]))}else this.setNativeRange(null);this.update(R)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,N=this.lastRange,R=this.getRange(),L=_(R,2),M=L[0],q=L[1];if(this.lastRange=M,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,u.default)(N,this.lastRange)){var V;!this.composing&&q!=null&&q.native.collapsed&&q.start.node!==this.cursor.textNode&&this.cursor.restore();var X=[d.default.events.SELECTION_CHANGE,(0,b.default)(this.lastRange),(0,b.default)(N),I];if((V=this.emitter).emit.apply(V,[d.default.events.EDITOR_CHANGE].concat(X)),I!==d.default.sources.SILENT){var ue;(ue=this.emitter).emit.apply(ue,X)}}}}]),D}();function A(D,E){try{E.parentNode}catch{return!1}return E instanceof Text&&(E=E.parentNode),D.contains(E)}C.Range=v,C.default=y},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=k(0),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(){return b(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return _(g,[{key:"insertInto",value:function(f,a){f.children.length===0?x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,f,a):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g}(T.default.Embed);l.blotName="break",l.tagName="BR",C.default=l},function($,C,k){var _=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var d in l)l.hasOwnProperty(d)&&(u[d]=l[d])};return function(u,l){h(u,l);function d(){this.constructor=u}u.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(44),w=k(30),T=k(1),S=function(h){_(u,h);function u(l){var d=h.call(this,l)||this;return d.build(),d}return u.prototype.appendChild=function(l){this.insertBefore(l)},u.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(l){l.attach()})},u.prototype.build=function(){var l=this;this.children=new x.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(d){try{var g=b(d);l.insertBefore(g,l.children.head||void 0)}catch(m){if(m instanceof T.ParchmentError)return;throw m}})},u.prototype.deleteAt=function(l,d){if(l===0&&d===this.length())return this.remove();this.children.forEachAt(l,d,function(g,m,f){g.deleteAt(m,f)})},u.prototype.descendant=function(l,d){var g=this.children.find(d),m=g[0],f=g[1];return l.blotName==null&&l(m)||l.blotName!=null&&m instanceof l?[m,f]:m instanceof u?m.descendant(l,f):[null,-1]},u.prototype.descendants=function(l,d,g){d===void 0&&(d=0),g===void 0&&(g=Number.MAX_VALUE);var m=[],f=g;return this.children.forEachAt(d,g,function(a,c,s){(l.blotName==null&&l(a)||l.blotName!=null&&a instanceof l)&&m.push(a),a instanceof u&&(m=m.concat(a.descendants(l,c,f))),f-=s}),m},u.prototype.detach=function(){this.children.forEach(function(l){l.detach()}),h.prototype.detach.call(this)},u.prototype.formatAt=function(l,d,g,m){this.children.forEachAt(l,d,function(f,a,c){f.formatAt(a,c,g,m)})},u.prototype.insertAt=function(l,d,g){var m=this.children.find(l),f=m[0],a=m[1];if(f)f.insertAt(a,d,g);else{var c=g==null?T.create("text",d):T.create(d,g);this.appendChild(c)}},u.prototype.insertBefore=function(l,d){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return l instanceof g}))throw new T.ParchmentError("Cannot insert "+l.statics.blotName+" into "+this.statics.blotName);l.insertInto(this,d)},u.prototype.length=function(){return this.children.reduce(function(l,d){return l+d.length()},0)},u.prototype.moveChildren=function(l,d){this.children.forEach(function(g){l.insertBefore(g,d)})},u.prototype.optimize=function(l){if(h.prototype.optimize.call(this,l),this.children.length===0)if(this.statics.defaultChild!=null){var d=T.create(this.statics.defaultChild);this.appendChild(d),d.optimize(l)}else this.remove()},u.prototype.path=function(l,d){d===void 0&&(d=!1);var g=this.children.find(l,d),m=g[0],f=g[1],a=[[this,l]];return m instanceof u?a.concat(m.path(f,d)):(m!=null&&a.push([m,f]),a)},u.prototype.removeChild=function(l){this.children.remove(l)},u.prototype.replace=function(l){l instanceof u&&l.moveChildren(this),h.prototype.replace.call(this,l)},u.prototype.split=function(l,d){if(d===void 0&&(d=!1),!d){if(l===0)return this;if(l===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(l,this.length(),function(m,f,a){m=m.split(f,d),g.appendChild(m)}),g},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(l,d){var g=this,m=[],f=[];l.forEach(function(a){a.target===g.domNode&&a.type==="childList"&&(m.push.apply(m,a.addedNodes),f.push.apply(f,a.removedNodes))}),f.forEach(function(a){if(!(a.parentNode!=null&&a.tagName!=="IFRAME"&&document.body.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var c=T.find(a);c!=null&&(c.domNode.parentNode==null||c.domNode.parentNode===g.domNode)&&c.detach()}}),m.filter(function(a){return a.parentNode==g.domNode}).sort(function(a,c){return a===c?0:a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(a){var c=null;a.nextSibling!=null&&(c=T.find(a.nextSibling));var s=b(a);(s.next!=c||s.next==null)&&(s.parent!=null&&s.parent.removeChild(g),g.insertBefore(s,c||void 0))})},u}(w.default);function b(h){var u=T.find(h);if(u==null)try{u=T.create(h)}catch{u=T.create(T.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(d){u.domNode.appendChild(d)}),h.parentNode&&h.parentNode.replaceChild(u.domNode,h),u.attach()}return u}C.default=S},function($,C,k){var _=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var d in l)l.hasOwnProperty(d)&&(u[d]=l[d])};return function(u,l){h(u,l);function d(){this.constructor=u}u.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(12),w=k(31),T=k(17),S=k(1),b=function(h){_(u,h);function u(l){var d=h.call(this,l)||this;return d.attributes=new w.default(d.domNode),d}return u.formats=function(l){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return l.tagName.toLowerCase()},u.prototype.format=function(l,d){var g=S.query(l);g instanceof x.default?this.attributes.attribute(g,d):d&&g!=null&&(l!==this.statics.blotName||this.formats()[l]!==d)&&this.replaceWith(l,d)},u.prototype.formats=function(){var l=this.attributes.values(),d=this.statics.formats(this.domNode);return d!=null&&(l[this.statics.blotName]=d),l},u.prototype.replaceWith=function(l,d){var g=h.prototype.replaceWith.call(this,l,d);return this.attributes.copy(g),g},u.prototype.update=function(l,d){var g=this;h.prototype.update.call(this,l,d),l.some(function(m){return m.target===g.domNode&&m.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(l,d){var g=h.prototype.wrap.call(this,l,d);return g instanceof u&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},u}(T.default);C.default=b},function($,C,k){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(30),w=k(1),T=function(S){_(b,S);function b(){return S!==null&&S.apply(this,arguments)||this}return b.value=function(h){return!0},b.prototype.index=function(h,u){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},b.prototype.position=function(h,u){var l=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(l+=1),[this.parent.domNode,l]},b.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},b.scope=w.Scope.INLINE_BLOT,b}(x.default);C.default=T},function($,C,k){var _=k(11),x=k(3),w={attributes:{compose:function(S,b,h){typeof S!="object"&&(S={}),typeof b!="object"&&(b={});var u=x(!0,{},b);h||(u=Object.keys(u).reduce(function(d,g){return u[g]!=null&&(d[g]=u[g]),d},{}));for(var l in S)S[l]!==void 0&&b[l]===void 0&&(u[l]=S[l]);return Object.keys(u).length>0?u:void 0},diff:function(S,b){typeof S!="object"&&(S={}),typeof b!="object"&&(b={});var h=Object.keys(S).concat(Object.keys(b)).reduce(function(u,l){return _(S[l],b[l])||(u[l]=b[l]===void 0?null:b[l]),u},{});return Object.keys(h).length>0?h:void 0},transform:function(S,b,h){if(typeof S!="object")return b;if(typeof b=="object"){if(!h)return b;var u=Object.keys(b).reduce(function(l,d){return S[d]===void 0&&(l[d]=b[d]),l},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(S){return new T(S)},length:function(S){return typeof S.delete=="number"?S.delete:typeof S.retain=="number"?S.retain:typeof S.insert=="string"?S.insert.length:1}};function T(S){this.ops=S,this.index=0,this.offset=0}T.prototype.hasNext=function(){return this.peekLength()<1/0},T.prototype.next=function(S){S||(S=1/0);var b=this.ops[this.index];if(b){var h=this.offset,u=w.length(b);if(S>=u-h?(S=u-h,this.index+=1,this.offset=0):this.offset+=S,typeof b.delete=="number")return{delete:S};var l={};return b.attributes&&(l.attributes=b.attributes),typeof b.retain=="number"?l.retain=S:typeof b.insert=="string"?l.insert=b.insert.substr(h,S):l.insert=b.insert,l}else return{retain:1/0}},T.prototype.peek=function(){return this.ops[this.index]},T.prototype.peekLength=function(){return this.ops[this.index]?w.length(this.ops[this.index])-this.offset:1/0},T.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},T.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var S=this.offset,b=this.index,h=this.next(),u=this.ops.slice(this.index);return this.offset=S,this.index=b,[h].concat(u)}else return[]},$.exports=w},function($,C){var k=function(){function _(g,m){return m!=null&&g instanceof m}var x;try{x=Map}catch{x=function(){}}var w;try{w=Set}catch{w=function(){}}var T;try{T=Promise}catch{T=function(){}}function S(g,m,f,a,c){typeof m=="object"&&(f=m.depth,a=m.prototype,c=m.includeNonEnumerable,m=m.circular);var s=[],v=[],y=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof f>"u"&&(f=1/0);function A(D,E){if(D===null)return null;if(E===0)return D;var I,N;if(typeof D!="object")return D;if(_(D,x))I=new x;else if(_(D,w))I=new w;else if(_(D,T))I=new T(function(z,j){D.then(function(F){z(A(F,E-1))},function(F){j(A(F,E-1))})});else if(S.__isArray(D))I=[];else if(S.__isRegExp(D))I=new RegExp(D.source,d(D)),D.lastIndex&&(I.lastIndex=D.lastIndex);else if(S.__isDate(D))I=new Date(D.getTime());else{if(y&&Buffer.isBuffer(D))return Buffer.allocUnsafe?I=Buffer.allocUnsafe(D.length):I=new Buffer(D.length),D.copy(I),I;_(D,Error)?I=Object.create(D):typeof a>"u"?(N=Object.getPrototypeOf(D),I=Object.create(N)):(I=Object.create(a),N=a)}if(m){var R=s.indexOf(D);if(R!=-1)return v[R];s.push(D),v.push(I)}_(D,x)&&D.forEach(function(z,j){var F=A(j,E-1),J=A(z,E-1);I.set(F,J)}),_(D,w)&&D.forEach(function(z){var j=A(z,E-1);I.add(j)});for(var L in D){var M;N&&(M=Object.getOwnPropertyDescriptor(N,L)),!(M&&M.set==null)&&(I[L]=A(D[L],E-1))}if(Object.getOwnPropertySymbols)for(var q=Object.getOwnPropertySymbols(D),L=0;L<q.length;L++){var V=q[L],X=Object.getOwnPropertyDescriptor(D,V);X&&!X.enumerable&&!c||(I[V]=A(D[V],E-1),X.enumerable||Object.defineProperty(I,V,{enumerable:!1}))}if(c)for(var ue=Object.getOwnPropertyNames(D),L=0;L<ue.length;L++){var Z=ue[L],X=Object.getOwnPropertyDescriptor(D,Z);X&&X.enumerable||(I[Z]=A(D[Z],E-1),Object.defineProperty(I,Z,{enumerable:!1}))}return I}return A(g,f)}S.clonePrototype=function(m){if(m===null)return null;var f=function(){};return f.prototype=m,new f};function b(g){return Object.prototype.toString.call(g)}S.__objToStr=b;function h(g){return typeof g=="object"&&b(g)==="[object Date]"}S.__isDate=h;function u(g){return typeof g=="object"&&b(g)==="[object Array]"}S.__isArray=u;function l(g){return typeof g=="object"&&b(g)==="[object RegExp]"}S.__isRegExp=l;function d(g){var m="";return g.global&&(m+="g"),g.ignoreCase&&(m+="i"),g.multiline&&(m+="m"),m}return S.__getRegExpFlags=d,S}();typeof $=="object"&&$.exports&&($.exports=k)},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function I(N,R){var L=[],M=!0,q=!1,V=void 0;try{for(var X=N[Symbol.iterator](),ue;!(M=(ue=X.next()).done)&&(L.push(ue.value),!(R&&L.length===R));M=!0);}catch(Z){q=!0,V=Z}finally{try{!M&&X.return&&X.return()}finally{if(q)throw V}}return L}return function(N,R){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return I(N,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function I(N,R){for(var L=0;L<R.length;L++){var M=R[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(N,M.key,M)}}return function(N,R,L){return R&&I(N.prototype,R),L&&I(N,L),N}}(),w=function I(N,R,L){N===null&&(N=Function.prototype);var M=Object.getOwnPropertyDescriptor(N,R);if(M===void 0){var q=Object.getPrototypeOf(N);return q===null?void 0:I(q,R,L)}else{if("value"in M)return M.value;var V=M.get;return V===void 0?void 0:V.call(L)}},T=k(0),S=s(T),b=k(8),h=s(b),u=k(4),l=s(u),d=k(16),g=s(d),m=k(13),f=s(m),a=k(25),c=s(a);function s(I){return I&&I.__esModule?I:{default:I}}function v(I,N){if(!(I instanceof N))throw new TypeError("Cannot call a class as a function")}function y(I,N){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:I}function A(I,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);I.prototype=Object.create(N&&N.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(I,N):I.__proto__=N)}function D(I){return I instanceof l.default||I instanceof u.BlockEmbed}var E=function(I){A(N,I);function N(R,L){v(this,N);var M=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,R));return M.emitter=L.emitter,Array.isArray(L.whitelist)&&(M.whitelist=L.whitelist.reduce(function(q,V){return q[V]=!0,q},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return x(N,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(L,M){var q=this.line(L),V=_(q,2),X=V[0],ue=V[1],Z=this.line(L+M),z=_(Z,1),j=z[0];if(w(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,L,M),j!=null&&X!==j&&ue>0){if(X instanceof u.BlockEmbed||j instanceof u.BlockEmbed){this.optimize();return}if(X instanceof f.default){var F=X.newlineIndex(X.length(),!0);if(F>-1&&(X=X.split(F+1),X===j)){this.optimize();return}}else if(j instanceof f.default){var J=j.newlineIndex(0);J>-1&&j.split(J+1)}var Q=j.children.head instanceof g.default?null:j.children.head;X.moveChildren(j,Q),X.remove()}this.optimize()}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",L)}},{key:"formatAt",value:function(L,M,q,V){this.whitelist!=null&&!this.whitelist[q]||(w(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,L,M,q,V),this.optimize())}},{key:"insertAt",value:function(L,M,q){if(!(q!=null&&this.whitelist!=null&&!this.whitelist[M])){if(L>=this.length())if(q==null||S.default.query(M,S.default.Scope.BLOCK)==null){var V=S.default.create(this.statics.defaultChild);this.appendChild(V),q==null&&M.endsWith(`
`)&&(M=M.slice(0,-1)),V.insertAt(0,M,q)}else{var X=S.default.create(M,q);this.appendChild(X)}else w(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,L,M,q);this.optimize()}}},{key:"insertBefore",value:function(L,M){if(L.statics.scope===S.default.Scope.INLINE_BLOT){var q=S.default.create(this.statics.defaultChild);q.appendChild(L),L=q}w(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,L,M)}},{key:"leaf",value:function(L){return this.path(L).pop()||[null,-1]}},{key:"line",value:function(L){return L===this.length()?this.line(L-1):this.descendant(D,L)}},{key:"lines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,q=function V(X,ue,Z){var z=[],j=Z;return X.children.forEachAt(ue,Z,function(F,J,Q){D(F)?z.push(F):F instanceof S.default.Container&&(z=z.concat(V(F,J,j))),j-=Q}),z};return q(this,L,M)}},{key:"optimize",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(w(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,L,M),L.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,L,M))}},{key:"path",value:function(L){return w(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,L).slice(1)}},{key:"update",value:function(L){if(this.batch!==!0){var M=h.default.sources.USER;typeof L=="string"&&(M=L),Array.isArray(L)||(L=this.observer.takeRecords()),L.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,M,L),w(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"update",this).call(this,L.concat([])),L.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,M,L)}}}]),N}(S.default.Scroll);E.blotName="scroll",E.className="ql-editor",E.tagName="DIV",E.defaultChild="block",E.allowedChildren=[l.default,u.BlockEmbed,c.default],C.default=E},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.SHORTKEY=C.default=void 0;var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},x=function(){function U(H,re){var ae=[],ve=!0,Te=!1,De=void 0;try{for(var Pe=H[Symbol.iterator](),Ie;!(ve=(Ie=Pe.next()).done)&&(ae.push(Ie.value),!(re&&ae.length===re));ve=!0);}catch(G){Te=!0,De=G}finally{try{!ve&&Pe.return&&Pe.return()}finally{if(Te)throw De}}return ae}return function(H,re){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return U(H,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function U(H,re){for(var ae=0;ae<re.length;ae++){var ve=re[ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(H,ve.key,ve)}}return function(H,re,ae){return re&&U(H.prototype,re),ae&&U(H,ae),H}}(),T=k(21),S=I(T),b=k(11),h=I(b),u=k(3),l=I(u),d=k(2),g=I(d),m=k(20),f=I(m),a=k(0),c=I(a),s=k(5),v=I(s),y=k(10),A=I(y),D=k(9),E=I(D);function I(U){return U&&U.__esModule?U:{default:U}}function N(U,H,re){return H in U?Object.defineProperty(U,H,{value:re,enumerable:!0,configurable:!0,writable:!0}):U[H]=re,U}function R(U,H){if(!(U instanceof H))throw new TypeError("Cannot call a class as a function")}function L(U,H){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:U}function M(U,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);U.prototype=Object.create(H&&H.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(U,H):U.__proto__=H)}var q=(0,A.default)("quill:keyboard"),V=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",X=function(U){M(H,U),w(H,null,[{key:"match",value:function(ae,ve){return ve=W(ve),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Te){return!!ve[Te]!==ae[Te]&&ve[Te]!==null})?!1:ve.key===(ae.which||ae.keyCode)}}]);function H(re,ae){R(this,H);var ve=L(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,re,ae));return ve.bindings={},Object.keys(ve.options.bindings).forEach(function(Te){Te==="list autofill"&&re.scroll.whitelist!=null&&!re.scroll.whitelist.list||ve.options.bindings[Te]&&ve.addBinding(ve.options.bindings[Te])}),ve.addBinding({key:H.keys.ENTER,shiftKey:null},F),ve.addBinding({key:H.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ve.addBinding({key:H.keys.BACKSPACE},{collapsed:!0},Z),ve.addBinding({key:H.keys.DELETE},{collapsed:!0},z)):(ve.addBinding({key:H.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Z),ve.addBinding({key:H.keys.DELETE},{collapsed:!0,suffix:/^.?$/},z)),ve.addBinding({key:H.keys.BACKSPACE},{collapsed:!1},j),ve.addBinding({key:H.keys.DELETE},{collapsed:!1},j),ve.addBinding({key:H.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Z),ve.listen(),ve}return w(H,[{key:"addBinding",value:function(ae){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},De=W(ae);if(De==null||De.key==null)return q.warn("Attempted to add invalid keyboard binding",De);typeof ve=="function"&&(ve={handler:ve}),typeof Te=="function"&&(Te={handler:Te}),De=(0,l.default)(De,ve,Te),this.bindings[De.key]=this.bindings[De.key]||[],this.bindings[De.key].push(De)}},{key:"listen",value:function(){var ae=this;this.quill.root.addEventListener("keydown",function(ve){if(!ve.defaultPrevented){var Te=ve.which||ve.keyCode,De=(ae.bindings[Te]||[]).filter(function(_e){return H.match(ve,_e)});if(De.length!==0){var Pe=ae.quill.getSelection();if(!(Pe==null||!ae.quill.hasFocus())){var Ie=ae.quill.getLine(Pe.index),G=x(Ie,2),le=G[0],oe=G[1],Y=ae.quill.getLeaf(Pe.index),ie=x(Y,2),ge=ie[0],be=ie[1],de=Pe.length===0?[ge,be]:ae.quill.getLeaf(Pe.index+Pe.length),ke=x(de,2),Re=ke[0],je=ke[1],nt=ge instanceof c.default.Text?ge.value().slice(0,be):"",lt=Re instanceof c.default.Text?Re.value().slice(je):"",Ge={collapsed:Pe.length===0,empty:Pe.length===0&&le.length()<=1,format:ae.quill.getFormat(Pe),offset:oe,prefix:nt,suffix:lt},Ye=De.some(function(_e){if(_e.collapsed!=null&&_e.collapsed!==Ge.collapsed||_e.empty!=null&&_e.empty!==Ge.empty||_e.offset!=null&&_e.offset!==Ge.offset)return!1;if(Array.isArray(_e.format)){if(_e.format.every(function(Qe){return Ge.format[Qe]==null}))return!1}else if(_(_e.format)==="object"&&!Object.keys(_e.format).every(function(Qe){return _e.format[Qe]===!0?Ge.format[Qe]!=null:_e.format[Qe]===!1?Ge.format[Qe]==null:(0,h.default)(_e.format[Qe],Ge.format[Qe])}))return!1;return _e.prefix!=null&&!_e.prefix.test(Ge.prefix)||_e.suffix!=null&&!_e.suffix.test(Ge.suffix)?!1:_e.handler.call(ae,Pe,Ge)!==!0});Ye&&ve.preventDefault()}}}})}}]),H}(E.default);X.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},X.DEFAULTS={bindings:{bold:Q("bold"),italic:Q("italic"),underline:Q("underline"),indent:{key:X.keys.TAB,format:["blockquote","indent","list"],handler:function(H,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","+1",v.default.sources.USER)}},outdent:{key:X.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(H,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","-1",v.default.sources.USER)}},"outdent backspace":{key:X.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(H,re){re.format.indent!=null?this.quill.format("indent","-1",v.default.sources.USER):re.format.list!=null&&this.quill.format("list",!1,v.default.sources.USER)}},"indent code-block":J(!0),"outdent code-block":J(!1),"remove tab":{key:X.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(H){this.quill.deleteText(H.index-1,1,v.default.sources.USER)}},tab:{key:X.keys.TAB,handler:function(H){this.quill.history.cutoff();var re=new g.default().retain(H.index).delete(H.length).insert("	");this.quill.updateContents(re,v.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(H.index+1,v.default.sources.SILENT)}},"list empty enter":{key:X.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(H,re){this.quill.format("list",!1,v.default.sources.USER),re.format.indent&&this.quill.format("indent",!1,v.default.sources.USER)}},"checklist enter":{key:X.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(H){var re=this.quill.getLine(H.index),ae=x(re,2),ve=ae[0],Te=ae[1],De=(0,l.default)({},ve.formats(),{list:"checked"}),Pe=new g.default().retain(H.index).insert(`
`,De).retain(ve.length()-Te-1).retain(1,{list:"unchecked"});this.quill.updateContents(Pe,v.default.sources.USER),this.quill.setSelection(H.index+1,v.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:X.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(H,re){var ae=this.quill.getLine(H.index),ve=x(ae,2),Te=ve[0],De=ve[1],Pe=new g.default().retain(H.index).insert(`
`,re.format).retain(Te.length()-De-1).retain(1,{header:null});this.quill.updateContents(Pe,v.default.sources.USER),this.quill.setSelection(H.index+1,v.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(H,re){var ae=re.prefix.length,ve=this.quill.getLine(H.index),Te=x(ve,2),De=Te[0],Pe=Te[1];if(Pe>ae)return!0;var Ie=void 0;switch(re.prefix.trim()){case"[]":case"[ ]":Ie="unchecked";break;case"[x]":Ie="checked";break;case"-":case"*":Ie="bullet";break;default:Ie="ordered"}this.quill.insertText(H.index," ",v.default.sources.USER),this.quill.history.cutoff();var G=new g.default().retain(H.index-Pe).delete(ae+1).retain(De.length()-2-Pe).retain(1,{list:Ie});this.quill.updateContents(G,v.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(H.index-ae,v.default.sources.SILENT)}},"code exit":{key:X.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(H){var re=this.quill.getLine(H.index),ae=x(re,2),ve=ae[0],Te=ae[1],De=new g.default().retain(H.index+ve.length()-Te-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(De,v.default.sources.USER)}},"embed left":ue(X.keys.LEFT,!1),"embed left shift":ue(X.keys.LEFT,!0),"embed right":ue(X.keys.RIGHT,!1),"embed right shift":ue(X.keys.RIGHT,!0)}};function ue(U,H){var re,ae=U===X.keys.LEFT?"prefix":"suffix";return re={key:U,shiftKey:H,altKey:null},N(re,ae,/^$/),N(re,"handler",function(Te){var De=Te.index;U===X.keys.RIGHT&&(De+=Te.length+1);var Pe=this.quill.getLeaf(De),Ie=x(Pe,1),G=Ie[0];return G instanceof c.default.Embed?(U===X.keys.LEFT?H?this.quill.setSelection(Te.index-1,Te.length+1,v.default.sources.USER):this.quill.setSelection(Te.index-1,v.default.sources.USER):H?this.quill.setSelection(Te.index,Te.length+1,v.default.sources.USER):this.quill.setSelection(Te.index+Te.length+1,v.default.sources.USER),!1):!0}),re}function Z(U,H){if(!(U.index===0||this.quill.getLength()<=1)){var re=this.quill.getLine(U.index),ae=x(re,1),ve=ae[0],Te={};if(H.offset===0){var De=this.quill.getLine(U.index-1),Pe=x(De,1),Ie=Pe[0];if(Ie!=null&&Ie.length()>1){var G=ve.formats(),le=this.quill.getFormat(U.index-1,1);Te=f.default.attributes.diff(G,le)||{}}}var oe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(H.prefix)?2:1;this.quill.deleteText(U.index-oe,oe,v.default.sources.USER),Object.keys(Te).length>0&&this.quill.formatLine(U.index-oe,oe,Te,v.default.sources.USER),this.quill.focus()}}function z(U,H){var re=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(H.suffix)?2:1;if(!(U.index>=this.quill.getLength()-re)){var ae={},ve=0,Te=this.quill.getLine(U.index),De=x(Te,1),Pe=De[0];if(H.offset>=Pe.length()-1){var Ie=this.quill.getLine(U.index+1),G=x(Ie,1),le=G[0];if(le){var oe=Pe.formats(),Y=this.quill.getFormat(U.index,1);ae=f.default.attributes.diff(oe,Y)||{},ve=le.length()}}this.quill.deleteText(U.index,re,v.default.sources.USER),Object.keys(ae).length>0&&this.quill.formatLine(U.index+ve-1,re,ae,v.default.sources.USER)}}function j(U){var H=this.quill.getLines(U),re={};if(H.length>1){var ae=H[0].formats(),ve=H[H.length-1].formats();re=f.default.attributes.diff(ve,ae)||{}}this.quill.deleteText(U,v.default.sources.USER),Object.keys(re).length>0&&this.quill.formatLine(U.index,1,re,v.default.sources.USER),this.quill.setSelection(U.index,v.default.sources.SILENT),this.quill.focus()}function F(U,H){var re=this;U.length>0&&this.quill.scroll.deleteAt(U.index,U.length);var ae=Object.keys(H.format).reduce(function(ve,Te){return c.default.query(Te,c.default.Scope.BLOCK)&&!Array.isArray(H.format[Te])&&(ve[Te]=H.format[Te]),ve},{});this.quill.insertText(U.index,`
`,ae,v.default.sources.USER),this.quill.setSelection(U.index+1,v.default.sources.SILENT),this.quill.focus(),Object.keys(H.format).forEach(function(ve){ae[ve]==null&&(Array.isArray(H.format[ve])||ve!=="link"&&re.quill.format(ve,H.format[ve],v.default.sources.USER))})}function J(U){return{key:X.keys.TAB,shiftKey:!U,format:{"code-block":!0},handler:function(re){var ae=c.default.query("code-block"),ve=re.index,Te=re.length,De=this.quill.scroll.descendant(ae,ve),Pe=x(De,2),Ie=Pe[0],G=Pe[1];if(Ie!=null){var le=this.quill.getIndex(Ie),oe=Ie.newlineIndex(G,!0)+1,Y=Ie.newlineIndex(le+G+Te),ie=Ie.domNode.textContent.slice(oe,Y).split(`
`);G=0,ie.forEach(function(ge,be){U?(Ie.insertAt(oe+G,ae.TAB),G+=ae.TAB.length,be===0?ve+=ae.TAB.length:Te+=ae.TAB.length):ge.startsWith(ae.TAB)&&(Ie.deleteAt(oe+G,ae.TAB.length),G-=ae.TAB.length,be===0?ve-=ae.TAB.length:Te-=ae.TAB.length),G+=ge.length+1}),this.quill.update(v.default.sources.USER),this.quill.setSelection(ve,Te,v.default.sources.SILENT)}}}}function Q(U){return{key:U[0].toUpperCase(),shortKey:!0,handler:function(re,ae){this.quill.format(U,!ae.format[U],v.default.sources.USER)}}}function W(U){if(typeof U=="string"||typeof U=="number")return W({key:U});if((typeof U>"u"?"undefined":_(U))==="object"&&(U=(0,S.default)(U,!1)),typeof U.key=="string")if(X.keys[U.key.toUpperCase()]!=null)U.key=X.keys[U.key.toUpperCase()];else if(U.key.length===1)U.key=U.key.toUpperCase().charCodeAt(0);else return null;return U.shortKey&&(U[V]=U.shortKey,delete U.shortKey),U}C.default=X,C.SHORTKEY=V},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function f(a,c){var s=[],v=!0,y=!1,A=void 0;try{for(var D=a[Symbol.iterator](),E;!(v=(E=D.next()).done)&&(s.push(E.value),!(c&&s.length===c));v=!0);}catch(I){y=!0,A=I}finally{try{!v&&D.return&&D.return()}finally{if(y)throw A}}return s}return function(a,c){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return f(a,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function f(a,c,s){a===null&&(a=Function.prototype);var v=Object.getOwnPropertyDescriptor(a,c);if(v===void 0){var y=Object.getPrototypeOf(a);return y===null?void 0:f(y,c,s)}else{if("value"in v)return v.value;var A=v.get;return A===void 0?void 0:A.call(s)}},w=function(){function f(a,c){for(var s=0;s<c.length;s++){var v=c[s];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}return function(a,c,s){return c&&f(a.prototype,c),s&&f(a,s),a}}(),T=k(0),S=u(T),b=k(7),h=u(b);function u(f){return f&&f.__esModule?f:{default:f}}function l(f,a){if(!(f instanceof a))throw new TypeError("Cannot call a class as a function")}function d(f,a){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:f}function g(f,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);f.prototype=Object.create(a&&a.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(f,a):f.__proto__=a)}var m=function(f){g(a,f),w(a,null,[{key:"value",value:function(){}}]);function a(c,s){l(this,a);var v=d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));return v.selection=s,v.textNode=document.createTextNode(a.CONTENTS),v.domNode.appendChild(v.textNode),v._length=0,v}return w(a,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(s,v){if(this._length!==0)return x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"format",this).call(this,s,v);for(var y=this,A=0;y!=null&&y.statics.scope!==S.default.Scope.BLOCK_BLOT;)A+=y.offset(y.parent),y=y.parent;y!=null&&(this._length=a.CONTENTS.length,y.optimize(),y.formatAt(A,a.CONTENTS.length,s,v),this._length=0)}},{key:"index",value:function(s,v){return s===this.textNode?0:x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"index",this).call(this,s,v)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var s=this.textNode,v=this.selection.getNativeRange(),y=void 0,A=void 0,D=void 0;if(v!=null&&v.start.node===s&&v.end.node===s){var E=[s,v.start.offset,v.end.offset];y=E[0],A=E[1],D=E[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==a.CONTENTS){var I=this.textNode.data.split(a.CONTENTS).join("");this.next instanceof h.default?(y=this.next.domNode,this.next.insertAt(0,I),this.textNode.data=a.CONTENTS):(this.textNode.data=I,this.parent.insertBefore(S.default.create(this.textNode),this),this.textNode=document.createTextNode(a.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var N=[A,D].map(function(L){return Math.max(0,Math.min(y.data.length,L-1))}),R=_(N,2);return A=R[0],D=R[1],{startNode:y,startOffset:A,endNode:y,endOffset:D}}}}},{key:"update",value:function(s,v){var y=this;if(s.some(function(D){return D.type==="characterData"&&D.target===y.textNode})){var A=this.restore();A&&(v.range=A)}}},{key:"value",value:function(){return""}}]),a}(S.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\uFEFF",C.default=m},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(0),x=S(_),w=k(4),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(){return b(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(x.default.Container);l.allowedChildren=[T.default,w.BlockEmbed,l],C.default=l},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.ColorStyle=C.ColorClass=C.ColorAttributor=void 0;var _=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),x=function m(f,a,c){f===null&&(f=Function.prototype);var s=Object.getOwnPropertyDescriptor(f,a);if(s===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:m(v,a,c)}else{if("value"in s)return s.value;var y=s.get;return y===void 0?void 0:y.call(c)}},w=k(0),T=S(w);function S(m){return m&&m.__esModule?m:{default:m}}function b(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function h(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function u(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var l=function(m){u(f,m);function f(){return b(this,f),h(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return _(f,[{key:"value",value:function(c){var s=x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",this).call(this,c);return s.startsWith("rgb(")?(s=s.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+s.split(",").map(function(v){return("00"+parseInt(v).toString(16)).slice(-2)}).join("")):s}}]),f}(T.default.Attributor.Style),d=new T.default.Attributor.Class("color","ql-color",{scope:T.default.Scope.INLINE}),g=new l("color","color",{scope:T.default.Scope.INLINE});C.ColorAttributor=l,C.ColorClass=d,C.ColorStyle=g},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.sanitize=C.default=void 0;var _=function(){function g(m,f){for(var a=0;a<f.length;a++){var c=f[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,f,a){return f&&g(m.prototype,f),a&&g(m,a),m}}(),x=function g(m,f,a){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,f);if(c===void 0){var s=Object.getPrototypeOf(m);return s===null?void 0:g(s,f,a)}else{if("value"in c)return c.value;var v=c.get;return v===void 0?void 0:v.call(a)}},w=k(6),T=S(w);function S(g){return g&&g.__esModule?g:{default:g}}function b(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function h(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function u(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var l=function(g){u(m,g);function m(){return b(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return _(m,[{key:"format",value:function(a,c){if(a!==this.statics.blotName||!c)return x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,a,c);c=this.constructor.sanitize(c),this.domNode.setAttribute("href",c)}}],[{key:"create",value:function(a){var c=x(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,a);return a=this.sanitize(a),c.setAttribute("href",a),c.setAttribute("rel","noopener noreferrer"),c.setAttribute("target","_blank"),c}},{key:"formats",value:function(a){return a.getAttribute("href")}},{key:"sanitize",value:function(a){return d(a,this.PROTOCOL_WHITELIST)?a:this.SANITIZED_URL}}]),m}(T.default);l.blotName="link",l.tagName="A",l.SANITIZED_URL="about:blank",l.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function d(g,m){var f=document.createElement("a");f.href=g;var a=f.href.slice(0,f.href.indexOf(":"));return m.indexOf(a)>-1}C.default=l,C.sanitize=d},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},x=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),w=k(23),T=h(w),S=k(107),b=h(S);function h(m){return m&&m.__esModule?m:{default:m}}function u(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}var l=0;function d(m,f){m.setAttribute(f,m.getAttribute(f)!=="true")}var g=function(){function m(f){var a=this;u(this,m),this.select=f,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){a.togglePicker()}),this.label.addEventListener("keydown",function(c){switch(c.keyCode){case T.default.keys.ENTER:a.togglePicker();break;case T.default.keys.ESCAPE:a.escape(),c.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return x(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),d(this.label,"aria-expanded"),d(this.options,"aria-hidden")}},{key:"buildItem",value:function(a){var c=this,s=document.createElement("span");return s.tabIndex="0",s.setAttribute("role","button"),s.classList.add("ql-picker-item"),a.hasAttribute("value")&&s.setAttribute("data-value",a.getAttribute("value")),a.textContent&&s.setAttribute("data-label",a.textContent),s.addEventListener("click",function(){c.selectItem(s,!0)}),s.addEventListener("keydown",function(v){switch(v.keyCode){case T.default.keys.ENTER:c.selectItem(s,!0),v.preventDefault();break;case T.default.keys.ESCAPE:c.escape(),v.preventDefault();break}}),s}},{key:"buildLabel",value:function(){var a=document.createElement("span");return a.classList.add("ql-picker-label"),a.innerHTML=b.default,a.tabIndex="0",a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),this.container.appendChild(a),a}},{key:"buildOptions",value:function(){var a=this,c=document.createElement("span");c.classList.add("ql-picker-options"),c.setAttribute("aria-hidden","true"),c.tabIndex="-1",c.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",c.id),this.options=c,[].slice.call(this.select.options).forEach(function(s){var v=a.buildItem(s);c.appendChild(v),s.selected===!0&&a.selectItem(v)}),this.container.appendChild(c)}},{key:"buildPicker",value:function(){var a=this;[].slice.call(this.select.attributes).forEach(function(c){a.container.setAttribute(c.name,c.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var a=this;this.close(),setTimeout(function(){return a.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.container.querySelector(".ql-selected");if(a!==s&&(s!=null&&s.classList.remove("ql-selected"),a!=null&&(a.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(a.parentNode.children,a),a.hasAttribute("data-value")?this.label.setAttribute("data-value",a.getAttribute("data-value")):this.label.removeAttribute("data-value"),a.hasAttribute("data-label")?this.label.setAttribute("data-label",a.getAttribute("data-label")):this.label.removeAttribute("data-label"),c))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":_(Event))==="object"){var v=document.createEvent("Event");v.initEvent("change",!0,!0),this.select.dispatchEvent(v)}this.close()}}},{key:"update",value:function(){var a=void 0;if(this.select.selectedIndex>-1){var c=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];a=this.select.options[this.select.selectedIndex],this.selectItem(c)}else this.selectItem(null);var s=a!=null&&a!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",s)}}]),m}();C.default=g},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(0),x=q(_),w=k(5),T=q(w),S=k(4),b=q(S),h=k(16),u=q(h),l=k(25),d=q(l),g=k(24),m=q(g),f=k(35),a=q(f),c=k(6),s=q(c),v=k(22),y=q(v),A=k(7),D=q(A),E=k(55),I=q(E),N=k(42),R=q(N),L=k(23),M=q(L);function q(V){return V&&V.__esModule?V:{default:V}}T.default.register({"blots/block":b.default,"blots/block/embed":S.BlockEmbed,"blots/break":u.default,"blots/container":d.default,"blots/cursor":m.default,"blots/embed":a.default,"blots/inline":s.default,"blots/scroll":y.default,"blots/text":D.default,"modules/clipboard":I.default,"modules/history":R.default,"modules/keyboard":M.default}),x.default.register(b.default,u.default,m.default,s.default,y.default,D.default),C.default=T.default},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(1),x=function(){function w(T){this.domNode=T,this.domNode[_.DATA_KEY]={blot:this}}return Object.defineProperty(w.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),w.create=function(T){if(this.tagName==null)throw new _.ParchmentError("Blot definition missing tagName");var S;return Array.isArray(this.tagName)?(typeof T=="string"&&(T=T.toUpperCase(),parseInt(T).toString()===T&&(T=parseInt(T))),typeof T=="number"?S=document.createElement(this.tagName[T-1]):this.tagName.indexOf(T)>-1?S=document.createElement(T):S=document.createElement(this.tagName[0])):S=document.createElement(this.tagName),this.className&&S.classList.add(this.className),S},w.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},w.prototype.clone=function(){var T=this.domNode.cloneNode(!1);return _.create(T)},w.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[_.DATA_KEY]},w.prototype.deleteAt=function(T,S){var b=this.isolate(T,S);b.remove()},w.prototype.formatAt=function(T,S,b,h){var u=this.isolate(T,S);if(_.query(b,_.Scope.BLOT)!=null&&h)u.wrap(b,h);else if(_.query(b,_.Scope.ATTRIBUTE)!=null){var l=_.create(this.statics.scope);u.wrap(l),l.format(b,h)}},w.prototype.insertAt=function(T,S,b){var h=b==null?_.create("text",S):_.create(S,b),u=this.split(T);this.parent.insertBefore(h,u)},w.prototype.insertInto=function(T,S){S===void 0&&(S=null),this.parent!=null&&this.parent.children.remove(this);var b=null;T.children.insertBefore(this,S),S!=null&&(b=S.domNode),(this.domNode.parentNode!=T.domNode||this.domNode.nextSibling!=b)&&T.domNode.insertBefore(this.domNode,b),this.parent=T,this.attach()},w.prototype.isolate=function(T,S){var b=this.split(T);return b.split(S),b},w.prototype.length=function(){return 1},w.prototype.offset=function(T){return T===void 0&&(T=this.parent),this.parent==null||this==T?0:this.parent.children.offset(this)+this.parent.offset(T)},w.prototype.optimize=function(T){this.domNode[_.DATA_KEY]!=null&&delete this.domNode[_.DATA_KEY].mutations},w.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},w.prototype.replace=function(T){T.parent!=null&&(T.parent.insertBefore(this,T.next),T.remove())},w.prototype.replaceWith=function(T,S){var b=typeof T=="string"?_.create(T,S):T;return b.replace(this),b},w.prototype.split=function(T,S){return T===0?this:this.next},w.prototype.update=function(T,S){},w.prototype.wrap=function(T,S){var b=typeof T=="string"?_.create(T,S):T;return this.parent!=null&&this.parent.insertBefore(b,this.next),b.appendChild(this),b},w.blotName="abstract",w}();C.default=x},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(12),x=k(32),w=k(33),T=k(1),S=function(){function b(h){this.attributes={},this.domNode=h,this.build()}return b.prototype.attribute=function(h,u){u?h.add(this.domNode,u)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},b.prototype.build=function(){var h=this;this.attributes={};var u=_.default.keys(this.domNode),l=x.default.keys(this.domNode),d=w.default.keys(this.domNode);u.concat(l).concat(d).forEach(function(g){var m=T.query(g,T.Scope.ATTRIBUTE);m instanceof _.default&&(h.attributes[m.attrName]=m)})},b.prototype.copy=function(h){var u=this;Object.keys(this.attributes).forEach(function(l){var d=u.attributes[l].value(u.domNode);h.format(l,d)})},b.prototype.move=function(h){var u=this;this.copy(h),Object.keys(this.attributes).forEach(function(l){u.attributes[l].remove(u.domNode)}),this.attributes={}},b.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(u,l){return u[l]=h.attributes[l].value(h.domNode),u},{})},b}();C.default=S},function($,C,k){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(12);function w(S,b){var h=S.getAttribute("class")||"";return h.split(/\s+/).filter(function(u){return u.indexOf(b+"-")===0})}var T=function(S){_(b,S);function b(){return S!==null&&S.apply(this,arguments)||this}return b.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},b.prototype.add=function(h,u){return this.canAdd(h,u)?(this.remove(h),h.classList.add(this.keyName+"-"+u),!0):!1},b.prototype.remove=function(h){var u=w(h,this.keyName);u.forEach(function(l){h.classList.remove(l)}),h.classList.length===0&&h.removeAttribute("class")},b.prototype.value=function(h){var u=w(h,this.keyName)[0]||"",l=u.slice(this.keyName.length+1);return this.canAdd(h,l)?l:""},b}(x.default);C.default=T},function($,C,k){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(12);function w(S){var b=S.split("-"),h=b.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return b[0]+h}var T=function(S){_(b,S);function b(){return S!==null&&S.apply(this,arguments)||this}return b.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(u){var l=u.split(":");return l[0].trim()})},b.prototype.add=function(h,u){return this.canAdd(h,u)?(h.style[w(this.keyName)]=u,!0):!1},b.prototype.remove=function(h){h.style[w(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},b.prototype.value=function(h){var u=h.style[w(this.keyName)];return this.canAdd(h,u)?u:""},b}(x.default);C.default=T},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function T(S,b){for(var h=0;h<b.length;h++){var u=b[h];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(S,u.key,u)}}return function(S,b,h){return b&&T(S.prototype,b),h&&T(S,h),S}}();function x(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}var w=function(){function T(S,b){x(this,T),this.quill=S,this.options=b,this.modules={}}return _(T,[{key:"init",value:function(){var b=this;Object.keys(this.options.modules).forEach(function(h){b.modules[h]==null&&b.addModule(h)})}},{key:"addModule",value:function(b){var h=this.quill.constructor.import("modules/"+b);return this.modules[b]=new h(this.quill,this.options.modules[b]||{}),this.modules[b]}}]),T}();w.DEFAULTS={modules:{}},w.themes={default:w},C.default=w},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function f(a,c){for(var s=0;s<c.length;s++){var v=c[s];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}return function(a,c,s){return c&&f(a.prototype,c),s&&f(a,s),a}}(),x=function f(a,c,s){a===null&&(a=Function.prototype);var v=Object.getOwnPropertyDescriptor(a,c);if(v===void 0){var y=Object.getPrototypeOf(a);return y===null?void 0:f(y,c,s)}else{if("value"in v)return v.value;var A=v.get;return A===void 0?void 0:A.call(s)}},w=k(0),T=h(w),S=k(7),b=h(S);function h(f){return f&&f.__esModule?f:{default:f}}function u(f,a){if(!(f instanceof a))throw new TypeError("Cannot call a class as a function")}function l(f,a){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:f}function d(f,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);f.prototype=Object.create(a&&a.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(f,a):f.__proto__=a)}var g="\uFEFF",m=function(f){d(a,f);function a(c){u(this,a);var s=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));return s.contentNode=document.createElement("span"),s.contentNode.setAttribute("contenteditable",!1),[].slice.call(s.domNode.childNodes).forEach(function(v){s.contentNode.appendChild(v)}),s.leftGuard=document.createTextNode(g),s.rightGuard=document.createTextNode(g),s.domNode.appendChild(s.leftGuard),s.domNode.appendChild(s.contentNode),s.domNode.appendChild(s.rightGuard),s}return _(a,[{key:"index",value:function(s,v){return s===this.leftGuard?0:s===this.rightGuard?1:x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"index",this).call(this,s,v)}},{key:"restore",value:function(s){var v=void 0,y=void 0,A=s.data.split(g).join("");if(s===this.leftGuard)if(this.prev instanceof b.default){var D=this.prev.length();this.prev.insertAt(D,A),v={startNode:this.prev.domNode,startOffset:D+A.length}}else y=document.createTextNode(A),this.parent.insertBefore(T.default.create(y),this),v={startNode:y,startOffset:A.length};else s===this.rightGuard&&(this.next instanceof b.default?(this.next.insertAt(0,A),v={startNode:this.next.domNode,startOffset:A.length}):(y=document.createTextNode(A),this.parent.insertBefore(T.default.create(y),this.next),v={startNode:y,startOffset:A.length}));return s.data=g,v}},{key:"update",value:function(s,v){var y=this;s.forEach(function(A){if(A.type==="characterData"&&(A.target===y.leftGuard||A.target===y.rightGuard)){var D=y.restore(A.target);D&&(v.range=D)}})}}]),a}(T.default.Embed);C.default=m},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.AlignStyle=C.AlignClass=C.AlignAttribute=void 0;var _=k(0),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}var T={scope:x.default.Scope.BLOCK,whitelist:["right","center","justify"]},S=new x.default.Attributor.Attribute("align","align",T),b=new x.default.Attributor.Class("align","ql-align",T),h=new x.default.Attributor.Style("align","text-align",T);C.AlignAttribute=S,C.AlignClass=b,C.AlignStyle=h},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.BackgroundStyle=C.BackgroundClass=void 0;var _=k(0),x=T(_),w=k(26);function T(h){return h&&h.__esModule?h:{default:h}}var S=new x.default.Attributor.Class("background","ql-bg",{scope:x.default.Scope.INLINE}),b=new w.ColorAttributor("background","background-color",{scope:x.default.Scope.INLINE});C.BackgroundClass=S,C.BackgroundStyle=b},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.DirectionStyle=C.DirectionClass=C.DirectionAttribute=void 0;var _=k(0),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}var T={scope:x.default.Scope.BLOCK,whitelist:["rtl"]},S=new x.default.Attributor.Attribute("direction","dir",T),b=new x.default.Attributor.Class("direction","ql-direction",T),h=new x.default.Attributor.Style("direction","direction",T);C.DirectionAttribute=S,C.DirectionClass=b,C.DirectionStyle=h},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.FontClass=C.FontStyle=void 0;var _=function(){function f(a,c){for(var s=0;s<c.length;s++){var v=c[s];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}return function(a,c,s){return c&&f(a.prototype,c),s&&f(a,s),a}}(),x=function f(a,c,s){a===null&&(a=Function.prototype);var v=Object.getOwnPropertyDescriptor(a,c);if(v===void 0){var y=Object.getPrototypeOf(a);return y===null?void 0:f(y,c,s)}else{if("value"in v)return v.value;var A=v.get;return A===void 0?void 0:A.call(s)}},w=k(0),T=S(w);function S(f){return f&&f.__esModule?f:{default:f}}function b(f,a){if(!(f instanceof a))throw new TypeError("Cannot call a class as a function")}function h(f,a){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:f}function u(f,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);f.prototype=Object.create(a&&a.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(f,a):f.__proto__=a)}var l={scope:T.default.Scope.INLINE,whitelist:["serif","monospace"]},d=new T.default.Attributor.Class("font","ql-font",l),g=function(f){u(a,f);function a(){return b(this,a),h(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return _(a,[{key:"value",value:function(s){return x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"value",this).call(this,s).replace(/["']/g,"")}}]),a}(T.default.Attributor.Style),m=new g("font","font-family",l);C.FontStyle=m,C.FontClass=d},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.SizeStyle=C.SizeClass=void 0;var _=k(0),x=w(_);function w(b){return b&&b.__esModule?b:{default:b}}var T=new x.default.Attributor.Class("size","ql-size",{scope:x.default.Scope.INLINE,whitelist:["small","large","huge"]}),S=new x.default.Attributor.Style("size","font-size",{scope:x.default.Scope.INLINE,whitelist:["10px","18px","32px"]});C.SizeClass=T,C.SizeStyle=S},function($,C,k){$.exports={align:{"":k(76),center:k(77),right:k(78),justify:k(79)},background:k(80),blockquote:k(81),bold:k(82),clean:k(83),code:k(58),"code-block":k(58),color:k(84),direction:{"":k(85),rtl:k(86)},float:{center:k(87),full:k(88),left:k(89),right:k(90)},formula:k(91),header:{1:k(92),2:k(93)},italic:k(94),image:k(95),indent:{"+1":k(96),"-1":k(97)},link:k(98),list:{ordered:k(99),bullet:k(100),check:k(101)},script:{sub:k(102),super:k(103)},strike:k(104),underline:k(105),video:k(106)}},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.getLastChangeIndex=C.default=void 0;var _=function(){function c(s,v){for(var y=0;y<v.length;y++){var A=v[y];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(s,A.key,A)}}return function(s,v,y){return v&&c(s.prototype,v),y&&c(s,y),s}}(),x=k(0),w=u(x),T=k(5),S=u(T),b=k(9),h=u(b);function u(c){return c&&c.__esModule?c:{default:c}}function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function d(c,s){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:c}function g(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(c,s):c.__proto__=s)}var m=function(c){g(s,c);function s(v,y){l(this,s);var A=d(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,v,y));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(S.default.events.EDITOR_CHANGE,function(D,E,I,N){D!==S.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||N===S.default.sources.USER?A.record(E,I):A.transform(E))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return _(s,[{key:"change",value:function(y,A){if(this.stack[y].length!==0){var D=this.stack[y].pop();this.stack[A].push(D),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(D[y],S.default.sources.USER),this.ignoreChange=!1;var E=a(D[y]);this.quill.setSelection(E)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(y,A){if(y.ops.length!==0){this.stack.redo=[];var D=this.quill.getContents().diff(A),E=Date.now();if(this.lastRecorded+this.options.delay>E&&this.stack.undo.length>0){var I=this.stack.undo.pop();D=D.compose(I.undo),y=I.redo.compose(y)}else this.lastRecorded=E;this.stack.undo.push({redo:y,undo:D}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(y){this.stack.undo.forEach(function(A){A.undo=y.transform(A.undo,!0),A.redo=y.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=y.transform(A.undo,!0),A.redo=y.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),s}(h.default);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function f(c){var s=c.ops[c.ops.length-1];return s==null?!1:s.insert!=null?typeof s.insert=="string"&&s.insert.endsWith(`
`):s.attributes!=null?Object.keys(s.attributes).some(function(v){return w.default.query(v,w.default.Scope.BLOCK)!=null}):!1}function a(c){var s=c.reduce(function(y,A){return y+=A.delete||0,y},0),v=c.length()-s;return f(c)&&(v-=1),v}C.default=m,C.getLastChangeIndex=a},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BaseTooltip=void 0;var _=function(){function F(J,Q){for(var W=0;W<Q.length;W++){var U=Q[W];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(J,U.key,U)}}return function(J,Q,W){return Q&&F(J.prototype,Q),W&&F(J,W),J}}(),x=function F(J,Q,W){J===null&&(J=Function.prototype);var U=Object.getOwnPropertyDescriptor(J,Q);if(U===void 0){var H=Object.getPrototypeOf(J);return H===null?void 0:F(H,Q,W)}else{if("value"in U)return U.value;var re=U.get;return re===void 0?void 0:re.call(W)}},w=k(3),T=E(w),S=k(2),b=E(S),h=k(8),u=E(h),l=k(23),d=E(l),g=k(34),m=E(g),f=k(59),a=E(f),c=k(60),s=E(c),v=k(28),y=E(v),A=k(61),D=E(A);function E(F){return F&&F.__esModule?F:{default:F}}function I(F,J){if(!(F instanceof J))throw new TypeError("Cannot call a class as a function")}function N(F,J){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:F}function R(F,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);F.prototype=Object.create(J&&J.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(F,J):F.__proto__=J)}var L=[!1,"center","right","justify"],M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],q=[!1,"serif","monospace"],V=["1","2","3",!1],X=["small",!1,"large","huge"],ue=function(F){R(J,F);function J(Q,W){I(this,J);var U=N(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,Q,W)),H=function re(ae){if(!document.body.contains(Q.root))return document.body.removeEventListener("click",re);U.tooltip!=null&&!U.tooltip.root.contains(ae.target)&&document.activeElement!==U.tooltip.textbox&&!U.quill.hasFocus()&&U.tooltip.hide(),U.pickers!=null&&U.pickers.forEach(function(ve){ve.container.contains(ae.target)||ve.close()})};return Q.emitter.listenDOM("click",document.body,H),U}return _(J,[{key:"addModule",value:function(W){var U=x(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"addModule",this).call(this,W);return W==="toolbar"&&this.extendToolbar(U),U}},{key:"buildButtons",value:function(W,U){W.forEach(function(H){var re=H.getAttribute("class")||"";re.split(/\s+/).forEach(function(ae){if(!!ae.startsWith("ql-")&&(ae=ae.slice(3),U[ae]!=null))if(ae==="direction")H.innerHTML=U[ae][""]+U[ae].rtl;else if(typeof U[ae]=="string")H.innerHTML=U[ae];else{var ve=H.value||"";ve!=null&&U[ae][ve]&&(H.innerHTML=U[ae][ve])}})})}},{key:"buildPickers",value:function(W,U){var H=this;this.pickers=W.map(function(ae){if(ae.classList.contains("ql-align"))return ae.querySelector("option")==null&&j(ae,L),new s.default(ae,U.align);if(ae.classList.contains("ql-background")||ae.classList.contains("ql-color")){var ve=ae.classList.contains("ql-background")?"background":"color";return ae.querySelector("option")==null&&j(ae,M,ve==="background"?"#ffffff":"#000000"),new a.default(ae,U[ve])}else return ae.querySelector("option")==null&&(ae.classList.contains("ql-font")?j(ae,q):ae.classList.contains("ql-header")?j(ae,V):ae.classList.contains("ql-size")&&j(ae,X)),new y.default(ae)});var re=function(){H.pickers.forEach(function(ve){ve.update()})};this.quill.on(u.default.events.EDITOR_CHANGE,re)}}]),J}(m.default);ue.DEFAULTS=(0,T.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var J=this,Q=this.container.querySelector("input.ql-image[type=file]");Q==null&&(Q=document.createElement("input"),Q.setAttribute("type","file"),Q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Q.classList.add("ql-image"),Q.addEventListener("change",function(){if(Q.files!=null&&Q.files[0]!=null){var W=new FileReader;W.onload=function(U){var H=J.quill.getSelection(!0);J.quill.updateContents(new b.default().retain(H.index).delete(H.length).insert({image:U.target.result}),u.default.sources.USER),J.quill.setSelection(H.index+1,u.default.sources.SILENT),Q.value=""},W.readAsDataURL(Q.files[0])}}),this.container.appendChild(Q)),Q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Z=function(F){R(J,F);function J(Q,W){I(this,J);var U=N(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,Q,W));return U.textbox=U.root.querySelector('input[type="text"]'),U.listen(),U}return _(J,[{key:"listen",value:function(){var W=this;this.textbox.addEventListener("keydown",function(U){d.default.match(U,"enter")?(W.save(),U.preventDefault()):d.default.match(U,"escape")&&(W.cancel(),U.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),U!=null?this.textbox.value=U:W!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+W)||""),this.root.setAttribute("data-mode",W)}},{key:"restoreFocus",value:function(){var W=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=W}},{key:"save",value:function(){var W=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var U=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",W,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",W,u.default.sources.USER)),this.quill.root.scrollTop=U;break}case"video":W=z(W);case"formula":{if(!W)break;var H=this.quill.getSelection(!0);if(H!=null){var re=H.index+H.length;this.quill.insertEmbed(re,this.root.getAttribute("data-mode"),W,u.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(re+1," ",u.default.sources.USER),this.quill.setSelection(re+2,u.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),J}(D.default);function z(F){var J=F.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||F.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return J?(J[1]||"https")+"://www.youtube.com/embed/"+J[2]+"?showinfo=0":(J=F.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(J[1]||"https")+"://player.vimeo.com/video/"+J[2]+"/":F}function j(F,J){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;J.forEach(function(W){var U=document.createElement("option");W===Q?U.setAttribute("selected","selected"):U.setAttribute("value",W),F.appendChild(U)})}C.BaseTooltip=Z,C.default=ue},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function x(){this.head=this.tail=null,this.length=0}return x.prototype.append=function(){for(var w=[],T=0;T<arguments.length;T++)w[T]=arguments[T];this.insertBefore(w[0],null),w.length>1&&this.append.apply(this,w.slice(1))},x.prototype.contains=function(w){for(var T,S=this.iterator();T=S();)if(T===w)return!0;return!1},x.prototype.insertBefore=function(w,T){!w||(w.next=T,T!=null?(w.prev=T.prev,T.prev!=null&&(T.prev.next=w),T.prev=w,T===this.head&&(this.head=w)):this.tail!=null?(this.tail.next=w,w.prev=this.tail,this.tail=w):(w.prev=null,this.head=this.tail=w),this.length+=1)},x.prototype.offset=function(w){for(var T=0,S=this.head;S!=null;){if(S===w)return T;T+=S.length(),S=S.next}return-1},x.prototype.remove=function(w){!this.contains(w)||(w.prev!=null&&(w.prev.next=w.next),w.next!=null&&(w.next.prev=w.prev),w===this.head&&(this.head=w.next),w===this.tail&&(this.tail=w.prev),this.length-=1)},x.prototype.iterator=function(w){return w===void 0&&(w=this.head),function(){var T=w;return w!=null&&(w=w.next),T}},x.prototype.find=function(w,T){T===void 0&&(T=!1);for(var S,b=this.iterator();S=b();){var h=S.length();if(w<h||T&&w===h&&(S.next==null||S.next.length()!==0))return[S,w];w-=h}return[null,0]},x.prototype.forEach=function(w){for(var T,S=this.iterator();T=S();)w(T)},x.prototype.forEachAt=function(w,T,S){if(!(T<=0))for(var b=this.find(w),h=b[0],u=b[1],l,d=w-u,g=this.iterator(h);(l=g())&&d<w+T;){var m=l.length();w>d?S(l,w-d,Math.min(T,d+m-w)):S(l,0,Math.min(m,w+T-d)),d+=m}},x.prototype.map=function(w){return this.reduce(function(T,S){return T.push(w(S)),T},[])},x.prototype.reduce=function(w,T){for(var S,b=this.iterator();S=b();)T=w(T,S);return T},x}();C.default=_},function($,C,k){var _=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var d in l)l.hasOwnProperty(d)&&(u[d]=l[d])};return function(u,l){h(u,l);function d(){this.constructor=u}u.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(17),w=k(1),T={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},S=100,b=function(h){_(u,h);function u(l){var d=h.call(this,l)||this;return d.scroll=d,d.observer=new MutationObserver(function(g){d.update(g)}),d.observer.observe(d.domNode,T),d.attach(),d}return u.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},u.prototype.deleteAt=function(l,d){this.update(),l===0&&d===this.length()?this.children.forEach(function(g){g.remove()}):h.prototype.deleteAt.call(this,l,d)},u.prototype.formatAt=function(l,d,g,m){this.update(),h.prototype.formatAt.call(this,l,d,g,m)},u.prototype.insertAt=function(l,d,g){this.update(),h.prototype.insertAt.call(this,l,d,g)},u.prototype.optimize=function(l,d){var g=this;l===void 0&&(l=[]),d===void 0&&(d={}),h.prototype.optimize.call(this,d);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)l.push(m.pop());for(var f=function(v,y){y===void 0&&(y=!0),!(v==null||v===g)&&v.domNode.parentNode!=null&&(v.domNode[w.DATA_KEY].mutations==null&&(v.domNode[w.DATA_KEY].mutations=[]),y&&f(v.parent))},a=function(v){v.domNode[w.DATA_KEY]==null||v.domNode[w.DATA_KEY].mutations==null||(v instanceof x.default&&v.children.forEach(a),v.optimize(d))},c=l,s=0;c.length>0;s+=1){if(s>=S)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(v){var y=w.find(v.target,!0);y!=null&&(y.domNode===v.target&&(v.type==="childList"?(f(w.find(v.previousSibling,!1)),[].forEach.call(v.addedNodes,function(A){var D=w.find(A,!1);f(D,!1),D instanceof x.default&&D.children.forEach(function(E){f(E,!1)})})):v.type==="attributes"&&f(y.prev)),f(y))}),this.children.forEach(a),c=[].slice.call(this.observer.takeRecords()),m=c.slice();m.length>0;)l.push(m.pop())}},u.prototype.update=function(l,d){var g=this;d===void 0&&(d={}),l=l||this.observer.takeRecords(),l.map(function(m){var f=w.find(m.target,!0);return f==null?null:f.domNode[w.DATA_KEY].mutations==null?(f.domNode[w.DATA_KEY].mutations=[m],f):(f.domNode[w.DATA_KEY].mutations.push(m),null)}).forEach(function(m){m==null||m===g||m.domNode[w.DATA_KEY]==null||m.update(m.domNode[w.DATA_KEY].mutations||[],d)}),this.domNode[w.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[w.DATA_KEY].mutations,d),this.optimize(l,d)},u.blotName="scroll",u.defaultChild="block",u.scope=w.Scope.BLOCK_BLOT,u.tagName="DIV",u}(x.default);C.default=b},function($,C,k){var _=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var l in u)u.hasOwnProperty(l)&&(h[l]=u[l])};return function(h,u){b(h,u);function l(){this.constructor=h}h.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(18),w=k(1);function T(b,h){if(Object.keys(b).length!==Object.keys(h).length)return!1;for(var u in b)if(b[u]!==h[u])return!1;return!0}var S=function(b){_(h,b);function h(){return b!==null&&b.apply(this,arguments)||this}return h.formats=function(u){if(u.tagName!==h.tagName)return b.formats.call(this,u)},h.prototype.format=function(u,l){var d=this;u===this.statics.blotName&&!l?(this.children.forEach(function(g){g instanceof x.default||(g=g.wrap(h.blotName,!0)),d.attributes.copy(g)}),this.unwrap()):b.prototype.format.call(this,u,l)},h.prototype.formatAt=function(u,l,d,g){if(this.formats()[d]!=null||w.query(d,w.Scope.ATTRIBUTE)){var m=this.isolate(u,l);m.format(d,g)}else b.prototype.formatAt.call(this,u,l,d,g)},h.prototype.optimize=function(u){b.prototype.optimize.call(this,u);var l=this.formats();if(Object.keys(l).length===0)return this.unwrap();var d=this.next;d instanceof h&&d.prev===this&&T(l,d.formats())&&(d.moveChildren(this),d.remove())},h.blotName="inline",h.scope=w.Scope.INLINE_BLOT,h.tagName="SPAN",h}(x.default);C.default=S},function($,C,k){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(18),w=k(1),T=function(S){_(b,S);function b(){return S!==null&&S.apply(this,arguments)||this}return b.formats=function(h){var u=w.query(b.blotName).tagName;if(h.tagName!==u)return S.formats.call(this,h)},b.prototype.format=function(h,u){w.query(h,w.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!u?this.replaceWith(b.blotName):S.prototype.format.call(this,h,u))},b.prototype.formatAt=function(h,u,l,d){w.query(l,w.Scope.BLOCK)!=null?this.format(l,d):S.prototype.formatAt.call(this,h,u,l,d)},b.prototype.insertAt=function(h,u,l){if(l==null||w.query(u,w.Scope.INLINE)!=null)S.prototype.insertAt.call(this,h,u,l);else{var d=this.split(h),g=w.create(u,l);d.parent.insertBefore(g,d)}},b.prototype.update=function(h,u){navigator.userAgent.match(/Trident/)?this.build():S.prototype.update.call(this,h,u)},b.blotName="block",b.scope=w.Scope.BLOCK_BLOT,b.tagName="P",b}(x.default);C.default=T},function($,C,k){var _=this&&this.__extends||function(){var T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,b){S.__proto__=b}||function(S,b){for(var h in b)b.hasOwnProperty(h)&&(S[h]=b[h])};return function(S,b){T(S,b);function h(){this.constructor=S}S.prototype=b===null?Object.create(b):(h.prototype=b.prototype,new h)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(19),w=function(T){_(S,T);function S(){return T!==null&&T.apply(this,arguments)||this}return S.formats=function(b){},S.prototype.format=function(b,h){T.prototype.formatAt.call(this,0,this.length(),b,h)},S.prototype.formatAt=function(b,h,u,l){b===0&&h===this.length()?this.format(u,l):T.prototype.formatAt.call(this,b,h,u,l)},S.prototype.formats=function(){return this.statics.formats(this.domNode)},S}(x.default);C.default=w},function($,C,k){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var u in h)h.hasOwnProperty(u)&&(b[u]=h[u])};return function(b,h){S(b,h);function u(){this.constructor=b}b.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(C,"__esModule",{value:!0});var x=k(19),w=k(1),T=function(S){_(b,S);function b(h){var u=S.call(this,h)||this;return u.text=u.statics.value(u.domNode),u}return b.create=function(h){return document.createTextNode(h)},b.value=function(h){var u=h.data;return u.normalize&&(u=u.normalize()),u},b.prototype.deleteAt=function(h,u){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+u)},b.prototype.index=function(h,u){return this.domNode===h?u:-1},b.prototype.insertAt=function(h,u,l){l==null?(this.text=this.text.slice(0,h)+u+this.text.slice(h),this.domNode.data=this.text):S.prototype.insertAt.call(this,h,u,l)},b.prototype.length=function(){return this.text.length},b.prototype.optimize=function(h){S.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof b&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},b.prototype.position=function(h,u){return[this.domNode,h]},b.prototype.split=function(h,u){if(u===void 0&&(u=!1),!u){if(h===0)return this;if(h===this.length())return this.next}var l=w.create(this.domNode.splitText(h));return this.parent.insertBefore(l,this.next),this.text=this.statics.value(this.domNode),l},b.prototype.update=function(h,u){var l=this;h.some(function(d){return d.type==="characterData"&&d.target===l.domNode})&&(this.text=this.statics.value(this.domNode))},b.prototype.value=function(){return this.text},b.blotName="text",b.scope=w.Scope.INLINE_BLOT,b}(x.default);C.default=T},function($,C,k){var _=document.createElement("div");if(_.classList.toggle("test-class",!1),_.classList.contains("test-class")){var x=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(w,T){return arguments.length>1&&!this.contains(w)==!T?T:x.call(this,w)}}String.prototype.startsWith||(String.prototype.startsWith=function(w,T){return T=T||0,this.substr(T,w.length)===w}),String.prototype.endsWith||(String.prototype.endsWith=function(w,T){var S=this.toString();(typeof T!="number"||!isFinite(T)||Math.floor(T)!==T||T>S.length)&&(T=S.length),T-=w.length;var b=S.indexOf(w,T);return b!==-1&&b===T}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(T){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof T!="function")throw new TypeError("predicate must be a function");for(var S=Object(this),b=S.length>>>0,h=arguments[1],u,l=0;l<b;l++)if(u=S[l],T.call(h,u,l,S))return u}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function($,C){var k=-1,_=1,x=0;function w(s,v,y){if(s==v)return s?[[x,s]]:[];(y<0||s.length<y)&&(y=null);var A=h(s,v),D=s.substring(0,A);s=s.substring(A),v=v.substring(A),A=u(s,v);var E=s.substring(s.length-A);s=s.substring(0,s.length-A),v=v.substring(0,v.length-A);var I=T(s,v);return D&&I.unshift([x,D]),E&&I.push([x,E]),d(I),y!=null&&(I=f(I,y)),I=a(I),I}function T(s,v){var y;if(!s)return[[_,v]];if(!v)return[[k,s]];var A=s.length>v.length?s:v,D=s.length>v.length?v:s,E=A.indexOf(D);if(E!=-1)return y=[[_,A.substring(0,E)],[x,D],[_,A.substring(E+D.length)]],s.length>v.length&&(y[0][0]=y[2][0]=k),y;if(D.length==1)return[[k,s],[_,v]];var I=l(s,v);if(I){var N=I[0],R=I[1],L=I[2],M=I[3],q=I[4],V=w(N,L),X=w(R,M);return V.concat([[x,q]],X)}return S(s,v)}function S(s,v){for(var y=s.length,A=v.length,D=Math.ceil((y+A)/2),E=D,I=2*D,N=new Array(I),R=new Array(I),L=0;L<I;L++)N[L]=-1,R[L]=-1;N[E+1]=0,R[E+1]=0;for(var M=y-A,q=M%2!=0,V=0,X=0,ue=0,Z=0,z=0;z<D;z++){for(var j=-z+V;j<=z-X;j+=2){var F=E+j,J;j==-z||j!=z&&N[F-1]<N[F+1]?J=N[F+1]:J=N[F-1]+1;for(var Q=J-j;J<y&&Q<A&&s.charAt(J)==v.charAt(Q);)J++,Q++;if(N[F]=J,J>y)X+=2;else if(Q>A)V+=2;else if(q){var W=E+M-j;if(W>=0&&W<I&&R[W]!=-1){var U=y-R[W];if(J>=U)return b(s,v,J,Q)}}}for(var H=-z+ue;H<=z-Z;H+=2){var W=E+H,U;H==-z||H!=z&&R[W-1]<R[W+1]?U=R[W+1]:U=R[W-1]+1;for(var re=U-H;U<y&&re<A&&s.charAt(y-U-1)==v.charAt(A-re-1);)U++,re++;if(R[W]=U,U>y)Z+=2;else if(re>A)ue+=2;else if(!q){var F=E+M-H;if(F>=0&&F<I&&N[F]!=-1){var J=N[F],Q=E+J-F;if(U=y-U,J>=U)return b(s,v,J,Q)}}}}return[[k,s],[_,v]]}function b(s,v,y,A){var D=s.substring(0,y),E=v.substring(0,A),I=s.substring(y),N=v.substring(A),R=w(D,E),L=w(I,N);return R.concat(L)}function h(s,v){if(!s||!v||s.charAt(0)!=v.charAt(0))return 0;for(var y=0,A=Math.min(s.length,v.length),D=A,E=0;y<D;)s.substring(E,D)==v.substring(E,D)?(y=D,E=y):A=D,D=Math.floor((A-y)/2+y);return D}function u(s,v){if(!s||!v||s.charAt(s.length-1)!=v.charAt(v.length-1))return 0;for(var y=0,A=Math.min(s.length,v.length),D=A,E=0;y<D;)s.substring(s.length-D,s.length-E)==v.substring(v.length-D,v.length-E)?(y=D,E=y):A=D,D=Math.floor((A-y)/2+y);return D}function l(s,v){var y=s.length>v.length?s:v,A=s.length>v.length?v:s;if(y.length<4||A.length*2<y.length)return null;function D(X,ue,Z){for(var z=X.substring(Z,Z+Math.floor(X.length/4)),j=-1,F="",J,Q,W,U;(j=ue.indexOf(z,j+1))!=-1;){var H=h(X.substring(Z),ue.substring(j)),re=u(X.substring(0,Z),ue.substring(0,j));F.length<re+H&&(F=ue.substring(j-re,j)+ue.substring(j,j+H),J=X.substring(0,Z-re),Q=X.substring(Z+H),W=ue.substring(0,j-re),U=ue.substring(j+H))}return F.length*2>=X.length?[J,Q,W,U,F]:null}var E=D(y,A,Math.ceil(y.length/4)),I=D(y,A,Math.ceil(y.length/2)),N;if(!E&&!I)return null;I?E?N=E[4].length>I[4].length?E:I:N=I:N=E;var R,L,M,q;s.length>v.length?(R=N[0],L=N[1],M=N[2],q=N[3]):(M=N[0],q=N[1],R=N[2],L=N[3]);var V=N[4];return[R,L,M,q,V]}function d(s){s.push([x,""]);for(var v=0,y=0,A=0,D="",E="",I;v<s.length;)switch(s[v][0]){case _:A++,E+=s[v][1],v++;break;case k:y++,D+=s[v][1],v++;break;case x:y+A>1?(y!==0&&A!==0&&(I=h(E,D),I!==0&&(v-y-A>0&&s[v-y-A-1][0]==x?s[v-y-A-1][1]+=E.substring(0,I):(s.splice(0,0,[x,E.substring(0,I)]),v++),E=E.substring(I),D=D.substring(I)),I=u(E,D),I!==0&&(s[v][1]=E.substring(E.length-I)+s[v][1],E=E.substring(0,E.length-I),D=D.substring(0,D.length-I))),y===0?s.splice(v-A,y+A,[_,E]):A===0?s.splice(v-y,y+A,[k,D]):s.splice(v-y-A,y+A,[k,D],[_,E]),v=v-y-A+(y?1:0)+(A?1:0)+1):v!==0&&s[v-1][0]==x?(s[v-1][1]+=s[v][1],s.splice(v,1)):v++,A=0,y=0,D="",E="";break}s[s.length-1][1]===""&&s.pop();var N=!1;for(v=1;v<s.length-1;)s[v-1][0]==x&&s[v+1][0]==x&&(s[v][1].substring(s[v][1].length-s[v-1][1].length)==s[v-1][1]?(s[v][1]=s[v-1][1]+s[v][1].substring(0,s[v][1].length-s[v-1][1].length),s[v+1][1]=s[v-1][1]+s[v+1][1],s.splice(v-1,1),N=!0):s[v][1].substring(0,s[v+1][1].length)==s[v+1][1]&&(s[v-1][1]+=s[v+1][1],s[v][1]=s[v][1].substring(s[v+1][1].length)+s[v+1][1],s.splice(v+1,1),N=!0)),v++;N&&d(s)}var g=w;g.INSERT=_,g.DELETE=k,g.EQUAL=x,$.exports=g;function m(s,v){if(v===0)return[x,s];for(var y=0,A=0;A<s.length;A++){var D=s[A];if(D[0]===k||D[0]===x){var E=y+D[1].length;if(v===E)return[A+1,s];if(v<E){s=s.slice();var I=v-y,N=[D[0],D[1].slice(0,I)],R=[D[0],D[1].slice(I)];return s.splice(A,1,N,R),[A+1,s]}else y=E}}throw new Error("cursor_pos is out of bounds!")}function f(s,v){var y=m(s,v),A=y[1],D=y[0],E=A[D],I=A[D+1];if(E==null)return s;if(E[0]!==x)return s;if(I!=null&&E[1]+I[1]===I[1]+E[1])return A.splice(D,2,I,E),c(A,D,2);if(I!=null&&I[1].indexOf(E[1])===0){A.splice(D,2,[I[0],E[1]],[0,E[1]]);var N=I[1].slice(E[1].length);return N.length>0&&A.splice(D+2,0,[I[0],N]),c(A,D,3)}else return s}function a(s){for(var v=!1,y=function(I){return I.charCodeAt(0)>=56320&&I.charCodeAt(0)<=57343},A=function(I){return I.charCodeAt(I.length-1)>=55296&&I.charCodeAt(I.length-1)<=56319},D=2;D<s.length;D+=1)s[D-2][0]===x&&A(s[D-2][1])&&s[D-1][0]===k&&y(s[D-1][1])&&s[D][0]===_&&y(s[D][1])&&(v=!0,s[D-1][1]=s[D-2][1].slice(-1)+s[D-1][1],s[D][1]=s[D-2][1].slice(-1)+s[D][1],s[D-2][1]=s[D-2][1].slice(0,-1));if(!v)return s;for(var E=[],D=0;D<s.length;D+=1)s[D][1].length>0&&E.push(s[D]);return E}function c(s,v,y){for(var A=v+y-1;A>=0&&A>=v-1;A--)if(A+1<s.length){var D=s[A],E=s[A+1];D[0]===E[1]&&s.splice(A,2,[D[0],D[1]+E[1]])}return s}},function($,C){C=$.exports=typeof Object.keys=="function"?Object.keys:k,C.shim=k;function k(_){var x=[];for(var w in _)x.push(w);return x}},function($,C){var k=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";C=$.exports=k?_:x,C.supported=_;function _(w){return Object.prototype.toString.call(w)=="[object Arguments]"}C.unsupported=x;function x(w){return w&&typeof w=="object"&&typeof w.length=="number"&&Object.prototype.hasOwnProperty.call(w,"callee")&&!Object.prototype.propertyIsEnumerable.call(w,"callee")||!1}},function($,C){var k=Object.prototype.hasOwnProperty,_="~";function x(){}Object.create&&(x.prototype=Object.create(null),new x().__proto__||(_=!1));function w(S,b,h){this.fn=S,this.context=b,this.once=h||!1}function T(){this._events=new x,this._eventsCount=0}T.prototype.eventNames=function(){var b=[],h,u;if(this._eventsCount===0)return b;for(u in h=this._events)k.call(h,u)&&b.push(_?u.slice(1):u);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(h)):b},T.prototype.listeners=function(b,h){var u=_?_+b:b,l=this._events[u];if(h)return!!l;if(!l)return[];if(l.fn)return[l.fn];for(var d=0,g=l.length,m=new Array(g);d<g;d++)m[d]=l[d].fn;return m},T.prototype.emit=function(b,h,u,l,d,g){var m=_?_+b:b;if(!this._events[m])return!1;var f=this._events[m],a=arguments.length,c,s;if(f.fn){switch(f.once&&this.removeListener(b,f.fn,void 0,!0),a){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,h),!0;case 3:return f.fn.call(f.context,h,u),!0;case 4:return f.fn.call(f.context,h,u,l),!0;case 5:return f.fn.call(f.context,h,u,l,d),!0;case 6:return f.fn.call(f.context,h,u,l,d,g),!0}for(s=1,c=new Array(a-1);s<a;s++)c[s-1]=arguments[s];f.fn.apply(f.context,c)}else{var v=f.length,y;for(s=0;s<v;s++)switch(f[s].once&&this.removeListener(b,f[s].fn,void 0,!0),a){case 1:f[s].fn.call(f[s].context);break;case 2:f[s].fn.call(f[s].context,h);break;case 3:f[s].fn.call(f[s].context,h,u);break;case 4:f[s].fn.call(f[s].context,h,u,l);break;default:if(!c)for(y=1,c=new Array(a-1);y<a;y++)c[y-1]=arguments[y];f[s].fn.apply(f[s].context,c)}}return!0},T.prototype.on=function(b,h,u){var l=new w(h,u||this),d=_?_+b:b;return this._events[d]?this._events[d].fn?this._events[d]=[this._events[d],l]:this._events[d].push(l):(this._events[d]=l,this._eventsCount++),this},T.prototype.once=function(b,h,u){var l=new w(h,u||this,!0),d=_?_+b:b;return this._events[d]?this._events[d].fn?this._events[d]=[this._events[d],l]:this._events[d].push(l):(this._events[d]=l,this._eventsCount++),this},T.prototype.removeListener=function(b,h,u,l){var d=_?_+b:b;if(!this._events[d])return this;if(!h)return--this._eventsCount===0?this._events=new x:delete this._events[d],this;var g=this._events[d];if(g.fn)g.fn===h&&(!l||g.once)&&(!u||g.context===u)&&(--this._eventsCount===0?this._events=new x:delete this._events[d]);else{for(var m=0,f=[],a=g.length;m<a;m++)(g[m].fn!==h||l&&!g[m].once||u&&g[m].context!==u)&&f.push(g[m]);f.length?this._events[d]=f.length===1?f[0]:f:--this._eventsCount===0?this._events=new x:delete this._events[d]}return this},T.prototype.removeAllListeners=function(b){var h;return b?(h=_?_+b:b,this._events[h]&&(--this._eventsCount===0?this._events=new x:delete this._events[h])):(this._events=new x,this._eventsCount=0),this},T.prototype.off=T.prototype.removeListener,T.prototype.addListener=T.prototype.on,T.prototype.setMaxListeners=function(){return this},T.prefixed=_,T.EventEmitter=T,typeof $<"u"&&($.exports=T)},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.matchText=C.matchSpacing=C.matchNewline=C.matchBlot=C.matchAttributor=C.default=void 0;var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},x=function(){function Y(ie,ge){var be=[],de=!0,ke=!1,Re=void 0;try{for(var je=ie[Symbol.iterator](),nt;!(de=(nt=je.next()).done)&&(be.push(nt.value),!(ge&&be.length===ge));de=!0);}catch(lt){ke=!0,Re=lt}finally{try{!de&&je.return&&je.return()}finally{if(ke)throw Re}}return be}return function(ie,ge){if(Array.isArray(ie))return ie;if(Symbol.iterator in Object(ie))return Y(ie,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function Y(ie,ge){for(var be=0;be<ge.length;be++){var de=ge[be];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(ie,de.key,de)}}return function(ie,ge,be){return ge&&Y(ie.prototype,ge),be&&Y(ie,be),ie}}(),T=k(3),S=R(T),b=k(2),h=R(b),u=k(0),l=R(u),d=k(5),g=R(d),m=k(10),f=R(m),a=k(9),c=R(a),s=k(36),v=k(37),y=k(13),A=R(y),D=k(26),E=k(38),I=k(39),N=k(40);function R(Y){return Y&&Y.__esModule?Y:{default:Y}}function L(Y,ie,ge){return ie in Y?Object.defineProperty(Y,ie,{value:ge,enumerable:!0,configurable:!0,writable:!0}):Y[ie]=ge,Y}function M(Y,ie){if(!(Y instanceof ie))throw new TypeError("Cannot call a class as a function")}function q(Y,ie){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:Y}function V(Y,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);Y.prototype=Object.create(ie&&ie.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,ie):Y.__proto__=ie)}var X=(0,f.default)("quill:clipboard"),ue="__ql-matcher",Z=[[Node.TEXT_NODE,oe],[Node.TEXT_NODE,Ie],["br",Te],[Node.ELEMENT_NODE,Ie],[Node.ELEMENT_NODE,ve],[Node.ELEMENT_NODE,G],[Node.ELEMENT_NODE,ae],[Node.ELEMENT_NODE,le],["li",Pe],["b",re.bind(re,"bold")],["i",re.bind(re,"italic")],["style",De]],z=[s.AlignAttribute,E.DirectionAttribute].reduce(function(Y,ie){return Y[ie.keyName]=ie,Y},{}),j=[s.AlignStyle,v.BackgroundStyle,D.ColorStyle,E.DirectionStyle,I.FontStyle,N.SizeStyle].reduce(function(Y,ie){return Y[ie.keyName]=ie,Y},{}),F=function(Y){V(ie,Y);function ie(ge,be){M(this,ie);var de=q(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,ge,be));return de.quill.root.addEventListener("paste",de.onPaste.bind(de)),de.container=de.quill.addContainer("ql-clipboard"),de.container.setAttribute("contenteditable",!0),de.container.setAttribute("tabindex",-1),de.matchers=[],Z.concat(de.options.matchers).forEach(function(ke){var Re=x(ke,2),je=Re[0],nt=Re[1];!be.matchVisual&&nt===G||de.addMatcher(je,nt)}),de}return w(ie,[{key:"addMatcher",value:function(be,de){this.matchers.push([be,de])}},{key:"convert",value:function(be){if(typeof be=="string")return this.container.innerHTML=be.replace(/\>\r?\n +\</g,"><"),this.convert();var de=this.quill.getFormat(this.quill.selection.savedRange.index);if(de[A.default.blotName]){var ke=this.container.innerText;return this.container.innerHTML="",new h.default().insert(ke,L({},A.default.blotName,de[A.default.blotName]))}var Re=this.prepareMatching(),je=x(Re,2),nt=je[0],lt=je[1],Ge=H(this.container,nt,lt);return W(Ge,`
`)&&Ge.ops[Ge.ops.length-1].attributes==null&&(Ge=Ge.compose(new h.default().retain(Ge.length()-1).delete(1))),X.log("convert",this.container.innerHTML,Ge),this.container.innerHTML="",Ge}},{key:"dangerouslyPasteHTML",value:function(be,de){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof be=="string")this.quill.setContents(this.convert(be),de),this.quill.setSelection(0,g.default.sources.SILENT);else{var Re=this.convert(de);this.quill.updateContents(new h.default().retain(be).concat(Re),ke),this.quill.setSelection(be+Re.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(be){var de=this;if(!(be.defaultPrevented||!this.quill.isEnabled())){var ke=this.quill.getSelection(),Re=new h.default().retain(ke.index),je=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){Re=Re.concat(de.convert()).delete(ke.length),de.quill.updateContents(Re,g.default.sources.USER),de.quill.setSelection(Re.length()-ke.length,g.default.sources.SILENT),de.quill.scrollingContainer.scrollTop=je,de.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var be=this,de=[],ke=[];return this.matchers.forEach(function(Re){var je=x(Re,2),nt=je[0],lt=je[1];switch(nt){case Node.TEXT_NODE:ke.push(lt);break;case Node.ELEMENT_NODE:de.push(lt);break;default:[].forEach.call(be.container.querySelectorAll(nt),function(Ge){Ge[ue]=Ge[ue]||[],Ge[ue].push(lt)});break}}),[de,ke]}}]),ie}(c.default);F.DEFAULTS={matchers:[],matchVisual:!0};function J(Y,ie,ge){return(typeof ie>"u"?"undefined":_(ie))==="object"?Object.keys(ie).reduce(function(be,de){return J(be,de,ie[de])},Y):Y.reduce(function(be,de){return de.attributes&&de.attributes[ie]?be.push(de):be.insert(de.insert,(0,S.default)({},L({},ie,ge),de.attributes))},new h.default)}function Q(Y){if(Y.nodeType!==Node.ELEMENT_NODE)return{};var ie="__ql-computed-style";return Y[ie]||(Y[ie]=window.getComputedStyle(Y))}function W(Y,ie){for(var ge="",be=Y.ops.length-1;be>=0&&ge.length<ie.length;--be){var de=Y.ops[be];if(typeof de.insert!="string")break;ge=de.insert+ge}return ge.slice(-1*ie.length)===ie}function U(Y){if(Y.childNodes.length===0)return!1;var ie=Q(Y);return["block","list-item"].indexOf(ie.display)>-1}function H(Y,ie,ge){return Y.nodeType===Y.TEXT_NODE?ge.reduce(function(be,de){return de(Y,be)},new h.default):Y.nodeType===Y.ELEMENT_NODE?[].reduce.call(Y.childNodes||[],function(be,de){var ke=H(de,ie,ge);return de.nodeType===Y.ELEMENT_NODE&&(ke=ie.reduce(function(Re,je){return je(de,Re)},ke),ke=(de[ue]||[]).reduce(function(Re,je){return je(de,Re)},ke)),be.concat(ke)},new h.default):new h.default}function re(Y,ie,ge){return J(ge,Y,!0)}function ae(Y,ie){var ge=l.default.Attributor.Attribute.keys(Y),be=l.default.Attributor.Class.keys(Y),de=l.default.Attributor.Style.keys(Y),ke={};return ge.concat(be).concat(de).forEach(function(Re){var je=l.default.query(Re,l.default.Scope.ATTRIBUTE);je!=null&&(ke[je.attrName]=je.value(Y),ke[je.attrName])||(je=z[Re],je!=null&&(je.attrName===Re||je.keyName===Re)&&(ke[je.attrName]=je.value(Y)||void 0),je=j[Re],je!=null&&(je.attrName===Re||je.keyName===Re)&&(je=j[Re],ke[je.attrName]=je.value(Y)||void 0))}),Object.keys(ke).length>0&&(ie=J(ie,ke)),ie}function ve(Y,ie){var ge=l.default.query(Y);if(ge==null)return ie;if(ge.prototype instanceof l.default.Embed){var be={},de=ge.value(Y);de!=null&&(be[ge.blotName]=de,ie=new h.default().insert(be,ge.formats(Y)))}else typeof ge.formats=="function"&&(ie=J(ie,ge.blotName,ge.formats(Y)));return ie}function Te(Y,ie){return W(ie,`
`)||ie.insert(`
`),ie}function De(){return new h.default}function Pe(Y,ie){var ge=l.default.query(Y);if(ge==null||ge.blotName!=="list-item"||!W(ie,`
`))return ie;for(var be=-1,de=Y.parentNode;!de.classList.contains("ql-clipboard");)(l.default.query(de)||{}).blotName==="list"&&(be+=1),de=de.parentNode;return be<=0?ie:ie.compose(new h.default().retain(ie.length()-1).retain(1,{indent:be}))}function Ie(Y,ie){return W(ie,`
`)||(U(Y)||ie.length()>0&&Y.nextSibling&&U(Y.nextSibling))&&ie.insert(`
`),ie}function G(Y,ie){if(U(Y)&&Y.nextElementSibling!=null&&!W(ie,`

`)){var ge=Y.offsetHeight+parseFloat(Q(Y).marginTop)+parseFloat(Q(Y).marginBottom);Y.nextElementSibling.offsetTop>Y.offsetTop+ge*1.5&&ie.insert(`
`)}return ie}function le(Y,ie){var ge={},be=Y.style||{};return be.fontStyle&&Q(Y).fontStyle==="italic"&&(ge.italic=!0),be.fontWeight&&(Q(Y).fontWeight.startsWith("bold")||parseInt(Q(Y).fontWeight)>=700)&&(ge.bold=!0),Object.keys(ge).length>0&&(ie=J(ie,ge)),parseFloat(be.textIndent||0)>0&&(ie=new h.default().insert("	").concat(ie)),ie}function oe(Y,ie){var ge=Y.data;if(Y.parentNode.tagName==="O:P")return ie.insert(ge.trim());if(ge.trim().length===0&&Y.parentNode.classList.contains("ql-clipboard"))return ie;if(!Q(Y.parentNode).whiteSpace.startsWith("pre")){var be=function(ke,Re){return Re=Re.replace(/[^\u00a0]/g,""),Re.length<1&&ke?" ":Re};ge=ge.replace(/\r\n/g," ").replace(/\n/g," "),ge=ge.replace(/\s\s+/g,be.bind(be,!0)),(Y.previousSibling==null&&U(Y.parentNode)||Y.previousSibling!=null&&U(Y.previousSibling))&&(ge=ge.replace(/^\s+/,be.bind(be,!1))),(Y.nextSibling==null&&U(Y.parentNode)||Y.nextSibling!=null&&U(Y.nextSibling))&&(ge=ge.replace(/\s+$/,be.bind(be,!1)))}return ie.insert(ge)}C.default=F,C.matchAttributor=ae,C.matchBlot=ve,C.matchNewline=Ie,C.matchSpacing=G,C.matchText=oe},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=k(6),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(){return b(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return _(g,[{key:"optimize",value:function(f){x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,f),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return x(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g}(T.default);l.blotName="bold",l.tagName=["STRONG","B"],C.default=l},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.addControls=C.default=void 0;var _=function(){function N(R,L){var M=[],q=!0,V=!1,X=void 0;try{for(var ue=R[Symbol.iterator](),Z;!(q=(Z=ue.next()).done)&&(M.push(Z.value),!(L&&M.length===L));q=!0);}catch(z){V=!0,X=z}finally{try{!q&&ue.return&&ue.return()}finally{if(V)throw X}}return M}return function(R,L){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return N(R,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function N(R,L){for(var M=0;M<L.length;M++){var q=L[M];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(R,q.key,q)}}return function(R,L,M){return L&&N(R.prototype,L),M&&N(R,M),R}}(),w=k(2),T=f(w),S=k(0),b=f(S),h=k(5),u=f(h),l=k(10),d=f(l),g=k(9),m=f(g);function f(N){return N&&N.__esModule?N:{default:N}}function a(N,R,L){return R in N?Object.defineProperty(N,R,{value:L,enumerable:!0,configurable:!0,writable:!0}):N[R]=L,N}function c(N,R){if(!(N instanceof R))throw new TypeError("Cannot call a class as a function")}function s(N,R){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:N}function v(N,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);N.prototype=Object.create(R&&R.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(N,R):N.__proto__=R)}var y=(0,d.default)("quill:toolbar"),A=function(N){v(R,N);function R(L,M){c(this,R);var q=s(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,L,M));if(Array.isArray(q.options.container)){var V=document.createElement("div");E(V,q.options.container),L.container.parentNode.insertBefore(V,L.container),q.container=V}else typeof q.options.container=="string"?q.container=document.querySelector(q.options.container):q.container=q.options.container;if(!(q.container instanceof HTMLElement)){var X;return X=y.error("Container required for toolbar",q.options),s(q,X)}return q.container.classList.add("ql-toolbar"),q.controls=[],q.handlers={},Object.keys(q.options.handlers).forEach(function(ue){q.addHandler(ue,q.options.handlers[ue])}),[].forEach.call(q.container.querySelectorAll("button, select"),function(ue){q.attach(ue)}),q.quill.on(u.default.events.EDITOR_CHANGE,function(ue,Z){ue===u.default.events.SELECTION_CHANGE&&q.update(Z)}),q.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){var ue=q.quill.selection.getRange(),Z=_(ue,1),z=Z[0];q.update(z)}),q}return x(R,[{key:"addHandler",value:function(M,q){this.handlers[M]=q}},{key:"attach",value:function(M){var q=this,V=[].find.call(M.classList,function(ue){return ue.indexOf("ql-")===0});if(!!V){if(V=V.slice(3),M.tagName==="BUTTON"&&M.setAttribute("type","button"),this.handlers[V]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[V]==null){y.warn("ignoring attaching to disabled format",V,M);return}if(b.default.query(V)==null){y.warn("ignoring attaching to nonexistent format",V,M);return}}var X=M.tagName==="SELECT"?"change":"click";M.addEventListener(X,function(ue){var Z=void 0;if(M.tagName==="SELECT"){if(M.selectedIndex<0)return;var z=M.options[M.selectedIndex];z.hasAttribute("selected")?Z=!1:Z=z.value||!1}else M.classList.contains("ql-active")?Z=!1:Z=M.value||!M.hasAttribute("value"),ue.preventDefault();q.quill.focus();var j=q.quill.selection.getRange(),F=_(j,1),J=F[0];if(q.handlers[V]!=null)q.handlers[V].call(q,Z);else if(b.default.query(V).prototype instanceof b.default.Embed){if(Z=prompt("Enter "+V),!Z)return;q.quill.updateContents(new T.default().retain(J.index).delete(J.length).insert(a({},V,Z)),u.default.sources.USER)}else q.quill.format(V,Z,u.default.sources.USER);q.update(J)}),this.controls.push([V,M])}}},{key:"update",value:function(M){var q=M==null?{}:this.quill.getFormat(M);this.controls.forEach(function(V){var X=_(V,2),ue=X[0],Z=X[1];if(Z.tagName==="SELECT"){var z=void 0;if(M==null)z=null;else if(q[ue]==null)z=Z.querySelector("option[selected]");else if(!Array.isArray(q[ue])){var j=q[ue];typeof j=="string"&&(j=j.replace(/\"/g,'\\"')),z=Z.querySelector('option[value="'+j+'"]')}z==null?(Z.value="",Z.selectedIndex=-1):z.selected=!0}else if(M==null)Z.classList.remove("ql-active");else if(Z.hasAttribute("value")){var F=q[ue]===Z.getAttribute("value")||q[ue]!=null&&q[ue].toString()===Z.getAttribute("value")||q[ue]==null&&!Z.getAttribute("value");Z.classList.toggle("ql-active",F)}else Z.classList.toggle("ql-active",q[ue]!=null)})}}]),R}(m.default);A.DEFAULTS={};function D(N,R,L){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+R),L!=null&&(M.value=L),N.appendChild(M)}function E(N,R){Array.isArray(R[0])||(R=[R]),R.forEach(function(L){var M=document.createElement("span");M.classList.add("ql-formats"),L.forEach(function(q){if(typeof q=="string")D(M,q);else{var V=Object.keys(q)[0],X=q[V];Array.isArray(X)?I(M,V,X):D(M,V,X)}}),N.appendChild(M)})}function I(N,R,L){var M=document.createElement("select");M.classList.add("ql-"+R),L.forEach(function(q){var V=document.createElement("option");q!==!1?V.setAttribute("value",q):V.setAttribute("selected","selected"),M.appendChild(V)}),N.appendChild(M)}A.DEFAULTS={container:null,handlers:{clean:function(){var R=this,L=this.quill.getSelection();if(L!=null)if(L.length==0){var M=this.quill.getFormat();Object.keys(M).forEach(function(q){b.default.query(q,b.default.Scope.INLINE)!=null&&R.quill.format(q,!1)})}else this.quill.removeFormat(L,u.default.sources.USER)},direction:function(R){var L=this.quill.getFormat().align;R==="rtl"&&L==null?this.quill.format("align","right",u.default.sources.USER):!R&&L==="right"&&this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",R,u.default.sources.USER)},indent:function(R){var L=this.quill.getSelection(),M=this.quill.getFormat(L),q=parseInt(M.indent||0);if(R==="+1"||R==="-1"){var V=R==="+1"?1:-1;M.direction==="rtl"&&(V*=-1),this.quill.format("indent",q+V,u.default.sources.USER)}},link:function(R){R===!0&&(R=prompt("Enter link URL:")),this.quill.format("link",R,u.default.sources.USER)},list:function(R){var L=this.quill.getSelection(),M=this.quill.getFormat(L);R==="check"?M.list==="checked"||M.list==="unchecked"?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",R,u.default.sources.USER)}}},C.default=A,C.addControls=E},function($,C){$.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=k(28),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(m,f){b(this,g);var a=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m));return a.label.innerHTML=f,a.container.classList.add("ql-color-picker"),[].slice.call(a.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(c){c.classList.add("ql-primary")}),a}return _(g,[{key:"buildItem",value:function(f){var a=x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,f);return a.style.backgroundColor=f.getAttribute("value")||"",a}},{key:"selectItem",value:function(f,a){x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,f,a);var c=this.label.querySelector(".ql-color-label"),s=f&&f.getAttribute("data-value")||"";c&&(c.tagName==="line"?c.style.stroke=s:c.style.fill=s)}}]),g}(T.default);C.default=l},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=k(28),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(m,f){b(this,g);var a=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m));return a.container.classList.add("ql-icon-picker"),[].forEach.call(a.container.querySelectorAll(".ql-picker-item"),function(c){c.innerHTML=f[c.getAttribute("data-value")||""]}),a.defaultItem=a.container.querySelector(".ql-selected"),a.selectItem(a.defaultItem),a}return _(g,[{key:"selectItem",value:function(f,a){x(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,f,a),f=f||this.defaultItem,this.label.innerHTML=f.innerHTML}}]),g}(T.default);C.default=l},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function T(S,b){for(var h=0;h<b.length;h++){var u=b[h];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(S,u.key,u)}}return function(S,b,h){return b&&T(S.prototype,b),h&&T(S,h),S}}();function x(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}var w=function(){function T(S,b){var h=this;x(this,T),this.quill=S,this.boundsContainer=b||document.body,this.root=S.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return _(T,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(b){var h=b.left+b.width/2-this.root.offsetWidth/2,u=b.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=u+"px",this.root.classList.remove("ql-flip");var l=this.boundsContainer.getBoundingClientRect(),d=this.root.getBoundingClientRect(),g=0;if(d.right>l.right&&(g=l.right-d.right,this.root.style.left=h+g+"px"),d.left<l.left&&(g=l.left-d.left,this.root.style.left=h+g+"px"),d.bottom>l.bottom){var m=d.bottom-d.top,f=b.bottom-b.top+m;this.root.style.top=u-f+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),T}();C.default=w},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function I(N,R){var L=[],M=!0,q=!1,V=void 0;try{for(var X=N[Symbol.iterator](),ue;!(M=(ue=X.next()).done)&&(L.push(ue.value),!(R&&L.length===R));M=!0);}catch(Z){q=!0,V=Z}finally{try{!M&&X.return&&X.return()}finally{if(q)throw V}}return L}return function(N,R){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return I(N,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function I(N,R,L){N===null&&(N=Function.prototype);var M=Object.getOwnPropertyDescriptor(N,R);if(M===void 0){var q=Object.getPrototypeOf(N);return q===null?void 0:I(q,R,L)}else{if("value"in M)return M.value;var V=M.get;return V===void 0?void 0:V.call(L)}},w=function(){function I(N,R){for(var L=0;L<R.length;L++){var M=R[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(N,M.key,M)}}return function(N,R,L){return R&&I(N.prototype,R),L&&I(N,L),N}}(),T=k(3),S=c(T),b=k(8),h=c(b),u=k(43),l=c(u),d=k(27),g=c(d),m=k(15),f=k(41),a=c(f);function c(I){return I&&I.__esModule?I:{default:I}}function s(I,N){if(!(I instanceof N))throw new TypeError("Cannot call a class as a function")}function v(I,N){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:I}function y(I,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);I.prototype=Object.create(N&&N.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(I,N):I.__proto__=N)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],D=function(I){y(N,I);function N(R,L){s(this,N),L.modules.toolbar!=null&&L.modules.toolbar.container==null&&(L.modules.toolbar.container=A);var M=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,R,L));return M.quill.container.classList.add("ql-snow"),M}return w(N,[{key:"extendToolbar",value:function(L){L.container.classList.add("ql-snow"),this.buildButtons([].slice.call(L.container.querySelectorAll("button")),a.default),this.buildPickers([].slice.call(L.container.querySelectorAll("select")),a.default),this.tooltip=new E(this.quill,this.options.bounds),L.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(M,q){L.handlers.link.call(L,!q.format.link)})}}]),N}(l.default);D.DEFAULTS=(0,S.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(N){if(N){var R=this.quill.getSelection();if(R==null||R.length==0)return;var L=this.quill.getText(R);/^\S+@\S+\.\S+$/.test(L)&&L.indexOf("mailto:")!==0&&(L="mailto:"+L);var M=this.quill.theme.tooltip;M.edit("link",L)}else this.quill.format("link",!1)}}}}});var E=function(I){y(N,I);function N(R,L){s(this,N);var M=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,R,L));return M.preview=M.root.querySelector("a.ql-preview"),M}return w(N,[{key:"listen",value:function(){var L=this;x(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(M){L.root.classList.contains("ql-editing")?L.save():L.edit("link",L.preview.textContent),M.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(M){if(L.linkRange!=null){var q=L.linkRange;L.restoreFocus(),L.quill.formatText(q,"link",!1,h.default.sources.USER),delete L.linkRange}M.preventDefault(),L.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(M,q,V){if(M!=null){if(M.length===0&&V===h.default.sources.USER){var X=L.quill.scroll.descendant(g.default,M.index),ue=_(X,2),Z=ue[0],z=ue[1];if(Z!=null){L.linkRange=new m.Range(M.index-z,Z.length());var j=g.default.formats(Z.domNode);L.preview.textContent=j,L.preview.setAttribute("href",j),L.show(),L.position(L.quill.getBounds(L.linkRange));return}}else delete L.linkRange;L.hide()}})}},{key:"show",value:function(){x(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),N}(u.BaseTooltip);E.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),C.default=D},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(29),x=de(_),w=k(36),T=k(38),S=k(64),b=k(65),h=de(b),u=k(66),l=de(u),d=k(67),g=de(d),m=k(37),f=k(26),a=k(39),c=k(40),s=k(56),v=de(s),y=k(68),A=de(y),D=k(27),E=de(D),I=k(69),N=de(I),R=k(70),L=de(R),M=k(71),q=de(M),V=k(72),X=de(V),ue=k(73),Z=de(ue),z=k(13),j=de(z),F=k(74),J=de(F),Q=k(75),W=de(Q),U=k(57),H=de(U),re=k(41),ae=de(re),ve=k(28),Te=de(ve),De=k(59),Pe=de(De),Ie=k(60),G=de(Ie),le=k(61),oe=de(le),Y=k(108),ie=de(Y),ge=k(62),be=de(ge);function de(ke){return ke&&ke.__esModule?ke:{default:ke}}x.default.register({"attributors/attribute/direction":T.DirectionAttribute,"attributors/class/align":w.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":T.DirectionClass,"attributors/class/font":a.FontClass,"attributors/class/size":c.SizeClass,"attributors/style/align":w.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":T.DirectionStyle,"attributors/style/font":a.FontStyle,"attributors/style/size":c.SizeStyle},!0),x.default.register({"formats/align":w.AlignClass,"formats/direction":T.DirectionClass,"formats/indent":S.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":a.FontClass,"formats/size":c.SizeClass,"formats/blockquote":h.default,"formats/code-block":j.default,"formats/header":l.default,"formats/list":g.default,"formats/bold":v.default,"formats/code":z.Code,"formats/italic":A.default,"formats/link":E.default,"formats/script":N.default,"formats/strike":L.default,"formats/underline":q.default,"formats/image":X.default,"formats/video":Z.default,"formats/list/item":d.ListItem,"modules/formula":J.default,"modules/syntax":W.default,"modules/toolbar":H.default,"themes/bubble":ie.default,"themes/snow":be.default,"ui/icons":ae.default,"ui/picker":Te.default,"ui/icon-picker":G.default,"ui/color-picker":Pe.default,"ui/tooltip":oe.default},!0),C.default=x.default},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.IndentClass=void 0;var _=function(){function g(m,f){for(var a=0;a<f.length;a++){var c=f[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(m,c.key,c)}}return function(m,f,a){return f&&g(m.prototype,f),a&&g(m,a),m}}(),x=function g(m,f,a){m===null&&(m=Function.prototype);var c=Object.getOwnPropertyDescriptor(m,f);if(c===void 0){var s=Object.getPrototypeOf(m);return s===null?void 0:g(s,f,a)}else{if("value"in c)return c.value;var v=c.get;return v===void 0?void 0:v.call(a)}},w=k(0),T=S(w);function S(g){return g&&g.__esModule?g:{default:g}}function b(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function h(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function u(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var l=function(g){u(m,g);function m(){return b(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return _(m,[{key:"add",value:function(a,c){if(c==="+1"||c==="-1"){var s=this.value(a)||0;c=c==="+1"?s+1:s-1}return c===0?(this.remove(a),!0):x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,a,c)}},{key:"canAdd",value:function(a,c){return x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,a,c)||x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,a,parseInt(c))}},{key:"value",value:function(a){return parseInt(x(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,a))||void 0}}]),m}(T.default.Attributor.Class),d=new l("indent","ql-indent",{scope:T.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});C.IndentClass=d},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(4),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default);h.blotName="blockquote",h.tagName="blockquote",C.default=h},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function l(d,g){for(var m=0;m<g.length;m++){var f=g[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(d,f.key,f)}}return function(d,g,m){return g&&l(d.prototype,g),m&&l(d,m),d}}(),x=k(4),w=T(x);function T(l){return l&&l.__esModule?l:{default:l}}function S(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}function b(l,d){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:l}function h(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);l.prototype=Object.create(d&&d.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(l,d):l.__proto__=d)}var u=function(l){h(d,l);function d(){return S(this,d),b(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return _(d,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),d}(w.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],C.default=u},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.ListItem=void 0;var _=function(){function s(v,y){for(var A=0;A<y.length;A++){var D=y[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}return function(v,y,A){return y&&s(v.prototype,y),A&&s(v,A),v}}(),x=function s(v,y,A){v===null&&(v=Function.prototype);var D=Object.getOwnPropertyDescriptor(v,y);if(D===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:s(E,y,A)}else{if("value"in D)return D.value;var I=D.get;return I===void 0?void 0:I.call(A)}},w=k(0),T=l(w),S=k(4),b=l(S),h=k(25),u=l(h);function l(s){return s&&s.__esModule?s:{default:s}}function d(s,v,y){return v in s?Object.defineProperty(s,v,{value:y,enumerable:!0,configurable:!0,writable:!0}):s[v]=y,s}function g(s,v){if(!(s instanceof v))throw new TypeError("Cannot call a class as a function")}function m(s,v){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:s}function f(s,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);s.prototype=Object.create(v&&v.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(s,v):s.__proto__=v)}var a=function(s){f(v,s);function v(){return g(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return _(v,[{key:"format",value:function(A,D){A===c.blotName&&!D?this.replaceWith(T.default.create(this.statics.scope)):x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,A,D)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,D){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,D),this):(this.parent.unwrap(),x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"replaceWith",this).call(this,A,D))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:x(v.__proto__||Object.getPrototypeOf(v),"formats",this).call(this,A)}}]),v}(b.default);a.blotName="list-item",a.tagName="LI";var c=function(s){f(v,s),_(v,null,[{key:"create",value:function(A){var D=A==="ordered"?"OL":"UL",E=x(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,D);return(A==="checked"||A==="unchecked")&&E.setAttribute("data-checked",A==="checked"),E}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function v(y){g(this,v);var A=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y)),D=function(I){if(I.target.parentNode===y){var N=A.statics.formats(y),R=T.default.find(I.target);N==="checked"?R.format("list","unchecked"):N==="unchecked"&&R.format("list","checked")}};return y.addEventListener("touchstart",D),y.addEventListener("mousedown",D),A}return _(v,[{key:"format",value:function(A,D){this.children.length>0&&this.children.tail.format(A,D)}},{key:"formats",value:function(){return d({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,D){if(A instanceof a)x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertBefore",this).call(this,A,D);else{var E=D==null?this.length():D.offset(this),I=this.split(E);I.parent.insertBefore(A,I)}}},{key:"optimize",value:function(A){x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,A);var D=this.next;D!=null&&D.prev===this&&D.statics.blotName===this.statics.blotName&&D.domNode.tagName===this.domNode.tagName&&D.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(D.moveChildren(this),D.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var D=T.default.create(this.statics.defaultChild);A.moveChildren(D),this.appendChild(D)}x(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"replace",this).call(this,A)}}]),v}(u.default);c.blotName="list",c.scope=T.default.Scope.BLOCK_BLOT,c.tagName=["OL","UL"],c.defaultChild="list-item",c.allowedChildren=[a],C.ListItem=a,C.default=c},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(56),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default);h.blotName="italic",h.tagName=["EM","I"],C.default=h},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function d(g,m){for(var f=0;f<m.length;f++){var a=m[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(g,m,f){return m&&d(g.prototype,m),f&&d(g,f),g}}(),x=function d(g,m,f){g===null&&(g=Function.prototype);var a=Object.getOwnPropertyDescriptor(g,m);if(a===void 0){var c=Object.getPrototypeOf(g);return c===null?void 0:d(c,m,f)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(f)}},w=k(6),T=S(w);function S(d){return d&&d.__esModule?d:{default:d}}function b(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function h(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function u(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var l=function(d){u(g,d);function g(){return b(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return _(g,null,[{key:"create",value:function(f){return f==="super"?document.createElement("sup"):f==="sub"?document.createElement("sub"):x(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,f)}},{key:"formats",value:function(f){if(f.tagName==="SUB")return"sub";if(f.tagName==="SUP")return"super"}}]),g}(T.default);l.blotName="script",l.tagName=["SUB","SUP"],C.default=l},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(6),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default);h.blotName="strike",h.tagName="S",C.default=h},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=k(6),x=w(_);function w(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function S(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function b(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var h=function(u){b(l,u);function l(){return T(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(x.default);h.blotName="underline",h.tagName="U",C.default=h},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),x=function m(f,a,c){f===null&&(f=Function.prototype);var s=Object.getOwnPropertyDescriptor(f,a);if(s===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:m(v,a,c)}else{if("value"in s)return s.value;var y=s.get;return y===void 0?void 0:y.call(c)}},w=k(0),T=b(w),S=k(27);function b(m){return m&&m.__esModule?m:{default:m}}function h(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function u(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function l(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var d=["alt","height","width"],g=function(m){l(f,m);function f(){return h(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return _(f,[{key:"format",value:function(c,s){d.indexOf(c)>-1?s?this.domNode.setAttribute(c,s):this.domNode.removeAttribute(c):x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,c,s)}}],[{key:"create",value:function(c){var s=x(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,c);return typeof c=="string"&&s.setAttribute("src",this.sanitize(c)),s}},{key:"formats",value:function(c){return d.reduce(function(s,v){return c.hasAttribute(v)&&(s[v]=c.getAttribute(v)),s},{})}},{key:"match",value:function(c){return/\.(jpe?g|gif|png)$/.test(c)||/^data:image\/.+;base64/.test(c)}},{key:"sanitize",value:function(c){return(0,S.sanitize)(c,["http","https","data"])?c:"//:0"}},{key:"value",value:function(c){return c.getAttribute("src")}}]),f}(T.default.Embed);g.blotName="image",g.tagName="IMG",C.default=g},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0});var _=function(){function m(f,a){for(var c=0;c<a.length;c++){var s=a[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}return function(f,a,c){return a&&m(f.prototype,a),c&&m(f,c),f}}(),x=function m(f,a,c){f===null&&(f=Function.prototype);var s=Object.getOwnPropertyDescriptor(f,a);if(s===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:m(v,a,c)}else{if("value"in s)return s.value;var y=s.get;return y===void 0?void 0:y.call(c)}},w=k(4),T=k(27),S=b(T);function b(m){return m&&m.__esModule?m:{default:m}}function h(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function u(m,f){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:m}function l(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);m.prototype=Object.create(f&&f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(m,f):m.__proto__=f)}var d=["height","width"],g=function(m){l(f,m);function f(){return h(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return _(f,[{key:"format",value:function(c,s){d.indexOf(c)>-1?s?this.domNode.setAttribute(c,s):this.domNode.removeAttribute(c):x(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,c,s)}}],[{key:"create",value:function(c){var s=x(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,c);return s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen",!0),s.setAttribute("src",this.sanitize(c)),s}},{key:"formats",value:function(c){return d.reduce(function(s,v){return c.hasAttribute(v)&&(s[v]=c.getAttribute(v)),s},{})}},{key:"sanitize",value:function(c){return S.default.sanitize(c)}},{key:"value",value:function(c){return c.getAttribute("src")}}]),f}(w.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",C.default=g},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.FormulaBlot=void 0;var _=function(){function c(s,v){for(var y=0;y<v.length;y++){var A=v[y];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(s,A.key,A)}}return function(s,v,y){return v&&c(s.prototype,v),y&&c(s,y),s}}(),x=function c(s,v,y){s===null&&(s=Function.prototype);var A=Object.getOwnPropertyDescriptor(s,v);if(A===void 0){var D=Object.getPrototypeOf(s);return D===null?void 0:c(D,v,y)}else{if("value"in A)return A.value;var E=A.get;return E===void 0?void 0:E.call(y)}},w=k(35),T=l(w),S=k(5),b=l(S),h=k(9),u=l(h);function l(c){return c&&c.__esModule?c:{default:c}}function d(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function g(c,s){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:c}function m(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(c,s):c.__proto__=s)}var f=function(c){m(s,c);function s(){return d(this,s),g(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return _(s,null,[{key:"create",value:function(y){var A=x(s.__proto__||Object.getPrototypeOf(s),"create",this).call(this,y);return typeof y=="string"&&(window.katex.render(y,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",y)),A}},{key:"value",value:function(y){return y.getAttribute("data-value")}}]),s}(T.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var a=function(c){m(s,c),_(s,null,[{key:"register",value:function(){b.default.register(f,!0)}}]);function s(){d(this,s);var v=g(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return v}return s}(u.default);C.FormulaBlot=f,C.default=a},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.CodeToken=C.CodeBlock=void 0;var _=function(){function y(A,D){for(var E=0;E<D.length;E++){var I=D[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,D,E){return D&&y(A.prototype,D),E&&y(A,E),A}}(),x=function y(A,D,E){A===null&&(A=Function.prototype);var I=Object.getOwnPropertyDescriptor(A,D);if(I===void 0){var N=Object.getPrototypeOf(A);return N===null?void 0:y(N,D,E)}else{if("value"in I)return I.value;var R=I.get;return R===void 0?void 0:R.call(E)}},w=k(0),T=g(w),S=k(5),b=g(S),h=k(9),u=g(h),l=k(13),d=g(l);function g(y){return y&&y.__esModule?y:{default:y}}function m(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}function f(y,A){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:y}function a(y,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);y.prototype=Object.create(A&&A.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(y,A):y.__proto__=A)}var c=function(y){a(A,y);function A(){return m(this,A),f(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return _(A,[{key:"replaceWith",value:function(E){this.domNode.textContent=this.domNode.textContent,this.attach(),x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,E)}},{key:"highlight",value:function(E){var I=this.domNode.textContent;this.cachedText!==I&&((I.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=E(I),this.domNode.normalize(),this.attach()),this.cachedText=I)}}]),A}(d.default);c.className="ql-syntax";var s=new T.default.Attributor.Class("token","hljs",{scope:T.default.Scope.INLINE}),v=function(y){a(A,y),_(A,null,[{key:"register",value:function(){b.default.register(s,!0),b.default.register(c,!0)}}]);function A(D,E){m(this,A);var I=f(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,D,E));if(typeof I.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var N=null;return I.quill.on(b.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(N),N=setTimeout(function(){I.highlight(),N=null},I.options.interval)}),I.highlight(),I}return _(A,[{key:"highlight",value:function(){var E=this;if(!this.quill.selection.composing){this.quill.update(b.default.sources.USER);var I=this.quill.getSelection();this.quill.scroll.descendants(c).forEach(function(N){N.highlight(E.options.highlight)}),this.quill.update(b.default.sources.SILENT),I!=null&&this.quill.setSelection(I,b.default.sources.SILENT)}}}]),A}(u.default);v.DEFAULTS={highlight:function(){return window.hljs==null?null:function(y){var A=window.hljs.highlightAuto(y);return A.value}}(),interval:1e3},C.CodeBlock=c,C.CodeToken=s,C.default=v},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function($,C){$.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function($,C){$.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function($,C){$.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function($,C){$.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function($,C){$.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function($,C,k){Object.defineProperty(C,"__esModule",{value:!0}),C.default=C.BubbleTooltip=void 0;var _=function A(D,E,I){D===null&&(D=Function.prototype);var N=Object.getOwnPropertyDescriptor(D,E);if(N===void 0){var R=Object.getPrototypeOf(D);return R===null?void 0:A(R,E,I)}else{if("value"in N)return N.value;var L=N.get;return L===void 0?void 0:L.call(I)}},x=function(){function A(D,E){for(var I=0;I<E.length;I++){var N=E[I];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(D,N.key,N)}}return function(D,E,I){return E&&A(D.prototype,E),I&&A(D,I),D}}(),w=k(3),T=m(w),S=k(8),b=m(S),h=k(43),u=m(h),l=k(15),d=k(41),g=m(d);function m(A){return A&&A.__esModule?A:{default:A}}function f(A,D){if(!(A instanceof D))throw new TypeError("Cannot call a class as a function")}function a(A,D){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:A}function c(A,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);A.prototype=Object.create(D&&D.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(A,D):A.__proto__=D)}var s=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],v=function(A){c(D,A);function D(E,I){f(this,D),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=s);var N=a(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,E,I));return N.quill.container.classList.add("ql-bubble"),N}return x(D,[{key:"extendToolbar",value:function(I){this.tooltip=new y(this.quill,this.options.bounds),this.tooltip.root.appendChild(I.container),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),g.default)}}]),D}(u.default);v.DEFAULTS=(0,T.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(D){D?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var y=function(A){c(D,A);function D(E,I){f(this,D);var N=a(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,E,I));return N.quill.on(b.default.events.EDITOR_CHANGE,function(R,L,M,q){if(R===b.default.events.SELECTION_CHANGE)if(L!=null&&L.length>0&&q===b.default.sources.USER){N.show(),N.root.style.left="0px",N.root.style.width="",N.root.style.width=N.root.offsetWidth+"px";var V=N.quill.getLines(L.index,L.length);if(V.length===1)N.position(N.quill.getBounds(L));else{var X=V[V.length-1],ue=N.quill.getIndex(X),Z=Math.min(X.length()-1,L.index+L.length-ue),z=N.quill.getBounds(new l.Range(ue,Z));N.position(z)}}else document.activeElement!==N.textbox&&N.quill.hasFocus()&&N.hide()}),N}return x(D,[{key:"listen",value:function(){var I=this;_(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){I.root.classList.remove("ql-editing")}),this.quill.on(b.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!I.root.classList.contains("ql-hidden")){var N=I.quill.getSelection();N!=null&&I.position(I.quill.getBounds(N))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(I){var N=_(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"position",this).call(this,I),R=this.root.querySelector(".ql-tooltip-arrow");if(R.style.marginLeft="",N===0)return N;R.style.marginLeft=-1*N-R.offsetWidth/2+"px"}}]),D}(h.BaseTooltip);y.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),C.BubbleTooltip=y,C.default=v},function($,C,k){$.exports=k(63)}]).default})})(Au);const _u=Vs(Au.exports);var ku={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function($e,he){(function($,C){$e.exports=C()})(self,()=>(()=>{var $={582:(x,w,T)=>{T.d(w,{Z:()=>l});var S=T(81),b=T.n(S),h=T(645),u=T.n(h)()(b());u.push([x.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const l=u},645:x=>{x.exports=function(w){var T=[];return T.toString=function(){return this.map(function(S){var b="",h=S[5]!==void 0;return S[4]&&(b+="@supports (".concat(S[4],") {")),S[2]&&(b+="@media ".concat(S[2]," {")),h&&(b+="@layer".concat(S[5].length>0?" ".concat(S[5]):""," {")),b+=w(S),h&&(b+="}"),S[2]&&(b+="}"),S[4]&&(b+="}"),b}).join("")},T.i=function(S,b,h,u,l){typeof S=="string"&&(S=[[null,S,void 0]]);var d={};if(h)for(var g=0;g<this.length;g++){var m=this[g][0];m!=null&&(d[m]=!0)}for(var f=0;f<S.length;f++){var a=[].concat(S[f]);h&&d[a[0]]||(l!==void 0&&(a[5]===void 0||(a[1]="@layer".concat(a[5].length>0?" ".concat(a[5]):""," {").concat(a[1],"}")),a[5]=l),b&&(a[2]&&(a[1]="@media ".concat(a[2]," {").concat(a[1],"}")),a[2]=b),u&&(a[4]?(a[1]="@supports (".concat(a[4],") {").concat(a[1],"}"),a[4]=u):a[4]="".concat(u)),T.push(a))}},T}},81:x=>{x.exports=function(w){return w[1]}},465:(x,w,T)=>{x=T.nmd(x);var S="__lodash_hash_undefined__",b=9007199254740991,h="[object Arguments]",u="[object Boolean]",l="[object Date]",d="[object Function]",g="[object GeneratorFunction]",m="[object Map]",f="[object Number]",a="[object Object]",c="[object Promise]",s="[object RegExp]",v="[object Set]",y="[object String]",A="[object Symbol]",D="[object WeakMap]",E="[object ArrayBuffer]",I="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",L="[object Int8Array]",M="[object Int16Array]",q="[object Int32Array]",V="[object Uint8Array]",X="[object Uint8ClampedArray]",ue="[object Uint16Array]",Z="[object Uint32Array]",z=/\w*$/,j=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,J={};J[h]=J["[object Array]"]=J[E]=J[I]=J[u]=J[l]=J[N]=J[R]=J[L]=J[M]=J[q]=J[m]=J[f]=J[a]=J[s]=J[v]=J[y]=J[A]=J[V]=J[X]=J[ue]=J[Z]=!0,J["[object Error]"]=J[d]=J[D]=!1;var Q=typeof T.g=="object"&&T.g&&T.g.Object===Object&&T.g,W=typeof self=="object"&&self&&self.Object===Object&&self,U=Q||W||Function("return this")(),H=w&&!w.nodeType&&w,re=H&&x&&!x.nodeType&&x,ae=re&&re.exports===H;function ve(ee,fe){return ee.set(fe[0],fe[1]),ee}function Te(ee,fe){return ee.add(fe),ee}function De(ee,fe,Ae,xe){var et=-1,Ue=ee?ee.length:0;for(xe&&Ue&&(Ae=ee[++et]);++et<Ue;)Ae=fe(Ae,ee[et],et,ee);return Ae}function Pe(ee){var fe=!1;if(ee!=null&&typeof ee.toString!="function")try{fe=!!(ee+"")}catch{}return fe}function Ie(ee){var fe=-1,Ae=Array(ee.size);return ee.forEach(function(xe,et){Ae[++fe]=[et,xe]}),Ae}function G(ee,fe){return function(Ae){return ee(fe(Ae))}}function le(ee){var fe=-1,Ae=Array(ee.size);return ee.forEach(function(xe){Ae[++fe]=xe}),Ae}var oe,Y=Array.prototype,ie=Function.prototype,ge=Object.prototype,be=U["__core-js_shared__"],de=(oe=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||""))?"Symbol(src)_1."+oe:"",ke=ie.toString,Re=ge.hasOwnProperty,je=ge.toString,nt=RegExp("^"+ke.call(Re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=ae?U.Buffer:void 0,Ge=U.Symbol,Ye=U.Uint8Array,_e=G(Object.getPrototypeOf,Object),Qe=Object.create,zt=ge.propertyIsEnumerable,bn=Y.splice,Kt=Object.getOwnPropertySymbols,Tn=lt?lt.isBuffer:void 0,en=G(Object.keys,Object),Ht=wn(U,"DataView"),Dt=wn(U,"Map"),tn=wn(U,"Promise"),kt=wn(U,"Set"),Xt=wn(U,"WeakMap"),nn=wn(Object,"create"),Fr=Rn(Ht),rn=Rn(Dt),Pn=Rn(tn),sr=Rn(kt),$r=Rn(Xt),ar=Ge?Ge.prototype:void 0,ri=ar?ar.valueOf:void 0;function gn(ee){var fe=-1,Ae=ee?ee.length:0;for(this.clear();++fe<Ae;){var xe=ee[fe];this.set(xe[0],xe[1])}}function Zt(ee){var fe=-1,Ae=ee?ee.length:0;for(this.clear();++fe<Ae;){var xe=ee[fe];this.set(xe[0],xe[1])}}function on(ee){var fe=-1,Ae=ee?ee.length:0;for(this.clear();++fe<Ae;){var xe=ee[fe];this.set(xe[0],xe[1])}}function Hn(ee){this.__data__=new Zt(ee)}function _n(ee,fe,Ae){var xe=ee[fe];Re.call(ee,fe)&&te(xe,Ae)&&(Ae!==void 0||fe in ee)||(ee[fe]=Ae)}function ii(ee,fe){for(var Ae=ee.length;Ae--;)if(te(ee[Ae][0],fe))return Ae;return-1}function En(ee,fe,Ae,xe,et,Ue,ut){var He;if(xe&&(He=Ue?xe(ee,et,Ue,ut):xe(ee)),He!==void 0)return He;if(!dt(ee))return ee;var mt=se(ee);if(mt){if(He=function(Je){var st=Je.length,Fe=Je.constructor(st);return st&&typeof Je[0]=="string"&&Re.call(Je,"index")&&(Fe.index=Je.index,Fe.input=Je.input),Fe}(ee),!fe)return function(Je,st){var Fe=-1,Xe=Je.length;for(st||(st=Array(Xe));++Fe<Xe;)st[Fe]=Je[Fe];return st}(ee,He)}else{var pt=ce(ee),Rt=pt==d||pt==g;if(Se(ee))return function(Je,st){if(st)return Je.slice();var Fe=new Je.constructor(Je.length);return Je.copy(Fe),Fe}(ee,fe);if(pt==a||pt==h||Rt&&!Ue){if(Pe(ee))return Ue?ee:{};if(He=function(Je){return typeof Je.constructor!="function"||ur(Je)?{}:dt(st=_e(Je))?Qe(st):{};var st}(Rt?{}:ee),!fe)return function(Je,st){return Mi(Je,oi(Je),st)}(ee,function(Je,st){return Je&&Mi(st,ot(st),Je)}(He,ee))}else{if(!J[pt])return Ue?ee:{};He=function(Je,st,Fe,Xe){var rt,Nt=Je.constructor;switch(st){case E:return lr(Je);case u:case l:return new Nt(+Je);case I:return function(tt,Et){var vt=Et?lr(tt.buffer):tt.buffer;return new tt.constructor(vt,tt.byteOffset,tt.byteLength)}(Je,Xe);case N:case R:case L:case M:case q:case V:case X:case ue:case Z:return function(tt,Et){var vt=Et?lr(tt.buffer):tt.buffer;return new tt.constructor(vt,tt.byteOffset,tt.length)}(Je,Xe);case m:return function(tt,Et,vt){return De(Et?vt(Ie(tt),!0):Ie(tt),ve,new tt.constructor)}(Je,Xe,Fe);case f:case y:return new Nt(Je);case s:return function(tt){var Et=new tt.constructor(tt.source,z.exec(tt));return Et.lastIndex=tt.lastIndex,Et}(Je);case v:return function(tt,Et,vt){return De(Et?vt(le(tt),!0):le(tt),Te,new tt.constructor)}(Je,Xe,Fe);case A:return rt=Je,ri?Object(ri.call(rt)):{}}}(ee,pt,En,fe)}}ut||(ut=new Hn);var Ct=ut.get(ee);if(Ct)return Ct;if(ut.set(ee,He),!mt)var an=Ae?function(Je){return function(st,Fe,Xe){var rt=Fe(st);return se(st)?rt:function(Nt,tt){for(var Et=-1,vt=tt.length,xt=Nt.length;++Et<vt;)Nt[xt+Et]=tt[Et];return Nt}(rt,Xe(st))}(Je,ot,oi)}(ee):ot(ee);return function(Je,st){for(var Fe=-1,Xe=Je?Je.length:0;++Fe<Xe&&st(Je[Fe],Fe)!==!1;);}(an||ee,function(Je,st){an&&(Je=ee[st=Je]),_n(He,st,En(Je,fe,Ae,xe,st,ee,ut))}),He}function lr(ee){var fe=new ee.constructor(ee.byteLength);return new Ye(fe).set(new Ye(ee)),fe}function Mi(ee,fe,Ae,xe){Ae||(Ae={});for(var et=-1,Ue=fe.length;++et<Ue;){var ut=fe[et],He=xe?xe(Ae[ut],ee[ut],ut,Ae,ee):void 0;_n(Ae,ut,He===void 0?ee[ut]:He)}return Ae}function sn(ee,fe){var Ae,xe,et=ee.__data__;return((xe=typeof(Ae=fe))=="string"||xe=="number"||xe=="symbol"||xe=="boolean"?Ae!=="__proto__":Ae===null)?et[typeof fe=="string"?"string":"hash"]:et.map}function wn(ee,fe){var Ae=function(xe,et){return xe==null?void 0:xe[et]}(ee,fe);return function(xe){return!(!dt(xe)||(et=xe,de&&de in et))&&(Ce(xe)||Pe(xe)?nt:j).test(Rn(xe));var et}(Ae)?Ae:void 0}gn.prototype.clear=function(){this.__data__=nn?nn(null):{}},gn.prototype.delete=function(ee){return this.has(ee)&&delete this.__data__[ee]},gn.prototype.get=function(ee){var fe=this.__data__;if(nn){var Ae=fe[ee];return Ae===S?void 0:Ae}return Re.call(fe,ee)?fe[ee]:void 0},gn.prototype.has=function(ee){var fe=this.__data__;return nn?fe[ee]!==void 0:Re.call(fe,ee)},gn.prototype.set=function(ee,fe){return this.__data__[ee]=nn&&fe===void 0?S:fe,this},Zt.prototype.clear=function(){this.__data__=[]},Zt.prototype.delete=function(ee){var fe=this.__data__,Ae=ii(fe,ee);return!(Ae<0||(Ae==fe.length-1?fe.pop():bn.call(fe,Ae,1),0))},Zt.prototype.get=function(ee){var fe=this.__data__,Ae=ii(fe,ee);return Ae<0?void 0:fe[Ae][1]},Zt.prototype.has=function(ee){return ii(this.__data__,ee)>-1},Zt.prototype.set=function(ee,fe){var Ae=this.__data__,xe=ii(Ae,ee);return xe<0?Ae.push([ee,fe]):Ae[xe][1]=fe,this},on.prototype.clear=function(){this.__data__={hash:new gn,map:new(Dt||Zt),string:new gn}},on.prototype.delete=function(ee){return sn(this,ee).delete(ee)},on.prototype.get=function(ee){return sn(this,ee).get(ee)},on.prototype.has=function(ee){return sn(this,ee).has(ee)},on.prototype.set=function(ee,fe){return sn(this,ee).set(ee,fe),this},Hn.prototype.clear=function(){this.__data__=new Zt},Hn.prototype.delete=function(ee){return this.__data__.delete(ee)},Hn.prototype.get=function(ee){return this.__data__.get(ee)},Hn.prototype.has=function(ee){return this.__data__.has(ee)},Hn.prototype.set=function(ee,fe){var Ae=this.__data__;if(Ae instanceof Zt){var xe=Ae.__data__;if(!Dt||xe.length<199)return xe.push([ee,fe]),this;Ae=this.__data__=new on(xe)}return Ae.set(ee,fe),this};var oi=Kt?G(Kt,Object):function(){return[]},ce=function(ee){return je.call(ee)};function Bi(ee,fe){return!!(fe=fe==null?b:fe)&&(typeof ee=="number"||F.test(ee))&&ee>-1&&ee%1==0&&ee<fe}function ur(ee){var fe=ee&&ee.constructor;return ee===(typeof fe=="function"&&fe.prototype||ge)}function Rn(ee){if(ee!=null){try{return ke.call(ee)}catch{}try{return ee+""}catch{}}return""}function te(ee,fe){return ee===fe||ee!=ee&&fe!=fe}(Ht&&ce(new Ht(new ArrayBuffer(1)))!=I||Dt&&ce(new Dt)!=m||tn&&ce(tn.resolve())!=c||kt&&ce(new kt)!=v||Xt&&ce(new Xt)!=D)&&(ce=function(ee){var fe=je.call(ee),Ae=fe==a?ee.constructor:void 0,xe=Ae?Rn(Ae):void 0;if(xe)switch(xe){case Fr:return I;case rn:return m;case Pn:return c;case sr:return v;case $r:return D}return fe});var se=Array.isArray;function ye(ee){return ee!=null&&function(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=b}(ee.length)&&!Ce(ee)}var Se=Tn||function(){return!1};function Ce(ee){var fe=dt(ee)?je.call(ee):"";return fe==d||fe==g}function dt(ee){var fe=typeof ee;return!!ee&&(fe=="object"||fe=="function")}function ot(ee){return ye(ee)?function(fe,Ae){var xe=se(fe)||function(He){return function(mt){return function(pt){return!!pt&&typeof pt=="object"}(mt)&&ye(mt)}(He)&&Re.call(He,"callee")&&(!zt.call(He,"callee")||je.call(He)==h)}(fe)?function(He,mt){for(var pt=-1,Rt=Array(He);++pt<He;)Rt[pt]=mt(pt);return Rt}(fe.length,String):[],et=xe.length,Ue=!!et;for(var ut in fe)!Ae&&!Re.call(fe,ut)||Ue&&(ut=="length"||Bi(ut,et))||xe.push(ut);return xe}(ee):function(fe){if(!ur(fe))return en(fe);var Ae=[];for(var xe in Object(fe))Re.call(fe,xe)&&xe!="constructor"&&Ae.push(xe);return Ae}(ee)}x.exports=function(ee){return En(ee,!0,!0)}},307:(x,w,T)=>{x=T.nmd(x);var S="__lodash_hash_undefined__",b=9007199254740991,h="[object Arguments]",u="[object Array]",l="[object Boolean]",d="[object Date]",g="[object Error]",m="[object Function]",f="[object Map]",a="[object Number]",c="[object Object]",s="[object Promise]",v="[object RegExp]",y="[object Set]",A="[object String]",D="[object WeakMap]",E="[object ArrayBuffer]",I="[object DataView]",N=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[h]=L[u]=L[E]=L[l]=L[I]=L[d]=L[g]=L[m]=L[f]=L[a]=L[c]=L[v]=L[y]=L[A]=L[D]=!1;var M=typeof T.g=="object"&&T.g&&T.g.Object===Object&&T.g,q=typeof self=="object"&&self&&self.Object===Object&&self,V=M||q||Function("return this")(),X=w&&!w.nodeType&&w,ue=X&&x&&!x.nodeType&&x,Z=ue&&ue.exports===X,z=Z&&M.process,j=function(){try{return z&&z.binding&&z.binding("util")}catch{}}(),F=j&&j.isTypedArray;function J(se,ye){for(var Se=-1,Ce=se==null?0:se.length;++Se<Ce;)if(ye(se[Se],Se,se))return!0;return!1}function Q(se){var ye=-1,Se=Array(se.size);return se.forEach(function(Ce,dt){Se[++ye]=[dt,Ce]}),Se}function W(se){var ye=-1,Se=Array(se.size);return se.forEach(function(Ce){Se[++ye]=Ce}),Se}var U,H,re,ae=Array.prototype,ve=Function.prototype,Te=Object.prototype,De=V["__core-js_shared__"],Pe=ve.toString,Ie=Te.hasOwnProperty,G=(U=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",le=Te.toString,oe=RegExp("^"+Pe.call(Ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=Z?V.Buffer:void 0,ie=V.Symbol,ge=V.Uint8Array,be=Te.propertyIsEnumerable,de=ae.splice,ke=ie?ie.toStringTag:void 0,Re=Object.getOwnPropertySymbols,je=Y?Y.isBuffer:void 0,nt=(H=Object.keys,re=Object,function(se){return H(re(se))}),lt=on(V,"DataView"),Ge=on(V,"Map"),Ye=on(V,"Promise"),_e=on(V,"Set"),Qe=on(V,"WeakMap"),zt=on(Object,"create"),bn=En(lt),Kt=En(Ge),Tn=En(Ye),en=En(_e),Ht=En(Qe),Dt=ie?ie.prototype:void 0,tn=Dt?Dt.valueOf:void 0;function kt(se){var ye=-1,Se=se==null?0:se.length;for(this.clear();++ye<Se;){var Ce=se[ye];this.set(Ce[0],Ce[1])}}function Xt(se){var ye=-1,Se=se==null?0:se.length;for(this.clear();++ye<Se;){var Ce=se[ye];this.set(Ce[0],Ce[1])}}function nn(se){var ye=-1,Se=se==null?0:se.length;for(this.clear();++ye<Se;){var Ce=se[ye];this.set(Ce[0],Ce[1])}}function Fr(se){var ye=-1,Se=se==null?0:se.length;for(this.__data__=new nn;++ye<Se;)this.add(se[ye])}function rn(se){var ye=this.__data__=new Xt(se);this.size=ye.size}function Pn(se,ye){for(var Se=se.length;Se--;)if(lr(se[Se][0],ye))return Se;return-1}function sr(se){return se==null?se===void 0?"[object Undefined]":"[object Null]":ke&&ke in Object(se)?function(ye){var Se=Ie.call(ye,ke),Ce=ye[ke];try{ye[ke]=void 0;var dt=!0}catch{}var ot=le.call(ye);return dt&&(Se?ye[ke]=Ce:delete ye[ke]),ot}(se):function(ye){return le.call(ye)}(se)}function $r(se){return ur(se)&&sr(se)==h}function ar(se,ye,Se,Ce,dt){return se===ye||(se==null||ye==null||!ur(se)&&!ur(ye)?se!=se&&ye!=ye:function(ot,ee,fe,Ae,xe,et){var Ue=sn(ot),ut=sn(ee),He=Ue?u:_n(ot),mt=ut?u:_n(ee),pt=(He=He==h?c:He)==c,Rt=(mt=mt==h?c:mt)==c,Ct=He==mt;if(Ct&&wn(ot)){if(!wn(ee))return!1;Ue=!0,pt=!1}if(Ct&&!pt)return et||(et=new rn),Ue||Rn(ot)?ri(ot,ee,fe,Ae,xe,et):function(Xe,rt,Nt,tt,Et,vt,xt){switch(Nt){case I:if(Xe.byteLength!=rt.byteLength||Xe.byteOffset!=rt.byteOffset)return!1;Xe=Xe.buffer,rt=rt.buffer;case E:return!(Xe.byteLength!=rt.byteLength||!vt(new ge(Xe),new ge(rt)));case l:case d:case a:return lr(+Xe,+rt);case g:return Xe.name==rt.name&&Xe.message==rt.message;case v:case A:return Xe==rt+"";case f:var jt=Q;case y:var Dn=1&tt;if(jt||(jt=W),Xe.size!=rt.size&&!Dn)return!1;var Jt=xt.get(Xe);if(Jt)return Jt==rt;tt|=2,xt.set(Xe,rt);var Lt=ri(jt(Xe),jt(rt),tt,Et,vt,xt);return xt.delete(Xe),Lt;case"[object Symbol]":if(tn)return tn.call(Xe)==tn.call(rt)}return!1}(ot,ee,He,fe,Ae,xe,et);if(!(1&fe)){var an=pt&&Ie.call(ot,"__wrapped__"),Je=Rt&&Ie.call(ee,"__wrapped__");if(an||Je){var st=an?ot.value():ot,Fe=Je?ee.value():ee;return et||(et=new rn),xe(st,Fe,fe,Ae,et)}}return!!Ct&&(et||(et=new rn),function(Xe,rt,Nt,tt,Et,vt){var xt=1&Nt,jt=gn(Xe),Dn=jt.length;if(Dn!=gn(rt).length&&!xt)return!1;for(var Jt=Dn;Jt--;){var Lt=jt[Jt];if(!(xt?Lt in rt:Ie.call(rt,Lt)))return!1}var Vr=vt.get(Xe);if(Vr&&vt.get(rt))return Vr==rt;var On=!0;vt.set(Xe,rt),vt.set(rt,Xe);for(var zr=xt;++Jt<Dn;){var cr=Xe[Lt=jt[Jt]],ln=rt[Lt];if(tt)var Sn=xt?tt(ln,cr,Lt,rt,Xe,vt):tt(cr,ln,Lt,Xe,rt,vt);if(!(Sn===void 0?cr===ln||Et(cr,ln,Nt,tt,vt):Sn)){On=!1;break}zr||(zr=Lt=="constructor")}if(On&&!zr){var un=Xe.constructor,cn=rt.constructor;un==cn||!("constructor"in Xe)||!("constructor"in rt)||typeof un=="function"&&un instanceof un&&typeof cn=="function"&&cn instanceof cn||(On=!1)}return vt.delete(Xe),vt.delete(rt),On}(ot,ee,fe,Ae,xe,et))}(se,ye,Se,Ce,ar,dt))}function ri(se,ye,Se,Ce,dt,ot){var ee=1&Se,fe=se.length,Ae=ye.length;if(fe!=Ae&&!(ee&&Ae>fe))return!1;var xe=ot.get(se);if(xe&&ot.get(ye))return xe==ye;var et=-1,Ue=!0,ut=2&Se?new Fr:void 0;for(ot.set(se,ye),ot.set(ye,se);++et<fe;){var He=se[et],mt=ye[et];if(Ce)var pt=ee?Ce(mt,He,et,ye,se,ot):Ce(He,mt,et,se,ye,ot);if(pt!==void 0){if(pt)continue;Ue=!1;break}if(ut){if(!J(ye,function(Rt,Ct){if(an=Ct,!ut.has(an)&&(He===Rt||dt(He,Rt,Se,Ce,ot)))return ut.push(Ct);var an})){Ue=!1;break}}else if(He!==mt&&!dt(He,mt,Se,Ce,ot)){Ue=!1;break}}return ot.delete(se),ot.delete(ye),Ue}function gn(se){return function(ye,Se,Ce){var dt=Se(ye);return sn(ye)?dt:function(ot,ee){for(var fe=-1,Ae=ee.length,xe=ot.length;++fe<Ae;)ot[xe+fe]=ee[fe];return ot}(dt,Ce(ye))}(se,te,Hn)}function Zt(se,ye){var Se,Ce,dt=se.__data__;return((Ce=typeof(Se=ye))=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?Se!=="__proto__":Se===null)?dt[typeof ye=="string"?"string":"hash"]:dt.map}function on(se,ye){var Se=function(Ce,dt){return Ce==null?void 0:Ce[dt]}(se,ye);return function(Ce){return!(!Bi(Ce)||function(dt){return!!G&&G in dt}(Ce))&&(oi(Ce)?oe:N).test(En(Ce))}(Se)?Se:void 0}kt.prototype.clear=function(){this.__data__=zt?zt(null):{},this.size=0},kt.prototype.delete=function(se){var ye=this.has(se)&&delete this.__data__[se];return this.size-=ye?1:0,ye},kt.prototype.get=function(se){var ye=this.__data__;if(zt){var Se=ye[se];return Se===S?void 0:Se}return Ie.call(ye,se)?ye[se]:void 0},kt.prototype.has=function(se){var ye=this.__data__;return zt?ye[se]!==void 0:Ie.call(ye,se)},kt.prototype.set=function(se,ye){var Se=this.__data__;return this.size+=this.has(se)?0:1,Se[se]=zt&&ye===void 0?S:ye,this},Xt.prototype.clear=function(){this.__data__=[],this.size=0},Xt.prototype.delete=function(se){var ye=this.__data__,Se=Pn(ye,se);return!(Se<0||(Se==ye.length-1?ye.pop():de.call(ye,Se,1),--this.size,0))},Xt.prototype.get=function(se){var ye=this.__data__,Se=Pn(ye,se);return Se<0?void 0:ye[Se][1]},Xt.prototype.has=function(se){return Pn(this.__data__,se)>-1},Xt.prototype.set=function(se,ye){var Se=this.__data__,Ce=Pn(Se,se);return Ce<0?(++this.size,Se.push([se,ye])):Se[Ce][1]=ye,this},nn.prototype.clear=function(){this.size=0,this.__data__={hash:new kt,map:new(Ge||Xt),string:new kt}},nn.prototype.delete=function(se){var ye=Zt(this,se).delete(se);return this.size-=ye?1:0,ye},nn.prototype.get=function(se){return Zt(this,se).get(se)},nn.prototype.has=function(se){return Zt(this,se).has(se)},nn.prototype.set=function(se,ye){var Se=Zt(this,se),Ce=Se.size;return Se.set(se,ye),this.size+=Se.size==Ce?0:1,this},Fr.prototype.add=Fr.prototype.push=function(se){return this.__data__.set(se,S),this},Fr.prototype.has=function(se){return this.__data__.has(se)},rn.prototype.clear=function(){this.__data__=new Xt,this.size=0},rn.prototype.delete=function(se){var ye=this.__data__,Se=ye.delete(se);return this.size=ye.size,Se},rn.prototype.get=function(se){return this.__data__.get(se)},rn.prototype.has=function(se){return this.__data__.has(se)},rn.prototype.set=function(se,ye){var Se=this.__data__;if(Se instanceof Xt){var Ce=Se.__data__;if(!Ge||Ce.length<199)return Ce.push([se,ye]),this.size=++Se.size,this;Se=this.__data__=new nn(Ce)}return Se.set(se,ye),this.size=Se.size,this};var Hn=Re?function(se){return se==null?[]:(se=Object(se),function(ye,Se){for(var Ce=-1,dt=ye==null?0:ye.length,ot=0,ee=[];++Ce<dt;){var fe=ye[Ce];Ae=fe,be.call(se,Ae)&&(ee[ot++]=fe)}var Ae;return ee}(Re(se)))}:function(){return[]},_n=sr;function ii(se,ye){return!!(ye=ye==null?b:ye)&&(typeof se=="number"||R.test(se))&&se>-1&&se%1==0&&se<ye}function En(se){if(se!=null){try{return Pe.call(se)}catch{}try{return se+""}catch{}}return""}function lr(se,ye){return se===ye||se!=se&&ye!=ye}(lt&&_n(new lt(new ArrayBuffer(1)))!=I||Ge&&_n(new Ge)!=f||Ye&&_n(Ye.resolve())!=s||_e&&_n(new _e)!=y||Qe&&_n(new Qe)!=D)&&(_n=function(se){var ye=sr(se),Se=ye==c?se.constructor:void 0,Ce=Se?En(Se):"";if(Ce)switch(Ce){case bn:return I;case Kt:return f;case Tn:return s;case en:return y;case Ht:return D}return ye});var Mi=$r(function(){return arguments}())?$r:function(se){return ur(se)&&Ie.call(se,"callee")&&!be.call(se,"callee")},sn=Array.isArray,wn=je||function(){return!1};function oi(se){if(!Bi(se))return!1;var ye=sr(se);return ye==m||ye=="[object GeneratorFunction]"||ye=="[object AsyncFunction]"||ye=="[object Proxy]"}function ce(se){return typeof se=="number"&&se>-1&&se%1==0&&se<=b}function Bi(se){var ye=typeof se;return se!=null&&(ye=="object"||ye=="function")}function ur(se){return se!=null&&typeof se=="object"}var Rn=F?function(se){return function(ye){return se(ye)}}(F):function(se){return ur(se)&&ce(se.length)&&!!L[sr(se)]};function te(se){return(ye=se)!=null&&ce(ye.length)&&!oi(ye)?function(Se,Ce){var dt=sn(Se),ot=!dt&&Mi(Se),ee=!dt&&!ot&&wn(Se),fe=!dt&&!ot&&!ee&&Rn(Se),Ae=dt||ot||ee||fe,xe=Ae?function(ut,He){for(var mt=-1,pt=Array(ut);++mt<ut;)pt[mt]=He(mt);return pt}(Se.length,String):[],et=xe.length;for(var Ue in Se)!Ce&&!Ie.call(Se,Ue)||Ae&&(Ue=="length"||ee&&(Ue=="offset"||Ue=="parent")||fe&&(Ue=="buffer"||Ue=="byteLength"||Ue=="byteOffset")||ii(Ue,et))||xe.push(Ue);return xe}(se):function(Se){if(dt=(Ce=Se)&&Ce.constructor,Ce!==(typeof dt=="function"&&dt.prototype||Te))return nt(Se);var Ce,dt,ot=[];for(var ee in Object(Se))Ie.call(Se,ee)&&ee!="constructor"&&ot.push(ee);return ot}(se);var ye}x.exports=function(se,ye){return ar(se,ye)}},210:function(x,w,T){var S=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(w,"__esModule",{value:!0});var b,h=S(T(465)),u=S(T(307));(function(l){l.compose=function(d,g,m){d===void 0&&(d={}),g===void 0&&(g={}),typeof d!="object"&&(d={}),typeof g!="object"&&(g={});var f=h.default(g);for(var a in m||(f=Object.keys(f).reduce(function(c,s){return f[s]!=null&&(c[s]=f[s]),c},{})),d)d[a]!==void 0&&g[a]===void 0&&(f[a]=d[a]);return Object.keys(f).length>0?f:void 0},l.diff=function(d,g){d===void 0&&(d={}),g===void 0&&(g={}),typeof d!="object"&&(d={}),typeof g!="object"&&(g={});var m=Object.keys(d).concat(Object.keys(g)).reduce(function(f,a){return u.default(d[a],g[a])||(f[a]=g[a]===void 0?null:g[a]),f},{});return Object.keys(m).length>0?m:void 0},l.invert=function(d,g){d===void 0&&(d={}),g===void 0&&(g={}),d=d||{};var m=Object.keys(g).reduce(function(f,a){return g[a]!==d[a]&&d[a]!==void 0&&(f[a]=g[a]),f},{});return Object.keys(d).reduce(function(f,a){return d[a]!==g[a]&&g[a]===void 0&&(f[a]=null),f},m)},l.transform=function(d,g,m){if(m===void 0&&(m=!1),typeof d!="object")return g;if(typeof g=="object"){if(!m)return g;var f=Object.keys(g).reduce(function(a,c){return d[c]===void 0&&(a[c]=g[c]),a},{});return Object.keys(f).length>0?f:void 0}}})(b||(b={})),w.default=b},895:function(x,w,T){var S=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}},b=S(T(103)),h=S(T(465)),u=S(T(307)),l=S(T(210)),d=S(T(430)),g=String.fromCharCode(0),m=function(){function f(a){Array.isArray(a)?this.ops=a:a!=null&&Array.isArray(a.ops)?this.ops=a.ops:this.ops=[]}return f.prototype.insert=function(a,c){var s={};return typeof a=="string"&&a.length===0?this:(s.insert=a,c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(s.attributes=c),this.push(s))},f.prototype.delete=function(a){return a<=0?this:this.push({delete:a})},f.prototype.retain=function(a,c){if(a<=0)return this;var s={retain:a};return c!=null&&typeof c=="object"&&Object.keys(c).length>0&&(s.attributes=c),this.push(s)},f.prototype.push=function(a){var c=this.ops.length,s=this.ops[c-1];if(a=h.default(a),typeof s=="object"){if(typeof a.delete=="number"&&typeof s.delete=="number")return this.ops[c-1]={delete:s.delete+a.delete},this;if(typeof s.delete=="number"&&a.insert!=null&&(c-=1,typeof(s=this.ops[c-1])!="object"))return this.ops.unshift(a),this;if(u.default(a.attributes,s.attributes)){if(typeof a.insert=="string"&&typeof s.insert=="string")return this.ops[c-1]={insert:s.insert+a.insert},typeof a.attributes=="object"&&(this.ops[c-1].attributes=a.attributes),this;if(typeof a.retain=="number"&&typeof s.retain=="number")return this.ops[c-1]={retain:s.retain+a.retain},typeof a.attributes=="object"&&(this.ops[c-1].attributes=a.attributes),this}}return c===this.ops.length?this.ops.push(a):this.ops.splice(c,0,a),this},f.prototype.chop=function(){var a=this.ops[this.ops.length-1];return a&&a.retain&&!a.attributes&&this.ops.pop(),this},f.prototype.filter=function(a){return this.ops.filter(a)},f.prototype.forEach=function(a){this.ops.forEach(a)},f.prototype.map=function(a){return this.ops.map(a)},f.prototype.partition=function(a){var c=[],s=[];return this.forEach(function(v){(a(v)?c:s).push(v)}),[c,s]},f.prototype.reduce=function(a,c){return this.ops.reduce(a,c)},f.prototype.changeLength=function(){return this.reduce(function(a,c){return c.insert?a+d.default.length(c):c.delete?a-c.delete:a},0)},f.prototype.length=function(){return this.reduce(function(a,c){return a+d.default.length(c)},0)},f.prototype.slice=function(a,c){a===void 0&&(a=0),c===void 0&&(c=1/0);for(var s=[],v=d.default.iterator(this.ops),y=0;y<c&&v.hasNext();){var A=void 0;y<a?A=v.next(a-y):(A=v.next(c-y),s.push(A)),y+=d.default.length(A)}return new f(s)},f.prototype.compose=function(a){var c=d.default.iterator(this.ops),s=d.default.iterator(a.ops),v=[],y=s.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var A=y.retain;c.peekType()==="insert"&&c.peekLength()<=A;)A-=c.peekLength(),v.push(c.next());y.retain-A>0&&s.next(y.retain-A)}for(var D=new f(v);c.hasNext()||s.hasNext();)if(s.peekType()==="insert")D.push(s.next());else if(c.peekType()==="delete")D.push(c.next());else{var E=Math.min(c.peekLength(),s.peekLength()),I=c.next(E),N=s.next(E);if(typeof N.retain=="number"){var R={};typeof I.retain=="number"?R.retain=E:R.insert=I.insert;var L=l.default.compose(I.attributes,N.attributes,typeof I.retain=="number");if(L&&(R.attributes=L),D.push(R),!s.hasNext()&&u.default(D.ops[D.ops.length-1],R)){var M=new f(c.rest());return D.concat(M).chop()}}else typeof N.delete=="number"&&typeof I.retain=="number"&&D.push(N)}return D.chop()},f.prototype.concat=function(a){var c=new f(this.ops.slice());return a.ops.length>0&&(c.push(a.ops[0]),c.ops=c.ops.concat(a.ops.slice(1))),c},f.prototype.diff=function(a,c){if(this.ops===a.ops)return new f;var s=[this,a].map(function(E){return E.map(function(I){if(I.insert!=null)return typeof I.insert=="string"?I.insert:g;throw new Error("diff() called "+(E===a?"on":"with")+" non-document")}).join("")}),v=new f,y=b.default(s[0],s[1],c),A=d.default.iterator(this.ops),D=d.default.iterator(a.ops);return y.forEach(function(E){for(var I=E[1].length;I>0;){var N=0;switch(E[0]){case b.default.INSERT:N=Math.min(D.peekLength(),I),v.push(D.next(N));break;case b.default.DELETE:N=Math.min(I,A.peekLength()),A.next(N),v.delete(N);break;case b.default.EQUAL:N=Math.min(A.peekLength(),D.peekLength(),I);var R=A.next(N),L=D.next(N);u.default(R.insert,L.insert)?v.retain(N,l.default.diff(R.attributes,L.attributes)):v.push(L).delete(N)}I-=N}}),v.chop()},f.prototype.eachLine=function(a,c){c===void 0&&(c=`
`);for(var s=d.default.iterator(this.ops),v=new f,y=0;s.hasNext();){if(s.peekType()!=="insert")return;var A=s.peek(),D=d.default.length(A)-s.peekLength(),E=typeof A.insert=="string"?A.insert.indexOf(c,D)-D:-1;if(E<0)v.push(s.next());else if(E>0)v.push(s.next(E));else{if(a(v,s.next(1).attributes||{},y)===!1)return;y+=1,v=new f}}v.length()>0&&a(v,{},y)},f.prototype.invert=function(a){var c=new f;return this.reduce(function(s,v){if(v.insert)c.delete(d.default.length(v));else{if(v.retain&&v.attributes==null)return c.retain(v.retain),s+v.retain;if(v.delete||v.retain&&v.attributes){var y=v.delete||v.retain;return a.slice(s,s+y).forEach(function(A){v.delete?c.push(A):v.retain&&v.attributes&&c.retain(d.default.length(A),l.default.invert(v.attributes,A.attributes))}),s+y}}return s},0),c.chop()},f.prototype.transform=function(a,c){if(c===void 0&&(c=!1),c=!!c,typeof a=="number")return this.transformPosition(a,c);for(var s=a,v=d.default.iterator(this.ops),y=d.default.iterator(s.ops),A=new f;v.hasNext()||y.hasNext();)if(v.peekType()!=="insert"||!c&&y.peekType()==="insert")if(y.peekType()==="insert")A.push(y.next());else{var D=Math.min(v.peekLength(),y.peekLength()),E=v.next(D),I=y.next(D);if(E.delete)continue;I.delete?A.push(I):A.retain(D,l.default.transform(E.attributes,I.attributes,c))}else A.retain(d.default.length(v.next()));return A.chop()},f.prototype.transformPosition=function(a,c){c===void 0&&(c=!1),c=!!c;for(var s=d.default.iterator(this.ops),v=0;s.hasNext()&&v<=a;){var y=s.peekLength(),A=s.peekType();s.next(),A!=="delete"?(A==="insert"&&(v<a||!c)&&(a+=y),v+=y):a-=Math.min(y,a-v)}return a},f.Op=d.default,f.AttributeMap=l.default,f}();x.exports=m},977:function(x,w,T){var S=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(w,"__esModule",{value:!0});var b=S(T(430)),h=function(){function u(l){this.ops=l,this.index=0,this.offset=0}return u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(l){l||(l=1/0);var d=this.ops[this.index];if(d){var g=this.offset,m=b.default.length(d);if(l>=m-g?(l=m-g,this.index+=1,this.offset=0):this.offset+=l,typeof d.delete=="number")return{delete:l};var f={};return d.attributes&&(f.attributes=d.attributes),typeof d.retain=="number"?f.retain=l:typeof d.insert=="string"?f.insert=d.insert.substr(g,l):f.insert=d.insert,f}return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?b.default.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var l=this.offset,d=this.index,g=this.next(),m=this.ops.slice(this.index);return this.offset=l,this.index=d,[g].concat(m)}return[]},u}();w.default=h},430:function(x,w,T){var S=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(w,"__esModule",{value:!0});var b,h=S(T(977));(function(u){u.iterator=function(l){return new h.default(l)},u.length=function(l){return typeof l.delete=="number"?l.delete:typeof l.retain=="number"?l.retain:typeof l.insert=="string"?l.insert.length:1}})(b||(b={})),w.default=b},103:x=>{var w=-1;function T(c,s,v,y){if(c===s)return c?[[0,c]]:[];if(v!=null){var A=function(R,L,M){var q=typeof M=="number"?{index:M,length:0}:M.oldRange,V=typeof M=="number"?null:M.newRange,X=R.length,ue=L.length;if(q.length===0&&(V===null||V.length===0)){var Z=q.index,z=R.slice(0,Z),j=R.slice(Z),F=V?V.index:null,J=Z+ue-X;if((F===null||F===J)&&!(J<0||J>ue)){var Q=L.slice(0,J);if((H=L.slice(J))===j){var W=Math.min(Z,J);if((ae=z.slice(0,W))===(Te=Q.slice(0,W)))return f(ae,z.slice(W),Q.slice(W),j)}}if(F===null||F===Z){var U=Z,H=(Q=L.slice(0,U),L.slice(U));if(Q===z){var re=Math.min(X-U,ue-U);if((ve=j.slice(j.length-re))===(De=H.slice(H.length-re)))return f(z,j.slice(0,j.length-re),H.slice(0,H.length-re),ve)}}}if(q.length>0&&V&&V.length===0){var ae=R.slice(0,q.index),ve=R.slice(q.index+q.length);if(!(ue<(W=ae.length)+(re=ve.length))){var Te=L.slice(0,W),De=L.slice(ue-re);if(ae===Te&&ve===De)return f(ae,R.slice(W,X-re),L.slice(W,ue-re),ve)}}return null}(c,s,v);if(A)return A}var D=b(c,s),E=c.substring(0,D);D=h(c=c.substring(D),s=s.substring(D));var I=c.substring(c.length-D),N=function(R,L){var M;if(!R)return[[1,L]];if(!L)return[[w,R]];var q=R.length>L.length?R:L,V=R.length>L.length?L:R,X=q.indexOf(V);if(X!==-1)return M=[[1,q.substring(0,X)],[0,V],[1,q.substring(X+V.length)]],R.length>L.length&&(M[0][0]=M[2][0]=w),M;if(V.length===1)return[[w,R],[1,L]];var ue=function(U,H){var re=U.length>H.length?U:H,ae=U.length>H.length?H:U;if(re.length<4||2*ae.length<re.length)return null;function ve(Y,ie,ge){for(var be,de,ke,Re,je=Y.substring(ge,ge+Math.floor(Y.length/4)),nt=-1,lt="";(nt=ie.indexOf(je,nt+1))!==-1;){var Ge=b(Y.substring(ge),ie.substring(nt)),Ye=h(Y.substring(0,ge),ie.substring(0,nt));lt.length<Ye+Ge&&(lt=ie.substring(nt-Ye,nt)+ie.substring(nt,nt+Ge),be=Y.substring(0,ge-Ye),de=Y.substring(ge+Ge),ke=ie.substring(0,nt-Ye),Re=ie.substring(nt+Ge))}return 2*lt.length>=Y.length?[be,de,ke,Re,lt]:null}var Te,De,Pe,Ie,G,le=ve(re,ae,Math.ceil(re.length/4)),oe=ve(re,ae,Math.ceil(re.length/2));return le||oe?(Te=oe?le&&le[4].length>oe[4].length?le:oe:le,U.length>H.length?(De=Te[0],Pe=Te[1],Ie=Te[2],G=Te[3]):(Ie=Te[0],G=Te[1],De=Te[2],Pe=Te[3]),[De,Pe,Ie,G,Te[4]]):null}(R,L);if(ue){var Z=ue[0],z=ue[1],j=ue[2],F=ue[3],J=ue[4],Q=T(Z,j),W=T(z,F);return Q.concat([[0,J]],W)}return function(U,H){for(var re=U.length,ae=H.length,ve=Math.ceil((re+ae)/2),Te=ve,De=2*ve,Pe=new Array(De),Ie=new Array(De),G=0;G<De;G++)Pe[G]=-1,Ie[G]=-1;Pe[Te+1]=0,Ie[Te+1]=0;for(var le=re-ae,oe=le%2!=0,Y=0,ie=0,ge=0,be=0,de=0;de<ve;de++){for(var ke=-de+Y;ke<=de-ie;ke+=2){for(var Re=Te+ke,je=(_e=ke===-de||ke!==de&&Pe[Re-1]<Pe[Re+1]?Pe[Re+1]:Pe[Re-1]+1)-ke;_e<re&&je<ae&&U.charAt(_e)===H.charAt(je);)_e++,je++;if(Pe[Re]=_e,_e>re)ie+=2;else if(je>ae)Y+=2;else if(oe&&(Ge=Te+le-ke)>=0&&Ge<De&&Ie[Ge]!==-1&&_e>=(lt=re-Ie[Ge]))return S(U,H,_e,je)}for(var nt=-de+ge;nt<=de-be;nt+=2){for(var lt,Ge=Te+nt,Ye=(lt=nt===-de||nt!==de&&Ie[Ge-1]<Ie[Ge+1]?Ie[Ge+1]:Ie[Ge-1]+1)-nt;lt<re&&Ye<ae&&U.charAt(re-lt-1)===H.charAt(ae-Ye-1);)lt++,Ye++;if(Ie[Ge]=lt,lt>re)be+=2;else if(Ye>ae)ge+=2;else if(!oe){var _e;if((Re=Te+le-nt)>=0&&Re<De&&Pe[Re]!==-1&&(je=Te+(_e=Pe[Re])-Re,_e>=(lt=re-lt)))return S(U,H,_e,je)}}}return[[w,U],[1,H]]}(R,L)}(c=c.substring(0,c.length-D),s=s.substring(0,s.length-D));return E&&N.unshift([0,E]),I&&N.push([0,I]),u(N,y),N}function S(c,s,v,y){var A=c.substring(0,v),D=s.substring(0,y),E=c.substring(v),I=s.substring(y),N=T(A,D),R=T(E,I);return N.concat(R)}function b(c,s){if(!c||!s||c.charAt(0)!==s.charAt(0))return 0;for(var v=0,y=Math.min(c.length,s.length),A=y,D=0;v<A;)c.substring(D,A)==s.substring(D,A)?D=v=A:y=A,A=Math.floor((y-v)/2+v);return l(c.charCodeAt(A-1))&&A--,A}function h(c,s){if(!c||!s||c.slice(-1)!==s.slice(-1))return 0;for(var v=0,y=Math.min(c.length,s.length),A=y,D=0;v<A;)c.substring(c.length-A,c.length-D)==s.substring(s.length-A,s.length-D)?D=v=A:y=A,A=Math.floor((y-v)/2+v);return d(c.charCodeAt(c.length-A))&&A--,A}function u(c,s){c.push([0,""]);for(var v,y=0,A=0,D=0,E="",I="";y<c.length;)if(y<c.length-1&&!c[y][1])c.splice(y,1);else switch(c[y][0]){case 1:D++,I+=c[y][1],y++;break;case w:A++,E+=c[y][1],y++;break;case 0:var N=y-D-A-1;if(s){if(N>=0&&m(c[N][1])){var R=c[N][1].slice(-1);if(c[N][1]=c[N][1].slice(0,-1),E=R+E,I=R+I,!c[N][1]){c.splice(N,1),y--;var L=N-1;c[L]&&c[L][0]===1&&(D++,I=c[L][1]+I,L--),c[L]&&c[L][0]===w&&(A++,E=c[L][1]+E,L--),N=L}}g(c[y][1])&&(R=c[y][1].charAt(0),c[y][1]=c[y][1].slice(1),E+=R,I+=R)}if(y<c.length-1&&!c[y][1]){c.splice(y,1);break}if(E.length>0||I.length>0){E.length>0&&I.length>0&&((v=b(I,E))!==0&&(N>=0?c[N][1]+=I.substring(0,v):(c.splice(0,0,[0,I.substring(0,v)]),y++),I=I.substring(v),E=E.substring(v)),(v=h(I,E))!==0&&(c[y][1]=I.substring(I.length-v)+c[y][1],I=I.substring(0,I.length-v),E=E.substring(0,E.length-v)));var M=D+A;E.length===0&&I.length===0?(c.splice(y-M,M),y-=M):E.length===0?(c.splice(y-M,M,[1,I]),y=y-M+1):I.length===0?(c.splice(y-M,M,[w,E]),y=y-M+1):(c.splice(y-M,M,[w,E],[1,I]),y=y-M+2)}y!==0&&c[y-1][0]===0?(c[y-1][1]+=c[y][1],c.splice(y,1)):y++,D=0,A=0,E="",I=""}c[c.length-1][1]===""&&c.pop();var q=!1;for(y=1;y<c.length-1;)c[y-1][0]===0&&c[y+1][0]===0&&(c[y][1].substring(c[y][1].length-c[y-1][1].length)===c[y-1][1]?(c[y][1]=c[y-1][1]+c[y][1].substring(0,c[y][1].length-c[y-1][1].length),c[y+1][1]=c[y-1][1]+c[y+1][1],c.splice(y-1,1),q=!0):c[y][1].substring(0,c[y+1][1].length)==c[y+1][1]&&(c[y-1][1]+=c[y+1][1],c[y][1]=c[y][1].substring(c[y+1][1].length)+c[y+1][1],c.splice(y+1,1),q=!0)),y++;q&&u(c,s)}function l(c){return c>=55296&&c<=56319}function d(c){return c>=56320&&c<=57343}function g(c){return d(c.charCodeAt(0))}function m(c){return l(c.charCodeAt(c.length-1))}function f(c,s,v,y){return m(c)||g(y)?null:function(A){for(var D=[],E=0;E<A.length;E++)A[E][1].length>0&&D.push(A[E]);return D}([[0,c],[w,s],[1,v],[0,y]])}function a(c,s,v){return T(c,s,v,!0)}a.INSERT=1,a.DELETE=w,a.EQUAL=0,x.exports=a},165:function(x,w,T){var S,b;(b=typeof(S=function(){var h,u={};function l(m,f,a){var c=m.getClientRects();if(c.length===2){var s=m.getBoundingClientRect();return c[f][a]<s[a]}return!1}function d(m){if(!m||screen.deviceXDPI===screen.logicalXDPI)return m;if("length"in m)return Array.prototype.map.call(m,d);var f=screen.deviceXDPI/screen.logicalXDPI;return{top:m.top/f,bottom:m.bottom/f,left:m.left/f,right:m.right/f,width:m.width/f,height:m.height/f}}function g(m,f){var a,c=0,s=1024;if(s>=f.length)return Array.prototype.push.apply(m,f);for(;c<f.length;)a=Array.prototype.push.apply(m,Array.prototype.slice.call(f,c,c+s)),c+=s;return a}return u.isBroken=function(){if(h===void 0){var m=document.createElement("p"),f=document.createElement("span"),a=document.createTextNode("aa"),c=document.createTextNode("aa"),s=document.createElement("img");s.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var v=document.createRange();if(h={},m.appendChild(a),m.appendChild(f),f.appendChild(s),f.appendChild(c),document.body.appendChild(m),v.setStart(a,1),v.setEnd(f,0),h.getClientRects=h.getBoundingClientRect=v.getClientRects().length>1,h.getClientRects||(v.setEnd(c,1),h.getClientRects=h.getBoundingClientRect=v.getClientRects().length===2),!h.getBoundingClientRect){v.setEnd(v.startContainer,v.startOffset);var y=v.getBoundingClientRect();h.getBoundingClientRect=y.top===0&&y.left===0}if(document.body.removeChild(m),!h.getBoundingClientRect){var A=document.createElement("p");A.style.width="0px",A.style.fontSize="20px",A.style.whiteSpace="normal",A.style.wordBreak="normal";var D=document.createTextNode("m mm");A.appendChild(D),document.body.appendChild(A),v.setStart(D,1),v.setEnd(D,2),l(v,1,"left")?h.getBoundingClientRect=!0:(v.setStart(D,1),v.setEnd(D,3),l(v,0,"top")&&(h.getBoundingClientRect=!0)),document.body.removeChild(A)}var E=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();h.ieZoom=!!E&&E<=10}return h},u.getClientRects=function(m){var f=this.isBroken();if(f.ieZoom)return d(m.getClientRects());if(!f.getClientRects)return m.getClientRects();var a=[],c=[],s=m.endContainer,v=m.endOffset,y=document.createRange();function A(D){for(var E=0;D=D.previousSibling;)E++;return E}for(;s!==m.commonAncestorContainer;)y.setStart(s,0),y.setEnd(s,v),g(c,y.getClientRects()),v=A(s),s=s.parentNode;return(y=m.cloneRange()).setEnd(s,v),g(a,y.getClientRects()),g(a,c),a},u.getBoundingClientRect=function(m){var f=this.getClientRects(m);if(f.length===0)return null;var a,c=m.getBoundingClientRect(),s=this.isBroken();if(s.ieZoom)return d(c);if(!s.getBoundingClientRect)return c;if(c.width===0&&c.height===0)return f[0];for(var v=0,y=f.length;v<y;v++){var A=f[v];a?(a.left=Math.min(a.left,A.left),a.top=Math.min(a.top,A.top),a.right=Math.max(a.right,A.right),a.bottom=Math.max(a.bottom,A.bottom)):a={left:A.left,top:A.top,right:A.right,bottom:A.bottom}}return a&&(a.width=a.right-a.left,a.height=a.bottom-a.top),a},u})=="function"?S.call(w,T,w,x):S)===void 0||(x.exports=b)},33:(x,w,T)=>{T.r(w),T.d(w,{default:()=>L});var S=function(){if(typeof Map<"u")return Map;function M(q,V){var X=-1;return q.some(function(ue,Z){return ue[0]===V&&(X=Z,!0)}),X}return function(){function q(){this.__entries__=[]}return Object.defineProperty(q.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),q.prototype.get=function(V){var X=M(this.__entries__,V),ue=this.__entries__[X];return ue&&ue[1]},q.prototype.set=function(V,X){var ue=M(this.__entries__,V);~ue?this.__entries__[ue][1]=X:this.__entries__.push([V,X])},q.prototype.delete=function(V){var X=this.__entries__,ue=M(X,V);~ue&&X.splice(ue,1)},q.prototype.has=function(V){return!!~M(this.__entries__,V)},q.prototype.clear=function(){this.__entries__.splice(0)},q.prototype.forEach=function(V,X){X===void 0&&(X=null);for(var ue=0,Z=this.__entries__;ue<Z.length;ue++){var z=Z[ue];V.call(X,z[1],z[0])}},q}()}(),b=typeof window<"u"&&typeof document<"u"&&window.document===document,h=T.g!==void 0&&T.g.Math===Math?T.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),u=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(h):function(M){return setTimeout(function(){return M(Date.now())},1e3/60)},l=["top","right","bottom","left","width","height","size","weight"],d=typeof MutationObserver<"u",g=function(){function M(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(q,V){var X=!1,ue=!1,Z=0;function z(){X&&(X=!1,q()),ue&&F()}function j(){u(z)}function F(){var J=Date.now();if(X){if(J-Z<2)return;ue=!0}else X=!0,ue=!1,setTimeout(j,20);Z=J}return F}(this.refresh.bind(this))}return M.prototype.addObserver=function(q){~this.observers_.indexOf(q)||this.observers_.push(q),this.connected_||this.connect_()},M.prototype.removeObserver=function(q){var V=this.observers_,X=V.indexOf(q);~X&&V.splice(X,1),!V.length&&this.connected_&&this.disconnect_()},M.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},M.prototype.updateObservers_=function(){var q=this.observers_.filter(function(V){return V.gatherActive(),V.hasActive()});return q.forEach(function(V){return V.broadcastActive()}),q.length>0},M.prototype.connect_=function(){b&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),d?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},M.prototype.disconnect_=function(){b&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},M.prototype.onTransitionEnd_=function(q){var V=q.propertyName,X=V===void 0?"":V;l.some(function(ue){return!!~X.indexOf(ue)})&&this.refresh()},M.getInstance=function(){return this.instance_||(this.instance_=new M),this.instance_},M.instance_=null,M}(),m=function(M,q){for(var V=0,X=Object.keys(q);V<X.length;V++){var ue=X[V];Object.defineProperty(M,ue,{value:q[ue],enumerable:!1,writable:!1,configurable:!0})}return M},f=function(M){return M&&M.ownerDocument&&M.ownerDocument.defaultView||h},a=A(0,0,0,0);function c(M){return parseFloat(M)||0}function s(M){for(var q=[],V=1;V<arguments.length;V++)q[V-1]=arguments[V];return q.reduce(function(X,ue){return X+c(M["border-"+ue+"-width"])},0)}var v=typeof SVGGraphicsElement<"u"?function(M){return M instanceof f(M).SVGGraphicsElement}:function(M){return M instanceof f(M).SVGElement&&typeof M.getBBox=="function"};function y(M){return b?v(M)?function(q){var V=q.getBBox();return A(0,0,V.width,V.height)}(M):function(q){var V=q.clientWidth,X=q.clientHeight;if(!V&&!X)return a;var ue=f(q).getComputedStyle(q),Z=function(U){for(var H={},re=0,ae=["top","right","bottom","left"];re<ae.length;re++){var ve=ae[re],Te=U["padding-"+ve];H[ve]=c(Te)}return H}(ue),z=Z.left+Z.right,j=Z.top+Z.bottom,F=c(ue.width),J=c(ue.height);if(ue.boxSizing==="border-box"&&(Math.round(F+z)!==V&&(F-=s(ue,"left","right")+z),Math.round(J+j)!==X&&(J-=s(ue,"top","bottom")+j)),!function(U){return U===f(U).document.documentElement}(q)){var Q=Math.round(F+z)-V,W=Math.round(J+j)-X;Math.abs(Q)!==1&&(F-=Q),Math.abs(W)!==1&&(J-=W)}return A(Z.left,Z.top,F,J)}(M):a}function A(M,q,V,X){return{x:M,y:q,width:V,height:X}}var D=function(){function M(q){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=A(0,0,0,0),this.target=q}return M.prototype.isActive=function(){var q=y(this.target);return this.contentRect_=q,q.width!==this.broadcastWidth||q.height!==this.broadcastHeight},M.prototype.broadcastRect=function(){var q=this.contentRect_;return this.broadcastWidth=q.width,this.broadcastHeight=q.height,q},M}(),E=function(M,q){var V,X,ue,Z,z,j,F,J=(X=(V=q).x,ue=V.y,Z=V.width,z=V.height,j=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,F=Object.create(j.prototype),m(F,{x:X,y:ue,width:Z,height:z,top:ue,right:X+Z,bottom:z+ue,left:X}),F);m(this,{target:M,contentRect:J})},I=function(){function M(q,V,X){if(this.activeObservations_=[],this.observations_=new S,typeof q!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=q,this.controller_=V,this.callbackCtx_=X}return M.prototype.observe=function(q){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(q instanceof f(q).Element))throw new TypeError('parameter 1 is not of type "Element".');var V=this.observations_;V.has(q)||(V.set(q,new D(q)),this.controller_.addObserver(this),this.controller_.refresh())}},M.prototype.unobserve=function(q){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(q instanceof f(q).Element))throw new TypeError('parameter 1 is not of type "Element".');var V=this.observations_;V.has(q)&&(V.delete(q),V.size||this.controller_.removeObserver(this))}},M.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},M.prototype.gatherActive=function(){var q=this;this.clearActive(),this.observations_.forEach(function(V){V.isActive()&&q.activeObservations_.push(V)})},M.prototype.broadcastActive=function(){if(this.hasActive()){var q=this.callbackCtx_,V=this.activeObservations_.map(function(X){return new E(X.target,X.broadcastRect())});this.callback_.call(q,V,q),this.clearActive()}},M.prototype.clearActive=function(){this.activeObservations_.splice(0)},M.prototype.hasActive=function(){return this.activeObservations_.length>0},M}(),N=typeof WeakMap<"u"?new WeakMap:new S,R=function M(q){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var V=g.getInstance(),X=new I(q,V,this);N.set(this,X)};["observe","unobserve","disconnect"].forEach(function(M){R.prototype[M]=function(){var q;return(q=N.get(this))[M].apply(q,arguments)}});const L=h.ResizeObserver!==void 0?h.ResizeObserver:R},413:(x,w,T)=>{T.r(w),T.d(w,{default:()=>A});var S=T(379),b=T.n(S),h=T(795),u=T.n(h),l=T(569),d=T.n(l),g=T(565),m=T.n(g),f=T(216),a=T.n(f),c=T(589),s=T.n(c),v=T(582),y={};y.styleTagTransform=s(),y.setAttributes=m(),y.insert=d().bind(null,"head"),y.domAPI=u(),y.insertStyleElement=a(),b()(v.Z,y);const A=v.Z&&v.Z.locals?v.Z.locals:void 0},379:x=>{var w=[];function T(h){for(var u=-1,l=0;l<w.length;l++)if(w[l].identifier===h){u=l;break}return u}function S(h,u){for(var l={},d=[],g=0;g<h.length;g++){var m=h[g],f=u.base?m[0]+u.base:m[0],a=l[f]||0,c="".concat(f," ").concat(a);l[f]=a+1;var s=T(c),v={css:m[1],media:m[2],sourceMap:m[3],supports:m[4],layer:m[5]};if(s!==-1)w[s].references++,w[s].updater(v);else{var y=b(v,u);u.byIndex=g,w.splice(g,0,{identifier:c,updater:y,references:1})}d.push(c)}return d}function b(h,u){var l=u.domAPI(u);return l.update(h),function(d){if(d){if(d.css===h.css&&d.media===h.media&&d.sourceMap===h.sourceMap&&d.supports===h.supports&&d.layer===h.layer)return;l.update(h=d)}else l.remove()}}x.exports=function(h,u){var l=S(h=h||[],u=u||{});return function(d){d=d||[];for(var g=0;g<l.length;g++){var m=T(l[g]);w[m].references--}for(var f=S(d,u),a=0;a<l.length;a++){var c=T(l[a]);w[c].references===0&&(w[c].updater(),w.splice(c,1))}l=f}}},569:x=>{var w={};x.exports=function(T,S){var b=function(h){if(w[h]===void 0){var u=document.querySelector(h);if(window.HTMLIFrameElement&&u instanceof window.HTMLIFrameElement)try{u=u.contentDocument.head}catch{u=null}w[h]=u}return w[h]}(T);if(!b)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");b.appendChild(S)}},216:x=>{x.exports=function(w){var T=document.createElement("style");return w.setAttributes(T,w.attributes),w.insert(T,w.options),T}},565:(x,w,T)=>{x.exports=function(S){var b=T.nc;b&&S.setAttribute("nonce",b)}},795:x=>{x.exports=function(w){var T=w.insertStyleElement(w);return{update:function(S){(function(b,h,u){var l="";u.supports&&(l+="@supports (".concat(u.supports,") {")),u.media&&(l+="@media ".concat(u.media," {"));var d=u.layer!==void 0;d&&(l+="@layer".concat(u.layer.length>0?" ".concat(u.layer):""," {")),l+=u.css,d&&(l+="}"),u.media&&(l+="}"),u.supports&&(l+="}");var g=u.sourceMap;g&&typeof btoa<"u"&&(l+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(g))))," */")),h.styleTagTransform(l,b,h.options)})(T,w,S)},remove:function(){(function(S){if(S.parentNode===null)return!1;S.parentNode.removeChild(S)})(T)}}}},589:x=>{x.exports=function(w,T){if(T.styleSheet)T.styleSheet.cssText=w;else{for(;T.firstChild;)T.removeChild(T.firstChild);T.appendChild(document.createTextNode(w))}}},621:(x,w,T)=>{var S;(function(b){var h=/^\s+/,u=/\s+$/,l=0,d=b.round,g=b.min,m=b.max,f=b.random;function a(G,le){if(le=le||{},(G=G||"")instanceof a)return G;if(!(this instanceof a))return new a(G,le);var oe=function(Y){var ie,ge,be,de={r:0,g:0,b:0},ke=1,Re=null,je=null,nt=null,lt=!1,Ge=!1;return typeof Y=="string"&&(Y=function(Ye){Ye=Ye.replace(h,"").replace(u,"").toLowerCase();var _e,Qe=!1;if(z[Ye])Ye=z[Ye],Qe=!0;else if(Ye=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(_e=Pe.rgb.exec(Ye))?{r:_e[1],g:_e[2],b:_e[3]}:(_e=Pe.rgba.exec(Ye))?{r:_e[1],g:_e[2],b:_e[3],a:_e[4]}:(_e=Pe.hsl.exec(Ye))?{h:_e[1],s:_e[2],l:_e[3]}:(_e=Pe.hsla.exec(Ye))?{h:_e[1],s:_e[2],l:_e[3],a:_e[4]}:(_e=Pe.hsv.exec(Ye))?{h:_e[1],s:_e[2],v:_e[3]}:(_e=Pe.hsva.exec(Ye))?{h:_e[1],s:_e[2],v:_e[3],a:_e[4]}:(_e=Pe.hex8.exec(Ye))?{r:W(_e[1]),g:W(_e[2]),b:W(_e[3]),a:ae(_e[4]),format:Qe?"name":"hex8"}:(_e=Pe.hex6.exec(Ye))?{r:W(_e[1]),g:W(_e[2]),b:W(_e[3]),format:Qe?"name":"hex"}:(_e=Pe.hex4.exec(Ye))?{r:W(_e[1]+""+_e[1]),g:W(_e[2]+""+_e[2]),b:W(_e[3]+""+_e[3]),a:ae(_e[4]+""+_e[4]),format:Qe?"name":"hex8"}:!!(_e=Pe.hex3.exec(Ye))&&{r:W(_e[1]+""+_e[1]),g:W(_e[2]+""+_e[2]),b:W(_e[3]+""+_e[3]),format:Qe?"name":"hex"}}(Y)),typeof Y=="object"&&(Ie(Y.r)&&Ie(Y.g)&&Ie(Y.b)?(ie=Y.r,ge=Y.g,be=Y.b,de={r:255*J(ie,255),g:255*J(ge,255),b:255*J(be,255)},lt=!0,Ge=String(Y.r).substr(-1)==="%"?"prgb":"rgb"):Ie(Y.h)&&Ie(Y.s)&&Ie(Y.v)?(Re=H(Y.s),je=H(Y.v),de=function(Ye,_e,Qe){Ye=6*J(Ye,360),_e=J(_e,100),Qe=J(Qe,100);var zt=b.floor(Ye),bn=Ye-zt,Kt=Qe*(1-_e),Tn=Qe*(1-bn*_e),en=Qe*(1-(1-bn)*_e),Ht=zt%6;return{r:255*[Qe,Tn,Kt,Kt,en,Qe][Ht],g:255*[en,Qe,Qe,Tn,Kt,Kt][Ht],b:255*[Kt,Kt,en,Qe,Qe,Tn][Ht]}}(Y.h,Re,je),lt=!0,Ge="hsv"):Ie(Y.h)&&Ie(Y.s)&&Ie(Y.l)&&(Re=H(Y.s),nt=H(Y.l),de=function(Ye,_e,Qe){var zt,bn,Kt;function Tn(Dt,tn,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?Dt+6*(tn-Dt)*kt:kt<.5?tn:kt<2/3?Dt+(tn-Dt)*(2/3-kt)*6:Dt}if(Ye=J(Ye,360),_e=J(_e,100),Qe=J(Qe,100),_e===0)zt=bn=Kt=Qe;else{var en=Qe<.5?Qe*(1+_e):Qe+_e-Qe*_e,Ht=2*Qe-en;zt=Tn(Ht,en,Ye+1/3),bn=Tn(Ht,en,Ye),Kt=Tn(Ht,en,Ye-1/3)}return{r:255*zt,g:255*bn,b:255*Kt}}(Y.h,Re,nt),lt=!0,Ge="hsl"),Y.hasOwnProperty("a")&&(ke=Y.a)),ke=F(ke),{ok:lt,format:Y.format||Ge,r:g(255,m(de.r,0)),g:g(255,m(de.g,0)),b:g(255,m(de.b,0)),a:ke}}(G);this._originalInput=G,this._r=oe.r,this._g=oe.g,this._b=oe.b,this._a=oe.a,this._roundA=d(100*this._a)/100,this._format=le.format||oe.format,this._gradientType=le.gradientType,this._r<1&&(this._r=d(this._r)),this._g<1&&(this._g=d(this._g)),this._b<1&&(this._b=d(this._b)),this._ok=oe.ok,this._tc_id=l++}function c(G,le,oe){G=J(G,255),le=J(le,255),oe=J(oe,255);var Y,ie,ge=m(G,le,oe),be=g(G,le,oe),de=(ge+be)/2;if(ge==be)Y=ie=0;else{var ke=ge-be;switch(ie=de>.5?ke/(2-ge-be):ke/(ge+be),ge){case G:Y=(le-oe)/ke+(le<oe?6:0);break;case le:Y=(oe-G)/ke+2;break;case oe:Y=(G-le)/ke+4}Y/=6}return{h:Y,s:ie,l:de}}function s(G,le,oe){G=J(G,255),le=J(le,255),oe=J(oe,255);var Y,ie,ge=m(G,le,oe),be=g(G,le,oe),de=ge,ke=ge-be;if(ie=ge===0?0:ke/ge,ge==be)Y=0;else{switch(ge){case G:Y=(le-oe)/ke+(le<oe?6:0);break;case le:Y=(oe-G)/ke+2;break;case oe:Y=(G-le)/ke+4}Y/=6}return{h:Y,s:ie,v:de}}function v(G,le,oe,Y){var ie=[U(d(G).toString(16)),U(d(le).toString(16)),U(d(oe).toString(16))];return Y&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function y(G,le,oe,Y){return[U(re(Y)),U(d(G).toString(16)),U(d(le).toString(16)),U(d(oe).toString(16))].join("")}function A(G,le){le=le===0?0:le||10;var oe=a(G).toHsl();return oe.s-=le/100,oe.s=Q(oe.s),a(oe)}function D(G,le){le=le===0?0:le||10;var oe=a(G).toHsl();return oe.s+=le/100,oe.s=Q(oe.s),a(oe)}function E(G){return a(G).desaturate(100)}function I(G,le){le=le===0?0:le||10;var oe=a(G).toHsl();return oe.l+=le/100,oe.l=Q(oe.l),a(oe)}function N(G,le){le=le===0?0:le||10;var oe=a(G).toRgb();return oe.r=m(0,g(255,oe.r-d(-le/100*255))),oe.g=m(0,g(255,oe.g-d(-le/100*255))),oe.b=m(0,g(255,oe.b-d(-le/100*255))),a(oe)}function R(G,le){le=le===0?0:le||10;var oe=a(G).toHsl();return oe.l-=le/100,oe.l=Q(oe.l),a(oe)}function L(G,le){var oe=a(G).toHsl(),Y=(oe.h+le)%360;return oe.h=Y<0?360+Y:Y,a(oe)}function M(G){var le=a(G).toHsl();return le.h=(le.h+180)%360,a(le)}function q(G){var le=a(G).toHsl(),oe=le.h;return[a(G),a({h:(oe+120)%360,s:le.s,l:le.l}),a({h:(oe+240)%360,s:le.s,l:le.l})]}function V(G){var le=a(G).toHsl(),oe=le.h;return[a(G),a({h:(oe+90)%360,s:le.s,l:le.l}),a({h:(oe+180)%360,s:le.s,l:le.l}),a({h:(oe+270)%360,s:le.s,l:le.l})]}function X(G){var le=a(G).toHsl(),oe=le.h;return[a(G),a({h:(oe+72)%360,s:le.s,l:le.l}),a({h:(oe+216)%360,s:le.s,l:le.l})]}function ue(G,le,oe){le=le||6,oe=oe||30;var Y=a(G).toHsl(),ie=360/oe,ge=[a(G)];for(Y.h=(Y.h-(ie*le>>1)+720)%360;--le;)Y.h=(Y.h+ie)%360,ge.push(a(Y));return ge}function Z(G,le){le=le||6;for(var oe=a(G).toHsv(),Y=oe.h,ie=oe.s,ge=oe.v,be=[],de=1/le;le--;)be.push(a({h:Y,s:ie,v:ge})),ge=(ge+de)%1;return be}a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var G=this.toRgb();return(299*G.r+587*G.g+114*G.b)/1e3},getLuminance:function(){var G,le,oe,Y=this.toRgb();return G=Y.r/255,le=Y.g/255,oe=Y.b/255,.2126*(G<=.03928?G/12.92:b.pow((G+.055)/1.055,2.4))+.7152*(le<=.03928?le/12.92:b.pow((le+.055)/1.055,2.4))+.0722*(oe<=.03928?oe/12.92:b.pow((oe+.055)/1.055,2.4))},setAlpha:function(G){return this._a=F(G),this._roundA=d(100*this._a)/100,this},toHsv:function(){var G=s(this._r,this._g,this._b);return{h:360*G.h,s:G.s,v:G.v,a:this._a}},toHsvString:function(){var G=s(this._r,this._g,this._b),le=d(360*G.h),oe=d(100*G.s),Y=d(100*G.v);return this._a==1?"hsv("+le+", "+oe+"%, "+Y+"%)":"hsva("+le+", "+oe+"%, "+Y+"%, "+this._roundA+")"},toHsl:function(){var G=c(this._r,this._g,this._b);return{h:360*G.h,s:G.s,l:G.l,a:this._a}},toHslString:function(){var G=c(this._r,this._g,this._b),le=d(360*G.h),oe=d(100*G.s),Y=d(100*G.l);return this._a==1?"hsl("+le+", "+oe+"%, "+Y+"%)":"hsla("+le+", "+oe+"%, "+Y+"%, "+this._roundA+")"},toHex:function(G){return v(this._r,this._g,this._b,G)},toHexString:function(G){return"#"+this.toHex(G)},toHex8:function(G){return function(le,oe,Y,ie,ge){var be=[U(d(le).toString(16)),U(d(oe).toString(16)),U(d(Y).toString(16)),U(re(ie))];return ge&&be[0].charAt(0)==be[0].charAt(1)&&be[1].charAt(0)==be[1].charAt(1)&&be[2].charAt(0)==be[2].charAt(1)&&be[3].charAt(0)==be[3].charAt(1)?be[0].charAt(0)+be[1].charAt(0)+be[2].charAt(0)+be[3].charAt(0):be.join("")}(this._r,this._g,this._b,this._a,G)},toHex8String:function(G){return"#"+this.toHex8(G)},toRgb:function(){return{r:d(this._r),g:d(this._g),b:d(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+d(this._r)+", "+d(this._g)+", "+d(this._b)+")":"rgba("+d(this._r)+", "+d(this._g)+", "+d(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:d(100*J(this._r,255))+"%",g:d(100*J(this._g,255))+"%",b:d(100*J(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+d(100*J(this._r,255))+"%, "+d(100*J(this._g,255))+"%, "+d(100*J(this._b,255))+"%)":"rgba("+d(100*J(this._r,255))+"%, "+d(100*J(this._g,255))+"%, "+d(100*J(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(j[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(G){var le="#"+y(this._r,this._g,this._b,this._a),oe=le,Y=this._gradientType?"GradientType = 1, ":"";if(G){var ie=a(G);oe="#"+y(ie._r,ie._g,ie._b,ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+Y+"startColorstr="+le+",endColorstr="+oe+")"},toString:function(G){var le=!!G;G=G||this._format;var oe=!1,Y=this._a<1&&this._a>=0;return le||!Y||G!=="hex"&&G!=="hex6"&&G!=="hex3"&&G!=="hex4"&&G!=="hex8"&&G!=="name"?(G==="rgb"&&(oe=this.toRgbString()),G==="prgb"&&(oe=this.toPercentageRgbString()),G!=="hex"&&G!=="hex6"||(oe=this.toHexString()),G==="hex3"&&(oe=this.toHexString(!0)),G==="hex4"&&(oe=this.toHex8String(!0)),G==="hex8"&&(oe=this.toHex8String()),G==="name"&&(oe=this.toName()),G==="hsl"&&(oe=this.toHslString()),G==="hsv"&&(oe=this.toHsvString()),oe||this.toHexString()):G==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return a(this.toString())},_applyModification:function(G,le){var oe=G.apply(null,[this].concat([].slice.call(le)));return this._r=oe._r,this._g=oe._g,this._b=oe._b,this.setAlpha(oe._a),this},lighten:function(){return this._applyModification(I,arguments)},brighten:function(){return this._applyModification(N,arguments)},darken:function(){return this._applyModification(R,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(D,arguments)},greyscale:function(){return this._applyModification(E,arguments)},spin:function(){return this._applyModification(L,arguments)},_applyCombination:function(G,le){return G.apply(null,[this].concat([].slice.call(le)))},analogous:function(){return this._applyCombination(ue,arguments)},complement:function(){return this._applyCombination(M,arguments)},monochromatic:function(){return this._applyCombination(Z,arguments)},splitcomplement:function(){return this._applyCombination(X,arguments)},triad:function(){return this._applyCombination(q,arguments)},tetrad:function(){return this._applyCombination(V,arguments)}},a.fromRatio=function(G,le){if(typeof G=="object"){var oe={};for(var Y in G)G.hasOwnProperty(Y)&&(oe[Y]=Y==="a"?G[Y]:H(G[Y]));G=oe}return a(G,le)},a.equals=function(G,le){return!(!G||!le)&&a(G).toRgbString()==a(le).toRgbString()},a.random=function(){return a.fromRatio({r:f(),g:f(),b:f()})},a.mix=function(G,le,oe){oe=oe===0?0:oe||50;var Y=a(G).toRgb(),ie=a(le).toRgb(),ge=oe/100;return a({r:(ie.r-Y.r)*ge+Y.r,g:(ie.g-Y.g)*ge+Y.g,b:(ie.b-Y.b)*ge+Y.b,a:(ie.a-Y.a)*ge+Y.a})},a.readability=function(G,le){var oe=a(G),Y=a(le);return(b.max(oe.getLuminance(),Y.getLuminance())+.05)/(b.min(oe.getLuminance(),Y.getLuminance())+.05)},a.isReadable=function(G,le,oe){var Y,ie,ge,be,de,ke=a.readability(G,le);switch(ie=!1,(ge=oe,(be=((ge=ge||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&be!=="AAA"&&(be="AA"),(de=(ge.size||"small").toLowerCase())!=="small"&&de!=="large"&&(de="small"),Y={level:be,size:de}).level+Y.size){case"AAsmall":case"AAAlarge":ie=ke>=4.5;break;case"AAlarge":ie=ke>=3;break;case"AAAsmall":ie=ke>=7}return ie},a.mostReadable=function(G,le,oe){var Y,ie,ge,be,de=null,ke=0;ie=(oe=oe||{}).includeFallbackColors,ge=oe.level,be=oe.size;for(var Re=0;Re<le.length;Re++)(Y=a.readability(G,le[Re]))>ke&&(ke=Y,de=a(le[Re]));return a.isReadable(G,de,{level:ge,size:be})||!ie?de:(oe.includeFallbackColors=!1,a.mostReadable(G,["#fff","#000"],oe))};var z=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},j=a.hexNames=function(G){var le={};for(var oe in G)G.hasOwnProperty(oe)&&(le[G[oe]]=oe);return le}(z);function F(G){return G=parseFloat(G),(isNaN(G)||G<0||G>1)&&(G=1),G}function J(G,le){(function(Y){return typeof Y=="string"&&Y.indexOf(".")!=-1&&parseFloat(Y)===1})(G)&&(G="100%");var oe=function(Y){return typeof Y=="string"&&Y.indexOf("%")!=-1}(G);return G=g(le,m(0,parseFloat(G))),oe&&(G=parseInt(G*le,10)/100),b.abs(G-le)<1e-6?1:G%le/parseFloat(le)}function Q(G){return g(1,m(0,G))}function W(G){return parseInt(G,16)}function U(G){return G.length==1?"0"+G:""+G}function H(G){return G<=1&&(G=100*G+"%"),G}function re(G){return b.round(255*parseFloat(G)).toString(16)}function ae(G){return W(G)/255}var ve,Te,De,Pe=(Te="[\\s|\\(]+("+(ve="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")\\s*\\)?",De="[\\s|\\(]+("+ve+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")[,|\\s]+("+ve+")\\s*\\)?",{CSS_UNIT:new RegExp(ve),rgb:new RegExp("rgb"+Te),rgba:new RegExp("rgba"+De),hsl:new RegExp("hsl"+Te),hsla:new RegExp("hsla"+De),hsv:new RegExp("hsv"+Te),hsva:new RegExp("hsva"+De),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Ie(G){return!!Pe.CSS_UNIT.exec(G)}x.exports?x.exports=a:(S=function(){return a}.call(w,T,w,x))===void 0||(x.exports=S)})(Math)},607:function(x,w,T){var S=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(w,"__esModule",{value:!0}),w.Cursor=w.default=void 0;var b=S(T(678));w.default=b.default;var h=S(T(353));w.Cursor=h.default,T(413)},353:(x,w,T)=>{Object.defineProperty(w,"__esModule",{value:!0});var S=T(621),b=function(){function h(u,l,d){this.id=u,this.name=l,this.color=d,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return h.prototype.build=function(u){var l=document.createElement(h.CONTAINER_ELEMENT_TAG);l.classList.add(h.CURSOR_CLASS),l.id="ql-cursor-".concat(this.id),l.innerHTML=u.template;var d=l.getElementsByClassName(h.SELECTION_CLASS)[0],g=l.getElementsByClassName(h.CARET_CONTAINER_CLASS)[0],m=g.getElementsByClassName(h.CARET_CLASS)[0],f=l.getElementsByClassName(h.FLAG_CLASS)[0];return f.style.backgroundColor=this.color,m.style.backgroundColor=this.color,l.getElementsByClassName(h.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(u.hideDelayMs,"ms"),this._hideSpeedMs=u.hideSpeedMs,this._positionFlag=u.positionFlag,f.style.transitionDelay=this._hideDelay,f.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=l,this._selectionEl=d,this._caretEl=g,this._flagEl=f,g.addEventListener("mouseover",this._setHoverState),this._el},h.prototype.show=function(){this._el.classList.remove(h.HIDDEN_CLASS)},h.prototype.hide=function(){this._el.classList.add(h.HIDDEN_CLASS)},h.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},h.prototype.toggleNearCursor=function(u,l){var d=this._getCoordinates(),g=d.left,m=d.right,f=d.top,a=d.bottom,c=u>=g&&u<=m&&l>=f&&l<=a;return this._caretEl.classList.toggle(h.CONTAINER_HOVER_CLASS,c),c},h.prototype.toggleFlag=function(u){var l=this;this._caretEl.classList.toggle(h.CONTAINER_HOVER_CLASS,u)||(this._flagEl.classList.add(h.NO_DELAY_CLASS),setTimeout(function(){return l._flagEl.classList.remove(h.NO_DELAY_CLASS)},this._hideSpeedMs))},h.prototype.updateCaret=function(u,l){this._caretEl.style.top="".concat(u.top,"px"),this._caretEl.style.left="".concat(u.left,"px"),this._caretEl.style.height="".concat(u.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,u,l):this._updateCaretFlag(u,l)},h.prototype.updateSelection=function(u,l){var d=this;this._clearSelection(),u=u||[],u=Array.from(u),u=this._sanitize(u),(u=this._sortByDomPosition(u)).forEach(function(g){return d._addSelection(g,l)})},h.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},h.prototype._toggleOpenedCursor=function(u){var l=this.toggleNearCursor(u.clientX,u.clientY);this._caretEl.classList.toggle(h.CONTAINER_NO_POINTER_CLASS,l),l||document.removeEventListener("mousemove",this._toggleOpenedCursor)},h.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},h.prototype._updateCaretFlag=function(u,l){this._flagEl.style.width="";var d=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(h.FLAG_FLIPPED_CLASS),u.left>l.width-d.width&&this._flagEl.classList.add(h.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(u.left,"px"),this._flagEl.style.top="".concat(u.top,"px"),this._flagEl.style.width="".concat(Math.ceil(d.width),"px")},h.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},h.prototype._addSelection=function(u,l){var d=this._selectionBlock(u,l);this._selectionEl.appendChild(d)},h.prototype._selectionBlock=function(u,l){var d=document.createElement(h.SELECTION_ELEMENT_TAG);return d.classList.add(h.SELECTION_BLOCK_CLASS),d.style.top="".concat(u.top-l.top,"px"),d.style.left="".concat(u.left-l.left,"px"),d.style.width="".concat(u.width,"px"),d.style.height="".concat(u.height,"px"),d.style.backgroundColor=S(this.color).setAlpha(.3).toString(),d},h.prototype._sortByDomPosition=function(u){return u.sort(function(l,d){return l.top===d.top?l.left-d.left:l.top-d.top})},h.prototype._sanitize=function(u){var l=this,d=new Set;return u.filter(function(g){if(!g.width||!g.height)return!1;var m=l._serialize(g);return!d.has(m)&&(d.add(m),!0)})},h.prototype._serialize=function(u){return["top:".concat(u.top),"right:".concat(u.right),"bottom:".concat(u.bottom),"left:".concat(u.left)].join(";")},h.CONTAINER_ELEMENT_TAG="SPAN",h.SELECTION_ELEMENT_TAG="SPAN",h.CURSOR_CLASS="ql-cursor",h.SELECTION_CLASS="ql-cursor-selections",h.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",h.CARET_CLASS="ql-cursor-caret",h.CARET_CONTAINER_CLASS="ql-cursor-caret-container",h.CONTAINER_HOVER_CLASS="hover",h.CONTAINER_NO_POINTER_CLASS="no-pointer",h.FLAG_CLASS="ql-cursor-flag",h.FLAG_FLIPPED_CLASS="flag-flipped",h.NAME_CLASS="ql-cursor-name",h.HIDDEN_CLASS="hidden",h.NO_DELAY_CLASS="no-delay",h}();w.default=b},678:function(x,w,T){var S=this&&this.__createBinding||(Object.create?function(c,s,v,y){y===void 0&&(y=v),Object.defineProperty(c,y,{enumerable:!0,get:function(){return s[v]}})}:function(c,s,v,y){y===void 0&&(y=v),c[y]=s[v]}),b=this&&this.__setModuleDefault||(Object.create?function(c,s){Object.defineProperty(c,"default",{enumerable:!0,value:s})}:function(c,s){c.default=s}),h=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var s={};if(c!=null)for(var v in c)v!=="default"&&Object.prototype.hasOwnProperty.call(c,v)&&S(s,c,v);return b(s,c),s},u=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(w,"__esModule",{value:!0});var l=u(T(353)),d=h(T(165)),g=u(T(338)),m=u(T(33)),f=T(895),a=function(){function c(s,v){v===void 0&&(v={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=s,this.options=this._setDefaults(v),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return c.prototype.createCursor=function(s,v,y){var A=this._cursors[s];if(!A){A=new l.default(s,v,y),this._cursors[s]=A;var D=A.build(this.options);this._container.appendChild(D)}return A},c.prototype.moveCursor=function(s,v){var y=this._cursors[s];y&&(y.range=v,this._updateCursor(y))},c.prototype.removeCursor=function(s){var v=this._cursors[s];v&&(v.remove(),delete this._cursors[s])},c.prototype.update=function(){var s=this;this.cursors().forEach(function(v){return s._updateCursor(v)})},c.prototype.clearCursors=function(){var s=this;this.cursors().forEach(function(v){return s.removeCursor(v.id)})},c.prototype.toggleFlag=function(s,v){var y=this._cursors[s];y&&y.toggleFlag(v)},c.prototype.cursors=function(){var s=this;return Object.keys(this._cursors).map(function(v){return s._cursors[v]})},c.prototype._registerSelectionChangeListeners=function(){var s=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(v){s._currentSelection=v})},c.prototype._registerTextChangeListener=function(){var s=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(v){return s._handleTextChange(v)})},c.prototype._registerDomListeners=function(){var s=this,v=this.quill.container.getElementsByClassName("ql-editor")[0];v.addEventListener("scroll",function(){return s.update()}),v.addEventListener("touchstart",this._handleCursorTouch)},c.prototype._handleCursorTouch=function(s){var v=this;this.cursors().forEach(function(y){y.toggleNearCursor(s.pageX,s.pageY),setTimeout(function(){return y.toggleFlag(!1)},v.options.hideDelayMs)})},c.prototype._registerResizeObserver=function(){var s=this;if(!this._isObserving){var v=this.quill.container.getElementsByClassName("ql-editor")[0],y=new m.default(function(A){A[0].target.isConnected||(y.disconnect(),s._isObserving=!1),s.update()});y.observe(v),this._isObserving=!0}},c.prototype._updateCursor=function(s){if(this._registerResizeObserver(),!s.range)return s.hide();var v=this._indexWithinQuillBounds(s.range.index),y=this._indexWithinQuillBounds(s.range.index+s.range.length),A=this.quill.getLeaf(v),D=this.quill.getLeaf(y);if(!this._leafIsValid(A)||!this._leafIsValid(D))return s.hide();s.show();var E=this._boundsContainer.getBoundingClientRect(),I=this.quill.getBounds(y);s.updateCaret(I,E);var N=this._lineRanges(s,A,D).reduce(function(R,L){return R.concat(Array.from(d.getClientRects(L)))},[]);s.updateSelection(N,E)},c.prototype._indexWithinQuillBounds=function(s){var v=this.quill.getLength(),y=v?v-1:0;return s=Math.max(s,0),Math.min(s,y)},c.prototype._leafIsValid=function(s){return s&&s[0]&&s[0].domNode&&s[1]>=0},c.prototype._handleTextChange=function(s){var v=this;window.setTimeout(function(){v.options.transformOnTextChange&&v._transformCursors(s),v.options.selectionChangeSource&&(v._emitSelection(),v.update())})},c.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},c.prototype._setDefaults=function(s){return(s=Object.assign({},s)).template||(s.template=c.DEFAULTS.template),s.containerClass||(s.containerClass=c.DEFAULTS.containerClass),s.selectionChangeSource!==null&&(s.selectionChangeSource||(s.selectionChangeSource=c.DEFAULTS.selectionChangeSource)),s.hideDelayMs=Number.isInteger(s.hideDelayMs)?s.hideDelayMs:c.DEFAULTS.hideDelayMs,s.hideSpeedMs=Number.isInteger(s.hideSpeedMs)?s.hideSpeedMs:c.DEFAULTS.hideSpeedMs,s.transformOnTextChange=!!s.transformOnTextChange,s},c.prototype._lineRanges=function(s,v,y){var A=this.quill.getLines(s.range);return A.reduce(function(D,E,I){if(!E.children){var N=document.createRange();return N.selectNode(E.domNode),D.concat(N)}var R=I===0?v:E.path(0).pop(),L=R[0],M=R[1],q=I===A.length-1?y:E.path(E.length()-1).pop(),V=q[0],X=q[1],ue=document.createRange();return L.domNode.nodeType===Node.TEXT_NODE?ue.setStart(L.domNode,M):ue.setStartBefore(L.domNode),V.domNode.nodeType===Node.TEXT_NODE?ue.setEnd(V.domNode,X):ue.setEndAfter(V.domNode),D.concat(ue)},[])},c.prototype._transformCursors=function(s){var v=this;s=new f(s),this.cursors().filter(function(y){return y.range}).forEach(function(y){y.range.index=s.transformPosition(y.range.index),v._updateCursor(y)})},c.DEFAULTS={template:g.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},c}();w.default=a},338:function(x,w,T){var S=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(w,"__esModule",{value:!0});var b=S(T(353)),h=`
  <span class="`.concat(b.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(b.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(b.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(b.default.FLAG_CLASS,`">
    <small class="`).concat(b.default.NAME_CLASS,`"></small>
  </div>
`);w.default=h}},C={};function k(x){var w=C[x];if(w!==void 0)return w.exports;var T=C[x]={id:x,loaded:!1,exports:{}};return $[x].call(T.exports,T,T.exports,k),T.loaded=!0,T.exports}k.n=x=>{var w=x&&x.__esModule?()=>x.default:()=>x;return k.d(w,{a:w}),w},k.d=(x,w)=>{for(var T in w)k.o(w,T)&&!k.o(x,T)&&Object.defineProperty(x,T,{enumerable:!0,get:w[T]})},k.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),k.o=(x,w)=>Object.prototype.hasOwnProperty.call(x,w),k.r=x=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},k.nmd=x=>(x.paths=[],x.children||(x.children=[]),x),k.nc=void 0;var _=k(607);return _.default})())})(ku);const ld=Vs(ku.exports);var it=globalThis&&globalThis.__classPrivateFieldSet||function($e,he,$){if(!he.has($e))throw new TypeError("attempted to set private field on non-instance");return he.set($e,$),$},Le=globalThis&&globalThis.__classPrivateFieldGet||function($e,he){if(!he.has($e))throw new TypeError("attempted to get private field on non-instance");return he.get($e)},mi,Di,or,no,Lo,Cr,Lr,Mr,Br,jr,qr,Ur,Jr,Ci,ro,vi,os,yi;const ud=function($e){var he=131,$=137,C=0;$e+="x";var k=Math.floor(9007199254740991/$);for(let _=0;_<$e.length;_++)C>k&&(C=Math.floor(C/$)),C=C*he+$e.charCodeAt(_);return C},Be="0123456789abcdef".split(""),cd=[-2147483648,8388608,32768,128],ir=[24,16,8,0],is=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Vt=[];class fd{constructor(he=!1,$=!1){mi.set(this,void 0),Di.set(this,void 0),or.set(this,void 0),no.set(this,void 0),Lo.set(this,void 0),Cr.set(this,void 0),Lr.set(this,void 0),Mr.set(this,void 0),Br.set(this,void 0),jr.set(this,void 0),qr.set(this,void 0),Ur.set(this,void 0),Jr.set(this,void 0),Ci.set(this,void 0),ro.set(this,void 0),vi.set(this,void 0),os.set(this,0),yi.set(this,void 0),this.init(he,$)}init(he,$){$?(Vt[0]=Vt[16]=Vt[1]=Vt[2]=Vt[3]=Vt[4]=Vt[5]=Vt[6]=Vt[7]=Vt[8]=Vt[9]=Vt[10]=Vt[11]=Vt[12]=Vt[13]=Vt[14]=Vt[15]=0,it(this,Di,Vt)):it(this,Di,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),he?(it(this,Cr,3238371032),it(this,Lr,914150663),it(this,Mr,812702999),it(this,Br,4144912697),it(this,jr,4290775857),it(this,qr,1750603025),it(this,Ur,1694076839),it(this,Jr,3204075428)):(it(this,Cr,1779033703),it(this,Lr,3144134277),it(this,Mr,1013904242),it(this,Br,2773480762),it(this,jr,1359893119),it(this,qr,2600822924),it(this,Ur,528734635),it(this,Jr,1541459225)),it(this,mi,it(this,yi,it(this,or,it(this,ro,0)))),it(this,no,it(this,Ci,!1)),it(this,Lo,!0),it(this,vi,he)}update(he){if(Le(this,no))return this;let $;he instanceof ArrayBuffer?$=new Uint8Array(he):$=he;let C=0;const k=$.length,_=Le(this,Di);for(;C<k;){let x;if(Le(this,Ci)&&(it(this,Ci,!1),_[0]=Le(this,mi),_[16]=_[1]=_[2]=_[3]=_[4]=_[5]=_[6]=_[7]=_[8]=_[9]=_[10]=_[11]=_[12]=_[13]=_[14]=_[15]=0),typeof $!="string")for(x=Le(this,yi);C<k&&x<64;++C)_[x>>2]|=$[C]<<ir[x++&3];else for(x=Le(this,yi);C<k&&x<64;++C){let w=$.charCodeAt(C);w<128?_[x>>2]|=w<<ir[x++&3]:w<2048?(_[x>>2]|=(192|w>>6)<<ir[x++&3],_[x>>2]|=(128|w&63)<<ir[x++&3]):w<55296||w>=57344?(_[x>>2]|=(224|w>>12)<<ir[x++&3],_[x>>2]|=(128|w>>6&63)<<ir[x++&3],_[x>>2]|=(128|w&63)<<ir[x++&3]):(w=65536+((w&1023)<<10|$.charCodeAt(++C)&1023),_[x>>2]|=(240|w>>18)<<ir[x++&3],_[x>>2]|=(128|w>>12&63)<<ir[x++&3],_[x>>2]|=(128|w>>6&63)<<ir[x++&3],_[x>>2]|=(128|w&63)<<ir[x++&3])}it(this,os,x),it(this,or,Le(this,or)+(x-Le(this,yi))),x>=64?(it(this,mi,_[16]),it(this,yi,x-64),this.hash(),it(this,Ci,!0)):it(this,yi,x)}return Le(this,or)>4294967295&&(it(this,ro,Le(this,ro)+(Le(this,or)/4294967296<<0)),it(this,or,Le(this,or)%4294967296)),this}finalize(){if(Le(this,no))return;it(this,no,!0);const he=Le(this,Di),$=Le(this,os);he[16]=Le(this,mi),he[$>>2]|=cd[$&3],it(this,mi,he[16]),$>=56&&(Le(this,Ci)||this.hash(),he[0]=Le(this,mi),he[16]=he[1]=he[2]=he[3]=he[4]=he[5]=he[6]=he[7]=he[8]=he[9]=he[10]=he[11]=he[12]=he[13]=he[14]=he[15]=0),he[14]=Le(this,ro)<<3|Le(this,or)>>>29,he[15]=Le(this,or)<<3,this.hash()}hash(){let he=Le(this,Cr),$=Le(this,Lr),C=Le(this,Mr),k=Le(this,Br),_=Le(this,jr),x=Le(this,qr),w=Le(this,Ur),T=Le(this,Jr);const S=Le(this,Di);let b,h,u,l,d,g,m,f,a,c;for(let s=16;s<64;++s)l=S[s-15],b=(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3,l=S[s-2],h=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,S[s]=S[s-16]+b+S[s-7]+h<<0;c=$&C;for(let s=0;s<64;s+=4)Le(this,Lo)?(Le(this,vi)?(m=300032,l=S[0]-1413257819,T=l-150054599<<0,k=l+24177077<<0):(m=704751109,l=S[0]-210244248,T=l-1521486534<<0,k=l+143694565<<0),it(this,Lo,!1)):(b=(he>>>2|he<<30)^(he>>>13|he<<19)^(he>>>22|he<<10),h=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7),m=he&$,u=m^he&C^c,g=_&x^~_&w,l=T+h+g+is[s]+S[s],d=b+u,T=k+l<<0,k=l+d<<0),b=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),h=(T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7),f=k&he,u=f^k&$^m,g=T&_^~T&x,l=w+h+g+is[s+1]+S[s+1],d=b+u,w=C+l<<0,C=l+d<<0,b=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10),h=(w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7),a=C&k,u=a^C&he^f,g=w&T^~w&_,l=x+h+g+is[s+2]+S[s+2],d=b+u,x=$+l<<0,$=l+d<<0,b=($>>>2|$<<30)^($>>>13|$<<19)^($>>>22|$<<10),h=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),c=$&C,u=c^$&k^a,g=x&w^~x&T,l=_+h+g+is[s+3]+S[s+3],d=b+u,_=he+l<<0,he=l+d<<0;it(this,Cr,Le(this,Cr)+he<<0),it(this,Lr,Le(this,Lr)+$<<0),it(this,Mr,Le(this,Mr)+C<<0),it(this,Br,Le(this,Br)+k<<0),it(this,jr,Le(this,jr)+_<<0),it(this,qr,Le(this,qr)+x<<0),it(this,Ur,Le(this,Ur)+w<<0),it(this,Jr,Le(this,Jr)+T<<0)}hex(){this.finalize();const he=Le(this,Cr),$=Le(this,Lr),C=Le(this,Mr),k=Le(this,Br),_=Le(this,jr),x=Le(this,qr),w=Le(this,Ur),T=Le(this,Jr);let S=Be[he>>28&15]+Be[he>>24&15]+Be[he>>20&15]+Be[he>>16&15]+Be[he>>12&15]+Be[he>>8&15]+Be[he>>4&15]+Be[he&15]+Be[$>>28&15]+Be[$>>24&15]+Be[$>>20&15]+Be[$>>16&15]+Be[$>>12&15]+Be[$>>8&15]+Be[$>>4&15]+Be[$&15]+Be[C>>28&15]+Be[C>>24&15]+Be[C>>20&15]+Be[C>>16&15]+Be[C>>12&15]+Be[C>>8&15]+Be[C>>4&15]+Be[C&15]+Be[k>>28&15]+Be[k>>24&15]+Be[k>>20&15]+Be[k>>16&15]+Be[k>>12&15]+Be[k>>8&15]+Be[k>>4&15]+Be[k&15]+Be[_>>28&15]+Be[_>>24&15]+Be[_>>20&15]+Be[_>>16&15]+Be[_>>12&15]+Be[_>>8&15]+Be[_>>4&15]+Be[_&15]+Be[x>>28&15]+Be[x>>24&15]+Be[x>>20&15]+Be[x>>16&15]+Be[x>>12&15]+Be[x>>8&15]+Be[x>>4&15]+Be[x&15]+Be[w>>28&15]+Be[w>>24&15]+Be[w>>20&15]+Be[w>>16&15]+Be[w>>12&15]+Be[w>>8&15]+Be[w>>4&15]+Be[w&15];return Le(this,vi)||(S+=Be[T>>28&15]+Be[T>>24&15]+Be[T>>20&15]+Be[T>>16&15]+Be[T>>12&15]+Be[T>>8&15]+Be[T>>4&15]+Be[T&15]),S}toString(){return this.hex()}digest(){this.finalize();const he=Le(this,Cr),$=Le(this,Lr),C=Le(this,Mr),k=Le(this,Br),_=Le(this,jr),x=Le(this,qr),w=Le(this,Ur),T=Le(this,Jr),S=[he>>24&255,he>>16&255,he>>8&255,he&255,$>>24&255,$>>16&255,$>>8&255,$&255,C>>24&255,C>>16&255,C>>8&255,C&255,k>>24&255,k>>16&255,k>>8&255,k&255,_>>24&255,_>>16&255,_>>8&255,_&255,x>>24&255,x>>16&255,x>>8&255,x&255,w>>24&255,w>>16&255,w>>8&255,w&255];return Le(this,vi)||S.push(T>>24&255,T>>16&255,T>>8&255,T&255),S}array(){return this.digest()}arrayBuffer(){this.finalize();const he=new ArrayBuffer(Le(this,vi)?28:32),$=new DataView(he);return $.setUint32(0,Le(this,Cr)),$.setUint32(4,Le(this,Lr)),$.setUint32(8,Le(this,Mr)),$.setUint32(12,Le(this,Br)),$.setUint32(16,Le(this,jr)),$.setUint32(20,Le(this,qr)),$.setUint32(24,Le(this,Ur)),Le(this,vi)||$.setUint32(28,Le(this,Jr)),he}}mi=new WeakMap,Di=new WeakMap,or=new WeakMap,no=new WeakMap,Lo=new WeakMap,Cr=new WeakMap,Lr=new WeakMap,Mr=new WeakMap,Br=new WeakMap,jr=new WeakMap,qr=new WeakMap,Ur=new WeakMap,Jr=new WeakMap,Ci=new WeakMap,ro=new WeakMap,vi=new WeakMap,os=new WeakMap,yi=new WeakMap;function hd($e){const he=new fd;return he.update($e),parseInt(he.hex().substring(0,8),16)}const dd=function($e){var he="#";return $e.forEach(function($){$<16&&(he+=0),he+=$.toString(16)}),he},pd=function($e,he,$){$e/=360;var C=$<.5?$*(1+he):$+he-$*he,k=2*$-C;return[$e+1/3,$e,$e-1/3].map(function(_){return _<0&&_++,_>1&&_--,_<1/6?_=k+(C-k)*6*_:_<.5?_=C:_<2/3?_=k+(C-k)*6*(2/3-_):_=k,Math.round(_*255)})};class gd{constructor(he={}){const[$,C]=[he.lightness,he.saturation].map(function(k){return k=k!==void 0?k:[.35,.5,.65],Array.isArray(k)?k.concat():[k]});this.L=$,this.S=C,typeof he.hue=="number"&&(he.hue={min:he.hue,max:he.hue}),typeof he.hue=="object"&&!Array.isArray(he.hue)&&(he.hue=[he.hue]),typeof he.hue>"u"&&(he.hue=[]),this.hueRanges=he.hue.map(function(k){return{min:typeof k.min>"u"?0:k.min,max:typeof k.max>"u"?360:k.max}}),this.hash=hd,typeof he.hash=="function"&&(this.hash=he.hash),he.hash==="bkdr"&&(this.hash=ud)}hsl(he){var $,C,k,_=this.hash(he),x=727;if(this.hueRanges.length){const w=this.hueRanges[_%this.hueRanges.length];$=_/this.hueRanges.length%x*(w.max-w.min)/x+w.min}else $=_%359;return _=Math.ceil(_/360),C=this.S[_%this.S.length],_=Math.ceil(_/this.S.length),k=this.L[_%this.L.length],[$,C,k]}rgb(he){var $=this.hsl(he);return pd.apply(this,$)}hex(he){var $=this.rgb(he);return dd($)}}const Li={isOnline:!1,showOffline:$e=>{Li.isOnline=!1,$e.innerHTML='<span class="red"> </span>'},showOnline:$e=>{Li.isOnline=!0,$e.innerHTML='<span class="green"> </span>'},statusListener:$e=>he=>{Li.isOnline&&he.value==bi.exports.StreamConnectionStatus.Disconnected?Li.showOffline($e):!Li.isOnline&&he.value==bi.exports.StreamConnectionStatus.Connected&&Li.showOnline($e)}};function md($e,he,$){const C=[];for(const{clientID:k,presence:_}of he)C.push($===k?`<b>${_.username}</b>`:_.username);$e.innerHTML=JSON.stringify(C)}function Eu($e,he,$){$e.innerText=$.toJSON(),he.innerText=$.getRoot().content.toTestString()}const vd=document.getElementById("peers"),wu=document.getElementById("document"),Ou=document.getElementById("document-text"),yd=document.getElementById("network-status"),bd=new gd,Td=`vanilla-quill-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`;function $s($e){var C;const{embed:he,...$}=(C=$e.attributes)!=null?C:{};return he?{insert:JSON.parse(he),attributes:$}:{insert:$e.content||"",attributes:$e.attributes}}async function _d(){const $e=new Fs.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});await $e.activate();const he=new Fs.Document(Td,{enableDevtools:!0});he.subscribe("connection",T=>{Li.statusListener(yd)(T)}),he.subscribe("presence",T=>{T.type!==bi.exports.DocEventType.PresenceChanged&&md(vd,he.getPresences(),$e.getID())}),await $e.attach(he,{initialPresence:{username:$e.getID().slice(-2),color:bd.hex($e.getID().slice(-2)),selection:void 0}}),he.update(T=>{T.content||(T.content=new Fs.Text,T.content.edit(0,0,`
`))},"create content if not exists"),he.subscribe(T=>{T.type==="snapshot"&&w(),Eu(wu,Ou,he)}),he.subscribe("$.content",T=>{T.type==="remote-change"&&x(T.value.operations),C()}),he.subscribe("others",T=>{T.type===bi.exports.DocEventType.Unwatched?_.removeCursor(T.value.clientID):T.type===bi.exports.DocEventType.PresenceChanged&&$(T.value)});function $(T){const{clientID:S,presence:b}=T;if(S===$e.getID()||!b)return;const{username:h,color:u,selection:l}=b;if(!l)return;const d=he.getRoot().content.posRangeToIndexRange(l);_.createCursor(S,h,u),_.moveCursor(S,{index:d[0],length:d[1]-d[0]})}function C(){for(const T of he.getPresences())$(T)}await $e.sync(),_u.register("modules/cursors",ld);const k=new _u("#editor",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],["clean"]],cursors:!0},theme:"snow"}),_=k.getModule("cursors");k.on("text-change",(T,S,b)=>{if(b==="api"||!T.ops)return;let h=0,u=0;console.log(`%c quill: ${JSON.stringify(T.ops)}`,"color: green");for(const l of T.ops)l.attributes!==void 0||l.insert!==void 0?(l.retain!==void 0&&(u=h+l.retain),console.log(`%c local: ${h}-${u}: ${l.insert} ${l.attributes?JSON.stringify(l.attributes):"{}"}`,"color: green"),he.update((d,g)=>{let m;l.attributes!==void 0&&l.insert===void 0?d.content.setStyle(h,u,l.attributes):l.insert!==void 0&&(u<h&&(u=h),typeof l.insert=="object"?m=d.content.edit(h,u," ",{embed:JSON.stringify(l.insert),...l.attributes}):m=d.content.edit(h,u,l.insert,l.attributes),h=u+l.insert.length),m&&g.set({selection:d.content.indexRangeToPosRange(m)})},`update style by ${$e.getID()}`)):l.delete!==void 0?(u=h+l.delete,console.log(`%c local: ${h}-${u}: ''`,"color: green"),he.update((d,g)=>{const m=d.content.edit(h,u,"");m&&g.set({selection:d.content.indexRangeToPosRange(m)})},`update content by ${$e.getID()}`)):l.retain!==void 0&&(h=u+l.retain,u=h)}).on("selection-change",(T,S,b)=>{if(!!T){if(b==="api"){const{selection:h}=he.getMyPresence();if(h){const[u,l]=he.getRoot().content.posRangeToIndexRange(h),{index:d,length:g}=T;if(u===d&&l===d+g)return}}he.update((h,u)=>{u.set({selection:h.content.indexRangeToPosRange([T.index,T.index+T.length])})},`update selection by ${$e.getID()}`)}});function x(T){const S=[];let b=0;for(const h of T)if(h.type==="edit"){const u=h.from,l=h.to,d=u-b,g=l-u,{insert:m,attributes:f}=$s(h.value);if(console.log(`%c remote: ${u}-${l}: ${m}`,"color: skyblue"),d&&S.push({retain:d}),g&&S.push({delete:g}),m){const a={insert:m};f&&(a.attributes=f),S.push(a)}b=l}else if(h.type==="style"){const u=h.from,l=h.to,d=u-b,g=l-u,{attributes:m}=$s(h.value);if(console.log(`%c remote: ${u}-${l}: ${JSON.stringify(m)}`,"color: skyblue"),d&&S.push({retain:d}),m){const f={attributes:m};g&&(f.retain=g),S.push(f)}b=l}if(S.length){console.log(`%c to quill: ${JSON.stringify(S)}`,"color: green");const h={ops:S};k.updateContents(h,"api")}}function w(){const S={ops:he.getRoot().content.values().map(b=>$s(b))};k.setContents(S,"api")}w(),C(),Eu(wu,Ou,he)}_d();
