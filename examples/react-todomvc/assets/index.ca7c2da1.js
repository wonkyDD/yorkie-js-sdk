(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerpolicy&&(u.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?u.credentials="include":c.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ll={},Uh={exports:{}},At={},Dn={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Us=Symbol.for("react.element"),Gv=Symbol.for("react.portal"),Yv=Symbol.for("react.fragment"),Qv=Symbol.for("react.strict_mode"),Xv=Symbol.for("react.profiler"),Zv=Symbol.for("react.provider"),e0=Symbol.for("react.context"),t0=Symbol.for("react.forward_ref"),n0=Symbol.for("react.suspense"),r0=Symbol.for("react.memo"),i0=Symbol.for("react.lazy"),Od=Symbol.iterator;function s0(t){return t===null||typeof t!="object"?null:(t=Od&&t[Od]||t["@@iterator"],typeof t=="function"?t:null)}var zh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jh=Object.assign,Vh={};function Ii(t,n,s){this.props=t,this.context=n,this.refs=Vh,this.updater=s||zh}Ii.prototype.isReactComponent={};Ii.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};Ii.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jh(){}Jh.prototype=Ii.prototype;function Pu(t,n,s){this.props=t,this.context=n,this.refs=Vh,this.updater=s||zh}var Ou=Pu.prototype=new Jh;Ou.constructor=Pu;jh(Ou,Ii.prototype);Ou.isPureReactComponent=!0;var Dd=Array.isArray,Kh=Object.prototype.hasOwnProperty,Du={current:null},Wh={key:!0,ref:!0,__self:!0,__source:!0};function qh(t,n,s){var l,c={},u=null,h=null;if(n!=null)for(l in n.ref!==void 0&&(h=n.ref),n.key!==void 0&&(u=""+n.key),n)Kh.call(n,l)&&!Wh.hasOwnProperty(l)&&(c[l]=n[l]);var m=arguments.length-2;if(m===1)c.children=s;else if(1<m){for(var y=Array(m),T=0;T<m;T++)y[T]=arguments[T+2];c.children=y}if(t&&t.defaultProps)for(l in m=t.defaultProps,m)c[l]===void 0&&(c[l]=m[l]);return{$$typeof:Us,type:t,key:u,ref:h,props:c,_owner:Du.current}}function o0(t,n){return{$$typeof:Us,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function Ru(t){return typeof t=="object"&&t!==null&&t.$$typeof===Us}function a0(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return n[s]})}var Rd=/\/+/g;function ul(t,n){return typeof t=="object"&&t!==null&&t.key!=null?a0(""+t.key):n.toString(36)}function bo(t,n,s,l,c){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case Us:case Gv:h=!0}}if(h)return h=t,c=c(h),t=l===""?"."+ul(h,0):l,Dd(c)?(s="",t!=null&&(s=t.replace(Rd,"$&/")+"/"),bo(c,n,s,"",function(T){return T})):c!=null&&(Ru(c)&&(c=o0(c,s+(!c.key||h&&h.key===c.key?"":(""+c.key).replace(Rd,"$&/")+"/")+t)),n.push(c)),1;if(h=0,l=l===""?".":l+":",Dd(t))for(var m=0;m<t.length;m++){u=t[m];var y=l+ul(u,m);h+=bo(u,n,s,y,c)}else if(y=s0(t),typeof y=="function")for(t=y.call(t),m=0;!(u=t.next()).done;)u=u.value,y=l+ul(u,m++),h+=bo(u,n,s,y,c);else if(u==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return h}function yo(t,n,s){if(t==null)return t;var l=[],c=0;return bo(t,l,"","",function(u){return n.call(s,u,c++)}),l}function l0(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var it={current:null},Lo={transition:null},u0={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:Lo,ReactCurrentOwner:Du};ie.Children={map:yo,forEach:function(t,n,s){yo(t,function(){n.apply(this,arguments)},s)},count:function(t){var n=0;return yo(t,function(){n++}),n},toArray:function(t){return yo(t,function(n){return n})||[]},only:function(t){if(!Ru(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Ii;ie.Fragment=Yv;ie.Profiler=Xv;ie.PureComponent=Pu;ie.StrictMode=Qv;ie.Suspense=n0;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u0;ie.cloneElement=function(t,n,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var l=jh({},t.props),c=t.key,u=t.ref,h=t._owner;if(n!=null){if(n.ref!==void 0&&(u=n.ref,h=Du.current),n.key!==void 0&&(c=""+n.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(y in n)Kh.call(n,y)&&!Wh.hasOwnProperty(y)&&(l[y]=n[y]===void 0&&m!==void 0?m[y]:n[y])}var y=arguments.length-2;if(y===1)l.children=s;else if(1<y){m=Array(y);for(var T=0;T<y;T++)m[T]=arguments[T+2];l.children=m}return{$$typeof:Us,type:t.type,key:c,ref:u,props:l,_owner:h}};ie.createContext=function(t){return t={$$typeof:e0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zv,_context:t},t.Consumer=t};ie.createElement=qh;ie.createFactory=function(t){var n=qh.bind(null,t);return n.type=t,n};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:t0,render:t}};ie.isValidElement=Ru;ie.lazy=function(t){return{$$typeof:i0,_payload:{_status:-1,_result:t},_init:l0}};ie.memo=function(t,n){return{$$typeof:r0,type:t,compare:n===void 0?null:n}};ie.startTransition=function(t){var n=Lo.transition;Lo.transition={};try{t()}finally{Lo.transition=n}};ie.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ie.useCallback=function(t,n){return it.current.useCallback(t,n)};ie.useContext=function(t){return it.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return it.current.useDeferredValue(t)};ie.useEffect=function(t,n){return it.current.useEffect(t,n)};ie.useId=function(){return it.current.useId()};ie.useImperativeHandle=function(t,n,s){return it.current.useImperativeHandle(t,n,s)};ie.useInsertionEffect=function(t,n){return it.current.useInsertionEffect(t,n)};ie.useLayoutEffect=function(t,n){return it.current.useLayoutEffect(t,n)};ie.useMemo=function(t,n){return it.current.useMemo(t,n)};ie.useReducer=function(t,n,s){return it.current.useReducer(t,n,s)};ie.useRef=function(t){return it.current.useRef(t)};ie.useState=function(t){return it.current.useState(t)};ie.useSyncExternalStore=function(t,n,s){return it.current.useSyncExternalStore(t,n,s)};ie.useTransition=function(){return it.current.useTransition()};ie.version="18.2.0";(function(t){t.exports=ie})(Dn);var Hh={exports:{}},Gh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(U,X){var Z=U.length;U.push(X);e:for(;0<Z;){var we=Z-1>>>1,De=U[we];if(0<c(De,X))U[we]=X,U[Z]=De,Z=we;else break e}}function s(U){return U.length===0?null:U[0]}function l(U){if(U.length===0)return null;var X=U[0],Z=U.pop();if(Z!==X){U[0]=Z;e:for(var we=0,De=U.length,Br=De>>>1;we<Br;){var de=2*(we+1)-1,C=U[de],Ke=de+1,pt=U[Ke];if(0>c(C,Z))Ke<De&&0>c(pt,C)?(U[we]=pt,U[Ke]=Z,we=Ke):(U[we]=C,U[de]=Z,we=de);else if(Ke<De&&0>c(pt,Z))U[we]=pt,U[Ke]=Z,we=Ke;else break e}}return X}function c(U,X){var Z=U.sortIndex-X.sortIndex;return Z!==0?Z:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();t.unstable_now=function(){return h.now()-m}}var y=[],T=[],N=1,O=null,x=3,M=!1,B=!1,F=!1,ce=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var X=s(T);X!==null;){if(X.callback===null)l(T);else if(X.startTime<=U)l(T),X.sortIndex=X.expirationTime,n(y,X);else break;X=s(T)}}function _(U){if(F=!1,A(U),!B)if(s(y)!==null)B=!0,Mr(z);else{var X=s(T);X!==null&&Pi(_,X.startTime-U)}}function z(U,X){B=!1,F&&(F=!1,k(H),H=-1),M=!0;var Z=x;try{for(A(X),O=s(y);O!==null&&(!(O.expirationTime>X)||U&&!ht());){var we=O.callback;if(typeof we=="function"){O.callback=null,x=O.priorityLevel;var De=we(O.expirationTime<=X);X=t.unstable_now(),typeof De=="function"?O.callback=De:O===s(y)&&l(y),A(X)}else l(y);O=s(y)}if(O!==null)var Br=!0;else{var de=s(T);de!==null&&Pi(_,de.startTime-X),Br=!1}return Br}finally{O=null,x=Z,M=!1}}var V=!1,J=null,H=-1,te=5,ne=-1;function ht(){return!(t.unstable_now()-ne<te)}function mn(){if(J!==null){var U=t.unstable_now();ne=U;var X=!0;try{X=J(!0,U)}finally{X?Yt():(V=!1,J=null)}}else V=!1}var Yt;if(typeof w=="function")Yt=function(){w(mn)};else if(typeof MessageChannel<"u"){var xi=new MessageChannel,Ra=xi.port2;xi.port1.onmessage=mn,Yt=function(){Ra.postMessage(null)}}else Yt=function(){ce(mn,0)};function Mr(U){J=U,V||(V=!0,Yt())}function Pi(U,X){H=ce(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){B||M||(B=!0,Mr(z))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return s(y)},t.unstable_next=function(U){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var Z=x;x=X;try{return U()}finally{x=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=x;x=U;try{return X()}finally{x=Z}},t.unstable_scheduleCallback=function(U,X,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,U){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Z+De,U={id:N++,callback:X,priorityLevel:U,startTime:Z,expirationTime:De,sortIndex:-1},Z>we?(U.sortIndex=Z,n(T,U),s(y)===null&&U===s(T)&&(F?(k(H),H=-1):F=!0,Pi(_,Z-we))):(U.sortIndex=De,n(y,U),B||M||(B=!0,Mr(z))),U},t.unstable_shouldYield=ht,t.unstable_wrapCallback=function(U){var X=x;return function(){var Z=x;x=X;try{return U.apply(this,arguments)}finally{x=Z}}}})(Gh);(function(t){t.exports=Gh})(Hh);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh=Dn.exports,kt=Hh.exports;function b(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qh=new Set,As={};function br(t,n){yi(t,n),yi(t+"Capture",n)}function yi(t,n){for(As[t]=n,t=0;t<n.length;t++)Qh.add(n[t])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ml=Object.prototype.hasOwnProperty,c0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_d={},bd={};function f0(t){return Ml.call(bd,t)?!0:Ml.call(_d,t)?!1:c0.test(t)?bd[t]=!0:(_d[t]=!0,!1)}function d0(t,n,s,l){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function h0(t,n,s,l){if(n===null||typeof n>"u"||d0(t,n,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function st(t,n,s,l,c,u,h){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=t,this.type=n,this.sanitizeURL=u,this.removeEmptyString=h}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new st(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Je[n]=new st(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new st(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new st(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new st(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new st(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new st(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new st(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new st(t,5,!1,t.toLowerCase(),null,!1,!1)});var _u=/[\-:]([a-z])/g;function bu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(_u,bu);Je[n]=new st(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(_u,bu);Je[n]=new st(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(_u,bu);Je[n]=new st(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new st(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new st(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lu(t,n,s,l){var c=Je.hasOwnProperty(n)?Je[n]:null;(c!==null?c.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(h0(n,s,c,l)&&(s=null),l||c===null?f0(n)&&(s===null?t.removeAttribute(n):t.setAttribute(n,""+s)):c.mustUseProperty?t[c.propertyName]=s===null?c.type===3?!1:"":s:(n=c.attributeName,l=c.attributeNamespace,s===null?t.removeAttribute(n):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,l?t.setAttributeNS(l,n,s):t.setAttribute(n,s))))}var Bn=Yh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vo=Symbol.for("react.element"),Zr=Symbol.for("react.portal"),ei=Symbol.for("react.fragment"),Mu=Symbol.for("react.strict_mode"),Bl=Symbol.for("react.profiler"),Xh=Symbol.for("react.provider"),Zh=Symbol.for("react.context"),Bu=Symbol.for("react.forward_ref"),$l=Symbol.for("react.suspense"),Fl=Symbol.for("react.suspense_list"),$u=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),ep=Symbol.for("react.offscreen"),Ld=Symbol.iterator;function ns(t){return t===null||typeof t!="object"?null:(t=Ld&&t[Ld]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,cl;function cs(t){if(cl===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);cl=n&&n[1]||""}return`
`+cl+t}var fl=!1;function dl(t,n){if(!t||fl)return"";fl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(T){var l=T}Reflect.construct(t,[],n)}else{try{n.call()}catch(T){l=T}t.call(n.prototype)}else{try{throw Error()}catch(T){l=T}t()}}catch(T){if(T&&l&&typeof T.stack=="string"){for(var c=T.stack.split(`
`),u=l.stack.split(`
`),h=c.length-1,m=u.length-1;1<=h&&0<=m&&c[h]!==u[m];)m--;for(;1<=h&&0<=m;h--,m--)if(c[h]!==u[m]){if(h!==1||m!==1)do if(h--,m--,0>m||c[h]!==u[m]){var y=`
`+c[h].replace(" at new "," at ");return t.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",t.displayName)),y}while(1<=h&&0<=m);break}}}finally{fl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?cs(t):""}function p0(t){switch(t.tag){case 5:return cs(t.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return t=dl(t.type,!1),t;case 11:return t=dl(t.type.render,!1),t;case 1:return t=dl(t.type,!0),t;default:return""}}function Ul(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ei:return"Fragment";case Zr:return"Portal";case Bl:return"Profiler";case Mu:return"StrictMode";case $l:return"Suspense";case Fl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zh:return(t.displayName||"Context")+".Consumer";case Xh:return(t._context.displayName||"Context")+".Provider";case Bu:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $u:return n=t.displayName||null,n!==null?n:Ul(t.type)||"Memo";case Wn:n=t._payload,t=t._init;try{return Ul(t(n))}catch{}}return null}function g0(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ul(n);case 8:return n===Mu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tp(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function m0(t){var n=tp(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,u=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(h){l=""+h,u.call(this,h)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(h){l=""+h},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function wo(t){t._valueTracker||(t._valueTracker=m0(t))}function np(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return t&&(l=tp(t)?t.checked?"true":"false":t.value),t=l,t!==s?(n.setValue(t),!0):!1}function Wo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zl(t,n){var s=n.checked;return Ce({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s!=null?s:t._wrapperState.initialChecked})}function Md(t,n){var s=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;s=or(n.value!=null?n.value:s),t._wrapperState={initialChecked:l,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function rp(t,n){n=n.checked,n!=null&&Lu(t,"checked",n,!1)}function jl(t,n){rp(t,n);var s=or(n.value),l=n.type;if(s!=null)l==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(l==="submit"||l==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Vl(t,n.type,s):n.hasOwnProperty("defaultValue")&&Vl(t,n.type,or(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Bd(t,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,s||n===t.value||(t.value=n),t.defaultValue=n}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Vl(t,n,s){(n!=="number"||Wo(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var fs=Array.isArray;function fi(t,n,s,l){if(t=t.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=n.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&l&&(t[s].defaultSelected=!0)}else{for(s=""+or(s),n=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Jl(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(b(91));return Ce({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $d(t,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(b(92));if(fs(s)){if(1<s.length)throw Error(b(93));s=s[0]}n=s}n==null&&(n=""),s=n}t._wrapperState={initialValue:or(s)}}function ip(t,n){var s=or(n.value),l=or(n.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),n.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),l!=null&&(t.defaultValue=""+l)}function Fd(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function sp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kl(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?sp(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var So,op=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,l,c){MSApp.execUnsafeLocalFunction(function(){return t(n,s,l,c)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(So=So||document.createElement("div"),So.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=So.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Es(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y0=["Webkit","ms","Moz","O"];Object.keys(ps).forEach(function(t){y0.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),ps[n]=ps[t]})});function ap(t,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||ps.hasOwnProperty(t)&&ps[t]?(""+n).trim():n+"px"}function lp(t,n){t=t.style;for(var s in n)if(n.hasOwnProperty(s)){var l=s.indexOf("--")===0,c=ap(s,n[s],l);s==="float"&&(s="cssFloat"),l?t.setProperty(s,c):t[s]=c}}var v0=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wl(t,n){if(n){if(v0[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(b(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(b(61))}if(n.style!=null&&typeof n.style!="object")throw Error(b(62))}}function ql(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hl=null;function Fu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gl=null,di=null,hi=null;function Ud(t){if(t=Vs(t)){if(typeof Gl!="function")throw Error(b(280));var n=t.stateNode;n&&(n=Sa(n),Gl(t.stateNode,t.type,n))}}function up(t){di?hi?hi.push(t):hi=[t]:di=t}function cp(){if(di){var t=di,n=hi;if(hi=di=null,Ud(t),n)for(t=0;t<n.length;t++)Ud(n[t])}}function fp(t,n){return t(n)}function dp(){}var hl=!1;function hp(t,n,s){if(hl)return t(n,s);hl=!0;try{return fp(t,n,s)}finally{hl=!1,(di!==null||hi!==null)&&(dp(),cp())}}function Is(t,n){var s=t.stateNode;if(s===null)return null;var l=Sa(s);if(l===null)return null;s=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(b(231,n,typeof s));return s}var Yl=!1;if(_n)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{Yl=!1}function w0(t,n,s,l,c,u,h,m,y){var T=Array.prototype.slice.call(arguments,3);try{n.apply(s,T)}catch(N){this.onError(N)}}var gs=!1,qo=null,Ho=!1,Ql=null,S0={onError:function(t){gs=!0,qo=t}};function T0(t,n,s,l,c,u,h,m,y){gs=!1,qo=null,w0.apply(S0,arguments)}function k0(t,n,s,l,c,u,h,m,y){if(T0.apply(this,arguments),gs){if(gs){var T=qo;gs=!1,qo=null}else throw Error(b(198));Ho||(Ho=!0,Ql=T)}}function Lr(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function pp(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function zd(t){if(Lr(t)!==t)throw Error(b(188))}function A0(t){var n=t.alternate;if(!n){if(n=Lr(t),n===null)throw Error(b(188));return n!==t?null:t}for(var s=t,l=n;;){var c=s.return;if(c===null)break;var u=c.alternate;if(u===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===s)return zd(c),t;if(u===l)return zd(c),n;u=u.sibling}throw Error(b(188))}if(s.return!==l.return)s=c,l=u;else{for(var h=!1,m=c.child;m;){if(m===s){h=!0,s=c,l=u;break}if(m===l){h=!0,l=c,s=u;break}m=m.sibling}if(!h){for(m=u.child;m;){if(m===s){h=!0,s=u,l=c;break}if(m===l){h=!0,l=u,s=c;break}m=m.sibling}if(!h)throw Error(b(189))}}if(s.alternate!==l)throw Error(b(190))}if(s.tag!==3)throw Error(b(188));return s.stateNode.current===s?t:n}function gp(t){return t=A0(t),t!==null?mp(t):null}function mp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=mp(t);if(n!==null)return n;t=t.sibling}return null}var yp=kt.unstable_scheduleCallback,jd=kt.unstable_cancelCallback,E0=kt.unstable_shouldYield,I0=kt.unstable_requestPaint,Oe=kt.unstable_now,C0=kt.unstable_getCurrentPriorityLevel,Uu=kt.unstable_ImmediatePriority,vp=kt.unstable_UserBlockingPriority,Go=kt.unstable_NormalPriority,N0=kt.unstable_LowPriority,wp=kt.unstable_IdlePriority,ma=null,pn=null;function x0(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ma,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:D0,P0=Math.log,O0=Math.LN2;function D0(t){return t>>>=0,t===0?32:31-(P0(t)/O0|0)|0}var To=64,ko=4194304;function ds(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yo(t,n){var s=t.pendingLanes;if(s===0)return 0;var l=0,c=t.suspendedLanes,u=t.pingedLanes,h=s&268435455;if(h!==0){var m=h&~c;m!==0?l=ds(m):(u&=h,u!==0&&(l=ds(u)))}else h=s&~c,h!==0?l=ds(h):u!==0&&(l=ds(u));if(l===0)return 0;if(n!==0&&n!==l&&(n&c)===0&&(c=l&-l,u=n&-n,c>=u||c===16&&(u&4194240)!==0))return n;if((l&4)!==0&&(l|=s&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=l;0<n;)s=31-qt(n),c=1<<s,l|=t[s],n&=~c;return l}function R0(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _0(t,n){for(var s=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,u=t.pendingLanes;0<u;){var h=31-qt(u),m=1<<h,y=c[h];y===-1?((m&s)===0||(m&l)!==0)&&(c[h]=R0(m,n)):y<=n&&(t.expiredLanes|=m),u&=~m}}function Xl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sp(){var t=To;return To<<=1,(To&4194240)===0&&(To=64),t}function pl(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function zs(t,n,s){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-qt(n),t[n]=s}function b0(t,n){var s=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var l=t.eventTimes;for(t=t.expirationTimes;0<s;){var c=31-qt(s),u=1<<c;n[c]=0,l[c]=-1,t[c]=-1,s&=~u}}function zu(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var l=31-qt(s),c=1<<l;c&n|t[l]&n&&(t[l]|=n),s&=~c}}var fe=0;function Tp(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var kp,ju,Ap,Ep,Ip,Zl=!1,Ao=[],Xn=null,Zn=null,er=null,Cs=new Map,Ns=new Map,Hn=[],L0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vd(t,n){switch(t){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Cs.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ns.delete(n.pointerId)}}function is(t,n,s,l,c,u){return t===null||t.nativeEvent!==u?(t={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:u,targetContainers:[c]},n!==null&&(n=Vs(n),n!==null&&ju(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function M0(t,n,s,l,c){switch(n){case"focusin":return Xn=is(Xn,t,n,s,l,c),!0;case"dragenter":return Zn=is(Zn,t,n,s,l,c),!0;case"mouseover":return er=is(er,t,n,s,l,c),!0;case"pointerover":var u=c.pointerId;return Cs.set(u,is(Cs.get(u)||null,t,n,s,l,c)),!0;case"gotpointercapture":return u=c.pointerId,Ns.set(u,is(Ns.get(u)||null,t,n,s,l,c)),!0}return!1}function Cp(t){var n=Er(t.target);if(n!==null){var s=Lr(n);if(s!==null){if(n=s.tag,n===13){if(n=pp(s),n!==null){t.blockedOn=n,Ip(t.priority,function(){Ap(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mo(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=eu(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Hl=l,s.target.dispatchEvent(l),Hl=null}else return n=Vs(s),n!==null&&ju(n),t.blockedOn=s,!1;n.shift()}return!0}function Jd(t,n,s){Mo(t)&&s.delete(n)}function B0(){Zl=!1,Xn!==null&&Mo(Xn)&&(Xn=null),Zn!==null&&Mo(Zn)&&(Zn=null),er!==null&&Mo(er)&&(er=null),Cs.forEach(Jd),Ns.forEach(Jd)}function ss(t,n){t.blockedOn===n&&(t.blockedOn=null,Zl||(Zl=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,B0)))}function xs(t){function n(c){return ss(c,t)}if(0<Ao.length){ss(Ao[0],t);for(var s=1;s<Ao.length;s++){var l=Ao[s];l.blockedOn===t&&(l.blockedOn=null)}}for(Xn!==null&&ss(Xn,t),Zn!==null&&ss(Zn,t),er!==null&&ss(er,t),Cs.forEach(n),Ns.forEach(n),s=0;s<Hn.length;s++)l=Hn[s],l.blockedOn===t&&(l.blockedOn=null);for(;0<Hn.length&&(s=Hn[0],s.blockedOn===null);)Cp(s),s.blockedOn===null&&Hn.shift()}var pi=Bn.ReactCurrentBatchConfig,Qo=!0;function $0(t,n,s,l){var c=fe,u=pi.transition;pi.transition=null;try{fe=1,Vu(t,n,s,l)}finally{fe=c,pi.transition=u}}function F0(t,n,s,l){var c=fe,u=pi.transition;pi.transition=null;try{fe=4,Vu(t,n,s,l)}finally{fe=c,pi.transition=u}}function Vu(t,n,s,l){if(Qo){var c=eu(t,n,s,l);if(c===null)El(t,n,l,Xo,s),Vd(t,l);else if(M0(c,t,n,s,l))l.stopPropagation();else if(Vd(t,l),n&4&&-1<L0.indexOf(t)){for(;c!==null;){var u=Vs(c);if(u!==null&&kp(u),u=eu(t,n,s,l),u===null&&El(t,n,l,Xo,s),u===c)break;c=u}c!==null&&l.stopPropagation()}else El(t,n,l,null,s)}}var Xo=null;function eu(t,n,s,l){if(Xo=null,t=Fu(l),t=Er(t),t!==null)if(n=Lr(t),n===null)t=null;else if(s=n.tag,s===13){if(t=pp(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Xo=t,null}function Np(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C0()){case Uu:return 1;case vp:return 4;case Go:case N0:return 16;case wp:return 536870912;default:return 16}default:return 16}}var Yn=null,Ju=null,Bo=null;function xp(){if(Bo)return Bo;var t,n=Ju,s=n.length,l,c="value"in Yn?Yn.value:Yn.textContent,u=c.length;for(t=0;t<s&&n[t]===c[t];t++);var h=s-t;for(l=1;l<=h&&n[s-l]===c[u-l];l++);return Bo=c.slice(t,1<l?1-l:void 0)}function $o(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Eo(){return!0}function Kd(){return!1}function Et(t){function n(s,l,c,u,h){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(s=t[m],this[m]=s?s(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Eo:Kd,this.isPropagationStopped=Kd,this}return Ce(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),n}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ku=Et(Ci),js=Ce({},Ci,{view:0,detail:0}),U0=Et(js),gl,ml,os,ya=Ce({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==os&&(os&&t.type==="mousemove"?(gl=t.screenX-os.screenX,ml=t.screenY-os.screenY):ml=gl=0,os=t),gl)},movementY:function(t){return"movementY"in t?t.movementY:ml}}),Wd=Et(ya),z0=Ce({},ya,{dataTransfer:0}),j0=Et(z0),V0=Ce({},js,{relatedTarget:0}),yl=Et(V0),J0=Ce({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),K0=Et(J0),W0=Ce({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),q0=Et(W0),H0=Ce({},Ci,{data:0}),qd=Et(H0),G0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X0(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Q0[t])?!!n[t]:!1}function Wu(){return X0}var Z0=Ce({},js,{key:function(t){if(t.key){var n=G0[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=$o(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wu,charCode:function(t){return t.type==="keypress"?$o(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$o(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),e1=Et(Z0),t1=Ce({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hd=Et(t1),n1=Ce({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wu}),r1=Et(n1),i1=Ce({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),s1=Et(i1),o1=Ce({},ya,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),a1=Et(o1),l1=[9,13,27,32],qu=_n&&"CompositionEvent"in window,ms=null;_n&&"documentMode"in document&&(ms=document.documentMode);var u1=_n&&"TextEvent"in window&&!ms,Pp=_n&&(!qu||ms&&8<ms&&11>=ms),Gd=String.fromCharCode(32),Yd=!1;function Op(t,n){switch(t){case"keyup":return l1.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ti=!1;function c1(t,n){switch(t){case"compositionend":return Dp(n);case"keypress":return n.which!==32?null:(Yd=!0,Gd);case"textInput":return t=n.data,t===Gd&&Yd?null:t;default:return null}}function f1(t,n){if(ti)return t==="compositionend"||!qu&&Op(t,n)?(t=xp(),Bo=Ju=Yn=null,ti=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Pp&&n.locale!=="ko"?null:n.data;default:return null}}var d1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!d1[t.type]:n==="textarea"}function Rp(t,n,s,l){up(l),n=Zo(n,"onChange"),0<n.length&&(s=new Ku("onChange","change",null,s,l),t.push({event:s,listeners:n}))}var ys=null,Ps=null;function h1(t){Vp(t,0)}function va(t){var n=ii(t);if(np(n))return t}function p1(t,n){if(t==="change")return n}var _p=!1;if(_n){var vl;if(_n){var wl="oninput"in document;if(!wl){var Xd=document.createElement("div");Xd.setAttribute("oninput","return;"),wl=typeof Xd.oninput=="function"}vl=wl}else vl=!1;_p=vl&&(!document.documentMode||9<document.documentMode)}function Zd(){ys&&(ys.detachEvent("onpropertychange",bp),Ps=ys=null)}function bp(t){if(t.propertyName==="value"&&va(Ps)){var n=[];Rp(n,Ps,t,Fu(t)),hp(h1,n)}}function g1(t,n,s){t==="focusin"?(Zd(),ys=n,Ps=s,ys.attachEvent("onpropertychange",bp)):t==="focusout"&&Zd()}function m1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return va(Ps)}function y1(t,n){if(t==="click")return va(n)}function v1(t,n){if(t==="input"||t==="change")return va(n)}function w1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Gt=typeof Object.is=="function"?Object.is:w1;function Os(t,n){if(Gt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!Ml.call(n,c)||!Gt(t[c],n[c]))return!1}return!0}function eh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function th(t,n){var s=eh(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=n&&l>=n)return{node:s,offset:n-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=eh(s)}}function Lp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Lp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Mp(){for(var t=window,n=Wo();n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Wo(t.document)}return n}function Hu(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function S1(t){var n=Mp(),s=t.focusedElem,l=t.selectionRange;if(n!==s&&s&&s.ownerDocument&&Lp(s.ownerDocument.documentElement,s)){if(l!==null&&Hu(s)){if(n=l.start,t=l.end,t===void 0&&(t=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(t,s.value.length);else if(t=(n=s.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var c=s.textContent.length,u=Math.min(l.start,c);l=l.end===void 0?u:Math.min(l.end,c),!t.extend&&u>l&&(c=l,l=u,u=c),c=th(s,u);var h=th(s,l);c&&h&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),t.removeAllRanges(),u>l?(t.addRange(n),t.extend(h.node,h.offset)):(n.setEnd(h.node,h.offset),t.addRange(n)))}}for(n=[],t=s;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)t=n[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T1=_n&&"documentMode"in document&&11>=document.documentMode,ni=null,tu=null,vs=null,nu=!1;function nh(t,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;nu||ni==null||ni!==Wo(l)||(l=ni,"selectionStart"in l&&Hu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),vs&&Os(vs,l)||(vs=l,l=Zo(tu,"onSelect"),0<l.length&&(n=new Ku("onSelect","select",null,n,s),t.push({event:n,listeners:l}),n.target=ni)))}function Io(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var ri={animationend:Io("Animation","AnimationEnd"),animationiteration:Io("Animation","AnimationIteration"),animationstart:Io("Animation","AnimationStart"),transitionend:Io("Transition","TransitionEnd")},Sl={},Bp={};_n&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),"TransitionEvent"in window||delete ri.transitionend.transition);function wa(t){if(Sl[t])return Sl[t];if(!ri[t])return t;var n=ri[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in Bp)return Sl[t]=n[s];return t}var $p=wa("animationend"),Fp=wa("animationiteration"),Up=wa("animationstart"),zp=wa("transitionend"),jp=new Map,rh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(t,n){jp.set(t,n),br(n,[t])}for(var Tl=0;Tl<rh.length;Tl++){var kl=rh[Tl],k1=kl.toLowerCase(),A1=kl[0].toUpperCase()+kl.slice(1);lr(k1,"on"+A1)}lr($p,"onAnimationEnd");lr(Fp,"onAnimationIteration");lr(Up,"onAnimationStart");lr("dblclick","onDoubleClick");lr("focusin","onFocus");lr("focusout","onBlur");lr(zp,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));br("onBeforeInput",["compositionend","keypress","textInput","paste"]);br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1=new Set("cancel close invalid load scroll toggle".split(" ").concat(hs));function ih(t,n,s){var l=t.type||"unknown-event";t.currentTarget=s,k0(l,n,void 0,t),t.currentTarget=null}function Vp(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],c=l.event;l=l.listeners;e:{var u=void 0;if(n)for(var h=l.length-1;0<=h;h--){var m=l[h],y=m.instance,T=m.currentTarget;if(m=m.listener,y!==u&&c.isPropagationStopped())break e;ih(c,m,T),u=y}else for(h=0;h<l.length;h++){if(m=l[h],y=m.instance,T=m.currentTarget,m=m.listener,y!==u&&c.isPropagationStopped())break e;ih(c,m,T),u=y}}}if(Ho)throw t=Ql,Ho=!1,Ql=null,t}function ye(t,n){var s=n[au];s===void 0&&(s=n[au]=new Set);var l=t+"__bubble";s.has(l)||(Jp(n,t,2,!1),s.add(l))}function Al(t,n,s){var l=0;n&&(l|=4),Jp(s,t,l,n)}var Co="_reactListening"+Math.random().toString(36).slice(2);function Ds(t){if(!t[Co]){t[Co]=!0,Qh.forEach(function(s){s!=="selectionchange"&&(E1.has(s)||Al(s,!1,t),Al(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Co]||(n[Co]=!0,Al("selectionchange",!1,n))}}function Jp(t,n,s,l){switch(Np(n)){case 1:var c=$0;break;case 4:c=F0;break;default:c=Vu}s=c.bind(null,n,s,t),c=void 0,!Yl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,s,{capture:!0,passive:c}):t.addEventListener(n,s,!0):c!==void 0?t.addEventListener(n,s,{passive:c}):t.addEventListener(n,s,!1)}function El(t,n,s,l,c){var u=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var m=l.stateNode.containerInfo;if(m===c||m.nodeType===8&&m.parentNode===c)break;if(h===4)for(h=l.return;h!==null;){var y=h.tag;if((y===3||y===4)&&(y=h.stateNode.containerInfo,y===c||y.nodeType===8&&y.parentNode===c))return;h=h.return}for(;m!==null;){if(h=Er(m),h===null)return;if(y=h.tag,y===5||y===6){l=u=h;continue e}m=m.parentNode}}l=l.return}hp(function(){var T=u,N=Fu(s),O=[];e:{var x=jp.get(t);if(x!==void 0){var M=Ku,B=t;switch(t){case"keypress":if($o(s)===0)break e;case"keydown":case"keyup":M=e1;break;case"focusin":B="focus",M=yl;break;case"focusout":B="blur",M=yl;break;case"beforeblur":case"afterblur":M=yl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=j0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=r1;break;case $p:case Fp:case Up:M=K0;break;case zp:M=s1;break;case"scroll":M=U0;break;case"wheel":M=a1;break;case"copy":case"cut":case"paste":M=q0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Hd}var F=(n&4)!==0,ce=!F&&t==="scroll",k=F?x!==null?x+"Capture":null:x;F=[];for(var w=T,A;w!==null;){A=w;var _=A.stateNode;if(A.tag===5&&_!==null&&(A=_,k!==null&&(_=Is(w,k),_!=null&&F.push(Rs(w,_,A)))),ce)break;w=w.return}0<F.length&&(x=new M(x,B,null,s,N),O.push({event:x,listeners:F}))}}if((n&7)===0){e:{if(x=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",x&&s!==Hl&&(B=s.relatedTarget||s.fromElement)&&(Er(B)||B[bn]))break e;if((M||x)&&(x=N.window===N?N:(x=N.ownerDocument)?x.defaultView||x.parentWindow:window,M?(B=s.relatedTarget||s.toElement,M=T,B=B?Er(B):null,B!==null&&(ce=Lr(B),B!==ce||B.tag!==5&&B.tag!==6)&&(B=null)):(M=null,B=T),M!==B)){if(F=Wd,_="onMouseLeave",k="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(F=Hd,_="onPointerLeave",k="onPointerEnter",w="pointer"),ce=M==null?x:ii(M),A=B==null?x:ii(B),x=new F(_,w+"leave",M,s,N),x.target=ce,x.relatedTarget=A,_=null,Er(N)===T&&(F=new F(k,w+"enter",B,s,N),F.target=A,F.relatedTarget=ce,_=F),ce=_,M&&B)t:{for(F=M,k=B,w=0,A=F;A;A=Xr(A))w++;for(A=0,_=k;_;_=Xr(_))A++;for(;0<w-A;)F=Xr(F),w--;for(;0<A-w;)k=Xr(k),A--;for(;w--;){if(F===k||k!==null&&F===k.alternate)break t;F=Xr(F),k=Xr(k)}F=null}else F=null;M!==null&&sh(O,x,M,F,!1),B!==null&&ce!==null&&sh(O,ce,B,F,!0)}}e:{if(x=T?ii(T):window,M=x.nodeName&&x.nodeName.toLowerCase(),M==="select"||M==="input"&&x.type==="file")var z=p1;else if(Qd(x))if(_p)z=v1;else{z=m1;var V=g1}else(M=x.nodeName)&&M.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(z=y1);if(z&&(z=z(t,T))){Rp(O,z,s,N);break e}V&&V(t,x,T),t==="focusout"&&(V=x._wrapperState)&&V.controlled&&x.type==="number"&&Vl(x,"number",x.value)}switch(V=T?ii(T):window,t){case"focusin":(Qd(V)||V.contentEditable==="true")&&(ni=V,tu=T,vs=null);break;case"focusout":vs=tu=ni=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,nh(O,s,N);break;case"selectionchange":if(T1)break;case"keydown":case"keyup":nh(O,s,N)}var J;if(qu)e:{switch(t){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else ti?Op(t,s)&&(H="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(H="onCompositionStart");H&&(Pp&&s.locale!=="ko"&&(ti||H!=="onCompositionStart"?H==="onCompositionEnd"&&ti&&(J=xp()):(Yn=N,Ju="value"in Yn?Yn.value:Yn.textContent,ti=!0)),V=Zo(T,H),0<V.length&&(H=new qd(H,t,null,s,N),O.push({event:H,listeners:V}),J?H.data=J:(J=Dp(s),J!==null&&(H.data=J)))),(J=u1?c1(t,s):f1(t,s))&&(T=Zo(T,"onBeforeInput"),0<T.length&&(N=new qd("onBeforeInput","beforeinput",null,s,N),O.push({event:N,listeners:T}),N.data=J))}Vp(O,n)})}function Rs(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Zo(t,n){for(var s=n+"Capture",l=[];t!==null;){var c=t,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=Is(t,s),u!=null&&l.unshift(Rs(t,u,c)),u=Is(t,n),u!=null&&l.push(Rs(t,u,c))),t=t.return}return l}function Xr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sh(t,n,s,l,c){for(var u=n._reactName,h=[];s!==null&&s!==l;){var m=s,y=m.alternate,T=m.stateNode;if(y!==null&&y===l)break;m.tag===5&&T!==null&&(m=T,c?(y=Is(s,u),y!=null&&h.unshift(Rs(s,y,m))):c||(y=Is(s,u),y!=null&&h.push(Rs(s,y,m)))),s=s.return}h.length!==0&&t.push({event:n,listeners:h})}var I1=/\r\n?/g,C1=/\u0000|\uFFFD/g;function oh(t){return(typeof t=="string"?t:""+t).replace(I1,`
`).replace(C1,"")}function No(t,n,s){if(n=oh(n),oh(t)!==n&&s)throw Error(b(425))}function ea(){}var ru=null,iu=null;function su(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ou=typeof setTimeout=="function"?setTimeout:void 0,N1=typeof clearTimeout=="function"?clearTimeout:void 0,ah=typeof Promise=="function"?Promise:void 0,x1=typeof queueMicrotask=="function"?queueMicrotask:typeof ah<"u"?function(t){return ah.resolve(null).then(t).catch(P1)}:ou;function P1(t){setTimeout(function(){throw t})}function Il(t,n){var s=n,l=0;do{var c=s.nextSibling;if(t.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(l===0){t.removeChild(c),xs(n);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=c}while(s);xs(n)}function tr(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function lh(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),hn="__reactFiber$"+Ni,_s="__reactProps$"+Ni,bn="__reactContainer$"+Ni,au="__reactEvents$"+Ni,O1="__reactListeners$"+Ni,D1="__reactHandles$"+Ni;function Er(t){var n=t[hn];if(n)return n;for(var s=t.parentNode;s;){if(n=s[bn]||s[hn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=lh(t);t!==null;){if(s=t[hn])return s;t=lh(t)}return n}t=s,s=t.parentNode}return null}function Vs(t){return t=t[hn]||t[bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ii(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function Sa(t){return t[_s]||null}var lu=[],si=-1;function ur(t){return{current:t}}function ve(t){0>si||(t.current=lu[si],lu[si]=null,si--)}function me(t,n){si++,lu[si]=t.current,t.current=n}var ar={},Xe=ur(ar),ct=ur(!1),Pr=ar;function vi(t,n){var s=t.type.contextTypes;if(!s)return ar;var l=t.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in s)c[u]=n[u];return l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=c),c}function ft(t){return t=t.childContextTypes,t!=null}function ta(){ve(ct),ve(Xe)}function uh(t,n,s){if(Xe.current!==ar)throw Error(b(168));me(Xe,n),me(ct,s)}function Kp(t,n,s){var l=t.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var c in l)if(!(c in n))throw Error(b(108,g0(t)||"Unknown",c));return Ce({},s,l)}function na(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ar,Pr=Xe.current,me(Xe,t),me(ct,ct.current),!0}function ch(t,n,s){var l=t.stateNode;if(!l)throw Error(b(169));s?(t=Kp(t,n,Pr),l.__reactInternalMemoizedMergedChildContext=t,ve(ct),ve(Xe),me(Xe,t)):ve(ct),me(ct,s)}var xn=null,Ta=!1,Cl=!1;function Wp(t){xn===null?xn=[t]:xn.push(t)}function R1(t){Ta=!0,Wp(t)}function cr(){if(!Cl&&xn!==null){Cl=!0;var t=0,n=fe;try{var s=xn;for(fe=1;t<s.length;t++){var l=s[t];do l=l(!0);while(l!==null)}xn=null,Ta=!1}catch(c){throw xn!==null&&(xn=xn.slice(t+1)),yp(Uu,cr),c}finally{fe=n,Cl=!1}}return null}var oi=[],ai=0,ra=null,ia=0,Ot=[],Dt=0,Or=null,Pn=1,On="";function kr(t,n){oi[ai++]=ia,oi[ai++]=ra,ra=t,ia=n}function qp(t,n,s){Ot[Dt++]=Pn,Ot[Dt++]=On,Ot[Dt++]=Or,Or=t;var l=Pn;t=On;var c=32-qt(l)-1;l&=~(1<<c),s+=1;var u=32-qt(n)+c;if(30<u){var h=c-c%5;u=(l&(1<<h)-1).toString(32),l>>=h,c-=h,Pn=1<<32-qt(n)+c|s<<c|l,On=u+t}else Pn=1<<u|s<<c|l,On=t}function Gu(t){t.return!==null&&(kr(t,1),qp(t,1,0))}function Yu(t){for(;t===ra;)ra=oi[--ai],oi[ai]=null,ia=oi[--ai],oi[ai]=null;for(;t===Or;)Or=Ot[--Dt],Ot[Dt]=null,On=Ot[--Dt],Ot[Dt]=null,Pn=Ot[--Dt],Ot[Dt]=null}var Tt=null,St=null,Ae=!1,Wt=null;function Hp(t,n){var s=Rt(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=t,n=t.deletions,n===null?(t.deletions=[s],t.flags|=16):n.push(s)}function fh(t,n){switch(t.tag){case 5:var s=t.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Tt=t,St=tr(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Tt=t,St=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Or!==null?{id:Pn,overflow:On}:null,t.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Rt(18,null,null,0),s.stateNode=n,s.return=t,t.child=s,Tt=t,St=null,!0):!1;default:return!1}}function uu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cu(t){if(Ae){var n=St;if(n){var s=n;if(!fh(t,n)){if(uu(t))throw Error(b(418));n=tr(s.nextSibling);var l=Tt;n&&fh(t,n)?Hp(l,s):(t.flags=t.flags&-4097|2,Ae=!1,Tt=t)}}else{if(uu(t))throw Error(b(418));t.flags=t.flags&-4097|2,Ae=!1,Tt=t}}}function dh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function xo(t){if(t!==Tt)return!1;if(!Ae)return dh(t),Ae=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!su(t.type,t.memoizedProps)),n&&(n=St)){if(uu(t))throw Gp(),Error(b(418));for(;n;)Hp(t,n),n=tr(n.nextSibling)}if(dh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(n===0){St=tr(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}t=t.nextSibling}St=null}}else St=Tt?tr(t.stateNode.nextSibling):null;return!0}function Gp(){for(var t=St;t;)t=tr(t.nextSibling)}function wi(){St=Tt=null,Ae=!1}function Qu(t){Wt===null?Wt=[t]:Wt.push(t)}var _1=Bn.ReactCurrentBatchConfig;function Jt(t,n){if(t&&t.defaultProps){n=Ce({},n),t=t.defaultProps;for(var s in t)n[s]===void 0&&(n[s]=t[s]);return n}return n}var sa=ur(null),oa=null,li=null,Xu=null;function Zu(){Xu=li=oa=null}function ec(t){var n=sa.current;ve(sa),t._currentValue=n}function fu(t,n,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===s)break;t=t.return}}function gi(t,n){oa=t,Xu=li=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(ut=!0),t.firstContext=null)}function bt(t){var n=t._currentValue;if(Xu!==t)if(t={context:t,memoizedValue:n,next:null},li===null){if(oa===null)throw Error(b(308));li=t,oa.dependencies={lanes:0,firstContext:t}}else li=li.next=t;return n}var Ir=null;function tc(t){Ir===null?Ir=[t]:Ir.push(t)}function Yp(t,n,s,l){var c=n.interleaved;return c===null?(s.next=s,tc(n)):(s.next=c.next,c.next=s),n.interleaved=s,Ln(t,l)}function Ln(t,n){t.lanes|=n;var s=t.alternate;for(s!==null&&(s.lanes|=n),s=t,t=t.return;t!==null;)t.childLanes|=n,s=t.alternate,s!==null&&(s.childLanes|=n),s=t,t=t.return;return s.tag===3?s.stateNode:null}var qn=!1;function nc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qp(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function nr(t,n,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ae&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,Ln(t,s)}return c=l.interleaved,c===null?(n.next=n,tc(l)):(n.next=c.next,c.next=n),l.interleaved=n,Ln(t,s)}function Fo(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,zu(t,s)}}function hh(t,n){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,u=null;if(s=s.firstBaseUpdate,s!==null){do{var h={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};u===null?c=u=h:u=u.next=h,s=s.next}while(s!==null);u===null?c=u=n:u=u.next=n}else c=u=n;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:l.shared,effects:l.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}function aa(t,n,s,l){var c=t.updateQueue;qn=!1;var u=c.firstBaseUpdate,h=c.lastBaseUpdate,m=c.shared.pending;if(m!==null){c.shared.pending=null;var y=m,T=y.next;y.next=null,h===null?u=T:h.next=T,h=y;var N=t.alternate;N!==null&&(N=N.updateQueue,m=N.lastBaseUpdate,m!==h&&(m===null?N.firstBaseUpdate=T:m.next=T,N.lastBaseUpdate=y))}if(u!==null){var O=c.baseState;h=0,N=T=y=null,m=u;do{var x=m.lane,M=m.eventTime;if((l&x)===x){N!==null&&(N=N.next={eventTime:M,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var B=t,F=m;switch(x=n,M=s,F.tag){case 1:if(B=F.payload,typeof B=="function"){O=B.call(M,O,x);break e}O=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=F.payload,x=typeof B=="function"?B.call(M,O,x):B,x==null)break e;O=Ce({},O,x);break e;case 2:qn=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,x=c.effects,x===null?c.effects=[m]:x.push(m))}else M={eventTime:M,lane:x,tag:m.tag,payload:m.payload,callback:m.callback,next:null},N===null?(T=N=M,y=O):N=N.next=M,h|=x;if(m=m.next,m===null){if(m=c.shared.pending,m===null)break;x=m,m=x.next,x.next=null,c.lastBaseUpdate=x,c.shared.pending=null}}while(1);if(N===null&&(y=O),c.baseState=y,c.firstBaseUpdate=T,c.lastBaseUpdate=N,n=c.shared.interleaved,n!==null){c=n;do h|=c.lane,c=c.next;while(c!==n)}else u===null&&(c.shared.lanes=0);Rr|=h,t.lanes=h,t.memoizedState=O}}function ph(t,n,s){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var l=t[n],c=l.callback;if(c!==null){if(l.callback=null,l=s,typeof c!="function")throw Error(b(191,c));c.call(l)}}}var Xp=new Yh.Component().refs;function du(t,n,s,l){n=t.memoizedState,s=s(l,n),s=s==null?n:Ce({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ka={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,n,s){t=t._reactInternals;var l=rt(),c=ir(t),u=Rn(l,c);u.payload=n,s!=null&&(u.callback=s),n=nr(t,u,c),n!==null&&(Ht(n,t,c,l),Fo(n,t,c))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var l=rt(),c=ir(t),u=Rn(l,c);u.tag=1,u.payload=n,s!=null&&(u.callback=s),n=nr(t,u,c),n!==null&&(Ht(n,t,c,l),Fo(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=rt(),l=ir(t),c=Rn(s,l);c.tag=2,n!=null&&(c.callback=n),n=nr(t,c,l),n!==null&&(Ht(n,t,l,s),Fo(n,t,l))}};function gh(t,n,s,l,c,u,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,u,h):n.prototype&&n.prototype.isPureReactComponent?!Os(s,l)||!Os(c,u):!0}function Zp(t,n,s){var l=!1,c=ar,u=n.contextType;return typeof u=="object"&&u!==null?u=bt(u):(c=ft(n)?Pr:Xe.current,l=n.contextTypes,u=(l=l!=null)?vi(t,c):ar),n=new n(s,u),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ka,t.stateNode=n,n._reactInternals=t,l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=u),n}function mh(t,n,s,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==t&&ka.enqueueReplaceState(n,n.state,null)}function hu(t,n,s,l){var c=t.stateNode;c.props=s,c.state=t.memoizedState,c.refs=Xp,nc(t);var u=n.contextType;typeof u=="object"&&u!==null?c.context=bt(u):(u=ft(n)?Pr:Xe.current,c.context=vi(t,u)),c.state=t.memoizedState,u=n.getDerivedStateFromProps,typeof u=="function"&&(du(t,n,u,s),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&ka.enqueueReplaceState(c,c.state,null),aa(t,s,c,l),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function as(t,n,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(b(309));var l=s.stateNode}if(!l)throw Error(b(147,t));var c=l,u=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===u?n.ref:(n=function(h){var m=c.refs;m===Xp&&(m=c.refs={}),h===null?delete m[u]:m[u]=h},n._stringRef=u,n)}if(typeof t!="string")throw Error(b(284));if(!s._owner)throw Error(b(290,t))}return t}function Po(t,n){throw t=Object.prototype.toString.call(n),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function yh(t){var n=t._init;return n(t._payload)}function eg(t){function n(k,w){if(t){var A=k.deletions;A===null?(k.deletions=[w],k.flags|=16):A.push(w)}}function s(k,w){if(!t)return null;for(;w!==null;)n(k,w),w=w.sibling;return null}function l(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function c(k,w){return k=sr(k,w),k.index=0,k.sibling=null,k}function u(k,w,A){return k.index=A,t?(A=k.alternate,A!==null?(A=A.index,A<w?(k.flags|=2,w):A):(k.flags|=2,w)):(k.flags|=1048576,w)}function h(k){return t&&k.alternate===null&&(k.flags|=2),k}function m(k,w,A,_){return w===null||w.tag!==6?(w=_l(A,k.mode,_),w.return=k,w):(w=c(w,A),w.return=k,w)}function y(k,w,A,_){var z=A.type;return z===ei?N(k,w,A.props.children,_,A.key):w!==null&&(w.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Wn&&yh(z)===w.type)?(_=c(w,A.props),_.ref=as(k,w,A),_.return=k,_):(_=Ko(A.type,A.key,A.props,null,k.mode,_),_.ref=as(k,w,A),_.return=k,_)}function T(k,w,A,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=bl(A,k.mode,_),w.return=k,w):(w=c(w,A.children||[]),w.return=k,w)}function N(k,w,A,_,z){return w===null||w.tag!==7?(w=xr(A,k.mode,_,z),w.return=k,w):(w=c(w,A),w.return=k,w)}function O(k,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=_l(""+w,k.mode,A),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vo:return A=Ko(w.type,w.key,w.props,null,k.mode,A),A.ref=as(k,null,w),A.return=k,A;case Zr:return w=bl(w,k.mode,A),w.return=k,w;case Wn:var _=w._init;return O(k,_(w._payload),A)}if(fs(w)||ns(w))return w=xr(w,k.mode,A,null),w.return=k,w;Po(k,w)}return null}function x(k,w,A,_){var z=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return z!==null?null:m(k,w,""+A,_);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case vo:return A.key===z?y(k,w,A,_):null;case Zr:return A.key===z?T(k,w,A,_):null;case Wn:return z=A._init,x(k,w,z(A._payload),_)}if(fs(A)||ns(A))return z!==null?null:N(k,w,A,_,null);Po(k,A)}return null}function M(k,w,A,_,z){if(typeof _=="string"&&_!==""||typeof _=="number")return k=k.get(A)||null,m(w,k,""+_,z);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vo:return k=k.get(_.key===null?A:_.key)||null,y(w,k,_,z);case Zr:return k=k.get(_.key===null?A:_.key)||null,T(w,k,_,z);case Wn:var V=_._init;return M(k,w,A,V(_._payload),z)}if(fs(_)||ns(_))return k=k.get(A)||null,N(w,k,_,z,null);Po(w,_)}return null}function B(k,w,A,_){for(var z=null,V=null,J=w,H=w=0,te=null;J!==null&&H<A.length;H++){J.index>H?(te=J,J=null):te=J.sibling;var ne=x(k,J,A[H],_);if(ne===null){J===null&&(J=te);break}t&&J&&ne.alternate===null&&n(k,J),w=u(ne,w,H),V===null?z=ne:V.sibling=ne,V=ne,J=te}if(H===A.length)return s(k,J),Ae&&kr(k,H),z;if(J===null){for(;H<A.length;H++)J=O(k,A[H],_),J!==null&&(w=u(J,w,H),V===null?z=J:V.sibling=J,V=J);return Ae&&kr(k,H),z}for(J=l(k,J);H<A.length;H++)te=M(J,k,H,A[H],_),te!==null&&(t&&te.alternate!==null&&J.delete(te.key===null?H:te.key),w=u(te,w,H),V===null?z=te:V.sibling=te,V=te);return t&&J.forEach(function(ht){return n(k,ht)}),Ae&&kr(k,H),z}function F(k,w,A,_){var z=ns(A);if(typeof z!="function")throw Error(b(150));if(A=z.call(A),A==null)throw Error(b(151));for(var V=z=null,J=w,H=w=0,te=null,ne=A.next();J!==null&&!ne.done;H++,ne=A.next()){J.index>H?(te=J,J=null):te=J.sibling;var ht=x(k,J,ne.value,_);if(ht===null){J===null&&(J=te);break}t&&J&&ht.alternate===null&&n(k,J),w=u(ht,w,H),V===null?z=ht:V.sibling=ht,V=ht,J=te}if(ne.done)return s(k,J),Ae&&kr(k,H),z;if(J===null){for(;!ne.done;H++,ne=A.next())ne=O(k,ne.value,_),ne!==null&&(w=u(ne,w,H),V===null?z=ne:V.sibling=ne,V=ne);return Ae&&kr(k,H),z}for(J=l(k,J);!ne.done;H++,ne=A.next())ne=M(J,k,H,ne.value,_),ne!==null&&(t&&ne.alternate!==null&&J.delete(ne.key===null?H:ne.key),w=u(ne,w,H),V===null?z=ne:V.sibling=ne,V=ne);return t&&J.forEach(function(mn){return n(k,mn)}),Ae&&kr(k,H),z}function ce(k,w,A,_){if(typeof A=="object"&&A!==null&&A.type===ei&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case vo:e:{for(var z=A.key,V=w;V!==null;){if(V.key===z){if(z=A.type,z===ei){if(V.tag===7){s(k,V.sibling),w=c(V,A.props.children),w.return=k,k=w;break e}}else if(V.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Wn&&yh(z)===V.type){s(k,V.sibling),w=c(V,A.props),w.ref=as(k,V,A),w.return=k,k=w;break e}s(k,V);break}else n(k,V);V=V.sibling}A.type===ei?(w=xr(A.props.children,k.mode,_,A.key),w.return=k,k=w):(_=Ko(A.type,A.key,A.props,null,k.mode,_),_.ref=as(k,w,A),_.return=k,k=_)}return h(k);case Zr:e:{for(V=A.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){s(k,w.sibling),w=c(w,A.children||[]),w.return=k,k=w;break e}else{s(k,w);break}else n(k,w);w=w.sibling}w=bl(A,k.mode,_),w.return=k,k=w}return h(k);case Wn:return V=A._init,ce(k,w,V(A._payload),_)}if(fs(A))return B(k,w,A,_);if(ns(A))return F(k,w,A,_);Po(k,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(s(k,w.sibling),w=c(w,A),w.return=k,k=w):(s(k,w),w=_l(A,k.mode,_),w.return=k,k=w),h(k)):s(k,w)}return ce}var Si=eg(!0),tg=eg(!1),Js={},gn=ur(Js),bs=ur(Js),Ls=ur(Js);function Cr(t){if(t===Js)throw Error(b(174));return t}function rc(t,n){switch(me(Ls,n),me(bs,t),me(gn,Js),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Kl(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Kl(n,t)}ve(gn),me(gn,n)}function Ti(){ve(gn),ve(bs),ve(Ls)}function ng(t){Cr(Ls.current);var n=Cr(gn.current),s=Kl(n,t.type);n!==s&&(me(bs,t),me(gn,s))}function ic(t){bs.current===t&&(ve(gn),ve(bs))}var Ee=ur(0);function la(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Nl=[];function sc(){for(var t=0;t<Nl.length;t++)Nl[t]._workInProgressVersionPrimary=null;Nl.length=0}var Uo=Bn.ReactCurrentDispatcher,xl=Bn.ReactCurrentBatchConfig,Dr=0,Ie=null,Be=null,Fe=null,ua=!1,ws=!1,Ms=0,b1=0;function Ge(){throw Error(b(321))}function oc(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!Gt(t[s],n[s]))return!1;return!0}function ac(t,n,s,l,c,u){if(Dr=u,Ie=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Uo.current=t===null||t.memoizedState===null?$1:F1,t=s(l,c),ws){u=0;do{if(ws=!1,Ms=0,25<=u)throw Error(b(301));u+=1,Fe=Be=null,n.updateQueue=null,Uo.current=U1,t=s(l,c)}while(ws)}if(Uo.current=ca,n=Be!==null&&Be.next!==null,Dr=0,Fe=Be=Ie=null,ua=!1,n)throw Error(b(300));return t}function lc(){var t=Ms!==0;return Ms=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ie.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Lt(){if(Be===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var n=Fe===null?Ie.memoizedState:Fe.next;if(n!==null)Fe=n,Be=t;else{if(t===null)throw Error(b(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Fe===null?Ie.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function Bs(t,n){return typeof n=="function"?n(t):n}function Pl(t){var n=Lt(),s=n.queue;if(s===null)throw Error(b(311));s.lastRenderedReducer=t;var l=Be,c=l.baseQueue,u=s.pending;if(u!==null){if(c!==null){var h=c.next;c.next=u.next,u.next=h}l.baseQueue=c=u,s.pending=null}if(c!==null){u=c.next,l=l.baseState;var m=h=null,y=null,T=u;do{var N=T.lane;if((Dr&N)===N)y!==null&&(y=y.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),l=T.hasEagerState?T.eagerState:t(l,T.action);else{var O={lane:N,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};y===null?(m=y=O,h=l):y=y.next=O,Ie.lanes|=N,Rr|=N}T=T.next}while(T!==null&&T!==u);y===null?h=l:y.next=m,Gt(l,n.memoizedState)||(ut=!0),n.memoizedState=l,n.baseState=h,n.baseQueue=y,s.lastRenderedState=l}if(t=s.interleaved,t!==null){c=t;do u=c.lane,Ie.lanes|=u,Rr|=u,c=c.next;while(c!==t)}else c===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Ol(t){var n=Lt(),s=n.queue;if(s===null)throw Error(b(311));s.lastRenderedReducer=t;var l=s.dispatch,c=s.pending,u=n.memoizedState;if(c!==null){s.pending=null;var h=c=c.next;do u=t(u,h.action),h=h.next;while(h!==c);Gt(u,n.memoizedState)||(ut=!0),n.memoizedState=u,n.baseQueue===null&&(n.baseState=u),s.lastRenderedState=u}return[u,l]}function rg(){}function ig(t,n){var s=Ie,l=Lt(),c=n(),u=!Gt(l.memoizedState,c);if(u&&(l.memoizedState=c,ut=!0),l=l.queue,uc(ag.bind(null,s,l,t),[t]),l.getSnapshot!==n||u||Fe!==null&&Fe.memoizedState.tag&1){if(s.flags|=2048,$s(9,og.bind(null,s,l,c,n),void 0,null),Ue===null)throw Error(b(349));(Dr&30)!==0||sg(s,n,c)}return c}function sg(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Ie.updateQueue,n===null?(n={lastEffect:null,stores:null},Ie.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function og(t,n,s,l){n.value=s,n.getSnapshot=l,lg(n)&&ug(t)}function ag(t,n,s){return s(function(){lg(n)&&ug(t)})}function lg(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!Gt(t,s)}catch{return!0}}function ug(t){var n=Ln(t,1);n!==null&&Ht(n,t,1,-1)}function vh(t){var n=dn();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:t},n.queue=t,t=t.dispatch=B1.bind(null,Ie,t),[n.memoizedState,t]}function $s(t,n,s,l){return t={tag:t,create:n,destroy:s,deps:l,next:null},n=Ie.updateQueue,n===null?(n={lastEffect:null,stores:null},Ie.updateQueue=n,n.lastEffect=t.next=t):(s=n.lastEffect,s===null?n.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,n.lastEffect=t)),t}function cg(){return Lt().memoizedState}function zo(t,n,s,l){var c=dn();Ie.flags|=t,c.memoizedState=$s(1|n,s,void 0,l===void 0?null:l)}function Aa(t,n,s,l){var c=Lt();l=l===void 0?null:l;var u=void 0;if(Be!==null){var h=Be.memoizedState;if(u=h.destroy,l!==null&&oc(l,h.deps)){c.memoizedState=$s(n,s,u,l);return}}Ie.flags|=t,c.memoizedState=$s(1|n,s,u,l)}function wh(t,n){return zo(8390656,8,t,n)}function uc(t,n){return Aa(2048,8,t,n)}function fg(t,n){return Aa(4,2,t,n)}function dg(t,n){return Aa(4,4,t,n)}function hg(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function pg(t,n,s){return s=s!=null?s.concat([t]):null,Aa(4,4,hg.bind(null,n,t),s)}function cc(){}function gg(t,n){var s=Lt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&oc(n,l[1])?l[0]:(s.memoizedState=[t,n],t)}function mg(t,n){var s=Lt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&oc(n,l[1])?l[0]:(t=t(),s.memoizedState=[t,n],t)}function yg(t,n,s){return(Dr&21)===0?(t.baseState&&(t.baseState=!1,ut=!0),t.memoizedState=s):(Gt(s,n)||(s=Sp(),Ie.lanes|=s,Rr|=s,t.baseState=!0),n)}function L1(t,n){var s=fe;fe=s!==0&&4>s?s:4,t(!0);var l=xl.transition;xl.transition={};try{t(!1),n()}finally{fe=s,xl.transition=l}}function vg(){return Lt().memoizedState}function M1(t,n,s){var l=ir(t);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},wg(t))Sg(n,s);else if(s=Yp(t,n,s,l),s!==null){var c=rt();Ht(s,t,l,c),Tg(s,n,l)}}function B1(t,n,s){var l=ir(t),c={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(wg(t))Sg(n,c);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=n.lastRenderedReducer,u!==null))try{var h=n.lastRenderedState,m=u(h,s);if(c.hasEagerState=!0,c.eagerState=m,Gt(m,h)){var y=n.interleaved;y===null?(c.next=c,tc(n)):(c.next=y.next,y.next=c),n.interleaved=c;return}}catch{}finally{}s=Yp(t,n,c,l),s!==null&&(c=rt(),Ht(s,t,l,c),Tg(s,n,l))}}function wg(t){var n=t.alternate;return t===Ie||n!==null&&n===Ie}function Sg(t,n){ws=ua=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function Tg(t,n,s){if((s&4194240)!==0){var l=n.lanes;l&=t.pendingLanes,s|=l,n.lanes=s,zu(t,s)}}var ca={readContext:bt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},$1={readContext:bt,useCallback:function(t,n){return dn().memoizedState=[t,n===void 0?null:n],t},useContext:bt,useEffect:wh,useImperativeHandle:function(t,n,s){return s=s!=null?s.concat([t]):null,zo(4194308,4,hg.bind(null,n,t),s)},useLayoutEffect:function(t,n){return zo(4194308,4,t,n)},useInsertionEffect:function(t,n){return zo(4,2,t,n)},useMemo:function(t,n){var s=dn();return n=n===void 0?null:n,t=t(),s.memoizedState=[t,n],t},useReducer:function(t,n,s){var l=dn();return n=s!==void 0?s(n):n,l.memoizedState=l.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},l.queue=t,t=t.dispatch=M1.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var n=dn();return t={current:t},n.memoizedState=t},useState:vh,useDebugValue:cc,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=vh(!1),n=t[0];return t=L1.bind(null,t[1]),dn().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,s){var l=Ie,c=dn();if(Ae){if(s===void 0)throw Error(b(407));s=s()}else{if(s=n(),Ue===null)throw Error(b(349));(Dr&30)!==0||sg(l,n,s)}c.memoizedState=s;var u={value:s,getSnapshot:n};return c.queue=u,wh(ag.bind(null,l,u,t),[t]),l.flags|=2048,$s(9,og.bind(null,l,u,s,n),void 0,null),s},useId:function(){var t=dn(),n=Ue.identifierPrefix;if(Ae){var s=On,l=Pn;s=(l&~(1<<32-qt(l)-1)).toString(32)+s,n=":"+n+"R"+s,s=Ms++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=b1++,n=":"+n+"r"+s.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},F1={readContext:bt,useCallback:gg,useContext:bt,useEffect:uc,useImperativeHandle:pg,useInsertionEffect:fg,useLayoutEffect:dg,useMemo:mg,useReducer:Pl,useRef:cg,useState:function(){return Pl(Bs)},useDebugValue:cc,useDeferredValue:function(t){var n=Lt();return yg(n,Be.memoizedState,t)},useTransition:function(){var t=Pl(Bs)[0],n=Lt().memoizedState;return[t,n]},useMutableSource:rg,useSyncExternalStore:ig,useId:vg,unstable_isNewReconciler:!1},U1={readContext:bt,useCallback:gg,useContext:bt,useEffect:uc,useImperativeHandle:pg,useInsertionEffect:fg,useLayoutEffect:dg,useMemo:mg,useReducer:Ol,useRef:cg,useState:function(){return Ol(Bs)},useDebugValue:cc,useDeferredValue:function(t){var n=Lt();return Be===null?n.memoizedState=t:yg(n,Be.memoizedState,t)},useTransition:function(){var t=Ol(Bs)[0],n=Lt().memoizedState;return[t,n]},useMutableSource:rg,useSyncExternalStore:ig,useId:vg,unstable_isNewReconciler:!1};function ki(t,n){try{var s="",l=n;do s+=p0(l),l=l.return;while(l);var c=s}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:n,stack:c,digest:null}}function Dl(t,n,s){return{value:t,source:null,stack:s!=null?s:null,digest:n!=null?n:null}}function pu(t,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var z1=typeof WeakMap=="function"?WeakMap:Map;function kg(t,n,s){s=Rn(-1,s),s.tag=3,s.payload={element:null};var l=n.value;return s.callback=function(){da||(da=!0,Eu=l),pu(t,n)},s}function Ag(t,n,s){s=Rn(-1,s),s.tag=3;var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var c=n.value;s.payload=function(){return l(c)},s.callback=function(){pu(t,n)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(s.callback=function(){pu(t,n),typeof l!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var h=n.stack;this.componentDidCatch(n.value,{componentStack:h!==null?h:""})}),s}function Sh(t,n,s){var l=t.pingCache;if(l===null){l=t.pingCache=new z1;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(s)||(c.add(s),t=tw.bind(null,t,n,s),n.then(t,t))}function Th(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function kh(t,n,s,l,c){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Rn(-1,1),n.tag=2,nr(s,n,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=c,t)}var j1=Bn.ReactCurrentOwner,ut=!1;function nt(t,n,s,l){n.child=t===null?tg(n,null,s,l):Si(n,t.child,s,l)}function Ah(t,n,s,l,c){s=s.render;var u=n.ref;return gi(n,c),l=ac(t,n,s,l,u,c),s=lc(),t!==null&&!ut?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,Mn(t,n,c)):(Ae&&s&&Gu(n),n.flags|=1,nt(t,n,l,c),n.child)}function Eh(t,n,s,l,c){if(t===null){var u=s.type;return typeof u=="function"&&!vc(u)&&u.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=u,Eg(t,n,u,l,c)):(t=Ko(s.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(u=t.child,(t.lanes&c)===0){var h=u.memoizedProps;if(s=s.compare,s=s!==null?s:Os,s(h,l)&&t.ref===n.ref)return Mn(t,n,c)}return n.flags|=1,t=sr(u,l),t.ref=n.ref,t.return=n,n.child=t}function Eg(t,n,s,l,c){if(t!==null){var u=t.memoizedProps;if(Os(u,l)&&t.ref===n.ref)if(ut=!1,n.pendingProps=l=u,(t.lanes&c)!==0)(t.flags&131072)!==0&&(ut=!0);else return n.lanes=t.lanes,Mn(t,n,c)}return gu(t,n,s,l,c)}function Ig(t,n,s){var l=n.pendingProps,c=l.children,u=t!==null?t.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(ci,wt),wt|=s;else{if((s&1073741824)===0)return t=u!==null?u.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,me(ci,wt),wt|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=u!==null?u.baseLanes:s,me(ci,wt),wt|=l}else u!==null?(l=u.baseLanes|s,n.memoizedState=null):l=s,me(ci,wt),wt|=l;return nt(t,n,c,s),n.child}function Cg(t,n){var s=n.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function gu(t,n,s,l,c){var u=ft(s)?Pr:Xe.current;return u=vi(n,u),gi(n,c),s=ac(t,n,s,l,u,c),l=lc(),t!==null&&!ut?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,Mn(t,n,c)):(Ae&&l&&Gu(n),n.flags|=1,nt(t,n,s,c),n.child)}function Ih(t,n,s,l,c){if(ft(s)){var u=!0;na(n)}else u=!1;if(gi(n,c),n.stateNode===null)jo(t,n),Zp(n,s,l),hu(n,s,l,c),l=!0;else if(t===null){var h=n.stateNode,m=n.memoizedProps;h.props=m;var y=h.context,T=s.contextType;typeof T=="object"&&T!==null?T=bt(T):(T=ft(s)?Pr:Xe.current,T=vi(n,T));var N=s.getDerivedStateFromProps,O=typeof N=="function"||typeof h.getSnapshotBeforeUpdate=="function";O||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==l||y!==T)&&mh(n,h,l,T),qn=!1;var x=n.memoizedState;h.state=x,aa(n,l,h,c),y=n.memoizedState,m!==l||x!==y||ct.current||qn?(typeof N=="function"&&(du(n,s,N,l),y=n.memoizedState),(m=qn||gh(n,s,m,l,x,y,T))?(O||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=y),h.props=l,h.state=y,h.context=T,l=m):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{h=n.stateNode,Qp(t,n),m=n.memoizedProps,T=n.type===n.elementType?m:Jt(n.type,m),h.props=T,O=n.pendingProps,x=h.context,y=s.contextType,typeof y=="object"&&y!==null?y=bt(y):(y=ft(s)?Pr:Xe.current,y=vi(n,y));var M=s.getDerivedStateFromProps;(N=typeof M=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==O||x!==y)&&mh(n,h,l,y),qn=!1,x=n.memoizedState,h.state=x,aa(n,l,h,c);var B=n.memoizedState;m!==O||x!==B||ct.current||qn?(typeof M=="function"&&(du(n,s,M,l),B=n.memoizedState),(T=qn||gh(n,s,T,l,x,B,y)||!1)?(N||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,B,y),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,B,y)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||m===t.memoizedProps&&x===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&x===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=B),h.props=l,h.state=B,h.context=y,l=T):(typeof h.componentDidUpdate!="function"||m===t.memoizedProps&&x===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&x===t.memoizedState||(n.flags|=1024),l=!1)}return mu(t,n,s,l,u,c)}function mu(t,n,s,l,c,u){Cg(t,n);var h=(n.flags&128)!==0;if(!l&&!h)return c&&ch(n,s,!1),Mn(t,n,u);l=n.stateNode,j1.current=n;var m=h&&typeof s.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,t!==null&&h?(n.child=Si(n,t.child,null,u),n.child=Si(n,null,m,u)):nt(t,n,m,u),n.memoizedState=l.state,c&&ch(n,s,!0),n.child}function Ng(t){var n=t.stateNode;n.pendingContext?uh(t,n.pendingContext,n.pendingContext!==n.context):n.context&&uh(t,n.context,!1),rc(t,n.containerInfo)}function Ch(t,n,s,l,c){return wi(),Qu(c),n.flags|=256,nt(t,n,s,l),n.child}var yu={dehydrated:null,treeContext:null,retryLane:0};function vu(t){return{baseLanes:t,cachePool:null,transitions:null}}function xg(t,n,s){var l=n.pendingProps,c=Ee.current,u=!1,h=(n.flags&128)!==0,m;if((m=h)||(m=t!==null&&t.memoizedState===null?!1:(c&2)!==0),m?(u=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),me(Ee,c&1),t===null)return cu(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(h=l.children,t=l.fallback,u?(l=n.mode,u=n.child,h={mode:"hidden",children:h},(l&1)===0&&u!==null?(u.childLanes=0,u.pendingProps=h):u=Ca(h,l,0,null),t=xr(t,l,s,null),u.return=n,t.return=n,u.sibling=t,n.child=u,n.child.memoizedState=vu(s),n.memoizedState=yu,t):fc(n,h));if(c=t.memoizedState,c!==null&&(m=c.dehydrated,m!==null))return V1(t,n,h,l,m,c,s);if(u){u=l.fallback,h=n.mode,c=t.child,m=c.sibling;var y={mode:"hidden",children:l.children};return(h&1)===0&&n.child!==c?(l=n.child,l.childLanes=0,l.pendingProps=y,n.deletions=null):(l=sr(c,y),l.subtreeFlags=c.subtreeFlags&14680064),m!==null?u=sr(m,u):(u=xr(u,h,s,null),u.flags|=2),u.return=n,l.return=n,l.sibling=u,n.child=l,l=u,u=n.child,h=t.child.memoizedState,h=h===null?vu(s):{baseLanes:h.baseLanes|s,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=t.childLanes&~s,n.memoizedState=yu,l}return u=t.child,t=u.sibling,l=sr(u,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=s),l.return=n,l.sibling=null,t!==null&&(s=n.deletions,s===null?(n.deletions=[t],n.flags|=16):s.push(t)),n.child=l,n.memoizedState=null,l}function fc(t,n){return n=Ca({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Oo(t,n,s,l){return l!==null&&Qu(l),Si(n,t.child,null,s),t=fc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function V1(t,n,s,l,c,u,h){if(s)return n.flags&256?(n.flags&=-257,l=Dl(Error(b(422))),Oo(t,n,h,l)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(u=l.fallback,c=n.mode,l=Ca({mode:"visible",children:l.children},c,0,null),u=xr(u,c,h,null),u.flags|=2,l.return=n,u.return=n,l.sibling=u,n.child=l,(n.mode&1)!==0&&Si(n,t.child,null,h),n.child.memoizedState=vu(h),n.memoizedState=yu,u);if((n.mode&1)===0)return Oo(t,n,h,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var m=l.dgst;return l=m,u=Error(b(419)),l=Dl(u,l,void 0),Oo(t,n,h,l)}if(m=(h&t.childLanes)!==0,ut||m){if(l=Ue,l!==null){switch(h&-h){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(l.suspendedLanes|h))!==0?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,Ln(t,c),Ht(l,t,c,-1))}return yc(),l=Dl(Error(b(421))),Oo(t,n,h,l)}return c.data==="$?"?(n.flags|=128,n.child=t.child,n=nw.bind(null,t),c._reactRetry=n,null):(t=u.treeContext,St=tr(c.nextSibling),Tt=n,Ae=!0,Wt=null,t!==null&&(Ot[Dt++]=Pn,Ot[Dt++]=On,Ot[Dt++]=Or,Pn=t.id,On=t.overflow,Or=n),n=fc(n,l.children),n.flags|=4096,n)}function Nh(t,n,s){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),fu(t.return,n,s)}function Rl(t,n,s,l,c){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c}:(u.isBackwards=n,u.rendering=null,u.renderingStartTime=0,u.last=l,u.tail=s,u.tailMode=c)}function Pg(t,n,s){var l=n.pendingProps,c=l.revealOrder,u=l.tail;if(nt(t,n,l.children,s),l=Ee.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nh(t,s,n);else if(t.tag===19)Nh(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}if(me(Ee,l),(n.mode&1)===0)n.memoizedState=null;else switch(c){case"forwards":for(s=n.child,c=null;s!==null;)t=s.alternate,t!==null&&la(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),Rl(n,!1,c,s,u);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&la(t)===null){n.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}Rl(n,!0,s,null,u);break;case"together":Rl(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function jo(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Mn(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),Rr|=n.lanes,(s&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(b(153));if(n.child!==null){for(t=n.child,s=sr(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=sr(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function J1(t,n,s){switch(n.tag){case 3:Ng(n),wi();break;case 5:ng(n);break;case 1:ft(n.type)&&na(n);break;case 4:rc(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,c=n.memoizedProps.value;me(sa,l._currentValue),l._currentValue=c;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(me(Ee,Ee.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?xg(t,n,s):(me(Ee,Ee.current&1),t=Mn(t,n,s),t!==null?t.sibling:null);me(Ee,Ee.current&1);break;case 19:if(l=(s&n.childLanes)!==0,(t.flags&128)!==0){if(l)return Pg(t,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),me(Ee,Ee.current),l)break;return null;case 22:case 23:return n.lanes=0,Ig(t,n,s)}return Mn(t,n,s)}var Og,wu,Dg,Rg;Og=function(t,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};wu=function(){};Dg=function(t,n,s,l){var c=t.memoizedProps;if(c!==l){t=n.stateNode,Cr(gn.current);var u=null;switch(s){case"input":c=zl(t,c),l=zl(t,l),u=[];break;case"select":c=Ce({},c,{value:void 0}),l=Ce({},l,{value:void 0}),u=[];break;case"textarea":c=Jl(t,c),l=Jl(t,l),u=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(t.onclick=ea)}Wl(s,l);var h;s=null;for(T in c)if(!l.hasOwnProperty(T)&&c.hasOwnProperty(T)&&c[T]!=null)if(T==="style"){var m=c[T];for(h in m)m.hasOwnProperty(h)&&(s||(s={}),s[h]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(As.hasOwnProperty(T)?u||(u=[]):(u=u||[]).push(T,null));for(T in l){var y=l[T];if(m=c!=null?c[T]:void 0,l.hasOwnProperty(T)&&y!==m&&(y!=null||m!=null))if(T==="style")if(m){for(h in m)!m.hasOwnProperty(h)||y&&y.hasOwnProperty(h)||(s||(s={}),s[h]="");for(h in y)y.hasOwnProperty(h)&&m[h]!==y[h]&&(s||(s={}),s[h]=y[h])}else s||(u||(u=[]),u.push(T,s)),s=y;else T==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,m=m?m.__html:void 0,y!=null&&m!==y&&(u=u||[]).push(T,y)):T==="children"?typeof y!="string"&&typeof y!="number"||(u=u||[]).push(T,""+y):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(As.hasOwnProperty(T)?(y!=null&&T==="onScroll"&&ye("scroll",t),u||m===y||(u=[])):(u=u||[]).push(T,y))}s&&(u=u||[]).push("style",s);var T=u;(n.updateQueue=T)&&(n.flags|=4)}};Rg=function(t,n,s,l){s!==l&&(n.flags|=4)};function ls(t,n){if(!Ae)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ye(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(n)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=s,n}function K1(t,n,s){var l=n.pendingProps;switch(Yu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(n),null;case 1:return ft(n.type)&&ta(),Ye(n),null;case 3:return l=n.stateNode,Ti(),ve(ct),ve(Xe),sc(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(xo(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Wt!==null&&(Nu(Wt),Wt=null))),wu(t,n),Ye(n),null;case 5:ic(n);var c=Cr(Ls.current);if(s=n.type,t!==null&&n.stateNode!=null)Dg(t,n,s,l,c),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(b(166));return Ye(n),null}if(t=Cr(gn.current),xo(n)){l=n.stateNode,s=n.type;var u=n.memoizedProps;switch(l[hn]=n,l[_s]=u,t=(n.mode&1)!==0,s){case"dialog":ye("cancel",l),ye("close",l);break;case"iframe":case"object":case"embed":ye("load",l);break;case"video":case"audio":for(c=0;c<hs.length;c++)ye(hs[c],l);break;case"source":ye("error",l);break;case"img":case"image":case"link":ye("error",l),ye("load",l);break;case"details":ye("toggle",l);break;case"input":Md(l,u),ye("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!u.multiple},ye("invalid",l);break;case"textarea":$d(l,u),ye("invalid",l)}Wl(s,u),c=null;for(var h in u)if(u.hasOwnProperty(h)){var m=u[h];h==="children"?typeof m=="string"?l.textContent!==m&&(u.suppressHydrationWarning!==!0&&No(l.textContent,m,t),c=["children",m]):typeof m=="number"&&l.textContent!==""+m&&(u.suppressHydrationWarning!==!0&&No(l.textContent,m,t),c=["children",""+m]):As.hasOwnProperty(h)&&m!=null&&h==="onScroll"&&ye("scroll",l)}switch(s){case"input":wo(l),Bd(l,u,!0);break;case"textarea":wo(l),Fd(l);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(l.onclick=ea)}l=c,n.updateQueue=l,l!==null&&(n.flags|=4)}else{h=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sp(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof l.is=="string"?t=h.createElement(s,{is:l.is}):(t=h.createElement(s),s==="select"&&(h=t,l.multiple?h.multiple=!0:l.size&&(h.size=l.size))):t=h.createElementNS(t,s),t[hn]=n,t[_s]=l,Og(t,n,!1,!1),n.stateNode=t;e:{switch(h=ql(s,l),s){case"dialog":ye("cancel",t),ye("close",t),c=l;break;case"iframe":case"object":case"embed":ye("load",t),c=l;break;case"video":case"audio":for(c=0;c<hs.length;c++)ye(hs[c],t);c=l;break;case"source":ye("error",t),c=l;break;case"img":case"image":case"link":ye("error",t),ye("load",t),c=l;break;case"details":ye("toggle",t),c=l;break;case"input":Md(t,l),c=zl(t,l),ye("invalid",t);break;case"option":c=l;break;case"select":t._wrapperState={wasMultiple:!!l.multiple},c=Ce({},l,{value:void 0}),ye("invalid",t);break;case"textarea":$d(t,l),c=Jl(t,l),ye("invalid",t);break;default:c=l}Wl(s,c),m=c;for(u in m)if(m.hasOwnProperty(u)){var y=m[u];u==="style"?lp(t,y):u==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&op(t,y)):u==="children"?typeof y=="string"?(s!=="textarea"||y!=="")&&Es(t,y):typeof y=="number"&&Es(t,""+y):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(As.hasOwnProperty(u)?y!=null&&u==="onScroll"&&ye("scroll",t):y!=null&&Lu(t,u,y,h))}switch(s){case"input":wo(t),Bd(t,l,!1);break;case"textarea":wo(t),Fd(t);break;case"option":l.value!=null&&t.setAttribute("value",""+or(l.value));break;case"select":t.multiple=!!l.multiple,u=l.value,u!=null?fi(t,!!l.multiple,u,!1):l.defaultValue!=null&&fi(t,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=ea)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ye(n),null;case 6:if(t&&n.stateNode!=null)Rg(t,n,t.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(b(166));if(s=Cr(Ls.current),Cr(gn.current),xo(n)){if(l=n.stateNode,s=n.memoizedProps,l[hn]=n,(u=l.nodeValue!==s)&&(t=Tt,t!==null))switch(t.tag){case 3:No(l.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(l.nodeValue,s,(t.mode&1)!==0)}u&&(n.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[hn]=n,n.stateNode=l}return Ye(n),null;case 13:if(ve(Ee),l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&St!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Gp(),wi(),n.flags|=98560,u=!1;else if(u=xo(n),l!==null&&l.dehydrated!==null){if(t===null){if(!u)throw Error(b(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(b(317));u[hn]=n}else wi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ye(n),u=!1}else Wt!==null&&(Nu(Wt),Wt=null),u=!0;if(!u)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(l=l!==null,l!==(t!==null&&t.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(Ee.current&1)!==0?$e===0&&($e=3):yc())),n.updateQueue!==null&&(n.flags|=4),Ye(n),null);case 4:return Ti(),wu(t,n),t===null&&Ds(n.stateNode.containerInfo),Ye(n),null;case 10:return ec(n.type._context),Ye(n),null;case 17:return ft(n.type)&&ta(),Ye(n),null;case 19:if(ve(Ee),u=n.memoizedState,u===null)return Ye(n),null;if(l=(n.flags&128)!==0,h=u.rendering,h===null)if(l)ls(u,!1);else{if($e!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(h=la(t),h!==null){for(n.flags|=128,ls(u,!1),l=h.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=s,s=n.child;s!==null;)u=s,t=l,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,t=h.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return me(Ee,Ee.current&1|2),n.child}t=t.sibling}u.tail!==null&&Oe()>Ai&&(n.flags|=128,l=!0,ls(u,!1),n.lanes=4194304)}else{if(!l)if(t=la(h),t!==null){if(n.flags|=128,l=!0,s=t.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),ls(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Ae)return Ye(n),null}else 2*Oe()-u.renderingStartTime>Ai&&s!==1073741824&&(n.flags|=128,l=!0,ls(u,!1),n.lanes=4194304);u.isBackwards?(h.sibling=n.child,n.child=h):(s=u.last,s!==null?s.sibling=h:n.child=h,u.last=h)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Oe(),n.sibling=null,s=Ee.current,me(Ee,l?s&1|2:s&1),n):(Ye(n),null);case 22:case 23:return mc(),l=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(wt&1073741824)!==0&&(Ye(n),n.subtreeFlags&6&&(n.flags|=8192)):Ye(n),null;case 24:return null;case 25:return null}throw Error(b(156,n.tag))}function W1(t,n){switch(Yu(n),n.tag){case 1:return ft(n.type)&&ta(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Ti(),ve(ct),ve(Xe),sc(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return ic(n),null;case 13:if(ve(Ee),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(b(340));wi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ve(Ee),null;case 4:return Ti(),null;case 10:return ec(n.type._context),null;case 22:case 23:return mc(),null;case 24:return null;default:return null}}var Do=!1,Qe=!1,q1=typeof WeakSet=="function"?WeakSet:Set,j=null;function ui(t,n){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){xe(t,n,l)}else s.current=null}function Su(t,n,s){try{s()}catch(l){xe(t,n,l)}}var xh=!1;function H1(t,n){if(ru=Qo,t=Mp(),Hu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{s.nodeType,u.nodeType}catch{s=null;break e}var h=0,m=-1,y=-1,T=0,N=0,O=t,x=null;t:for(;;){for(var M;O!==s||c!==0&&O.nodeType!==3||(m=h+c),O!==u||l!==0&&O.nodeType!==3||(y=h+l),O.nodeType===3&&(h+=O.nodeValue.length),(M=O.firstChild)!==null;)x=O,O=M;for(;;){if(O===t)break t;if(x===s&&++T===c&&(m=h),x===u&&++N===l&&(y=h),(M=O.nextSibling)!==null)break;O=x,x=O.parentNode}O=M}s=m===-1||y===-1?null:{start:m,end:y}}else s=null}s=s||{start:0,end:0}}else s=null;for(iu={focusedElem:t,selectionRange:s},Qo=!1,j=n;j!==null;)if(n=j,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,j=t;else for(;j!==null;){n=j;try{var B=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var F=B.memoizedProps,ce=B.memoizedState,k=n.stateNode,w=k.getSnapshotBeforeUpdate(n.elementType===n.type?F:Jt(n.type,F),ce);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=n.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(_){xe(n,n.return,_)}if(t=n.sibling,t!==null){t.return=n.return,j=t;break}j=n.return}return B=xh,xh=!1,B}function Ss(t,n,s){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&t)===t){var u=c.destroy;c.destroy=void 0,u!==void 0&&Su(n,s,u)}c=c.next}while(c!==l)}}function Ea(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var l=s.create;s.destroy=l()}s=s.next}while(s!==n)}}function Tu(t){var n=t.ref;if(n!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof n=="function"?n(t):n.current=t}}function _g(t){var n=t.alternate;n!==null&&(t.alternate=null,_g(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[hn],delete n[_s],delete n[au],delete n[O1],delete n[D1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bg(t){return t.tag===5||t.tag===3||t.tag===4}function Ph(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ku(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(t,n):s.insertBefore(t,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(t,s)):(n=s,n.appendChild(t)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=ea));else if(l!==4&&(t=t.child,t!==null))for(ku(t,n,s),t=t.sibling;t!==null;)ku(t,n,s),t=t.sibling}function Au(t,n,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(l!==4&&(t=t.child,t!==null))for(Au(t,n,s),t=t.sibling;t!==null;)Au(t,n,s),t=t.sibling}var je=null,Kt=!1;function Kn(t,n,s){for(s=s.child;s!==null;)Lg(t,n,s),s=s.sibling}function Lg(t,n,s){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ma,s)}catch{}switch(s.tag){case 5:Qe||ui(s,n);case 6:var l=je,c=Kt;je=null,Kn(t,n,s),je=l,Kt=c,je!==null&&(Kt?(t=je,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):je.removeChild(s.stateNode));break;case 18:je!==null&&(Kt?(t=je,s=s.stateNode,t.nodeType===8?Il(t.parentNode,s):t.nodeType===1&&Il(t,s),xs(t)):Il(je,s.stateNode));break;case 4:l=je,c=Kt,je=s.stateNode.containerInfo,Kt=!0,Kn(t,n,s),je=l,Kt=c;break;case 0:case 11:case 14:case 15:if(!Qe&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var u=c,h=u.destroy;u=u.tag,h!==void 0&&((u&2)!==0||(u&4)!==0)&&Su(s,n,h),c=c.next}while(c!==l)}Kn(t,n,s);break;case 1:if(!Qe&&(ui(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(m){xe(s,n,m)}Kn(t,n,s);break;case 21:Kn(t,n,s);break;case 22:s.mode&1?(Qe=(l=Qe)||s.memoizedState!==null,Kn(t,n,s),Qe=l):Kn(t,n,s);break;default:Kn(t,n,s)}}function Oh(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new q1),n.forEach(function(l){var c=rw.bind(null,t,l);s.has(l)||(s.add(l),l.then(c,c))})}}function Vt(t,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];try{var u=t,h=n,m=h;e:for(;m!==null;){switch(m.tag){case 5:je=m.stateNode,Kt=!1;break e;case 3:je=m.stateNode.containerInfo,Kt=!0;break e;case 4:je=m.stateNode.containerInfo,Kt=!0;break e}m=m.return}if(je===null)throw Error(b(160));Lg(u,h,c),je=null,Kt=!1;var y=c.alternate;y!==null&&(y.return=null),c.return=null}catch(T){xe(c,n,T)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Mg(n,t),n=n.sibling}function Mg(t,n){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vt(n,t),fn(t),l&4){try{Ss(3,t,t.return),Ea(3,t)}catch(F){xe(t,t.return,F)}try{Ss(5,t,t.return)}catch(F){xe(t,t.return,F)}}break;case 1:Vt(n,t),fn(t),l&512&&s!==null&&ui(s,s.return);break;case 5:if(Vt(n,t),fn(t),l&512&&s!==null&&ui(s,s.return),t.flags&32){var c=t.stateNode;try{Es(c,"")}catch(F){xe(t,t.return,F)}}if(l&4&&(c=t.stateNode,c!=null)){var u=t.memoizedProps,h=s!==null?s.memoizedProps:u,m=t.type,y=t.updateQueue;if(t.updateQueue=null,y!==null)try{m==="input"&&u.type==="radio"&&u.name!=null&&rp(c,u),ql(m,h);var T=ql(m,u);for(h=0;h<y.length;h+=2){var N=y[h],O=y[h+1];N==="style"?lp(c,O):N==="dangerouslySetInnerHTML"?op(c,O):N==="children"?Es(c,O):Lu(c,N,O,T)}switch(m){case"input":jl(c,u);break;case"textarea":ip(c,u);break;case"select":var x=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var M=u.value;M!=null?fi(c,!!u.multiple,M,!1):x!==!!u.multiple&&(u.defaultValue!=null?fi(c,!!u.multiple,u.defaultValue,!0):fi(c,!!u.multiple,u.multiple?[]:"",!1))}c[_s]=u}catch(F){xe(t,t.return,F)}}break;case 6:if(Vt(n,t),fn(t),l&4){if(t.stateNode===null)throw Error(b(162));c=t.stateNode,u=t.memoizedProps;try{c.nodeValue=u}catch(F){xe(t,t.return,F)}}break;case 3:if(Vt(n,t),fn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{xs(n.containerInfo)}catch(F){xe(t,t.return,F)}break;case 4:Vt(n,t),fn(t);break;case 13:Vt(n,t),fn(t),c=t.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(pc=Oe())),l&4&&Oh(t);break;case 22:if(N=s!==null&&s.memoizedState!==null,t.mode&1?(Qe=(T=Qe)||N,Vt(n,t),Qe=T):Vt(n,t),fn(t),l&8192){if(T=t.memoizedState!==null,(t.stateNode.isHidden=T)&&!N&&(t.mode&1)!==0)for(j=t,N=t.child;N!==null;){for(O=j=N;j!==null;){switch(x=j,M=x.child,x.tag){case 0:case 11:case 14:case 15:Ss(4,x,x.return);break;case 1:ui(x,x.return);var B=x.stateNode;if(typeof B.componentWillUnmount=="function"){l=x,s=x.return;try{n=l,B.props=n.memoizedProps,B.state=n.memoizedState,B.componentWillUnmount()}catch(F){xe(l,s,F)}}break;case 5:ui(x,x.return);break;case 22:if(x.memoizedState!==null){Rh(O);continue}}M!==null?(M.return=x,j=M):Rh(O)}N=N.sibling}e:for(N=null,O=t;;){if(O.tag===5){if(N===null){N=O;try{c=O.stateNode,T?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(m=O.stateNode,y=O.memoizedProps.style,h=y!=null&&y.hasOwnProperty("display")?y.display:null,m.style.display=ap("display",h))}catch(F){xe(t,t.return,F)}}}else if(O.tag===6){if(N===null)try{O.stateNode.nodeValue=T?"":O.memoizedProps}catch(F){xe(t,t.return,F)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===t)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===t)break e;for(;O.sibling===null;){if(O.return===null||O.return===t)break e;N===O&&(N=null),O=O.return}N===O&&(N=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:Vt(n,t),fn(t),l&4&&Oh(t);break;case 21:break;default:Vt(n,t),fn(t)}}function fn(t){var n=t.flags;if(n&2){try{e:{for(var s=t.return;s!==null;){if(bg(s)){var l=s;break e}s=s.return}throw Error(b(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(Es(c,""),l.flags&=-33);var u=Ph(t);Au(t,u,c);break;case 3:case 4:var h=l.stateNode.containerInfo,m=Ph(t);ku(t,m,h);break;default:throw Error(b(161))}}catch(y){xe(t,t.return,y)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function G1(t,n,s){j=t,Bg(t)}function Bg(t,n,s){for(var l=(t.mode&1)!==0;j!==null;){var c=j,u=c.child;if(c.tag===22&&l){var h=c.memoizedState!==null||Do;if(!h){var m=c.alternate,y=m!==null&&m.memoizedState!==null||Qe;m=Do;var T=Qe;if(Do=h,(Qe=y)&&!T)for(j=c;j!==null;)h=j,y=h.child,h.tag===22&&h.memoizedState!==null?_h(c):y!==null?(y.return=h,j=y):_h(c);for(;u!==null;)j=u,Bg(u),u=u.sibling;j=c,Do=m,Qe=T}Dh(t)}else(c.subtreeFlags&8772)!==0&&u!==null?(u.return=c,j=u):Dh(t)}}function Dh(t){for(;j!==null;){var n=j;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Qe||Ea(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Qe)if(s===null)l.componentDidMount();else{var c=n.elementType===n.type?s.memoizedProps:Jt(n.type,s.memoizedProps);l.componentDidUpdate(c,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var u=n.updateQueue;u!==null&&ph(n,u,l);break;case 3:var h=n.updateQueue;if(h!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}ph(n,h,s)}break;case 5:var m=n.stateNode;if(s===null&&n.flags&4){s=m;var y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&s.focus();break;case"img":y.src&&(s.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var T=n.alternate;if(T!==null){var N=T.memoizedState;if(N!==null){var O=N.dehydrated;O!==null&&xs(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}Qe||n.flags&512&&Tu(n)}catch(x){xe(n,n.return,x)}}if(n===t){j=null;break}if(s=n.sibling,s!==null){s.return=n.return,j=s;break}j=n.return}}function Rh(t){for(;j!==null;){var n=j;if(n===t){j=null;break}var s=n.sibling;if(s!==null){s.return=n.return,j=s;break}j=n.return}}function _h(t){for(;j!==null;){var n=j;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Ea(4,n)}catch(y){xe(n,s,y)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var c=n.return;try{l.componentDidMount()}catch(y){xe(n,c,y)}}var u=n.return;try{Tu(n)}catch(y){xe(n,u,y)}break;case 5:var h=n.return;try{Tu(n)}catch(y){xe(n,h,y)}}}catch(y){xe(n,n.return,y)}if(n===t){j=null;break}var m=n.sibling;if(m!==null){m.return=n.return,j=m;break}j=n.return}}var Y1=Math.ceil,fa=Bn.ReactCurrentDispatcher,dc=Bn.ReactCurrentOwner,_t=Bn.ReactCurrentBatchConfig,ae=0,Ue=null,be=null,Ve=0,wt=0,ci=ur(0),$e=0,Fs=null,Rr=0,Ia=0,hc=0,Ts=null,lt=null,pc=0,Ai=1/0,Nn=null,da=!1,Eu=null,rr=null,Ro=!1,Qn=null,ha=0,ks=0,Iu=null,Vo=-1,Jo=0;function rt(){return(ae&6)!==0?Oe():Vo!==-1?Vo:Vo=Oe()}function ir(t){return(t.mode&1)===0?1:(ae&2)!==0&&Ve!==0?Ve&-Ve:_1.transition!==null?(Jo===0&&(Jo=Sp()),Jo):(t=fe,t!==0||(t=window.event,t=t===void 0?16:Np(t.type)),t)}function Ht(t,n,s,l){if(50<ks)throw ks=0,Iu=null,Error(b(185));zs(t,s,l),((ae&2)===0||t!==Ue)&&(t===Ue&&((ae&2)===0&&(Ia|=s),$e===4&&Gn(t,Ve)),dt(t,l),s===1&&ae===0&&(n.mode&1)===0&&(Ai=Oe()+500,Ta&&cr()))}function dt(t,n){var s=t.callbackNode;_0(t,n);var l=Yo(t,t===Ue?Ve:0);if(l===0)s!==null&&jd(s),t.callbackNode=null,t.callbackPriority=0;else if(n=l&-l,t.callbackPriority!==n){if(s!=null&&jd(s),n===1)t.tag===0?R1(bh.bind(null,t)):Wp(bh.bind(null,t)),x1(function(){(ae&6)===0&&cr()}),s=null;else{switch(Tp(l)){case 1:s=Uu;break;case 4:s=vp;break;case 16:s=Go;break;case 536870912:s=wp;break;default:s=Go}s=Kg(s,$g.bind(null,t))}t.callbackPriority=n,t.callbackNode=s}}function $g(t,n){if(Vo=-1,Jo=0,(ae&6)!==0)throw Error(b(327));var s=t.callbackNode;if(mi()&&t.callbackNode!==s)return null;var l=Yo(t,t===Ue?Ve:0);if(l===0)return null;if((l&30)!==0||(l&t.expiredLanes)!==0||n)n=pa(t,l);else{n=l;var c=ae;ae|=2;var u=Ug();(Ue!==t||Ve!==n)&&(Nn=null,Ai=Oe()+500,Nr(t,n));do try{Z1();break}catch(m){Fg(t,m)}while(1);Zu(),fa.current=u,ae=c,be!==null?n=0:(Ue=null,Ve=0,n=$e)}if(n!==0){if(n===2&&(c=Xl(t),c!==0&&(l=c,n=Cu(t,c))),n===1)throw s=Fs,Nr(t,0),Gn(t,l),dt(t,Oe()),s;if(n===6)Gn(t,l);else{if(c=t.current.alternate,(l&30)===0&&!Q1(c)&&(n=pa(t,l),n===2&&(u=Xl(t),u!==0&&(l=u,n=Cu(t,u))),n===1))throw s=Fs,Nr(t,0),Gn(t,l),dt(t,Oe()),s;switch(t.finishedWork=c,t.finishedLanes=l,n){case 0:case 1:throw Error(b(345));case 2:Ar(t,lt,Nn);break;case 3:if(Gn(t,l),(l&130023424)===l&&(n=pc+500-Oe(),10<n)){if(Yo(t,0)!==0)break;if(c=t.suspendedLanes,(c&l)!==l){rt(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=ou(Ar.bind(null,t,lt,Nn),n);break}Ar(t,lt,Nn);break;case 4:if(Gn(t,l),(l&4194240)===l)break;for(n=t.eventTimes,c=-1;0<l;){var h=31-qt(l);u=1<<h,h=n[h],h>c&&(c=h),l&=~u}if(l=c,l=Oe()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Y1(l/1960))-l,10<l){t.timeoutHandle=ou(Ar.bind(null,t,lt,Nn),l);break}Ar(t,lt,Nn);break;case 5:Ar(t,lt,Nn);break;default:throw Error(b(329))}}}return dt(t,Oe()),t.callbackNode===s?$g.bind(null,t):null}function Cu(t,n){var s=Ts;return t.current.memoizedState.isDehydrated&&(Nr(t,n).flags|=256),t=pa(t,n),t!==2&&(n=lt,lt=s,n!==null&&Nu(n)),t}function Nu(t){lt===null?lt=t:lt.push.apply(lt,t)}function Q1(t){for(var n=t;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var c=s[l],u=c.getSnapshot;c=c.value;try{if(!Gt(u(),c))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Gn(t,n){for(n&=~hc,n&=~Ia,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var s=31-qt(n),l=1<<s;t[s]=-1,n&=~l}}function bh(t){if((ae&6)!==0)throw Error(b(327));mi();var n=Yo(t,0);if((n&1)===0)return dt(t,Oe()),null;var s=pa(t,n);if(t.tag!==0&&s===2){var l=Xl(t);l!==0&&(n=l,s=Cu(t,l))}if(s===1)throw s=Fs,Nr(t,0),Gn(t,n),dt(t,Oe()),s;if(s===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Ar(t,lt,Nn),dt(t,Oe()),null}function gc(t,n){var s=ae;ae|=1;try{return t(n)}finally{ae=s,ae===0&&(Ai=Oe()+500,Ta&&cr())}}function _r(t){Qn!==null&&Qn.tag===0&&(ae&6)===0&&mi();var n=ae;ae|=1;var s=_t.transition,l=fe;try{if(_t.transition=null,fe=1,t)return t()}finally{fe=l,_t.transition=s,ae=n,(ae&6)===0&&cr()}}function mc(){wt=ci.current,ve(ci)}function Nr(t,n){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,N1(s)),be!==null)for(s=be.return;s!==null;){var l=s;switch(Yu(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ta();break;case 3:Ti(),ve(ct),ve(Xe),sc();break;case 5:ic(l);break;case 4:Ti();break;case 13:ve(Ee);break;case 19:ve(Ee);break;case 10:ec(l.type._context);break;case 22:case 23:mc()}s=s.return}if(Ue=t,be=t=sr(t.current,null),Ve=wt=n,$e=0,Fs=null,hc=Ia=Rr=0,lt=Ts=null,Ir!==null){for(n=0;n<Ir.length;n++)if(s=Ir[n],l=s.interleaved,l!==null){s.interleaved=null;var c=l.next,u=s.pending;if(u!==null){var h=u.next;u.next=c,l.next=h}s.pending=l}Ir=null}return t}function Fg(t,n){do{var s=be;try{if(Zu(),Uo.current=ca,ua){for(var l=Ie.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}ua=!1}if(Dr=0,Fe=Be=Ie=null,ws=!1,Ms=0,dc.current=null,s===null||s.return===null){$e=1,Fs=n,be=null;break}e:{var u=t,h=s.return,m=s,y=n;if(n=Ve,m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var T=y,N=m,O=N.tag;if((N.mode&1)===0&&(O===0||O===11||O===15)){var x=N.alternate;x?(N.updateQueue=x.updateQueue,N.memoizedState=x.memoizedState,N.lanes=x.lanes):(N.updateQueue=null,N.memoizedState=null)}var M=Th(h);if(M!==null){M.flags&=-257,kh(M,h,m,u,n),M.mode&1&&Sh(u,T,n),n=M,y=T;var B=n.updateQueue;if(B===null){var F=new Set;F.add(y),n.updateQueue=F}else B.add(y);break e}else{if((n&1)===0){Sh(u,T,n),yc();break e}y=Error(b(426))}}else if(Ae&&m.mode&1){var ce=Th(h);if(ce!==null){(ce.flags&65536)===0&&(ce.flags|=256),kh(ce,h,m,u,n),Qu(ki(y,m));break e}}u=y=ki(y,m),$e!==4&&($e=2),Ts===null?Ts=[u]:Ts.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n;var k=kg(u,y,n);hh(u,k);break e;case 1:m=y;var w=u.type,A=u.stateNode;if((u.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(rr===null||!rr.has(A)))){u.flags|=65536,n&=-n,u.lanes|=n;var _=Ag(u,m,n);hh(u,_);break e}}u=u.return}while(u!==null)}jg(s)}catch(z){n=z,be===s&&s!==null&&(be=s=s.return);continue}break}while(1)}function Ug(){var t=fa.current;return fa.current=ca,t===null?ca:t}function yc(){($e===0||$e===3||$e===2)&&($e=4),Ue===null||(Rr&268435455)===0&&(Ia&268435455)===0||Gn(Ue,Ve)}function pa(t,n){var s=ae;ae|=2;var l=Ug();(Ue!==t||Ve!==n)&&(Nn=null,Nr(t,n));do try{X1();break}catch(c){Fg(t,c)}while(1);if(Zu(),ae=s,fa.current=l,be!==null)throw Error(b(261));return Ue=null,Ve=0,$e}function X1(){for(;be!==null;)zg(be)}function Z1(){for(;be!==null&&!E0();)zg(be)}function zg(t){var n=Jg(t.alternate,t,wt);t.memoizedProps=t.pendingProps,n===null?jg(t):be=n,dc.current=null}function jg(t){var n=t;do{var s=n.alternate;if(t=n.return,(n.flags&32768)===0){if(s=K1(s,n,wt),s!==null){be=s;return}}else{if(s=W1(s,n),s!==null){s.flags&=32767,be=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,be=null;return}}if(n=n.sibling,n!==null){be=n;return}be=n=t}while(n!==null);$e===0&&($e=5)}function Ar(t,n,s){var l=fe,c=_t.transition;try{_t.transition=null,fe=1,ew(t,n,s,l)}finally{_t.transition=c,fe=l}return null}function ew(t,n,s,l){do mi();while(Qn!==null);if((ae&6)!==0)throw Error(b(327));s=t.finishedWork;var c=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var u=s.lanes|s.childLanes;if(b0(t,u),t===Ue&&(be=Ue=null,Ve=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ro||(Ro=!0,Kg(Go,function(){return mi(),null})),u=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||u){u=_t.transition,_t.transition=null;var h=fe;fe=1;var m=ae;ae|=4,dc.current=null,H1(t,s),Mg(s,t),S1(iu),Qo=!!ru,iu=ru=null,t.current=s,G1(s),I0(),ae=m,fe=h,_t.transition=u}else t.current=s;if(Ro&&(Ro=!1,Qn=t,ha=c),u=t.pendingLanes,u===0&&(rr=null),x0(s.stateNode),dt(t,Oe()),n!==null)for(l=t.onRecoverableError,s=0;s<n.length;s++)c=n[s],l(c.value,{componentStack:c.stack,digest:c.digest});if(da)throw da=!1,t=Eu,Eu=null,t;return(ha&1)!==0&&t.tag!==0&&mi(),u=t.pendingLanes,(u&1)!==0?t===Iu?ks++:(ks=0,Iu=t):ks=0,cr(),null}function mi(){if(Qn!==null){var t=Tp(ha),n=_t.transition,s=fe;try{if(_t.transition=null,fe=16>t?16:t,Qn===null)var l=!1;else{if(t=Qn,Qn=null,ha=0,(ae&6)!==0)throw Error(b(331));var c=ae;for(ae|=4,j=t.current;j!==null;){var u=j,h=u.child;if((j.flags&16)!==0){var m=u.deletions;if(m!==null){for(var y=0;y<m.length;y++){var T=m[y];for(j=T;j!==null;){var N=j;switch(N.tag){case 0:case 11:case 15:Ss(8,N,u)}var O=N.child;if(O!==null)O.return=N,j=O;else for(;j!==null;){N=j;var x=N.sibling,M=N.return;if(_g(N),N===T){j=null;break}if(x!==null){x.return=M,j=x;break}j=M}}}var B=u.alternate;if(B!==null){var F=B.child;if(F!==null){B.child=null;do{var ce=F.sibling;F.sibling=null,F=ce}while(F!==null)}}j=u}}if((u.subtreeFlags&2064)!==0&&h!==null)h.return=u,j=h;else e:for(;j!==null;){if(u=j,(u.flags&2048)!==0)switch(u.tag){case 0:case 11:case 15:Ss(9,u,u.return)}var k=u.sibling;if(k!==null){k.return=u.return,j=k;break e}j=u.return}}var w=t.current;for(j=w;j!==null;){h=j;var A=h.child;if((h.subtreeFlags&2064)!==0&&A!==null)A.return=h,j=A;else e:for(h=w;j!==null;){if(m=j,(m.flags&2048)!==0)try{switch(m.tag){case 0:case 11:case 15:Ea(9,m)}}catch(z){xe(m,m.return,z)}if(m===h){j=null;break e}var _=m.sibling;if(_!==null){_.return=m.return,j=_;break e}j=m.return}}if(ae=c,cr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ma,t)}catch{}l=!0}return l}finally{fe=s,_t.transition=n}}return!1}function Lh(t,n,s){n=ki(s,n),n=kg(t,n,1),t=nr(t,n,1),n=rt(),t!==null&&(zs(t,1,n),dt(t,n))}function xe(t,n,s){if(t.tag===3)Lh(t,t,s);else for(;n!==null;){if(n.tag===3){Lh(n,t,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(rr===null||!rr.has(l))){t=ki(s,t),t=Ag(n,t,1),n=nr(n,t,1),t=rt(),n!==null&&(zs(n,1,t),dt(n,t));break}}n=n.return}}function tw(t,n,s){var l=t.pingCache;l!==null&&l.delete(n),n=rt(),t.pingedLanes|=t.suspendedLanes&s,Ue===t&&(Ve&s)===s&&($e===4||$e===3&&(Ve&130023424)===Ve&&500>Oe()-pc?Nr(t,0):hc|=s),dt(t,n)}function Vg(t,n){n===0&&((t.mode&1)===0?n=1:(n=ko,ko<<=1,(ko&130023424)===0&&(ko=4194304)));var s=rt();t=Ln(t,n),t!==null&&(zs(t,n,s),dt(t,s))}function nw(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Vg(t,s)}function rw(t,n){var s=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=t.stateNode;break;default:throw Error(b(314))}l!==null&&l.delete(n),Vg(t,s)}var Jg;Jg=function(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps||ct.current)ut=!0;else{if((t.lanes&s)===0&&(n.flags&128)===0)return ut=!1,J1(t,n,s);ut=(t.flags&131072)!==0}else ut=!1,Ae&&(n.flags&1048576)!==0&&qp(n,ia,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;jo(t,n),t=n.pendingProps;var c=vi(n,Xe.current);gi(n,s),c=ac(null,n,l,t,c,s);var u=lc();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ft(l)?(u=!0,na(n)):u=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,nc(n),c.updater=ka,n.stateNode=c,c._reactInternals=n,hu(n,l,t,s),n=mu(null,n,l,!0,u,s)):(n.tag=0,Ae&&u&&Gu(n),nt(null,n,c,s),n=n.child),n;case 16:l=n.elementType;e:{switch(jo(t,n),t=n.pendingProps,c=l._init,l=c(l._payload),n.type=l,c=n.tag=sw(l),t=Jt(l,t),c){case 0:n=gu(null,n,l,t,s);break e;case 1:n=Ih(null,n,l,t,s);break e;case 11:n=Ah(null,n,l,t,s);break e;case 14:n=Eh(null,n,l,Jt(l.type,t),s);break e}throw Error(b(306,l,""))}return n;case 0:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Jt(l,c),gu(t,n,l,c,s);case 1:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Jt(l,c),Ih(t,n,l,c,s);case 3:e:{if(Ng(n),t===null)throw Error(b(387));l=n.pendingProps,u=n.memoizedState,c=u.element,Qp(t,n),aa(n,l,null,s);var h=n.memoizedState;if(l=h.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},n.updateQueue.baseState=u,n.memoizedState=u,n.flags&256){c=ki(Error(b(423)),n),n=Ch(t,n,l,s,c);break e}else if(l!==c){c=ki(Error(b(424)),n),n=Ch(t,n,l,s,c);break e}else for(St=tr(n.stateNode.containerInfo.firstChild),Tt=n,Ae=!0,Wt=null,s=tg(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(wi(),l===c){n=Mn(t,n,s);break e}nt(t,n,l,s)}n=n.child}return n;case 5:return ng(n),t===null&&cu(n),l=n.type,c=n.pendingProps,u=t!==null?t.memoizedProps:null,h=c.children,su(l,c)?h=null:u!==null&&su(l,u)&&(n.flags|=32),Cg(t,n),nt(t,n,h,s),n.child;case 6:return t===null&&cu(n),null;case 13:return xg(t,n,s);case 4:return rc(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Si(n,null,l,s):nt(t,n,l,s),n.child;case 11:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Jt(l,c),Ah(t,n,l,c,s);case 7:return nt(t,n,n.pendingProps,s),n.child;case 8:return nt(t,n,n.pendingProps.children,s),n.child;case 12:return nt(t,n,n.pendingProps.children,s),n.child;case 10:e:{if(l=n.type._context,c=n.pendingProps,u=n.memoizedProps,h=c.value,me(sa,l._currentValue),l._currentValue=h,u!==null)if(Gt(u.value,h)){if(u.children===c.children&&!ct.current){n=Mn(t,n,s);break e}}else for(u=n.child,u!==null&&(u.return=n);u!==null;){var m=u.dependencies;if(m!==null){h=u.child;for(var y=m.firstContext;y!==null;){if(y.context===l){if(u.tag===1){y=Rn(-1,s&-s),y.tag=2;var T=u.updateQueue;if(T!==null){T=T.shared;var N=T.pending;N===null?y.next=y:(y.next=N.next,N.next=y),T.pending=y}}u.lanes|=s,y=u.alternate,y!==null&&(y.lanes|=s),fu(u.return,s,n),m.lanes|=s;break}y=y.next}}else if(u.tag===10)h=u.type===n.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(b(341));h.lanes|=s,m=h.alternate,m!==null&&(m.lanes|=s),fu(h,s,n),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===n){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}nt(t,n,c.children,s),n=n.child}return n;case 9:return c=n.type,l=n.pendingProps.children,gi(n,s),c=bt(c),l=l(c),n.flags|=1,nt(t,n,l,s),n.child;case 14:return l=n.type,c=Jt(l,n.pendingProps),c=Jt(l.type,c),Eh(t,n,l,c,s);case 15:return Eg(t,n,n.type,n.pendingProps,s);case 17:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Jt(l,c),jo(t,n),n.tag=1,ft(l)?(t=!0,na(n)):t=!1,gi(n,s),Zp(n,l,c),hu(n,l,c,s),mu(null,n,l,!0,t,s);case 19:return Pg(t,n,s);case 22:return Ig(t,n,s)}throw Error(b(156,n.tag))};function Kg(t,n){return yp(t,n)}function iw(t,n,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,n,s,l){return new iw(t,n,s,l)}function vc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sw(t){if(typeof t=="function")return vc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bu)return 11;if(t===$u)return 14}return 2}function sr(t,n){var s=t.alternate;return s===null?(s=Rt(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ko(t,n,s,l,c,u){var h=2;if(l=t,typeof t=="function")vc(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case ei:return xr(s.children,c,u,n);case Mu:h=8,c|=8;break;case Bl:return t=Rt(12,s,n,c|2),t.elementType=Bl,t.lanes=u,t;case $l:return t=Rt(13,s,n,c),t.elementType=$l,t.lanes=u,t;case Fl:return t=Rt(19,s,n,c),t.elementType=Fl,t.lanes=u,t;case ep:return Ca(s,c,u,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xh:h=10;break e;case Zh:h=9;break e;case Bu:h=11;break e;case $u:h=14;break e;case Wn:h=16,l=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return n=Rt(h,s,n,c),n.elementType=t,n.type=l,n.lanes=u,n}function xr(t,n,s,l){return t=Rt(7,t,l,n),t.lanes=s,t}function Ca(t,n,s,l){return t=Rt(22,t,l,n),t.elementType=ep,t.lanes=s,t.stateNode={isHidden:!1},t}function _l(t,n,s){return t=Rt(6,t,null,n),t.lanes=s,t}function bl(t,n,s){return n=Rt(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function ow(t,n,s,l,c){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pl(0),this.expirationTimes=pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pl(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function wc(t,n,s,l,c,u,h,m,y){return t=new ow(t,n,s,m,y),n===1?(n=1,u===!0&&(n|=8)):n=0,u=Rt(3,null,null,n),t.current=u,u.stateNode=t,u.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},nc(u),t}function aw(t,n,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zr,key:l==null?null:""+l,children:t,containerInfo:n,implementation:s}}function Wg(t){if(!t)return ar;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(b(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ft(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(b(171))}if(t.tag===1){var s=t.type;if(ft(s))return Kp(t,s,n)}return n}function qg(t,n,s,l,c,u,h,m,y){return t=wc(s,l,!0,t,c,u,h,m,y),t.context=Wg(null),s=t.current,l=rt(),c=ir(s),u=Rn(l,c),u.callback=n!=null?n:null,nr(s,u,c),t.current.lanes=c,zs(t,c,l),dt(t,l),t}function Na(t,n,s,l){var c=n.current,u=rt(),h=ir(c);return s=Wg(s),n.context===null?n.context=s:n.pendingContext=s,n=Rn(u,h),n.payload={element:t},l=l===void 0?null:l,l!==null&&(n.callback=l),t=nr(c,n,h),t!==null&&(Ht(t,c,h,u),Fo(t,c,h)),h}function ga(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mh(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Sc(t,n){Mh(t,n),(t=t.alternate)&&Mh(t,n)}function lw(){return null}var Hg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tc(t){this._internalRoot=t}xa.prototype.render=Tc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(b(409));Na(t,n,null,null)};xa.prototype.unmount=Tc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;_r(function(){Na(null,t,null,null)}),n[bn]=null}};function xa(t){this._internalRoot=t}xa.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ep();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Hn.length&&n!==0&&n<Hn[s].priority;s++);Hn.splice(s,0,t),s===0&&Cp(t)}};function kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bh(){}function uw(t,n,s,l,c){if(c){if(typeof l=="function"){var u=l;l=function(){var T=ga(h);u.call(T)}}var h=qg(n,l,t,0,null,!1,!1,"",Bh);return t._reactRootContainer=h,t[bn]=h.current,Ds(t.nodeType===8?t.parentNode:t),_r(),h}for(;c=t.lastChild;)t.removeChild(c);if(typeof l=="function"){var m=l;l=function(){var T=ga(y);m.call(T)}}var y=wc(t,0,!1,null,null,!1,!1,"",Bh);return t._reactRootContainer=y,t[bn]=y.current,Ds(t.nodeType===8?t.parentNode:t),_r(function(){Na(n,y,s,l)}),y}function Oa(t,n,s,l,c){var u=s._reactRootContainer;if(u){var h=u;if(typeof c=="function"){var m=c;c=function(){var y=ga(h);m.call(y)}}Na(n,h,t,c)}else h=uw(s,n,t,c,l);return ga(h)}kp=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var s=ds(n.pendingLanes);s!==0&&(zu(n,s|1),dt(n,Oe()),(ae&6)===0&&(Ai=Oe()+500,cr()))}break;case 13:_r(function(){var l=Ln(t,1);if(l!==null){var c=rt();Ht(l,t,1,c)}}),Sc(t,1)}};ju=function(t){if(t.tag===13){var n=Ln(t,134217728);if(n!==null){var s=rt();Ht(n,t,134217728,s)}Sc(t,134217728)}};Ap=function(t){if(t.tag===13){var n=ir(t),s=Ln(t,n);if(s!==null){var l=rt();Ht(s,t,n,l)}Sc(t,n)}};Ep=function(){return fe};Ip=function(t,n){var s=fe;try{return fe=t,n()}finally{fe=s}};Gl=function(t,n,s){switch(n){case"input":if(jl(t,s),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==t&&l.form===t.form){var c=Sa(l);if(!c)throw Error(b(90));np(l),jl(l,c)}}}break;case"textarea":ip(t,s);break;case"select":n=s.value,n!=null&&fi(t,!!s.multiple,n,!1)}};fp=gc;dp=_r;var cw={usingClientEntryPoint:!1,Events:[Vs,ii,Sa,up,cp,gc]},us={findFiberByHostInstance:Er,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},fw={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gp(t),t===null?null:t.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||lw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_o.isDisabled&&_o.supportsFiber)try{ma=_o.inject(fw),pn=_o}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cw;At.createPortal=function(t,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kc(n))throw Error(b(200));return aw(t,n,null,s)};At.createRoot=function(t,n){if(!kc(t))throw Error(b(299));var s=!1,l="",c=Hg;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=wc(t,1,!1,null,null,s,!1,l,c),t[bn]=n.current,Ds(t.nodeType===8?t.parentNode:t),new Tc(n)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=gp(n),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return _r(t)};At.hydrate=function(t,n,s){if(!Pa(n))throw Error(b(200));return Oa(null,t,n,!0,s)};At.hydrateRoot=function(t,n,s){if(!kc(t))throw Error(b(405));var l=s!=null&&s.hydratedSources||null,c=!1,u="",h=Hg;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),n=qg(n,null,t,1,s!=null?s:null,c,!1,u,h),t[bn]=n.current,Ds(t),l)for(t=0;t<l.length;t++)s=l[t],c=s._getVersion,c=c(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,c]:n.mutableSourceEagerHydrationData.push(s,c);return new xa(n)};At.render=function(t,n,s){if(!Pa(n))throw Error(b(200));return Oa(null,t,n,!1,s)};At.unmountComponentAtNode=function(t){if(!Pa(t))throw Error(b(40));return t._reactRootContainer?(_r(function(){Oa(null,null,t,!1,function(){t._reactRootContainer=null,t[bn]=null})}),!0):!1};At.unstable_batchedUpdates=gc;At.unstable_renderSubtreeIntoContainer=function(t,n,s,l){if(!Pa(s))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return Oa(t,n,s,!1,l)};At.version="18.2.0-next-9e3b772b8-20220608";(function(t){function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}n(),t.exports=At})(Uh);var $h=Uh.exports;Ll.createRoot=$h.createRoot,Ll.hydrateRoot=$h.hydrateRoot;var xu={exports:{}};(function(t,n){(function(s,l){l(n)})(qv,function(s){var l=Object.defineProperty,c=(o,e,r)=>e in o?l(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,u=(o,e,r)=>(c(o,typeof e!="symbol"?e+"":e,r),r),h;(function(o){o[o.Canceled=1]="Canceled",o[o.Unknown=2]="Unknown",o[o.InvalidArgument=3]="InvalidArgument",o[o.DeadlineExceeded=4]="DeadlineExceeded",o[o.NotFound=5]="NotFound",o[o.AlreadyExists=6]="AlreadyExists",o[o.PermissionDenied=7]="PermissionDenied",o[o.ResourceExhausted=8]="ResourceExhausted",o[o.FailedPrecondition=9]="FailedPrecondition",o[o.Aborted=10]="Aborted",o[o.OutOfRange=11]="OutOfRange",o[o.Unimplemented=12]="Unimplemented",o[o.Internal=13]="Internal",o[o.Unavailable=14]="Unavailable",o[o.DataLoss=15]="DataLoss",o[o.Unauthenticated=16]="Unauthenticated"})(h||(h={}));function m(o){const e=h[o];return typeof e!="string"?o.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,r=>"_"+r.toLowerCase())}class y extends Error{constructor(e,r=h.Unknown,i,a,f){super(T(e,r)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=r,this.metadata=new Headers(i!=null?i:{}),this.details=a!=null?a:[],this.cause=f}static from(e,r=h.Unknown){return e instanceof y?e:e instanceof Error?e.name=="AbortError"?new y(e.message,h.Canceled):new y(e.message,r,void 0,void 0,e):new y(String(e),r,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===y.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const r="typeName"in e?{findMessage:a=>a===e.typeName?e:void 0}:e,i=[];for(const a of this.details){if("getType"in a){r.findMessage(a.getType().typeName)&&i.push(a);continue}const f=r.findMessage(a.type);if(f)try{i.push(f.fromBinary(a.value))}catch{}}return i}}function T(o,e){return o.length?`[${m(e)}] ${o}`:`[${m(e)}]`}function N(o,e){if(!o)throw new Error(e)}const O=34028234663852886e22,x=-34028234663852886e22,M=4294967295,B=2147483647,F=-2147483648;function ce(o){if(typeof o!="number")throw new Error("invalid int 32: "+typeof o);if(!Number.isInteger(o)||o>B||o<F)throw new Error("invalid int 32: "+o)}function k(o){if(typeof o!="number")throw new Error("invalid uint 32: "+typeof o);if(!Number.isInteger(o)||o>M||o<0)throw new Error("invalid uint 32: "+o)}function w(o){if(typeof o!="number")throw new Error("invalid float 32: "+typeof o);if(!!Number.isFinite(o)&&(o>O||o<x))throw new Error("invalid float 32: "+o)}const A=Symbol("@bufbuild/protobuf/enum-type");function _(o){const e=o[A];return N(e,"missing enum type on enum object"),e}function z(o,e,r,i){o[A]=V(e,r.map(a=>({no:a.no,name:a.name,localName:o[a.no]})))}function V(o,e,r){const i=Object.create(null),a=Object.create(null),f=[];for(const d of e){const p=H(d);f.push(p),i[d.name]=p,a[d.no]=p}return{typeName:o,values:f,findName(d){return i[d]},findNumber(d){return a[d]}}}function J(o,e,r){const i={};for(const a of e){const f=H(a);i[f.localName]=f.no,i[f.no]=f.localName}return z(i,o,e),i}function H(o){return"localName"in o?o:Object.assign(Object.assign({},o),{localName:o.name})}class te{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,r){const i=this.getType(),a=i.runtime.bin,f=a.makeReadOptions(r);return a.readMessage(this,f.readerFactory(e),e.byteLength,f),this}fromJson(e,r){const i=this.getType(),a=i.runtime.json,f=a.makeReadOptions(r);return a.readMessage(i,e,f,this),this}fromJsonString(e,r){let i;try{i=JSON.parse(e)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(i,r)}toBinary(e){const r=this.getType(),i=r.runtime.bin,a=i.makeWriteOptions(e),f=a.writerFactory();return i.writeMessage(this,f,a),f.finish()}toJson(e){const r=this.getType(),i=r.runtime.json,a=i.makeWriteOptions(e);return i.writeMessage(this,a)}toJsonString(e){var r;const i=this.toJson(e);return JSON.stringify(i,null,(r=e==null?void 0:e.prettySpaces)!==null&&r!==void 0?r:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function ne(o,e,r,i){var a;const f=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:e.substring(e.lastIndexOf(".")+1),d={[f]:function(p){o.util.initFields(this),o.util.initPartial(p,this)}}[f];return Object.setPrototypeOf(d.prototype,new te),Object.assign(d,{runtime:o,typeName:e,fields:o.util.newFieldList(r),fromBinary(p,g){return new d().fromBinary(p,g)},fromJson(p,g){return new d().fromJson(p,g)},fromJsonString(p,g){return new d().fromJsonString(p,g)},equals(p,g){return o.util.equals(d,p,g)}}),d}function ht(){let o=0,e=0;for(let i=0;i<28;i+=7){let a=this.buf[this.pos++];if(o|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[o,e]}let r=this.buf[this.pos++];if(o|=(r&15)<<28,e=(r&112)>>4,(r&128)==0)return this.assertBounds(),[o,e];for(let i=3;i<=31;i+=7){let a=this.buf[this.pos++];if(e|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[o,e]}throw new Error("invalid varint")}function mn(o,e,r){for(let f=0;f<28;f=f+7){const d=o>>>f,p=!(d>>>7==0&&e==0),g=(p?d|128:d)&255;if(r.push(g),!p)return}const i=o>>>28&15|(e&7)<<4,a=e>>3!=0;if(r.push((a?i|128:i)&255),!!a){for(let f=3;f<31;f=f+7){const d=e>>>f,p=d>>>7!=0,g=(p?d|128:d)&255;if(r.push(g),!p)return}r.push(e>>>31&1)}}const Yt=4294967296;function xi(o){const e=o[0]==="-";e&&(o=o.slice(1));const r=1e6;let i=0,a=0;function f(d,p){const g=Number(o.slice(d,p));a*=r,i=i*r+g,i>=Yt&&(a=a+(i/Yt|0),i=i%Yt)}return f(-24,-18),f(-18,-12),f(-12,-6),f(-6),e?X(i,a):U(i,a)}function Ra(o,e){let r=U(o,e);const i=r.hi&2147483648;i&&(r=X(r.lo,r.hi));const a=Mr(r.lo,r.hi);return i?"-"+a:a}function Mr(o,e){if({lo:o,hi:e}=Pi(o,e),e<=2097151)return String(Yt*e+o);const r=o&16777215,i=(o>>>24|e<<8)&16777215,a=e>>16&65535;let f=r+i*6777216+a*6710656,d=i+a*8147497,p=a*2;const g=1e7;return f>=g&&(d+=Math.floor(f/g),f%=g),d>=g&&(p+=Math.floor(d/g),d%=g),p.toString()+Z(d)+Z(f)}function Pi(o,e){return{lo:o>>>0,hi:e>>>0}}function U(o,e){return{lo:o|0,hi:e|0}}function X(o,e){return e=~e,o?o=~o+1:e+=1,U(o,e)}const Z=o=>{const e=String(o);return"0000000".slice(e.length)+e};function we(o,e){if(o>=0){for(;o>127;)e.push(o&127|128),o=o>>>7;e.push(o)}else{for(let r=0;r<9;r++)e.push(o&127|128),o=o>>7;e.push(1)}}function De(){let o=this.buf[this.pos++],e=o&127;if((o&128)==0)return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<7,(o&128)==0)return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<14,(o&128)==0)return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<21,(o&128)==0)return this.assertBounds(),e;o=this.buf[this.pos++],e|=(o&15)<<28;for(let r=5;(o&128)!==0&&r<10;r++)o=this.buf[this.pos++];if((o&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function Br(){const o=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof o.getBigInt64=="function"&&typeof o.getBigUint64=="function"&&typeof o.setBigInt64=="function"&&typeof o.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),f=BigInt("9223372036854775807"),d=BigInt("0"),p=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(g){const v=typeof g=="bigint"?g:BigInt(g);if(v>f||v<a)throw new Error(`int64 invalid: ${g}`);return v},uParse(g){const v=typeof g=="bigint"?g:BigInt(g);if(v>p||v<d)throw new Error(`uint64 invalid: ${g}`);return v},enc(g){return o.setBigInt64(0,this.parse(g),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},uEnc(g){return o.setBigInt64(0,this.uParse(g),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},dec(g,v){return o.setInt32(0,g,!0),o.setInt32(4,v,!0),o.getBigInt64(0,!0)},uDec(g,v){return o.setInt32(0,g,!0),o.setInt32(4,v,!0),o.getBigUint64(0,!0)}}}const r=a=>N(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),i=a=>N(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),r(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),i(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),r(a),xi(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),i(a),xi(a)},dec(a,f){return Ra(a,f)},uDec(a,f){return Mr(a,f)}}}const de=Br();var C;(function(o){o[o.DOUBLE=1]="DOUBLE",o[o.FLOAT=2]="FLOAT",o[o.INT64=3]="INT64",o[o.UINT64=4]="UINT64",o[o.INT32=5]="INT32",o[o.FIXED64=6]="FIXED64",o[o.FIXED32=7]="FIXED32",o[o.BOOL=8]="BOOL",o[o.STRING=9]="STRING",o[o.BYTES=12]="BYTES",o[o.UINT32=13]="UINT32",o[o.SFIXED32=15]="SFIXED32",o[o.SFIXED64=16]="SFIXED64",o[o.SINT32=17]="SINT32",o[o.SINT64=18]="SINT64"})(C||(C={}));var Ke;(function(o){o[o.BIGINT=0]="BIGINT",o[o.STRING=1]="STRING"})(Ke||(Ke={}));function pt(o,e,r){if(e===r)return!0;if(o==C.BYTES){if(!(e instanceof Uint8Array)||!(r instanceof Uint8Array)||e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==r[i])return!1;return!0}switch(o){case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:return e==r}return!1}function $r(o,e){switch(o){case C.BOOL:return!1;case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:return e==0?de.zero:"0";case C.DOUBLE:case C.FLOAT:return 0;case C.BYTES:return new Uint8Array(0);case C.STRING:return"";default:return 0}}function Ic(o,e){switch(o){case C.BOOL:return e===!1;case C.STRING:return e==="";case C.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Pe;(function(o){o[o.Varint=0]="Varint",o[o.Bit64=1]="Bit64",o[o.LengthDelimited=2]="LengthDelimited",o[o.StartGroup=3]="StartGroup",o[o.EndGroup=4]="EndGroup",o[o.Bit32=5]="Bit32"})(Pe||(Pe={}));class Xg{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let a=0;a<this.chunks.length;a++)e+=this.chunks[a].length;let r=new Uint8Array(e),i=0;for(let a=0;a<this.chunks.length;a++)r.set(this.chunks[a],i),i+=this.chunks[a].length;return this.chunks=[],r}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),r=this.stack.pop();if(!r)throw new Error("invalid state, fork stack empty");return this.chunks=r.chunks,this.buf=r.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,r){return this.uint32((e<<3|r)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(k(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return ce(e),we(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let r=this.textEncoder.encode(e);return this.uint32(r.byteLength),this.raw(r)}float(e){w(e);let r=new Uint8Array(4);return new DataView(r.buffer).setFloat32(0,e,!0),this.raw(r)}double(e){let r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),this.raw(r)}fixed32(e){k(e);let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e,!0),this.raw(r)}sfixed32(e){ce(e);let r=new Uint8Array(4);return new DataView(r.buffer).setInt32(0,e,!0),this.raw(r)}sint32(e){return ce(e),e=(e<<1^e>>31)>>>0,we(e,this.buf),this}sfixed64(e){let r=new Uint8Array(8),i=new DataView(r.buffer),a=de.enc(e);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(r)}fixed64(e){let r=new Uint8Array(8),i=new DataView(r.buffer),a=de.uEnc(e);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(r)}int64(e){let r=de.enc(e);return mn(r.lo,r.hi,this.buf),this}sint64(e){let r=de.enc(e),i=r.hi>>31,a=r.lo<<1^i,f=(r.hi<<1|r.lo>>>31)^i;return mn(a,f,this.buf),this}uint64(e){let r=de.uEnc(e);return mn(r.lo,r.hi,this.buf),this}}class Zg{constructor(e,r){this.varint64=ht,this.uint32=De,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=r!=null?r:new TextDecoder}tag(){let e=this.uint32(),r=e>>>3,i=e&7;if(r<=0||i<0||i>5)throw new Error("illegal tag: field no "+r+" wire type "+i);return[r,i]}skip(e,r){let i=this.pos;switch(e){case Pe.Varint:for(;this.buf[this.pos++]&128;);break;case Pe.Bit64:this.pos+=4;case Pe.Bit32:this.pos+=4;break;case Pe.LengthDelimited:let a=this.uint32();this.pos+=a;break;case Pe.StartGroup:for(;;){const[f,d]=this.tag();if(d===Pe.EndGroup){if(r!==void 0&&f!==r)throw new Error("invalid end group tag");break}this.skip(d,f)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return de.dec(...this.varint64())}uint64(){return de.uDec(...this.varint64())}sint64(){let[e,r]=this.varint64(),i=-(e&1);return e=(e>>>1|(r&1)<<31)^i,r=r>>>1^i,de.dec(e,r)}bool(){let[e,r]=this.varint64();return e!==0||r!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return de.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return de.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),r=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(r,r+e)}string(){return this.textDecoder.decode(this.bytes())}}function em(o,e,r,i){let a;return{typeName:e,extendee:r,get field(){if(!a){const f=typeof i=="function"?i():i;f.name=e.split(".").pop(),f.jsonName=`[${e}]`,a=o.util.newFieldList([f]).list()[0]}return a},runtime:o}}function Cc(o){const e=o.field.localName,r=Object.create(null);return r[e]=tm(o),[r,()=>r[e]]}function tm(o){const e=o.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return $r(e.T,e.L);case"message":const r=e.T,i=new r;return r.fieldWrapper?r.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function nm(o,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let r=o.length-1;r>=0;--r)if(o[r].no==e.no)return[o[r]];return[]}return o.filter(r=>r.no===e.no)}let yn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ks=[];for(let o=0;o<yn.length;o++)Ks[yn[o].charCodeAt(0)]=o;Ks["-".charCodeAt(0)]=yn.indexOf("+"),Ks["_".charCodeAt(0)]=yn.indexOf("/");const _a={dec(o){let e=o.length*3/4;o[o.length-2]=="="?e-=2:o[o.length-1]=="="&&(e-=1);let r=new Uint8Array(e),i=0,a=0,f,d=0;for(let p=0;p<o.length;p++){if(f=Ks[o.charCodeAt(p)],f===void 0)switch(o[p]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:d=f,a=1;break;case 1:r[i++]=d<<2|(f&48)>>4,d=f,a=2;break;case 2:r[i++]=(d&15)<<4|(f&60)>>2,d=f,a=3;break;case 3:r[i++]=(d&3)<<6|f,a=0;break}}if(a==1)throw Error("invalid base64 string.");return r.subarray(0,i)},enc(o){let e="",r=0,i,a=0;for(let f=0;f<o.length;f++)switch(i=o[f],r){case 0:e+=yn[i>>2],a=(i&3)<<4,r=1;break;case 1:e+=yn[a|i>>4],a=(i&15)<<2,r=2;break;case 2:e+=yn[a|i>>6],e+=yn[i&63],r=0;break}return r&&(e+=yn[a],e+="=",r==1&&(e+="=")),e}};function rm(o,e,r){xc(e,o);const i=e.runtime.bin.makeReadOptions(r),a=nm(o.getType().runtime.bin.listUnknownFields(o),e.field),[f,d]=Cc(e);for(const p of a)e.runtime.bin.readField(f,i.readerFactory(p.data),e.field,p.wireType,i);return d()}function im(o,e,r,i){xc(e,o);const a=e.runtime.bin.makeReadOptions(i),f=e.runtime.bin.makeWriteOptions(i);if(Nc(o,e)){const v=o.getType().runtime.bin.listUnknownFields(o).filter(S=>S.no!=e.field.no);o.getType().runtime.bin.discardUnknownFields(o);for(const S of v)o.getType().runtime.bin.onUnknownField(o,S.no,S.wireType,S.data)}const d=f.writerFactory();let p=e.field;!p.opt&&!p.repeated&&(p.kind=="enum"||p.kind=="scalar")&&(p=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(p,r,d,f);const g=a.readerFactory(d.finish());for(;g.pos<g.len;){const[v,S]=g.tag(),D=g.skip(S,v);o.getType().runtime.bin.onUnknownField(o,v,S,D)}}function Nc(o,e){const r=o.getType();return e.extendee.typeName===r.typeName&&!!r.runtime.bin.listUnknownFields(o).find(i=>i.no==e.field.no)}function xc(o,e){N(o.extendee.typeName==e.getType().typeName,`extension ${o.typeName} can only be applied to message ${o.extendee.typeName}`)}function Pc(o,e){const r=o.localName;if(o.repeated)return e[r].length>0;if(o.oneof)return e[o.oneof.localName].case===r;switch(o.kind){case"enum":case"scalar":return o.opt||o.req?e[r]!==void 0:o.kind=="enum"?e[r]!==o.T.values[0].no:!Ic(o.T,e[r]);case"message":return e[r]!==void 0;case"map":return Object.keys(e[r]).length>0}}function Oc(o,e){const r=o.localName,i=!o.opt&&!o.req;if(o.repeated)e[r]=[];else if(o.oneof)e[o.oneof.localName]={case:void 0};else switch(o.kind){case"map":e[r]={};break;case"enum":e[r]=i?o.T.values[0].no:void 0;break;case"scalar":e[r]=i?$r(o.T,o.L):void 0;break;case"message":e[r]=void 0;break}}function fr(o,e){if(o===null||typeof o!="object"||!Object.getOwnPropertyNames(te.prototype).every(i=>i in o&&typeof o[i]=="function"))return!1;const r=o.getType();return r===null||typeof r!="function"||!("typeName"in r)||typeof r.typeName!="string"?!1:e===void 0?!0:r.typeName==e.typeName}function Dc(o,e){return fr(e)||!o.fieldWrapper?e:o.fieldWrapper.wrapField(e)}C.DOUBLE,C.FLOAT,C.INT64,C.UINT64,C.INT32,C.UINT32,C.BOOL,C.STRING,C.BYTES;const Rc={ignoreUnknownFields:!1},_c={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function sm(o){return o?Object.assign(Object.assign({},Rc),o):Rc}function om(o){return o?Object.assign(Object.assign({},_c),o):_c}const Ws=Symbol(),qs=Symbol();function am(){return{makeReadOptions:sm,makeWriteOptions:om,readMessage(o,e,r,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${o.typeName} from JSON: ${Qt(e)}`);i=i!=null?i:new o;const a=new Map,f=r.typeRegistry;for(const[d,p]of Object.entries(e)){const g=o.fields.findJsonName(d);if(g){if(g.oneof){if(p===null&&g.kind=="scalar")continue;const v=a.get(g.oneof);if(v!==void 0)throw new Error(`cannot decode message ${o.typeName} from JSON: multiple keys for oneof "${g.oneof.name}" present: "${v}", "${d}"`);a.set(g.oneof,d)}bc(i,p,g,r,o)}else{let v=!1;if((f==null?void 0:f.findExtension)&&d.startsWith("[")&&d.endsWith("]")){const S=f.findExtension(d.substring(1,d.length-1));if(S&&S.extendee.typeName==o.typeName){v=!0;const[D,P]=Cc(S);bc(D,p,S.field,r,S),im(i,S,P(),r)}}if(!v&&!r.ignoreUnknownFields)throw new Error(`cannot decode message ${o.typeName} from JSON: key "${d}" is unknown`)}}return i},writeMessage(o,e){const r=o.getType(),i={};let a;try{for(a of r.fields.byNumber()){if(!Pc(a,o)){if(a.req)throw"required field not set";if(!e.emitDefaultValues||!um(a))continue}const d=a.oneof?o[a.oneof.localName].value:o[a.localName],p=Lc(a,d,e);p!==void 0&&(i[e.useProtoFieldName?a.name:a.jsonName]=p)}const f=e.typeRegistry;if(f!=null&&f.findExtensionFor)for(const d of r.runtime.bin.listUnknownFields(o)){const p=f.findExtensionFor(r.typeName,d.no);if(p&&Nc(o,p)){const g=rm(o,p,e),v=Lc(p.field,g,e);v!==void 0&&(i[p.field.jsonName]=v)}}}catch(f){const d=a?`cannot encode field ${r.typeName}.${a.name} to JSON`:`cannot encode message ${r.typeName} to JSON`,p=f instanceof Error?f.message:String(f);throw new Error(d+(p.length>0?`: ${p}`:""))}return i},readScalar(o,e,r){return Oi(o,e,r!=null?r:Ke.BIGINT,!0)},writeScalar(o,e,r){if(e!==void 0&&(r||Ic(o,e)))return Hs(o,e)},debug:Qt}}function Qt(o){if(o===null)return"null";switch(typeof o){case"object":return Array.isArray(o)?"array":"object";case"string":return o.length>100?"string":`"${o.split('"').join('\\"')}"`;default:return String(o)}}function bc(o,e,r,i,a){let f=r.localName;if(r.repeated){if(N(r.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error(`cannot decode field ${a.typeName}.${r.name} from JSON: ${Qt(e)}`);const d=o[f];for(const p of e){if(p===null)throw new Error(`cannot decode field ${a.typeName}.${r.name} from JSON: ${Qt(p)}`);switch(r.kind){case"message":d.push(r.T.fromJson(p,i));break;case"enum":const g=ba(r.T,p,i.ignoreUnknownFields,!0);g!==qs&&d.push(g);break;case"scalar":try{d.push(Oi(r.T,p,r.L,!0))}catch(v){let S=`cannot decode field ${a.typeName}.${r.name} from JSON: ${Qt(p)}`;throw v instanceof Error&&v.message.length>0&&(S+=`: ${v.message}`),new Error(S)}break}}}else if(r.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error(`cannot decode field ${a.typeName}.${r.name} from JSON: ${Qt(e)}`);const d=o[f];for(const[p,g]of Object.entries(e)){if(g===null)throw new Error(`cannot decode field ${a.typeName}.${r.name} from JSON: map value null`);let v;try{v=lm(r.K,p)}catch(S){let D=`cannot decode map key for field ${a.typeName}.${r.name} from JSON: ${Qt(e)}`;throw S instanceof Error&&S.message.length>0&&(D+=`: ${S.message}`),new Error(D)}switch(r.V.kind){case"message":d[v]=r.V.T.fromJson(g,i);break;case"enum":const S=ba(r.V.T,g,i.ignoreUnknownFields,!0);S!==qs&&(d[v]=S);break;case"scalar":try{d[v]=Oi(r.V.T,g,Ke.BIGINT,!0)}catch(D){let P=`cannot decode map value for field ${a.typeName}.${r.name} from JSON: ${Qt(e)}`;throw D instanceof Error&&D.message.length>0&&(P+=`: ${D.message}`),new Error(P)}break}}}else switch(r.oneof&&(o=o[r.oneof.localName]={case:f},f="value"),r.kind){case"message":const d=r.T;if(e===null&&d.typeName!="google.protobuf.Value")return;let p=o[f];fr(p)?p.fromJson(e,i):(o[f]=p=d.fromJson(e,i),d.fieldWrapper&&!r.oneof&&(o[f]=d.fieldWrapper.unwrapField(p)));break;case"enum":const g=ba(r.T,e,i.ignoreUnknownFields,!1);switch(g){case Ws:Oc(r,o);break;case qs:break;default:o[f]=g;break}break;case"scalar":try{const v=Oi(r.T,e,r.L,!1);switch(v){case Ws:Oc(r,o);break;default:o[f]=v;break}}catch(v){let S=`cannot decode field ${a.typeName}.${r.name} from JSON: ${Qt(e)}`;throw v instanceof Error&&v.message.length>0&&(S+=`: ${v.message}`),new Error(S)}break}}function lm(o,e){if(o===C.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Oi(o,e,Ke.BIGINT,!0).toString()}function Oi(o,e,r,i){if(e===null)return i?$r(o,r):Ws;switch(o){case C.DOUBLE:case C.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const a=Number(e);if(Number.isNaN(a)||!Number.isFinite(a))break;return o==C.FLOAT&&w(a),a;case C.INT32:case C.FIXED32:case C.SFIXED32:case C.SINT32:case C.UINT32:let f;if(typeof e=="number"?f=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(f=Number(e)),f===void 0)break;return o==C.UINT32||o==C.FIXED32?k(f):ce(f),f;case C.INT64:case C.SFIXED64:case C.SINT64:if(typeof e!="number"&&typeof e!="string")break;const d=de.parse(e);return r?d.toString():d;case C.FIXED64:case C.UINT64:if(typeof e!="number"&&typeof e!="string")break;const p=de.uParse(e);return r?p.toString():p;case C.BOOL:if(typeof e!="boolean")break;return e;case C.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case C.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return _a.dec(e)}throw new Error}function ba(o,e,r,i){if(e===null)return o.typeName=="google.protobuf.NullValue"?0:i?o.values[0].no:Ws;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const a=o.findName(e);if(a!==void 0)return a.no;if(r)return qs;break}throw new Error(`cannot decode enum ${o.typeName} from JSON: ${Qt(e)}`)}function um(o){return o.repeated||o.kind=="map"?!0:!(o.oneof||o.kind=="message"||o.opt||o.req)}function Lc(o,e,r){if(o.kind=="map"){N(typeof e=="object"&&e!=null);const i={},a=Object.entries(e);switch(o.V.kind){case"scalar":for(const[d,p]of a)i[d.toString()]=Hs(o.V.T,p);break;case"message":for(const[d,p]of a)i[d.toString()]=p.toJson(r);break;case"enum":const f=o.V.T;for(const[d,p]of a)i[d.toString()]=La(f,p,r.enumAsInteger);break}return r.emitDefaultValues||a.length>0?i:void 0}if(o.repeated){N(Array.isArray(e));const i=[];switch(o.kind){case"scalar":for(let a=0;a<e.length;a++)i.push(Hs(o.T,e[a]));break;case"enum":for(let a=0;a<e.length;a++)i.push(La(o.T,e[a],r.enumAsInteger));break;case"message":for(let a=0;a<e.length;a++)i.push(e[a].toJson(r));break}return r.emitDefaultValues||i.length>0?i:void 0}switch(o.kind){case"scalar":return Hs(o.T,e);case"enum":return La(o.T,e,r.enumAsInteger);case"message":return Dc(o.T,e).toJson(r)}}function La(o,e,r){var i;if(N(typeof e=="number"),o.typeName=="google.protobuf.NullValue")return null;if(r)return e;const a=o.findNumber(e);return(i=a==null?void 0:a.name)!==null&&i!==void 0?i:e}function Hs(o,e){switch(o){case C.INT32:case C.SFIXED32:case C.SINT32:case C.FIXED32:case C.UINT32:return N(typeof e=="number"),e;case C.FLOAT:case C.DOUBLE:return N(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case C.STRING:return N(typeof e=="string"),e;case C.BOOL:return N(typeof e=="boolean"),e;case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:return N(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case C.BYTES:return N(e instanceof Uint8Array),_a.enc(e)}}const Fr=Symbol("@bufbuild/protobuf/unknown-fields"),Mc={readUnknownFields:!0,readerFactory:o=>new Zg(o)},Bc={writeUnknownFields:!0,writerFactory:()=>new Xg};function cm(o){return o?Object.assign(Object.assign({},Mc),o):Mc}function fm(o){return o?Object.assign(Object.assign({},Bc),o):Bc}function dm(){return{makeReadOptions:cm,makeWriteOptions:fm,listUnknownFields(o){var e;return(e=o[Fr])!==null&&e!==void 0?e:[]},discardUnknownFields(o){delete o[Fr]},writeUnknownFields(o,e){const i=o[Fr];if(i)for(const a of i)e.tag(a.no,a.wireType).raw(a.data)},onUnknownField(o,e,r,i){const a=o;Array.isArray(a[Fr])||(a[Fr]=[]),a[Fr].push({no:e,wireType:r,data:i})},readMessage(o,e,r,i,a){const f=o.getType(),d=a?e.len:e.pos+r;let p,g;for(;e.pos<d&&([p,g]=e.tag(),!(a===!0&&g==Pe.EndGroup));){const v=f.fields.find(p);if(!v){const S=e.skip(g,p);i.readUnknownFields&&this.onUnknownField(o,p,g,S);continue}$c(o,e,v,g,i)}if(a&&(g!=Pe.EndGroup||p!==r))throw new Error("invalid end group tag")},readField:$c,writeMessage(o,e,r){const i=o.getType();for(const a of i.fields.byNumber()){if(!Pc(a,o)){if(a.req)throw new Error(`cannot encode field ${i.typeName}.${a.name} to binary: required field not set`);continue}const f=a.oneof?o[a.oneof.localName].value:o[a.localName];Fc(a,f,e,r)}return r.writeUnknownFields&&this.writeUnknownFields(o,e),e},writeField(o,e,r,i){e!==void 0&&Fc(o,e,r,i)}}}function $c(o,e,r,i,a){let{repeated:f,localName:d}=r;switch(r.oneof&&(o=o[r.oneof.localName],o.case!=d&&delete o.value,o.case=d,d="value"),r.kind){case"scalar":case"enum":const p=r.kind=="enum"?C.INT32:r.T;let g=Ys;if(r.kind=="scalar"&&r.L>0&&(g=pm),f){let P=o[d];if(i==Pe.LengthDelimited&&p!=C.STRING&&p!=C.BYTES){let $=e.uint32()+e.pos;for(;e.pos<$;)P.push(g(e,p))}else P.push(g(e,p))}else o[d]=g(e,p);break;case"message":const v=r.T;f?o[d].push(Gs(e,new v,a,r)):fr(o[d])?Gs(e,o[d],a,r):(o[d]=Gs(e,new v,a,r),v.fieldWrapper&&!r.oneof&&!r.repeated&&(o[d]=v.fieldWrapper.unwrapField(o[d])));break;case"map":let[S,D]=hm(r,e,a);o[d][S]=D;break}}function Gs(o,e,r,i){const a=e.getType().runtime.bin,f=i==null?void 0:i.delimited;return a.readMessage(e,o,f?i.no:o.uint32(),r,f),e}function hm(o,e,r){const i=e.uint32(),a=e.pos+i;let f,d;for(;e.pos<a;){const[p]=e.tag();switch(p){case 1:f=Ys(e,o.K);break;case 2:switch(o.V.kind){case"scalar":d=Ys(e,o.V.T);break;case"enum":d=e.int32();break;case"message":d=Gs(e,new o.V.T,r,void 0);break}break}}if(f===void 0&&(f=$r(o.K,Ke.BIGINT)),typeof f!="string"&&typeof f!="number"&&(f=f.toString()),d===void 0)switch(o.V.kind){case"scalar":d=$r(o.V.T,Ke.BIGINT);break;case"enum":d=o.V.T.values[0].no;break;case"message":d=new o.V.T;break}return[f,d]}function pm(o,e){const r=Ys(o,e);return typeof r=="bigint"?r.toString():r}function Ys(o,e){switch(e){case C.STRING:return o.string();case C.BOOL:return o.bool();case C.DOUBLE:return o.double();case C.FLOAT:return o.float();case C.INT32:return o.int32();case C.INT64:return o.int64();case C.UINT64:return o.uint64();case C.FIXED64:return o.fixed64();case C.BYTES:return o.bytes();case C.FIXED32:return o.fixed32();case C.SFIXED32:return o.sfixed32();case C.SFIXED64:return o.sfixed64();case C.SINT64:return o.sint64();case C.UINT32:return o.uint32();case C.SINT32:return o.sint32()}}function Fc(o,e,r,i){N(e!==void 0);const a=o.repeated;switch(o.kind){case"scalar":case"enum":let f=o.kind=="enum"?C.INT32:o.T;if(a)if(N(Array.isArray(e)),o.packed)mm(r,f,o.no,e);else for(const d of e)Di(r,f,o.no,d);else Di(r,f,o.no,e);break;case"message":if(a){N(Array.isArray(e));for(const d of e)Uc(r,i,o,d)}else Uc(r,i,o,e);break;case"map":N(typeof e=="object"&&e!=null);for(const[d,p]of Object.entries(e))gm(r,i,o,d,p);break}}function gm(o,e,r,i,a){o.tag(r.no,Pe.LengthDelimited),o.fork();let f=i;switch(r.K){case C.INT32:case C.FIXED32:case C.UINT32:case C.SFIXED32:case C.SINT32:f=Number.parseInt(i);break;case C.BOOL:N(i=="true"||i=="false"),f=i=="true";break}switch(Di(o,r.K,1,f),r.V.kind){case"scalar":Di(o,r.V.T,2,a);break;case"enum":Di(o,C.INT32,2,a);break;case"message":N(a!==void 0),o.tag(2,Pe.LengthDelimited).bytes(a.toBinary(e));break}o.join()}function Uc(o,e,r,i){const a=Dc(r.T,i);r.delimited?o.tag(r.no,Pe.StartGroup).raw(a.toBinary(e)).tag(r.no,Pe.EndGroup):o.tag(r.no,Pe.LengthDelimited).bytes(a.toBinary(e))}function Di(o,e,r,i){N(i!==void 0);let[a,f]=zc(e);o.tag(r,a)[f](i)}function mm(o,e,r,i){if(!i.length)return;o.tag(r,Pe.LengthDelimited).fork();let[,a]=zc(e);for(let f=0;f<i.length;f++)o[a](i[f]);o.join()}function zc(o){let e=Pe.Varint;switch(o){case C.BYTES:case C.STRING:e=Pe.LengthDelimited;break;case C.DOUBLE:case C.FIXED64:case C.SFIXED64:e=Pe.Bit64;break;case C.FIXED32:case C.SFIXED32:case C.FLOAT:e=Pe.Bit32;break}const r=C[o].toLowerCase();return[e,r]}function ym(){return{setEnumType:z,initPartial(o,e){if(o===void 0)return;const r=e.getType();for(const i of r.fields.byMember()){const a=i.localName,f=e,d=o;if(d[a]!=null)switch(i.kind){case"oneof":const p=d[a].case;if(p===void 0)continue;const g=i.findField(p);let v=d[a].value;g&&g.kind=="message"&&!fr(v,g.T)?v=new g.T(v):g&&g.kind==="scalar"&&g.T===C.BYTES&&(v=Ri(v)),f[a]={case:p,value:v};break;case"scalar":case"enum":let S=d[a];i.T===C.BYTES&&(S=i.repeated?S.map(Ri):Ri(S)),f[a]=S;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===C.BYTES)for(const[I,$]of Object.entries(d[a]))f[a][I]=Ri($);else Object.assign(f[a],d[a]);break;case"message":const P=i.V.T;for(const I of Object.keys(d[a])){let $=d[a][I];P.fieldWrapper||($=new P($)),f[a][I]=$}break}break;case"message":const D=i.T;if(i.repeated)f[a]=d[a].map(P=>fr(P,D)?P:new D(P));else{const P=d[a];D.fieldWrapper?D.typeName==="google.protobuf.BytesValue"?f[a]=Ri(P):f[a]=P:f[a]=fr(P,D)?P:new D(P)}break}}},equals(o,e,r){return e===r?!0:!e||!r?!1:o.fields.byMember().every(i=>{const a=e[i.localName],f=r[i.localName];if(i.repeated){if(a.length!==f.length)return!1;switch(i.kind){case"message":return a.every((d,p)=>i.T.equals(d,f[p]));case"scalar":return a.every((d,p)=>pt(i.T,d,f[p]));case"enum":return a.every((d,p)=>pt(C.INT32,d,f[p]))}throw new Error(`repeated cannot contain ${i.kind}`)}switch(i.kind){case"message":return i.T.equals(a,f);case"enum":return pt(C.INT32,a,f);case"scalar":return pt(i.T,a,f);case"oneof":if(a.case!==f.case)return!1;const d=i.findField(a.case);if(d===void 0)return!0;switch(d.kind){case"message":return d.T.equals(a.value,f.value);case"enum":return pt(C.INT32,a.value,f.value);case"scalar":return pt(d.T,a.value,f.value)}throw new Error(`oneof cannot contain ${d.kind}`);case"map":const p=Object.keys(a).concat(Object.keys(f));switch(i.V.kind){case"message":const g=i.V.T;return p.every(S=>g.equals(a[S],f[S]));case"enum":return p.every(S=>pt(C.INT32,a[S],f[S]));case"scalar":const v=i.V.T;return p.every(S=>pt(v,a[S],f[S]))}break}})},clone(o){const e=o.getType(),r=new e,i=r;for(const a of e.fields.byMember()){const f=o[a.localName];let d;if(a.repeated)d=f.map(Qs);else if(a.kind=="map"){d=i[a.localName];for(const[p,g]of Object.entries(f))d[p]=Qs(g)}else a.kind=="oneof"?d=a.findField(f.case)?{case:f.case,value:Qs(f.value)}:{case:void 0}:d=Qs(f);i[a.localName]=d}for(const a of e.runtime.bin.listUnknownFields(o))e.runtime.bin.onUnknownField(i,a.no,a.wireType,a.data);return r}}}function Qs(o){if(o===void 0)return o;if(fr(o))return o.clone();if(o instanceof Uint8Array){const e=new Uint8Array(o.byteLength);return e.set(o),e}return o}function Ri(o){return o instanceof Uint8Array?o:new Uint8Array(o)}function vm(o,e,r){return{syntax:o,json:am(),bin:dm(),util:Object.assign(Object.assign({},ym()),{newFieldList:e,initFields:r}),makeMessageType(i,a,f){return ne(this,i,a,f)},makeEnum:J,makeEnumType:V,getEnumType:_,makeExtension(i,a,f){return em(this,i,a,f)}}}class wm{constructor(e,r){this._fields=e,this._normalizer=r}findJsonName(e){if(!this.jsonNames){const r={};for(const i of this.list())r[i.jsonName]=r[i.name]=i;this.jsonNames=r}return this.jsonNames[e]}find(e){if(!this.numbers){const r={};for(const i of this.list())r[i.no]=i;this.numbers=r}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,r)=>e.no-r.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let r;for(const i of this.list())i.oneof?i.oneof!==r&&(r=i.oneof,e.push(r)):e.push(i)}return this.members}}function jc(o,e){const r=Vc(o);return e?r:Im(Em(r))}function Sm(o){return jc(o,!1)}const Tm=Vc;function Vc(o){let e=!1;const r=[];for(let i=0;i<o.length;i++){let a=o.charAt(i);switch(a){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r.push(a),e=!1;break;default:e&&(e=!1,a=a.toUpperCase()),r.push(a);break}}return r.join("")}const km=new Set(["constructor","toString","toJSON","valueOf"]),Am=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Jc=o=>`${o}$`,Em=o=>Am.has(o)?Jc(o):o,Im=o=>km.has(o)?Jc(o):o;class Cm{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Sm(e)}addField(e){N(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let r=0;r<this.fields.length;r++)this._lookup[this.fields[r].localName]=this.fields[r]}return this._lookup[e]}}function Nm(o,e){var r,i,a,f,d,p;const g=[];let v;for(const S of typeof o=="function"?o():o){const D=S;if(D.localName=jc(S.name,S.oneof!==void 0),D.jsonName=(r=S.jsonName)!==null&&r!==void 0?r:Tm(S.name),D.repeated=(i=S.repeated)!==null&&i!==void 0?i:!1,S.kind=="scalar"&&(D.L=(a=S.L)!==null&&a!==void 0?a:Ke.BIGINT),D.delimited=(f=S.delimited)!==null&&f!==void 0?f:!1,D.req=(d=S.req)!==null&&d!==void 0?d:!1,D.opt=(p=S.opt)!==null&&p!==void 0?p:!1,S.packed===void 0&&(e?D.packed=S.kind=="enum"||S.kind=="scalar"&&S.T!=C.BYTES&&S.T!=C.STRING:D.packed=!1),S.oneof!==void 0){const P=typeof S.oneof=="string"?S.oneof:S.oneof.name;(!v||v.name!=P)&&(v=new Cm(P)),D.oneof=v,v.addField(D)}g.push(D)}return g}const E=vm("proto3",o=>new wm(o,e=>Nm(e,!0)),o=>{for(const e of o.getType().fields.byMember()){if(e.opt)continue;const r=e.localName,i=o;if(e.repeated){i[r]=[];continue}switch(e.kind){case"oneof":i[r]={case:void 0};break;case"enum":i[r]=0;break;case"map":i[r]={};break;case"scalar":i[r]=$r(e.T,e.L);break}}});var Ze;(function(o){o[o.Unary=0]="Unary",o[o.ServerStreaming=1]="ServerStreaming",o[o.ClientStreaming=2]="ClientStreaming",o[o.BiDiStreaming=3]="BiDiStreaming"})(Ze||(Ze={}));var Kc;(function(o){o[o.NoSideEffects=1]="NoSideEffects",o[o.Idempotent=2]="Idempotent"})(Kc||(Kc={}));class We extends te{constructor(e){super(),this.seconds=de.zero,this.nanos=0,E.util.initPartial(e,this)}fromJson(e,r){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${E.json.debug(e)}`);const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=de.parse(a/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const r=Number(this.seconds)*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?i="."+a.substring(0,3)+"Z":a.substring(6)==="000"?i="."+a.substring(0,6)+"Z":i="."+a+"Z"}return new Date(r).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return We.fromDate(new Date)}static fromDate(e){const r=e.getTime();return new We({seconds:de.parse(Math.floor(r/1e3)),nanos:r%1e3*1e6})}static fromBinary(e,r){return new We().fromBinary(e,r)}static fromJson(e,r){return new We().fromJson(e,r)}static fromJsonString(e,r){return new We().fromJsonString(e,r)}static equals(e,r){return E.util.equals(We,e,r)}}We.runtime=E,We.typeName="google.protobuf.Timestamp",We.fields=E.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class vn extends te{constructor(e){super(),this.seconds=de.zero,this.nanos=0,E.util.initPartial(e,this)}fromJson(e,r){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Duration from JSON: ${E.json.debug(e)}`);const i=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(i===null)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${E.json.debug(e)}`);const a=Number(i[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${E.json.debug(e)}`);if(this.seconds=de.parse(a),typeof i[2]=="string"){const f=i[2]+"0".repeat(9-i[2].length);this.nanos=parseInt(f),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let r=this.seconds.toString();if(this.nanos!==0){let i=Math.abs(this.nanos).toString();i="0".repeat(9-i.length)+i,i.substring(3)==="000000"?i=i.substring(0,3):i.substring(6)==="000"&&(i=i.substring(0,6)),r+="."+i,this.nanos<0&&Number(this.seconds)==0&&(r="-"+r)}return r+"s"}static fromBinary(e,r){return new vn().fromBinary(e,r)}static fromJson(e,r){return new vn().fromJson(e,r)}static fromJsonString(e,r){return new vn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(vn,e,r)}}vn.runtime=E,vn.typeName="google.protobuf.Duration",vn.fields=E.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Xt extends te{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),E.util.initPartial(e,this)}toJson(e){var r;if(this.typeUrl==="")return{};const i=this.typeUrlToName(this.typeUrl),a=(r=e==null?void 0:e.typeRegistry)===null||r===void 0?void 0:r.findMessage(i);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let d=a.fromBinary(this.value).toJson(e);return(i.startsWith("google.protobuf.")||d===null||Array.isArray(d)||typeof d!="object")&&(d={value:d}),d["@type"]=this.typeUrl,d}fromJson(e,r){var i;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const a=e["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const f=this.typeUrlToName(a),d=(i=r==null?void 0:r.typeRegistry)===null||i===void 0?void 0:i.findMessage(f);if(!d)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let p;if(f.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))p=d.fromJson(e.value,r);else{const g=Object.assign({},e);delete g["@type"],p=d.fromJson(g,r)}return this.packFrom(p),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const r=e.findMessage(this.typeUrlToName(this.typeUrl));if(!!r)return r.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const r=this.typeUrlToName(this.typeUrl);let i="";return typeof e=="string"?i=e:i=e.typeName,r===i}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const r=e.lastIndexOf("/"),i=r>=0?e.substring(r+1):e;if(!i.length)throw new Error(`invalid type url: ${e}`);return i}static pack(e){const r=new Xt;return r.packFrom(e),r}static fromBinary(e,r){return new Xt().fromBinary(e,r)}static fromJson(e,r){return new Xt().fromJson(e,r)}static fromJsonString(e,r){return new Xt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Xt,e,r)}}Xt.runtime=E,Xt.typeName="google.protobuf.Any",Xt.fields=E.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Zt extends te{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.DOUBLE,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.DOUBLE,e)}catch(i){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new Zt().fromBinary(e,r)}static fromJson(e,r){return new Zt().fromJson(e,r)}static fromJsonString(e,r){return new Zt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Zt,e,r)}}Zt.runtime=E,Zt.typeName="google.protobuf.DoubleValue",Zt.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Zt.fieldWrapper={wrapField(o){return new Zt({value:o})},unwrapField(o){return o.value}};class en extends te{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.FLOAT,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.FLOAT,e)}catch(i){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new en().fromBinary(e,r)}static fromJson(e,r){return new en().fromJson(e,r)}static fromJsonString(e,r){return new en().fromJsonString(e,r)}static equals(e,r){return E.util.equals(en,e,r)}}en.runtime=E,en.typeName="google.protobuf.FloatValue",en.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),en.fieldWrapper={wrapField(o){return new en({value:o})},unwrapField(o){return o.value}};class tn extends te{constructor(e){super(),this.value=de.zero,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.INT64,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.INT64,e)}catch(i){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new tn().fromBinary(e,r)}static fromJson(e,r){return new tn().fromJson(e,r)}static fromJsonString(e,r){return new tn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(tn,e,r)}}tn.runtime=E,tn.typeName="google.protobuf.Int64Value",tn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),tn.fieldWrapper={wrapField(o){return new tn({value:o})},unwrapField(o){return o.value}};class nn extends te{constructor(e){super(),this.value=de.zero,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.UINT64,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.UINT64,e)}catch(i){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new nn().fromBinary(e,r)}static fromJson(e,r){return new nn().fromJson(e,r)}static fromJsonString(e,r){return new nn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(nn,e,r)}}nn.runtime=E,nn.typeName="google.protobuf.UInt64Value",nn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),nn.fieldWrapper={wrapField(o){return new nn({value:o})},unwrapField(o){return o.value}};class rn extends te{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.INT32,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.INT32,e)}catch(i){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new rn().fromBinary(e,r)}static fromJson(e,r){return new rn().fromJson(e,r)}static fromJsonString(e,r){return new rn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(rn,e,r)}}rn.runtime=E,rn.typeName="google.protobuf.Int32Value",rn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),rn.fieldWrapper={wrapField(o){return new rn({value:o})},unwrapField(o){return o.value}};class sn extends te{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.UINT32,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.UINT32,e)}catch(i){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new sn().fromBinary(e,r)}static fromJson(e,r){return new sn().fromJson(e,r)}static fromJsonString(e,r){return new sn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(sn,e,r)}}sn.runtime=E,sn.typeName="google.protobuf.UInt32Value",sn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),sn.fieldWrapper={wrapField(o){return new sn({value:o})},unwrapField(o){return o.value}};class on extends te{constructor(e){super(),this.value=!1,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.BOOL,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.BOOL,e)}catch(i){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new on().fromBinary(e,r)}static fromJson(e,r){return new on().fromJson(e,r)}static fromJsonString(e,r){return new on().fromJsonString(e,r)}static equals(e,r){return E.util.equals(on,e,r)}}on.runtime=E,on.typeName="google.protobuf.BoolValue",on.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),on.fieldWrapper={wrapField(o){return new on({value:o})},unwrapField(o){return o.value}};class gt extends te{constructor(e){super(),this.value="",E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.STRING,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.STRING,e)}catch(i){let a='cannot decode message google.protobuf.StringValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new gt().fromBinary(e,r)}static fromJson(e,r){return new gt().fromJson(e,r)}static fromJsonString(e,r){return new gt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(gt,e,r)}}gt.runtime=E,gt.typeName="google.protobuf.StringValue",gt.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),gt.fieldWrapper={wrapField(o){return new gt({value:o})},unwrapField(o){return o.value}};class an extends te{constructor(e){super(),this.value=new Uint8Array(0),E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.BYTES,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.BYTES,e)}catch(i){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw i instanceof Error&&i.message.length>0&&(a+=`: ${i.message}`),new Error(a)}return this}static fromBinary(e,r){return new an().fromBinary(e,r)}static fromJson(e,r){return new an().fromJson(e,r)}static fromJsonString(e,r){return new an().fromJsonString(e,r)}static equals(e,r){return E.util.equals(an,e,r)}}an.runtime=E,an.typeName="google.protobuf.BytesValue",an.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),an.fieldWrapper={wrapField(o){return new an({value:o})},unwrapField(o){return o.value}};function xm(o,e,r){try{const i=_a.dec(o);return e?e.fromBinary(i,r):i}catch(i){throw y.from(i,h.DataLoss)}}function Pm(o,e){const r={};for(const[i,a]of Object.entries(o.methods)){const f=e(Object.assign(Object.assign({},a),{localName:i,service:o}));f!=null&&(r[i]=f)}return r}function Wc(o){let e,r=new Uint8Array(0);function i(a){const f=new Uint8Array(r.length+a.length);f.set(r),f.set(a,r.length),r=f}return new ReadableStream({start(){e=o.getReader()},async pull(a){let f;for(;;){if(f===void 0&&r.byteLength>=5){let g=0;for(let v=1;v<5;v++)g=(g<<8)+r[v];f={flags:r[0],length:g}}if(f!==void 0&&r.byteLength>=f.length+5)break;const p=await e.read();if(p.done)break;i(p.value)}if(f===void 0){if(r.byteLength==0){a.close();return}a.error(new y("premature end of stream",h.DataLoss));return}const d=r.subarray(5,5+f.length);r=r.subarray(5+f.length),a.enqueue({flags:f.flags,data:d})}})}function qc(o,e){const r=new Uint8Array(e.length+5);r.set(e,5);const i=new DataView(r.buffer,r.byteOffset,r.byteLength);return i.setUint8(0,o),i.setUint32(1,e.length),r}var Om=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],r;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(f){r[f]=o[f]&&function(d){return new Promise(function(p,g){d=o[f](d),a(p,g,d.done,d.value)})}}function a(f,d,p,g){Promise.resolve(g).then(function(v){f({value:v,done:p})},d)}},_i=globalThis&&globalThis.__await||function(o){return this instanceof _i?(this.v=o,this):new _i(o)},Dm=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(o,e||[]),a,f=[];return a={},p("next"),p("throw"),p("return",d),a[Symbol.asyncIterator]=function(){return this},a;function d(I){return function($){return Promise.resolve($).then(I,D)}}function p(I,$){i[I]&&(a[I]=function(Y){return new Promise(function(G,re){f.push([I,Y,G,re])>1||g(I,Y)})},$&&(a[I]=$(a[I])))}function g(I,$){try{v(i[I]($))}catch(Y){P(f[0][3],Y)}}function v(I){I.value instanceof _i?Promise.resolve(I.value.v).then(S,D):P(f[0][2],I)}function S(I){g("next",I)}function D(I){g("throw",I)}function P(I,$){I($),f.shift(),f.length&&g(f[0][0],f[0][1])}},Rm=globalThis&&globalThis.__asyncDelegator||function(o){var e,r;return e={},i("next"),i("throw",function(a){throw a}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(a,f){e[a]=o[a]?function(d){return(r=!r)?{value:_i(o[a](d)),done:!1}:f?f(d):d}:f}};function _m(o){return Dm(this,arguments,function*(){yield _i(yield*Rm(Om(o)))})}var Hc=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],r;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(f){r[f]=o[f]&&function(d){return new Promise(function(p,g){d=o[f](d),a(p,g,d.done,d.value)})}}function a(f,d,p,g){Promise.resolve(g).then(function(v){f({value:v,done:p})},d)}},Ur=globalThis&&globalThis.__await||function(o){return this instanceof Ur?(this.v=o,this):new Ur(o)},bm=globalThis&&globalThis.__asyncDelegator||function(o){var e,r;return e={},i("next"),i("throw",function(a){throw a}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(a,f){e[a]=o[a]?function(d){return(r=!r)?{value:Ur(o[a](d)),done:!1}:f?f(d):d}:f}},Lm=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(o,e||[]),a,f=[];return a={},p("next"),p("throw"),p("return",d),a[Symbol.asyncIterator]=function(){return this},a;function d(I){return function($){return Promise.resolve($).then(I,D)}}function p(I,$){i[I]&&(a[I]=function(Y){return new Promise(function(G,re){f.push([I,Y,G,re])>1||g(I,Y)})},$&&(a[I]=$(a[I])))}function g(I,$){try{v(i[I]($))}catch(Y){P(f[0][3],Y)}}function v(I){I.value instanceof Ur?Promise.resolve(I.value.v).then(S,D):P(f[0][2],I)}function S(I){g("next",I)}function D(I){g("throw",I)}function P(I,$){I($),f.shift(),f.length&&g(f[0][0],f[0][1])}};function Mm(o,e){return Pm(o,r=>{switch(r.kind){case Ze.Unary:return Bm(e,o,r);case Ze.ServerStreaming:return $m(e,o,r);case Ze.ClientStreaming:return Fm(e,o,r);case Ze.BiDiStreaming:return Um(e,o,r);default:return null}})}function Bm(o,e,r){return async function(i,a){var f,d;const p=await o.unary(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);return(f=a==null?void 0:a.onHeader)===null||f===void 0||f.call(a,p.header),(d=a==null?void 0:a.onTrailer)===null||d===void 0||d.call(a,p.trailer),p.message}}function $m(o,e,r){return function(i,a){return Gc(o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,_m([i]),a==null?void 0:a.contextValues),a)}}function Fm(o,e,r){return async function(i,a){var f,d,p,g,v,S;const D=await o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues);(v=a==null?void 0:a.onHeader)===null||v===void 0||v.call(a,D.header);let P;try{for(var I=!0,$=Hc(D.message),Y;Y=await $.next(),f=Y.done,!f;I=!0)g=Y.value,I=!1,P=g}catch(G){d={error:G}}finally{try{!I&&!f&&(p=$.return)&&await p.call($)}finally{if(d)throw d.error}}if(!P)throw new y("protocol error: missing response message",h.Internal);return(S=a==null?void 0:a.onTrailer)===null||S===void 0||S.call(a,D.trailer),P}}function Um(o,e,r){return function(i,a){return Gc(o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,i,a==null?void 0:a.contextValues),a)}}function Gc(o,e){const r=function(){var i,a;return Lm(this,arguments,function*(){const f=yield Ur(o);(i=e==null?void 0:e.onHeader)===null||i===void 0||i.call(e,f.header),yield Ur(yield*bm(Hc(f.message))),(a=e==null?void 0:e.onTrailer)===null||a===void 0||a.call(e,f.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>r.next()})}}function zm(...o){const e=new AbortController,r=o.filter(a=>a!==void 0).concat(e.signal);for(const a of r){if(a.aborted){i.apply(a);break}a.addEventListener("abort",i)}function i(){e.signal.aborted||e.abort(Yc(this));for(const a of r)a.removeEventListener("abort",i)}return e}function jm(o){const e=new AbortController,r=()=>{e.abort(new y("the operation timed out",h.DeadlineExceeded))};let i;return o!==void 0&&(o<=0?r():i=setTimeout(r,o)),{signal:e.signal,cleanup:()=>clearTimeout(i)}}function Yc(o){if(!o.aborted)return;if(o.reason!==void 0)return o.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Qc(){return{get(o){return o.id in this?this[o.id]:o.defaultValue},set(o,e){return this[o.id]=e,this},delete(o){return delete this[o.id],this}}}const Ma=128;function Xc(o){const e=new Headers,r=new TextDecoder().decode(o).split(`\r
`);for(const i of r){if(i==="")continue;const a=i.indexOf(":");if(a>0){const f=i.substring(0,a).trim(),d=i.substring(a+1).trim();e.append(f,d)}}return e}const Vm="Content-Type",Jm="Grpc-Timeout",Zc="Grpc-Status",ef="Grpc-Message",Km="Grpc-Status-Details-Bin",Wm="User-Agent",qm="X-User-Agent",Hm="X-Grpc-Web",Gm="application/grpc-web+proto",Ym="application/grpc-web+json";class wn extends te{constructor(e){super(),this.code=0,this.message="",this.details=[],E.util.initPartial(e,this)}static fromBinary(e,r){return new wn().fromBinary(e,r)}static fromJson(e,r){return new wn().fromJson(e,r)}static fromJsonString(e,r){return new wn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(wn,e,r)}}wn.runtime=E,wn.typeName="google.rpc.Status",wn.fields=E.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Xt,repeated:!0}]);const Qm="0";function tf(o){var e;const r=o.get(Km);if(r!=null){const a=xm(r,wn);if(a.code==0)return;const f=new y(a.message,a.code,o);return f.details=a.details.map(d=>({type:d.typeUrl.substring(d.typeUrl.lastIndexOf("/")+1),value:d.value})),f}const i=o.get(Zc);if(i!=null){if(i===Qm)return;const a=parseInt(i,10);return a in h?new y(decodeURIComponent((e=o.get(ef))!==null&&e!==void 0?e:""),a,o):new y(`invalid grpc-status: ${i}`,h.Internal,o)}}function nf(o,e,r){const i=typeof e=="string"?e:e.typeName,a=typeof r=="string"?r:r.name;return o.toString().replace(/\/?$/,`/${i}/${a}`)}function rf(o,e){return e instanceof o?e:new o(e)}function Xm(o,e){function r(i){return i.done===!0?i:{done:i.done,value:rf(o,i.value)}}return{[Symbol.asyncIterator](){const i=e[Symbol.asyncIterator](),a={next:()=>i.next().then(r)};return i.throw!==void 0&&(a.throw=f=>i.throw(f).then(r)),i.return!==void 0&&(a.return=f=>i.return(f).then(r)),a}}}function sf(o,e){var r;return(r=e==null?void 0:e.concat().reverse().reduce((i,a)=>a(i),o))!==null&&r!==void 0?r:o}function Zm(o){var e;const r=Object.assign({},o);return(e=r.ignoreUnknownFields)!==null&&e!==void 0||(r.ignoreUnknownFields=!0),r}function of(o,e,r,i){const a=e?af(o.I,i):lf(o.I,r);return{parse:(e?af(o.O,i):lf(o.O,r)).parse,serialize:a.serialize}}function af(o,e){return{parse(r){try{return o.fromBinary(r,e)}catch(i){const a=i instanceof Error?i.message:String(i);throw new y(`parse binary: ${a}`,h.InvalidArgument)}},serialize(r){try{return r.toBinary(e)}catch(i){const a=i instanceof Error?i.message:String(i);throw new y(`serialize binary: ${a}`,h.Internal)}}}}function lf(o,e){var r,i;const a=(r=e==null?void 0:e.textEncoder)!==null&&r!==void 0?r:new TextEncoder,f=(i=e==null?void 0:e.textDecoder)!==null&&i!==void 0?i:new TextDecoder,d=Zm(e);return{parse(p){try{const g=f.decode(p);return o.fromJsonString(g,d)}catch(g){throw y.from(g,h.InvalidArgument)}},serialize(p){try{const g=p.toJsonString(d);return a.encode(g)}catch(g){throw y.from(g,h.Internal)}}}}function ey(o){const e=sf(o.next,o.interceptors),[r,i,a]=uf(o),f=Object.assign(Object.assign({},o.req),{message:rf(o.req.method.I,o.req.message),signal:r});return e(f).then(d=>(a(),d),i)}function ty(o){const e=sf(o.next,o.interceptors),[r,i,a]=uf(o),f=Object.assign(Object.assign({},o.req),{message:Xm(o.req.method.I,o.req.message),signal:r});let d=!1;return r.addEventListener("abort",function(){var p,g;const v=o.req.message[Symbol.asyncIterator]();d||(p=v.throw)===null||p===void 0||p.call(v,this.reason).catch(()=>{}),(g=v.return)===null||g===void 0||g.call(v).catch(()=>{})}),e(f).then(p=>Object.assign(Object.assign({},p),{message:{[Symbol.asyncIterator](){const g=p.message[Symbol.asyncIterator]();return{next(){return g.next().then(v=>(v.done==!0&&(d=!0,a()),v),i)}}}}}),i)}function uf(o){const{signal:e,cleanup:r}=jm(o.timeoutMs),i=zm(o.signal,e);return[i.signal,function(f){const d=y.from(e.aborted?Yc(e):f);return i.abort(d),r(),Promise.reject(d)},function(){r(),i.abort()}]}function ny(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function cf(o,e){const r=tf(o);if(r)throw e.forEach((i,a)=>{r.metadata.append(a,i)}),r}function ff(o,e,r,i){const a=new Headers(r!=null?r:{});return a.set(Vm,o?Gm:Ym),a.set(Hm,"1"),a.set(qm,"connect-es/1.4.0"),i&&a.set(Wm,"connect-es/1.4.0"),e!==void 0&&a.set(Jm,`${e}m`),a}function ry(o){switch(o){case 400:return h.Internal;case 401:return h.Unauthenticated;case 403:return h.PermissionDenied;case 404:return h.Unimplemented;case 429:return h.Unavailable;case 502:return h.Unavailable;case 503:return h.Unavailable;case 504:return h.Unavailable;default:return h.Unknown}}function df(o,e){var r;if(o>=200&&o<300){const i=tf(e);if(i)throw i;return{foundStatus:e.has(Zc)}}throw new y(decodeURIComponent((r=e.get(ef))!==null&&r!==void 0?r:`HTTP ${o}`),ry(o),e)}var dr=globalThis&&globalThis.__await||function(o){return this instanceof dr?(this.v=o,this):new dr(o)},iy=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(o,e||[]),a,f=[];return a={},p("next"),p("throw"),p("return",d),a[Symbol.asyncIterator]=function(){return this},a;function d(I){return function($){return Promise.resolve($).then(I,D)}}function p(I,$){i[I]&&(a[I]=function(Y){return new Promise(function(G,re){f.push([I,Y,G,re])>1||g(I,Y)})},$&&(a[I]=$(a[I])))}function g(I,$){try{v(i[I]($))}catch(Y){P(f[0][3],Y)}}function v(I){I.value instanceof dr?Promise.resolve(I.value.v).then(S,D):P(f[0][2],I)}function S(I){g("next",I)}function D(I){g("throw",I)}function P(I,$){I($),f.shift(),f.length&&g(f[0][0],f[0][1])}};function sy(o){var e;ny();const r=(e=o.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(i,a,f,d,p,g,v){var S;const{serialize:D,parse:P}=of(a,r,o.jsonOptions,o.binaryOptions);return d=d===void 0?o.defaultTimeoutMs:d<=0?void 0:d,await ey({interceptors:o.interceptors,signal:f,timeoutMs:d,req:{stream:!1,service:i,method:a,url:nf(o.baseUrl,i,a),init:{method:"POST",credentials:(S=o.credentials)!==null&&S!==void 0?S:"same-origin",redirect:"error",mode:"cors"},header:ff(r,d,p,!1),contextValues:v!=null?v:Qc(),message:g},next:async I=>{var $;const G=await(($=o.fetch)!==null&&$!==void 0?$:globalThis.fetch)(I.url,Object.assign(Object.assign({},I.init),{headers:I.header,signal:I.signal,body:qc(0,D(I.message))}));if(df(G.status,G.headers),!G.body)throw"missing response body";const re=Wc(G.body).getReader();let Te,oe;for(;;){const pe=await re.read();if(pe.done)break;const{flags:ge,data:ke}=pe.value;if(ge===Ma){if(Te!==void 0)throw"extra trailer";Te=Xc(ke);continue}if(oe!==void 0)throw"extra message";oe=P(ke)}if(Te===void 0)throw"missing trailer";if(cf(Te,G.headers),oe===void 0)throw"missing message";return{stream:!1,service:i,method:a,header:G.headers,message:oe,trailer:Te}}})},async stream(i,a,f,d,p,g,v){var S;const{serialize:D,parse:P}=of(a,r,o.jsonOptions,o.binaryOptions);function I(Y,G,re,Te){return iy(this,arguments,function*(){const pe=Wc(Y).getReader();if(G){if(!(yield dr(pe.read())).done)throw"extra data for trailers-only";return yield dr(void 0)}let ge=!1;for(;;){const ke=yield dr(pe.read());if(ke.done)break;const{flags:Sr,data:Tr}=ke.value;if((Sr&Ma)===Ma){if(ge)throw"extra trailer";ge=!0;const ts=Xc(Tr);cf(ts,Te),ts.forEach((Kv,Wv)=>re.set(Wv,Kv));continue}if(ge)throw"extra message";yield yield dr(P(Tr))}if(!ge)throw"missing trailer"})}async function $(Y){if(a.kind!=Ze.ServerStreaming)throw"The fetch API does not support streaming request bodies";const G=await Y[Symbol.asyncIterator]().next();if(G.done==!0)throw"missing request message";return qc(0,D(G.value))}return d=d===void 0?o.defaultTimeoutMs:d<=0?void 0:d,ty({interceptors:o.interceptors,signal:f,timeoutMs:d,req:{stream:!0,service:i,method:a,url:nf(o.baseUrl,i,a),init:{method:"POST",credentials:(S=o.credentials)!==null&&S!==void 0?S:"same-origin",redirect:"error",mode:"cors"},header:ff(r,d,p,!1),contextValues:v!=null?v:Qc(),message:g},next:async Y=>{var G;const Te=await((G=o.fetch)!==null&&G!==void 0?G:globalThis.fetch)(Y.url,Object.assign(Object.assign({},Y.init),{headers:Y.header,signal:Y.signal,body:await $(Y.message)})),{foundStatus:oe}=df(Te.status,Te.headers);if(!Te.body)throw"missing response body";const pe=new Headers;return Object.assign(Object.assign({},Y),{header:Te.headers,trailer:pe,message:I(Te.body,oe,pe,Te.headers)})}})}}}const ee=E.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),Xs=E.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),oy=E.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:It},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:ja}}]),Sn=E.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:Rf},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:hf,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:W},{no:6,name:"is_removed",kind:"scalar",T:8}]),hf=E.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:Zs},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Ba,repeated:!0},{no:4,name:"presence_change",kind:"message",T:za}]),Zs=E.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),Ba=E.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:pf,oneof:"body"},{no:2,name:"add",kind:"message",T:gf,oneof:"body"},{no:3,name:"move",kind:"message",T:mf,oneof:"body"},{no:4,name:"remove",kind:"message",T:yf,oneof:"body"},{no:5,name:"edit",kind:"message",T:vf,oneof:"body"},{no:6,name:"select",kind:"message",T:ay,oneof:"body"},{no:7,name:"style",kind:"message",T:wf,oneof:"body"},{no:8,name:"increase",kind:"message",T:Sf,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:Tf,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:kf,oneof:"body"}]),pf=E.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:Tn},{no:4,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Set"}),gf=E.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"prev_created_at",kind:"message",T:W},{no:3,name:"value",kind:"message",T:Tn},{no:4,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Add"}),mf=E.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"prev_created_at",kind:"message",T:W},{no:3,name:"created_at",kind:"message",T:W},{no:4,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Move"}),yf=E.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Remove"}),vf=E.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:hr},{no:3,name:"to",kind:"message",T:hr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:W}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:W},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),ay=E.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:hr},{no:3,name:"to",kind:"message",T:hr},{no:4,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Select"}),wf=E.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:hr},{no:3,name:"to",kind:"message",T:hr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:W},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:W}}],{localName:"Operation_Style"}),Sf=E.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"value",kind:"message",T:Tn},{no:3,name:"executed_at",kind:"message",T:W}],{localName:"Operation_Increase"}),Tf=E.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:bi},{no:3,name:"to",kind:"message",T:bi},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:W}},{no:5,name:"contents",kind:"message",T:Df,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:W}],{localName:"Operation_TreeEdit"}),kf=E.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:W},{no:2,name:"from",kind:"message",T:bi},{no:3,name:"to",kind:"message",T:bi},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:W},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:W}}],{localName:"Operation_TreeStyle"}),Tn=E.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:W},{no:2,name:"moved_at",kind:"message",T:W},{no:3,name:"removed_at",kind:"message",T:W},{no:4,name:"type",kind:"enum",T:E.getEnumType(ee)},{no:5,name:"value",kind:"scalar",T:12}]),It=E.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:Af,oneof:"body"},{no:2,name:"json_array",kind:"message",T:Ef,oneof:"body"},{no:3,name:"primitive",kind:"message",T:If,oneof:"body"},{no:5,name:"text",kind:"message",T:Cf,oneof:"body"},{no:6,name:"counter",kind:"message",T:Nf,oneof:"body"},{no:7,name:"tree",kind:"message",T:xf,oneof:"body"}]),Af=E.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:Pf,repeated:!0},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"moved_at",kind:"message",T:W},{no:4,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_JSONObject"}),Ef=E.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:$a,repeated:!0},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"moved_at",kind:"message",T:W},{no:4,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_JSONArray"}),If=E.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(ee)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:W},{no:4,name:"moved_at",kind:"message",T:W},{no:5,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_Primitive"}),Cf=E.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:Of,repeated:!0},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"moved_at",kind:"message",T:W},{no:4,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_Text"}),Nf=E.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(ee)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:W},{no:4,name:"moved_at",kind:"message",T:W},{no:5,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_Counter"}),xf=E.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:Ua,repeated:!0},{no:2,name:"created_at",kind:"message",T:W},{no:3,name:"moved_at",kind:"message",T:W},{no:4,name:"removed_at",kind:"message",T:W}],{localName:"JSONElement_Tree"}),Pf=E.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:It}]),$a=E.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:$a},{no:2,name:"element",kind:"message",T:It}]),eo=E.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:W},{no:3,name:"is_removed",kind:"scalar",T:8}]),Of=E.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:Fa},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:W},{no:4,name:"ins_prev_id",kind:"message",T:Fa},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:eo}}]),Fa=E.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:W},{no:2,name:"offset",kind:"scalar",T:5}]),Ua=E.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:zr},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:W},{no:5,name:"ins_prev_id",kind:"message",T:zr},{no:6,name:"ins_next_id",kind:"message",T:zr},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:eo}}]),Df=E.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:Ua,repeated:!0}]),zr=E.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:W},{no:2,name:"offset",kind:"scalar",T:5}]),bi=E.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:zr},{no:2,name:"left_sibling_id",kind:"message",T:zr}]);E.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:We}]),E.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:We},{no:9,name:"updated_at",kind:"message",T:We}]),E.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:gt},{no:2,name:"auth_webhook_url",kind:"message",T:gt},{no:3,name:"auth_webhook_methods",kind:"message",T:ly},{no:4,name:"client_deactivate_threshold",kind:"message",T:gt}]);const ly=E.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"});E.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:We},{no:5,name:"accessed_at",kind:"message",T:We},{no:6,name:"updated_at",kind:"message",T:We}]);const za=E.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(Li)},{no:2,name:"presence",kind:"message",T:ja}]),Li=E.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),ja=E.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),Rf=E.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),hr=E.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:W},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),W=E.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),uy=E.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),cy=E.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(Xs)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:uy}]),fy=E.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),dy=E.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),hy=E.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),py=E.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),gy=E.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Sn}]),my=E.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:Sn}]),yy=E.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Sn},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),vy=E.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:Sn}]),wy=E.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),Sy=E.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:Ty,oneof:"body"},{no:2,name:"event",kind:"message",T:cy,oneof:"body"}]),Ty=E.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),ky=E.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Sn}]),Ay=E.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Sn}]),Ey=E.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:Sn},{no:4,name:"push_only",kind:"scalar",T:8}]),Iy=E.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:Sn}]),Cy=E.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),Ny=E.makeMessageType("yorkie.v1.BroadcastResponse",[]),xy={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:fy,O:dy,kind:Ze.Unary},deactivateClient:{name:"DeactivateClient",I:hy,O:py,kind:Ze.Unary},attachDocument:{name:"AttachDocument",I:gy,O:my,kind:Ze.Unary},detachDocument:{name:"DetachDocument",I:yy,O:vy,kind:Ze.Unary},removeDocument:{name:"RemoveDocument",I:ky,O:Ay,kind:Ze.Unary},pushPullChanges:{name:"PushPullChanges",I:Ey,O:Iy,kind:Ze.Unary},watchDocument:{name:"WatchDocument",I:wy,O:Sy,kind:Ze.ServerStreaming},broadcast:{name:"Broadcast",I:Cy,O:Ny,kind:Ze.Unary}}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Ct=null;try{Ct=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Q(o,e,r){this.low=o|0,this.high=e|0,this.unsigned=!!r}Q.prototype.__isLong__,Object.defineProperty(Q.prototype,"__isLong__",{value:!0});function qe(o){return(o&&o.__isLong__)===!0}function _f(o){var e=Math.clz32(o&-o);return o?31-e:e}Q.isLong=qe;var bf={},Lf={};function pr(o,e){var r,i,a;return e?(o>>>=0,(a=0<=o&&o<256)&&(i=Lf[o],i)?i:(r=le(o,0,!0),a&&(Lf[o]=r),r)):(o|=0,(a=-128<=o&&o<128)&&(i=bf[o],i)?i:(r=le(o,o<0?-1:0,!1),a&&(bf[o]=r),r))}Q.fromInt=pr;function Nt(o,e){if(isNaN(o))return e?kn:Bt;if(e){if(o<0)return kn;if(o>=Bf)return jf}else{if(o<=-$f)return ot;if(o+1>=$f)return zf}return o<0?Nt(-o,e).neg():le(o%jr|0,o/jr|0,e)}Q.fromNumber=Nt;function le(o,e,r){return new Q(o,e,r)}Q.fromBits=le;var to=Math.pow;function Va(o,e,r){if(o.length===0)throw Error("empty string");if(typeof e=="number"?(r=e,e=!1):e=!!e,o==="NaN"||o==="Infinity"||o==="+Infinity"||o==="-Infinity")return e?kn:Bt;if(r=r||10,r<2||36<r)throw RangeError("radix");var i;if((i=o.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return Va(o.substring(1),e,r).neg();for(var a=Nt(to(r,8)),f=Bt,d=0;d<o.length;d+=8){var p=Math.min(8,o.length-d),g=parseInt(o.substring(d,d+p),r);if(p<8){var v=Nt(to(r,p));f=f.mul(v).add(Nt(g))}else f=f.mul(a),f=f.add(Nt(g))}return f.unsigned=e,f}Q.fromString=Va;function Mt(o,e){return typeof o=="number"?Nt(o,e):typeof o=="string"?Va(o,e):le(o.low,o.high,typeof e=="boolean"?e:o.unsigned)}Q.fromValue=Mt;var Mf=1<<16,Py=1<<24,jr=Mf*Mf,Bf=jr*jr,$f=Bf/2,Ff=pr(Py),Bt=pr(0);Q.ZERO=Bt;var kn=pr(0,!0);Q.UZERO=kn;var Vr=pr(1);Q.ONE=Vr;var Uf=pr(1,!0);Q.UONE=Uf;var Ja=pr(-1);Q.NEG_ONE=Ja;var zf=le(-1,2147483647,!1);Q.MAX_VALUE=zf;var jf=le(-1,-1,!0);Q.MAX_UNSIGNED_VALUE=jf;var ot=le(0,-2147483648,!1);Q.MIN_VALUE=ot;var L=Q.prototype;L.toInt=function(){return this.unsigned?this.low>>>0:this.low},L.toNumber=function(){return this.unsigned?(this.high>>>0)*jr+(this.low>>>0):this.high*jr+(this.low>>>0)},L.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ot)){var r=Nt(e),i=this.div(r),a=i.mul(r).sub(this);return i.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var f=Nt(to(e,6),this.unsigned),d=this,p="";;){var g=d.div(f),v=d.sub(g.mul(f)).toInt()>>>0,S=v.toString(e);if(d=g,d.isZero())return S+p;for(;S.length<6;)S="0"+S;p=""+S+p}},L.getHighBits=function(){return this.high},L.getHighBitsUnsigned=function(){return this.high>>>0},L.getLowBits=function(){return this.low},L.getLowBitsUnsigned=function(){return this.low>>>0},L.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ot)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&(e&1<<r)==0;r--);return this.high!=0?r+33:r+1},L.isZero=function(){return this.high===0&&this.low===0},L.eqz=L.isZero,L.isNegative=function(){return!this.unsigned&&this.high<0},L.isPositive=function(){return this.unsigned||this.high>=0},L.isOdd=function(){return(this.low&1)===1},L.isEven=function(){return(this.low&1)===0},L.equals=function(e){return qe(e)||(e=Mt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},L.eq=L.equals,L.notEquals=function(e){return!this.eq(e)},L.neq=L.notEquals,L.ne=L.notEquals,L.lessThan=function(e){return this.comp(e)<0},L.lt=L.lessThan,L.lessThanOrEqual=function(e){return this.comp(e)<=0},L.lte=L.lessThanOrEqual,L.le=L.lessThanOrEqual,L.greaterThan=function(e){return this.comp(e)>0},L.gt=L.greaterThan,L.greaterThanOrEqual=function(e){return this.comp(e)>=0},L.gte=L.greaterThanOrEqual,L.ge=L.greaterThanOrEqual,L.compare=function(e){if(qe(e)||(e=Mt(e)),this.eq(e))return 0;var r=this.isNegative(),i=e.isNegative();return r&&!i?-1:!r&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},L.comp=L.compare,L.negate=function(){return!this.unsigned&&this.eq(ot)?ot:this.not().add(Vr)},L.neg=L.negate,L.add=function(e){qe(e)||(e=Mt(e));var r=this.high>>>16,i=this.high&65535,a=this.low>>>16,f=this.low&65535,d=e.high>>>16,p=e.high&65535,g=e.low>>>16,v=e.low&65535,S=0,D=0,P=0,I=0;return I+=f+v,P+=I>>>16,I&=65535,P+=a+g,D+=P>>>16,P&=65535,D+=i+p,S+=D>>>16,D&=65535,S+=r+d,S&=65535,le(P<<16|I,S<<16|D,this.unsigned)},L.subtract=function(e){return qe(e)||(e=Mt(e)),this.add(e.neg())},L.sub=L.subtract,L.multiply=function(e){if(this.isZero())return this;if(qe(e)||(e=Mt(e)),Ct){var r=Ct.mul(this.low,this.high,e.low,e.high);return le(r,Ct.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?kn:Bt;if(this.eq(ot))return e.isOdd()?ot:Bt;if(e.eq(ot))return this.isOdd()?ot:Bt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Ff)&&e.lt(Ff))return Nt(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,a=this.high&65535,f=this.low>>>16,d=this.low&65535,p=e.high>>>16,g=e.high&65535,v=e.low>>>16,S=e.low&65535,D=0,P=0,I=0,$=0;return $+=d*S,I+=$>>>16,$&=65535,I+=f*S,P+=I>>>16,I&=65535,I+=d*v,P+=I>>>16,I&=65535,P+=a*S,D+=P>>>16,P&=65535,P+=f*v,D+=P>>>16,P&=65535,P+=d*g,D+=P>>>16,P&=65535,D+=i*S+a*v+f*g+d*p,D&=65535,le(I<<16|$,D<<16|P,this.unsigned)},L.mul=L.multiply,L.divide=function(e){if(qe(e)||(e=Mt(e)),e.isZero())throw Error("division by zero");if(Ct){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?Ct.div_u:Ct.div_s)(this.low,this.high,e.low,e.high);return le(r,Ct.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?kn:Bt;var i,a,f;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return kn;if(e.gt(this.shru(1)))return Uf;f=kn}else{if(this.eq(ot)){if(e.eq(Vr)||e.eq(Ja))return ot;if(e.eq(ot))return Vr;var d=this.shr(1);return i=d.div(e).shl(1),i.eq(Bt)?e.isNegative()?Vr:Ja:(a=this.sub(e.mul(i)),f=i.add(a.div(e)),f)}else if(e.eq(ot))return this.unsigned?kn:Bt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();f=Bt}for(a=this;a.gte(e);){i=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var p=Math.ceil(Math.log(i)/Math.LN2),g=p<=48?1:to(2,p-48),v=Nt(i),S=v.mul(e);S.isNegative()||S.gt(a);)i-=g,v=Nt(i,this.unsigned),S=v.mul(e);v.isZero()&&(v=Vr),f=f.add(v),a=a.sub(S)}return f},L.div=L.divide,L.modulo=function(e){if(qe(e)||(e=Mt(e)),Ct){var r=(this.unsigned?Ct.rem_u:Ct.rem_s)(this.low,this.high,e.low,e.high);return le(r,Ct.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},L.mod=L.modulo,L.rem=L.modulo,L.not=function(){return le(~this.low,~this.high,this.unsigned)},L.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},L.clz=L.countLeadingZeros,L.countTrailingZeros=function(){return this.low?_f(this.low):_f(this.high)+32},L.ctz=L.countTrailingZeros,L.and=function(e){return qe(e)||(e=Mt(e)),le(this.low&e.low,this.high&e.high,this.unsigned)},L.or=function(e){return qe(e)||(e=Mt(e)),le(this.low|e.low,this.high|e.high,this.unsigned)},L.xor=function(e){return qe(e)||(e=Mt(e)),le(this.low^e.low,this.high^e.high,this.unsigned)},L.shiftLeft=function(e){return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):le(0,this.low<<e-32,this.unsigned)},L.shl=L.shiftLeft,L.shiftRight=function(e){return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):le(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},L.shr=L.shiftRight,L.shiftRightUnsigned=function(e){return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?le(this.high,0,this.unsigned):le(this.high>>>e-32,0,this.unsigned)},L.shru=L.shiftRightUnsigned,L.shr_u=L.shiftRightUnsigned,L.rotateLeft=function(e){var r;return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(r=32-e,le(this.low<<e|this.high>>>r,this.high<<e|this.low>>>r,this.unsigned)):(e-=32,r=32-e,le(this.high<<e|this.low>>>r,this.low<<e|this.high>>>r,this.unsigned))},L.rotl=L.rotateLeft,L.rotateRight=function(e){var r;return qe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(r=32-e,le(this.high<<r|this.low>>>e,this.low<<r|this.high>>>e,this.unsigned)):(e-=32,r=32-e,le(this.low<<r|this.high>>>e,this.high<<r|this.low>>>e,this.unsigned))},L.rotr=L.rotateRight,L.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},L.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},L.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},L.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},L.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},Q.fromBytes=function(e,r,i){return i?Q.fromBytesLE(e,r):Q.fromBytesBE(e,r)},Q.fromBytesLE=function(e,r){return new Q(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},Q.fromBytesBE=function(e,r){return new Q(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)};const Oy=E.makeMessageType("google.rpc.ErrorInfo",()=>[{no:1,name:"reason",kind:"scalar",T:9},{no:2,name:"domain",kind:"scalar",T:9},{no:3,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);E.makeMessageType("google.rpc.RetryInfo",()=>[{no:1,name:"retry_delay",kind:"message",T:vn}]),E.makeMessageType("google.rpc.DebugInfo",()=>[{no:1,name:"stack_entries",kind:"scalar",T:9,repeated:!0},{no:2,name:"detail",kind:"scalar",T:9}]),E.makeMessageType("google.rpc.QuotaFailure",()=>[{no:1,name:"violations",kind:"message",T:Dy,repeated:!0}]);const Dy=E.makeMessageType("google.rpc.QuotaFailure.Violation",()=>[{no:1,name:"subject",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"QuotaFailure_Violation"});E.makeMessageType("google.rpc.PreconditionFailure",()=>[{no:1,name:"violations",kind:"message",T:Ry,repeated:!0}]);const Ry=E.makeMessageType("google.rpc.PreconditionFailure.Violation",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"subject",kind:"scalar",T:9},{no:3,name:"description",kind:"scalar",T:9}],{localName:"PreconditionFailure_Violation"});E.makeMessageType("google.rpc.BadRequest",()=>[{no:1,name:"field_violations",kind:"message",T:_y,repeated:!0}]);const _y=E.makeMessageType("google.rpc.BadRequest.FieldViolation",()=>[{no:1,name:"field",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}],{localName:"BadRequest_FieldViolation"});E.makeMessageType("google.rpc.RequestInfo",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"serving_data",kind:"scalar",T:9}]),E.makeMessageType("google.rpc.ResourceInfo",()=>[{no:1,name:"resource_type",kind:"scalar",T:9},{no:2,name:"resource_name",kind:"scalar",T:9},{no:3,name:"owner",kind:"scalar",T:9},{no:4,name:"description",kind:"scalar",T:9}]),E.makeMessageType("google.rpc.Help",()=>[{no:1,name:"links",kind:"message",T:by,repeated:!0}]);const by=E.makeMessageType("google.rpc.Help.Link",()=>[{no:1,name:"description",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9}],{localName:"Help_Link"});E.makeMessageType("google.rpc.LocalizedMessage",()=>[{no:1,name:"locale",kind:"scalar",T:9},{no:2,name:"message",kind:"scalar",T:9}]);var se=(o=>(o.Ok="ok",o.ErrClientNotActivated="ErrClientNotActivated",o.ErrClientNotFound="ErrClientNotFound",o.ErrUnimplemented="ErrUnimplemented",o.Unsupported="unsupported",o.ErrDocumentNotAttached="ErrDocumentNotAttached",o.ErrDocumentNotDetached="ErrDocumentNotDetached",o.ErrDocumentRemoved="ErrDocumentRemoved",o.ErrInvalidObjectKey="ErrInvalidObjectKey",o.ErrInvalidArgument="ErrInvalidArgument",o))(se||{});class ue extends Error{constructor(e,r){super(r),u(this,"name","YorkieError"),u(this,"stack"),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function $t(o){if(o instanceof Map){const e=Array.from(o);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(o))}const Vf=o=>o?Object.entries(o).length===0:!0,Jr=o=>{const e={};for(const[r,i]of Object.entries(o))e[r]=JSON.stringify(i);return e},Kr=o=>{const e={};for(const[r,i]of Object.entries(o))e[r]=JSON.parse(i);return e};var $n=(o=>(o.Put="put",o.Clear="clear",o))($n||{});class Ka{constructor(e,r){u(this,"context"),u(this,"presence"),this.context=e,this.presence=r}set(e,r){for(const i of Object.keys(e))this.presence[i]=e[i];this.context.setPresenceChange({type:"put",presence:$t(this.presence)}),this.context.setReversePresence(e,r)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const no="000000000000000000000000",Ly="FFFFFFFFFFFFFFFFFFFFFFFF";class et{constructor(e,r,i){u(this,"lamport"),u(this,"delimiter"),u(this,"actorID"),this.lamport=e,this.delimiter=r,this.actorID=i}static of(e,r,i){return new et(e,r,i)}static fromStruct(e){return et.of(Q.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new et(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const r=this.actorID.localeCompare(e.actorID);return r!==0?r:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Wa=0,My=4294967295,By=Q.MAX_VALUE,Ft=new et(Q.fromNumber(0),Wa,no);new et(Q.fromNumber(1),Wa+1,no);const Mi=new et(By,My,Ly);var He=(o=>(o[o.Trivial=0]="Trivial",o[o.Debug=1]="Debug",o[o.Info=2]="Info",o[o.Warn=3]="Warn",o[o.Error=4]="Error",o[o.Fatal=5]="Fatal",o))(He||{});let gr=2;function qa(o){gr=o}const R={trivial:(...o)=>{gr>0||typeof console<"u"&&console.log("YORKIE T:",...o)},debug:(...o)=>{gr>1||typeof console<"u"&&console.log("YORKIE D:",...o)},info:(...o)=>{gr>2||typeof console<"u"&&console.log("YORKIE I:",...o)},warn:(...o)=>{gr>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...o):console.log("YORKIE W:",...o))},error:(...o)=>{gr>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...o):console.log("YORKIE E:",...o))},fatal:(o,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${o}`)},isEnabled:o=>gr<=o};function ln(o){return o.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Bi{constructor(e){u(this,"createdAt"),u(this,"movedAt"),u(this,"removedAt"),this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Fn extends Bi{constructor(e){super(e)}}class Ha{constructor(e,r){u(this,"strKey"),u(this,"value"),this.strKey=e,this.value=r}static of(e,r){return new Ha(e,r)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class $i{constructor(){u(this,"nodeMapByKey"),u(this,"nodeMapByCreatedAt"),this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new $i}set(e,r,i){let a;const f=this.nodeMapByKey.get(e);f!=null&&!f.isRemoved()&&f.remove(i)&&(a=f.getValue());const d=Ha.of(e,r);return this.nodeMapByCreatedAt.set(r.getCreatedAt().toIDString(),d),(f==null||i.after(f.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,d),r.setMovedAt(i)),a}delete(e,r){this.nodeMapByCreatedAt.has(e.toIDString())||R.fatal(`fail to find ${e.toIDString()}`);const i=this.nodeMapByCreatedAt.get(e.toIDString());return i.remove(r),i.getValue()}subPathOf(e){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(!!r)return r.getStrKey()}purge(e){const r=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!r){R.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const i=this.nodeMapByKey.get(r.getStrKey());r===i&&this.nodeMapByKey.delete(i.getStrKey()),this.nodeMapByCreatedAt.delete(r.getValue().getCreatedAt().toIDString())}deleteByKey(e,r){const i=this.nodeMapByKey.get(e);if(i!=null&&!!i.remove(r))return i.getValue()}has(e){const r=this.nodeMapByKey.get(e);return r==null?!1:!r.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const r=this.nodeMapByKey.get(e);if(!(!r||r.isRemoved()))return r}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class at extends Fn{constructor(e,r){super(e),u(this,"memberNodes"),this.memberNodes=r}static create(e,r){if(!r)return new at(e,$i.create());const i=$i.create();for(const[a,f]of Object.entries(r))i.set(a,f.deepcopy(),f.getCreatedAt());return new at(e,i)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,r,i){return this.memberNodes.set(e,r,i)}delete(e,r){return this.memberNodes.delete(e,r)}deleteByKey(e,r){return this.memberNodes.deleteByKey(e,r)}get(e){const r=this.memberNodes.get(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.memberNodes.getByID(e);return r==null?void 0:r.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[r,i]of this)e.push(`"${ln(r)}":${i.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[r,i]of this){const{createdAt:a,value:f,type:d}=i.toJSForTest();e[r]={key:r,createdAt:a,value:f,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[r]of this)e.push(r);return e}toSortedJSON(){var e;const r=Array();for(const[a]of this)r.push(a);const i=[];for(const a of r.sort()){const f=(e=this.memberNodes.get(a))==null?void 0:e.getValue();i.push(`"${ln(a)}":${f.toSortedJSON()}`)}return`{${i.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=at.create(this.getCreatedAt());for(const r of this.memberNodes)e.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const r of this.memberNodes){const i=r.getValue();if(e(i,this))return;i instanceof Fn&&i.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const r of this.memberNodes)e.has(r.getStrKey())||(e.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var he=(o=>(o.Local="local",o.Remote="remote",o.UndoRedo="undoredo",o))(he||{});class Ut{constructor(e,r){u(this,"parentCreatedAt"),u(this,"executedAt"),this.parentCreatedAt=e,this.executedAt=r}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Jf{constructor(e){u(this,"value"),u(this,"left"),u(this,"right"),u(this,"parent"),u(this,"weight"),this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Fi{constructor(e){u(this,"root"),this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let r=this.root;for(;;)if(r.hasLeft()&&e<=r.getLeftWeight())r=r.getLeft();else if(r.hasRight()&&r.getLeftWeight()+r.getLength()<e)e-=r.getLeftWeight()+r.getLength(),r=r.getRight();else{e-=r.getLeftWeight();break}return e>r.getLength()&&R.fatal(`out of index range: pos: ${e} > node.length: ${r.getLength()}`),[r,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let r=0,i=e,a;for(;i;)(!a||a===i.getRight())&&(r+=i.getLength()+(i.hasLeft()?i.getLeftWeight():0)),a=i,i=i.getParent();return r-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,r){return e?(this.splayNode(e),this.root=r,r.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(r),r.setLeft(e),e.setParent(r),e.setRight(),this.updateWeight(e),this.updateWeight(r),r):(this.root=r,r)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const r=new Fi(e.getLeft());r.root&&r.root.setParent();const i=new Fi(e.getRight());if(i.root&&i.root.setParent(),r.root){const a=r.getRightmost();r.splayNode(a),r.root.setRight(i.root),i.root&&i.root.setParent(r.root),this.root=r.root}else this.root=i.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,r){if(!r){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(r),r.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const r=[];this.traversePostorder(e.getRight(),r);for(const i of r)i.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(r=>`[${r.getWeight()},${r.getLength()}]${r.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const r of e)if(r.getWeight()!=r.getLength()+r.getLeftWeight()+r.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,r){!e||(this.traverseInorder(e.getLeft(),r),r.push(e),this.traverseInorder(e.getRight(),r))}traversePostorder(e,r){!e||(this.traversePostorder(e.getLeft(),r),this.traversePostorder(e.getRight(),r),r.push(e))}rotateLeft(e){const r=e.getParent();r.hasParent()?r===r.getParent().getLeft()?r.getParent().setLeft(e):r.getParent().setRight(e):this.root=e,e.setParent(r.getParent()),r.setRight(e.getLeft()),r.hasRight()&&r.getRight().setParent(r),e.setLeft(r),e.getLeft().setParent(e),this.updateWeight(r),this.updateWeight(e)}rotateRight(e){const r=e.getParent();r.hasParent()?r===r.getParent().getLeft()?r.getParent().setLeft(e):r.getParent().setRight(e):this.root=e,e.setParent(r.getParent()),r.setLeft(e.getRight()),r.hasLeft()&&r.getLeft().setParent(r),e.setRight(r),e.getRight().setParent(e),this.updateWeight(r),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Me=(o=>(o[o.Null=0]="Null",o[o.Boolean=1]="Boolean",o[o.Integer=2]="Integer",o[o.Long=3]="Long",o[o.Double=4]="Double",o[o.String=5]="String",o[o.Bytes=6]="Bytes",o[o.Date=7]="Date",o))(Me||{});class Se extends Bi{constructor(e,r){super(r),u(this,"valueType"),u(this,"value"),this.valueType=Se.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,r){return new Se(e,r)}static valueFromBytes(e,r){switch(e){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const i=new DataView(r.buffer);return r.forEach(function(a,f){i.setUint8(f,a)}),i.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return Q.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(Q.fromBytesLE(Array.from(r),!0).toNumber());default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${ln(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=Se.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof Q)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return Se.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const e=this.value,r=Q.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}}class ro extends Jf{constructor(e){super(e),u(this,"prev"),u(this,"next"),this.value=e}static createAfter(e,r){const i=new ro(r),a=e.next;return e.next=i,i.prev=e,i.next=a,a&&(a.prev=i),i}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Ui{constructor(){u(this,"dummyHead"),u(this,"last"),u(this,"nodeMapByIndex"),u(this,"nodeMapByCreatedAt");const e=Se.of(0,Ft);e.setRemovedAt(Ft),this.dummyHead=new ro(e),this.last=this.dummyHead,this.nodeMapByIndex=new Fi,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Ui}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,r){let i=this.nodeMapByCreatedAt.get(e.toIDString());for(i||R.fatal(`cant find the given node: ${e.toIDString()}`);i.getNext()&&i.getNext().getPositionedAt().after(r);)i=i.getNext();return i}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,r,i=r.getCreatedAt()){const a=this.findNextBeforeExecutedAt(e,i),f=ro.createAfter(a,r);a===this.last&&(this.last=f),this.nodeMapByIndex.insertAfter(a,f),this.nodeMapByCreatedAt.set(f.getCreatedAt().toIDString(),f)}moveAfter(e,r,i){const a=this.nodeMapByCreatedAt.get(e.toIDString());a||R.fatal(`cant find the given node: ${e.toIDString()}`);const f=this.nodeMapByCreatedAt.get(r.toIDString());f||R.fatal(`cant find the given node: ${r.toIDString()}`),a!==f&&(!f.getValue().getMovedAt()||i.after(f.getValue().getMovedAt()))&&(this.release(f),this.insertAfter(a.getCreatedAt(),f.getValue(),i),f.getValue().setMovedAt(i))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(!!r)return String(this.nodeMapByIndex.indexOf(r))}purge(e){const r=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());r||R.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(r)}getByIndex(e){if(e>=this.length)return;const[r,i]=this.nodeMapByIndex.find(e);let a=r;if(e===0&&r===this.dummyHead||i>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(e){let r=this.nodeMapByCreatedAt.get(e.toIDString());do r=r.getPrev();while(this.dummyHead!==r&&r.isRemoved());return r.getValue().getCreatedAt()}delete(e,r){const i=this.nodeMapByCreatedAt.get(e.toIDString()),a=i.isRemoved();return i.remove(r)&&!a&&this.nodeMapByIndex.splayNode(i),i.getValue()}deleteByIndex(e,r){const i=this.getByIndex(e);if(!!i)return i.remove(r)&&this.nodeMapByIndex.splayNode(i),i.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const r of this){const i=`${r.getCreatedAt().toIDString()}:${r.getValue().toJSON()}`;r.isRemoved()?e.push(`{${i}}`):e.push(`[${i}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class mt extends Fn{constructor(e,r){super(e),u(this,"elements"),this.elements=r}static create(e,r){if(!r)return new mt(e,Ui.create());const i=Ui.create();for(const a of r)i.insertAfter(i.getLastCreatedAt(),a.deepcopy());return new mt(e,i)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,r){this.elements.insertAfter(e,r)}moveAfter(e,r,i){this.elements.moveAfter(e,r,i)}get(e){const r=this.elements.getByIndex(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.elements.getByID(e);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,r){return this.elements.delete(e,r)}deleteByIndex(e,r){return this.elements.deleteByIndex(e,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const r of this.elements){const i=r.getValue();if(e(i,this))return;i instanceof Fn&&i.getDescendants(e)}}toJSON(){const e=[];for(const r of this)e.push(r.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let r=0;r<this.length;r++){const{createdAt:i,value:a,type:f}=this.get(r).toJSForTest();e[r]={key:String(r),createdAt:i,value:a,type:f}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=mt.create(this.getCreatedAt());for(const r of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),r.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class Un extends Ut{constructor(e,r,i){super(e,i),u(this,"createdAt"),this.createdAt=r}static create(e,r,i){return new Un(e,r,i)}execute(e,r){var i;const a=e.findByCreatedAt(this.getParentCreatedAt());if(a||R.fatal(`fail to find ${this.getParentCreatedAt()}`),a instanceof Fn||R.fatal(`only object and array can execute remove: ${a}`),r===he.UndoRedo){let v=a.getByID(this.createdAt);for(;v;){if(v.getRemovedAt())return;v=(i=e.findElementPairByCreatedAt(v.getCreatedAt()))==null?void 0:i.parent}}const f=a.subPathOf(this.createdAt),d=this.toReverseOperation(a),p=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(p),{opInfos:a instanceof mt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(f)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:f}],reverseOp:d}}toReverseOperation(e){if(e instanceof at){const r=e.subPathOf(this.createdAt);if(r!==void 0){const i=e.get(r);if(i!==void 0)return mr.create(r,i.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class mr extends Ut{constructor(e,r,i,a){super(i,a),u(this,"key"),u(this,"value"),this.key=e,this.value=r}static create(e,r,i,a){return new mr(e,r,i,a)}execute(e,r){var i;const a=e.findByCreatedAt(this.getParentCreatedAt());if(a||R.fatal(`fail to find ${this.getParentCreatedAt()}`),a instanceof at||R.fatal("fail to execute, only object can execute set"),r===he.UndoRedo){let v=a;for(;v;){if(v.getRemovedAt())return;v=(i=e.findElementPairByCreatedAt(v.getCreatedAt()))==null?void 0:i.parent}}const f=a.get(this.key),d=this.toReverseOperation(f),p=this.value.deepcopy(),g=a.set(this.key,p,this.getExecutedAt());return r===he.UndoRedo&&e.findByCreatedAt(p.getCreatedAt())&&e.deregisterElement(p),e.registerElement(p,a),g&&e.registerRemovedElement(g),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:d}}toReverseOperation(e){let r=Un.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(r=mr.create(this.key,e.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class zi extends Ut{constructor(e,r,i,a){super(e,a),u(this,"prevCreatedAt"),u(this,"value"),this.prevCreatedAt=r,this.value=i}static create(e,r,i,a){return new zi(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof mt||R.fatal("fail to execute, only array can execute add");const i=r,a=this.value.deepcopy();return i.insertAfter(this.prevCreatedAt,a),e.registerElement(a,i),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(i.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class zn extends Ut{constructor(e,r,i,a){super(e,a),u(this,"prevCreatedAt"),u(this,"createdAt"),this.prevCreatedAt=r,this.createdAt=i}static create(e,r,i,a){return new zn(e,r,i,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof mt||R.fatal("fail to execute, only array can execute move");const i=r,a=Number(i.subPathOf(this.createdAt));i.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const f=Number(i.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:f,previousIndex:a}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class yr{constructor(e,r,i,a){u(this,"key"),u(this,"value"),u(this,"updatedAt"),u(this,"_isRemoved"),this.key=e,this.value=r,this.updatedAt=i,this._isRemoved=a}static of(e,r,i,a){return new yr(e,r,i,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class An{constructor(){u(this,"nodeMapByKey"),u(this,"numberOfRemovedElement"),this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new An}getNodeMapByKey(){return this.nodeMapByKey}set(e,r,i){const a=this.nodeMapByKey.get(e);if(a&&a.isRemoved()&&i.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||i.after(a.getUpdatedAt())){const f=yr.of(e,r,i,!1);return this.nodeMapByKey.set(e,f),a!==void 0&&a.isRemoved()?[a,f]:[void 0,f]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(e,r,i,a){const f=yr.of(e,r,i,a);this.nodeMapByKey.set(e,f),a&&this.numberOfRemovedElement++}remove(e,r){const i=this.nodeMapByKey.get(e),a=[];if(i===void 0||r.after(i.getUpdatedAt())){if(i===void 0){this.numberOfRemovedElement+=1;const p=yr.of(e,"",r,!0);return this.nodeMapByKey.set(e,p),a.push(p),a}const f=i.isRemoved();f||(this.numberOfRemovedElement+=1),f&&a.push(i);const d=yr.of(e,i.getValue(),r,!0);return this.nodeMapByKey.set(e,d),a.push(d),a}return a}has(e){if(this.nodeMapByKey.has(e)){const r=this.nodeMapByKey.get(e);return r!==void 0&&!r.isRemoved()}return!1}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new An;for(const[,r]of this.nodeMapByKey)e.setInternal(r.getKey(),r.getValue(),r.getUpdatedAt(),r.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[r,i]of this.nodeMapByKey)i.isRemoved()||e.push(`"${ln(r)}":"${ln(i.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[r,i]of this.nodeMapByKey)i.isRemoved()||(e[r]=i.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const r=this.nodeMapByKey.get(e.getKey());r==null||r.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class ji{constructor(e){u(this,"attributes"),u(this,"content"),this.attributes=An.create(),this.content=e}static create(e){return new ji(e)}get length(){return this.content.length}substring(e,r){const i=new ji(this.content.substring(e,r));return i.attributes=this.attributes.deepcopy(),i}setAttr(e,r,i){return this.attributes.set(e,r,i)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=ln(this.content),r=this.attributes.toObject(),i=[];for(const[a,f]of Object.entries(r)){const d=JSON.parse(f),p=typeof d=="string"?`"${ln(a)}":"${ln(d)}"`:`"${ln(a)}":${String(d)}`;i.push(p)}return i.sort(),i.length===0?`{"val":"${e}"}`:`{"attrs":{${i.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof yr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const r of this.attributes)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}class xt extends Bi{constructor(e,r){super(r),u(this,"rgaTreeSplit"),this.rgaTreeSplit=e}static create(e,r){return new xt(e,r)}edit(e,r,i,a,f){const d=r?ji.create(r):void 0;if(d&&a)for(const[P,I]of Object.entries(a))d.setAttr(P,I,i);const[p,g,v,S]=this.rgaTreeSplit.edit(e,i,d,f),D=S.map(P=>({...P,value:P.value?{attributes:Kr(P.value.getAttributes()),content:P.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[g,D,v,[p,p]]}setStyle(e,r,i,a){const[,f]=this.rgaTreeSplit.findNodeWithSplit(e[1],i),[,d]=this.rgaTreeSplit.findNodeWithSplit(e[0],i),p=[],g=this.rgaTreeSplit.findBetween(d,f),v=new Map,S=[];for(const P of g){const I=P.getCreatedAt().getActorID(),$=a!=null&&a.size?a.has(I)?a.get(I):Ft:Mi;if(P.canStyle(i,$)){const Y=v.get(I),G=P.getCreatedAt();(!Y||G.after(Y))&&v.set(I,G),S.push(P)}}const D=[];for(const P of S){if(P.isRemoved())continue;const[I,$]=this.rgaTreeSplit.findIndexesFromRange(P.createPosRange());p.push({type:"style",actor:i.getActorID(),from:I,to:$,value:{attributes:Kr(r)}});for(const[Y,G]of Object.entries(r)){const[re]=P.getValue().setAttr(Y,G,i);re!==void 0&&D.push({parent:P.getValue(),child:re})}}return[v,D,p]}indexRangeToPosRange(e,r){const i=this.rgaTreeSplit.indexToPos(e);return e===r?[i,i]:[i,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}getTreeByIndex(){return this.rgaTreeSplit.getTreeByIndex()}getTreeByID(){return this.rgaTreeSplit.getTreeByID()}toJSON(){const e=[];for(const r of this.rgaTreeSplit)r.isRemoved()||e.push(r.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const i=r.getValue();e.push({attributes:Kr(i.getAttributes()),content:i.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new xt(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:r});for(const i of r.getValue().getGCPairs())e.push(i)}return e}}class Vi extends Ut{constructor(e,r,i,a,f,d,p){super(e,p),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"content"),u(this,"attributes"),this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=a,this.content=f,this.attributes=d}static create(e,r,i,a,f,d,p){return new Vi(e,r,i,a,f,d,p)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof xt||R.fatal("fail to execute, only Text can execute edit");const i=r,[,a,f]=i.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const d of f)e.registerGCPair(d);return{opInfos:a.map(({from:d,to:p,value:g})=>({type:"edit",from:d,to:p,value:g,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),a=this.content;return`${e}.EDIT(${r},${i},${a})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Ji extends Ut{constructor(e,r,i,a,f,d){super(e,d),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"attributes"),this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=a,this.attributes=f}static create(e,r,i,a,f,d){return new Ji(e,r,i,a,f,d)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof xt||R.fatal("fail to execute, only Text can execute edit");const i=r,[,a,f]=i.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const d of a)e.registerGCPair(d);return{opInfos:f.map(({from:d,to:p,value:g})=>({type:"style",from:d,to:p,value:g,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),i=this.toPos.toTestString(),a=this.attributes;return`${e}.STYL(${r},${i},${JSON.stringify(a)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const $y=2,Fy="root",En="text";function Ki(o,e){let r=0;const i=o.children;for(let a=0;a<e;a++){const f=i[a];!f||f.isRemoved||(r+=f.paddedSize)}return r}class Uy{constructor(e,r=[]){if(u(this,"type"),u(this,"parent"),u(this,"_children"),u(this,"size"),this.type=e,this.size=0,this._children=r,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const r=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*r,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const r of this._children){const i=r.updateDescendantsSize();r.isRemoved||(e+=i)}return this.size+=e,this.paddedSize}get isText(){return this.type===En}get paddedSize(){return this.size+(this.isText?0:$y)}isAncestorOf(e){return zy(this,e)}get nextSibling(){const e=this.parent.findOffset(this),r=this.parent.children[e+1];if(r)return r}get prevSibling(){const e=this.parent.findOffset(this),r=this.parent.children[e-1];if(r)return r}splitText(e,r){if(e===0||e===this.size)return;const i=this.value.slice(0,e),a=this.value.slice(e);if(!a.length)return;this.value=i;const f=this.cloneText(e+r);return f.value=a,this.parent.insertAfterInternal(f,this),f}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const r of e)r.parent=this,r.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const r of e)r.parent=this}insertBefore(e,r){if(this.isText)throw new Error("Text node cannot have children");const i=this._children.indexOf(r);if(i===-1)throw new Error("child not found");this.insertAtInternal(e,i),e.updateAncestorsSize()}insertAfter(e,r){if(this.isText)throw new Error("Text node cannot have children");const i=this._children.indexOf(r);if(i===-1)throw new Error("child not found");this.insertAtInternal(e,i+1),e.updateAncestorsSize()}insertAt(e,r){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,r),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new Error("child not found");this._children.splice(r,1),e.parent=void 0}splitElement(e,r){const i=this.cloneElement(r);this.parent.insertAfterInternal(i,this),i.updateAncestorsSize();const a=this.children.slice(0,e),f=this.children.slice(e);this._children=a,i._children=f,this.size=this._children.reduce((d,p)=>d+p.paddedSize,0),i.size=i._children.reduce((d,p)=>d+p.paddedSize,0);for(const d of i._children)d.parent=i;return i}insertAfterInternal(e,r){if(this.isText)throw new Error("Text node cannot have children");const i=this._children.indexOf(r);if(i===-1)throw new Error("child not found");this.insertAtInternal(e,i+1)}insertAtInternal(e,r){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(r,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const r=this._children.indexOf(e);return this.allChildren.splice(0,r).filter(a=>!a.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let r=e;for(;r;){const i=this._children.indexOf(r);if(i!==-1)return i;r=r.parent}return-1}}function zy(o,e){if(o===e)return!1;for(;e.parent;){if(e.parent===o)return!0;e=e.parent}return!1}var Re=(o=>(o.Start="Start",o.End="End",o.Text="Text",o))(Re||{});function Kf(o,e,r,i){if(e>r)throw new Error(`from is greater than to: ${e} > ${r}`);if(e>o.size)throw new Error(`from is out of range: ${e} > ${o.size}`);if(r>o.size)throw new Error(`to is out of range: ${r} > ${o.size}`);if(e===r)return;let a=0;for(const f of o.children){if(e-f.paddedSize<a&&a<r){const d=f.isText?e-a:e-a-1,p=f.isText?r-a:r-a-1,g=!f.isText&&d<0,v=!f.isText&&p>f.size;(f.isText||g)&&i([f,f.isText?"Text":"Start"],v),Kf(f,Math.max(0,d),Math.min(p,f.size),i),v&&i([f,"End"],v)}a+=f.paddedSize}}function Wf(o,e,r=0){for(const i of o.children)Wf(i,e,r+1);e(o,r)}function io(o,e,r=0){for(const i of o._children)io(i,e,r+1);e(o,r)}function Ga(o,e,r=!0){if(e>o.size)throw new Error(`index is out of range: ${e} > ${o.size}`);if(o.isText)return{node:o,offset:e};let i=0,a=0;for(const f of o.children){if(r&&f.isText&&f.size>=e-a)return Ga(f,e-a,r);if(e===a)return{node:o,offset:i};if(!r&&f.paddedSize===e-a)return{node:o,offset:i+1};if(f.paddedSize>e-a)return Ga(f,e-a-1,r);a+=f.paddedSize,i+=1}return{node:o,offset:i}}function qf(o){return o.isText||o.children.length===0?o:qf(o.children[0])}function jy(o,e){if(o.size<e)throw new Error("unacceptable path");for(let r=0;r<o.children.length;r++){const i=o.children[r];if(i.size<e)e-=i.size;else{o=i;break}}return{node:o,offset:e}}class Vy{constructor(e){u(this,"root"),this.root=e}tokensBetween(e,r,i){Kf(this.root,e,r,i)}traverse(e){Wf(this.root,e,0)}traverseAll(e){io(this.root,e,0)}findTreePos(e,r=!0){return Ga(this.root,e,r)}treePosToPath(e){const r=[];let i=e.node;if(i.isText){const a=i.parent.findOffset(i);if(a===-1)throw new Error("invalid treePos");const f=Ki(i.parent,a);r.push(f+e.offset),i=i.parent}else if(i.hasTextChild()){const a=Ki(i,e.offset);r.push(a)}else r.push(e.offset);for(;i.parent;){const a=i.parent.findOffset(i);if(a===-1)throw new Error("invalid treePos");r.push(a),i=i.parent}return r.reverse()}pathToIndex(e){const r=this.pathToTreePos(e);return this.indexOf(r)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let r=this.root;for(let i=0;i<e.length-1;i++){const a=e[i];if(r=r.children[a],!r)throw new Error("unacceptable path")}if(r.hasTextChild())return jy(r,e[e.length-1]);if(r.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:r,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:r,offset:i}=e;if(r.isText){if(r.size===i){const a=r.nextSibling;return a||r.parent}return r}return r.children.length===i?r:qf(r.children[i])}indexOf(e){let{node:r}=e;const{offset:i}=e;let a=0,f=1;if(r.isText){a+=i;const d=r.parent,p=d.findOffset(r);if(p===-1)throw new Error("invalid pos");a+=Ki(d,p),r=r.parent}else a+=Ki(r,i);for(;r!=null&&r.parent;){const d=r.parent,p=d.findOffset(r);if(p===-1)throw new Error("invalid pos");a+=Ki(d,p),f++,r=r.parent}return a+f-1}indexToPath(e){const r=this.findTreePos(e);return this.treePosToPath(r)}}const Jy=(o,e)=>o===e?0:o<e?-1:1;class Ky{constructor(e,r,i){u(this,"key"),u(this,"value"),u(this,"parent"),u(this,"left"),u(this,"right"),u(this,"isRed"),this.key=e,this.value=r,this.isRed=i}}class Wy{constructor(e){u(this,"stack"),this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Hf{constructor(e){u(this,"root"),u(this,"comparator"),u(this,"counter"),this.comparator=typeof e<"u"?e:Jy,this.counter=0}put(e,r){return this.root=this.putInternal(e,r,this.root),this.root.isRed=!1,r}get(e){const r=this.getInternal(e,this.root);return r?r.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new Wy(this.root)}values(){const e=[];for(const r of this.getIterator().stack)e.push(r.value);return e}floorEntry(e){let r=this.root;for(;r;){const i=this.comparator(e,r.key);if(i>0)if(r.right)r.right.parent=r,r=r.right;else return r;else if(i<0)if(r.left)r.left.parent=r,r=r.left;else{let a=r.parent,f=r;for(;a&&f===a.left;)f=a,a=a.parent;return a}else return r}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,r){for(;r;){const i=this.comparator(e,r.key);if(i===0)return r;i<0?r=r.left:i>0&&(r=r.right)}}putInternal(e,r,i){if(!i)return this.counter+=1,new Ky(e,r,!0);const a=this.comparator(e,i.key);return a<0?i.left=this.putInternal(e,r,i.left):a>0?i.right=this.putInternal(e,r,i.right):i.value=r,this.isRed(i.right)&&!this.isRed(i.left)&&(i=this.rotateLeft(i)),this.isRed(i.left)&&this.isRed(i.left.left)&&(i=this.rotateRight(i)),this.isRed(i.left)&&this.isRed(i.right)&&this.flipColors(i),i}removeInternal(e,r){if(this.comparator(r,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,r);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(r,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(r,e.key)===0){this.counter-=1;const i=this.min(e.right);e.value=i.value,e.key=i.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,r)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const r=e.right;return e.right=r.left,r.left=e,r.isRed=r.left.isRed,r.left.isRed=!0,r}rotateRight(e){const r=e.left;return e.left=r.right,r.right=e,r.isRed=r.right.isRed,r.right.isRed=!0,r}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class zt{constructor(e,r){u(this,"parentID"),u(this,"leftSiblingID"),this.parentID=e,this.leftSiblingID=r}static of(e,r){return new zt(e,r)}static fromTreePos(e){const{offset:r}=e;let{node:i}=e,a;return i.isText?(i.parent.children[0]===i&&r===0?a=i.parent:a=i,i=i.parent):r===0?a=i:a=i.children[r-1],zt.of(i.id,ze.of(a.getCreatedAt(),a.getOffset()+r))}getParentID(){return this.parentID}static fromStruct(e){return zt.of(ze.of(et.fromStruct(e.parentID.createdAt),e.parentID.offset),ze.of(et.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const r=this.getParentID(),i=this.getLeftSiblingID(),a=e.findFloorNode(r);let f=e.findFloorNode(i);if(!a||!f)throw new Error(`cannot find node of CRDTTreePos(${r.toTestString()}, ${i.toTestString()})`);return!i.equals(r)&&i.getOffset()>0&&i.getOffset()===f.id.getOffset()&&f.insPrevID&&(f=e.findFloorNode(f.insPrevID)),[a,f]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class ze{constructor(e,r){u(this,"createdAt"),u(this,"offset"),this.createdAt=e,this.offset=r}static of(e,r){return new ze(e,r)}static fromStruct(e){return ze.of(et.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,r)=>{const i=e.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class yt extends Uy{constructor(e,r,i,a,f){super(r),u(this,"id"),u(this,"removedAt"),u(this,"attrs"),u(this,"insPrevID"),u(this,"insNextID"),u(this,"_value",""),this.id=e,this.removedAt=f,a&&(this.attrs=a),typeof i=="string"?this.value=i:Array.isArray(i)&&(this._children=i)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,r,i,a){return new yt(e,r,i,a)}deepcopy(){var e;const r=new yt(this.id,this.type);return r.removedAt=this.removedAt,r._value=this._value,r.size=this.size,r.attrs=(e=this.attrs)==null?void 0:e.deepcopy(),r._children=this._children.map(i=>{const a=i.deepcopy();return a.parent=r,a}),r.insPrevID=this.insPrevID,r.insNextID=this.insNextID,r}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),r&&this.updateAncestorsSize()}cloneText(e){return new yt(ze.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new yt(ze.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,r,i){const a=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,i);if(a){if(a.insPrevID=this.id,this.insNextID){const f=e.findFloorNode(this.insNextID);f.insPrevID=a.id,a.insNextID=this.insNextID}this.insNextID=a.id,e.registerNode(a)}return a}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,r){return this.isText?!1:!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,r){this.attrs||(this.attrs=new An);const i=new Array;for(const[a,f]of Object.entries(e))i.push(this.attrs.set(a,f,r));return i}purge(e){this.attrs&&this.attrs.purge(e)}getGCPairs(){const e=[];if(!this.attrs)return e;for(const r of this.attrs)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}function Ya(o){var e;if(o.isText){const i=o;return{type:i.type,value:i.value}}const r={type:o.type,children:o.children.map(Ya)};return o.attrs&&(r.attributes=Kr((e=o.attrs)==null?void 0:e.toObject())),r}function Qa(o){if(o.isText)return o.value;let e="";return o.attrs&&o.attrs.size()&&(e=" "+Array.from(o.attrs).filter(r=>!r.isRemoved()).sort((r,i)=>r.getKey().localeCompare(i.getKey())).map(r=>{const i=JSON.parse(r.getValue());return typeof i=="string"?`${r.getKey()}="${i}"`:`${r.getKey()}="${ln(r.getValue())}"`}).join(" ")),`<${o.type}${e}>${o.children.map(r=>Qa(r)).join("")}</${o.type}>`}function Gf(o){if(o.isText){const e=o;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:o.type,children:o.children.map(Gf),size:o.size,isRemoved:o.isRemoved}}class Pt extends Bi{constructor(e,r){super(r),u(this,"indexTree"),u(this,"nodeMapByID"),this.indexTree=new Vy(e),this.nodeMapByID=new Hf(ze.createComparator()),this.indexTree.traverseAll(i=>{this.nodeMapByID.put(i.id,i)})}static create(e,r){return new Pt(e,r)}findFloorNode(e){const r=this.nodeMapByID.floorEntry(e);if(!(!r||!r.key.getCreatedAt().equals(e.getCreatedAt())))return r.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,r){const[i,a]=e.toTreeNodePair(this);let f=a;const d=i===f,p=f.parent&&!d?f.parent:i;if(f.isText&&f.split(this,e.getLeftSiblingID().getOffset()-f.id.getOffset()),r){const g=p.allChildren,v=d?0:g.indexOf(f)+1;for(let S=v;S<g.length;S++){const D=g[S];if(!D.id.getCreatedAt().after(r))break;f=D}}return[p,f]}style(e,r,i,a){const[f,d]=this.findNodesAndSplitText(e[0],i),[p,g]=this.findNodesAndSplitText(e[1],i),v=[],S=r?Kr(r):{},D=new Map,P=[];return this.traverseInPosRange(f,d,p,g,([I])=>{const $=I.getCreatedAt().getActorID(),Y=a?a.has($)?a.get($):Ft:Mi;if(I.canStyle(i,Y)&&r){const G=D.get($),re=I.getCreatedAt();(!G||re.after(G))&&D.set($,re);const Te=I.setAttrs(r,i),oe=Te.reduce((ke,[,Sr])=>(Sr&&(ke[Sr.getKey()]=S[Sr.getKey()]),ke),{}),pe=I.parent,ge=I.prevSibling||I.parent;Object.keys(oe).length>0&&v.push({type:"style",from:this.toIndex(pe,ge),to:this.toIndex(I,I),fromPath:this.toPath(pe,ge),toPath:this.toPath(I,I),actor:i.getActorID(),value:oe});for(const[ke]of Te)ke&&P.push({parent:I,child:ke})}}),[D,P,v]}removeStyle(e,r,i,a){const[f,d]=this.findNodesAndSplitText(e[0],i),[p,g]=this.findNodesAndSplitText(e[1],i),v=[],S=new Map,D=[];return this.traverseInPosRange(f,d,p,g,([P])=>{const I=P.getCreatedAt().getActorID(),$=a?a.has(I)?a.get(I):Ft:Mi;if(P.canStyle(i,$)&&r){const Y=S.get(I),G=P.getCreatedAt();(!Y||G.after(Y))&&S.set(I,G),P.attrs||(P.attrs=new An);for(const oe of r){const pe=P.attrs.remove(oe,i);for(const ge of pe)D.push({parent:P,child:ge})}const re=P.parent,Te=P.prevSibling||P.parent;v.push({actor:i.getActorID(),type:"removeStyle",from:this.toIndex(re,Te),to:this.toIndex(P,P),fromPath:this.toPath(re,Te),toPath:this.toPath(P,P),value:r})}}),[S,D,v]}edit(e,r,i,a,f,d){const[p,g]=this.findNodesAndSplitText(e[0],a),[v,S]=this.findNodesAndSplitText(e[1],a),D=this.toIndex(p,g),P=this.toPath(p,g),I=[],$=[],Y=[],G=new Map;this.traverseInPosRange(p,g,v,S,([oe,pe],ge)=>{if(pe===Re.Start&&!ge)for(const Tr of oe.children)Y.push(Tr);const ke=oe.getCreatedAt().getActorID(),Sr=d?d.has(ke)?d.get(ke):Ft:Mi;if(oe.canDelete(a,Sr)||I.includes(oe.parent)){const Tr=G.get(ke),ts=oe.getCreatedAt();(!Tr||ts.after(Tr))&&G.set(ke,ts),(pe===Re.Text||pe===Re.Start)&&I.push(oe),$.push([oe,pe])}});const re=this.makeDeletionChanges($,a),Te=[];for(const oe of I)oe.remove(a),oe.isRemoved&&Te.push({parent:this,child:oe});for(const oe of Y)oe.removedAt||p.append(oe);if(i>0){let oe=0,pe=p,ge=g;for(;oe<i;)pe.split(this,pe.findOffset(ge)+1,f),ge=pe,pe=pe.parent,oe++;re.push({type:"content",from:D,to:D,fromPath:P,toPath:P,actor:a.getActorID()})}if(r!=null&&r.length){const oe=[];let pe=g;for(const ge of r)pe===p?p.insertAt(ge,0):p.insertAfter(ge,pe),pe=ge,io(ge,ke=>{p.isRemoved&&(ke.remove(a),Te.push({parent:this,child:ke})),this.nodeMapByID.put(ke.id,ke)}),ge.isRemoved||oe.push(ge);if(oe.length){const ge=oe.map(ke=>Ya(ke));re.length&&re[re.length-1].from===D?re[re.length-1].value=ge:re.push({type:"content",from:D,to:D,fromPath:P,toPath:P,actor:a.getActorID(),value:ge})}}return[re,Te,G]}editT(e,r,i,a,f){const d=this.findPos(e[0]),p=this.findPos(e[1]);this.edit([d,p],r,i,a,f)}move(e,r,i){throw new Error(`not implemented: ${e}, ${r}, ${i}`)}purge(e){var r;(r=e.parent)==null||r.removeChild(e),this.nodeMapByID.remove(e.id);const i=e.insPrevID,a=e.insNextID;if(i){const f=this.findFloorNode(i);f.insNextID=a}if(a){const f=this.findFloorNode(a);f.insPrevID=i}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&e.push({parent:this,child:r});for(const i of r.getGCPairs())e.push(i)}),e}findPos(e,r=!0){const i=this.indexTree.findTreePos(e,r);return zt.fromTreePos(i)}pathToPosRange(e){const r=this.pathToIndex(e);return[this.findPos(r),this.findPos(r+1)]}pathToPos(e){const r=this.indexTree.pathToIndex(e);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Qa(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),r=(i,a=void 0,f=void 0,d=0)=>{var p,g,v,S;let D,P,I;const $=i.isText?{node:i,offset:0}:a&&f?this.toTreePos(a,f):null;$&&(D=this.indexTree.indexOf($),P=this.indexTree.treePosToPath($),I=zt.fromTreePos($).toStruct());const Y={type:i.type,parent:a==null?void 0:a.id.toTestString(),size:i.size,id:i.id.toTestString(),removedAt:(p=i.removedAt)==null?void 0:p.toTestString(),insPrev:(g=i.insPrevID)==null?void 0:g.toTestString(),insNext:(v=i.insNextID)==null?void 0:v.toTestString(),value:i.isText?i.value:void 0,isRemoved:i.isRemoved,children:[],depth:d,attributes:i.attrs?Kr((S=i.attrs)==null?void 0:S.toObject()):void 0,index:D,path:P,pos:I};for(let G=0;G<i.allChildren.length;G++){const re=G===0?i:i.allChildren[G-1];Y.children.push(r(i.allChildren[G],i,re,d+1))}return Y};return r(e)}getRootTreeNode(){return Ya(this.indexTree.getRoot())}toTestTreeNode(){return Gf(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new Pt(e.deepcopy(),this.getCreatedAt())}toPath(e,r){const i=this.toTreePos(e,r);return i?this.indexTree.treePosToPath(i):[]}toIndex(e,r){const i=this.toTreePos(e,r);return i?this.indexTree.indexOf(i):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const r=this.findPos(e[0]);return e[0]===e[1]?[r,r]:[r,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[r,i]=e,a=this.findPos(r);return r===i?[a.toStruct(),a.toStruct()]:[a.toStruct(),this.findPos(i).toStruct()]}posRangeToPathRange(e){const[r,i]=this.findNodesAndSplitText(e[0]),[a,f]=this.findNodesAndSplitText(e[1]);return[this.toPath(r,i),this.toPath(a,f)]}posRangeToIndexRange(e){const[r,i]=this.findNodesAndSplitText(e[0]),[a,f]=this.findNodesAndSplitText(e[1]);return[this.toIndex(r,i),this.toIndex(a,f)]}traverseInPosRange(e,r,i,a,f){const d=this.toIndex(e,r),p=this.toIndex(i,a);return this.indexTree.tokensBetween(d,p,f)}toTreePos(e,r){if(!e||!r)return;if(e.isRemoved){let a;for(;e.isRemoved;)a=e,e=a.parent;const f=e.findOffset(a);return{node:e,offset:f}}if(e===r)return{node:e,offset:0};let i=e.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};i++}return{node:e,offset:i}}makeDeletionChanges(e,r){const i=[],a=[];let f=null,d=null;for(let p=0;p<e.length;p++){const g=e[p],v=e[p+1];f||(f=g),d=g;const S=this.findRightToken(g);(!S||!v||S[0]!==v[0]||S[1]!==v[1])&&(a.push([f,d]),f=null,d=null)}for(const p of a){const[g,v]=p,[S,D]=this.findLeftToken(g),[P,I]=v,$=D===Re.Start?S:S.parent,Y=I===Re.Start?P:P.parent,G=this.toIndex($,S),re=this.toIndex(Y,P);G<re&&(i.length>0&&G===i[i.length-1].to?(i[i.length-1].to=re,i[i.length-1].toPath=this.toPath(Y,P)):i.push({type:"content",from:G,to:re,fromPath:this.toPath($,S),toPath:this.toPath(Y,P),actor:r.getActorID()}))}return i.reverse()}findRightToken([e,r]){if(r===Re.Start){const p=e.allChildren;return p.length>0?[p[0],p[0].isText?Re.Text:Re.Start]:[e,Re.End]}const i=e.parent,a=i.allChildren,f=a.indexOf(e);if(i&&f===a.length-1)return[i,Re.End];const d=a[f+1];return[d,d.isText?Re.Text:Re.Start]}findLeftToken([e,r]){if(r===Re.End){const p=e.allChildren;if(p.length>0){const g=p[p.length-1];return[g,g.isText?Re.Text:Re.End]}return[e,Re.Start]}const i=e.parent,a=i.allChildren,f=a.indexOf(e);if(i&&f===0)return[i,Re.Start];const d=a[f-1];return[d,d.isText?Re.Text:Re.End]}}class Wi extends Ut{constructor(e,r,i,a,f,d,p){super(e,p),u(this,"fromPos"),u(this,"toPos"),u(this,"contents"),u(this,"splitLevel"),u(this,"maxCreatedAtMapByActor"),this.fromPos=r,this.toPos=i,this.contents=a,this.splitLevel=f,this.maxCreatedAtMapByActor=d}static create(e,r,i,a,f,d,p){return new Wi(e,r,i,a,f,d,p)}execute(e){var r;const i=e.findByCreatedAt(this.getParentCreatedAt());i||R.fatal(`fail to find ${this.getParentCreatedAt()}`),i instanceof Pt||R.fatal("fail to execute, only Tree can execute edit");const a=this.getExecutedAt(),f=i,[d,p]=f.edit([this.fromPos,this.toPos],(r=this.contents)==null?void 0:r.map(g=>g.deepcopy()),this.splitLevel,a,(()=>{let g=a.getDelimiter();return this.contents!==void 0&&(g+=this.contents.length),()=>et.of(a.getLamport(),++g,a.getActorID())})(),this.maxCreatedAtMapByActor);for(const g of p)e.registerGCPair(g);return{opInfos:d.map(({from:g,to:v,value:S,splitLevel:D,fromPath:P,toPath:I})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:g,to:v,value:S,splitLevel:D,fromPath:P,toPath:I}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,a=this.contents||[];return`${e}.EDIT(${r},${i},${a.map(f=>Qa(f)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class jn{constructor(e,r,i,a){u(this,"clientSeq"),u(this,"serverSeq"),u(this,"lamport"),u(this,"actor"),this.clientSeq=e,this.serverSeq=a,this.lamport=r,this.actor=i}static of(e,r,i,a){return new jn(e,r,i,a)}next(){return new jn(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new jn(this.clientSeq,e,this.actor):new jn(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return et.of(this.lamport,e,this.actor)}setActor(e){return new jn(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const qy=new jn(0,Q.fromInt(0,!0),no);class vr{constructor({id:e,operations:r,presenceChange:i,message:a}){u(this,"id"),u(this,"operations"),u(this,"presenceChange"),u(this,"message"),this.id=e,this.operations=r||[],this.presenceChange=i,this.message=a}static create({id:e,operations:r,presenceChange:i,message:a}){return new vr({id:e,operations:r,presenceChange:i,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const r of this.operations)r.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,r,i){const a=[],f=[];for(const d of this.operations){const p=d.execute(e,i);if(!p)continue;const{opInfos:g,reverseOp:v}=p;a.push(...g),v&&f.unshift(v)}return this.presenceChange&&(this.presenceChange.type===$n.Put?r.set(this.id.getActorID(),$t(this.presenceChange.presence)):r.delete(this.id.getActorID())),{opInfos:a,reverseOps:f}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:_e.bytesToHex(_e.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>_e.bytesToHex(_e.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:r,operations:i,presenceChange:a,message:f}=e;return vr.create({id:_e.bytesToChangeID(_e.hexToBytes(r)),operations:i==null?void 0:i.map(d=>_e.bytesToOperation(_e.hexToBytes(d))),presenceChange:a,message:f})}}class so{constructor(e,r,i,a,f,d){u(this,"documentKey"),u(this,"checkpoint"),u(this,"isRemoved"),u(this,"changes"),u(this,"snapshot"),u(this,"minSyncedTicket"),this.documentKey=e,this.checkpoint=r,this.isRemoved=i,this.changes=a,this.snapshot=f,this.minSyncedTicket=d}static create(e,r,i,a,f,d){return new so(e,r,i,a,f,d)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Wr{constructor(e,r){u(this,"serverSeq"),u(this,"clientSeq"),this.serverSeq=e,this.clientSeq=r}static of(e,r){return new Wr(e,r)}increaseClientSeq(e){return e===0?this:new Wr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const r=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,i=Math.max(this.clientSeq,e.clientSeq);return Wr.of(r,i)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const Hy=new Wr(Q.fromInt(0,!0),0);class un{constructor(e,r){u(this,"createdAt"),u(this,"offset"),this.createdAt=e,this.offset=r}static of(e,r){return new un(e,r)}static fromStruct(e){return un.of(et.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new un(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Gy=un.of(Ft,0);class jt{constructor(e,r){u(this,"id"),u(this,"relativeOffset"),this.id=e,this.relativeOffset=r}static of(e,r){return new jt(e,r)}static fromStruct(e){const r=un.fromStruct(e.id);return jt.of(r,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return un.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Vn extends Jf{constructor(e,r,i){super(r),u(this,"id"),u(this,"removedAt"),u(this,"prev"),u(this,"next"),u(this,"insPrev"),u(this,"insNext"),this.id=e,this.removedAt=i}static create(e,r){return new Vn(e,r)}static createComparator(){return(e,r)=>{const i=e.getCreatedAt().compare(r.getCreatedAt());return i!==0?i:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new Vn(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,r){const i=!this.removedAt;return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))?i:!1}canStyle(e,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[jt.of(this.id,0),jt.of(this.id,this.getLength())]}deepcopy(){return new Vn(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const r=this.value;return this.value=r.substring(0,e),r.substring(e,r.length)}toIDString(){return this.id.toIDString()}}class qr{constructor(){u(this,"head"),u(this,"treeByIndex"),u(this,"treeByID"),this.head=Vn.create(Gy),this.treeByIndex=new Fi,this.treeByID=new Hf(Vn.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new qr}edit(e,r,i,a){const[f,d]=this.findNodeWithSplit(e[1],r),[p,g]=this.findNodeWithSplit(e[0],r),v=this.findBetween(g,d),[S,D,P]=this.deleteNodes(v,r,a),I=d?d.getID():f.getID();let $=jt.of(I,0);if(i){const G=this.posToIndex(p.createPosRange()[1],!0),re=this.insertAfter(p,Vn.create(un.of(r,0),i));S.length&&S[S.length-1].from===G?S[S.length-1].value=i:S.push({actor:r.getActorID(),from:G,to:G,value:i}),$=jt.of(re.getID(),re.getContentLength())}const Y=[];for(const[,G]of P)Y.push({parent:this,child:G});return[$,D,Y,S]}indexToPos(e){const[r,i]=this.treeByIndex.find(e),a=r;return jt.of(a.getID(),i)}findIndexesFromRange(e){const[r,i]=e;return[this.posToIndex(r,!1),this.posToIndex(i,!0)]}posToIndex(e,r){const i=e.getAbsoluteID(),a=r?this.findFloorNodePreferToLeft(i):this.findFloorNode(i);a||R.fatal(`the node of the given id should be found: ${i.toTestString()}`);const f=this.treeByIndex.indexOf(a),d=a.isRemoved()?0:i.getOffset()-a.getID().getOffset();return f+d}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}getTreeByIndex(){return this.treeByIndex}getTreeByID(){return this.treeByID}toString(){const e=[];for(const r of this)r.isRemoved()||e.push(r.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new qr;let r=this.head.getNext(),i=e.head,a;for(;r;){if(a=e.insertAfter(i,r.deepcopy()),r.hasInsPrev()){const f=e.findNode(r.getInsPrevID());a.setInsPrev(f)}i=a,r=r.getNext()}return e}toTestString(){const e=[];let r=this.head;for(;r;)r.isRemoved()?e.push(`{${r.toTestString()}}`):e.push(`[${r.toTestString()}]`),r=r.getNext();return e.join("")}insertAfter(e,r){const i=e.getNext();return r.setPrev(e),i&&i.setPrev(r),this.treeByID.put(r.getID(),r),this.treeByIndex.insertAfter(e,r),r}findNodeWithSplit(e,r){const i=e.getAbsoluteID();let a=this.findFloorNodePreferToLeft(i);const f=i.getOffset()-a.getID().getOffset();for(this.splitNode(a,f);a.hasNext()&&a.getNext().getCreatedAt().after(r);)a=a.getNext();return[a,a.getNext()]}findFloorNodePreferToLeft(e){let r=this.findFloorNode(e);if(r||R.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&r.getID().getOffset()==e.getOffset()){if(!r.hasInsPrev())return r;r=r.getInsPrev()}return r}findFloorNode(e){const r=this.treeByID.floorEntry(e);if(!!r&&!(!r.key.equals(e)&&!r.key.hasSameCreatedAt(e)))return r.value}findBetween(e,r){const i=[];let a=e;for(;a&&a!==r;)i.push(a),a=a.getNext();return i}splitNode(e,r){if(r>e.getContentLength()&&R.fatal("offset should be less than or equal to length"),r===0)return e;if(r===e.getContentLength())return e.getNext();const i=e.split(r);this.treeByIndex.updateWeight(i),this.insertAfter(e,i);const a=e.getInsNext();return a&&a.setInsPrev(i),i.setInsPrev(e),i}deleteNodes(e,r,i){if(!e.length)return[[],new Map,new Map];const[a,f]=this.filterNodes(e,r,i),d=new Map,p=new Map,g=this.makeChanges(f,r);for(const v of a){const S=v.getCreatedAt().getActorID();(!d.has(S)||v.getID().getCreatedAt().after(d.get(S)))&&d.set(S,v.getID().getCreatedAt()),p.set(v.getID().toIDString(),v),v.remove(r)}return this.deleteIndexNodes(f),[g,d,p]}filterNodes(e,r,i){const a=!!i,f=[],d=[],[p,g]=this.findEdgesOfCandidates(e);d.push(p);for(const v of e){const S=v.getCreatedAt().getActorID(),D=a?i.has(S)?i.get(S):Ft:Mi;v.canDelete(r,D)?f.push(v):d.push(v)}return d.push(g),[f,d]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,r){const i=[];let a,f;for(let d=0;d<e.length-1;d++){const p=e[d],g=e[d+1];p.getNext()!=g&&([a]=this.findIndexesFromRange(p.getNext().createPosRange()),g?[,f]=this.findIndexesFromRange(g.getPrev().createPosRange()):f=this.treeByIndex.length,a<f&&i.push({actor:r.getActorID(),from:a,to:f}))}return i.reverse()}deleteIndexNodes(e){for(let r=0;r<e.length-1;r++){const i=e[r],a=e[r+1];i.getNext()!=a&&this.treeByIndex.deleteRange(i,a)}}purge(e){this.treeByIndex.delete(e),this.treeByID.remove(e.getID());const r=e.getPrev(),i=e.getNext(),a=e.getInsPrev(),f=e.getInsNext();r&&r.setNext(i),i&&i.setPrev(r),e.setPrev(void 0),e.setNext(void 0),a&&a.setInsNext(f),f&&f.setInsPrev(a),e.setInsPrev(void 0),e.setInsNext(void 0)}}const Yf=o=>o<0?Math.ceil(o):Math.floor(o);var cn=(o=>(o[o.IntegerCnt=0]="IntegerCnt",o[o.LongCnt=1]="LongCnt",o))(cn||{});class vt extends Bi{constructor(e,r,i){switch(super(i),u(this,"valueType"),u(this,"value"),this.valueType=e,e){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=Q.fromNumber(r).toInt():this.value=Yf(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=Q.fromNumber(r):this.value=r;break;default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${e}`)}}static create(e,r,i){return new vt(e,r,i)}static valueFromBytes(e,r){switch(e){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return Q.fromBytesLE(Array.from(r));default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=vt.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof Q?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!vt.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new ue(se.ErrUnimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function r(i){if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`)}return r(this),r(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Me.Long?this.value=this.value+e.getValue().toInt():this.value=Q.fromNumber(this.value+Yf(e.getValue())).toInt(),this}}class Hr extends Ut{constructor(e,r,i){super(e,i),u(this,"value"),this.value=r}static create(e,r,i){return new Hr(e,r,i)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof vt||R.fatal("fail to execute, only Counter can execute increase");const i=r,a=this.value.deepcopy();return i.increase(a),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:a.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),i=e.getType()===Me.Long?e.getValue().multiply(-1):e.getValue()*-1;return Hr.create(this.getParentCreatedAt(),Se.of(i,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class In extends Ut{constructor(e,r,i,a,f,d,p){super(e,p),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"attributes"),u(this,"attributesToRemove"),this.fromPos=r,this.toPos=i,this.maxCreatedAtMapByActor=a,this.attributes=f,this.attributesToRemove=d}static create(e,r,i,a,f,d){return new In(e,r,i,a,f,new Array,d)}static createTreeRemoveStyleOperation(e,r,i,a,f,d){return new In(e,r,i,a,new Map,f,d)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||R.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Pt||R.fatal("fail to execute, only Tree can execute edit");const i=r;let a,f;if(this.attributes.size){const d={};[...this.attributes].forEach(([p,g])=>d[p]=g),[,f,a]=i.style([this.fromPos,this.toPos],d,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const d=this.attributesToRemove;[,f,a]=i.removeStyle([this.fromPos,this.toPos],d,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const d of f)e.registerGCPair(d);return{opInfos:a.map(({from:d,to:p,value:g,fromPath:v,toPath:S})=>({type:"tree-style",from:d,to:p,value:this.attributes.size?{attributes:g}:{attributesToRemove:g},fromPath:v,toPath:S,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,i=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${r},${i},${Object.entries(this.attributes||{}).map(([a,f])=>`${a}:"${f}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function Yy(o){const e=new ja,r=e.data;for(const[i,a]of Object.entries(o))r[i]=JSON.stringify(a);return e}function Qy(o){if(o.type===$n.Put)return new za({type:Li.PUT,presence:Yy(o.presence)});if(o.type===$n.Clear)return new za({type:Li.CLEAR});throw new ue(se.ErrUnimplemented,"unimplemented type")}function Xy(o){return new Rf({serverSeq:o.getServerSeqAsString(),clientSeq:o.getClientSeq()})}function Qf(o){return new Zs({clientSeq:o.getClientSeq(),lamport:o.getLamportAsString(),actorId:il(o.getActorID())})}function K(o){if(!!o)return new W({lamport:o.getLamportAsString(),delimiter:o.getDelimiter(),actorId:il(o.getActorID())})}function Xf(o){switch(o){case Me.Null:return ee.NULL;case Me.Boolean:return ee.BOOLEAN;case Me.Integer:return ee.INTEGER;case Me.Long:return ee.LONG;case Me.Double:return ee.DOUBLE;case Me.String:return ee.STRING;case Me.Bytes:return ee.BYTES;case Me.Date:return ee.DATE;default:throw new ue(se.Unsupported,`unsupported type: ${o}`)}}function Zf(o){switch(o){case cn.IntegerCnt:return ee.INTEGER_CNT;case cn.LongCnt:return ee.LONG_CNT;default:throw new ue(se.Unsupported,`unsupported type: ${o}`)}}function Xa(o){if(o instanceof at)return new Tn({type:ee.JSON_OBJECT,createdAt:K(o.getCreatedAt()),value:gd(o)});if(o instanceof mt)return new Tn({type:ee.JSON_ARRAY,createdAt:K(o.getCreatedAt()),value:Nv(o)});if(o instanceof xt)return new Tn({type:ee.TEXT,createdAt:K(o.getCreatedAt())});if(o instanceof Se)return new Tn({type:Xf(o.getType()),createdAt:K(o.getCreatedAt()),value:o.toBytes()});if(o instanceof vt)return new Tn({type:Zf(o.getType()),createdAt:K(o.getCreatedAt()),value:o.toBytes()});if(o instanceof Pt)return new Tn({type:ee.TREE,createdAt:K(o.getCreatedAt()),value:Pv(o)});throw new ue(se.ErrUnimplemented,"unimplemented element")}function Zy(o){return new Fa({createdAt:K(o.getCreatedAt()),offset:o.getOffset()})}function oo(o){return new hr({createdAt:K(o.getID().getCreatedAt()),offset:o.getID().getOffset(),relativeOffset:o.getRelativeOffset()})}function ao(o){return new bi({parentId:qi(o.getParentID()),leftSiblingId:qi(o.getLeftSiblingID())})}function qi(o){return new zr({createdAt:K(o.getCreatedAt()),offset:o.getOffset()})}function ed(o){const e=new Ba;if(o instanceof mr){const r=o,i=new pf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.key=r.getKey(),i.value=Xa(r.getValue()),i.executedAt=K(r.getExecutedAt()),e.body.case="set",e.body.value=i}else if(o instanceof zi){const r=o,i=new gf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.prevCreatedAt=K(r.getPrevCreatedAt()),i.value=Xa(r.getValue()),i.executedAt=K(r.getExecutedAt()),e.body.case="add",e.body.value=i}else if(o instanceof zn){const r=o,i=new mf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.prevCreatedAt=K(r.getPrevCreatedAt()),i.createdAt=K(r.getCreatedAt()),i.executedAt=K(r.getExecutedAt()),e.body.case="move",e.body.value=i}else if(o instanceof Un){const r=o,i=new yf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.createdAt=K(r.getCreatedAt()),i.executedAt=K(r.getExecutedAt()),e.body.case="remove",e.body.value=i}else if(o instanceof Vi){const r=o,i=new vf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.from=oo(r.getFromPos()),i.to=oo(r.getToPos());const a=i.createdAtMapByActor;for(const[d,p]of r.getMaxCreatedAtMapByActor())a[d]=K(p);i.content=r.getContent();const f=i.attributes;for(const[d,p]of r.getAttributes())f[d]=p;i.executedAt=K(r.getExecutedAt()),e.body.case="edit",e.body.value=i}else if(o instanceof Ji){const r=o,i=new wf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.from=oo(r.getFromPos()),i.to=oo(r.getToPos());const a=i.createdAtMapByActor;for(const[d,p]of r.getMaxCreatedAtMapByActor())a[d]=K(p);const f=i.attributes;for(const[d,p]of r.getAttributes())f[d]=p;i.executedAt=K(r.getExecutedAt()),e.body.case="style",e.body.value=i}else if(o instanceof Hr){const r=o,i=new Sf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.value=Xa(r.getValue()),i.executedAt=K(r.getExecutedAt()),e.body.case="increase",e.body.value=i}else if(o instanceof Wi){const r=o,i=new Tf,a=i.createdAtMapByActor;for(const[f,d]of r.getMaxCreatedAtMapByActor())a[f]=K(d);i.parentCreatedAt=K(r.getParentCreatedAt()),i.from=ao(r.getFromPos()),i.to=ao(r.getToPos()),i.contents=ov(r.getContents()),i.splitLevel=r.getSplitLevel(),i.executedAt=K(r.getExecutedAt()),e.body.case="treeEdit",e.body.value=i}else if(o instanceof In){const r=o,i=new kf;i.parentCreatedAt=K(r.getParentCreatedAt()),i.from=ao(r.getFromPos()),i.to=ao(r.getToPos());const a=i.createdAtMapByActor;for(const[d,p]of r.getMaxCreatedAtMapByActor())a[d]=K(p);const f=r.getAttributesToRemove();if(f.length>0)i.attributesToRemove=f;else{const d=i.attributes;for(const[p,g]of r.getAttributes())d[p]=g}i.executedAt=K(r.getExecutedAt()),e.body.case="treeStyle",e.body.value=i}else throw new ue(se.ErrUnimplemented,"unimplemented operation");return e}function ev(o){const e=[];for(const r of o)e.push(ed(r));return e}function tv(o){const e=new hf({id:Qf(o.getID()),message:o.getMessage()});return o.hasOperations()&&(e.operations=ev(o.getOperations())),o.hasPresenceChange()&&(e.presenceChange=Qy(o.getPresenceChange())),e}function nv(o){const e=[];for(const r of o)e.push(tv(r));return e}function rv(o){const e=[];for(const r of o)e.push(new Pf({key:r.getStrKey(),element:Za(r.getValue())}));return e}function iv(o){const e=[];for(const r of o)e.push(new $a({element:Za(r.getValue())}));return e}function sv(o){const e=[];for(const r of o){const i=new Of;i.id=Zy(r.getID()),i.value=r.getValue().getContent(),i.removedAt=K(r.getRemovedAt());const a=i.attributes,f=r.getValue().getAttrs();for(const d of f){const p=new eo;p.value=d.getValue(),p.updatedAt=K(d.getUpdatedAt()),a[d.getKey()]=p}e.push(i)}return e}function ov(o){const e=[];if(!o||!o.length)return e;for(const r of o)e.push(new Df({content:td(r)}));return e}function av(o){const e={};for(const r of o)e[r.getKey()]=new eo({value:r.getValue(),updatedAt:K(r.getUpdatedAt()),isRemoved:r.isRemoved()});return e}function td(o){if(!o)return[];const e=[];return io(o,(r,i)=>{const a=new Ua({id:qi(r.id),type:r.type,removedAt:K(r.removedAt),depth:i});r.isText&&(a.value=r.value),r.insPrevID&&(a.insPrevId=qi(r.insPrevID)),r.insNextID&&(a.insNextId=qi(r.insNextID)),r.attrs&&(a.attributes=av(r.attrs)),e.push(a)}),e}function lv(o){const e=new It;return e.body.case="jsonObject",e.body.value=new Af({nodes:rv(o.getRHT()),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function nd(o){const e=new It;return e.body.case="jsonArray",e.body.value=new Ef({nodes:iv(o.getElements()),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function uv(o){const e=new It;return e.body.case="primitive",e.body.value=new If({type:Xf(o.getType()),value:o.toBytes(),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function cv(o){const e=new It;return e.body.case="text",e.body.value=new Cf({nodes:sv(o.getRGATreeSplit()),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function fv(o){const e=new It;return e.body.case="counter",e.body.value=new Nf({type:Zf(o.getType()),value:o.toBytes(),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function rd(o){const e=new It;return e.body.case="tree",e.body.value=new xf({nodes:td(o.getRoot()),createdAt:K(o.getCreatedAt()),movedAt:K(o.getMovedAt()),removedAt:K(o.getRemovedAt())}),e}function Za(o){if(o instanceof at)return lv(o);if(o instanceof mt)return nd(o);if(o instanceof Se)return uv(o);if(o instanceof xt)return cv(o);if(o instanceof vt)return fv(o);if(o instanceof Pt)return rd(o);throw new ue(se.ErrUnimplemented,"unimplemented element")}function dv(o){return new Sn({documentKey:o.getDocumentKey(),checkpoint:Xy(o.getCheckpoint()),isRemoved:o.getIsRemoved(),changes:nv(o.getChanges()),snapshot:o.getSnapshot(),minSyncedTicket:K(o.getMinSyncedTicket())})}function id(o){const e=o.findDetails(Oy);for(const r of e)if(r.metadata.code)return r.metadata.code;return""}function sd(o){let e;return o.serverSeq&&(e=Q.fromString(o.serverSeq,!0)),jn.of(o.clientSeq,Q.fromString(o.lamport,!0),rl(o.actorId),e)}function q(o){if(!!o)return et.of(Q.fromString(o.lamport,!0),o.delimiter,rl(o.actorId))}function el(o){const e={};return Object.entries(o.data).forEach(([r,i])=>{e[r]=JSON.parse(i)}),e}function hv(o){const e=o.type;if(e===Li.PUT){const r=el(o.presence);return{type:$n.Put,presence:r}}if(e===Li.CLEAR)return{type:$n.Clear};throw new ue(se.Unsupported,`unsupported type: ${e}`)}function pv(o){const e=new Map;return Object.entries(o).forEach(([r,i])=>{e.set(r,el(i))}),e}function od(o){switch(o){case ee.NULL:return Me.Null;case ee.BOOLEAN:return Me.Boolean;case ee.INTEGER:return Me.Integer;case ee.LONG:return Me.Long;case ee.DOUBLE:return Me.Double;case ee.STRING:return Me.String;case ee.BYTES:return Me.Bytes;case ee.DATE:return Me.Date}throw new ue(se.ErrUnimplemented,`unimplemented value type: ${o}`)}function lo(o){switch(o){case ee.INTEGER_CNT:return cn.IntegerCnt;case ee.LONG_CNT:return cn.LongCnt}throw new ue(se.ErrUnimplemented,`unimplemented value type: ${o}`)}function tl(o){switch(o.type){case ee.JSON_OBJECT:return o.value?pd(o.value):at.create(q(o.createdAt));case ee.JSON_ARRAY:return o.value?Cv(o.value):mt.create(q(o.createdAt));case ee.TEXT:return xt.create(qr.create(),q(o.createdAt));case ee.TREE:return xv(o.value);case ee.NULL:case ee.BOOLEAN:case ee.INTEGER:case ee.LONG:case ee.DOUBLE:case ee.STRING:case ee.BYTES:case ee.DATE:return Se.of(Se.valueFromBytes(od(o.type),o.value),q(o.createdAt));case ee.INTEGER_CNT:case ee.LONG_CNT:return vt.create(lo(o.type),vt.valueFromBytes(lo(o.type),o.value),q(o.createdAt))}}function uo(o){return jt.of(un.of(q(o.createdAt),o.offset),o.relativeOffset)}function ad(o){return un.of(q(o.createdAt),o.offset)}function gv(o){const e=ji.create(o.value);Object.entries(o.attributes).forEach(([i,a])=>{e.setAttr(i,a.value,q(a.updatedAt))});const r=Vn.create(ad(o.id),e);return r.remove(q(o.removedAt)),r}function Gr(o){return zt.of(Hi(o.parentId),Hi(o.leftSiblingId))}function Hi(o){return ze.of(q(o.createdAt),o.offset)}function mv(o){if(!o.length)return;const e=[];return o.forEach(r=>{const i=ld(r.content);e.push(i)}),e}function ld(o){if(o.length===0)return;const e=[];for(const i of o)e.push(vv(i));const r=e[e.length-1];for(let i=e.length-2;i>=0;i--){let a;for(let f=i+1;f<e.length;f++)if(o[i].depth-1===o[f].depth){a=e[f];break}a.prepend(e[i])}return r.updateDescendantsSize(),Pt.create(r,Ft).getRoot()}function yv(o){const e=An.create();for(const[r,i]of Object.entries(o))e.setInternal(r,i.value,q(i.updatedAt),i.isRemoved);return e}function vv(o){const e=Hi(o.id),r=yt.create(e,o.type),i=Object.entries(o.attributes);return r.isText?r.value=o.value:i.length&&(r.attrs=yv(o.attributes)),o.insPrevId&&(r.insPrevID=Hi(o.insPrevId)),o.insNextId&&(r.insNextID=Hi(o.insNextId)),r.removedAt=q(o.removedAt),r}function ud(o){if(o.body.case==="set"){const e=o.body.value;return mr.create(e.key,tl(e.value),q(e.parentCreatedAt),q(e.executedAt))}else if(o.body.case==="add"){const e=o.body.value;return zi.create(q(e.parentCreatedAt),q(e.prevCreatedAt),tl(e.value),q(e.executedAt))}else if(o.body.case==="move"){const e=o.body.value;return zn.create(q(e.parentCreatedAt),q(e.prevCreatedAt),q(e.createdAt),q(e.executedAt))}else if(o.body.case==="remove"){const e=o.body.value;return Un.create(q(e.parentCreatedAt),q(e.createdAt),q(e.executedAt))}else if(o.body.case==="edit"){const e=o.body.value,r=new Map;Object.entries(e.createdAtMapByActor).forEach(([a,f])=>{r.set(a,q(f))});const i=new Map;return Object.entries(e.attributes).forEach(([a,f])=>{i.set(a,f)}),Vi.create(q(e.parentCreatedAt),uo(e.from),uo(e.to),r,e.content,i,q(e.executedAt))}else if(o.body.case==="style"){const e=o.body.value,r=new Map;Object.entries(e.createdAtMapByActor).forEach(([a,f])=>{r.set(a,q(f))});const i=new Map;return Object.entries(e.attributes).forEach(([a,f])=>{i.set(a,f)}),Ji.create(q(e.parentCreatedAt),uo(e.from),uo(e.to),r,i,q(e.executedAt))}else{if(o.body.case==="select")return;if(o.body.case==="increase"){const e=o.body.value;return Hr.create(q(e.parentCreatedAt),tl(e.value),q(e.executedAt))}else if(o.body.case==="treeEdit"){const e=o.body.value,r=new Map;return Object.entries(e.createdAtMapByActor).forEach(([i,a])=>{r.set(i,q(a))}),Wi.create(q(e.parentCreatedAt),Gr(e.from),Gr(e.to),mv(e.contents),e.splitLevel,r,q(e.executedAt))}else if(o.body.case==="treeStyle"){const e=o.body.value,r=new Map,i=e.attributesToRemove,a=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([f,d])=>{a.set(f,q(d))}),(i==null?void 0:i.length)>0?In.createTreeRemoveStyleOperation(q(e.parentCreatedAt),Gr(e.from),Gr(e.to),a,i,q(e.executedAt)):(Object.entries(e.attributes).forEach(([f,d])=>{r.set(f,d)}),In.create(q(e.parentCreatedAt),Gr(e.from),Gr(e.to),a,r,q(e.executedAt)))}else throw new ue(se.ErrUnimplemented,"unimplemented operation")}}function wv(o){const e=[];for(const r of o){const i=ud(r);i&&e.push(i)}return e}function cd(o){const e=[];for(const r of o)e.push(vr.create({id:sd(r.id),operations:wv(r.operations),presenceChange:r.presenceChange?hv(r.presenceChange):void 0,message:r.message}));return e}function Sv(o){return Wr.of(Q.fromString(o.serverSeq,!0),o.clientSeq)}function Tv(o){return so.create(o.documentKey,Sv(o.checkpoint),o.isRemoved,cd(o.changes),o.snapshot,q(o.minSyncedTicket))}function fd(o){const e=new $i;for(const i of o.nodes){const a=nl(i.element);e.set(i.key,a,a.getPositionedAt())}const r=new at(q(o.createdAt),e);return r.setMovedAt(q(o.movedAt)),r.setRemovedAt(q(o.removedAt)),r}function dd(o){const e=new Ui;for(const i of o.nodes)e.insert(nl(i.element));const r=new mt(q(o.createdAt),e);return r.setMovedAt(q(o.movedAt)),r.setRemovedAt(q(o.removedAt)),r}function kv(o){const e=Se.of(Se.valueFromBytes(od(o.type),o.value),q(o.createdAt));return e.setMovedAt(q(o.movedAt)),e.setRemovedAt(q(o.removedAt)),e}function Av(o){const e=new qr;let r=e.getHead();for(const a of o.nodes){const f=e.insertAfter(r,gv(a));a.insPrevId&&f.setInsPrev(e.findNode(ad(a.insPrevId))),r=f}const i=new xt(e,q(o.createdAt));return i.setMovedAt(q(o.movedAt)),i.setRemovedAt(q(o.removedAt)),i}function Ev(o){const e=vt.create(lo(o.type),vt.valueFromBytes(lo(o.type),o.value),q(o.createdAt));return e.setMovedAt(q(o.movedAt)),e.setRemovedAt(q(o.removedAt)),e}function hd(o){const e=ld(o.nodes);return Pt.create(e,q(o.createdAt))}function nl(o){if(o.body.case==="jsonObject")return fd(o.body.value);if(o.body.case==="jsonArray")return dd(o.body.value);if(o.body.case==="primitive")return kv(o.body.value);if(o.body.case==="text")return Av(o.body.value);if(o.body.case==="counter")return Ev(o.body.value);if(o.body.case==="tree")return hd(o.body.value);throw new ue(se.ErrUnimplemented,"unimplemented element")}function Iv(o){if(!o)return{root:at.create(Ft),presences:new Map};const e=oy.fromBinary(o);return{root:nl(e.root),presences:pv(e.presences)}}function pd(o){if(!o)throw new Error("bytes is empty");const e=It.fromBinary(o);return fd(e.body.value)}function gd(o){return Za(o).toBinary()}function Cv(o){if(!o)throw new Error("bytes is empty");const e=It.fromBinary(o);return dd(e.body.value)}function Nv(o){return nd(o).toBinary()}function xv(o){if(!o)throw new Error("bytes is empty");const e=It.fromBinary(o);return hd(e.body.value)}function Pv(o){return rd(o).toBinary()}function md(o){return o?Array.from(o).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function rl(o){return md(o)}function yd(o){return new Uint8Array(o.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function il(o){return yd(o)}function Ov(o){const e=Zs.fromBinary(o);return sd(e)}function Dv(o){const e=Ba.fromBinary(o);return ud(e)}const _e={fromPresence:el,toChangePack:dv,fromChangePack:Tv,fromChanges:cd,objectToBytes:gd,bytesToObject:pd,bytesToSnapshot:Iv,bytesToHex:md,hexToBytes:yd,toHexString:rl,toUint8Array:il,toOperation:ed,toChangeID:Qf,PbChangeID:Zs,bytesToChangeID:Ov,bytesToOperation:Dv};function vd(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,o=>{const e=Math.random()*16|0;return(o==="x"?e:e&3|8).toString(16)})}class Rv{constructor(e,r,i,a){u(this,"reconnectStreamDelay"),u(this,"doc"),u(this,"docID"),u(this,"syncMode"),u(this,"remoteChangeEventReceived"),u(this,"watchStream"),u(this,"watchLoopTimerID"),u(this,"watchAbortController"),this.reconnectStreamDelay=e,this.doc=r,this.docID=i,this.syncMode=a,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===es.RealtimeSyncOff?!1:this.syncMode===es.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==es.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const r=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(r,this.reconnectStreamDelay)})}catch{}};await r()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const sl=()=>{};class _v{constructor(e){u(this,"finalized",!1),u(this,"observers",[]),u(this,"finalError");try{e(this)}catch(r){this.error(r)}}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let a;e||R.fatal("missing observer"),this.finalized&&R.fatal("observable is finalized due to previous error"),typeof e=="object"?a=e:a={next:e,error:r,complete:i},a.next===void 0&&(a.next=sl),a.error===void 0&&(a.error=sl),a.complete===void 0&&(a.complete=sl);const f=vd(),d=this.unsubscribeOne.bind(this,f);if(this.observers.push({subscriptionID:f,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(p){R.warn(p)}return d}unsubscribeOne(e){var r;this.observers=(r=this.observers)==null?void 0:r.filter(i=>i.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e].observer)}catch(i){R.error(i)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function bv(o){const e=new _v(o);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class Yr{constructor(e,r,i,a){u(this,"id"),u(this,"delimiter"),u(this,"message"),u(this,"root"),u(this,"operations"),u(this,"presenceChange"),u(this,"previousPresence"),u(this,"reversePresenceKeys"),this.id=e,this.delimiter=Wa,this.root=r,this.operations=[],this.previousPresence=$t(i),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(e,r,i,a){return new Yr(e,r,i,a)}push(e){this.operations.push(e)}registerElement(e,r){this.root.registerElement(e,r)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return vr.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,r){for(const i of Object.keys(e))r!=null&&r.addToHistory?this.reversePresenceKeys.add(i):this.reversePresenceKeys.delete(i)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const r of this.reversePresenceKeys)e[r]=this.previousPresence[r];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class Gi{constructor(e){u(this,"rootObject"),u(this,"elementPairMapByCreatedAt"),u(this,"gcElementSetByCreatedAt"),u(this,"gcPairMap"),this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(r=>{if(r.getRemovedAt()&&this.registerRemovedElement(r),r instanceof xt||r instanceof Pt)for(const i of r.getGCPairs())this.registerGCPair(i);return!1})}static create(){return new Gi(at.create(Ft))}findByCreatedAt(e){const r=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!r)return r.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let r=this.elementPairMapByCreatedAt.get(e.toIDString());if(!r)return[];const i=[];for(;r.parent;){const a=r.element.getCreatedAt(),f=r.parent.subPathOf(a);f===void 0&&R.fatal(`cant find the given element: ${a.toIDString()}`),i.unshift(f),r=this.elementPairMapByCreatedAt.get(r.parent.getCreatedAt().toIDString())}return i.unshift("$"),i}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,r){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:r,element:e}),e instanceof Fn&&e.getDescendants((i,a)=>(this.registerElement(i,a),!1))}deregisterElement(e){let r=0;const i=a=>{const f=a.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(f),this.gcElementSetByCreatedAt.delete(f),r++};return i(e),e instanceof Fn&&e.getDescendants(a=>(i(a),!1)),r}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const r of this.gcElementSetByCreatedAt){e.add(r);const i=this.elementPairMapByCreatedAt.get(r);i.element instanceof Fn&&i.element.getDescendants(a=>(e.add(a.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new Gi(this.rootObject.deepcopy())}garbageCollect(e){let r=0;for(const i of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(i);a.element.getRemovedAt()&&e.compare(a.element.getRemovedAt())>=0&&(a.parent.purge(a.element),r+=this.deregisterElement(a.element))}for(const[,i]of this.gcPairMap){const a=i.child.getRemovedAt();a!==void 0&&e.compare(a)>=0&&(i.parent.purge(i.child),this.gcPairMap.delete(i.child.toIDString()),r+=1)}return r}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function wd(o,e){const r=new Yi(o);return new Proxy(e,r.getHandlers())}class Yi{constructor(e){u(this,"context"),u(this,"handlers"),this.context=e,this.handlers={set:(r,i,a)=>(R.isEnabled(He.Trivial)&&R.trivial(`obj[${i}]=${JSON.stringify(a)}`),Yi.setInternal(e,r,i,a),!0),get:(r,i)=>(R.isEnabled(He.Trivial)&&R.trivial(`obj[${i}]`),i==="getID"?()=>r.getCreatedAt():i==="toJSON"||i==="toString"?()=>r.toJSON():i==="toJS"?()=>r.toJS():i==="toJSForTest"?()=>r.toJSForTest():wr(e,r.get(i))),ownKeys:r=>r.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(r,i)=>(R.isEnabled(He.Trivial)&&R.trivial(`obj[${i}]`),Yi.deleteInternal(e,r,i),!0)}}static setInternal(e,r,i,a){if(i.includes("."))throw new ue(se.ErrInvalidObjectKey,"key must not contain the '.'.");const f=e.issueTimeTicket(),d=co(e,a,f),p=r.set(i,d,f);e.registerElement(d,r),p&&e.registerRemovedElement(p),e.push(mr.create(i,d.deepcopy(),r.getCreatedAt(),f))}static buildObjectMembers(e,r){const i={};for(const[a,f]of Object.entries(r)){if(a.includes("."))throw new ue(se.ErrInvalidObjectKey,"key must not contain the '.'.");const d=e.issueTimeTicket(),p=co(e,f,d);i[a]=p}return i}static deleteInternal(e,r,i){const a=e.issueTimeTicket(),f=r.deleteByKey(i,a);!f||(e.push(Un.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f))}getHandlers(){return this.handlers}}function Lv(o,e){const r=new Ne(o,e);return new Proxy(e,r.getHandlers())}function Mv(o){return typeof o=="string"||o instanceof String?!isNaN(o):!1}function Bv(o){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(o)}class Ne{constructor(e,r){u(this,"context"),u(this,"handlers"),u(this,"array"),this.context=e,this.array=r,this.handlers={get:(i,a,f)=>a==="getID"?()=>i.getCreatedAt():a==="getElementByID"?d=>{const p=i.getByID(d);if(!(!p||p.isRemoved()))return Jn(e,p)}:a==="getElementByIndex"?d=>{const p=i.get(d);return Jn(e,p)}:a==="getLast"?()=>Jn(e,i.getLast()):a==="deleteByID"?d=>{const p=Ne.deleteInternalByID(e,i,d);return Jn(e,p)}:a==="insertAfter"?(d,p)=>{const g=Ne.insertAfterInternal(e,i,d,p);return Jn(e,g)}:a==="insertBefore"?(d,p)=>{const g=Ne.insertBeforeInternal(e,i,d,p);return Jn(e,g)}:a==="moveBefore"?(d,p)=>{Ne.moveBeforeInternal(e,i,d,p)}:a==="moveAfter"?(d,p)=>{Ne.moveAfterInternal(e,i,d,p)}:a==="moveFront"?d=>{Ne.moveFrontInternal(e,i,d)}:a==="moveLast"?d=>{Ne.moveLastInternal(e,i,d)}:Mv(a)?wr(e,i.get(Number(a))):a==="push"?d=>Ne.pushInternal(e,i,d):a==="splice"?(d,p,...g)=>Ne.splice(e,i,d,p,...g):a==="length"?i.length:typeof a=="symbol"&&a===Symbol.iterator?Ne.iteratorInternal.bind(this,e,i):a==="includes"?(d,p)=>Ne.includes(e,i,d,p):a==="indexOf"?(d,p)=>Ne.indexOf(e,i,d,p):a==="lastIndexOf"?(d,p)=>Ne.lastIndexOf(e,i,d,p):a==="toJSForTest"?()=>i.toJSForTest():a==="toTestString"?()=>Ne.toTestString(i):typeof a=="string"&&Bv(a)?(...d)=>{const p=Array.from(i).map(g=>wr(e,g));return Array.prototype[a].apply(p,d)}:Reflect.get(i,a,f),deleteProperty:(i,a)=>(R.isEnabled(He.Trivial)&&R.trivial(`array[${a}]`),Ne.deleteInternalByIndex(e,i,Number.parseInt(a)),!0)}}static*iteratorInternal(e,r){for(const i of r)yield Jn(e,i)}static buildArrayElements(e,r){const i=[];for(const a of r){const f=e.issueTimeTicket(),d=co(e,a,f);i.push(d)}return i}static pushInternal(e,r,i){return Ne.insertAfterInternal(e,r,r.getLastCreatedAt(),i),r.length}static moveBeforeInternal(e,r,i,a){const f=e.issueTimeTicket(),d=r.getPrevCreatedAt(i);r.moveAfter(d,a,f),e.push(zn.create(r.getCreatedAt(),d,a,f))}static moveAfterInternal(e,r,i,a){const f=e.issueTimeTicket();r.moveAfter(i,a,f),e.push(zn.create(r.getCreatedAt(),i,a,f))}static moveFrontInternal(e,r,i){const a=e.issueTimeTicket(),f=r.getHead();r.moveAfter(f.getCreatedAt(),i,a),e.push(zn.create(r.getCreatedAt(),f.getCreatedAt(),i,a))}static moveLastInternal(e,r,i){const a=e.issueTimeTicket(),f=r.getLastCreatedAt();r.moveAfter(f,i,a),e.push(zn.create(r.getCreatedAt(),f,i,a))}static insertAfterInternal(e,r,i,a){const f=e.issueTimeTicket(),d=co(e,a,f);return r.insertAfter(i,d),e.registerElement(d,r),e.push(zi.create(r.getCreatedAt(),i,d.deepcopy(),f)),d}static insertBeforeInternal(e,r,i,a){return Ne.insertAfterInternal(e,r,r.getPrevCreatedAt(i),a)}static deleteInternalByIndex(e,r,i){const a=e.issueTimeTicket(),f=r.deleteByIndex(i,a);if(!!f)return e.push(Un.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f),f}static deleteInternalByID(e,r,i){const a=e.issueTimeTicket(),f=r.delete(i,a);return e.push(Un.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f),f}static splice(e,r,i,a,...f){const d=r.length,p=i>=0?Math.min(i,d):Math.max(d+i,0),g=a===void 0?d:a<0?p:Math.min(p+a,d),v=[];for(let S=p;S<g;S++){const D=Ne.deleteInternalByIndex(e,r,p);if(D){const P=D.deepcopy();P.setRemovedAt(),v.push(wr(e,P))}}if(f){let S=p===0?r.getHead().getID():r.get(p-1).getID();for(const D of f)S=Ne.insertAfterInternal(e,r,S,D).getID()}return v}static includes(e,r,i,a){var f;const d=r.length,p=a===void 0?0:a<0?Math.max(a+d,0):a;if(p>=d)return!1;if(Se.isSupport(i))return Array.from(r).map(v=>wr(e,v)).includes(i,p);for(let g=p;g<d;g++)if(((f=r.get(g))==null?void 0:f.getID())===i.getID())return!0;return!1}static indexOf(e,r,i,a){var f;const d=r.length,p=a===void 0?0:a<0?Math.max(a+d,0):a;if(p>=d)return-1;if(Se.isSupport(i))return Array.from(r).map(v=>wr(e,v)).indexOf(i,p);for(let g=p;g<d;g++)if(((f=r.get(g))==null?void 0:f.getID())===i.getID())return g;return-1}static lastIndexOf(e,r,i,a){var f;const d=r.length,p=a===void 0||a>=d?d-1:a<0?a+d:a;if(p<0)return-1;if(Se.isSupport(i))return Array.from(r).map(v=>wr(e,v)).lastIndexOf(i,p);for(let g=p;g>0;g--)if(((f=r.get(g))==null?void 0:f.getID())===i.getID())return g;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Qi{constructor(e,r){u(this,"context"),u(this,"text"),this.context=e,this.text=r}initialize(e,r){this.context=e,this.text=r}getID(){return this.text.getID()}edit(e,r,i,a){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}if(e>r){R.fatal("from should be less than or equal to to");return}const f=this.text.indexRangeToPosRange(e,r);R.isEnabled(He.Debug)&&R.debug(`EDIT: f:${e}->${f[0].toTestString()}, t:${r}->${f[1].toTestString()} c:${i}`);const d=a?Jr(a):void 0,p=this.context.issueTimeTicket(),[g,,v,S]=this.text.edit(f,i,p,d);for(const D of v)this.context.registerGCPair(D);return this.context.push(new Vi(this.text.getCreatedAt(),f[0],f[1],g,i,d?new Map(Object.entries(d)):new Map,p)),this.text.findIndexesFromRange(S)}delete(e,r){return this.edit(e,r,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,r,i){if(!this.context||!this.text)return R.fatal("it is not initialized yet"),!1;if(e>r)return R.fatal("from should be less than or equal to to"),!1;const a=this.text.indexRangeToPosRange(e,r);R.isEnabled(He.Debug)&&R.debug(`STYL: f:${e}->${a[0].toTestString()}, t:${r}->${a[1].toTestString()} a:${JSON.stringify(i)}`);const f=Jr(i),d=this.context.issueTimeTicket(),[p,g]=this.text.setStyle(a,f,d);for(const v of g)this.context.registerGCPair(v);return this.context.push(new Ji(this.text.getCreatedAt(),a[0],a[1],p,new Map(Object.entries(f)),d)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}const r=this.text.indexRangeToPosRange(e[0],e[1]);return[r[0].toStruct(),r[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}const r=this.text.findIndexesFromRange([jt.fromStruct(e[0]),jt.fromStruct(e[1])]);return[r[0],r[1]]}toTestString(){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}getTreeByIndex(){return this.text.getTreeByIndex()}getTreeByID(){return this.text.getTreeByID()}toString(){return!this.context||!this.text?(R.fatal("it is not initialized yet"),""):this.text.toString()}toJSON(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,r){if(!this.context||!this.text){R.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,r)}}class Xi{constructor(e,r){u(this,"valueType"),u(this,"value"),u(this,"context"),u(this,"counter"),this.valueType=e,this.value=r}initialize(e,r){this.valueType=r.getValueType(),this.context=e,this.counter=r,this.value=r.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){R.fatal("it is not initialized yet");return}const r=this.context.issueTimeTicket(),i=Se.of(e,r);if(!i.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof i.getValue()}`);return this.counter.increase(i),this.context.push(Hr.create(this.counter.getCreatedAt(),i,r)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function ol(o,e,r){const{type:i}=o,a=r.issueTimeTicket();if(i===En){Sd(o);const{value:f}=o,d=yt.create(ze.of(a,0),i,f);e.append(d)}else{const{children:f=[]}=o;let{attributes:d}=o,p;if(typeof d=="object"&&!Vf(d)){d=Jr(d),p=new An;for(const[v,S]of Object.entries(d))p.set(v,S,a)}const g=yt.create(ze.of(a,0),i,void 0,p);e.append(g);for(const v of f)ol(v,g,r)}}function $v(o,e){const{type:r}=e,i=o.issueTimeTicket();let a;if(e.type===En){const{value:f}=e;a=yt.create(ze.of(i,0),r,f)}else if(e){const{children:f=[]}=e;let{attributes:d}=e,p;if(typeof d=="object"&&!Vf(d)){d=Jr(d),p=new An;for(const[g,v]of Object.entries(d))p.set(g,v,i)}a=yt.create(ze.of(o.issueTimeTicket(),0),r,void 0,p);for(const g of f)ol(g,a,o)}return a}function Sd(o){if(!o.value.length)throw new Error("text node cannot have empty value");return!0}function Td(o){if(!o.length)return!0;if(o[0].type===En)for(const r of o){const{type:i}=r;if(i!==En)throw new Error("element node and text node cannot be passed together");Sd(r)}else for(const r of o){const{type:i}=r;if(i===En)throw new Error("element node and text node cannot be passed together")}return!0}class Zi{constructor(e){u(this,"initialRoot"),u(this,"context"),u(this,"tree"),this.initialRoot=e}initialize(e,r){this.context=e,this.tree=r}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return yt.create(ze.of(e.issueTimeTicket(),0),Fy);const r=yt.create(ze.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const i of this.initialRoot.children)ol(i,r,e);return r}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[i,a]=this.tree.pathToPosRange(e),f=this.context.issueTimeTicket(),d=r?Jr(r):void 0,[p]=this.tree.style([i,a],d,f);this.context.push(In.create(this.tree.getCreatedAt(),i,a,p,d?new Map(Object.entries(d)):new Map,f))}style(e,r,i){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const a=this.tree.findPos(e),f=this.tree.findPos(r),d=this.context.issueTimeTicket(),p=i?Jr(i):void 0,[g,v]=this.tree.style([a,f],p,d);for(const S of v)this.context.registerGCPair(S);this.context.push(In.create(this.tree.getCreatedAt(),a,f,g,p?new Map(Object.entries(p)):new Map,d))}removeStyle(e,r,i){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const a=this.tree.findPos(e),f=this.tree.findPos(r),d=this.context.issueTimeTicket(),[p,g]=this.tree.removeStyle([a,f],i,d);for(const v of g)this.context.registerGCPair(v);this.context.push(In.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,f,p,i,d))}editInternal(e,r,i,a=0){var f;if(i.length!==0&&i[0]&&(Td(i),i[0].type!==En))for(const S of i){const{children:D=[]}=S;Td(D)}const d=this.context.getLastTimeTicket();let p=new Array;if(((f=i[0])==null?void 0:f.type)===En){let S="";for(const D of i){const{value:P}=D;S+=P}p.push(yt.create(ze.of(this.context.issueTimeTicket(),0),En,S))}else p=i.map(S=>S&&$v(this.context,S)).filter(S=>S);const[,g,v]=this.tree.edit([e,r],p.length?p.map(S=>S==null?void 0:S.deepcopy()):void 0,a,d,()=>this.context.issueTimeTicket());for(const S of g)this.context.registerGCPair(S);return this.context.push(Wi.create(this.tree.getCreatedAt(),e,r,p.length?p:void 0,a,v,d)),!0}editByPath(e,r,i,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==r.length)throw new Error("path length should be equal");if(!e.length||!r.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),d=this.tree.pathToPos(r);return this.editInternal(f,d,i?[i]:[],a)}editBulkByPath(e,r,i,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==r.length)throw new Error("path length should be equal");if(!e.length||!r.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),d=this.tree.pathToPos(r);return this.editInternal(f,d,i,a)}edit(e,r,i,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),d=this.tree.findPos(r);return this.editInternal(f,d,i?[i]:[],a)}editBulk(e,r,i,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),d=this.tree.findPos(r);return this.editInternal(f,d,i,a)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}const r=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],i=this.tree.indexRangeToPosRange(r);return[i[0].toStruct(),i[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}const r=[zt.fromStruct(e[0]),zt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(r)}posRangeToPathRange(e){if(!this.context||!this.tree){R.fatal("it is not initialized yet");return}const r=[zt.fromStruct(e[0]),zt.fromStruct(e[1])];return this.tree.posRangeToPathRange(r)}}function kd(o,e){return wd(o,e)}function Jn(o,e){if(e){if(e instanceof Se)return e;if(e instanceof at)return wd(o,e);if(e instanceof mt)return Lv(o,e);if(e instanceof xt)return new Qi(o,e);if(e instanceof vt){const r=new Xi(cn.IntegerCnt,0);return r.initialize(o,e),r}else if(e instanceof Pt){const r=new Zi;return r.initialize(o,e),r}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function wr(o,e){const r=Jn(o,e);return r instanceof Se?r.getValue():r}function co(o,e,r){let i;if(Se.isSupport(e))i=Se.of(e,r);else if(Array.isArray(e))i=mt.create(r,Ne.buildArrayElements(o,e));else if(typeof e=="object")e instanceof Qi?(i=xt.create(qr.create(),r),e.initialize(o,i)):e instanceof Xi?(i=vt.create(e.getValueType(),e.getValue(),r),e.initialize(o,i)):e instanceof Zi?(i=Pt.create(e.buildRoot(o),r),e.initialize(o,i)):i=at.create(r,Yi.buildObjectMembers(o,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return i}const Ad=50;class Fv{constructor(){u(this,"undoStack",[]),u(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=Ad&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=Ad&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const Ed="yorkie-devtools-panel",Id="yorkie-devtools-sdk";let Qr="disconnected";const Cd=new Map,fo=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=fo);function ho(o,e){!((e==null?void 0:e.force)||Qr!=="disconnected")||window.postMessage({source:Id,...o},"*")}function Uv(o){if(!o.isEnableDevtools()||typeof window>"u"||Cd.has(o.getKey()))return;fo.set(o.getKey(),[]);const e=o.subscribe("all",r=>{r.some(i=>i.type!==tt.StatusChanged&&i.type!==tt.Snapshot&&i.type!==tt.LocalChange&&i.type!==tt.RemoteChange&&i.type!==tt.Initialized&&i.type!==tt.Watched&&i.type!==tt.Unwatched&&i.type!==tt.PresenceChanged)||(fo.get(o.getKey()).push(r),Qr==="synced"&&ho({msg:"doc::sync::partial",docKey:o.getKey(),event:r}))});Cd.set(o.getKey(),[e]),ho({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",r=>{var i;if(((i=r.data)==null?void 0:i.source)!==Ed)return;switch(r.data.msg){case"devtools::connect":if(Qr!=="disconnected")break;Qr="connected",ho({msg:"doc::available",docKey:o.getKey()}),R.info(`[YD] Devtools connected. Doc: ${o.getKey()}`);break;case"devtools::disconnect":Qr="disconnected",R.info(`[YD] Devtools disconnected. Doc: ${o.getKey()}`);break;case"devtools::subscribe":Qr="synced",ho({msg:"doc::sync::full",docKey:o.getKey(),events:fo.get(o.getKey())}),R.info(`[YD] Devtools subscribed. Doc: ${o.getKey()}`);break}})}var Cn=(o=>(o.Detached="detached",o.Attached="attached",o.Removed="removed",o))(Cn||{}),tt=(o=>(o.StatusChanged="status-changed",o.ConnectionChanged="connection-changed",o.SyncStatusChanged="sync-status-changed",o.Snapshot="snapshot",o.LocalChange="local-change",o.RemoteChange="remote-change",o.Initialized="initialized",o.Watched="watched",o.Unwatched="unwatched",o.PresenceChanged="presence-changed",o))(tt||{}),po=(o=>(o.Connected="connected",o.Disconnected="disconnected",o))(po||{}),go=(o=>(o.Synced="synced",o.SyncFailed="sync-failed",o))(go||{});class al{constructor(e,r){u(this,"key"),u(this,"status"),u(this,"opts"),u(this,"changeID"),u(this,"checkpoint"),u(this,"localChanges"),u(this,"root"),u(this,"clone"),u(this,"eventStream"),u(this,"eventStreamObserver"),u(this,"onlineClients"),u(this,"presences"),u(this,"history"),u(this,"internalHistory"),u(this,"isUpdating"),this.opts=r||{},this.key=e,this.status="detached",this.root=Gi.create(),this.changeID=qy,this.checkpoint=Hy,this.localChanges=[],this.eventStream=bv(i=>{this.eventStreamObserver=i}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new Fv,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},Uv(this)}update(e,r){if(this.getStatus()==="removed")throw new ue(se.ErrDocumentRemoved,`${this.key} is removed`);this.ensureClone();const i=this.changeID.getActorID(),a=Yr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(i)||{},r);try{const f=kd(a,this.clone.root.getObject());this.presences.has(i)||this.clone.presences.set(i,{}),this.isUpdating=!0,e(f,new Ka(a,this.clone.presences.get(i)))}catch(f){throw this.clone=void 0,R.error(f),f}finally{this.isUpdating=!1}if(a.hasChange()){R.isEnabled(He.Trivial)&&R.trivial(`trying to update a local change: ${this.toJSON()}`);const f=a.getChange(),{opInfos:d,reverseOps:p}=f.execute(this.root,this.presences,he.Local),g=a.getReversePresence();g&&p.push({type:"presence",value:g}),this.localChanges.push(f),p.length>0&&this.internalHistory.pushUndo(p),d.length>0&&this.internalHistory.clearRedo(),this.changeID=f.getID();const v=[];d.length>0&&v.push({type:"local-change",source:he.Local,value:{message:f.getMessage()||"",operations:d,actor:i,clientSeq:f.getID().getClientSeq(),serverSeq:f.getID().getServerSeq()},rawChange:this.isEnableDevtools()?f.toStruct():void 0}),f.hasPresenceChange()&&v.push({type:"presence-changed",source:he.Local,value:{clientID:i,presence:this.getPresence(i)}}),this.publish(v),R.isEnabled(He.Trivial)&&R.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,r,i,a){if(typeof e=="string"){if(typeof r!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const p=r;return this.eventStream.subscribe(g=>{for(const v of g)v.type!=="initialized"&&v.type!=="watched"&&v.type!=="unwatched"&&v.type!=="presence-changed"||p(v)},i,a)}if(e==="my-presence"){const p=r;return this.eventStream.subscribe(g=>{for(const v of g)v.type!=="initialized"&&v.type!=="presence-changed"||v.type==="presence-changed"&&v.value.clientID!==this.changeID.getActorID()||p(v)},i,a)}if(e==="others"){const p=r;return this.eventStream.subscribe(g=>{for(const v of g)v.type!=="watched"&&v.type!=="unwatched"&&v.type!=="presence-changed"||v.value.clientID!==this.changeID.getActorID()&&p(v)},i,a)}if(e==="connection"){const p=r;return this.eventStream.subscribe(g=>{for(const v of g)v.type==="connection-changed"&&p(v)},i,a)}if(e==="status"){const p=r;return this.eventStream.subscribe(g=>{for(const v of g)v.type==="status-changed"&&p(v)},i,a)}if(e==="sync"){const p=r;return this.eventStream.subscribe(g=>{for(const v of g)v.type==="sync-status-changed"&&p(v)},i,a)}if(e==="all"){const p=r;return this.eventStream.subscribe(p,i,a)}const f=e,d=r;return this.eventStream.subscribe(p=>{for(const g of p){if(g.type!=="local-change"&&g.type!=="remote-change")continue;const v=[];for(const S of g.value.operations)this.isSameElementOrChildOf(S.path,f)&&v.push(S);v.length&&d({...g,value:{...g.value,operations:v}})}},i,a)}if(typeof e=="function"){const f=e,d=r,p=i;return this.eventStream.subscribe(g=>{for(const v of g)v.type!=="snapshot"&&v.type!=="local-change"&&v.type!=="remote-change"||f(v)},d,p)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,r){if(r===e)return!0;const i=e.split(".");return r.split(".").every((f,d)=>f===i[d])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),he.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();e.hasSnapshot()&&this.applyChanges(this.localChanges,he.Remote),this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),R.isEnabled(He.Trivial)&&R.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:$t(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),r=this.checkpoint.increaseClientSeq(e.length);return so.create(this.key,r,!1,e)}setActor(e){for(const r of this.localChanges)r.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=Yr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return kd(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,r){const{root:i,presences:a}=_e.bytesToSnapshot(r);this.root=new Gi(i),this.presences=a,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:he.Remote,value:{snapshot:this.isEnableDevtools()?_e.bytesToHex(r):void 0,serverSeq:e.toString()}}])}applyChanges(e,r){R.isEnabled(He.Debug)&&R.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),R.isEnabled(He.Trivial)&&R.trivial(e.map(i=>`${i.getID().toTestString()}	${i.toTestString()}`).join(`
`));for(const i of e)this.applyChange(i,r);R.isEnabled(He.Debug)&&R.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,r){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,r);const i=[],a=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(a)){const d=e.getPresenceChange();switch(d.type){case $n.Put:i.push(this.presences.has(a)?{type:"presence-changed",source:r,value:{clientID:a,presence:d.presence}}:{type:"watched",source:he.Remote,value:{clientID:a,presence:d.presence}});break;case $n.Clear:i.push({type:"unwatched",source:he.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:f}=e.execute(this.root,this.presences,r);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),f.length>0){const d=this.isEnableDevtools()?e.toStruct():void 0;i.push(r===he.Remote?{type:"remote-change",source:r,value:{actor:a,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:f},rawChange:d}:{type:"local-change",source:r,value:{actor:a,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:f},rawChange:d})}i.length>0&&this.publish(i)}applyWatchStream(e){if(e.body.case==="initialization"){const r=e.body.value.clientIds,i=new Set;for(const a of r)a!==this.changeID.getActorID()&&i.add(a);this.setOnlineClients(i),this.publish([{type:"initialized",source:he.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:r,publisher:i}=e.body.value,a=[];if(r===Xs.DOCUMENT_WATCHED)this.addOnlineClient(i),this.hasPresence(i)&&a.push({type:"watched",source:he.Remote,value:{clientID:i,presence:this.getPresence(i)}});else if(r===Xs.DOCUMENT_UNWATCHED){const f=this.getPresence(i);this.removeOnlineClient(i),f&&a.push({type:"unwatched",source:he.Remote,value:{clientID:i,presence:f}})}a.length>0&&this.publish(a)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(no),this.publish([{source:e==="removed"?he.Remote:he.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:r,serverSeq:i}=e.value;if(!r)return;this.applySnapshot(Q.fromString(i),_e.hexToBytes(r));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const r=vr.fromStruct(e.rawChange);this.applyChange(r,e.source)}if(e.type==="initialized"){const r=new Set;for(const{clientID:i,presence:a}of e.value)r.add(i),this.presences.set(i,a);this.setOnlineClients(r);return}if(e.type==="watched"){const{clientID:r,presence:i}=e.value;this.addOnlineClient(r),this.presences.set(r,i);return}if(e.type==="unwatched"){const{clientID:r}=e.value;this.removeOnlineClient(r),this.presences.delete(r)}if(e.type==="presence-changed"){const{clientID:r,presence:i}=e.value;this.presences.set(r,i)}}applyTransactionEvent(e){for(const r of e)this.applyDocEvent(r)}getValueByPath(e){if(!e.startsWith("$"))throw new ue(se.ErrInvalidArgument,'path must start with "$"');const r=e.split(".");r.shift();let i=this.getRoot();for(const a of r)if(i=i[a],i===void 0)return;return i}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?$t(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const r=this.presences.get(e);return r?$t(r):void 0}getPresenceForTest(e){const r=this.presences.get(e);return r?$t(r):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:$t(this.getMyPresence())});for(const r of this.onlineClients)this.presences.has(r)&&e.push({clientID:r,presence:$t(this.presences.get(r))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(r=>r.clientID!==e).sort((r,i)=>r.clientID>i.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const r=Yr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const v of e){if(!(v instanceof Ut)){new Ka(r,$t(this.clone.presences.get(this.changeID.getActorID()))).set(v.value,{addToHistory:!0});continue}const S=r.issueTimeTicket();v.setExecutedAt(S),r.push(v)}const i=r.getChange();i.execute(this.clone.root,this.clone.presences,he.UndoRedo);const{opInfos:a,reverseOps:f}=i.execute(this.root,this.presences,he.UndoRedo),d=r.getReversePresence();if(d&&f.push({type:"presence",value:d}),f.length>0&&this.internalHistory.pushRedo(f),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=i.getID();const p=this.changeID.getActorID(),g=[];a.length>0&&g.push({type:"local-change",source:he.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:p,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&g.push({type:"presence-changed",source:he.UndoRedo,value:{clientID:p,presence:this.getPresence(p)}}),this.publish(g)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const r=Yr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const v of e){if(!(v instanceof Ut)){new Ka(r,$t(this.clone.presences.get(this.changeID.getActorID()))).set(v.value,{addToHistory:!0});continue}const S=r.issueTimeTicket();v.setExecutedAt(S),r.push(v)}const i=r.getChange();i.execute(this.clone.root,this.clone.presences,he.UndoRedo);const{opInfos:a,reverseOps:f}=i.execute(this.root,this.presences,he.UndoRedo),d=r.getReversePresence();if(d&&f.push({type:"presence",value:d}),f.length>0&&this.internalHistory.pushUndo(f),!i.hasPresenceChange()&&a.length===0)return;this.localChanges.push(i),this.changeID=i.getID();const p=this.changeID.getActorID(),g=[];a.length>0&&g.push({type:"local-change",source:he.UndoRedo,value:{message:i.getMessage()||"",operations:a,actor:p,clientSeq:i.getID().getClientSeq(),serverSeq:i.getID().getServerSeq()},rawChange:this.isEnableDevtools()?i.toStruct():void 0}),i.hasPresenceChange()&&g.push({type:"presence-changed",source:he.UndoRedo,value:{clientID:p,presence:this.getPresence(p)}}),this.publish(g)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function zv(o,e){return r=>async i=>(o&&i.header.set("x-api-key",o),e&&i.header.set("authorization",e),await r(i))}const Nd={name:"yorkie-js-sdk",version:"0.4.27",description:"Yorkie JS SDK",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts",files:["dist"],scripts:{build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:examples":"npm run build --workspace examples","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"npm run build"},engines:{node:">=18.0.0",npm:">=7.1.0"},repository:{type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},author:{name:"hackerwins",email:"susukang98@gmail.com"},license:"Apache-2.0",bugs:{url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},homepage:"https://github.com/yorkie-team/yorkie-js-sdk#readme",devDependencies:{"@buf/googleapis_googleapis.connectrpc_es":"^1.4.0-20240524201209-f0e53af8f2fc.3","@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.4.0","@types/google-protobuf":"^3.15.5","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^4.7.4","typescript-transform-paths":"^3.3.1",vite:"^4.4.9","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5"},dependencies:{"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.4.0","@connectrpc/connect-web":"^1.4.0",long:"^5.2.0"},husky:{hooks:{"pre-commit":"npm run lint"}},workspaces:["examples/*"]};function jv(){return o=>async e=>(e.header.set("x-yorkie-user-agent",Nd.name+"/"+Nd.version),await o(e))}var es=(o=>(o.Manual="manual",o.Realtime="realtime",o.RealtimePushOnly="realtime-pushonly",o.RealtimeSyncOff="realtime-syncoff",o))(es||{}),xd=(o=>(o.Deactivated="deactivated",o.Activated="activated",o))(xd||{}),Pd=(o=>(o.SyncLoop="SyncLoop",o.WatchLoop="WatchLoop",o))(Pd||{});const mo={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class ll{constructor(e,r){u(this,"id"),u(this,"key"),u(this,"status"),u(this,"attachmentMap"),u(this,"apiKey"),u(this,"conditions"),u(this,"syncLoopDuration"),u(this,"reconnectStreamDelay"),u(this,"retrySyncLoopDelay"),u(this,"rpcClient"),u(this,"taskQueue"),u(this,"processing",!1),r=r||mo,this.key=r.key?r.key:vd(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=r.apiKey||"",this.conditions={SyncLoop:!1,WatchLoop:!1},this.syncLoopDuration=r.syncLoopDuration||mo.syncLoopDuration,this.reconnectStreamDelay=r.reconnectStreamDelay||mo.reconnectStreamDelay,this.retrySyncLoopDelay=r.retrySyncLoopDelay||mo.retrySyncLoopDelay,this.rpcClient=Mm(xy,sy({baseUrl:e,interceptors:[zv(r.apiKey,r.token),jv()]})),this.taskQueue=[]}activate(){return this.isActive()?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),R.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw R.error(`[AC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}deactivate(){return this.status==="deactivated"?Promise.resolve():this.enqueueTask(async()=>this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{this.deactivateInternal(),R.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw R.error(`[DC] c:"${this.getKey()}" err :`,e),this.handleConnectError(e),e}))}attach(e,r={}){var a;if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);if(e.getStatus()!==Cn.Detached)throw new ue(se.ErrDocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((f,d)=>d.set(r.initialPresence||{}));const i=(a=r.syncMode)!=null?a:"realtime";return this.enqueueTask(async()=>this.rpcClient.attachDocument({clientId:this.id,changePack:_e.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async f=>{const d=_e.fromChangePack(f.changePack);return e.applyChangePack(d),e.getStatus()===Cn.Removed||(e.applyStatus(Cn.Attached),this.attachmentMap.set(e.getKey(),new Rv(this.reconnectStreamDelay,e,f.documentId,i)),i!=="manual"&&await this.runWatchLoop(e.getKey()),R.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(f=>{throw R.error(`[AD] c:"${this.getKey()}" err :`,f),this.handleConnectError(f),f}))}detach(e,r={}){if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(e.getKey());if(!i)throw new ue(se.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return e.update((a,f)=>f.clear()),this.enqueueTask(async()=>{var a;return this.rpcClient.detachDocument({clientId:this.id,documentId:i.docID,changePack:_e.toChangePack(e.createChangePack()),removeIfNotAttached:(a=r.removeIfNotAttached)!=null?a:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(f=>{const d=_e.fromChangePack(f.changePack);return e.applyChangePack(d),e.getStatus()!==Cn.Removed&&e.applyStatus(Cn.Detached),this.detachInternal(e.getKey()),R.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(f=>{throw R.error(`[DD] c:"${this.getKey()}" err :`,f),this.handleConnectError(f),f})})}async changeSyncMode(e,r){if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);const i=this.attachmentMap.get(e.getKey());if(!i)throw new ue(se.ErrDocumentNotAttached,`${e.getKey()} is not attached`);const a=i.syncMode;return a===r?e:(i.changeSyncMode(r),r==="manual"?(i.cancelWatchStream(),e):(r==="realtime"&&(i.remoteChangeEventReceived=!0),a==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);if(e){const r=this.attachmentMap.get(e.getKey());if(!r)throw new ue(se.ErrDocumentNotAttached,`${e.getKey()} is not attached`);return this.enqueueTask(async()=>this.syncInternal(r,"realtime").catch(i=>{throw R.error(`[SY] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i}))}return this.enqueueTask(async()=>{const r=[];for(const[,i]of this.attachmentMap)r.push(this.syncInternal(i,i.syncMode));return Promise.all(r).catch(i=>{throw R.error(`[SY] c:"${this.getKey()}" err :`,i),this.handleConnectError(i),i})})}remove(e){if(!this.isActive())throw new ue(se.ErrClientNotActivated,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new ue(se.ErrDocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const i=_e.toChangePack(e.createChangePack());return i.isRemoved=!0,this.enqueueTask(async()=>this.rpcClient.removeDocument({clientId:this.id,documentId:r.docID,changePack:i},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(a=>{const f=_e.fromChangePack(a.changePack);e.applyChangePack(f),this.detachInternal(e.getKey()),R.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(a=>{throw R.error(`[RD] c:"${this.getKey()}" err :`,a),this.handleConnectError(a),a}))}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}getCondition(e){return this.conditions[e]}runSyncLoop(){const e=()=>{if(!this.isActive()){R.debug(`[SL] c:"${this.getKey()}" exit sync loop`),this.conditions.SyncLoop=!1;return}const r=[];for(const[,i]of this.attachmentMap)i.needRealtimeSync()&&(i.remoteChangeEventReceived=!1,r.push(this.syncInternal(i,i.syncMode)));Promise.all(r).then(()=>setTimeout(e,this.syncLoopDuration)).catch(i=>{R.error(`[SL] c:"${this.getKey()}" sync failed:`,i),this.handleConnectError(i)?setTimeout(e,this.retrySyncLoopDelay):this.conditions.SyncLoop=!1})};R.debug(`[SL] c:"${this.getKey()}" run sync loop`),this.conditions.SyncLoop=!0,e()}async runWatchLoop(e){const r=this.attachmentMap.get(e);if(!r)throw new ue(se.ErrDocumentNotAttached,`${e} is not attached`);return this.conditions.WatchLoop=!0,r.runWatchLoop(i=>{if(!this.isActive())return this.conditions.WatchLoop=!1,Promise.reject(new ue(se.ErrClientNotActivated,`${this.key} is not active`));const a=new AbortController,f=this.rpcClient.watchDocument({clientId:this.id,documentId:r.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:a.signal});return r.doc.publish([{type:tt.ConnectionChanged,value:po.Connected}]),R.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((d,p)=>{(async()=>{try{for await(const v of f)this.handleWatchDocumentsResponse(r,v),v.body.case==="initialization"&&d([f,a])}catch(v){r.doc.resetOnlineClients(),r.doc.publish([{type:tt.Initialized,source:he.Local,value:r.doc.getPresences()}]),r.doc.publish([{type:tt.ConnectionChanged,value:po.Disconnected}]),R.debug(`[WD] c:"${this.getKey()}" unwatches`),this.handleConnectError(v)?i():this.conditions.WatchLoop=!1,p(v)}})()})})}handleWatchDocumentsResponse(e,r){if(r.body.case==="event"&&r.body.value.type===Xs.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(r)}deactivateInternal(){this.status="deactivated";for(const[e,r]of this.attachmentMap)this.detachInternal(e),r.doc.applyStatus(Cn.Detached)}detachInternal(e){const r=this.attachmentMap.get(e);!r||(r.cancelWatchStream(),this.attachmentMap.delete(e))}syncInternal(e,r){const{doc:i,docID:a}=e,f=i.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:_e.toChangePack(f),pushOnly:r==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${i.getKey()}`}}).then(d=>{const p=_e.fromChangePack(d.changePack);if(p.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return i;i.applyChangePack(p),e.doc.publish([{type:tt.SyncStatusChanged,value:go.Synced}]),i.getStatus()===Cn.Removed&&this.detachInternal(i.getKey());const g=i.getKey(),v=p.getChangeSize();return R.info(`[PP] c:"${this.getKey()}" sync d:"${g}", push:${f.getChangeSize()} pull:${v} cp:${p.getCheckpoint().toTestString()}`),i}).catch(d=>{throw i.publish([{type:tt.SyncStatusChanged,value:go.SyncFailed}]),R.error(`[PP] c:"${this.getKey()}" err :`,d),d})}handleConnectError(e){return e instanceof y?e.code===h.Canceled||e.code===h.Unknown||e.code===h.ResourceExhausted||e.code===h.Unavailable?!0:((id(e)===se.ErrClientNotActivated||id(e)===se.ErrClientNotFound)&&this.deactivateInternal(),!1):!1}enqueueTask(e){return new Promise((r,i)=>{this.taskQueue.push(()=>e().then(r).catch(i)),this.processing||this.processNext()})}async processNext(){if(this.taskQueue.length===0){this.processing=!1;return}try{this.processing=!0,await this.taskQueue.shift()()}catch{R.error(`[TQ] c:"${this.getKey()}" process failed, id:"${this.id}"`)}this.processNext()}}const Vv=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Jv={Client:ll,Document:al,Primitive:Se,Text:Qi,Counter:Xi,Tree:Zi,LogLevel:He,setLogLevel:qa,IntType:cn.IntegerCnt,LongType:cn.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:ll,Document:al,Primitive:Se,Text:Qi,Counter:Xi,Tree:Zi,LogLevel:He,setLogLevel:qa,IntType:cn.IntegerCnt,LongType:cn.LongCnt}),s.Change=vr,s.Client=ll,s.ClientCondition=Pd,s.ClientStatus=xd,s.Counter=Xi,s.Devtools=Vv,s.DocEventType=tt,s.Document=al,s.DocumentStatus=Cn,s.DocumentSyncStatus=go,s.EventSourceDevPanel=Ed,s.EventSourceSDK=Id,s.LogLevel=He,s.OpSource=he,s.Primitive=Se,s.StreamConnectionStatus=po,s.SyncMode=es,s.Text=Qi,s.TimeTicket=et,s.Tree=Zi,s.converter=_e,s.default=Jv,s.setLogLevel=qa,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(xu,xu.exports);const Fh=Hv(xu.exports);var Gg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var n={}.hasOwnProperty;function s(){for(var l=[],c=0;c<arguments.length;c++){var u=arguments[c];if(!!u){var h=typeof u;if(h==="string"||h==="number")l.push(u);else if(Array.isArray(u)){if(u.length){var m=s.apply(null,u);m&&l.push(m)}}else if(h==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){l.push(u.toString());continue}for(var y in u)n.call(u,y)&&u[y]&&l.push(y)}}}return l.join(" ")}t.exports?(s.default=s,t.exports=s):window.classNames=s})()})(Gg);const Ac=Gg.exports;var Ec={exports:{}},Da={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw=Dn.exports,hw=Symbol.for("react.element"),pw=Symbol.for("react.fragment"),gw=Object.prototype.hasOwnProperty,mw=dw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yw={key:!0,ref:!0,__self:!0,__source:!0};function Yg(t,n,s){var l,c={},u=null,h=null;s!==void 0&&(u=""+s),n.key!==void 0&&(u=""+n.key),n.ref!==void 0&&(h=n.ref);for(l in n)gw.call(n,l)&&!yw.hasOwnProperty(l)&&(c[l]=n[l]);if(t&&t.defaultProps)for(l in n=t.defaultProps,n)c[l]===void 0&&(c[l]=n[l]);return{$$typeof:hw,type:t,key:u,ref:h,props:c,_owner:mw.current}}Da.Fragment=pw;Da.jsx=Yg;Da.jsxs=Yg;(function(t){t.exports=Da})(Ec);const Le=Ec.exports.jsx,Ei=Ec.exports.jsxs;function Qg(t){const[n,s]=Dn.exports.useState(t.text||"");return Le("input",{className:Ac({edit:t.editing,"new-todo":t.newTodo}),type:"text",placeholder:t.placeholder,value:n,onBlur:l=>{t.newTodo||t.onSave(l.target.value)},onChange:l=>{s(l.target.value)},onKeyDown:l=>{const c=l.target;l.which===13&&(t.onSave(c.value.trim()),t.newTodo&&s(""))}})}function vw(t){return Ei("header",{className:"header",children:[Le("h1",{children:"todos"}),Le(Qg,{newTodo:!0,onSave:n=>{n.length!==0&&t.addTodo(n)},placeholder:"What needs to be done?"})]})}function ww(t){const[n,s]=Dn.exports.useState(!1),{todo:l,completeTodo:c,editTodo:u,deleteTodo:h}=t;return Le("li",{className:Ac({completed:l.completed,editing:n}),children:n?Le(Qg,{text:l.text,editing:n,onSave:m=>{m.length===0?h(l.id):u(l.id,m),s(!1)}}):Ei("div",{className:"view",children:[Le("input",{id:`item-input-${l.id}`,className:"toggle",type:"checkbox",checked:l.completed,onChange:()=>c(l.id)}),Le("label",{htmlFor:`item-input-${l.id}`,onDoubleClick:()=>s(!0),children:l.text}),Le("button",{type:"button","aria-label":"Delete",className:"destroy",onClick:()=>h(l.id)})]})})}const Sw={SHOW_ALL:"All",SHOW_ACTIVE:"Active",SHOW_COMPLETED:"Completed"};function Tw(t){const{activeCount:n,completedCount:s,filter:l,onClearCompleted:c,onShow:u}=t;return Ei("footer",{className:"footer",children:[Ei("span",{className:"todo-count",children:[Le("strong",{children:n||"No"}),"\xA0",n===1?"item":"items"," left"]}),Le("ul",{className:"filters",children:["SHOW_ALL","SHOW_ACTIVE","SHOW_COMPLETED"].map(h=>Le("li",{children:Le("button",{type:"button",className:Ac({selected:h===l}),style:{cursor:"pointer"},onClick:()=>u(h),children:Sw[h]})},h))}),!!s&&Le("button",{type:"button",className:"clear-completed",onClick:c,children:"Clear completed"})]})}const kw={SHOW_ALL:t=>!0,SHOW_ACTIVE:t=>!t.completed,SHOW_COMPLETED:t=>t.completed};function Aw(t){const[n,s]=Dn.exports.useState("SHOW_ALL"),{todos:l,actions:c}=t,u=l.filter(kw[n]),h=l.reduce((y,T)=>T.completed?y+1:y,0),m=l.length-h;return l.length===0?null:Ei("section",{className:"main",children:[Le("input",{className:"toggle-all",type:"checkbox",defaultChecked:h===l.length,onChange:c.completeAll}),Le("ul",{className:"todo-list",children:u.map(y=>Le(ww,{todo:y,editTodo:c.editTodo,deleteTodo:c.deleteTodo,completeTodo:c.completeTodo},y.id))}),Le(Tw,{completedCount:h,activeCount:m,filter:n,onClearCompleted:()=>c.clearCompleted(),onShow:s})]})}const Ew=[{id:0,text:"Yorkie JS SDK",completed:!1},{id:1,text:"Garbage collection",completed:!1},{id:2,text:"RichText datatype",completed:!1}];function Iw(){const[t]=Dn.exports.useState(()=>new Fh.Document(`react-todomvc-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`)),[n,s]=Dn.exports.useState([]),l={addTodo:c=>{t==null||t.update(u=>{u.todos.push({id:u.todos.reduce((h,m)=>Math.max(m.id,h),-1)+1,completed:!1,text:c})})},deleteTodo:c=>{t==null||t.update(u=>{let h;for(const m of u.todos)if(m.id===c){h=m;break}h&&u.todos.deleteByID(h.getID())})},editTodo:(c,u)=>{t==null||t.update(h=>{let m;for(const y of h.todos)if(y.id===c){m=y;break}m&&(m.text=u)})},completeTodo:c=>{t==null||t.update(u=>{let h;for(const m of u.todos)if(m.id===c){h=m;break}h&&(h.completed=!h.completed)})},clearCompleted:()=>{t==null||t.update(c=>{for(const u of c.todos)if(u.completed){const h=u;c.todos.deleteByID(h.getID())}},"")}};return Dn.exports.useEffect(()=>{const c=new Fh.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});async function u(h,m){await c.activate(),await c.attach(h),h.update(y=>{y.todos||(y.todos=Ew)},"create default todos if not exists"),h.subscribe(y=>{m(h.getRoot().todos)}),m(h.getRoot().todos)}u(t,h=>{s(h)})},[]),Ei("div",{className:"App",children:[Le(vw,{addTodo:l.addTodo}),Le(Aw,{todos:n,actions:l})]})}Ll.createRoot(document.getElementById("root")).render(Le(Iw,{}));
