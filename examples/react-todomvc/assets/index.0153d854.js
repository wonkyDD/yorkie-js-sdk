(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerpolicy&&(u.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?u.credentials="include":c.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var Tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pl={},Ih={exports:{}},Tt={},xn={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=Symbol.for("react.element"),Av=Symbol.for("react.portal"),Iv=Symbol.for("react.fragment"),Cv=Symbol.for("react.strict_mode"),Ev=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),xv=Symbol.for("react.context"),Pv=Symbol.for("react.forward_ref"),Ov=Symbol.for("react.suspense"),Dv=Symbol.for("react.memo"),Rv=Symbol.for("react.lazy"),gd=Symbol.iterator;function _v(t){return t===null||typeof t!="object"?null:(t=gd&&t[gd]||t["@@iterator"],typeof t=="function"?t:null)}var Ch={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Eh=Object.assign,Nh={};function ki(t,n,i){this.props=t,this.context=n,this.refs=Nh,this.updater=i||Ch}ki.prototype.isReactComponent={};ki.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xh(){}xh.prototype=ki.prototype;function Au(t,n,i){this.props=t,this.context=n,this.refs=Nh,this.updater=i||Ch}var Iu=Au.prototype=new xh;Iu.constructor=Au;Eh(Iu,ki.prototype);Iu.isPureReactComponent=!0;var pd=Array.isArray,Ph=Object.prototype.hasOwnProperty,Cu={current:null},Oh={key:!0,ref:!0,__self:!0,__source:!0};function Dh(t,n,i){var l,c={},u=null,h=null;if(n!=null)for(l in n.ref!==void 0&&(h=n.ref),n.key!==void 0&&(u=""+n.key),n)Ph.call(n,l)&&!Oh.hasOwnProperty(l)&&(c[l]=n[l]);var p=arguments.length-2;if(p===1)c.children=i;else if(1<p){for(var v=Array(p),T=0;T<p;T++)v[T]=arguments[T+2];c.children=v}if(t&&t.defaultProps)for(l in p=t.defaultProps,p)c[l]===void 0&&(c[l]=p[l]);return{$$typeof:Bs,type:t,key:u,ref:h,props:c,_owner:Cu.current}}function Lv(t,n){return{$$typeof:Bs,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function Eu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bs}function bv(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return n[i]})}var md=/\/+/g;function rl(t,n){return typeof t=="object"&&t!==null&&t.key!=null?bv(""+t.key):n.toString(36)}function xo(t,n,i,l,c){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case Bs:case Av:h=!0}}if(h)return h=t,c=c(h),t=l===""?"."+rl(h,0):l,pd(c)?(i="",t!=null&&(i=t.replace(md,"$&/")+"/"),xo(c,n,i,"",function(T){return T})):c!=null&&(Eu(c)&&(c=Lv(c,i+(!c.key||h&&h.key===c.key?"":(""+c.key).replace(md,"$&/")+"/")+t)),n.push(c)),1;if(h=0,l=l===""?".":l+":",pd(t))for(var p=0;p<t.length;p++){u=t[p];var v=l+rl(u,p);h+=xo(u,n,i,v,c)}else if(v=_v(t),typeof v=="function")for(t=v.call(t),p=0;!(u=t.next()).done;)u=u.value,v=l+rl(u,p++),h+=xo(u,n,i,v,c);else if(u==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return h}function co(t,n,i){if(t==null)return t;var l=[],c=0;return xo(t,l,"","",function(u){return n.call(i,u,c++)}),l}function Mv(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var nt={current:null},Po={transition:null},Bv={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:Po,ReactCurrentOwner:Cu};ie.Children={map:co,forEach:function(t,n,i){co(t,function(){n.apply(this,arguments)},i)},count:function(t){var n=0;return co(t,function(){n++}),n},toArray:function(t){return co(t,function(n){return n})||[]},only:function(t){if(!Eu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=ki;ie.Fragment=Iv;ie.Profiler=Ev;ie.PureComponent=Au;ie.StrictMode=Cv;ie.Suspense=Ov;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bv;ie.cloneElement=function(t,n,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var l=Eh({},t.props),c=t.key,u=t.ref,h=t._owner;if(n!=null){if(n.ref!==void 0&&(u=n.ref,h=Cu.current),n.key!==void 0&&(c=""+n.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(v in n)Ph.call(n,v)&&!Oh.hasOwnProperty(v)&&(l[v]=n[v]===void 0&&p!==void 0?p[v]:n[v])}var v=arguments.length-2;if(v===1)l.children=i;else if(1<v){p=Array(v);for(var T=0;T<v;T++)p[T]=arguments[T+2];l.children=p}return{$$typeof:Bs,type:t.type,key:c,ref:u,props:l,_owner:h}};ie.createContext=function(t){return t={$$typeof:xv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Nv,_context:t},t.Consumer=t};ie.createElement=Dh;ie.createFactory=function(t){var n=Dh.bind(null,t);return n.type=t,n};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:Pv,render:t}};ie.isValidElement=Eu;ie.lazy=function(t){return{$$typeof:Rv,_payload:{_status:-1,_result:t},_init:Mv}};ie.memo=function(t,n){return{$$typeof:Dv,type:t,compare:n===void 0?null:n}};ie.startTransition=function(t){var n=Po.transition;Po.transition={};try{t()}finally{Po.transition=n}};ie.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ie.useCallback=function(t,n){return nt.current.useCallback(t,n)};ie.useContext=function(t){return nt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return nt.current.useDeferredValue(t)};ie.useEffect=function(t,n){return nt.current.useEffect(t,n)};ie.useId=function(){return nt.current.useId()};ie.useImperativeHandle=function(t,n,i){return nt.current.useImperativeHandle(t,n,i)};ie.useInsertionEffect=function(t,n){return nt.current.useInsertionEffect(t,n)};ie.useLayoutEffect=function(t,n){return nt.current.useLayoutEffect(t,n)};ie.useMemo=function(t,n){return nt.current.useMemo(t,n)};ie.useReducer=function(t,n,i){return nt.current.useReducer(t,n,i)};ie.useRef=function(t){return nt.current.useRef(t)};ie.useState=function(t){return nt.current.useState(t)};ie.useSyncExternalStore=function(t,n,i){return nt.current.useSyncExternalStore(t,n,i)};ie.useTransition=function(){return nt.current.useTransition()};ie.version="18.2.0";(function(t){t.exports=ie})(xn);var Rh={exports:{}},_h={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(F,Q){var ee=F.length;F.push(Q);e:for(;0<ee;){var Se=ee-1>>>1,Oe=F[Se];if(0<c(Oe,Q))F[Se]=Q,F[ee]=Oe,ee=Se;else break e}}function i(F){return F.length===0?null:F[0]}function l(F){if(F.length===0)return null;var Q=F[0],ee=F.pop();if(ee!==Q){F[0]=ee;e:for(var Se=0,Oe=F.length,Lr=Oe>>>1;Se<Lr;){var fe=2*(Se+1)-1,ue=F[fe],gn=fe+1,br=F[gn];if(0>c(ue,ee))gn<Oe&&0>c(br,ue)?(F[Se]=br,F[gn]=ee,Se=gn):(F[Se]=ue,F[fe]=ee,Se=fe);else if(gn<Oe&&0>c(br,ee))F[Se]=br,F[gn]=ee,Se=gn;else break e}}return Q}function c(F,Q){var ee=F.sortIndex-Q.sortIndex;return ee!==0?ee:F.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();t.unstable_now=function(){return h.now()-p}}var v=[],T=[],O=1,P=null,N=3,M=!1,z=!1,U=!1,he=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var Q=i(T);Q!==null;){if(Q.callback===null)l(T);else if(Q.startTime<=F)l(T),Q.sortIndex=Q.expirationTime,n(v,Q);else break;Q=i(T)}}function R(F){if(U=!1,I(F),!z)if(i(v)!==null)z=!0,_r(j);else{var Q=i(T);Q!==null&&Ei(R,Q.startTime-F)}}function j(F,Q){z=!1,U&&(U=!1,k(Y),Y=-1),M=!0;var ee=N;try{for(I(Q),P=i(v);P!==null&&(!(P.expirationTime>Q)||F&&!ft());){var Se=P.callback;if(typeof Se=="function"){P.callback=null,N=P.priorityLevel;var Oe=Se(P.expirationTime<=Q);Q=t.unstable_now(),typeof Oe=="function"?P.callback=Oe:P===i(v)&&l(v),I(Q)}else l(v);P=i(v)}if(P!==null)var Lr=!0;else{var fe=i(T);fe!==null&&Ei(R,fe.startTime-Q),Lr=!1}return Lr}finally{P=null,N=ee,M=!1}}var B=!1,W=null,Y=-1,C=5,Z=-1;function ft(){return!(t.unstable_now()-Z<C)}function hn(){if(W!==null){var F=t.unstable_now();Z=F;var Q=!0;try{Q=W(!0,F)}finally{Q?Ht():(B=!1,W=null)}}else B=!1}var Ht;if(typeof w=="function")Ht=function(){w(hn)};else if(typeof MessageChannel<"u"){var Ci=new MessageChannel,Ea=Ci.port2;Ci.port1.onmessage=hn,Ht=function(){Ea.postMessage(null)}}else Ht=function(){he(hn,0)};function _r(F){W=F,B||(B=!0,Ht())}function Ei(F,Q){Y=he(function(){F(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){z||M||(z=!0,_r(j))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return i(v)},t.unstable_next=function(F){switch(N){case 1:case 2:case 3:var Q=3;break;default:Q=N}var ee=N;N=Q;try{return F()}finally{N=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,Q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ee=N;N=F;try{return Q()}finally{N=ee}},t.unstable_scheduleCallback=function(F,Q,ee){var Se=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Se+ee:Se):ee=Se,F){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=ee+Oe,F={id:O++,callback:Q,priorityLevel:F,startTime:ee,expirationTime:Oe,sortIndex:-1},ee>Se?(F.sortIndex=ee,n(T,F),i(v)===null&&F===i(T)&&(U?(k(Y),Y=-1):U=!0,Ei(R,ee-Se))):(F.sortIndex=Oe,n(v,F),z||M||(z=!0,_r(j))),F},t.unstable_shouldYield=ft,t.unstable_wrapCallback=function(F){var Q=N;return function(){var ee=N;N=Q;try{return F.apply(this,arguments)}finally{N=ee}}}})(_h);(function(t){t.exports=_h})(Rh);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=xn.exports,St=Rh.exports;function L(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bh=new Set,Ss={};function Dr(t,n){gi(t,n),gi(t+"Capture",n)}function gi(t,n){for(Ss[t]=n,t=0;t<n.length;t++)bh.add(n[t])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=Object.prototype.hasOwnProperty,$v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yd={},vd={};function zv(t){return Ol.call(vd,t)?!0:Ol.call(yd,t)?!1:$v.test(t)?vd[t]=!0:(yd[t]=!0,!1)}function Uv(t,n,i,l){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Fv(t,n,i,l){if(n===null||typeof n>"u"||Uv(t,n,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function rt(t,n,i,l,c,u,h){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=t,this.type=n,this.sanitizeURL=u,this.removeEmptyString=h}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Je[n]=new rt(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nu=/[\-:]([a-z])/g;function xu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(Nu,xu);Je[n]=new rt(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(Nu,xu);Je[n]=new rt(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(Nu,xu);Je[n]=new rt(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new rt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pu(t,n,i,l){var c=Je.hasOwnProperty(n)?Je[n]:null;(c!==null?c.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Fv(n,i,c,l)&&(i=null),l||c===null?zv(n)&&(i===null?t.removeAttribute(n):t.setAttribute(n,""+i)):c.mustUseProperty?t[c.propertyName]=i===null?c.type===3?!1:"":i:(n=c.attributeName,l=c.attributeNamespace,i===null?t.removeAttribute(n):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,l?t.setAttributeNS(l,n,i):t.setAttribute(n,i))))}var Ln=Lh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fo=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),Ou=Symbol.for("react.strict_mode"),Dl=Symbol.for("react.profiler"),Mh=Symbol.for("react.provider"),Bh=Symbol.for("react.context"),Du=Symbol.for("react.forward_ref"),Rl=Symbol.for("react.suspense"),_l=Symbol.for("react.suspense_list"),Ru=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),$h=Symbol.for("react.offscreen"),wd=Symbol.iterator;function Zi(t){return t===null||typeof t!="object"?null:(t=wd&&t[wd]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,il;function as(t){if(il===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);il=n&&n[1]||""}return`
`+il+t}var sl=!1;function ol(t,n){if(!t||sl)return"";sl=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(T){var l=T}Reflect.construct(t,[],n)}else{try{n.call()}catch(T){l=T}t.call(n.prototype)}else{try{throw Error()}catch(T){l=T}t()}}catch(T){if(T&&l&&typeof T.stack=="string"){for(var c=T.stack.split(`
`),u=l.stack.split(`
`),h=c.length-1,p=u.length-1;1<=h&&0<=p&&c[h]!==u[p];)p--;for(;1<=h&&0<=p;h--,p--)if(c[h]!==u[p]){if(h!==1||p!==1)do if(h--,p--,0>p||c[h]!==u[p]){var v=`
`+c[h].replace(" at new "," at ");return t.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",t.displayName)),v}while(1<=h&&0<=p);break}}}finally{sl=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?as(t):""}function jv(t){switch(t.tag){case 5:return as(t.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return t=ol(t.type,!1),t;case 11:return t=ol(t.type.render,!1),t;case 1:return t=ol(t.type,!0),t;default:return""}}function Ll(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xr:return"Fragment";case Yr:return"Portal";case Dl:return"Profiler";case Ou:return"StrictMode";case Rl:return"Suspense";case _l:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bh:return(t.displayName||"Context")+".Consumer";case Mh:return(t._context.displayName||"Context")+".Provider";case Du:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ru:return n=t.displayName||null,n!==null?n:Ll(t.type)||"Memo";case Jn:n=t._payload,t=t._init;try{return Ll(t(n))}catch{}}return null}function Vv(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ll(n);case 8:return n===Ou?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zh(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Jv(t){var n=zh(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,u=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(h){l=""+h,u.call(this,h)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(h){l=""+h},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ho(t){t._valueTracker||(t._valueTracker=Jv(t))}function Uh(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return t&&(l=zh(t)?t.checked?"true":"false":t.value),t=l,t!==i?(n.setValue(t),!0):!1}function Uo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bl(t,n){var i=n.checked;return Ee({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:t._wrapperState.initialChecked})}function Sd(t,n){var i=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;i=ir(n.value!=null?n.value:i),t._wrapperState={initialChecked:l,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Fh(t,n){n=n.checked,n!=null&&Pu(t,"checked",n,!1)}function Ml(t,n){Fh(t,n);var i=ir(n.value),l=n.type;if(i!=null)l==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(l==="submit"||l==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Bl(t,n.type,i):n.hasOwnProperty("defaultValue")&&Bl(t,n.type,ir(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Td(t,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,i||n===t.value||(t.value=n),t.defaultValue=n}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function Bl(t,n,i){(n!=="number"||Uo(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var ls=Array.isArray;function li(t,n,i,l){if(t=t.options,n){n={};for(var c=0;c<i.length;c++)n["$"+i[c]]=!0;for(i=0;i<t.length;i++)c=n.hasOwnProperty("$"+t[i].value),t[i].selected!==c&&(t[i].selected=c),c&&l&&(t[i].defaultSelected=!0)}else{for(i=""+ir(i),n=null,c=0;c<t.length;c++){if(t[c].value===i){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function $l(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ee({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kd(t,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(L(92));if(ls(i)){if(1<i.length)throw Error(L(93));i=i[0]}n=i}n==null&&(n=""),i=n}t._wrapperState={initialValue:ir(i)}}function jh(t,n){var i=ir(n.value),l=ir(n.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),n.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),l!=null&&(t.defaultValue=""+l)}function Ad(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function Vh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zl(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?Vh(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var go,Jh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,l,c){MSApp.execUnsafeLocalFunction(function(){return t(n,i,l,c)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(go=go||document.createElement("div"),go.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=go.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Ts(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kv=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){Kv.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),fs[n]=fs[t]})});function Kh(t,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||fs.hasOwnProperty(t)&&fs[t]?(""+n).trim():n+"px"}function Wh(t,n){t=t.style;for(var i in n)if(n.hasOwnProperty(i)){var l=i.indexOf("--")===0,c=Kh(i,n[i],l);i==="float"&&(i="cssFloat"),l?t.setProperty(i,c):t[i]=c}}var Wv=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ul(t,n){if(n){if(Wv[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(L(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(L(61))}if(n.style!=null&&typeof n.style!="object")throw Error(L(62))}}function Fl(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jl=null;function _u(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vl=null,ui=null,ci=null;function Id(t){if(t=Us(t)){if(typeof Vl!="function")throw Error(L(280));var n=t.stateNode;n&&(n=ga(n),Vl(t.stateNode,t.type,n))}}function qh(t){ui?ci?ci.push(t):ci=[t]:ui=t}function Hh(){if(ui){var t=ui,n=ci;if(ci=ui=null,Id(t),n)for(t=0;t<n.length;t++)Id(n[t])}}function Gh(t,n){return t(n)}function Yh(){}var al=!1;function Xh(t,n,i){if(al)return t(n,i);al=!0;try{return Gh(t,n,i)}finally{al=!1,(ui!==null||ci!==null)&&(Yh(),Hh())}}function ks(t,n){var i=t.stateNode;if(i===null)return null;var l=ga(i);if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(L(231,n,typeof i));return i}var Jl=!1;if(On)try{var es={};Object.defineProperty(es,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{Jl=!1}function qv(t,n,i,l,c,u,h,p,v){var T=Array.prototype.slice.call(arguments,3);try{n.apply(i,T)}catch(O){this.onError(O)}}var ds=!1,Fo=null,jo=!1,Kl=null,Hv={onError:function(t){ds=!0,Fo=t}};function Gv(t,n,i,l,c,u,h,p,v){ds=!1,Fo=null,qv.apply(Hv,arguments)}function Yv(t,n,i,l,c,u,h,p,v){if(Gv.apply(this,arguments),ds){if(ds){var T=Fo;ds=!1,Fo=null}else throw Error(L(198));jo||(jo=!0,Kl=T)}}function Rr(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function Qh(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Cd(t){if(Rr(t)!==t)throw Error(L(188))}function Xv(t){var n=t.alternate;if(!n){if(n=Rr(t),n===null)throw Error(L(188));return n!==t?null:t}for(var i=t,l=n;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(l=c.return,l!==null){i=l;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return Cd(c),t;if(u===l)return Cd(c),n;u=u.sibling}throw Error(L(188))}if(i.return!==l.return)i=c,l=u;else{for(var h=!1,p=c.child;p;){if(p===i){h=!0,i=c,l=u;break}if(p===l){h=!0,l=c,i=u;break}p=p.sibling}if(!h){for(p=u.child;p;){if(p===i){h=!0,i=u,l=c;break}if(p===l){h=!0,l=u,i=c;break}p=p.sibling}if(!h)throw Error(L(189))}}if(i.alternate!==l)throw Error(L(190))}if(i.tag!==3)throw Error(L(188));return i.stateNode.current===i?t:n}function Zh(t){return t=Xv(t),t!==null?eg(t):null}function eg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=eg(t);if(n!==null)return n;t=t.sibling}return null}var tg=St.unstable_scheduleCallback,Ed=St.unstable_cancelCallback,Qv=St.unstable_shouldYield,Zv=St.unstable_requestPaint,Pe=St.unstable_now,e0=St.unstable_getCurrentPriorityLevel,Lu=St.unstable_ImmediatePriority,ng=St.unstable_UserBlockingPriority,Vo=St.unstable_NormalPriority,t0=St.unstable_LowPriority,rg=St.unstable_IdlePriority,ca=null,fn=null;function n0(t){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(ca,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:s0,r0=Math.log,i0=Math.LN2;function s0(t){return t>>>=0,t===0?32:31-(r0(t)/i0|0)|0}var po=64,mo=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jo(t,n){var i=t.pendingLanes;if(i===0)return 0;var l=0,c=t.suspendedLanes,u=t.pingedLanes,h=i&268435455;if(h!==0){var p=h&~c;p!==0?l=us(p):(u&=h,u!==0&&(l=us(u)))}else h=i&~c,h!==0?l=us(h):u!==0&&(l=us(u));if(l===0)return 0;if(n!==0&&n!==l&&(n&c)===0&&(c=l&-l,u=n&-n,c>=u||c===16&&(u&4194240)!==0))return n;if((l&4)!==0&&(l|=i&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=l;0<n;)i=31-Kt(n),c=1<<i,l|=t[i],n&=~c;return l}function o0(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a0(t,n){for(var i=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,u=t.pendingLanes;0<u;){var h=31-Kt(u),p=1<<h,v=c[h];v===-1?((p&i)===0||(p&l)!==0)&&(c[h]=o0(p,n)):v<=n&&(t.expiredLanes|=p),u&=~p}}function Wl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ig(){var t=po;return po<<=1,(po&4194240)===0&&(po=64),t}function ll(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function $s(t,n,i){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Kt(n),t[n]=i}function l0(t,n){var i=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var l=t.eventTimes;for(t=t.expirationTimes;0<i;){var c=31-Kt(i),u=1<<c;n[c]=0,l[c]=-1,t[c]=-1,i&=~u}}function bu(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var l=31-Kt(i),c=1<<l;c&n|t[l]&n&&(t[l]|=n),i&=~c}}var ce=0;function sg(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var og,Mu,ag,lg,ug,ql=!1,yo=[],Yn=null,Xn=null,Qn=null,As=new Map,Is=new Map,Wn=[],u0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nd(t,n){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":As.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(n.pointerId)}}function ts(t,n,i,l,c,u){return t===null||t.nativeEvent!==u?(t={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:u,targetContainers:[c]},n!==null&&(n=Us(n),n!==null&&Mu(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function c0(t,n,i,l,c){switch(n){case"focusin":return Yn=ts(Yn,t,n,i,l,c),!0;case"dragenter":return Xn=ts(Xn,t,n,i,l,c),!0;case"mouseover":return Qn=ts(Qn,t,n,i,l,c),!0;case"pointerover":var u=c.pointerId;return As.set(u,ts(As.get(u)||null,t,n,i,l,c)),!0;case"gotpointercapture":return u=c.pointerId,Is.set(u,ts(Is.get(u)||null,t,n,i,l,c)),!0}return!1}function cg(t){var n=Tr(t.target);if(n!==null){var i=Rr(n);if(i!==null){if(n=i.tag,n===13){if(n=Qh(i),n!==null){t.blockedOn=n,ug(t.priority,function(){ag(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oo(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Hl(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);jl=l,i.target.dispatchEvent(l),jl=null}else return n=Us(i),n!==null&&Mu(n),t.blockedOn=i,!1;n.shift()}return!0}function xd(t,n,i){Oo(t)&&i.delete(n)}function f0(){ql=!1,Yn!==null&&Oo(Yn)&&(Yn=null),Xn!==null&&Oo(Xn)&&(Xn=null),Qn!==null&&Oo(Qn)&&(Qn=null),As.forEach(xd),Is.forEach(xd)}function ns(t,n){t.blockedOn===n&&(t.blockedOn=null,ql||(ql=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,f0)))}function Cs(t){function n(c){return ns(c,t)}if(0<yo.length){ns(yo[0],t);for(var i=1;i<yo.length;i++){var l=yo[i];l.blockedOn===t&&(l.blockedOn=null)}}for(Yn!==null&&ns(Yn,t),Xn!==null&&ns(Xn,t),Qn!==null&&ns(Qn,t),As.forEach(n),Is.forEach(n),i=0;i<Wn.length;i++)l=Wn[i],l.blockedOn===t&&(l.blockedOn=null);for(;0<Wn.length&&(i=Wn[0],i.blockedOn===null);)cg(i),i.blockedOn===null&&Wn.shift()}var fi=Ln.ReactCurrentBatchConfig,Ko=!0;function d0(t,n,i,l){var c=ce,u=fi.transition;fi.transition=null;try{ce=1,Bu(t,n,i,l)}finally{ce=c,fi.transition=u}}function h0(t,n,i,l){var c=ce,u=fi.transition;fi.transition=null;try{ce=4,Bu(t,n,i,l)}finally{ce=c,fi.transition=u}}function Bu(t,n,i,l){if(Ko){var c=Hl(t,n,i,l);if(c===null)vl(t,n,l,Wo,i),Nd(t,l);else if(c0(c,t,n,i,l))l.stopPropagation();else if(Nd(t,l),n&4&&-1<u0.indexOf(t)){for(;c!==null;){var u=Us(c);if(u!==null&&og(u),u=Hl(t,n,i,l),u===null&&vl(t,n,l,Wo,i),u===c)break;c=u}c!==null&&l.stopPropagation()}else vl(t,n,l,null,i)}}var Wo=null;function Hl(t,n,i,l){if(Wo=null,t=_u(l),t=Tr(t),t!==null)if(n=Rr(t),n===null)t=null;else if(i=n.tag,i===13){if(t=Qh(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Wo=t,null}function fg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e0()){case Lu:return 1;case ng:return 4;case Vo:case t0:return 16;case rg:return 536870912;default:return 16}default:return 16}}var Hn=null,$u=null,Do=null;function dg(){if(Do)return Do;var t,n=$u,i=n.length,l,c="value"in Hn?Hn.value:Hn.textContent,u=c.length;for(t=0;t<i&&n[t]===c[t];t++);var h=i-t;for(l=1;l<=h&&n[i-l]===c[u-l];l++);return Do=c.slice(t,1<l?1-l:void 0)}function Ro(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function vo(){return!0}function Pd(){return!1}function kt(t){function n(i,l,c,u,h){this._reactName=i,this._targetInst=c,this.type=l,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(i=t[p],this[p]=i?i(u):u[p]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?vo:Pd,this.isPropagationStopped=Pd,this}return Ee(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=vo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=vo)},persist:function(){},isPersistent:vo}),n}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zu=kt(Ai),zs=Ee({},Ai,{view:0,detail:0}),g0=kt(zs),ul,cl,rs,fa=Ee({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rs&&(rs&&t.type==="mousemove"?(ul=t.screenX-rs.screenX,cl=t.screenY-rs.screenY):cl=ul=0,rs=t),ul)},movementY:function(t){return"movementY"in t?t.movementY:cl}}),Od=kt(fa),p0=Ee({},fa,{dataTransfer:0}),m0=kt(p0),y0=Ee({},zs,{relatedTarget:0}),fl=kt(y0),v0=Ee({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),w0=kt(v0),S0=Ee({},Ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T0=kt(S0),k0=Ee({},Ai,{data:0}),Dd=kt(k0),A0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E0(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=C0[t])?!!n[t]:!1}function Uu(){return E0}var N0=Ee({},zs,{key:function(t){if(t.key){var n=A0[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ro(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uu,charCode:function(t){return t.type==="keypress"?Ro(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ro(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),x0=kt(N0),P0=Ee({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rd=kt(P0),O0=Ee({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uu}),D0=kt(O0),R0=Ee({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),_0=kt(R0),L0=Ee({},fa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),b0=kt(L0),M0=[9,13,27,32],Fu=On&&"CompositionEvent"in window,hs=null;On&&"documentMode"in document&&(hs=document.documentMode);var B0=On&&"TextEvent"in window&&!hs,hg=On&&(!Fu||hs&&8<hs&&11>=hs),_d=String.fromCharCode(32),Ld=!1;function gg(t,n){switch(t){case"keyup":return M0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qr=!1;function $0(t,n){switch(t){case"compositionend":return pg(n);case"keypress":return n.which!==32?null:(Ld=!0,_d);case"textInput":return t=n.data,t===_d&&Ld?null:t;default:return null}}function z0(t,n){if(Qr)return t==="compositionend"||!Fu&&gg(t,n)?(t=dg(),Do=$u=Hn=null,Qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return hg&&n.locale!=="ko"?null:n.data;default:return null}}var U0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!U0[t.type]:n==="textarea"}function mg(t,n,i,l){qh(l),n=qo(n,"onChange"),0<n.length&&(i=new zu("onChange","change",null,i,l),t.push({event:i,listeners:n}))}var gs=null,Es=null;function F0(t){Ng(t,0)}function da(t){var n=ti(t);if(Uh(n))return t}function j0(t,n){if(t==="change")return n}var yg=!1;if(On){var dl;if(On){var hl="oninput"in document;if(!hl){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),hl=typeof Md.oninput=="function"}dl=hl}else dl=!1;yg=dl&&(!document.documentMode||9<document.documentMode)}function Bd(){gs&&(gs.detachEvent("onpropertychange",vg),Es=gs=null)}function vg(t){if(t.propertyName==="value"&&da(Es)){var n=[];mg(n,Es,t,_u(t)),Xh(F0,n)}}function V0(t,n,i){t==="focusin"?(Bd(),gs=n,Es=i,gs.attachEvent("onpropertychange",vg)):t==="focusout"&&Bd()}function J0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return da(Es)}function K0(t,n){if(t==="click")return da(n)}function W0(t,n){if(t==="input"||t==="change")return da(n)}function q0(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var qt=typeof Object.is=="function"?Object.is:q0;function Ns(t,n){if(qt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var c=i[l];if(!Ol.call(n,c)||!qt(t[c],n[c]))return!1}return!0}function $d(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zd(t,n){var i=$d(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=n&&l>=n)return{node:i,offset:n-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=$d(i)}}function wg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?wg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Sg(){for(var t=window,n=Uo();n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=Uo(t.document)}return n}function ju(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function H0(t){var n=Sg(),i=t.focusedElem,l=t.selectionRange;if(n!==i&&i&&i.ownerDocument&&wg(i.ownerDocument.documentElement,i)){if(l!==null&&ju(i)){if(n=l.start,t=l.end,t===void 0&&(t=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(t,i.value.length);else if(t=(n=i.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var c=i.textContent.length,u=Math.min(l.start,c);l=l.end===void 0?u:Math.min(l.end,c),!t.extend&&u>l&&(c=l,l=u,u=c),c=zd(i,u);var h=zd(i,l);c&&h&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),t.removeAllRanges(),u>l?(t.addRange(n),t.extend(h.node,h.offset)):(n.setEnd(h.node,h.offset),t.addRange(n)))}}for(n=[],t=i;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)t=n[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var G0=On&&"documentMode"in document&&11>=document.documentMode,Zr=null,Gl=null,ps=null,Yl=!1;function Ud(t,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Yl||Zr==null||Zr!==Uo(l)||(l=Zr,"selectionStart"in l&&ju(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ps&&Ns(ps,l)||(ps=l,l=qo(Gl,"onSelect"),0<l.length&&(n=new zu("onSelect","select",null,n,i),t.push({event:n,listeners:l}),n.target=Zr)))}function wo(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var ei={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionend:wo("Transition","TransitionEnd")},gl={},Tg={};On&&(Tg=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function ha(t){if(gl[t])return gl[t];if(!ei[t])return t;var n=ei[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in Tg)return gl[t]=n[i];return t}var kg=ha("animationend"),Ag=ha("animationiteration"),Ig=ha("animationstart"),Cg=ha("transitionend"),Eg=new Map,Fd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(t,n){Eg.set(t,n),Dr(n,[t])}for(var pl=0;pl<Fd.length;pl++){var ml=Fd[pl],Y0=ml.toLowerCase(),X0=ml[0].toUpperCase()+ml.slice(1);or(Y0,"on"+X0)}or(kg,"onAnimationEnd");or(Ag,"onAnimationIteration");or(Ig,"onAnimationStart");or("dblclick","onDoubleClick");or("focusin","onFocus");or("focusout","onBlur");or(Cg,"onTransitionEnd");gi("onMouseEnter",["mouseout","mouseover"]);gi("onMouseLeave",["mouseout","mouseover"]);gi("onPointerEnter",["pointerout","pointerover"]);gi("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q0=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function jd(t,n,i){var l=t.type||"unknown-event";t.currentTarget=i,Yv(l,n,void 0,t),t.currentTarget=null}function Ng(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],c=l.event;l=l.listeners;e:{var u=void 0;if(n)for(var h=l.length-1;0<=h;h--){var p=l[h],v=p.instance,T=p.currentTarget;if(p=p.listener,v!==u&&c.isPropagationStopped())break e;jd(c,p,T),u=v}else for(h=0;h<l.length;h++){if(p=l[h],v=p.instance,T=p.currentTarget,p=p.listener,v!==u&&c.isPropagationStopped())break e;jd(c,p,T),u=v}}}if(jo)throw t=Kl,jo=!1,Kl=null,t}function ve(t,n){var i=n[tu];i===void 0&&(i=n[tu]=new Set);var l=t+"__bubble";i.has(l)||(xg(n,t,2,!1),i.add(l))}function yl(t,n,i){var l=0;n&&(l|=4),xg(i,t,l,n)}var So="_reactListening"+Math.random().toString(36).slice(2);function xs(t){if(!t[So]){t[So]=!0,bh.forEach(function(i){i!=="selectionchange"&&(Q0.has(i)||yl(i,!1,t),yl(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[So]||(n[So]=!0,yl("selectionchange",!1,n))}}function xg(t,n,i,l){switch(fg(n)){case 1:var c=d0;break;case 4:c=h0;break;default:c=Bu}i=c.bind(null,n,i,t),c=void 0,!Jl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,i,{capture:!0,passive:c}):t.addEventListener(n,i,!0):c!==void 0?t.addEventListener(n,i,{passive:c}):t.addEventListener(n,i,!1)}function vl(t,n,i,l,c){var u=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var p=l.stateNode.containerInfo;if(p===c||p.nodeType===8&&p.parentNode===c)break;if(h===4)for(h=l.return;h!==null;){var v=h.tag;if((v===3||v===4)&&(v=h.stateNode.containerInfo,v===c||v.nodeType===8&&v.parentNode===c))return;h=h.return}for(;p!==null;){if(h=Tr(p),h===null)return;if(v=h.tag,v===5||v===6){l=u=h;continue e}p=p.parentNode}}l=l.return}Xh(function(){var T=u,O=_u(i),P=[];e:{var N=Eg.get(t);if(N!==void 0){var M=zu,z=t;switch(t){case"keypress":if(Ro(i)===0)break e;case"keydown":case"keyup":M=x0;break;case"focusin":z="focus",M=fl;break;case"focusout":z="blur",M=fl;break;case"beforeblur":case"afterblur":M=fl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=m0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=D0;break;case kg:case Ag:case Ig:M=w0;break;case Cg:M=_0;break;case"scroll":M=g0;break;case"wheel":M=b0;break;case"copy":case"cut":case"paste":M=T0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Rd}var U=(n&4)!==0,he=!U&&t==="scroll",k=U?N!==null?N+"Capture":null:N;U=[];for(var w=T,I;w!==null;){I=w;var R=I.stateNode;if(I.tag===5&&R!==null&&(I=R,k!==null&&(R=ks(w,k),R!=null&&U.push(Ps(w,R,I)))),he)break;w=w.return}0<U.length&&(N=new M(N,z,null,i,O),P.push({event:N,listeners:U}))}}if((n&7)===0){e:{if(N=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",N&&i!==jl&&(z=i.relatedTarget||i.fromElement)&&(Tr(z)||z[Dn]))break e;if((M||N)&&(N=O.window===O?O:(N=O.ownerDocument)?N.defaultView||N.parentWindow:window,M?(z=i.relatedTarget||i.toElement,M=T,z=z?Tr(z):null,z!==null&&(he=Rr(z),z!==he||z.tag!==5&&z.tag!==6)&&(z=null)):(M=null,z=T),M!==z)){if(U=Od,R="onMouseLeave",k="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(U=Rd,R="onPointerLeave",k="onPointerEnter",w="pointer"),he=M==null?N:ti(M),I=z==null?N:ti(z),N=new U(R,w+"leave",M,i,O),N.target=he,N.relatedTarget=I,R=null,Tr(O)===T&&(U=new U(k,w+"enter",z,i,O),U.target=I,U.relatedTarget=he,R=U),he=R,M&&z)t:{for(U=M,k=z,w=0,I=U;I;I=Gr(I))w++;for(I=0,R=k;R;R=Gr(R))I++;for(;0<w-I;)U=Gr(U),w--;for(;0<I-w;)k=Gr(k),I--;for(;w--;){if(U===k||k!==null&&U===k.alternate)break t;U=Gr(U),k=Gr(k)}U=null}else U=null;M!==null&&Vd(P,N,M,U,!1),z!==null&&he!==null&&Vd(P,he,z,U,!0)}}e:{if(N=T?ti(T):window,M=N.nodeName&&N.nodeName.toLowerCase(),M==="select"||M==="input"&&N.type==="file")var j=j0;else if(bd(N))if(yg)j=W0;else{j=J0;var B=V0}else(M=N.nodeName)&&M.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(j=K0);if(j&&(j=j(t,T))){mg(P,j,i,O);break e}B&&B(t,N,T),t==="focusout"&&(B=N._wrapperState)&&B.controlled&&N.type==="number"&&Bl(N,"number",N.value)}switch(B=T?ti(T):window,t){case"focusin":(bd(B)||B.contentEditable==="true")&&(Zr=B,Gl=T,ps=null);break;case"focusout":ps=Gl=Zr=null;break;case"mousedown":Yl=!0;break;case"contextmenu":case"mouseup":case"dragend":Yl=!1,Ud(P,i,O);break;case"selectionchange":if(G0)break;case"keydown":case"keyup":Ud(P,i,O)}var W;if(Fu)e:{switch(t){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else Qr?gg(t,i)&&(Y="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Y="onCompositionStart");Y&&(hg&&i.locale!=="ko"&&(Qr||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&Qr&&(W=dg()):(Hn=O,$u="value"in Hn?Hn.value:Hn.textContent,Qr=!0)),B=qo(T,Y),0<B.length&&(Y=new Dd(Y,t,null,i,O),P.push({event:Y,listeners:B}),W?Y.data=W:(W=pg(i),W!==null&&(Y.data=W)))),(W=B0?$0(t,i):z0(t,i))&&(T=qo(T,"onBeforeInput"),0<T.length&&(O=new Dd("onBeforeInput","beforeinput",null,i,O),P.push({event:O,listeners:T}),O.data=W))}Ng(P,n)})}function Ps(t,n,i){return{instance:t,listener:n,currentTarget:i}}function qo(t,n){for(var i=n+"Capture",l=[];t!==null;){var c=t,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=ks(t,i),u!=null&&l.unshift(Ps(t,u,c)),u=ks(t,n),u!=null&&l.push(Ps(t,u,c))),t=t.return}return l}function Gr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vd(t,n,i,l,c){for(var u=n._reactName,h=[];i!==null&&i!==l;){var p=i,v=p.alternate,T=p.stateNode;if(v!==null&&v===l)break;p.tag===5&&T!==null&&(p=T,c?(v=ks(i,u),v!=null&&h.unshift(Ps(i,v,p))):c||(v=ks(i,u),v!=null&&h.push(Ps(i,v,p)))),i=i.return}h.length!==0&&t.push({event:n,listeners:h})}var Z0=/\r\n?/g,e1=/\u0000|\uFFFD/g;function Jd(t){return(typeof t=="string"?t:""+t).replace(Z0,`
`).replace(e1,"")}function To(t,n,i){if(n=Jd(n),Jd(t)!==n&&i)throw Error(L(425))}function Ho(){}var Xl=null,Ql=null;function Zl(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var eu=typeof setTimeout=="function"?setTimeout:void 0,t1=typeof clearTimeout=="function"?clearTimeout:void 0,Kd=typeof Promise=="function"?Promise:void 0,n1=typeof queueMicrotask=="function"?queueMicrotask:typeof Kd<"u"?function(t){return Kd.resolve(null).then(t).catch(r1)}:eu;function r1(t){setTimeout(function(){throw t})}function wl(t,n){var i=n,l=0;do{var c=i.nextSibling;if(t.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(l===0){t.removeChild(c),Cs(n);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=c}while(i);Cs(n)}function Zn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Wd(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}var Ii=Math.random().toString(36).slice(2),cn="__reactFiber$"+Ii,Os="__reactProps$"+Ii,Dn="__reactContainer$"+Ii,tu="__reactEvents$"+Ii,i1="__reactListeners$"+Ii,s1="__reactHandles$"+Ii;function Tr(t){var n=t[cn];if(n)return n;for(var i=t.parentNode;i;){if(n=i[Dn]||i[cn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=Wd(t);t!==null;){if(i=t[cn])return i;t=Wd(t)}return n}t=i,i=t.parentNode}return null}function Us(t){return t=t[cn]||t[Dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function ga(t){return t[Os]||null}var nu=[],ni=-1;function ar(t){return{current:t}}function we(t){0>ni||(t.current=nu[ni],nu[ni]=null,ni--)}function ye(t,n){ni++,nu[ni]=t.current,t.current=n}var sr={},Ye=ar(sr),lt=ar(!1),Er=sr;function pi(t,n){var i=t.type.contextTypes;if(!i)return sr;var l=t.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in i)c[u]=n[u];return l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=c),c}function ut(t){return t=t.childContextTypes,t!=null}function Go(){we(lt),we(Ye)}function qd(t,n,i){if(Ye.current!==sr)throw Error(L(168));ye(Ye,n),ye(lt,i)}function Pg(t,n,i){var l=t.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var c in l)if(!(c in n))throw Error(L(108,Vv(t)||"Unknown",c));return Ee({},i,l)}function Yo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sr,Er=Ye.current,ye(Ye,t),ye(lt,lt.current),!0}function Hd(t,n,i){var l=t.stateNode;if(!l)throw Error(L(169));i?(t=Pg(t,n,Er),l.__reactInternalMemoizedMergedChildContext=t,we(lt),we(Ye),ye(Ye,t)):we(lt),ye(lt,i)}var Cn=null,pa=!1,Sl=!1;function Og(t){Cn===null?Cn=[t]:Cn.push(t)}function o1(t){pa=!0,Og(t)}function lr(){if(!Sl&&Cn!==null){Sl=!0;var t=0,n=ce;try{var i=Cn;for(ce=1;t<i.length;t++){var l=i[t];do l=l(!0);while(l!==null)}Cn=null,pa=!1}catch(c){throw Cn!==null&&(Cn=Cn.slice(t+1)),tg(Lu,lr),c}finally{ce=n,Sl=!1}}return null}var ri=[],ii=0,Xo=null,Qo=0,xt=[],Pt=0,Nr=null,En=1,Nn="";function wr(t,n){ri[ii++]=Qo,ri[ii++]=Xo,Xo=t,Qo=n}function Dg(t,n,i){xt[Pt++]=En,xt[Pt++]=Nn,xt[Pt++]=Nr,Nr=t;var l=En;t=Nn;var c=32-Kt(l)-1;l&=~(1<<c),i+=1;var u=32-Kt(n)+c;if(30<u){var h=c-c%5;u=(l&(1<<h)-1).toString(32),l>>=h,c-=h,En=1<<32-Kt(n)+c|i<<c|l,Nn=u+t}else En=1<<u|i<<c|l,Nn=t}function Vu(t){t.return!==null&&(wr(t,1),Dg(t,1,0))}function Ju(t){for(;t===Xo;)Xo=ri[--ii],ri[ii]=null,Qo=ri[--ii],ri[ii]=null;for(;t===Nr;)Nr=xt[--Pt],xt[Pt]=null,Nn=xt[--Pt],xt[Pt]=null,En=xt[--Pt],xt[Pt]=null}var wt=null,vt=null,Ae=!1,Jt=null;function Rg(t,n){var i=Ot(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=t,n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)}function Gd(t,n){switch(t.tag){case 5:var i=t.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,wt=t,vt=Zn(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,wt=t,vt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=Nr!==null?{id:En,overflow:Nn}:null,t.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=Ot(18,null,null,0),i.stateNode=n,i.return=t,t.child=i,wt=t,vt=null,!0):!1;default:return!1}}function ru(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iu(t){if(Ae){var n=vt;if(n){var i=n;if(!Gd(t,n)){if(ru(t))throw Error(L(418));n=Zn(i.nextSibling);var l=wt;n&&Gd(t,n)?Rg(l,i):(t.flags=t.flags&-4097|2,Ae=!1,wt=t)}}else{if(ru(t))throw Error(L(418));t.flags=t.flags&-4097|2,Ae=!1,wt=t}}}function Yd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wt=t}function ko(t){if(t!==wt)return!1;if(!Ae)return Yd(t),Ae=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Zl(t.type,t.memoizedProps)),n&&(n=vt)){if(ru(t))throw _g(),Error(L(418));for(;n;)Rg(t,n),n=Zn(n.nextSibling)}if(Yd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(n===0){vt=Zn(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}t=t.nextSibling}vt=null}}else vt=wt?Zn(t.stateNode.nextSibling):null;return!0}function _g(){for(var t=vt;t;)t=Zn(t.nextSibling)}function mi(){vt=wt=null,Ae=!1}function Ku(t){Jt===null?Jt=[t]:Jt.push(t)}var a1=Ln.ReactCurrentBatchConfig;function jt(t,n){if(t&&t.defaultProps){n=Ee({},n),t=t.defaultProps;for(var i in t)n[i]===void 0&&(n[i]=t[i]);return n}return n}var Zo=ar(null),ea=null,si=null,Wu=null;function qu(){Wu=si=ea=null}function Hu(t){var n=Zo.current;we(Zo),t._currentValue=n}function su(t,n,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===i)break;t=t.return}}function di(t,n){ea=t,Wu=si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(at=!0),t.firstContext=null)}function Rt(t){var n=t._currentValue;if(Wu!==t)if(t={context:t,memoizedValue:n,next:null},si===null){if(ea===null)throw Error(L(308));si=t,ea.dependencies={lanes:0,firstContext:t}}else si=si.next=t;return n}var kr=null;function Gu(t){kr===null?kr=[t]:kr.push(t)}function Lg(t,n,i,l){var c=n.interleaved;return c===null?(i.next=i,Gu(n)):(i.next=c.next,c.next=i),n.interleaved=i,Rn(t,l)}function Rn(t,n){t.lanes|=n;var i=t.alternate;for(i!==null&&(i.lanes|=n),i=t,t=t.return;t!==null;)t.childLanes|=n,i=t.alternate,i!==null&&(i.childLanes|=n),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Kn=!1;function Yu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bg(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pn(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function er(t,n,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(oe&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,Rn(t,i)}return c=l.interleaved,c===null?(n.next=n,Gu(l)):(n.next=c.next,c.next=n),l.interleaved=n,Rn(t,i)}function _o(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,bu(t,i)}}function Xd(t,n){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var h={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};u===null?c=u=h:u=u.next=h,i=i.next}while(i!==null);u===null?c=u=n:u=u.next=n}else c=u=n;i={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:l.shared,effects:l.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}function ta(t,n,i,l){var c=t.updateQueue;Kn=!1;var u=c.firstBaseUpdate,h=c.lastBaseUpdate,p=c.shared.pending;if(p!==null){c.shared.pending=null;var v=p,T=v.next;v.next=null,h===null?u=T:h.next=T,h=v;var O=t.alternate;O!==null&&(O=O.updateQueue,p=O.lastBaseUpdate,p!==h&&(p===null?O.firstBaseUpdate=T:p.next=T,O.lastBaseUpdate=v))}if(u!==null){var P=c.baseState;h=0,O=T=v=null,p=u;do{var N=p.lane,M=p.eventTime;if((l&N)===N){O!==null&&(O=O.next={eventTime:M,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var z=t,U=p;switch(N=n,M=i,U.tag){case 1:if(z=U.payload,typeof z=="function"){P=z.call(M,P,N);break e}P=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=U.payload,N=typeof z=="function"?z.call(M,P,N):z,N==null)break e;P=Ee({},P,N);break e;case 2:Kn=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,N=c.effects,N===null?c.effects=[p]:N.push(p))}else M={eventTime:M,lane:N,tag:p.tag,payload:p.payload,callback:p.callback,next:null},O===null?(T=O=M,v=P):O=O.next=M,h|=N;if(p=p.next,p===null){if(p=c.shared.pending,p===null)break;N=p,p=N.next,N.next=null,c.lastBaseUpdate=N,c.shared.pending=null}}while(1);if(O===null&&(v=P),c.baseState=v,c.firstBaseUpdate=T,c.lastBaseUpdate=O,n=c.shared.interleaved,n!==null){c=n;do h|=c.lane,c=c.next;while(c!==n)}else u===null&&(c.shared.lanes=0);Pr|=h,t.lanes=h,t.memoizedState=P}}function Qd(t,n,i){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var l=t[n],c=l.callback;if(c!==null){if(l.callback=null,l=i,typeof c!="function")throw Error(L(191,c));c.call(l)}}}var Mg=new Lh.Component().refs;function ou(t,n,i,l){n=t.memoizedState,i=i(l,n),i=i==null?n:Ee({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var ma={isMounted:function(t){return(t=t._reactInternals)?Rr(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var l=tt(),c=nr(t),u=Pn(l,c);u.payload=n,i!=null&&(u.callback=i),n=er(t,u,c),n!==null&&(Wt(n,t,c,l),_o(n,t,c))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var l=tt(),c=nr(t),u=Pn(l,c);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=er(t,u,c),n!==null&&(Wt(n,t,c,l),_o(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=tt(),l=nr(t),c=Pn(i,l);c.tag=2,n!=null&&(c.callback=n),n=er(t,c,l),n!==null&&(Wt(n,t,l,i),_o(n,t,l))}};function Zd(t,n,i,l,c,u,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,u,h):n.prototype&&n.prototype.isPureReactComponent?!Ns(i,l)||!Ns(c,u):!0}function Bg(t,n,i){var l=!1,c=sr,u=n.contextType;return typeof u=="object"&&u!==null?u=Rt(u):(c=ut(n)?Er:Ye.current,l=n.contextTypes,u=(l=l!=null)?pi(t,c):sr),n=new n(i,u),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ma,t.stateNode=n,n._reactInternals=t,l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=u),n}function eh(t,n,i,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==t&&ma.enqueueReplaceState(n,n.state,null)}function au(t,n,i,l){var c=t.stateNode;c.props=i,c.state=t.memoizedState,c.refs=Mg,Yu(t);var u=n.contextType;typeof u=="object"&&u!==null?c.context=Rt(u):(u=ut(n)?Er:Ye.current,c.context=pi(t,u)),c.state=t.memoizedState,u=n.getDerivedStateFromProps,typeof u=="function"&&(ou(t,n,u,i),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&ma.enqueueReplaceState(c,c.state,null),ta(t,i,c,l),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function is(t,n,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(L(309));var l=i.stateNode}if(!l)throw Error(L(147,t));var c=l,u=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===u?n.ref:(n=function(h){var p=c.refs;p===Mg&&(p=c.refs={}),h===null?delete p[u]:p[u]=h},n._stringRef=u,n)}if(typeof t!="string")throw Error(L(284));if(!i._owner)throw Error(L(290,t))}return t}function Ao(t,n){throw t=Object.prototype.toString.call(n),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function th(t){var n=t._init;return n(t._payload)}function $g(t){function n(k,w){if(t){var I=k.deletions;I===null?(k.deletions=[w],k.flags|=16):I.push(w)}}function i(k,w){if(!t)return null;for(;w!==null;)n(k,w),w=w.sibling;return null}function l(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function c(k,w){return k=rr(k,w),k.index=0,k.sibling=null,k}function u(k,w,I){return k.index=I,t?(I=k.alternate,I!==null?(I=I.index,I<w?(k.flags|=2,w):I):(k.flags|=2,w)):(k.flags|=1048576,w)}function h(k){return t&&k.alternate===null&&(k.flags|=2),k}function p(k,w,I,R){return w===null||w.tag!==6?(w=Nl(I,k.mode,R),w.return=k,w):(w=c(w,I),w.return=k,w)}function v(k,w,I,R){var j=I.type;return j===Xr?O(k,w,I.props.children,R,I.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Jn&&th(j)===w.type)?(R=c(w,I.props),R.ref=is(k,w,I),R.return=k,R):(R=zo(I.type,I.key,I.props,null,k.mode,R),R.ref=is(k,w,I),R.return=k,R)}function T(k,w,I,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=xl(I,k.mode,R),w.return=k,w):(w=c(w,I.children||[]),w.return=k,w)}function O(k,w,I,R,j){return w===null||w.tag!==7?(w=Cr(I,k.mode,R,j),w.return=k,w):(w=c(w,I),w.return=k,w)}function P(k,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nl(""+w,k.mode,I),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fo:return I=zo(w.type,w.key,w.props,null,k.mode,I),I.ref=is(k,null,w),I.return=k,I;case Yr:return w=xl(w,k.mode,I),w.return=k,w;case Jn:var R=w._init;return P(k,R(w._payload),I)}if(ls(w)||Zi(w))return w=Cr(w,k.mode,I,null),w.return=k,w;Ao(k,w)}return null}function N(k,w,I,R){var j=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return j!==null?null:p(k,w,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case fo:return I.key===j?v(k,w,I,R):null;case Yr:return I.key===j?T(k,w,I,R):null;case Jn:return j=I._init,N(k,w,j(I._payload),R)}if(ls(I)||Zi(I))return j!==null?null:O(k,w,I,R,null);Ao(k,I)}return null}function M(k,w,I,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return k=k.get(I)||null,p(w,k,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case fo:return k=k.get(R.key===null?I:R.key)||null,v(w,k,R,j);case Yr:return k=k.get(R.key===null?I:R.key)||null,T(w,k,R,j);case Jn:var B=R._init;return M(k,w,I,B(R._payload),j)}if(ls(R)||Zi(R))return k=k.get(I)||null,O(w,k,R,j,null);Ao(w,R)}return null}function z(k,w,I,R){for(var j=null,B=null,W=w,Y=w=0,C=null;W!==null&&Y<I.length;Y++){W.index>Y?(C=W,W=null):C=W.sibling;var Z=N(k,W,I[Y],R);if(Z===null){W===null&&(W=C);break}t&&W&&Z.alternate===null&&n(k,W),w=u(Z,w,Y),B===null?j=Z:B.sibling=Z,B=Z,W=C}if(Y===I.length)return i(k,W),Ae&&wr(k,Y),j;if(W===null){for(;Y<I.length;Y++)W=P(k,I[Y],R),W!==null&&(w=u(W,w,Y),B===null?j=W:B.sibling=W,B=W);return Ae&&wr(k,Y),j}for(W=l(k,W);Y<I.length;Y++)C=M(W,k,Y,I[Y],R),C!==null&&(t&&C.alternate!==null&&W.delete(C.key===null?Y:C.key),w=u(C,w,Y),B===null?j=C:B.sibling=C,B=C);return t&&W.forEach(function(ft){return n(k,ft)}),Ae&&wr(k,Y),j}function U(k,w,I,R){var j=Zi(I);if(typeof j!="function")throw Error(L(150));if(I=j.call(I),I==null)throw Error(L(151));for(var B=j=null,W=w,Y=w=0,C=null,Z=I.next();W!==null&&!Z.done;Y++,Z=I.next()){W.index>Y?(C=W,W=null):C=W.sibling;var ft=N(k,W,Z.value,R);if(ft===null){W===null&&(W=C);break}t&&W&&ft.alternate===null&&n(k,W),w=u(ft,w,Y),B===null?j=ft:B.sibling=ft,B=ft,W=C}if(Z.done)return i(k,W),Ae&&wr(k,Y),j;if(W===null){for(;!Z.done;Y++,Z=I.next())Z=P(k,Z.value,R),Z!==null&&(w=u(Z,w,Y),B===null?j=Z:B.sibling=Z,B=Z);return Ae&&wr(k,Y),j}for(W=l(k,W);!Z.done;Y++,Z=I.next())Z=M(W,k,Y,Z.value,R),Z!==null&&(t&&Z.alternate!==null&&W.delete(Z.key===null?Y:Z.key),w=u(Z,w,Y),B===null?j=Z:B.sibling=Z,B=Z);return t&&W.forEach(function(hn){return n(k,hn)}),Ae&&wr(k,Y),j}function he(k,w,I,R){if(typeof I=="object"&&I!==null&&I.type===Xr&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case fo:e:{for(var j=I.key,B=w;B!==null;){if(B.key===j){if(j=I.type,j===Xr){if(B.tag===7){i(k,B.sibling),w=c(B,I.props.children),w.return=k,k=w;break e}}else if(B.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Jn&&th(j)===B.type){i(k,B.sibling),w=c(B,I.props),w.ref=is(k,B,I),w.return=k,k=w;break e}i(k,B);break}else n(k,B);B=B.sibling}I.type===Xr?(w=Cr(I.props.children,k.mode,R,I.key),w.return=k,k=w):(R=zo(I.type,I.key,I.props,null,k.mode,R),R.ref=is(k,w,I),R.return=k,k=R)}return h(k);case Yr:e:{for(B=I.key;w!==null;){if(w.key===B)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){i(k,w.sibling),w=c(w,I.children||[]),w.return=k,k=w;break e}else{i(k,w);break}else n(k,w);w=w.sibling}w=xl(I,k.mode,R),w.return=k,k=w}return h(k);case Jn:return B=I._init,he(k,w,B(I._payload),R)}if(ls(I))return z(k,w,I,R);if(Zi(I))return U(k,w,I,R);Ao(k,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(i(k,w.sibling),w=c(w,I),w.return=k,k=w):(i(k,w),w=Nl(I,k.mode,R),w.return=k,k=w),h(k)):i(k,w)}return he}var yi=$g(!0),zg=$g(!1),Fs={},dn=ar(Fs),Ds=ar(Fs),Rs=ar(Fs);function Ar(t){if(t===Fs)throw Error(L(174));return t}function Xu(t,n){switch(ye(Rs,n),ye(Ds,t),ye(dn,Fs),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:zl(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=zl(n,t)}we(dn),ye(dn,n)}function vi(){we(dn),we(Ds),we(Rs)}function Ug(t){Ar(Rs.current);var n=Ar(dn.current),i=zl(n,t.type);n!==i&&(ye(Ds,t),ye(dn,i))}function Qu(t){Ds.current===t&&(we(dn),we(Ds))}var Ie=ar(0);function na(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Tl=[];function Zu(){for(var t=0;t<Tl.length;t++)Tl[t]._workInProgressVersionPrimary=null;Tl.length=0}var Lo=Ln.ReactCurrentDispatcher,kl=Ln.ReactCurrentBatchConfig,xr=0,Ce=null,Be=null,ze=null,ra=!1,ms=!1,_s=0,l1=0;function qe(){throw Error(L(321))}function ec(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!qt(t[i],n[i]))return!1;return!0}function tc(t,n,i,l,c,u){if(xr=u,Ce=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Lo.current=t===null||t.memoizedState===null?d1:h1,t=i(l,c),ms){u=0;do{if(ms=!1,_s=0,25<=u)throw Error(L(301));u+=1,ze=Be=null,n.updateQueue=null,Lo.current=g1,t=i(l,c)}while(ms)}if(Lo.current=ia,n=Be!==null&&Be.next!==null,xr=0,ze=Be=Ce=null,ra=!1,n)throw Error(L(300));return t}function nc(){var t=_s!==0;return _s=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Ce.memoizedState=ze=t:ze=ze.next=t,ze}function _t(){if(Be===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var n=ze===null?Ce.memoizedState:ze.next;if(n!==null)ze=n,Be=t;else{if(t===null)throw Error(L(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},ze===null?Ce.memoizedState=ze=t:ze=ze.next=t}return ze}function Ls(t,n){return typeof n=="function"?n(t):n}function Al(t){var n=_t(),i=n.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=t;var l=Be,c=l.baseQueue,u=i.pending;if(u!==null){if(c!==null){var h=c.next;c.next=u.next,u.next=h}l.baseQueue=c=u,i.pending=null}if(c!==null){u=c.next,l=l.baseState;var p=h=null,v=null,T=u;do{var O=T.lane;if((xr&O)===O)v!==null&&(v=v.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),l=T.hasEagerState?T.eagerState:t(l,T.action);else{var P={lane:O,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};v===null?(p=v=P,h=l):v=v.next=P,Ce.lanes|=O,Pr|=O}T=T.next}while(T!==null&&T!==u);v===null?h=l:v.next=p,qt(l,n.memoizedState)||(at=!0),n.memoizedState=l,n.baseState=h,n.baseQueue=v,i.lastRenderedState=l}if(t=i.interleaved,t!==null){c=t;do u=c.lane,Ce.lanes|=u,Pr|=u,c=c.next;while(c!==t)}else c===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function Il(t){var n=_t(),i=n.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=t;var l=i.dispatch,c=i.pending,u=n.memoizedState;if(c!==null){i.pending=null;var h=c=c.next;do u=t(u,h.action),h=h.next;while(h!==c);qt(u,n.memoizedState)||(at=!0),n.memoizedState=u,n.baseQueue===null&&(n.baseState=u),i.lastRenderedState=u}return[u,l]}function Fg(){}function jg(t,n){var i=Ce,l=_t(),c=n(),u=!qt(l.memoizedState,c);if(u&&(l.memoizedState=c,at=!0),l=l.queue,rc(Kg.bind(null,i,l,t),[t]),l.getSnapshot!==n||u||ze!==null&&ze.memoizedState.tag&1){if(i.flags|=2048,bs(9,Jg.bind(null,i,l,c,n),void 0,null),Ue===null)throw Error(L(349));(xr&30)!==0||Vg(i,n,c)}return c}function Vg(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=Ce.updateQueue,n===null?(n={lastEffect:null,stores:null},Ce.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function Jg(t,n,i,l){n.value=i,n.getSnapshot=l,Wg(n)&&qg(t)}function Kg(t,n,i){return i(function(){Wg(n)&&qg(t)})}function Wg(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!qt(t,i)}catch{return!0}}function qg(t){var n=Rn(t,1);n!==null&&Wt(n,t,1,-1)}function nh(t){var n=un();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:t},n.queue=t,t=t.dispatch=f1.bind(null,Ce,t),[n.memoizedState,t]}function bs(t,n,i,l){return t={tag:t,create:n,destroy:i,deps:l,next:null},n=Ce.updateQueue,n===null?(n={lastEffect:null,stores:null},Ce.updateQueue=n,n.lastEffect=t.next=t):(i=n.lastEffect,i===null?n.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,n.lastEffect=t)),t}function Hg(){return _t().memoizedState}function bo(t,n,i,l){var c=un();Ce.flags|=t,c.memoizedState=bs(1|n,i,void 0,l===void 0?null:l)}function ya(t,n,i,l){var c=_t();l=l===void 0?null:l;var u=void 0;if(Be!==null){var h=Be.memoizedState;if(u=h.destroy,l!==null&&ec(l,h.deps)){c.memoizedState=bs(n,i,u,l);return}}Ce.flags|=t,c.memoizedState=bs(1|n,i,u,l)}function rh(t,n){return bo(8390656,8,t,n)}function rc(t,n){return ya(2048,8,t,n)}function Gg(t,n){return ya(4,2,t,n)}function Yg(t,n){return ya(4,4,t,n)}function Xg(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Qg(t,n,i){return i=i!=null?i.concat([t]):null,ya(4,4,Xg.bind(null,n,t),i)}function ic(){}function Zg(t,n){var i=_t();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&ec(n,l[1])?l[0]:(i.memoizedState=[t,n],t)}function ep(t,n){var i=_t();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&ec(n,l[1])?l[0]:(t=t(),i.memoizedState=[t,n],t)}function tp(t,n,i){return(xr&21)===0?(t.baseState&&(t.baseState=!1,at=!0),t.memoizedState=i):(qt(i,n)||(i=ig(),Ce.lanes|=i,Pr|=i,t.baseState=!0),n)}function u1(t,n){var i=ce;ce=i!==0&&4>i?i:4,t(!0);var l=kl.transition;kl.transition={};try{t(!1),n()}finally{ce=i,kl.transition=l}}function np(){return _t().memoizedState}function c1(t,n,i){var l=nr(t);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},rp(t))ip(n,i);else if(i=Lg(t,n,i,l),i!==null){var c=tt();Wt(i,t,l,c),sp(i,n,l)}}function f1(t,n,i){var l=nr(t),c={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(rp(t))ip(n,c);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=n.lastRenderedReducer,u!==null))try{var h=n.lastRenderedState,p=u(h,i);if(c.hasEagerState=!0,c.eagerState=p,qt(p,h)){var v=n.interleaved;v===null?(c.next=c,Gu(n)):(c.next=v.next,v.next=c),n.interleaved=c;return}}catch{}finally{}i=Lg(t,n,c,l),i!==null&&(c=tt(),Wt(i,t,l,c),sp(i,n,l))}}function rp(t){var n=t.alternate;return t===Ce||n!==null&&n===Ce}function ip(t,n){ms=ra=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function sp(t,n,i){if((i&4194240)!==0){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,bu(t,i)}}var ia={readContext:Rt,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},d1={readContext:Rt,useCallback:function(t,n){return un().memoizedState=[t,n===void 0?null:n],t},useContext:Rt,useEffect:rh,useImperativeHandle:function(t,n,i){return i=i!=null?i.concat([t]):null,bo(4194308,4,Xg.bind(null,n,t),i)},useLayoutEffect:function(t,n){return bo(4194308,4,t,n)},useInsertionEffect:function(t,n){return bo(4,2,t,n)},useMemo:function(t,n){var i=un();return n=n===void 0?null:n,t=t(),i.memoizedState=[t,n],t},useReducer:function(t,n,i){var l=un();return n=i!==void 0?i(n):n,l.memoizedState=l.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},l.queue=t,t=t.dispatch=c1.bind(null,Ce,t),[l.memoizedState,t]},useRef:function(t){var n=un();return t={current:t},n.memoizedState=t},useState:nh,useDebugValue:ic,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=nh(!1),n=t[0];return t=u1.bind(null,t[1]),un().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,i){var l=Ce,c=un();if(Ae){if(i===void 0)throw Error(L(407));i=i()}else{if(i=n(),Ue===null)throw Error(L(349));(xr&30)!==0||Vg(l,n,i)}c.memoizedState=i;var u={value:i,getSnapshot:n};return c.queue=u,rh(Kg.bind(null,l,u,t),[t]),l.flags|=2048,bs(9,Jg.bind(null,l,u,i,n),void 0,null),i},useId:function(){var t=un(),n=Ue.identifierPrefix;if(Ae){var i=Nn,l=En;i=(l&~(1<<32-Kt(l)-1)).toString(32)+i,n=":"+n+"R"+i,i=_s++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=l1++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},h1={readContext:Rt,useCallback:Zg,useContext:Rt,useEffect:rc,useImperativeHandle:Qg,useInsertionEffect:Gg,useLayoutEffect:Yg,useMemo:ep,useReducer:Al,useRef:Hg,useState:function(){return Al(Ls)},useDebugValue:ic,useDeferredValue:function(t){var n=_t();return tp(n,Be.memoizedState,t)},useTransition:function(){var t=Al(Ls)[0],n=_t().memoizedState;return[t,n]},useMutableSource:Fg,useSyncExternalStore:jg,useId:np,unstable_isNewReconciler:!1},g1={readContext:Rt,useCallback:Zg,useContext:Rt,useEffect:rc,useImperativeHandle:Qg,useInsertionEffect:Gg,useLayoutEffect:Yg,useMemo:ep,useReducer:Il,useRef:Hg,useState:function(){return Il(Ls)},useDebugValue:ic,useDeferredValue:function(t){var n=_t();return Be===null?n.memoizedState=t:tp(n,Be.memoizedState,t)},useTransition:function(){var t=Il(Ls)[0],n=_t().memoizedState;return[t,n]},useMutableSource:Fg,useSyncExternalStore:jg,useId:np,unstable_isNewReconciler:!1};function wi(t,n){try{var i="",l=n;do i+=jv(l),l=l.return;while(l);var c=i}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:n,stack:c,digest:null}}function Cl(t,n,i){return{value:t,source:null,stack:i!=null?i:null,digest:n!=null?n:null}}function lu(t,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var p1=typeof WeakMap=="function"?WeakMap:Map;function op(t,n,i){i=Pn(-1,i),i.tag=3,i.payload={element:null};var l=n.value;return i.callback=function(){oa||(oa=!0,vu=l),lu(t,n)},i}function ap(t,n,i){i=Pn(-1,i),i.tag=3;var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var c=n.value;i.payload=function(){return l(c)},i.callback=function(){lu(t,n)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(i.callback=function(){lu(t,n),typeof l!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var h=n.stack;this.componentDidCatch(n.value,{componentStack:h!==null?h:""})}),i}function ih(t,n,i){var l=t.pingCache;if(l===null){l=t.pingCache=new p1;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(i)||(c.add(i),t=P1.bind(null,t,n,i),n.then(t,t))}function sh(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function oh(t,n,i,l,c){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=Pn(-1,1),n.tag=2,er(i,n,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=c,t)}var m1=Ln.ReactCurrentOwner,at=!1;function et(t,n,i,l){n.child=t===null?zg(n,null,i,l):yi(n,t.child,i,l)}function ah(t,n,i,l,c){i=i.render;var u=n.ref;return di(n,c),l=tc(t,n,i,l,u,c),i=nc(),t!==null&&!at?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,_n(t,n,c)):(Ae&&i&&Vu(n),n.flags|=1,et(t,n,l,c),n.child)}function lh(t,n,i,l,c){if(t===null){var u=i.type;return typeof u=="function"&&!dc(u)&&u.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=u,lp(t,n,u,l,c)):(t=zo(i.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(u=t.child,(t.lanes&c)===0){var h=u.memoizedProps;if(i=i.compare,i=i!==null?i:Ns,i(h,l)&&t.ref===n.ref)return _n(t,n,c)}return n.flags|=1,t=rr(u,l),t.ref=n.ref,t.return=n,n.child=t}function lp(t,n,i,l,c){if(t!==null){var u=t.memoizedProps;if(Ns(u,l)&&t.ref===n.ref)if(at=!1,n.pendingProps=l=u,(t.lanes&c)!==0)(t.flags&131072)!==0&&(at=!0);else return n.lanes=t.lanes,_n(t,n,c)}return uu(t,n,i,l,c)}function up(t,n,i){var l=n.pendingProps,c=l.children,u=t!==null?t.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(ai,yt),yt|=i;else{if((i&1073741824)===0)return t=u!==null?u.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,ye(ai,yt),yt|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=u!==null?u.baseLanes:i,ye(ai,yt),yt|=l}else u!==null?(l=u.baseLanes|i,n.memoizedState=null):l=i,ye(ai,yt),yt|=l;return et(t,n,c,i),n.child}function cp(t,n){var i=n.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function uu(t,n,i,l,c){var u=ut(i)?Er:Ye.current;return u=pi(n,u),di(n,c),i=tc(t,n,i,l,u,c),l=nc(),t!==null&&!at?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,_n(t,n,c)):(Ae&&l&&Vu(n),n.flags|=1,et(t,n,i,c),n.child)}function uh(t,n,i,l,c){if(ut(i)){var u=!0;Yo(n)}else u=!1;if(di(n,c),n.stateNode===null)Mo(t,n),Bg(n,i,l),au(n,i,l,c),l=!0;else if(t===null){var h=n.stateNode,p=n.memoizedProps;h.props=p;var v=h.context,T=i.contextType;typeof T=="object"&&T!==null?T=Rt(T):(T=ut(i)?Er:Ye.current,T=pi(n,T));var O=i.getDerivedStateFromProps,P=typeof O=="function"||typeof h.getSnapshotBeforeUpdate=="function";P||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==l||v!==T)&&eh(n,h,l,T),Kn=!1;var N=n.memoizedState;h.state=N,ta(n,l,h,c),v=n.memoizedState,p!==l||N!==v||lt.current||Kn?(typeof O=="function"&&(ou(n,i,O,l),v=n.memoizedState),(p=Kn||Zd(n,i,p,l,N,v,T))?(P||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=v),h.props=l,h.state=v,h.context=T,l=p):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{h=n.stateNode,bg(t,n),p=n.memoizedProps,T=n.type===n.elementType?p:jt(n.type,p),h.props=T,P=n.pendingProps,N=h.context,v=i.contextType,typeof v=="object"&&v!==null?v=Rt(v):(v=ut(i)?Er:Ye.current,v=pi(n,v));var M=i.getDerivedStateFromProps;(O=typeof M=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==P||N!==v)&&eh(n,h,l,v),Kn=!1,N=n.memoizedState,h.state=N,ta(n,l,h,c);var z=n.memoizedState;p!==P||N!==z||lt.current||Kn?(typeof M=="function"&&(ou(n,i,M,l),z=n.memoizedState),(T=Kn||Zd(n,i,T,l,N,z,v)||!1)?(O||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,z,v),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,z,v)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||p===t.memoizedProps&&N===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&N===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=z),h.props=l,h.state=z,h.context=v,l=T):(typeof h.componentDidUpdate!="function"||p===t.memoizedProps&&N===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&N===t.memoizedState||(n.flags|=1024),l=!1)}return cu(t,n,i,l,u,c)}function cu(t,n,i,l,c,u){cp(t,n);var h=(n.flags&128)!==0;if(!l&&!h)return c&&Hd(n,i,!1),_n(t,n,u);l=n.stateNode,m1.current=n;var p=h&&typeof i.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,t!==null&&h?(n.child=yi(n,t.child,null,u),n.child=yi(n,null,p,u)):et(t,n,p,u),n.memoizedState=l.state,c&&Hd(n,i,!0),n.child}function fp(t){var n=t.stateNode;n.pendingContext?qd(t,n.pendingContext,n.pendingContext!==n.context):n.context&&qd(t,n.context,!1),Xu(t,n.containerInfo)}function ch(t,n,i,l,c){return mi(),Ku(c),n.flags|=256,et(t,n,i,l),n.child}var fu={dehydrated:null,treeContext:null,retryLane:0};function du(t){return{baseLanes:t,cachePool:null,transitions:null}}function dp(t,n,i){var l=n.pendingProps,c=Ie.current,u=!1,h=(n.flags&128)!==0,p;if((p=h)||(p=t!==null&&t.memoizedState===null?!1:(c&2)!==0),p?(u=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),ye(Ie,c&1),t===null)return iu(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(h=l.children,t=l.fallback,u?(l=n.mode,u=n.child,h={mode:"hidden",children:h},(l&1)===0&&u!==null?(u.childLanes=0,u.pendingProps=h):u=Sa(h,l,0,null),t=Cr(t,l,i,null),u.return=n,t.return=n,u.sibling=t,n.child=u,n.child.memoizedState=du(i),n.memoizedState=fu,t):sc(n,h));if(c=t.memoizedState,c!==null&&(p=c.dehydrated,p!==null))return y1(t,n,h,l,p,c,i);if(u){u=l.fallback,h=n.mode,c=t.child,p=c.sibling;var v={mode:"hidden",children:l.children};return(h&1)===0&&n.child!==c?(l=n.child,l.childLanes=0,l.pendingProps=v,n.deletions=null):(l=rr(c,v),l.subtreeFlags=c.subtreeFlags&14680064),p!==null?u=rr(p,u):(u=Cr(u,h,i,null),u.flags|=2),u.return=n,l.return=n,l.sibling=u,n.child=l,l=u,u=n.child,h=t.child.memoizedState,h=h===null?du(i):{baseLanes:h.baseLanes|i,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=t.childLanes&~i,n.memoizedState=fu,l}return u=t.child,t=u.sibling,l=rr(u,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=i),l.return=n,l.sibling=null,t!==null&&(i=n.deletions,i===null?(n.deletions=[t],n.flags|=16):i.push(t)),n.child=l,n.memoizedState=null,l}function sc(t,n){return n=Sa({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Io(t,n,i,l){return l!==null&&Ku(l),yi(n,t.child,null,i),t=sc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function y1(t,n,i,l,c,u,h){if(i)return n.flags&256?(n.flags&=-257,l=Cl(Error(L(422))),Io(t,n,h,l)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(u=l.fallback,c=n.mode,l=Sa({mode:"visible",children:l.children},c,0,null),u=Cr(u,c,h,null),u.flags|=2,l.return=n,u.return=n,l.sibling=u,n.child=l,(n.mode&1)!==0&&yi(n,t.child,null,h),n.child.memoizedState=du(h),n.memoizedState=fu,u);if((n.mode&1)===0)return Io(t,n,h,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var p=l.dgst;return l=p,u=Error(L(419)),l=Cl(u,l,void 0),Io(t,n,h,l)}if(p=(h&t.childLanes)!==0,at||p){if(l=Ue,l!==null){switch(h&-h){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(l.suspendedLanes|h))!==0?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,Rn(t,c),Wt(l,t,c,-1))}return fc(),l=Cl(Error(L(421))),Io(t,n,h,l)}return c.data==="$?"?(n.flags|=128,n.child=t.child,n=O1.bind(null,t),c._reactRetry=n,null):(t=u.treeContext,vt=Zn(c.nextSibling),wt=n,Ae=!0,Jt=null,t!==null&&(xt[Pt++]=En,xt[Pt++]=Nn,xt[Pt++]=Nr,En=t.id,Nn=t.overflow,Nr=n),n=sc(n,l.children),n.flags|=4096,n)}function fh(t,n,i){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),su(t.return,n,i)}function El(t,n,i,l,c){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:c}:(u.isBackwards=n,u.rendering=null,u.renderingStartTime=0,u.last=l,u.tail=i,u.tailMode=c)}function hp(t,n,i){var l=n.pendingProps,c=l.revealOrder,u=l.tail;if(et(t,n,l.children,i),l=Ie.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fh(t,i,n);else if(t.tag===19)fh(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}if(ye(Ie,l),(n.mode&1)===0)n.memoizedState=null;else switch(c){case"forwards":for(i=n.child,c=null;i!==null;)t=i.alternate,t!==null&&na(t)===null&&(c=i),i=i.sibling;i=c,i===null?(c=n.child,n.child=null):(c=i.sibling,i.sibling=null),El(n,!1,c,i,u);break;case"backwards":for(i=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&na(t)===null){n.child=c;break}t=c.sibling,c.sibling=i,i=c,c=t}El(n,!0,i,null,u);break;case"together":El(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Mo(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function _n(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),Pr|=n.lanes,(i&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(L(153));if(n.child!==null){for(t=n.child,i=rr(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=rr(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function v1(t,n,i){switch(n.tag){case 3:fp(n),mi();break;case 5:Ug(n);break;case 1:ut(n.type)&&Yo(n);break;case 4:Xu(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,c=n.memoizedProps.value;ye(Zo,l._currentValue),l._currentValue=c;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(ye(Ie,Ie.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?dp(t,n,i):(ye(Ie,Ie.current&1),t=_n(t,n,i),t!==null?t.sibling:null);ye(Ie,Ie.current&1);break;case 19:if(l=(i&n.childLanes)!==0,(t.flags&128)!==0){if(l)return hp(t,n,i);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ye(Ie,Ie.current),l)break;return null;case 22:case 23:return n.lanes=0,up(t,n,i)}return _n(t,n,i)}var gp,hu,pp,mp;gp=function(t,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};hu=function(){};pp=function(t,n,i,l){var c=t.memoizedProps;if(c!==l){t=n.stateNode,Ar(dn.current);var u=null;switch(i){case"input":c=bl(t,c),l=bl(t,l),u=[];break;case"select":c=Ee({},c,{value:void 0}),l=Ee({},l,{value:void 0}),u=[];break;case"textarea":c=$l(t,c),l=$l(t,l),u=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(t.onclick=Ho)}Ul(i,l);var h;i=null;for(T in c)if(!l.hasOwnProperty(T)&&c.hasOwnProperty(T)&&c[T]!=null)if(T==="style"){var p=c[T];for(h in p)p.hasOwnProperty(h)&&(i||(i={}),i[h]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(Ss.hasOwnProperty(T)?u||(u=[]):(u=u||[]).push(T,null));for(T in l){var v=l[T];if(p=c!=null?c[T]:void 0,l.hasOwnProperty(T)&&v!==p&&(v!=null||p!=null))if(T==="style")if(p){for(h in p)!p.hasOwnProperty(h)||v&&v.hasOwnProperty(h)||(i||(i={}),i[h]="");for(h in v)v.hasOwnProperty(h)&&p[h]!==v[h]&&(i||(i={}),i[h]=v[h])}else i||(u||(u=[]),u.push(T,i)),i=v;else T==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,p=p?p.__html:void 0,v!=null&&p!==v&&(u=u||[]).push(T,v)):T==="children"?typeof v!="string"&&typeof v!="number"||(u=u||[]).push(T,""+v):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(Ss.hasOwnProperty(T)?(v!=null&&T==="onScroll"&&ve("scroll",t),u||p===v||(u=[])):(u=u||[]).push(T,v))}i&&(u=u||[]).push("style",i);var T=u;(n.updateQueue=T)&&(n.flags|=4)}};mp=function(t,n,i,l){i!==l&&(n.flags|=4)};function ss(t,n){if(!Ae)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function He(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(n)for(var c=t.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=i,n}function w1(t,n,i){var l=n.pendingProps;switch(Ju(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(n),null;case 1:return ut(n.type)&&Go(),He(n),null;case 3:return l=n.stateNode,vi(),we(lt),we(Ye),Zu(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(ko(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Jt!==null&&(Tu(Jt),Jt=null))),hu(t,n),He(n),null;case 5:Qu(n);var c=Ar(Rs.current);if(i=n.type,t!==null&&n.stateNode!=null)pp(t,n,i,l,c),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(L(166));return He(n),null}if(t=Ar(dn.current),ko(n)){l=n.stateNode,i=n.type;var u=n.memoizedProps;switch(l[cn]=n,l[Os]=u,t=(n.mode&1)!==0,i){case"dialog":ve("cancel",l),ve("close",l);break;case"iframe":case"object":case"embed":ve("load",l);break;case"video":case"audio":for(c=0;c<cs.length;c++)ve(cs[c],l);break;case"source":ve("error",l);break;case"img":case"image":case"link":ve("error",l),ve("load",l);break;case"details":ve("toggle",l);break;case"input":Sd(l,u),ve("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!u.multiple},ve("invalid",l);break;case"textarea":kd(l,u),ve("invalid",l)}Ul(i,u),c=null;for(var h in u)if(u.hasOwnProperty(h)){var p=u[h];h==="children"?typeof p=="string"?l.textContent!==p&&(u.suppressHydrationWarning!==!0&&To(l.textContent,p,t),c=["children",p]):typeof p=="number"&&l.textContent!==""+p&&(u.suppressHydrationWarning!==!0&&To(l.textContent,p,t),c=["children",""+p]):Ss.hasOwnProperty(h)&&p!=null&&h==="onScroll"&&ve("scroll",l)}switch(i){case"input":ho(l),Td(l,u,!0);break;case"textarea":ho(l),Ad(l);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(l.onclick=Ho)}l=c,n.updateQueue=l,l!==null&&(n.flags|=4)}else{h=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vh(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof l.is=="string"?t=h.createElement(i,{is:l.is}):(t=h.createElement(i),i==="select"&&(h=t,l.multiple?h.multiple=!0:l.size&&(h.size=l.size))):t=h.createElementNS(t,i),t[cn]=n,t[Os]=l,gp(t,n,!1,!1),n.stateNode=t;e:{switch(h=Fl(i,l),i){case"dialog":ve("cancel",t),ve("close",t),c=l;break;case"iframe":case"object":case"embed":ve("load",t),c=l;break;case"video":case"audio":for(c=0;c<cs.length;c++)ve(cs[c],t);c=l;break;case"source":ve("error",t),c=l;break;case"img":case"image":case"link":ve("error",t),ve("load",t),c=l;break;case"details":ve("toggle",t),c=l;break;case"input":Sd(t,l),c=bl(t,l),ve("invalid",t);break;case"option":c=l;break;case"select":t._wrapperState={wasMultiple:!!l.multiple},c=Ee({},l,{value:void 0}),ve("invalid",t);break;case"textarea":kd(t,l),c=$l(t,l),ve("invalid",t);break;default:c=l}Ul(i,c),p=c;for(u in p)if(p.hasOwnProperty(u)){var v=p[u];u==="style"?Wh(t,v):u==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&Jh(t,v)):u==="children"?typeof v=="string"?(i!=="textarea"||v!=="")&&Ts(t,v):typeof v=="number"&&Ts(t,""+v):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ss.hasOwnProperty(u)?v!=null&&u==="onScroll"&&ve("scroll",t):v!=null&&Pu(t,u,v,h))}switch(i){case"input":ho(t),Td(t,l,!1);break;case"textarea":ho(t),Ad(t);break;case"option":l.value!=null&&t.setAttribute("value",""+ir(l.value));break;case"select":t.multiple=!!l.multiple,u=l.value,u!=null?li(t,!!l.multiple,u,!1):l.defaultValue!=null&&li(t,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=Ho)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return He(n),null;case 6:if(t&&n.stateNode!=null)mp(t,n,t.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(L(166));if(i=Ar(Rs.current),Ar(dn.current),ko(n)){if(l=n.stateNode,i=n.memoizedProps,l[cn]=n,(u=l.nodeValue!==i)&&(t=wt,t!==null))switch(t.tag){case 3:To(l.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&To(l.nodeValue,i,(t.mode&1)!==0)}u&&(n.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[cn]=n,n.stateNode=l}return He(n),null;case 13:if(we(Ie),l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&vt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)_g(),mi(),n.flags|=98560,u=!1;else if(u=ko(n),l!==null&&l.dehydrated!==null){if(t===null){if(!u)throw Error(L(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(L(317));u[cn]=n}else mi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;He(n),u=!1}else Jt!==null&&(Tu(Jt),Jt=null),u=!0;if(!u)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(l=l!==null,l!==(t!==null&&t.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(Ie.current&1)!==0?$e===0&&($e=3):fc())),n.updateQueue!==null&&(n.flags|=4),He(n),null);case 4:return vi(),hu(t,n),t===null&&xs(n.stateNode.containerInfo),He(n),null;case 10:return Hu(n.type._context),He(n),null;case 17:return ut(n.type)&&Go(),He(n),null;case 19:if(we(Ie),u=n.memoizedState,u===null)return He(n),null;if(l=(n.flags&128)!==0,h=u.rendering,h===null)if(l)ss(u,!1);else{if($e!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(h=na(t),h!==null){for(n.flags|=128,ss(u,!1),l=h.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=i,i=n.child;i!==null;)u=i,t=l,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,t=h.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return ye(Ie,Ie.current&1|2),n.child}t=t.sibling}u.tail!==null&&Pe()>Si&&(n.flags|=128,l=!0,ss(u,!1),n.lanes=4194304)}else{if(!l)if(t=na(h),t!==null){if(n.flags|=128,l=!0,i=t.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),ss(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Ae)return He(n),null}else 2*Pe()-u.renderingStartTime>Si&&i!==1073741824&&(n.flags|=128,l=!0,ss(u,!1),n.lanes=4194304);u.isBackwards?(h.sibling=n.child,n.child=h):(i=u.last,i!==null?i.sibling=h:n.child=h,u.last=h)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Pe(),n.sibling=null,i=Ie.current,ye(Ie,l?i&1|2:i&1),n):(He(n),null);case 22:case 23:return cc(),l=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(yt&1073741824)!==0&&(He(n),n.subtreeFlags&6&&(n.flags|=8192)):He(n),null;case 24:return null;case 25:return null}throw Error(L(156,n.tag))}function S1(t,n){switch(Ju(n),n.tag){case 1:return ut(n.type)&&Go(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return vi(),we(lt),we(Ye),Zu(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Qu(n),null;case 13:if(we(Ie),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(L(340));mi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return we(Ie),null;case 4:return vi(),null;case 10:return Hu(n.type._context),null;case 22:case 23:return cc(),null;case 24:return null;default:return null}}var Co=!1,Ge=!1,T1=typeof WeakSet=="function"?WeakSet:Set,V=null;function oi(t,n){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){xe(t,n,l)}else i.current=null}function gu(t,n,i){try{i()}catch(l){xe(t,n,l)}}var dh=!1;function k1(t,n){if(Xl=Ko,t=Sg(),ju(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var c=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var h=0,p=-1,v=-1,T=0,O=0,P=t,N=null;t:for(;;){for(var M;P!==i||c!==0&&P.nodeType!==3||(p=h+c),P!==u||l!==0&&P.nodeType!==3||(v=h+l),P.nodeType===3&&(h+=P.nodeValue.length),(M=P.firstChild)!==null;)N=P,P=M;for(;;){if(P===t)break t;if(N===i&&++T===c&&(p=h),N===u&&++O===l&&(v=h),(M=P.nextSibling)!==null)break;P=N,N=P.parentNode}P=M}i=p===-1||v===-1?null:{start:p,end:v}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ql={focusedElem:t,selectionRange:i},Ko=!1,V=n;V!==null;)if(n=V,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,V=t;else for(;V!==null;){n=V;try{var z=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var U=z.memoizedProps,he=z.memoizedState,k=n.stateNode,w=k.getSnapshotBeforeUpdate(n.elementType===n.type?U:jt(n.type,U),he);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=n.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(R){xe(n,n.return,R)}if(t=n.sibling,t!==null){t.return=n.return,V=t;break}V=n.return}return z=dh,dh=!1,z}function ys(t,n,i){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&t)===t){var u=c.destroy;c.destroy=void 0,u!==void 0&&gu(n,i,u)}c=c.next}while(c!==l)}}function va(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var l=i.create;i.destroy=l()}i=i.next}while(i!==n)}}function pu(t){var n=t.ref;if(n!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof n=="function"?n(t):n.current=t}}function yp(t){var n=t.alternate;n!==null&&(t.alternate=null,yp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[cn],delete n[Os],delete n[tu],delete n[i1],delete n[s1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vp(t){return t.tag===5||t.tag===3||t.tag===4}function hh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mu(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Ho));else if(l!==4&&(t=t.child,t!==null))for(mu(t,n,i),t=t.sibling;t!==null;)mu(t,n,i),t=t.sibling}function yu(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(l!==4&&(t=t.child,t!==null))for(yu(t,n,i),t=t.sibling;t!==null;)yu(t,n,i),t=t.sibling}var je=null,Vt=!1;function Vn(t,n,i){for(i=i.child;i!==null;)wp(t,n,i),i=i.sibling}function wp(t,n,i){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(ca,i)}catch{}switch(i.tag){case 5:Ge||oi(i,n);case 6:var l=je,c=Vt;je=null,Vn(t,n,i),je=l,Vt=c,je!==null&&(Vt?(t=je,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):je.removeChild(i.stateNode));break;case 18:je!==null&&(Vt?(t=je,i=i.stateNode,t.nodeType===8?wl(t.parentNode,i):t.nodeType===1&&wl(t,i),Cs(t)):wl(je,i.stateNode));break;case 4:l=je,c=Vt,je=i.stateNode.containerInfo,Vt=!0,Vn(t,n,i),je=l,Vt=c;break;case 0:case 11:case 14:case 15:if(!Ge&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var u=c,h=u.destroy;u=u.tag,h!==void 0&&((u&2)!==0||(u&4)!==0)&&gu(i,n,h),c=c.next}while(c!==l)}Vn(t,n,i);break;case 1:if(!Ge&&(oi(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(p){xe(i,n,p)}Vn(t,n,i);break;case 21:Vn(t,n,i);break;case 22:i.mode&1?(Ge=(l=Ge)||i.memoizedState!==null,Vn(t,n,i),Ge=l):Vn(t,n,i);break;default:Vn(t,n,i)}}function gh(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new T1),n.forEach(function(l){var c=D1.bind(null,t,l);i.has(l)||(i.add(l),l.then(c,c))})}}function Ft(t,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];try{var u=t,h=n,p=h;e:for(;p!==null;){switch(p.tag){case 5:je=p.stateNode,Vt=!1;break e;case 3:je=p.stateNode.containerInfo,Vt=!0;break e;case 4:je=p.stateNode.containerInfo,Vt=!0;break e}p=p.return}if(je===null)throw Error(L(160));wp(u,h,c),je=null,Vt=!1;var v=c.alternate;v!==null&&(v.return=null),c.return=null}catch(T){xe(c,n,T)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Sp(n,t),n=n.sibling}function Sp(t,n){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ft(n,t),ln(t),l&4){try{ys(3,t,t.return),va(3,t)}catch(U){xe(t,t.return,U)}try{ys(5,t,t.return)}catch(U){xe(t,t.return,U)}}break;case 1:Ft(n,t),ln(t),l&512&&i!==null&&oi(i,i.return);break;case 5:if(Ft(n,t),ln(t),l&512&&i!==null&&oi(i,i.return),t.flags&32){var c=t.stateNode;try{Ts(c,"")}catch(U){xe(t,t.return,U)}}if(l&4&&(c=t.stateNode,c!=null)){var u=t.memoizedProps,h=i!==null?i.memoizedProps:u,p=t.type,v=t.updateQueue;if(t.updateQueue=null,v!==null)try{p==="input"&&u.type==="radio"&&u.name!=null&&Fh(c,u),Fl(p,h);var T=Fl(p,u);for(h=0;h<v.length;h+=2){var O=v[h],P=v[h+1];O==="style"?Wh(c,P):O==="dangerouslySetInnerHTML"?Jh(c,P):O==="children"?Ts(c,P):Pu(c,O,P,T)}switch(p){case"input":Ml(c,u);break;case"textarea":jh(c,u);break;case"select":var N=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var M=u.value;M!=null?li(c,!!u.multiple,M,!1):N!==!!u.multiple&&(u.defaultValue!=null?li(c,!!u.multiple,u.defaultValue,!0):li(c,!!u.multiple,u.multiple?[]:"",!1))}c[Os]=u}catch(U){xe(t,t.return,U)}}break;case 6:if(Ft(n,t),ln(t),l&4){if(t.stateNode===null)throw Error(L(162));c=t.stateNode,u=t.memoizedProps;try{c.nodeValue=u}catch(U){xe(t,t.return,U)}}break;case 3:if(Ft(n,t),ln(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Cs(n.containerInfo)}catch(U){xe(t,t.return,U)}break;case 4:Ft(n,t),ln(t);break;case 13:Ft(n,t),ln(t),c=t.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(lc=Pe())),l&4&&gh(t);break;case 22:if(O=i!==null&&i.memoizedState!==null,t.mode&1?(Ge=(T=Ge)||O,Ft(n,t),Ge=T):Ft(n,t),ln(t),l&8192){if(T=t.memoizedState!==null,(t.stateNode.isHidden=T)&&!O&&(t.mode&1)!==0)for(V=t,O=t.child;O!==null;){for(P=V=O;V!==null;){switch(N=V,M=N.child,N.tag){case 0:case 11:case 14:case 15:ys(4,N,N.return);break;case 1:oi(N,N.return);var z=N.stateNode;if(typeof z.componentWillUnmount=="function"){l=N,i=N.return;try{n=l,z.props=n.memoizedProps,z.state=n.memoizedState,z.componentWillUnmount()}catch(U){xe(l,i,U)}}break;case 5:oi(N,N.return);break;case 22:if(N.memoizedState!==null){mh(P);continue}}M!==null?(M.return=N,V=M):mh(P)}O=O.sibling}e:for(O=null,P=t;;){if(P.tag===5){if(O===null){O=P;try{c=P.stateNode,T?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(p=P.stateNode,v=P.memoizedProps.style,h=v!=null&&v.hasOwnProperty("display")?v.display:null,p.style.display=Kh("display",h))}catch(U){xe(t,t.return,U)}}}else if(P.tag===6){if(O===null)try{P.stateNode.nodeValue=T?"":P.memoizedProps}catch(U){xe(t,t.return,U)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===t)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===t)break e;for(;P.sibling===null;){if(P.return===null||P.return===t)break e;O===P&&(O=null),P=P.return}O===P&&(O=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:Ft(n,t),ln(t),l&4&&gh(t);break;case 21:break;default:Ft(n,t),ln(t)}}function ln(t){var n=t.flags;if(n&2){try{e:{for(var i=t.return;i!==null;){if(vp(i)){var l=i;break e}i=i.return}throw Error(L(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(Ts(c,""),l.flags&=-33);var u=hh(t);yu(t,u,c);break;case 3:case 4:var h=l.stateNode.containerInfo,p=hh(t);mu(t,p,h);break;default:throw Error(L(161))}}catch(v){xe(t,t.return,v)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function A1(t,n,i){V=t,Tp(t)}function Tp(t,n,i){for(var l=(t.mode&1)!==0;V!==null;){var c=V,u=c.child;if(c.tag===22&&l){var h=c.memoizedState!==null||Co;if(!h){var p=c.alternate,v=p!==null&&p.memoizedState!==null||Ge;p=Co;var T=Ge;if(Co=h,(Ge=v)&&!T)for(V=c;V!==null;)h=V,v=h.child,h.tag===22&&h.memoizedState!==null?yh(c):v!==null?(v.return=h,V=v):yh(c);for(;u!==null;)V=u,Tp(u),u=u.sibling;V=c,Co=p,Ge=T}ph(t)}else(c.subtreeFlags&8772)!==0&&u!==null?(u.return=c,V=u):ph(t)}}function ph(t){for(;V!==null;){var n=V;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Ge||va(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Ge)if(i===null)l.componentDidMount();else{var c=n.elementType===n.type?i.memoizedProps:jt(n.type,i.memoizedProps);l.componentDidUpdate(c,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var u=n.updateQueue;u!==null&&Qd(n,u,l);break;case 3:var h=n.updateQueue;if(h!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}Qd(n,h,i)}break;case 5:var p=n.stateNode;if(i===null&&n.flags&4){i=p;var v=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&i.focus();break;case"img":v.src&&(i.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var T=n.alternate;if(T!==null){var O=T.memoizedState;if(O!==null){var P=O.dehydrated;P!==null&&Cs(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Ge||n.flags&512&&pu(n)}catch(N){xe(n,n.return,N)}}if(n===t){V=null;break}if(i=n.sibling,i!==null){i.return=n.return,V=i;break}V=n.return}}function mh(t){for(;V!==null;){var n=V;if(n===t){V=null;break}var i=n.sibling;if(i!==null){i.return=n.return,V=i;break}V=n.return}}function yh(t){for(;V!==null;){var n=V;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{va(4,n)}catch(v){xe(n,i,v)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var c=n.return;try{l.componentDidMount()}catch(v){xe(n,c,v)}}var u=n.return;try{pu(n)}catch(v){xe(n,u,v)}break;case 5:var h=n.return;try{pu(n)}catch(v){xe(n,h,v)}}}catch(v){xe(n,n.return,v)}if(n===t){V=null;break}var p=n.sibling;if(p!==null){p.return=n.return,V=p;break}V=n.return}}var I1=Math.ceil,sa=Ln.ReactCurrentDispatcher,oc=Ln.ReactCurrentOwner,Dt=Ln.ReactCurrentBatchConfig,oe=0,Ue=null,_e=null,Ve=0,yt=0,ai=ar(0),$e=0,Ms=null,Pr=0,wa=0,ac=0,vs=null,ot=null,lc=0,Si=1/0,In=null,oa=!1,vu=null,tr=null,Eo=!1,Gn=null,aa=0,ws=0,wu=null,Bo=-1,$o=0;function tt(){return(oe&6)!==0?Pe():Bo!==-1?Bo:Bo=Pe()}function nr(t){return(t.mode&1)===0?1:(oe&2)!==0&&Ve!==0?Ve&-Ve:a1.transition!==null?($o===0&&($o=ig()),$o):(t=ce,t!==0||(t=window.event,t=t===void 0?16:fg(t.type)),t)}function Wt(t,n,i,l){if(50<ws)throw ws=0,wu=null,Error(L(185));$s(t,i,l),((oe&2)===0||t!==Ue)&&(t===Ue&&((oe&2)===0&&(wa|=i),$e===4&&qn(t,Ve)),ct(t,l),i===1&&oe===0&&(n.mode&1)===0&&(Si=Pe()+500,pa&&lr()))}function ct(t,n){var i=t.callbackNode;a0(t,n);var l=Jo(t,t===Ue?Ve:0);if(l===0)i!==null&&Ed(i),t.callbackNode=null,t.callbackPriority=0;else if(n=l&-l,t.callbackPriority!==n){if(i!=null&&Ed(i),n===1)t.tag===0?o1(vh.bind(null,t)):Og(vh.bind(null,t)),n1(function(){(oe&6)===0&&lr()}),i=null;else{switch(sg(l)){case 1:i=Lu;break;case 4:i=ng;break;case 16:i=Vo;break;case 536870912:i=rg;break;default:i=Vo}i=Pp(i,kp.bind(null,t))}t.callbackPriority=n,t.callbackNode=i}}function kp(t,n){if(Bo=-1,$o=0,(oe&6)!==0)throw Error(L(327));var i=t.callbackNode;if(hi()&&t.callbackNode!==i)return null;var l=Jo(t,t===Ue?Ve:0);if(l===0)return null;if((l&30)!==0||(l&t.expiredLanes)!==0||n)n=la(t,l);else{n=l;var c=oe;oe|=2;var u=Ip();(Ue!==t||Ve!==n)&&(In=null,Si=Pe()+500,Ir(t,n));do try{N1();break}catch(p){Ap(t,p)}while(1);qu(),sa.current=u,oe=c,_e!==null?n=0:(Ue=null,Ve=0,n=$e)}if(n!==0){if(n===2&&(c=Wl(t),c!==0&&(l=c,n=Su(t,c))),n===1)throw i=Ms,Ir(t,0),qn(t,l),ct(t,Pe()),i;if(n===6)qn(t,l);else{if(c=t.current.alternate,(l&30)===0&&!C1(c)&&(n=la(t,l),n===2&&(u=Wl(t),u!==0&&(l=u,n=Su(t,u))),n===1))throw i=Ms,Ir(t,0),qn(t,l),ct(t,Pe()),i;switch(t.finishedWork=c,t.finishedLanes=l,n){case 0:case 1:throw Error(L(345));case 2:Sr(t,ot,In);break;case 3:if(qn(t,l),(l&130023424)===l&&(n=lc+500-Pe(),10<n)){if(Jo(t,0)!==0)break;if(c=t.suspendedLanes,(c&l)!==l){tt(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=eu(Sr.bind(null,t,ot,In),n);break}Sr(t,ot,In);break;case 4:if(qn(t,l),(l&4194240)===l)break;for(n=t.eventTimes,c=-1;0<l;){var h=31-Kt(l);u=1<<h,h=n[h],h>c&&(c=h),l&=~u}if(l=c,l=Pe()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*I1(l/1960))-l,10<l){t.timeoutHandle=eu(Sr.bind(null,t,ot,In),l);break}Sr(t,ot,In);break;case 5:Sr(t,ot,In);break;default:throw Error(L(329))}}}return ct(t,Pe()),t.callbackNode===i?kp.bind(null,t):null}function Su(t,n){var i=vs;return t.current.memoizedState.isDehydrated&&(Ir(t,n).flags|=256),t=la(t,n),t!==2&&(n=ot,ot=i,n!==null&&Tu(n)),t}function Tu(t){ot===null?ot=t:ot.push.apply(ot,t)}function C1(t){for(var n=t;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var c=i[l],u=c.getSnapshot;c=c.value;try{if(!qt(u(),c))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function qn(t,n){for(n&=~ac,n&=~wa,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var i=31-Kt(n),l=1<<i;t[i]=-1,n&=~l}}function vh(t){if((oe&6)!==0)throw Error(L(327));hi();var n=Jo(t,0);if((n&1)===0)return ct(t,Pe()),null;var i=la(t,n);if(t.tag!==0&&i===2){var l=Wl(t);l!==0&&(n=l,i=Su(t,l))}if(i===1)throw i=Ms,Ir(t,0),qn(t,n),ct(t,Pe()),i;if(i===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Sr(t,ot,In),ct(t,Pe()),null}function uc(t,n){var i=oe;oe|=1;try{return t(n)}finally{oe=i,oe===0&&(Si=Pe()+500,pa&&lr())}}function Or(t){Gn!==null&&Gn.tag===0&&(oe&6)===0&&hi();var n=oe;oe|=1;var i=Dt.transition,l=ce;try{if(Dt.transition=null,ce=1,t)return t()}finally{ce=l,Dt.transition=i,oe=n,(oe&6)===0&&lr()}}function cc(){yt=ai.current,we(ai)}function Ir(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,t1(i)),_e!==null)for(i=_e.return;i!==null;){var l=i;switch(Ju(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Go();break;case 3:vi(),we(lt),we(Ye),Zu();break;case 5:Qu(l);break;case 4:vi();break;case 13:we(Ie);break;case 19:we(Ie);break;case 10:Hu(l.type._context);break;case 22:case 23:cc()}i=i.return}if(Ue=t,_e=t=rr(t.current,null),Ve=yt=n,$e=0,Ms=null,ac=wa=Pr=0,ot=vs=null,kr!==null){for(n=0;n<kr.length;n++)if(i=kr[n],l=i.interleaved,l!==null){i.interleaved=null;var c=l.next,u=i.pending;if(u!==null){var h=u.next;u.next=c,l.next=h}i.pending=l}kr=null}return t}function Ap(t,n){do{var i=_e;try{if(qu(),Lo.current=ia,ra){for(var l=Ce.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}ra=!1}if(xr=0,ze=Be=Ce=null,ms=!1,_s=0,oc.current=null,i===null||i.return===null){$e=1,Ms=n,_e=null;break}e:{var u=t,h=i.return,p=i,v=n;if(n=Ve,p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var T=v,O=p,P=O.tag;if((O.mode&1)===0&&(P===0||P===11||P===15)){var N=O.alternate;N?(O.updateQueue=N.updateQueue,O.memoizedState=N.memoizedState,O.lanes=N.lanes):(O.updateQueue=null,O.memoizedState=null)}var M=sh(h);if(M!==null){M.flags&=-257,oh(M,h,p,u,n),M.mode&1&&ih(u,T,n),n=M,v=T;var z=n.updateQueue;if(z===null){var U=new Set;U.add(v),n.updateQueue=U}else z.add(v);break e}else{if((n&1)===0){ih(u,T,n),fc();break e}v=Error(L(426))}}else if(Ae&&p.mode&1){var he=sh(h);if(he!==null){(he.flags&65536)===0&&(he.flags|=256),oh(he,h,p,u,n),Ku(wi(v,p));break e}}u=v=wi(v,p),$e!==4&&($e=2),vs===null?vs=[u]:vs.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n;var k=op(u,v,n);Xd(u,k);break e;case 1:p=v;var w=u.type,I=u.stateNode;if((u.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(tr===null||!tr.has(I)))){u.flags|=65536,n&=-n,u.lanes|=n;var R=ap(u,p,n);Xd(u,R);break e}}u=u.return}while(u!==null)}Ep(i)}catch(j){n=j,_e===i&&i!==null&&(_e=i=i.return);continue}break}while(1)}function Ip(){var t=sa.current;return sa.current=ia,t===null?ia:t}function fc(){($e===0||$e===3||$e===2)&&($e=4),Ue===null||(Pr&268435455)===0&&(wa&268435455)===0||qn(Ue,Ve)}function la(t,n){var i=oe;oe|=2;var l=Ip();(Ue!==t||Ve!==n)&&(In=null,Ir(t,n));do try{E1();break}catch(c){Ap(t,c)}while(1);if(qu(),oe=i,sa.current=l,_e!==null)throw Error(L(261));return Ue=null,Ve=0,$e}function E1(){for(;_e!==null;)Cp(_e)}function N1(){for(;_e!==null&&!Qv();)Cp(_e)}function Cp(t){var n=xp(t.alternate,t,yt);t.memoizedProps=t.pendingProps,n===null?Ep(t):_e=n,oc.current=null}function Ep(t){var n=t;do{var i=n.alternate;if(t=n.return,(n.flags&32768)===0){if(i=w1(i,n,yt),i!==null){_e=i;return}}else{if(i=S1(i,n),i!==null){i.flags&=32767,_e=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,_e=null;return}}if(n=n.sibling,n!==null){_e=n;return}_e=n=t}while(n!==null);$e===0&&($e=5)}function Sr(t,n,i){var l=ce,c=Dt.transition;try{Dt.transition=null,ce=1,x1(t,n,i,l)}finally{Dt.transition=c,ce=l}return null}function x1(t,n,i,l){do hi();while(Gn!==null);if((oe&6)!==0)throw Error(L(327));i=t.finishedWork;var c=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var u=i.lanes|i.childLanes;if(l0(t,u),t===Ue&&(_e=Ue=null,Ve=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Eo||(Eo=!0,Pp(Vo,function(){return hi(),null})),u=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||u){u=Dt.transition,Dt.transition=null;var h=ce;ce=1;var p=oe;oe|=4,oc.current=null,k1(t,i),Sp(i,t),H0(Ql),Ko=!!Xl,Ql=Xl=null,t.current=i,A1(i),Zv(),oe=p,ce=h,Dt.transition=u}else t.current=i;if(Eo&&(Eo=!1,Gn=t,aa=c),u=t.pendingLanes,u===0&&(tr=null),n0(i.stateNode),ct(t,Pe()),n!==null)for(l=t.onRecoverableError,i=0;i<n.length;i++)c=n[i],l(c.value,{componentStack:c.stack,digest:c.digest});if(oa)throw oa=!1,t=vu,vu=null,t;return(aa&1)!==0&&t.tag!==0&&hi(),u=t.pendingLanes,(u&1)!==0?t===wu?ws++:(ws=0,wu=t):ws=0,lr(),null}function hi(){if(Gn!==null){var t=sg(aa),n=Dt.transition,i=ce;try{if(Dt.transition=null,ce=16>t?16:t,Gn===null)var l=!1;else{if(t=Gn,Gn=null,aa=0,(oe&6)!==0)throw Error(L(331));var c=oe;for(oe|=4,V=t.current;V!==null;){var u=V,h=u.child;if((V.flags&16)!==0){var p=u.deletions;if(p!==null){for(var v=0;v<p.length;v++){var T=p[v];for(V=T;V!==null;){var O=V;switch(O.tag){case 0:case 11:case 15:ys(8,O,u)}var P=O.child;if(P!==null)P.return=O,V=P;else for(;V!==null;){O=V;var N=O.sibling,M=O.return;if(yp(O),O===T){V=null;break}if(N!==null){N.return=M,V=N;break}V=M}}}var z=u.alternate;if(z!==null){var U=z.child;if(U!==null){z.child=null;do{var he=U.sibling;U.sibling=null,U=he}while(U!==null)}}V=u}}if((u.subtreeFlags&2064)!==0&&h!==null)h.return=u,V=h;else e:for(;V!==null;){if(u=V,(u.flags&2048)!==0)switch(u.tag){case 0:case 11:case 15:ys(9,u,u.return)}var k=u.sibling;if(k!==null){k.return=u.return,V=k;break e}V=u.return}}var w=t.current;for(V=w;V!==null;){h=V;var I=h.child;if((h.subtreeFlags&2064)!==0&&I!==null)I.return=h,V=I;else e:for(h=w;V!==null;){if(p=V,(p.flags&2048)!==0)try{switch(p.tag){case 0:case 11:case 15:va(9,p)}}catch(j){xe(p,p.return,j)}if(p===h){V=null;break e}var R=p.sibling;if(R!==null){R.return=p.return,V=R;break e}V=p.return}}if(oe=c,lr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(ca,t)}catch{}l=!0}return l}finally{ce=i,Dt.transition=n}}return!1}function wh(t,n,i){n=wi(i,n),n=op(t,n,1),t=er(t,n,1),n=tt(),t!==null&&($s(t,1,n),ct(t,n))}function xe(t,n,i){if(t.tag===3)wh(t,t,i);else for(;n!==null;){if(n.tag===3){wh(n,t,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(tr===null||!tr.has(l))){t=wi(i,t),t=ap(n,t,1),n=er(n,t,1),t=tt(),n!==null&&($s(n,1,t),ct(n,t));break}}n=n.return}}function P1(t,n,i){var l=t.pingCache;l!==null&&l.delete(n),n=tt(),t.pingedLanes|=t.suspendedLanes&i,Ue===t&&(Ve&i)===i&&($e===4||$e===3&&(Ve&130023424)===Ve&&500>Pe()-lc?Ir(t,0):ac|=i),ct(t,n)}function Np(t,n){n===0&&((t.mode&1)===0?n=1:(n=mo,mo<<=1,(mo&130023424)===0&&(mo=4194304)));var i=tt();t=Rn(t,n),t!==null&&($s(t,n,i),ct(t,i))}function O1(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),Np(t,i)}function D1(t,n){var i=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(i=c.retryLane);break;case 19:l=t.stateNode;break;default:throw Error(L(314))}l!==null&&l.delete(n),Np(t,i)}var xp;xp=function(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps||lt.current)at=!0;else{if((t.lanes&i)===0&&(n.flags&128)===0)return at=!1,v1(t,n,i);at=(t.flags&131072)!==0}else at=!1,Ae&&(n.flags&1048576)!==0&&Dg(n,Qo,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;Mo(t,n),t=n.pendingProps;var c=pi(n,Ye.current);di(n,i),c=tc(null,n,l,t,c,i);var u=nc();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ut(l)?(u=!0,Yo(n)):u=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Yu(n),c.updater=ma,n.stateNode=c,c._reactInternals=n,au(n,l,t,i),n=cu(null,n,l,!0,u,i)):(n.tag=0,Ae&&u&&Vu(n),et(null,n,c,i),n=n.child),n;case 16:l=n.elementType;e:{switch(Mo(t,n),t=n.pendingProps,c=l._init,l=c(l._payload),n.type=l,c=n.tag=_1(l),t=jt(l,t),c){case 0:n=uu(null,n,l,t,i);break e;case 1:n=uh(null,n,l,t,i);break e;case 11:n=ah(null,n,l,t,i);break e;case 14:n=lh(null,n,l,jt(l.type,t),i);break e}throw Error(L(306,l,""))}return n;case 0:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:jt(l,c),uu(t,n,l,c,i);case 1:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:jt(l,c),uh(t,n,l,c,i);case 3:e:{if(fp(n),t===null)throw Error(L(387));l=n.pendingProps,u=n.memoizedState,c=u.element,bg(t,n),ta(n,l,null,i);var h=n.memoizedState;if(l=h.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},n.updateQueue.baseState=u,n.memoizedState=u,n.flags&256){c=wi(Error(L(423)),n),n=ch(t,n,l,i,c);break e}else if(l!==c){c=wi(Error(L(424)),n),n=ch(t,n,l,i,c);break e}else for(vt=Zn(n.stateNode.containerInfo.firstChild),wt=n,Ae=!0,Jt=null,i=zg(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(mi(),l===c){n=_n(t,n,i);break e}et(t,n,l,i)}n=n.child}return n;case 5:return Ug(n),t===null&&iu(n),l=n.type,c=n.pendingProps,u=t!==null?t.memoizedProps:null,h=c.children,Zl(l,c)?h=null:u!==null&&Zl(l,u)&&(n.flags|=32),cp(t,n),et(t,n,h,i),n.child;case 6:return t===null&&iu(n),null;case 13:return dp(t,n,i);case 4:return Xu(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=yi(n,null,l,i):et(t,n,l,i),n.child;case 11:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:jt(l,c),ah(t,n,l,c,i);case 7:return et(t,n,n.pendingProps,i),n.child;case 8:return et(t,n,n.pendingProps.children,i),n.child;case 12:return et(t,n,n.pendingProps.children,i),n.child;case 10:e:{if(l=n.type._context,c=n.pendingProps,u=n.memoizedProps,h=c.value,ye(Zo,l._currentValue),l._currentValue=h,u!==null)if(qt(u.value,h)){if(u.children===c.children&&!lt.current){n=_n(t,n,i);break e}}else for(u=n.child,u!==null&&(u.return=n);u!==null;){var p=u.dependencies;if(p!==null){h=u.child;for(var v=p.firstContext;v!==null;){if(v.context===l){if(u.tag===1){v=Pn(-1,i&-i),v.tag=2;var T=u.updateQueue;if(T!==null){T=T.shared;var O=T.pending;O===null?v.next=v:(v.next=O.next,O.next=v),T.pending=v}}u.lanes|=i,v=u.alternate,v!==null&&(v.lanes|=i),su(u.return,i,n),p.lanes|=i;break}v=v.next}}else if(u.tag===10)h=u.type===n.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(L(341));h.lanes|=i,p=h.alternate,p!==null&&(p.lanes|=i),su(h,i,n),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===n){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}et(t,n,c.children,i),n=n.child}return n;case 9:return c=n.type,l=n.pendingProps.children,di(n,i),c=Rt(c),l=l(c),n.flags|=1,et(t,n,l,i),n.child;case 14:return l=n.type,c=jt(l,n.pendingProps),c=jt(l.type,c),lh(t,n,l,c,i);case 15:return lp(t,n,n.type,n.pendingProps,i);case 17:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:jt(l,c),Mo(t,n),n.tag=1,ut(l)?(t=!0,Yo(n)):t=!1,di(n,i),Bg(n,l,c),au(n,l,c,i),cu(null,n,l,!0,t,i);case 19:return hp(t,n,i);case 22:return up(t,n,i)}throw Error(L(156,n.tag))};function Pp(t,n){return tg(t,n)}function R1(t,n,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,n,i,l){return new R1(t,n,i,l)}function dc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _1(t){if(typeof t=="function")return dc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Du)return 11;if(t===Ru)return 14}return 2}function rr(t,n){var i=t.alternate;return i===null?(i=Ot(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function zo(t,n,i,l,c,u){var h=2;if(l=t,typeof t=="function")dc(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case Xr:return Cr(i.children,c,u,n);case Ou:h=8,c|=8;break;case Dl:return t=Ot(12,i,n,c|2),t.elementType=Dl,t.lanes=u,t;case Rl:return t=Ot(13,i,n,c),t.elementType=Rl,t.lanes=u,t;case _l:return t=Ot(19,i,n,c),t.elementType=_l,t.lanes=u,t;case $h:return Sa(i,c,u,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mh:h=10;break e;case Bh:h=9;break e;case Du:h=11;break e;case Ru:h=14;break e;case Jn:h=16,l=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return n=Ot(h,i,n,c),n.elementType=t,n.type=l,n.lanes=u,n}function Cr(t,n,i,l){return t=Ot(7,t,l,n),t.lanes=i,t}function Sa(t,n,i,l){return t=Ot(22,t,l,n),t.elementType=$h,t.lanes=i,t.stateNode={isHidden:!1},t}function Nl(t,n,i){return t=Ot(6,t,null,n),t.lanes=i,t}function xl(t,n,i){return n=Ot(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function L1(t,n,i,l,c){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ll(0),this.expirationTimes=ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ll(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function hc(t,n,i,l,c,u,h,p,v){return t=new L1(t,n,i,p,v),n===1?(n=1,u===!0&&(n|=8)):n=0,u=Ot(3,null,null,n),t.current=u,u.stateNode=t,u.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(u),t}function b1(t,n,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:l==null?null:""+l,children:t,containerInfo:n,implementation:i}}function Op(t){if(!t)return sr;t=t._reactInternals;e:{if(Rr(t)!==t||t.tag!==1)throw Error(L(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ut(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(L(171))}if(t.tag===1){var i=t.type;if(ut(i))return Pg(t,i,n)}return n}function Dp(t,n,i,l,c,u,h,p,v){return t=hc(i,l,!0,t,c,u,h,p,v),t.context=Op(null),i=t.current,l=tt(),c=nr(i),u=Pn(l,c),u.callback=n!=null?n:null,er(i,u,c),t.current.lanes=c,$s(t,c,l),ct(t,l),t}function Ta(t,n,i,l){var c=n.current,u=tt(),h=nr(c);return i=Op(i),n.context===null?n.context=i:n.pendingContext=i,n=Pn(u,h),n.payload={element:t},l=l===void 0?null:l,l!==null&&(n.callback=l),t=er(c,n,h),t!==null&&(Wt(t,c,h,u),_o(t,c,h)),h}function ua(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sh(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function gc(t,n){Sh(t,n),(t=t.alternate)&&Sh(t,n)}function M1(){return null}var Rp=typeof reportError=="function"?reportError:function(t){console.error(t)};function pc(t){this._internalRoot=t}ka.prototype.render=pc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(L(409));Ta(t,n,null,null)};ka.prototype.unmount=pc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Or(function(){Ta(null,t,null,null)}),n[Dn]=null}};function ka(t){this._internalRoot=t}ka.prototype.unstable_scheduleHydration=function(t){if(t){var n=lg();t={blockedOn:null,target:t,priority:n};for(var i=0;i<Wn.length&&n!==0&&n<Wn[i].priority;i++);Wn.splice(i,0,t),i===0&&cg(t)}};function mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Aa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Th(){}function B1(t,n,i,l,c){if(c){if(typeof l=="function"){var u=l;l=function(){var T=ua(h);u.call(T)}}var h=Dp(n,l,t,0,null,!1,!1,"",Th);return t._reactRootContainer=h,t[Dn]=h.current,xs(t.nodeType===8?t.parentNode:t),Or(),h}for(;c=t.lastChild;)t.removeChild(c);if(typeof l=="function"){var p=l;l=function(){var T=ua(v);p.call(T)}}var v=hc(t,0,!1,null,null,!1,!1,"",Th);return t._reactRootContainer=v,t[Dn]=v.current,xs(t.nodeType===8?t.parentNode:t),Or(function(){Ta(n,v,i,l)}),v}function Ia(t,n,i,l,c){var u=i._reactRootContainer;if(u){var h=u;if(typeof c=="function"){var p=c;c=function(){var v=ua(h);p.call(v)}}Ta(n,h,t,c)}else h=B1(i,n,t,c,l);return ua(h)}og=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var i=us(n.pendingLanes);i!==0&&(bu(n,i|1),ct(n,Pe()),(oe&6)===0&&(Si=Pe()+500,lr()))}break;case 13:Or(function(){var l=Rn(t,1);if(l!==null){var c=tt();Wt(l,t,1,c)}}),gc(t,1)}};Mu=function(t){if(t.tag===13){var n=Rn(t,134217728);if(n!==null){var i=tt();Wt(n,t,134217728,i)}gc(t,134217728)}};ag=function(t){if(t.tag===13){var n=nr(t),i=Rn(t,n);if(i!==null){var l=tt();Wt(i,t,n,l)}gc(t,n)}};lg=function(){return ce};ug=function(t,n){var i=ce;try{return ce=t,n()}finally{ce=i}};Vl=function(t,n,i){switch(n){case"input":if(Ml(t,i),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==t&&l.form===t.form){var c=ga(l);if(!c)throw Error(L(90));Uh(l),Ml(l,c)}}}break;case"textarea":jh(t,i);break;case"select":n=i.value,n!=null&&li(t,!!i.multiple,n,!1)}};Gh=uc;Yh=Or;var $1={usingClientEntryPoint:!1,Events:[Us,ti,ga,qh,Hh,uc]},os={findFiberByHostInstance:Tr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},z1={bundleType:os.bundleType,version:os.version,rendererPackageName:os.rendererPackageName,rendererConfig:os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zh(t),t===null?null:t.stateNode},findFiberByHostInstance:os.findFiberByHostInstance||M1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var No=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!No.isDisabled&&No.supportsFiber)try{ca=No.inject(z1),fn=No}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$1;Tt.createPortal=function(t,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mc(n))throw Error(L(200));return b1(t,n,null,i)};Tt.createRoot=function(t,n){if(!mc(t))throw Error(L(299));var i=!1,l="",c=Rp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=hc(t,1,!1,null,null,i,!1,l,c),t[Dn]=n.current,xs(t.nodeType===8?t.parentNode:t),new pc(n)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Zh(n),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return Or(t)};Tt.hydrate=function(t,n,i){if(!Aa(n))throw Error(L(200));return Ia(null,t,n,!0,i)};Tt.hydrateRoot=function(t,n,i){if(!mc(t))throw Error(L(405));var l=i!=null&&i.hydratedSources||null,c=!1,u="",h=Rp;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),n=Dp(n,null,t,1,i!=null?i:null,c,!1,u,h),t[Dn]=n.current,xs(t),l)for(t=0;t<l.length;t++)i=l[t],c=i._getVersion,c=c(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,c]:n.mutableSourceEagerHydrationData.push(i,c);return new ka(n)};Tt.render=function(t,n,i){if(!Aa(n))throw Error(L(200));return Ia(null,t,n,!1,i)};Tt.unmountComponentAtNode=function(t){if(!Aa(t))throw Error(L(40));return t._reactRootContainer?(Or(function(){Ia(null,null,t,!1,function(){t._reactRootContainer=null,t[Dn]=null})}),!0):!1};Tt.unstable_batchedUpdates=uc;Tt.unstable_renderSubtreeIntoContainer=function(t,n,i,l){if(!Aa(i))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Ia(t,n,i,!1,l)};Tt.version="18.2.0-next-9e3b772b8-20220608";(function(t){function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}n(),t.exports=Tt})(Ih);var kh=Ih.exports;Pl.createRoot=kh.createRoot,Pl.hydrateRoot=kh.hydrateRoot;var ku={exports:{}};(function(t,n){(function(i,l){l(n)})(Tv,function(i){var l=Object.defineProperty,c=(o,e,r)=>e in o?l(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,u=(o,e,r)=>(c(o,typeof e!="symbol"?e+"":e,r),r),h;(function(o){o[o.Canceled=1]="Canceled",o[o.Unknown=2]="Unknown",o[o.InvalidArgument=3]="InvalidArgument",o[o.DeadlineExceeded=4]="DeadlineExceeded",o[o.NotFound=5]="NotFound",o[o.AlreadyExists=6]="AlreadyExists",o[o.PermissionDenied=7]="PermissionDenied",o[o.ResourceExhausted=8]="ResourceExhausted",o[o.FailedPrecondition=9]="FailedPrecondition",o[o.Aborted=10]="Aborted",o[o.OutOfRange=11]="OutOfRange",o[o.Unimplemented=12]="Unimplemented",o[o.Internal=13]="Internal",o[o.Unavailable=14]="Unavailable",o[o.DataLoss=15]="DataLoss",o[o.Unauthenticated=16]="Unauthenticated"})(h||(h={}));function p(o,e){if(!o)throw new Error(e)}const v=34028234663852886e22,T=-34028234663852886e22,O=4294967295,P=2147483647,N=-2147483648;function M(o){if(typeof o!="number")throw new Error("invalid int 32: "+typeof o);if(!Number.isInteger(o)||o>P||o<N)throw new Error("invalid int 32: "+o)}function z(o){if(typeof o!="number")throw new Error("invalid uint 32: "+typeof o);if(!Number.isInteger(o)||o>O||o<0)throw new Error("invalid uint 32: "+o)}function U(o){if(typeof o!="number")throw new Error("invalid float 32: "+typeof o);if(!!Number.isFinite(o)&&(o>v||o<T))throw new Error("invalid float 32: "+o)}const he=Symbol("@bufbuild/protobuf/enum-type");function k(o){const e=o[he];return p(e,"missing enum type on enum object"),e}function w(o,e,r,s){o[he]=I(e,r.map(a=>({no:a.no,name:a.name,localName:o[a.no]})))}function I(o,e,r){const s=Object.create(null),a=Object.create(null),f=[];for(const d of e){const g=j(d);f.push(g),s[d.name]=g,a[d.no]=g}return{typeName:o,values:f,findName(d){return s[d]},findNumber(d){return a[d]}}}function R(o,e,r){const s={};for(const a of e){const f=j(a);s[f.localName]=f.no,s[f.no]=f.localName}return w(s,o,e),s}function j(o){return"localName"in o?o:Object.assign(Object.assign({},o),{localName:o.name})}class B{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,r){const s=this.getType(),a=s.runtime.bin,f=a.makeReadOptions(r);return a.readMessage(this,f.readerFactory(e),e.byteLength,f),this}fromJson(e,r){const s=this.getType(),a=s.runtime.json,f=a.makeReadOptions(r);return a.readMessage(s,e,f,this),this}fromJsonString(e,r){let s;try{s=JSON.parse(e)}catch(a){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${a instanceof Error?a.message:String(a)}`)}return this.fromJson(s,r)}toBinary(e){const r=this.getType(),s=r.runtime.bin,a=s.makeWriteOptions(e),f=a.writerFactory();return s.writeMessage(this,f,a),f.finish()}toJson(e){const r=this.getType(),s=r.runtime.json,a=s.makeWriteOptions(e);return s.writeMessage(this,a)}toJsonString(e){var r;const s=this.toJson(e);return JSON.stringify(s,null,(r=e==null?void 0:e.prettySpaces)!==null&&r!==void 0?r:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function W(o,e,r,s){var a;const f=(a=s==null?void 0:s.localName)!==null&&a!==void 0?a:e.substring(e.lastIndexOf(".")+1),d={[f]:function(g){o.util.initFields(this),o.util.initPartial(g,this)}}[f];return Object.setPrototypeOf(d.prototype,new B),Object.assign(d,{runtime:o,typeName:e,fields:o.util.newFieldList(r),fromBinary(g,m){return new d().fromBinary(g,m)},fromJson(g,m){return new d().fromJson(g,m)},fromJsonString(g,m){return new d().fromJsonString(g,m)},equals(g,m){return o.util.equals(d,g,m)}}),d}function Y(o,e,r,s){return{syntax:o,json:e,bin:r,util:s,makeMessageType(a,f,d){return W(this,a,f,d)},makeEnum:R,makeEnumType:I,getEnumType:k}}var C;(function(o){o[o.DOUBLE=1]="DOUBLE",o[o.FLOAT=2]="FLOAT",o[o.INT64=3]="INT64",o[o.UINT64=4]="UINT64",o[o.INT32=5]="INT32",o[o.FIXED64=6]="FIXED64",o[o.FIXED32=7]="FIXED32",o[o.BOOL=8]="BOOL",o[o.STRING=9]="STRING",o[o.BYTES=12]="BYTES",o[o.UINT32=13]="UINT32",o[o.SFIXED32=15]="SFIXED32",o[o.SFIXED64=16]="SFIXED64",o[o.SINT32=17]="SINT32",o[o.SINT64=18]="SINT64"})(C||(C={}));var Z;(function(o){o[o.BIGINT=0]="BIGINT",o[o.STRING=1]="STRING"})(Z||(Z={}));function ft(){let o=0,e=0;for(let s=0;s<28;s+=7){let a=this.buf[this.pos++];if(o|=(a&127)<<s,(a&128)==0)return this.assertBounds(),[o,e]}let r=this.buf[this.pos++];if(o|=(r&15)<<28,e=(r&112)>>4,(r&128)==0)return this.assertBounds(),[o,e];for(let s=3;s<=31;s+=7){let a=this.buf[this.pos++];if(e|=(a&127)<<s,(a&128)==0)return this.assertBounds(),[o,e]}throw new Error("invalid varint")}function hn(o,e,r){for(let f=0;f<28;f=f+7){const d=o>>>f,g=!(d>>>7==0&&e==0),m=(g?d|128:d)&255;if(r.push(m),!g)return}const s=o>>>28&15|(e&7)<<4,a=e>>3!=0;if(r.push((a?s|128:s)&255),!!a){for(let f=3;f<31;f=f+7){const d=e>>>f,g=d>>>7!=0,m=(g?d|128:d)&255;if(r.push(m),!g)return}r.push(e>>>31&1)}}const Ht=4294967296;function Ci(o){const e=o[0]==="-";e&&(o=o.slice(1));const r=1e6;let s=0,a=0;function f(d,g){const m=Number(o.slice(d,g));a*=r,s=s*r+m,s>=Ht&&(a=a+(s/Ht|0),s=s%Ht)}return f(-24,-18),f(-18,-12),f(-12,-6),f(-6),e?Q(s,a):F(s,a)}function Ea(o,e){let r=F(o,e);const s=r.hi&2147483648;s&&(r=Q(r.lo,r.hi));const a=_r(r.lo,r.hi);return s?"-"+a:a}function _r(o,e){if({lo:o,hi:e}=Ei(o,e),e<=2097151)return String(Ht*e+o);const r=o&16777215,s=(o>>>24|e<<8)&16777215,a=e>>16&65535;let f=r+s*6777216+a*6710656,d=s+a*8147497,g=a*2;const m=1e7;return f>=m&&(d+=Math.floor(f/m),f%=m),d>=m&&(g+=Math.floor(d/m),d%=m),g.toString()+ee(d)+ee(f)}function Ei(o,e){return{lo:o>>>0,hi:e>>>0}}function F(o,e){return{lo:o|0,hi:e|0}}function Q(o,e){return e=~e,o?o=~o+1:e+=1,F(o,e)}const ee=o=>{const e=String(o);return"0000000".slice(e.length)+e};function Se(o,e){if(o>=0){for(;o>127;)e.push(o&127|128),o=o>>>7;e.push(o)}else{for(let r=0;r<9;r++)e.push(o&127|128),o=o>>7;e.push(1)}}function Oe(){let o=this.buf[this.pos++],e=o&127;if((o&128)==0)return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<7,(o&128)==0)return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<14,(o&128)==0)return this.assertBounds(),e;if(o=this.buf[this.pos++],e|=(o&127)<<21,(o&128)==0)return this.assertBounds(),e;o=this.buf[this.pos++],e|=(o&15)<<28;for(let r=5;(o&128)!==0&&r<10;r++)o=this.buf[this.pos++];if((o&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function Lr(){const o=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof o.getBigInt64=="function"&&typeof o.getBigUint64=="function"&&typeof o.setBigInt64=="function"&&typeof o.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),f=BigInt("9223372036854775807"),d=BigInt("0"),g=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(m){const y=typeof m=="bigint"?m:BigInt(m);if(y>f||y<a)throw new Error(`int64 invalid: ${m}`);return y},uParse(m){const y=typeof m=="bigint"?m:BigInt(m);if(y>g||y<d)throw new Error(`uint64 invalid: ${m}`);return y},enc(m){return o.setBigInt64(0,this.parse(m),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},uEnc(m){return o.setBigInt64(0,this.uParse(m),!0),{lo:o.getInt32(0,!0),hi:o.getInt32(4,!0)}},dec(m,y){return o.setInt32(0,m,!0),o.setInt32(4,y,!0),o.getBigInt64(0,!0)},uDec(m,y){return o.setInt32(0,m,!0),o.setInt32(4,y,!0),o.getBigUint64(0,!0)}}}const r=a=>p(/^-?[0-9]+$/.test(a),`int64 invalid: ${a}`),s=a=>p(/^[0-9]+$/.test(a),`uint64 invalid: ${a}`);return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),r(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),s(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),r(a),Ci(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),s(a),Ci(a)},dec(a,f){return Ea(a,f)},uDec(a,f){return _r(a,f)}}}const fe=Lr();var ue;(function(o){o[o.Varint=0]="Varint",o[o.Bit64=1]="Bit64",o[o.LengthDelimited=2]="LengthDelimited",o[o.StartGroup=3]="StartGroup",o[o.EndGroup=4]="EndGroup",o[o.Bit32=5]="Bit32"})(ue||(ue={}));class gn{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let a=0;a<this.chunks.length;a++)e+=this.chunks[a].length;let r=new Uint8Array(e),s=0;for(let a=0;a<this.chunks.length;a++)r.set(this.chunks[a],s),s+=this.chunks[a].length;return this.chunks=[],r}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),r=this.stack.pop();if(!r)throw new Error("invalid state, fork stack empty");return this.chunks=r.chunks,this.buf=r.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,r){return this.uint32((e<<3|r)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(z(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return M(e),Se(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let r=this.textEncoder.encode(e);return this.uint32(r.byteLength),this.raw(r)}float(e){U(e);let r=new Uint8Array(4);return new DataView(r.buffer).setFloat32(0,e,!0),this.raw(r)}double(e){let r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),this.raw(r)}fixed32(e){z(e);let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e,!0),this.raw(r)}sfixed32(e){M(e);let r=new Uint8Array(4);return new DataView(r.buffer).setInt32(0,e,!0),this.raw(r)}sint32(e){return M(e),e=(e<<1^e>>31)>>>0,Se(e,this.buf),this}sfixed64(e){let r=new Uint8Array(8),s=new DataView(r.buffer),a=fe.enc(e);return s.setInt32(0,a.lo,!0),s.setInt32(4,a.hi,!0),this.raw(r)}fixed64(e){let r=new Uint8Array(8),s=new DataView(r.buffer),a=fe.uEnc(e);return s.setInt32(0,a.lo,!0),s.setInt32(4,a.hi,!0),this.raw(r)}int64(e){let r=fe.enc(e);return hn(r.lo,r.hi,this.buf),this}sint64(e){let r=fe.enc(e),s=r.hi>>31,a=r.lo<<1^s,f=(r.hi<<1|r.lo>>>31)^s;return hn(a,f,this.buf),this}uint64(e){let r=fe.uEnc(e);return hn(r.lo,r.hi,this.buf),this}}class br{constructor(e,r){this.varint64=ft,this.uint32=Oe,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=r!=null?r:new TextDecoder}tag(){let e=this.uint32(),r=e>>>3,s=e&7;if(r<=0||s<0||s>5)throw new Error("illegal tag: field no "+r+" wire type "+s);return[r,s]}skip(e){let r=this.pos;switch(e){case ue.Varint:for(;this.buf[this.pos++]&128;);break;case ue.Bit64:this.pos+=4;case ue.Bit32:this.pos+=4;break;case ue.LengthDelimited:let s=this.uint32();this.pos+=s;break;case ue.StartGroup:let a;for(;(a=this.tag()[1])!==ue.EndGroup;)this.skip(a);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return fe.dec(...this.varint64())}uint64(){return fe.uDec(...this.varint64())}sint64(){let[e,r]=this.varint64(),s=-(e&1);return e=(e>>>1|(r&1)<<31)^s,r=r>>>1^s,fe.dec(e,r)}bool(){let[e,r]=this.varint64();return e!==0||r!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return fe.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return fe.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),r=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(r,r+e)}string(){return this.textDecoder.decode(this.bytes())}}function Na(o,e){return e instanceof B||!o.fieldWrapper?e:o.fieldWrapper.wrapField(e)}C.DOUBLE,C.FLOAT,C.INT64,C.UINT64,C.INT32,C.UINT32,C.BOOL,C.STRING,C.BYTES;function bn(o,e,r){if(e===r)return!0;if(o==C.BYTES){if(!(e instanceof Uint8Array)||!(r instanceof Uint8Array)||e.length!==r.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==r[s])return!1;return!0}switch(o){case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:return e==r}return!1}function xa(o,e){switch(o){case C.BOOL:return!1;case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:return e==0?fe.zero:"0";case C.DOUBLE:case C.FLOAT:return 0;case C.BYTES:return new Uint8Array(0);case C.STRING:return"";default:return 0}}function wc(o,e){const r=e===void 0;let s=ue.Varint,a=e===0;switch(o){case C.STRING:a=r||!e.length,s=ue.LengthDelimited;break;case C.BOOL:a=e===!1;break;case C.DOUBLE:s=ue.Bit64;break;case C.FLOAT:s=ue.Bit32;break;case C.INT64:a=r||e==0;break;case C.UINT64:a=r||e==0;break;case C.FIXED64:a=r||e==0,s=ue.Bit64;break;case C.BYTES:a=r||!e.byteLength,s=ue.LengthDelimited;break;case C.FIXED32:s=ue.Bit32;break;case C.SFIXED32:s=ue.Bit32;break;case C.SFIXED64:a=r||e==0,s=ue.Bit64;break;case C.SINT64:a=r||e==0;break}const f=C[o].toLowerCase();return[s,f,r||a]}const Mr=Symbol("@bufbuild/protobuf/unknown-fields"),Sc={readUnknownFields:!0,readerFactory:o=>new br(o)},Tc={writeUnknownFields:!0,writerFactory:()=>new gn};function Mp(o){return o?Object.assign(Object.assign({},Sc),o):Sc}function Bp(o){return o?Object.assign(Object.assign({},Tc),o):Tc}function $p(){return{makeReadOptions:Mp,makeWriteOptions:Bp,listUnknownFields(o){var e;return(e=o[Mr])!==null&&e!==void 0?e:[]},discardUnknownFields(o){delete o[Mr]},writeUnknownFields(o,e){const s=o[Mr];if(s)for(const a of s)e.tag(a.no,a.wireType).raw(a.data)},onUnknownField(o,e,r,s){const a=o;Array.isArray(a[Mr])||(a[Mr]=[]),a[Mr].push({no:e,wireType:r,data:s})},readMessage(o,e,r,s,a){const f=o.getType(),d=a?e.len:e.pos+r;let g,m;for(;e.pos<d&&([g,m]=e.tag(),m!=ue.EndGroup);){const y=f.fields.find(g);if(!y){const x=e.skip(m);s.readUnknownFields&&this.onUnknownField(o,g,m,x);continue}let A=o,D=y.repeated,S=y.localName;switch(y.oneof&&(A=A[y.oneof.localName],A.case!=S&&delete A.value,A.case=S,S="value"),y.kind){case"scalar":case"enum":const x=y.kind=="enum"?C.INT32:y.T;let $=Vs;if(y.kind=="scalar"&&y.L>0&&($=Up),D){let pe=A[S];if(m==ue.LengthDelimited&&x!=C.STRING&&x!=C.BYTES){let re=e.uint32()+e.pos;for(;e.pos<re;)pe.push($(e,x))}else pe.push($(e,x))}else A[S]=$(e,x);break;case"message":const J=y.T;D?A[S].push(js(e,new J,s,y)):A[S]instanceof B?js(e,A[S],s,y):(A[S]=js(e,new J,s,y),J.fieldWrapper&&!y.oneof&&!y.repeated&&(A[S]=J.fieldWrapper.unwrapField(A[S])));break;case"map":let[K,ne]=zp(y,e,s);A[S][K]=ne;break}}if(a&&(m!=ue.EndGroup||g!==r))throw new Error("invalid end group tag")}}}function js(o,e,r,s){const a=e.getType().runtime.bin,f=s==null?void 0:s.delimited;return a.readMessage(e,o,f?s==null?void 0:s.no:o.uint32(),r,f),e}function zp(o,e,r){const s=e.uint32(),a=e.pos+s;let f,d;for(;e.pos<a;){let[g]=e.tag();switch(g){case 1:f=Vs(e,o.K);break;case 2:switch(o.V.kind){case"scalar":d=Vs(e,o.V.T);break;case"enum":d=e.int32();break;case"message":d=js(e,new o.V.T,r,void 0);break}break}}if(f===void 0){let g=xa(o.K,Z.BIGINT);f=o.K==C.BOOL?g.toString():g}if(typeof f!="string"&&typeof f!="number"&&(f=f.toString()),d===void 0)switch(o.V.kind){case"scalar":d=xa(o.V.T,Z.BIGINT);break;case"enum":d=0;break;case"message":d=new o.V.T;break}return[f,d]}function Up(o,e){const r=Vs(o,e);return typeof r=="bigint"?r.toString():r}function Vs(o,e){switch(e){case C.STRING:return o.string();case C.BOOL:return o.bool();case C.DOUBLE:return o.double();case C.FLOAT:return o.float();case C.INT32:return o.int32();case C.INT64:return o.int64();case C.UINT64:return o.uint64();case C.FIXED64:return o.fixed64();case C.BYTES:return o.bytes();case C.FIXED32:return o.fixed32();case C.SFIXED32:return o.sfixed32();case C.SFIXED64:return o.sfixed64();case C.SINT64:return o.sint64();case C.UINT32:return o.uint32();case C.SINT32:return o.sint32()}}function Fp(o,e,r,s,a){o.tag(r.no,ue.LengthDelimited),o.fork();let f=s;switch(r.K){case C.INT32:case C.FIXED32:case C.UINT32:case C.SFIXED32:case C.SINT32:f=Number.parseInt(s);break;case C.BOOL:p(s=="true"||s=="false"),f=s=="true";break}switch(Ni(o,r.K,1,f,!0),r.V.kind){case"scalar":Ni(o,r.V.T,2,a,!0);break;case"enum":Ni(o,C.INT32,2,a,!0);break;case"message":o.tag(2,ue.LengthDelimited).bytes(a.toBinary(e));break}o.join()}function kc(o,e,r,s){if(s!==void 0){const a=Na(r.T,s);r!=null&&r.delimited?o.tag(r.no,ue.StartGroup).raw(a.toBinary(e)).tag(r.no,ue.EndGroup):o.tag(r.no,ue.LengthDelimited).bytes(a.toBinary(e))}}function Ni(o,e,r,s,a){let[f,d,g]=wc(e,s);(!g||a)&&o.tag(r,f)[d](s)}function jp(o,e,r,s){if(!s.length)return;o.tag(r,ue.LengthDelimited).fork();let[,a]=wc(e);for(let f=0;f<s.length;f++)o[a](s[f]);o.join()}function Vp(){return Object.assign(Object.assign({},$p()),{writeMessage(o,e,r){const s=o.getType();for(const a of s.fields.byNumber()){let f,d=a.repeated,g=a.localName;if(a.oneof){const m=o[a.oneof.localName];if(m.case!==g)continue;f=m.value}else f=o[g];switch(a.kind){case"scalar":case"enum":let m=a.kind=="enum"?C.INT32:a.T;if(d)if(a.packed)jp(e,m,a.no,f);else for(const y of f)Ni(e,m,a.no,y,!0);else f!==void 0&&Ni(e,m,a.no,f,!!a.oneof||a.opt);break;case"message":if(d)for(const y of f)kc(e,r,a,y);else kc(e,r,a,f);break;case"map":for(const[y,A]of Object.entries(f))Fp(e,r,a,y,A);break}}return r.writeUnknownFields&&this.writeUnknownFields(o,e),e}})}let pn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Js=[];for(let o=0;o<pn.length;o++)Js[pn[o].charCodeAt(0)]=o;Js["-".charCodeAt(0)]=pn.indexOf("+"),Js["_".charCodeAt(0)]=pn.indexOf("/");const Pa={dec(o){let e=o.length*3/4;o[o.length-2]=="="?e-=2:o[o.length-1]=="="&&(e-=1);let r=new Uint8Array(e),s=0,a=0,f,d=0;for(let g=0;g<o.length;g++){if(f=Js[o.charCodeAt(g)],f===void 0)switch(o[g]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:d=f,a=1;break;case 1:r[s++]=d<<2|(f&48)>>4,d=f,a=2;break;case 2:r[s++]=(d&15)<<4|(f&60)>>2,d=f,a=3;break;case 3:r[s++]=(d&3)<<6|f,a=0;break}}if(a==1)throw Error("invalid base64 string.");return r.subarray(0,s)},enc(o){let e="",r=0,s,a=0;for(let f=0;f<o.length;f++)switch(s=o[f],r){case 0:e+=pn[s>>2],a=(s&3)<<4,r=1;break;case 1:e+=pn[a|s>>4],a=(s&15)<<2,r=2;break;case 2:e+=pn[a|s>>6],e+=pn[s&63],r=0;break}return r&&(e+=pn[a],e+="=",r==1&&(e+="=")),e}},Ac={ignoreUnknownFields:!1},Ic={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Jp(o){return o?Object.assign(Object.assign({},Ac),o):Ac}function Kp(o){return o?Object.assign(Object.assign({},Ic),o):Ic}function Wp(o){const e=o(qp,Ec);return{makeReadOptions:Jp,makeWriteOptions:Kp,readMessage(r,s,a,f){if(s==null||Array.isArray(s)||typeof s!="object")throw new Error(`cannot decode message ${r.typeName} from JSON: ${this.debug(s)}`);f=f!=null?f:new r;const d={};for(const[g,m]of Object.entries(s)){const y=r.fields.findJsonName(g);if(!y){if(!a.ignoreUnknownFields)throw new Error(`cannot decode message ${r.typeName} from JSON: key "${g}" is unknown`);continue}let A=y.localName,D=f;if(y.oneof){if(m===null&&y.kind=="scalar")continue;const S=d[y.oneof.localName];if(S)throw new Error(`cannot decode message ${r.typeName} from JSON: multiple keys for oneof "${y.oneof.name}" present: "${S}", "${g}"`);d[y.oneof.localName]=g,D=D[y.oneof.localName]={case:A},A="value"}if(y.repeated){if(m===null)continue;if(!Array.isArray(m))throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(m)}`);const S=D[A];for(const x of m){if(x===null)throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(x)}`);let $;switch(y.kind){case"message":$=y.T.fromJson(x,a);break;case"enum":if($=Oa(y.T,x,a.ignoreUnknownFields),$===void 0)continue;break;case"scalar":try{$=xi(y.T,x,y.L)}catch(J){let K=`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(x)}`;throw J instanceof Error&&J.message.length>0&&(K+=`: ${J.message}`),new Error(K)}break}S.push($)}}else if(y.kind=="map"){if(m===null)continue;if(Array.isArray(m)||typeof m!="object")throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(m)}`);const S=D[A];for(const[x,$]of Object.entries(m)){if($===null)throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: map value null`);let J;switch(y.V.kind){case"message":J=y.V.T.fromJson($,a);break;case"enum":if(J=Oa(y.V.T,$,a.ignoreUnknownFields),J===void 0)continue;break;case"scalar":try{J=xi(y.V.T,$,Z.BIGINT)}catch(K){let ne=`cannot decode map value for field ${r.typeName}.${y.name} from JSON: ${this.debug(m)}`;throw K instanceof Error&&K.message.length>0&&(ne+=`: ${K.message}`),new Error(ne)}break}try{S[xi(y.K,y.K==C.BOOL?x=="true"?!0:x=="false"?!1:x:x,Z.BIGINT).toString()]=J}catch(K){let ne=`cannot decode map key for field ${r.typeName}.${y.name} from JSON: ${this.debug(m)}`;throw K instanceof Error&&K.message.length>0&&(ne+=`: ${K.message}`),new Error(ne)}}}else switch(y.kind){case"message":const S=y.T;if(m===null&&S.typeName!="google.protobuf.Value"){if(y.oneof)throw new Error(`cannot decode field ${r.typeName}.${y.name} from JSON: null is invalid for oneof field "${g}"`);continue}D[A]instanceof B?D[A].fromJson(m,a):(D[A]=S.fromJson(m,a),S.fieldWrapper&&!y.oneof&&(D[A]=S.fieldWrapper.unwrapField(D[A])));break;case"enum":const x=Oa(y.T,m,a.ignoreUnknownFields);x!==void 0&&(D[A]=x);break;case"scalar":try{D[A]=xi(y.T,m,y.L)}catch($){let J=`cannot decode field ${r.typeName}.${y.name} from JSON: ${this.debug(m)}`;throw $ instanceof Error&&$.message.length>0&&(J+=`: ${$.message}`),new Error(J)}break}}return f},writeMessage(r,s){const a=r.getType(),f={};let d;try{for(const g of a.fields.byMember()){let m;if(g.kind=="oneof"){const y=r[g.localName];if(y.value===void 0)continue;if(d=g.findField(y.case),!d)throw"oneof case not found: "+y.case;m=e(d,y.value,s)}else d=g,m=e(d,r[d.localName],s);m!==void 0&&(f[s.useProtoFieldName?d.name:d.jsonName]=m)}}catch(g){const m=d?`cannot encode field ${a.typeName}.${d.name} to JSON`:`cannot encode message ${a.typeName} to JSON`,y=g instanceof Error?g.message:String(g);throw new Error(m+(y.length>0?`: ${y}`:""))}return f},readScalar:xi,writeScalar:Ec,debug:Cc}}function Cc(o){if(o===null)return"null";switch(typeof o){case"object":return Array.isArray(o)?"array":"object";case"string":return o.length>100?"string":`"${o.split('"').join('\\"')}"`;default:return String(o)}}function xi(o,e,r){switch(o){case C.DOUBLE:case C.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const s=Number(e);if(Number.isNaN(s)||!Number.isFinite(s))break;return o==C.FLOAT&&U(s),s;case C.INT32:case C.FIXED32:case C.SFIXED32:case C.SINT32:case C.UINT32:if(e===null)return 0;let a;if(typeof e=="number"?a=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(a=Number(e)),a===void 0)break;return o==C.UINT32?z(a):M(a),a;case C.INT64:case C.SFIXED64:case C.SINT64:if(e===null)return fe.zero;if(typeof e!="number"&&typeof e!="string")break;const f=fe.parse(e);return r?f.toString():f;case C.FIXED64:case C.UINT64:if(e===null)return fe.zero;if(typeof e!="number"&&typeof e!="string")break;const d=fe.uParse(e);return r?d.toString():d;case C.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case C.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case C.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return Pa.dec(e)}throw new Error}function Oa(o,e,r){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const s=o.findName(e);if(s||r)return s==null?void 0:s.no;break}throw new Error(`cannot decode enum ${o.typeName} from JSON: ${Cc(e)}`)}function qp(o,e,r,s){var a;if(e===void 0)return e;if(e===0&&!r)return;if(s)return e;if(o.typeName=="google.protobuf.NullValue")return null;const f=o.findNumber(e);return(a=f==null?void 0:f.name)!==null&&a!==void 0?a:e}function Ec(o,e,r){if(e!==void 0)switch(o){case C.INT32:case C.SFIXED32:case C.SINT32:case C.FIXED32:case C.UINT32:return p(typeof e=="number"),e!=0||r?e:void 0;case C.FLOAT:case C.DOUBLE:return p(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||r?e:void 0;case C.STRING:return p(typeof e=="string"),e.length>0||r?e:void 0;case C.BOOL:return p(typeof e=="boolean"),e||r?e:void 0;case C.UINT64:case C.FIXED64:case C.INT64:case C.SFIXED64:case C.SINT64:return p(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),r||e!=0?e.toString(10):void 0;case C.BYTES:return p(e instanceof Uint8Array),r||e.byteLength>0?Pa.enc(e):void 0}}function Hp(){return Wp((o,e)=>function(s,a,f){if(s.kind=="map"){const d={};switch(s.V.kind){case"scalar":for(const[m,y]of Object.entries(a)){const A=e(s.V.T,y,!0);p(A!==void 0),d[m.toString()]=A}break;case"message":for(const[m,y]of Object.entries(a))d[m.toString()]=y.toJson(f);break;case"enum":const g=s.V.T;for(const[m,y]of Object.entries(a)){p(y===void 0||typeof y=="number");const A=o(g,y,!0,f.enumAsInteger);p(A!==void 0),d[m.toString()]=A}break}return f.emitDefaultValues||Object.keys(d).length>0?d:void 0}else if(s.repeated){const d=[];switch(s.kind){case"scalar":for(let g=0;g<a.length;g++)d.push(e(s.T,a[g],!0));break;case"enum":for(let g=0;g<a.length;g++)d.push(o(s.T,a[g],!0,f.enumAsInteger));break;case"message":for(let g=0;g<a.length;g++)d.push(Na(s.T,a[g]).toJson(f));break}return f.emitDefaultValues||d.length>0?d:void 0}else switch(s.kind){case"scalar":return e(s.T,a,!!s.oneof||s.opt||f.emitDefaultValues);case"enum":return o(s.T,a,!!s.oneof||s.opt||f.emitDefaultValues,f.enumAsInteger);case"message":return a!==void 0?Na(s.T,a).toJson(f):void 0}})}function Gp(){return{setEnumType:w,initPartial(o,e){if(o===void 0)return;const r=e.getType();for(const s of r.fields.byMember()){const a=s.localName,f=e,d=o;if(d[a]!==void 0)switch(s.kind){case"oneof":const g=d[a].case;if(g===void 0)continue;const m=s.findField(g);let y=d[a].value;m&&m.kind=="message"&&!(y instanceof m.T)?y=new m.T(y):m&&m.kind==="scalar"&&m.T===C.BYTES&&(y=Pi(y)),f[a]={case:g,value:y};break;case"scalar":case"enum":let A=d[a];s.T===C.BYTES&&(A=s.repeated?A.map(Pi):Pi(A)),f[a]=A;break;case"map":switch(s.V.kind){case"scalar":case"enum":if(s.V.T===C.BYTES)for(const[x,$]of Object.entries(d[a]))f[a][x]=Pi($);else Object.assign(f[a],d[a]);break;case"message":const S=s.V.T;for(const x of Object.keys(d[a])){let $=d[a][x];S.fieldWrapper||($=new S($)),f[a][x]=$}break}break;case"message":const D=s.T;if(s.repeated)f[a]=d[a].map(S=>S instanceof D?S:new D(S));else if(d[a]!==void 0){const S=d[a];D.fieldWrapper?D.typeName==="google.protobuf.BytesValue"?f[a]=Pi(S):f[a]=S:f[a]=S instanceof D?S:new D(S)}break}}},equals(o,e,r){return e===r?!0:!e||!r?!1:o.fields.byMember().every(s=>{const a=e[s.localName],f=r[s.localName];if(s.repeated){if(a.length!==f.length)return!1;switch(s.kind){case"message":return a.every((d,g)=>s.T.equals(d,f[g]));case"scalar":return a.every((d,g)=>bn(s.T,d,f[g]));case"enum":return a.every((d,g)=>bn(C.INT32,d,f[g]))}throw new Error(`repeated cannot contain ${s.kind}`)}switch(s.kind){case"message":return s.T.equals(a,f);case"enum":return bn(C.INT32,a,f);case"scalar":return bn(s.T,a,f);case"oneof":if(a.case!==f.case)return!1;const d=s.findField(a.case);if(d===void 0)return!0;switch(d.kind){case"message":return d.T.equals(a.value,f.value);case"enum":return bn(C.INT32,a.value,f.value);case"scalar":return bn(d.T,a.value,f.value)}throw new Error(`oneof cannot contain ${d.kind}`);case"map":const g=Object.keys(a).concat(Object.keys(f));switch(s.V.kind){case"message":const m=s.V.T;return g.every(A=>m.equals(a[A],f[A]));case"enum":return g.every(A=>bn(C.INT32,a[A],f[A]));case"scalar":const y=s.V.T;return g.every(A=>bn(y,a[A],f[A]))}break}})},clone(o){const e=o.getType(),r=new e,s=r;for(const a of e.fields.byMember()){const f=o[a.localName];let d;if(a.repeated)d=f.map(Ks);else if(a.kind=="map"){d=s[a.localName];for(const[g,m]of Object.entries(f))d[g]=Ks(m)}else a.kind=="oneof"?d=a.findField(f.case)?{case:f.case,value:Ks(f.value)}:{case:void 0}:d=Ks(f);s[a.localName]=d}return r}}}function Ks(o){if(o===void 0)return o;if(o instanceof B)return o.clone();if(o instanceof Uint8Array){const e=new Uint8Array(o.byteLength);return e.set(o),e}return o}function Pi(o){return o instanceof Uint8Array?o:new Uint8Array(o)}class Yp{constructor(e,r){this._fields=e,this._normalizer=r}findJsonName(e){if(!this.jsonNames){const r={};for(const s of this.list())r[s.jsonName]=r[s.name]=s;this.jsonNames=r}return this.jsonNames[e]}find(e){if(!this.numbers){const r={};for(const s of this.list())r[s.no]=s;this.numbers=r}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,r)=>e.no-r.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let r;for(const s of this.list())s.oneof?s.oneof!==r&&(r=s.oneof,e.push(r)):e.push(s)}return this.members}}function Nc(o,e){const r=xc(o);return e?r:nm(tm(r))}function Xp(o){return Nc(o,!1)}const Qp=xc;function xc(o){let e=!1;const r=[];for(let s=0;s<o.length;s++){let a=o.charAt(s);switch(a){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r.push(a),e=!1;break;default:e&&(e=!1,a=a.toUpperCase()),r.push(a);break}}return r.join("")}const Zp=new Set(["constructor","toString","toJSON","valueOf"]),em=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Pc=o=>`${o}$`,tm=o=>em.has(o)?Pc(o):o,nm=o=>Zp.has(o)?Pc(o):o;class rm{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Xp(e)}addField(e){p(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let r=0;r<this.fields.length;r++)this._lookup[this.fields[r].localName]=this.fields[r]}return this._lookup[e]}}const E=Y("proto3",Hp(),Vp(),Object.assign(Object.assign({},Gp()),{newFieldList(o){return new Yp(o,im)},initFields(o){for(const e of o.getType().fields.byMember()){if(e.opt)continue;const r=e.localName,s=o;if(e.repeated){s[r]=[];continue}switch(e.kind){case"oneof":s[r]={case:void 0};break;case"enum":s[r]=0;break;case"map":s[r]={};break;case"scalar":s[r]=xa(e.T,e.L);break}}}}));function im(o){var e,r,s,a;const f=[];let d;for(const g of typeof o=="function"?o():o){const m=g;if(m.localName=Nc(g.name,g.oneof!==void 0),m.jsonName=(e=g.jsonName)!==null&&e!==void 0?e:Qp(g.name),m.repeated=(r=g.repeated)!==null&&r!==void 0?r:!1,g.kind=="scalar"&&(m.L=(s=g.L)!==null&&s!==void 0?s:Z.BIGINT),g.oneof!==void 0){const y=typeof g.oneof=="string"?g.oneof:g.oneof.name;(!d||d.name!=y)&&(d=new rm(y)),m.oneof=d,d.addField(m)}g.kind=="message"&&(m.delimited=!1),m.packed=(a=g.packed)!==null&&a!==void 0?a:g.kind=="enum"||g.kind=="scalar"&&g.T!=C.BYTES&&g.T!=C.STRING,f.push(m)}return f}var Xe;(function(o){o[o.Unary=0]="Unary",o[o.ServerStreaming=1]="ServerStreaming",o[o.ClientStreaming=2]="ClientStreaming",o[o.BiDiStreaming=3]="BiDiStreaming"})(Xe||(Xe={}));var Oc;(function(o){o[o.NoSideEffects=1]="NoSideEffects",o[o.Idempotent=2]="Idempotent"})(Oc||(Oc={}));class Ke extends B{constructor(e){super(),this.seconds=fe.zero,this.nanos=0,E.util.initPartial(e,this)}fromJson(e,r){if(typeof e!="string")throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${E.json.debug(e)}`);const s=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!s)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(s[1]+"-"+s[2]+"-"+s[3]+"T"+s[4]+":"+s[5]+":"+s[6]+(s[8]?s[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=fe.parse(a/1e3),this.nanos=0,s[7]&&(this.nanos=parseInt("1"+s[7]+"0".repeat(9-s[7].length))-1e9),this}toJson(e){const r=Number(this.seconds)*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let s="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?s="."+a.substring(0,3)+"Z":a.substring(6)==="000"?s="."+a.substring(0,6)+"Z":s="."+a+"Z"}return new Date(r).toISOString().replace(".000Z",s)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Ke.fromDate(new Date)}static fromDate(e){const r=e.getTime();return new Ke({seconds:fe.parse(Math.floor(r/1e3)),nanos:r%1e3*1e6})}static fromBinary(e,r){return new Ke().fromBinary(e,r)}static fromJson(e,r){return new Ke().fromJson(e,r)}static fromJsonString(e,r){return new Ke().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Ke,e,r)}}Ke.runtime=E,Ke.typeName="google.protobuf.Timestamp",Ke.fields=E.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class Gt extends B{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),E.util.initPartial(e,this)}toJson(e){var r;if(this.typeUrl==="")return{};const s=this.typeUrlToName(this.typeUrl),a=(r=e==null?void 0:e.typeRegistry)===null||r===void 0?void 0:r.findMessage(s);if(!a)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let d=a.fromBinary(this.value).toJson(e);return(s.startsWith("google.protobuf.")||d===null||Array.isArray(d)||typeof d!="object")&&(d={value:d}),d["@type"]=this.typeUrl,d}fromJson(e,r){var s;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${e===null?"null":Array.isArray(e)?"array":typeof e}`);if(Object.keys(e).length==0)return this;const a=e["@type"];if(typeof a!="string"||a=="")throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const f=this.typeUrlToName(a),d=(s=r==null?void 0:r.typeRegistry)===null||s===void 0?void 0:s.findMessage(f);if(!d)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${a} is not in the type registry`);let g;if(f.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))g=d.fromJson(e.value,r);else{const m=Object.assign({},e);delete m["@type"],g=d.fromJson(m,r)}return this.packFrom(g),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return this.is(e.getType())?(e.fromBinary(this.value),!0):!1}unpack(e){if(this.typeUrl==="")return;const r=e.findMessage(this.typeUrlToName(this.typeUrl));if(!!r)return r.fromBinary(this.value)}is(e){if(this.typeUrl==="")return!1;const r=this.typeUrlToName(this.typeUrl);let s="";return typeof e=="string"?s=e:s=e.typeName,r===s}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const r=e.lastIndexOf("/"),s=r>=0?e.substring(r+1):e;if(!s.length)throw new Error(`invalid type url: ${e}`);return s}static pack(e){const r=new Gt;return r.packFrom(e),r}static fromBinary(e,r){return new Gt().fromBinary(e,r)}static fromJson(e,r){return new Gt().fromJson(e,r)}static fromJsonString(e,r){return new Gt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Gt,e,r)}}Gt.runtime=E,Gt.typeName="google.protobuf.Any",Gt.fields=E.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);class Yt extends B{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.DOUBLE,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.DOUBLE,e)}catch(s){let a='cannot decode message google.protobuf.DoubleValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new Yt().fromBinary(e,r)}static fromJson(e,r){return new Yt().fromJson(e,r)}static fromJsonString(e,r){return new Yt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Yt,e,r)}}Yt.runtime=E,Yt.typeName="google.protobuf.DoubleValue",Yt.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),Yt.fieldWrapper={wrapField(o){return new Yt({value:o})},unwrapField(o){return o.value}};class Xt extends B{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.FLOAT,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.FLOAT,e)}catch(s){let a='cannot decode message google.protobuf.FloatValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new Xt().fromBinary(e,r)}static fromJson(e,r){return new Xt().fromJson(e,r)}static fromJsonString(e,r){return new Xt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Xt,e,r)}}Xt.runtime=E,Xt.typeName="google.protobuf.FloatValue",Xt.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),Xt.fieldWrapper={wrapField(o){return new Xt({value:o})},unwrapField(o){return o.value}};class Qt extends B{constructor(e){super(),this.value=fe.zero,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.INT64,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.INT64,e)}catch(s){let a='cannot decode message google.protobuf.Int64Value from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new Qt().fromBinary(e,r)}static fromJson(e,r){return new Qt().fromJson(e,r)}static fromJsonString(e,r){return new Qt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Qt,e,r)}}Qt.runtime=E,Qt.typeName="google.protobuf.Int64Value",Qt.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),Qt.fieldWrapper={wrapField(o){return new Qt({value:o})},unwrapField(o){return o.value}};class Zt extends B{constructor(e){super(),this.value=fe.zero,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.UINT64,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.UINT64,e)}catch(s){let a='cannot decode message google.protobuf.UInt64Value from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new Zt().fromBinary(e,r)}static fromJson(e,r){return new Zt().fromJson(e,r)}static fromJsonString(e,r){return new Zt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(Zt,e,r)}}Zt.runtime=E,Zt.typeName="google.protobuf.UInt64Value",Zt.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),Zt.fieldWrapper={wrapField(o){return new Zt({value:o})},unwrapField(o){return o.value}};class en extends B{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.INT32,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.INT32,e)}catch(s){let a='cannot decode message google.protobuf.Int32Value from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new en().fromBinary(e,r)}static fromJson(e,r){return new en().fromJson(e,r)}static fromJsonString(e,r){return new en().fromJsonString(e,r)}static equals(e,r){return E.util.equals(en,e,r)}}en.runtime=E,en.typeName="google.protobuf.Int32Value",en.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),en.fieldWrapper={wrapField(o){return new en({value:o})},unwrapField(o){return o.value}};class tn extends B{constructor(e){super(),this.value=0,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.UINT32,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.UINT32,e)}catch(s){let a='cannot decode message google.protobuf.UInt32Value from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new tn().fromBinary(e,r)}static fromJson(e,r){return new tn().fromJson(e,r)}static fromJsonString(e,r){return new tn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(tn,e,r)}}tn.runtime=E,tn.typeName="google.protobuf.UInt32Value",tn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),tn.fieldWrapper={wrapField(o){return new tn({value:o})},unwrapField(o){return o.value}};class nn extends B{constructor(e){super(),this.value=!1,E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.BOOL,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.BOOL,e)}catch(s){let a='cannot decode message google.protobuf.BoolValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new nn().fromBinary(e,r)}static fromJson(e,r){return new nn().fromJson(e,r)}static fromJsonString(e,r){return new nn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(nn,e,r)}}nn.runtime=E,nn.typeName="google.protobuf.BoolValue",nn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),nn.fieldWrapper={wrapField(o){return new nn({value:o})},unwrapField(o){return o.value}};class dt extends B{constructor(e){super(),this.value="",E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.STRING,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.STRING,e)}catch(s){let a='cannot decode message google.protobuf.StringValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new dt().fromBinary(e,r)}static fromJson(e,r){return new dt().fromJson(e,r)}static fromJsonString(e,r){return new dt().fromJsonString(e,r)}static equals(e,r){return E.util.equals(dt,e,r)}}dt.runtime=E,dt.typeName="google.protobuf.StringValue",dt.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),dt.fieldWrapper={wrapField(o){return new dt({value:o})},unwrapField(o){return o.value}};class rn extends B{constructor(e){super(),this.value=new Uint8Array(0),E.util.initPartial(e,this)}toJson(e){return E.json.writeScalar(C.BYTES,this.value,!0)}fromJson(e,r){try{this.value=E.json.readScalar(C.BYTES,e)}catch(s){let a='cannot decode message google.protobuf.BytesValue from JSON"';throw s instanceof Error&&s.message.length>0&&(a+=`: ${s.message}`),new Error(a)}return this}static fromBinary(e,r){return new rn().fromBinary(e,r)}static fromJson(e,r){return new rn().fromJson(e,r)}static fromJsonString(e,r){return new rn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(rn,e,r)}}rn.runtime=E,rn.typeName="google.protobuf.BytesValue",rn.fields=E.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),rn.fieldWrapper={wrapField(o){return new rn({value:o})},unwrapField(o){return o.value}};function Dc(o){const e=h[o];return typeof e!="string"?o.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,r=>"_"+r.toLowerCase())}class be extends Error{constructor(e,r=h.Unknown,s,a,f){super(sm(e,r)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=r,this.metadata=new Headers(s!=null?s:{}),this.details=a!=null?a:[],this.cause=f}static from(e,r=h.Unknown){return e instanceof be?e:e instanceof Error?e.name=="AbortError"?new be(e.message,h.Canceled):new be(e.message,r,void 0,void 0,e):new be(String(e),r,void 0,void 0,e)}findDetails(e){const r="typeName"in e?{findMessage:a=>a===e.typeName?e:void 0}:e,s=[];for(const a of this.details){if(a instanceof B){r.findMessage(a.getType().typeName)&&s.push(a);continue}const f=r.findMessage(a.type);if(f)try{s.push(f.fromBinary(a.value))}catch{}}return s}}function sm(o,e){return o.length?`[${Dc(e)}] ${o}`:`[${Dc(e)}]`}function om(o,e,r){try{const s=Pa.dec(o);return e?e.fromBinary(s,r):s}catch(s){throw be.from(s,h.DataLoss)}}function am(o,e){const r={};for(const[s,a]of Object.entries(o.methods)){const f=e(Object.assign(Object.assign({},a),{localName:s,service:o}));f!=null&&(r[s]=f)}return r}function Rc(o){let e,r=new Uint8Array(0);function s(a){const f=new Uint8Array(r.length+a.length);f.set(r),f.set(a,r.length),r=f}return new ReadableStream({start(){e=o.getReader()},async pull(a){let f;for(;;){if(f===void 0&&r.byteLength>=5){let m=0;for(let y=1;y<5;y++)m=(m<<8)+r[y];f={flags:r[0],length:m}}if(f!==void 0&&r.byteLength>=f.length+5)break;const g=await e.read();if(g.done)break;s(g.value)}if(f===void 0){if(r.byteLength==0){a.close();return}a.error(new be("premature end of stream",h.DataLoss));return}const d=r.subarray(5,5+f.length);r=r.subarray(5+f.length),a.enqueue({flags:f.flags,data:d})}})}function _c(o,e){const r=new Uint8Array(e.length+5);r.set(e,5);const s=new DataView(r.buffer,r.byteOffset,r.byteLength);return s.setUint8(0,o),s.setUint32(1,e.length),r}var lm=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],r;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(f){r[f]=o[f]&&function(d){return new Promise(function(g,m){d=o[f](d),a(g,m,d.done,d.value)})}}function a(f,d,g,m){Promise.resolve(m).then(function(y){f({value:y,done:g})},d)}},Oi=globalThis&&globalThis.__await||function(o){return this instanceof Oi?(this.v=o,this):new Oi(o)},um=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(o,e||[]),a,f=[];return a={},d("next"),d("throw"),d("return"),a[Symbol.asyncIterator]=function(){return this},a;function d(S){s[S]&&(a[S]=function(x){return new Promise(function($,J){f.push([S,x,$,J])>1||g(S,x)})})}function g(S,x){try{m(s[S](x))}catch($){D(f[0][3],$)}}function m(S){S.value instanceof Oi?Promise.resolve(S.value.v).then(y,A):D(f[0][2],S)}function y(S){g("next",S)}function A(S){g("throw",S)}function D(S,x){S(x),f.shift(),f.length&&g(f[0][0],f[0][1])}},cm=globalThis&&globalThis.__asyncDelegator||function(o){var e,r;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,f){e[a]=o[a]?function(d){return(r=!r)?{value:Oi(o[a](d)),done:!1}:f?f(d):d}:f}};function fm(o){return um(this,arguments,function*(){yield Oi(yield*cm(lm(o)))})}var Lc=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],r;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(f){r[f]=o[f]&&function(d){return new Promise(function(g,m){d=o[f](d),a(g,m,d.done,d.value)})}}function a(f,d,g,m){Promise.resolve(m).then(function(y){f({value:y,done:g})},d)}},Br=globalThis&&globalThis.__await||function(o){return this instanceof Br?(this.v=o,this):new Br(o)},dm=globalThis&&globalThis.__asyncDelegator||function(o){var e,r;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,f){e[a]=o[a]?function(d){return(r=!r)?{value:Br(o[a](d)),done:!1}:f?f(d):d}:f}},hm=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(o,e||[]),a,f=[];return a={},d("next"),d("throw"),d("return"),a[Symbol.asyncIterator]=function(){return this},a;function d(S){s[S]&&(a[S]=function(x){return new Promise(function($,J){f.push([S,x,$,J])>1||g(S,x)})})}function g(S,x){try{m(s[S](x))}catch($){D(f[0][3],$)}}function m(S){S.value instanceof Br?Promise.resolve(S.value.v).then(y,A):D(f[0][2],S)}function y(S){g("next",S)}function A(S){g("throw",S)}function D(S,x){S(x),f.shift(),f.length&&g(f[0][0],f[0][1])}};function gm(o,e){return am(o,r=>{switch(r.kind){case Xe.Unary:return pm(e,o,r);case Xe.ServerStreaming:return mm(e,o,r);case Xe.ClientStreaming:return ym(e,o,r);case Xe.BiDiStreaming:return vm(e,o,r);default:return null}})}function pm(o,e,r){return async function(s,a){var f,d;const g=await o.unary(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,s,a==null?void 0:a.contextValues);return(f=a==null?void 0:a.onHeader)===null||f===void 0||f.call(a,g.header),(d=a==null?void 0:a.onTrailer)===null||d===void 0||d.call(a,g.trailer),g.message}}function mm(o,e,r){return function(s,a){return bc(o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,fm([s]),a==null?void 0:a.contextValues),a)}}function ym(o,e,r){return async function(s,a){var f,d,g,m,y,A;const D=await o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,s,a==null?void 0:a.contextValues);(y=a==null?void 0:a.onHeader)===null||y===void 0||y.call(a,D.header);let S;try{for(var x=!0,$=Lc(D.message),J;J=await $.next(),f=J.done,!f;x=!0)m=J.value,x=!1,S=m}catch(K){d={error:K}}finally{try{!x&&!f&&(g=$.return)&&await g.call($)}finally{if(d)throw d.error}}if(!S)throw new be("protocol error: missing response message",h.Internal);return(A=a==null?void 0:a.onTrailer)===null||A===void 0||A.call(a,D.trailer),S}}function vm(o,e,r){return function(s,a){return bc(o.stream(e,r,a==null?void 0:a.signal,a==null?void 0:a.timeoutMs,a==null?void 0:a.headers,s,a==null?void 0:a.contextValues),a)}}function bc(o,e){const r=function(){var s,a;return hm(this,arguments,function*(){const f=yield Br(o);(s=e==null?void 0:e.onHeader)===null||s===void 0||s.call(e,f.header),yield Br(yield*dm(Lc(f.message))),(a=e==null?void 0:e.onTrailer)===null||a===void 0||a.call(e,f.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>r.next()})}}function wm(...o){const e=new AbortController,r=o.filter(a=>a!==void 0).concat(e.signal);for(const a of r){if(a.aborted){s.apply(a);break}a.addEventListener("abort",s)}function s(){e.signal.aborted||e.abort(Mc(this));for(const a of r)a.removeEventListener("abort",s)}return e}function Sm(o){const e=new AbortController,r=()=>{e.abort(new be("the operation timed out",h.DeadlineExceeded))};let s;return o!==void 0&&(o<=0?r():s=setTimeout(r,o)),{signal:e.signal,cleanup:()=>clearTimeout(s)}}function Mc(o){if(!o.aborted)return;if(o.reason!==void 0)return o.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function Bc(){return{get(o){return o.id in this?this[o.id]:o.defaultValue},set(o,e){return this[o.id]=e,this},delete(o){return delete this[o.id],this}}}const Da=128;function $c(o){const e=new Headers,r=new TextDecoder().decode(o).split(`\r
`);for(const s of r){if(s==="")continue;const a=s.indexOf(":");if(a>0){const f=s.substring(0,a).trim(),d=s.substring(a+1).trim();e.append(f,d)}}return e}const Tm="Content-Type",km="Grpc-Timeout",zc="Grpc-Status",Uc="Grpc-Message",Am="Grpc-Status-Details-Bin",Im="User-Agent",Cm="X-User-Agent",Em="X-Grpc-Web",Nm="application/grpc-web+proto",xm="application/grpc-web+json";class mn extends B{constructor(e){super(),this.code=0,this.message="",this.details=[],E.util.initPartial(e,this)}static fromBinary(e,r){return new mn().fromBinary(e,r)}static fromJson(e,r){return new mn().fromJson(e,r)}static fromJsonString(e,r){return new mn().fromJsonString(e,r)}static equals(e,r){return E.util.equals(mn,e,r)}}mn.runtime=E,mn.typeName="google.rpc.Status",mn.fields=E.util.newFieldList(()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:Gt,repeated:!0}]);const Pm="0";function Fc(o){var e;const r=o.get(Am);if(r!=null){const a=om(r,mn);if(a.code==0)return;const f=new be(a.message,a.code,o);return f.details=a.details.map(d=>({type:d.typeUrl.substring(d.typeUrl.lastIndexOf("/")+1),value:d.value})),f}const s=o.get(zc);if(s!=null){if(s===Pm)return;const a=parseInt(s,10);return a in h?new be(decodeURIComponent((e=o.get(Uc))!==null&&e!==void 0?e:""),a,o):new be(`invalid grpc-status: ${s}`,h.Internal,o)}}function jc(o,e,r){const s=typeof e=="string"?e:e.typeName,a=typeof r=="string"?r:r.name;return o.toString().replace(/\/?$/,`/${s}/${a}`)}function Vc(o,e){return e instanceof B?e:new o(e)}function Om(o,e){function r(s){return s.done===!0?s:{done:s.done,value:Vc(o,s.value)}}return{[Symbol.asyncIterator](){const s=e[Symbol.asyncIterator](),a={next:()=>s.next().then(r)};return s.throw!==void 0&&(a.throw=f=>s.throw(f).then(r)),s.return!==void 0&&(a.return=f=>s.return(f).then(r)),a}}}function Dm(o){var e;const r=Object.assign({},o);return(e=r.ignoreUnknownFields)!==null&&e!==void 0||(r.ignoreUnknownFields=!0),r}function Jc(o,e,r,s){const a=e?Kc(o.I,s):Wc(o.I,r);return{parse:(e?Kc(o.O,s):Wc(o.O,r)).parse,serialize:a.serialize}}function Kc(o,e){return{parse(r){try{return o.fromBinary(r,e)}catch(s){const a=s instanceof Error?s.message:String(s);throw new be(`parse binary: ${a}`,h.InvalidArgument)}},serialize(r){try{return r.toBinary(e)}catch(s){const a=s instanceof Error?s.message:String(s);throw new be(`serialize binary: ${a}`,h.Internal)}}}}function Wc(o,e){var r,s;const a=(r=e==null?void 0:e.textEncoder)!==null&&r!==void 0?r:new TextEncoder,f=(s=e==null?void 0:e.textDecoder)!==null&&s!==void 0?s:new TextDecoder,d=Dm(e);return{parse(g){try{const m=f.decode(g);return o.fromJsonString(m,d)}catch(m){throw be.from(m,h.InvalidArgument)}},serialize(g){try{const m=g.toJsonString(d);return a.encode(m)}catch(m){throw be.from(m,h.Internal)}}}}function Rm(o){const e=Hc(o.next,o.interceptors),[r,s,a]=qc(o),f=Object.assign(Object.assign({},o.req),{message:Vc(o.req.method.I,o.req.message),signal:r});return e(f).then(d=>(a(),d),s)}function _m(o){const e=Hc(o.next,o.interceptors),[r,s,a]=qc(o),f=Object.assign(Object.assign({},o.req),{message:Om(o.req.method.I,o.req.message),signal:r});let d=!1;return r.addEventListener("abort",function(){var g,m;const y=o.req.message[Symbol.asyncIterator]();d||(g=y.throw)===null||g===void 0||g.call(y,this.reason).catch(()=>{}),(m=y.return)===null||m===void 0||m.call(y).catch(()=>{})}),e(f).then(g=>Object.assign(Object.assign({},g),{message:{[Symbol.asyncIterator](){const m=g.message[Symbol.asyncIterator]();return{next(){return m.next().then(y=>(y.done==!0&&(d=!0,a()),y),s)}}}}}),s)}function qc(o){const{signal:e,cleanup:r}=Sm(o.timeoutMs),s=wm(o.signal,e);return[s.signal,function(f){const d=be.from(e.aborted?Mc(e):f);return s.abort(d),r(),Promise.reject(d)},function(){r(),s.abort()}]}function Hc(o,e){var r;return(r=e==null?void 0:e.concat().reverse().reduce((s,a)=>a(s),o))!==null&&r!==void 0?r:o}function Lm(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function Gc(o,e){const r=Fc(o);if(r)throw e.forEach((s,a)=>{r.metadata.append(a,s)}),r}function Yc(o,e,r,s){const a=new Headers(r!=null?r:{});return a.set(Tm,o?Nm:xm),a.set(Em,"1"),a.set(Cm,"connect-es/1.2.0"),s&&a.set(Im,"connect-es/1.2.0"),e!==void 0&&a.set(km,`${e}m`),a}function bm(o){switch(o){case 400:return h.Internal;case 401:return h.Unauthenticated;case 403:return h.PermissionDenied;case 404:return h.Unimplemented;case 429:return h.Unavailable;case 502:return h.Unavailable;case 503:return h.Unavailable;case 504:return h.Unavailable;default:return h.Unknown}}function Xc(o,e){var r;if(o>=200&&o<300){const s=Fc(e);if(s)throw s;return{foundStatus:e.has(zc)}}throw new be(decodeURIComponent((r=e.get(Uc))!==null&&r!==void 0?r:`HTTP ${o}`),bm(o),e)}var ur=globalThis&&globalThis.__await||function(o){return this instanceof ur?(this.v=o,this):new ur(o)},Mm=globalThis&&globalThis.__asyncGenerator||function(o,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(o,e||[]),a,f=[];return a={},d("next"),d("throw"),d("return"),a[Symbol.asyncIterator]=function(){return this},a;function d(S){s[S]&&(a[S]=function(x){return new Promise(function($,J){f.push([S,x,$,J])>1||g(S,x)})})}function g(S,x){try{m(s[S](x))}catch($){D(f[0][3],$)}}function m(S){S.value instanceof ur?Promise.resolve(S.value.v).then(y,A):D(f[0][2],S)}function y(S){g("next",S)}function A(S){g("throw",S)}function D(S,x){S(x),f.shift(),f.length&&g(f[0][0],f[0][1])}};function Bm(o){var e;Lm();const r=(e=o.useBinaryFormat)!==null&&e!==void 0?e:!0;return{async unary(s,a,f,d,g,m,y){var A;const{serialize:D,parse:S}=Jc(a,r,o.jsonOptions,o.binaryOptions);return d=d===void 0?o.defaultTimeoutMs:d<=0?void 0:d,await Rm({interceptors:o.interceptors,signal:f,timeoutMs:d,req:{stream:!1,service:s,method:a,url:jc(o.baseUrl,s,a),init:{method:"POST",credentials:(A=o.credentials)!==null&&A!==void 0?A:"same-origin",redirect:"error",mode:"cors"},header:Yc(r,d,g,!1),contextValues:y!=null?y:Bc(),message:m},next:async x=>{var $;const K=await(($=o.fetch)!==null&&$!==void 0?$:globalThis.fetch)(x.url,Object.assign(Object.assign({},x.init),{headers:x.header,signal:x.signal,body:_c(0,D(x.message))}));if(Xc(K.status,K.headers),!K.body)throw"missing response body";const ne=Rc(K.body).getReader();let pe,re;for(;;){const de=await ne.read();if(de.done)break;const{flags:me,data:ke}=de.value;if(me===Da){if(pe!==void 0)throw"extra trailer";pe=$c(ke);continue}if(re!==void 0)throw"extra message";re=S(ke)}if(pe===void 0)throw"missing trailer";if(Gc(pe,K.headers),re===void 0)throw"missing message";return{stream:!1,header:K.headers,message:re,trailer:pe}}})},async stream(s,a,f,d,g,m,y){var A;const{serialize:D,parse:S}=Jc(a,r,o.jsonOptions,o.binaryOptions);function x(J,K,ne,pe){return Mm(this,arguments,function*(){const de=Rc(J).getReader();if(K){if(!(yield ur(de.read())).done)throw"extra data for trailers-only";return yield ur(void 0)}let me=!1;for(;;){const ke=yield ur(de.read());if(ke.done)break;const{flags:yr,data:vr}=ke.value;if((yr&Da)===Da){if(me)throw"extra trailer";me=!0;const Qi=$c(vr);Gc(Qi,pe),Qi.forEach((wv,Sv)=>ne.set(Sv,wv));continue}if(me)throw"extra message";yield yield ur(S(vr))}if(!me)throw"missing trailer"})}async function $(J){if(a.kind!=Xe.ServerStreaming)throw"The fetch API does not support streaming request bodies";const K=await J[Symbol.asyncIterator]().next();if(K.done==!0)throw"missing request message";return _c(0,D(K.value))}return d=d===void 0?o.defaultTimeoutMs:d<=0?void 0:d,_m({interceptors:o.interceptors,signal:f,timeoutMs:d,req:{stream:!0,service:s,method:a,url:jc(o.baseUrl,s,a),init:{method:"POST",credentials:(A=o.credentials)!==null&&A!==void 0?A:"same-origin",redirect:"error",mode:"cors"},header:Yc(r,d,g,!1),contextValues:y!=null?y:Bc(),message:m},next:async J=>{var K;const pe=await((K=o.fetch)!==null&&K!==void 0?K:globalThis.fetch)(J.url,Object.assign(Object.assign({},J.init),{headers:J.header,signal:J.signal,body:await $(J.message)})),{foundStatus:re}=Xc(pe.status,pe.headers);if(!pe.body)throw"missing response body";const de=new Headers;return Object.assign(Object.assign({},J),{header:pe.headers,trailer:de,message:x(pe.body,re,de,pe.headers)})}})}}}const te=E.makeEnum("yorkie.v1.ValueType",[{no:0,name:"VALUE_TYPE_NULL",localName:"NULL"},{no:1,name:"VALUE_TYPE_BOOLEAN",localName:"BOOLEAN"},{no:2,name:"VALUE_TYPE_INTEGER",localName:"INTEGER"},{no:3,name:"VALUE_TYPE_LONG",localName:"LONG"},{no:4,name:"VALUE_TYPE_DOUBLE",localName:"DOUBLE"},{no:5,name:"VALUE_TYPE_STRING",localName:"STRING"},{no:6,name:"VALUE_TYPE_BYTES",localName:"BYTES"},{no:7,name:"VALUE_TYPE_DATE",localName:"DATE"},{no:8,name:"VALUE_TYPE_JSON_OBJECT",localName:"JSON_OBJECT"},{no:9,name:"VALUE_TYPE_JSON_ARRAY",localName:"JSON_ARRAY"},{no:10,name:"VALUE_TYPE_TEXT",localName:"TEXT"},{no:11,name:"VALUE_TYPE_INTEGER_CNT",localName:"INTEGER_CNT"},{no:12,name:"VALUE_TYPE_LONG_CNT",localName:"LONG_CNT"},{no:13,name:"VALUE_TYPE_TREE",localName:"TREE"}]),Ws=E.makeEnum("yorkie.v1.DocEventType",[{no:0,name:"DOC_EVENT_TYPE_DOCUMENT_CHANGED",localName:"DOCUMENT_CHANGED"},{no:1,name:"DOC_EVENT_TYPE_DOCUMENT_WATCHED",localName:"DOCUMENT_WATCHED"},{no:2,name:"DOC_EVENT_TYPE_DOCUMENT_UNWATCHED",localName:"DOCUMENT_UNWATCHED"},{no:3,name:"DOC_EVENT_TYPE_DOCUMENT_BROADCAST",localName:"DOCUMENT_BROADCAST"}]),$m=E.makeMessageType("yorkie.v1.Snapshot",()=>[{no:1,name:"root",kind:"message",T:At},{no:2,name:"presences",kind:"map",K:9,V:{kind:"message",T:Ba}}]),yn=E.makeMessageType("yorkie.v1.ChangePack",()=>[{no:1,name:"document_key",kind:"scalar",T:9},{no:2,name:"checkpoint",kind:"message",T:vf},{no:3,name:"snapshot",kind:"scalar",T:12},{no:4,name:"changes",kind:"message",T:Qc,repeated:!0},{no:5,name:"min_synced_ticket",kind:"message",T:H},{no:6,name:"is_removed",kind:"scalar",T:8}]),Qc=E.makeMessageType("yorkie.v1.Change",()=>[{no:1,name:"id",kind:"message",T:qs},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"operations",kind:"message",T:Ra,repeated:!0},{no:4,name:"presence_change",kind:"message",T:Ma}]),qs=E.makeMessageType("yorkie.v1.ChangeID",()=>[{no:1,name:"client_seq",kind:"scalar",T:13},{no:2,name:"server_seq",kind:"scalar",T:3,L:1},{no:3,name:"lamport",kind:"scalar",T:3,L:1},{no:4,name:"actor_id",kind:"scalar",T:12}]),Ra=E.makeMessageType("yorkie.v1.Operation",()=>[{no:1,name:"set",kind:"message",T:Zc,oneof:"body"},{no:2,name:"add",kind:"message",T:ef,oneof:"body"},{no:3,name:"move",kind:"message",T:tf,oneof:"body"},{no:4,name:"remove",kind:"message",T:nf,oneof:"body"},{no:5,name:"edit",kind:"message",T:rf,oneof:"body"},{no:6,name:"select",kind:"message",T:zm,oneof:"body"},{no:7,name:"style",kind:"message",T:sf,oneof:"body"},{no:8,name:"increase",kind:"message",T:of,oneof:"body"},{no:9,name:"tree_edit",kind:"message",T:af,oneof:"body"},{no:10,name:"tree_style",kind:"message",T:lf,oneof:"body"}]),Zc=E.makeMessageType("yorkie.v1.Operation.Set",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"value",kind:"message",T:vn},{no:4,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Set"}),ef=E.makeMessageType("yorkie.v1.Operation.Add",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"prev_created_at",kind:"message",T:H},{no:3,name:"value",kind:"message",T:vn},{no:4,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Add"}),tf=E.makeMessageType("yorkie.v1.Operation.Move",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"prev_created_at",kind:"message",T:H},{no:3,name:"created_at",kind:"message",T:H},{no:4,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Move"}),nf=E.makeMessageType("yorkie.v1.Operation.Remove",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Remove"}),rf=E.makeMessageType("yorkie.v1.Operation.Edit",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:cr},{no:3,name:"to",kind:"message",T:cr},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:H}},{no:5,name:"content",kind:"scalar",T:9},{no:6,name:"executed_at",kind:"message",T:H},{no:7,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"Operation_Edit"}),zm=E.makeMessageType("yorkie.v1.Operation.Select",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:cr},{no:3,name:"to",kind:"message",T:cr},{no:4,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Select"}),sf=E.makeMessageType("yorkie.v1.Operation.Style",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:cr},{no:3,name:"to",kind:"message",T:cr},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:H},{no:6,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:H}}],{localName:"Operation_Style"}),of=E.makeMessageType("yorkie.v1.Operation.Increase",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"value",kind:"message",T:vn},{no:3,name:"executed_at",kind:"message",T:H}],{localName:"Operation_Increase"}),af=E.makeMessageType("yorkie.v1.Operation.TreeEdit",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:Di},{no:3,name:"to",kind:"message",T:Di},{no:4,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:H}},{no:5,name:"contents",kind:"message",T:yf,repeated:!0},{no:7,name:"split_level",kind:"scalar",T:5},{no:6,name:"executed_at",kind:"message",T:H}],{localName:"Operation_TreeEdit"}),lf=E.makeMessageType("yorkie.v1.Operation.TreeStyle",()=>[{no:1,name:"parent_created_at",kind:"message",T:H},{no:2,name:"from",kind:"message",T:Di},{no:3,name:"to",kind:"message",T:Di},{no:4,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"executed_at",kind:"message",T:H},{no:6,name:"attributes_to_remove",kind:"scalar",T:9,repeated:!0},{no:7,name:"created_at_map_by_actor",kind:"map",K:9,V:{kind:"message",T:H}}],{localName:"Operation_TreeStyle"}),vn=E.makeMessageType("yorkie.v1.JSONElementSimple",()=>[{no:1,name:"created_at",kind:"message",T:H},{no:2,name:"moved_at",kind:"message",T:H},{no:3,name:"removed_at",kind:"message",T:H},{no:4,name:"type",kind:"enum",T:E.getEnumType(te)},{no:5,name:"value",kind:"scalar",T:12}]),At=E.makeMessageType("yorkie.v1.JSONElement",()=>[{no:1,name:"json_object",kind:"message",T:uf,oneof:"body"},{no:2,name:"json_array",kind:"message",T:cf,oneof:"body"},{no:3,name:"primitive",kind:"message",T:ff,oneof:"body"},{no:5,name:"text",kind:"message",T:df,oneof:"body"},{no:6,name:"counter",kind:"message",T:hf,oneof:"body"},{no:7,name:"tree",kind:"message",T:gf,oneof:"body"}]),uf=E.makeMessageType("yorkie.v1.JSONElement.JSONObject",()=>[{no:1,name:"nodes",kind:"message",T:pf,repeated:!0},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"moved_at",kind:"message",T:H},{no:4,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_JSONObject"}),cf=E.makeMessageType("yorkie.v1.JSONElement.JSONArray",()=>[{no:1,name:"nodes",kind:"message",T:_a,repeated:!0},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"moved_at",kind:"message",T:H},{no:4,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_JSONArray"}),ff=E.makeMessageType("yorkie.v1.JSONElement.Primitive",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(te)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:H},{no:4,name:"moved_at",kind:"message",T:H},{no:5,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_Primitive"}),df=E.makeMessageType("yorkie.v1.JSONElement.Text",()=>[{no:1,name:"nodes",kind:"message",T:mf,repeated:!0},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"moved_at",kind:"message",T:H},{no:4,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_Text"}),hf=E.makeMessageType("yorkie.v1.JSONElement.Counter",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(te)},{no:2,name:"value",kind:"scalar",T:12},{no:3,name:"created_at",kind:"message",T:H},{no:4,name:"moved_at",kind:"message",T:H},{no:5,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_Counter"}),gf=E.makeMessageType("yorkie.v1.JSONElement.Tree",()=>[{no:1,name:"nodes",kind:"message",T:ba,repeated:!0},{no:2,name:"created_at",kind:"message",T:H},{no:3,name:"moved_at",kind:"message",T:H},{no:4,name:"removed_at",kind:"message",T:H}],{localName:"JSONElement_Tree"}),pf=E.makeMessageType("yorkie.v1.RHTNode",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"element",kind:"message",T:At}]),_a=E.makeMessageType("yorkie.v1.RGANode",()=>[{no:1,name:"next",kind:"message",T:_a},{no:2,name:"element",kind:"message",T:At}]),Hs=E.makeMessageType("yorkie.v1.NodeAttr",()=>[{no:1,name:"value",kind:"scalar",T:9},{no:2,name:"updated_at",kind:"message",T:H},{no:3,name:"is_removed",kind:"scalar",T:8}]),mf=E.makeMessageType("yorkie.v1.TextNode",()=>[{no:1,name:"id",kind:"message",T:La},{no:2,name:"value",kind:"scalar",T:9},{no:3,name:"removed_at",kind:"message",T:H},{no:4,name:"ins_prev_id",kind:"message",T:La},{no:5,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Hs}}]),La=E.makeMessageType("yorkie.v1.TextNodeID",()=>[{no:1,name:"created_at",kind:"message",T:H},{no:2,name:"offset",kind:"scalar",T:5}]),ba=E.makeMessageType("yorkie.v1.TreeNode",()=>[{no:1,name:"id",kind:"message",T:$r},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"value",kind:"scalar",T:9},{no:4,name:"removed_at",kind:"message",T:H},{no:5,name:"ins_prev_id",kind:"message",T:$r},{no:6,name:"ins_next_id",kind:"message",T:$r},{no:7,name:"depth",kind:"scalar",T:5},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"message",T:Hs}}]),yf=E.makeMessageType("yorkie.v1.TreeNodes",()=>[{no:1,name:"content",kind:"message",T:ba,repeated:!0}]),$r=E.makeMessageType("yorkie.v1.TreeNodeID",()=>[{no:1,name:"created_at",kind:"message",T:H},{no:2,name:"offset",kind:"scalar",T:5}]),Di=E.makeMessageType("yorkie.v1.TreePos",()=>[{no:1,name:"parent_id",kind:"message",T:$r},{no:2,name:"left_sibling_id",kind:"message",T:$r}]);E.makeMessageType("yorkie.v1.User",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:Ke}]),E.makeMessageType("yorkie.v1.Project",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"public_key",kind:"scalar",T:9},{no:4,name:"secret_key",kind:"scalar",T:9},{no:5,name:"auth_webhook_url",kind:"scalar",T:9},{no:6,name:"auth_webhook_methods",kind:"scalar",T:9,repeated:!0},{no:7,name:"client_deactivate_threshold",kind:"scalar",T:9},{no:8,name:"created_at",kind:"message",T:Ke},{no:9,name:"updated_at",kind:"message",T:Ke}]),E.makeMessageType("yorkie.v1.UpdatableProjectFields",()=>[{no:1,name:"name",kind:"message",T:dt},{no:2,name:"auth_webhook_url",kind:"message",T:dt},{no:3,name:"auth_webhook_methods",kind:"message",T:Um},{no:4,name:"client_deactivate_threshold",kind:"message",T:dt}]);const Um=E.makeMessageType("yorkie.v1.UpdatableProjectFields.AuthWebhookMethods",()=>[{no:1,name:"methods",kind:"scalar",T:9,repeated:!0}],{localName:"UpdatableProjectFields_AuthWebhookMethods"});E.makeMessageType("yorkie.v1.DocumentSummary",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9},{no:3,name:"snapshot",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:Ke},{no:5,name:"accessed_at",kind:"message",T:Ke},{no:6,name:"updated_at",kind:"message",T:Ke}]);const Ma=E.makeMessageType("yorkie.v1.PresenceChange",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(Ri)},{no:2,name:"presence",kind:"message",T:Ba}]),Ri=E.makeEnum("yorkie.v1.PresenceChange.ChangeType",[{no:0,name:"CHANGE_TYPE_UNSPECIFIED",localName:"UNSPECIFIED"},{no:1,name:"CHANGE_TYPE_PUT",localName:"PUT"},{no:2,name:"CHANGE_TYPE_DELETE",localName:"DELETE"},{no:3,name:"CHANGE_TYPE_CLEAR",localName:"CLEAR"}]),Ba=E.makeMessageType("yorkie.v1.Presence",()=>[{no:1,name:"data",kind:"map",K:9,V:{kind:"scalar",T:9}}]),vf=E.makeMessageType("yorkie.v1.Checkpoint",()=>[{no:1,name:"server_seq",kind:"scalar",T:3,L:1},{no:2,name:"client_seq",kind:"scalar",T:13}]),cr=E.makeMessageType("yorkie.v1.TextNodePos",()=>[{no:1,name:"created_at",kind:"message",T:H},{no:2,name:"offset",kind:"scalar",T:5},{no:3,name:"relative_offset",kind:"scalar",T:5}]),H=E.makeMessageType("yorkie.v1.TimeTicket",()=>[{no:1,name:"lamport",kind:"scalar",T:3,L:1},{no:2,name:"delimiter",kind:"scalar",T:13},{no:3,name:"actor_id",kind:"scalar",T:12}]),Fm=E.makeMessageType("yorkie.v1.DocEventBody",()=>[{no:1,name:"topic",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12}]),jm=E.makeMessageType("yorkie.v1.DocEvent",()=>[{no:1,name:"type",kind:"enum",T:E.getEnumType(Ws)},{no:2,name:"publisher",kind:"scalar",T:9},{no:3,name:"body",kind:"message",T:Fm}]),Vm=E.makeMessageType("yorkie.v1.ActivateClientRequest",()=>[{no:1,name:"client_key",kind:"scalar",T:9}]),Jm=E.makeMessageType("yorkie.v1.ActivateClientResponse",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Km=E.makeMessageType("yorkie.v1.DeactivateClientRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9}]),Wm=E.makeMessageType("yorkie.v1.DeactivateClientResponse",[]),qm=E.makeMessageType("yorkie.v1.AttachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:yn}]),Hm=E.makeMessageType("yorkie.v1.AttachDocumentResponse",()=>[{no:1,name:"document_id",kind:"scalar",T:9},{no:2,name:"change_pack",kind:"message",T:yn}]),Gm=E.makeMessageType("yorkie.v1.DetachDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:yn},{no:4,name:"remove_if_not_attached",kind:"scalar",T:8}]),Ym=E.makeMessageType("yorkie.v1.DetachDocumentResponse",()=>[{no:2,name:"change_pack",kind:"message",T:yn}]),Xm=E.makeMessageType("yorkie.v1.WatchDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9}]),Qm=E.makeMessageType("yorkie.v1.WatchDocumentResponse",()=>[{no:1,name:"initialization",kind:"message",T:Zm,oneof:"body"},{no:2,name:"event",kind:"message",T:jm,oneof:"body"}]),Zm=E.makeMessageType("yorkie.v1.WatchDocumentResponse.Initialization",()=>[{no:1,name:"client_ids",kind:"scalar",T:9,repeated:!0}],{localName:"WatchDocumentResponse_Initialization"}),ey=E.makeMessageType("yorkie.v1.RemoveDocumentRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:yn}]),ty=E.makeMessageType("yorkie.v1.RemoveDocumentResponse",()=>[{no:1,name:"change_pack",kind:"message",T:yn}]),ny=E.makeMessageType("yorkie.v1.PushPullChangesRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"change_pack",kind:"message",T:yn},{no:4,name:"push_only",kind:"scalar",T:8}]),ry=E.makeMessageType("yorkie.v1.PushPullChangesResponse",()=>[{no:1,name:"change_pack",kind:"message",T:yn}]),iy=E.makeMessageType("yorkie.v1.BroadcastRequest",()=>[{no:1,name:"client_id",kind:"scalar",T:9},{no:2,name:"document_id",kind:"scalar",T:9},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}]),sy=E.makeMessageType("yorkie.v1.BroadcastResponse",[]),oy={typeName:"yorkie.v1.YorkieService",methods:{activateClient:{name:"ActivateClient",I:Vm,O:Jm,kind:Xe.Unary},deactivateClient:{name:"DeactivateClient",I:Km,O:Wm,kind:Xe.Unary},attachDocument:{name:"AttachDocument",I:qm,O:Hm,kind:Xe.Unary},detachDocument:{name:"DetachDocument",I:Gm,O:Ym,kind:Xe.Unary},removeDocument:{name:"RemoveDocument",I:ey,O:ty,kind:Xe.Unary},pushPullChanges:{name:"PushPullChanges",I:ny,O:ry,kind:Xe.Unary},watchDocument:{name:"WatchDocument",I:Xm,O:Qm,kind:Xe.ServerStreaming},broadcast:{name:"Broadcast",I:iy,O:sy,kind:Xe.Unary}}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var It=null;try{It=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function X(o,e,r){this.low=o|0,this.high=e|0,this.unsigned=!!r}X.prototype.__isLong__,Object.defineProperty(X.prototype,"__isLong__",{value:!0});function We(o){return(o&&o.__isLong__)===!0}function wf(o){var e=Math.clz32(o&-o);return o?31-e:e}X.isLong=We;var Sf={},Tf={};function fr(o,e){var r,s,a;return e?(o>>>=0,(a=0<=o&&o<256)&&(s=Tf[o],s)?s:(r=ae(o,0,!0),a&&(Tf[o]=r),r)):(o|=0,(a=-128<=o&&o<128)&&(s=Sf[o],s)?s:(r=ae(o,o<0?-1:0,!1),a&&(Sf[o]=r),r))}X.fromInt=fr;function Ct(o,e){if(isNaN(o))return e?wn:bt;if(e){if(o<0)return wn;if(o>=Af)return xf}else{if(o<=-If)return it;if(o+1>=If)return Nf}return o<0?Ct(-o,e).neg():ae(o%zr|0,o/zr|0,e)}X.fromNumber=Ct;function ae(o,e,r){return new X(o,e,r)}X.fromBits=ae;var Gs=Math.pow;function $a(o,e,r){if(o.length===0)throw Error("empty string");if(typeof e=="number"?(r=e,e=!1):e=!!e,o==="NaN"||o==="Infinity"||o==="+Infinity"||o==="-Infinity")return e?wn:bt;if(r=r||10,r<2||36<r)throw RangeError("radix");var s;if((s=o.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return $a(o.substring(1),e,r).neg();for(var a=Ct(Gs(r,8)),f=bt,d=0;d<o.length;d+=8){var g=Math.min(8,o.length-d),m=parseInt(o.substring(d,d+g),r);if(g<8){var y=Ct(Gs(r,g));f=f.mul(y).add(Ct(m))}else f=f.mul(a),f=f.add(Ct(m))}return f.unsigned=e,f}X.fromString=$a;function Lt(o,e){return typeof o=="number"?Ct(o,e):typeof o=="string"?$a(o,e):ae(o.low,o.high,typeof e=="boolean"?e:o.unsigned)}X.fromValue=Lt;var kf=1<<16,ay=1<<24,zr=kf*kf,Af=zr*zr,If=Af/2,Cf=fr(ay),bt=fr(0);X.ZERO=bt;var wn=fr(0,!0);X.UZERO=wn;var Ur=fr(1);X.ONE=Ur;var Ef=fr(1,!0);X.UONE=Ef;var za=fr(-1);X.NEG_ONE=za;var Nf=ae(-1,2147483647,!1);X.MAX_VALUE=Nf;var xf=ae(-1,-1,!0);X.MAX_UNSIGNED_VALUE=xf;var it=ae(0,-2147483648,!1);X.MIN_VALUE=it;var b=X.prototype;b.toInt=function(){return this.unsigned?this.low>>>0:this.low},b.toNumber=function(){return this.unsigned?(this.high>>>0)*zr+(this.low>>>0):this.high*zr+(this.low>>>0)},b.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(it)){var r=Ct(e),s=this.div(r),a=s.mul(r).sub(this);return s.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var f=Ct(Gs(e,6),this.unsigned),d=this,g="";;){var m=d.div(f),y=d.sub(m.mul(f)).toInt()>>>0,A=y.toString(e);if(d=m,d.isZero())return A+g;for(;A.length<6;)A="0"+A;g=""+A+g}},b.getHighBits=function(){return this.high},b.getHighBitsUnsigned=function(){return this.high>>>0},b.getLowBits=function(){return this.low},b.getLowBitsUnsigned=function(){return this.low>>>0},b.getNumBitsAbs=function(){if(this.isNegative())return this.eq(it)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&(e&1<<r)==0;r--);return this.high!=0?r+33:r+1},b.isZero=function(){return this.high===0&&this.low===0},b.eqz=b.isZero,b.isNegative=function(){return!this.unsigned&&this.high<0},b.isPositive=function(){return this.unsigned||this.high>=0},b.isOdd=function(){return(this.low&1)===1},b.isEven=function(){return(this.low&1)===0},b.equals=function(e){return We(e)||(e=Lt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},b.eq=b.equals,b.notEquals=function(e){return!this.eq(e)},b.neq=b.notEquals,b.ne=b.notEquals,b.lessThan=function(e){return this.comp(e)<0},b.lt=b.lessThan,b.lessThanOrEqual=function(e){return this.comp(e)<=0},b.lte=b.lessThanOrEqual,b.le=b.lessThanOrEqual,b.greaterThan=function(e){return this.comp(e)>0},b.gt=b.greaterThan,b.greaterThanOrEqual=function(e){return this.comp(e)>=0},b.gte=b.greaterThanOrEqual,b.ge=b.greaterThanOrEqual,b.compare=function(e){if(We(e)||(e=Lt(e)),this.eq(e))return 0;var r=this.isNegative(),s=e.isNegative();return r&&!s?-1:!r&&s?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},b.comp=b.compare,b.negate=function(){return!this.unsigned&&this.eq(it)?it:this.not().add(Ur)},b.neg=b.negate,b.add=function(e){We(e)||(e=Lt(e));var r=this.high>>>16,s=this.high&65535,a=this.low>>>16,f=this.low&65535,d=e.high>>>16,g=e.high&65535,m=e.low>>>16,y=e.low&65535,A=0,D=0,S=0,x=0;return x+=f+y,S+=x>>>16,x&=65535,S+=a+m,D+=S>>>16,S&=65535,D+=s+g,A+=D>>>16,D&=65535,A+=r+d,A&=65535,ae(S<<16|x,A<<16|D,this.unsigned)},b.subtract=function(e){return We(e)||(e=Lt(e)),this.add(e.neg())},b.sub=b.subtract,b.multiply=function(e){if(this.isZero())return this;if(We(e)||(e=Lt(e)),It){var r=It.mul(this.low,this.high,e.low,e.high);return ae(r,It.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?wn:bt;if(this.eq(it))return e.isOdd()?it:bt;if(e.eq(it))return this.isOdd()?it:bt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Cf)&&e.lt(Cf))return Ct(this.toNumber()*e.toNumber(),this.unsigned);var s=this.high>>>16,a=this.high&65535,f=this.low>>>16,d=this.low&65535,g=e.high>>>16,m=e.high&65535,y=e.low>>>16,A=e.low&65535,D=0,S=0,x=0,$=0;return $+=d*A,x+=$>>>16,$&=65535,x+=f*A,S+=x>>>16,x&=65535,x+=d*y,S+=x>>>16,x&=65535,S+=a*A,D+=S>>>16,S&=65535,S+=f*y,D+=S>>>16,S&=65535,S+=d*m,D+=S>>>16,S&=65535,D+=s*A+a*y+f*m+d*g,D&=65535,ae(x<<16|$,D<<16|S,this.unsigned)},b.mul=b.multiply,b.divide=function(e){if(We(e)||(e=Lt(e)),e.isZero())throw Error("division by zero");if(It){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?It.div_u:It.div_s)(this.low,this.high,e.low,e.high);return ae(r,It.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?wn:bt;var s,a,f;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return wn;if(e.gt(this.shru(1)))return Ef;f=wn}else{if(this.eq(it)){if(e.eq(Ur)||e.eq(za))return it;if(e.eq(it))return Ur;var d=this.shr(1);return s=d.div(e).shl(1),s.eq(bt)?e.isNegative()?Ur:za:(a=this.sub(e.mul(s)),f=s.add(a.div(e)),f)}else if(e.eq(it))return this.unsigned?wn:bt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();f=bt}for(a=this;a.gte(e);){s=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var g=Math.ceil(Math.log(s)/Math.LN2),m=g<=48?1:Gs(2,g-48),y=Ct(s),A=y.mul(e);A.isNegative()||A.gt(a);)s-=m,y=Ct(s,this.unsigned),A=y.mul(e);y.isZero()&&(y=Ur),f=f.add(y),a=a.sub(A)}return f},b.div=b.divide,b.modulo=function(e){if(We(e)||(e=Lt(e)),It){var r=(this.unsigned?It.rem_u:It.rem_s)(this.low,this.high,e.low,e.high);return ae(r,It.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},b.mod=b.modulo,b.rem=b.modulo,b.not=function(){return ae(~this.low,~this.high,this.unsigned)},b.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},b.clz=b.countLeadingZeros,b.countTrailingZeros=function(){return this.low?wf(this.low):wf(this.high)+32},b.ctz=b.countTrailingZeros,b.and=function(e){return We(e)||(e=Lt(e)),ae(this.low&e.low,this.high&e.high,this.unsigned)},b.or=function(e){return We(e)||(e=Lt(e)),ae(this.low|e.low,this.high|e.high,this.unsigned)},b.xor=function(e){return We(e)||(e=Lt(e)),ae(this.low^e.low,this.high^e.high,this.unsigned)},b.shiftLeft=function(e){return We(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ae(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ae(0,this.low<<e-32,this.unsigned)},b.shl=b.shiftLeft,b.shiftRight=function(e){return We(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ae(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ae(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},b.shr=b.shiftRight,b.shiftRightUnsigned=function(e){return We(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ae(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?ae(this.high,0,this.unsigned):ae(this.high>>>e-32,0,this.unsigned)},b.shru=b.shiftRightUnsigned,b.shr_u=b.shiftRightUnsigned,b.rotateLeft=function(e){var r;return We(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ae(this.high,this.low,this.unsigned):e<32?(r=32-e,ae(this.low<<e|this.high>>>r,this.high<<e|this.low>>>r,this.unsigned)):(e-=32,r=32-e,ae(this.high<<e|this.low>>>r,this.low<<e|this.high>>>r,this.unsigned))},b.rotl=b.rotateLeft,b.rotateRight=function(e){var r;return We(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ae(this.high,this.low,this.unsigned):e<32?(r=32-e,ae(this.high<<r|this.low>>>e,this.low<<r|this.high>>>e,this.unsigned)):(e-=32,r=32-e,ae(this.low<<r|this.high>>>e,this.high<<r|this.low>>>e,this.unsigned))},b.rotr=b.rotateRight,b.toSigned=function(){return this.unsigned?ae(this.low,this.high,!1):this},b.toUnsigned=function(){return this.unsigned?this:ae(this.low,this.high,!0)},b.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},b.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},b.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},X.fromBytes=function(e,r,s){return s?X.fromBytesLE(e,r):X.fromBytesBE(e,r)},X.fromBytesLE=function(e,r){return new X(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},X.fromBytesBE=function(e,r){return new X(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)};var se=(o=>(o.Ok="ok",o.ClientNotActive="client-not-active",o.Unimplemented="unimplemented",o.Unsupported="unsupported",o.DocumentNotAttached="document-not-attached",o.DocumentNotDetached="document-not-detached",o.DocumentRemoved="document-removed",o.InvalidObjectKey="invalid-object-key",o.InvalidArgument="invalid-argument",o))(se||{});class le extends Error{constructor(e,r){super(r),u(this,"name","YorkieError"),u(this,"stack"),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}function Mt(o){if(o instanceof Map){const e=Array.from(o);return new Map(JSON.parse(JSON.stringify(e)))}return JSON.parse(JSON.stringify(o))}const Pf=o=>o?Object.entries(o).length===0:!0,Fr=o=>{const e={};for(const[r,s]of Object.entries(o))e[r]=JSON.stringify(s);return e},jr=o=>{const e={};for(const[r,s]of Object.entries(o))e[r]=JSON.parse(s);return e};var Mn=(o=>(o.Put="put",o.Clear="clear",o))(Mn||{});class Ua{constructor(e,r){u(this,"context"),u(this,"presence"),this.context=e,this.presence=r}set(e,r){for(const s of Object.keys(e))this.presence[s]=e[s];this.context.setPresenceChange({type:"put",presence:Mt(this.presence)}),this.context.setReversePresence(e,r)}get(e){return this.presence[e]}clear(){this.presence={},this.context.setPresenceChange({type:"clear"})}}const Ys="000000000000000000000000",ly="FFFFFFFFFFFFFFFFFFFFFFFF";class Qe{constructor(e,r,s){u(this,"lamport"),u(this,"delimiter"),u(this,"actorID"),this.lamport=e,this.delimiter=r,this.actorID=s}static of(e,r,s){return new Qe(e,r,s)}static fromStruct(e){return Qe.of(X.fromString(e.lamport,!0),e.delimiter,e.actorID)}toIDString(){return`${this.lamport.toString()}:${this.actorID}:${this.delimiter}`}toStruct(){return{lamport:this.getLamportAsString(),delimiter:this.getDelimiter(),actorID:this.getActorID()}}toTestString(){return`${this.lamport.toString()}:${this.actorID.slice(-2)}:${this.delimiter}`}setActor(e){return new Qe(this.lamport,this.delimiter,e)}getLamportAsString(){return this.lamport.toString()}getLamport(){return this.lamport}getDelimiter(){return this.delimiter}getActorID(){return this.actorID}after(e){return this.compare(e)>0}equals(e){return this.compare(e)===0}compare(e){if(this.lamport.greaterThan(e.lamport))return 1;if(e.lamport.greaterThan(this.lamport))return-1;const r=this.actorID.localeCompare(e.actorID);return r!==0?r:this.delimiter>e.delimiter?1:e.delimiter>this.delimiter?-1:0}}const Fa=0,uy=4294967295,cy=X.MAX_VALUE,Bt=new Qe(X.fromNumber(0),Fa,Ys);new Qe(X.fromNumber(1),Fa+1,Ys);const _i=new Qe(cy,uy,ly);var ht=(o=>(o[o.Trivial=0]="Trivial",o[o.Debug=1]="Debug",o[o.Info=2]="Info",o[o.Warn=3]="Warn",o[o.Error=4]="Error",o[o.Fatal=5]="Fatal",o))(ht||{});let dr=2;function fy(o){dr=o}const _={trivial:(...o)=>{dr>0||typeof console<"u"&&console.log("YORKIE T:",...o)},debug:(...o)=>{dr>1||typeof console<"u"&&console.log("YORKIE D:",...o)},info:(...o)=>{dr>2||typeof console<"u"&&console.log("YORKIE I:",...o)},warn:(...o)=>{dr>3||typeof console<"u"&&(typeof console.warn<"u"?console.warn("YORKIE W:",...o):console.log("YORKIE W:",...o))},error:(...o)=>{dr>4||typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE E:",...o):console.log("YORKIE E:",...o))},fatal:(o,...e)=>{throw typeof console<"u"&&(typeof console.error<"u"?console.error("YORKIE F:",...e):console.log("YORKIE F:",...e)),new Error(`YORKIE F: ${o}`)},isEnabled:o=>dr<=o};function sn(o){return o.replace(/["'\\\n\r\f\b\t\u2028\u2029]/g,function(e){switch(e){case'"':case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\f":return"\\f";case"\b":return"\\b";case"	":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}})}class Li{constructor(e){u(this,"createdAt"),u(this,"movedAt"),u(this,"removedAt"),this.createdAt=e}getCreatedAt(){return this.createdAt}getID(){return this.createdAt}getMovedAt(){return this.movedAt}getRemovedAt(){return this.removedAt}getPositionedAt(){return this.movedAt?this.movedAt:this.createdAt}setMovedAt(e){return!this.movedAt||e&&e.after(this.movedAt)?(this.movedAt=e,!0):!1}setRemovedAt(e){this.removedAt=e}remove(e){return e&&e.after(this.getPositionedAt())&&(!this.removedAt||e.after(this.removedAt))?(this.removedAt=e,!0):!1}isRemoved(){return!!this.removedAt}}class Bn extends Li{constructor(e){super(e)}}class ja{constructor(e,r){u(this,"strKey"),u(this,"value"),this.strKey=e,this.value=r}static of(e,r){return new ja(e,r)}isRemoved(){return this.value.isRemoved()}getStrKey(){return this.strKey}getValue(){return this.value}remove(e){return this.value.remove(e)}}class bi{constructor(){u(this,"nodeMapByKey"),u(this,"nodeMapByCreatedAt"),this.nodeMapByKey=new Map,this.nodeMapByCreatedAt=new Map}static create(){return new bi}set(e,r,s){let a;const f=this.nodeMapByKey.get(e);f!=null&&!f.isRemoved()&&f.remove(s)&&(a=f.getValue());const d=ja.of(e,r);return this.nodeMapByCreatedAt.set(r.getCreatedAt().toIDString(),d),(f==null||s.after(f.getValue().getPositionedAt()))&&(this.nodeMapByKey.set(e,d),r.setMovedAt(s)),a}delete(e,r){this.nodeMapByCreatedAt.has(e.toIDString())||_.fatal(`fail to find ${e.toIDString()}`);const s=this.nodeMapByCreatedAt.get(e.toIDString());return s.remove(r),s.getValue()}subPathOf(e){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(!!r)return r.getStrKey()}purge(e){const r=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());if(!r){_.fatal(`fail to find ${e.getCreatedAt().toIDString()}`);return}const s=this.nodeMapByKey.get(r.getStrKey());r===s&&this.nodeMapByKey.delete(s.getStrKey()),this.nodeMapByCreatedAt.delete(r.getValue().getCreatedAt().toIDString())}deleteByKey(e,r){const s=this.nodeMapByKey.get(e);if(s!=null&&!!s.remove(r))return s.getValue()}has(e){const r=this.nodeMapByKey.get(e);return r==null?!1:!r.isRemoved()}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}get(e){const r=this.nodeMapByKey.get(e);if(!(!r||r.isRemoved()))return r}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}}class st extends Bn{constructor(e,r){super(e),u(this,"memberNodes"),this.memberNodes=r}static create(e,r){if(!r)return new st(e,bi.create());const s=bi.create();for(const[a,f]of Object.entries(r))s.set(a,f.deepcopy(),f.getCreatedAt());return new st(e,s)}subPathOf(e){return this.memberNodes.subPathOf(e)}purge(e){this.memberNodes.purge(e)}set(e,r,s){return this.memberNodes.set(e,r,s)}delete(e,r){return this.memberNodes.delete(e,r)}deleteByKey(e,r){return this.memberNodes.deleteByKey(e,r)}get(e){const r=this.memberNodes.get(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.memberNodes.getByID(e);return r==null?void 0:r.getValue()}has(e){return this.memberNodes.has(e)}toJSON(){const e=[];for(const[r,s]of this)e.push(`"${sn(r)}":${s.toJSON()}`);return`{${e.join(",")}}`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(const[r,s]of this){const{createdAt:a,value:f,type:d}=s.toJSForTest();e[r]={key:r,createdAt:a,value:f,type:d}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_OBJECT"}}getKeys(){const e=Array();for(const[r]of this)e.push(r);return e}toSortedJSON(){var e;const r=Array();for(const[a]of this)r.push(a);const s=[];for(const a of r.sort()){const f=(e=this.memberNodes.get(a))==null?void 0:e.getValue();s.push(`"${sn(a)}":${f.toSortedJSON()}`)}return`{${s.join(",")}}`}getRHT(){return this.memberNodes}deepcopy(){const e=st.create(this.getCreatedAt());for(const r of this.memberNodes)e.memberNodes.set(r.getStrKey(),r.getValue().deepcopy(),this.getPositionedAt());return e.remove(this.getRemovedAt()),e}getDescendants(e){for(const r of this.memberNodes){const s=r.getValue();if(e(s,this))return;s instanceof Bn&&s.getDescendants(e)}}*[Symbol.iterator](){const e=new Set;for(const r of this.memberNodes)e.has(r.getStrKey())||(e.add(r.getStrKey()),r.isRemoved()||(yield[r.getStrKey(),r.getValue()]))}}var ge=(o=>(o.Local="local",o.Remote="remote",o.UndoRedo="undoredo",o))(ge||{});class $t{constructor(e,r){u(this,"parentCreatedAt"),u(this,"executedAt"),this.parentCreatedAt=e,this.executedAt=r}getParentCreatedAt(){return this.parentCreatedAt}getExecutedAt(){if(!this.executedAt)throw new Error("executedAt has not been set yet");return this.executedAt}setActor(e){this.executedAt&&(this.executedAt=this.executedAt.setActor(e))}setExecutedAt(e){this.executedAt=e}}class Of{constructor(e){u(this,"value"),u(this,"left"),u(this,"right"),u(this,"parent"),u(this,"weight"),this.value=e,this.initWeight()}getNodeString(){return`${this.weight}${this.value}`}getValue(){return this.value}getLeftWeight(){return this.hasLeft()?this.left.getWeight():0}getRightWeight(){return this.hasRight()?this.right.getWeight():0}getWeight(){return this.weight}getLeft(){return this.left}getRight(){return this.right}getParent(){return this.parent}hasLeft(){return!!this.left}hasRight(){return!!this.right}hasParent(){return!!this.parent}setLeft(e){this.left=e}setRight(e){this.right=e}setParent(e){this.parent=e}unlink(){this.parent=void 0,this.right=void 0,this.left=void 0}hasLinks(){return this.hasParent()||this.hasLeft()||this.hasRight()}increaseWeight(e){this.weight+=e}initWeight(){this.weight=this.getLength()}}class Mi{constructor(e){u(this,"root"),this.root=e}get length(){return this.root?this.root.getWeight():0}find(e){if(!this.root||e<0)return[void 0,0];let r=this.root;for(;;)if(r.hasLeft()&&e<=r.getLeftWeight())r=r.getLeft();else if(r.hasRight()&&r.getLeftWeight()+r.getLength()<e)e-=r.getLeftWeight()+r.getLength(),r=r.getRight();else{e-=r.getLeftWeight();break}return e>r.getLength()&&_.fatal(`out of index range: pos: ${e} > node.length: ${r.getLength()}`),[r,e]}indexOf(e){if(!e||e!==this.root&&!e.hasLinks())return-1;let r=0,s=e,a;for(;s;)(!a||a===s.getRight())&&(r+=s.getLength()+(s.hasLeft()?s.getLeftWeight():0)),a=s,s=s.getParent();return r-e.getLength()}getRoot(){return this.root}insert(e){return this.insertAfter(this.root,e)}insertAfter(e,r){return e?(this.splayNode(e),this.root=r,r.setRight(e.getRight()),e.hasRight()&&e.getRight().setParent(r),r.setLeft(e),e.setParent(r),e.setRight(),this.updateWeight(e),this.updateWeight(r),r):(this.root=r,r)}updateWeight(e){e.initWeight(),e.hasLeft()&&e.increaseWeight(e.getLeftWeight()),e.hasRight()&&e.increaseWeight(e.getRightWeight())}updateTreeWeight(e){for(;e;)this.updateWeight(e),e=e.getParent()}splayNode(e){if(!!e)for(;;)if(this.isLeftChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e),this.rotateLeft(e);else if(this.isLeftChild(e.getParent())&&this.isLeftChild(e))this.rotateRight(e.getParent()),this.rotateRight(e);else if(this.isRightChild(e.getParent())&&this.isRightChild(e))this.rotateLeft(e.getParent()),this.rotateLeft(e);else{this.isLeftChild(e)?this.rotateRight(e):this.isRightChild(e)&&this.rotateLeft(e),this.updateWeight(e);return}}delete(e){this.splayNode(e);const r=new Mi(e.getLeft());r.root&&r.root.setParent();const s=new Mi(e.getRight());if(s.root&&s.root.setParent(),r.root){const a=r.getRightmost();r.splayNode(a),r.root.setRight(s.root),s.root&&s.root.setParent(r.root),this.root=r.root}else this.root=s.root;e.unlink(),this.root&&this.updateWeight(this.root)}deleteRange(e,r){if(!r){this.splayNode(e),this.cutOffRight(e);return}this.splayNode(e),this.splayNode(r),r.getLeft()!=e&&this.rotateRight(e),this.cutOffRight(e)}cutOffRight(e){const r=[];this.traversePostorder(e.getRight(),r);for(const s of r)s.initWeight();this.updateTreeWeight(e)}toTestString(){const e=[];return this.traverseInorder(this.root,e),e.map(r=>`[${r.getWeight()},${r.getLength()}]${r.getValue()||""}`).join("")}checkWeight(){const e=[];this.traverseInorder(this.root,e);for(const r of e)if(r.getWeight()!=r.getLength()+r.getLeftWeight()+r.getRightWeight())return!1;return!0}getRightmost(){let e=this.root;for(;e.hasRight();)e=e.getRight();return e}traverseInorder(e,r){!e||(this.traverseInorder(e.getLeft(),r),r.push(e),this.traverseInorder(e.getRight(),r))}traversePostorder(e,r){!e||(this.traversePostorder(e.getLeft(),r),this.traversePostorder(e.getRight(),r),r.push(e))}rotateLeft(e){const r=e.getParent();r.hasParent()?r===r.getParent().getLeft()?r.getParent().setLeft(e):r.getParent().setRight(e):this.root=e,e.setParent(r.getParent()),r.setRight(e.getLeft()),r.hasRight()&&r.getRight().setParent(r),e.setLeft(r),e.getLeft().setParent(e),this.updateWeight(r),this.updateWeight(e)}rotateRight(e){const r=e.getParent();r.hasParent()?r===r.getParent().getLeft()?r.getParent().setLeft(e):r.getParent().setRight(e):this.root=e,e.setParent(r.getParent()),r.setLeft(e.getRight()),r.hasLeft()&&r.getLeft().setParent(r),e.setRight(r),e.getRight().setParent(e),this.updateWeight(r),this.updateWeight(e)}isLeftChild(e){return e&&e.hasParent()?e.getParent().getLeft()===e:!1}isRightChild(e){return e&&e.hasParent()?e.getParent().getRight()===e:!1}}var Me=(o=>(o[o.Null=0]="Null",o[o.Boolean=1]="Boolean",o[o.Integer=2]="Integer",o[o.Long=3]="Long",o[o.Double=4]="Double",o[o.String=5]="String",o[o.Bytes=6]="Bytes",o[o.Date=7]="Date",o))(Me||{});class Te extends Li{constructor(e,r){super(r),u(this,"valueType"),u(this,"value"),this.valueType=Te.getPrimitiveType(e),this.value=e===void 0?null:e}static of(e,r){return new Te(e,r)}static valueFromBytes(e,r){switch(e){case 0:return null;case 1:return!!r[0];case 2:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 4:{const s=new DataView(r.buffer);return r.forEach(function(a,f){s.setUint8(f,a)}),s.getFloat64(0,!0)}case 5:return new TextDecoder("utf-8").decode(r);case 3:return X.fromBytesLE(Array.from(r));case 6:return r;case 7:return new Date(X.fromBytesLE(Array.from(r),!0).toNumber());default:throw new le(se.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return this.valueType===5?`"${sn(this.value)}"`:`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_PRIMITIVE"}}deepcopy(){const e=Te.of(this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e.setRemovedAt(this.getRemovedAt()),e}getType(){return this.valueType}static getPrimitiveType(e){switch(typeof e){case"undefined":return 0;case"boolean":return 1;case"number":return this.isInteger(e)?2:4;case"string":return 5;case"object":if(e===null)return 0;if(e instanceof X)return 3;if(e instanceof Uint8Array)return 6;if(e instanceof Date)return 7}}static isSupport(e){return Te.getPrimitiveType(e)!==void 0}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===2||e===3||e===4}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:return new Uint8Array;case 1:return this.value?new Uint8Array([1]):new Uint8Array([0]);case 2:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 4:{const e=this.value,r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}case 5:return new TextEncoder().encode(this.value);case 3:{const r=this.value.toBytesLE();return Uint8Array.from(r)}case 6:return this.value;case 7:{const e=this.value,r=X.fromNumber(e.getTime(),!0).toBytesLE();return Uint8Array.from(r)}default:throw new le(se.Unimplemented,`unimplemented type: ${this.valueType}`)}}}class Xs extends Of{constructor(e){super(e),u(this,"prev"),u(this,"next"),this.value=e}static createAfter(e,r){const s=new Xs(r),a=e.next;return e.next=s,s.prev=e,s.next=a,a&&(a.prev=s),s}remove(e){return this.value.remove(e)}getCreatedAt(){return this.value.getCreatedAt()}getPositionedAt(){return this.value.getPositionedAt()}release(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=void 0,this.next=void 0}getLength(){return this.value.isRemoved()?0:1}getPrev(){return this.prev}getNext(){return this.next}getValue(){return this.value}isRemoved(){return this.value.isRemoved()}}class Bi{constructor(){u(this,"dummyHead"),u(this,"last"),u(this,"nodeMapByIndex"),u(this,"nodeMapByCreatedAt");const e=Te.of(0,Bt);e.setRemovedAt(Bt),this.dummyHead=new Xs(e),this.last=this.dummyHead,this.nodeMapByIndex=new Mi,this.nodeMapByCreatedAt=new Map,this.nodeMapByIndex.insert(this.dummyHead),this.nodeMapByCreatedAt.set(this.dummyHead.getCreatedAt().toIDString(),this.dummyHead)}static create(){return new Bi}get length(){return this.nodeMapByIndex.length}findNextBeforeExecutedAt(e,r){let s=this.nodeMapByCreatedAt.get(e.toIDString());for(s||_.fatal(`cant find the given node: ${e.toIDString()}`);s.getNext()&&s.getNext().getPositionedAt().after(r);)s=s.getNext();return s}release(e){this.last===e&&(this.last=e.getPrev()),e.release(),this.nodeMapByIndex.delete(e),this.nodeMapByCreatedAt.delete(e.getValue().getCreatedAt().toIDString())}insertAfter(e,r,s=r.getCreatedAt()){const a=this.findNextBeforeExecutedAt(e,s),f=Xs.createAfter(a,r);a===this.last&&(this.last=f),this.nodeMapByIndex.insertAfter(a,f),this.nodeMapByCreatedAt.set(f.getCreatedAt().toIDString(),f)}moveAfter(e,r,s){const a=this.nodeMapByCreatedAt.get(e.toIDString());a||_.fatal(`cant find the given node: ${e.toIDString()}`);const f=this.nodeMapByCreatedAt.get(r.toIDString());f||_.fatal(`cant find the given node: ${r.toIDString()}`),a!==f&&(!f.getValue().getMovedAt()||s.after(f.getValue().getMovedAt()))&&(this.release(f),this.insertAfter(a.getCreatedAt(),f.getValue(),s),f.getValue().setMovedAt(s))}insert(e){this.insertAfter(this.last.getCreatedAt(),e)}getByID(e){return this.nodeMapByCreatedAt.get(e.toIDString())}subPathOf(e){const r=this.nodeMapByCreatedAt.get(e.toIDString());if(!!r)return String(this.nodeMapByIndex.indexOf(r))}purge(e){const r=this.nodeMapByCreatedAt.get(e.getCreatedAt().toIDString());r||_.fatal(`fail to find the given createdAt: ${e.getCreatedAt().toIDString()}`),this.release(r)}getByIndex(e){if(e>=this.length)return;const[r,s]=this.nodeMapByIndex.find(e);let a=r;if(e===0&&r===this.dummyHead||s>0)do a&&(a=a.getNext());while(a&&a.isRemoved());return a}getPrevCreatedAt(e){let r=this.nodeMapByCreatedAt.get(e.toIDString());do r=r.getPrev();while(this.dummyHead!==r&&r.isRemoved());return r.getValue().getCreatedAt()}delete(e,r){const s=this.nodeMapByCreatedAt.get(e.toIDString()),a=s.isRemoved();return s.remove(r)&&!a&&this.nodeMapByIndex.splayNode(s),s.getValue()}deleteByIndex(e,r){const s=this.getByIndex(e);if(!!s)return s.remove(r)&&this.nodeMapByIndex.splayNode(s),s.getValue()}getHead(){return this.dummyHead.getValue()}getLast(){return this.last.getValue()}getLastCreatedAt(){return this.last.getCreatedAt()}toTestString(){const e=[];for(const r of this){const s=`${r.getCreatedAt().toIDString()}:${r.getValue().toJSON()}`;r.isRemoved()?e.push(`{${s}}`):e.push(`[${s}]`)}return e.join("")}*[Symbol.iterator](){let e=this.dummyHead.getNext();for(;e;)yield e,e=e.getNext()}}class gt extends Bn{constructor(e,r){super(e),u(this,"elements"),this.elements=r}static create(e,r){if(!r)return new gt(e,Bi.create());const s=Bi.create();for(const a of r)s.insertAfter(s.getLastCreatedAt(),a.deepcopy());return new gt(e,s)}subPathOf(e){return this.elements.subPathOf(e)}purge(e){this.elements.purge(e)}insertAfter(e,r){this.elements.insertAfter(e,r)}moveAfter(e,r,s){this.elements.moveAfter(e,r,s)}get(e){const r=this.elements.getByIndex(e);return r==null?void 0:r.getValue()}getByID(e){const r=this.elements.getByID(e);return r==null?void 0:r.getValue()}getHead(){return this.elements.getHead()}getLast(){return this.elements.getLast()}getPrevCreatedAt(e){return this.elements.getPrevCreatedAt(e)}delete(e,r){return this.elements.delete(e,r)}deleteByIndex(e,r){return this.elements.deleteByIndex(e,r)}getLastCreatedAt(){return this.elements.getLastCreatedAt()}get length(){return this.elements.length}*[Symbol.iterator](){for(const e of this.elements)e.isRemoved()||(yield e.getValue())}toTestString(){return this.elements.toTestString()}getDescendants(e){for(const r of this.elements){const s=r.getValue();if(e(s,this))return;s instanceof Bn&&s.getDescendants(e)}}toJSON(){const e=[];for(const r of this)e.push(r.toJSON());return`[${e.join(",")}]`}toJS(){return JSON.parse(this.toJSON())}toJSForTest(){const e={};for(let r=0;r<this.length;r++){const{createdAt:s,value:a,type:f}=this.get(r).toJSForTest();e[r]={key:String(r),createdAt:s,value:a,type:f}}return{createdAt:this.getCreatedAt().toTestString(),value:e,type:"YORKIE_ARRAY"}}toSortedJSON(){return this.toJSON()}getElements(){return this.elements}deepcopy(){const e=gt.create(this.getCreatedAt());for(const r of this.elements)e.elements.insertAfter(e.getLastCreatedAt(),r.getValue().deepcopy());return e.remove(this.getRemovedAt()),e}}class $n extends $t{constructor(e,r,s){super(e,s),u(this,"createdAt"),this.createdAt=r}static create(e,r,s){return new $n(e,r,s)}execute(e,r){var s;const a=e.findByCreatedAt(this.getParentCreatedAt());if(a||_.fatal(`fail to find ${this.getParentCreatedAt()}`),a instanceof Bn||_.fatal(`only object and array can execute remove: ${a}`),r===ge.UndoRedo){let y=a.getByID(this.createdAt);for(;y;){if(y.getRemovedAt())return;y=(s=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:s.parent}}const f=a.subPathOf(this.createdAt),d=this.toReverseOperation(a),g=a.delete(this.createdAt,this.getExecutedAt());return e.registerRemovedElement(g),{opInfos:a instanceof gt?[{type:"remove",path:e.createPath(this.getParentCreatedAt()),index:Number(f)}]:[{type:"remove",path:e.createPath(this.getParentCreatedAt()),key:f}],reverseOp:d}}toReverseOperation(e){if(e instanceof st){const r=e.subPathOf(this.createdAt);if(r!==void 0){const s=e.get(r);if(s!==void 0)return hr.create(r,s.deepcopy(),this.getParentCreatedAt())}}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.REMOVE.${this.createdAt.toTestString()}`}getCreatedAt(){return this.createdAt}}class hr extends $t{constructor(e,r,s,a){super(s,a),u(this,"key"),u(this,"value"),this.key=e,this.value=r}static create(e,r,s,a){return new hr(e,r,s,a)}execute(e,r){var s;const a=e.findByCreatedAt(this.getParentCreatedAt());if(a||_.fatal(`fail to find ${this.getParentCreatedAt()}`),a instanceof st||_.fatal("fail to execute, only object can execute set"),r===ge.UndoRedo){let y=a;for(;y;){if(y.getRemovedAt())return;y=(s=e.findElementPairByCreatedAt(y.getCreatedAt()))==null?void 0:s.parent}}const f=a.get(this.key),d=this.toReverseOperation(f),g=this.value.deepcopy(),m=a.set(this.key,g,this.getExecutedAt());return r===ge.UndoRedo&&e.findByCreatedAt(g.getCreatedAt())&&e.deregisterElement(g),e.registerElement(g,a),m&&e.registerRemovedElement(m),{opInfos:[{type:"set",path:e.createPath(this.getParentCreatedAt()),key:this.key}],reverseOp:d}}toReverseOperation(e){let r=$n.create(this.getParentCreatedAt(),this.value.getCreatedAt());return e!==void 0&&!e.isRemoved()&&(r=hr.create(this.key,e.deepcopy(),this.getParentCreatedAt())),r}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.SET.${this.key}=${this.value.toSortedJSON()}`}getKey(){return this.key}getValue(){return this.value}}class $i extends $t{constructor(e,r,s,a){super(e,a),u(this,"prevCreatedAt"),u(this,"value"),this.prevCreatedAt=r,this.value=s}static create(e,r,s,a){return new $i(e,r,s,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof gt||_.fatal("fail to execute, only array can execute add");const s=r,a=this.value.deepcopy();return s.insertAfter(this.prevCreatedAt,a),e.registerElement(a,s),{opInfos:[{type:"add",path:e.createPath(this.getParentCreatedAt()),index:Number(s.subPathOf(this.getEffectedCreatedAt()))}]}}getEffectedCreatedAt(){return this.value.getCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.ADD.${this.value.toJSON()}`}getPrevCreatedAt(){return this.prevCreatedAt}getValue(){return this.value}}class zn extends $t{constructor(e,r,s,a){super(e,a),u(this,"prevCreatedAt"),u(this,"createdAt"),this.prevCreatedAt=r,this.createdAt=s}static create(e,r,s,a){return new zn(e,r,s,a)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof gt||_.fatal("fail to execute, only array can execute move");const s=r,a=Number(s.subPathOf(this.createdAt));s.moveAfter(this.prevCreatedAt,this.createdAt,this.getExecutedAt());const f=Number(s.subPathOf(this.createdAt));return{opInfos:[{type:"move",path:e.createPath(this.getParentCreatedAt()),index:f,previousIndex:a}]}}getEffectedCreatedAt(){return this.createdAt}toTestString(){return`${this.getParentCreatedAt().toTestString()}.MOVE`}getPrevCreatedAt(){return this.prevCreatedAt}getCreatedAt(){return this.createdAt}}class gr{constructor(e,r,s,a){u(this,"key"),u(this,"value"),u(this,"updatedAt"),u(this,"_isRemoved"),this.key=e,this.value=r,this.updatedAt=s,this._isRemoved=a}static of(e,r,s,a){return new gr(e,r,s,a)}getKey(){return this.key}getValue(){return this.value}getUpdatedAt(){return this.updatedAt}isRemoved(){return this._isRemoved}toIDString(){return`${this.updatedAt.toIDString()}:${this.key}`}getRemovedAt(){if(this._isRemoved)return this.updatedAt}}class Sn{constructor(){u(this,"nodeMapByKey"),u(this,"numberOfRemovedElement"),this.nodeMapByKey=new Map,this.numberOfRemovedElement=0}static create(){return new Sn}getNodeMapByKey(){return this.nodeMapByKey}set(e,r,s){const a=this.nodeMapByKey.get(e);if(a&&a.isRemoved()&&s.after(a.getUpdatedAt())&&(this.numberOfRemovedElement-=1),a===void 0||s.after(a.getUpdatedAt())){const f=gr.of(e,r,s,!1);return this.nodeMapByKey.set(e,f),a!==void 0&&a.isRemoved()?[a,f]:[void 0,f]}return a.isRemoved()?[a,void 0]:[void 0,void 0]}setInternal(e,r,s,a){const f=gr.of(e,r,s,a);this.nodeMapByKey.set(e,f),a&&this.numberOfRemovedElement++}remove(e,r){const s=this.nodeMapByKey.get(e),a=[];if(s===void 0||r.after(s.getUpdatedAt())){if(s===void 0){this.numberOfRemovedElement+=1;const g=gr.of(e,"",r,!0);return this.nodeMapByKey.set(e,g),a.push(g),a}const f=s.isRemoved();f||(this.numberOfRemovedElement+=1),f&&a.push(s);const d=gr.of(e,s.getValue(),r,!0);return this.nodeMapByKey.set(e,d),a.push(d),a}return a}has(e){if(this.nodeMapByKey.has(e)){const r=this.nodeMapByKey.get(e);return r!==void 0&&!r.isRemoved()}return!1}get(e){if(!!this.nodeMapByKey.has(e))return this.nodeMapByKey.get(e).getValue()}deepcopy(){const e=new Sn;for(const[,r]of this.nodeMapByKey)e.setInternal(r.getKey(),r.getValue(),r.getUpdatedAt(),r.isRemoved());return e}toJSON(){if(!this.size())return"{}";const e=[];for(const[r,s]of this.nodeMapByKey)s.isRemoved()||e.push(`"${sn(r)}":"${sn(s.getValue())}"`);return`{${e.join(",")}}`}size(){return this.nodeMapByKey.size-this.numberOfRemovedElement}toObject(){const e={};for(const[r,s]of this.nodeMapByKey)s.isRemoved()||(e[r]=s.getValue());return e}*[Symbol.iterator](){for(const[,e]of this.nodeMapByKey)yield e}purge(e){const r=this.nodeMapByKey.get(e.getKey());r==null||r.toIDString()!=e.toIDString()||(this.nodeMapByKey.delete(e.getKey()),this.numberOfRemovedElement--)}}class zi{constructor(e){u(this,"attributes"),u(this,"content"),this.attributes=Sn.create(),this.content=e}static create(e){return new zi(e)}get length(){return this.content.length}substring(e,r){const s=new zi(this.content.substring(e,r));return s.attributes=this.attributes.deepcopy(),s}setAttr(e,r,s){return this.attributes.set(e,r,s)}getAttrs(){return this.attributes}toString(){return this.content}toJSON(){const e=sn(this.content),r=this.attributes.toObject(),s=[];for(const[a,f]of Object.entries(r)){const d=JSON.parse(f),g=typeof d=="string"?`"${sn(a)}":"${sn(d)}"`:`"${sn(a)}":${String(d)}`;s.push(g)}return s.sort(),s.length===0?`{"val":"${e}"}`:`{"attrs":{${s.join(",")}},"val":"${e}"}`}getAttributes(){return this.attributes.toObject()}getContent(){return this.content}purge(e){this.attributes&&e instanceof gr&&this.attributes.purge(e)}getGCPairs(){const e=[];for(const r of this.attributes)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}class Et extends Li{constructor(e,r){super(r),u(this,"rgaTreeSplit"),this.rgaTreeSplit=e}static create(e,r){return new Et(e,r)}edit(e,r,s,a,f){const d=r?zi.create(r):void 0;if(d&&a)for(const[S,x]of Object.entries(a))d.setAttr(S,x,s);const[g,m,y,A]=this.rgaTreeSplit.edit(e,s,d,f),D=A.map(S=>({...S,value:S.value?{attributes:jr(S.value.getAttributes()),content:S.value.getContent()}:{attributes:void 0,content:""},type:"content"}));return[m,D,y,[g,g]]}setStyle(e,r,s,a){const[,f]=this.rgaTreeSplit.findNodeWithSplit(e[1],s),[,d]=this.rgaTreeSplit.findNodeWithSplit(e[0],s),g=[],m=this.rgaTreeSplit.findBetween(d,f),y=new Map,A=[];for(const S of m){const x=S.getCreatedAt().getActorID(),$=a!=null&&a.size?a.has(x)?a.get(x):Bt:_i;if(S.canStyle(s,$)){const J=y.get(x),K=S.getCreatedAt();(!J||K.after(J))&&y.set(x,K),A.push(S)}}const D=[];for(const S of A){if(S.isRemoved())continue;const[x,$]=this.rgaTreeSplit.findIndexesFromRange(S.createPosRange());g.push({type:"style",actor:s.getActorID(),from:x,to:$,value:{attributes:jr(r)}});for(const[J,K]of Object.entries(r)){const[ne]=S.getValue().setAttr(J,K,s);ne!==void 0&&D.push({parent:S.getValue(),child:ne})}}return[y,D,g]}indexRangeToPosRange(e,r){const s=this.rgaTreeSplit.indexToPos(e);return e===r?[s,s]:[s,this.rgaTreeSplit.indexToPos(r)]}get length(){return this.rgaTreeSplit.length}checkWeight(){return this.rgaTreeSplit.checkWeight()}toJSON(){const e=[];for(const r of this.rgaTreeSplit)r.isRemoved()||e.push(r.getValue().toJSON());return`[${e.join(",")}]`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TEXT"}}toString(){return this.rgaTreeSplit.toString()}values(){const e=[];for(const r of this.rgaTreeSplit)if(!r.isRemoved()){const s=r.getValue();e.push({attributes:jr(s.getAttributes()),content:s.getContent()})}return e}getRGATreeSplit(){return this.rgaTreeSplit}toTestString(){return this.rgaTreeSplit.toTestString()}deepcopy(){const e=new Et(this.rgaTreeSplit.deepcopy(),this.getCreatedAt());return e.remove(this.getRemovedAt()),e}findIndexesFromRange(e){return this.rgaTreeSplit.findIndexesFromRange(e)}getGCPairs(){const e=[];for(const r of this.rgaTreeSplit){r.getRemovedAt()&&e.push({parent:this.rgaTreeSplit,child:r});for(const s of r.getValue().getGCPairs())e.push(s)}return e}}class Ui extends $t{constructor(e,r,s,a,f,d,g){super(e,g),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"content"),u(this,"attributes"),this.fromPos=r,this.toPos=s,this.maxCreatedAtMapByActor=a,this.content=f,this.attributes=d}static create(e,r,s,a,f,d,g){return new Ui(e,r,s,a,f,d,g)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Et||_.fatal("fail to execute, only Text can execute edit");const s=r,[,a,f]=s.edit([this.fromPos,this.toPos],this.content,this.getExecutedAt(),Object.fromEntries(this.attributes),this.maxCreatedAtMapByActor);for(const d of f)e.registerGCPair(d);return{opInfos:a.map(({from:d,to:g,value:m})=>({type:"edit",from:d,to:g,value:m,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),s=this.toPos.toTestString(),a=this.content;return`${e}.EDIT(${r},${s},${a})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContent(){return this.content}getAttributes(){return this.attributes||new Map}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Fi extends $t{constructor(e,r,s,a,f,d){super(e,d),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"attributes"),this.fromPos=r,this.toPos=s,this.maxCreatedAtMapByActor=a,this.attributes=f}static create(e,r,s,a,f,d){return new Fi(e,r,s,a,f,d)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Et||_.fatal("fail to execute, only Text can execute edit");const s=r,[,a,f]=s.setStyle([this.fromPos,this.toPos],this.attributes?Object.fromEntries(this.attributes):{},this.getExecutedAt(),this.maxCreatedAtMapByActor);for(const d of a)e.registerGCPair(d);return{opInfos:f.map(({from:d,to:g,value:m})=>({type:"style",from:d,to:g,value:m,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=this.fromPos.toTestString(),s=this.toPos.toTestString(),a=this.attributes;return`${e}.STYL(${r},${s},${JSON.stringify(a)})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}const dy=2,hy="root",Tn="text";function ji(o,e){let r=0;const s=o.children;for(let a=0;a<e;a++){const f=s[a];!f||f.isRemoved||(r+=f.paddedSize)}return r}class gy{constructor(e,r=[]){if(u(this,"type"),u(this,"parent"),u(this,"_children"),u(this,"size"),this.type=e,this.size=0,this._children=r,this.isText&&this._children.length>0)throw new Error(`Text node cannot have children: ${this.type}`)}updateAncestorsSize(){let e=this.parent;const r=this.isRemoved?-1:1;for(;e&&(e.size+=this.paddedSize*r,!e.isRemoved);)e=e.parent}updateDescendantsSize(){let e=0;for(const r of this._children){const s=r.updateDescendantsSize();r.isRemoved||(e+=s)}return this.size+=e,this.paddedSize}get isText(){return this.type===Tn}get paddedSize(){return this.size+(this.isText?0:dy)}isAncestorOf(e){return py(this,e)}get nextSibling(){const e=this.parent.findOffset(this),r=this.parent.children[e+1];if(r)return r}get prevSibling(){const e=this.parent.findOffset(this),r=this.parent.children[e-1];if(r)return r}splitText(e,r){if(e===0||e===this.size)return;const s=this.value.slice(0,e),a=this.value.slice(e);if(!a.length)return;this.value=s;const f=this.cloneText(e+r);return f.value=a,this.parent.insertAfterInternal(f,this),f}get children(){return this._children.filter(e=>!e.isRemoved)}get allChildren(){return[...this._children]}hasTextChild(){return this.children.length>0&&this.children.every(e=>e.isText)}append(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.push(...e);for(const r of e)r.parent=this,r.updateAncestorsSize()}prepend(...e){if(this.isText)throw new Error("Text node cannot have children");this._children.unshift(...e);for(const r of e)r.parent=this}insertBefore(e,r){if(this.isText)throw new Error("Text node cannot have children");const s=this._children.indexOf(r);if(s===-1)throw new Error("child not found");this.insertAtInternal(e,s),e.updateAncestorsSize()}insertAfter(e,r){if(this.isText)throw new Error("Text node cannot have children");const s=this._children.indexOf(r);if(s===-1)throw new Error("child not found");this.insertAtInternal(e,s+1),e.updateAncestorsSize()}insertAt(e,r){if(this.isText)throw new Error("Text node cannot have children");this.insertAtInternal(e,r),e.updateAncestorsSize()}removeChild(e){if(this.isText)throw new Error("Text node cannot have children");const r=this._children.indexOf(e);if(r===-1)throw new Error("child not found");this._children.splice(r,1),e.parent=void 0}splitElement(e,r){const s=this.cloneElement(r);this.parent.insertAfterInternal(s,this),s.updateAncestorsSize();const a=this.children.slice(0,e),f=this.children.slice(e);this._children=a,s._children=f,this.size=this._children.reduce((d,g)=>d+g.paddedSize,0),s.size=s._children.reduce((d,g)=>d+g.paddedSize,0);for(const d of s._children)d.parent=s;return s}insertAfterInternal(e,r){if(this.isText)throw new Error("Text node cannot have children");const s=this._children.indexOf(r);if(s===-1)throw new Error("child not found");this.insertAtInternal(e,s+1)}insertAtInternal(e,r){if(this.isText)throw new Error("Text node cannot have children");this._children.splice(r,0,e),e.parent=this}findOffset(e){if(this.isText)throw new Error("Text node cannot have children");if(e.isRemoved){const r=this._children.indexOf(e);return this.allChildren.splice(0,r).filter(a=>!a.isRemoved).length}return this.children.indexOf(e)}findBranchOffset(e){if(this.isText)throw new Error("Text node cannot have children");let r=e;for(;r;){const s=this._children.indexOf(r);if(s!==-1)return s;r=r.parent}return-1}}function py(o,e){if(o===e)return!1;for(;e.parent;){if(e.parent===o)return!0;e=e.parent}return!1}var De=(o=>(o.Start="Start",o.End="End",o.Text="Text",o))(De||{});function Df(o,e,r,s){if(e>r)throw new Error(`from is greater than to: ${e} > ${r}`);if(e>o.size)throw new Error(`from is out of range: ${e} > ${o.size}`);if(r>o.size)throw new Error(`to is out of range: ${r} > ${o.size}`);if(e===r)return;let a=0;for(const f of o.children){if(e-f.paddedSize<a&&a<r){const d=f.isText?e-a:e-a-1,g=f.isText?r-a:r-a-1,m=!f.isText&&d<0,y=!f.isText&&g>f.size;(f.isText||m)&&s([f,f.isText?"Text":"Start"],y),Df(f,Math.max(0,d),Math.min(g,f.size),s),y&&s([f,"End"],y)}a+=f.paddedSize}}function Rf(o,e,r=0){for(const s of o.children)Rf(s,e,r+1);e(o,r)}function Qs(o,e,r=0){for(const s of o._children)Qs(s,e,r+1);e(o,r)}function Va(o,e,r=!0){if(e>o.size)throw new Error(`index is out of range: ${e} > ${o.size}`);if(o.isText)return{node:o,offset:e};let s=0,a=0;for(const f of o.children){if(r&&f.isText&&f.size>=e-a)return Va(f,e-a,r);if(e===a)return{node:o,offset:s};if(!r&&f.paddedSize===e-a)return{node:o,offset:s+1};if(f.paddedSize>e-a)return Va(f,e-a-1,r);a+=f.paddedSize,s+=1}return{node:o,offset:s}}function _f(o){return o.isText||o.children.length===0?o:_f(o.children[0])}function my(o,e){if(o.size<e)throw new Error("unacceptable path");for(let r=0;r<o.children.length;r++){const s=o.children[r];if(s.size<e)e-=s.size;else{o=s;break}}return{node:o,offset:e}}class yy{constructor(e){u(this,"root"),this.root=e}tokensBetween(e,r,s){Df(this.root,e,r,s)}traverse(e){Rf(this.root,e,0)}traverseAll(e){Qs(this.root,e,0)}findTreePos(e,r=!0){return Va(this.root,e,r)}treePosToPath(e){const r=[];let s=e.node;if(s.isText){const a=s.parent.findOffset(s);if(a===-1)throw new Error("invalid treePos");const f=ji(s.parent,a);r.push(f+e.offset),s=s.parent}else if(s.hasTextChild()){const a=ji(s,e.offset);r.push(a)}else r.push(e.offset);for(;s.parent;){const a=s.parent.findOffset(s);if(a===-1)throw new Error("invalid treePos");r.push(a),s=s.parent}return r.reverse()}pathToIndex(e){const r=this.pathToTreePos(e);return this.indexOf(r)}pathToTreePos(e){if(!e.length)throw new Error("unacceptable path");let r=this.root;for(let s=0;s<e.length-1;s++){const a=e[s];if(r=r.children[a],!r)throw new Error("unacceptable path")}if(r.hasTextChild())return my(r,e[e.length-1]);if(r.children.length<e[e.length-1])throw new Error("unacceptable path");return{node:r,offset:e[e.length-1]}}getRoot(){return this.root}get size(){return this.root.size}findPostorderRight(e){const{node:r,offset:s}=e;if(r.isText){if(r.size===s){const a=r.nextSibling;return a||r.parent}return r}return r.children.length===s?r:_f(r.children[s])}indexOf(e){let{node:r}=e;const{offset:s}=e;let a=0,f=1;if(r.isText){a+=s;const d=r.parent,g=d.findOffset(r);if(g===-1)throw new Error("invalid pos");a+=ji(d,g),r=r.parent}else a+=ji(r,s);for(;r!=null&&r.parent;){const d=r.parent,g=d.findOffset(r);if(g===-1)throw new Error("invalid pos");a+=ji(d,g),f++,r=r.parent}return a+f-1}indexToPath(e){const r=this.findTreePos(e);return this.treePosToPath(r)}}const vy=(o,e)=>o===e?0:o<e?-1:1;class wy{constructor(e,r,s){u(this,"key"),u(this,"value"),u(this,"parent"),u(this,"left"),u(this,"right"),u(this,"isRed"),this.key=e,this.value=r,this.isRed=s}}class Sy{constructor(e){u(this,"stack"),this.stack=[],this.traverseInorder(e)}traverseInorder(e){!e||(this.traverseInorder(e.left),this.stack.push({key:e.key,value:e.value}),this.traverseInorder(e.right))}}class Lf{constructor(e){u(this,"root"),u(this,"comparator"),u(this,"counter"),this.comparator=typeof e<"u"?e:vy,this.counter=0}put(e,r){return this.root=this.putInternal(e,r,this.root),this.root.isRed=!1,r}get(e){const r=this.getInternal(e,this.root);return r?r.value:void 0}remove(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.isRed=!0),this.root=this.removeInternal(this.root,e),this.root&&(this.root.isRed=!1)}getIterator(){return new Sy(this.root)}values(){const e=[];for(const r of this.getIterator().stack)e.push(r.value);return e}floorEntry(e){let r=this.root;for(;r;){const s=this.comparator(e,r.key);if(s>0)if(r.right)r.right.parent=r,r=r.right;else return r;else if(s<0)if(r.left)r.left.parent=r,r=r.left;else{let a=r.parent,f=r;for(;a&&f===a.left;)f=a,a=a.parent;return a}else return r}}lastEntry(){if(!this.root)return this.root;let e=this.root;for(;e.right;)e=e.right;return e}size(){return this.counter}isEmpty(){return this.counter===0}getInternal(e,r){for(;r;){const s=this.comparator(e,r.key);if(s===0)return r;s<0?r=r.left:s>0&&(r=r.right)}}putInternal(e,r,s){if(!s)return this.counter+=1,new wy(e,r,!0);const a=this.comparator(e,s.key);return a<0?s.left=this.putInternal(e,r,s.left):a>0?s.right=this.putInternal(e,r,s.right):s.value=r,this.isRed(s.right)&&!this.isRed(s.left)&&(s=this.rotateLeft(s)),this.isRed(s.left)&&this.isRed(s.left.left)&&(s=this.rotateRight(s)),this.isRed(s.left)&&this.isRed(s.right)&&this.flipColors(s),s}removeInternal(e,r){if(this.comparator(r,e.key)<0)!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeInternal(e.left,r);else{if(this.isRed(e.left)&&(e=this.rotateRight(e)),this.comparator(r,e.key)===0&&!e.right){this.counter-=1;return}if(!this.isRed(e.right)&&!this.isRed(e.right.left)&&(e=this.moveRedRight(e)),this.comparator(r,e.key)===0){this.counter-=1;const s=this.min(e.right);e.value=s.value,e.key=s.key,e.right=this.removeMin(e.right)}else e.right=this.removeInternal(e.right,r)}return this.fixUp(e)}min(e){return e.left?this.min(e.left):e}removeMin(e){if(!!e.left)return!this.isRed(e.left)&&!this.isRed(e.left.left)&&(e=this.moveRedLeft(e)),e.left=this.removeMin(e.left),this.fixUp(e)}fixUp(e){return this.isRed(e.right)&&(e=this.rotateLeft(e)),this.isRed(e.left)&&this.isRed(e.left.left)&&(e=this.rotateRight(e)),this.isRed(e.left)&&this.isRed(e.right)&&this.flipColors(e),e}moveRedLeft(e){return this.flipColors(e),this.isRed(e.right.left)&&(e.right=this.rotateRight(e.right),e=this.rotateLeft(e),this.flipColors(e)),e}moveRedRight(e){return this.flipColors(e),this.isRed(e.left.left)&&(e=this.rotateRight(e),this.flipColors(e)),e}isRed(e){return e&&e.isRed}rotateLeft(e){const r=e.right;return e.right=r.left,r.left=e,r.isRed=r.left.isRed,r.left.isRed=!0,r}rotateRight(e){const r=e.left;return e.left=r.right,r.right=e,r.isRed=r.right.isRed,r.right.isRed=!0,r}flipColors(e){e.isRed=!e.isRed,e.left.isRed=!e.left.isRed,e.right.isRed=!e.right.isRed}}class zt{constructor(e,r){u(this,"parentID"),u(this,"leftSiblingID"),this.parentID=e,this.leftSiblingID=r}static of(e,r){return new zt(e,r)}static fromTreePos(e){const{offset:r}=e;let{node:s}=e,a;return s.isText?(s.parent.children[0]===s&&r===0?a=s.parent:a=s,s=s.parent):r===0?a=s:a=s.children[r-1],zt.of(s.id,Fe.of(a.getCreatedAt(),a.getOffset()+r))}getParentID(){return this.parentID}static fromStruct(e){return zt.of(Fe.of(Qe.fromStruct(e.parentID.createdAt),e.parentID.offset),Fe.of(Qe.fromStruct(e.leftSiblingID.createdAt),e.leftSiblingID.offset))}toStruct(){return{parentID:{createdAt:this.getParentID().getCreatedAt().toStruct(),offset:this.getParentID().getOffset()},leftSiblingID:{createdAt:this.getLeftSiblingID().getCreatedAt().toStruct(),offset:this.getLeftSiblingID().getOffset()}}}toTreeNodePair(e){const r=this.getParentID(),s=this.getLeftSiblingID(),a=e.findFloorNode(r);let f=e.findFloorNode(s);if(!a||!f)throw new Error(`cannot find node of CRDTTreePos(${r.toTestString()}, ${s.toTestString()})`);return!s.equals(r)&&s.getOffset()>0&&s.getOffset()===f.id.getOffset()&&f.insPrevID&&(f=e.findFloorNode(f.insPrevID)),[a,f]}getLeftSiblingID(){return this.leftSiblingID}equals(e){return this.getParentID().getCreatedAt().equals(e.getParentID().getCreatedAt())&&this.getParentID().getOffset()===e.getParentID().getOffset()&&this.getLeftSiblingID().getCreatedAt().equals(e.getLeftSiblingID().getCreatedAt())&&this.getLeftSiblingID().getOffset()===e.getLeftSiblingID().getOffset()}}class Fe{constructor(e,r){u(this,"createdAt"),u(this,"offset"),this.createdAt=e,this.offset=r}static of(e,r){return new Fe(e,r)}static fromStruct(e){return Fe.of(Qe.fromStruct(e.createdAt),e.offset)}static createComparator(){return(e,r)=>{const s=e.getCreatedAt().compare(r.getCreatedAt());return s!==0?s:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getCreatedAt(){return this.createdAt}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}getOffset(){return this.offset}setOffset(e){this.offset=e}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}toTestString(){return`${this.createdAt.toTestString()}/${this.offset}`}}class pt extends gy{constructor(e,r,s,a,f){super(r),u(this,"id"),u(this,"removedAt"),u(this,"attrs"),u(this,"insPrevID"),u(this,"insNextID"),u(this,"_value",""),this.id=e,this.removedAt=f,a&&(this.attrs=a),typeof s=="string"?this.value=s:Array.isArray(s)&&(this._children=s)}toIDString(){return this.id.toIDString()}getRemovedAt(){return this.removedAt}static create(e,r,s,a){return new pt(e,r,s,a)}deepcopy(){var e;const r=new pt(this.id,this.type);return r.removedAt=this.removedAt,r._value=this._value,r.size=this.size,r.attrs=(e=this.attrs)==null?void 0:e.deepcopy(),r._children=this._children.map(s=>{const a=s.deepcopy();return a.parent=r,a}),r.insPrevID=this.insPrevID,r.insNextID=this.insNextID,r}get value(){if(!this.isText)throw new Error(`cannot get value of element node: ${this.type}`);return this._value}set value(e){if(!this.isText)throw new Error(`cannot set value of element node: ${this.type}`);this._value=e,this.size=e.length}get isRemoved(){return!!this.removedAt}remove(e){const r=!this.removedAt;(!this.removedAt||this.removedAt.compare(e)>0)&&(this.removedAt=e),r&&this.updateAncestorsSize()}cloneText(e){return new pt(Fe.of(this.id.getCreatedAt(),e),this.type,void 0,void 0,this.removedAt)}cloneElement(e){return new pt(Fe.of(e(),0),this.type,void 0,void 0,this.removedAt)}split(e,r,s){const a=this.isText?this.splitText(r,this.id.getOffset()):this.splitElement(r,s);if(a){if(a.insPrevID=this.id,this.insNextID){const f=e.findFloorNode(this.insNextID);f.insPrevID=a.id,a.insNextID=this.insNextID}this.insNextID=a.id,e.registerNode(a)}return a}getCreatedAt(){return this.id.getCreatedAt()}getOffset(){return this.id.getOffset()}canDelete(e,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}canStyle(e,r){return this.isText?!1:!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}setAttrs(e,r){this.attrs||(this.attrs=new Sn);const s=new Array;for(const[a,f]of Object.entries(e))s.push(this.attrs.set(a,f,r));return s}purge(e){this.attrs&&this.attrs.purge(e)}getGCPairs(){const e=[];if(!this.attrs)return e;for(const r of this.attrs)r.getRemovedAt()&&e.push({parent:this,child:r});return e}}function Ja(o){var e;if(o.isText){const s=o;return{type:s.type,value:s.value}}const r={type:o.type,children:o.children.map(Ja)};return o.attrs&&(r.attributes=jr((e=o.attrs)==null?void 0:e.toObject())),r}function Ka(o){if(o.isText)return o.value;let e="";return o.attrs&&o.attrs.size()&&(e=" "+Array.from(o.attrs).filter(r=>!r.isRemoved()).sort((r,s)=>r.getKey().localeCompare(s.getKey())).map(r=>{const s=JSON.parse(r.getValue());return typeof s=="string"?`${r.getKey()}="${s}"`:`${r.getKey()}="${sn(r.getValue())}"`}).join(" ")),`<${o.type}${e}>${o.children.map(r=>Ka(r)).join("")}</${o.type}>`}function bf(o){if(o.isText){const e=o;return{type:e.type,value:e.value,size:e.size,isRemoved:e.isRemoved}}return{type:o.type,children:o.children.map(bf),size:o.size,isRemoved:o.isRemoved}}class Nt extends Li{constructor(e,r){super(r),u(this,"indexTree"),u(this,"nodeMapByID"),this.indexTree=new yy(e),this.nodeMapByID=new Lf(Fe.createComparator()),this.indexTree.traverseAll(s=>{this.nodeMapByID.put(s.id,s)})}static create(e,r){return new Nt(e,r)}findFloorNode(e){const r=this.nodeMapByID.floorEntry(e);if(!(!r||!r.key.getCreatedAt().equals(e.getCreatedAt())))return r.value}registerNode(e){this.nodeMapByID.put(e.id,e)}findNodesAndSplitText(e,r){const[s,a]=e.toTreeNodePair(this);let f=a;const d=s===f,g=f.parent&&!d?f.parent:s;if(f.isText&&f.split(this,e.getLeftSiblingID().getOffset()-f.id.getOffset()),r){const m=g.allChildren,y=d?0:m.indexOf(f)+1;for(let A=y;A<m.length;A++){const D=m[A];if(!D.id.getCreatedAt().after(r))break;f=D}}return[g,f]}style(e,r,s,a){const[f,d]=this.findNodesAndSplitText(e[0],s),[g,m]=this.findNodesAndSplitText(e[1],s),y=[],A=r?jr(r):{},D=new Map,S=[];return this.traverseInPosRange(f,d,g,m,([x])=>{const $=x.getCreatedAt().getActorID(),J=a?a.has($)?a.get($):Bt:_i;if(x.canStyle(s,J)&&r){const K=D.get($),ne=x.getCreatedAt();(!K||ne.after(K))&&D.set($,ne);const pe=x.setAttrs(r,s),re=pe.reduce((ke,[,yr])=>(yr&&(ke[yr.getKey()]=A[yr.getKey()]),ke),{}),de=x.parent,me=x.prevSibling||x.parent;Object.keys(re).length>0&&y.push({type:"style",from:this.toIndex(de,me),to:this.toIndex(x,x),fromPath:this.toPath(de,me),toPath:this.toPath(x,x),actor:s.getActorID(),value:re});for(const[ke]of pe)ke&&S.push({parent:x,child:ke})}}),[D,S,y]}removeStyle(e,r,s,a){const[f,d]=this.findNodesAndSplitText(e[0],s),[g,m]=this.findNodesAndSplitText(e[1],s),y=[],A=new Map,D=[];return this.traverseInPosRange(f,d,g,m,([S])=>{const x=S.getCreatedAt().getActorID(),$=a?a.has(x)?a.get(x):Bt:_i;if(S.canStyle(s,$)&&r){const J=A.get(x),K=S.getCreatedAt();(!J||K.after(J))&&A.set(x,K),S.attrs||(S.attrs=new Sn);for(const re of r){const de=S.attrs.remove(re,s);for(const me of de)D.push({parent:S,child:me})}const ne=S.parent,pe=S.prevSibling||S.parent;y.push({actor:s.getActorID(),type:"removeStyle",from:this.toIndex(ne,pe),to:this.toIndex(S,S),fromPath:this.toPath(ne,pe),toPath:this.toPath(S,S),value:r})}}),[A,D,y]}edit(e,r,s,a,f,d){const[g,m]=this.findNodesAndSplitText(e[0],a),[y,A]=this.findNodesAndSplitText(e[1],a),D=this.toIndex(g,m),S=this.toPath(g,m),x=[],$=[],J=[],K=new Map;this.traverseInPosRange(g,m,y,A,([re,de],me)=>{if(de===De.Start&&!me)for(const vr of re.children)J.push(vr);const ke=re.getCreatedAt().getActorID(),yr=d?d.has(ke)?d.get(ke):Bt:_i;if(re.canDelete(a,yr)||x.includes(re.parent)){const vr=K.get(ke),Qi=re.getCreatedAt();(!vr||Qi.after(vr))&&K.set(ke,Qi),(de===De.Text||de===De.Start)&&x.push(re),$.push([re,de])}});const ne=this.makeDeletionChanges($,a),pe=[];for(const re of x)re.remove(a),re.isRemoved&&pe.push({parent:this,child:re});for(const re of J)re.removedAt||g.append(re);if(s>0){let re=0,de=g,me=m;for(;re<s;)de.split(this,de.findOffset(me)+1,f),me=de,de=de.parent,re++;ne.push({type:"content",from:D,to:D,fromPath:S,toPath:S,actor:a.getActorID()})}if(r!=null&&r.length){const re=[];let de=m;for(const me of r)de===g?g.insertAt(me,0):g.insertAfter(me,de),de=me,Qs(me,ke=>{g.isRemoved&&(ke.remove(a),pe.push({parent:this,child:ke})),this.nodeMapByID.put(ke.id,ke)}),me.isRemoved||re.push(me);if(re.length){const me=re.map(ke=>Ja(ke));ne.length&&ne[ne.length-1].from===D?ne[ne.length-1].value=me:ne.push({type:"content",from:D,to:D,fromPath:S,toPath:S,actor:a.getActorID(),value:me})}}return[ne,pe,K]}editT(e,r,s,a,f){const d=this.findPos(e[0]),g=this.findPos(e[1]);this.edit([d,g],r,s,a,f)}move(e,r,s){throw new Error(`not implemented: ${e}, ${r}, ${s}`)}purge(e){var r;(r=e.parent)==null||r.removeChild(e),this.nodeMapByID.remove(e.id);const s=e.insPrevID,a=e.insNextID;if(s){const f=this.findFloorNode(s);f.insNextID=a}if(a){const f=this.findFloorNode(a);f.insPrevID=s}e.insPrevID=void 0,e.insNextID=void 0}getGCPairs(){const e=[];return this.indexTree.traverse(r=>{r.getRemovedAt()&&e.push({parent:this,child:r});for(const s of r.getGCPairs())e.push(s)}),e}findPos(e,r=!0){const s=this.indexTree.findTreePos(e,r);return zt.fromTreePos(s)}pathToPosRange(e){const r=this.pathToIndex(e);return[this.findPos(r),this.findPos(r+1)]}pathToPos(e){const r=this.indexTree.pathToIndex(e);return this.findPos(r)}getRoot(){return this.indexTree.getRoot()}getSize(){return this.indexTree.size}getNodeSize(){return this.nodeMapByID.size()}getIndexTree(){return this.indexTree}toXML(){return Ka(this.indexTree.getRoot())}toJSON(){return JSON.stringify(this.getRootTreeNode())}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:JSON.parse(this.toJSON()),type:"YORKIE_TREE"}}toJSInfoForTest(){const e=this.indexTree.getRoot(),r=(s,a=void 0,f=void 0,d=0)=>{var g,m,y,A;let D,S,x;const $=s.isText?{node:s,offset:0}:a&&f?this.toTreePos(a,f):null;$&&(D=this.indexTree.indexOf($),S=this.indexTree.treePosToPath($),x=zt.fromTreePos($).toStruct());const J={type:s.type,parent:a==null?void 0:a.id.toTestString(),size:s.size,id:s.id.toTestString(),removedAt:(g=s.removedAt)==null?void 0:g.toTestString(),insPrev:(m=s.insPrevID)==null?void 0:m.toTestString(),insNext:(y=s.insNextID)==null?void 0:y.toTestString(),value:s.isText?s.value:void 0,isRemoved:s.isRemoved,children:[],depth:d,attributes:s.attrs?jr((A=s.attrs)==null?void 0:A.toObject()):void 0,index:D,path:S,pos:x};for(let K=0;K<s.allChildren.length;K++){const ne=K===0?s:s.allChildren[K-1];J.children.push(r(s.allChildren[K],s,ne,d+1))}return J};return r(e)}getRootTreeNode(){return Ja(this.indexTree.getRoot())}toTestTreeNode(){return bf(this.indexTree.getRoot())}toSortedJSON(){return this.toJSON()}deepcopy(){const e=this.getRoot();return new Nt(e.deepcopy(),this.getCreatedAt())}toPath(e,r){const s=this.toTreePos(e,r);return s?this.indexTree.treePosToPath(s):[]}toIndex(e,r){const s=this.toTreePos(e,r);return s?this.indexTree.indexOf(s):-1}indexToPath(e){return this.indexTree.indexToPath(e)}pathToIndex(e){return this.indexTree.pathToIndex(e)}indexRangeToPosRange(e){const r=this.findPos(e[0]);return e[0]===e[1]?[r,r]:[r,this.findPos(e[1])]}indexRangeToPosStructRange(e){const[r,s]=e,a=this.findPos(r);return r===s?[a.toStruct(),a.toStruct()]:[a.toStruct(),this.findPos(s).toStruct()]}posRangeToPathRange(e){const[r,s]=this.findNodesAndSplitText(e[0]),[a,f]=this.findNodesAndSplitText(e[1]);return[this.toPath(r,s),this.toPath(a,f)]}posRangeToIndexRange(e){const[r,s]=this.findNodesAndSplitText(e[0]),[a,f]=this.findNodesAndSplitText(e[1]);return[this.toIndex(r,s),this.toIndex(a,f)]}traverseInPosRange(e,r,s,a,f){const d=this.toIndex(e,r),g=this.toIndex(s,a);return this.indexTree.tokensBetween(d,g,f)}toTreePos(e,r){if(!e||!r)return;if(e.isRemoved){let a;for(;e.isRemoved;)a=e,e=a.parent;const f=e.findOffset(a);return{node:e,offset:f}}if(e===r)return{node:e,offset:0};let s=e.findOffset(r);if(!r.isRemoved){if(r.isText)return{node:r,offset:r.paddedSize};s++}return{node:e,offset:s}}makeDeletionChanges(e,r){const s=[],a=[];let f=null,d=null;for(let g=0;g<e.length;g++){const m=e[g],y=e[g+1];f||(f=m),d=m;const A=this.findRightToken(m);(!A||!y||A[0]!==y[0]||A[1]!==y[1])&&(a.push([f,d]),f=null,d=null)}for(const g of a){const[m,y]=g,[A,D]=this.findLeftToken(m),[S,x]=y,$=D===De.Start?A:A.parent,J=x===De.Start?S:S.parent,K=this.toIndex($,A),ne=this.toIndex(J,S);K<ne&&(s.length>0&&K===s[s.length-1].to?(s[s.length-1].to=ne,s[s.length-1].toPath=this.toPath(J,S)):s.push({type:"content",from:K,to:ne,fromPath:this.toPath($,A),toPath:this.toPath(J,S),actor:r.getActorID()}))}return s.reverse()}findRightToken([e,r]){if(r===De.Start){const g=e.allChildren;return g.length>0?[g[0],g[0].isText?De.Text:De.Start]:[e,De.End]}const s=e.parent,a=s.allChildren,f=a.indexOf(e);if(s&&f===a.length-1)return[s,De.End];const d=a[f+1];return[d,d.isText?De.Text:De.Start]}findLeftToken([e,r]){if(r===De.End){const g=e.allChildren;if(g.length>0){const m=g[g.length-1];return[m,m.isText?De.Text:De.End]}return[e,De.Start]}const s=e.parent,a=s.allChildren,f=a.indexOf(e);if(s&&f===0)return[s,De.Start];const d=a[f-1];return[d,d.isText?De.Text:De.End]}}class Vi extends $t{constructor(e,r,s,a,f,d,g){super(e,g),u(this,"fromPos"),u(this,"toPos"),u(this,"contents"),u(this,"splitLevel"),u(this,"maxCreatedAtMapByActor"),this.fromPos=r,this.toPos=s,this.contents=a,this.splitLevel=f,this.maxCreatedAtMapByActor=d}static create(e,r,s,a,f,d,g){return new Vi(e,r,s,a,f,d,g)}execute(e){var r;const s=e.findByCreatedAt(this.getParentCreatedAt());s||_.fatal(`fail to find ${this.getParentCreatedAt()}`),s instanceof Nt||_.fatal("fail to execute, only Tree can execute edit");const a=this.getExecutedAt(),f=s,[d,g]=f.edit([this.fromPos,this.toPos],(r=this.contents)==null?void 0:r.map(m=>m.deepcopy()),this.splitLevel,a,(()=>{let m=a.getDelimiter();return this.contents!==void 0&&(m+=this.contents.length),()=>Qe.of(a.getLamport(),++m,a.getActorID())})(),this.maxCreatedAtMapByActor);for(const m of g)e.registerGCPair(m);return{opInfos:d.map(({from:m,to:y,value:A,splitLevel:D,fromPath:S,toPath:x})=>({type:"tree-edit",path:e.createPath(this.getParentCreatedAt()),from:m,to:y,value:A,splitLevel:D,fromPath:S,toPath:x}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.fromPos.getLeftSiblingID().getOffset()}`,s=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}/${this.toPos.getLeftSiblingID().getOffset()}`,a=this.contents||[];return`${e}.EDIT(${r},${s},${a.map(f=>Ka(f)).join("")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getContents(){return this.contents}getSplitLevel(){return this.splitLevel}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}class Un{constructor(e,r,s,a){u(this,"clientSeq"),u(this,"serverSeq"),u(this,"lamport"),u(this,"actor"),this.clientSeq=e,this.serverSeq=a,this.lamport=r,this.actor=s}static of(e,r,s,a){return new Un(e,r,s,a)}next(){return new Un(this.clientSeq+1,this.lamport.add(1),this.actor)}syncLamport(e){return e.greaterThan(this.lamport)?new Un(this.clientSeq,e,this.actor):new Un(this.clientSeq,this.lamport.add(1),this.actor)}createTimeTicket(e){return Qe.of(this.lamport,e,this.actor)}setActor(e){return new Un(this.clientSeq,this.lamport,e,this.serverSeq)}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq?this.serverSeq.toString():""}getLamport(){return this.lamport}getLamportAsString(){return this.lamport.toString()}getActorID(){return this.actor}toTestString(){return`${this.lamport.toString()}:${this.actor.slice(-2)}:${this.clientSeq}`}}const Ty=new Un(0,X.fromInt(0,!0),Ys);class pr{constructor({id:e,operations:r,presenceChange:s,message:a}){u(this,"id"),u(this,"operations"),u(this,"presenceChange"),u(this,"message"),this.id=e,this.operations=r||[],this.presenceChange=s,this.message=a}static create({id:e,operations:r,presenceChange:s,message:a}){return new pr({id:e,operations:r,presenceChange:s,message:a})}getID(){return this.id}getMessage(){return this.message}hasOperations(){return this.operations.length>0}getOperations(){return this.operations}setActor(e){for(const r of this.operations)r.setActor(e);this.id=this.id.setActor(e)}hasPresenceChange(){return this.presenceChange!==void 0}getPresenceChange(){return this.presenceChange}execute(e,r,s){const a=[],f=[];for(const d of this.operations){const g=d.execute(e,s);if(!g)continue;const{opInfos:m,reverseOp:y}=g;a.push(...m),y&&f.unshift(y)}return this.presenceChange&&(this.presenceChange.type===Mn.Put?r.set(this.id.getActorID(),Mt(this.presenceChange.presence)):r.delete(this.id.getActorID())),{opInfos:a,reverseOps:f}}toTestString(){return`${this.operations.map(e=>e.toTestString()).join(",")}`}toStruct(){return{changeID:Re.bytesToHex(Re.toChangeID(this.getID()).toBinary()),message:this.getMessage(),operations:this.getOperations().map(e=>Re.bytesToHex(Re.toOperation(e).toBinary())),presenceChange:this.getPresenceChange()}}static fromStruct(e){const{changeID:r,operations:s,presenceChange:a,message:f}=e;return pr.create({id:Re.bytesToChangeID(Re.hexToBytes(r)),operations:s==null?void 0:s.map(d=>Re.bytesToOperation(Re.hexToBytes(d))),presenceChange:a,message:f})}}class Zs{constructor(e,r,s,a,f,d){u(this,"documentKey"),u(this,"checkpoint"),u(this,"isRemoved"),u(this,"changes"),u(this,"snapshot"),u(this,"minSyncedTicket"),this.documentKey=e,this.checkpoint=r,this.isRemoved=s,this.changes=a,this.snapshot=f,this.minSyncedTicket=d}static create(e,r,s,a,f,d){return new Zs(e,r,s,a,f,d)}getDocumentKey(){return this.documentKey}getCheckpoint(){return this.checkpoint}getIsRemoved(){return this.isRemoved}getChanges(){return this.changes}hasChanges(){return this.changes.length>0}getChangeSize(){return this.changes.length}hasSnapshot(){return!!this.snapshot&&!!this.snapshot.length}getSnapshot(){return this.snapshot}getMinSyncedTicket(){return this.minSyncedTicket}}class Vr{constructor(e,r){u(this,"serverSeq"),u(this,"clientSeq"),this.serverSeq=e,this.clientSeq=r}static of(e,r){return new Vr(e,r)}increaseClientSeq(e){return e===0?this:new Vr(this.serverSeq,this.clientSeq+e)}forward(e){if(this.equals(e))return this;const r=this.serverSeq.greaterThan(e.serverSeq)?this.serverSeq:e.serverSeq,s=Math.max(this.clientSeq,e.clientSeq);return Vr.of(r,s)}getServerSeqAsString(){return this.serverSeq.toString()}getClientSeq(){return this.clientSeq}getServerSeq(){return this.serverSeq}equals(e){return this.clientSeq===e.clientSeq&&this.serverSeq.equals(e.serverSeq)}toTestString(){return`serverSeq=${this.serverSeq}, clientSeq=${this.clientSeq}`}}const ky=new Vr(X.fromInt(0,!0),0);class on{constructor(e,r){u(this,"createdAt"),u(this,"offset"),this.createdAt=e,this.offset=r}static of(e,r){return new on(e,r)}static fromStruct(e){return on.of(Qe.fromStruct(e.createdAt),e.offset)}getCreatedAt(){return this.createdAt}getOffset(){return this.offset}equals(e){return this.createdAt.compare(e.createdAt)===0&&this.offset===e.offset}hasSameCreatedAt(e){return this.createdAt.compare(e.createdAt)===0}split(e){return new on(this.createdAt,this.offset+e)}toStruct(){return{createdAt:this.createdAt.toStruct(),offset:this.offset}}toTestString(){return`${this.createdAt.toTestString()}:${this.offset}`}toIDString(){return`${this.createdAt.toIDString()}:${this.offset}`}}const Ay=on.of(Bt,0);class Ut{constructor(e,r){u(this,"id"),u(this,"relativeOffset"),this.id=e,this.relativeOffset=r}static of(e,r){return new Ut(e,r)}static fromStruct(e){const r=on.fromStruct(e.id);return Ut.of(r,e.relativeOffset)}getID(){return this.id}getRelativeOffset(){return this.relativeOffset}getAbsoluteID(){return on.of(this.id.getCreatedAt(),this.id.getOffset()+this.relativeOffset)}toTestString(){return`${this.id.toTestString()}:${this.relativeOffset}`}toStruct(){return{id:this.id.toStruct(),relativeOffset:this.relativeOffset}}equals(e){return this.id.equals(e.id)?this.relativeOffset===e.relativeOffset:!1}}class Fn extends Of{constructor(e,r,s){super(r),u(this,"id"),u(this,"removedAt"),u(this,"prev"),u(this,"next"),u(this,"insPrev"),u(this,"insNext"),this.id=e,this.removedAt=s}static create(e,r){return new Fn(e,r)}static createComparator(){return(e,r)=>{const s=e.getCreatedAt().compare(r.getCreatedAt());return s!==0?s:e.getOffset()>r.getOffset()?1:e.getOffset()<r.getOffset()?-1:0}}getID(){return this.id}getCreatedAt(){return this.id.getCreatedAt()}getLength(){return this.removedAt?0:this.getContentLength()}getContentLength(){return this.value&&this.value.length||0}getPrev(){return this.prev}getNext(){return this.next}getInsPrev(){return this.insPrev}getInsNext(){return this.insNext}getInsPrevID(){return this.insPrev.getID()}setPrev(e){this.prev=e,e&&(e.next=this)}setNext(e){this.next=e,e&&(e.prev=this)}setInsPrev(e){this.insPrev=e,e&&(e.insNext=this)}setInsNext(e){this.insNext=e,e&&(e.insPrev=this)}hasNext(){return!!this.next}hasInsPrev(){return!!this.insPrev}isRemoved(){return!!this.removedAt}getRemovedAt(){return this.removedAt}split(e){return new Fn(this.id.split(e),this.splitValue(e),this.removedAt)}canDelete(e,r){const s=!this.removedAt;return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))?s:!1}canStyle(e,r){return!this.getCreatedAt().after(r)&&(!this.removedAt||e.after(this.removedAt))}remove(e){this.removedAt=e}createPosRange(){return[Ut.of(this.id,0),Ut.of(this.id,this.getLength())]}deepcopy(){return new Fn(this.id,this.value,this.removedAt)}toTestString(){return`${this.id.toTestString()} ${this.value?this.value:""}`}splitValue(e){const r=this.value;return this.value=r.substring(0,e),r.substring(e,r.length)}toIDString(){return this.id.toIDString()}}class Jr{constructor(){u(this,"head"),u(this,"treeByIndex"),u(this,"treeByID"),this.head=Fn.create(Ay),this.treeByIndex=new Mi,this.treeByID=new Lf(Fn.createComparator()),this.treeByIndex.insert(this.head),this.treeByID.put(this.head.getID(),this.head)}static create(){return new Jr}edit(e,r,s,a){const[f,d]=this.findNodeWithSplit(e[1],r),[g,m]=this.findNodeWithSplit(e[0],r),y=this.findBetween(m,d),[A,D,S]=this.deleteNodes(y,r,a),x=d?d.getID():f.getID();let $=Ut.of(x,0);if(s){const K=this.posToIndex(g.createPosRange()[1],!0),ne=this.insertAfter(g,Fn.create(on.of(r,0),s));A.length&&A[A.length-1].from===K?A[A.length-1].value=s:A.push({actor:r.getActorID(),from:K,to:K,value:s}),$=Ut.of(ne.getID(),ne.getContentLength())}const J=[];for(const[,K]of S)J.push({parent:this,child:K});return[$,D,J,A]}indexToPos(e){const[r,s]=this.treeByIndex.find(e),a=r;return Ut.of(a.getID(),s)}findIndexesFromRange(e){const[r,s]=e;return[this.posToIndex(r,!1),this.posToIndex(s,!0)]}posToIndex(e,r){const s=e.getAbsoluteID(),a=r?this.findFloorNodePreferToLeft(s):this.findFloorNode(s);a||_.fatal(`the node of the given id should be found: ${s.toTestString()}`);const f=this.treeByIndex.indexOf(a),d=a.isRemoved()?0:s.getOffset()-a.getID().getOffset();return f+d}findNode(e){return this.findFloorNode(e)}get length(){return this.treeByIndex.length}checkWeight(){return this.treeByIndex.checkWeight()}toString(){const e=[];for(const r of this)r.isRemoved()||e.push(r.getValue());return e.join("")}*[Symbol.iterator](){let e=this.head.getNext();for(;e;)yield e,e=e.getNext()}getHead(){return this.head}deepcopy(){const e=new Jr;let r=this.head.getNext(),s=e.head,a;for(;r;){if(a=e.insertAfter(s,r.deepcopy()),r.hasInsPrev()){const f=e.findNode(r.getInsPrevID());a.setInsPrev(f)}s=a,r=r.getNext()}return e}toTestString(){const e=[];let r=this.head;for(;r;)r.isRemoved()?e.push(`{${r.toTestString()}}`):e.push(`[${r.toTestString()}]`),r=r.getNext();return e.join("")}insertAfter(e,r){const s=e.getNext();return r.setPrev(e),s&&s.setPrev(r),this.treeByID.put(r.getID(),r),this.treeByIndex.insertAfter(e,r),r}findNodeWithSplit(e,r){const s=e.getAbsoluteID();let a=this.findFloorNodePreferToLeft(s);const f=s.getOffset()-a.getID().getOffset();for(this.splitNode(a,f);a.hasNext()&&a.getNext().getCreatedAt().after(r);)a=a.getNext();return[a,a.getNext()]}findFloorNodePreferToLeft(e){let r=this.findFloorNode(e);if(r||_.fatal(`the node of the given id should be found: ${e.toTestString()}`),e.getOffset()>0&&r.getID().getOffset()==e.getOffset()){if(!r.hasInsPrev())return r;r=r.getInsPrev()}return r}findFloorNode(e){const r=this.treeByID.floorEntry(e);if(!!r&&!(!r.key.equals(e)&&!r.key.hasSameCreatedAt(e)))return r.value}findBetween(e,r){const s=[];let a=e;for(;a&&a!==r;)s.push(a),a=a.getNext();return s}splitNode(e,r){if(r>e.getContentLength()&&_.fatal("offset should be less than or equal to length"),r===0)return e;if(r===e.getContentLength())return e.getNext();const s=e.split(r);this.treeByIndex.updateWeight(s),this.insertAfter(e,s);const a=e.getInsNext();return a&&a.setInsPrev(s),s.setInsPrev(e),s}deleteNodes(e,r,s){if(!e.length)return[[],new Map,new Map];const[a,f]=this.filterNodes(e,r,s),d=new Map,g=new Map,m=this.makeChanges(f,r);for(const y of a){const A=y.getCreatedAt().getActorID();(!d.has(A)||y.getID().getCreatedAt().after(d.get(A)))&&d.set(A,y.getID().getCreatedAt()),g.set(y.getID().toIDString(),y),y.remove(r)}return this.deleteIndexNodes(f),[m,d,g]}filterNodes(e,r,s){const a=!!s,f=[],d=[],[g,m]=this.findEdgesOfCandidates(e);d.push(g);for(const y of e){const A=y.getCreatedAt().getActorID(),D=a?s.has(A)?s.get(A):Bt:_i;y.canDelete(r,D)?f.push(y):d.push(y)}return d.push(m),[f,d]}findEdgesOfCandidates(e){return[e[0].getPrev(),e[e.length-1].getNext()]}makeChanges(e,r){const s=[];let a,f;for(let d=0;d<e.length-1;d++){const g=e[d],m=e[d+1];g.getNext()!=m&&([a]=this.findIndexesFromRange(g.getNext().createPosRange()),m?[,f]=this.findIndexesFromRange(m.getPrev().createPosRange()):f=this.treeByIndex.length,a<f&&s.push({actor:r.getActorID(),from:a,to:f}))}return s.reverse()}deleteIndexNodes(e){for(let r=0;r<e.length-1;r++){const s=e[r],a=e[r+1];s.getNext()!=a&&this.treeByIndex.deleteRange(s,a)}}purge(e){const r=e.getPrev(),s=e.getNext(),a=e.getInsPrev(),f=e.getInsNext();r&&r.setNext(s),s&&s.setPrev(r),e.setPrev(void 0),e.setNext(void 0),a&&a.setInsNext(f),f&&f.setInsPrev(a),e.setInsPrev(void 0),e.setInsNext(void 0)}}const Mf=o=>o<0?Math.ceil(o):Math.floor(o);var an=(o=>(o[o.IntegerCnt=0]="IntegerCnt",o[o.LongCnt=1]="LongCnt",o))(an||{});class mt extends Li{constructor(e,r,s){switch(super(s),u(this,"valueType"),u(this,"value"),this.valueType=e,e){case 0:typeof r=="number"?r>Math.pow(2,31)-1||r<-Math.pow(2,31)?this.value=X.fromNumber(r).toInt():this.value=Mf(r):this.value=r.toInt();break;case 1:typeof r=="number"?this.value=X.fromNumber(r):this.value=r;break;default:throw new le(se.Unimplemented,`unimplemented type: ${e}`)}}static create(e,r,s){return new mt(e,r,s)}static valueFromBytes(e,r){switch(e){case 0:return r[0]|r[1]<<8|r[2]<<16|r[3]<<24;case 1:return X.fromBytesLE(Array.from(r));default:throw new le(se.Unimplemented,`unimplemented type: ${e}`)}}toJSON(){return`${this.value}`}toSortedJSON(){return this.toJSON()}toJSForTest(){return{createdAt:this.getCreatedAt().toTestString(),value:this.value,type:"YORKIE_COUNTER"}}deepcopy(){const e=mt.create(this.valueType,this.value,this.getCreatedAt());return e.setMovedAt(this.getMovedAt()),e}getType(){return this.valueType}static getCounterType(e){switch(typeof e){case"object":return e instanceof X?1:void 0;case"number":return e>Math.pow(2,31)-1||e<-Math.pow(2,31)?1:0;default:return}}static isSupport(e){return!!mt.getCounterType(e)}static isInteger(e){return e%1===0}isNumericType(){const e=this.valueType;return e===0||e===1}getValueType(){return this.valueType}getValue(){return this.value}toBytes(){switch(this.valueType){case 0:{const e=this.value;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}case 1:{const r=this.value.toBytesLE();return Uint8Array.from(r)}default:throw new le(se.Unimplemented,`unimplemented type: ${this.valueType}`)}}increase(e){function r(s){if(!s.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof s.getValue()}`)}return r(this),r(e),this.valueType===1?this.value=this.value.add(e.getValue()):e.getType()===Me.Long?this.value=this.value+e.getValue().toInt():this.value=X.fromNumber(this.value+Mf(e.getValue())).toInt(),this}}class Kr extends $t{constructor(e,r,s){super(e,s),u(this,"value"),this.value=r}static create(e,r,s){return new Kr(e,r,s)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof mt||_.fatal("fail to execute, only Counter can execute increase");const s=r,a=this.value.deepcopy();return s.increase(a),{opInfos:[{type:"increase",path:e.createPath(this.getParentCreatedAt()),value:a.getValue()}],reverseOp:this.toReverseOperation()}}toReverseOperation(){const e=this.value.deepcopy(),s=e.getType()===Me.Long?e.getValue().multiply(-1):e.getValue()*-1;return Kr.create(this.getParentCreatedAt(),Te.of(s,e.getCreatedAt()))}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){return`${this.getParentCreatedAt().toTestString()}.INCREASE.${this.value.toJSON()}`}getValue(){return this.value}}class kn extends $t{constructor(e,r,s,a,f,d,g){super(e,g),u(this,"fromPos"),u(this,"toPos"),u(this,"maxCreatedAtMapByActor"),u(this,"attributes"),u(this,"attributesToRemove"),this.fromPos=r,this.toPos=s,this.maxCreatedAtMapByActor=a,this.attributes=f,this.attributesToRemove=d}static create(e,r,s,a,f,d){return new kn(e,r,s,a,f,new Array,d)}static createTreeRemoveStyleOperation(e,r,s,a,f,d){return new kn(e,r,s,a,new Map,f,d)}execute(e){const r=e.findByCreatedAt(this.getParentCreatedAt());r||_.fatal(`fail to find ${this.getParentCreatedAt()}`),r instanceof Nt||_.fatal("fail to execute, only Tree can execute edit");const s=r;let a,f;if(this.attributes.size){const d={};[...this.attributes].forEach(([g,m])=>d[g]=m),[,f,a]=s.style([this.fromPos,this.toPos],d,this.getExecutedAt(),this.maxCreatedAtMapByActor)}else{const d=this.attributesToRemove;[,f,a]=s.removeStyle([this.fromPos,this.toPos],d,this.getExecutedAt(),this.maxCreatedAtMapByActor)}for(const d of f)e.registerGCPair(d);return{opInfos:a.map(({from:d,to:g,value:m,fromPath:y,toPath:A})=>({type:"tree-style",from:d,to:g,value:this.attributes.size?{attributes:m}:{attributesToRemove:m},fromPath:y,toPath:A,path:e.createPath(this.getParentCreatedAt())}))}}getEffectedCreatedAt(){return this.getParentCreatedAt()}toTestString(){const e=this.getParentCreatedAt().toTestString(),r=`${this.fromPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.fromPos.getLeftSiblingID().getOffset()}`,s=`${this.toPos.getLeftSiblingID().getCreatedAt().toTestString()}:${this.toPos.getLeftSiblingID().getOffset()}`;return`${e}.STYLE(${r},${s},${Object.entries(this.attributes||{}).map(([a,f])=>`${a}:"${f}"`).join(" ")})`}getFromPos(){return this.fromPos}getToPos(){return this.toPos}getAttributes(){return this.attributes}getAttributesToRemove(){return this.attributesToRemove}getMaxCreatedAtMapByActor(){return this.maxCreatedAtMapByActor}}function Iy(o){const e=new Ba,r=e.data;for(const[s,a]of Object.entries(o))r[s]=JSON.stringify(a);return e}function Cy(o){if(o.type===Mn.Put)return new Ma({type:Ri.PUT,presence:Iy(o.presence)});if(o.type===Mn.Clear)return new Ma({type:Ri.CLEAR});throw new le(se.Unimplemented,"unimplemented type")}function Ey(o){return new vf({serverSeq:o.getServerSeqAsString(),clientSeq:o.getClientSeq()})}function Bf(o){return new qs({clientSeq:o.getClientSeq(),lamport:o.getLamportAsString(),actorId:Qa(o.getActorID())})}function q(o){if(!!o)return new H({lamport:o.getLamportAsString(),delimiter:o.getDelimiter(),actorId:Qa(o.getActorID())})}function $f(o){switch(o){case Me.Null:return te.NULL;case Me.Boolean:return te.BOOLEAN;case Me.Integer:return te.INTEGER;case Me.Long:return te.LONG;case Me.Double:return te.DOUBLE;case Me.String:return te.STRING;case Me.Bytes:return te.BYTES;case Me.Date:return te.DATE;default:throw new le(se.Unsupported,`unsupported type: ${o}`)}}function zf(o){switch(o){case an.IntegerCnt:return te.INTEGER_CNT;case an.LongCnt:return te.LONG_CNT;default:throw new le(se.Unsupported,`unsupported type: ${o}`)}}function Wa(o){if(o instanceof st)return new vn({type:te.JSON_OBJECT,createdAt:q(o.getCreatedAt()),value:ed(o)});if(o instanceof gt)return new vn({type:te.JSON_ARRAY,createdAt:q(o.getCreatedAt()),value:tv(o)});if(o instanceof Et)return new vn({type:te.TEXT,createdAt:q(o.getCreatedAt())});if(o instanceof Te)return new vn({type:$f(o.getType()),createdAt:q(o.getCreatedAt()),value:o.toBytes()});if(o instanceof mt)return new vn({type:zf(o.getType()),createdAt:q(o.getCreatedAt()),value:o.toBytes()});if(o instanceof Nt)return new vn({type:te.TREE,createdAt:q(o.getCreatedAt()),value:rv(o)});throw new le(se.Unimplemented,"unimplemented element")}function Ny(o){return new La({createdAt:q(o.getCreatedAt()),offset:o.getOffset()})}function eo(o){return new cr({createdAt:q(o.getID().getCreatedAt()),offset:o.getID().getOffset(),relativeOffset:o.getRelativeOffset()})}function to(o){return new Di({parentId:Ji(o.getParentID()),leftSiblingId:Ji(o.getLeftSiblingID())})}function Ji(o){return new $r({createdAt:q(o.getCreatedAt()),offset:o.getOffset()})}function Uf(o){const e=new Ra;if(o instanceof hr){const r=o,s=new Zc;s.parentCreatedAt=q(r.getParentCreatedAt()),s.key=r.getKey(),s.value=Wa(r.getValue()),s.executedAt=q(r.getExecutedAt()),e.body.case="set",e.body.value=s}else if(o instanceof $i){const r=o,s=new ef;s.parentCreatedAt=q(r.getParentCreatedAt()),s.prevCreatedAt=q(r.getPrevCreatedAt()),s.value=Wa(r.getValue()),s.executedAt=q(r.getExecutedAt()),e.body.case="add",e.body.value=s}else if(o instanceof zn){const r=o,s=new tf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.prevCreatedAt=q(r.getPrevCreatedAt()),s.createdAt=q(r.getCreatedAt()),s.executedAt=q(r.getExecutedAt()),e.body.case="move",e.body.value=s}else if(o instanceof $n){const r=o,s=new nf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.createdAt=q(r.getCreatedAt()),s.executedAt=q(r.getExecutedAt()),e.body.case="remove",e.body.value=s}else if(o instanceof Ui){const r=o,s=new rf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.from=eo(r.getFromPos()),s.to=eo(r.getToPos());const a=s.createdAtMapByActor;for(const[d,g]of r.getMaxCreatedAtMapByActor())a[d]=q(g);s.content=r.getContent();const f=s.attributes;for(const[d,g]of r.getAttributes())f[d]=g;s.executedAt=q(r.getExecutedAt()),e.body.case="edit",e.body.value=s}else if(o instanceof Fi){const r=o,s=new sf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.from=eo(r.getFromPos()),s.to=eo(r.getToPos());const a=s.createdAtMapByActor;for(const[d,g]of r.getMaxCreatedAtMapByActor())a[d]=q(g);const f=s.attributes;for(const[d,g]of r.getAttributes())f[d]=g;s.executedAt=q(r.getExecutedAt()),e.body.case="style",e.body.value=s}else if(o instanceof Kr){const r=o,s=new of;s.parentCreatedAt=q(r.getParentCreatedAt()),s.value=Wa(r.getValue()),s.executedAt=q(r.getExecutedAt()),e.body.case="increase",e.body.value=s}else if(o instanceof Vi){const r=o,s=new af,a=s.createdAtMapByActor;for(const[f,d]of r.getMaxCreatedAtMapByActor())a[f]=q(d);s.parentCreatedAt=q(r.getParentCreatedAt()),s.from=to(r.getFromPos()),s.to=to(r.getToPos()),s.contents=Ly(r.getContents()),s.splitLevel=r.getSplitLevel(),s.executedAt=q(r.getExecutedAt()),e.body.case="treeEdit",e.body.value=s}else if(o instanceof kn){const r=o,s=new lf;s.parentCreatedAt=q(r.getParentCreatedAt()),s.from=to(r.getFromPos()),s.to=to(r.getToPos());const a=s.createdAtMapByActor;for(const[d,g]of r.getMaxCreatedAtMapByActor())a[d]=q(g);const f=r.getAttributesToRemove();if(f.length>0)s.attributesToRemove=f;else{const d=s.attributes;for(const[g,m]of r.getAttributes())d[g]=m}s.executedAt=q(r.getExecutedAt()),e.body.case="treeStyle",e.body.value=s}else throw new le(se.Unimplemented,"unimplemented operation");return e}function xy(o){const e=[];for(const r of o)e.push(Uf(r));return e}function Py(o){const e=new Qc({id:Bf(o.getID()),message:o.getMessage()});return o.hasOperations()&&(e.operations=xy(o.getOperations())),o.hasPresenceChange()&&(e.presenceChange=Cy(o.getPresenceChange())),e}function Oy(o){const e=[];for(const r of o)e.push(Py(r));return e}function Dy(o){const e=[];for(const r of o)e.push(new pf({key:r.getStrKey(),element:qa(r.getValue())}));return e}function Ry(o){const e=[];for(const r of o)e.push(new _a({element:qa(r.getValue())}));return e}function _y(o){const e=[];for(const r of o){const s=new mf;s.id=Ny(r.getID()),s.value=r.getValue().getContent(),s.removedAt=q(r.getRemovedAt());const a=s.attributes,f=r.getValue().getAttrs();for(const d of f){const g=new Hs;g.value=d.getValue(),g.updatedAt=q(d.getUpdatedAt()),a[d.getKey()]=g}e.push(s)}return e}function Ly(o){const e=[];if(!o||!o.length)return e;for(const r of o)e.push(new yf({content:Ff(r)}));return e}function by(o){const e={};for(const r of o)e[r.getKey()]=new Hs({value:r.getValue(),updatedAt:q(r.getUpdatedAt()),isRemoved:r.isRemoved()});return e}function Ff(o){if(!o)return[];const e=[];return Qs(o,(r,s)=>{const a=new ba({id:Ji(r.id),type:r.type,removedAt:q(r.removedAt),depth:s});r.isText&&(a.value=r.value),r.insPrevID&&(a.insPrevId=Ji(r.insPrevID)),r.insNextID&&(a.insNextId=Ji(r.insNextID)),r.attrs&&(a.attributes=by(r.attrs)),e.push(a)}),e}function My(o){const e=new At;return e.body.case="jsonObject",e.body.value=new uf({nodes:Dy(o.getRHT()),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function jf(o){const e=new At;return e.body.case="jsonArray",e.body.value=new cf({nodes:Ry(o.getElements()),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function By(o){const e=new At;return e.body.case="primitive",e.body.value=new ff({type:$f(o.getType()),value:o.toBytes(),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function $y(o){const e=new At;return e.body.case="text",e.body.value=new df({nodes:_y(o.getRGATreeSplit()),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function zy(o){const e=new At;return e.body.case="counter",e.body.value=new hf({type:zf(o.getType()),value:o.toBytes(),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function Vf(o){const e=new At;return e.body.case="tree",e.body.value=new gf({nodes:Ff(o.getRoot()),createdAt:q(o.getCreatedAt()),movedAt:q(o.getMovedAt()),removedAt:q(o.getRemovedAt())}),e}function qa(o){if(o instanceof st)return My(o);if(o instanceof gt)return jf(o);if(o instanceof Te)return By(o);if(o instanceof Et)return $y(o);if(o instanceof mt)return zy(o);if(o instanceof Nt)return Vf(o);throw new le(se.Unimplemented,"unimplemented element")}function Uy(o){return new yn({documentKey:o.getDocumentKey(),checkpoint:Ey(o.getCheckpoint()),isRemoved:o.getIsRemoved(),changes:Oy(o.getChanges()),snapshot:o.getSnapshot(),minSyncedTicket:q(o.getMinSyncedTicket())})}function Jf(o){let e;return o.serverSeq&&(e=X.fromString(o.serverSeq,!0)),Un.of(o.clientSeq,X.fromString(o.lamport,!0),Xa(o.actorId),e)}function G(o){if(!!o)return Qe.of(X.fromString(o.lamport,!0),o.delimiter,Xa(o.actorId))}function Ha(o){const e={};return Object.entries(o.data).forEach(([r,s])=>{e[r]=JSON.parse(s)}),e}function Fy(o){const e=o.type;if(e===Ri.PUT){const r=Ha(o.presence);return{type:Mn.Put,presence:r}}if(e===Ri.CLEAR)return{type:Mn.Clear};throw new le(se.Unsupported,`unsupported type: ${e}`)}function jy(o){const e=new Map;return Object.entries(o).forEach(([r,s])=>{e.set(r,Ha(s))}),e}function Kf(o){switch(o){case te.NULL:return Me.Null;case te.BOOLEAN:return Me.Boolean;case te.INTEGER:return Me.Integer;case te.LONG:return Me.Long;case te.DOUBLE:return Me.Double;case te.STRING:return Me.String;case te.BYTES:return Me.Bytes;case te.DATE:return Me.Date}throw new le(se.Unimplemented,`unimplemented value type: ${o}`)}function no(o){switch(o){case te.INTEGER_CNT:return an.IntegerCnt;case te.LONG_CNT:return an.LongCnt}throw new le(se.Unimplemented,`unimplemented value type: ${o}`)}function Ga(o){switch(o.type){case te.JSON_OBJECT:return o.value?Zf(o.value):st.create(G(o.createdAt));case te.JSON_ARRAY:return o.value?ev(o.value):gt.create(G(o.createdAt));case te.TEXT:return Et.create(Jr.create(),G(o.createdAt));case te.TREE:return nv(o.value);case te.NULL:case te.BOOLEAN:case te.INTEGER:case te.LONG:case te.DOUBLE:case te.STRING:case te.BYTES:case te.DATE:return Te.of(Te.valueFromBytes(Kf(o.type),o.value),G(o.createdAt));case te.INTEGER_CNT:case te.LONG_CNT:return mt.create(no(o.type),mt.valueFromBytes(no(o.type),o.value),G(o.createdAt))}}function ro(o){return Ut.of(on.of(G(o.createdAt),o.offset),o.relativeOffset)}function Wf(o){return on.of(G(o.createdAt),o.offset)}function Vy(o){const e=zi.create(o.value);Object.entries(o.attributes).forEach(([s,a])=>{e.setAttr(s,a.value,G(a.updatedAt))});const r=Fn.create(Wf(o.id),e);return r.remove(G(o.removedAt)),r}function Wr(o){return zt.of(Ki(o.parentId),Ki(o.leftSiblingId))}function Ki(o){return Fe.of(G(o.createdAt),o.offset)}function Jy(o){if(!o.length)return;const e=[];return o.forEach(r=>{const s=qf(r.content);e.push(s)}),e}function qf(o){if(o.length===0)return;const e=[];for(const s of o)e.push(Wy(s));const r=e[e.length-1];for(let s=e.length-2;s>=0;s--){let a;for(let f=s+1;f<e.length;f++)if(o[s].depth-1===o[f].depth){a=e[f];break}a.prepend(e[s])}return r.updateDescendantsSize(),Nt.create(r,Bt).getRoot()}function Ky(o){const e=Sn.create();for(const[r,s]of Object.entries(o))e.setInternal(r,s.value,G(s.updatedAt),s.isRemoved);return e}function Wy(o){const e=Ki(o.id),r=pt.create(e,o.type),s=Object.entries(o.attributes);return r.isText?r.value=o.value:s.length&&(r.attrs=Ky(o.attributes)),o.insPrevId&&(r.insPrevID=Ki(o.insPrevId)),o.insNextId&&(r.insNextID=Ki(o.insNextId)),r.removedAt=G(o.removedAt),r}function Hf(o){if(o.body.case==="set"){const e=o.body.value;return hr.create(e.key,Ga(e.value),G(e.parentCreatedAt),G(e.executedAt))}else if(o.body.case==="add"){const e=o.body.value;return $i.create(G(e.parentCreatedAt),G(e.prevCreatedAt),Ga(e.value),G(e.executedAt))}else if(o.body.case==="move"){const e=o.body.value;return zn.create(G(e.parentCreatedAt),G(e.prevCreatedAt),G(e.createdAt),G(e.executedAt))}else if(o.body.case==="remove"){const e=o.body.value;return $n.create(G(e.parentCreatedAt),G(e.createdAt),G(e.executedAt))}else if(o.body.case==="edit"){const e=o.body.value,r=new Map;Object.entries(e.createdAtMapByActor).forEach(([a,f])=>{r.set(a,G(f))});const s=new Map;return Object.entries(e.attributes).forEach(([a,f])=>{s.set(a,f)}),Ui.create(G(e.parentCreatedAt),ro(e.from),ro(e.to),r,e.content,s,G(e.executedAt))}else if(o.body.case==="style"){const e=o.body.value,r=new Map;Object.entries(e.createdAtMapByActor).forEach(([a,f])=>{r.set(a,G(f))});const s=new Map;return Object.entries(e.attributes).forEach(([a,f])=>{s.set(a,f)}),Fi.create(G(e.parentCreatedAt),ro(e.from),ro(e.to),r,s,G(e.executedAt))}else{if(o.body.case==="select")return;if(o.body.case==="increase"){const e=o.body.value;return Kr.create(G(e.parentCreatedAt),Ga(e.value),G(e.executedAt))}else if(o.body.case==="treeEdit"){const e=o.body.value,r=new Map;return Object.entries(e.createdAtMapByActor).forEach(([s,a])=>{r.set(s,G(a))}),Vi.create(G(e.parentCreatedAt),Wr(e.from),Wr(e.to),Jy(e.contents),e.splitLevel,r,G(e.executedAt))}else if(o.body.case==="treeStyle"){const e=o.body.value,r=new Map,s=e.attributesToRemove,a=new Map;return e!=null&&e.createdAtMapByActor&&Object.entries(e.createdAtMapByActor).forEach(([f,d])=>{a.set(f,G(d))}),(s==null?void 0:s.length)>0?kn.createTreeRemoveStyleOperation(G(e.parentCreatedAt),Wr(e.from),Wr(e.to),a,s,G(e.executedAt)):(Object.entries(e.attributes).forEach(([f,d])=>{r.set(f,d)}),kn.create(G(e.parentCreatedAt),Wr(e.from),Wr(e.to),a,r,G(e.executedAt)))}else throw new le(se.Unimplemented,"unimplemented operation")}}function qy(o){const e=[];for(const r of o){const s=Hf(r);s&&e.push(s)}return e}function Gf(o){const e=[];for(const r of o)e.push(pr.create({id:Jf(r.id),operations:qy(r.operations),presenceChange:r.presenceChange?Fy(r.presenceChange):void 0,message:r.message}));return e}function Hy(o){return Vr.of(X.fromString(o.serverSeq,!0),o.clientSeq)}function Gy(o){return Zs.create(o.documentKey,Hy(o.checkpoint),o.isRemoved,Gf(o.changes),o.snapshot,G(o.minSyncedTicket))}function Yf(o){const e=new bi;for(const s of o.nodes){const a=Ya(s.element);e.set(s.key,a,a.getPositionedAt())}const r=new st(G(o.createdAt),e);return r.setMovedAt(G(o.movedAt)),r.setRemovedAt(G(o.removedAt)),r}function Xf(o){const e=new Bi;for(const s of o.nodes)e.insert(Ya(s.element));const r=new gt(G(o.createdAt),e);return r.setMovedAt(G(o.movedAt)),r.setRemovedAt(G(o.removedAt)),r}function Yy(o){const e=Te.of(Te.valueFromBytes(Kf(o.type),o.value),G(o.createdAt));return e.setMovedAt(G(o.movedAt)),e.setRemovedAt(G(o.removedAt)),e}function Xy(o){const e=new Jr;let r=e.getHead();for(const a of o.nodes){const f=e.insertAfter(r,Vy(a));a.insPrevId&&f.setInsPrev(e.findNode(Wf(a.insPrevId))),r=f}const s=new Et(e,G(o.createdAt));return s.setMovedAt(G(o.movedAt)),s.setRemovedAt(G(o.removedAt)),s}function Qy(o){const e=mt.create(no(o.type),mt.valueFromBytes(no(o.type),o.value),G(o.createdAt));return e.setMovedAt(G(o.movedAt)),e.setRemovedAt(G(o.removedAt)),e}function Qf(o){const e=qf(o.nodes);return Nt.create(e,G(o.createdAt))}function Ya(o){if(o.body.case==="jsonObject")return Yf(o.body.value);if(o.body.case==="jsonArray")return Xf(o.body.value);if(o.body.case==="primitive")return Yy(o.body.value);if(o.body.case==="text")return Xy(o.body.value);if(o.body.case==="counter")return Qy(o.body.value);if(o.body.case==="tree")return Qf(o.body.value);throw new le(se.Unimplemented,"unimplemented element")}function Zy(o){if(!o)return{root:st.create(Bt),presences:new Map};const e=$m.fromBinary(o);return{root:Ya(e.root),presences:jy(e.presences)}}function Zf(o){if(!o)throw new Error("bytes is empty");const e=At.fromBinary(o);return Yf(e.body.value)}function ed(o){return qa(o).toBinary()}function ev(o){if(!o)throw new Error("bytes is empty");const e=At.fromBinary(o);return Xf(e.body.value)}function tv(o){return jf(o).toBinary()}function nv(o){if(!o)throw new Error("bytes is empty");const e=At.fromBinary(o);return Qf(e.body.value)}function rv(o){return Vf(o).toBinary()}function td(o){return o?Array.from(o).map(e=>e.toString(16).padStart(2,"0")).join(""):""}function Xa(o){return td(o)}function nd(o){return new Uint8Array(o.match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Qa(o){return nd(o)}function iv(o){const e=qs.fromBinary(o);return Jf(e)}function sv(o){const e=Ra.fromBinary(o);return Hf(e)}const Re={fromPresence:Ha,toChangePack:Uy,fromChangePack:Gy,fromChanges:Gf,objectToBytes:ed,bytesToObject:Zf,bytesToSnapshot:Zy,bytesToHex:td,hexToBytes:nd,toHexString:Xa,toUint8Array:Qa,toOperation:Uf,toChangeID:Bf,PbChangeID:qs,bytesToChangeID:iv,bytesToOperation:sv};function rd(){return"xxxxxxxx-xxxx-4xxxy-xxxx-xxxxxxxxxxx".replace(/[xy]/g,o=>{const e=Math.random()*16|0;return(o==="x"?e:e&3|8).toString(16)})}class ov{constructor(e,r,s,a){u(this,"reconnectStreamDelay"),u(this,"doc"),u(this,"docID"),u(this,"syncMode"),u(this,"remoteChangeEventReceived"),u(this,"watchStream"),u(this,"watchLoopTimerID"),u(this,"watchAbortController"),this.reconnectStreamDelay=e,this.doc=r,this.docID=s,this.syncMode=a,this.remoteChangeEventReceived=!1}changeSyncMode(e){this.syncMode=e}needRealtimeSync(){return this.syncMode===Xi.RealtimeSyncOff?!1:this.syncMode===Xi.RealtimePushOnly?this.doc.hasLocalChanges():this.syncMode!==Xi.Manual&&(this.doc.hasLocalChanges()||this.remoteChangeEventReceived)}async runWatchLoop(e){const r=async()=>{if(this.watchStream)return Promise.resolve();this.watchLoopTimerID&&(clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0);try{[this.watchStream,this.watchAbortController]=await e(()=>{this.watchStream=void 0,this.watchAbortController=void 0,this.watchLoopTimerID=setTimeout(r,this.reconnectStreamDelay)})}catch{}};await r()}cancelWatchStream(){this.watchStream&&this.watchAbortController&&(this.watchAbortController.abort(),this.watchStream=void 0,this.watchAbortController=void 0),clearTimeout(this.watchLoopTimerID),this.watchLoopTimerID=void 0}}const Za=()=>{};class av{constructor(e){u(this,"finalized",!1),u(this,"observers",[]),u(this,"finalError");try{e(this)}catch(r){this.error(r)}}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,s){let a;e||_.fatal("missing observer"),this.finalized&&_.fatal("observable is finalized due to previous error"),typeof e=="object"?a=e:a={next:e,error:r,complete:s},a.next===void 0&&(a.next=Za),a.error===void 0&&(a.error=Za),a.complete===void 0&&(a.complete=Za);const f=rd(),d=this.unsubscribeOne.bind(this,f);if(this.observers.push({subscriptionID:f,observer:a}),this.finalized)try{this.finalError?a.error(this.finalError):a.complete()}catch(g){_.warn(g)}return d}unsubscribeOne(e){var r;this.observers=(r=this.observers)==null?void 0:r.filter(s=>s.subscriptionID!==e)}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e].observer)}catch(s){_.error(s)}}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.observers=void 0)}}function lv(o){const e=new av(o);return{subscribe:e.subscribe.bind(e),getProxy:()=>e}}class qr{constructor(e,r,s,a){u(this,"id"),u(this,"delimiter"),u(this,"message"),u(this,"root"),u(this,"operations"),u(this,"presenceChange"),u(this,"previousPresence"),u(this,"reversePresenceKeys"),this.id=e,this.delimiter=Fa,this.root=r,this.operations=[],this.previousPresence=Mt(s),this.presenceChange=void 0,this.reversePresenceKeys=new Set,this.message=a}static create(e,r,s,a){return new qr(e,r,s,a)}push(e){this.operations.push(e)}registerElement(e,r){this.root.registerElement(e,r)}registerRemovedElement(e){this.root.registerRemovedElement(e)}registerGCPair(e){this.root.registerGCPair(e)}getChange(){return pr.create({id:this.id,operations:this.operations,presenceChange:this.presenceChange,message:this.message})}hasChange(){return this.operations.length>0||this.presenceChange!==void 0}setPresenceChange(e){this.presenceChange=e}setReversePresence(e,r){for(const s of Object.keys(e))r!=null&&r.addToHistory?this.reversePresenceKeys.add(s):this.reversePresenceKeys.delete(s)}getReversePresence(){if(this.reversePresenceKeys.size===0)return;const e={};for(const r of this.reversePresenceKeys)e[r]=this.previousPresence[r];return e}issueTimeTicket(){return this.delimiter+=1,this.id.createTimeTicket(this.delimiter)}getLastTimeTicket(){return this.id.createTimeTicket(this.delimiter)}}class Wi{constructor(e){u(this,"rootObject"),u(this,"elementPairMapByCreatedAt"),u(this,"gcElementSetByCreatedAt"),u(this,"gcPairMap"),this.rootObject=e,this.elementPairMapByCreatedAt=new Map,this.gcElementSetByCreatedAt=new Set,this.gcPairMap=new Map,this.registerElement(e,void 0),e.getDescendants(r=>{if(r.getRemovedAt()&&this.registerRemovedElement(r),r instanceof Et||r instanceof Nt)for(const s of r.getGCPairs())this.registerGCPair(s);return!1})}static create(){return new Wi(st.create(Bt))}findByCreatedAt(e){const r=this.elementPairMapByCreatedAt.get(e.toIDString());if(!!r)return r.element}findElementPairByCreatedAt(e){return this.elementPairMapByCreatedAt.get(e.toIDString())}createSubPaths(e){let r=this.elementPairMapByCreatedAt.get(e.toIDString());if(!r)return[];const s=[];for(;r.parent;){const a=r.element.getCreatedAt(),f=r.parent.subPathOf(a);f===void 0&&_.fatal(`cant find the given element: ${a.toIDString()}`),s.unshift(f),r=this.elementPairMapByCreatedAt.get(r.parent.getCreatedAt().toIDString())}return s.unshift("$"),s}createPath(e){return this.createSubPaths(e).join(".")}registerElement(e,r){this.elementPairMapByCreatedAt.set(e.getCreatedAt().toIDString(),{parent:r,element:e}),e instanceof Bn&&e.getDescendants((s,a)=>(this.registerElement(s,a),!1))}deregisterElement(e){let r=0;const s=a=>{const f=a.getCreatedAt().toIDString();this.elementPairMapByCreatedAt.delete(f),this.gcElementSetByCreatedAt.delete(f),r++};return s(e),e instanceof Bn&&e.getDescendants(a=>(s(a),!1)),r}registerRemovedElement(e){this.gcElementSetByCreatedAt.add(e.getCreatedAt().toIDString())}registerGCPair(e){if(this.gcPairMap.get(e.child.toIDString())){this.gcPairMap.delete(e.child.toIDString());return}this.gcPairMap.set(e.child.toIDString(),e)}getElementMapSize(){return this.elementPairMapByCreatedAt.size}getGarbageElementSetSize(){const e=new Set;for(const r of this.gcElementSetByCreatedAt){e.add(r);const s=this.elementPairMapByCreatedAt.get(r);s.element instanceof Bn&&s.element.getDescendants(a=>(e.add(a.getCreatedAt().toIDString()),!1))}return e.size}getObject(){return this.rootObject}getGarbageLen(){return this.getGarbageElementSetSize()+this.gcPairMap.size}deepcopy(){return new Wi(this.rootObject.deepcopy())}garbageCollect(e){let r=0;for(const s of this.gcElementSetByCreatedAt){const a=this.elementPairMapByCreatedAt.get(s);a.element.getRemovedAt()&&e.compare(a.element.getRemovedAt())>=0&&(a.parent.purge(a.element),r+=this.deregisterElement(a.element))}for(const[,s]of this.gcPairMap){const a=s.child.getRemovedAt();a!==void 0&&e.compare(a)>=0&&(s.parent.purge(s.child),this.gcPairMap.delete(s.child.toIDString()),r+=1)}return r}toJSON(){return this.rootObject.toJSON()}toSortedJSON(){return this.rootObject.toSortedJSON()}}function id(o,e){const r=new qi(o);return new Proxy(e,r.getHandlers())}class qi{constructor(e){u(this,"context"),u(this,"handlers"),this.context=e,this.handlers={set:(r,s,a)=>(_.isEnabled(ht.Trivial)&&_.trivial(`obj[${s}]=${JSON.stringify(a)}`),qi.setInternal(e,r,s,a),!0),get:(r,s)=>(_.isEnabled(ht.Trivial)&&_.trivial(`obj[${s}]`),s==="getID"?()=>r.getCreatedAt():s==="toJSON"||s==="toString"?()=>r.toJSON():s==="toJS"?()=>r.toJS():s==="toJSForTest"?()=>r.toJSForTest():mr(e,r.get(s))),ownKeys:r=>r.getKeys(),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),deleteProperty:(r,s)=>(_.isEnabled(ht.Trivial)&&_.trivial(`obj[${s}]`),qi.deleteInternal(e,r,s),!0)}}static setInternal(e,r,s,a){if(s.includes("."))throw new le(se.InvalidObjectKey,"key must not contain the '.'.");const f=e.issueTimeTicket(),d=io(e,a,f),g=r.set(s,d,f);e.registerElement(d,r),g&&e.registerRemovedElement(g),e.push(hr.create(s,d.deepcopy(),r.getCreatedAt(),f))}static buildObjectMembers(e,r){const s={};for(const[a,f]of Object.entries(r)){if(a.includes("."))throw new le(se.InvalidObjectKey,"key must not contain the '.'.");const d=e.issueTimeTicket(),g=io(e,f,d);s[a]=g}return s}static deleteInternal(e,r,s){const a=e.issueTimeTicket(),f=r.deleteByKey(s,a);!f||(e.push($n.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f))}getHandlers(){return this.handlers}}function uv(o,e){const r=new Ne(o,e);return new Proxy(e,r.getHandlers())}function cv(o){return typeof o=="string"||o instanceof String?!isNaN(o):!1}function fv(o){return["concat","entries","every","filter","find","findIndex","forEach","join","keys","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(o)}class Ne{constructor(e,r){u(this,"context"),u(this,"handlers"),u(this,"array"),this.context=e,this.array=r,this.handlers={get:(s,a,f)=>a==="getID"?()=>s.getCreatedAt():a==="getElementByID"?d=>{const g=s.getByID(d);if(!(!g||g.isRemoved()))return jn(e,g)}:a==="getElementByIndex"?d=>{const g=s.get(d);return jn(e,g)}:a==="getLast"?()=>jn(e,s.getLast()):a==="deleteByID"?d=>{const g=Ne.deleteInternalByID(e,s,d);return jn(e,g)}:a==="insertAfter"?(d,g)=>{const m=Ne.insertAfterInternal(e,s,d,g);return jn(e,m)}:a==="insertBefore"?(d,g)=>{const m=Ne.insertBeforeInternal(e,s,d,g);return jn(e,m)}:a==="moveBefore"?(d,g)=>{Ne.moveBeforeInternal(e,s,d,g)}:a==="moveAfter"?(d,g)=>{Ne.moveAfterInternal(e,s,d,g)}:a==="moveFront"?d=>{Ne.moveFrontInternal(e,s,d)}:a==="moveLast"?d=>{Ne.moveLastInternal(e,s,d)}:cv(a)?mr(e,s.get(Number(a))):a==="push"?d=>Ne.pushInternal(e,s,d):a==="splice"?(d,g,...m)=>Ne.splice(e,s,d,g,...m):a==="length"?s.length:typeof a=="symbol"&&a===Symbol.iterator?Ne.iteratorInternal.bind(this,e,s):a==="includes"?(d,g)=>Ne.includes(e,s,d,g):a==="indexOf"?(d,g)=>Ne.indexOf(e,s,d,g):a==="lastIndexOf"?(d,g)=>Ne.lastIndexOf(e,s,d,g):a==="toJSForTest"?()=>s.toJSForTest():a==="toTestString"?()=>Ne.toTestString(s):typeof a=="string"&&fv(a)?(...d)=>{const g=Array.from(s).map(m=>mr(e,m));return Array.prototype[a].apply(g,d)}:Reflect.get(s,a,f),deleteProperty:(s,a)=>(_.isEnabled(ht.Trivial)&&_.trivial(`array[${a}]`),Ne.deleteInternalByIndex(e,s,Number.parseInt(a)),!0)}}static*iteratorInternal(e,r){for(const s of r)yield jn(e,s)}static buildArrayElements(e,r){const s=[];for(const a of r){const f=e.issueTimeTicket(),d=io(e,a,f);s.push(d)}return s}static pushInternal(e,r,s){return Ne.insertAfterInternal(e,r,r.getLastCreatedAt(),s),r.length}static moveBeforeInternal(e,r,s,a){const f=e.issueTimeTicket(),d=r.getPrevCreatedAt(s);r.moveAfter(d,a,f),e.push(zn.create(r.getCreatedAt(),d,a,f))}static moveAfterInternal(e,r,s,a){const f=e.issueTimeTicket();r.moveAfter(s,a,f),e.push(zn.create(r.getCreatedAt(),s,a,f))}static moveFrontInternal(e,r,s){const a=e.issueTimeTicket(),f=r.getHead();r.moveAfter(f.getCreatedAt(),s,a),e.push(zn.create(r.getCreatedAt(),f.getCreatedAt(),s,a))}static moveLastInternal(e,r,s){const a=e.issueTimeTicket(),f=r.getLastCreatedAt();r.moveAfter(f,s,a),e.push(zn.create(r.getCreatedAt(),f,s,a))}static insertAfterInternal(e,r,s,a){const f=e.issueTimeTicket(),d=io(e,a,f);return r.insertAfter(s,d),e.registerElement(d,r),e.push($i.create(r.getCreatedAt(),s,d.deepcopy(),f)),d}static insertBeforeInternal(e,r,s,a){return Ne.insertAfterInternal(e,r,r.getPrevCreatedAt(s),a)}static deleteInternalByIndex(e,r,s){const a=e.issueTimeTicket(),f=r.deleteByIndex(s,a);if(!!f)return e.push($n.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f),f}static deleteInternalByID(e,r,s){const a=e.issueTimeTicket(),f=r.delete(s,a);return e.push($n.create(r.getCreatedAt(),f.getCreatedAt(),a)),e.registerRemovedElement(f),f}static splice(e,r,s,a,...f){const d=r.length,g=s>=0?Math.min(s,d):Math.max(d+s,0),m=a===void 0?d:a<0?g:Math.min(g+a,d),y=[];for(let A=g;A<m;A++){const D=Ne.deleteInternalByIndex(e,r,g);if(D){const S=D.deepcopy();S.setRemovedAt(),y.push(mr(e,S))}}if(f){let A=g===0?r.getHead().getID():r.get(g-1).getID();for(const D of f)A=Ne.insertAfterInternal(e,r,A,D).getID()}return y}static includes(e,r,s,a){var f;const d=r.length,g=a===void 0?0:a<0?Math.max(a+d,0):a;if(g>=d)return!1;if(Te.isSupport(s))return Array.from(r).map(y=>mr(e,y)).includes(s,g);for(let m=g;m<d;m++)if(((f=r.get(m))==null?void 0:f.getID())===s.getID())return!0;return!1}static indexOf(e,r,s,a){var f;const d=r.length,g=a===void 0?0:a<0?Math.max(a+d,0):a;if(g>=d)return-1;if(Te.isSupport(s))return Array.from(r).map(y=>mr(e,y)).indexOf(s,g);for(let m=g;m<d;m++)if(((f=r.get(m))==null?void 0:f.getID())===s.getID())return m;return-1}static lastIndexOf(e,r,s,a){var f;const d=r.length,g=a===void 0||a>=d?d-1:a<0?a+d:a;if(g<0)return-1;if(Te.isSupport(s))return Array.from(r).map(y=>mr(e,y)).lastIndexOf(s,g);for(let m=g;m>0;m--)if(((f=r.get(m))==null?void 0:f.getID())===s.getID())return m;return-1}static toTestString(e){return e.toTestString()}getHandlers(){return this.handlers}}class Hi{constructor(e,r){u(this,"context"),u(this,"text"),this.context=e,this.text=r}initialize(e,r){this.context=e,this.text=r}getID(){return this.text.getID()}edit(e,r,s,a){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}if(e>r){_.fatal("from should be less than or equal to to");return}const f=this.text.indexRangeToPosRange(e,r);_.isEnabled(ht.Debug)&&_.debug(`EDIT: f:${e}->${f[0].toTestString()}, t:${r}->${f[1].toTestString()} c:${s}`);const d=a?Fr(a):void 0,g=this.context.issueTimeTicket(),[m,,y,A]=this.text.edit(f,s,g,d);for(const D of y)this.context.registerGCPair(D);return this.context.push(new Ui(this.text.getCreatedAt(),f[0],f[1],m,s,d?new Map(Object.entries(d)):new Map,g)),this.text.findIndexesFromRange(A)}delete(e,r){return this.edit(e,r,"")}empty(){return this.edit(0,this.length,"")}setStyle(e,r,s){if(!this.context||!this.text)return _.fatal("it is not initialized yet"),!1;if(e>r)return _.fatal("from should be less than or equal to to"),!1;const a=this.text.indexRangeToPosRange(e,r);_.isEnabled(ht.Debug)&&_.debug(`STYL: f:${e}->${a[0].toTestString()}, t:${r}->${a[1].toTestString()} a:${JSON.stringify(s)}`);const f=Fr(s),d=this.context.issueTimeTicket(),[g,m]=this.text.setStyle(a,f,d);for(const y of m)this.context.registerGCPair(y);return this.context.push(new Fi(this.text.getCreatedAt(),a[0],a[1],g,new Map(Object.entries(f)),d)),!0}indexRangeToPosRange(e){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}const r=this.text.indexRangeToPosRange(e[0],e[1]);return[r[0].toStruct(),r[1].toStruct()]}posRangeToIndexRange(e){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}const r=this.text.findIndexesFromRange([Ut.fromStruct(e[0]),Ut.fromStruct(e[1])]);return[r[0],r[1]]}toTestString(){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}return this.text.toTestString()}values(){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}return this.text.values()}get length(){return this.text.length}checkWeight(){return this.text.checkWeight()}toString(){return!this.context||!this.text?(_.fatal("it is not initialized yet"),""):this.text.toString()}toJSON(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSON()}toJSForTest(){if(!this.context||!this.text)throw new Error("it is not initialized yet");return this.text.toJSForTest()}createRangeForTest(e,r){if(!this.context||!this.text){_.fatal("it is not initialized yet");return}return this.text.indexRangeToPosRange(e,r)}}class Gi{constructor(e,r){u(this,"valueType"),u(this,"value"),u(this,"context"),u(this,"counter"),this.valueType=e,this.value=r}initialize(e,r){this.valueType=r.getValueType(),this.context=e,this.counter=r,this.value=r.getValue()}getID(){return this.counter.getID()}getValue(){return this.value}getValueType(){return this.valueType}increase(e){if(!this.context||!this.counter){_.fatal("it is not initialized yet");return}const r=this.context.issueTimeTicket(),s=Te.of(e,r);if(!s.isNumericType())throw new TypeError(`Unsupported type of value: ${typeof s.getValue()}`);return this.counter.increase(s),this.context.push(Kr.create(this.counter.getCreatedAt(),s,r)),this}toJSForTest(){if(!this.context||!this.counter)throw new Error("it is not initialized yet");return this.counter.toJSForTest()}}function el(o,e,r){const{type:s}=o,a=r.issueTimeTicket();if(s===Tn){sd(o);const{value:f}=o,d=pt.create(Fe.of(a,0),s,f);e.append(d)}else{const{children:f=[]}=o;let{attributes:d}=o,g;if(typeof d=="object"&&!Pf(d)){d=Fr(d),g=new Sn;for(const[y,A]of Object.entries(d))g.set(y,A,a)}const m=pt.create(Fe.of(a,0),s,void 0,g);e.append(m);for(const y of f)el(y,m,r)}}function dv(o,e){const{type:r}=e,s=o.issueTimeTicket();let a;if(e.type===Tn){const{value:f}=e;a=pt.create(Fe.of(s,0),r,f)}else if(e){const{children:f=[]}=e;let{attributes:d}=e,g;if(typeof d=="object"&&!Pf(d)){d=Fr(d),g=new Sn;for(const[m,y]of Object.entries(d))g.set(m,y,s)}a=pt.create(Fe.of(o.issueTimeTicket(),0),r,void 0,g);for(const m of f)el(m,a,o)}return a}function sd(o){if(!o.value.length)throw new Error("text node cannot have empty value");return!0}function od(o){if(!o.length)return!0;if(o[0].type===Tn)for(const r of o){const{type:s}=r;if(s!==Tn)throw new Error("element node and text node cannot be passed together");sd(r)}else for(const r of o){const{type:s}=r;if(s===Tn)throw new Error("element node and text node cannot be passed together")}return!0}class Yi{constructor(e){u(this,"initialRoot"),u(this,"context"),u(this,"tree"),this.initialRoot=e}initialize(e,r){this.context=e,this.tree=r}getID(){return this.tree.getID()}buildRoot(e){if(!this.initialRoot)return pt.create(Fe.of(e.issueTimeTicket(),0),hy);const r=pt.create(Fe.of(e.issueTimeTicket(),0),this.initialRoot.type);for(const s of this.initialRoot.children)el(s,r,e);return r}getSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getSize()}getNodeSize(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getNodeSize()}getIndexTree(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getIndexTree()}styleByPath(e,r){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(!e.length)throw new Error("path should not be empty");const[s,a]=this.tree.pathToPosRange(e),f=this.context.issueTimeTicket(),d=r?Fr(r):void 0,[g]=this.tree.style([s,a],d,f);this.context.push(kn.create(this.tree.getCreatedAt(),s,a,g,d?new Map(Object.entries(d)):new Map,f))}style(e,r,s){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const a=this.tree.findPos(e),f=this.tree.findPos(r),d=this.context.issueTimeTicket(),g=s?Fr(s):void 0,[m,y]=this.tree.style([a,f],g,d);for(const A of y)this.context.registerGCPair(A);this.context.push(kn.create(this.tree.getCreatedAt(),a,f,m,g?new Map(Object.entries(g)):new Map,d))}removeStyle(e,r,s){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const a=this.tree.findPos(e),f=this.tree.findPos(r),d=this.context.issueTimeTicket(),[g,m]=this.tree.removeStyle([a,f],s,d);for(const y of m)this.context.registerGCPair(y);this.context.push(kn.createTreeRemoveStyleOperation(this.tree.getCreatedAt(),a,f,g,s,d))}editInternal(e,r,s,a=0){var f;if(s.length!==0&&s[0]&&(od(s),s[0].type!==Tn))for(const A of s){const{children:D=[]}=A;od(D)}const d=this.context.getLastTimeTicket();let g=new Array;if(((f=s[0])==null?void 0:f.type)===Tn){let A="";for(const D of s){const{value:S}=D;A+=S}g.push(pt.create(Fe.of(this.context.issueTimeTicket(),0),Tn,A))}else g=s.map(A=>A&&dv(this.context,A)).filter(A=>A);const[,m,y]=this.tree.edit([e,r],g.length?g.map(A=>A==null?void 0:A.deepcopy()):void 0,a,d,()=>this.context.issueTimeTicket());for(const A of m)this.context.registerGCPair(A);return this.context.push(Vi.create(this.tree.getCreatedAt(),e,r,g.length?g:void 0,a,y,d)),!0}editByPath(e,r,s,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==r.length)throw new Error("path length should be equal");if(!e.length||!r.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),d=this.tree.pathToPos(r);return this.editInternal(f,d,s?[s]:[],a)}editBulkByPath(e,r,s,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e.length!==r.length)throw new Error("path length should be equal");if(!e.length||!r.length)throw new Error("path should not be empty");const f=this.tree.pathToPos(e),d=this.tree.pathToPos(r);return this.editInternal(f,d,s,a)}edit(e,r,s,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),d=this.tree.findPos(r);return this.editInternal(f,d,s?[s]:[],a)}editBulk(e,r,s,a=0){if(!this.context||!this.tree)throw new Error("it is not initialized yet");if(e>r)throw new Error("from should be less than or equal to to");const f=this.tree.findPos(e),d=this.tree.findPos(r);return this.editInternal(f,d,s,a)}toXML(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toXML()}toJSON(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSON()}toJSForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSForTest()}toJSInfoForTest(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.toJSInfoForTest()}getRootTreeNode(){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.getRootTreeNode()}indexToPath(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.indexToPath(e)}pathToIndex(e){if(!this.context||!this.tree)throw new Error("it is not initialized yet");return this.tree.pathToIndex(e)}pathRangeToPosRange(e){if(!this.context||!this.tree){_.fatal("it is not initialized yet");return}const r=[this.tree.pathToIndex(e[0]),this.tree.pathToIndex(e[1])],s=this.tree.indexRangeToPosRange(r);return[s[0].toStruct(),s[1].toStruct()]}indexRangeToPosRange(e){if(!this.context||!this.tree){_.fatal("it is not initialized yet");return}return this.tree.indexRangeToPosStructRange(e)}posRangeToIndexRange(e){if(!this.context||!this.tree){_.fatal("it is not initialized yet");return}const r=[zt.fromStruct(e[0]),zt.fromStruct(e[1])];return this.tree.posRangeToIndexRange(r)}posRangeToPathRange(e){if(!this.context||!this.tree){_.fatal("it is not initialized yet");return}const r=[zt.fromStruct(e[0]),zt.fromStruct(e[1])];return this.tree.posRangeToPathRange(r)}}function ad(o,e){return id(o,e)}function jn(o,e){if(e){if(e instanceof Te)return e;if(e instanceof st)return id(o,e);if(e instanceof gt)return uv(o,e);if(e instanceof Et)return new Hi(o,e);if(e instanceof mt){const r=new Gi(an.IntegerCnt,0);return r.initialize(o,e),r}else if(e instanceof Nt){const r=new Yi;return r.initialize(o,e),r}}else return;throw new TypeError(`Unsupported type of element: ${typeof e}`)}function mr(o,e){const r=jn(o,e);return r instanceof Te?r.getValue():r}function io(o,e,r){let s;if(Te.isSupport(e))s=Te.of(e,r);else if(Array.isArray(e))s=gt.create(r,Ne.buildArrayElements(o,e));else if(typeof e=="object")e instanceof Hi?(s=Et.create(Jr.create(),r),e.initialize(o,s)):e instanceof Gi?(s=mt.create(e.getValueType(),e.getValue(),r),e.initialize(o,s)):e instanceof Yi?(s=Nt.create(e.buildRoot(o),r),e.initialize(o,s)):s=st.create(r,qi.buildObjectMembers(o,e));else throw new TypeError(`Unsupported type of value: ${typeof e}`);return s}const ld=50;class hv{constructor(){u(this,"undoStack",[]),u(this,"redoStack",[])}hasUndo(){return this.undoStack.length>0}hasRedo(){return this.redoStack.length>0}pushUndo(e){this.undoStack.length>=ld&&this.undoStack.shift(),this.undoStack.push(e)}popUndo(){return this.undoStack.pop()}pushRedo(e){this.redoStack.length>=ld&&this.redoStack.shift(),this.redoStack.push(e)}popRedo(){return this.redoStack.pop()}clearRedo(){this.redoStack=[]}getUndoStackForTest(){return this.undoStack}getRedoStackForTest(){return this.redoStack}}const ud="yorkie-devtools-panel",cd="yorkie-devtools-sdk";let Hr="disconnected";const fd=new Map,so=new Map;typeof window<"u"&&(window.transactionEventsByDocKey=so);function oo(o,e){!((e==null?void 0:e.force)||Hr!=="disconnected")||window.postMessage({source:cd,...o},"*")}function gv(o){if(!o.isEnableDevtools()||typeof window>"u"||fd.has(o.getKey()))return;so.set(o.getKey(),[]);const e=o.subscribe("all",r=>{r.some(s=>s.type!==Ze.StatusChanged&&s.type!==Ze.Snapshot&&s.type!==Ze.LocalChange&&s.type!==Ze.RemoteChange&&s.type!==Ze.Initialized&&s.type!==Ze.Watched&&s.type!==Ze.Unwatched&&s.type!==Ze.PresenceChanged)||(so.get(o.getKey()).push(r),Hr==="synced"&&oo({msg:"doc::sync::partial",docKey:o.getKey(),event:r}))});fd.set(o.getKey(),[e]),oo({msg:"refresh-devtools"},{force:!0}),window.addEventListener("message",r=>{var s;if(((s=r.data)==null?void 0:s.source)!==ud)return;switch(r.data.msg){case"devtools::connect":if(Hr!=="disconnected")break;Hr="connected",oo({msg:"doc::available",docKey:o.getKey()}),_.info(`[YD] Devtools connected. Doc: ${o.getKey()}`);break;case"devtools::disconnect":Hr="disconnected",_.info(`[YD] Devtools disconnected. Doc: ${o.getKey()}`);break;case"devtools::subscribe":Hr="synced",oo({msg:"doc::sync::full",docKey:o.getKey(),events:so.get(o.getKey())}),_.info(`[YD] Devtools subscribed. Doc: ${o.getKey()}`);break}})}var An=(o=>(o.Detached="detached",o.Attached="attached",o.Removed="removed",o))(An||{}),Ze=(o=>(o.StatusChanged="status-changed",o.ConnectionChanged="connection-changed",o.SyncStatusChanged="sync-status-changed",o.Snapshot="snapshot",o.LocalChange="local-change",o.RemoteChange="remote-change",o.Initialized="initialized",o.Watched="watched",o.Unwatched="unwatched",o.PresenceChanged="presence-changed",o))(Ze||{}),ao=(o=>(o.Connected="connected",o.Disconnected="disconnected",o))(ao||{}),lo=(o=>(o.Synced="synced",o.SyncFailed="sync-failed",o))(lo||{});class tl{constructor(e,r){u(this,"key"),u(this,"status"),u(this,"opts"),u(this,"changeID"),u(this,"checkpoint"),u(this,"localChanges"),u(this,"root"),u(this,"clone"),u(this,"eventStream"),u(this,"eventStreamObserver"),u(this,"onlineClients"),u(this,"presences"),u(this,"history"),u(this,"internalHistory"),u(this,"isUpdating"),this.opts=r||{},this.key=e,this.status="detached",this.root=Wi.create(),this.changeID=Ty,this.checkpoint=ky,this.localChanges=[],this.eventStream=lv(s=>{this.eventStreamObserver=s}),this.onlineClients=new Set,this.presences=new Map,this.isUpdating=!1,this.internalHistory=new hv,this.history={canUndo:this.canUndo.bind(this),canRedo:this.canRedo.bind(this),undo:this.undo.bind(this),redo:this.redo.bind(this)},gv(this)}update(e,r){if(this.getStatus()==="removed")throw new le(se.DocumentRemoved,`${this.key} is removed`);this.ensureClone();const s=this.changeID.getActorID(),a=qr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(s)||{},r);try{const f=ad(a,this.clone.root.getObject());this.presences.has(s)||this.clone.presences.set(s,{}),this.isUpdating=!0,e(f,new Ua(a,this.clone.presences.get(s)))}catch(f){throw this.clone=void 0,_.error(f),f}finally{this.isUpdating=!1}if(a.hasChange()){_.isEnabled(ht.Trivial)&&_.trivial(`trying to update a local change: ${this.toJSON()}`);const f=a.getChange(),{opInfos:d,reverseOps:g}=f.execute(this.root,this.presences,ge.Local),m=a.getReversePresence();m&&g.push({type:"presence",value:m}),this.localChanges.push(f),g.length>0&&this.internalHistory.pushUndo(g),d.length>0&&this.internalHistory.clearRedo(),this.changeID=f.getID();const y=[];d.length>0&&y.push({type:"local-change",source:ge.Local,value:{message:f.getMessage()||"",operations:d,actor:s,clientSeq:f.getID().getClientSeq(),serverSeq:f.getID().getServerSeq()},rawChange:this.isEnableDevtools()?f.toStruct():void 0}),f.hasPresenceChange()&&y.push({type:"presence-changed",source:ge.Local,value:{clientID:s,presence:this.getPresence(s)}}),this.publish(y),_.isEnabled(ht.Trivial)&&_.trivial(`after update a local change: ${this.toJSON()}`)}}subscribe(e,r,s,a){if(typeof e=="string"){if(typeof r!="function")throw new Error("Second argument must be a callback function");if(e==="presence"){const g=r;return this.eventStream.subscribe(m=>{for(const y of m)y.type!=="initialized"&&y.type!=="watched"&&y.type!=="unwatched"&&y.type!=="presence-changed"||g(y)},s,a)}if(e==="my-presence"){const g=r;return this.eventStream.subscribe(m=>{for(const y of m)y.type!=="initialized"&&y.type!=="presence-changed"||y.type==="presence-changed"&&y.value.clientID!==this.changeID.getActorID()||g(y)},s,a)}if(e==="others"){const g=r;return this.eventStream.subscribe(m=>{for(const y of m)y.type!=="watched"&&y.type!=="unwatched"&&y.type!=="presence-changed"||y.value.clientID!==this.changeID.getActorID()&&g(y)},s,a)}if(e==="connection"){const g=r;return this.eventStream.subscribe(m=>{for(const y of m)y.type==="connection-changed"&&g(y)},s,a)}if(e==="status"){const g=r;return this.eventStream.subscribe(m=>{for(const y of m)y.type==="status-changed"&&g(y)},s,a)}if(e==="sync"){const g=r;return this.eventStream.subscribe(m=>{for(const y of m)y.type==="sync-status-changed"&&g(y)},s,a)}if(e==="all"){const g=r;return this.eventStream.subscribe(g,s,a)}const f=e,d=r;return this.eventStream.subscribe(g=>{for(const m of g){if(m.type!=="local-change"&&m.type!=="remote-change")continue;const y=[];for(const A of m.value.operations)this.isSameElementOrChildOf(A.path,f)&&y.push(A);y.length&&d({...m,value:{...m.value,operations:y}})}},s,a)}if(typeof e=="function"){const f=e,d=r,g=s;return this.eventStream.subscribe(m=>{for(const y of m)y.type!=="snapshot"&&y.type!=="local-change"&&y.type!=="remote-change"||f(y)},d,g)}throw new Error(`"${e}" is not a valid`)}publish(e){this.eventStreamObserver&&this.eventStreamObserver.next(e)}isSameElementOrChildOf(e,r){if(r===e)return!0;const s=e.split(".");return r.split(".").every((f,d)=>f===s[d])}applyChangePack(e){for(e.hasSnapshot()?this.applySnapshot(e.getCheckpoint().getServerSeq(),e.getSnapshot()):e.hasChanges()&&this.applyChanges(e.getChanges(),ge.Remote);this.localChanges.length&&!(this.localChanges[0].getID().getClientSeq()>e.getCheckpoint().getClientSeq());)this.localChanges.shift();this.checkpoint=this.checkpoint.forward(e.getCheckpoint()),this.garbageCollect(e.getMinSyncedTicket()),e.getIsRemoved()&&this.applyStatus("removed"),_.isEnabled(ht.Trivial)&&_.trivial(`${this.root.toJSON()}`)}getCheckpoint(){return this.checkpoint}getChangeID(){return this.changeID}hasLocalChanges(){return this.localChanges.length>0}ensureClone(){this.clone||(this.clone={root:this.root.deepcopy(),presences:Mt(this.presences)})}createChangePack(){const e=Array.from(this.localChanges),r=this.checkpoint.increaseClientSeq(e.length);return Zs.create(this.key,r,!1,e)}setActor(e){for(const r of this.localChanges)r.setActor(e);this.changeID=this.changeID.setActor(e)}isEnableDevtools(){return!!this.opts.enableDevtools}getKey(){return this.key}getStatus(){return this.status}getCloneRoot(){if(!!this.clone)return this.clone.root.getObject()}getRoot(){this.ensureClone();const e=qr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});return ad(e,this.clone.root.getObject())}garbageCollect(e){return this.opts.disableGC?0:(this.clone&&this.clone.root.garbageCollect(e),this.root.garbageCollect(e))}getRootObject(){return this.root.getObject()}getGarbageLen(){return this.root.getGarbageLen()}getGarbageLenFromClone(){return this.clone.root.getGarbageLen()}toJSON(){return this.root.toJSON()}toSortedJSON(){return this.root.toSortedJSON()}toJSForTest(){return{...this.getRoot().toJSForTest(),key:"root"}}applySnapshot(e,r){const{root:s,presences:a}=Re.bytesToSnapshot(r);this.root=new Wi(s),this.presences=a,this.changeID=this.changeID.syncLamport(e),this.clone=void 0,this.publish([{type:"snapshot",source:ge.Remote,value:{snapshot:this.isEnableDevtools()?Re.bytesToHex(r):void 0,serverSeq:e.toString()}}])}applyChanges(e,r){_.isEnabled(ht.Debug)&&_.debug(`trying to apply ${e.length} remote changes.elements:${this.root.getElementMapSize()}, removeds:${this.root.getGarbageElementSetSize()}`),_.isEnabled(ht.Trivial)&&_.trivial(e.map(s=>`${s.getID().toTestString()}	${s.toTestString()}`).join(`
`));for(const s of e)this.applyChange(s,r);_.isEnabled(ht.Debug)&&_.debug(`after appling ${e.length} remote changes.elements:${this.root.getElementMapSize()},  removeds:${this.root.getGarbageElementSetSize()}`)}applyChange(e,r){this.ensureClone(),e.execute(this.clone.root,this.clone.presences,r);const s=[],a=e.getID().getActorID();if(e.hasPresenceChange()&&this.onlineClients.has(a)){const d=e.getPresenceChange();switch(d.type){case Mn.Put:s.push(this.presences.has(a)?{type:"presence-changed",source:r,value:{clientID:a,presence:d.presence}}:{type:"watched",source:ge.Remote,value:{clientID:a,presence:d.presence}});break;case Mn.Clear:s.push({type:"unwatched",source:ge.Remote,value:{clientID:a,presence:this.getPresence(a)}}),this.removeOnlineClient(a);break}}const{opInfos:f}=e.execute(this.root,this.presences,r);if(this.changeID=this.changeID.syncLamport(e.getID().getLamport()),f.length>0){const d=this.isEnableDevtools()?e.toStruct():void 0;s.push(r===ge.Remote?{type:"remote-change",source:r,value:{actor:a,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:f},rawChange:d}:{type:"local-change",source:r,value:{actor:a,clientSeq:e.getID().getClientSeq(),serverSeq:e.getID().getServerSeq(),message:e.getMessage()||"",operations:f},rawChange:d})}s.length>0&&this.publish(s)}applyWatchStream(e){if(e.body.case==="initialization"){const r=e.body.value.clientIds,s=new Set;for(const a of r)a!==this.changeID.getActorID()&&s.add(a);this.setOnlineClients(s),this.publish([{type:"initialized",source:ge.Local,value:this.getPresences()}]);return}if(e.body.case==="event"){const{type:r,publisher:s}=e.body.value,a=[];if(r===Ws.DOCUMENT_WATCHED)this.addOnlineClient(s),this.hasPresence(s)&&a.push({type:"watched",source:ge.Remote,value:{clientID:s,presence:this.getPresence(s)}});else if(r===Ws.DOCUMENT_UNWATCHED){const f=this.getPresence(s);this.removeOnlineClient(s),f&&a.push({type:"unwatched",source:ge.Remote,value:{clientID:s,presence:f}})}a.length>0&&this.publish(a)}}applyStatus(e){this.status=e,e==="detached"&&this.setActor(Ys),this.publish([{source:e==="removed"?ge.Remote:ge.Local,type:"status-changed",value:e==="attached"?{status:e,actorID:this.changeID.getActorID()}:{status:e}}])}applyDocEvent(e){if(e.type==="status-changed"){this.applyStatus(e.value.status),e.value.status==="attached"&&this.setActor(e.value.actorID);return}if(e.type==="snapshot"){const{snapshot:r,serverSeq:s}=e.value;if(!r)return;this.applySnapshot(X.fromString(s),Re.hexToBytes(r));return}if(e.type==="local-change"||e.type==="remote-change"){if(!e.rawChange)return;const r=pr.fromStruct(e.rawChange);this.applyChange(r,e.source)}if(e.type==="initialized"){const r=new Set;for(const{clientID:s,presence:a}of e.value)r.add(s),this.presences.set(s,a);this.setOnlineClients(r);return}if(e.type==="watched"){const{clientID:r,presence:s}=e.value;this.addOnlineClient(r),this.presences.set(r,s);return}if(e.type==="unwatched"){const{clientID:r}=e.value;this.removeOnlineClient(r),this.presences.delete(r)}if(e.type==="presence-changed"){const{clientID:r,presence:s}=e.value;this.presences.set(r,s)}}applyTransactionEvent(e){for(const r of e)this.applyDocEvent(r)}getValueByPath(e){if(!e.startsWith("$"))throw new le(se.InvalidArgument,'path must start with "$"');const r=e.split(".");r.shift();let s=this.getRoot();for(const a of r)if(s=s[a],s===void 0)return;return s}setOnlineClients(e){this.onlineClients=e}resetOnlineClients(){this.onlineClients=new Set}addOnlineClient(e){this.onlineClients.add(e)}removeOnlineClient(e){this.onlineClients.delete(e)}hasPresence(e){return this.presences.has(e)}getMyPresence(){if(this.status!=="attached")return{};const e=this.presences.get(this.changeID.getActorID());return e?Mt(e):{}}getPresence(e){if(e===this.changeID.getActorID())return this.getMyPresence();if(!this.onlineClients.has(e))return;const r=this.presences.get(e);return r?Mt(r):void 0}getPresenceForTest(e){const r=this.presences.get(e);return r?Mt(r):void 0}getPresences(){const e=[];e.push({clientID:this.changeID.getActorID(),presence:Mt(this.getMyPresence())});for(const r of this.onlineClients)this.presences.has(r)&&e.push({clientID:r,presence:Mt(this.presences.get(r))});return e}getSelfForTest(){return{clientID:this.getChangeID().getActorID(),presence:this.getMyPresence()}}getOthersForTest(){const e=this.getChangeID().getActorID();return this.getPresences().filter(r=>r.clientID!==e).sort((r,s)=>r.clientID>s.clientID?1:-1)}canUndo(){return this.internalHistory.hasUndo()&&!this.isUpdating}canRedo(){return this.internalHistory.hasRedo()&&!this.isUpdating}undo(){if(this.isUpdating)throw new Error("Undo is not allowed during an update");const e=this.internalHistory.popUndo();if(e===void 0)throw new Error("There is no operation to be undone");this.ensureClone();const r=qr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const y of e){if(!(y instanceof $t)){new Ua(r,Mt(this.clone.presences.get(this.changeID.getActorID()))).set(y.value,{addToHistory:!0});continue}const A=r.issueTimeTicket();y.setExecutedAt(A),r.push(y)}const s=r.getChange();s.execute(this.clone.root,this.clone.presences,ge.UndoRedo);const{opInfos:a,reverseOps:f}=s.execute(this.root,this.presences,ge.UndoRedo),d=r.getReversePresence();if(d&&f.push({type:"presence",value:d}),f.length>0&&this.internalHistory.pushRedo(f),!s.hasPresenceChange()&&a.length===0)return;this.localChanges.push(s),this.changeID=s.getID();const g=this.changeID.getActorID(),m=[];a.length>0&&m.push({type:"local-change",source:ge.UndoRedo,value:{message:s.getMessage()||"",operations:a,actor:g,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&m.push({type:"presence-changed",source:ge.UndoRedo,value:{clientID:g,presence:this.getPresence(g)}}),this.publish(m)}redo(){if(this.isUpdating)throw new Error("Redo is not allowed during an update");const e=this.internalHistory.popRedo();if(e===void 0)throw new Error("There is no operation to be redone");this.ensureClone();const r=qr.create(this.changeID.next(),this.clone.root,this.clone.presences.get(this.changeID.getActorID())||{});for(const y of e){if(!(y instanceof $t)){new Ua(r,Mt(this.clone.presences.get(this.changeID.getActorID()))).set(y.value,{addToHistory:!0});continue}const A=r.issueTimeTicket();y.setExecutedAt(A),r.push(y)}const s=r.getChange();s.execute(this.clone.root,this.clone.presences,ge.UndoRedo);const{opInfos:a,reverseOps:f}=s.execute(this.root,this.presences,ge.UndoRedo),d=r.getReversePresence();if(d&&f.push({type:"presence",value:d}),f.length>0&&this.internalHistory.pushUndo(f),!s.hasPresenceChange()&&a.length===0)return;this.localChanges.push(s),this.changeID=s.getID();const g=this.changeID.getActorID(),m=[];a.length>0&&m.push({type:"local-change",source:ge.UndoRedo,value:{message:s.getMessage()||"",operations:a,actor:g,clientSeq:s.getID().getClientSeq(),serverSeq:s.getID().getServerSeq()},rawChange:this.isEnableDevtools()?s.toStruct():void 0}),s.hasPresenceChange()&&m.push({type:"presence-changed",source:ge.UndoRedo,value:{clientID:g,presence:this.getPresence(g)}}),this.publish(m)}getUndoStackForTest(){return this.internalHistory.getUndoStackForTest()}getRedoStackForTest(){return this.internalHistory.getRedoStackForTest()}}function pv(o,e){return r=>async s=>(o&&s.header.set("x-api-key",o),e&&s.header.set("authorization",e),await r(s))}const dd={name:"yorkie-js-sdk",version:"0.4.25",description:"Yorkie JS SDK",main:"./dist/yorkie-js-sdk.js",typings:"./dist/yorkie-js-sdk.d.ts",files:["dist"],scripts:{build:"tsc && vite build","build:proto":"npx buf generate","build:docs":"typedoc","build:examples":"npm run build --workspace examples","build:ghpages":"mkdir -p ghpages/examples && cp -r docs ghpages/api-reference && find examples -name 'dist' -type d -exec sh -c 'cp -r {} ghpages/examples/$(basename $(dirname {}))' \\;",dev:"vite build -c vite.preview.ts && vite preview",test:"vitest run","test:watch":"vitest","test:bench":"vitest bench","test:ci":"vitest run --coverage","test:yorkie.dev":"TEST_RPC_ADDR=https://api.yorkie.dev vitest run --coverage",lint:"eslint . --fix --max-warnings=0 --ext .ts",prepare:"npm run build"},engines:{node:">=18.0.0",npm:">=7.1.0"},repository:{type:"git",url:"git+https://github.com/yorkie-team/yorkie-js-sdk.git"},author:{name:"hackerwins",email:"susukang98@gmail.com"},license:"Apache-2.0",bugs:{url:"https://github.com/yorkie-team/yorkie-js-sdk/issues"},homepage:"https://github.com/yorkie-team/yorkie-js-sdk#readme",devDependencies:{"@bufbuild/buf":"^1.28.1","@bufbuild/protoc-gen-es":"^1.6.0","@connectrpc/protoc-gen-connect-es":"^1.2.0","@types/google-protobuf":"^3.15.5","@types/jsdom":"^21.1.3","@types/long":"^4.0.1","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","@vitest/coverage-istanbul":"^0.34.5","@vitest/coverage-v8":"^0.34.5",eslint:"^8.19.0","eslint-plugin-jsdoc":"^39.3.3","eslint-plugin-prettier":"^4.2.1","eslint-plugin-tsdoc":"^0.2.16",husky:"^8.0.3",jsdom:"^22.1.0",prettier:"^2.7.1","ts-node":"^10.9.1",typedoc:"^0.25.13",typescript:"^4.7.4","typescript-transform-paths":"^3.3.1",vite:"^4.4.9","vite-plugin-commonjs":"^0.10.1","vite-plugin-dts":"^3.9.1","vite-tsconfig-paths":"^4.2.1",vitest:"^0.34.5","vitest-environment-custom-jsdom":"file:test/vitest/env"},dependencies:{"@bufbuild/protobuf":"^1.6.0","@connectrpc/connect":"^1.2.0","@connectrpc/connect-web":"^1.2.0",long:"^5.2.0"},husky:{hooks:{"pre-commit":"npm run lint"}},workspaces:["examples/*"]};function mv(){return o=>async e=>(e.header.set("x-yorkie-user-agent",dd.name+"/"+dd.version),await o(e))}var Xi=(o=>(o.Manual="manual",o.Realtime="realtime",o.RealtimePushOnly="realtime-pushonly",o.RealtimeSyncOff="realtime-syncoff",o))(Xi||{}),hd=(o=>(o.Deactivated="deactivated",o.Activated="activated",o))(hd||{});const uo={syncLoopDuration:50,retrySyncLoopDelay:1e3,reconnectStreamDelay:1e3};class nl{constructor(e,r){u(this,"id"),u(this,"key"),u(this,"status"),u(this,"attachmentMap"),u(this,"apiKey"),u(this,"syncLoopDuration"),u(this,"reconnectStreamDelay"),u(this,"retrySyncLoopDelay"),u(this,"rpcClient"),r=r||uo,this.key=r.key?r.key:rd(),this.status="deactivated",this.attachmentMap=new Map,this.apiKey=r.apiKey||"",this.syncLoopDuration=r.syncLoopDuration||uo.syncLoopDuration,this.reconnectStreamDelay=r.reconnectStreamDelay||uo.reconnectStreamDelay,this.retrySyncLoopDelay=r.retrySyncLoopDelay||uo.retrySyncLoopDelay,this.rpcClient=gm(oy,Bm({baseUrl:e,interceptors:[pv(r.apiKey,r.token),mv()]}))}activate(){return this.isActive()?Promise.resolve():this.rpcClient.activateClient({clientKey:this.key},{headers:{"x-shard-key":this.apiKey}}).then(e=>{this.id=e.clientId,this.status="activated",this.runSyncLoop(),_.info(`[AC] c:"${this.getKey()}" activated, id:"${this.id}"`)}).catch(e=>{throw _.error(`[AC] c:"${this.getKey()}" err :`,e),e})}deactivate(){return this.status==="deactivated"?Promise.resolve():this.rpcClient.deactivateClient({clientId:this.id},{headers:{"x-shard-key":this.apiKey}}).then(()=>{for(const[e,r]of this.attachmentMap)r.doc.applyStatus(An.Detached),this.detachInternal(e);this.status="deactivated",_.info(`[DC] c"${this.getKey()}" deactivated`)}).catch(e=>{throw _.error(`[DC] c:"${this.getKey()}" err :`,e),e})}attach(e,r={}){var a;if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);if(e.getStatus()!==An.Detached)throw new le(se.DocumentNotDetached,`${e.getKey()} is not detached`);e.setActor(this.id),e.update((f,d)=>d.set(r.initialPresence||{}));const s=(a=r.syncMode)!=null?a:"realtime";return this.rpcClient.attachDocument({clientId:this.id,changePack:Re.toChangePack(e.createChangePack())},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(async f=>{const d=Re.fromChangePack(f.changePack);return e.applyChangePack(d),e.getStatus()===An.Removed||(e.applyStatus(An.Attached),this.attachmentMap.set(e.getKey(),new ov(this.reconnectStreamDelay,e,f.documentId,s)),s!=="manual"&&await this.runWatchLoop(e.getKey()),_.info(`[AD] c:"${this.getKey()}" attaches d:"${e.getKey()}"`)),e}).catch(f=>{throw _.error(`[AD] c:"${this.getKey()}" err :`,f),f})}detach(e,r={}){var a;if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);const s=this.attachmentMap.get(e.getKey());if(!s)throw new le(se.DocumentNotAttached,`${e.getKey()} is not attached`);return e.update((f,d)=>d.clear()),this.rpcClient.detachDocument({clientId:this.id,documentId:s.docID,changePack:Re.toChangePack(e.createChangePack()),removeIfNotAttached:(a=r.removeIfNotAttached)!=null?a:!1},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(f=>{const d=Re.fromChangePack(f.changePack);return e.applyChangePack(d),e.getStatus()!==An.Removed&&e.applyStatus(An.Detached),this.detachInternal(e.getKey()),_.info(`[DD] c:"${this.getKey()}" detaches d:"${e.getKey()}"`),e}).catch(f=>{throw _.error(`[DD] c:"${this.getKey()}" err :`,f),f})}async changeSyncMode(e,r){if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);const s=this.attachmentMap.get(e.getKey());if(!s)throw new le(se.DocumentNotAttached,`${e.getKey()} is not attached`);const a=s.syncMode;return a===r?e:(s.changeSyncMode(r),r==="manual"?(s.cancelWatchStream(),e):(r==="realtime"&&(s.remoteChangeEventReceived=!0),a==="manual"&&await this.runWatchLoop(e.getKey()),e))}sync(e){if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);const r=[];if(e){const s=this.attachmentMap.get(e.getKey());if(!s)throw new le(se.DocumentNotAttached,`${e.getKey()} is not attached`);r.push(this.syncInternal(s,"realtime"))}else this.attachmentMap.forEach(s=>{r.push(this.syncInternal(s,s.syncMode))});return Promise.all(r)}remove(e){if(!this.isActive())throw new le(se.ClientNotActive,`${this.key} is not active`);const r=this.attachmentMap.get(e.getKey());if(!r)throw new le(se.DocumentNotAttached,`${e.getKey()} is not attached`);e.setActor(this.id);const s=Re.toChangePack(e.createChangePack());return s.isRemoved=!0,this.rpcClient.removeDocument({clientId:this.id,documentId:r.docID,changePack:s},{headers:{"x-shard-key":`${this.apiKey}/${e.getKey()}`}}).then(a=>{const f=Re.fromChangePack(a.changePack);e.applyChangePack(f),this.detachInternal(e.getKey()),_.info(`[RD] c:"${this.getKey()}" removes d:"${e.getKey()}"`)}).catch(a=>{throw _.error(`[RD] c:"${this.getKey()}" err :`,a),a})}getID(){return this.id}getKey(){return this.key}isActive(){return this.status==="activated"}getStatus(){return this.status}runSyncLoop(){const e=()=>{if(!this.isActive()){_.debug(`[SL] c:"${this.getKey()}" exit sync loop`);return}const r=[];for(const[,s]of this.attachmentMap)s.needRealtimeSync()&&(s.remoteChangeEventReceived=!1,r.push(this.syncInternal(s,s.syncMode)));Promise.all(r).then(()=>setTimeout(e,this.syncLoopDuration)).catch(s=>{_.error(`[SL] c:"${this.getKey()}" sync failed:`,s),setTimeout(e,this.retrySyncLoopDelay)})};_.debug(`[SL] c:"${this.getKey()}" run sync loop`),e()}async runWatchLoop(e){const r=this.attachmentMap.get(e);if(!r)throw new le(se.DocumentNotAttached,`${e} is not attached`);return r.runWatchLoop(s=>{if(!this.isActive())return Promise.reject(new le(se.ClientNotActive,`${this.key} is not active`));const a=new AbortController,f=this.rpcClient.watchDocument({clientId:this.id,documentId:r.docID},{headers:{"x-shard-key":`${this.apiKey}/${e}`},signal:a.signal});return r.doc.publish([{type:Ze.ConnectionChanged,value:ao.Connected}]),_.info(`[WD] c:"${this.getKey()}" watches d:"${e}"`),new Promise((d,g)=>{(async()=>{try{for await(const y of f)this.handleWatchDocumentsResponse(r,y),y.body.case==="initialization"&&d([f,a])}catch(y){r.doc.resetOnlineClients(),r.doc.publish([{type:Ze.Initialized,source:ge.Local,value:r.doc.getPresences()}]),r.doc.publish([{type:Ze.ConnectionChanged,value:ao.Disconnected}]),_.debug(`[WD] c:"${this.getKey()}" unwatches`),y instanceof be&&y.code!=h.Canceled&&s(),g(y)}})()})})}handleWatchDocumentsResponse(e,r){if(r.body.case==="event"&&r.body.value.type===Ws.DOCUMENT_CHANGED){e.remoteChangeEventReceived=!0;return}e.doc.applyWatchStream(r)}detachInternal(e){const r=this.attachmentMap.get(e);!r||(r.cancelWatchStream(),_.debug(`[WD] c:"${this.getKey()}" unwatches`),this.attachmentMap.delete(e))}syncInternal(e,r){const{doc:s,docID:a}=e,f=s.createChangePack();return this.rpcClient.pushPullChanges({clientId:this.id,documentId:a,changePack:Re.toChangePack(f),pushOnly:r==="realtime-pushonly"},{headers:{"x-shard-key":`${this.apiKey}/${s.getKey()}`}}).then(d=>{const g=Re.fromChangePack(d.changePack);if(g.hasChanges()&&(e.syncMode==="realtime-pushonly"||e.syncMode==="realtime-syncoff"))return s;s.applyChangePack(g),e.doc.publish([{type:Ze.SyncStatusChanged,value:lo.Synced}]),s.getStatus()===An.Removed&&this.detachInternal(s.getKey());const m=s.getKey(),y=g.getChangeSize();return _.info(`[PP] c:"${this.getKey()}" sync d:"${m}", push:${f.getChangeSize()} pull:${y} cp:${g.getCheckpoint().toTestString()}`),s}).catch(d=>{throw s.publish([{type:Ze.SyncStatusChanged,value:lo.SyncFailed}]),_.error(`[PP] c:"${this.getKey()}" err :`,d),d})}}const yv=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),vv={Client:nl,Document:tl,Primitive:Te,Text:Hi,Counter:Gi,Tree:Yi,IntType:an.IntegerCnt,LongType:an.LongCnt};typeof globalThis<"u"&&(globalThis.yorkie={Client:nl,Document:tl,Primitive:Te,Text:Hi,Counter:Gi,Tree:Yi,IntType:an.IntegerCnt,LongType:an.LongCnt}),i.Change=pr,i.Client=nl,i.ClientStatus=hd,i.Counter=Gi,i.Devtools=yv,i.DocEventType=Ze,i.Document=tl,i.DocumentStatus=An,i.DocumentSyncStatus=lo,i.EventSourceDevPanel=ud,i.EventSourceSDK=cd,i.OpSource=ge,i.Primitive=Te,i.StreamConnectionStatus=ao,i.SyncMode=Xi,i.Text=Hi,i.TimeTicket=Qe,i.Tree=Yi,i.converter=Re,i.default=vv,i.setLogLevel=fy,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(ku,ku.exports);const Ah=kv(ku.exports);var _p={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var n={}.hasOwnProperty;function i(){for(var l=[],c=0;c<arguments.length;c++){var u=arguments[c];if(!!u){var h=typeof u;if(h==="string"||h==="number")l.push(u);else if(Array.isArray(u)){if(u.length){var p=i.apply(null,u);p&&l.push(p)}}else if(h==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){l.push(u.toString());continue}for(var v in u)n.call(u,v)&&u[v]&&l.push(v)}}}return l.join(" ")}t.exports?(i.default=i,t.exports=i):window.classNames=i})()})(_p);const yc=_p.exports;var vc={exports:{}},Ca={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1=xn.exports,F1=Symbol.for("react.element"),j1=Symbol.for("react.fragment"),V1=Object.prototype.hasOwnProperty,J1=U1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K1={key:!0,ref:!0,__self:!0,__source:!0};function Lp(t,n,i){var l,c={},u=null,h=null;i!==void 0&&(u=""+i),n.key!==void 0&&(u=""+n.key),n.ref!==void 0&&(h=n.ref);for(l in n)V1.call(n,l)&&!K1.hasOwnProperty(l)&&(c[l]=n[l]);if(t&&t.defaultProps)for(l in n=t.defaultProps,n)c[l]===void 0&&(c[l]=n[l]);return{$$typeof:F1,type:t,key:u,ref:h,props:c,_owner:J1.current}}Ca.Fragment=j1;Ca.jsx=Lp;Ca.jsxs=Lp;(function(t){t.exports=Ca})(vc);const Le=vc.exports.jsx,Ti=vc.exports.jsxs;function bp(t){const[n,i]=xn.exports.useState(t.text||"");return Le("input",{className:yc({edit:t.editing,"new-todo":t.newTodo}),type:"text",placeholder:t.placeholder,value:n,onBlur:l=>{t.newTodo||t.onSave(l.target.value)},onChange:l=>{i(l.target.value)},onKeyDown:l=>{const c=l.target;l.which===13&&(t.onSave(c.value.trim()),t.newTodo&&i(""))}})}function W1(t){return Ti("header",{className:"header",children:[Le("h1",{children:"todos"}),Le(bp,{newTodo:!0,onSave:n=>{n.length!==0&&t.addTodo(n)},placeholder:"What needs to be done?"})]})}function q1(t){const[n,i]=xn.exports.useState(!1),{todo:l,completeTodo:c,editTodo:u,deleteTodo:h}=t;return Le("li",{className:yc({completed:l.completed,editing:n}),children:n?Le(bp,{text:l.text,editing:n,onSave:p=>{p.length===0?h(l.id):u(l.id,p),i(!1)}}):Ti("div",{className:"view",children:[Le("input",{id:`item-input-${l.id}`,className:"toggle",type:"checkbox",checked:l.completed,onChange:()=>c(l.id)}),Le("label",{htmlFor:`item-input-${l.id}`,onDoubleClick:()=>i(!0),children:l.text}),Le("button",{type:"button","aria-label":"Delete",className:"destroy",onClick:()=>h(l.id)})]})})}const H1={SHOW_ALL:"All",SHOW_ACTIVE:"Active",SHOW_COMPLETED:"Completed"};function G1(t){const{activeCount:n,completedCount:i,filter:l,onClearCompleted:c,onShow:u}=t;return Ti("footer",{className:"footer",children:[Ti("span",{className:"todo-count",children:[Le("strong",{children:n||"No"}),"\xA0",n===1?"item":"items"," left"]}),Le("ul",{className:"filters",children:["SHOW_ALL","SHOW_ACTIVE","SHOW_COMPLETED"].map(h=>Le("li",{children:Le("button",{type:"button",className:yc({selected:h===l}),style:{cursor:"pointer"},onClick:()=>u(h),children:H1[h]})},h))}),!!i&&Le("button",{type:"button",className:"clear-completed",onClick:c,children:"Clear completed"})]})}const Y1={SHOW_ALL:t=>!0,SHOW_ACTIVE:t=>!t.completed,SHOW_COMPLETED:t=>t.completed};function X1(t){const[n,i]=xn.exports.useState("SHOW_ALL"),{todos:l,actions:c}=t,u=l.filter(Y1[n]),h=l.reduce((v,T)=>T.completed?v+1:v,0),p=l.length-h;return l.length===0?null:Ti("section",{className:"main",children:[Le("input",{className:"toggle-all",type:"checkbox",defaultChecked:h===l.length,onChange:c.completeAll}),Le("ul",{className:"todo-list",children:u.map(v=>Le(q1,{todo:v,editTodo:c.editTodo,deleteTodo:c.deleteTodo,completeTodo:c.completeTodo},v.id))}),Le(G1,{completedCount:h,activeCount:p,filter:n,onClearCompleted:()=>c.clearCompleted(),onShow:i})]})}const Q1=[{id:0,text:"Yorkie JS SDK",completed:!1},{id:1,text:"Garbage collection",completed:!1},{id:2,text:"RichText datatype",completed:!1}];function Z1(){const[t]=xn.exports.useState(()=>new Ah.Document(`react-todomvc-${new Date().toISOString().substring(0,10).replace(/-/g,"")}`)),[n,i]=xn.exports.useState([]),l={addTodo:c=>{t==null||t.update(u=>{u.todos.push({id:u.todos.reduce((h,p)=>Math.max(p.id,h),-1)+1,completed:!1,text:c})})},deleteTodo:c=>{t==null||t.update(u=>{let h;for(const p of u.todos)if(p.id===c){h=p;break}h&&u.todos.deleteByID(h.getID())})},editTodo:(c,u)=>{t==null||t.update(h=>{let p;for(const v of h.todos)if(v.id===c){p=v;break}p&&(p.text=u)})},completeTodo:c=>{t==null||t.update(u=>{let h;for(const p of u.todos)if(p.id===c){h=p;break}h&&(h.completed=!h.completed)})},clearCompleted:()=>{t==null||t.update(c=>{for(const u of c.todos)if(u.completed){const h=u;c.todos.deleteByID(h.getID())}},"")}};return xn.exports.useEffect(()=>{const c=new Ah.Client("https://api.yorkie.dev",{apiKey:"cedaovjuioqlk4pjqn6g"});async function u(h,p){await c.activate(),await c.attach(h),h.update(v=>{v.todos||(v.todos=Q1)},"create default todos if not exists"),h.subscribe(v=>{p(h.getRoot().todos)}),p(h.getRoot().todos)}u(t,h=>{i(h)})},[]),Ti("div",{className:"App",children:[Le(W1,{addTodo:l.addTodo}),Le(X1,{todos:n,actions:l})]})}Pl.createRoot(document.getElementById("root")).render(Le(Z1,{}));
